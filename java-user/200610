From java-user-return-23663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 01 11:05:33 2006
Return-Path: <java-user-return-23663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9690 invoked from network); 1 Oct 2006 11:05:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Oct 2006 11:05:32 -0000
Received: (qmail 47907 invoked by uid 500); 1 Oct 2006 11:05:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47764 invoked by uid 500); 1 Oct 2006 11:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47753 invoked by uid 99); 1 Oct 2006 11:05:27 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 04:05:27 -0700
X-ASF-Spam-Status: No, hits=1.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
Received: from [130.88.13.7] ([130.88.13.7:4255] helo=curlew.cs.man.ac.uk)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 37/E4-01321-5F0AF154 for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 04:05:26 -0700
Received: from gomwe.mcc.ac.uk ([10.2.18.2])
	by curlew.cs.man.ac.uk with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GTz8L-000KjQ-0E
	for java-user@lucene.apache.org; Sun, 01 Oct 2006 12:05:21 +0100
Received: from [87.54.11.122] (port=1936 helo=[10.49.3.183])
	by gomwe.mcc.ac.uk with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GTz8K-000HVH-B1
	for java-user@lucene.apache.org; Sun, 01 Oct 2006 12:05:20 +0100
Message-ID: <451FAEF8.2000300@yahoo.co.uk>
Date: Sun, 01 Oct 2006 13:05:12 +0100
From: Rahil <qamar_rahil@yahoo.co.uk>
Reply-To:  qamar_rahil@yahoo.co.uk
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.13) Gecko/20060414
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Performing a like query
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated-Sender: Rahil Qamar from ([10.49.3.183]) [87.54.11.122]:1936
X-Authenticated-From: R.Qamar@postgrad.manchester.ac.uk
X-UoM: Scanned by the University Mail System. See http://www.itservices.manchester.ac.uk/email/filtering/information/ for details.
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I have a custom-built Analyzer where I tokenize all non-whitespace 
characters as well available in the field "TERM" (which is the only 
field being tokenised).

If I now query my index file for a term "6/12" for instance, I get back 
only ONE result

SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
1.0    0    260278007    6/12 (finding)

instead of TWO. There is another token in the index file of the form

2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en

At first it wasn't quite obvious to me why this was happening. But after 
playing around a bit I realised that if I pass a query "R-eye=6/12" 
instead, I will get this second result (but not the first one now). Is 
there a way to tweak the  Query query = parser.parse(searchString) 
method so that I can get both the records if I query for "6/12". 
Something like a 'contains' query in Java.

Will appreciate all help. Thanks a lot

Regards
Rahil


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 01 11:52:41 2006
Return-Path: <java-user-return-23664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28294 invoked from network); 1 Oct 2006 11:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Oct 2006 11:52:40 -0000
Received: (qmail 62796 invoked by uid 500); 1 Oct 2006 11:52:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62770 invoked by uid 500); 1 Oct 2006 11:52:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62759 invoked by uid 99); 1 Oct 2006 11:52:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 04:52:35 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.177] ([64.233.166.177:38714] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BD/A5-01321-20CAF154 for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 04:52:34 -0700
Received: by py-out-1112.google.com with SMTP id s49so906550pyc
        for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 04:52:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n7pjj9/9/bzSU2z1DW0jcNoCzzUKqBU/OQV4VVtaHquSqLDB/vynW4X5VhOz2BT63HA14uNqO45n9TdALRauwHeedz70eN4158lR52hYp0SnYt1c/AZ1TCdCHe3DTPjRm1n4klQSNsGy6+aEUVPQTw8lOFBTXnX1gSVJI2mfPRs=
Received: by 10.35.79.3 with SMTP id g3mr5291801pyl;
        Sun, 01 Oct 2006 04:52:31 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Sun, 1 Oct 2006 04:52:31 -0700 (PDT)
Message-ID: <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>
Date: Sun, 1 Oct 2006 07:52:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, qamar_rahil@yahoo.co.uk
Subject: Re: Performing a like query
In-Reply-To: <451FAEF8.2000300@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44422_17061134.1159703551572"
References: <451FAEF8.2000300@yahoo.co.uk>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44422_17061134.1159703551572
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Most often, from what I've seen on this e-mail list, unexpected results are
because you're not indexing on the tokens you *think* you're indexing. Or
not searching on them. By that I mean that the analyzers you're using are
behaving in ways you don't expect.

That said, I think you're getting exactly what you should. I suspect you're
indexing tokens as follows
doc1: "6/12"  and "(finding)"
doc2: "R-eye=6/12" and "(finding)"

So it makes perfect sense that searching in 6/12 returns doc1 and search on
R-eye=6/12 returns doc 2

So, first question: Have you actually used something like Luke (google luke
lucene) to examine your index and see if what you've put in there is what
you expect? What analyzer is your custom analyzer built upon and is it doing
anything you're unaware of (for instance, lower-casing the 'R' in your
second example)?

Here's what I'd do.
1> get Luke and see what's actually in your index.
2> use searcher.explain (?) to see the query you're actually emitting.
3> if you make no headway, post the smallest code snippets you can that
illustrate the problem. Folks would need the indexing AND searching code.

As far as queryies like "contains" in java.... Well sure. Write a filter
that filters on regular expressions or wildcards (you'll need
WildcardTermEnum and RegexTermEnum). Or index things differently (e.g. index
"6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on doc 2.
Now your searches for "6/12" will work. Or index "6" "/", "12" and "finding"
on doc1, index similarly for doc2, and use a SpanNearQuery with an
appropriate span value. Or....

This is all gobbldeygook if you haven't gotten a copy of "Lucene In Action",
which you should read in order to get the most out of Lucene. It's for the
1.4 code base, but the 2.0 Lucene code base isn't that much different. More
importantly, it ties lots of stuff together. Also, the junit tests that come
along with the Lucene code can be invaluable to show you how to do
something.

Hope this helps
Erick

On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>
> Hi
>
> I have a custom-built Analyzer where I tokenize all non-whitespace
> characters as well available in the field "TERM" (which is the only
> field being tokenised).
>
> If I now query my index file for a term "6/12" for instance, I get back
> only ONE result
>
> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
> 1.0    0    260278007    6/12 (finding)
>
> instead of TWO. There is another token in the index file of the form
>
> 2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en
>
> At first it wasn't quite obvious to me why this was happening. But after
> playing around a bit I realised that if I pass a query "R-eye=6/12"
> instead, I will get this second result (but not the first one now). Is
> there a way to tweak the  Query query = parser.parse(searchString)
> method so that I can get both the records if I query for "6/12".
> Something like a 'contains' query in Java.
>
> Will appreciate all help. Thanks a lot
>
> Regards
> Rahil
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44422_17061134.1159703551572--

From java-user-return-23665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 01 21:48:23 2006
Return-Path: <java-user-return-23665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42174 invoked from network); 1 Oct 2006 21:48:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Oct 2006 21:48:23 -0000
Received: (qmail 18206 invoked by uid 500); 1 Oct 2006 21:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18175 invoked by uid 500); 1 Oct 2006 21:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18164 invoked by uid 99); 1 Oct 2006 21:48:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 14:48:17 -0700
X-ASF-Spam-Status: No, hits=1.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
Received: from [130.88.94.110] ([130.88.94.110:1297] helo=gannet.scg.man.ac.uk)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C3/38-05102-E9730254 for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 14:48:16 -0700
Received: from gerhayn.mcc.ac.uk ([10.2.18.1])
	by gannet.scg.man.ac.uk with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GU9AR-000DZE-NJ
	for java-user@lucene.apache.org; Sun, 01 Oct 2006 22:48:11 +0100
Received: from [87.54.11.122] (port=1887 helo=[10.49.3.183])
	by gerhayn.mcc.ac.uk with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GU9AR-000D6k-C1
	for java-user@lucene.apache.org; Sun, 01 Oct 2006 22:48:11 +0100
Message-ID: <452045A4.8000501@yahoo.co.uk>
Date: Sun, 01 Oct 2006 23:48:04 +0100
From: Rahil <qamar_rahil@yahoo.co.uk>
Reply-To:  qamar_rahil@yahoo.co.uk
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.13) Gecko/20060414
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performing a like query
References: <451FAEF8.2000300@yahoo.co.uk> <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>
In-Reply-To: <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated-Sender: Rahil Qamar from ([10.49.3.183]) [87.54.11.122]:1887
X-Authenticated-From: R.Qamar@postgrad.manchester.ac.uk
X-UoM: Scanned by the University Mail System. See http://www.itservices.manchester.ac.uk/email/filtering/information/ for details.
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erick

Thanks for your response. There's a lot to chew on in your reply and Im 
looking at the suggestions you've made.

Yeah I have Luke installed and have queried my index but there isn't any 
great explanation Im getting out of it.  A query for "6/12" is sent as 
"TERM:6/12" which is quite straight-forward. I did an explanation of the 
query in my code though and got some more information but that too 
wasn't of much help either.
--
Explanation explain = searcher.explain(query,0);

OUTPUT:
query: +TERM:6/12
explain.getDescription() : weight(TERM:6/12 in 0), product of:
Detail 0 : 0.99999994 = queryWeight(TERM:6/12), product of:
  2.0986123 = idf(docFreq=1)
  0.47650534 = queryNorm

Detail 1 : 0.0 = fieldWeight(TERM:6/12 in 0), product of:
  0.0 = tf(termFreq(TERM:6/12)=0)
  2.0986123 = idf(docFreq=1)
  0.5 = fieldNorm(field=TERM, doc=0)

Number of results returned: 1
SampleLucene.displayIndexResults
SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
1.0    0    260278007    6/12 (finding)
--

My tokeniser called BaseAnalyzer extends Analyzer. Since I wanted to 
retain all non whitespace characters and not just letters and digits, I 
introduced the following block of code in the overridden tokenStream( )

--
public TokenStream tokenStream(String fieldName, Reader reader) {
          
        return new CharTokenizer(reader) {

            protected char normalize(char c) {
                     return Character.toLowerCase(c);
            }
                protected boolean isTokenChar(char c) {
                       boolean type = false;
                       boolean space =   Character.isWhitespace(c);
                       boolean letDig =  Character.isLetterOrDigit(c);
  
                        if(letDig && !space) //letter or digit but not 
whitespace
                            type = true;
                        else if(!letDig && !space)   //not letter,digit 
or whitespace (retain non-whitespace characters)
                            type = true;
                        else if( !letDig && space)              //is not 
a letter or digit but is a whitespace
                            type = false;
                return type;
            }
        };
      }

---
The problem is that when the term "6/12 (finding)" is tokenised, two 
tokens are generated viz. '6/12' and '(finding)'. Therefore when I 
search for '6/12' this term is returned as in a way it is an EXACT token 
match.

However when the term "R-eye=6/12 (finding)" is tokenised it again 
results in two tokens viz. 'R-eye=6/12' and '(finding)'. So now if I 
look for '6/12' its no more an exact match since there is no token with 
this EXACT value. A simple searcher.search(query) isnt useful to pull 
out the partial token match.

I think it wont be useful to create separate tokens for "6", "/", "12" 
or "R","-","eye","=", and so on. Im having a look at the RegexTermEnum 
and WildcardTermEnum as they might possibily help.

Would appreciate your comments on the BaseAnalyzer tokenizer and query 
explanation Ive received so far.

Thanks
Rahil

Erick Erickson wrote:

> Most often, from what I've seen on this e-mail list, unexpected 
> results are
> because you're not indexing on the tokens you *think* you're indexing. Or
> not searching on them. By that I mean that the analyzers you're using are
> behaving in ways you don't expect.
>
> That said, I think you're getting exactly what you should. I suspect 
> you're
> indexing tokens as follows
> doc1: "6/12"  and "(finding)"
> doc2: "R-eye=6/12" and "(finding)"
>
> So it makes perfect sense that searching in 6/12 returns doc1 and 
> search on
> R-eye=6/12 returns doc 2
>
> So, first question: Have you actually used something like Luke (google 
> luke
> lucene) to examine your index and see if what you've put in there is what
> you expect? What analyzer is your custom analyzer built upon and is it 
> doing
> anything you're unaware of (for instance, lower-casing the 'R' in your
> second example)?
>
> Here's what I'd do.
> 1> get Luke and see what's actually in your index.
> 2> use searcher.explain (?) to see the query you're actually emitting.
> 3> if you make no headway, post the smallest code snippets you can that
> illustrate the problem. Folks would need the indexing AND searching code.
>
> As far as queryies like "contains" in java.... Well sure. Write a filter
> that filters on regular expressions or wildcards (you'll need
> WildcardTermEnum and RegexTermEnum). Or index things differently (e.g. 
> index
> "6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on 
> doc 2.
> Now your searches for "6/12" will work. Or index "6" "/", "12" and 
> "finding"
> on doc1, index similarly for doc2, and use a SpanNearQuery with an
> appropriate span value. Or....
>
> This is all gobbldeygook if you haven't gotten a copy of "Lucene In 
> Action",
> which you should read in order to get the most out of Lucene. It's for 
> the
> 1.4 code base, but the 2.0 Lucene code base isn't that much different. 
> More
> importantly, it ties lots of stuff together. Also, the junit tests 
> that come
> along with the Lucene code can be invaluable to show you how to do
> something.
>
> Hope this helps
> Erick
>
> On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>
>>
>> Hi
>>
>> I have a custom-built Analyzer where I tokenize all non-whitespace
>> characters as well available in the field "TERM" (which is the only
>> field being tokenised).
>>
>> If I now query my index file for a term "6/12" for instance, I get back
>> only ONE result
>>
>> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>> 1.0    0    260278007    6/12 (finding)
>>
>> instead of TWO. There is another token in the index file of the form
>>
>> 2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en
>>
>> At first it wasn't quite obvious to me why this was happening. But after
>> playing around a bit I realised that if I pass a query "R-eye=6/12"
>> instead, I will get this second result (but not the first one now). Is
>> there a way to tweak the  Query query = parser.parse(searchString)
>> method so that I can get both the records if I query for "6/12".
>> Something like a 'contains' query in Java.
>>
>> Will appreciate all help. Thanks a lot
>>
>> Regards
>> Rahil
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 01 22:49:03 2006
Return-Path: <java-user-return-23666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50044 invoked from network); 1 Oct 2006 22:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Oct 2006 22:49:03 -0000
Received: (qmail 58122 invoked by uid 500); 1 Oct 2006 22:48:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58091 invoked by uid 500); 1 Oct 2006 22:48:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58080 invoked by uid 99); 1 Oct 2006 22:48:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 15:48:57 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=markrmiller@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.235] ([66.249.82.235:6082] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D9/39-05102-7D540254 for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 15:48:56 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1401763wxc
        for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 15:48:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=uIrs6ecV54LZi6YfCAQjUbW7Mm2GS0k/wCQfQoFtiJ3B6Tuq7x71lNKsKsiPvH97/eZAO7nnXsegflrJ1+pOKhUJc4MnDx5phFszTm10eBDzilyC/BosKR5pr0pP2ciGVBPOCecygL+5q2VVCrJwtL+pgptqzTx0NULS9Sxj0k8=
Received: by 10.70.100.14 with SMTP id x14mr5532161wxb;
        Sun, 01 Oct 2006 15:48:52 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.gmail.com with ESMTP id 26sm6939279wra.2006.10.01.15.48.51;
        Sun, 01 Oct 2006 15:48:52 -0700 (PDT)
Message-ID: <452045ED.5040504@gmail.com>
Date: Sun, 01 Oct 2006 18:49:17 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Sorting from multiple indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was browsing the sort javadocs and ran into this:

This class is not set up to be able to efficiently sort hits from more 
than one index simultaneously.

Does this mean sorting with a muiltsearcher is very slow? Anyone have 
any experience?

- mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 01 23:53:13 2006
Return-Path: <java-user-return-23667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58442 invoked from network); 1 Oct 2006 23:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Oct 2006 23:53:13 -0000
Received: (qmail 1251 invoked by uid 500); 1 Oct 2006 23:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 187 invoked by uid 500); 1 Oct 2006 23:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 160 invoked by uid 99); 1 Oct 2006 23:53:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Oct 2006 16:53:07 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.183] ([64.233.166.183:23883] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F5/3A-05102-8D450254 for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 16:53:03 -0700
Received: by py-out-1112.google.com with SMTP id s49so1079429pyc
        for <java-user@lucene.apache.org>; Sun, 01 Oct 2006 16:52:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=O2+lY5AFdOrdET+E0X2u5JaOmpdzl5MTB8fq4xCBVW7RRdN+Fe6v6TIzBVeGfyFgjf9e0KRl2Dt49OJ52vcSXcwY/A75VGoIvci8H+HgQsNLYWm+kb8Uv7h9icMbXJmAku2LVI5KS7TJWu0O1so1wh5I2MpkrdRiAU0/XuYqTH4=
Received: by 10.35.135.12 with SMTP id m12mr6244061pyn;
        Sun, 01 Oct 2006 16:52:14 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Sun, 1 Oct 2006 16:52:14 -0700 (PDT)
Message-ID: <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com>
Date: Sun, 1 Oct 2006 19:52:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, qamar_rahil@yahoo.co.uk
Subject: Re: Performing a like query
In-Reply-To: <452045A4.8000501@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49319_23399116.1159746734301"
References: <451FAEF8.2000300@yahoo.co.uk>
	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>
	 <452045A4.8000501@yahoo.co.uk>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_49319_23399116.1159746734301
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I'm not the greatest expert, but a quick look doesn't show me anything
obvious. But I have to ask, wouldn't WhiteSpaceAnalyzer work for you?
Although I don't remember whether WhiteSpaceAnalyzer lowercases or not.

It sure looks like you're getting reasonable results given how you're
tokenizing.

If not that, you might want to think about PatternAnalyzer. It's in the
memory contribution section, see import
org.apache.lucene.index.memory.PatternAnalyzer. One note of caution, the
regex identifies what is NOT a token, rather than what is. This threw me for
a bit.

I still claim that you could break the tokens up like "6", "/", "12", and
make SpanNearQuery work with a span of 0 (or 1, I don't remember right now),
but that may well be more trouble than it's worth, it's up to you of course.
What you get out of this is, essentially, is a query that's only satisfied
if the terms you specify are right next to each other. So you'd find both
your documents in your example, since you would have tokenized "6", "/",
"12" in, say positions 0, 1, 2 in doc1 and 4, 5, 6 in the second doc. But
since they're tokens that are next to each other in each doc, searching with
a SpanNearQuery for "6", "/", and "12" that are "right next to each other",
which you specify with a slop of 0 as I remember you should get both.

Alternatively, if you tokenize it this way, a PhraseQuery might work as
well, Thus, searching for "6 / 12" (as a phrase query and note the spaces)
might be just what you want. You'd have to tokenize the query, but that's
relatively easy. This is probably much simpler than a SpanNearQuery now that
I think about it.....

Be aware that if you use the *TermEnums we've been talking about, you'll
probably wind up wrapping them in a ConstantScoreQuery. And if you have no
*other* terms, you won't get any relevancy out of your search. This may be
important.....

Anyway, that's as creative as I can be Sunday night <G>. Best of luck....

Erick

On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>
> Hi Erick
>
> Thanks for your response. There's a lot to chew on in your reply and Im
> looking at the suggestions you've made.
>
> Yeah I have Luke installed and have queried my index but there isn't any
> great explanation Im getting out of it.  A query for "6/12" is sent as
> "TERM:6/12" which is quite straight-forward. I did an explanation of the
> query in my code though and got some more information but that too
> wasn't of much help either.
> --
> Explanation explain = searcher.explain(query,0);
>
> OUTPUT:
> query: +TERM:6/12
> explain.getDescription() : weight(TERM:6/12 in 0), product of:
> Detail 0 : 0.99999994 = queryWeight(TERM:6/12), product of:
>   2.0986123 = idf(docFreq=1)
>   0.47650534 = queryNorm
>
> Detail 1 : 0.0 = fieldWeight(TERM:6/12 in 0), product of:
>   0.0 = tf(termFreq(TERM:6/12)=0)
>   2.0986123 = idf(docFreq=1)
>   0.5 = fieldNorm(field=TERM, doc=0)
>
> Number of results returned: 1
> SampleLucene.displayIndexResults
> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
> 1.0    0    260278007    6/12 (finding)
> --
>
> My tokeniser called BaseAnalyzer extends Analyzer. Since I wanted to
> retain all non whitespace characters and not just letters and digits, I
> introduced the following block of code in the overridden tokenStream( )
>
> --
> public TokenStream tokenStream(String fieldName, Reader reader) {
>
>         return new CharTokenizer(reader) {
>
>             protected char normalize(char c) {
>                      return Character.toLowerCase(c);
>             }
>                 protected boolean isTokenChar(char c) {
>                        boolean type = false;
>                        boolean space =   Character.isWhitespace(c);
>                        boolean letDig =  Character.isLetterOrDigit(c);
>
>                         if(letDig && !space) //letter or digit but not
> whitespace
>                             type = true;
>                         else if(!letDig && !space)   //not letter,digit
> or whitespace (retain non-whitespace characters)
>                             type = true;
>                         else if( !letDig && space)              //is not
> a letter or digit but is a whitespace
>                             type = false;
>                 return type;
>             }
>         };
>       }
>
> ---
> The problem is that when the term "6/12 (finding)" is tokenised, two
> tokens are generated viz. '6/12' and '(finding)'. Therefore when I
> search for '6/12' this term is returned as in a way it is an EXACT token
> match.
>
> However when the term "R-eye=6/12 (finding)" is tokenised it again
> results in two tokens viz. 'R-eye=6/12' and '(finding)'. So now if I
> look for '6/12' its no more an exact match since there is no token with
> this EXACT value. A simple searcher.search(query) isnt useful to pull
> out the partial token match.
>
> I think it wont be useful to create separate tokens for "6", "/", "12"
> or "R","-","eye","=", and so on. Im having a look at the RegexTermEnum
> and WildcardTermEnum as they might possibily help.
>
> Would appreciate your comments on the BaseAnalyzer tokenizer and query
> explanation Ive received so far.
>
> Thanks
> Rahil
>
> Erick Erickson wrote:
>
> > Most often, from what I've seen on this e-mail list, unexpected
> > results are
> > because you're not indexing on the tokens you *think* you're indexing.
> Or
> > not searching on them. By that I mean that the analyzers you're using
> are
> > behaving in ways you don't expect.
> >
> > That said, I think you're getting exactly what you should. I suspect
> > you're
> > indexing tokens as follows
> > doc1: "6/12"  and "(finding)"
> > doc2: "R-eye=6/12" and "(finding)"
> >
> > So it makes perfect sense that searching in 6/12 returns doc1 and
> > search on
> > R-eye=6/12 returns doc 2
> >
> > So, first question: Have you actually used something like Luke (google
> > luke
> > lucene) to examine your index and see if what you've put in there is
> what
> > you expect? What analyzer is your custom analyzer built upon and is it
> > doing
> > anything you're unaware of (for instance, lower-casing the 'R' in your
> > second example)?
> >
> > Here's what I'd do.
> > 1> get Luke and see what's actually in your index.
> > 2> use searcher.explain (?) to see the query you're actually emitting.
> > 3> if you make no headway, post the smallest code snippets you can that
> > illustrate the problem. Folks would need the indexing AND searching
> code.
> >
> > As far as queryies like "contains" in java.... Well sure. Write a filter
> > that filters on regular expressions or wildcards (you'll need
> > WildcardTermEnum and RegexTermEnum). Or index things differently (e.g.
> > index
> > "6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on
> > doc 2.
> > Now your searches for "6/12" will work. Or index "6" "/", "12" and
> > "finding"
> > on doc1, index similarly for doc2, and use a SpanNearQuery with an
> > appropriate span value. Or....
> >
> > This is all gobbldeygook if you haven't gotten a copy of "Lucene In
> > Action",
> > which you should read in order to get the most out of Lucene. It's for
> > the
> > 1.4 code base, but the 2.0 Lucene code base isn't that much different.
> > More
> > importantly, it ties lots of stuff together. Also, the junit tests
> > that come
> > along with the Lucene code can be invaluable to show you how to do
> > something.
> >
> > Hope this helps
> > Erick
> >
> > On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
> >
> >>
> >> Hi
> >>
> >> I have a custom-built Analyzer where I tokenize all non-whitespace
> >> characters as well available in the field "TERM" (which is the only
> >> field being tokenised).
> >>
> >> If I now query my index file for a term "6/12" for instance, I get back
> >> only ONE result
> >>
> >> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
> >> 1.0    0    260278007    6/12 (finding)
> >>
> >> instead of TWO. There is another token in the index file of the form
> >>
> >> 2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en
> >>
> >> At first it wasn't quite obvious to me why this was happening. But
> after
> >> playing around a bit I realised that if I pass a query "R-eye=6/12"
> >> instead, I will get this second result (but not the first one now). Is
> >> there a way to tweak the  Query query = parser.parse(searchString)
> >> method so that I can get both the records if I query for "6/12".
> >> Something like a 'contains' query in Java.
> >>
> >> Will appreciate all help. Thanks a lot
> >>
> >> Regards
> >> Rahil
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49319_23399116.1159746734301--

From java-user-return-23668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 08:12:47 2006
Return-Path: <java-user-return-23668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39006 invoked from network); 2 Oct 2006 08:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 08:12:47 -0000
Received: (qmail 63324 invoked by uid 500); 2 Oct 2006 08:12:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63237 invoked by uid 500); 2 Oct 2006 08:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63224 invoked by uid 99); 2 Oct 2006 08:12:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 01:12:40 -0700
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
Received: from [89.107.46.3] ([89.107.46.3:49730] helo=how-mail-1.hd.ebuyer.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4E/41-16499-6F9C0254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 01:12:40 -0700
Received: from beavis.dev.ebuyer.com ([10.22.13.213] helo=trade.ebuyer.com)
	by how-mail-1.hd.ebuyer.com with esmtp (Exim 4.62)
	(envelope-from <sgrimshaw@ebuyer.com>)
	id 1GUIud-0002Dw-Tp
	for java-user@lucene.apache.org; Mon, 02 Oct 2006 09:12:35 +0100
From: Stuart Grimshaw <sgrimshaw@ebuyer.com>
Organization: eBuyer
To: java-user@lucene.apache.org
Date: Mon, 2 Oct 2006 09:08:54 +0100
User-Agent: KMail/1.9.3
References: <200609281012.39131.sgrimshaw@ebuyer.com>
In-Reply-To: <200609281012.39131.sgrimshaw@ebuyer.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610020908.54969.sgrimshaw@ebuyer.com>
X-SA-Exim-Connect-IP: 10.22.13.213
X-SA-Exim-Mail-From: sgrimshaw@ebuyer.com
Subject: Re: Indexing a single product in multiple categories.
X-SA-Exim-Version: 4.2.1 (built Mon, 27 Mar 2006 13:42:28 +0200)
X-SA-Exim-Scanned: No (on how-mail-1.hd.ebuyer.com); Unknown failure
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 28 September 2006 10:12, Stuart Grimshaw wrote:
> We have an existing lucene based search, and a recent change to the way we
> organise our products has caused a bit of a problem for search results.
>
> Our products are arranged into subcategories, categories & stores. A
> product can only be in 1 subcat or cat, but a cat can be in multiple
> stores. We only index the primary cat because historically the multiple
> store feature was depracated.
>
> Obviously I don't want to simply add another row to the index for each
> store, as it would skew the results, especially when displaying a count of
> the results, I can't add a new column for each store, because I don't know
> how many stores it's going to be in.
>
> Does anyone have any ideas?

Is my only option here really going to be to add some more colums? I've slept 
on it over the weekend, and not had any more bright ideas ... ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 08:52:36 2006
Return-Path: <java-user-return-23669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49698 invoked from network); 2 Oct 2006 08:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 08:52:36 -0000
Received: (qmail 4629 invoked by uid 500); 2 Oct 2006 08:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4594 invoked by uid 500); 2 Oct 2006 08:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4583 invoked by uid 99); 2 Oct 2006 08:52:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 01:52:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [194.52.12.17] ([194.52.12.17:40324] helo=mail1.observergroup.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 44/62-16499-A43D0254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 01:52:28 -0700
Received: (qmail 22126 invoked by uid 509); 2 Oct 2006 10:52:22 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.074265 secs); 02 Oct 2006 08:52:22 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.074265 secs Process 22119)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 2 Oct 2006 10:52:22 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Indexing a single product in multiple categories.
Date: Mon, 2 Oct 2006 10:52:20 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C0276C652@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing a single product in multiple categories.
Thread-Index: Acbl+osJ/4yOub5vQK2j94FTUPCfkgABWq4A
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can't you just add several values to the Store field?

I.E:
doc.addField(field.text(STOREFIELD, val1)
doc.addField(field.text(STOREFIELD, val2)



-----Ursprungligt meddelande-----
Fr=E5n: Stuart Grimshaw [mailto:sgrimshaw@ebuyer.com]=20
Skickat: den 2 oktober 2006 10:09
Till: java-user@lucene.apache.org
=C4mne: Re: Indexing a single product in multiple categories.

On Thursday 28 September 2006 10:12, Stuart Grimshaw wrote:
> We have an existing lucene based search, and a recent change to the =
way we
> organise our products has caused a bit of a problem for search =
results.
>
> Our products are arranged into subcategories, categories & stores. A
> product can only be in 1 subcat or cat, but a cat can be in multiple
> stores. We only index the primary cat because historically the =
multiple
> store feature was depracated.
>
> Obviously I don't want to simply add another row to the index for each
> store, as it would skew the results, especially when displaying a =
count of
> the results, I can't add a new column for each store, because I don't =
know
> how many stores it's going to be in.
>
> Does anyone have any ideas?

Is my only option here really going to be to add some more colums? I've =
slept=20
on it over the weekend, and not had any more bright ideas ... ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 09:02:51 2006
Return-Path: <java-user-return-23670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51832 invoked from network); 2 Oct 2006 09:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 09:02:51 -0000
Received: (qmail 16983 invoked by uid 500); 2 Oct 2006 09:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16824 invoked by uid 500); 2 Oct 2006 09:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16813 invoked by uid 99); 2 Oct 2006 09:02:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 02:02:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
Received: from [194.52.12.17] ([194.52.12.17:40810] helo=mail1.observergroup.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 39/B2-16499-2B5D0254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 02:02:44 -0700
Received: (qmail 24720 invoked by uid 509); 2 Oct 2006 11:02:40 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.099353 secs); 02 Oct 2006 09:02:40 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.099353 secs Process 24713)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 2 Oct 2006 11:02:40 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E601.82D4C856"
Subject: Modifying the PrefixQuery
Date: Mon, 2 Oct 2006 11:02:39 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C0276C693@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Modifying the PrefixQuery
Thread-Index: AcbmAYLM0aqsgGcSRD6SoYPZVdVvMg==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E601.82D4C856
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I want to modify the PrefixQuery so that it instead of casting the
TooManyBooleanClause exception takes out the most frequent N terms
matching the prefix and only searches for those. Is this possible?

=20

/

Regards=20

Marcus=20

=20


------_=_NextPart_001_01C6E601.82D4C856--

From java-user-return-23671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 12:50:47 2006
Return-Path: <java-user-return-23671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32012 invoked from network); 2 Oct 2006 12:50:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 12:50:46 -0000
Received: (qmail 75922 invoked by uid 500); 2 Oct 2006 12:50:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75162 invoked by uid 500); 2 Oct 2006 12:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75151 invoked by uid 99); 2 Oct 2006 12:50:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 05:50:39 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=john.bugger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.239] ([66.249.82.239:34584] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 41/39-16499-E1B01254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 05:50:38 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1548158wxc
        for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 05:50:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=aeNyCr6s1uvh5QoATbpP0i9a61rBfl93+DBQMjhCzPN6bZRsUMbxPZLOax+v+XDdItxNiACXEeFhowxpOhLpRqVrnMknSYnYvjvWkaT3W6ZpgLLSjkvEXzVvUIQ93Q5B+PXLWJL2kQWuCGTECqjNvusp/8iGQpiVEkkJ5j0+TRk=
Received: by 10.90.100.6 with SMTP id x6mr418572agb;
        Mon, 02 Oct 2006 05:50:35 -0700 (PDT)
Received: by 10.90.63.11 with HTTP; Mon, 2 Oct 2006 05:50:35 -0700 (PDT)
Message-ID: <7b2520d40610020550k466f230ax80ab6cd2f8ebb495@mail.gmail.com>
Date: Mon, 2 Oct 2006 15:50:35 +0300
From: "John Bugger" <john.bugger@gmail.com>
To: java-user@lucene.apache.org
Subject: Search in HTML code
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57997_28351091.1159793435417"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_57997_28351091.1159793435417
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello!
I've indexed HTML pages and stored html codes as UN_TOKENIZED fields. So, I
need to search for specific tags in those documents,
for example: <option name="test">
Do I need to write some custom analyzer or something like that?
Please help me!

------=_Part_57997_28351091.1159793435417--

From java-user-return-23672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 14:55:05 2006
Return-Path: <java-user-return-23672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94427 invoked from network); 2 Oct 2006 14:55:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 14:55:04 -0000
Received: (qmail 2339 invoked by uid 500); 2 Oct 2006 14:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2260 invoked by uid 500); 2 Oct 2006 14:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2183 invoked by uid 99); 2 Oct 2006 14:54:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 07:54:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
Received: from [194.44.23.182] ([194.44.23.182:47565] helo=mail.spline-software.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 39/DB-16499-22821254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 07:54:28 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id A40292FCE12; Mon,  2 Oct 2006 17:53:40 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id C80EA2FCE16
	for <java-user@lucene.apache.org>; Mon,  2 Oct 2006 17:53:37 +0300 (EEST)
Message-ID: <452127F1.3060606@i-hypergrid.com>
Date: Mon, 02 Oct 2006 17:53:37 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: DateTools again
Content-Type: multipart/alternative;
 boundary="------------040608090704030302050308"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Spam-Status: No, score=-5.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_50_60,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------040608090704030302050308
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

I'm using DateTools with Resolution.DAY.
I know that dates internally are converted to GMT.

Converting dates "2006-10-01 00:00" and "2006-10-01 15:00" from 
"Etc/GMT-2" timezone will give us
"20060930" and "20061001" respectively.

But these dates are identical with day resolution.

Is this bug or I'm missing something?


-- 
regards,
Volodymyr Bychkoviak


--------------040608090704030302050308--

From java-user-return-23673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 16:43:34 2006
Return-Path: <java-user-return-23673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50841 invoked from network); 2 Oct 2006 16:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 16:43:34 -0000
Received: (qmail 7834 invoked by uid 500); 2 Oct 2006 16:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7801 invoked by uid 500); 2 Oct 2006 16:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7790 invoked by uid 99); 2 Oct 2006 16:43:27 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 09:43:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [85.118.4.17] ([85.118.4.17:57653] helo=snorlax.uk.scalix.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FA/F0-24395-CA141254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 09:43:26 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k92GhJTh019054
	for <java-user@lucene.apache.org>; Mon, 2 Oct 2006 17:43:19 +0100
Received: from [10.11.108.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.196-beta)
    via ESMTP; Mon, 02 Oct 2006 17:43:18 +0100 (BST)
Date: Mon, 2 Oct 2006 17:43:18 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <452141A6.9050005@scalix.com>
In-Reply-To: <452127F1.3060606@i-hypergrid.com>
References: <452127F1.3060606@i-hypergrid.com>
Subject: Re: DateTools again
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.7 (X11/20060913)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Volodymyr Bychkoviak wrote:
> I'm using DateTools with Resolution.DAY.
> I know that dates internally are converted to GMT.
>
> Converting dates "2006-10-01 00:00" and "2006-10-01 15:00" from 
> "Etc/GMT-2" timezone will give us
> "20060930" and "20061001" respectively.
>
> But these dates are identical with day resolution.
>
> Is this bug or I'm missing something?
>
They're not identical.   The first one is 2006-09-30 22:00:00 UTC and 
the second 2006-10-01 13:00:00 UTC.

I ran across the problem with DateTools not using UTC when I tried to 
use an index created in California from the UK: I was looking for 
documents with a particular date stamp but I found documents with a date 
stamp from the wrong day.  Even more interesting and bizarre things 
happen around the change from daylight savings time to normal time.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 16:47:16 2006
Return-Path: <java-user-return-23674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53193 invoked from network); 2 Oct 2006 16:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 16:47:15 -0000
Received: (qmail 18758 invoked by uid 500); 2 Oct 2006 16:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18727 invoked by uid 500); 2 Oct 2006 16:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18716 invoked by uid 99); 2 Oct 2006 16:47:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 09:47:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [85.118.4.17] ([85.118.4.17:57682] helo=snorlax.uk.scalix.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7F/11-24395-C8241254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 09:47:08 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k92Gl54c019252
	for <java-user@lucene.apache.org>; Mon, 2 Oct 2006 17:47:05 +0100
Received: from [10.11.108.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.196-beta)
    via ESMTP; Mon, 02 Oct 2006 17:47:05 +0100 (BST)
Date: Mon, 2 Oct 2006 17:47:04 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <45214288.10102@scalix.com>
In-Reply-To: <452141A6.9050005@scalix.com>
References: <452127F1.3060606@i-hypergrid.com>
References: <452141A6.9050005@scalix.com>
Subject: Re: DateTools again
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.7 (X11/20060913)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Haxby wrote:
> I ran across the problem with DateTools not using UTC when I tried to 
> use an index created in California from the UK: I was looking for 
> documents with a particular date stamp but I found documents with a 
> date stamp from the wrong day.  Even more interesting and bizarre 
> things happen around the change from daylight savings time to normal 
> time.
That's confusing isn't it?   Originally DateTools didn't use UTC for its 
conversions: I submitted a patch some time ago (well before 2.0) that 
made it use UTC.   Does that make it less confusing?

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 17:47:05 2006
Return-Path: <java-user-return-23675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92504 invoked from network); 2 Oct 2006 17:47:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:47:05 -0000
Received: (qmail 82266 invoked by uid 500); 2 Oct 2006 17:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82242 invoked by uid 500); 2 Oct 2006 17:46:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82231 invoked by uid 99); 2 Oct 2006 17:46:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:46:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:39942] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D0/23-24395-D8051254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 10:46:54 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 070DF5B763; Mon,  2 Oct 2006 10:46:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 01C037F403;
	Mon,  2 Oct 2006 10:46:43 -0700 (PDT)
Date: Mon, 2 Oct 2006 10:46:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, qamar_rahil@yahoo.co.uk
Subject: Re: Performing a like query
In-Reply-To: <451FAEF8.2000300@yahoo.co.uk>
Message-ID: <Pine.LNX.4.58.0610021040390.14860@hal.rescomp.berkeley.edu>
References: <451FAEF8.2000300@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I have a custom-built Analyzer where I tokenize all non-whitespace
: characters as well available in the field "TERM" (which is the only
: field being tokenised).

: If I now query my index file for a term "6/12" for instance, I get back
: only ONE result

: instead of TWO. There is another token in the index file of the form
:
: 2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en

it sounds like you are getting exactly what you should be since you
tokenize on whitespace if you want that second match to show up as well
then you probably need to tokenize on "=" as well, or maybe tokenize on
all punctuation and let a search for "6/12" become a phrase search for "6"
followed by "12" ... it's really just a question of what exactly do you
want toe be able to match on?


if you tuely want "substring" matching, so that searchs for "ye=6/" or
"12 (find" would both match that second record then you need to get more
creative ... lucene isn't designed for "substring" matching, it's
optimized for "term" matching.  substring matching is possible with
wildcard queries or index time tricks ... but those are really just hacks
to get arround a fundemental difference in purpose.

just because you have a great hammer, doesn't mean you should look at every problem as a
nail -- but i don't think that's exactly your problem -- i'm guessing you
just aren't used to thinking about your problem from a "term matching"
standpoint, you're probably really use to thinking in terms of DB queries
and LIKE an string matching ... don't think in terms of ways you'd solve
your problems with other tools .. ask yourself what you really want to be
ale to do what kidns of things you really want to match on, and then see
if lucene is the right tool for the job.

but


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 17:53:37 2006
Return-Path: <java-user-return-23676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94899 invoked from network); 2 Oct 2006 17:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:53:36 -0000
Received: (qmail 93451 invoked by uid 500); 2 Oct 2006 17:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93422 invoked by uid 500); 2 Oct 2006 17:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93409 invoked by uid 99); 2 Oct 2006 17:53:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:53:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:37585] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AD/43-24395-4F151254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 10:52:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 75F625B763; Mon,  2 Oct 2006 10:52:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6BDC57F403
	for <java-user@lucene.apache.org>; Mon,  2 Oct 2006 10:52:50 -0700 (PDT)
Date: Mon, 2 Oct 2006 10:52:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Very high fieldNorm for a field resulting in bad results
In-Reply-To: <865c77680609292115q554143c1y2279fdd8348f741b@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610021047180.14860@hal.rescomp.berkeley.edu>
References: <865c77680609250327j265039aeo43b8d771e405a5dc@mail.gmail.com> 
 <Pine.LNX.4.58.0609261155270.13298@hal.rescomp.berkeley.edu> 
 <865c77680609261944h335583acy6b6900ecb898e8eb@mail.gmail.com> 
 <Pine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu> 
 <865c77680609280100s5641337fk7af470e6c4c87437@mail.gmail.com> 
 <Pine.LNX.4.58.0609291608310.20370@hal.rescomp.berkeley.edu>
 <865c77680609292115q554143c1y2279fdd8348f741b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: This should solve most of my heartache.
: Whats the suggested way to use this ? Copy a solr jar ? Or just copy
: the code for this 1 query ?

that's entirely up to you, it depends on what kind of source management
you want to have -- the suggested way to use it is to run Solr and use it
via the "dismax" request hanlder :)

: Are there plans to move this into lucene core ? (or contrib area?)

no existing plans, promoting stuff from the lucene sub-projects into
Lucene-Java seems to be a grey area at the moment.  I suspect if you
submited Jira patch that added the code to the lucene/java repository and
provided some standalone tests (most or the Solr tests rely heavily on
testing the behavior throughthe SolrCore) it would be considered.

: SynonymFilter, etc back into lucene, or would it be simpler for
: someone using java 1.5 to start using solr straight away.
:
: Are there any issues if I do decide to move to solr that I should be
: aware of ? (I am using lucene 2.0 as of now)

You don't need to use Lucene 1.5 to "use" Solr -- only if you want to
right custom request handlers.  the main question someone should ask when
deciding wether to use Solr is "Do i want a Lucene based Search Server
that takes care of the low level Lucene stuff for me, which i can query
over HTTP, and which i can write custom plugins for if i want to to modify
the high level behavior? ..."  (or so then check Solr out) "...Or do i
want a search library so i can embed the search functionality directly
into my application?" (in which case stick with "Lucene Java")


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 17:58:10 2006
Return-Path: <java-user-return-23677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98787 invoked from network); 2 Oct 2006 17:58:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 17:58:10 -0000
Received: (qmail 10151 invoked by uid 500); 2 Oct 2006 17:58:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10113 invoked by uid 500); 2 Oct 2006 17:58:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10102 invoked by uid 99); 2 Oct 2006 17:58:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 10:58:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:55749] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 90/83-24395-82351254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 10:58:00 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F20225B763; Mon,  2 Oct 2006 10:57:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EEF777F403
	for <java-user@lucene.apache.org>; Mon,  2 Oct 2006 10:57:57 -0700 (PDT)
Date: Mon, 2 Oct 2006 10:57:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Indexing a single product in multiple categories.
In-Reply-To: <200610020908.54969.sgrimshaw@ebuyer.com>
Message-ID: <Pine.LNX.4.58.0610021053430.14860@hal.rescomp.berkeley.edu>
References: <200609281012.39131.sgrimshaw@ebuyer.com> <200610020908.54969.sgrimshaw@ebuyer.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Is my only option here really going to be to add some more colums? I've slept
: on it over the weekend, and not had any more bright ideas ... ?

I have to admit, i dont't relaly udnerstand your problem ... you speak of
Products and Stores and Categories and Primary Categories and wondering
how to put all of that data in your index -- but you never discuss what
acctually matters: what do you want to do?  what is the point?

if i search for "foo" do you want to tell me all the products that match
"foo" ? do you want to tell me all of the product/store pairs that match
"foo" ... do you wnat to be able to search for products matching "foo"
confined to a particular store?  what differnce does it make that a
category can be in multiple stores?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 18:00:24 2006
Return-Path: <java-user-return-23678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99332 invoked from network); 2 Oct 2006 18:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:00:24 -0000
Received: (qmail 13664 invoked by uid 500); 2 Oct 2006 18:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13641 invoked by uid 500); 2 Oct 2006 18:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13630 invoked by uid 99); 2 Oct 2006 18:00:18 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:00:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:36252] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D3/93-24395-EA351254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 11:00:15 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 489FC5B763; Mon,  2 Oct 2006 11:00:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4408A7F403
	for <java-user@lucene.apache.org>; Mon,  2 Oct 2006 11:00:12 -0700 (PDT)
Date: Mon, 2 Oct 2006 11:00:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Modifying the PrefixQuery
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C0276C693@S1SE1MAIL.emea1.ad.group>
Message-ID: <Pine.LNX.4.58.0610021058180.14860@hal.rescomp.berkeley.edu>
References: <8834A84C87A2C148AD46921BB8BFC97C0276C693@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I want to modify the PrefixQuery so that it instead of casting the
: TooManyBooleanClause exception takes out the most frequent N terms
: matching the prefix and only searches for those. Is this possible?

It should be ... look at the rewrite method of PrefixQuery and the docFreq
method of TermEnum.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 18:09:01 2006
Return-Path: <java-user-return-23679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3347 invoked from network); 2 Oct 2006 18:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:09:00 -0000
Received: (qmail 31868 invoked by uid 500); 2 Oct 2006 18:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31849 invoked by uid 500); 2 Oct 2006 18:08:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31838 invoked by uid 99); 2 Oct 2006 18:08:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:08:53 -0700
X-ASF-Spam-Status: No, hits=1.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER
Received: from [65.54.246.100] ([65.54.246.100:64643] helo=bay0-omc1-s28.bay0.hotmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A9/D3-24395-0B551254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 11:08:48 -0700
Received: from hotmail.com ([64.4.16.68]) by bay0-omc1-s28.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 2 Oct 2006 11:08:45 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 2 Oct 2006 11:08:45 -0700
Message-ID: <BAY22-F18C49B8A23203F5C924F82D41F0@phx.gbl>
Received: from 69.8.212.254 by by22fd.bay22.hotmail.msn.com with HTTP;
	Mon, 02 Oct 2006 18:08:40 GMT
X-Originating-IP: [69.8.212.254]
X-Originating-Email: [moraleslos@hotmail.com]
X-Sender: moraleslos@hotmail.com
From: "Los Morales" <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: lucene newbie question
Date: Mon, 02 Oct 2006 18:08:40 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 02 Oct 2006 18:08:45.0374 (UTC) FILETIME=[CD0DC5E0:01C6E64D]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm new to Lucene and IR in general.  I'm a bit confused on the concept of 
fields.  From what I've read, a field does not have to be indexed but its 
value can be stored in an index.  Likewise a field can be indexed but its 
value is not stored in an index.  Now how can a field be searchable when its 
value is not stored in the index and vice-versa?  Again, I'm new to the 
Index/Search paradigm.  Thanks in advanced.

-los

_________________________________________________________________
Find a local pizza place, music store, museum and morethen map the best 
route!  http://local.live.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 18:12:49 2006
Return-Path: <java-user-return-23680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5759 invoked from network); 2 Oct 2006 18:12:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:12:49 -0000
Received: (qmail 45954 invoked by uid 500); 2 Oct 2006 18:12:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45922 invoked by uid 500); 2 Oct 2006 18:12:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45911 invoked by uid 99); 2 Oct 2006 18:12:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:12:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [69.55.225.129] ([69.55.225.129:46644] helo=ehatchersolutions.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 78/F3-24395-29651254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 11:12:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C99F030EFC1F; Mon,  2 Oct 2006 14:12:31 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4EB8F30EFC19
	for <java-user@lucene.apache.org>; Mon,  2 Oct 2006 14:12:28 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BAY22-F18C49B8A23203F5C924F82D41F0@phx.gbl>
References: <BAY22-F18C49B8A23203F5C924F82D41F0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F0C06DE7-C7C4-4DCE-BF2E-10115630A803@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene newbie question
Date: Mon, 2 Oct 2006 14:12:25 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 2, 2006, at 2:08 PM, Los Morales wrote:
> I'm new to Lucene and IR in general.  I'm a bit confused on the  
> concept of fields.  From what I've read, a field does not have to  
> be indexed but its value can be stored in an index.  Likewise a  
> field can be indexed but its value is not stored in an index.  Now  
> how can a field be searchable when its value is not stored in the  
> index and vice-versa?  Again, I'm new to the Index/Search  
> paradigm.  Thanks in advanced.

Consider the index in the back of a book.  You could tear that out  
and still use it to tell what page something is on, but you have no  
actual content in hand.  When a field is tokenized (and therefore  
implicitly indexed), it is run through the specified Analyzer and the  
terms emitted are indexed, but the original text may or may not also  
be stored in the index.

Make sense?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 18:47:03 2006
Return-Path: <java-user-return-23681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27801 invoked from network); 2 Oct 2006 18:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 18:47:03 -0000
Received: (qmail 15596 invoked by uid 500); 2 Oct 2006 18:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15298 invoked by uid 500); 2 Oct 2006 18:46:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15287 invoked by uid 99); 2 Oct 2006 18:46:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 11:46:56 -0700
X-ASF-Spam-Status: No, hits=1.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER
Received: from [65.54.246.214] ([65.54.246.214:52274] helo=bay0-omc3-s14.bay0.hotmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FC/F4-24395-99E51254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 11:46:50 -0700
Received: from hotmail.com ([64.4.16.60]) by bay0-omc3-s14.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 2 Oct 2006 11:46:47 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Mon, 2 Oct 2006 11:46:47 -0700
Message-ID: <BAY22-F1026D34E1F5969C851D75BD41F0@phx.gbl>
Received: from 69.8.212.254 by by22fd.bay22.hotmail.msn.com with HTTP;
	Mon, 02 Oct 2006 18:46:45 GMT
X-Originating-IP: [69.8.212.254]
X-Originating-Email: [moraleslos@hotmail.com]
X-Sender: moraleslos@hotmail.com
In-Reply-To: <F0C06DE7-C7C4-4DCE-BF2E-10115630A803@ehatchersolutions.com>
From: "Los Morales" <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: lucene newbie question
Date: Mon, 02 Oct 2006 18:46:45 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 02 Oct 2006 18:46:47.0012 (UTC) FILETIME=[1D041A40:01C6E653]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

Thanks for the response.

>Consider the index in the back of a book.  You could tear that out  and 
>still use it to tell what page something is on, but you have no  actual 
>content in hand.
So, I guess what I'm having a hard time trying to figure out is, what's the 
point of having an index when you can't search/retrieve the contents of a 
field in the index since it is not stored?  Isn't the whole point of having 
an index is to be able to search and retrieve the contents efficiently?

Basically I'm not sure the points of UnIndexed and UnStored fields types.  
Say I use a field type "unindexed" for my SSN.  I know its stored in the 
index but how am I suppose to retrieve it?
As for the unstored, its like the scenario I described above... I see the 
fields in the index but I won't be able to search/retrieve it since I don't 
have the contents.  The "text" field type makes sense to me (with data being 
a String), as well as the type "keyword".

Is there a scenario or scenarios you can describe where Unindexed/Unstored 
will be useful?  Thanks in advanced!

-los


>From: Erik Hatcher <erik@ehatchersolutions.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: lucene newbie question
>Date: Mon, 2 Oct 2006 14:12:25 -0400
>
>
>On Oct 2, 2006, at 2:08 PM, Los Morales wrote:
>>I'm new to Lucene and IR in general.  I'm a bit confused on the  concept 
>>of fields.  From what I've read, a field does not have to  be indexed but 
>>its value can be stored in an index.  Likewise a  field can be indexed but 
>>its value is not stored in an index.  Now  how can a field be searchable 
>>when its value is not stored in the  index and vice-versa?  Again, I'm new 
>>to the Index/Search  paradigm.  Thanks in advanced.
>
>Consider the index in the back of a book.  You could tear that out  and 
>still use it to tell what page something is on, but you have no  actual 
>content in hand.  When a field is tokenized (and therefore  implicitly 
>indexed), it is run through the specified Analyzer and the  terms emitted 
>are indexed, but the original text may or may not also  be stored in the 
>index.
>
>Make sense?
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

_________________________________________________________________
Be seen and heard with Windows Live Messenger and Microsoft LifeCams 
http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://www.microsoft.com/hardware/digitalcommunication/default.mspx?locale=en-us&source=hmtagline


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 19:06:29 2006
Return-Path: <java-user-return-23682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33650 invoked from network); 2 Oct 2006 19:06:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 19:06:28 -0000
Received: (qmail 53633 invoked by uid 500); 2 Oct 2006 19:06:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53542 invoked by uid 500); 2 Oct 2006 19:06:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53531 invoked by uid 99); 2 Oct 2006 19:06:22 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 12:06:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.151] ([195.212.29.151:31123] helo=mtagate2.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 76/85-24395-62361254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 12:06:16 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id k92J6BUP044562
	for <java-user@lucene.apache.org>; Mon, 2 Oct 2006 19:06:11 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k92J8IxP3231820
	for <java-user@lucene.apache.org>; Mon, 2 Oct 2006 21:08:18 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k92J6B7L021272
	for <java-user@lucene.apache.org>; Mon, 2 Oct 2006 21:06:11 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k92J6BBB021269
	for <java-user@lucene.apache.org>; Mon, 2 Oct 2006 21:06:11 +0200
In-Reply-To: <BAY22-F1026D34E1F5969C851D75BD41F0@phx.gbl>
Subject: Re: lucene newbie question
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFDA80D312.663C3A99-ON882571FB.006768A1-882571FB.0068CC0B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 2 Oct 2006 11:04:39 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 02/10/2006 21:08:18
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SSN actually is a common situation.

Assume you have a (relational) database with a table of products with three
columns :
- SSN, which is also a primary key for that table,
- DESCRIPTION, which has free text (i.e. unformatted text) describing the
product.
- OTHER - additional info.
Also assume you want to allow users of your application to search a product
by its description. For each product found, you intend to fetch the data on
that product from the database and display it to the users.

This can be done in the following setup:
Create a Lucene index with two fields:
- ssn - stored, but not indexed
- description - tokenized (hence indexed) but not stored.

Now the application would send the user query to Lucene, using the
description field. For each document found, the application would fetch its
ssn (which is available from the Lucene index since it was stored). Using
this ssn, the application would fetch all sorts of data on that product and
display it to the user.

There are other possible designs of course - you may want to have
additional data in the Lucene index, but this hopefully just gives the
feeling how different fields with different settings are used in an
application.

I think you would find LIA ("Lucene In Action" book) very useful.

"Los Morales" <moraleslos@hotmail.com> wrote on 02/10/2006 11:46:45:

> Hi Erik,
>
> Thanks for the response.
>
> >Consider the index in the back of a book.  You could tear that out  and
> >still use it to tell what page something is on, but you have no  actual
> >content in hand.
> So, I guess what I'm having a hard time trying to figure out is, what's
the
> point of having an index when you can't search/retrieve the contents of a

> field in the index since it is not stored?  Isn't the whole point of
having
> an index is to be able to search and retrieve the contents efficiently?
>
> Basically I'm not sure the points of UnIndexed and UnStored fields types.

> Say I use a field type "unindexed" for my SSN.  I know its stored in the
> index but how am I suppose to retrieve it?
> As for the unstored, its like the scenario I described above... I see the

> fields in the index but I won't be able to search/retrieve it since I
don't
> have the contents.  The "text" field type makes sense to me (with data
being
> a String), as well as the type "keyword".
>
> Is there a scenario or scenarios you can describe where
Unindexed/Unstored
> will be useful?  Thanks in advanced!
>
> -los
>
>
> >From: Erik Hatcher <erik@ehatchersolutions.com>
> >Reply-To: java-user@lucene.apache.org
> >To: java-user@lucene.apache.org
> >Subject: Re: lucene newbie question
> >Date: Mon, 2 Oct 2006 14:12:25 -0400
> >
> >
> >On Oct 2, 2006, at 2:08 PM, Los Morales wrote:
> >>I'm new to Lucene and IR in general.  I'm a bit confused on the
concept
> >>of fields.  From what I've read, a field does not have to  be indexed
but
> >>its value can be stored in an index.  Likewise a  field can be indexed
but
> >>its value is not stored in an index.  Now  how can a field be
searchable
> >>when its value is not stored in the  index and vice-versa?  Again, I'm
new
> >>to the Index/Search  paradigm.  Thanks in advanced.
> >
> >Consider the index in the back of a book.  You could tear that out  and
> >still use it to tell what page something is on, but you have no  actual
> >content in hand.  When a field is tokenized (and therefore  implicitly
> >indexed), it is run through the specified Analyzer and the  terms
emitted
> >are indexed, but the original text may or may not also  be stored in the

> >index.
> >
> >Make sense?
> >
> >   Erik
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> _________________________________________________________________
> Be seen and heard with Windows Live Messenger and Microsoft LifeCams
> http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?
> href=http://www.microsoft.com/hardware/digitalcommunication/default.
> mspx?locale=en-us&source=hmtagline
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 19:09:36 2006
Return-Path: <java-user-return-23683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35190 invoked from network); 2 Oct 2006 19:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 19:09:35 -0000
Received: (qmail 60110 invoked by uid 500); 2 Oct 2006 19:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59786 invoked by uid 500); 2 Oct 2006 19:09:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59775 invoked by uid 99); 2 Oct 2006 19:09:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 12:09:29 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.181] ([64.233.166.181:32208] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2B/95-24395-7E361254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 12:09:28 -0700
Received: by py-out-1112.google.com with SMTP id s49so1405027pyc
        for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 12:09:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tpoa35vITSMhTWkVlTbOG7JTxZGA3dHYY0MXlIo+tsX+GvvgD+v/JxDqzs4Qe8mqX4sGsgtJ0zqx0fdkHigFgdd4m8GKDEO40qdsiLkrYBFvRPwwVna6N6mBzeJdgitSAMlOLY/FYy/0mIljArBNyWxqvL4nwHeEPLAHw9T8Y9E=
Received: by 10.35.119.8 with SMTP id w8mr13096851pym;
        Mon, 02 Oct 2006 12:09:25 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Mon, 2 Oct 2006 12:09:24 -0700 (PDT)
Message-ID: <359a92830610021209w46d9dad6sd198fe72cbda797@mail.gmail.com>
Date: Mon, 2 Oct 2006 15:09:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene newbie question
In-Reply-To: <BAY22-F1026D34E1F5969C851D75BD41F0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64047_13427916.1159816164290"
References: <F0C06DE7-C7C4-4DCE-BF2E-10115630A803@ehatchersolutions.com>
	 <BAY22-F1026D34E1F5969C851D75BD41F0@phx.gbl>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_64047_13427916.1159816164290
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Another Erick (note the correct spelling <G>). See below..

On 10/2/06, Los Morales <moraleslos@hotmail.com> wrote:
>
> Hi Erik,
>
> Thanks for the response.
>
> >Consider the index in the back of a book.  You could tear that out  and
> >still use it to tell what page something is on, but you have no  actual
> >content in hand.
> So, I guess what I'm having a hard time trying to figure out is, what's
> the
> point of having an index when you can't search/retrieve the contents of a
> field in the index since it is not stored?  Isn't the whole point of
> having
> an index is to be able to search and retrieve the contents efficiently?


Your confusion here, I think, is that you CAN search on an unstored field.
Consider a book. I want to show the user the titles of the most-relevant
books. If I store the text of the entire book, it bloats the size of the
index markedly. So, I index the text but do NOT store it. Now I can show my
titles in relevancy order (when searched over the entire text), but don't
have to pay the penalty size-wise. What I can't do in this case is
reconstruct the book from the index because I didn't store the text. But I
can search it, which is what my app requires.


Basically I'm not sure the points of UnIndexed and UnStored fields types.
> Say I use a field type "unindexed" for my SSN.  I know its stored in the
> index but how am I suppose to retrieve it?


You'd search on what you *have* indexed, get the doc (from the index), and
then read the field. Something like

String s = Hits.doc(52).get("SSN");

I'm doing this now since we have images stored with internal IDs on a
separate file system. I *never* care to allow the user to search by our
internal ID number. So I index the caption, and STORE but do not INDEX the
internal ID. We provide a page full of links (in relevancy order) and when
the user clicks on one, use the stored internal ID to fetch the right image.


As for the unstored, its like the scenario I described above... I see the
> fields in the index but I won't be able to search/retrieve it since I
> don't
> have the contents.  The "text" field type makes sense to me (with data
> being
> a String), as well as the type "keyword".
>
> Is there a scenario or scenarios you can describe where Unindexed/Unstored
> will be useful?  Thanks in advanced!


Again, you can search unstored fields. You just can't reconstruct the input
with 100% fidelity (things like stop words will be missing, and any funky
games you played during indexing will mess up an attempt to reconstruct the
data).

Hope this helps.
Erick


-los
>
>
> >From: Erik Hatcher <erik@ehatchersolutions.com>
> >Reply-To: java-user@lucene.apache.org
> >To: java-user@lucene.apache.org
> >Subject: Re: lucene newbie question
> >Date: Mon, 2 Oct 2006 14:12:25 -0400
> >
> >
> >On Oct 2, 2006, at 2:08 PM, Los Morales wrote:
> >>I'm new to Lucene and IR in general.  I'm a bit confused on the  concept
> >>of fields.  From what I've read, a field does not have to  be indexed
> but
> >>its value can be stored in an index.  Likewise a  field can be indexed
> but
> >>its value is not stored in an index.  Now  how can a field be searchable
> >>when its value is not stored in the  index and vice-versa?  Again, I'm
> new
> >>to the Index/Search  paradigm.  Thanks in advanced.
> >
> >Consider the index in the back of a book.  You could tear that out  and
> >still use it to tell what page something is on, but you have no  actual
> >content in hand.  When a field is tokenized (and therefore  implicitly
> >indexed), it is run through the specified Analyzer and the  terms emitted
> >are indexed, but the original text may or may not also  be stored in the
> >index.
> >
> >Make sense?
> >
> >       Erik
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> _________________________________________________________________
> Be seen and heard with Windows Live Messenger and Microsoft LifeCams
>
> http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://www.microsoft.com/hardware/digitalcommunication/default.mspx?locale=en-us&source=hmtagline
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_64047_13427916.1159816164290--

From java-user-return-23684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 19:20:03 2006
Return-Path: <java-user-return-23684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38921 invoked from network); 2 Oct 2006 19:20:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 19:20:02 -0000
Received: (qmail 81054 invoked by uid 500); 2 Oct 2006 19:19:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81028 invoked by uid 500); 2 Oct 2006 19:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81017 invoked by uid 99); 2 Oct 2006 19:19:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 12:19:55 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.179] ([64.233.166.179:40047] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2F/D5-24395-95661254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 12:19:54 -0700
Received: by py-out-1112.google.com with SMTP id s49so1407609pyc
        for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 12:19:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kGVcuYRj1ds6+Q9fjolHd5gVUn78x3faSVSuHWMm7isB71ZfXdwm6wIUXc/LEv5EZeoITQXl7QdYNkQjEF+RzszxJ8v2Xw2zFJRTNNib/RxhicQQ68KMbBezYCNv7InWLLOqdt1X44tRNDt8k3pK09yga2M7B9FZ0iPhM0XwaAQ=
Received: by 10.35.78.13 with SMTP id f13mr8397951pyl;
        Mon, 02 Oct 2006 12:19:50 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Mon, 2 Oct 2006 12:19:50 -0700 (PDT)
Message-ID: <359a92830610021219u7107aac5lffa2950a5fab71a1@mail.gmail.com>
Date: Mon, 2 Oct 2006 15:19:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search in HTML code
In-Reply-To: <7b2520d40610020550k466f230ax80ab6cd2f8ebb495@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64263_17717154.1159816790821"
References: <7b2520d40610020550k466f230ax80ab6cd2f8ebb495@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_64263_17717154.1159816790821
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I guess the thundering silence is rooted in the problem statement. I have a
hard time understanding how this index is used. By storing things this way,
you'll force the user to know the *exact* format of anything she's looking
for. That is, it's hard to search for <option name="test" value="32"> and
get docs containing both <option name="test"> and <option name="test"
value="32"> as hits. You could do some fancy things with filters and regular
expressions (RegexTermEnum) for instance, but I'd hesitate to recommend that
until I understood your problem a little more.

Perhaps a better thing would be to give us a short statement of the problem
you're trying to solve and see what responses you get from that...

Not very helpful, I know, but it's a start.

Erick

On 10/2/06, John Bugger <john.bugger@gmail.com> wrote:
>
> Hello!
> I've indexed HTML pages and stored html codes as UN_TOKENIZED fields. So,
> I
> need to search for specific tags in those documents,
> for example: <option name="test">
> Do I need to write some custom analyzer or something like that?
> Please help me!
>
>

------=_Part_64263_17717154.1159816790821--

From java-user-return-23685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 20:48:22 2006
Return-Path: <java-user-return-23685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73573 invoked from network); 2 Oct 2006 20:48:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 20:48:22 -0000
Received: (qmail 15095 invoked by uid 500); 2 Oct 2006 20:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14080 invoked by uid 500); 2 Oct 2006 20:48:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 5760 invoked by uid 99); 2 Oct 2006 20:43:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Message-ID: <45217A80.9090706@my-family.us>
Date: Mon, 02 Oct 2006 14:45:52 -0600
From: Shane Perry <shane@my-family.us>
User-Agent: Thunderbird 1.5.0.7 (X11/20060913)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Changing Similarity on existing index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have an existing index which was created with DefaultSimilarity.  I 
want to update the index to use my own Similarity class (need to change 
the lengthNorm).  I wrote a quick script which creates a new index, 
calls setSimilarity(new MySimilarity) for that indexes IndexWriter, and 
then calls writer.addIndexes(Directory[] dirList) where dirList contains 
my previously existing index.

Initially, I had anticipated that doing this would updated the 
Similarity as part of the add process.  But after running some tests, 
this does not appear to be the case.

Is there some way I can update the Similarity on an index without having 
to query out each document, and re-indexing in a new index?

Thanks,

Shane

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 21:10:40 2006
Return-Path: <java-user-return-23686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79311 invoked from network); 2 Oct 2006 21:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 21:10:40 -0000
Received: (qmail 51384 invoked by uid 500); 2 Oct 2006 21:10:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51350 invoked by uid 500); 2 Oct 2006 21:10:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51337 invoked by uid 99); 2 Oct 2006 21:10:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 14:10:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE,MSGID_FROM_MTA_HEADER
Received: from [213.165.64.20] ([213.165.64.20:50680] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 30/58-24395-23081254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 14:10:19 -0700
Message-ID: <30.58.24395.23081254@idunn.apache.osuosl.org>
Received: (qmail invoked by alias); 02 Oct 2006 21:09:55 -0000
Received: from p508C6459.dip.t-dialin.net (EHLO daywalker2) [80.140.100.89]
  by mail.gmx.net (mp029) with SMTP; 02 Oct 2006 23:09:55 +0200
X-Authenticated: #8738313
From: "Renzo Scheffer" <renzo.scheffer@gmx.de>
To: <java-user@lucene.apache.org>
Subject: get terms by positions
Date: Mon, 2 Oct 2006 23:06:40 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000D_01C6E677.6BE84A40"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcbmZqeOjGkm5wR9R8iUFVGZiSc8/g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000D_01C6E677.6BE84A40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

can anybody be so kind to tell me if it is possible to search a Term by its
position?

 

I search a term (for excample "soccer") and get back the DocId's and
positions as follows:

 

 

TermPositions termPos = reader.termPositions(new Term("contents","soccer"));

while(termPos.next()){

int freq = termPos.freq();

for(int i=0; i<freq; i++){

 

      int docNumber = termPos.doc();

      int position = termPos.nextPosition();

System.out.println("DocId: "+docNumber+"; Pos:"+position);

}

 

 

 

Output:

 

DocId: 0; Pos: 1

DocId: 0; Pos: 4

DocId: 0; Pos: 7

DocId: 1; Pos: 3

DocId: 1; Pos: 7

 

Now I try to get back terms, one position before/after "soccer". I
considered to take the 

Position and increase or decrease it. But I can't find a way to get back a
term, according to the given Position.

Can anybody help me? 

 

Thanks, Renzo

 


------=_NextPart_000_000D_01C6E677.6BE84A40--


From java-user-return-23687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 21:42:00 2006
Return-Path: <java-user-return-23687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87911 invoked from network); 2 Oct 2006 21:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 21:42:00 -0000
Received: (qmail 98412 invoked by uid 500); 2 Oct 2006 21:41:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98381 invoked by uid 500); 2 Oct 2006 21:41:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98370 invoked by uid 99); 2 Oct 2006 21:41:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 14:41:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:55878] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 95/F8-24395-E9781254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 14:41:52 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 352445B763; Mon,  2 Oct 2006 14:41:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 301137F403
	for <java-user@lucene.apache.org>; Mon,  2 Oct 2006 14:41:48 -0700 (PDT)
Date: Mon, 2 Oct 2006 14:41:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Changing Similarity on existing index
In-Reply-To: <45217A80.9090706@my-family.us>
Message-ID: <Pine.LNX.4.58.0610021438200.23565@hal.rescomp.berkeley.edu>
References: <45217A80.9090706@my-family.us>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Initially, I had anticipated that doing this would updated the
: Similarity as part of the add process.  But after running some tests,
: this does not appear to be the case.

fieldNorms are computed when the document is added to the index ...
merging indexes doesn't affect them.

: Is there some way I can update the Similarity on an index without having
: to query out each document, and re-indexing in a new index?

http://lucene.apache.org/java/docs/api/org/apache/lucene/misc/LengthNormModifier.html

	...but note the NOTE in the javadocs...

NOTE: This only works if you do not use field/document boosts in your index.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 22:04:59 2006
Return-Path: <java-user-return-23688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94955 invoked from network); 2 Oct 2006 22:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 22:04:59 -0000
Received: (qmail 19751 invoked by uid 500); 2 Oct 2006 22:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19720 invoked by uid 500); 2 Oct 2006 22:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19709 invoked by uid 99); 2 Oct 2006 22:04:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 15:04:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [80.236.0.152] ([80.236.0.152:60424] helo=partridge.numericable.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C1/59-24395-EEC81254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 15:04:34 -0700
Received: (qmail 15948 invoked from network); 2 Oct 2006 22:04:21 -0000
Received: from unknown (HELO [192.168.1.101]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by partridge.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 2 Oct 2006 22:04:21 -0000
From: Nicolas =?iso-8859-15?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: get terms by positions
Date: Tue, 3 Oct 2006 00:04:20 +0200
User-Agent: KMail/1.9.1
References: <30.58.24395.23081254@idunn.apache.osuosl.org>
In-Reply-To: <30.58.24395.23081254@idunn.apache.osuosl.org>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200610030004.20401.nicolas.lalevee@anyware-tech.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Lundi 02 Octobre 2006 23:06, Renzo Scheffer a =E9crit=A0:
> Hi,
>
>
>
> can anybody be so kind to tell me if it is possible to search a Term by i=
ts
> position?
>
>
>
> I search a term (for excample "soccer") and get back the DocId's and
> positions as follows:
>
>
>
>
>
> TermPositions termPos =3D reader.termPositions(new
> Term("contents","soccer"));
>
> while(termPos.next()){
>
> int freq =3D termPos.freq();
>
> for(int i=3D0; i<freq; i++){
>
>
>
>       int docNumber =3D termPos.doc();
>
>       int position =3D termPos.nextPosition();
>
> System.out.println("DocId: "+docNumber+"; Pos:"+position);
>
> }
>
>
>
>
>
>
>
> Output:
>
>
>
> DocId: 0; Pos: 1
>
> DocId: 0; Pos: 4
>
> DocId: 0; Pos: 7
>
> DocId: 1; Pos: 3
>
> DocId: 1; Pos: 7
>
>
>
> Now I try to get back terms, one position before/after "soccer". I
> considered to take the
>
> Position and increase or decrease it. But I can't find a way to get back a
> term, according to the given Position.
>
> Can anybody help me?
>

I think this is a non-sense to try to find a term. In Lucene, you search wi=
th=20
a term, you are not trying to get some. Basically, in Lucene, you have a li=
st=20
of term pointing on documents, not the reverse.

Maybe if you explain why you are trying to do that, we can find a better wa=
y=20
to do it.

Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 02 22:20:09 2006
Return-Path: <java-user-return-23689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2264 invoked from network); 2 Oct 2006 22:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Oct 2006 22:20:09 -0000
Received: (qmail 38642 invoked by uid 500); 2 Oct 2006 22:20:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38603 invoked by uid 500); 2 Oct 2006 22:20:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38587 invoked by uid 99); 2 Oct 2006 22:20:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 15:20:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.154] ([195.212.29.154:63293] helo=mtagate5.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D8/89-24395-76091254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 15:19:28 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id k92MIYv5069158
	for <java-user@lucene.apache.org>; Mon, 2 Oct 2006 22:18:34 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k92MKgQR2506774
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 00:20:42 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k92MIYCi005371
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 00:18:34 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k92MIYgs005367
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 00:18:34 +0200
In-Reply-To: <30.58.24395.23081254@idunn.apache.osuosl.org>
Subject: Re: get terms by positions
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF4ACC161B.C1568E47-ON882571FB.0076B418-882571FB.007A69A4@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 2 Oct 2006 14:17:04 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 03/10/2006 00:20:41
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can store TermVectors with position info, but I don't think this would
be enough for what you are asking, because it is not meant for direct
access to a term by its position, and because TermVectors store tokens,
i.e. the "indexed" form of the word, which I am not sure is what you need.

It seems doable by the following:

(1) store the field with the document - see
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.Store.html#YES

(2) store term vectors with offsets - see
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.TermVector.html#WITH_OFFSETS

(3) access the TermVector of a document by docid - see
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#getTermFreqVector(int,
 java.lang.String) and
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/TermPositionVector.html

(4) Use the offset info to extract the relevant part of the original text
from the field, iterating backwards and forwards for a whitespace or so -
see
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#document(int,
 org.apache.lucene.document.FieldSelector)

All this seems a lot of work, and I am also not sure about the result
performance - the index size would grow due to both TermVectors and the
stored field. If the field content for each doc is also stored in another
store (say, db) then this is less of a concern, but still, lots of work,
and measureable extra IO (in addition to search) if this is part of a
search application.

Perhaps you can expand on the context of this? How is this feature going to
be used?

"Renzo Scheffer" <renzo.scheffer@gmx.de> wrote on 02/10/2006 14:06:40:
> Hi,
>
>
>
> can anybody be so kind to tell me if it is possible to search a Term by
its
> position?
>
>
>
> I search a term (for excample "soccer") and get back the DocId's and
> positions as follows:
>
>
>
>
>
> TermPositions termPos = reader.termPositions(new
Term("contents","soccer"));
>
> while(termPos.next()){
>
> int freq = termPos.freq();
>
> for(int i=0; i<freq; i++){
>
>
>
>       int docNumber = termPos.doc();
>
>       int position = termPos.nextPosition();
>
> System.out.println("DocId: "+docNumber+"; Pos:"+position);
>
> }
>
>
>
>
>
>
>
> Output:
>
>
>
> DocId: 0; Pos: 1
>
> DocId: 0; Pos: 4
>
> DocId: 0; Pos: 7
>
> DocId: 1; Pos: 3
>
> DocId: 1; Pos: 7
>
>
>
> Now I try to get back terms, one position before/after "soccer". I
> considered to take the
>
> Position and increase or decrease it. But I can't find a way to get back
a
> term, according to the given Position.
>
> Can anybody help me?
>
>
>
> Thanks, Renzo


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 02:40:45 2006
Return-Path: <java-user-return-23690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59154 invoked from network); 3 Oct 2006 02:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 02:40:44 -0000
Received: (qmail 60558 invoked by uid 500); 3 Oct 2006 02:40:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59556 invoked by uid 500); 3 Oct 2006 02:40:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59545 invoked by uid 99); 3 Oct 2006 02:40:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 19:40:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [216.239.128.26] ([216.239.128.26:1931] helo=smtp.omnis.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 93/F3-29668-4ADC1254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 19:40:37 -0700
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	by smtp-relay.omnis.com (Postfix) with ESMTP id 6BCB81880C19
	for <java-user@lucene.apache.org>; Mon,  2 Oct 2006 19:40:33 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <359a92830610021209w46d9dad6sd198fe72cbda797@mail.gmail.com>
References: <F0C06DE7-C7C4-4DCE-BF2E-10115630A803@ehatchersolutions.com> <BAY22-F1026D34E1F5969C851D75BD41F0@phx.gbl> <359a92830610021209w46d9dad6sd198fe72cbda797@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <474e0cc637d30d17859b89eaba9b99e0@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: A question about query syntax, has it changed?
Date: Mon, 2 Oct 2006 23:14:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am indexing individual pages of books.

I get no results from the query

accurate AND book:"first title"

Each lucene document which represents one page of one book gets a field 
"book" which is indexed, stored, and not tokenized to store the title 
of the book.

The word "accurate" appears on page one of the book "first title" as 
well as in some other books.  I can find "accurate" alone, in which 
case, it shows up from the other books as well.  But if I try to 
restrict the search to the book named "first title," I get no hits.

Am I using the wrong query syntax?  I am using lucene 2.0 and the 
documentation says the query syntax is for 1.9.

When I stepped through the query, the query parser created two things 
to search for, but did not find anything.

It also did not find anything when I looked for

book:"first title"

or

book:(+"first title")

Luke says that there are 50 occurrences of "first title" in the book: 
field, which is the same number as there are pages in the document, so 
I suspect I am creating the index properly but not searching it 
properly.

I got the expected number of responses to

page:1

but when I asked for page:[1 3]

it appeared to find far too many pages.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 03:44:23 2006
Return-Path: <java-user-return-23691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69691 invoked from network); 3 Oct 2006 03:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 03:44:22 -0000
Received: (qmail 98151 invoked by uid 500); 3 Oct 2006 03:44:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97237 invoked by uid 500); 3 Oct 2006 03:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97226 invoked by uid 99); 3 Oct 2006 03:44:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 20:44:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.153] ([195.212.29.153:64235] helo=mtagate4.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D7/25-29668-D8CD1254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 20:44:15 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k933iAun139810
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 03:44:10 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k933kIw73289300
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 05:46:18 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k933iANM001570
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 05:44:10 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k933iAc6001567
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 05:44:10 +0200
In-Reply-To: <474e0cc637d30d17859b89eaba9b99e0@as-st.com>
Subject: Re: A question about query syntax, has it changed?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF296897F8.329A2083-ON882571FC.0013C05C-882571FC.0014643B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 2 Oct 2006 19:42:43 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 03/10/2006 05:46:17
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The problem stems from using the query parser for searching a non tokenized
field ("book").

You can either create a term query for searching in that field, like this:
   new TermQuery(new Term("book","first title"));
Or tokenize the field "book" and keep using QueryParser.

Decision is based on how you want to search the book field. If you always
search for the entire field - TermQuery is the way. For searching within
the text of this field, i.e. when knowing only part of the book title,
tokenizing this field would be the right way.

Bill Taylor <wataylor@as-st.com> wrote on 02/10/2006 20:14:16:

> I am indexing individual pages of books.
>
> I get no results from the query
>
> accurate AND book:"first title"
>
> Each lucene document which represents one page of one book gets a field
> "book" which is indexed, stored, and not tokenized to store the title
> of the book.
>
> The word "accurate" appears on page one of the book "first title" as
> well as in some other books.  I can find "accurate" alone, in which
> case, it shows up from the other books as well.  But if I try to
> restrict the search to the book named "first title," I get no hits.
>
> Am I using the wrong query syntax?  I am using lucene 2.0 and the
> documentation says the query syntax is for 1.9.
>
> When I stepped through the query, the query parser created two things
> to search for, but did not find anything.
>
> It also did not find anything when I looked for
>
> book:"first title"
>
> or
>
> book:(+"first title")
>
> Luke says that there are 50 occurrences of "first title" in the book:
> field, which is the same number as there are pages in the document, so
> I suspect I am creating the index properly but not searching it
> properly.
>
> I got the expected number of responses to
>
> page:1
>
> but when I asked for page:[1 3]
>
> it appeared to find far too many pages.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 04:39:59 2006
Return-Path: <java-user-return-23692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87155 invoked from network); 3 Oct 2006 04:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 04:39:59 -0000
Received: (qmail 24087 invoked by uid 500); 3 Oct 2006 04:39:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24057 invoked by uid 500); 3 Oct 2006 04:39:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24044 invoked by uid 99); 3 Oct 2006 04:39:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 21:39:54 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ykzhujiang@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.176] ([64.233.166.176:59050] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AB/86-29668-799E1254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 21:39:53 -0700
Received: by py-out-1112.google.com with SMTP id s49so1554974pyc
        for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 21:39:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATQOQRCVCSTnTmd7/QSnO4LIc4BzBHLelerr9tlWLufr0VppkoB7OjgYRkY/X2Swb8dQ51w4/exEPizOqoE2zjWDzvxpcYhX5O6ttrRIWeNdss7Q88ECg5WdQGlrJmRvHbjawgo5cboqhdox0GKbPomLE54/1X+dU+dt9qV9UVY=
Received: by 10.35.51.19 with SMTP id d19mr14641270pyk;
        Mon, 02 Oct 2006 21:39:46 -0700 (PDT)
Received: by 10.35.83.15 with HTTP; Mon, 2 Oct 2006 21:39:46 -0700 (PDT)
Message-ID: <23ee59170610022139y6a816684i39fa9a9f93005898@mail.gmail.com>
Date: Tue, 3 Oct 2006 12:39:46 +0800
From: "zhu jiang" <ykzhujiang@gmail.com>
To: java-user@lucene.apache.org
Subject: [Lucene 2.0]How to recover index?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87857_2767727.1159850386534"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_87857_2767727.1159850386534
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

    In some situation, index files may throw read past EOF exception so that
the index cannot be used any more. I wonder how to recover the index files
in such situation?


-- 
Thanks,
Jiang

------=_Part_87857_2767727.1159850386534--

From java-user-return-23693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 04:42:11 2006
Return-Path: <java-user-return-23693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87848 invoked from network); 3 Oct 2006 04:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 04:42:11 -0000
Received: (qmail 25888 invoked by uid 500); 3 Oct 2006 04:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25862 invoked by uid 500); 3 Oct 2006 04:42:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25851 invoked by uid 99); 3 Oct 2006 04:42:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 21:42:06 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=m.scott.tiger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.178] ([64.233.166.178:60220] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 99/96-29668-A1AE1254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 21:42:03 -0700
Received: by py-out-1112.google.com with SMTP id s49so1555567pyc
        for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 21:41:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=o2byLjpJ7lrLoIfJKmq0bEs2RiG9i3gyWLOVeY1OXL+idt110Z3qxJwGueYz5llCGwUAP3jF0diZCxGt+SygEeHbnJoxukAqOxFXRaAYafMm2r1tAcqOSMkS80klHk2QYumg40puS6OJ+BjpuNLND5+XJ+WmB/tLIa43ZdMYQcs=
Received: by 10.35.72.6 with SMTP id z6mr9246756pyk;
        Mon, 02 Oct 2006 21:41:58 -0700 (PDT)
Received: from ?192.168.12.23? ( [220.150.108.116])
        by mx.gmail.com with ESMTP id w63sm8177075pyw.2006.10.02.21.41.57;
        Mon, 02 Oct 2006 21:41:58 -0700 (PDT)
Message-ID: <4521EA11.2030401@gmail.com>
Date: Tue, 03 Oct 2006 13:41:53 +0900
From: Scott <m.scott.tiger@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Searching documents on big index by using ParallelMultiSearcher is
 slow...
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a question about ParallelMultiSearcher performance.

I want to search documents on about 10 gigabytes of index.
(The index has 10,000,000 documents.)

I get very slow performance using IndexSearcher with ONE index normally.
Then I tried to use ParallelMultiSearcher with 10 servers of remote
searchable.

Index:
Each search slaves have 1/10 of index.
(ONE index divided to 10 servers.)

Search slave:
Each search slaves start remote searchable RMI server,
and wait connecting from search master.

Search master:
The search master use Naming.lookup() to get remote searchable.
Get 10 remote searchables from each search slaves and build
ParallelMultiSearcher.
Then search.

Any solution?

-- 
Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 05:59:38 2006
Return-Path: <java-user-return-23694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17633 invoked from network); 3 Oct 2006 05:59:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 05:59:38 -0000
Received: (qmail 66343 invoked by uid 500); 3 Oct 2006 05:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66312 invoked by uid 500); 3 Oct 2006 05:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66301 invoked by uid 99); 3 Oct 2006 05:59:31 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 22:59:31 -0700
X-ASF-Spam-Status: No, hits=2.2 required=5.0 tests=RCVD_IN_WHOIS_INVALID
Received: from [212.226.92.15] ([212.226.92.15:39893] helo=monkey.teamware.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8C/38-29668-33CF1254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 22:59:22 -0700
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id k935wRTt004797
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 08:58:27 +0300
Received: from [10.142.3.11] ([10.142.3.11]) by nimitz with ESMTP
	 id ma38mug8; 3 Oct 2006 08:58:00 +0300
Message-ID: <4521FC01.7070303@teamware.com>
Date: Tue, 03 Oct 2006 15:58:25 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Multi-threaded IndexWriter
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a multi-threaded indexing application that indexes documents into a set 
of Lucene index databases (I have millions of documents to index, hence the 
split DB) .  When a thread gets an index request, it determines the index DB to 
index the data in.  It grabs the IndexWriter for that database.

My question is: If I have several threads that want to index some data for the 
same DB concurrently and also have threads that will be wanting to delete 
documents and searchers too.  Does anyone know the benefits and drawbacks of the 
following approaches with respect to the performance characteristics of the 
Lucene internals

a) Serialisation of writes i.e. multiple IndexWriter.close().  Each thread 
blocks waiting for the writer and does

new IndexWriter()
addDocuments()
close IndexWriter

for each thread or

b) Parallelisation of writes with a single IndexWriter.close().  Allow all 
threads to share the same IndexWriter instance.  LIA says that IndexWriter is 
thread-safe between several threads.  So, the first thread requesting the writer 
just creates a new instance, all subsequent threads just add documents to the 
same instance with the last user closing the writer, e.g.

First thread - new IndexWriter()
2..n threads - inc use_count +get existing IndexWriter
all threads - addDocuments()
n..2 threads - dec use_count
Last thread - close IndexWriter

The middle 3 steps will of course happen in random order, not as defined above.

Thanks
Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 06:14:12 2006
Return-Path: <java-user-return-23695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20304 invoked from network); 3 Oct 2006 06:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 06:14:11 -0000
Received: (qmail 76521 invoked by uid 500); 3 Oct 2006 06:14:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76471 invoked by uid 500); 3 Oct 2006 06:14:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76454 invoked by uid 99); 3 Oct 2006 06:14:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Oct 2006 23:14:04 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=catalinmititelu@yahoo.com; domainkeys=good
X-ASF-Spam-Status: No, hits=4.8 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [68.142.200.35] ([68.142.200.35:34357] helo=web31102.mail.mud.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 86/68-29668-57FF1254 for <java-user@lucene.apache.org>; Mon, 02 Oct 2006 23:13:12 -0700
Received: (qmail 58825 invoked by uid 60001); 3 Oct 2006 06:12:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=RmN5PpADXPgr45BtWL+PrmJ8kDRF3iZxP6VtuOVp6z6onHmHNuhgf53K6WBQJoHfrGL+fWp0oVUPFRiTeVlQSYiICuhWNhLrMNmjlv+X7HElljBxaEbaPsxOaD70+Ecp8T0xAdgwWxxgz+OBhmERPWOoqm4UXCmWIJTWsy3jWx0=  ;
Message-ID: <20061003061227.58823.qmail@web31102.mail.mud.yahoo.com>
Received: from [193.230.224.5] by web31102.mail.mud.yahoo.com via HTTP; Mon, 02 Oct 2006 23:12:27 PDT
Date: Mon, 2 Oct 2006 23:12:27 -0700 (PDT)
From: Catalin Mititelu <catalinmititelu@yahoo.com>
Subject: Re: get terms by positions
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-531939061-1159855947=:57833"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-531939061-1159855947=:57833
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=0AI have the same problem.=0AThis is useful when you try to extract the=
 contexts (terms before and after) of a certain term (for example).=0AI fou=
nd a solution but it performs badly: when you try to retrieve those context=
s you have to re-tokenize the documents containing the given term (i.e. "so=
ccer") and you have to keep the before and after tokens using TokenStream a=
nd the current position. Re-tokenizing could be ok on small files, but on l=
arge files it induces a bad performance of the applications.=0AAny differen=
t solution is welcome.=0A=0ACatalin.=0A=0A----- Original Message ----=0AFro=
m: NicolasLalev=E9e <nicolas.lalevee@anyware-tech.com>=0ATo: java-user@luce=
ne.apache.org=0ASent: Tuesday, October 3, 2006 1:04:20 AM=0ASubject: Re: ge=
t terms by positions=0A=0ALe Lundi 02 Octobre 2006 23:06, Renzo Scheffer a =
=E9crit :=0A> Hi,=0A>=0A>=0A>=0A> can anybody be so kind to tell me if it i=
s possible to search a Term by its=0A> position?=0A>=0A>=0A>=0A> I search a=
 term (for excample "soccer") and get back the DocId's and=0A> positions as=
 follows:=0A>=0A>=0A>=0A>=0A>=0A> TermPositions termPos =3D reader.termPosi=
tions(new=0A> Term("contents","soccer"));=0A>=0A> while(termPos.next()){=0A=
>=0A> int freq =3D termPos.freq();=0A>=0A> for(int i=3D0; i<freq; i++){=0A>=
=0A>=0A>=0A>       int docNumber =3D termPos.doc();=0A>=0A>       int posit=
ion =3D termPos.nextPosition();=0A>=0A> System.out.println("DocId: "+docNum=
ber+"; Pos:"+position);=0A>=0A> }=0A>=0A>=0A>=0A>=0A>=0A>=0A>=0A> Output:=
=0A>=0A>=0A>=0A> DocId: 0; Pos: 1=0A>=0A> DocId: 0; Pos: 4=0A>=0A> DocId: 0=
; Pos: 7=0A>=0A> DocId: 1; Pos: 3=0A>=0A> DocId: 1; Pos: 7=0A>=0A>=0A>=0A> =
Now I try to get back terms, one position before/after "soccer". I=0A> cons=
idered to take the=0A>=0A> Position and increase or decrease it. But I can'=
t find a way to get back a=0A> term, according to the given Position.=0A>=
=0A> Can anybody help me?=0A>=0A=0AI think this is a non-sense to try to fi=
nd a term. In Lucene, you search with =0Aa term, you are not trying to get =
some. Basically, in Lucene, you have a list =0Aof term pointing on document=
s, not the reverse.=0A=0AMaybe if you explain why you are trying to do that=
, we can find a better way =0Ato do it.=0A=0ANicolas=0A=0A-----------------=
----------------------------------------------------=0ATo unsubscribe, e-ma=
il: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A=0A
--0-531939061-1159855947=:57833--

From java-user-return-23696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 08:57:09 2006
Return-Path: <java-user-return-23696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62683 invoked from network); 3 Oct 2006 08:57:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 08:57:09 -0000
Received: (qmail 61608 invoked by uid 500); 3 Oct 2006 08:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61569 invoked by uid 500); 3 Oct 2006 08:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61558 invoked by uid 99); 3 Oct 2006 08:57:03 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FUZZY_AMBIEN,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.151.11.161] (HELO smtp.ya.com) (62.151.11.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 01:57:02 -0700
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1GUg1X-0001DQ-00
	for java-user@lucene.apache.org; Tue, 03 Oct 2006 10:53:11 +0200
Message-ID: <167001c6e6c9$928eb9c0$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
Subject: I need your opinion about working with big index and frecuently updates
Date: Tue, 3 Oct 2006 10:54:44 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_166D_01C6E6DA.560B7BD0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_166D_01C6E6DA.560B7BD0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
I'm working with a 100Mb length index. By application requirements, the =
information indexed is frecuently updated, with plenty of modifications, =
deletions and additions.

I think Lucene is a very powerful searching tool once the index is =
already created, but I'm not sure if update index frecuently is also =
efficient. Even when index is quite long.=20

Previosly, I regenerated all index from zero once at the day, but now I =
need changes to be noticed earlier.

=BFHow would you implement this?

Sorry for my bad english.

Thanks

------=_NextPart_000_166D_01C6E6DA.560B7BD0--


From java-user-return-23697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 08:59:32 2006
Return-Path: <java-user-return-23697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63607 invoked from network); 3 Oct 2006 08:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 08:59:31 -0000
Received: (qmail 64421 invoked by uid 500); 3 Oct 2006 08:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64254 invoked by uid 500); 3 Oct 2006 08:59:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64243 invoked by uid 99); 3 Oct 2006 08:59:26 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.44.23.182] (HELO mail.spline-software.com) (194.44.23.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 01:59:25 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 076CE2FE2AE; Tue,  3 Oct 2006 11:57:30 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 10F482FE196
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 11:55:57 +0300 (EEST)
Message-ID: <4522259F.7050706@i-hypergrid.com>
Date: Tue, 03 Oct 2006 11:55:59 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: DateTools again
References: <452127F1.3060606@i-hypergrid.com> <452141A6.9050005@scalix.com>
In-Reply-To: <452141A6.9050005@scalix.com>
Content-Type: multipart/alternative;
 boundary="------------020806070904000609020005"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.6 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_30_40,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------020806070904000609020005
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Ok, I'll try to explain a bit.

User has an input (javaScript calendar) on page where he can choose some 
date to include in search. Search resolution is day resolution.

If user will enter same date in different time of date he will get 
different results (because calendar will also set current hour and 
minute in the date). But this is not right behavior.

I propose not to use GMT when rounding time to selected resolution. This 
will prevent us from situation described above.

This can be done by replacing two lines  "Calendar cal = 
Calendar.getInstance(GMT);" with "Calendar cal = Calendar.getInstance();"

John Haxby wrote:
> Volodymyr Bychkoviak wrote:
>> I'm using DateTools with Resolution.DAY.
>> I know that dates internally are converted to GMT.
>>
>> Converting dates "2006-10-01 00:00" and "2006-10-01 15:00" from 
>> "Etc/GMT-2" timezone will give us
>> "20060930" and "20061001" respectively.
>>
>> But these dates are identical with day resolution.
>>
>> Is this bug or I'm missing something?
>>
> They're not identical.   The first one is 2006-09-30 22:00:00 UTC and 
> the second 2006-10-01 13:00:00 UTC.
>
> I ran across the problem with DateTools not using UTC when I tried to 
> use an index created in California from the UK: I was looking for 
> documents with a particular date stamp but I found documents with a 
> date stamp from the wrong day.  Even more interesting and bizarre 
> things happen around the change from daylight savings time to normal 
> time.
>
> jch
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
regards,
Volodymyr Bychkoviak


--------------020806070904000609020005--

From java-user-return-23698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 09:05:21 2006
Return-Path: <java-user-return-23698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65035 invoked from network); 3 Oct 2006 09:05:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 09:05:20 -0000
Received: (qmail 70382 invoked by uid 500); 3 Oct 2006 09:05:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69595 invoked by uid 500); 3 Oct 2006 09:05:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69547 invoked by uid 99); 3 Oct 2006 09:05:14 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 02:05:14 -0700
X-ASF-Spam-Status: No, hits=2.8 required=5.0 tests=HTML_MESSAGE,SUSPICIOUS_RECIPS
Received: from [203.197.89.98] ([203.197.89.98:4803] helo=ctsinpunsps.cts.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 75/3A-29668-C5722254 for <solr-user@lucene.apache.org>; Tue, 03 Oct 2006 02:04:58 -0700
Received: from ctsinpunsxub.cts.com ([10.236.133.100]) by ctsinpunsps.cts.com with InterScan Messaging Security Suite; Tue, 03 Oct 2006 14:15:35 +0530
Received: from ctsinpunsxua.cts.com ([10.236.133.200]) by ctsinpunsxub.cts.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 3 Oct 2006 14:15:28 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E6C8.46B0CAA4"
Subject: Indexing In Lucene   
Date: Tue, 3 Oct 2006 14:15:28 +0530
Message-ID: <E07627674982E445BBD8236E84A6A39805D780EB@ctsinpunsxua>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing In Lucene   
Thread-Index: AcbmyEagaImEKxzzT5eHnDJNXWGVVQ==
From: "Ajani, Akil \(Cognizant\)" <Akil.Ajani@cognizant.com>
To: <lucene-net-commits@incubator.apache.org>,
	<lucene-net-dev@incubator.apache.org>,
	<lucene-net-user@incubator.apache.org>
Cc: <lucene-dev@jakarta.apache.org>,
	<lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 03 Oct 2006 08:45:28.0553 (UTC) FILETIME=[46FDE590:01C6E6C8]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E6C8.46B0CAA4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,
      Can you tell me how indexing takes place in lucene(Depth).if
document has 1....n indices then which algorithm it uses,which
information retrival model it uses...

=0D

=0D

Thanks & Regards,

Akil Ajani

Cognizant Technology Solutions India Pvt. Ltd.=0D

Plot # 26, Rajiv Gandhi Infotech Park, MIDC

Hinjewadi, Pune 411057

Tel: (91) (20) 40201100 ext 2825

Vnet: 22809

"Technical Skill is the mastery of complexity, while creativity is the
mastery of simplicity."

=0D



This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorised review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com
------_=_NextPart_001_01C6E6C8.46B0CAA4--

From java-user-return-23699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 10:03:37 2006
Return-Path: <java-user-return-23699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83086 invoked from network); 3 Oct 2006 10:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 10:03:37 -0000
Received: (qmail 48812 invoked by uid 500); 3 Oct 2006 10:03:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48519 invoked by uid 500); 3 Oct 2006 10:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48121 invoked by uid 99); 3 Oct 2006 10:03:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 03:03:25 -0700
X-ASF-Spam-Status: No, hits=2.3 required=5.0 tests=HTML_MESSAGE,MISSING_HEADERS,TO_CC_NONE
Received: from [203.197.89.98] ([203.197.89.98:1942] helo=ctsinpunsps.cts.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AF/BA-29668-20532254 for <solr-user@lucene.apache.org>; Tue, 03 Oct 2006 03:03:08 -0700
Received: from ctsinpunsxub.cts.com ([10.236.133.100]) by ctsinpunsps.cts.com with InterScan Messaging Security Suite; Tue, 03 Oct 2006 14:16:50 +0530
Received: from ctsinpunsxua.cts.com ([10.236.133.200]) by ctsinpunsxub.cts.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 3 Oct 2006 14:16:48 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E6C8.75953E6D"
Subject: Indexing In Lucene
Date: Tue, 3 Oct 2006 14:16:46 +0530
Message-ID: <E07627674982E445BBD8236E84A6A39805D780EC@ctsinpunsxua>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing In Lucene
Thread-Index: AcbmyHT3wdCny6+2RYKvLXIy3ZwZyw==
From: "Ajani, Akil \(Cognizant\)" <Akil.Ajani@cognizant.com>
Bcc:
X-OriginalArrivalTime: 03 Oct 2006 08:46:48.0975 (UTC) FILETIME=[76ED51F0:01C6E6C8]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E6C8.75953E6D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


=0D

Hi,
      Can you tell me how indexing takes place in lucene(Depth).if
document has 1....n indices then which algorithm it uses,which
information retrival model it uses...

=0D

Thanks & Regards,

Akil Ajani

Cognizant Technology Solutions India Pvt. Ltd.=0D

Plot # 26, Rajiv Gandhi Infotech Park, MIDC

Hinjewadi, Pune 411057

Tel: (91) (20) 40201100 ext 2825

Vnet: 22809

"Technical Skill is the mastery of complexity, while creativity is the
mastery of simplicity."

=0D



This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorised review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com
------_=_NextPart_001_01C6E6C8.75953E6D--

From java-user-return-23700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 10:08:49 2006
Return-Path: <java-user-return-23700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87417 invoked from network); 3 Oct 2006 10:08:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 10:08:49 -0000
Received: (qmail 64113 invoked by uid 500); 3 Oct 2006 10:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64085 invoked by uid 500); 3 Oct 2006 10:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64074 invoked by uid 99); 3 Oct 2006 10:08:41 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of wouter@2at.nl designates 213.154.233.61 as permitted sender)
Received: from [213.154.233.61] (HELO kronos.2at.net) (213.154.233.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 03:08:41 -0700
Subject: RE: Indexing In Lucene
Date: Tue, 3 Oct 2006 12:06:06 +0200
MIME-Version: 1.0
Message-ID: <B50FE8BF4F9CF24FB800E28DBB1A2FE02FC58A@gaia.2at.local>
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Thread-Topic: Indexing In Lucene
Thread-Index: AcbmyHT3wdCny6+2RYKvLXIy3ZwZywACvECg
From: "W.H. van Atteveldt" <wouter@2at.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't know what you're doing but the to: header is empty in your email
which is really annoying (since I rely on the to: to sort my mail)

> -----Original Message-----
> From: Ajani, Akil (Cognizant) [mailto:Akil.Ajani@cognizant.com]
> Sent: dinsdag 3 oktober 2006 10:47
> Subject: Indexing In Lucene
>=20
>=20
>=20
>=20
>=20
> Hi,
>       Can you tell me how indexing takes place in lucene(Depth).if
> document has 1....n indices then which algorithm it uses,which
> information retrival model it uses...
>=20
>=20
>=20
>=20
> Thanks & Regards,
>=20
> Akil Ajani
>=20
> Cognizant Technology Solutions India Pvt. Ltd.
>=20
>=20
> Plot # 26, Rajiv Gandhi Infotech Park, MIDC
>=20
> Hinjewadi, Pune 411057
>=20
> Tel: (91) (20) 40201100 ext 2825
>=20
> Vnet: 22809
>=20
> "Technical Skill is the mastery of complexity, while creativity is the
> mastery of simplicity."
>=20
>=20
>=20
>=20
>=20
>=20
> This e-mail and any files transmitted with it are for the sole use of
the
> intended recipient(s) and may contain confidential and privileged
> information.
> If you are not the intended recipient, please contact the sender by
reply
> e-mail and destroy all copies of the original message.
>=20
> Any unauthorised review, use, disclosure, dissemination, forwarding,
> printing or copying of this email or any action taken in reliance on
this
> e-mail is strictly
>=20
> prohibited and may be unlawful.
>=20
>   Visit us at http://www.cognizant.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 10:20:17 2006
Return-Path: <java-user-return-23701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91816 invoked from network); 3 Oct 2006 10:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 10:20:16 -0000
Received: (qmail 78748 invoked by uid 500); 3 Oct 2006 10:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78261 invoked by uid 500); 3 Oct 2006 10:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78206 invoked by uid 99); 3 Oct 2006 10:20:09 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 03:20:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=MSGID_FROM_MTA_HEADER
Received: from [213.165.64.20] ([213.165.64.20:45496] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 66/EA-29668-D2932254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 03:19:52 -0700
Message-ID: <66.EA.29668.D2932254@idunn.apache.osuosl.org>
Received: (qmail invoked by alias); 03 Oct 2006 10:17:16 -0000
Received: from p508C6955.dip.t-dialin.net (EHLO daywalker2) [80.140.105.85]
  by mail.gmx.net (mp022) with SMTP; 03 Oct 2006 12:17:16 +0200
X-Authenticated: #8738313
From: "Renzo Scheffer" <renzo.scheffer@gmx.de>
To: <java-user@lucene.apache.org>
Subject: AW: get terms by positions
Date: Tue, 3 Oct 2006 12:14:03 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <200610030004.20401.nicolas.lalevee@anyware-tech.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbmbsyYlcTGpLFdQ823S2G1VhePNwAYuMsQ
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I try to get back a list of all left or right neighbours of a =
searchterm.
Then I will count them to get back the Information, how often a specific
word is used as neighbour of the searchterm. I know that the results are
variable according to the used Analyzer/Filter. It's just an experiment =
and
first I'll try to find out if it is possible to do something like that =
with
Lucene.

Renzo

-----Urspr=FCngliche Nachricht-----
Von: Nicolas Lalev=E9e [mailto:nicolas.lalevee@anyware-tech.com]=20
Gesendet: Dienstag, 3. Oktober 2006 00:04
An: java-user@lucene.apache.org
Betreff: Re: get terms by positions

Le Lundi 02 Octobre 2006 23:06, Renzo Scheffer a =E9crit=A0:
> Hi,
>
>
>
> can anybody be so kind to tell me if it is possible to search a Term =
by
its
> position?
>
>
>
> I search a term (for excample "soccer") and get back the DocId's and
> positions as follows:
>
>
>
>
>
> TermPositions termPos =3D reader.termPositions(new
> Term("contents","soccer"));
>
> while(termPos.next()){
>
> int freq =3D termPos.freq();
>
> for(int i=3D0; i<freq; i++){
>
>
>
>       int docNumber =3D termPos.doc();
>
>       int position =3D termPos.nextPosition();
>
> System.out.println("DocId: "+docNumber+"; Pos:"+position);
>
> }
>
>
>
>
>
>
>
> Output:
>
>
>
> DocId: 0; Pos: 1
>
> DocId: 0; Pos: 4
>
> DocId: 0; Pos: 7
>
> DocId: 1; Pos: 3
>
> DocId: 1; Pos: 7
>
>
>
> Now I try to get back terms, one position before/after "soccer". I
> considered to take the
>
> Position and increase or decrease it. But I can't find a way to get =
back a
> term, according to the given Position.
>
> Can anybody help me?
>

I think this is a non-sense to try to find a term. In Lucene, you search
with=20
a term, you are not trying to get some. Basically, in Lucene, you have a
list=20
of term pointing on documents, not the reverse.

Maybe if you explain why you are trying to do that, we can find a better =
way

to do it.

Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 10:25:42 2006
Return-Path: <java-user-return-23702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93041 invoked from network); 3 Oct 2006 10:25:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 10:25:41 -0000
Received: (qmail 86823 invoked by uid 500); 3 Oct 2006 10:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85960 invoked by uid 500); 3 Oct 2006 10:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85949 invoked by uid 99); 3 Oct 2006 10:25:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 03:25:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [85.118.4.17] ([85.118.4.17:60156] helo=snorlax.uk.scalix.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E1/FA-29668-29A32254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 03:25:32 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k93AMk4R011496
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 11:22:47 +0100
Received: from [10.11.108.17] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.196-beta)
    via ESMTP; Tue, 03 Oct 2006 11:22:46 +0100 (BST)
Date: Tue, 3 Oct 2006 11:22:44 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <452239F4.8040109@scalix.com>
In-Reply-To: <4522259F.7050706@i-hypergrid.com>
References: <452127F1.3060606@i-hypergrid.com>
References: <452141A6.9050005@scalix.com>
References: <4522259F.7050706@i-hypergrid.com>
Subject: Re: DateTools again
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.7 (X11/20060913)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Volodymyr Bychkoviak wrote:
> User has an input (javaScript calendar) on page where he can choose 
> some date to include in search. Search resolution is day resolution.
>
> If user will enter same date in different time of date he will get 
> different results (because calendar will also set current hour and 
> minute in the date). But this is not right behavior.
>
> I propose not to use GMT when rounding time to selected resolution. 
> This will prevent us from situation described above.
>
> This can be done by replacing two lines  "Calendar cal = 
> Calendar.getInstance(GMT);" with "Calendar cal = Calendar.getInstance();"

I don't think you're improving matters there: you might be 
cancelling-out the effects of timezone adjustment when everyone is in 
the same timezone, but if you have users on a browser in one timezone 
and the server is in a different timezone then you're in for 
interestingly broken results.

There's also the interesting decision about when a day starts.   You're 
using "Etc/GMT-2" instead of (for example) "Europe/Moscow" -- do you 
have daylight savings time?   What happens on the day the clocks 
change?   Is the answer different for spring and summer?   If a document 
is dated, let's say, 00:30 (half an hour after midnight) is its day 
number dependent on the time zone?   What's half an hour after midnight 
when the clocks change?

You say you're using javascript to get a date in a browser -- would it 
not be better to remove the time of day there and just leave you with 
the date?   And have the date as a string so you're not dealing with 
boundary conditions?

When I was struggling with this for mail messages I eventually decided 
that it really only makes sense to deal with GMT.   If some client wants 
messages delivered on, let say, 14-Jul-2006 then the client has to 
produce the range of times that make most sense for it to be 
14-Jul-2006.   Here in the UK that's 13-Jul-2006 23:00:00 UTC to 
14-Jul-2006 22:59:59.   In San Francisco it would be 5pm to 5pm UTC, in 
Moscow, well, you work it out.    Of course, users in San Francisco, 
Wokingham (where I am) and Moscow wouldn't see the same set of documents 
dated 14-Jul-2006, but they'd none of them would see documents dated the 
day before or the day after in their local timezone.   If you want 
everyone to see the same set of documents for Bastille Day then use UTC 
throughout.

I'm not sure what you're doing in javascript, but it may be enough to 
pass along the timezone correction along with the time and use that to 
get the search that you want.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 10:36:16 2006
Return-Path: <java-user-return-23703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95907 invoked from network); 3 Oct 2006 10:36:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 10:36:16 -0000
Received: (qmail 1851 invoked by uid 500); 3 Oct 2006 10:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1817 invoked by uid 500); 3 Oct 2006 10:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1806 invoked by uid 99); 3 Oct 2006 10:36:06 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.44.23.182] (HELO mail.spline-software.com) (194.44.23.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 03:36:06 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 924162FDBFF; Tue,  3 Oct 2006 13:34:46 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 967EB2FDCAF
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 13:34:44 +0300 (EEST)
Message-ID: <45223CC7.3040106@i-hypergrid.com>
Date: Tue, 03 Oct 2006 13:34:47 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: DateTools again
References: <452127F1.3060606@i-hypergrid.com> <452239F4.8040109@scalix.com>
In-Reply-To: <452239F4.8040109@scalix.com>
Content-Type: multipart/alternative;
 boundary="------------040405010109000707010404"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_20_30,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------040405010109000707010404
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

thanks for detailed explanation.

John Haxby wrote:
> Volodymyr Bychkoviak wrote:
>> User has an input (javaScript calendar) on page where he can choose 
>> some date to include in search. Search resolution is day resolution.
>>
>> If user will enter same date in different time of date he will get 
>> different results (because calendar will also set current hour and 
>> minute in the date). But this is not right behavior.
>>
>> I propose not to use GMT when rounding time to selected resolution. 
>> This will prevent us from situation described above.
>>
>> This can be done by replacing two lines  "Calendar cal = 
>> Calendar.getInstance(GMT);" with "Calendar cal = 
>> Calendar.getInstance();"
>
> I don't think you're improving matters there: you might be 
> cancelling-out the effects of timezone adjustment when everyone is in 
> the same timezone, but if you have users on a browser in one timezone 
> and the server is in a different timezone then you're in for 
> interestingly broken results.
>
> There's also the interesting decision about when a day starts.   
> You're using "Etc/GMT-2" instead of (for example) "Europe/Moscow" -- 
> do you have daylight savings time?   What happens on the day the 
> clocks change?   Is the answer different for spring and summer?   If a 
> document is dated, let's say, 00:30 (half an hour after midnight) is 
> its day number dependent on the time zone?   What's half an hour after 
> midnight when the clocks change?
>
> You say you're using javascript to get a date in a browser -- would it 
> not be better to remove the time of day there and just leave you with 
> the date?   And have the date as a string so you're not dealing with 
> boundary conditions?
>
> When I was struggling with this for mail messages I eventually decided 
> that it really only makes sense to deal with GMT.   If some client 
> wants messages delivered on, let say, 14-Jul-2006 then the client has 
> to produce the range of times that make most sense for it to be 
> 14-Jul-2006.   Here in the UK that's 13-Jul-2006 23:00:00 UTC to 
> 14-Jul-2006 22:59:59.   In San Francisco it would be 5pm to 5pm UTC, 
> in Moscow, well, you work it out.    Of course, users in San 
> Francisco, Wokingham (where I am) and Moscow wouldn't see the same set 
> of documents dated 14-Jul-2006, but they'd none of them would see 
> documents dated the day before or the day after in their local 
> timezone.   If you want everyone to see the same set of documents for 
> Bastille Day then use UTC throughout.
>
> I'm not sure what you're doing in javascript, but it may be enough to 
> pass along the timezone correction along with the time and use that to 
> get the search that you want.
>
> jch
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
regards,
Volodymyr Bychkoviak


--------------040405010109000707010404--

From java-user-return-23704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 10:58:40 2006
Return-Path: <java-user-return-23704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5382 invoked from network); 3 Oct 2006 10:58:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 10:58:40 -0000
Received: (qmail 30455 invoked by uid 500); 3 Oct 2006 10:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30420 invoked by uid 500); 3 Oct 2006 10:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30387 invoked by uid 99); 3 Oct 2006 10:58:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 03:58:32 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ykzhujiang@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.182] ([64.233.166.182:32989] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 73/3B-29668-64242254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 03:58:23 -0700
Received: by py-out-1112.google.com with SMTP id s49so1664351pyc
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 03:56:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DftNatrAeC5QM0wysW0QgcouM94cqlefN4xTEIzmNAkurhL1u9+TNPdgauod9+rCKjIHT4EChKyluWI3p6cfmJWKi3uA6AujNSRXY5UTnkKgcRWEcJ78aw8ILJEA51E/eZM/QMUTNjfjTaN4k3nAIoObtLqDEGAEnCerJOSIHoI=
Received: by 10.35.131.4 with SMTP id i4mr14645628pyn;
        Tue, 03 Oct 2006 03:56:43 -0700 (PDT)
Received: by 10.35.83.15 with HTTP; Tue, 3 Oct 2006 03:56:43 -0700 (PDT)
Message-ID: <23ee59170610030356x1038b126nb0bf50f1afe7c08d@mail.gmail.com>
Date: Tue, 3 Oct 2006 18:56:43 +0800
From: "zhu jiang" <ykzhujiang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [Lucene 2.0]How to recover index?
In-Reply-To: <23ee59170610022139y6a816684i39fa9a9f93005898@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_91815_9197321.1159873003830"
References: <23ee59170610022139y6a816684i39fa9a9f93005898@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_91815_9197321.1159873003830
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Anyone can help me???

2006/10/3, zhu jiang <ykzhujiang@gmail.com>:
>
> Hi all,
>
>     In some situation, index files may throw read past EOF exception so
> that the index cannot be used any more. I wonder how to recover the index
> files in such situation?
>
>
> --
> Thanks,
> Jiang
>



-- 
Thanks,
Jiang

------=_Part_91815_9197321.1159873003830--

From java-user-return-23705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 11:04:56 2006
Return-Path: <java-user-return-23705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11726 invoked from network); 3 Oct 2006 11:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 11:04:55 -0000
Received: (qmail 41094 invoked by uid 500); 3 Oct 2006 11:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40195 invoked by uid 500); 3 Oct 2006 11:04:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40178 invoked by uid 99); 3 Oct 2006 11:04:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 04:04:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
Received: from [203.197.89.98] ([203.197.89.98:2680] helo=ctsinpunsps.cts.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AE/3B-29668-BA342254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 04:04:31 -0700
Received: from ctsinpunsxuc.cts.com ([10.238.25.200]) by ctsinpunsps.cts.com with InterScan Messaging Security Suite; Tue, 03 Oct 2006 14:25:25 +0530
Received: from ctsinpunsxua.cts.com ([10.236.133.200]) by ctsinpunsxuc.cts.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 3 Oct 2006 14:25:25 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E6C9.AAC190EC"
Subject: Indexing In Lucene
Date: Tue, 3 Oct 2006 14:25:25 +0530
Message-ID: <E07627674982E445BBD8236E84A6A39805D780F2@ctsinpunsxua>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing In Lucene
Thread-Index: Acbmyaq4fHfgEKiBS8OiUivwXHaFHw==
From: "Ajani, Akil \(Cognizant\)" <Akil.Ajani@cognizant.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Oct 2006 08:55:25.0661 (UTC) FILETIME=[AAE558D0:01C6E6C9]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E6C9.AAC190EC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


=0D

=0D

Hi,

      Can anyone tell me how indexing takes place in lucene(Depth).i
will be thankful to you if anyone help me..

=0D

Thanks & Regards,

Akil Ajani

Cognizant Technology Solutions India Pvt. Ltd.=0D

Plot # 26, Rajiv Gandhi Infotech Park, MIDC

Hinjewadi, Pune 411057

Tel: (91) (20) 40201100 ext 2825

Vnet: 22809

"Technical Skill is the mastery of complexity, while creativity is the
mastery of simplicity."

=0D



This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorised review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com
------_=_NextPart_001_01C6E6C9.AAC190EC--

From java-user-return-23706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 11:22:37 2006
Return-Path: <java-user-return-23706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24725 invoked from network); 3 Oct 2006 11:22:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 11:22:37 -0000
Received: (qmail 67347 invoked by uid 500); 3 Oct 2006 11:22:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67316 invoked by uid 500); 3 Oct 2006 11:22:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67305 invoked by uid 99); 3 Oct 2006 11:22:29 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.44.23.182] (HELO mail.spline-software.com) (194.44.23.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 04:22:25 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id E307A2F3D0B; Tue,  3 Oct 2006 14:21:09 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 451CB2F3A6C
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 14:21:07 +0300 (EEST)
Message-ID: <452247A6.9040203@i-hypergrid.com>
Date: Tue, 03 Oct 2006 14:21:10 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: MultiFieldQueryParser vs concatenated field
Content-Type: multipart/alternative;
 boundary="------------080509030005070602090102"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_50_60,HTML_MESSAGE autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------080509030005070602090102
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

In my application I need to implement search across several fields.

What is better approach in term of relevance scoring:
Index in separate fields and search using MultiFieldQueryParser or index 
everything as concatenated field an search using this field?

Thanks in advance.

-- 
regards,
Volodymyr Bychkoviak


--------------080509030005070602090102--

From java-user-return-23707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 11:30:45 2006
Return-Path: <java-user-return-23707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30358 invoked from network); 3 Oct 2006 11:30:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 11:30:45 -0000
Received: (qmail 82732 invoked by uid 500); 3 Oct 2006 11:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82708 invoked by uid 500); 3 Oct 2006 11:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82693 invoked by uid 99); 3 Oct 2006 11:30:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 04:30:24 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.176] ([64.233.166.176:56405] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CF/6B-29668-96942254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 04:28:50 -0700
Received: by py-out-1112.google.com with SMTP id s49so1673659pyc
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 04:27:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l2iWxMHNzbEhZxfI5C8B0hKlIkly7GbCJ52aHkv67blzXt/9xoSEx0bfBKpZoKyH1WrJ8nMWYNCUEopu/0vJqUvDA5AZv3MiYt0jdK4hj4vLrNGpLxxmQubkNvzUvbaWAN3HgghXLAoQ6YNLS/idkV/+KusFAy9rw4AoJivkVUg=
Received: by 10.35.111.7 with SMTP id o7mr9665447pym;
        Tue, 03 Oct 2006 04:27:22 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 3 Oct 2006 04:27:21 -0700 (PDT)
Message-ID: <359a92830610030427o70490bb3racac76d36f66db20@mail.gmail.com>
Date: Tue, 3 Oct 2006 07:27:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using ParallelMultiSearcher is slow...
In-Reply-To: <4521EA11.2030401@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75058_4000335.1159874841943"
References: <4521EA11.2030401@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_75058_4000335.1159874841943
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, the first question is always "are you opening/closing your
IndexSearchers for each request on your remote machines?". This is always a
no-no. This is also a question for your single-searcher version.

What is your performance if you only go to one server? I'd start by finding
out what happens when you forget all the ParallelMultiSearcher stuff, all
the RMI stuff etc, and just see what your performance is on one of your
index parts locally. Once that is answered, extend to RMI, then the
Parallel...., at each step seeing if your performance degrades unacceptably.
That'll at least give you a clue what part of the process is the biggest
problem.

And without knowing a LOT more about your searches, and your index, it's
kind of hard to come up with solutions <G>....

Best
Erick

On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>
> Hi,
>
> I have a question about ParallelMultiSearcher performance.
>
> I want to search documents on about 10 gigabytes of index.
> (The index has 10,000,000 documents.)
>
> I get very slow performance using IndexSearcher with ONE index normally.
> Then I tried to use ParallelMultiSearcher with 10 servers of remote
> searchable.
>
> Index:
> Each search slaves have 1/10 of index.
> (ONE index divided to 10 servers.)
>
> Search slave:
> Each search slaves start remote searchable RMI server,
> and wait connecting from search master.
>
> Search master:
> The search master use Naming.lookup() to get remote searchable.
> Get 10 remote searchables from each search slaves and build
> ParallelMultiSearcher.
> Then search.
>
> Any solution?
>
> --
> Scott
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_75058_4000335.1159874841943--

From java-user-return-23708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 11:44:20 2006
Return-Path: <java-user-return-23708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39815 invoked from network); 3 Oct 2006 11:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 11:44:20 -0000
Received: (qmail 4791 invoked by uid 500); 3 Oct 2006 11:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4327 invoked by uid 500); 3 Oct 2006 11:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4316 invoked by uid 99); 3 Oct 2006 11:44:12 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 04:44:12 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,FUZZY_AMBIEN,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.178] ([64.233.166.178:4176] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 28/8B-29668-BEC42254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 04:43:52 -0700
Received: by py-out-1112.google.com with SMTP id s49so1677916pyc
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 04:42:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DdEr2Ai20poWGbYuOAsf3D4am7/eKDZCxk4XpkqsEQ2NKByailRdQmgLyIEjbd0GO2FWofNHFa1jBnzNhuF7UIh/srYBfyOJyUeIfSBPA90+gxLm1Mjf/NtbzR13RucGEaSOxi1ztzxmizNomHJCBFDz0JIYIWN2tZKSLI8Nmq0=
Received: by 10.35.91.1 with SMTP id t1mr9712753pyl;
        Tue, 03 Oct 2006 04:42:03 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 3 Oct 2006 04:42:03 -0700 (PDT)
Message-ID: <359a92830610030442odd6b8eat2c8a6d6383400540@mail.gmail.com>
Date: Tue, 3 Oct 2006 07:42:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I need your opinion about working with big index and frecuently updates
In-Reply-To: <167001c6e6c9$928eb9c0$1e8e10ac@ecommerce.tspain.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75350_18700792.1159875723762"
References: <167001c6e6c9$928eb9c0$1e8e10ac@ecommerce.tspain.local>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_75350_18700792.1159875723762
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Think about IndexModifier to change your index, although the documentation
does state that it's better to batch your deletions together and batch your
additions together if possible.

100Mb is not, in my experience, a very big index, so I really don't
anticipate many problems. Do note that you can't modify a document in place=
.
That is, to update a document, you need to delete it from the index and
re-add it.

I believe, if you just write some code to take some timings, your questions
will be answered to your satisfaction. I also believe that if you open your
index, change it, and close it for each document, your performance will loo=
k
much worse (on a per-document basis) than if you open your index, do a bunc=
h
of modifications, and *then* close it.

Also note that you MUST close and re-open your IndexSearcher for any change=
s
in your index to be visible. A Searcher will only show the documents in the
index when it was opened (don't worry, it works just fine as you modify you=
r
index, it just doesn't show those modifications). However, you want to keep
your single instance of a searcher open as long as possible since opening a
Searcher is a very expensive operation. This really leaves you with the
question "How quickly to you need to see the results of your index
modifications?" If the answer is that an hour's delay is good enough, you
can just close/re-open your searcher every hour (perhaps just after doing
your updates).

Finally, it would be helpful if we knew how frequently is "frequently" when
you talk about updates. Are you talking hundreds of documents a minute?
tens? a document an hour? Again, I think you'll have a better idea of
whether updating is acceptable if you try an experiment and just take some
timings. I've noticed that when creating an index, the optimize step is a
long one.....

Hope this helps
Erick

P.S. Your English is waaaaaaay better than my ... well... any other languag=
e
<G>.....

On 10/3/06, Enrique Lamas <enrique.lamas@corp.ya.com> wrote:
>
> Hi,
> I'm working with a 100Mb length index. By application requirements, the
> information indexed is frecuently updated, with plenty of modifications,
> deletions and additions.
>
> I think Lucene is a very powerful searching tool once the index is alread=
y
> created, but I'm not sure if update index frecuently is also efficient. E=
ven
> when index is quite long.
>
> Previosly, I regenerated all index from zero once at the day, but now I
> need changes to be noticed earlier.
>
> =BFHow would you implement this?
>
> Sorry for my bad english.
>
> Thanks
>
>

------=_Part_75350_18700792.1159875723762--

From java-user-return-23709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 11:56:36 2006
Return-Path: <java-user-return-23709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48632 invoked from network); 3 Oct 2006 11:56:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 11:56:35 -0000
Received: (qmail 27167 invoked by uid 500); 3 Oct 2006 11:56:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27144 invoked by uid 500); 3 Oct 2006 11:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27133 invoked by uid 99); 3 Oct 2006 11:56:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 04:56:28 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:12999] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 31/AB-29668-D8F42254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 04:55:01 -0700
Received: by py-out-1112.google.com with SMTP id s49so1681180pyc
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 04:53:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GqQ9wNFcdD5gbEdLrpFxvoDkNaqRvEOmT7vZMUXg+Fk+x/L8OaiJuDna8F1872newvloFNT4OY04LX8j5TjXdefXkzKA8e3GyRJinhuaOwgO3EIBUtO0nb8y7cPUv6Oy7Lz/ESXbPv0PWa2NB2yY3c/rg7Aj8wDPSd2aHYmaKUE=
Received: by 10.35.72.6 with SMTP id z6mr9947342pyk;
        Tue, 03 Oct 2006 04:53:31 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 3 Oct 2006 04:53:30 -0700 (PDT)
Message-ID: <359a92830610030453o536b2ad6s1ffc68d31315ffec@mail.gmail.com>
Date: Tue, 3 Oct 2006 07:53:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser vs concatenated field
In-Reply-To: <452247A6.9040203@i-hypergrid.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75478_33516556.1159876410974"
References: <452247A6.9040203@i-hypergrid.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_75478_33516556.1159876410974
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, as always, it depends <G>... My first thought is that I'd index things
in separate fields as it gives you more options. For instance, let's say
that you have name and phone fields and decide that the name field is more
important than the phone number. Your options for boosting "anything in the
name field" are better if it's indexed separately.

I've actually never seen this question discussed on this thread, so in terms
of real knowledge, I'm clueless <G>...

Erick

On 10/3/06, Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com> wrote:
>
> In my application I need to implement search across several fields.
>
> What is better approach in term of relevance scoring:
> Index in separate fields and search using MultiFieldQueryParser or index
> everything as concatenated field an search using this field?
>
> Thanks in advance.
>
> --
> regards,
> Volodymyr Bychkoviak
>
>
>

------=_Part_75478_33516556.1159876410974--

From java-user-return-23710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 12:01:29 2006
Return-Path: <java-user-return-23710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51767 invoked from network); 3 Oct 2006 12:01:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 12:01:29 -0000
Received: (qmail 35403 invoked by uid 500); 3 Oct 2006 12:01:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35364 invoked by uid 500); 3 Oct 2006 12:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35317 invoked by uid 99); 3 Oct 2006 12:01:20 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 05:01:19 -0700
X-ASF-Spam-Status: No, hits=0.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,FUZZY_AMBIEN
Received: from [62.151.11.163] ([62.151.11.163:46653] helo=smtp.ya.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F9/AB-29668-AD052254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 05:00:47 -0700
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1GUius-0001Ml-00
	for java-user@lucene.apache.org; Tue, 03 Oct 2006 13:58:30 +0200
Message-ID: <007801c6e6e3$76b9f1a0$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
References: <167001c6e6c9$928eb9c0$1e8e10ac@ecommerce.tspain.local> <359a92830610030442odd6b8eat2c8a6d6383400540@mail.gmail.com>
Subject: Re: I need your opinion about working with big index and frecuently updates
Date: Tue, 3 Oct 2006 14:00:04 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you very much Erik, I'll think about it and will do some tests.

Bye

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, October 03, 2006 1:42 PM
Subject: Re: I need your opinion about working with big index and frecuently 
updates


Think about IndexModifier to change your index, although the documentation
does state that it's better to batch your deletions together and batch your
additions together if possible.

100Mb is not, in my experience, a very big index, so I really don't
anticipate many problems. Do note that you can't modify a document in place.
That is, to update a document, you need to delete it from the index and
re-add it.

I believe, if you just write some code to take some timings, your questions
will be answered to your satisfaction. I also believe that if you open your
index, change it, and close it for each document, your performance will look
much worse (on a per-document basis) than if you open your index, do a bunch
of modifications, and *then* close it.

Also note that you MUST close and re-open your IndexSearcher for any changes
in your index to be visible. A Searcher will only show the documents in the
index when it was opened (don't worry, it works just fine as you modify your
index, it just doesn't show those modifications). However, you want to keep
your single instance of a searcher open as long as possible since opening a
Searcher is a very expensive operation. This really leaves you with the
question "How quickly to you need to see the results of your index
modifications?" If the answer is that an hour's delay is good enough, you
can just close/re-open your searcher every hour (perhaps just after doing
your updates).

Finally, it would be helpful if we knew how frequently is "frequently" when
you talk about updates. Are you talking hundreds of documents a minute?
tens? a document an hour? Again, I think you'll have a better idea of
whether updating is acceptable if you try an experiment and just take some
timings. I've noticed that when creating an index, the optimize step is a
long one.....

Hope this helps
Erick

P.S. Your English is waaaaaaay better than my ... well... any other language
<G>.....

On 10/3/06, Enrique Lamas <enrique.lamas@corp.ya.com> wrote:
>
> Hi,
> I'm working with a 100Mb length index. By application requirements, the
> information indexed is frecuently updated, with plenty of modifications,
> deletions and additions.
>
> I think Lucene is a very powerful searching tool once the index is already
> created, but I'm not sure if update index frecuently is also efficient. 
> Even
> when index is quite long.
>
> Previosly, I regenerated all index from zero once at the day, but now I
> need changes to be noticed earlier.
>
> How would you implement this?
>
> Sorry for my bad english.
>
> Thanks
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 12:38:09 2006
Return-Path: <java-user-return-23711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62316 invoked from network); 3 Oct 2006 12:38:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 12:38:09 -0000
Received: (qmail 77173 invoked by uid 500); 3 Oct 2006 12:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77116 invoked by uid 500); 3 Oct 2006 12:38:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77099 invoked by uid 99); 3 Oct 2006 12:38:01 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 05:38:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [80.236.3.120] ([80.236.3.120:44012] helo=perreaux.numericable.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5B/EB-29668-A8952254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 05:37:47 -0700
Received: (qmail 6575 invoked from network); 3 Oct 2006 12:27:57 -0000
Received: from unknown (HELO [192.168.1.149]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by perreaux.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 3 Oct 2006 12:27:57 -0000
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing In Lucene
Date: Tue, 3 Oct 2006 14:27:56 +0200
User-Agent: KMail/1.9.1
References: <B50FE8BF4F9CF24FB800E28DBB1A2FE02FC58A@gaia.2at.local>
In-Reply-To: <B50FE8BF4F9CF24FB800E28DBB1A2FE02FC58A@gaia.2at.local>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200610031427.56531.nicolas.lalevee@anyware-tech.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Mardi 03 Octobre 2006 12:06, W.H. van Atteveldt a =E9crit=A0:
> I don't know what you're doing but the to: header is empty in your email
> which is really annoying (since I rely on the to: to sort my mail)

Strange. Looking to the source of Ajani's mail, there is :
To: <java-user@lucene.apache.org>
And my filter worked : I put a "To contains ..."

>
> > -----Original Message-----
> > From: Ajani, Akil (Cognizant) [mailto:Akil.Ajani@cognizant.com]
> > Sent: dinsdag 3 oktober 2006 10:47
> > Subject: Indexing In Lucene
> >
> >
> >
> >
> >
> > Hi,
> >       Can you tell me how indexing takes place in lucene(Depth).if
> > document has 1....n indices then which algorithm it uses,which
> > information retrival model it uses...

I don't understand what you are talking about, but here are some usefull=20
pointers :
=2D the FAQ: http://wiki.apache.org/jakarta-lucene/LuceneFAQ
=2D some articles: http://wiki.apache.org/jakarta-lucene/Resources. I remem=
ber=20
reading a article written by Otis, even if it was for 1.4, it was very=20
interesting.
=2D if it is not sufficient, there are the sources ! ^^

Nicolas

> >
> >
> >
> >
> > Thanks & Regards,
> >
> > Akil Ajani
> >
> > Cognizant Technology Solutions India Pvt. Ltd.
> >
> >
> > Plot # 26, Rajiv Gandhi Infotech Park, MIDC
> >
> > Hinjewadi, Pune 411057
> >
> > Tel: (91) (20) 40201100 ext 2825
> >
> > Vnet: 22809
> >
> > "Technical Skill is the mastery of complexity, while creativity is the
> > mastery of simplicity."
> >
> >
> >
> >
> >
> >
> > This e-mail and any files transmitted with it are for the sole use of
>
> the
>
> > intended recipient(s) and may contain confidential and privileged
> > information.
> > If you are not the intended recipient, please contact the sender by
>
> reply
>
> > e-mail and destroy all copies of the original message.
> >
> > Any unauthorised review, use, disclosure, dissemination, forwarding,
> > printing or copying of this email or any action taken in reliance on
>
> this
>
> > e-mail is strictly
> >
> > prohibited and may be unlawful.
> >
> >   Visit us at http://www.cognizant.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 12:44:01 2006
Return-Path: <java-user-return-23712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63347 invoked from network); 3 Oct 2006 12:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 12:44:01 -0000
Received: (qmail 86075 invoked by uid 500); 3 Oct 2006 12:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85088 invoked by uid 500); 3 Oct 2006 12:43:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85077 invoked by uid 99); 3 Oct 2006 12:43:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 05:43:53 -0700
Received: from [192.168.0.2] (syru77-179.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.158D4A3D@mailer.syr.edu>; Tue, 3 Oct 2006 8:42:51 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <66.EA.29668.D2932254@idunn.apache.osuosl.org>
References: <66.EA.29668.D2932254@idunn.apache.osuosl.org>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <CF5503BB-58B9-475B-AE7C-2E9219E6DFA8@syr.edu>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: AW: get terms by positions
Date: Tue, 3 Oct 2006 08:42:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We often calculate co-occurrence information as an offline task and =20
store it and then it is just a simple lookup at run time.   You just =20
have to put together the appropriate loops based on the window size =20
that you want for any given term.  Probably not efficient if you =20
index is changing a lot.

-Grant

On Oct 3, 2006, at 6:14 AM, Renzo Scheffer wrote:

> I try to get back a list of all left or right neighbours of a =20
> searchterm.
> Then I will count them to get back the Information, how often a =20
> specific
> word is used as neighbour of the searchterm. I know that the =20
> results are
> variable according to the used Analyzer/Filter. It's just an =20
> experiment and
> first I'll try to find out if it is possible to do something like =20
> that with
> Lucene.
>
> Renzo
>
> -----Urspr=FCngliche Nachricht-----
> Von: Nicolas Lalev=E9e [mailto:nicolas.lalevee@anyware-tech.com]
> Gesendet: Dienstag, 3. Oktober 2006 00:04
> An: java-user@lucene.apache.org
> Betreff: Re: get terms by positions
>
> Le Lundi 02 Octobre 2006 23:06, Renzo Scheffer a =E9crit :
>> Hi,
>>
>>
>>
>> can anybody be so kind to tell me if it is possible to search a =20
>> Term by
> its
>> position?
>>
>>
>>
>> I search a term (for excample "soccer") and get back the DocId's and
>> positions as follows:
>>
>>
>>
>>
>>
>> TermPositions termPos =3D reader.termPositions(new
>> Term("contents","soccer"));
>>
>> while(termPos.next()){
>>
>> int freq =3D termPos.freq();
>>
>> for(int i=3D0; i<freq; i++){
>>
>>
>>
>>       int docNumber =3D termPos.doc();
>>
>>       int position =3D termPos.nextPosition();
>>
>> System.out.println("DocId: "+docNumber+"; Pos:"+position);
>>
>> }
>>
>>
>>
>>
>>
>>
>>
>> Output:
>>
>>
>>
>> DocId: 0; Pos: 1
>>
>> DocId: 0; Pos: 4
>>
>> DocId: 0; Pos: 7
>>
>> DocId: 1; Pos: 3
>>
>> DocId: 1; Pos: 7
>>
>>
>>
>> Now I try to get back terms, one position before/after "soccer". I
>> considered to take the
>>
>> Position and increase or decrease it. But I can't find a way to =20
>> get back a
>> term, according to the given Position.
>>
>> Can anybody help me?
>>
>
> I think this is a non-sense to try to find a term. In Lucene, you =20
> search
> with
> a term, you are not trying to get some. Basically, in Lucene, you =20
> have a
> list
> of term pointing on documents, not the reverse.
>
> Maybe if you explain why you are trying to do that, we can find a =20
> better way
>
> to do it.
>
> Nicolas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 12:49:13 2006
Return-Path: <java-user-return-23713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64594 invoked from network); 3 Oct 2006 12:49:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 12:49:12 -0000
Received: (qmail 92403 invoked by uid 500); 3 Oct 2006 12:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91294 invoked by uid 500); 3 Oct 2006 12:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91278 invoked by uid 99); 3 Oct 2006 12:49:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 05:49:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [80.236.3.115] ([80.236.3.115:56244] helo=nash.numericable.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FD/FB-29668-52C52254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 05:48:45 -0700
Received: (qmail 23086 invoked from network); 3 Oct 2006 12:45:30 -0000
Received: from unknown (HELO [192.168.1.149]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by nash.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 3 Oct 2006 12:45:30 -0000
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing In Lucene
Date: Tue, 3 Oct 2006 14:45:30 +0200
User-Agent: KMail/1.9.1
References: <B50FE8BF4F9CF24FB800E28DBB1A2FE02FC58A@gaia.2at.local> <200610031427.56531.nicolas.lalevee@anyware-tech.com>
In-Reply-To: <200610031427.56531.nicolas.lalevee@anyware-tech.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200610031445.30376.nicolas.lalevee@anyware-tech.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Mardi 03 Octobre 2006 14:27, Nicolas Lalev=E9e a =E9crit=A0:
> Le Mardi 03 Octobre 2006 12:06, W.H. van Atteveldt a =E9crit=A0:
> > I don't know what you're doing but the to: header is empty in your email
> > which is really annoying (since I rely on the to: to sort my mail)
>
> Strange. Looking to the source of Ajani's mail, there is :
> To: <java-user@lucene.apache.org>
> And my filter worked : I put a "To contains ..."

You were right, two other mails were send, which wasn't filtered (that's wh=
y I=20
didn't saw them first), due to some mess in the 'to' and 'cc'. I agree it's=
=20
annoying.

>
> > > -----Original Message-----
> > > From: Ajani, Akil (Cognizant) [mailto:Akil.Ajani@cognizant.com]
> > > Sent: dinsdag 3 oktober 2006 10:47
> > > Subject: Indexing In Lucene
> > >
> > >
> > >
> > >
> > >
> > > Hi,
> > >       Can you tell me how indexing takes place in lucene(Depth).if
> > > document has 1....n indices then which algorithm it uses,which
> > > information retrival model it uses...
>
> I don't understand what you are talking about, but here are some usefull
> pointers :
> - the FAQ: http://wiki.apache.org/jakarta-lucene/LuceneFAQ
> - some articles: http://wiki.apache.org/jakarta-lucene/Resources. I
> remember reading a article written by Otis, even if it was for 1.4, it was
> very interesting.
> - if it is not sufficient, there are the sources ! ^^
>
> Nicolas
>
> > > Thanks & Regards,
> > >
> > > Akil Ajani
> > >
> > > Cognizant Technology Solutions India Pvt. Ltd.
> > >
> > >
> > > Plot # 26, Rajiv Gandhi Infotech Park, MIDC
> > >
> > > Hinjewadi, Pune 411057
> > >
> > > Tel: (91) (20) 40201100 ext 2825
> > >
> > > Vnet: 22809
> > >
> > > "Technical Skill is the mastery of complexity, while creativity is the
> > > mastery of simplicity."
> > >
> > >
> > >
> > >
> > >
> > >
> > > This e-mail and any files transmitted with it are for the sole use of
> >
> > the
> >
> > > intended recipient(s) and may contain confidential and privileged
> > > information.
> > > If you are not the intended recipient, please contact the sender by
> >
> > reply
> >
> > > e-mail and destroy all copies of the original message.
> > >
> > > Any unauthorised review, use, disclosure, dissemination, forwarding,
> > > printing or copying of this email or any action taken in reliance on
> >
> > this
> >
> > > e-mail is strictly
> > >
> > > prohibited and may be unlawful.
> > >
> > >   Visit us at http://www.cognizant.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 13:08:00 2006
Return-Path: <java-user-return-23714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71679 invoked from network); 3 Oct 2006 13:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 13:07:59 -0000
Received: (qmail 24176 invoked by uid 500); 3 Oct 2006 13:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23403 invoked by uid 500); 3 Oct 2006 13:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23153 invoked by uid 500); 3 Oct 2006 13:07:49 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 23045 invoked by uid 99); 3 Oct 2006 13:07:48 -0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MISSING_HEADERS,TO_CC_NONE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.197.89.98] (HELO ctsinpunsps.cts.com) (203.197.89.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 06:07:48 -0700
Received: from ctsinpunsxub.cts.com ([10.236.133.100]) by ctsinpunsps.cts.com with InterScan Messaging Security Suite; Tue, 03 Oct 2006 14:16:50 +0530
Received: from ctsinpunsxua.cts.com ([10.236.133.200]) by ctsinpunsxub.cts.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 3 Oct 2006 14:16:48 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E6C8.75953E6D"
Subject: Indexing In Lucene
Date: Tue, 3 Oct 2006 14:16:46 +0530
Message-ID: <E07627674982E445BBD8236E84A6A39805D780EC@ctsinpunsxua>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing In Lucene
Thread-Index: AcbmyHT3wdCny6+2RYKvLXIy3ZwZyw==
From: "Ajani, Akil \(Cognizant\)" <Akil.Ajani@cognizant.com>
Bcc:
X-OriginalArrivalTime: 03 Oct 2006 08:46:48.0975 (UTC) FILETIME=[76ED51F0:01C6E6C8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E6C8.75953E6D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


=0D

Hi,
      Can you tell me how indexing takes place in lucene(Depth).if
document has 1....n indices then which algorithm it uses,which
information retrival model it uses...

=0D

Thanks & Regards,

Akil Ajani

Cognizant Technology Solutions India Pvt. Ltd.=0D

Plot # 26, Rajiv Gandhi Infotech Park, MIDC

Hinjewadi, Pune 411057

Tel: (91) (20) 40201100 ext 2825

Vnet: 22809

"Technical Skill is the mastery of complexity, while creativity is the
mastery of simplicity."

=0D



This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorised review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com
------_=_NextPart_001_01C6E6C8.75953E6D--

From java-user-return-23715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 13:40:31 2006
Return-Path: <java-user-return-23715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87751 invoked from network); 3 Oct 2006 13:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 13:40:30 -0000
Received: (qmail 79477 invoked by uid 500); 3 Oct 2006 13:40:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79453 invoked by uid 500); 3 Oct 2006 13:40:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79441 invoked by uid 99); 3 Oct 2006 13:40:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [80.236.3.116] (HELO brando.numericable.net) (80.236.3.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 06:40:19 -0700
Received: (qmail 9979 invoked from network); 3 Oct 2006 12:38:31 -0000
Received: from unknown (HELO [192.168.1.149]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by brando.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 3 Oct 2006 12:38:31 -0000
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: AW: get terms by positions
Date: Tue, 3 Oct 2006 14:38:30 +0200
User-Agent: KMail/1.9.1
References: <66.EA.29668.D2932254@idunn.apache.osuosl.org>
In-Reply-To: <66.EA.29668.D2932254@idunn.apache.osuosl.org>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200610031438.30924.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Mardi 03 Octobre 2006 12:14, Renzo Scheffer a =E9crit=A0:
> I try to get back a list of all left or right neighbours of a searchterm.
> Then I will count them to get back the Information, how often a specific
> word is used as neighbour of the searchterm. I know that the results are
> variable according to the used Analyzer/Filter. It's just an experiment a=
nd
> first I'll try to find out if it is possible to do something like that wi=
th
> Lucene.

So you are trying to do some analysis about the documents stored in your=20
index. I would say that Lucene isn't designed to do it at all. Lucene is do=
ne=20
for searching.

BTW, as Doron show us, there is maybe a way to acheive this. See also=20
the "similarity" contribution of Lucene.

Nicolas

>
> Renzo
>
> -----Urspr=FCngliche Nachricht-----
> Von: Nicolas Lalev=E9e [mailto:nicolas.lalevee@anyware-tech.com]
> Gesendet: Dienstag, 3. Oktober 2006 00:04
> An: java-user@lucene.apache.org
> Betreff: Re: get terms by positions
>
> Le Lundi 02 Octobre 2006 23:06, Renzo Scheffer a =E9crit=A0:
> > Hi,
> >
> >
> >
> > can anybody be so kind to tell me if it is possible to search a Term by
>
> its
>
> > position?
> >
> >
> >
> > I search a term (for excample "soccer") and get back the DocId's and
> > positions as follows:
> >
> >
> >
> >
> >
> > TermPositions termPos =3D reader.termPositions(new
> > Term("contents","soccer"));
> >
> > while(termPos.next()){
> >
> > int freq =3D termPos.freq();
> >
> > for(int i=3D0; i<freq; i++){
> >
> >
> >
> >       int docNumber =3D termPos.doc();
> >
> >       int position =3D termPos.nextPosition();
> >
> > System.out.println("DocId: "+docNumber+"; Pos:"+position);
> >
> > }
> >
> >
> >
> >
> >
> >
> >
> > Output:
> >
> >
> >
> > DocId: 0; Pos: 1
> >
> > DocId: 0; Pos: 4
> >
> > DocId: 0; Pos: 7
> >
> > DocId: 1; Pos: 3
> >
> > DocId: 1; Pos: 7
> >
> >
> >
> > Now I try to get back terms, one position before/after "soccer". I
> > considered to take the
> >
> > Position and increase or decrease it. But I can't find a way to get back
> > a term, according to the given Position.
> >
> > Can anybody help me?
>
> I think this is a non-sense to try to find a term. In Lucene, you search
> with
> a term, you are not trying to get some. Basically, in Lucene, you have a
> list
> of term pointing on documents, not the reverse.
>
> Maybe if you explain why you are trying to do that, we can find a better
> way
>
> to do it.
>
> Nicolas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 14:20:40 2006
Return-Path: <java-user-return-23716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 572 invoked from network); 3 Oct 2006 14:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 14:20:40 -0000
Received: (qmail 52941 invoked by uid 500); 3 Oct 2006 14:20:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52905 invoked by uid 500); 3 Oct 2006 14:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52894 invoked by uid 99); 3 Oct 2006 14:20:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 07:20:30 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=grant.ingersoll@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.184.234] ([64.233.184.234:6436] helo=wr-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 25/10-08153-8A172254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 07:20:26 -0700
Received: by wr-out-0506.google.com with SMTP id i28so481302wra
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 07:20:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ddT6AGkWHGHvp0NZQjr3104Br0Ka1eRnYSMDzO8JjGm+WjHf0RIFp3sszEQuGWi5JsljncMUHhUSd7J60GY6auTBwD38ATnzQcjUbCW6Udt8B0L1rQ2paarvnYNvs+TwU83Ka5SXd6CwGLP/FbdI5JlikbHYDc4g0piwVhXQ+Uc=
Received: by 10.90.28.12 with SMTP id b12mr3473898agb;
        Tue, 03 Oct 2006 07:20:22 -0700 (PDT)
Received: from ?192.168.0.2? ( [128.230.77.179])
        by mx.gmail.com with ESMTP id 40sm1196227wrl.2006.10.03.07.20.20;
        Tue, 03 Oct 2006 07:20:21 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <CF5503BB-58B9-475B-AE7C-2E9219E6DFA8@syr.edu>
References: <66.EA.29668.D2932254@idunn.apache.osuosl.org> <CF5503BB-58B9-475B-AE7C-2E9219E6DFA8@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <7FCB293C-45FD-4B43-BBCE-1E8CB8EFDE66@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: AW: get terms by positions
Date: Tue, 3 Oct 2006 10:20:18 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I should note, though, that we do this using the Lucene index, using =20
the TermDocs, etc.

On Oct 3, 2006, at 8:42 AM, Grant Ingersoll wrote:

> We often calculate co-occurrence information as an offline task and =20=

> store it and then it is just a simple lookup at run time.   You =20
> just have to put together the appropriate loops based on the window =20=

> size that you want for any given term.  Probably not efficient if =20
> you index is changing a lot.
>
> -Grant
>
> On Oct 3, 2006, at 6:14 AM, Renzo Scheffer wrote:
>
>> I try to get back a list of all left or right neighbours of a =20
>> searchterm.
>> Then I will count them to get back the Information, how often a =20
>> specific
>> word is used as neighbour of the searchterm. I know that the =20
>> results are
>> variable according to the used Analyzer/Filter. It's just an =20
>> experiment and
>> first I'll try to find out if it is possible to do something like =20
>> that with
>> Lucene.
>>
>> Renzo
>>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Nicolas Lalev=E9e [mailto:nicolas.lalevee@anyware-tech.com]
>> Gesendet: Dienstag, 3. Oktober 2006 00:04
>> An: java-user@lucene.apache.org
>> Betreff: Re: get terms by positions
>>
>> Le Lundi 02 Octobre 2006 23:06, Renzo Scheffer a =E9crit :
>>> Hi,
>>>
>>>
>>>
>>> can anybody be so kind to tell me if it is possible to search a =20
>>> Term by
>> its
>>> position?
>>>
>>>
>>>
>>> I search a term (for excample "soccer") and get back the DocId's and
>>> positions as follows:
>>>
>>>
>>>
>>>
>>>
>>> TermPositions termPos =3D reader.termPositions(new
>>> Term("contents","soccer"));
>>>
>>> while(termPos.next()){
>>>
>>> int freq =3D termPos.freq();
>>>
>>> for(int i=3D0; i<freq; i++){
>>>
>>>
>>>
>>>       int docNumber =3D termPos.doc();
>>>
>>>       int position =3D termPos.nextPosition();
>>>
>>> System.out.println("DocId: "+docNumber+"; Pos:"+position);
>>>
>>> }
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> Output:
>>>
>>>
>>>
>>> DocId: 0; Pos: 1
>>>
>>> DocId: 0; Pos: 4
>>>
>>> DocId: 0; Pos: 7
>>>
>>> DocId: 1; Pos: 3
>>>
>>> DocId: 1; Pos: 7
>>>
>>>
>>>
>>> Now I try to get back terms, one position before/after "soccer". I
>>> considered to take the
>>>
>>> Position and increase or decrease it. But I can't find a way to =20
>>> get back a
>>> term, according to the given Position.
>>>
>>> Can anybody help me?
>>>
>>
>> I think this is a non-sense to try to find a term. In Lucene, you =20
>> search
>> with
>> a term, you are not trying to get some. Basically, in Lucene, you =20
>> have a
>> list
>> of term pointing on documents, not the reverse.
>>
>> Maybe if you explain why you are trying to do that, we can find a =20
>> better way
>>
>> to do it.
>>
>> Nicolas
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
> Voice: 315-443-5484
> Skype: grant_ingersoll
> Fax: 315-443-6886
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 14:49:25 2006
Return-Path: <java-user-return-23717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13915 invoked from network); 3 Oct 2006 14:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 14:49:24 -0000
Received: (qmail 35496 invoked by uid 500); 3 Oct 2006 14:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35473 invoked by uid 500); 3 Oct 2006 14:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35462 invoked by uid 99); 3 Oct 2006 14:49:18 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 07:49:18 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=john.bugger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.184.231] ([64.233.184.231:14853] helo=wr-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E1/31-08153-A6872254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 07:49:15 -0700
Received: by wr-out-0506.google.com with SMTP id i28so487539wra
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 07:49:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yw659obh+uCYOSVze1L/XTQL1OJanlPfI12ivWhHEuf0yeFvOLFdt8vRmlzLgSkAPTuyTzZXC28fYyEbXIKvhgm7wllCrEi94W2rOZDe2sSrgzqYstp4A2vqydN4rBBL6S0QDkPBw/Q+rd1vthUzrWJC6YkKDjEp0+1iT2Xpvm4=
Received: by 10.90.100.6 with SMTP id x6mr3535045agb;
        Tue, 03 Oct 2006 07:49:10 -0700 (PDT)
Received: by 10.90.63.11 with HTTP; Tue, 3 Oct 2006 07:49:10 -0700 (PDT)
Message-ID: <7b2520d40610030749u1226ad70ie4f6d66432ead974@mail.gmail.com>
Date: Tue, 3 Oct 2006 17:49:10 +0300
From: "John Bugger" <john.bugger@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search in HTML code
In-Reply-To: <359a92830610021219u7107aac5lffa2950a5fab71a1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74959_6243682.1159886950636"
References: <7b2520d40610020550k466f230ax80ab6cd2f8ebb495@mail.gmail.com>
	 <359a92830610021219u7107aac5lffa2950a5fab71a1@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_74959_6243682.1159886950636
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My crawler indexing crawled pages with these code:
Document doc = new Document();
doc.add(new Field("body", page.getHtmlData(), Store.YES, Index.UN_TOKENIZED
));
doc.add(new Field("url", page.getUrl(), Store.YES, Index.UN_TOKENIZED));
doc.add(new Field("title", page.getTitle(), Store.YES, Index.TOKENIZED));
doc.add(new Field("id", Integer.toString(page.getId()), Store.YES, Index.NO
));
try {
    indexWriter.addDocument(doc);
}
catch (Exception e) {
    log.error(e.getMessage());
}

I need to write application able to search through indexed pages' html code
using code patterns like:
<table width="100%" height="50" style="border: 1px solid red;">
  *
  <th>*test*</th>
  *
</table>
This should match all documents with such code regardless of order of tag
parameters.
Is it possible with lucene engine?

Thanks!

------=_Part_74959_6243682.1159886950636--

From java-user-return-23718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 15:17:38 2006
Return-Path: <java-user-return-23718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25475 invoked from network); 3 Oct 2006 15:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 15:17:37 -0000
Received: (qmail 2295 invoked by uid 500); 3 Oct 2006 15:17:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2247 invoked by uid 500); 3 Oct 2006 15:17:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2236 invoked by uid 99); 3 Oct 2006 15:17:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 08:17:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [132.210.244.92] ([132.210.244.92:34430] helo=smtpi1.usherbrooke.ca)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 88/22-08153-50F72254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 08:17:27 -0700
Received: from [192.168.1.13] ([132.210.142.98])
	by smtpi1.usherbrooke.ca (8.13.1/8.13.1) with ESMTP id k93FFuST016117
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 11:15:57 -0400
Message-ID: <45227EAC.6060908@usherbrooke.ca>
Date: Tue, 03 Oct 2006 11:15:56 -0400
From: Patrick Turcotte <patrick.turcotte@usherbrooke.ca>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: QueryParser syntax French Operator
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-UdeS-MailScanner-Information: Veuillez consulter le http://www.usherbrooke.ca/vers/virus-courriel
X-UdeS-MailScanner: Aucun code suspect =?ISO-8859-1?Q?d=E9tect=E9?=
X-MailScanner-SpamCheck: n'est pas un polluriel, SpamAssassin (score=-4.399,
	requis 5, autolearn=not spam, ALL_TRUSTED -1.80, BAYES_00 -2.60)
X-UdeS-MailScanner-From: patrick.turcotte@usherbrooke.ca
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Is there a way to add / replace the text for the boolean operators used
by the query parser?

We would like to replace (or even better, add), "AND", "OR" and "NOT" by
"ET", "OU" and "SAUF".

Is there a way to configure the QueryParser to do it?

We know we could always modify QueryParser.jj to add them to the list,
but we'd rather like not to have to recompile/rejar each time there is a
new version of Lucene.

Thanks

-- 
Patrick Turcotte



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 15:21:11 2006
Return-Path: <java-user-return-23719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26819 invoked from network); 3 Oct 2006 15:21:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 15:21:11 -0000
Received: (qmail 8579 invoked by uid 500); 3 Oct 2006 15:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7653 invoked by uid 500); 3 Oct 2006 15:21:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7642 invoked by uid 99); 3 Oct 2006 15:21:04 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 08:21:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:36993] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 58/42-08153-CDF72254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 08:21:02 -0700
Received: (qmail invoked by alias); 03 Oct 2006 15:20:57 -0000
Received: from host-245-34.ka-1.d697379.net (EHLO [192.168.100.124]) [213.30.245.34]
  by mail.gmx.net (mp001) with SMTP; 03 Oct 2006 17:20:57 +0200
X-Authenticated: #12436987
Message-ID: <45227F34.7060705@gmx.net>
Date: Tue, 03 Oct 2006 17:18:12 +0200
From: Aleksei Valikov <valikov@gmx.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene query syntax description in German
Content-Type: text/plain; charset=KOI8-R; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi folks,

Does anybody have the description of Lucene query syntax in German?
Thanks!

Bye.
/lexi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 16:00:24 2006
Return-Path: <java-user-return-23720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40927 invoked from network); 3 Oct 2006 16:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 16:00:24 -0000
Received: (qmail 90988 invoked by uid 500); 3 Oct 2006 16:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90736 invoked by uid 500); 3 Oct 2006 16:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90725 invoked by uid 99); 3 Oct 2006 16:00:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 09:00:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
Received: from [205.207.78.3] ([205.207.78.3:23983] helo=tormail01.cihi.ca)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F9/A3-08153-F0982254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 09:00:16 -0700
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 4c26_b75234f8_52f8_11db_87ff_003048245df9;
	Tue, 03 Oct 2006 12:03:35 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E704.C6A8CB9A"
Subject: native Java DB (eg, Derby) to store the index: performance comparision?..
Date: Tue, 3 Oct 2006 11:58:32 -0400
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F07223F6C@tormail01.cihi.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: native Java DB (eg, Derby) to store the index: performance comparision?..
Thread-Index: AcbnBMaDRRdQ5KrbR4Cb99ksZDQBqw==
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E704.C6A8CB9A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I've been wondering if anyone has tried to compare the performance of
any 'native' Java DB as index storage mechanism vs Lucene custom
implementation? I'm assuming that DB products should provide some
functionality for 'free' right out of the box (correct, if I'm wrong):
=20
- easily managable and maintainable index (accessible through any SQL
client tool)
- efficient access into large massives of data
  * potential support of 'distributed' DB, which can spawn across
multiple boxes transparently to the client app (the Lucene engine
generating the queries)
- much less hassle of integrating Lucene into the applications backed by
the DB (eg, many stores, 'city sites', portals which already have all
their data in relational tables and only need to get efficient fuzzy
searches across this data)
  * no need to keep Lucene index in sync with data, since Lucene will
reuse PKs and indexes from the DB
=20
So, I think the main question is whether Lucene custom way of
maintaining _and accessing_ the index is (much?) more efficient than
that one of available open source native Java DBs (Derby, etc)
=20
Thanks!
=20
Vladimir Olenin
Software Architect
[w]: 416-544-5598
[c]: 416-854-8384
[f]: 416-481-2950
=20

------_=_NextPart_001_01C6E704.C6A8CB9A--

From java-user-return-23721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 16:55:11 2006
Return-Path: <java-user-return-23721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59955 invoked from network); 3 Oct 2006 16:55:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 16:55:11 -0000
Received: (qmail 62629 invoked by uid 500); 3 Oct 2006 16:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61649 invoked by uid 500); 3 Oct 2006 16:55:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61638 invoked by uid 99); 3 Oct 2006 16:55:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 09:55:05 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=fortques@yahoo.com; domainkeys=good
X-ASF-Spam-Status: No, hits=4.8 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [68.142.236.182] ([68.142.236.182:33322] helo=web58414.mail.re3.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8A/25-08153-4E592254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 09:55:01 -0700
Received: (qmail 61226 invoked by uid 60001); 3 Oct 2006 16:50:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=aYxjqwO89rcnr81X5BYPxm2YGwAWFKLmaVRnhiiiYNys02JtJQcWC7WyxnWkR+h3xhWbmh+38MPj2GRRI69GJCZDQk2RJLATNnvbchF0xMkgOLXxZB/20WduNKi5y0Z26VJE5pTz2ugjA1RtaWbxDujXdTvHphCXmQKBqMk0PYA=  ;
Message-ID: <20061003165024.61224.qmail@web58414.mail.re3.yahoo.com>
Received: from [132.197.150.201] by web58414.mail.re3.yahoo.com via HTTP; Tue, 03 Oct 2006 09:50:24 PDT
Date: Tue, 3 Oct 2006 09:50:24 -0700 (PDT)
From: qaz zaq <fortques@yahoo.com>
Subject: Lucene scoring question (how to boost leading terms match)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-619061530-1159894224=:38694"
Content-Transfer-Encoding: 8bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-619061530-1159894224=:38694
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  I have a question about the lucene scoring. In my following example, how can I ensure the doc1 has the higher score than doc2, if I search for "A*". In another words, I want to boost the docs which match their leading terms. 
   
  doc1: Aterm  Bterm  Cterm
  doc2: Bterm  Aterm  Cterm

 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-619061530-1159894224=:38694--

From java-user-return-23722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 17:45:32 2006
Return-Path: <java-user-return-23722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77683 invoked from network); 3 Oct 2006 17:45:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 17:45:32 -0000
Received: (qmail 56357 invoked by uid 500); 3 Oct 2006 17:45:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56336 invoked by uid 500); 3 Oct 2006 17:45:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56325 invoked by uid 99); 3 Oct 2006 17:45:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 10:45:24 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.162.199] ([64.233.162.199:16669] helo=nz-out-0102.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 07/96-08153-0B1A2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 10:45:22 -0700
Received: by nz-out-0102.google.com with SMTP id s18so622054nze
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 10:45:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tok/JnRJCurCCMir3T/ebjBg6XQeSF9nrIGjmmPkXnujx1nIVHRgsS51+CxplKJR57c+2Vy4sXZzi6KJ5+Jlev4TeIkCAa6/a6BNkIUKIyRobwI2k1aVzEvcamlAUe5EPBGpKT7wc4p5PhVAv0ZiXR4Rp5euHeSLJzDRmUdV0jA=
Received: by 10.35.53.18 with SMTP id f18mr15985288pyk;
        Tue, 03 Oct 2006 10:45:18 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 3 Oct 2006 10:45:17 -0700 (PDT)
Message-ID: <359a92830610031045v8c56842v107a1f442f45347a@mail.gmail.com>
Date: Tue, 3 Oct 2006 13:45:17 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search in HTML code
In-Reply-To: <7b2520d40610030749u1226ad70ie4f6d66432ead974@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82703_6745035.1159897517979"
References: <7b2520d40610020550k466f230ax80ab6cd2f8ebb495@mail.gmail.com>
	 <359a92830610021219u7107aac5lffa2950a5fab71a1@mail.gmail.com>
	 <7b2520d40610030749u1226ad70ie4f6d66432ead974@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_82703_6745035.1159897517979
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, anything's possible. Whether Lucene is your best bet may be another
question <G>. But in this example, you're not using Lucene to do anything
except store the strings. By storing all the data as UN_TOKENIZED, all
you're doing is a regex match on the entire HTML text of each document. You
might as well put them in a database and do a "like" clause. Or store them
in files and read each file and do a regex. Or.....

My point is, that this design doesn't leverage what Lucene does, which is
allow you to quickly search on terms. The body you're storing is just a long
string, not a series of tokens. So I question whether lucene is relevant.

Unless you tokenize the body text then do some interesting term enumeration,
I don't think lucene is helping you.

Best
Erick

On 10/3/06, John Bugger <john.bugger@gmail.com> wrote:
>
> My crawler indexing crawled pages with these code:
> Document doc = new Document();
> doc.add(new Field("body", page.getHtmlData(), Store.YES,
> Index.UN_TOKENIZED
> ));
> doc.add(new Field("url", page.getUrl(), Store.YES, Index.UN_TOKENIZED));
> doc.add(new Field("title", page.getTitle(), Store.YES, Index.TOKENIZED));
> doc.add(new Field("id", Integer.toString(page.getId()), Store.YES,
> Index.NO
> ));
> try {
>     indexWriter.addDocument(doc);
> }
> catch (Exception e) {
>     log.error(e.getMessage());
> }
>
> I need to write application able to search through indexed pages' html
> code
> using code patterns like:
> <table width="100%" height="50" style="border: 1px solid red;">
>   *
>   <th>*test*</th>
>   *
> </table>
> This should match all documents with such code regardless of order of tag
> parameters.
> Is it possible with lucene engine?
>
> Thanks!
>
>

------=_Part_82703_6745035.1159897517979--

From java-user-return-23723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 17:58:10 2006
Return-Path: <java-user-return-23723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82866 invoked from network); 3 Oct 2006 17:58:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 17:58:10 -0000
Received: (qmail 91203 invoked by uid 500); 3 Oct 2006 17:58:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91180 invoked by uid 500); 3 Oct 2006 17:58:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91169 invoked by uid 99); 3 Oct 2006 17:58:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 10:58:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:44856] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 62/07-08153-8A4A2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 10:58:01 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D83AB5B77B; Tue,  3 Oct 2006 10:57:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C1D627F403
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 10:57:57 -0700 (PDT)
Date: Tue, 3 Oct 2006 10:57:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser vs concatenated field
In-Reply-To: <359a92830610030453o536b2ad6s1ffc68d31315ffec@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610031053350.682@hal.rescomp.berkeley.edu>
References: <452247A6.9040203@i-hypergrid.com>
 <359a92830610030453o536b2ad6s1ffc68d31315ffec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Well, as always, it depends <G>... My first thought is that I'd index things
: in separate fields as it gives you more options. For instance, let's say
: that you have name and phone fields and decide that the name field is more
: important than the phone number. Your options for boosting "anything in the
: name field" are better if it's indexed separately.

I owuld agree with Erick, for the same reasons he outlined ... in my
opinion the level of control you get when having seperate pieces of data
about your documents in seperate fields is crucial to getting good results
-- as long as you are willing to spend the time figuring out the "best"
query structure and boosts to use on your various fields.

It also gives you the ability to use differnet analyzers on different
types of data -- the anaylyzer you use on a street address may not be the
best analyzer to use on a persons name, etc.

I frequently store the same piece of data in several fields, each with a
differnet analyzer so that i improve the chances of matching on different
variations of user input that might not be parsed properly.

that said: having one big uber field for doing "quick" queries is
certainly nice ... so unless your index is so big that saving every little
extra byte in every document is important, why not do both?

: > In my application I need to implement search across several fields.
: >
: > What is better approach in term of relevance scoring:
: > Index in separate fields and search using MultiFieldQueryParser or index
: > everything as concatenated field an search using this field?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 18:02:22 2006
Return-Path: <java-user-return-23724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85819 invoked from network); 3 Oct 2006 18:02:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 18:02:22 -0000
Received: (qmail 5772 invoked by uid 500); 3 Oct 2006 18:02:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5746 invoked by uid 500); 3 Oct 2006 18:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5735 invoked by uid 99); 3 Oct 2006 18:02:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 11:02:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:46518] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9E/27-08153-7A5A2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 11:02:15 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4843A5B77B; Tue,  3 Oct 2006 11:02:13 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 43B5E7F403
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 11:02:13 -0700 (PDT)
Date: Tue, 3 Oct 2006 11:02:13 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene scoring question (how to boost leading terms match)
In-Reply-To: <20061003165024.61224.qmail@web58414.mail.re3.yahoo.com>
Message-ID: <Pine.LNX.4.58.0610031059170.682@hal.rescomp.berkeley.edu>
References: <20061003165024.61224.qmail@web58414.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


take a look at the SpanFirstQuery ... do do "A*" type searches inside of a
SpanQuery you'll eithe need to use SpanRegexQuery, or roll your own
SpamPrefixQuery out of a SpanOrQuery containing SpamTermQueries.

:   I have a question about the lucene scoring. In my following example,
: how can I ensure the doc1 has the higher score than doc2, if I search
: for "A*". In another words, I want to boost the docs which match their
: leading terms.
:
:   doc1: Aterm  Bterm  Cterm
:   doc2: Bterm  Aterm  Cterm



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 18:49:03 2006
Return-Path: <java-user-return-23725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10103 invoked from network); 3 Oct 2006 18:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 18:49:03 -0000
Received: (qmail 2065 invoked by uid 500); 3 Oct 2006 18:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2046 invoked by uid 500); 3 Oct 2006 18:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2029 invoked by uid 99); 3 Oct 2006 18:48:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 11:48:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [17.250.248.178] ([17.250.248.178:49597] helo=smtpout.mac.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8D/68-08153-E80B2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 11:48:47 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout08/MantshX 4.0) with ESMTP id k93ImimW016701
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 11:48:44 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k93ImaQT029616
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 11:48:43 -0700 (PDT)
Message-ID: <4522B00E.30000@mac.com>
Date: Tue, 03 Oct 2006 14:46:38 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: java.io.IOException: term out of order  --> HELP
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We get this when trying to optimize index:

Exception in thread "main" java.io.IOException: term out of order
at org.apache.lucene.index.TermInfosWriter.add(TermInfosWriter.java:95)
at 
org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:305)
at 
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:272)
at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:236)
at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:89)
at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:681)
at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:658)
at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:517)

Is there anything we can do to save the index?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 18:55:06 2006
Return-Path: <java-user-return-23726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13949 invoked from network); 3 Oct 2006 18:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 18:55:05 -0000
Received: (qmail 14666 invoked by uid 500); 3 Oct 2006 18:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14647 invoked by uid 500); 3 Oct 2006 18:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14636 invoked by uid 99); 3 Oct 2006 18:54:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 11:54:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.153] ([195.212.29.153:33168] helo=mtagate4.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 46/98-08153-DF1B2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 11:54:54 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k93IsnRC173426
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 18:54:49 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k93IuwU32273362
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 20:56:58 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k93Isnhc030283
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 20:54:49 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k93Isnxn030280
	for <java-user@lucene.apache.org>; Tue, 3 Oct 2006 20:54:49 +0200
In-Reply-To: <20061003165024.61224.qmail@web58414.mail.re3.yahoo.com>
Subject: Re: Lucene scoring question (how to boost leading terms match)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF072BAEFC.2CEE7132-ON882571FC.0060CE7D-882571FC.00669FD1@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 3 Oct 2006 10:40:55 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 03/10/2006 20:56:58
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I understand the question, you do not want to boost in advance a certain
doc, but rather score higher those documents containing the search term
closer to the start of the document.

There is more to define here - for instance, if doc1 has 5 words but doc2
has 1,000,000 words, would you still prefer doc1? There is a field norm
factor in Lucene that assign higher scores to matches in shorter field -
would you like to override this as well?

To your question, I can think of these possibilities:

  (1) Write your own query, with a scorer that scores based on term
position (possibly with some relation to field length). This is not
straightforward, and I'm not sure this is the solution you were hoping for.

  (2) Use SpanFirstQuery - something like: new SpanFirstQuery(new
SpanTermQuery(new Term("fieldName","word")),8) - as Hoss suggested. But I
think that here again you would need to modify the scorer to score first
matches higher, because as far as I can see the SpanScorer in use there
does not pour affinity information into the score - i.e. both doc1 and doc2
in your example would get the same score, and the SpanFirstQurey would only
allow you to limit the set of returned documents - Hoss, do you agree with
this?

  (3) When adding the documents to the index, add a special <doc-start>
token to each document - for instance by pre-padding this special token to
the text of the indexed document's field. Then and use a Lucene query that
scores higher terms that are not "too" far away, for instance using a
PhraseQuery with a slope factor greater than 0.
Lastly, modify the query
    ABC
to a phrase query:
    "<doc-start> ABC"
with a slope factor that suitss your needs.
One problem I see with this is that all the documents in your index would
have this token.
Another problem is I don't think prefix queries (e.g. A*) are supported in
a phrase, and if so you would need to extend it a bit..

Hope this helps,
Doron

qaz zaq <fortques@yahoo.com> wrote on 03/10/2006 09:50:24:

> Hi,
>
>   I have a question about the lucene scoring. In my following
> example, how can I ensure the doc1 has the higher score than doc2,
> if I search for "A*". In another words, I want to boost the docs
> which match their leading terms.
>
>   doc1: Aterm  Bterm  Cterm
>   doc2: Bterm  Aterm  Cterm
>
>  __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 19:04:48 2006
Return-Path: <java-user-return-23727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17095 invoked from network); 3 Oct 2006 19:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 19:04:47 -0000
Received: (qmail 44742 invoked by uid 500); 3 Oct 2006 19:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44713 invoked by uid 500); 3 Oct 2006 19:04:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44702 invoked by uid 99); 3 Oct 2006 19:04:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 12:04:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:60138] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 89/E8-08153-744B2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 12:04:40 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7670D5B771; Tue,  3 Oct 2006 12:04:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 678FC7F403
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 12:04:37 -0700 (PDT)
Date: Tue, 3 Oct 2006 12:04:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene scoring question (how to boost leading terms match)
In-Reply-To: <OF072BAEFC.2CEE7132-ON882571FC.0060CE7D-882571FC.00669FD1@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0610031157030.3003@hal.rescomp.berkeley.edu>
References: <OF072BAEFC.2CEE7132-ON882571FC.0060CE7D-882571FC.00669FD1@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: does not pour affinity information into the score - i.e. both doc1 and doc2
: in your example would get the same score, and the SpanFirstQurey would only
: allow you to limit the set of returned documents - Hoss, do you agree with
: this?

Oh ... hmmm ... i think you're right.  SpanScorer scores smaller spans
higher, and I keep thinking that SpanFirst to create Spans that include
the "0" position but you just reminded me that it doesn't (i discovered
that when writting some test cases for SpanScorer.explain) ... it just
returns the Span of the nested query

I recall thinking that it would be really easy to add a boolean arg to
SpanFirstQuery that would make the Span start at 0 to change that behavior
... but i never tried it because i don't personally use Spans so i
couldn't really judge if it was worthwhile/effective ... not to mention i
had bigger fish to fry.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 20:20:22 2006
Return-Path: <java-user-return-23728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50095 invoked from network); 3 Oct 2006 20:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 20:20:21 -0000
Received: (qmail 69070 invoked by uid 500); 3 Oct 2006 20:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68434 invoked by uid 500); 3 Oct 2006 20:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68423 invoked by uid 99); 3 Oct 2006 20:20:15 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 13:20:15 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.190] ([64.233.182.190:21745] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 59/31-00170-9F5C2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 13:20:11 -0700
Received: by nf-out-0910.google.com with SMTP id b2so253254nfe
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 13:20:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MI/+xX8+ha4UWZXZwCSei15dkc77SIc0LWZvKZgD+fdwQsZdtYJjahXe1SDfQLjcbZDXvGMYsgfEv9vHuq+dzE5xdTmTvX5qLOSFikpxigI/w3G+tQWyLZeX2z8Sa1ByaL06BrBqp1+62BSZuE+GUnZa1C+gfluZq3B3LuTjiik=
Received: by 10.82.107.15 with SMTP id f15mr227375buc;
        Tue, 03 Oct 2006 13:20:06 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Tue, 3 Oct 2006 13:20:05 -0700 (PDT)
Message-ID: <6e3ae6310610031320j6965db1ai8f85eed7b6a1d16a@mail.gmail.com>
Date: Tue, 3 Oct 2006 13:20:06 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [Lucene 2.0]How to recover index?
In-Reply-To: <23ee59170610030356x1038b126nb0bf50f1afe7c08d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <23ee59170610022139y6a816684i39fa9a9f93005898@mail.gmail.com>
	 <23ee59170610030356x1038b126nb0bf50f1afe7c08d@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't think it can be recovered. It's better to validate the index
file beforehand, or make sure one thread is updating the index files
and close the index properly.

Chris Lu
--------------------------------------
http://www.dbsight.net
Instant Lucene Search on Any Database/Application

On 10/3/06, zhu jiang <ykzhujiang@gmail.com> wrote:
> Anyone can help me???
>
> 2006/10/3, zhu jiang <ykzhujiang@gmail.com>:
> >
> > Hi all,
> >
> >     In some situation, index files may throw read past EOF exception so
> > that the index cannot be used any more. I wonder how to recover the index
> > files in such situation?
> >
> >
> > --
> > Thanks,
> > Jiang
> >
>
>
>
> --
> Thanks,
> Jiang
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 20:38:02 2006
Return-Path: <java-user-return-23729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55024 invoked from network); 3 Oct 2006 20:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 20:38:02 -0000
Received: (qmail 91423 invoked by uid 500); 3 Oct 2006 20:37:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90763 invoked by uid 500); 3 Oct 2006 20:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90752 invoked by uid 99); 3 Oct 2006 20:37:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 13:37:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [69.55.225.129] ([69.55.225.129:55964] helo=ehatchersolutions.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CB/91-00170-12AC2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 13:37:54 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 64ADC30EFCD5; Tue,  3 Oct 2006 16:37:50 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 962C230EFC1F
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 16:37:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45227EAC.6060908@usherbrooke.ca>
References: <45227EAC.6060908@usherbrooke.ca>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <441B8DCF-B880-44F3-8532-700FC3C6785A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser syntax French Operator
Date: Tue, 3 Oct 2006 16:37:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Currently AND/OR/NOT are hardcoded into the .jj file.  A patch to  
make this configurable would be welcome!

	Erik


On Oct 3, 2006, at 11:15 AM, Patrick Turcotte wrote:

> Hi,
>
> Is there a way to add / replace the text for the boolean operators  
> used
> by the query parser?
>
> We would like to replace (or even better, add), "AND", "OR" and  
> "NOT" by
> "ET", "OU" and "SAUF".
>
> Is there a way to configure the QueryParser to do it?
>
> We know we could always modify QueryParser.jj to add them to the list,
> but we'd rather like not to have to recompile/rejar each time there  
> is a
> new version of Lucene.
>
> Thanks
>
> -- 
> Patrick Turcotte
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 03 21:35:44 2006
Return-Path: <java-user-return-23730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71429 invoked from network); 3 Oct 2006 21:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Oct 2006 21:35:43 -0000
Received: (qmail 66174 invoked by uid 500); 3 Oct 2006 21:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66151 invoked by uid 500); 3 Oct 2006 21:35:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66136 invoked by uid 99); 3 Oct 2006 21:35:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 14:35:37 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=markrmiller@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.230] ([66.249.82.230:35648] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5B/C2-00170-6A7D2254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 14:35:35 -0700
Received: by wx-out-0506.google.com with SMTP id s15so2011896wxc
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 14:35:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=uAwXg1hZPc2bsXRiuVNr++jZPdMxHl1LisjLqaAkE80AphLjSj/co2zNCI14Cqs1lAREdHH0yQ5AV9qTz9aPqLTExafBD3v+E6Cj2102THsZ+RruTTH6m49CZaOybwaxSfWJ7S/OLvvfd+6Y3MBaY4OGnmYLb6nMy9i7jriUHls=
Received: by 10.70.65.5 with SMTP id n5mr14472975wxa;
        Tue, 03 Oct 2006 14:35:30 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.gmail.com with ESMTP id 45sm9764790wri.2006.10.03.14.35.30;
        Tue, 03 Oct 2006 14:35:30 -0700 (PDT)
Message-ID: <4522D7A3.9070204@gmail.com>
Date: Tue, 03 Oct 2006 17:35:31 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator
References: <45227EAC.6060908@usherbrooke.ca>
In-Reply-To: <45227EAC.6060908@usherbrooke.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Oh wouldn't we all. I want this too. Unfortunately, it's an elusive 
beast at best. As I am sure you know, JavaCC generates code based on the 
grammar and so it is very hard to alter the grammar after JavaCC'ing it. 
If you relax the 'add' part then you might be able to do something with 
QueryParserConstants.java. This holds an int for each string in the 
grammar which indexes into a String array...check it out and you will 
see what I mean. So replacing may be as easy as modifying the 'and' and 
'or' and whatnot in that String array. You might make a conditional 
build file that includes the correct QueryParserConstants.java or 
something. I have not explored this too deeply so if you find something 
better or this is a dead end, please let me know.

- Mark

Patrick Turcotte wrote:
> Hi,
>
> Is there a way to add / replace the text for the boolean operators used
> by the query parser?
>
> We would like to replace (or even better, add), "AND", "OR" and "NOT" by
> "ET", "OU" and "SAUF".
>
> Is there a way to configure the QueryParser to do it?
>
> We know we could always modify QueryParser.jj to add them to the list,
> but we'd rather like not to have to recompile/rejar each time there is a
> new version of Lucene.
>
> Thanks
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 00:51:22 2006
Return-Path: <java-user-return-23731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10803 invoked from network); 4 Oct 2006 00:51:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 00:51:22 -0000
Received: (qmail 44655 invoked by uid 500); 4 Oct 2006 00:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44630 invoked by uid 500); 4 Oct 2006 00:51:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44619 invoked by uid 99); 4 Oct 2006 00:51:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 17:51:16 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=khoon.ee.gan@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.187] ([64.233.182.187:33050] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B4/66-00170-18503254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 17:51:15 -0700
Received: by nf-out-0910.google.com with SMTP id b2so310089nfe
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 17:51:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=LPhOJ2apX7Y/YCFnq0tGBM5e0Ygnk7+8bEKr1ZpFiteXY873JcGDe6rQFCdIHVlhdrawZWmbvNX5wvWQQq4c/CmTpurNqT2OPZZj13yGOOus3v9uiV8xxth1hdJIxz2r/NlsoyEi+qpj03PeLYDzSDh1ZDWGdmfCAwTRiG8GJzk=
Received: by 10.82.126.5 with SMTP id y5mr933buc;
        Tue, 03 Oct 2006 17:51:10 -0700 (PDT)
Received: by 10.82.138.15 with HTTP; Tue, 3 Oct 2006 17:51:10 -0700 (PDT)
Message-ID: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com>
Date: Wed, 4 Oct 2006 08:51:10 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Number Proximity Query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20945_14705274.1159923070007"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20945_14705274.1159923070007
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Is there a way to query all numbers that is close to a particular number
(query), and score by how close they are to that number (query) ?

To illustrate further, assume document with single field "num", and the
value for this field can only be integer number. Now, let says, there are 3
documents (doc1, doc2, doc3) with the following "num" values .... 1, 10, and
100. Hence if we query for 12, the return results should be order by doc2,
doc1, doc3. Since 10 is closer to 12, follows by 1, and finally follows by
100.

Is there a way to do this easily in Lucene ?

>From my searches, there seems to be a FunctionQuery in Solr that can do this
type of query. But I am using pure Lucene, and trying to port Solr code over
(to create my own version of FunctionQuery) looks too complicated because of
code dependency on other Solr code such as ValueSource, etc.

I have also search on how to write my own query instance, but there is lack
of documentation on doing so. The formula to calculate the number proximity
is quite trivial. But how to stitch together Query, Weight, Scorer is the
problem :(

Any suggestion is greatly appreciated :)

~KEGan

------=_Part_20945_14705274.1159923070007--

From java-user-return-23732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 03:35:35 2006
Return-Path: <java-user-return-23732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41268 invoked from network); 4 Oct 2006 03:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 03:35:34 -0000
Received: (qmail 62603 invoked by uid 500); 4 Oct 2006 03:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62572 invoked by uid 500); 4 Oct 2006 03:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62561 invoked by uid 99); 4 Oct 2006 03:35:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 20:35:28 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=m.scott.tiger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:61920] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EF/C9-00170-EFB23254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 20:35:26 -0700
Received: by py-out-1112.google.com with SMTP id s49so48887pyc
        for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 20:35:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ueIjRj+lbZhX74smojgOlGZJKlBF1q+LGTp6wSnlRn2Jj93Zg8KtW+Tn8t0f/KKCNGQawZ0mqO6Xfq10K6DzrkMmArENi5bEO/MNDZFDY8kxPBayu3zIHYuB35hNAJBvZwJbtPPKnSbSlm9wsype/TzdjVPPB2ZinXwy9xHDVsI=
Received: by 10.35.10.17 with SMTP id n17mr304981pyi;
        Tue, 03 Oct 2006 20:35:21 -0700 (PDT)
Received: from ?192.168.12.23? ( [220.150.108.116])
        by mx.gmail.com with ESMTP id d13sm156435pyd.2006.10.03.20.35.19;
        Tue, 03 Oct 2006 20:35:21 -0700 (PDT)
Message-ID: <45232BF5.4020006@gmail.com>
Date: Wed, 04 Oct 2006 12:35:17 +0900
From: Scott <m.scott.tiger@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using ParallelMultiSearcher
 is slow...
References: <4521EA11.2030401@gmail.com> <359a92830610030427o70490bb3racac76d36f66db20@mail.gmail.com>
In-Reply-To: <359a92830610030427o70490bb3racac76d36f66db20@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

 > Well, the first question is always "are you opening/closing your
 > IndexSearchers for each request on your remote machines?". This is 
always a
 > no-no. This is also a question for your single-searcher version.

Yes I know, each search slave (RMI server) have single instance
  of IndexSearcher and it's open once when RMI server starts.

 > What is your performance if you only go to one server? I'd start by 
finding

A performance on one server with FULL index (not divided by 10)
  is about 2500 ms.
On one server with splitted index (divided by 10) is about 50 ms.

And on ParallelMultiSearcher with 10 of remote searchable,
  each RemoteSearchable returns in about 50 - 100 ms,
  and ParallelMultiSearcher returns also 50 - 100 ms, because of
  threading.
but Hits Searcher.search(Query, Sort) responds in about 500 - 1000 ms.

I think that Searcher.search with Sort reads all of SortFields from
  IndexReader and it's bottleneck.

Are there results of high performance distributed Lucene with 
ParallelMultiSearcher?
Or need hadoop?

Erick Erickson wrote:
> Well, the first question is always "are you opening/closing your
> IndexSearchers for each request on your remote machines?". This is always a
> no-no. This is also a question for your single-searcher version.
> 
> What is your performance if you only go to one server? I'd start by finding
> out what happens when you forget all the ParallelMultiSearcher stuff, all
> the RMI stuff etc, and just see what your performance is on one of your
> index parts locally. Once that is answered, extend to RMI, then the
> Parallel...., at each step seeing if your performance degrades 
> unacceptably.
> That'll at least give you a clue what part of the process is the biggest
> problem.
> 
> And without knowing a LOT more about your searches, and your index, it's
> kind of hard to come up with solutions <G>....
> 
> Best
> Erick
> 
> On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>>
>> Hi,
>>
>> I have a question about ParallelMultiSearcher performance.
>>
>> I want to search documents on about 10 gigabytes of index.
>> (The index has 10,000,000 documents.)
>>
>> I get very slow performance using IndexSearcher with ONE index normally.
>> Then I tried to use ParallelMultiSearcher with 10 servers of remote
>> searchable.
>>
>> Index:
>> Each search slaves have 1/10 of index.
>> (ONE index divided to 10 servers.)
>>
>> Search slave:
>> Each search slaves start remote searchable RMI server,
>> and wait connecting from search master.
>>
>> Search master:
>> The search master use Naming.lookup() to get remote searchable.
>> Get 10 remote searchables from each search slaves and build
>> ParallelMultiSearcher.
>> Then search.
>>
>> Any solution?
>>
>> -- 
>> Scott
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

-- 
Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 03:49:23 2006
Return-Path: <java-user-return-23733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43801 invoked from network); 4 Oct 2006 03:49:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 03:49:23 -0000
Received: (qmail 73328 invoked by uid 500); 4 Oct 2006 03:49:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72868 invoked by uid 500); 4 Oct 2006 03:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72857 invoked by uid 99); 4 Oct 2006 03:49:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 20:49:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:37599] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AA/2A-00170-B3F23254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 20:49:17 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CC3C75B763; Tue,  3 Oct 2006 20:49:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BCC717F403
	for <java-user@lucene.apache.org>; Tue,  3 Oct 2006 20:49:12 -0700 (PDT)
Date: Tue, 3 Oct 2006 20:49:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Number Proximity Query
In-Reply-To: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu>
References: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: >From my searches, there seems to be a FunctionQuery in Solr that can do this
: type of query. But I am using pure Lucene, and trying to port Solr code over
: (to create my own version of FunctionQuery) looks too complicated because of
: code dependency on other Solr code such as ValueSource, etc.

ValueSource isn't relaly "other Solr code" .. it's an inherient part of
FunctionQuery (hence it's in the same package).

You should be able to use everything in the
org.apache.solr.search.function package as is without any other Solr code.

: I have also search on how to write my own query instance, but there is lack
: of documentation on doing so. The formula to calculate the number proximity
: is quite trivial. But how to stitch together Query, Weight, Scorer is the
: problem :(

Check out the package documentation for org.apache.lucene.search,
particularly section #3 "Changing the Scoring" ...

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/package-summary.html#scoring




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 06:19:16 2006
Return-Path: <java-user-return-23734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80789 invoked from network); 4 Oct 2006 06:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 06:19:16 -0000
Received: (qmail 41304 invoked by uid 500); 4 Oct 2006 06:19:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41275 invoked by uid 500); 4 Oct 2006 06:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41264 invoked by uid 99); 4 Oct 2006 06:19:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Oct 2006 23:19:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [130.238.164.5] ([130.238.164.5:48055] helo=elvira.its.uu.se)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id ED/7E-00170-55253254 for <java-user@lucene.apache.org>; Tue, 03 Oct 2006 23:19:02 -0700
Received: by elvira.its.uu.se (Postfix, from userid 204)
	id 4D8F7765; Wed,  4 Oct 2006 08:18:54 +0200 (MSZ)
Received: from elvira.its.uu.se(127.0.0.1) by elvira.its.uu.se via virus-scan 
	id s274456; Wed, 4 Oct 06 08:18:49 +0200
Received: from tyto.its.uu.se (unknown [IPv6:2001:6b0:b:1:20d:60ff:feeb:e7fe])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	by elvira.its.uu.se (Postfix) with ESMTP id E0094759
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 08:18:48 +0200 (MSZ)
Received: from localhost ([127.0.0.1])
	by tyto.its.uu.se with esmtp (Exim 4.50)
	id 1GV05g-00051x-PF
	for java-user@lucene.apache.org; Wed, 04 Oct 2006 08:18:48 +0200
Received: from c-234de253.16-1-64736c11.cust.bredbandsbolaget.se (c-234de253.16-1-64736c11.cust.bredbandsbolaget.se [83.226.77.35]) 
	by webmail.uu.se (IMP) with HTTP 
	for <rokol669@localhost>; Wed, 04 Oct 2006 06:18:48 +0000
Message-ID: <1159942728.45235248b8847@webmail.uu.se>
Date: Wed, 04 Oct 2006 06:18:48 +0000
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
To: java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator
References: <45227EAC.6060908@usherbrooke.ca> <4522D7A3.9070204@gmail.com>
In-Reply-To: <4522D7A3.9070204@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
User-Agent: Internet Messaging Program (IMP) 3.2.7
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wouldn't the easiest fix be to just alter the users query string before p=
assing
it to queryparser (moving the semantics of your search app outside of luc=
ene)?
Something like:

str.replaceAll(" ET ", " AND ").replaceAll(" OU ", " OR ").replaceAll(" S=
AUF ",
" NOT ")


Citerar Mark Miller <markrmiller@gmail.com>:

> Oh wouldn't we all. I want this too. Unfortunately, it's an elusive=20
> beast at best. As I am sure you know, JavaCC generates code based on th=
e=20
> grammar and so it is very hard to alter the grammar after JavaCC'ing it=
.=20
> If you relax the 'add' part then you might be able to do something with=
=20
> QueryParserConstants.java. This holds an int for each string in the=20
> grammar which indexes into a String array...check it out and you will=20
> see what I mean. So replacing may be as easy as modifying the 'and' and=
=20
> 'or' and whatnot in that String array. You might make a conditional=20
> build file that includes the correct QueryParserConstants.java or=20
> something. I have not explored this too deeply so if you find something=
=20
> better or this is a dead end, please let me know.
>=20
> - Mark
>=20
> Patrick Turcotte wrote:
> > Hi,
> >
> > Is there a way to add / replace the text for the boolean operators us=
ed
> > by the query parser?
> >
> > We would like to replace (or even better, add), "AND", "OR" and "NOT"=
 by
> > "ET", "OU" and "SAUF".
> >
> > Is there a way to configure the QueryParser to do it?
> >
> > We know we could always modify QueryParser.jj to add them to the list=
,
> > but we'd rather like not to have to recompile/rejar each time there i=
s a
> > new version of Lucene.
> >
> > Thanks
> >
> >  =20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 08:16:09 2006
Return-Path: <java-user-return-23735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18498 invoked from network); 4 Oct 2006 08:16:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 08:16:09 -0000
Received: (qmail 80914 invoked by uid 500); 4 Oct 2006 08:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80859 invoked by uid 500); 4 Oct 2006 08:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80749 invoked by uid 99); 4 Oct 2006 08:15:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 01:15:56 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=khoon.ee.gan@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.187] ([64.233.182.187:44069] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 74/81-00170-2BD63254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 01:15:49 -0700
Received: by nf-out-0910.google.com with SMTP id b2so380140nfe
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 01:15:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dTc4rLZRSktIjzAIyF3DodAXYbIHskk0a0SxV/NuA5m5jvNZSEnyl0umNiDIkMpCDQBKH70H+D3gW+5MlMNY/xEyGMGhQ/gA0CAzdvT8aN/gc5Ivnim1lpjG/567l5ueXU76QmivPoio3giVJ5gvjsIeOHxExtnpo577lEiml0I=
Received: by 10.82.98.13 with SMTP id v13mr16307bub;
        Wed, 04 Oct 2006 01:15:04 -0700 (PDT)
Received: by 10.82.138.15 with HTTP; Wed, 4 Oct 2006 01:15:04 -0700 (PDT)
Message-ID: <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com>
Date: Wed, 4 Oct 2006 16:15:04 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Number Proximity Query
In-Reply-To: <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22538_13006264.1159949704399"
References: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com>
	 <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_22538_13006264.1159949704399
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Chis.

After spending half a day to "really" look into FunctionQuery (and related
classes), and re-reading about Weight and Scorer. I think I am beginning to
understand a bit. But more questions.

(1) Should values returned by DocValues (return from ValueSource) must
always betwen 1.0 and 0.0 ? How is this value affect the overall document
scores, assuming there are others Query clauses as well that is perform on
the document (on other fields).

(2) The documentation on the following functions is extremely lacking (no
matter where I looked). Any expert here can help out ?

-- Weight.getValue() : what values should be returned for
NumberProximityQuery?
-- Weight.sumOfSquareWeights() : no idea what is this for???
-- Weight.normalize() : still no idea
-- Scorer.score() : should this value always between 1.0 and 0.0 ?



Thanks.
~KEGan


On 10/4/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : >From my searches, there seems to be a FunctionQuery in Solr that can do
> this
> : type of query. But I am using pure Lucene, and trying to port Solr code
> over
> : (to create my own version of FunctionQuery) looks too complicated
> because of
> : code dependency on other Solr code such as ValueSource, etc.
>
> ValueSource isn't relaly "other Solr code" .. it's an inherient part of
> FunctionQuery (hence it's in the same package).
>
> You should be able to use everything in the
> org.apache.solr.search.function package as is without any other Solr code.
>
> : I have also search on how to write my own query instance, but there is
> lack
> : of documentation on doing so. The formula to calculate the number
> proximity
> : is quite trivial. But how to stitch together Query, Weight, Scorer is
> the
> : problem :(
>
> Check out the package documentation for org.apache.lucene.search,
> particularly section #3 "Changing the Scoring" ...
>
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/package-summary.html#scoring
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22538_13006264.1159949704399--

From java-user-return-23736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 09:21:19 2006
Return-Path: <java-user-return-23736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35630 invoked from network); 4 Oct 2006 09:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 09:21:19 -0000
Received: (qmail 55012 invoked by uid 500); 4 Oct 2006 09:21:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54956 invoked by uid 500); 4 Oct 2006 09:21:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54905 invoked by uid 99); 4 Oct 2006 09:21:11 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 02:21:11 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=hesnews@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.178] ([64.233.166.178:63045] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CA/A2-00170-1FC73254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 02:20:53 -0700
Received: by py-out-1112.google.com with SMTP id s49so149032pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 02:20:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=f1gpXHdbKG9gyijkboIqv5HOSDQANIEiBOaSO5ErFHDgp8vCGX+96AFpB7/nBhVY5+sgXK2umk22uQjl0Eu7t4v0zZzKaGrwLPahflSVU2ThDS955a+pMkqX2MTW/R8UzUGSorIHOpCsHwY8wDplmCcINytizFhPGmUlSgBtwOI=
Received: by 10.64.210.3 with SMTP id i3mr96131qbg;
        Wed, 04 Oct 2006 02:20:15 -0700 (PDT)
Received: by 10.64.125.18 with HTTP; Wed, 4 Oct 2006 02:20:15 -0700 (PDT)
Message-ID: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
Date: Wed, 4 Oct 2006 11:20:15 +0200
From: "Hes Siemelink" <hesnews@gmail.com>
To: java-user@lucene.apache.org
Subject: Sudden FileNotFoundException
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6535_23620111.1159953615576"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6535_23620111.1159953615576
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all

I'm having trouble with FileNotFoundException that pops up every once and a
while. Everything works fine in my application (description below), but
after running for some time (eg. 20 hours) an exception like this one may
occur:

java.io.FileNotFoundException: /lucene-indexes/mediafragments/_8km.fnm (No
such file or directory)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
    at org.apache.lucene.store.FSIndexInput$Descriptor.<init>(
FSDirectory.java:430)
    at org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:439)
    at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:329)
    at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:56)
    at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java
:144)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:129)
    at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:110)
    at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:152)
    at org.apache.lucene.store.Lock$With.run(Lock.java:99)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:141)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:125)

The rest of my log files is filled with the same exception:
FileNotFoundException for _8km.fnm.

It smells like a rotten index. But I have no clue about how the index got
corrupted...

The application is a web-application, with several indexes. Each index has
update thread that manages the writer. There are continuous updates to the
index. Simultaneously, there may be various user threads doing searches.

This particular index is about 30Mb. I can't tell how many segments there
were when the exceptions occured.

This exception occurs, as for as I can tall, some time after the last update
and during a search query of one active user.

I am using Lucene 2.0.0 and the server is running on Tomcat 5.5 on Linux
Redhat Enterprise 3, with jdk 1.5.0_07.

I am at loss at where to look for the problem. Is it Lucene? Is it my
handling of the Lucene API? Is it the implemenation of the File Lock in
combination with OS/JVM?

The only way to reproduce the problem is to have the production server run
for a day or so... not exactly ideal.

Any help is greatly appreciated!

    Hes Siemelink
    Finalist IT Group

------=_Part_6535_23620111.1159953615576--

From java-user-return-23737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 09:32:24 2006
Return-Path: <java-user-return-23737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38112 invoked from network); 4 Oct 2006 09:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 09:32:24 -0000
Received: (qmail 67472 invoked by uid 500); 4 Oct 2006 09:32:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66855 invoked by uid 500); 4 Oct 2006 09:32:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66833 invoked by uid 99); 4 Oct 2006 09:32:18 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 02:32:18 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=john.bugger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.8 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,HTML_SHORT_LENGTH
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.228] ([66.249.82.228:52568] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 06/D2-00170-19F73254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 02:32:06 -0700
Received: by wx-out-0506.google.com with SMTP id s15so106886wxc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 02:31:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rUhbyTOMnx9S4eli4iiedizlu1FGLsTK1IyAMB2Zs+nXo3KsYj3xlzIvyXD97+HWjEvS0ihEKy1dcHEEezCKO7Ztdf8LX/xHI9KkraVJCdAoZMYdIDRqJ2X3SFRUFthm7ZmfJJeP7EqFvf+StJJiQ80/xFla2lmHsBEDUlIogKc=
Received: by 10.90.54.4 with SMTP id c4mr30258aga;
        Wed, 04 Oct 2006 02:31:31 -0700 (PDT)
Received: by 10.90.63.18 with HTTP; Wed, 4 Oct 2006 02:31:31 -0700 (PDT)
Message-ID: <7b2520d40610040231h420f20w6cc1c88fa2ce2a58@mail.gmail.com>
Date: Wed, 4 Oct 2006 12:31:31 +0300
From: "John Bugger" <john.bugger@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search in HTML code
In-Reply-To: <359a92830610031045v8c56842v107a1f442f45347a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82518_29017294.1159954291362"
References: <7b2520d40610020550k466f230ax80ab6cd2f8ebb495@mail.gmail.com>
	 <359a92830610021219u7107aac5lffa2950a5fab71a1@mail.gmail.com>
	 <7b2520d40610030749u1226ad70ie4f6d66432ead974@mail.gmail.com>
	 <359a92830610031045v8c56842v107a1f442f45347a@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_82518_29017294.1159954291362
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks, Erick! I'll try to use LIKE query to database.

------=_Part_82518_29017294.1159954291362--

From java-user-return-23738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 10:12:28 2006
Return-Path: <java-user-return-23738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48659 invoked from network); 4 Oct 2006 10:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 10:12:27 -0000
Received: (qmail 13169 invoked by uid 500); 4 Oct 2006 10:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13142 invoked by uid 500); 4 Oct 2006 10:12:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13131 invoked by uid 99); 4 Oct 2006 10:12:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 03:12:20 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GV3iV-0002md-00
	for java-user@lucene.apache.org; Wed, 04 Oct 2006 12:11:07 +0200
Message-ID: <452388B8.1050702@tejnora.cz>
Date: Wed, 04 Oct 2006 12:11:04 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.7 (X11/20060928)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
In-Reply-To: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Once I got same problem and following Jira not alone. I deleted index 
and rebuild it from source again and problem was gone. Im unable to 
reproduce it. Are you able to reproduce the problem?

Karel
> java.io.FileNotFoundException: /lucene-indexes/mediafragments/_8km.fnm 
> (No


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 10:35:48 2006
Return-Path: <java-user-return-23739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55583 invoked from network); 4 Oct 2006 10:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 10:35:47 -0000
Received: (qmail 52225 invoked by uid 500); 4 Oct 2006 10:35:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51248 invoked by uid 500); 4 Oct 2006 10:35:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51236 invoked by uid 99); 4 Oct 2006 10:35:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 03:35:38 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=hesnews@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.162.200] ([64.233.162.200:26235] helo=nz-out-0102.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 41/C3-00170-76E83254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 03:35:26 -0700
Received: by nz-out-0102.google.com with SMTP id z6so16864nzd
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 03:34:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Gw63y3WeJNWy7eCsFY7kby5Z5R7NBWjwMWgvotXpcsjY5+3rgq7NX0IzyoSj5Y/klU7sjqMW2YngANQg+szrs8wMokpjtN937W2E4JrvQB4mzv3ikeNB+KF9nNC4G3q/3oZuwUHvkDZTA1t9kAZ4wpwfXKD4VtDLrIWmpmW6dh0=
Received: by 10.65.156.10 with SMTP id i10mr642746qbo;
        Wed, 04 Oct 2006 03:34:57 -0700 (PDT)
Received: by 10.64.125.18 with HTTP; Wed, 4 Oct 2006 03:34:57 -0700 (PDT)
Message-ID: <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>
Date: Wed, 4 Oct 2006 12:34:57 +0200
From: "Hes Siemelink" <hesnews@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
In-Reply-To: <452388B8.1050702@tejnora.cz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7393_35307.1159958097722"
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
	 <452388B8.1050702@tejnora.cz>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7393_35307.1159958097722
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It happens from time to time... but I don't know how to reproduce it.

Rebuilding this particular index unfortunately takes about 10 hrs, so it's
not feasable to delete the index and rebuild it when this happens... our
users would be missing a lot of search results then!

There are a couple of workaround strategies I could follow (using separate
indexes for updating and querying for example), but I would like to know
what's causing this so I can make a fix with less impact on my code.

Cheers,

    Hes.

On 10/4/06, Karel Tejnora <karel@tejnora.cz> wrote:
>
> Once I got same problem and following Jira not alone. I deleted index
> and rebuild it from source again and problem was gone. Im unable to
> reproduce it. Are you able to reproduce the problem?
>
> Karel
> > java.io.FileNotFoundException: /lucene-indexes/mediafragments/_8km.fnm
> > (No
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7393_35307.1159958097722--

From java-user-return-23740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 10:50:43 2006
Return-Path: <java-user-return-23740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59941 invoked from network); 4 Oct 2006 10:50:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 10:50:43 -0000
Received: (qmail 70685 invoked by uid 500); 4 Oct 2006 10:50:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69669 invoked by uid 500); 4 Oct 2006 10:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69652 invoked by uid 99); 4 Oct 2006 10:50:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 03:50:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [69.55.225.129] ([69.55.225.129:34921] helo=ehatchersolutions.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 27/F3-00170-0E193254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 03:50:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 901FF30EFCD5; Wed,  4 Oct 2006 06:49:40 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 61BD330EFCD3
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 06:49:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1159942728.45235248b8847@webmail.uu.se>
References: <45227EAC.6060908@usherbrooke.ca> <4522D7A3.9070204@gmail.com> <1159942728.45235248b8847@webmail.uu.se>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7421B821-04E0-47F2-80F5-0C069800DBFF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser syntax French Operator
Date: Wed, 4 Oct 2006 06:49:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 4, 2006, at 2:18 AM, Ronnie Kolehmainen wrote:

> Wouldn't the easiest fix be to just alter the users query string  
> before passing
> it to queryparser (moving the semantics of your search app outside  
> of lucene)?
> Something like:
>
> str.replaceAll(" ET ", " AND ").replaceAll(" OU ", " OR  
> ").replaceAll(" SAUF ",
> " NOT ")

The problem would be in cases where the users query was:

	title:"SANFORD AND SON" OR genre:comedy





>
>
> Citerar Mark Miller <markrmiller@gmail.com>:
>
>> Oh wouldn't we all. I want this too. Unfortunately, it's an elusive
>> beast at best. As I am sure you know, JavaCC generates code based  
>> on the
>> grammar and so it is very hard to alter the grammar after  
>> JavaCC'ing it.
>> If you relax the 'add' part then you might be able to do something  
>> with
>> QueryParserConstants.java. This holds an int for each string in the
>> grammar which indexes into a String array...check it out and you will
>> see what I mean. So replacing may be as easy as modifying the  
>> 'and' and
>> 'or' and whatnot in that String array. You might make a conditional
>> build file that includes the correct QueryParserConstants.java or
>> something. I have not explored this too deeply so if you find  
>> something
>> better or this is a dead end, please let me know.
>>
>> - Mark
>>
>> Patrick Turcotte wrote:
>>> Hi,
>>>
>>> Is there a way to add / replace the text for the boolean  
>>> operators used
>>> by the query parser?
>>>
>>> We would like to replace (or even better, add), "AND", "OR" and  
>>> "NOT" by
>>> "ET", "OU" and "SAUF".
>>>
>>> Is there a way to configure the QueryParser to do it?
>>>
>>> We know we could always modify QueryParser.jj to add them to the  
>>> list,
>>> but we'd rather like not to have to recompile/rejar each time  
>>> there is a
>>> new version of Lucene.
>>>
>>> Thanks
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 10:54:25 2006
Return-Path: <java-user-return-23741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61872 invoked from network); 4 Oct 2006 10:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 10:54:25 -0000
Received: (qmail 73150 invoked by uid 500); 4 Oct 2006 10:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73125 invoked by uid 500); 4 Oct 2006 10:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73114 invoked by uid 99); 4 Oct 2006 10:54:19 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 03:54:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [66.111.4.25] ([66.111.4.25:56375] helo=out1.smtp.messagingengine.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E2/04-00170-AB293254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 03:53:53 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 86767DAF197
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 06:53:10 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 04 Oct 2006 06:53:13 -0400
X-Sasl-enc: hZWqXcZlRdnr5tCzR6iKyXR7CA4ktbqY3+XqL8YP/qR6 1159959192
Received: from [10.17.4.90] (pool-71-162-112-30.bstnma.fios.verizon.net [71.162.112.30])
	by mail.messagingengine.com (Postfix) with ESMTP id AD17A32C5
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 06:53:12 -0400 (EDT)
Message-ID: <4523928F.60600@mikemccandless.com>
Date: Wed, 04 Oct 2006 06:53:03 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>	 <452388B8.1050702@tejnora.cz> <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>
In-Reply-To: <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hes Siemelink wrote:
> It happens from time to time... but I don't know how to reproduce it.
> 
> Rebuilding this particular index unfortunately takes about 10 hrs, so it's
> not feasable to delete the index and rebuild it when this happens... our
> users would be missing a lot of search results then!
> 
> There are a couple of workaround strategies I could follow (using separate
> indexes for updating and querying for example), but I would like to know
> what's causing this so I can make a fix with less impact on my code.

This exception typically means that the segments file is referring to
a segment that doesn't exist in the filesytem (eg was deleted or lost
or something).

The most common cause of this (I think) is locking not working
properly.  Ie, a reader is opening segments at the same time that a
writer is writing segments (and deleting old ones).  Lucene's commit
lock exists to prevent this from happening.

Is your application all running under one JVM (sounds like yes)?  Ie,
in one JVM you have one thread doing updating and then multiple
threads searching.

What kind of filesystem is your index stored on (eg, local or NFS)?
And how about the lock directory (normally defaults to the JVMs
java.io.tmpdir property)?

Are you sure there was no prior "root cause" exception, eg on the
updating thread?

When this exception happens, does it eventually go away on its own or
is the index permanantly corrupt (and you have to build another one)?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 11:11:27 2006
Return-Path: <java-user-return-23742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74741 invoked from network); 4 Oct 2006 11:11:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 11:11:27 -0000
Received: (qmail 85881 invoked by uid 500); 4 Oct 2006 11:11:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85842 invoked by uid 500); 4 Oct 2006 11:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85831 invoked by uid 99); 4 Oct 2006 11:11:19 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 04:11:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [24.201.245.36] ([24.201.245.36:51674] helo=relais.videotron.ca)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id EC/34-00170-CC693254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:11:11 -0700
Received: from [127.0.0.1] ([24.201.31.203]) by VL-MH-MR002.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0J6L006FZZ1ALJ40@VL-MH-MR002.ip.videotron.ca> for
 java-user@lucene.apache.org; Wed, 04 Oct 2006 07:10:25 -0400 (EDT)
Date: Wed, 04 Oct 2006 07:10:46 -0400
From: Patrick Turcotte <Patrick.Turcotte@USherbrooke.ca>
Subject: Re: QueryParser syntax French Operator
In-reply-to: <441B8DCF-B880-44F3-8532-700FC3C6785A@ehatchersolutions.com>
To: java-user@lucene.apache.org
Message-id: <452396B6.60302@USherbrooke.ca>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
References: <45227EAC.6060908@usherbrooke.ca>
 <441B8DCF-B880-44F3-8532-700FC3C6785A@ehatchersolutions.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I've started to look into this (and the whole javacc syntax) I'll keep 
you posted on my results.

Patrick

Erik Hatcher wrote:
> Currently AND/OR/NOT are hardcoded into the .jj file.  A patch to make 
> this configurable would be welcome!
>
>     Erik
>
>
> On Oct 3, 2006, at 11:15 AM, Patrick Turcotte wrote:
>
>> Hi,
>>
>> Is there a way to add / replace the text for the boolean operators used
>> by the query parser?
>>
>> We would like to replace (or even better, add), "AND", "OR" and "NOT" by
>> "ET", "OU" and "SAUF".
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 11:20:11 2006
Return-Path: <java-user-return-23743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80311 invoked from network); 4 Oct 2006 11:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 11:20:11 -0000
Received: (qmail 97153 invoked by uid 500); 4 Oct 2006 11:20:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97009 invoked by uid 500); 4 Oct 2006 11:20:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96990 invoked by uid 99); 4 Oct 2006 11:20:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 04:20:03 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=hesnews@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.162.199] ([64.233.162.199:31199] helo=nz-out-0102.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 06/54-00170-DC893254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:19:47 -0700
Received: by nz-out-0102.google.com with SMTP id z6so18901nzd
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:18:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iwJl94aTsPuqeMg6jq0qhuqdYdS4mBnqI76WkwFMn8K5QJzktpKBt71xFfkzmXUF7YyPoxuCvNBOKAB/VVF23E6HBi/E2e8hdZRBaGSaCBptBTU0fTZ0899KqXmGlfMIdGL3vDCuylY9PB14DUpXvWCPffjiy3sHX9IZQOZxJWQ=
Received: by 10.65.154.4 with SMTP id g4mr247069qbo;
        Wed, 04 Oct 2006 04:18:49 -0700 (PDT)
Received: by 10.64.125.18 with HTTP; Wed, 4 Oct 2006 04:18:49 -0700 (PDT)
Message-ID: <77a4819a0610040418i716ca92bn12486a1a9aa5bcf6@mail.gmail.com>
Date: Wed, 4 Oct 2006 13:18:49 +0200
From: "Hes Siemelink" <hesnews@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
In-Reply-To: <4523928F.60600@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8026_370418.1159960729810"
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
	 <452388B8.1050702@tejnora.cz>
	 <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>
	 <4523928F.60600@mikemccandless.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8026_370418.1159960729810
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Mike, thank you for your detailed reply. I put my answers inline.


On 10/4/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Hes Siemelink wrote:
> > It happens from time to time... but I don't know how to reproduce it.
> >
> > Rebuilding this particular index unfortunately takes about 10 hrs, so
> it's
> > not feasable to delete the index and rebuild it when this happens... our
> > users would be missing a lot of search results then!
> >
> > There are a couple of workaround strategies I could follow (using
> separate
> > indexes for updating and querying for example), but I would like to know
> > what's causing this so I can make a fix with less impact on my code.
>
> This exception typically means that the segments file is referring to
> a segment that doesn't exist in the filesytem (eg was deleted or lost
> or something).


ok, that is what I thought...
Now the question is how this file gets deleted. Should I look into Lucene
(maybe there something goes wrong while segmenting?) or into the environment
(maybe the temp directory that contains the locks is wiped, making a
critical lock disappear?)

The most common cause of this (I think) is locking not working
> properly.  Ie, a reader is opening segments at the same time that a
> writer is writing segments (and deleting old ones).  Lucene's commit
> lock exists to prevent this from happening.


Yes, updates and read occur concurrently (there is one update threads and
several search threads)

Is your application all running under one JVM (sounds like yes)?  Ie,
> in one JVM you have one thread doing updating and then multiple
> threads searching.


Yes, exactly.

What kind of filesystem is your index stored on (eg, local or NFS)?
> And how about the lock directory (normally defaults to the JVMs
> java.io.tmpdir property)?


local file system, NOT NFS.
The lock directory is default. I believe Tomcat makes it point to its own
temp directory. I'll test the possibility of putting the locks somewhere
else.

Are you sure there was no prior "root cause" exception, eg on the
> updating thread?


I could not find one...
I close the indexwriter in a finally statement in the update thread (after
each update), with a call to IndexWriter.close().

When this exception happens, does it eventually go away on its own or
> is the index permanantly corrupt (and you have to build another one)?


The index is permanently corrupt. Since the application is hosted by an
external party, I have not had the chance to inspect the files before
overwriting them.

Thanks for your help!

    Hes.

------=_Part_8026_370418.1159960729810--

From java-user-return-23744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 11:27:11 2006
Return-Path: <java-user-return-23744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85419 invoked from network); 4 Oct 2006 11:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 11:27:11 -0000
Received: (qmail 12784 invoked by uid 500); 4 Oct 2006 11:27:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12753 invoked by uid 500); 4 Oct 2006 11:27:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12736 invoked by uid 99); 4 Oct 2006 11:27:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 04:27:03 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:33932] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AE/64-00170-B6A93254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:26:39 -0700
Received: by py-out-1112.google.com with SMTP id s49so186967pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:25:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kN0eAubeoaZiHul5buMApzjVckgr7a4/SCaZp4VRX4lNrVEAe21yfS/YINBMi0OzI7cNOUaGoM3wL+dOK9jCQEFdgv9VazXm43XWrErFWPTLAb93UqzUrMFJIUDEIzVQGn6iaRQBOD359jhwIVIb/ktM2Q2+hSt0UHV0ozJcXUw=
Received: by 10.35.48.15 with SMTP id a15mr987574pyk;
        Wed, 04 Oct 2006 04:25:40 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 4 Oct 2006 04:25:40 -0700 (PDT)
Message-ID: <359a92830610040425w66d2b490t6c31e0727a7c2327@mail.gmail.com>
Date: Wed, 4 Oct 2006 07:25:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Number Proximity Query
In-Reply-To: <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95461_24673761.1159961140598"
References: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com>
	 <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu>
	 <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_95461_24673761.1159961140598
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry if this is a re-post, but I got an "undeliverable" error last time I
tried to post it, something about SPAM. The nerve of that filter!

----------------
I don't have my book handy, but you might want to check out "Lucene In
Action". There's an example of how to create an index of restaurants and
execute a query that orders the responses by the distance to the closest
restaurant.

I think a similar technique (although proabably an easier implementation)
could apply to your problem. Unfortunately, I don't remember the details
well enough to say much more....

Could you accomplish this by implementing your own sort? I have no real idea
whether that's applicable, but it did occur to me......

Not much help, but a start <G>.

Erick

On 10/4/06, KEGan <khoon.ee.gan@gmail.com> wrote:
>
> Thanks Chis.
>
> After spending half a day to "really" look into FunctionQuery (and related
> classes), and re-reading about Weight and Scorer. I think I am beginning
> to
> understand a bit. But more questions.
>
> (1) Should values returned by DocValues (return from ValueSource) must
> always betwen 1.0 and 0.0 ? How is this value affect the overall document
> scores, assuming there are others Query clauses as well that is perform on
> the document (on other fields).
>
> (2) The documentation on the following functions is extremely lacking (no
> matter where I looked). Any expert here can help out ?
>
> -- Weight.getValue() : what values should be returned for
> NumberProximityQuery?
> -- Weight.sumOfSquareWeights() : no idea what is this for???
> -- Weight.normalize() : still no idea
> -- Scorer.score() : should this value always between 1.0 and 0.0 ?
>
>
>
> Thanks.
> ~KEGan
>
>
> On 10/4/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > : >From my searches, there seems to be a FunctionQuery in Solr that can
> do
> > this
> > : type of query. But I am using pure Lucene, and trying to port Solr
> code
> > over
> > : (to create my own version of FunctionQuery) looks too complicated
> > because of
> > : code dependency on other Solr code such as ValueSource, etc.
> >
> > ValueSource isn't relaly "other Solr code" .. it's an inherient part of
> > FunctionQuery (hence it's in the same package).
> >
> > You should be able to use everything in the
> > org.apache.solr.search.function package as is without any other Solr
> code.
> >
> > : I have also search on how to write my own query instance, but there is
> > lack
> > : of documentation on doing so. The formula to calculate the number
> > proximity
> > : is quite trivial. But how to stitch together Query, Weight, Scorer is
> > the
> > : problem :(
> >
> > Check out the package documentation for org.apache.lucene.search,
> > particularly section #3 "Changing the Scoring" ...
> >
> >
> >
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/package-summary.html#scoring
> >
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_95461_24673761.1159961140598--

From java-user-return-23745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 11:34:39 2006
Return-Path: <java-user-return-23745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89813 invoked from network); 4 Oct 2006 11:34:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 11:34:38 -0000
Received: (qmail 26219 invoked by uid 500); 4 Oct 2006 11:34:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26148 invoked by uid 500); 4 Oct 2006 11:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26132 invoked by uid 99); 4 Oct 2006 11:34:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 04:34:29 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.181] ([64.233.166.181:39294] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C6/84-00170-C0C93254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:33:47 -0700
Received: by py-out-1112.google.com with SMTP id s49so189007pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:32:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G5IHHGNmA3RzN2OVqwOf24IUZVKEp4fuC7omm0fFZ09NY3fqBqDjdf4gzzio5Q5e5SnNabDut8YP1aRb1ozwfPy8Z1Rykiu9In3kKwF2e2eoIPgtp3WOJlCHXQ9bCzGAVCbVAzkhvQsNI29AzQz+yXFWz1oXP4hEDG9xvk84hqc=
Received: by 10.35.99.6 with SMTP id b6mr957301pym;
        Wed, 04 Oct 2006 04:32:37 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 4 Oct 2006 04:32:37 -0700 (PDT)
Message-ID: <359a92830610040432j70063197p458d7edcbc41ed03@mail.gmail.com>
Date: Wed, 4 Oct 2006 07:32:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using ParallelMultiSearcher is slow...
In-Reply-To: <45232BF5.4020006@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95581_22799488.1159961557816"
References: <4521EA11.2030401@gmail.com>
	 <359a92830610030427o70490bb3racac76d36f66db20@mail.gmail.com>
	 <45232BF5.4020006@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_95581_22799488.1159961557816
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, you're now officially beyond my competence, so I'll have to wait for
people who actually know <G>....

Although if I read your stats right, you're getting approximately 1 sec
response time over 10M documents on a 10G index. That's not bad at all. What
kind of response time do you need?

On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>
> Hi,
>
> > Well, the first question is always "are you opening/closing your
> > IndexSearchers for each request on your remote machines?". This is
> always a
> > no-no. This is also a question for your single-searcher version.
>
> Yes I know, each search slave (RMI server) have single instance
>   of IndexSearcher and it's open once when RMI server starts.
>
> > What is your performance if you only go to one server? I'd start by
> finding
>
> A performance on one server with FULL index (not divided by 10)
>   is about 2500 ms.
> On one server with splitted index (divided by 10) is about 50 ms.
>
> And on ParallelMultiSearcher with 10 of remote searchable,
>   each RemoteSearchable returns in about 50 - 100 ms,
>   and ParallelMultiSearcher returns also 50 - 100 ms, because of
>   threading.
> but Hits Searcher.search(Query, Sort) responds in about 500 - 1000 ms.
>
> I think that Searcher.search with Sort reads all of SortFields from
>   IndexReader and it's bottleneck.
>
> Are there results of high performance distributed Lucene with
> ParallelMultiSearcher?
> Or need hadoop?
>
> Erick Erickson wrote:
> > Well, the first question is always "are you opening/closing your
> > IndexSearchers for each request on your remote machines?". This is
> always a
> > no-no. This is also a question for your single-searcher version.
> >
> > What is your performance if you only go to one server? I'd start by
> finding
> > out what happens when you forget all the ParallelMultiSearcher stuff,
> all
> > the RMI stuff etc, and just see what your performance is on one of your
> > index parts locally. Once that is answered, extend to RMI, then the
> > Parallel...., at each step seeing if your performance degrades
> > unacceptably.
> > That'll at least give you a clue what part of the process is the biggest
> > problem.
> >
> > And without knowing a LOT more about your searches, and your index, it's
> > kind of hard to come up with solutions <G>....
> >
> > Best
> > Erick
> >
> > On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
> >>
> >> Hi,
> >>
> >> I have a question about ParallelMultiSearcher performance.
> >>
> >> I want to search documents on about 10 gigabytes of index.
> >> (The index has 10,000,000 documents.)
> >>
> >> I get very slow performance using IndexSearcher with ONE index
> normally.
> >> Then I tried to use ParallelMultiSearcher with 10 servers of remote
> >> searchable.
> >>
> >> Index:
> >> Each search slaves have 1/10 of index.
> >> (ONE index divided to 10 servers.)
> >>
> >> Search slave:
> >> Each search slaves start remote searchable RMI server,
> >> and wait connecting from search master.
> >>
> >> Search master:
> >> The search master use Naming.lookup() to get remote searchable.
> >> Get 10 remote searchables from each search slaves and build
> >> ParallelMultiSearcher.
> >> Then search.
> >>
> >> Any solution?
> >>
> >> --
> >> Scott
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> --
> Scott
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_95581_22799488.1159961557816--

From java-user-return-23746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 11:37:24 2006
Return-Path: <java-user-return-23746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91595 invoked from network); 4 Oct 2006 11:37:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 11:37:23 -0000
Received: (qmail 32535 invoked by uid 500); 4 Oct 2006 11:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32481 invoked by uid 500); 4 Oct 2006 11:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32455 invoked by uid 99); 4 Oct 2006 11:37:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 04:37:16 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:41681] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 80/94-00170-BCC93254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:36:46 -0700
Received: by py-out-1112.google.com with SMTP id s49so190000pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:36:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MX633pj8OqI1l3o9ED5x7JPSKeks9iYneg44iUmR3/wz42HbJAqHZg7wDbRL2YDdjQ6rp8lpUWvAevbW0pksyuxQroj0uurey0hsePGt+hze+/4ltCsyr+43u5FOdUfhxZZeXdR7MLIXUH31EitVqnt35idMxCgMHAi1WSNi1Yg=
Received: by 10.35.99.17 with SMTP id b17mr1031972pym;
        Wed, 04 Oct 2006 04:36:00 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 4 Oct 2006 04:35:59 -0700 (PDT)
Message-ID: <359a92830610040435m1b3bd754o481b6e864901b80d@mail.gmail.com>
Date: Wed, 4 Oct 2006 07:35:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search in HTML code
In-Reply-To: <7b2520d40610040231h420f20w6cc1c88fa2ce2a58@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95613_995072.1159961759494"
References: <7b2520d40610020550k466f230ax80ab6cd2f8ebb495@mail.gmail.com>
	 <359a92830610021219u7107aac5lffa2950a5fab71a1@mail.gmail.com>
	 <7b2520d40610030749u1226ad70ie4f6d66432ead974@mail.gmail.com>
	 <359a92830610031045v8c56842v107a1f442f45347a@mail.gmail.com>
	 <7b2520d40610040231h420f20w6cc1c88fa2ce2a58@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_95613_995072.1159961759494
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Don't interpret my reponses as *recommending* a database, since I don't know
much about your problem space. It may or may not be the right choice.
Mostly, I was thinking that your particular use of lucene as stated wasn't
playing to lucene's strengths.

It may well be that lucene is a fine choice if you re-think your solution,
but then again, maybe not.

Best of luck
Erick

On 10/4/06, John Bugger <john.bugger@gmail.com> wrote:
>
> Thanks, Erick! I'll try to use LIKE query to database.
>
>

------=_Part_95613_995072.1159961759494--

From java-user-return-23747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 11:40:12 2006
Return-Path: <java-user-return-23747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93335 invoked from network); 4 Oct 2006 11:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 11:40:10 -0000
Received: (qmail 39966 invoked by uid 500); 4 Oct 2006 11:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39930 invoked by uid 500); 4 Oct 2006 11:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39720 invoked by uid 99); 4 Oct 2006 11:39:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 04:39:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [66.111.4.25] ([66.111.4.25:45493] helo=out1.smtp.messagingengine.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D9/94-00170-C6D93254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 04:39:27 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id A031BDAF704
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 07:38:29 -0400 (EDT)
Received: from heartbeat2.internal ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 04 Oct 2006 07:38:32 -0400
X-Sasl-enc: EcczP47FCXCK/Wuu7J/GlKoKgi7yiwvjvlc3xgxxAss8 1159961911
Received: from [10.17.4.90] (pool-71-162-112-30.bstnma.fios.verizon.net [71.162.112.30])
	by mail.messagingengine.com (Postfix) with ESMTP id D7BE832C5
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 07:38:31 -0400 (EDT)
Message-ID: <45239D30.2060204@mikemccandless.com>
Date: Wed, 04 Oct 2006 07:38:24 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>	 <452388B8.1050702@tejnora.cz>	 <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>	 <4523928F.60600@mikemccandless.com> <77a4819a0610040418i716ca92bn12486a1a9aa5bcf6@mail.gmail.com>
In-Reply-To: <77a4819a0610040418i716ca92bn12486a1a9aa5bcf6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hes Siemelink wrote:

>> > It happens from time to time... but I don't know how to reproduce it.
>> >
>> > Rebuilding this particular index unfortunately takes about 10 hrs, so
>> it's
>> > not feasable to delete the index and rebuild it when this happens... 
>> our
>> > users would be missing a lot of search results then!
>> >
>> > There are a couple of workaround strategies I could follow (using
>> separate
>> > indexes for updating and querying for example), but I would like to 
>> know
>> > what's causing this so I can make a fix with less impact on my code.
>>
>> This exception typically means that the segments file is referring to
>> a segment that doesn't exist in the filesytem (eg was deleted or lost
>> or something).
> 
> 
> ok, that is what I thought...
> Now the question is how this file gets deleted. Should I look into Lucene
> (maybe there something goes wrong while segmenting?) or into the 
> environment
> (maybe the temp directory that contains the locks is wiped, making a
> critical lock disappear?)

One helpful thing to do is call IndexWriter.setInfoStream(...) and
save the resulting output.  This prints details about which segments
were merged, and what the merged segment name is.  This might provide
some useful details for example was your deleted segments file one
that was just merged away, or, was it a segment that was just created
by merging.

> What kind of filesystem is your index stored on (eg, local or NFS)?
>> And how about the lock directory (normally defaults to the JVMs
>> java.io.tmpdir property)?
> 
> 
> local file system, NOT NFS.
> The lock directory is default. I believe Tomcat makes it point to its own
> temp directory. I'll test the possibility of putting the locks somewhere
> else.

Given that you are using a local filesystem, that rules out file
system caching issues which we see on NFS (whereby the filesystem is
presenting a "stale" copy of the segments file).  I don't think local
filesystems typically have cache coherence issues.

> When this exception happens, does it eventually go away on its own or
>> is the index permanantly corrupt (and you have to build another one)?
> 
> 
> The index is permanently corrupt. Since the application is hosted by an
> external party, I have not had the chance to inspect the files before
> overwriting them.

Alas, given that that exception is "permanent" when this happens, I
don't think it's a locking issue (even if the tmp dir sweeps away lock
files).  Locking issues usually result in transient exceptions (like
yours) when opening the reader, but once the writer is done
committing, then readers open fine without exceptions.

You are certain that only one writer is open at a time against the
index right?  Lucene's write lock tries to ensure that, but still good
to verify.

When the exception occurs, is it possible to get a listing of all
files in the directory?

Are there any interesting customizations in your usage of Lucene?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 12:05:04 2006
Return-Path: <java-user-return-23748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7012 invoked from network); 4 Oct 2006 12:05:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 12:05:03 -0000
Received: (qmail 89090 invoked by uid 500); 4 Oct 2006 12:04:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89052 invoked by uid 500); 4 Oct 2006 12:04:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89041 invoked by uid 99); 4 Oct 2006 12:04:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 05:04:56 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=hesnews@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.179] ([64.233.166.179:62737] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 06/F4-00170-653A3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 05:04:44 -0700
Received: by py-out-1112.google.com with SMTP id s49so198348pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 05:03:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=em4JRadLqHSbWGAcE1yc6pLpatLC/mGvswr9I/z77x71J9tJycJGg4OaLTXcl9RhGbYdTxGm9Q6IV6/5kybM5HJCl565+BIOXAaT9eTgQwig5IfuNIO5KD8YTCcQ5/AYpD45U/K6eNFGGPnQ+4ElEgZDhcm7sG1lq1r+266PykQ=
Received: by 10.65.237.19 with SMTP id o19mr755590qbr;
        Wed, 04 Oct 2006 05:03:46 -0700 (PDT)
Received: by 10.64.125.18 with HTTP; Wed, 4 Oct 2006 05:03:46 -0700 (PDT)
Message-ID: <77a4819a0610040503s605b9c2em8e422d890c860fd0@mail.gmail.com>
Date: Wed, 4 Oct 2006 14:03:46 +0200
From: "Hes Siemelink" <hesnews@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
In-Reply-To: <45239D30.2060204@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8667_17308246.1159963426373"
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
	 <452388B8.1050702@tejnora.cz>
	 <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>
	 <4523928F.60600@mikemccandless.com>
	 <77a4819a0610040418i716ca92bn12486a1a9aa5bcf6@mail.gmail.com>
	 <45239D30.2060204@mikemccandless.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8667_17308246.1159963426373
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> One helpful thing to do is call IndexWriter.setInfoStream(...) and
> save the resulting output.  This prints details about which segments
> were merged, and what the merged segment name is.  This might provide
> some useful details for example was your deleted segments file one
> that was just merged away, or, was it a segment that was just created
> by merging.


Great tip! I'll try that

Alas, given that that exception is "permanent" when this happens, I
> don't think it's a locking issue (even if the tmp dir sweeps away lock
> files).  Locking issues usually result in transient exceptions (like
> yours) when opening the reader, but once the writer is done
> committing, then readers open fine without exceptions.


OK -- so we rule out the lock dir hypothesis.

You are certain that only one writer is open at a time against the
> index right?  Lucene's write lock tries to ensure that, but still good
> to verify.


Yes,  the application uses one thread per index to update it... I've been
checking possible misuses but I am pretty sure that there is  no other
writer hanging around.

When the exception occurs, is it possible to get a listing of all
> files in the directory?


I've just added that to the source code!

Are there any interesting customizations in your usage of Lucene?


I have a small library wrapped around Lucene to make it work with MMBase
(MMBase Lucene module). But the usage of Lucene classes is pretty
straightforward: opening, updating and closing writers; opening, searching
and closing readers... This seems to work well most of the time. Like I
said, the problem surfaces after a day or so of running on the production
server. I could send some source code if you think it would help.

Thanks for your help!

    Hes.

------=_Part_8667_17308246.1159963426373--

From java-user-return-23749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 12:16:27 2006
Return-Path: <java-user-return-23749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9203 invoked from network); 4 Oct 2006 12:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 12:16:27 -0000
Received: (qmail 3184 invoked by uid 500); 4 Oct 2006 12:16:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2872 invoked by uid 500); 4 Oct 2006 12:16:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2792 invoked by uid 99); 4 Oct 2006 12:16:10 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 05:16:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [207.25.178.46] ([207.25.178.46:39276] helo=mx03.lexisnexis.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E9/15-00170-8F5A3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 05:15:57 -0700
Received: from mailgate2.lexis-nexis.com ([138.12.44.45])
  by mx03.lexisnexis.com with ESMTP; 04 Oct 2006 08:14:40 -0400
Received: from lngdayexcp001.legal.regn.net (smtpgate.lexis-nexis.com [10.113.1.1])
	by mailgate2.lexis-nexis.com (8.12.11/8.12.11) with ESMTP id k94CEegE018634
	for <java-user@lucene.apache.org>; Wed, 4 Oct 2006 08:14:40 -0400
Received: from LNGDAYEXCP01VA.legal.regn.net ([138.12.18.63]) by lngdayexcp001.legal.regn.net with Microsoft SMTPSVC(6.0.3790.2499);
	 Wed, 4 Oct 2006 08:14:40 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching documents on big index by using ParallelMultiSearcher is slow...
Date: Wed, 4 Oct 2006 08:14:38 -0400
Message-ID: <6B7B28B775F23D45B175CD4A301CFC6304B8822F@LNGDAYEXCP01VB.legal.regn.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching documents on big index by using ParallelMultiSearcher is slow...
Thread-Index: AcbnqSrKYjRSb3DSSVqFAf+OgE127gABD33g
From: "Haines, Ronald C. \(LNG-DAY\)" <Ronald.Haines@lexisnexis.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Oct 2006 12:14:40.0463 (UTC) FILETIME=[AAED1DF0:01C6E7AE]
X-Scanned-By: MIMEDefang 2.51 on 138.12.44.45
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Keep in mind, that depending on your queries (lots of terms, wildcards,
date ranges), you can spend quite a bit of time during the 'Weight'
calculation...this all happens pre-search.  During the Weight
calculation, you will be making remote calls to the rewrite() and
docFreq() methods.  There will be (# of terms * # of remotes) of these
remote calls made for each of the above methods.

And, I think the ParallelMultiSearcher will make all of these calls
serially before it starts to thread the search process.  I have found
that this, serially, can account for quite a bit of the overall response
time.

I too am interested in learning more about a large scale distributed
Lucene model.
=20
-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, October 04, 2006 7:33 AM
To: java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using
ParallelMultiSearcher is slow...

OK, you're now officially beyond my competence, so I'll have to wait for
people who actually know <G>....

Although if I read your stats right, you're getting approximately 1 sec
response time over 10M documents on a 10G index. That's not bad at all.
What
kind of response time do you need?

On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>
> Hi,
>
> > Well, the first question is always "are you opening/closing your
> > IndexSearchers for each request on your remote machines?". This is
> always a
> > no-no. This is also a question for your single-searcher version.
>
> Yes I know, each search slave (RMI server) have single instance
>   of IndexSearcher and it's open once when RMI server starts.
>
> > What is your performance if you only go to one server? I'd start by
> finding
>
> A performance on one server with FULL index (not divided by 10)
>   is about 2500 ms.
> On one server with splitted index (divided by 10) is about 50 ms.
>
> And on ParallelMultiSearcher with 10 of remote searchable,
>   each RemoteSearchable returns in about 50 - 100 ms,
>   and ParallelMultiSearcher returns also 50 - 100 ms, because of
>   threading.
> but Hits Searcher.search(Query, Sort) responds in about 500 - 1000 ms.
>
> I think that Searcher.search with Sort reads all of SortFields from
>   IndexReader and it's bottleneck.
>
> Are there results of high performance distributed Lucene with
> ParallelMultiSearcher?
> Or need hadoop?
>
> Erick Erickson wrote:
> > Well, the first question is always "are you opening/closing your
> > IndexSearchers for each request on your remote machines?". This is
> always a
> > no-no. This is also a question for your single-searcher version.
> >
> > What is your performance if you only go to one server? I'd start by
> finding
> > out what happens when you forget all the ParallelMultiSearcher
stuff,
> all
> > the RMI stuff etc, and just see what your performance is on one of
your
> > index parts locally. Once that is answered, extend to RMI, then the
> > Parallel...., at each step seeing if your performance degrades
> > unacceptably.
> > That'll at least give you a clue what part of the process is the
biggest
> > problem.
> >
> > And without knowing a LOT more about your searches, and your index,
it's
> > kind of hard to come up with solutions <G>....
> >
> > Best
> > Erick
> >
> > On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
> >>
> >> Hi,
> >>
> >> I have a question about ParallelMultiSearcher performance.
> >>
> >> I want to search documents on about 10 gigabytes of index.
> >> (The index has 10,000,000 documents.)
> >>
> >> I get very slow performance using IndexSearcher with ONE index
> normally.
> >> Then I tried to use ParallelMultiSearcher with 10 servers of remote
> >> searchable.
> >>
> >> Index:
> >> Each search slaves have 1/10 of index.
> >> (ONE index divided to 10 servers.)
> >>
> >> Search slave:
> >> Each search slaves start remote searchable RMI server,
> >> and wait connecting from search master.
> >>
> >> Search master:
> >> The search master use Naming.lookup() to get remote searchable.
> >> Get 10 remote searchables from each search slaves and build
> >> ParallelMultiSearcher.
> >> Then search.
> >>
> >> Any solution?
> >>
> >> --
> >> Scott
> >>
> >>
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> --
> Scott
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 13:01:01 2006
Return-Path: <java-user-return-23750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25085 invoked from network); 4 Oct 2006 13:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 13:01:00 -0000
Received: (qmail 82393 invoked by uid 500); 4 Oct 2006 13:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82372 invoked by uid 500); 4 Oct 2006 13:00:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82351 invoked by uid 99); 4 Oct 2006 13:00:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 06:00:53 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=m.scott.tiger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.178] ([64.233.166.178:41835] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C6/A5-00170-060B3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 06:00:18 -0700
Received: by py-out-1112.google.com with SMTP id s49so214785pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 05:59:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qdkUHCLSY1MRJM/o64oqMq0PYsJm6oEHhYb6jujX1jwRGIaX5eA8x0SDllOsdf0zeFldj9jQ0zrXiAtQffQL80rDuCAC54bYVY2tSG7fb8FlnH6A9Q1aRuvaRXqvFKQ/zKEzuJgVMjh3P3LSTloCjmOLJcWKXz9QZcSAJf7s7XU=
Received: by 10.35.114.16 with SMTP id r16mr1145014pym;
        Wed, 04 Oct 2006 05:59:31 -0700 (PDT)
Received: from ?192.168.1.32? ( [221.113.32.130])
        by mx.gmail.com with ESMTP id n62sm772711pyf.2006.10.04.05.59.30;
        Wed, 04 Oct 2006 05:59:31 -0700 (PDT)
Message-ID: <4523B02E.7030801@gmail.com>
Date: Wed, 04 Oct 2006 21:59:26 +0900
From: Scott <m.scott.tiger@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using ParallelMultiSearcher
 is slow...
References: <4521EA11.2030401@gmail.com>	 <359a92830610030427o70490bb3racac76d36f66db20@mail.gmail.com>	 <45232BF5.4020006@gmail.com> <359a92830610040432j70063197p458d7edcbc41ed03@mail.gmail.com>
In-Reply-To: <359a92830610040432j70063197p458d7edcbc41ed03@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My index increases periodically.

Now 1 sec for 10G indexes.
I am worried that futurely, how about response time
  for 20G, 30G,,, and 50G indexes?

I'll try remote Hits (result set) object and the SearchMaster merges
  top N of them.

Thank you.

Erick Erickson wrote:
> OK, you're now officially beyond my competence, so I'll have to wait for
> people who actually know <G>....
> 
> Although if I read your stats right, you're getting approximately 1 sec
> response time over 10M documents on a 10G index. That's not bad at all. 
> What
> kind of response time do you need?
> 
> On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>>
>> Hi,
>>
>> > Well, the first question is always "are you opening/closing your
>> > IndexSearchers for each request on your remote machines?". This is
>> always a
>> > no-no. This is also a question for your single-searcher version.
>>
>> Yes I know, each search slave (RMI server) have single instance
>>   of IndexSearcher and it's open once when RMI server starts.
>>
>> > What is your performance if you only go to one server? I'd start by
>> finding
>>
>> A performance on one server with FULL index (not divided by 10)
>>   is about 2500 ms.
>> On one server with splitted index (divided by 10) is about 50 ms.
>>
>> And on ParallelMultiSearcher with 10 of remote searchable,
>>   each RemoteSearchable returns in about 50 - 100 ms,
>>   and ParallelMultiSearcher returns also 50 - 100 ms, because of
>>   threading.
>> but Hits Searcher.search(Query, Sort) responds in about 500 - 1000 ms.
>>
>> I think that Searcher.search with Sort reads all of SortFields from
>>   IndexReader and it's bottleneck.
>>
>> Are there results of high performance distributed Lucene with
>> ParallelMultiSearcher?
>> Or need hadoop?
>>
>> Erick Erickson wrote:
>> > Well, the first question is always "are you opening/closing your
>> > IndexSearchers for each request on your remote machines?". This is
>> always a
>> > no-no. This is also a question for your single-searcher version.
>> >
>> > What is your performance if you only go to one server? I'd start by
>> finding
>> > out what happens when you forget all the ParallelMultiSearcher stuff,
>> all
>> > the RMI stuff etc, and just see what your performance is on one of your
>> > index parts locally. Once that is answered, extend to RMI, then the
>> > Parallel...., at each step seeing if your performance degrades
>> > unacceptably.
>> > That'll at least give you a clue what part of the process is the 
>> biggest
>> > problem.
>> >
>> > And without knowing a LOT more about your searches, and your index, 
>> it's
>> > kind of hard to come up with solutions <G>....
>> >
>> > Best
>> > Erick
>> >
>> > On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>> >>
>> >> Hi,
>> >>
>> >> I have a question about ParallelMultiSearcher performance.
>> >>
>> >> I want to search documents on about 10 gigabytes of index.
>> >> (The index has 10,000,000 documents.)
>> >>
>> >> I get very slow performance using IndexSearcher with ONE index
>> normally.
>> >> Then I tried to use ParallelMultiSearcher with 10 servers of remote
>> >> searchable.
>> >>
>> >> Index:
>> >> Each search slaves have 1/10 of index.
>> >> (ONE index divided to 10 servers.)
>> >>
>> >> Search slave:
>> >> Each search slaves start remote searchable RMI server,
>> >> and wait connecting from search master.
>> >>
>> >> Search master:
>> >> The search master use Naming.lookup() to get remote searchable.
>> >> Get 10 remote searchables from each search slaves and build
>> >> ParallelMultiSearcher.
>> >> Then search.
>> >>
>> >> Any solution?
>> >>
>> >> --
>> >> Scott
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> -- 
>> Scott
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

-- 
Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 13:27:53 2006
Return-Path: <java-user-return-23751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38461 invoked from network); 4 Oct 2006 13:27:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 13:27:53 -0000
Received: (qmail 24048 invoked by uid 500); 4 Oct 2006 13:27:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23952 invoked by uid 500); 4 Oct 2006 13:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23887 invoked by uid 99); 4 Oct 2006 13:27:41 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 06:27:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [82.138.248.236] ([82.138.248.236:62055] helo=bacchus.thegestalt.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D4/F5-00170-7C6B3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 06:27:36 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by jail0061.vps.exonetric.net with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1GV6li-000NpV-Kb
	for java-user@lucene.apache.org; Wed, 04 Oct 2006 14:26:38 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id k94DQcfm091604
	for java-user@lucene.apache.org; Wed, 4 Oct 2006 14:26:38 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 4 Oct 2006 14:26:38 +0100
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using ParallelMultiSearcher is slow...
Message-ID: <20061004132638.GS3547@thegestalt.org>
References: <6B7B28B775F23D45B175CD4A301CFC6304B8822F@LNGDAYEXCP01VB.legal.regn.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <6B7B28B775F23D45B175CD4A301CFC6304B8822F@LNGDAYEXCP01VB.legal.regn.net>
User-Agent: Mutt/1.4.2.1i
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, Oct 04, 2006 at 08:14:38AM -0400, Haines, Ronald C. (LNG-DAY) said:
> I too am interested in learning more about a large scale distributed
> Lucene model.

I'm also building a large scale (billions of documents) Lucene index. 

Prelimary experimentation with a RemoteSearch/ParallelMultiSearcher 
combination found that there were issues with the RMI causing 
significant blocking. 

I'm currently playing around with trying alternative messaging 
approaches so that I can also load balance requests.

One of the things I haven't decided on is the optimum size for the sub 
indexes. Does anybody have any data on the overhead of file handle opens 
to index searching size or have anecodatal evidence of similar 
experiences?

Simon




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 13:32:34 2006
Return-Path: <java-user-return-23752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39575 invoked from network); 4 Oct 2006 13:32:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 13:32:33 -0000
Received: (qmail 31155 invoked by uid 500); 4 Oct 2006 13:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31131 invoked by uid 500); 4 Oct 2006 13:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31120 invoked by uid 99); 4 Oct 2006 13:32:26 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 06:32:26 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=m.scott.tiger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.179] ([64.233.166.179:1901] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A1/06-00170-8B7B3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 06:31:57 -0700
Received: by py-out-1112.google.com with SMTP id s49so223847pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 06:30:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=S11V3mAJHxw4DnXmTTcbB/sHrjQpKqNeUifjGBbmCDqxine49lW3AaeEpyDhkgeZTsv6Lyr0wGUHx5ih5NLia43Hprkz9qB7ddZRKBBTdQ/wY3e4JVhUI6Vlr6HEGrOkCs0P0wU3yAYBYi4wXaFm9rD2R1RslEK8vHe5BFcEImA=
Received: by 10.35.34.20 with SMTP id m20mr1170842pyj;
        Wed, 04 Oct 2006 06:30:07 -0700 (PDT)
Received: from ?192.168.1.32? ( [221.113.32.130])
        by mx.gmail.com with ESMTP id d13sm734659pyd.2006.10.04.06.30.06;
        Wed, 04 Oct 2006 06:30:07 -0700 (PDT)
Message-ID: <4523B75A.9010706@gmail.com>
Date: Wed, 04 Oct 2006 22:30:02 +0900
From: Scott <m.scott.tiger@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using ParallelMultiSearcher
 is slow...
References: <6B7B28B775F23D45B175CD4A301CFC6304B8822F@LNGDAYEXCP01VB.legal.regn.net>
In-Reply-To: <6B7B28B775F23D45B175CD4A301CFC6304B8822F@LNGDAYEXCP01VB.legal.regn.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Indeed, I am using a bit complex Query (4 fields with OR).

My index has fields Title, Sub-title, Content, Author.
And search them by one query like as web search engine.

Thank you for details about weight.

So I need to avoid remote calls to rewrite() and docFreq().
I'll try to make Hits object remotely and SearchMaster collects
top N of Hit from Hits then SearchMaster sort it.

I tested ParallelMultiSearcher performance.
it makes and starts thread serially.
Then wait for all threads ended.
But it is threaded, so searching is parallelly on remote server,

I insert debug program that calc elapsed times.
into below methods.

ParallelMultiSearcher.java:
public TopDocs search(Weight weight, Filter filter, int nDocs);
public TopFieldDocs search(Weight weight, Filter filter, int nDocs, Sort 
sort);

Searcher.java:
public Hits search(Query query, Filter filter);
public Hits search(Query query, Sort sort);
public Hits search(Query query, Filter filter, Sort sort);

debug program is :
--------
long startTime = System.currentTimeMillis();
System.out.println("Start ClassNameHere search");

... original main routine ...

long endTime = System.currentTimeMillis();
float totalTime = (endTime - startTime) / 1000.0f;
System.out.println("End ClassNameHere search in " + totalTime + "ms");
--------

Then, result is below.

Start Searcher search
Start ParallelMultiSearcher search
End ParallelMultiSearcher search in 0.049ms
End Searcher search in 0.449ms

I thinks the time 0.449 - 0.049 = '0.400' is weight calculation,
need to reduce this by trick...

Haines, Ronald C. (LNG-DAY) wrote:
> Keep in mind, that depending on your queries (lots of terms, wildcards,
> date ranges), you can spend quite a bit of time during the 'Weight'
> calculation...this all happens pre-search.  During the Weight
> calculation, you will be making remote calls to the rewrite() and
> docFreq() methods.  There will be (# of terms * # of remotes) of these
> remote calls made for each of the above methods.
> 
> And, I think the ParallelMultiSearcher will make all of these calls
> serially before it starts to thread the search process.  I have found
> that this, serially, can account for quite a bit of the overall response
> time.
> 
> I too am interested in learning more about a large scale distributed
> Lucene model.
>  
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Wednesday, October 04, 2006 7:33 AM
> To: java-user@lucene.apache.org
> Subject: Re: Searching documents on big index by using
> ParallelMultiSearcher is slow...
> 
> OK, you're now officially beyond my competence, so I'll have to wait for
> people who actually know <G>....
> 
> Although if I read your stats right, you're getting approximately 1 sec
> response time over 10M documents on a 10G index. That's not bad at all.
> What
> kind of response time do you need?
> 
> On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>> Hi,
>>
>>> Well, the first question is always "are you opening/closing your
>>> IndexSearchers for each request on your remote machines?". This is
>> always a
>>> no-no. This is also a question for your single-searcher version.
>> Yes I know, each search slave (RMI server) have single instance
>>   of IndexSearcher and it's open once when RMI server starts.
>>
>>> What is your performance if you only go to one server? I'd start by
>> finding
>>
>> A performance on one server with FULL index (not divided by 10)
>>   is about 2500 ms.
>> On one server with splitted index (divided by 10) is about 50 ms.
>>
>> And on ParallelMultiSearcher with 10 of remote searchable,
>>   each RemoteSearchable returns in about 50 - 100 ms,
>>   and ParallelMultiSearcher returns also 50 - 100 ms, because of
>>   threading.
>> but Hits Searcher.search(Query, Sort) responds in about 500 - 1000 ms.
>>
>> I think that Searcher.search with Sort reads all of SortFields from
>>   IndexReader and it's bottleneck.
>>
>> Are there results of high performance distributed Lucene with
>> ParallelMultiSearcher?
>> Or need hadoop?
>>
>> Erick Erickson wrote:
>>> Well, the first question is always "are you opening/closing your
>>> IndexSearchers for each request on your remote machines?". This is
>> always a
>>> no-no. This is also a question for your single-searcher version.
>>>
>>> What is your performance if you only go to one server? I'd start by
>> finding
>>> out what happens when you forget all the ParallelMultiSearcher
> stuff,
>> all
>>> the RMI stuff etc, and just see what your performance is on one of
> your
>>> index parts locally. Once that is answered, extend to RMI, then the
>>> Parallel...., at each step seeing if your performance degrades
>>> unacceptably.
>>> That'll at least give you a clue what part of the process is the
> biggest
>>> problem.
>>>
>>> And without knowing a LOT more about your searches, and your index,
> it's
>>> kind of hard to come up with solutions <G>....
>>>
>>> Best
>>> Erick
>>>
>>> On 10/3/06, Scott <m.scott.tiger@gmail.com> wrote:
>>>> Hi,
>>>>
>>>> I have a question about ParallelMultiSearcher performance.
>>>>
>>>> I want to search documents on about 10 gigabytes of index.
>>>> (The index has 10,000,000 documents.)
>>>>
>>>> I get very slow performance using IndexSearcher with ONE index
>> normally.
>>>> Then I tried to use ParallelMultiSearcher with 10 servers of remote
>>>> searchable.
>>>>
>>>> Index:
>>>> Each search slaves have 1/10 of index.
>>>> (ONE index divided to 10 servers.)
>>>>
>>>> Search slave:
>>>> Each search slaves start remote searchable RMI server,
>>>> and wait connecting from search master.
>>>>
>>>> Search master:
>>>> The search master use Naming.lookup() to get remote searchable.
>>>> Get 10 remote searchables from each search slaves and build
>>>> ParallelMultiSearcher.
>>>> Then search.
>>>>
>>>> Any solution?
>>>>
>>>> --
>>>> Scott
>>>>
>>>>
> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>> --
>> Scott
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

-- 
Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 13:37:56 2006
Return-Path: <java-user-return-23753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40704 invoked from network); 4 Oct 2006 13:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 13:37:56 -0000
Received: (qmail 39914 invoked by uid 500); 4 Oct 2006 13:37:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39888 invoked by uid 500); 4 Oct 2006 13:37:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39877 invoked by uid 99); 4 Oct 2006 13:37:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 06:37:47 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=m.scott.tiger@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.182] ([64.233.166.182:5993] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3F/06-00170-FD8B3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 06:36:38 -0700
Received: by py-out-1112.google.com with SMTP id s49so225487pyc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 06:35:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=pt5ELOF0jZ4czUEnUuzA2nO2Oq/adjh6hH+AxyVJXWZuzgnoU/RZtK1qjcwzNqxVImwUhCFAQrZuXOSfOyQQuYHhywosvacAKEMV5pT2kwF1CqTQiuPBhObeRBorHkvIVNv8bJ5rRCMAoriCuJAc903LaCQK1Z1qDUzTzrdiOqY=
Received: by 10.35.41.12 with SMTP id t12mr1217176pyj;
        Wed, 04 Oct 2006 06:35:20 -0700 (PDT)
Received: from ?192.168.1.32? ( [221.113.32.130])
        by mx.gmail.com with ESMTP id m68sm825690pye.2006.10.04.06.35.19;
        Wed, 04 Oct 2006 06:35:20 -0700 (PDT)
Message-ID: <4523B893.1020701@gmail.com>
Date: Wed, 04 Oct 2006 22:35:15 +0900
From: Scott <m.scott.tiger@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching documents on big index by using ParallelMultiSearcher
 is slow...
References: <6B7B28B775F23D45B175CD4A301CFC6304B8822F@LNGDAYEXCP01VB.legal.regn.net> <20061004132638.GS3547@thegestalt.org>
In-Reply-To: <20061004132638.GS3547@thegestalt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 > Prelimary experimentation with a RemoteSearch/ParallelMultiSearcher
 > combination found that there were issues with the RMI causing
 > significant blocking.
 >
 > I'm currently playing around with trying alternative messaging
 > approaches so that I can also load balance requests.

Wow, it is very interesting...

-- 
Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 14:04:16 2006
Return-Path: <java-user-return-23754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51549 invoked from network); 4 Oct 2006 14:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 14:04:16 -0000
Received: (qmail 86372 invoked by uid 500); 4 Oct 2006 14:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86352 invoked by uid 500); 4 Oct 2006 14:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86329 invoked by uid 99); 4 Oct 2006 14:04:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 07:04:06 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=eksdev@yahoo.co.uk; domainkeys=good
X-ASF-Spam-Status: No, hits=1.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [217.146.189.26] ([217.146.189.26:38121] helo=web23001.mail.ird.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FC/56-00170-B1FB3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 07:03:18 -0700
Received: (qmail 8157 invoked by uid 60001); 4 Oct 2006 13:55:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=mit127R76LtBWYgzKJwJFAYtBAWmpqMeF/HhtuwHhN/hq3PC5YAkLhGEvBnq9gw2fbxUUIVmazzoFxNK9LjP3WfHK2g8i5aEU7SJuJZHtTHfX519LzA5TCvaSeFG2WgI3uGGtWQnECmHyY528Rme8LYUEWJQARJEYSbtiJ2GbjI=  ;
Message-ID: <20061004135506.8155.qmail@web23001.mail.ird.yahoo.com>
Received: from [84.131.242.195] by web23001.mail.ird.yahoo.com via HTTP; Wed, 04 Oct 2006 13:55:06 GMT
Date: Wed, 4 Oct 2006 13:55:06 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Searching documents on big index by using ParallelMultiSearcher is slow...
To: java-user@lucene.apache.org
In-Reply-To: <20061004132638.GS3547@thegestalt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

have you considered hadoop "light"  mesagging RPC, should have significantly smaller latencies than RMI

----- Original Message ----
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Sent: Wednesday, 4 October, 2006 3:26:38 PM
Subject: Re: Searching documents on big index by using ParallelMultiSearcher is slow...

On Wed, Oct 04, 2006 at 08:14:38AM -0400, Haines, Ronald C. (LNG-DAY) said:
> I too am interested in learning more about a large scale distributed
> Lucene model.

I'm also building a large scale (billions of documents) Lucene index. 

Prelimary experimentation with a RemoteSearch/ParallelMultiSearcher 
combination found that there were issues with the RMI causing 
significant blocking. 

I'm currently playing around with trying alternative messaging 
approaches so that I can also load balance requests.

One of the things I haven't decided on is the optimum size for the sub 
indexes. Does anybody have any data on the overhead of file handle opens 
to index searching size or have anecodatal evidence of similar 
experiences?

Simon




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 14:22:57 2006
Return-Path: <java-user-return-23755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63516 invoked from network); 4 Oct 2006 14:22:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 14:22:56 -0000
Received: (qmail 40968 invoked by uid 500); 4 Oct 2006 14:22:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40826 invoked by uid 500); 4 Oct 2006 14:22:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40700 invoked by uid 99); 4 Oct 2006 14:22:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 07:22:42 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=khoon.ee.gan@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.188] ([64.233.182.188:39527] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1C/96-00170-583C3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 07:22:24 -0700
Received: by nf-out-0910.google.com with SMTP id c2so60015nfe
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 07:20:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tdSJmc9uBC3gTxb9P3diKwKEwGJo2ZhOck3KJiqepRbhdIVl1VyOLRu6H8YNaNeXbptSNtIyoX4g9CNAZ2oyVhNtijlXb/k/8RSqEqH7s+pRoy2iuJuUu2DKVluPjq+5iL6LNhDXH0eOzUphOnlPBhOUAvDw/hXH3fkIpqsQx+E=
Received: by 10.82.126.5 with SMTP id y5mr33366buc;
        Wed, 04 Oct 2006 07:20:53 -0700 (PDT)
Received: by 10.82.138.15 with HTTP; Wed, 4 Oct 2006 07:20:53 -0700 (PDT)
Message-ID: <85c493340610040720q2fc94461ta1835f8b230bbfd1@mail.gmail.com>
Date: Wed, 4 Oct 2006 22:20:53 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Number Proximity Query
In-Reply-To: <359a92830610040425w66d2b490t6c31e0727a7c2327@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24347_24473878.1159971653671"
References: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com>
	 <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu>
	 <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com>
	 <359a92830610040425w66d2b490t6c31e0727a7c2327@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_24347_24473878.1159971653671
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erick, thanks for your reply.

I have the LIA. But the sorting is not the solution I am looking for. As if
I sort, I will lose out the relevancy from searches of other fields. I want
the number proximity to be one in many of the fields that is searched. So
the "num" field will contribute to the overall document score.

~KEGan


On 10/4/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Sorry if this is a re-post, but I got an "undeliverable" error last time I
> tried to post it, something about SPAM. The nerve of that filter!
>
> ----------------
> I don't have my book handy, but you might want to check out "Lucene In
> Action". There's an example of how to create an index of restaurants and
> execute a query that orders the responses by the distance to the closest
> restaurant.
>
> I think a similar technique (although proabably an easier implementation)
> could apply to your problem. Unfortunately, I don't remember the details
> well enough to say much more....
>
> Could you accomplish this by implementing your own sort? I have no real
> idea
> whether that's applicable, but it did occur to me......
>
> Not much help, but a start <G>.
>
> Erick
>
> On 10/4/06, KEGan <khoon.ee.gan@gmail.com> wrote:
> >
> > Thanks Chis.
> >
> > After spending half a day to "really" look into FunctionQuery (and
> related
> > classes), and re-reading about Weight and Scorer. I think I am beginning
> > to
> > understand a bit. But more questions.
> >
> > (1) Should values returned by DocValues (return from ValueSource) must
> > always betwen 1.0 and 0.0 ? How is this value affect the overall
> document
> > scores, assuming there are others Query clauses as well that is perform
> on
> > the document (on other fields).
> >
> > (2) The documentation on the following functions is extremely lacking
> (no
> > matter where I looked). Any expert here can help out ?
> >
> > -- Weight.getValue() : what values should be returned for
> > NumberProximityQuery?
> > -- Weight.sumOfSquareWeights() : no idea what is this for???
> > -- Weight.normalize() : still no idea
> > -- Scorer.score() : should this value always between 1.0 and 0.0 ?
> >
> >
> >
> > Thanks.
> > ~KEGan
> >
> >
> > On 10/4/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >
> > >
> > > : >From my searches, there seems to be a FunctionQuery in Solr that
> can
> > do
> > > this
> > > : type of query. But I am using pure Lucene, and trying to port Solr
> > code
> > > over
> > > : (to create my own version of FunctionQuery) looks too complicated
> > > because of
> > > : code dependency on other Solr code such as ValueSource, etc.
> > >
> > > ValueSource isn't relaly "other Solr code" .. it's an inherient part
> of
> > > FunctionQuery (hence it's in the same package).
> > >
> > > You should be able to use everything in the
> > > org.apache.solr.search.function package as is without any other Solr
> > code.
> > >
> > > : I have also search on how to write my own query instance, but there
> is
> > > lack
> > > : of documentation on doing so. The formula to calculate the number
> > > proximity
> > > : is quite trivial. But how to stitch together Query, Weight, Scorer
> is
> > > the
> > > : problem :(
> > >
> > > Check out the package documentation for org.apache.lucene.search,
> > > particularly section #3 "Changing the Scoring" ...
> > >
> > >
> > >
> >
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/package-summary.html#scoring
> > >
> > >
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
>

------=_Part_24347_24473878.1159971653671--

From java-user-return-23756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 14:45:52 2006
Return-Path: <java-user-return-23756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72588 invoked from network); 4 Oct 2006 14:45:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 14:45:52 -0000
Received: (qmail 4744 invoked by uid 500); 4 Oct 2006 14:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4705 invoked by uid 500); 4 Oct 2006 14:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4682 invoked by uid 99); 4 Oct 2006 14:45:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 07:45:37 -0700
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by jail0061.vps.exonetric.net with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1GV7zo-0004bp-1G; Wed, 04 Oct 2006 15:45:16 +0100
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id k94EjFYk017720;
	Wed, 4 Oct 2006 15:45:15 +0100 (BST)
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 4 Oct 2006 15:45:15 +0100
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org, eks dev <eksdev@yahoo.co.uk>
Subject: Re: Searching documents on big index by using ParallelMultiSearcher is slow...
Message-ID: <20061004144515.GV3547@thegestalt.org>
References: <20061004132638.GS3547@thegestalt.org> <20061004135506.8155.qmail@web23001.mail.ird.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20061004135506.8155.qmail@web23001.mail.ird.yahoo.com>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, Oct 04, 2006 at 01:55:06PM +0000, eks dev said:
> have you considered hadoop "light" mesagging RPC, should have
> significantly smaller latencies than RMI

Yes, it's one of the things I'm looking at.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 16:15:55 2006
Return-Path: <java-user-return-23757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7483 invoked from network); 4 Oct 2006 16:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 16:15:55 -0000
Received: (qmail 89825 invoked by uid 500); 4 Oct 2006 16:15:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89801 invoked by uid 500); 4 Oct 2006 16:15:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89789 invoked by uid 99); 4 Oct 2006 16:15:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 09:15:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:51783] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 02/81-17684-E2ED3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 09:15:44 -0700
Received: (qmail invoked by alias); 04 Oct 2006 16:15:39 -0000
Received: from host-245-34.ka-1.d697379.net (EHLO [192.168.100.124]) [213.30.245.34]
  by mail.gmx.net (mp037) with SMTP; 04 Oct 2006 18:15:39 +0200
X-Authenticated: #12436987
Message-ID: <4523DD83.5000107@gmx.net>
Date: Wed, 04 Oct 2006 18:12:51 +0200
From: Aleksei Valikov <valikov@gmx.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: native Java DB (eg, Derby) to store the index: performance comparision?..
References: <373399D6389D8C42B4EAD9BE2B6B5C5F07223F6C@tormail01.cihi.ca>
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F07223F6C@tormail01.cihi.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.


> I've been wondering if anyone has tried to compare the performance of
> any 'native' Java DB as index storage mechanism vs Lucene custom
> implementation? I'm assuming that DB products should provide some
> functionality for 'free' right out of the box (correct, if I'm wrong):
>  
> - easily managable and maintainable index (accessible through any SQL
> client tool)
> - efficient access into large massives of data
>   * potential support of 'distributed' DB, which can spawn across
> multiple boxes transparently to the client app (the Lucene engine
> generating the queries)
> - much less hassle of integrating Lucene into the applications backed by
> the DB (eg, many stores, 'city sites', portals which already have all
> their data in relational tables and only need to get efficient fuzzy
> searches across this data)
>   * no need to keep Lucene index in sync with data, since Lucene will
> reuse PKs and indexes from the DB
>  
> So, I think the main question is whether Lucene custom way of
> maintaining _and accessing_ the index is (much?) more efficient than
> that one of available open source native Java DBs (Derby, etc)
>  
> Thanks!

You may be interested in Compass Framework. It is build on top of lucene, 
implements JDBC-based storage as well as synchronization with things like Hibernate.

In my apps, I have to use both Lucene and relational databases since they both 
have unique querying characteristics. I mean, there are requests which are 
implementable on a RDB but not in Lucene, requests which are implementable with 
Lucene but not in RDB. There are also queries which run on both.


Your idea of using RDBs to store Lucene indexes looks quite nice in the first 
approach. You probably imagine something like

select id from tbl_index where value like 'te%st' or value like 'f_ne'

for a query like

"te*st f?ne"

Yes, this looks quite nice, in the first approach.

But if you take a closer look, you'll quickly find out that only a part of 
Lucene queries could be converted into such SQLs.

Next problem is index format. Lucene indexes are (a bit ;) ) more complex than 
simple index tables. So there's no "easy" index format which would make sense 
for  "any SQL clien tool".

There'll be also problems if you try to reuse PKs and DB indexes. You'll end up 
with a lot of constraint exceptions and stale indexes - and someone still HAS to 
sync the full text index - even if it's int its own table.

Finally, I have no numbers but from the gut feeling I don't think Lucene over 
HSQLDB or Derby will be much more performant that Lucene on its own. Seriously 
doubt that.

And still I like you idea. I work a lot with queries which currently require 
evaluation in both Lucene and RDB. I would be fine with a limited Lucene query 
syntax which would allow queries be processed homogeneously in a RDB only.

Bye.
/lexi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 18:24:50 2006
Return-Path: <java-user-return-23758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52261 invoked from network); 4 Oct 2006 18:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 18:24:50 -0000
Received: (qmail 8015 invoked by uid 500); 4 Oct 2006 18:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7940 invoked by uid 500); 4 Oct 2006 18:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7894 invoked by uid 99); 4 Oct 2006 18:24:40 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 11:24:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:46998] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 31/70-20288-46CF3254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 11:24:37 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0A14A5B776; Wed,  4 Oct 2006 11:24:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 009C37F403
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 11:24:33 -0700 (PDT)
Date: Wed, 4 Oct 2006 11:24:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Number Proximity Query
In-Reply-To: <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610041035480.29904@hal.rescomp.berkeley.edu>
References: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com> 
 <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu>
 <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: (1) Should values returned by DocValues (return from ValueSource) must
: always betwen 1.0 and 0.0 ? How is this value affect the overall document
: scores, assuming there are others Query clauses as well that is perform on
: the document (on other fields).

The "values" returned by the various methods in DocValues can be anything
you want, as long as they conform to hte primitive datatype in the method
sig -- ideally whatever float floatVal returns should be roughly
equivilent to whever double you return from doubleVal so that your
ValueSource appears to behave the same way regardless of whatever other
ValueSources you may compose it in.

How the values affect the over all Document score really depends on how
big the values you return are, and how you compose your FunctionQuery with
the other parts of your query (presumably in a BooleanQuery)


Take a look at LinearFloatFunction and the DocValues it produces.  it's a
good example of what a "function" you want to be able to compose in a
function query should do.

If i remember your problem statement correctly, all you really need is an
AbsoluteValueFunction that you could compose with some linear functions
ala:  linear(abs(linear(field(x), -1, N), -1, M)))

...where N is the magic number you want your doc vals to be close to, M is
the biggest value you ever want your FunctionQuery to score a document
with, and field(x) is where you put a FieldCacheSource on the field you
care about.

Your AbsoluteValueFunction would look a lot like LinearFloatFunction, with
out the slope or intercept and a getValues method that looked something like...

  public DocValues getValues(IndexReader reader) throws IOException {
    final DocValues vals =  source.getValues(reader);
    return new DocValues() {
      public float floatVal(int doc) {
        return Math.abs(vals.floatVal(doc))
      }
      ...

: (2) The documentation on the following functions is extremely lacking (no
: matter where I looked). Any expert here can help out ?
:
: -- Weight.getValue() : what values should be returned for
: NumberProximityQuery?
: -- Weight.sumOfSquareWeights() : no idea what is this for???
: -- Weight.normalize() : still no idea
: -- Scorer.score() : should this value always between 1.0 and 0.0 ?

I honestly don't remember off the top of me head what those methods are
for our how they come into play -- the scoring.html doc that's in progress
should help clear up some of that.  As i recall, the last time i needed to
understand what those methods did, i looked at some of the primitive query
types (like TermQuery and BooleanQuery) to see what they did.

The one thing I can tell you with certainty is that there is nothing
magical about scores between 0.0 and 1.0 -- the notion that Lucene Scores
are between 0 and 1 is a myth perpetuated by the Hits interface which does
a mock-normalization of the scores if the highest is greater then 1.
When you get down into the bowels of scoring, the scores can be any float
-- even negative numbers are legal scores.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 18:58:10 2006
Return-Path: <java-user-return-23759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62924 invoked from network); 4 Oct 2006 18:58:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 18:58:10 -0000
Received: (qmail 80793 invoked by uid 500); 4 Oct 2006 18:58:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80770 invoked by uid 500); 4 Oct 2006 18:58:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80759 invoked by uid 99); 4 Oct 2006 18:58:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 11:58:03 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=khoon.ee.gan@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.186] ([64.233.182.186:25415] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 06/51-20288-93404254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 11:58:01 -0700
Received: by nf-out-0910.google.com with SMTP id c2so133520nfe
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 11:57:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sMmBKjbEEfLsSNW+4k3BZ5aBU4n1mGYOwzwQIQu4Fl7NOsPob7MEyO6bl6BW21nqomFxKvEazx+9qdcfjgNQdGf5929XyigDI99Tr6FC//fF/RUNX31R5RxS5UNDytsrWkUGJIoj1WSfopUw+H8opHBahr6oCJumQ19vSbxcJj4=
Received: by 10.82.129.5 with SMTP id b5mr52589bud;
        Wed, 04 Oct 2006 11:57:57 -0700 (PDT)
Received: by 10.82.138.15 with HTTP; Wed, 4 Oct 2006 11:57:57 -0700 (PDT)
Message-ID: <85c493340610041157r2405c1d4o8ed9d057a029bf6a@mail.gmail.com>
Date: Thu, 5 Oct 2006 02:57:57 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Number Proximity Query
In-Reply-To: <Pine.LNX.4.58.0610041035480.29904@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27211_9728189.1159988277363"
References: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com>
	 <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu>
	 <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com>
	 <Pine.LNX.4.58.0610041035480.29904@hal.rescomp.berkeley.edu>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27211_9728189.1159988277363
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Chris, thanks again for your reply. Really appreciate your help.

Another quick question on the score. If my custom Query is returning a score
that can be any value, and this custom Query is being used together with
other standard Query in a BooleanQuery. How do I ensure the value return by
the custome Query doesnt 'overshadow' the values return by other standard
Query??

Example, if the custom Query return values in range of 0-1,000, whereas
other standard Query return values in range of 0-5. Then the score by the
custom Query virtually dominates the overall document score.

I am not sure if I am asking the correct question :) It's 3am now. I will
write more tomorrow. Good night :)

~KEGan


On 10/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : (1) Should values returned by DocValues (return from ValueSource) must
> : always betwen 1.0 and 0.0 ? How is this value affect the overall
> document
> : scores, assuming there are others Query clauses as well that is perform
> on
> : the document (on other fields).
>
> The "values" returned by the various methods in DocValues can be anything
> you want, as long as they conform to hte primitive datatype in the method
> sig -- ideally whatever float floatVal returns should be roughly
> equivilent to whever double you return from doubleVal so that your
> ValueSource appears to behave the same way regardless of whatever other
> ValueSources you may compose it in.
>
> How the values affect the over all Document score really depends on how
> big the values you return are, and how you compose your FunctionQuery with
> the other parts of your query (presumably in a BooleanQuery)
>
>
> Take a look at LinearFloatFunction and the DocValues it produces.  it's a
> good example of what a "function" you want to be able to compose in a
> function query should do.
>
> If i remember your problem statement correctly, all you really need is an
> AbsoluteValueFunction that you could compose with some linear functions
> ala:  linear(abs(linear(field(x), -1, N), -1, M)))
>
> ...where N is the magic number you want your doc vals to be close to, M is
> the biggest value you ever want your FunctionQuery to score a document
> with, and field(x) is where you put a FieldCacheSource on the field you
> care about.
>
> Your AbsoluteValueFunction would look a lot like LinearFloatFunction, with
> out the slope or intercept and a getValues method that looked something
> like...
>
> public DocValues getValues(IndexReader reader) throws IOException {
>    final DocValues vals =  source.getValues(reader);
>    return new DocValues() {
>      public float floatVal(int doc) {
>        return Math.abs(vals.floatVal(doc))
>      }
>      ...
>
> : (2) The documentation on the following functions is extremely lacking
> (no
> : matter where I looked). Any expert here can help out ?
> :
> : -- Weight.getValue() : what values should be returned for
> : NumberProximityQuery?
> : -- Weight.sumOfSquareWeights() : no idea what is this for???
> : -- Weight.normalize() : still no idea
> : -- Scorer.score() : should this value always between 1.0 and 0.0 ?
>
> I honestly don't remember off the top of me head what those methods are
> for our how they come into play -- the scoring.html doc that's in progress
> should help clear up some of that.  As i recall, the last time i needed to
> understand what those methods did, i looked at some of the primitive query
> types (like TermQuery and BooleanQuery) to see what they did.
>
> The one thing I can tell you with certainty is that there is nothing
> magical about scores between 0.0 and 1.0 -- the notion that Lucene Scores
> are between 0 and 1 is a myth perpetuated by the Hits interface which does
> a mock-normalization of the scores if the highest is greater then 1.
> When you get down into the bowels of scoring, the scores can be any float
> -- even negative numbers are legal scores.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27211_9728189.1159988277363--

From java-user-return-23760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 20:32:28 2006
Return-Path: <java-user-return-23760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 499 invoked from network); 4 Oct 2006 20:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 20:32:28 -0000
Received: (qmail 39930 invoked by uid 500); 4 Oct 2006 20:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39601 invoked by uid 500); 4 Oct 2006 20:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39590 invoked by uid 99); 4 Oct 2006 20:32:20 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 13:32:20 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=rajiv.roopan@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.1 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.92.172] ([66.249.92.172:50374] helo=ug-out-1314.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2E/73-20288-15A14254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 13:32:18 -0700
Received: by ug-out-1314.google.com with SMTP id k40so116905ugc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 13:32:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=pBJjrHOsZaD0kCcnqnR27c0o8dNP1xt+YIZzXow8Wr3AMdrFYeGn5A0tKKoZwEbuyCjHIgFTdNmh5WhmSENMFmXSFtm7UCqtSTjxDzcY2Eva8quLfPAGduVh75RgyB5qEcDs3FfHX/9NbWpNVQNk2n2iz+f0XHVdrJgynp/wlNg=
Received: by 10.67.103.7 with SMTP id f7mr1029883ugm;
        Wed, 04 Oct 2006 13:32:14 -0700 (PDT)
Received: by 10.66.248.20 with HTTP; Wed, 4 Oct 2006 13:32:14 -0700 (PDT)
Message-ID: <5a8b64620610041332w3eacb7adl50222d071816cc68@mail.gmail.com>
Date: Wed, 4 Oct 2006 16:32:14 -0400
From: "Rajiv Roopan" <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: Spam filter for lucene project
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17167_10593058.1159993934702"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17167_10593058.1159993934702
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello, I'm currently running a site which allows users to post. Lately posts
have been getting out of hand. I was wondering if anyone knows of an open
source spam filter that I can add to my project to scan the posts (which are
just plain text)  for spam?

thanks in advance.
Rajiv

------=_Part_17167_10593058.1159993934702--

From java-user-return-23761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 20:35:01 2006
Return-Path: <java-user-return-23761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1211 invoked from network); 4 Oct 2006 20:35:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 20:35:01 -0000
Received: (qmail 45786 invoked by uid 500); 4 Oct 2006 20:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45749 invoked by uid 500); 4 Oct 2006 20:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45738 invoked by uid 99); 4 Oct 2006 20:34:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 13:34:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [216.93.161.132] ([216.93.161.132:56486] helo=mail1.zvents.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2E/83-20288-9EA14254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 13:34:51 -0700
Received: from Oblong.zvents.com (c-71-198-187-222.hsd1.ca.comcast.net [71.198.187.222])
	by mail1.zvents.com (Postfix) with ESMTP id A9C2F317076
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 13:34:45 -0700 (PDT)
Message-Id: <6.2.3.4.0.20061004131145.02a37a50@worldware.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Wed, 04 Oct 2006 13:34:10 -0700
To: java-user@lucene.apache.org
From: Tom Hill <lucene-list@zvents.com>
Subject: discontinuous range query
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi -

I'm having a bit of trouble building a query to match a range of 
values in a field that is not continuous.

For an example, say I want to find all people with last names 
starting with A-C, and G-K.

If I use MUST on each element of the range, then I get nothing. This 
I think I understand, as if I require both A-C and G-K, no doc matches both.
+name:[A TO C] +name:[G TO K]

But if I make both clauses SHOULD, I get back all the documents in my 
small test index, not just the ones that match either.
name:[A TO C] name:[G TO K]

Actually, if I do either piece with SHOULD, I get all the documents 
in the index, MUST gives me only the ones I expect.

What does SHOULD really mean, precisely?

And how do I query a discontinuous range?

Thanks,

Tom


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 20:52:21 2006
Return-Path: <java-user-return-23762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4599 invoked from network); 4 Oct 2006 20:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 20:52:20 -0000
Received: (qmail 66292 invoked by uid 500); 4 Oct 2006 20:52:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65982 invoked by uid 500); 4 Oct 2006 20:52:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65971 invoked by uid 99); 4 Oct 2006 20:52:14 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 13:52:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.151] ([195.212.29.151:61302] helo=mtagate2.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 99/E3-20288-AFE14254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 13:52:10 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id k94Kq7m0154066
	for <java-user@lucene.apache.org>; Wed, 4 Oct 2006 20:52:07 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k94KsHbH1695948
	for <java-user@lucene.apache.org>; Wed, 4 Oct 2006 22:54:17 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k94Kq6R4005101
	for <java-user@lucene.apache.org>; Wed, 4 Oct 2006 22:52:06 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k94Kq6t4005098
	for <java-user@lucene.apache.org>; Wed, 4 Oct 2006 22:52:06 +0200
In-Reply-To: <5a8b64620610041332w3eacb7adl50222d071816cc68@mail.gmail.com>
Subject: Re: Spam filter for lucene project
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFCD6E4879.3CDF4E3D-ON882571FD.00721101-882571FD.00728209@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 4 Oct 2006 12:50:43 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 04/10/2006 22:54:17
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I was wondering if anyone knows of an open source
> spam filter that I can add to my project to scan
> the posts (which are just plain text)  for spam?

I am not aware of any (which does not mean there is none), but just wanted
to draw your attention to a related discussion
http://www.nabble.com/Inappropriate-content-detection-tf1067035.html#a2775630


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 21:11:34 2006
Return-Path: <java-user-return-23763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10394 invoked from network); 4 Oct 2006 21:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 21:11:34 -0000
Received: (qmail 92577 invoked by uid 500); 4 Oct 2006 21:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92555 invoked by uid 500); 4 Oct 2006 21:11:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92544 invoked by uid 99); 4 Oct 2006 21:11:27 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 14:11:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [207.113.241.148] ([207.113.241.148:50086] helo=iss04.interliant.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CC/44-20288-A7324254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 14:11:23 -0700
Received: from EX-007.mail.navisite.com (ex-007.interliant.com [207.113.240.186])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id k94LBFR10888
	for <java-user@lucene.apache.org>; Wed, 4 Oct 2006 16:11:19 -0500 (CDT)
Received: from EX-101.mail.navisite.com ([172.16.1.12]) by EX-007.mail.navisite.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 4 Oct 2006 16:11:07 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Spam filter for lucene project
Date: Wed, 4 Oct 2006 16:12:57 -0500
Message-ID: <E1F190DAC247C64FAA46B38316FA151D04FEDC15@EX-101.mail.navisite.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Spam filter for lucene project
Thread-Index: Acbn9DZ9JzPJmVQfRyqx9OlO7RXGUAABWlDg
From: "Bruce Ritchie" <bruce@jivesoftware.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Oct 2006 21:11:08.0031 (UTC) FILETIME=[9C3638F0:01C6E7F9]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rejiv,

You may want to take a look at http://akismet.com/development/ - I don't
believe it's open source but it may be worth looking into.


Regards,

Bruce Ritchie
 =20

> -----Original Message-----
> From: Rajiv Roopan [mailto:rajiv.roopan@gmail.com]=20
> Sent: Wednesday, October 04, 2006 4:32 PM
> To: java-user@lucene.apache.org
> Subject: Spam filter for lucene project
>=20
> Hello, I'm currently running a site which allows users to=20
> post. Lately posts have been getting out of hand. I was=20
> wondering if anyone knows of an open source spam filter that=20
> I can add to my project to scan the posts (which are just=20
> plain text)  for spam?
>=20
> thanks in advance.
> Rajiv
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 04 23:59:24 2006
Return-Path: <java-user-return-23764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50143 invoked from network); 4 Oct 2006 23:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Oct 2006 23:59:24 -0000
Received: (qmail 74529 invoked by uid 500); 4 Oct 2006 23:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74318 invoked by uid 500); 4 Oct 2006 23:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74307 invoked by uid 99); 4 Oct 2006 23:59:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 16:59:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:39225] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BD/47-20288-2DA44254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 16:59:15 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8D9E65B776; Wed,  4 Oct 2006 16:59:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 768BD7F403
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 16:59:11 -0700 (PDT)
Date: Wed, 4 Oct 2006 16:59:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Number Proximity Query
In-Reply-To: <85c493340610041157r2405c1d4o8ed9d057a029bf6a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610041645300.17899@hal.rescomp.berkeley.edu>
References: <85c493340610031751x5ed170ebxd38f1c8475a81984@mail.gmail.com> 
 <Pine.LNX.4.58.0610032036120.25206@hal.rescomp.berkeley.edu> 
 <85c493340610040115i3f198e87g31f8f2173b0ebab7@mail.gmail.com> 
 <Pine.LNX.4.58.0610041035480.29904@hal.rescomp.berkeley.edu>
 <85c493340610041157r2405c1d4o8ed9d057a029bf6a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Another quick question on the score. If my custom Query is returning a score
: that can be any value, and this custom Query is being used together with
: other standard Query in a BooleanQuery. How do I ensure the value return by
: the custome Query doesnt 'overshadow' the values return by other standard
: Query??
	...
: I am not sure if I am asking the correct question :) It's 3am now. I will
: write more tomorrow. Good night :)

your question is not only 'correct' but very astute - unfortunately I
don't have a good answer for you -- there is no one solution to deal with
this problem, for mant of the same reasons why trying to make value
comparisons about the scores from different queries, or trying to "filter
by score" doesn't work -- there is no "upper bound" on the score that any
one query can produce, so there is no 100% safe way to ensure that you
fairly weight the score contributions of two arbitrary clauses of a
boolean query.

what you can do is try to mitigate the affects, base on what you know
about the various queries ... if you have 3 major clauses: one parsed
from your user input, one built automatically based on some criteria, and
one that's a fixed function query you can look at the typically queries
produced by your users, and the general structure of the automatically
generated clause, and the range of values produced by your function and
come up with boosts for each that work "well enough" in the common case.

the Explanation class is your friend while working out the boosts you
want.

The FunctionQuery package also has a few little gems that help you
mitigate the potential range of values your produce... MaxFloatFunction
can help you ensure that your values are above a certain "hard" threshold,
wrapping that in a LinearFloatFunction with a negative slope can help you
ensure that the values are *below* a hard threshold ... the OrdFieldSource
and ReverseOrdFieldSource are also extremely usefull when you care about
the ordering of Documents by a field value, but not the relative
differences between those values.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 01:35:58 2006
Return-Path: <java-user-return-23765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76292 invoked from network); 5 Oct 2006 01:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 01:35:57 -0000
Received: (qmail 48160 invoked by uid 500); 5 Oct 2006 01:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48120 invoked by uid 500); 5 Oct 2006 01:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48109 invoked by uid 99); 5 Oct 2006 01:35:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 18:35:51 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=yseeley@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.189] ([64.233.182.189:31512] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6F/19-20288-47164254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 18:35:50 -0700
Received: by nf-out-0910.google.com with SMTP id c2so224339nfe
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 18:35:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=nSbM4FMfiNQ6D0mSYN/kLGEBpxHM2K5QsTWeeHpbNO7tvJ59wMWCItNJWBm3p+w6LhQ58RUYL5GQkc96MPkyV1n+8pIhjsrxN62UNDAOzdQFXAjoQrIwAlV1GkkrOCsMjp+ZmXdb1GEKw3JYHa/DJ35nzGoIDrRkMidQ7ZN5b3I=
Received: by 10.82.129.8 with SMTP id b8mr70828bud;
        Wed, 04 Oct 2006 18:35:45 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Wed, 4 Oct 2006 18:35:45 -0700 (PDT)
Message-ID: <c68e39170610041835g7f95ba44x17d6b69522ca5284@mail.gmail.com>
Date: Wed, 4 Oct 2006 21:35:45 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: discontinuous range query
In-Reply-To: <6.2.3.4.0.20061004131145.02a37a50@worldware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6.2.3.4.0.20061004131145.02a37a50@worldware.com>
X-Google-Sender-Auth: 01646879b68b11a4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Tom,
The query you want is
name:[A TO C] name:[G TO K]
(each clause being SHOULD, or put another way, an implicit "OR" in between.

The problem may be how you analyze the name field... is it tokenized at all?
If so, you might be matching on first, last, and middle names, and the
combination of everything may match most of your documents.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

On 10/4/06, Tom Hill <lucene-list@zvents.com> wrote:
> Hi -
>
> I'm having a bit of trouble building a query to match a range of
> values in a field that is not continuous.
>
> For an example, say I want to find all people with last names
> starting with A-C, and G-K.
>
> If I use MUST on each element of the range, then I get nothing. This
> I think I understand, as if I require both A-C and G-K, no doc matches both.
> +name:[A TO C] +name:[G TO K]
>
> But if I make both clauses SHOULD, I get back all the documents in my
> small test index, not just the ones that match either.
> name:[A TO C] name:[G TO K]
>
> Actually, if I do either piece with SHOULD, I get all the documents
> in the index, MUST gives me only the ones I expect.
>
> What does SHOULD really mean, precisely?
>
> And how do I query a discontinuous range?
>
> Thanks,
>
> Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 03:07:38 2006
Return-Path: <java-user-return-23766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94495 invoked from network); 5 Oct 2006 03:07:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 03:07:38 -0000
Received: (qmail 9845 invoked by uid 500); 5 Oct 2006 03:07:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9425 invoked by uid 500); 5 Oct 2006 03:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9414 invoked by uid 99); 5 Oct 2006 03:07:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 20:07:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.226.175.34] ([209.226.175.34:62239] helo=tomts13-srv.bellnexxia.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 04/EA-20288-1F674254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 20:07:30 -0700
Received: from [69.157.150.118] by tomts13-srv.bellnexxia.net
          (InterMail vM.5.01.06.13 201-253-122-130-113-20050324) with ESMTP
          id <20061005030725.ROWU29052.tomts13-srv.bellnexxia.net@[69.157.150.118]>
          for <java-user@lucene.apache.org>; Wed, 4 Oct 2006 23:07:25 -0400
Message-ID: <452476F6.2050405@sympatico.ca>
Date: Wed, 04 Oct 2006 23:07:34 -0400
From: Michael Imbeault <michael.imbeault@sympatico.ca>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Find if words are in the same phrase?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is it possible with Lucene to limit a proximity query to a phrase to 
determine if two words are in the same phrase? Along the same train of 
thoughts, is it possible to determine if two words in a same phrase are 
separated by a word, or a list of words? Like for example Virus (some 
other words) activate (some other words) cancer?

Thanks,

-- 
Michael Imbeault
CHUL Research Center (CHUQ)
2705 boul. Laurier
Ste-Foy, QC, Canada, G1V 4G2
Tel: (418) 654-2705, Fax: (418) 654-2212


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 04:19:35 2006
Return-Path: <java-user-return-23767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11834 invoked from network); 5 Oct 2006 04:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 04:19:35 -0000
Received: (qmail 72818 invoked by uid 500); 5 Oct 2006 04:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72183 invoked by uid 500); 5 Oct 2006 04:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72172 invoked by uid 99); 5 Oct 2006 04:19:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 21:19:28 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=magawake@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.1 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.228] ([66.249.82.228:18371] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 66/6C-20288-EC784254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 21:19:27 -0700
Received: by wx-out-0506.google.com with SMTP id s15so375322wxc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 21:19:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Se4ZiyFacgT/vMpiTrjRzdKVR6v818WUZUBs/vdexbTUj1nht3PWFQtB2N5kQiGtESLDmQZxqaDBCNy1+0vKdTMeHzteDK4nqLkiK9C4862VjqpxOQfHIDs5tOiSmLZxw7XjGcnHTrEFH9Gr2JtbRdp8fRe3ZYS1oekjjhQY6k4=
Received: by 10.90.27.6 with SMTP id a6mr664959aga;
        Wed, 04 Oct 2006 21:19:23 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Wed, 4 Oct 2006 21:19:23 -0700 (PDT)
Message-ID: <1cbd6f830610042119j5b9c75c7qa23f3b7de6e1ac3d@mail.gmail.com>
Date: Thu, 5 Oct 2006 00:19:23 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Advantage of putting lucene index in RDBMS
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_105976_10696994.1160021963184"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_105976_10696994.1160021963184
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have been reading the lists for couple of week now, and I noticed people
asking about placing their indexes into a RDBMS. What is the advantage of
that?

So far lucene was able to solve all my problems, but I am curious how else
people are using it (especially with RDBMS).

TIA

------=_Part_105976_10696994.1160021963184--

From java-user-return-23768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 04:28:52 2006
Return-Path: <java-user-return-23768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13778 invoked from network); 5 Oct 2006 04:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 04:28:52 -0000
Received: (qmail 77343 invoked by uid 500); 5 Oct 2006 04:28:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76508 invoked by uid 500); 5 Oct 2006 04:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76496 invoked by uid 99); 5 Oct 2006 04:28:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 21:28:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:34269] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DD/9C-20288-BF984254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 21:28:44 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 26F415B776; Wed,  4 Oct 2006 21:28:41 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 14E7B7F403
	for <java-user@lucene.apache.org>; Wed,  4 Oct 2006 21:28:41 -0700 (PDT)
Date: Wed, 4 Oct 2006 21:28:41 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: discontinuous range query
In-Reply-To: <c68e39170610041835g7f95ba44x17d6b69522ca5284@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610042115240.28075@hal.rescomp.berkeley.edu>
References: <6.2.3.4.0.20061004131145.02a37a50@worldware.com>
 <c68e39170610041835g7f95ba44x17d6b69522ca5284@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The query you want is
: name:[A TO C] name:[G TO K]
: (each clause being SHOULD, or put another way, an implicit "OR" in between.
:
: The problem may be how you analyze the name field... is it tokenized at all?
: If so, you might be matching on first, last, and middle names, and the
: combination of everything may match most of your documents.

also keep in mind that "C" is lexigraphicaly less then "Chris" so Chris
doesn't fall in the range [A TO C].






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 05:08:20 2006
Return-Path: <java-user-return-23769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18502 invoked from network); 5 Oct 2006 05:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 05:08:19 -0000
Received: (qmail 6721 invoked by uid 500); 5 Oct 2006 05:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6678 invoked by uid 500); 5 Oct 2006 05:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6666 invoked by uid 99); 5 Oct 2006 05:08:11 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 22:08:11 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=artvas@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.92.169] ([66.249.92.169:16935] helo=ug-out-1314.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 38/7D-20288-73394254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 22:08:08 -0700
Received: by ug-out-1314.google.com with SMTP id k40so149930ugc
        for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 22:08:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type;
        b=oOgYOxfauDYyctD1HSt02hFCiftipQlHA7mDFSsmz/cpUXSDaxqSVgBhY56tSJe1FYIbInO6dAndNqb2aNj57ihh0dzITpxjVseCMM/uikQPx+ujxROlppJnryXz6qxM5kekjsWruBQAPuwich/22YhH/kF1I78iiz4Zc2OeTV0=
Received: by 10.66.216.6 with SMTP id o6mr1447254ugg;
        Wed, 04 Oct 2006 22:08:04 -0700 (PDT)
Received: from ppp235-56.pptp.mtu-net.ru ( [81.195.235.56])
        by mx.google.com with ESMTP id 20sm294705uga.2006.10.04.22.08.03;
        Wed, 04 Oct 2006 22:08:03 -0700 (PDT)
Date: Thu, 5 Oct 2006 09:08:00 +0400
From: Artem Vasiliev <artvas@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem Vasiliev <artvas@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <371027479.20061005090800@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Re[2]: Fwd: Re[2]: 30 milllion+ docs on a single server
In-Reply-To: <594278171.20061005084413@gmail.com>
References: <20061005014810.87065.qmail@web50314.mail.yahoo.com>
 <594278171.20061005084413@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
 boundary="----------36AE1563EAAE005"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------------36AE1563EAAE005
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello Otis & all,

I benchmarked it only subjectively - typical FieldCache'ing sort was an overkill
for my humble server (now I give sharehound about 200M RAM for 14mln index which
takes about 12G on disk). When sorting (using FieldCache) the first time after index change Lucene
takes the whole index field set into memory - that's a big hit for memory and
time (except the index is small). The situation is even worse for me because I
wanted the index to be available for search while crawling the shares (so the
index is relatively frequently updated).

Now my add-on fixes these problems very nice. I'll contribute this add-on to
Lucene soon. Recently I separated this add-on's binaries creation in the
sharehound build procedure and I attach the jar file for convenience (to try
it). However, for example of use you can look at Sharehound code:
http://sharehound.cvs.sourceforge.net/*checkout*/sharehound/jNetCrawler/src/java/org/sourceforge/sharehound/lucene/FilesSearchCommandImpl.java


Best regards,
Artem.

OG> Artem & Co.,

OG> Have you benchmarked this approach against the typical non-caching
OG> Sort?  Both performance and memory benchmark?

OG> If it outperforms FieldCache based sorting, I'm interested in it :)
OG> I'm also interested in a patch or contribution for Lucene itself.

OG> Please follow-up on java-user or java-dev.

OG> Thanks,
OG> Otis


OG> ----- Original Message ----
OG> From: Artem Vasiliev <artvas@gmail.com>
OG> To: markrmiller@gmail.com; otis_gospodnetic@yahoo.com; hutchiko@gmail.com
OG> Sent: Wednesday, August 23, 2006 1:44:29 PM
OG> Subject: Fwd: Re[2]: 30 milllion+ docs on a single server

OG> Hi guys!

OG> I'm not sure my mail below arrived correctly to the list as I didn't
OG> receive it by mail subscription. I can see it only at Nabble:
OG> http://www.nabble.com/Re-2-%3A-30-milllion%2B-docs-on-a-single-server-p5916372.html

OG> I hope the solution below will help.

OG> Best regards,
OG> Artem

OG> ===8<==============Original message text===============
OG> Hi guys!

OG> I have noticed many questions on the list vonsidering Lucene sorting
OG> memory consumption and hope my solution can help someone.

OG> I faced a memory/time consumption problem on sorting in Lucene back in
OG> April. With a help of this list's experts I came to solution which I
OG> like: documents from the sorting set (instead of given the field's
OG> values from the whole index) are lazy-cached in a WeakHashMap so the
OG> cached items are candidates for GC. I didn't create a patch yet (and
OG> I'm going to make it) but the code is ready to be reused and it's used
OG> for a while as a part of my open-source project, sharehound
OG> (http://sharehound.sourceforge.net). The code can be now reached by a
OG> CVS browser, it's in 4 classes in subdirectories of
OG> http://sharehound.cvs.sourceforge.net/sharehound/jNetCrawler/src/java/org/apache/lucene/.

OG> They (both classes, as a part of sharehound.jar, and sources) can also
OG> be downloaded with the latest (1.1.3 alpha) sharehound release zip
OG> file.

OG> LazyCachingSortFactory class have an example of use in its header
OG> comments, I duplicate it here:

OG> /**
OG>  * Creates a Sort that doesn't use FieldCache and doesn't therefore
OG> load all the field values from the index while sorting.
OG>  * Instead it uses CachingIndexReader (via
OG> CachingDocFieldComparatorSource) to cache documents from which field values
OG>  * are fetched. If the caller Searcher is based on CachingIndexReader
OG> itself its document cache will be used here.
OG>  *
OG>  *
OG>  * An example of use:
OG>   ...
OG>   hits = getQueryHits(query, getSort(listSorting.getSortFieldName(), listSorting.isSortDescending()));
OG>   ...

OG>   public Sort getSort(String sortFieldName, boolean sortDescending) {
OG>     return LazyCachingSortFactory.create(sortFieldName, sortDescending);
OG>   }
OG>   ...
OG>   protected Hits getQueryHits(Query query, Sort sort) throws IOException {
OG>      IndexSearcher indexSearcher = new
OG> IndexSearcher(CachingIndexReader.decorateIfNeeded(IndexReader.open(getIndexDir())));
OG>      return indexSearcher.search(query, sort);
OG>   }

OG> */

OG> This solution does great work saving a memory and in case of
OG> relatively search resultsets it's almost as fast as the default
OG> implementation. Note that this solution is ready only for single-field
OG> sorting currently.

OG> Best regards,
OG> Artem

OG>> This is unlikely to work well/fast.  It will depend on the
OG>> size of the index (not in terms of the number of docs, but its
OG>> physical size), the number of queries/second and desired query
OG>> latency.  If you can wait 10 seconds to get a query and if only a
OG>> few queries are hitting the server at any one time, then you may
OG>> be Ok.  Having things be up to date with non-relevancy sorting
OG>> will be quite tough.  FieldCache will consume some RAM.  Warming
OG>> it up will take some number of seconds.  Re-opening an
OG>> IndexSearcher after index changes will also cost you a bit of time.

OG>> Consider a 64-bit server with more RAM that allowed larger
OG>> Java heaps, and try to fit your index into RAM.

OG>> Otis

OG>> ----- Original Message ----
OG>> From: Mark Miller <markrmiller@gmail.com>
OG>> To: java-user@lucene.apache.org
OG>> Sent: Saturday, August 12, 2006 7:45:15 PM
OG>> Subject: Re: 30 milllion+ docs on a single server

OG>> The single server is important because I think it will take a lot of
OG>> work to scale it to multiple servers. The index must allow for close to
OG>> real-time updates and additions. It must also remain searchable at all
OG>> times (other than than during the brief period of single updates and
OG>> additions). If it is easy to scale this to multiple servers please tell
OG>> me how.

OG>> - Mark
>>> Why is a single server so important?  I can scale horizontally much
>>> cheaper
>>> than I scale vertically.
>>>
>>>
>>>
>>> On 8/11/06, Mark Miller <markrmiller@gmail.com> wrote:
>>>>
>>>> I've made a nice little archive application with lucene. I made it to
>>>> handle our largest need: 2.5 million docs or so on a single server. Now
>>>> the powers that be say: lets use it for a 30+ million document archive
>>>> on a single server! (each doc size maybe 10k max...as small as a 1 or
>>>> 2k) Please tell me why we are in trouble...please tell me why we are
>>>> not. I have tested up to 2 million docs without much trouble but 30
>>>> million...the average search will include a sort on a field as
>>>> well...can I search 30+ million docs with a sort? Man am I worried about
>>>> that. Maybe the server will have 8 procs and 12 billion gigs of RAM.
>>>> Mabye. Even still, Tomcat seems to be able to launch with a max of 1.5
>>>> or 1.6 gig of Ram in Windows. What do you think? 30 million+ sounds like
>>>> too much of a load to me for a single server. Not that they care what I
>>>> think...I only wrote the thing (man I hate my job, offer me a new one :)
>>>> )...please...comments?
>>>>
>>>> Cheers,
>>>>
>>>> Miserable Mark
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>


OG>> ---------------------------------------------------------------------
OG>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
OG>> For additional commands, e-mail: java-user-help@lucene.apache.org





OG>> ---------------------------------------------------------------------
OG>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
OG>> For additional commands, e-mail: java-user-help@lucene.apache.org




OG> ===8<===========End of original message text===========






-- 
Best regards,
 Artem                            mailto:artvas@gmail.com
===8<===========End of original message text===========



-- 
Best regards,
 Artem                            mailto:artvas@gmail.com

------------36AE1563EAAE005
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------------36AE1563EAAE005--


From java-user-return-23770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 05:21:43 2006
Return-Path: <java-user-return-23770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20958 invoked from network); 5 Oct 2006 05:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 05:21:42 -0000
Received: (qmail 17675 invoked by uid 500); 5 Oct 2006 05:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17632 invoked by uid 500); 5 Oct 2006 05:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17621 invoked by uid 99); 5 Oct 2006 05:21:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 22:21:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.155] ([195.212.29.155:59645] helo=mtagate6.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C0/CD-20288-C5694254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 22:21:33 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id k955LSv2111962
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 05:21:28 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k955NdLU2977810
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 07:23:39 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k955LSEM017573
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 07:21:28 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k955LSrL017570
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 07:21:28 +0200
In-Reply-To: <Pine.LNX.4.58.0610042115240.28075@hal.rescomp.berkeley.edu>
Subject: Re: discontinuous range query
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF388E1ECA.C7037530-ON882571FE.001CB430-882571FE.001D4CDD@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 4 Oct 2006 21:20:02 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 05/10/2006 07:23:39
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>
> : The query you want is
> : name:[A TO C] name:[G TO K]
> : (each clause being SHOULD, or put another way, an implicit "OR" in
between.
> :
> : The problem may be how you analyze the name field... is it tokenized at
all?
> : If so, you might be matching on first, last, and middle names, and the
> : combination of everything may match most of your documents.
>
> also keep in mind that "C" is lexigraphicaly less then "Chris" so Chris
> doesn't fall in the range [A TO C].
>

Maybe worth to notice that when combined in a wider query, the (MUST) range
part should be 'grouped', as in:
    content:camera +(price:[102 TO 104] price:[105 TO 107])




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 06:27:42 2006
Return-Path: <java-user-return-23771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33748 invoked from network); 5 Oct 2006 06:27:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 06:27:41 -0000
Received: (qmail 64594 invoked by uid 500); 5 Oct 2006 06:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64563 invoked by uid 500); 5 Oct 2006 06:27:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64552 invoked by uid 99); 5 Oct 2006 06:27:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Oct 2006 23:27:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=MSGID_FROM_MTA_HEADER
Received: from [70.84.250.228] ([70.84.250.228:58131] helo=nix1.fastnix.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1E/4F-20288-0D5A4254 for <java-user@lucene.apache.org>; Wed, 04 Oct 2006 23:27:29 -0700
Message-ID: <1E.4F.20288.0D5A4254@idunn.apache.osuosl.org>
Received: from [134.159.98.226] (helo=youra9279112e3)
	by nix1.fastnix.com with esmtpa (Exim 4.52)
	id 1GVMhJ-0008PN-Jq
	for java-user@lucene.apache.org; Thu, 05 Oct 2006 11:57:21 +0530
From: "sachin" <sachin.khaire@noemacorp.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing In Lucene   
Date: Thu, 5 Oct 2006 11:56:51 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <E07627674982E445BBD8236E84A6A39805D780EB@ctsinpunsxua>
Thread-Index: AcbmyEagaImEKxzzT5eHnDJNXWGVVQBfrkVA
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nix1.fastnix.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - noemacorp.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am working on the Lucene... I have prepared the document about in-depth
indexing. Unfortunately I can't attach it to the mail due to site
constraint. But I can send it to your Personal Email ..

---
Sachin 

-----Original Message-----
From: Ajani, Akil (Cognizant) [mailto:Akil.Ajani@cognizant.com] 
Sent: Tuesday, October 03, 2006 2:15 PM
To: lucene-net-commits@incubator.apache.org;
lucene-net-dev@incubator.apache.org; lucene-net-user@incubator.apache.org
Cc: lucene-dev@jakarta.apache.org; lucene-user@jakarta.apache.org
Subject: Indexing In Lucene 


Hi,
      Can you tell me how indexing takes place in lucene(Depth).if
document has 1....n indices then which algorithm it uses,which
information retrival model it uses...







Thanks & Regards,

Akil Ajani

Cognizant Technology Solutions India Pvt. Ltd.


Plot # 26, Rajiv Gandhi Infotech Park, MIDC

Hinjewadi, Pune 411057

Tel: (91) (20) 40201100 ext 2825

Vnet: 22809

"Technical Skill is the mastery of complexity, while creativity is the
mastery of simplicity."






This e-mail and any files transmitted with it are for the sole use of the
intended recipient(s) and may contain confidential and privileged
information.
If you are not the intended recipient, please contact the sender by reply
e-mail and destroy all copies of the original message.

Any unauthorised review, use, disclosure, dissemination, forwarding,
printing or copying of this email or any action taken in reliance on this
e-mail is strictly

prohibited and may be unlawful.

  Visit us at http://www.cognizant.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 07:08:40 2006
Return-Path: <java-user-return-23772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41699 invoked from network); 5 Oct 2006 07:08:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 07:08:39 -0000
Received: (qmail 9979 invoked by uid 500); 5 Oct 2006 07:08:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9957 invoked by uid 500); 5 Oct 2006 07:08:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9472 invoked by uid 99); 5 Oct 2006 07:08:30 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 00:08:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.152] ([195.212.29.152:36730] helo=mtagate3.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 43/10-20288-95FA4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 00:08:11 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9577c66048418
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 07:07:38 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9579nS33268830
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 09:09:49 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9577csi025040
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 09:07:38 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9577cQR025037
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 09:07:38 +0200
In-Reply-To: <452476F6.2050405@sympatico.ca>
Subject: Re: Find if words are in the same phrase?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF1BA9CD6F.3DADB65E-ON882571FE.002456BA-882571FE.0027047F@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 4 Oct 2006 23:06:10 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 05/10/2006 09:09:49
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am not sure I understand what you are asking.

I assume you are aware of Lucene Proximity Search - e.g. "jakarta apache"~4
- see http://lucene.apache.org/java/docs/queryparsersyntax.html

Are you asking if it is possible to search for docs in which the gap
between the two words is exactly N, e.g. exactly 4? If so, this seems
equivalent to something like:

"jakarta apache"~4 AND NOT "jakarta apache"~3

Otherwise, could you explain a bit more - e.g. short sample content of a
doc that search should return and a doc that search should not return.

Hope this helps,
Doron

Michael Imbeault <michael.imbeault@sympatico.ca> wrote on 04/10/2006
20:07:34:
> Is it possible with Lucene to limit a proximity query to a phrase to
> determine if two words are in the same phrase? Along the same train of
> thoughts, is it possible to determine if two words in a same phrase are
> separated by a word, or a list of words? Like for example Virus (some
> other words) activate (some other words) cancer?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 07:24:14 2006
Return-Path: <java-user-return-23773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54058 invoked from network); 5 Oct 2006 07:24:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 07:24:13 -0000
Received: (qmail 32089 invoked by uid 500); 5 Oct 2006 07:24:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32062 invoked by uid 500); 5 Oct 2006 07:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32051 invoked by uid 99); 5 Oct 2006 07:24:06 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 00:24:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [129.206.100.212] ([129.206.100.212:41232] helo=relay.uni-heidelberg.de)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 03/50-20288-FF2B4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 00:23:56 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k957NLIS002516
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 09:23:21 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 558D68BB38
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 09:23:20 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 08904-06 for <java-user@lucene.apache.org>;
 Thu,  5 Oct 2006 09:23:19 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 3BFE98BB30
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 09:23:19 +0200 (CEST)
Message-ID: <4524B29C.3030202@uni-hd.de>
Date: Thu, 05 Oct 2006 09:22:04 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.7 (X11/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Fwd: Spam filter for lucene project]
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Rajiv,

perhaps captcha's will solve your problem:

http://en.wikipedia.org/wiki/CAPTCHA

many open-source PHP products are using this like phpmyfaq and phpBB.
So you can take a look at this code.

hth,
martin



-------- Original-Nachricht --------
Von: Rajiv Roopan <rajiv.roopan@gmail.com>
Betreff: Spam filter for lucene project
An: java-user@lucene.apache.org

Hello, I'm currently running a site which allows users to post. Lately posts
have been getting out of hand. I was wondering if anyone knows of an open
source spam filter that I can add to my project to scan the posts (which are
just plain text)  for spam?

thanks in advance.
Rajiv


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 08:08:56 2006
Return-Path: <java-user-return-23774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65323 invoked from network); 5 Oct 2006 08:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 08:08:56 -0000
Received: (qmail 78965 invoked by uid 500); 5 Oct 2006 08:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78931 invoked by uid 500); 5 Oct 2006 08:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78920 invoked by uid 99); 5 Oct 2006 08:08:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 01:08:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.18.148.14] ([195.18.148.14:34529] helo=bat-mail02.banetele.basefarm.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 40/01-20288-D7DB4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 01:08:37 -0700
Received: from [85.221.54.38] (port=15311 helo=dev02.tv2katalogen.no)
	by bat-mail02.banetele.basefarm.net with esmtp (Exim 4.63)
	(envelope-from <fb@mtouch.no>)
	id 1GVOGr-0003Lb-7J
	for java-user@lucene.apache.org; Thu, 05 Oct 2006 10:07:57 +0200
From: Frode Bjerkholt <fb@mtouch.no>
Organization: mTouch AS
To: java-user@lucene.apache.org
Subject: Different boost values for different terms in a field.
Date: Thu, 5 Oct 2006 10:10:43 +0200
User-Agent: KMail/1.9.1
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610051010.43200.fb@mtouch.no>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

My intention is to give different terms in a field different boost values.

The queries from a use perspective, will be one fulltext input field.

The following code illustrates this:

Field f1 = new Field("name", "John", Field.Store.NO, Field.Index.TOKENIZED);
Field f2 = new Field("name", "Doe", Field.Store.NO, Field.Index.TOKENIZED);

f1.setBoost(1.0f);
f2.setBoost(2.0f);

doc.add(f1);
doc.add(f2);

In the current version of Lucene, as far as I now, this does not work - 
Allthough it would have been a very powerful feature. 

The current solution is to make a firstname field and a lastname field, and 
then make a complex query like this:

Input: Eric Doe

(firstname:Eric OR lastname:Eric^2) AND (firstname:Doe OR lastname:Doe^2)

The performance of such a query is quite slow, and it becomes even worse when 
you have more than two fields and/or more words in the input string.

My questions:

1. Is there a better/faster solution to accomplish such a query?

2. Would it be possible to implement the described feature in a future version 
of Lucene?

-- 
Best Regards,

Frode

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 08:43:18 2006
Return-Path: <java-user-return-23775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77920 invoked from network); 5 Oct 2006 08:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 08:43:17 -0000
Received: (qmail 28481 invoked by uid 500); 5 Oct 2006 08:43:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28446 invoked by uid 500); 5 Oct 2006 08:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28429 invoked by uid 99); 5 Oct 2006 08:43:10 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 01:43:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:52148] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 67/71-20288-785C4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 01:43:01 -0700
Received: (qmail invoked by alias); 05 Oct 2006 08:41:44 -0000
Received: from host-245-34.ka-1.d697379.net (EHLO [192.168.100.124]) [213.30.245.34]
  by mail.gmx.net (mp043) with SMTP; 05 Oct 2006 10:41:44 +0200
X-Authenticated: #12436987
Message-ID: <4524C49E.50306@gmx.net>
Date: Thu, 05 Oct 2006 10:38:54 +0200
From: Aleksei Valikov <valikov@gmx.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS
References: <1cbd6f830610042119j5b9c75c7qa23f3b7de6e1ac3d@mail.gmail.com>
In-Reply-To: <1cbd6f830610042119j5b9c75c7qa23f3b7de6e1ac3d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.

> I have been reading the lists for couple of week now, and I noticed people
> asking about placing their indexes into a RDBMS. What is the advantage of
> that?
> 
> So far lucene was able to solve all my problems, but I am curious how else
> people are using it (especially with RDBMS).

Having an index in the DB makes it possible to join full-text queries against 
this index with some other structured queries against other table.

Here's a practical example. We have a data management system for managing 
geographic metadata. Documents that we manage (geometadata) have spatial extents 
(bounding boxes), temporal extents (time periods) and a lot of textual information.

Currently, complex queries like "contains 'water*', from 1998 till 2001, in area 
(5, 45, 15, 55)" can't be processed in the relational DB only or in Lucene index 
only. We have to make a relatively expensive union/join outside the Lucene and 
the RDB. Having Lucene index within the DB and Lucene query (re)formulatable in 
SQL would allow us performing the join inside the DB which is much more performant.

Bye.
/lexi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 09:01:02 2006
Return-Path: <java-user-return-23776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81795 invoked from network); 5 Oct 2006 09:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 09:01:02 -0000
Received: (qmail 48002 invoked by uid 500); 5 Oct 2006 09:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47966 invoked by uid 500); 5 Oct 2006 09:00:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47949 invoked by uid 99); 5 Oct 2006 09:00:55 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 02:00:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [216.93.161.132] ([216.93.161.132:37921] helo=mail1.zvents.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 88/B1-20288-0A9C4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 02:00:18 -0700
Received: from Oblong.zvents.com (c-24-5-125-51.hsd1.ca.comcast.net [24.5.125.51])
	by mail1.zvents.com (Postfix) with ESMTP id E9894317089
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 01:59:49 -0700 (PDT)
Message-Id: <6.2.3.4.0.20061005014029.01e100e8@worldware.com>
X-Mailer: QUALCOMM Windows Eudora Version 6.2.3.4
Date: Thu, 05 Oct 2006 01:59:42 -0700
To: java-user@lucene.apache.org
From: Tom Hill <lucene-list@zvents.com>
Subject: discontinuous range query
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi -

Thanks, Yonik, Chris and Doron for the quick responses.

Doron's comment about combining the queries was the key to what was 
causing me problems. I had indeed been combining with other queries, 
which results in 'extra' results being returned.

I've attached a sample program below that illustrates this, as it may 
save someone else some time. As you can see, if you don't group the 
SHOULD queries for the range under a MUST, you get more results back 
than I would expect.

It's clear that my problem here comes from a lack of understanding of 
the semantics of SHOULD, MUST, and MUST_NOT.

I haven't found a clear description of this (except for a brief 
comment here 
http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200408.mbox/%3C41267191.6060905@apache.org%3E). 
Most of the other descriptions I have found discuss it as if it they 
were boolean operators, which they aren't, quite.

Can someone explain to me what the semantics of SHOULD and MUST are, 
to the point that I could see from the explanation that
Query: +(name:[A TO C] name:[Q TO Z]) +PHB:NO
would produce the results that I wanted, and
Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
does not?

Or why
Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
returns different results than
Query: (name:[A TO C] name:[Q TO Z])
even though PHB is NO for all docs

Obviously, nesting makes it much harder (for me) to understand. What 
does it mean to nest a SHOULD nested in a MUST (nested in a ...).

Thanks again,

Tom




-----------------------------------------------------------Sample
import java.io.IOException;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.*;
import org.apache.lucene.index.*;
import org.apache.lucene.search.*;
import org.apache.lucene.store.*;

public class Should
{
         public static final String NAME_FIELD = "name";

         public static final String MANAGER_FIELD = "PHB";

         public static Document createDoc(String name, String manager)
         {
                 Document d = new Document();
                 d.add(new Field(NAME_FIELD, name, Field.Store.YES, 
Field.Index.UN_TOKENIZED));
                 d.add(new Field(MANAGER_FIELD, manager, 
Field.Store.YES, Field.Index.UN_TOKENIZED));
                 return d;
         }

         static BooleanQuery buildQuery(BooleanClause.Occur occur)
         {
                 BooleanQuery bq = new BooleanQuery();
                 Term lower;
                 Term upper;
                 lower = new Term(NAME_FIELD, "A");
                 upper = new Term(NAME_FIELD, "C");
                 bq.add(new RangeQuery(lower, upper, true), occur);
                 lower = new Term(NAME_FIELD, "Q");
                 upper = new Term(NAME_FIELD, "Z");
                 bq.add(new RangeQuery(lower, upper, true), occur);
                 return bq;
         }

         static BooleanQuery buildQuery2()
         {
                 BooleanQuery mainq = buildQuery(BooleanClause.Occur.SHOULD);
                 mainq.add(new TermQuery(new Term(MANAGER_FIELD, 
"NO")), BooleanClause.Occur.MUST);
                 return mainq;
         }

         static BooleanQuery buildQuery3(BooleanClause.Occur occur)
         {
                 BooleanQuery mainq = new BooleanQuery();
                 BooleanQuery subq = new BooleanQuery();
                 Term lower;
                 Term upper;
                 lower = new Term(NAME_FIELD, "A");
                 upper = new Term(NAME_FIELD, "C");
                 subq.add(new RangeQuery(lower, upper, true), 
BooleanClause.Occur.SHOULD);
                 lower = new Term(NAME_FIELD, "Q");
                 upper = new Term(NAME_FIELD, "Z");
                 subq.add(new RangeQuery(lower, upper, true), 
BooleanClause.Occur.SHOULD);
                 mainq.add(subq, occur);
                 mainq.add(new TermQuery(new Term(MANAGER_FIELD, 
"NO")), BooleanClause.Occur.MUST);
                 return mainq;
         }

         private static void runQuery(IndexSearcher is, Query q) 
throws IOException
         {
                 Hits hits;
                 System.out.println("Query: " + q);
                 hits = is.search(q);
                 System.out.println("Hits: " + hits.length());
                 for (int docNo = 0; docNo < hits.length(); docNo++)
                 {
                         System.out.println("DOC: " + hits.doc(docNo));
                 }
                 System.out.println();
         }

         public static void main(String[] args) throws Exception
         {
                 Directory dir = new RAMDirectory();
                 Analyzer analyzer = new StandardAnalyzer();
                 IndexWriter iw = new IndexWriter(dir, analyzer, true);
                 iw.addDocument(createDoc("Asok", "NO"));
                 iw.addDocument(createDoc("Dogbert", "NO"));
                 iw.addDocument(createDoc("Ratbert", "NO"));
                 iw.close();

                 IndexSearcher is = new IndexSearcher(dir);
                 Query q;
                 q = buildQuery(BooleanClause.Occur.SHOULD);
                 runQuery(is, q);
                 q = buildQuery(BooleanClause.Occur.MUST);
                 runQuery(is, q);
                 q = buildQuery2();
                 runQuery(is, q);
                 q = buildQuery3(BooleanClause.Occur.SHOULD);
                 runQuery(is, q);
                 q = buildQuery3(BooleanClause.Occur.MUST);
                 runQuery(is, q);
                 is.close();
         }
}
----------------Output (I trying to get two results back)
Query: name:[A TO C] name:[Q TO Z]
Hits: 2
DOC: Document<stored/uncompressed,indexed<name:Asok> 
stored/uncompressed,indexed<PHB:NO>>
DOC: Document<stored/uncompressed,indexed<name:Ratbert> 
stored/uncompressed,indexed<PHB:NO>>

Query: +name:[A TO C] +name:[Q TO Z]
Hits: 0

Query: name:[A TO C] name:[Q TO Z] +PHB:NO
Hits: 3
DOC: Document<stored/uncompressed,indexed<name:Asok> 
stored/uncompressed,indexed<PHB:NO>>
DOC: Document<stored/uncompressed,indexed<name:Ratbert> 
stored/uncompressed,indexed<PHB:NO>>
DOC: Document<stored/uncompressed,indexed<name:Dogbert> 
stored/uncompressed,indexed<PHB:NO>>

Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
Hits: 3
DOC: Document<stored/uncompressed,indexed<name:Asok> 
stored/uncompressed,indexed<PHB:NO>>
DOC: Document<stored/uncompressed,indexed<name:Ratbert> 
stored/uncompressed,indexed<PHB:NO>>
DOC: Document<stored/uncompressed,indexed<name:Dogbert> 
stored/uncompressed,indexed<PHB:NO>>

Query: +(name:[A TO C] name:[Q TO Z]) +PHB:NO
Hits: 2
DOC: Document<stored/uncompressed,indexed<name:Asok> 
stored/uncompressed,indexed<PHB:NO>>
DOC: Document<stored/uncompressed,indexed<name:Ratbert> 
stored/uncompressed,indexed<PHB:NO>>

------------------ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 09:16:43 2006
Return-Path: <java-user-return-23777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86021 invoked from network); 5 Oct 2006 09:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 09:16:43 -0000
Received: (qmail 72908 invoked by uid 500); 5 Oct 2006 09:16:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72885 invoked by uid 500); 5 Oct 2006 09:16:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72874 invoked by uid 99); 5 Oct 2006 09:16:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 02:16:36 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=hesnews@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:38093] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0C/E1-20288-B6DC4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 02:16:30 -0700
Received: by py-out-1112.google.com with SMTP id s49so551298pyc
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 02:15:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BPSWu5kRE2GxoB3iZMoxjoqAXPIOAtGUt7tlk7IwDC9XZdDvH9YPoVaPY+bsjY04I2ax30wblqTi/CgNuHpkvZU/1/0nB3TNvhsfetNKk1N39Xx/h9aMXmGUtuYfTgzzgh3HxAfnBFOVwaqtixCIErAxfHKU/nIpncqFarXibG4=
Received: by 10.65.23.15 with SMTP id a15mr1959355qbj;
        Thu, 05 Oct 2006 02:15:40 -0700 (PDT)
Received: by 10.64.125.18 with HTTP; Thu, 5 Oct 2006 02:15:40 -0700 (PDT)
Message-ID: <77a4819a0610050215y3df40f41k20c2594c1acc7d8c@mail.gmail.com>
Date: Thu, 5 Oct 2006 11:15:40 +0200
From: "Hes Siemelink" <hesnews@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
In-Reply-To: <77a4819a0610040503s605b9c2em8e422d890c860fd0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29379_23767704.1160039740166"
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
	 <452388B8.1050702@tejnora.cz>
	 <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>
	 <4523928F.60600@mikemccandless.com>
	 <77a4819a0610040418i716ca92bn12486a1a9aa5bcf6@mail.gmail.com>
	 <45239D30.2060204@mikemccandless.com>
	 <77a4819a0610040503s605b9c2em8e422d890c860fd0@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_29379_23767704.1160039740166
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Not making much progress, but there is one thing I found curious: very often
the file that can not be found is "_8km.fnm".
Is it possible to derive any information from this?

Cheers,

   Hes.

------=_Part_29379_23767704.1160039740166--

From java-user-return-23778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 10:01:01 2006
Return-Path: <java-user-return-23778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99813 invoked from network); 5 Oct 2006 10:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 10:01:00 -0000
Received: (qmail 41315 invoked by uid 500); 5 Oct 2006 10:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41157 invoked by uid 500); 5 Oct 2006 10:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41143 invoked by uid 99); 5 Oct 2006 10:00:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 03:00:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [69.55.225.129] ([69.55.225.129:33355] helo=ehatchersolutions.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BC/72-20288-667D4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 02:59:16 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B51A330EFCD3; Thu,  5 Oct 2006 05:58:10 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id F14D630EFCD3
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 05:58:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6.2.3.4.0.20061005014029.01e100e8@worldware.com>
References: <6.2.3.4.0.20061005014029.01e100e8@worldware.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <636E63DC-6E1C-4E5A-97E6-2F91A5221770@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: discontinuous range query
Date: Thu, 5 Oct 2006 05:58:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 5, 2006, at 4:59 AM, Tom Hill wrote:
> It's clear that my problem here comes from a lack of understanding  
> of the semantics of SHOULD, MUST, and MUST_NOT.
>
> I haven't found a clear description of this (except for a brief  
> comment here http://mail-archives.apache.org/mod_mbox/lucene-java- 
> dev/200408.mbox/%3C41267191.6060905@apache.org%3E). Most of the  
> other descriptions I have found discuss it as if it they were  
> boolean operators, which they aren't, quite.
>
> Can someone explain to me what the semantics of SHOULD and MUST  
> are, to the point that I could see from the explanation that
> Query: +(name:[A TO C] name:[Q TO Z]) +PHB:NO
> would produce the results that I wanted, and
> Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
> does not?

With the latter query, since you later said PHB is "NO" for all  
documents, you're getting all documents back regardless of the name  
field, because you didn't require (MUST) the first clause.   The  
first query is requiring that PHB:NO __AND__ the name is in those  
ranges.  The second query is requiring PHB:NO __OR__ the name is in  
those ranges.

> Or why
> Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO

Again, this one selects all documents regardless of the first SHOULD  
clause because PHB is "NO" for all documents and the first clause is  
a SHOULD, so it does not matter what it matches other than for  
ranking purposes.

> returns different results than
> Query: (name:[A TO C] name:[Q TO Z])
> even though PHB is NO for all docs

This is only selecting documents that match either of those ranges.

Thanks for submitting the code example to show exactly what you're  
doing.

> Obviously, nesting makes it much harder (for me) to understand.  
> What does it mean to nest a SHOULD nested in a MUST (nested in a ...).

+(name:A OR name:B) +PHB:NO

means that name must be A __OR__ B (has to be one or the other, or  
potentially both even), and PHB has to be "NO".

	Erik


>
> Thanks again,
>
> Tom
>
>
>
>
> -----------------------------------------------------------Sample
> import java.io.IOException;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.*;
> import org.apache.lucene.index.*;
> import org.apache.lucene.search.*;
> import org.apache.lucene.store.*;
>
> public class Should
> {
>         public static final String NAME_FIELD = "name";
>
>         public static final String MANAGER_FIELD = "PHB";
>
>         public static Document createDoc(String name, String manager)
>         {
>                 Document d = new Document();
>                 d.add(new Field(NAME_FIELD, name, Field.Store.YES,  
> Field.Index.UN_TOKENIZED));
>                 d.add(new Field(MANAGER_FIELD, manager,  
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>                 return d;
>         }
>
>         static BooleanQuery buildQuery(BooleanClause.Occur occur)
>         {
>                 BooleanQuery bq = new BooleanQuery();
>                 Term lower;
>                 Term upper;
>                 lower = new Term(NAME_FIELD, "A");
>                 upper = new Term(NAME_FIELD, "C");
>                 bq.add(new RangeQuery(lower, upper, true), occur);
>                 lower = new Term(NAME_FIELD, "Q");
>                 upper = new Term(NAME_FIELD, "Z");
>                 bq.add(new RangeQuery(lower, upper, true), occur);
>                 return bq;
>         }
>
>         static BooleanQuery buildQuery2()
>         {
>                 BooleanQuery mainq = buildQuery 
> (BooleanClause.Occur.SHOULD);
>                 mainq.add(new TermQuery(new Term(MANAGER_FIELD,  
> "NO")), BooleanClause.Occur.MUST);
>                 return mainq;
>         }
>
>         static BooleanQuery buildQuery3(BooleanClause.Occur occur)
>         {
>                 BooleanQuery mainq = new BooleanQuery();
>                 BooleanQuery subq = new BooleanQuery();
>                 Term lower;
>                 Term upper;
>                 lower = new Term(NAME_FIELD, "A");
>                 upper = new Term(NAME_FIELD, "C");
>                 subq.add(new RangeQuery(lower, upper, true),  
> BooleanClause.Occur.SHOULD);
>                 lower = new Term(NAME_FIELD, "Q");
>                 upper = new Term(NAME_FIELD, "Z");
>                 subq.add(new RangeQuery(lower, upper, true),  
> BooleanClause.Occur.SHOULD);
>                 mainq.add(subq, occur);
>                 mainq.add(new TermQuery(new Term(MANAGER_FIELD,  
> "NO")), BooleanClause.Occur.MUST);
>                 return mainq;
>         }
>
>         private static void runQuery(IndexSearcher is, Query q)  
> throws IOException
>         {
>                 Hits hits;
>                 System.out.println("Query: " + q);
>                 hits = is.search(q);
>                 System.out.println("Hits: " + hits.length());
>                 for (int docNo = 0; docNo < hits.length(); docNo++)
>                 {
>                         System.out.println("DOC: " + hits.doc(docNo));
>                 }
>                 System.out.println();
>         }
>
>         public static void main(String[] args) throws Exception
>         {
>                 Directory dir = new RAMDirectory();
>                 Analyzer analyzer = new StandardAnalyzer();
>                 IndexWriter iw = new IndexWriter(dir, analyzer, true);
>                 iw.addDocument(createDoc("Asok", "NO"));
>                 iw.addDocument(createDoc("Dogbert", "NO"));
>                 iw.addDocument(createDoc("Ratbert", "NO"));
>                 iw.close();
>
>                 IndexSearcher is = new IndexSearcher(dir);
>                 Query q;
>                 q = buildQuery(BooleanClause.Occur.SHOULD);
>                 runQuery(is, q);
>                 q = buildQuery(BooleanClause.Occur.MUST);
>                 runQuery(is, q);
>                 q = buildQuery2();
>                 runQuery(is, q);
>                 q = buildQuery3(BooleanClause.Occur.SHOULD);
>                 runQuery(is, q);
>                 q = buildQuery3(BooleanClause.Occur.MUST);
>                 runQuery(is, q);
>                 is.close();
>         }
> }
> ----------------Output (I trying to get two results back)
> Query: name:[A TO C] name:[Q TO Z]
> Hits: 2
> DOC: Document<stored/uncompressed,indexed<name:Asok> stored/ 
> uncompressed,indexed<PHB:NO>>
> DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/ 
> uncompressed,indexed<PHB:NO>>
>
> Query: +name:[A TO C] +name:[Q TO Z]
> Hits: 0
>
> Query: name:[A TO C] name:[Q TO Z] +PHB:NO
> Hits: 3
> DOC: Document<stored/uncompressed,indexed<name:Asok> stored/ 
> uncompressed,indexed<PHB:NO>>
> DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/ 
> uncompressed,indexed<PHB:NO>>
> DOC: Document<stored/uncompressed,indexed<name:Dogbert> stored/ 
> uncompressed,indexed<PHB:NO>>
>
> Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
> Hits: 3
> DOC: Document<stored/uncompressed,indexed<name:Asok> stored/ 
> uncompressed,indexed<PHB:NO>>
> DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/ 
> uncompressed,indexed<PHB:NO>>
> DOC: Document<stored/uncompressed,indexed<name:Dogbert> stored/ 
> uncompressed,indexed<PHB:NO>>
>
> Query: +(name:[A TO C] name:[Q TO Z]) +PHB:NO
> Hits: 2
> DOC: Document<stored/uncompressed,indexed<name:Asok> stored/ 
> uncompressed,indexed<PHB:NO>>
> DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/ 
> uncompressed,indexed<PHB:NO>>
>
> ------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 12:51:10 2006
Return-Path: <java-user-return-23779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51532 invoked from network); 5 Oct 2006 12:51:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 12:51:10 -0000
Received: (qmail 89430 invoked by uid 500); 5 Oct 2006 12:51:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89408 invoked by uid 500); 5 Oct 2006 12:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89397 invoked by uid 99); 5 Oct 2006 12:51:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 05:51:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [202.162.240.7] ([202.162.240.7:58297] helo=lvs2.netcore.co.in)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0A/94-20288-09FF4254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 05:50:29 -0700
Received: from uucp3.netcore.co.in (uucp3.netcore.co.in [202.162.229.13])
	by lvs2.netcore.co.in (Postfix) with ESMTP id 8761334E5A8
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 18:08:35 +0530 (IST)
Received: from uucp1.netcore.co.in (unknown [192.168.2.1])
	by uucp3.netcore.co.in (Postfix) with ESMTP id C8C343B893
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 18:08:34 +0530 (IST)
Received: by uucp1.netcore.co.in (Postfix, from userid 10)
	id E0E448233; Thu,  5 Oct 2006 18:08:34 +0530 (IST)
Received: from [192.168.70.9] (unknown [192.168.70.9])
	by ho.netcore.co.in (Postfix) with ESMTP id 8D0A7834373
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 18:20:49 +0530 (IST)
Message-ID: <4524FD0D.9060509@netcore.co.in>
Date: Thu, 05 Oct 2006 18:09:41 +0530
From: Amit Soni <amit_soni@netcore.co.in>
Reply-To: amit_soni@netcore.co.in
Organization: netCORE Solutions
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: sort ordering
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-MailServ-MailFilter-MailScanner-Information: Please contact the ISP for more information
X-MailServ-MailFilter-MailScanner: Found to be clean
X-MailScanner-From: amit_soni@netcore.co.in
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I have been using Lucene from last few days. Right now i am reading some 
records from the db then convert in Document of lucene and then adds 
that document in lucene index. But in my record i have one field which 
is created_date and i want to search for given query in created_date 
order. So is it possible to search in date order. If any one of you have 
some idea regarding this then please let me know.

Thanks,
Amit Soni

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 13:14:29 2006
Return-Path: <java-user-return-23780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58510 invoked from network); 5 Oct 2006 13:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 13:14:29 -0000
Received: (qmail 35473 invoked by uid 500); 5 Oct 2006 13:14:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35430 invoked by uid 500); 5 Oct 2006 13:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35415 invoked by uid 99); 5 Oct 2006 13:14:21 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 06:14:21 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.177] ([64.233.166.177:30776] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FC/D4-20288-91505254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 06:14:05 -0700
Received: by py-out-1112.google.com with SMTP id s49so618183pyc
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 06:12:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ewy7l+fo9A9yeTAe9QhJg9jN/cijvLkV30JZORedTI1qU9bNr5VUMD98vKOjVrnqT+OfShcFDquiHjVyBxleHxubFkuso9g2IflHFPhQSX2p6O474sSBz3P46mb9mwASEweP1EdVEbQkQWEHwzRehw/a7SuIwqk0qLDD4x9dMYQ=
Received: by 10.35.99.17 with SMTP id b17mr3552509pym;
        Thu, 05 Oct 2006 06:12:34 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Thu, 5 Oct 2006 06:12:33 -0700 (PDT)
Message-ID: <359a92830610050612i2dfc3beas426a16a62c49a026@mail.gmail.com>
Date: Thu, 5 Oct 2006 09:12:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, amit_soni@netcore.co.in
Subject: Re: sort ordering
In-Reply-To: <4524FD0D.9060509@netcore.co.in>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10017_3866413.1160053954935"
References: <4524FD0D.9060509@netcore.co.in>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10017_3866413.1160053954935
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Search the mail archives for "date" and "sort" and you'll get many, many
responses. The short form is look at the DateTools class, and also look at
the Sort class.

Be aware that there are several issues regarding *ranges* of dates if you
have a need to search over, say, "all dates from 20060101 to 20061010" for
instance. You want to be mindful of the resolution of your dates.

But, as I said, you'll get lots and lots of information if you search the
list archive. There's also explications of this in Lucene In Action.

Best
Erick

On 10/5/06, Amit Soni <amit_soni@netcore.co.in> wrote:
>
> Hi all,
>
> I have been using Lucene from last few days. Right now i am reading some
> records from the db then convert in Document of lucene and then adds
> that document in lucene index. But in my record i have one field which
> is created_date and i want to search for given query in created_date
> order. So is it possible to search in date order. If any one of you have
> some idea regarding this then please let me know.
>
> Thanks,
> Amit Soni
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10017_3866413.1160053954935--

From java-user-return-23781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 13:21:32 2006
Return-Path: <java-user-return-23781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66593 invoked from network); 5 Oct 2006 13:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 13:21:32 -0000
Received: (qmail 49407 invoked by uid 500); 5 Oct 2006 13:21:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49152 invoked by uid 500); 5 Oct 2006 13:21:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49125 invoked by uid 99); 5 Oct 2006 13:21:23 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 06:21:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [66.173.110.23] ([66.173.110.23:28405] helo=mailgw.postbulletin.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0F/E4-20288-9A605254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 06:20:48 -0700
Received: from TS18 [10.117.240.254] by mailgw.postbulletin.com with ESMTP
  (SMTPD32-8.05) id A6403F860066; Thu, 05 Oct 2006 08:18:56 -0500
From: "Paul Snyder" <psnyder@postbulletin.com>
To: <java-user@lucene.apache.org>
Subject: RE: Advantage of putting lucene index in RDBMS
Date: Thu, 5 Oct 2006 08:18:53 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <4524C49E.50306@gmx.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcboWk1o0mWNhhYaTxy0Rt/FtV0nnAAJYKMQ
Message-Id: <200610050818750.SM02632@TS18>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Aleksei, can you point me to a document detailing this procedure with
examples?  If not, would you consider creating one?  I am particularly
interested in what prerequisite steps are needed to perform a Lucene query
within SQL (if I understand correctly what you are doing).

-----Original Message-----
From: Aleksei Valikov [mailto:valikov@gmx.net] 
Sent: Thursday, October 05, 2006 3:39 AM
To: java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS

Hi.

> I have been reading the lists for couple of week now, and I noticed 
> people asking about placing their indexes into a RDBMS. What is the 
> advantage of that?
> 
> So far lucene was able to solve all my problems, but I am curious how 
> else people are using it (especially with RDBMS).

Having an index in the DB makes it possible to join full-text queries
against this index with some other structured queries against other table.

Here's a practical example. We have a data management system for managing
geographic metadata. Documents that we manage (geometadata) have spatial
extents (bounding boxes), temporal extents (time periods) and a lot of
textual information.

Currently, complex queries like "contains 'water*', from 1998 till 2001, in
area (5, 45, 15, 55)" can't be processed in the relational DB only or in
Lucene index only. We have to make a relatively expensive union/join outside
the Lucene and the RDB. Having Lucene index within the DB and Lucene query
(re)formulatable in SQL would allow us performing the join inside the DB
which is much more performant.

Bye.
/lexi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 13:32:36 2006
Return-Path: <java-user-return-23782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71624 invoked from network); 5 Oct 2006 13:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 13:32:36 -0000
Received: (qmail 77460 invoked by uid 500); 5 Oct 2006 13:32:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77432 invoked by uid 500); 5 Oct 2006 13:32:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77421 invoked by uid 99); 5 Oct 2006 13:32:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 06:32:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
Received: from [217.15.245.75] ([217.15.245.75:55532] helo=post01.avanza.se)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 81/15-20288-64905254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 06:31:55 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id E48E5746D8
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 15:30:59 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E882.A88C8814"
Subject: Sorting on dates using long
Date: Thu, 5 Oct 2006 15:32:09 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BE35@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting on dates using long
Thread-Index: AcbogCcf0Eu8KLBVRE29WNY548hXTwAAnXwQ
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E882.A88C8814
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,
I am trying to get sort by date to work. The dates are of form =
yyyyMMddhhmm and it seems that sort sees them as Integers and discards =
the last four numbers since an integer isn't large enough. I tried using =
SortField.STRING instead but then constantrangequery breaks =
(date:[200501010101 TO 200601010101] returns 0 hits). Is it possible to =
sort using a long or are there any other solutions ? I would like to =
avoid splitting the date into several fields by other reasons.
=20
--regards
=20
=20

------_=_NextPart_001_01C6E882.A88C8814--

From java-user-return-23783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 13:44:52 2006
Return-Path: <java-user-return-23783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76117 invoked from network); 5 Oct 2006 13:44:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 13:44:52 -0000
Received: (qmail 2083 invoked by uid 500); 5 Oct 2006 13:44:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2010 invoked by uid 500); 5 Oct 2006 13:44:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1953 invoked by uid 99); 5 Oct 2006 13:44:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 06:44:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [205.207.78.3] ([205.207.78.3:26363] helo=tormail01.cihi.ca)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C6/35-20288-32C05254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 06:44:18 -0700
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 2c0d_04a232e6_5478_11db_8648_003048245df9;
	Thu, 05 Oct 2006 09:47:44 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Advantage of putting lucene index in RDBMS
Date: Thu, 5 Oct 2006 09:41:10 -0400
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F072E7930@tormail01.cihi.ca>
In-Reply-To: <200610050818750.SM02632@TS18>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Advantage of putting lucene index in RDBMS
Thread-Index: AcboWk1o0mWNhhYaTxy0Rt/FtV0nnAAJYKMQAAB2ssA=
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As one of the people who asked about placing indeces into RDBMS, I was
primarily interested in just storing index in the RDBMS (basically,
storing the structures described on this page
http://lucene.apache.org/java/docs/fileformats.html in the relational
DB). The main reason is NOT to be able to perform some magic with
joining Lucene and 'pure DB query' results (which, actually, IS useful
in some curcumstances, but don't really see a problem of doing it in
Java after quering DB and Lucene), but rather avoid the cost of
reindexing and associated problems in complex enterprise environments.

There is a wide range of applications like YellowPages, eshops, etc,
which already store indexed data from which their site is built. Each DB
update can be a very complex process (pulling data from different
sources, building views, restructuring DB for faster read access, etc).
If all that is required is to provide 'smarter' and more efficent search
within already existing DB, it only makes sense to try to 'plug' Lucene
engine to _already available_ structures.

Yet another advantage of storing index in the DB is its 'managability'
and 'debugabiliy' (nice word!). Through there is Luke, etc,
administrators in big companies do not want to learn many new tools and
having smth already familiar to deal with can sometimes be a good
argument in favor of product adoption. (BTW, Compass, as Aleksei
mentioned, can be the answer to this prayer - meant to check it out long
time ago, but haven't got around to it yet. Also, it seems like the
project is half-dead. I wonder if it's true...)

Again, not really sure whether that's feasible, because Lucene does
store quite a bit of other info together with index (and inverted
index), but sometimes that's an option.

Vlad

PS: not really sure what Aleksei had in mind. From my point of view the
only way to 'perform both DB and Lucene query' on the DB side is to
either 'reimplement' Lucene engine in the DB (eg, rewrite it in PL/SQL,
etc) OR perform Java calls from DB (eg, through Java Stored Procedures
in case of Oracle).

-----Original Message-----
From: Paul Snyder [mailto:psnyder@postbulletin.com]=20
Sent: Thursday, October 05, 2006 9:19 AM
To: java-user@lucene.apache.org
Subject: RE: Advantage of putting lucene index in RDBMS

Aleksei, can you point me to a document detailing this procedure with
examples?  If not, would you consider creating one?  I am particularly
interested in what prerequisite steps are needed to perform a Lucene
query within SQL (if I understand correctly what you are doing).

-----Original Message-----
From: Aleksei Valikov [mailto:valikov@gmx.net]
Sent: Thursday, October 05, 2006 3:39 AM
To: java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS

Hi.

> I have been reading the lists for couple of week now, and I noticed=20
> people asking about placing their indexes into a RDBMS. What is the=20
> advantage of that?
>=20
> So far lucene was able to solve all my problems, but I am curious how=20
> else people are using it (especially with RDBMS).

Having an index in the DB makes it possible to join full-text queries
against this index with some other structured queries against other
table.

Here's a practical example. We have a data management system for
managing geographic metadata. Documents that we manage (geometadata)
have spatial extents (bounding boxes), temporal extents (time periods)
and a lot of textual information.

Currently, complex queries like "contains 'water*', from 1998 till 2001,
in area (5, 45, 15, 55)" can't be processed in the relational DB only or
in Lucene index only. We have to make a relatively expensive union/join
outside the Lucene and the RDB. Having Lucene index within the DB and
Lucene query (re)formulatable in SQL would allow us performing the join
inside the DB which is much more performant.

Bye.
/lexi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 14:06:06 2006
Return-Path: <java-user-return-23784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84220 invoked from network); 5 Oct 2006 14:06:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 14:06:06 -0000
Received: (qmail 68857 invoked by uid 500); 5 Oct 2006 14:05:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68834 invoked by uid 500); 5 Oct 2006 14:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68823 invoked by uid 99); 5 Oct 2006 14:05:57 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 07:05:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [66.173.110.23] ([66.173.110.23:29293] helo=mailgw.postbulletin.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 1B/75-20288-F2115254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 07:05:46 -0700
Received: from TS18 [10.117.240.254] by mailgw.postbulletin.com with ESMTP
  (SMTPD32-8.05) id AF2F3F9C0066; Thu, 05 Oct 2006 08:57:03 -0500
From: "Paul Snyder" <psnyder@postbulletin.com>
To: <java-user@lucene.apache.org>
Subject: RE: Advantage of putting lucene index in RDBMS
Date: Thu, 5 Oct 2006 08:57:00 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F072E7930@tormail01.cihi.ca>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcboWk1o0mWNhhYaTxy0Rt/FtV0nnAAJYKMQAAB2ssAAAOMMoA==
Message-Id: <20061005085778.SM02632@TS18>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Re-reading Aleksei's post, I have to ask, is it really not
possible/practical to index the database metadata (such as date, area and
schema/table/primary-key info) as Lucene document fields?  I am having
difficulty conceiving a scenario when this would not be a practical option.

-----Original Message-----
From: Vladimir Olenin [mailto:VOlenin@cihi.ca] 
Sent: Thursday, October 05, 2006 8:41 AM
To: java-user@lucene.apache.org
Subject: RE: Advantage of putting lucene index in RDBMS

As one of the people who asked about placing indeces into RDBMS, I was
primarily interested in just storing index in the RDBMS (basically, storing
the structures described on this page
http://lucene.apache.org/java/docs/fileformats.html in the relational DB).
The main reason is NOT to be able to perform some magic with joining Lucene
and 'pure DB query' results (which, actually, IS useful in some
curcumstances, but don't really see a problem of doing it in Java after
quering DB and Lucene), but rather avoid the cost of reindexing and
associated problems in complex enterprise environments.

There is a wide range of applications like YellowPages, eshops, etc, which
already store indexed data from which their site is built. Each DB update
can be a very complex process (pulling data from different sources, building
views, restructuring DB for faster read access, etc).
If all that is required is to provide 'smarter' and more efficent search
within already existing DB, it only makes sense to try to 'plug' Lucene
engine to _already available_ structures.

Yet another advantage of storing index in the DB is its 'managability'
and 'debugabiliy' (nice word!). Through there is Luke, etc, administrators
in big companies do not want to learn many new tools and having smth already
familiar to deal with can sometimes be a good argument in favor of product
adoption. (BTW, Compass, as Aleksei mentioned, can be the answer to this
prayer - meant to check it out long time ago, but haven't got around to it
yet. Also, it seems like the project is half-dead. I wonder if it's true...)

Again, not really sure whether that's feasible, because Lucene does store
quite a bit of other info together with index (and inverted index), but
sometimes that's an option.

Vlad

PS: not really sure what Aleksei had in mind. From my point of view the only
way to 'perform both DB and Lucene query' on the DB side is to either
'reimplement' Lucene engine in the DB (eg, rewrite it in PL/SQL,
etc) OR perform Java calls from DB (eg, through Java Stored Procedures in
case of Oracle).

-----Original Message-----
From: Paul Snyder [mailto:psnyder@postbulletin.com]
Sent: Thursday, October 05, 2006 9:19 AM
To: java-user@lucene.apache.org
Subject: RE: Advantage of putting lucene index in RDBMS

Aleksei, can you point me to a document detailing this procedure with
examples?  If not, would you consider creating one?  I am particularly
interested in what prerequisite steps are needed to perform a Lucene query
within SQL (if I understand correctly what you are doing).

-----Original Message-----
From: Aleksei Valikov [mailto:valikov@gmx.net]
Sent: Thursday, October 05, 2006 3:39 AM
To: java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS

Hi.

> I have been reading the lists for couple of week now, and I noticed 
> people asking about placing their indexes into a RDBMS. What is the 
> advantage of that?
> 
> So far lucene was able to solve all my problems, but I am curious how 
> else people are using it (especially with RDBMS).

Having an index in the DB makes it possible to join full-text queries
against this index with some other structured queries against other table.

Here's a practical example. We have a data management system for managing
geographic metadata. Documents that we manage (geometadata) have spatial
extents (bounding boxes), temporal extents (time periods) and a lot of
textual information.

Currently, complex queries like "contains 'water*', from 1998 till 2001, in
area (5, 45, 15, 55)" can't be processed in the relational DB only or in
Lucene index only. We have to make a relatively expensive union/join outside
the Lucene and the RDB. Having Lucene index within the DB and Lucene query
(re)formulatable in SQL would allow us performing the join inside the DB
which is much more performant.

Bye.
/lexi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 14:53:45 2006
Return-Path: <java-user-return-23785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5116 invoked from network); 5 Oct 2006 14:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 14:53:45 -0000
Received: (qmail 81536 invoked by uid 500); 5 Oct 2006 14:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81499 invoked by uid 500); 5 Oct 2006 14:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81488 invoked by uid 99); 5 Oct 2006 14:53:36 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 07:53:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:40521] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B7/06-20288-45C15254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 07:53:17 -0700
Received: (qmail invoked by alias); 05 Oct 2006 14:52:04 -0000
Received: from host-245-34.ka-1.d697379.net (EHLO [192.168.100.124]) [213.30.245.34]
  by mail.gmx.net (mp044) with SMTP; 05 Oct 2006 16:52:04 +0200
X-Authenticated: #12436987
Message-ID: <45251B69.6010908@gmx.net>
Date: Thu, 05 Oct 2006 16:49:13 +0200
From: Aleksei Valikov <valikov@gmx.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS
References: <200610050818750.SM02632@TS18>
In-Reply-To: <200610050818750.SM02632@TS18>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.

> 
>>>I have been reading the lists for couple of week now, and I noticed 
>>>people asking about placing their indexes into a RDBMS. What is the 
>>>advantage of that?
>>>
>>>So far lucene was able to solve all my problems, but I am curious how 
>>>else people are using it (especially with RDBMS).
> 
> 
>> Having an index in the DB makes it possible to join full-text queries
>> against this index with some other structured queries against other table.
>> 
>> Here's a practical example. We have a data management system for managing
>> geographic metadata. Documents that we manage (geometadata) have spatial
>> extents (bounding boxes), temporal extents (time periods) and a lot of
>> textual information.
> 
>> Currently, complex queries like "contains 'water*', from 1998 till 2001, in
>> area (5, 45, 15, 55)" can't be processed in the relational DB only or in
>> Lucene index only. We have to make a relatively expensive union/join outside
>> the Lucene and the RDB. Having Lucene index within the DB and Lucene query
>> (re)formulatable in SQL would allow us performing the join inside the DB
>> which is much more performant.

 > Aleksei, can you point me to a document detailing this procedure with
 > examples?  If not, would you consider creating one?  I am particularly
 > interested in what prerequisite steps are needed to perform a Lucene query
 > within SQL (if I understand correctly what you are doing).

I may be expressed myself wrong.

This idea with rewriting Lucene indexes in SQL is only an idea. There is no way 
to do this currently. I just answer the theoretical question of "what the 
advantage would be".

Bye.
/lexi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 15:07:07 2006
Return-Path: <java-user-return-23786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9257 invoked from network); 5 Oct 2006 15:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 15:07:07 -0000
Received: (qmail 5179 invoked by uid 500); 5 Oct 2006 15:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5148 invoked by uid 500); 5 Oct 2006 15:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5137 invoked by uid 99); 5 Oct 2006 15:07:00 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 08:06:59 -0700
Received: by nf-out-0910.google.com with SMTP id b2so787597nfe
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 08:06:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=FzXcMOa6dDXvYk/ZuZkm08f8TILCiIdl+HRfV+nGtOYLzCVfQtYjkzMUkm8SGe/u7cQ6ni8etf9LO/H8VJV/MQm0/ZYcyrauHQt2DQ6W/mmLg64Mc/f6HBOom0O0PrnpN+HrglE1n66seg/J30qe/CnqAmBwM3+XMa5IxMFv11s=
Received: by 10.82.127.15 with SMTP id z15mr108649buc;
        Thu, 05 Oct 2006 08:06:34 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Thu, 5 Oct 2006 08:06:29 -0700 (PDT)
Message-ID: <c68e39170610050806r43e24548h5cfecc5176e6f74@mail.gmail.com>
Date: Thu, 5 Oct 2006 11:06:29 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Sorting on dates using long
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BE35@ad01.aza.se>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6F4F5B8F19AA954DB9002305E4D6D14901BE35@ad01.aza.se>
X-Google-Sender-Auth: 02b5c6c7ec4df0a7
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/5/06, Bj=F6rn Ekengren <bjorn.ekengren@avanza.se> wrote:
> I am trying to get sort by date to work. The dates are of form yyyyMMddhh=
mm and it seems that sort sees them as Integers and discards the last four =
numbers since an integer isn't large enough. I tried using SortField.STRING=
 instead but then constantrangequery breaks (date:[200501010101 TO 20060101=
0101] returns 0 hits).

Using SortField.STRING should work, both with sorting and range
queries via RangeFilter or ConstantScoreRangeQuery.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 15:08:05 2006
Return-Path: <java-user-return-23787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9521 invoked from network); 5 Oct 2006 15:08:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 15:08:05 -0000
Received: (qmail 7594 invoked by uid 500); 5 Oct 2006 15:07:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7566 invoked by uid 500); 5 Oct 2006 15:07:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7555 invoked by uid 99); 5 Oct 2006 15:07:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 08:07:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:49354] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 43/36-20288-9AF15254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 08:07:28 -0700
Received: (qmail invoked by alias); 05 Oct 2006 15:00:07 -0000
Received: from host-245-34.ka-1.d697379.net (EHLO [192.168.100.124]) [213.30.245.34]
  by mail.gmx.net (mp042) with SMTP; 05 Oct 2006 17:00:07 +0200
X-Authenticated: #12436987
Message-ID: <45251D4C.9030707@gmx.net>
Date: Thu, 05 Oct 2006 16:57:16 +0200
From: Aleksei Valikov <valikov@gmx.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS
References: <373399D6389D8C42B4EAD9BE2B6B5C5F072E7930@tormail01.cihi.ca>
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F072E7930@tormail01.cihi.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.

> As one of the people who asked about placing indeces into RDBMS, I was
> primarily interested in just storing index in the RDBMS (basically,
> storing the structures described on this page
> http://lucene.apache.org/java/docs/fileformats.html in the relational
> DB). The main reason is NOT to be able to perform some magic with
> joining Lucene and 'pure DB query' results (which, actually, IS useful
> in some curcumstances, but don't really see a problem of doing it in
> Java after quering DB and Lucene), but rather avoid the cost of
> reindexing and associated problems in complex enterprise environments.

There no problem joining/intersecting Lucene/DB results in the Java layer apart 
from performance. Imagine you have 10k results from Lucene and 10k results from 
the RDB and you only need results 20...40 ordered by 'name' field, ascending 
(which is the usual case). An sql query with join and limit/offset would be much 
faster than joining 20k entries in Java.

> Yet another advantage of storing index in the DB is its 'managability'
> and 'debugabiliy' (nice word!). Through there is Luke, etc,
> administrators in big companies do not want to learn many new tools and
> having smth already familiar to deal with can sometimes be a good
> argument in favor of product adoption. (BTW, Compass, as Aleksei
> mentioned, can be the answer to this prayer - meant to check it out long
> time ago, but haven't got around to it yet. Also, it seems like the
> project is half-dead. I wonder if it's true...)

Compass is a lively and active project, we successfully use it in production.

Bye.
/lexi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 15:20:47 2006
Return-Path: <java-user-return-23788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14549 invoked from network); 5 Oct 2006 15:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 15:20:46 -0000
Received: (qmail 36745 invoked by uid 500); 5 Oct 2006 15:20:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36709 invoked by uid 500); 5 Oct 2006 15:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36698 invoked by uid 99); 5 Oct 2006 15:20:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 08:20:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [66.111.4.25] ([66.111.4.25:43162] helo=out1.smtp.messagingengine.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 43/20-04543-2C225254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 08:20:36 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id C3084DAFF06
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 11:20:31 -0400 (EDT)
Received: from heartbeat1.internal ([10.202.2.160])
  by frontend3.internal (MEProxy); Thu, 05 Oct 2006 11:20:34 -0400
X-Sasl-enc: eHr3jtKGX1vvkk9GHECzyxW5bIkdtde4/WA5bBGbB6LH 1160061633
Received: from [10.17.4.90] (pool-71-162-112-30.bstnma.fios.verizon.net [71.162.112.30])
	by mail.messagingengine.com (Postfix) with ESMTP id E6E7B6EFB
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 11:20:33 -0400 (EDT)
Message-ID: <452522B9.3020803@mikemccandless.com>
Date: Thu, 05 Oct 2006 11:20:25 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>	 <452388B8.1050702@tejnora.cz>	 <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>	 <4523928F.60600@mikemccandless.com>	 <77a4819a0610040418i716ca92bn12486a1a9aa5bcf6@mail.gmail.com>	 <45239D30.2060204@mikemccandless.com>	 <77a4819a0610040503s605b9c2em8e422d890c860fd0@mail.gmail.com> <77a4819a0610050215y3df40f41k20c2594c1acc7d8c@mail.gmail.com>
In-Reply-To: <77a4819a0610050215y3df40f41k20c2594c1acc7d8c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hes Siemelink wrote:
> Not making much progress, but there is one thing I found curious: very 
> often
> the file that can not be found is "_8km.fnm".
> Is it possible to derive any information from this?

Hmmm, that's interesting.  Segment numbers are just integers encoded
in base 36, ie, using the digits 0-9 and a-z.  So, mapping 8km back to
base 10 = 11110.

Each time a new segment is created, that number is incremented.  A new
segment is created for each document added (at least in the released
versions of Lucene -- this changed recently on the svn HEAD = nightly
builds), and then also for each merge that's done.

Are you using the default merge settings for Lucene?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 15:29:31 2006
Return-Path: <java-user-return-23789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17896 invoked from network); 5 Oct 2006 15:29:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 15:29:30 -0000
Received: (qmail 61584 invoked by uid 500); 5 Oct 2006 15:29:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61369 invoked by uid 500); 5 Oct 2006 15:29:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61358 invoked by uid 99); 5 Oct 2006 15:29:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 08:29:24 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=hesnews@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.162.200] ([64.233.162.200:9138] helo=nz-out-0102.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E6/60-04543-0D425254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 08:29:21 -0700
Received: by nz-out-0102.google.com with SMTP id z6so177634nzd
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 08:29:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KxKLRjglrAXLaVuaMiT+1U0SWx1W/TB7g43op+CMjBfSjr6++c9V3b6caY6nUqkZPPkoFLxoetPdvzVhNDDyPA6VnpreIxl+SuyLdw34/6+n1AntKYnJ2YQp8jB7V1uVWK/SCHXvCDzKjJbhqPsBjQ22wqGhW0b+BX/ZtXp6Re8=
Received: by 10.65.138.4 with SMTP id q4mr2497102qbn;
        Thu, 05 Oct 2006 08:29:17 -0700 (PDT)
Received: by 10.64.125.18 with HTTP; Thu, 5 Oct 2006 08:29:17 -0700 (PDT)
Message-ID: <77a4819a0610050829v5fa98fdl9c5adb97e4e7defb@mail.gmail.com>
Date: Thu, 5 Oct 2006 17:29:17 +0200
From: "Hes Siemelink" <hesnews@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sudden FileNotFoundException
In-Reply-To: <452522B9.3020803@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36102_20604833.1160062157179"
References: <77a4819a0610040220v71509d96lac427042783f27fe@mail.gmail.com>
	 <452388B8.1050702@tejnora.cz>
	 <77a4819a0610040334y172547dfu5cb8c330608a2b05@mail.gmail.com>
	 <4523928F.60600@mikemccandless.com>
	 <77a4819a0610040418i716ca92bn12486a1a9aa5bcf6@mail.gmail.com>
	 <45239D30.2060204@mikemccandless.com>
	 <77a4819a0610040503s605b9c2em8e422d890c860fd0@mail.gmail.com>
	 <77a4819a0610050215y3df40f41k20c2594c1acc7d8c@mail.gmail.com>
	 <452522B9.3020803@mikemccandless.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_36102_20604833.1160062157179
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, I use default settings.

Cheers,

   Hes.

On 10/5/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Hes Siemelink wrote:
> > Not making much progress, but there is one thing I found curious: very
> > often
> > the file that can not be found is "_8km.fnm".
> > Is it possible to derive any information from this?
>
> Hmmm, that's interesting.  Segment numbers are just integers encoded
> in base 36, ie, using the digits 0-9 and a-z.  So, mapping 8km back to
> base 10 = 11110.
>
> Each time a new segment is created, that number is incremented.  A new
> segment is created for each document added (at least in the released
> versions of Lucene -- this changed recently on the svn HEAD = nightly
> builds), and then also for each merge that's done.
>
> Are you using the default merge settings for Lucene?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36102_20604833.1160062157179--

From java-user-return-23790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 18:02:17 2006
Return-Path: <java-user-return-23790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66663 invoked from network); 5 Oct 2006 18:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 18:02:17 -0000
Received: (qmail 64275 invoked by uid 500); 5 Oct 2006 18:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64242 invoked by uid 500); 5 Oct 2006 18:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64231 invoked by uid 99); 5 Oct 2006 18:02:08 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 11:02:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.151] ([195.212.29.151:38270] helo=mtagate2.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CF/56-04543-06845254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 11:01:06 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id k95I11qL035266
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 18:01:01 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k95I3C97946200
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 20:03:13 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k95I10SG006532
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 20:01:00 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k95I10ES006527
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 20:01:00 +0200
In-Reply-To: <636E63DC-6E1C-4E5A-97E6-2F91A5221770@ehatchersolutions.com>
Subject: Re: discontinuous range query
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF97FD16CF.4829A8F8-ON882571FE.005DB189-882571FE.0062CD58@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 5 Oct 2006 09:59:10 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 05/10/2006 20:03:12
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I sometimes find it helpful to think of the query parts as applying
'filtering' logic, helping to understand how query components play together
in determining the acceptable set of results (mostly ignoring scoring here,
which would usually sort the candidate results).

Consider a set of 10 douments with a single field having the following
simplistic content:
  doc 0  content:  a z 0
  doc 1  content:  a z 1
  doc 2  content:  a z 2
  doc 3  content:  a z 3
  doc 4  content:  a z 4
  doc 5  content:  b z 5
  doc 6  content:  b z 6
  doc 7  content:  b z 7
  doc 8  content:  b z 8
  doc 9  content:  b z 9

And consider the following queries on that single field:

query = 3
Only 3 is a valid result.

query = +3
Only docs containing 3 are valid candidates (docs not containing 3 are not
valid candidates).
So, again, only 3 is a valid result.

query = 2 3
Only docs containing any of 2 3 are valid candidates.
So both 2 and 3 are valid results.

query = 2 +3
Only docs containing 3 are valid candidates (docs not containing 3 are not
valid).
Docs that contain 2, are valid candidates (but only if they also contain
3).
So only 3 is a valid result.

query = 2 6 b
Only docs containing at least one of 2 6 b are valid candidates.
So valid results are: 2 5 6 7 8 9

query = 2 6 +b
Only docs containing b are valid candidates (docs not containing b are not
valid).
Docs containing 2, 6, or both are valid candidates (but ony if they also
contain b).
So valid results are: 5 6 7 8 9

As you can now see, for any query with <should> as well as <must/not>
parts:
  query = <should-part> +<must-part>
  query = <should-part> -<must-not-part>
The <should part> only affects the scoring of the valid documents. It does
not define the set of valid documents. In other words, documents that do
not meet the <should-part> can find their way to the query result set. On
the other hand, documents that do not meet the <must-part> or the
<must-not-part> can never find their way to the result set.

To complete the picture, maybe worth noting is that (1) the <must-part>
also contributes to the score of result documents; (2) filters can be used
for having a <must-logic> without affecting scoring; and (3)
<must-not-part> does not affect the scoring of result documents
(obviously).

The examples in your test case would be:

query =  3 4 5 6
query = (3 4 5 6)
Docs containing any of 3 4 5 6 are valid.
So valid results are 3 4 5 6.

query = +(3 4 5 6)
Docs containing any of 3 4 5 6 are valid (and only these docs are valid).
So again valid results are 3 4 5 6.

query = (3 4 5 6) +x
Docs containing any of 3 4 5 6 are valid.
Only docs containing x are valid candidates (docs not containing x are not
valid).
So valid results are all docs: 0 1 2 3 4 5 6 7 8 9

query = +(3 4 5 6) +x
Only Docs containing any of 3 4 5 6 are valid (docs not containing any of 3
4 5 6 are not valid).
Only docs containing x are valid candidates (docs not containing x are not
valid).
So valid results are: 3 4 5 6

query = +(3 4 5 6) +b
Only Docs containing any of 3 4 5 6 are valid (docs not containing any of 3
4 5 6 are not valid).
Only docs containing b are valid candidates (docs not containing b are not
valid).
So valid results are: 5 6

- Doron

Erik Hatcher <erik@ehatchersolutions.com> wrote on 05/10/2006 02:58:02:

>
> On Oct 5, 2006, at 4:59 AM, Tom Hill wrote:
> > It's clear that my problem here comes from a lack of understanding
> > of the semantics of SHOULD, MUST, and MUST_NOT.
> >
> > I haven't found a clear description of this (except for a brief
> > comment here http://mail-archives.apache.org/mod_mbox/lucene-java-
> > dev/200408.mbox/%3C41267191.6060905@apache.org%3E). Most of the
> > other descriptions I have found discuss it as if it they were
> > boolean operators, which they aren't, quite.
> >
> > Can someone explain to me what the semantics of SHOULD and MUST
> > are, to the point that I could see from the explanation that
> > Query: +(name:[A TO C] name:[Q TO Z]) +PHB:NO
> > would produce the results that I wanted, and
> > Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
> > does not?
>
> With the latter query, since you later said PHB is "NO" for all
> documents, you're getting all documents back regardless of the name
> field, because you didn't require (MUST) the first clause.   The
> first query is requiring that PHB:NO __AND__ the name is in those
> ranges.  The second query is requiring PHB:NO __OR__ the name is in
> those ranges.
>
> > Or why
> > Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
>
> Again, this one selects all documents regardless of the first SHOULD
> clause because PHB is "NO" for all documents and the first clause is
> a SHOULD, so it does not matter what it matches other than for
> ranking purposes.
>
> > returns different results than
> > Query: (name:[A TO C] name:[Q TO Z])
> > even though PHB is NO for all docs
>
> This is only selecting documents that match either of those ranges.
>
> Thanks for submitting the code example to show exactly what you're
> doing.
>
> > Obviously, nesting makes it much harder (for me) to understand.
> > What does it mean to nest a SHOULD nested in a MUST (nested in a ...).
>
> +(name:A OR name:B) +PHB:NO
>
> means that name must be A __OR__ B (has to be one or the other, or
> potentially both even), and PHB has to be "NO".
>
>    Erik
>
>
> >
> > Thanks again,
> >
> > Tom
> >
> >
> >
> >
> > -----------------------------------------------------------Sample
> > import java.io.IOException;
> >
> > import org.apache.lucene.analysis.Analyzer;
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > import org.apache.lucene.document.*;
> > import org.apache.lucene.index.*;
> > import org.apache.lucene.search.*;
> > import org.apache.lucene.store.*;
> >
> > public class Should
> > {
> >         public static final String NAME_FIELD = "name";
> >
> >         public static final String MANAGER_FIELD = "PHB";
> >
> >         public static Document createDoc(String name, String manager)
> >         {
> >                 Document d = new Document();
> >                 d.add(new Field(NAME_FIELD, name, Field.Store.YES,
> > Field.Index.UN_TOKENIZED));
> >                 d.add(new Field(MANAGER_FIELD, manager,
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> >                 return d;
> >         }
> >
> >         static BooleanQuery buildQuery(BooleanClause.Occur occur)
> >         {
> >                 BooleanQuery bq = new BooleanQuery();
> >                 Term lower;
> >                 Term upper;
> >                 lower = new Term(NAME_FIELD, "A");
> >                 upper = new Term(NAME_FIELD, "C");
> >                 bq.add(new RangeQuery(lower, upper, true), occur);
> >                 lower = new Term(NAME_FIELD, "Q");
> >                 upper = new Term(NAME_FIELD, "Z");
> >                 bq.add(new RangeQuery(lower, upper, true), occur);
> >                 return bq;
> >         }
> >
> >         static BooleanQuery buildQuery2()
> >         {
> >                 BooleanQuery mainq = buildQuery
> > (BooleanClause.Occur.SHOULD);
> >                 mainq.add(new TermQuery(new Term(MANAGER_FIELD,
> > "NO")), BooleanClause.Occur.MUST);
> >                 return mainq;
> >         }
> >
> >         static BooleanQuery buildQuery3(BooleanClause.Occur occur)
> >         {
> >                 BooleanQuery mainq = new BooleanQuery();
> >                 BooleanQuery subq = new BooleanQuery();
> >                 Term lower;
> >                 Term upper;
> >                 lower = new Term(NAME_FIELD, "A");
> >                 upper = new Term(NAME_FIELD, "C");
> >                 subq.add(new RangeQuery(lower, upper, true),
> > BooleanClause.Occur.SHOULD);
> >                 lower = new Term(NAME_FIELD, "Q");
> >                 upper = new Term(NAME_FIELD, "Z");
> >                 subq.add(new RangeQuery(lower, upper, true),
> > BooleanClause.Occur.SHOULD);
> >                 mainq.add(subq, occur);
> >                 mainq.add(new TermQuery(new Term(MANAGER_FIELD,
> > "NO")), BooleanClause.Occur.MUST);
> >                 return mainq;
> >         }
> >
> >         private static void runQuery(IndexSearcher is, Query q)
> > throws IOException
> >         {
> >                 Hits hits;
> >                 System.out.println("Query: " + q);
> >                 hits = is.search(q);
> >                 System.out.println("Hits: " + hits.length());
> >                 for (int docNo = 0; docNo < hits.length(); docNo++)
> >                 {
> >                         System.out.println("DOC: " + hits.doc(docNo));
> >                 }
> >                 System.out.println();
> >         }
> >
> >         public static void main(String[] args) throws Exception
> >         {
> >                 Directory dir = new RAMDirectory();
> >                 Analyzer analyzer = new StandardAnalyzer();
> >                 IndexWriter iw = new IndexWriter(dir, analyzer, true);
> >                 iw.addDocument(createDoc("Asok", "NO"));
> >                 iw.addDocument(createDoc("Dogbert", "NO"));
> >                 iw.addDocument(createDoc("Ratbert", "NO"));
> >                 iw.close();
> >
> >                 IndexSearcher is = new IndexSearcher(dir);
> >                 Query q;
> >                 q = buildQuery(BooleanClause.Occur.SHOULD);
> >                 runQuery(is, q);
> >                 q = buildQuery(BooleanClause.Occur.MUST);
> >                 runQuery(is, q);
> >                 q = buildQuery2();
> >                 runQuery(is, q);
> >                 q = buildQuery3(BooleanClause.Occur.SHOULD);
> >                 runQuery(is, q);
> >                 q = buildQuery3(BooleanClause.Occur.MUST);
> >                 runQuery(is, q);
> >                 is.close();
> >         }
> > }
> > ----------------Output (I trying to get two results back)
> > Query: name:[A TO C] name:[Q TO Z]
> > Hits: 2
> > DOC: Document<stored/uncompressed,indexed<name:Asok> stored/
> > uncompressed,indexed<PHB:NO>>
> > DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/
> > uncompressed,indexed<PHB:NO>>
> >
> > Query: +name:[A TO C] +name:[Q TO Z]
> > Hits: 0
> >
> > Query: name:[A TO C] name:[Q TO Z] +PHB:NO
> > Hits: 3
> > DOC: Document<stored/uncompressed,indexed<name:Asok> stored/
> > uncompressed,indexed<PHB:NO>>
> > DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/
> > uncompressed,indexed<PHB:NO>>
> > DOC: Document<stored/uncompressed,indexed<name:Dogbert> stored/
> > uncompressed,indexed<PHB:NO>>
> >
> > Query: (name:[A TO C] name:[Q TO Z]) +PHB:NO
> > Hits: 3
> > DOC: Document<stored/uncompressed,indexed<name:Asok> stored/
> > uncompressed,indexed<PHB:NO>>
> > DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/
> > uncompressed,indexed<PHB:NO>>
> > DOC: Document<stored/uncompressed,indexed<name:Dogbert> stored/
> > uncompressed,indexed<PHB:NO>>
> >
> > Query: +(name:[A TO C] name:[Q TO Z]) +PHB:NO
> > Hits: 2
> > DOC: Document<stored/uncompressed,indexed<name:Asok> stored/
> > uncompressed,indexed<PHB:NO>>
> > DOC: Document<stored/uncompressed,indexed<name:Ratbert> stored/
> > uncompressed,indexed<PHB:NO>>
> >
> > ------------------
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 19:13:27 2006
Return-Path: <java-user-return-23791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98345 invoked from network); 5 Oct 2006 19:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 19:13:27 -0000
Received: (qmail 95595 invoked by uid 500); 5 Oct 2006 19:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95483 invoked by uid 500); 5 Oct 2006 19:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95472 invoked by uid 99); 5 Oct 2006 19:13:20 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 12:13:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:33747] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CB/38-04543-B4955254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 12:13:17 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C8B555B770; Thu,  5 Oct 2006 12:13:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BDD977F403
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 12:13:12 -0700 (PDT)
Date: Thu, 5 Oct 2006 12:13:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: discontinuous range query
In-Reply-To: <6.2.3.4.0.20061005014029.01e100e8@worldware.com>
Message-ID: <Pine.LNX.4.58.0610051200290.29946@hal.rescomp.berkeley.edu>
References: <6.2.3.4.0.20061005014029.01e100e8@worldware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: It's clear that my problem here comes from a lack of understanding of
: the semantics of SHOULD, MUST, and MUST_NOT.
:
: I haven't found a clear description of this (except for a brief
: comment here
: http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200408.mbox/%3C41267191.6060905@apache.org%3E).
: Most of the other descriptions I have found discuss it as if it they
: were boolean operators, which they aren't, quite.

there are most certianly not boolean operators ... the fact that
BooleanQuery has "Boolean" in it's name, and the fact that QueryParser
*tries* to support boolean operators like "AND" and "OR" are the top two
gripes i have about Lucene.

I hadn't seen that post by Doug that you linked ot, but it is dead on.

In my opinion, the best way to think about MUST, MUST_NOT, and SHOULD is
to start by forcing yourself to remember that a query is not just about
selecting matchings -- it's about scoring those matches.

The second important thing when looking at "nested" BooleanQueries, is
that you have to view each level as it's own entity.

when you have something like:   (A +B) -(C D -E) +(F -G)

look at each of the "second level" queries in isolation:

  A +B   ... docs must match B, if they match A their scores are boosted
  C D -E ... docs can not match E, must match either C or D
             (docs will score better if they match both C and D)
  F -G   ... docs can not match G, which means that to match this query
             they must match F

now consider the outermost query as an abstraction:  X -Y +Z
   ... docs can not match Y
   ... docs matching X will get a score boost
   ... docs must match Z

Putting all of that information back together we see that B isn't really
mandatory in the "big picture", the only thing that's really mandatory is
F ... matching B is just required in order to get a score contribution
from A, etc...

Looking at the Explanation toString for any complex struction of
BooleanQueries should help with all of this ... you'll get moreinfo then
you want, but not more then you can use.

(and fortunately: Explanations work even if the document doesn't match,
and they explain why a document doesn't match)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 19:23:17 2006
Return-Path: <java-user-return-23792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8288 invoked from network); 5 Oct 2006 19:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 19:23:17 -0000
Received: (qmail 16651 invoked by uid 500); 5 Oct 2006 19:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16390 invoked by uid 500); 5 Oct 2006 19:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16379 invoked by uid 99); 5 Oct 2006 19:23:10 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 12:23:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:38671] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 22/88-04543-B9B55254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 12:23:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4A3605B770; Thu,  5 Oct 2006 12:23:05 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3EF597F403
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 12:23:05 -0700 (PDT)
Date: Thu, 5 Oct 2006 12:23:05 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Find if words are in the same phrase?
In-Reply-To: <452476F6.2050405@sympatico.ca>
Message-ID: <Pine.LNX.4.58.0610051219240.29946@hal.rescomp.berkeley.edu>
References: <452476F6.2050405@sympatico.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) search the list archives for: sentence paragraph
and you'll find some discussions on generating position gaps in your
analyzer to help esure that sloppy phrase queries are confined to a single
sentence, or paragraph, or page. AND/OR using marker terms to denote the
boundaries of various parts of documents for hte same purposes.

2) assuming you mean in your second question that you have a specific list
of words you are interested in when you said "some other words" take a
look at MultiPhraseQuery and/or SpanNearQuery containing SpanOrQueries.


: Date: Wed, 04 Oct 2006 23:07:34 -0400
: From: Michael Imbeault <michael.imbeault@sympatico.ca>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Find if words are in the same phrase?
:
: Is it possible with Lucene to limit a proximity query to a phrase to
: determine if two words are in the same phrase? Along the same train of
: thoughts, is it possible to determine if two words in a same phrase are
: separated by a word, or a list of words? Like for example Virus (some
: other words) activate (some other words) cancer?
:
: Thanks,
:
: --
: Michael Imbeault
: CHUL Research Center (CHUQ)
: 2705 boul. Laurier
: Ste-Foy, QC, Canada, G1V 4G2
: Tel: (418) 654-2705, Fax: (418) 654-2212
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 19:45:01 2006
Return-Path: <java-user-return-23793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16177 invoked from network); 5 Oct 2006 19:45:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 19:45:01 -0000
Received: (qmail 59446 invoked by uid 500); 5 Oct 2006 19:44:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58986 invoked by uid 500); 5 Oct 2006 19:44:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58975 invoked by uid 99); 5 Oct 2006 19:44:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 12:44:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [195.212.29.153] ([195.212.29.153:1993] helo=mtagate4.de.ibm.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B8/19-04543-0B065254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 12:44:49 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k95JijXY036890
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 19:44:45 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k95JkvBE3215454
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 21:46:57 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k95JijYe024049
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 21:44:45 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k95JiiO6024046
	for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 21:44:44 +0200
In-Reply-To: <200610051010.43200.fb@mtouch.no>
Subject: Re: Different boost values for different terms in a field.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF2983F2B7.D3BC1356-ON882571FE.006A24DE-882571FE.006C53DD@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 5 Oct 2006 11:43:13 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 05/10/2006 21:46:56
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Frode Bjerkholt <fb@mtouch.no> wrote on 05/10/2006 01:10:43:
> My intention is to give different terms in a field different boost
values.
> The queries from a use perspective, will be one fulltext input field.
> The following code illustrates this:
>
> Field f1 = new Field("name", "John", Field.Store.NO,
Field.Index.TOKENIZED);
> Field f2 = new Field("name", "Doe", Field.Store.NO,
Field.Index.TOKENIZED);
>
> f1.setBoost(1.0f);
> f2.setBoost(2.0f);
>
> doc.add(f1);
> doc.add(f2);
>
> In the current version of Lucene, as far as I now, this does not work -
> Allthough it would have been a very powerful feature.

To support this, additional info would need to be stored along with each
index token - i.e. along with each occurrence of each index term in each
indexed document. There are discussions on adding (in a future "flexible"
index structure) token "payloads". If/when this is added, and if this is
flexible and general as desired, such boost per token can be stored there
and then used at scoring. For more info on this search for "payloads" in
the dev mailing list.

Notice however that even so, without separating to distinct fields, when
searching for "Doe" - both its occurrences as "name" and as "last name"
would be collected, and there would be no way to look for only matches of
it as, say, "last name".

>
> The current solution is to make a firstname field and a lastname field,
and
> then make a complex query like this:
>
> Input: Eric Doe
>
> (firstname:Eric OR lastname:Eric^2) AND (firstname:Doe OR lastname:Doe^2)
>
> The performance of such a query is quite slow, and it becomes even worse
when
> you have more than two fields and/or more words in the input string.
>
> My questions:
>
> 1. Is there a better/faster solution to accomplish such a query?
>

I think one way (which I don't like but you may think otherwise) would be
to insert two tokens for a boosted one at indexing time, so that your
indexing code would look like:
  Field f1 = new Field("mixed", "John Doe", Store.NO, TOKENIZED);
  doc.add(f1);
  Field f2 = new Field("mixed", "Doe", Store.NO, TOKENIZED);
  doc.add(f2);
This would enlarge the index.
You might need to work the gap (between f1 and f2) to avoid false phrase
matches.
But your query should be simple and faster.

> Field f2 = new Field("name", "Doe", Field.Store.NO,
Field.Index.TOKENIZED);

> 2. Would it be possible to implement the described feature in a
> future version
> of Lucene?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 20:17:59 2006
Return-Path: <java-user-return-23794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37272 invoked from network); 5 Oct 2006 20:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 20:17:59 -0000
Received: (qmail 41035 invoked by uid 500); 5 Oct 2006 20:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40967 invoked by uid 500); 5 Oct 2006 20:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40956 invoked by uid 99); 5 Oct 2006 20:17:50 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 13:17:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
Received: from [130.57.169.10] ([130.57.169.10:43759] helo=peabody.ximian.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 84/0A-04543-B6865254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 13:17:48 -0700
Received: (qmail 13531 invoked from network); 5 Oct 2006 20:17:43 -0000
Received: from localhost (HELO posthaste.boston.ximian.com) (joe@127.0.0.1)
  by localhost with SMTP; 5 Oct 2006 20:17:43 -0000
Subject: Mutliple indexes or many small documents?
From: Joe Shaw <joeshaw@novell.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 05 Oct 2006 16:17:49 -0400
Message-Id: <1160079469.4961.28.camel@posthaste.boston.ximian.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm in the process of moving away from Lucene-as-the-data-store to using
Lucene solely for text indexing and storing a lot of (frequently
changing) metadata in a database.

At present, we have two indexes which we search.  The primary index
contains the static data -- data that changes only when the content of
the underlying file changes; this is the expensive stuff to index.  The
secondary index contains the mutable data, which are often small
properties that are easily changed by the user.  Right now we search the
two indexes and combine the results (we don't use ParallelReader because
this code predates its creation).

Even once we move to the database, we'll still have mutable data which
we may want to index as text.  One possibility is to keep the basic
design the same: have two indexes, one of which contains data more
likely to be changed and just recreate that document.  The other
approach, which I am leaning more towards, is creating a separate
document essentially for each field.  That way, when a single field
changes, we only have to reindex one very small portion.

If I go with the latter approach, it will at least triple the number of
documents in the index, although the content of those documents will be
substantially less.  I can also do this in one index and not search
indexes ParallelReader-style.  What are people's gut feelings on how
this approach will impact the indexing and search performance in terms
of both speed and memory used?

Thanks,
Joe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 21:53:06 2006
Return-Path: <java-user-return-23795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66293 invoked from network); 5 Oct 2006 21:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 21:53:06 -0000
Received: (qmail 97946 invoked by uid 500); 5 Oct 2006 21:53:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97913 invoked by uid 500); 5 Oct 2006 21:52:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97900 invoked by uid 99); 5 Oct 2006 21:52:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 14:52:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:48719] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D9/FB-04543-8BE75254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 14:52:56 -0700
Received: (qmail invoked by alias); 05 Oct 2006 21:52:53 -0000
Received: from xdsl-84-44-231-59.netcologne.de (EHLO [192.168.1.28]) [84.44.231.59]
  by mail.gmx.net (mp032) with SMTP; 05 Oct 2006 23:52:53 +0200
X-Authenticated: #28177402
Message-ID: <45257EBF.9090003@gmx.net>
Date: Thu, 05 Oct 2006 23:53:03 +0200
From: Jan Pieper <j-pieper@gmx.net>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Problem with Field.Text()
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I hope now I am in the right mailinglist. In the -dev mailinglist Steven
Parkes said, that I have to change this:

 > Field.Text(String, String);

to

 > Field.Text(String, String, Field.Store.YES, Field.Index.TOKENIZED);

But it seems that there isnt such a method declaration. Where is the 
mistake?

-- Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 21:58:57 2006
Return-Path: <java-user-return-23796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67440 invoked from network); 5 Oct 2006 21:58:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 21:58:57 -0000
Received: (qmail 5272 invoked by uid 500); 5 Oct 2006 21:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5240 invoked by uid 500); 5 Oct 2006 21:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5229 invoked by uid 99); 5 Oct 2006 21:58:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 14:58:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [198.144.201.51] ([198.144.201.51:59381] helo=esseff.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E6/1C-04543-61085254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 14:58:48 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id B3B913D0F2F
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 14:59:54 -0700 (PDT)
X-Quarantine-ID: <Kgzpsq5Nsz0e>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Kgzpsq5Nsz0e for <java-user@lucene.apache.org>;
	Thu,  5 Oct 2006 14:59:53 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id B1EC93D0F04
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 14:59:53 -0700 (PDT)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problem with Field.Text()
Content-class: urn:content-classes:message
Date: Thu, 5 Oct 2006 14:58:42 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E3252224@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem with Field.Text()
Thread-Index: AcboyKRHsiW2UQz9TfKCtj7HkxURQwAAK10Q
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Blah. Sorry for the typo. Get rid of the .Text:

Field(String, String, Field.Store.YES, Field.Index.TOKENIZED);

-----Original Message-----
From: Jan Pieper [mailto:j-pieper@gmx.net]=20
Sent: Thursday, October 05, 2006 2:53 PM
To: java-user@lucene.apache.org
Subject: Problem with Field.Text()

I hope now I am in the right mailinglist. In the -dev mailinglist Steven
Parkes said, that I have to change this:

 > Field.Text(String, String);

to

 > Field.Text(String, String, Field.Store.YES, Field.Index.TOKENIZED);

But it seems that there isnt such a method declaration. Where is the=20
mistake?

-- Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 22:06:18 2006
Return-Path: <java-user-return-23797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68711 invoked from network); 5 Oct 2006 22:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 22:06:18 -0000
Received: (qmail 16198 invoked by uid 500); 5 Oct 2006 22:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16169 invoked by uid 500); 5 Oct 2006 22:06:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16158 invoked by uid 99); 5 Oct 2006 22:06:12 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 15:06:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:58160] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 72/4C-04543-FC185254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 15:06:09 -0700
Received: (qmail invoked by alias); 05 Oct 2006 22:06:04 -0000
Received: from xdsl-84-44-231-59.netcologne.de (EHLO [192.168.1.28]) [84.44.231.59]
  by mail.gmx.net (mp035) with SMTP; 06 Oct 2006 00:06:04 +0200
X-Authenticated: #28177402
Message-ID: <452581D9.1020204@gmx.net>
Date: Fri, 06 Oct 2006 00:06:17 +0200
From: Jan Pieper <j-pieper@gmx.net>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem with Field.Text()
References: <392521EA2692A2418DF48C331E61E3252224@professorville.windows.esseff.org>
In-Reply-To: <392521EA2692A2418DF48C331E61E3252224@professorville.windows.esseff.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No it is not your fault, it is mine, but it also does not function. My 
compiler
gives me this error message:

--------------------------------------------------------------------------------
cannot find symbol:
method Field(
    java.lang.String,
    java.lang.String,
    org.apache.lucene.document.Field.Store,
    org.apache.lucene.document.Field.Index
);
--------------------------------------------------------------------------------

I found the declaration in the docs but i does not function. I do not 
know why.
I downloaded the actual stable version: 2.0.0.

-- Jan


> Blah. Sorry for the typo. Get rid of the .Text:
>
> Field(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>
> -----Original Message-----
> From: Jan Pieper [mailto:j-pieper@gmx.net] 
> Sent: Thursday, October 05, 2006 2:53 PM
> To: java-user@lucene.apache.org
> Subject: Problem with Field.Text()
>
> I hope now I am in the right mailinglist. In the -dev mailinglist Steven
> Parkes said, that I have to change this:
>
>  > Field.Text(String, String);
>
> to
>
>  > Field.Text(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>
> But it seems that there isnt such a method declaration. Where is the 
> mistake?
>
> -- Jan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 22:11:37 2006
Return-Path: <java-user-return-23798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69965 invoked from network); 5 Oct 2006 22:11:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 22:11:36 -0000
Received: (qmail 21425 invoked by uid 500); 5 Oct 2006 22:11:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21406 invoked by uid 500); 5 Oct 2006 22:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21395 invoked by uid 99); 5 Oct 2006 22:11:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 15:11:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [198.144.201.51] ([198.144.201.51:45408] helo=esseff.org)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C8/5C-04543-D0385254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 15:11:26 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 0C23E3D0F3B
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 15:12:33 -0700 (PDT)
X-Quarantine-ID: <g-El39yF5isE>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id g-El39yF5isE for <java-user@lucene.apache.org>;
	Thu,  5 Oct 2006 15:12:31 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 98C113D0F01
	for <java-user@lucene.apache.org>; Thu,  5 Oct 2006 15:12:31 -0700 (PDT)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problem with Field.Text()
Content-class: urn:content-classes:message
Date: Thu, 5 Oct 2006 15:11:20 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <392521EA2692A2418DF48C331E61E3252225@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem with Field.Text()
Thread-Index: Acboyn/xCxlk7KhcRAGxIx50NPsF3wAADdhA
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Do you have the appropriate imports?

Look at IndexFiles.java in src/demo/org/apache/lucene/demo. It uses this
call for adding two fields. You should be able to build this with "ant
compile-demo". That should help get you started.

-----Original Message-----
From: Jan Pieper [mailto:j-pieper@gmx.net]=20
Sent: Thursday, October 05, 2006 3:06 PM
To: java-user@lucene.apache.org
Subject: Re: Problem with Field.Text()

No it is not your fault, it is mine, but it also does not function. My=20
compiler
gives me this error message:

------------------------------------------------------------------------
--------
cannot find symbol:
method Field(
    java.lang.String,
    java.lang.String,
    org.apache.lucene.document.Field.Store,
    org.apache.lucene.document.Field.Index
);
------------------------------------------------------------------------
--------

I found the declaration in the docs but i does not function. I do not=20
know why.
I downloaded the actual stable version: 2.0.0.

-- Jan


> Blah. Sorry for the typo. Get rid of the .Text:
>
> Field(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>
> -----Original Message-----
> From: Jan Pieper [mailto:j-pieper@gmx.net]=20
> Sent: Thursday, October 05, 2006 2:53 PM
> To: java-user@lucene.apache.org
> Subject: Problem with Field.Text()
>
> I hope now I am in the right mailinglist. In the -dev mailinglist
Steven
> Parkes said, that I have to change this:
>
>  > Field.Text(String, String);
>
> to
>
>  > Field.Text(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>
> But it seems that there isnt such a method declaration. Where is the=20
> mistake?
>
> -- Jan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 23:08:53 2006
Return-Path: <java-user-return-23799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90512 invoked from network); 5 Oct 2006 23:08:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 23:08:52 -0000
Received: (qmail 83617 invoked by uid 500); 5 Oct 2006 23:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83584 invoked by uid 500); 5 Oct 2006 23:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83573 invoked by uid 99); 5 Oct 2006 23:08:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 16:08:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [212.226.92.15] ([212.226.92.15:54851] helo=monkey.teamware.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 44/6D-04543-87095254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 16:08:42 -0700
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id k95N8UNE016975
	for <java-user@lucene.apache.org>; Fri, 6 Oct 2006 02:08:31 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id ma628oia; 6 Oct 2006 02:08:00 +0300
Message-ID: <4525906E.5040408@teamware.com>
Date: Fri, 06 Oct 2006 09:08:30 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem with Field.Text()
References: <392521EA2692A2418DF48C331E61E3252224@professorville.windows.esseff.org> <452581D9.1020204@gmx.net>
In-Reply-To: <452581D9.1020204@gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You have to create a new Field class with "new Field(...", i.e.

replace doc.add(Field.Text....   with doc.add(new Field(...

Antony




Jan Pieper wrote:
> No it is not your fault, it is mine, but it also does not function. My 
> compiler
> gives me this error message:
> 
> -------------------------------------------------------------------------------- 
> 
> cannot find symbol:
> method Field(
>    java.lang.String,
>    java.lang.String,
>    org.apache.lucene.document.Field.Store,
>    org.apache.lucene.document.Field.Index
> );
> -------------------------------------------------------------------------------- 
> 
> 
> I found the declaration in the docs but i does not function. I do not 
> know why.
> I downloaded the actual stable version: 2.0.0.
> 
> -- Jan
> 
> 
>> Blah. Sorry for the typo. Get rid of the .Text:
>>
>> Field(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>>
>> -----Original Message-----
>> From: Jan Pieper [mailto:j-pieper@gmx.net] Sent: Thursday, October 05, 
>> 2006 2:53 PM
>> To: java-user@lucene.apache.org
>> Subject: Problem with Field.Text()
>>
>> I hope now I am in the right mailinglist. In the -dev mailinglist Steven
>> Parkes said, that I have to change this:
>>
>>  > Field.Text(String, String);
>>
>> to
>>
>>  > Field.Text(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>>
>> But it seems that there isnt such a method declaration. Where is the 
>> mistake?
>>
>> -- Jan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 23:33:52 2006
Return-Path: <java-user-return-23800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96605 invoked from network); 5 Oct 2006 23:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 23:33:52 -0000
Received: (qmail 4495 invoked by uid 500); 5 Oct 2006 23:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4464 invoked by uid 500); 5 Oct 2006 23:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4453 invoked by uid 99); 5 Oct 2006 23:33:45 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 16:33:45 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [72.14.204.236] ([72.14.204.236:27156] helo=qb-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 0A/CD-04543-35695254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 16:33:41 -0700
Received: by qb-out-0506.google.com with SMTP id d11so190333qbd
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 16:33:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dLztts79UpMHHwa9wZLHIzaaG62qjX3XEkoOpmVBjKi7L/Y4nyzYxsRTuZy99NkFmqeGEmsnOcrALtbPIg2cqrLPGyK5Zxxck+S8ausYwqx4mWwqJuAqk/GqrElwWBIPrdRdvssi1Mvql62Ys2js/cXnnkTch9cGTYv2k3sUtKs=
Received: by 10.35.60.16 with SMTP id n16mr4528240pyk;
        Thu, 05 Oct 2006 16:33:36 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Thu, 5 Oct 2006 16:33:36 -0700 (PDT)
Message-ID: <359a92830610051633l526d4e17m4be861f097c4d16d@mail.gmail.com>
Date: Thu, 5 Oct 2006 19:33:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with Field.Text()
In-Reply-To: <392521EA2692A2418DF48C331E61E3252225@professorville.windows.esseff.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20710_7707557.1160091216152"
References: <392521EA2692A2418DF48C331E61E3252225@professorville.windows.esseff.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20710_7707557.1160091216152
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is your classpath or buildpath for the project in Eclipse) pointing to
2.0rather than
1.x?

Erick

On 10/5/06, Steven Parkes <steven_parkes@esseff.org> wrote:
>
> Do you have the appropriate imports?
>
> Look at IndexFiles.java in src/demo/org/apache/lucene/demo. It uses this
> call for adding two fields. You should be able to build this with "ant
> compile-demo". That should help get you started.
>
> -----Original Message-----
> From: Jan Pieper [mailto:j-pieper@gmx.net]
> Sent: Thursday, October 05, 2006 3:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problem with Field.Text()
>
> No it is not your fault, it is mine, but it also does not function. My
> compiler
> gives me this error message:
>
> ------------------------------------------------------------------------
> --------
> cannot find symbol:
> method Field(
>     java.lang.String,
>     java.lang.String,
>     org.apache.lucene.document.Field.Store,
>     org.apache.lucene.document.Field.Index
> );
> ------------------------------------------------------------------------
> --------
>
> I found the declaration in the docs but i does not function. I do not
> know why.
> I downloaded the actual stable version: 2.0.0.
>
> -- Jan
>
>
> > Blah. Sorry for the typo. Get rid of the .Text:
> >
> > Field(String, String, Field.Store.YES, Field.Index.TOKENIZED);
> >
> > -----Original Message-----
> > From: Jan Pieper [mailto:j-pieper@gmx.net]
> > Sent: Thursday, October 05, 2006 2:53 PM
> > To: java-user@lucene.apache.org
> > Subject: Problem with Field.Text()
> >
> > I hope now I am in the right mailinglist. In the -dev mailinglist
> Steven
> > Parkes said, that I have to change this:
> >
> >  > Field.Text(String, String);
> >
> > to
> >
> >  > Field.Text(String, String, Field.Store.YES, Field.Index.TOKENIZED);
> >
> > But it seems that there isnt such a method declaration. Where is the
> > mistake?
> >
> > -- Jan
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20710_7707557.1160091216152--

From java-user-return-23801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 05 23:54:22 2006
Return-Path: <java-user-return-23801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99772 invoked from network); 5 Oct 2006 23:54:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Oct 2006 23:54:22 -0000
Received: (qmail 22307 invoked by uid 500); 5 Oct 2006 23:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22280 invoked by uid 500); 5 Oct 2006 23:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22269 invoked by uid 99); 5 Oct 2006 23:54:16 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 16:54:16 -0700
X-ASF-Spam-Status: No, hits=2.1 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_HAS_ULINE_NUMS,MSGID_FROM_MTA_HEADER
Received: from [65.54.246.73] ([65.54.246.73:35036] helo=bay0-omc1-s1.bay0.hotmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 42/2E-04543-02B95254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 16:54:11 -0700
Received: from hotmail.com ([64.4.54.103]) by bay0-omc1-s1.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 5 Oct 2006 16:54:06 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 5 Oct 2006 16:54:05 -0700
Message-ID: <BAY20-F144C70F2C4E9DAF027DAC681120@phx.gbl>
Received: from 128.210.160.12 by by20fd.bay20.hotmail.msn.com with HTTP;
	Thu, 05 Oct 2006 23:54:02 GMT
X-Originating-IP: [128.210.160.12]
X-Originating-Email: [lily_hh2003@hotmail.com]
X-Sender: lily_hh2003@hotmail.com
From: "lily yan" <lily_hh2003@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: ask for a question about Lucene 
Date: Thu, 05 Oct 2006 23:54:02 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 05 Oct 2006 23:54:05.0894 (UTC) FILETIME=[8AAF7660:01C6E8D9]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello ALL,

i'm new to Lucene and wandering where i can start from Lucene? : )

basically my application is: when user input some keywords (can be more than 
one words) within an academic research site, the output will be the 
researchers' academic interests.

there are will be a DB2 database that contains: (about 150 records in the 
table)

a.  researcher's name,

b. academic research interests (data type might be long varchar)

c.  research description (data type might be clob)

d. a field called keywords used for searching (data type varchar)

   etc...

a java program will do the search based on the user's input.

there will be two kinds of search: basic search and advance search based on 
user's choice

for basic search, the program will do search within the "keyword" field of 
the database.

for advance search, the program will do search within the "academic research 
interests" field or

"research description" field of the database.

my questions:

1. if user choose to do basic search, does the program need use Lucene?

2. if user choose to do advance search, does  Lucene can be used to this 
scenario?

i mean will the datatype of the fields of the database matter if using  
Lucene ? cause i will use both long varchar and clob.

3. is this a good idea that i choose use Lucene for my application scenario, 
cause the database will only have 150 records.

4. if i don't use Lucene, then basically the program will just do a 
exhustive search in the database, right?

Thanks again for answering my questions,

lilyyan

_________________________________________________________________
Express yourself - download free Windows Live Messenger themes! 
http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://imagine-msn.com/themes/vibe/default.aspx?locale=en-us&source=hmtagline


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 00:00:23 2006
Return-Path: <java-user-return-23802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 547 invoked from network); 6 Oct 2006 00:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 00:00:23 -0000
Received: (qmail 30776 invoked by uid 500); 6 Oct 2006 00:00:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30744 invoked by uid 500); 6 Oct 2006 00:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30733 invoked by uid 99); 6 Oct 2006 00:00:17 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 17:00:17 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=4.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [72.14.204.228] ([72.14.204.228:55452] helo=qb-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3F/3E-04543-A8C95254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 17:00:11 -0700
Received: by qb-out-0506.google.com with SMTP id d11so193154qbd
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 17:00:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bRcdbq6GXptDqA1V/gtpRfcYrPhR8Gp6Be/BTm0aiIHfLoqkbiHSRLHTPAUs5iLNCszz2BaS8Q4gCdykSb975Gpdjhn0JYb6VFl09GF7LlGCuoyrDm1Gy8N3li4lGh/IJpDRBqMvOLS4exyguxFM9gmJKD9eNqM9L4tQGtb9xZE=
Received: by 10.35.119.8 with SMTP id w8mr4624540pym;
        Thu, 05 Oct 2006 17:00:08 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Thu, 5 Oct 2006 17:00:07 -0700 (PDT)
Message-ID: <359a92830610051700v55a10f1ckfdda9c29d1db7a1e@mail.gmail.com>
Date: Thu, 5 Oct 2006 20:00:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ask for a question about Lucene
In-Reply-To: <BAY20-F144C70F2C4E9DAF027DAC681120@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21138_5501916.1160092807651"
References: <BAY20-F144C70F2C4E9DAF027DAC681120@phx.gbl>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21138_5501916.1160092807651
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My gut feel is that, with 150 records, using Lucene is overkill. This
assumes that your database already exists. You'd have to extract the data
from the DB, store it in a lucene index, then worry about keeping them
synchronized.

I'd suggest, though, that the fastest way to satisfy yourself about this
would be to create some SQL queries by hand, submit them to your database,
and measure your response time. You could get a fair idea of whether your DB
was fast enough just by this experiment.

Hope this helps
Erick

On 10/5/06, lily yan <lily_hh2003@hotmail.com> wrote:
>
> Hello ALL,
>
> i'm new to Lucene and wandering where i can start from Lucene? : )
>
> basically my application is: when user input some keywords (can be more
> than
> one words) within an academic research site, the output will be the
> researchers' academic interests.
>
> there are will be a DB2 database that contains: (about 150 records in the
> table)
>
> a.  researcher's name,
>
> b. academic research interests (data type might be long varchar)
>
> c.  research description (data type might be clob)
>
> d. a field called keywords used for searching (data type varchar)
>
>    etc...
>
> a java program will do the search based on the user's input.
>
> there will be two kinds of search: basic search and advance search based
> on
> user's choice
>
> for basic search, the program will do search within the "keyword" field of
> the database.
>
> for advance search, the program will do search within the "academic
> research
> interests" field or
>
> "research description" field of the database.
>
> my questions:
>
> 1. if user choose to do basic search, does the program need use Lucene?
>
> 2. if user choose to do advance search, does  Lucene can be used to this
> scenario?
>
> i mean will the datatype of the fields of the database matter if using
> Lucene ? cause i will use both long varchar and clob.
>
> 3. is this a good idea that i choose use Lucene for my application
> scenario,
> cause the database will only have 150 records.
>
> 4. if i don't use Lucene, then basically the program will just do a
> exhustive search in the database, right?
>
> Thanks again for answering my questions,
>
> lilyyan
>
> _________________________________________________________________
> Express yourself - download free Windows Live Messenger themes!
>
> http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://imagine-msn.com/themes/vibe/default.aspx?locale=en-us&source=hmtagline
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21138_5501916.1160092807651--

From java-user-return-23803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 03:46:46 2006
Return-Path: <java-user-return-23803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56387 invoked from network); 6 Oct 2006 03:46:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 03:46:46 -0000
Received: (qmail 93622 invoked by uid 500); 6 Oct 2006 03:46:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93598 invoked by uid 500); 6 Oct 2006 03:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93587 invoked by uid 99); 6 Oct 2006 03:46:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 20:46:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [209.226.175.74] ([209.226.175.74:54636] helo=tomts20-srv.bellnexxia.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 57/10-16439-B91D5254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 20:46:37 -0700
Received: from [69.157.131.163] by tomts20-srv.bellnexxia.net
          (InterMail vM.5.01.06.13 201-253-122-130-113-20050324) with ESMTP
          id <20061006034632.RKTR16051.tomts20-srv.bellnexxia.net@[69.157.131.163]>
          for <java-user@lucene.apache.org>; Thu, 5 Oct 2006 23:46:32 -0400
Message-ID: <4525D1A1.5020205@sympatico.ca>
Date: Thu, 05 Oct 2006 23:46:41 -0400
From: Michael Imbeault <michael.imbeault@sympatico.ca>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Find if words are in the same phrase?
References: <452476F6.2050405@sympatico.ca> <Pine.LNX.4.58.0610051219240.29946@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0610051219240.29946@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Chris, your answers were very insightful as always, this is 
exactly what i was asking for. Posting at 2 AM, I should stop doing 
that, I write in a confusing manner :)

Michael Imbeault
CHUL Research Center (CHUQ)
2705 boul. Laurier
Ste-Foy, QC, Canada, G1V 4G2
Tel: (418) 654-2705, Fax: (418) 654-2212



Chris Hostetter wrote:
> 1) search the list archives for: sentence paragraph
> and you'll find some discussions on generating position gaps in your
> analyzer to help esure that sloppy phrase queries are confined to a single
> sentence, or paragraph, or page. AND/OR using marker terms to denote the
> boundaries of various parts of documents for hte same purposes.
>
> 2) assuming you mean in your second question that you have a specific list
> of words you are interested in when you said "some other words" take a
> look at MultiPhraseQuery and/or SpanNearQuery containing SpanOrQueries.
>
>
> : Date: Wed, 04 Oct 2006 23:07:34 -0400
> : From: Michael Imbeault <michael.imbeault@sympatico.ca>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Find if words are in the same phrase?
> :
> : Is it possible with Lucene to limit a proximity query to a phrase to
> : determine if two words are in the same phrase? Along the same train of
> : thoughts, is it possible to determine if two words in a same phrase are
> : separated by a word, or a list of words? Like for example Virus (some
> : other words) activate (some other words) cancer?
> :
> : Thanks,
> :
> : --
> : Michael Imbeault
> : CHUL Research Center (CHUQ)
> : 2705 boul. Laurier
> : Ste-Foy, QC, Canada, G1V 4G2
> : Tel: (418) 654-2705, Fax: (418) 654-2212
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 04:26:18 2006
Return-Path: <java-user-return-23804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64657 invoked from network); 6 Oct 2006 04:26:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 04:26:18 -0000
Received: (qmail 29378 invoked by uid 500); 6 Oct 2006 04:26:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29352 invoked by uid 500); 6 Oct 2006 04:26:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29341 invoked by uid 99); 6 Oct 2006 04:26:12 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 21:26:12 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=magawake@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.228] ([66.249.82.228:12946] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 92/E0-16439-1EAD5254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 21:26:10 -0700
Received: by wx-out-0506.google.com with SMTP id s15so690547wxc
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 21:26:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E+YHt9Z5SnCq74+5KIUG+bvVG7D1jgm+6AFItJ+pWZr8mV4xL5Ps+MfOVKR1n8uTSHkNFCJpVgcgNDfdYoFpvo4Ek+6prMd95X4naBT+jZMGF24Y+XV+dJ51feq/cJBJpF65HSRPDjcXDKvQ8XWa0KFopmZXiSGL8s+87jUj/KA=
Received: by 10.90.105.20 with SMTP id d20mr1420827agc;
        Thu, 05 Oct 2006 21:26:06 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Thu, 5 Oct 2006 21:26:06 -0700 (PDT)
Message-ID: <1cbd6f830610052126i70794159r89912a8fc72bb003@mail.gmail.com>
Date: Fri, 6 Oct 2006 00:26:06 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS
In-Reply-To: <45251D4C.9030707@gmx.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_124512_1494431.1160108766667"
References: <373399D6389D8C42B4EAD9BE2B6B5C5F072E7930@tormail01.cihi.ca>
	 <45251D4C.9030707@gmx.net>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_124512_1494431.1160108766667
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I appreciate everyone's responses.

I guess the main advantage of putting lucene's index into a RDBMS is for
flexibility of queries. Personally, I rather use a RDBMS for results than
lucene because I am more experienced with SQL queries than using Java.

Does anyone have a simple example of using FileDocument (
http://lucene.apache.org/java/docs/api/org/apache/lucene/demo/FileDocument.html),
which includes the following fields:path, modified, and contents? I would
like to try this approach ....

TIA!



On 10/5/06, Aleksei Valikov <valikov@gmx.net> wrote:
>
> Hi.
>
> > As one of the people who asked about placing indeces into RDBMS, I was
> > primarily interested in just storing index in the RDBMS (basically,
> > storing the structures described on this page
> > http://lucene.apache.org/java/docs/fileformats.html in the relational
> > DB). The main reason is NOT to be able to perform some magic with
> > joining Lucene and 'pure DB query' results (which, actually, IS useful
> > in some curcumstances, but don't really see a problem of doing it in
> > Java after quering DB and Lucene), but rather avoid the cost of
> > reindexing and associated problems in complex enterprise environments.
>
> There no problem joining/intersecting Lucene/DB results in the Java layer
> apart
> from performance. Imagine you have 10k results from Lucene and 10k results
> from
> the RDB and you only need results 20...40 ordered by 'name' field,
> ascending
> (which is the usual case). An sql query with join and limit/offset would
> be much
> faster than joining 20k entries in Java.
>
> > Yet another advantage of storing index in the DB is its 'managability'
> > and 'debugabiliy' (nice word!). Through there is Luke, etc,
> > administrators in big companies do not want to learn many new tools and
> > having smth already familiar to deal with can sometimes be a good
> > argument in favor of product adoption. (BTW, Compass, as Aleksei
> > mentioned, can be the answer to this prayer - meant to check it out long
> > time ago, but haven't got around to it yet. Also, it seems like the
> > project is half-dead. I wonder if it's true...)
>
> Compass is a lively and active project, we successfully use it in
> production.
>
> Bye.
> /lexi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_124512_1494431.1160108766667--

From java-user-return-23805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 05:02:19 2006
Return-Path: <java-user-return-23805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71134 invoked from network); 6 Oct 2006 05:02:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 05:02:19 -0000
Received: (qmail 54839 invoked by uid 500); 6 Oct 2006 05:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54811 invoked by uid 500); 6 Oct 2006 05:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54800 invoked by uid 99); 6 Oct 2006 05:02:13 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 22:02:13 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.185] ([64.233.182.185:4586] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 63/B1-16439-153E5254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 22:02:11 -0700
Received: by nf-out-0910.google.com with SMTP id b2so962434nfe
        for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 22:02:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=RISrDvtSrtL7SRsWxJzj9/H2cLO6UycmcgJF7PKH20jwV97J/z7/YoqDUHiQnyBPQO8cVj4hleLeoET0b8fVR4CU5XkuPrIOHtt/aWXWpWRKNzz0/Sv9HjxTMhBXOMbziLbEWuVNAyti6tePUsHh+MjDF4MxotmtcUTiPfuQMPQ=
Received: by 10.82.139.17 with SMTP id m17mr153966bud;
        Thu, 05 Oct 2006 22:02:06 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Thu, 5 Oct 2006 22:02:05 -0700 (PDT)
Message-ID: <6e3ae6310610052202v18186462u4aa4f81594de9b7b@mail.gmail.com>
Date: Thu, 5 Oct 2006 22:02:06 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ask for a question about Lucene
In-Reply-To: <BAY20-F144C70F2C4E9DAF027DAC681120@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BAY20-F144C70F2C4E9DAF027DAC681120@phx.gbl>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can use DBSight. It's free for your data. And you just need to
follow this example you will know how to use it, no java coding
needed. And you can schedule jobs to synchronize with the database.

http://wiki.dbsight.com/index.php?title=Step_by_step

The website is:
http://www.dbsight.net

Chris Lu
---------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/5/06, lily yan <lily_hh2003@hotmail.com> wrote:
> Hello ALL,
>
> i'm new to Lucene and wandering where i can start from Lucene? : )
>
> basically my application is: when user input some keywords (can be more than
> one words) within an academic research site, the output will be the
> researchers' academic interests.
>
> there are will be a DB2 database that contains: (about 150 records in the
> table)
>
> a.  researcher's name,
>
> b. academic research interests (data type might be long varchar)
>
> c.  research description (data type might be clob)
>
> d. a field called keywords used for searching (data type varchar)
>
>    etc...
>
> a java program will do the search based on the user's input.
>
> there will be two kinds of search: basic search and advance search based on
> user's choice
>
> for basic search, the program will do search within the "keyword" field of
> the database.
>
> for advance search, the program will do search within the "academic research
> interests" field or
>
> "research description" field of the database.
>
> my questions:
>
> 1. if user choose to do basic search, does the program need use Lucene?
>
> 2. if user choose to do advance search, does  Lucene can be used to this
> scenario?
>
> i mean will the datatype of the fields of the database matter if using
> Lucene ? cause i will use both long varchar and clob.
>
> 3. is this a good idea that i choose use Lucene for my application scenario,
> cause the database will only have 150 records.
>
> 4. if i don't use Lucene, then basically the program will just do a
> exhustive search in the database, right?
>
> Thanks again for answering my questions,
>
> lilyyan
>
> _________________________________________________________________
> Express yourself - download free Windows Live Messenger themes!
> http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://imagine-msn.com/themes/vibe/default.aspx?locale=en-us&source=hmtagline
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 06:27:38 2006
Return-Path: <java-user-return-23806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88656 invoked from network); 6 Oct 2006 06:27:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 06:27:38 -0000
Received: (qmail 8609 invoked by uid 500); 6 Oct 2006 06:27:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8571 invoked by uid 500); 6 Oct 2006 06:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8560 invoked by uid 99); 6 Oct 2006 06:27:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Oct 2006 23:27:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.165.64.20] ([213.165.64.20:37795] helo=mail.gmx.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 60/44-16439-F47F5254 for <java-user@lucene.apache.org>; Thu, 05 Oct 2006 23:27:28 -0700
Received: (qmail invoked by alias); 06 Oct 2006 06:27:24 -0000
Received: from xdsl-213-196-254-127.netcologne.de (EHLO [192.168.1.28]) [213.196.254.127]
  by mail.gmx.net (mp039) with SMTP; 06 Oct 2006 08:27:24 +0200
X-Authenticated: #28177402
Message-ID: <4525F754.9020708@gmx.net>
Date: Fri, 06 Oct 2006 08:27:32 +0200
From: Jan Pieper <j-pieper@gmx.net>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem with Field.Text()
References: <392521EA2692A2418DF48C331E61E3252224@professorville.windows.esseff.org> <452581D9.1020204@gmx.net> <4525906E.5040408@teamware.com>
In-Reply-To: <4525906E.5040408@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yeah it works :) thanks to all, for help.

> You have to create a new Field class with "new Field(...", i.e.
>
> replace doc.add(Field.Text....   with doc.add(new Field(...
>
> Antony
>
>
>
>
> Jan Pieper wrote:
>> No it is not your fault, it is mine, but it also does not function. 
>> My compiler
>> gives me this error message:
>>
>> -------------------------------------------------------------------------------- 
>>
>> cannot find symbol:
>> method Field(
>>    java.lang.String,
>>    java.lang.String,
>>    org.apache.lucene.document.Field.Store,
>>    org.apache.lucene.document.Field.Index
>> );
>> -------------------------------------------------------------------------------- 
>>
>>
>> I found the declaration in the docs but i does not function. I do not 
>> know why.
>> I downloaded the actual stable version: 2.0.0.
>>
>> -- Jan
>>
>>
>>> Blah. Sorry for the typo. Get rid of the .Text:
>>>
>>> Field(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>>>
>>> -----Original Message-----
>>> From: Jan Pieper [mailto:j-pieper@gmx.net] Sent: Thursday, October 
>>> 05, 2006 2:53 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Problem with Field.Text()
>>>
>>> I hope now I am in the right mailinglist. In the -dev mailinglist 
>>> Steven
>>> Parkes said, that I have to change this:
>>>
>>>  > Field.Text(String, String);
>>>
>>> to
>>>
>>>  > Field.Text(String, String, Field.Store.YES, Field.Index.TOKENIZED);
>>>
>>> But it seems that there isnt such a method declaration. Where is the 
>>> mistake?
>>>
>>> -- Jan
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>   
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 08:37:12 2006
Return-Path: <java-user-return-23807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30441 invoked from network); 6 Oct 2006 08:37:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 08:37:12 -0000
Received: (qmail 48515 invoked by uid 500); 6 Oct 2006 08:37:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48492 invoked by uid 500); 6 Oct 2006 08:37:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48481 invoked by uid 99); 6 Oct 2006 08:37:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 01:37:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [217.15.245.75] ([217.15.245.75:59126] helo=post01.avanza.se)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DF/21-18133-FA516254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 01:37:05 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id 4ABC4746A9
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 10:36:55 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting on dates using long
Date: Fri, 6 Oct 2006 10:38:05 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BE38@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting on dates using long
Thread-Index: AcbokBNs/I9c7NEoTnKu+YuvENwnKAAkla6w
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I changed to RangeFilter and now everything works fine. I havn't noticed =
any change in performance so I'm happy. Strange with the =
constantrangequery though...

-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com]On Behalf Of Yonik
Seeley
Sent: den 5 oktober 2006 17:06
To: java-user@lucene.apache.org
Subject: Re: Sorting on dates using long

On 10/5/06, Bj=F6rn Ekengren <bjorn.ekengren@avanza.se> wrote:
> I am trying to get sort by date to work. The dates are of form =
yyyyMMddhhmm and it seems that sort sees them as Integers and discards =
the last four numbers since an integer isn't large enough. I tried using =
SortField.STRING instead but then constantrangequery breaks =
(date:[200501010101 TO 200601010101] returns 0 hits).

Using SortField.STRING should work, both with sorting and range
queries via RangeFilter or ConstantScoreRangeQuery.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search =
server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 09:09:28 2006
Return-Path: <java-user-return-23808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37364 invoked from network); 6 Oct 2006 09:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 09:09:27 -0000
Received: (qmail 88631 invoked by uid 500); 6 Oct 2006 09:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88608 invoked by uid 500); 6 Oct 2006 09:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88597 invoked by uid 99); 6 Oct 2006 09:09:21 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 02:09:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
Received: from [194.52.12.17] ([194.52.12.17:58659] helo=mail1.observergroup.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 13/22-18133-A3D16254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 02:09:15 -0700
Received: (qmail 19807 invoked by uid 509); 6 Oct 2006 11:09:10 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.110627 secs); 06 Oct 2006 09:09:10 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.110627 secs Process 19797)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 6 Oct 2006 11:09:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6E927.14BD9306"
Subject: Case sensitive / insensitive
Date: Fri, 6 Oct 2006 11:09:11 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C02804023@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case sensitive / insensitive
Thread-Index: AcbpJxak7+Q6i7y4RYCCpKq94xC3fw==
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6E927.14BD9306
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

Any good approaches for allowing case sensitive and case insensitive
searches?

=20

/

Regards

Marcus=20

=20


------_=_NextPart_001_01C6E927.14BD9306--

From java-user-return-23809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 09:13:59 2006
Return-Path: <java-user-return-23809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39080 invoked from network); 6 Oct 2006 09:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 09:13:59 -0000
Received: (qmail 95250 invoked by uid 500); 6 Oct 2006 09:13:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94254 invoked by uid 500); 6 Oct 2006 09:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94243 invoked by uid 99); 6 Oct 2006 09:13:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 02:13:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [194.52.12.17] ([194.52.12.17:59020] helo=mail1.observergroup.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5F/32-18133-F4E16254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 02:13:51 -0700
Received: (qmail 21528 invoked by uid 509); 6 Oct 2006 11:13:48 +0200
Received: from 10.8.1.19 by mail1 (envelope-from <marcus.falck@observer.se>, uid 508) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.85.1/1049. spamassassin: 3.0.2. perlscan: 1.25-st-qms.  
 Clear:RC:1(10.8.1.19):. 
 Processed in 0.081271 secs); 06 Oct 2006 09:13:48 -0000
X-Antivirus-MYDOMAIN-Mail-From: marcus.falck@observer.se via mail1
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:1(10.8.1.19):. Processed in 0.081271 secs Process 21522)
Received: from unknown (HELO S1SE1MAIL.emea1.ad.group) (10.8.1.19)
  by mail1.observergroup.com with SMTP; 6 Oct 2006 11:13:48 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Case sensitive / insensitive
Date: Fri, 6 Oct 2006 11:13:51 +0200
Message-ID: <8834A84C87A2C148AD46921BB8BFC97C0280404D@S1SE1MAIL.emea1.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case sensitive / insensitive
Thread-Index: AcbpJxak7+Q6i7y4RYCCpKq94xC3fwAAHE/Q
From: "Marcus Falck" <marcus.falck@observer.se>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Except adding an additional field and skipping the LowerCaseFilter. =
Since this severely increases the index size (and the index already is =
around 1 TB).



-----Ursprungligt meddelande-----
Fr=E5n: Marcus Falck [mailto:marcus.falck@observer.se]=20
Skickat: den 6 oktober 2006 11:09
Till: java-user@lucene.apache.org
=C4mne: Case sensitive / insensitive

Hi,

=20

Any good approaches for allowing case sensitive and case insensitive
searches?

=20

/

Regards

Marcus=20

=20




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 10:01:12 2006
Return-Path: <java-user-return-23810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50045 invoked from network); 6 Oct 2006 10:01:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 10:01:12 -0000
Received: (qmail 57733 invoked by uid 500); 6 Oct 2006 10:01:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56976 invoked by uid 500); 6 Oct 2006 10:01:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56965 invoked by uid 99); 6 Oct 2006 10:01:05 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 03:01:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [69.55.225.129] ([69.55.225.129:36510] helo=ehatchersolutions.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C8/A3-18133-D5926254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 03:01:02 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 05AF630EFC18; Fri,  6 Oct 2006 06:00:58 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 592FE30EFC16
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 06:00:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C02804023@S1SE1MAIL.emea1.ad.group>
References: <8834A84C87A2C148AD46921BB8BFC97C02804023@S1SE1MAIL.emea1.ad.group>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C88707CC-2AA5-4B41-9C7A-574FE2025337@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Case sensitive / insensitive
Date: Fri, 6 Oct 2006 06:00:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 6, 2006, at 5:09 AM, Marcus Falck wrote:
> Any good approaches for allowing case sensitive and case insensitive
> searches?

I had this requirement for one application, and implemented it with  
two different indexes.  It could also be accomplished with different  
fields, but that would have been even more complex (a custom query  
parser) to toggle which fields were being used.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 10:17:36 2006
Return-Path: <java-user-return-23811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55291 invoked from network); 6 Oct 2006 10:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 10:17:36 -0000
Received: (qmail 80504 invoked by uid 500); 6 Oct 2006 10:17:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80463 invoked by uid 500); 6 Oct 2006 10:17:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80450 invoked by uid 99); 6 Oct 2006 10:17:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 03:17:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [85.118.4.17] ([85.118.4.17:19467] helo=snorlax.uk.scalix.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 85/24-18133-43D26254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 03:17:26 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k96AHJZb023484
	for <java-user@lucene.apache.org>; Fri, 6 Oct 2006 11:17:20 +0100
Received: from [10.11.108.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.196-beta)
    via ESMTP; Fri, 06 Oct 2006 11:17:19 +0100 (BST)
Date: Fri, 6 Oct 2006 11:17:18 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <45262D2E.8010305@scalix.com>
In-Reply-To: <5a8b64620610041332w3eacb7adl50222d071816cc68@mail.gmail.com>
References: <5a8b64620610041332w3eacb7adl50222d071816cc68@mail.gmail.com>
Subject: Re: Spam filter for lucene project
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.7 (X11/20060913)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rajiv Roopan wrote:
> Hello, I'm currently running a site which allows users to post. Lately 
> posts
> have been getting out of hand. I was wondering if anyone knows of an open
> source spam filter that I can add to my project to scan the posts 
> (which are
> just plain text)  for spam?
spamassassin should work with a little effort.   You might also want to 
look at the spam filtering that's part of Thunderbird, although that 
would be rather more work to integrate.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 10:18:41 2006
Return-Path: <java-user-return-23812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55441 invoked from network); 6 Oct 2006 10:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 10:18:41 -0000
Received: (qmail 83226 invoked by uid 500); 6 Oct 2006 10:18:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83198 invoked by uid 500); 6 Oct 2006 10:18:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83181 invoked by uid 99); 6 Oct 2006 10:18:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 03:18:33 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=karl.wettin@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.178] ([64.233.166.178:62467] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id BD/24-18133-67D26254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 03:18:30 -0700
Received: by py-out-1112.google.com with SMTP id s49so968164pyc
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 03:18:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=D/ter1w8tU5f2FyTZYuoSGvQHVVCxQGkF/it/ND3E3vyRD68/YW6ZLRc4vPZ76NJfgJLYSzbPE9liX0bPcaGsCvXF7L+j1PArdtyz3RTujSg6kh+UyKElnt/7WvsHSbnPTYb20izCSz+NJk8qd4fke6rhci6a7Urr5QmLtE/FDc=
Received: by 10.35.96.7 with SMTP id y7mr5627442pyl;
        Fri, 06 Oct 2006 03:18:27 -0700 (PDT)
Received: by 10.35.127.4 with HTTP; Fri, 6 Oct 2006 03:18:27 -0700 (PDT)
Message-ID: <9fc755c20610060318y287ecc0y9cda6b05f9f40762@mail.gmail.com>
Date: Fri, 6 Oct 2006 12:18:27 +0200
From: "karl wettin" <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Case sensitive / insensitive
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C0280404D@S1SE1MAIL.emea1.ad.group>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8834A84C87A2C148AD46921BB8BFC97C0280404D@S1SE1MAIL.emea1.ad.group>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/6/06, Marcus Falck <marcus.falck@observer.se> wrote:
> Any good approaches for allowing case sensitive and case insensitive
> searches?
>
> Except adding an additional field and skipping the LowerCaseFilter. Since this
> severely increases the index size (and the index already is around 1 TB).

I would consider if I had to index all terms case sensitive, or just a
sub set of them. E.g. all proper nouns need to be case sensitive.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 10:41:32 2006
Return-Path: <java-user-return-23813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62899 invoked from network); 6 Oct 2006 10:41:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 10:41:32 -0000
Received: (qmail 17280 invoked by uid 500); 6 Oct 2006 10:41:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17234 invoked by uid 500); 6 Oct 2006 10:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17223 invoked by uid 99); 6 Oct 2006 10:41:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 03:41:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [213.151.89.70] ([213.151.89.70:51593] helo=server)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 29/C4-18133-FC236254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 03:41:22 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GVn8j-0008Ms-79
	for java-user@lucene.apache.org; Fri, 06 Oct 2006 12:41:13 +0200
Message-ID: <452632CB.4010706@tejnora.cz>
Date: Fri, 06 Oct 2006 12:41:15 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.7 (X11/20060928)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS
References: <200610050818750.SM02632@TS18> <45251B69.6010908@gmx.net>
In-Reply-To: <45251B69.6010908@gmx.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One think, generally use RDBM for the STORED fields is good idea because 
every segment merging / optimize copies those data once or twice (cfs).

I'm thinking about to put STORED fields in extra file and put pointers 
in cfs. Delete will just mark document as delete. And new operation 
omptimize_full
deletes and corrects pointers.


Karel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 12:37:31 2006
Return-Path: <java-user-return-23814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5214 invoked from network); 6 Oct 2006 12:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 12:37:31 -0000
Received: (qmail 97074 invoked by uid 500); 6 Oct 2006 12:37:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97048 invoked by uid 500); 6 Oct 2006 12:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97025 invoked by uid 99); 6 Oct 2006 12:37:23 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 05:37:23 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.1 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.179] ([64.233.166.179:39295] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 53/E8-18133-FFD46254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 05:37:20 -0700
Received: by py-out-1112.google.com with SMTP id s49so1009889pyc
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 05:37:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=l4PYQS46YU/WF+EECk1QmYCpLfDERDfNvPEcRN/VSsE1UpjFSm8Ixna3ba71BV2D637RcPkncw1sTZCp2PtoKaT2tcHUvMmRJswgqvPIsRVd6laqteZThopdBF1VazVzvhbsA55TGLmeWit0yFpeYYkRVqAOgP5diHqnaM6wWFA=
Received: by 10.35.21.1 with SMTP id y1mr5814422pyi;
        Fri, 06 Oct 2006 05:37:15 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Fri, 6 Oct 2006 05:37:15 -0700 (PDT)
Message-ID: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>
Date: Fri, 6 Oct 2006 08:37:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: wildcard and span queries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4662_18237336.1160138235076"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4662_18237336.1160138235076
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, we defined this problem away for one of our products, but it's back
for a different product. Siiiiigggghhhh......

I'm valiantly trying to get our product manager (hereinafter PM) to define
this problem away, perhaps allowing me to deal with this by clever indexing
and/or some variant on prefix query. But in case that doesn't fly, I'm
wondering what wisdom exists.

Fortunately, the PM agrees that it's silly to think about span queries
involving OR or NOT for this app. So I'm left with something like Jo*n AND
sm*th AND jon?es WITHIN 6.

The only approach that's occurred to me is to create a filter on for the
terms, giving me a subset of my docs that have any terms satisfying the
above. For each doc in the filter, get creative with TermPositionVector for
determining whether the document matches. It seems that this would involve
creating a list of all positions in each doc in my filter that match jo*n,
another for sm*th, and another for jon?es and seeing if the distance
(however I define that) between any triple of terms (one from each list) is
less than 6.

My gut feel is that this explodes time-wise based upon the number of terms
that match. In this particular application, we are indexing 20K books. Based
on indexing 4K of them, this amounts to about a 4G index (although I
acutally expect this to be somewhat larger since I haven't indexed all the
fields, just the text so far). I can't imagine that comparing the expanded
terms for, say, 10,000 docs will be fast. I'm putting together an experiment
to test this though.

But someone could save me a lot of work by telling me that this is solved
already. This is your chance <G>......

The expanding queries (e.g. PrefixQuery, RegexQuery, WildcardQuery) all blow
up with TooManyClauses, and I've tried upping the MaxClauses field but that
takes forever and *then* blows up. Even with -Xmx set as high as I can.

I know, I know. If I solve this, feel free to submit it to the contribution
section.....

Thanks
Erick

P.S. Apologies if this is a re-post. But every time I try to submit a new
request from home, I get a error like this....
************
Technical details of permanent failure:
PERM_FAILURE: SMTP Error (state 12): 550 SpamAssassin score
5.1(DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET)
exceeds threshold 5.0.
***********

Which appears to be related to the fact that I have a Direcway satellite
connection at home. Anybody who's figured out how to cure this. please feel
free to e-mail me. I don't quite know whether this is even getting to the
user list server or is getting returned from the Direcway processsing....

------=_Part_4662_18237336.1160138235076--

From java-user-return-23815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 13:43:55 2006
Return-Path: <java-user-return-23815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31668 invoked from network); 6 Oct 2006 13:43:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 13:43:55 -0000
Received: (qmail 11921 invoked by uid 500); 6 Oct 2006 13:43:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11889 invoked by uid 500); 6 Oct 2006 13:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11878 invoked by uid 99); 6 Oct 2006 13:43:47 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 06:43:47 -0700
X-ASF-Spam-Status: No, hits=2.1 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_HAS_ULINE_NUMS,MSGID_FROM_MTA_HEADER
Received: from [65.54.246.170] ([65.54.246.170:37256] helo=bay0-omc2-s34.bay0.hotmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4A/D0-24193-C8D56254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 06:43:42 -0700
Received: from hotmail.com ([64.4.54.91]) by bay0-omc2-s34.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 6 Oct 2006 06:43:38 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 6 Oct 2006 06:43:38 -0700
Message-ID: <BAY20-F2C71AC43FB0EA885C8FF281130@phx.gbl>
Received: from 128.210.160.12 by by20fd.bay20.hotmail.msn.com with HTTP;
	Fri, 06 Oct 2006 13:43:34 GMT
X-Originating-IP: [128.210.160.12]
X-Originating-Email: [lily_hh2003@hotmail.com]
X-Sender: lily_hh2003@hotmail.com
From: "lily yan" <lily_hh2003@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: ask for a question about Lucene
Date: Fri, 06 Oct 2006 13:43:34 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 06 Oct 2006 13:43:38.0029 (UTC) FILETIME=[6D308DD0:01C6E94D]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Chris Lu,

Thanks very much for your reply. The DBSight is a very cool search tool. 
Just got two question: is this a java-based application? it seems that 
DBSight doesn't support DB2 database?

Regards,
lilyyan


>From: "Chris Lu" <chris.lu@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: ask for a question about Lucene
>Date: Thu, 5 Oct 2006 22:02:06 -0700
>
>You can use DBSight. It's free for your data. And you just need to
>follow this example you will know how to use it, no java coding
>needed. And you can schedule jobs to synchronize with the database.
>
>http://wiki.dbsight.com/index.php?title=Step_by_step
>
>The website is:
>http://www.dbsight.net
>
>Chris Lu
>---------------------------------
>Instant Lucene Search on Any Database/Application
>http://www.dbsight.net
>
>On 10/5/06, lily yan <lily_hh2003@hotmail.com> wrote:
>>Hello ALL,
>>
>>i'm new to Lucene and wandering where i can start from Lucene? : )
>>
>>basically my application is: when user input some keywords (can be more 
>>than
>>one words) within an academic research site, the output will be the
>>researchers' academic interests.
>>
>>there are will be a DB2 database that contains: (about 150 records in the
>>table)
>>
>>a.  researcher's name,
>>
>>b. academic research interests (data type might be long varchar)
>>
>>c.  research description (data type might be clob)
>>
>>d. a field called keywords used for searching (data type varchar)
>>
>>    etc...
>>
>>a java program will do the search based on the user's input.
>>
>>there will be two kinds of search: basic search and advance search based 
>>on
>>user's choice
>>
>>for basic search, the program will do search within the "keyword" field of
>>the database.
>>
>>for advance search, the program will do search within the "academic 
>>research
>>interests" field or
>>
>>"research description" field of the database.
>>
>>my questions:
>>
>>1. if user choose to do basic search, does the program need use Lucene?
>>
>>2. if user choose to do advance search, does  Lucene can be used to this
>>scenario?
>>
>>i mean will the datatype of the fields of the database matter if using
>>Lucene ? cause i will use both long varchar and clob.
>>
>>3. is this a good idea that i choose use Lucene for my application 
>>scenario,
>>cause the database will only have 150 records.
>>
>>4. if i don't use Lucene, then basically the program will just do a
>>exhustive search in the database, right?
>>
>>Thanks again for answering my questions,
>>
>>lilyyan
>>
>>_________________________________________________________________
>>Express yourself - download free Windows Live Messenger themes!
>>http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://imagine-msn.com/themes/vibe/default.aspx?locale=en-us&source=hmtagline
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

_________________________________________________________________
SearchYour way, your world, right now!  
http://imagine-windowslive.com/minisites/searchlaunch/?locale=en-us&FORM=WLMTAG


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 13:44:18 2006
Return-Path: <java-user-return-23816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31854 invoked from network); 6 Oct 2006 13:44:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 13:44:18 -0000
Received: (qmail 13518 invoked by uid 500); 6 Oct 2006 13:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13498 invoked by uid 500); 6 Oct 2006 13:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13487 invoked by uid 99); 6 Oct 2006 13:44:11 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 06:44:11 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=yseeley@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.190] ([64.233.182.190:23461] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7E/D0-24193-7AD56254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 06:44:09 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1064214nfe
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 06:44:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Urko9r82+9j54NJ5HfQfdiA7EPc6Mi2yWfVu3Us8iNJNNaqEUkRMcfn+gEfYC+Isw+Eq5xOuZqf2Tx5zRwLa98qQIP6toBt9qP1KGLQOBC1B4dzkAQwA2MRc2qnTIDau151+yE9uR8IsgvnutaLtSRyb2m4cV/ld9iRZzgma1s0=
Received: by 10.82.98.13 with SMTP id v13mr200115bub;
        Fri, 06 Oct 2006 06:44:04 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Fri, 6 Oct 2006 06:44:04 -0700 (PDT)
Message-ID: <c68e39170610060644w7d47f4f6x61e4f304bc9ebc8a@mail.gmail.com>
Date: Fri, 6 Oct 2006 09:44:04 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Sorting on dates using long
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BE38@ad01.aza.se>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6F4F5B8F19AA954DB9002305E4D6D14901BE38@ad01.aza.se>
X-Google-Sender-Auth: 79fb7bea0e9f10be
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/6/06, Bj=F6rn Ekengren <bjorn.ekengren@avanza.se> wrote:
> I changed to RangeFilter and now everything works fine. I havn't noticed =
any change in performance so I'm happy. Strange with the constantrangequery=
 though...

It is strange.  If you can reproduce an error, please file a bug with
the test case so it can be fixed.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 13:59:41 2006
Return-Path: <java-user-return-23817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35836 invoked from network); 6 Oct 2006 13:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 13:59:40 -0000
Received: (qmail 36305 invoked by uid 500); 6 Oct 2006 13:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36241 invoked by uid 500); 6 Oct 2006 13:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36230 invoked by uid 99); 6 Oct 2006 13:59:33 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 06:59:33 -0700
X-ASF-Spam-Status: No, hits=2.3 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_HAS_ULINE_NUMS,MSGID_FROM_MTA_HEADER,URI_NO_WWW_ANY_CGI
Received: from [65.54.246.223] ([65.54.246.223:9168] helo=bay0-omc3-s23.bay0.hotmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D7/41-24193-F3166254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 06:59:28 -0700
Received: from hotmail.com ([64.4.54.105]) by bay0-omc3-s23.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 6 Oct 2006 06:59:25 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 6 Oct 2006 06:59:24 -0700
Message-ID: <BAY20-F16D660F1E3BCA70086BD5481130@phx.gbl>
Received: from 128.210.160.12 by by20fd.bay20.hotmail.msn.com with HTTP;
	Fri, 06 Oct 2006 13:59:22 GMT
X-Originating-IP: [128.210.160.12]
X-Originating-Email: [lily_hh2003@hotmail.com]
X-Sender: lily_hh2003@hotmail.com
From: "lily yan" <lily_hh2003@hotmail.com>
To: java-user@lucene.apache.org
Bcc: 
Subject: Re: ask for a question about Lucene
Date: Fri, 06 Oct 2006 13:59:22 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 06 Oct 2006 13:59:24.0515 (UTC) FILETIME=[A156DB30:01C6E94F]
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erick,

Thanks for your advice. I guess your suggestion is right. Maybe it's more 
proper that I only use SQL query for now.

Regards,
lilyyan

>From: "Erick Erickson" <erickerickson@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: ask for a question about Lucene
>Date: Thu, 5 Oct 2006 20:00:07 -0400
>
>My gut feel is that, with 150 records, using Lucene is overkill. This
>assumes that your database already exists. You'd have to extract the data
>from the DB, store it in a lucene index, then worry about keeping them
>synchronized.
>
>I'd suggest, though, that the fastest way to satisfy yourself about this
>would be to create some SQL queries by hand, submit them to your database,
>and measure your response time. You could get a fair idea of whether your 
>DB
>was fast enough just by this experiment.
>
>Hope this helps
>Erick
>
>On 10/5/06, lily yan <lily_hh2003@hotmail.com> wrote:
>>
>>Hello ALL,
>>
>>i'm new to Lucene and wandering where i can start from Lucene? : )
>>
>>basically my application is: when user input some keywords (can be more
>>than
>>one words) within an academic research site, the output will be the
>>researchers' academic interests.
>>
>>there are will be a DB2 database that contains: (about 150 records in the
>>table)
>>
>>a.  researcher's name,
>>
>>b. academic research interests (data type might be long varchar)
>>
>>c.  research description (data type might be clob)
>>
>>d. a field called keywords used for searching (data type varchar)
>>
>>    etc...
>>
>>a java program will do the search based on the user's input.
>>
>>there will be two kinds of search: basic search and advance search based
>>on
>>user's choice
>>
>>for basic search, the program will do search within the "keyword" field of
>>the database.
>>
>>for advance search, the program will do search within the "academic
>>research
>>interests" field or
>>
>>"research description" field of the database.
>>
>>my questions:
>>
>>1. if user choose to do basic search, does the program need use Lucene?
>>
>>2. if user choose to do advance search, does  Lucene can be used to this
>>scenario?
>>
>>i mean will the datatype of the fields of the database matter if using
>>Lucene ? cause i will use both long varchar and clob.
>>
>>3. is this a good idea that i choose use Lucene for my application
>>scenario,
>>cause the database will only have 150 records.
>>
>>4. if i don't use Lucene, then basically the program will just do a
>>exhustive search in the database, right?
>>
>>Thanks again for answering my questions,
>>
>>lilyyan
>>
>>_________________________________________________________________
>>Express yourself - download free Windows Live Messenger themes!
>>
>>http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=http://imagine-msn.com/themes/vibe/default.aspx?locale=en-us&source=hmtagline
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

_________________________________________________________________
All-in-one security and maintenance for your PC. Get a free 90-day trial!  
http://clk.atdmt.com/MSN/go/msnnkwlo0050000001msn/direct/01/?href=http://www.windowsonecare.com/?sc_cid=msn_hotmail


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 14:50:58 2006
Return-Path: <java-user-return-23818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52158 invoked from network); 6 Oct 2006 14:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 14:50:58 -0000
Received: (qmail 42294 invoked by uid 500); 6 Oct 2006 14:50:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42273 invoked by uid 500); 6 Oct 2006 14:50:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42262 invoked by uid 99); 6 Oct 2006 14:50:51 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 07:50:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [128.230.18.29] ([128.230.18.29:3624] helo=mailer.syr.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 51/C2-24193-64D66254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 07:50:47 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.158F6779@mailer.syr.edu>; Fri, 6 Oct 2006 10:50:43 -0400
Message-ID: <45266D43.5040007@syr.edu>
Date: Fri, 06 Oct 2006 10:50:43 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Case sensitive / insensitive
References: <8834A84C87A2C148AD46921BB8BFC97C0280404D@S1SE1MAIL.emea1.ad.group>
In-Reply-To: <8834A84C87A2C148AD46921BB8BFC97C0280404D@S1SE1MAIL.emea1.ad.group>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Marcus Falck wrote:
> Any good approaches for allowing case sensitive and case insensitive
> searches?
>
> Except adding an additional field and skipping the LowerCaseFilter.
> Since this severely increases the index size (and the index already
> is around 1 TB).

Hi Marcus,

How about a filter that emits two token for non-fully-lowercase tokens:
first the original, and then the downcased version, and places both at
the same position.  This should minimize index growth.

Something like this (WARNING: Not Tested!!):

-----------begin DualCaseFilter.java-------------

package org.apache.lucene.analysis;

import java.io.IOException;

public final class DualCaseFilter extends TokenFilter {
  String downcasedPreviousToken = null;

  public DualCaseFilter(TokenStream input) {
    super(input);
  }

  public final Token next() throws IOException {
    if (downcasedPreviousToken != null) {
      Token t = downcasedPreviousToken;
      downcasedPreviousToken = null;
      return t;
    }
    Token t = input.next();
    if (t != null) {
      String downcased = t.termText.toLowerCase();
      if ( ! t.termText.equals(downcased)) {
        downcasedPreviousToken = t.clone();
        downcasedPreviousToken.termText = downcased;
        downcasedPreviousToken.setPositionIncrement(0);
      }
    }
    return t;
  }
}

-----------end DualCaseFilter.java-------------

Hope it helps,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 15:11:20 2006
Return-Path: <java-user-return-23819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58615 invoked from network); 6 Oct 2006 15:11:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 15:11:19 -0000
Received: (qmail 94024 invoked by uid 500); 6 Oct 2006 15:11:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93998 invoked by uid 500); 6 Oct 2006 15:11:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93987 invoked by uid 99); 6 Oct 2006 15:11:12 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 08:11:12 -0700
X-ASF-Spam-Status: No, hits=1.9 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
Received: from [130.88.13.7] ([130.88.13.7:2896] helo=curlew.cs.man.ac.uk)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AF/53-24193-A0276254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 08:11:08 -0700
Received: from gomwe.mcc.ac.uk ([10.2.18.2])
	by curlew.cs.man.ac.uk with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GVqKr-0003Xv-BY
	for java-user@lucene.apache.org; Fri, 06 Oct 2006 15:05:57 +0100
Received: from cspool34.cs.man.ac.uk ([130.88.195.134]:2714)
	by gomwe.mcc.ac.uk with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GVqKr-0003QP-4y
	for java-user@lucene.apache.org; Fri, 06 Oct 2006 15:05:57 +0100
Message-ID: <452662B5.8000905@yahoo.co.uk>
Date: Fri, 06 Oct 2006 15:05:41 +0100
From: Rahil <qamar_rahil@yahoo.co.uk>
Reply-To:  qamar_rahil@yahoo.co.uk
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.13) Gecko/20060414
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performing a like query
References: <451FAEF8.2000300@yahoo.co.uk>	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>	 <452045A4.8000501@yahoo.co.uk> <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com>
In-Reply-To: <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated-Sender: Rahil Qamar from cspool34.cs.man.ac.uk [130.88.195.134]:2714
X-Authenticated-From: R.Qamar@postgrad.manchester.ac.uk
X-UoM: Scanned by the University Mail System. See http://www.itservices.manchester.ac.uk/email/filtering/information/ for details.
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erick

Im having trouble with writing a good regular expression for the 
PatternAnalyzer to deal with word and non-word characters.I couldnt 
figure out a valid regular expression to write a valid 
Pattern.compile(String regex) which can tokenise a string into "O/E - 
visual acuity R-eye=6/24" into "O","/","E", "-", "visual", "acuity", 
"R", "-", "eye", "=", "6", "/", "24". Ive given it quite a few shots but 
am now totally frustrated with it. I can either tokenise at \W+ or \w+ 
but not both.

Could you please help.

Thanks a lot. Much appreciate it.

Regards
Rahil

Erick Erickson wrote:

> Well, I'm not the greatest expert, but a quick look doesn't show me 
> anything
> obvious. But I have to ask, wouldn't WhiteSpaceAnalyzer work for you?
> Although I don't remember whether WhiteSpaceAnalyzer lowercases or not.
>
> It sure looks like you're getting reasonable results given how you're
> tokenizing.
>
> If not that, you might want to think about PatternAnalyzer. It's in the
> memory contribution section, see import
> org.apache.lucene.index.memory.PatternAnalyzer. One note of caution, the
> regex identifies what is NOT a token, rather than what is. This threw 
> me for
> a bit.
>
> I still claim that you could break the tokens up like "6", "/", "12", and
> make SpanNearQuery work with a span of 0 (or 1, I don't remember right 
> now),
> but that may well be more trouble than it's worth, it's up to you of 
> course.
> What you get out of this is, essentially, is a query that's only 
> satisfied
> if the terms you specify are right next to each other. So you'd find both
> your documents in your example, since you would have tokenized "6", "/",
> "12" in, say positions 0, 1, 2 in doc1 and 4, 5, 6 in the second doc. But
> since they're tokens that are next to each other in each doc, 
> searching with
> a SpanNearQuery for "6", "/", and "12" that are "right next to each 
> other",
> which you specify with a slop of 0 as I remember you should get both.
>
> Alternatively, if you tokenize it this way, a PhraseQuery might work as
> well, Thus, searching for "6 / 12" (as a phrase query and note the 
> spaces)
> might be just what you want. You'd have to tokenize the query, but that's
> relatively easy. This is probably much simpler than a SpanNearQuery 
> now that
> I think about it.....
>
> Be aware that if you use the *TermEnums we've been talking about, you'll
> probably wind up wrapping them in a ConstantScoreQuery. And if you 
> have no
> *other* terms, you won't get any relevancy out of your search. This 
> may be
> important.....
>
> Anyway, that's as creative as I can be Sunday night <G>. Best of luck....
>
> Erick
>
> On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>
>>
>> Hi Erick
>>
>> Thanks for your response. There's a lot to chew on in your reply and Im
>> looking at the suggestions you've made.
>>
>> Yeah I have Luke installed and have queried my index but there isn't any
>> great explanation Im getting out of it.  A query for "6/12" is sent as
>> "TERM:6/12" which is quite straight-forward. I did an explanation of the
>> query in my code though and got some more information but that too
>> wasn't of much help either.
>> -- 
>> Explanation explain = searcher.explain(query,0);
>>
>> OUTPUT:
>> query: +TERM:6/12
>> explain.getDescription() : weight(TERM:6/12 in 0), product of:
>> Detail 0 : 0.99999994 = queryWeight(TERM:6/12), product of:
>>   2.0986123 = idf(docFreq=1)
>>   0.47650534 = queryNorm
>>
>> Detail 1 : 0.0 = fieldWeight(TERM:6/12 in 0), product of:
>>   0.0 = tf(termFreq(TERM:6/12)=0)
>>   2.0986123 = idf(docFreq=1)
>>   0.5 = fieldNorm(field=TERM, doc=0)
>>
>> Number of results returned: 1
>> SampleLucene.displayIndexResults
>> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>> 1.0    0    260278007    6/12 (finding)
>> -- 
>>
>> My tokeniser called BaseAnalyzer extends Analyzer. Since I wanted to
>> retain all non whitespace characters and not just letters and digits, I
>> introduced the following block of code in the overridden tokenStream( )
>>
>> -- 
>> public TokenStream tokenStream(String fieldName, Reader reader) {
>>
>>         return new CharTokenizer(reader) {
>>
>>             protected char normalize(char c) {
>>                      return Character.toLowerCase(c);
>>             }
>>                 protected boolean isTokenChar(char c) {
>>                        boolean type = false;
>>                        boolean space =   Character.isWhitespace(c);
>>                        boolean letDig =  Character.isLetterOrDigit(c);
>>
>>                         if(letDig && !space) //letter or digit but not
>> whitespace
>>                             type = true;
>>                         else if(!letDig && !space)   //not letter,digit
>> or whitespace (retain non-whitespace characters)
>>                             type = true;
>>                         else if( !letDig && space)              //is not
>> a letter or digit but is a whitespace
>>                             type = false;
>>                 return type;
>>             }
>>         };
>>       }
>>
>> ---
>> The problem is that when the term "6/12 (finding)" is tokenised, two
>> tokens are generated viz. '6/12' and '(finding)'. Therefore when I
>> search for '6/12' this term is returned as in a way it is an EXACT token
>> match.
>>
>> However when the term "R-eye=6/12 (finding)" is tokenised it again
>> results in two tokens viz. 'R-eye=6/12' and '(finding)'. So now if I
>> look for '6/12' its no more an exact match since there is no token with
>> this EXACT value. A simple searcher.search(query) isnt useful to pull
>> out the partial token match.
>>
>> I think it wont be useful to create separate tokens for "6", "/", "12"
>> or "R","-","eye","=", and so on. Im having a look at the RegexTermEnum
>> and WildcardTermEnum as they might possibily help.
>>
>> Would appreciate your comments on the BaseAnalyzer tokenizer and query
>> explanation Ive received so far.
>>
>> Thanks
>> Rahil
>>
>> Erick Erickson wrote:
>>
>> > Most often, from what I've seen on this e-mail list, unexpected
>> > results are
>> > because you're not indexing on the tokens you *think* you're indexing.
>> Or
>> > not searching on them. By that I mean that the analyzers you're using
>> are
>> > behaving in ways you don't expect.
>> >
>> > That said, I think you're getting exactly what you should. I suspect
>> > you're
>> > indexing tokens as follows
>> > doc1: "6/12"  and "(finding)"
>> > doc2: "R-eye=6/12" and "(finding)"
>> >
>> > So it makes perfect sense that searching in 6/12 returns doc1 and
>> > search on
>> > R-eye=6/12 returns doc 2
>> >
>> > So, first question: Have you actually used something like Luke (google
>> > luke
>> > lucene) to examine your index and see if what you've put in there is
>> what
>> > you expect? What analyzer is your custom analyzer built upon and is it
>> > doing
>> > anything you're unaware of (for instance, lower-casing the 'R' in your
>> > second example)?
>> >
>> > Here's what I'd do.
>> > 1> get Luke and see what's actually in your index.
>> > 2> use searcher.explain (?) to see the query you're actually emitting.
>> > 3> if you make no headway, post the smallest code snippets you can 
>> that
>> > illustrate the problem. Folks would need the indexing AND searching
>> code.
>> >
>> > As far as queryies like "contains" in java.... Well sure. Write a 
>> filter
>> > that filters on regular expressions or wildcards (you'll need
>> > WildcardTermEnum and RegexTermEnum). Or index things differently (e.g.
>> > index
>> > "6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on
>> > doc 2.
>> > Now your searches for "6/12" will work. Or index "6" "/", "12" and
>> > "finding"
>> > on doc1, index similarly for doc2, and use a SpanNearQuery with an
>> > appropriate span value. Or....
>> >
>> > This is all gobbldeygook if you haven't gotten a copy of "Lucene In
>> > Action",
>> > which you should read in order to get the most out of Lucene. It's for
>> > the
>> > 1.4 code base, but the 2.0 Lucene code base isn't that much different.
>> > More
>> > importantly, it ties lots of stuff together. Also, the junit tests
>> > that come
>> > along with the Lucene code can be invaluable to show you how to do
>> > something.
>> >
>> > Hope this helps
>> > Erick
>> >
>> > On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>> >
>> >>
>> >> Hi
>> >>
>> >> I have a custom-built Analyzer where I tokenize all non-whitespace
>> >> characters as well available in the field "TERM" (which is the only
>> >> field being tokenised).
>> >>
>> >> If I now query my index file for a term "6/12" for instance, I get 
>> back
>> >> only ONE result
>> >>
>> >> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>> >> 1.0    0    260278007    6/12 (finding)
>> >>
>> >> instead of TWO. There is another token in the index file of the form
>> >>
>> >> 2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en
>> >>
>> >> At first it wasn't quite obvious to me why this was happening. But
>> after
>> >> playing around a bit I realised that if I pass a query "R-eye=6/12"
>> >> instead, I will get this second result (but not the first one 
>> now). Is
>> >> there a way to tweak the  Query query = parser.parse(searchString)
>> >> method so that I can get both the records if I query for "6/12".
>> >> Something like a 'contains' query in Java.
>> >>
>> >> Will appreciate all help. Thanks a lot
>> >>
>> >> Regards
>> >> Rahil
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 16:25:15 2006
Return-Path: <java-user-return-23820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81709 invoked from network); 6 Oct 2006 16:25:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 16:25:15 -0000
Received: (qmail 51430 invoked by uid 500); 6 Oct 2006 16:25:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51386 invoked by uid 500); 6 Oct 2006 16:25:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51374 invoked by uid 99); 6 Oct 2006 16:25:07 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 09:25:07 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:18944] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 71/75-24193-F5386254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 09:25:04 -0700
Received: by py-out-1112.google.com with SMTP id s49so1074524pyc
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 09:25:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KHUxbL770ziMroIowDFGeTnRruYZW592h7bUP2Wt7Y5Db3KQt66L1HxaImn6jTTdFBHEltD9IFFjtpPtYlg+hJ15MHdkk/ZQUF1QpDlqujpwVdSEyPoGufsJNpemMoFJpMu5oMOJK1itDPAY5yX/Vdr0Ytmf6yOf7GmIoQ4pqDQ=
Received: by 10.35.103.1 with SMTP id f1mr6267524pym;
        Fri, 06 Oct 2006 09:24:59 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Fri, 6 Oct 2006 09:24:58 -0700 (PDT)
Message-ID: <359a92830610060924n5e8c0923odcd5116b871ab0be@mail.gmail.com>
Date: Fri, 6 Oct 2006 12:24:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, qamar_rahil@yahoo.co.uk
Subject: Re: Performing a like query
In-Reply-To: <452662B5.8000905@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8416_10497351.1160151899531"
References: <451FAEF8.2000300@yahoo.co.uk>
	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>
	 <452045A4.8000501@yahoo.co.uk>
	 <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com>
	 <452662B5.8000905@yahoo.co.uk>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8416_10497351.1160151899531
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My intuition is that you'll have a real problem using regular expressions.
It'll either be incredibly ugly (and unmaintainable) or just won't work
since the regular expression tools tend to throw out the delimiters.

I think you'll be much better off writing your own analyzer (see LIA, the
synonym injector code for a model, although you probably won't want the gap
to be 0). The analyzer will just march down the string, and return the first
part of the line up to the delimiter. And return the delimiter if that's the
first thing in the line. Logically, it looks kinda like this:

1st call: returns R, preserves the rest (/E - visual acuity R-eye=6/24)
2nd call. recognizes that the line starts with a delimiter and returns that,
preserving (E - visual acuity R-eye=6/24)
& etc.


The only real question is whether you really want to preserve the delimiters
or whether that's unnecessary. Remember that if you use the same analyzer in
both indexing and querying (with a few subtlties), you get the same token
stream. Whether that works for you depends upon whether the delimiters hold
information, and their presence/absence alters the meaning of the field.

Not a huge help, but all I can come up with.

Good luck
Erick

On 10/6/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>
> Hi Erick
>
> Im having trouble with writing a good regular expression for the
> PatternAnalyzer to deal with word and non-word characters.I couldnt
> figure out a valid regular expression to write a valid
> Pattern.compile(String regex) which can tokenise a string into "O/E -
> visual acuity R-eye=6/24" into "O","/","E", "-", "visual", "acuity",
> "R", "-", "eye", "=", "6", "/", "24". Ive given it quite a few shots but
> am now totally frustrated with it. I can either tokenise at \W+ or \w+
> but not both.
>
> Could you please help.
>
> Thanks a lot. Much appreciate it.
>
> Regards
> Rahil
>
> Erick Erickson wrote:
>
> > Well, I'm not the greatest expert, but a quick look doesn't show me
> > anything
> > obvious. But I have to ask, wouldn't WhiteSpaceAnalyzer work for you?
> > Although I don't remember whether WhiteSpaceAnalyzer lowercases or not.
> >
> > It sure looks like you're getting reasonable results given how you're
> > tokenizing.
> >
> > If not that, you might want to think about PatternAnalyzer. It's in the
> > memory contribution section, see import
> > org.apache.lucene.index.memory.PatternAnalyzer. One note of caution, the
> > regex identifies what is NOT a token, rather than what is. This threw
> > me for
> > a bit.
> >
> > I still claim that you could break the tokens up like "6", "/", "12",
> and
> > make SpanNearQuery work with a span of 0 (or 1, I don't remember right
> > now),
> > but that may well be more trouble than it's worth, it's up to you of
> > course.
> > What you get out of this is, essentially, is a query that's only
> > satisfied
> > if the terms you specify are right next to each other. So you'd find
> both
> > your documents in your example, since you would have tokenized "6", "/",
> > "12" in, say positions 0, 1, 2 in doc1 and 4, 5, 6 in the second doc.
> But
> > since they're tokens that are next to each other in each doc,
> > searching with
> > a SpanNearQuery for "6", "/", and "12" that are "right next to each
> > other",
> > which you specify with a slop of 0 as I remember you should get both.
> >
> > Alternatively, if you tokenize it this way, a PhraseQuery might work as
> > well, Thus, searching for "6 / 12" (as a phrase query and note the
> > spaces)
> > might be just what you want. You'd have to tokenize the query, but
> that's
> > relatively easy. This is probably much simpler than a SpanNearQuery
> > now that
> > I think about it.....
> >
> > Be aware that if you use the *TermEnums we've been talking about, you'll
> > probably wind up wrapping them in a ConstantScoreQuery. And if you
> > have no
> > *other* terms, you won't get any relevancy out of your search. This
> > may be
> > important.....
> >
> > Anyway, that's as creative as I can be Sunday night <G>. Best of
> luck....
> >
> > Erick
> >
> > On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
> >
> >>
> >> Hi Erick
> >>
> >> Thanks for your response. There's a lot to chew on in your reply and Im
> >> looking at the suggestions you've made.
> >>
> >> Yeah I have Luke installed and have queried my index but there isn't
> any
> >> great explanation Im getting out of it.  A query for "6/12" is sent as
> >> "TERM:6/12" which is quite straight-forward. I did an explanation of
> the
> >> query in my code though and got some more information but that too
> >> wasn't of much help either.
> >> --
> >> Explanation explain = searcher.explain(query,0);
> >>
> >> OUTPUT:
> >> query: +TERM:6/12
> >> explain.getDescription() : weight(TERM:6/12 in 0), product of:
> >> Detail 0 : 0.99999994 = queryWeight(TERM:6/12), product of:
> >>   2.0986123 = idf(docFreq=1)
> >>   0.47650534 = queryNorm
> >>
> >> Detail 1 : 0.0 = fieldWeight(TERM:6/12 in 0), product of:
> >>   0.0 = tf(termFreq(TERM:6/12)=0)
> >>   2.0986123 = idf(docFreq=1)
> >>   0.5 = fieldNorm(field=TERM, doc=0)
> >>
> >> Number of results returned: 1
> >> SampleLucene.displayIndexResults
> >> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
> >> 1.0    0    260278007    6/12 (finding)
> >> --
> >>
> >> My tokeniser called BaseAnalyzer extends Analyzer. Since I wanted to
> >> retain all non whitespace characters and not just letters and digits, I
> >> introduced the following block of code in the overridden tokenStream( )
> >>
> >> --
> >> public TokenStream tokenStream(String fieldName, Reader reader) {
> >>
> >>         return new CharTokenizer(reader) {
> >>
> >>             protected char normalize(char c) {
> >>                      return Character.toLowerCase(c);
> >>             }
> >>                 protected boolean isTokenChar(char c) {
> >>                        boolean type = false;
> >>                        boolean space =   Character.isWhitespace(c);
> >>                        boolean letDig =  Character.isLetterOrDigit(c);
> >>
> >>                         if(letDig && !space) //letter or digit but not
> >> whitespace
> >>                             type = true;
> >>                         else if(!letDig && !space)   //not letter,digit
> >> or whitespace (retain non-whitespace characters)
> >>                             type = true;
> >>                         else if( !letDig && space)              //is
> not
> >> a letter or digit but is a whitespace
> >>                             type = false;
> >>                 return type;
> >>             }
> >>         };
> >>       }
> >>
> >> ---
> >> The problem is that when the term "6/12 (finding)" is tokenised, two
> >> tokens are generated viz. '6/12' and '(finding)'. Therefore when I
> >> search for '6/12' this term is returned as in a way it is an EXACT
> token
> >> match.
> >>
> >> However when the term "R-eye=6/12 (finding)" is tokenised it again
> >> results in two tokens viz. 'R-eye=6/12' and '(finding)'. So now if I
> >> look for '6/12' its no more an exact match since there is no token with
> >> this EXACT value. A simple searcher.search(query) isnt useful to pull
> >> out the partial token match.
> >>
> >> I think it wont be useful to create separate tokens for "6", "/", "12"
> >> or "R","-","eye","=", and so on. Im having a look at the RegexTermEnum
> >> and WildcardTermEnum as they might possibily help.
> >>
> >> Would appreciate your comments on the BaseAnalyzer tokenizer and query
> >> explanation Ive received so far.
> >>
> >> Thanks
> >> Rahil
> >>
> >> Erick Erickson wrote:
> >>
> >> > Most often, from what I've seen on this e-mail list, unexpected
> >> > results are
> >> > because you're not indexing on the tokens you *think* you're
> indexing.
> >> Or
> >> > not searching on them. By that I mean that the analyzers you're using
> >> are
> >> > behaving in ways you don't expect.
> >> >
> >> > That said, I think you're getting exactly what you should. I suspect
> >> > you're
> >> > indexing tokens as follows
> >> > doc1: "6/12"  and "(finding)"
> >> > doc2: "R-eye=6/12" and "(finding)"
> >> >
> >> > So it makes perfect sense that searching in 6/12 returns doc1 and
> >> > search on
> >> > R-eye=6/12 returns doc 2
> >> >
> >> > So, first question: Have you actually used something like Luke
> (google
> >> > luke
> >> > lucene) to examine your index and see if what you've put in there is
> >> what
> >> > you expect? What analyzer is your custom analyzer built upon and is
> it
> >> > doing
> >> > anything you're unaware of (for instance, lower-casing the 'R' in
> your
> >> > second example)?
> >> >
> >> > Here's what I'd do.
> >> > 1> get Luke and see what's actually in your index.
> >> > 2> use searcher.explain (?) to see the query you're actually
> emitting.
> >> > 3> if you make no headway, post the smallest code snippets you can
> >> that
> >> > illustrate the problem. Folks would need the indexing AND searching
> >> code.
> >> >
> >> > As far as queryies like "contains" in java.... Well sure. Write a
> >> filter
> >> > that filters on regular expressions or wildcards (you'll need
> >> > WildcardTermEnum and RegexTermEnum). Or index things differently (e.g
> .
> >> > index
> >> > "6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on
> >> > doc 2.
> >> > Now your searches for "6/12" will work. Or index "6" "/", "12" and
> >> > "finding"
> >> > on doc1, index similarly for doc2, and use a SpanNearQuery with an
> >> > appropriate span value. Or....
> >> >
> >> > This is all gobbldeygook if you haven't gotten a copy of "Lucene In
> >> > Action",
> >> > which you should read in order to get the most out of Lucene. It's
> for
> >> > the
> >> > 1.4 code base, but the 2.0 Lucene code base isn't that much
> different.
> >> > More
> >> > importantly, it ties lots of stuff together. Also, the junit tests
> >> > that come
> >> > along with the Lucene code can be invaluable to show you how to do
> >> > something.
> >> >
> >> > Hope this helps
> >> > Erick
> >> >
> >> > On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
> >> >
> >> >>
> >> >> Hi
> >> >>
> >> >> I have a custom-built Analyzer where I tokenize all non-whitespace
> >> >> characters as well available in the field "TERM" (which is the only
> >> >> field being tokenised).
> >> >>
> >> >> If I now query my index file for a term "6/12" for instance, I get
> >> back
> >> >> only ONE result
> >> >>
> >> >> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
> >> >> 1.0    0    260278007    6/12 (finding)
> >> >>
> >> >> instead of TWO. There is another token in the index file of the form
> >> >>
> >> >> 2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en
> >> >>
> >> >> At first it wasn't quite obvious to me why this was happening. But
> >> after
> >> >> playing around a bit I realised that if I pass a query "R-eye=6/12"
> >> >> instead, I will get this second result (but not the first one
> >> now). Is
> >> >> there a way to tweak the  Query query = parser.parse(searchString)
> >> >> method so that I can get both the records if I query for "6/12".
> >> >> Something like a 'contains' query in Java.
> >> >>
> >> >> Will appreciate all help. Thanks a lot
> >> >>
> >> >> Regards
> >> >> Rahil
> >> >>
> >> >>
> >> >>
> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8416_10497351.1160151899531--

From java-user-return-23821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 16:30:32 2006
Return-Path: <java-user-return-23821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83222 invoked from network); 6 Oct 2006 16:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 16:30:31 -0000
Received: (qmail 59054 invoked by uid 500); 6 Oct 2006 16:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59031 invoked by uid 500); 6 Oct 2006 16:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59020 invoked by uid 99); 6 Oct 2006 16:30:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 09:30:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [128.230.18.29] ([128.230.18.29:4311] helo=mailer.syr.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F5/95-24193-C9486254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 09:30:21 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.158F764D@mailer.syr.edu>; Fri, 6 Oct 2006 12:30:18 -0400
Message-ID: <45268499.8030105@syr.edu>
Date: Fri, 06 Oct 2006 12:30:17 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performing a like query
References: <451FAEF8.2000300@yahoo.co.uk>	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>	 <452045A4.8000501@yahoo.co.uk> <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com> <452662B5.8000905@yahoo.co.uk>
In-Reply-To: <452662B5.8000905@yahoo.co.uk>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Rahil,

Rahil wrote:
> I couldnt figure out a valid regular expression to write a valid 
> Pattern.compile(String regex) which can tokenise a string into "O/E -
> visual acuity R-eye=6/24" into "O","/","E", "-", "visual", "acuity",
> "R", "-", "eye", "=", "6", "/", "24".

The following regular expression should match boundaries between word
and non-word, or between space and non-space, in either order, and
includes contiguous whitespace:

   \s*(?:\b|(?<=\S)(?=\s)|(?<=\s)(?=\S))\s*

Note that with the above regex, the "(%$#!)" in "some (%$#!) text" will
be tokenized as a single token.

Hope it helps,
Steve

> Erick Erickson wrote:
> 
>> Well, I'm not the greatest expert, but a quick look doesn't show me
>> anything
>> obvious. But I have to ask, wouldn't WhiteSpaceAnalyzer work for you?
>> Although I don't remember whether WhiteSpaceAnalyzer lowercases or not.
>>
>> It sure looks like you're getting reasonable results given how you're
>> tokenizing.
>>
>> If not that, you might want to think about PatternAnalyzer. It's in the
>> memory contribution section, see import
>> org.apache.lucene.index.memory.PatternAnalyzer. One note of caution, the
>> regex identifies what is NOT a token, rather than what is. This threw
>> me for
>> a bit.
>>
>> I still claim that you could break the tokens up like "6", "/", "12", and
>> make SpanNearQuery work with a span of 0 (or 1, I don't remember right
>> now),
>> but that may well be more trouble than it's worth, it's up to you of
>> course.
>> What you get out of this is, essentially, is a query that's only
>> satisfied
>> if the terms you specify are right next to each other. So you'd find both
>> your documents in your example, since you would have tokenized "6", "/",
>> "12" in, say positions 0, 1, 2 in doc1 and 4, 5, 6 in the second doc. But
>> since they're tokens that are next to each other in each doc,
>> searching with
>> a SpanNearQuery for "6", "/", and "12" that are "right next to each
>> other",
>> which you specify with a slop of 0 as I remember you should get both.
>>
>> Alternatively, if you tokenize it this way, a PhraseQuery might work as
>> well, Thus, searching for "6 / 12" (as a phrase query and note the
>> spaces)
>> might be just what you want. You'd have to tokenize the query, but that's
>> relatively easy. This is probably much simpler than a SpanNearQuery
>> now that
>> I think about it.....
>>
>> Be aware that if you use the *TermEnums we've been talking about, you'll
>> probably wind up wrapping them in a ConstantScoreQuery. And if you
>> have no
>> *other* terms, you won't get any relevancy out of your search. This
>> may be
>> important.....
>>
>> Anyway, that's as creative as I can be Sunday night <G>. Best of luck....
>>
>> Erick
>>
>> On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>>
>>>
>>> Hi Erick
>>>
>>> Thanks for your response. There's a lot to chew on in your reply and Im
>>> looking at the suggestions you've made.
>>>
>>> Yeah I have Luke installed and have queried my index but there isn't any
>>> great explanation Im getting out of it.  A query for "6/12" is sent as
>>> "TERM:6/12" which is quite straight-forward. I did an explanation of the
>>> query in my code though and got some more information but that too
>>> wasn't of much help either.
>>> -- 
>>> Explanation explain = searcher.explain(query,0);
>>>
>>> OUTPUT:
>>> query: +TERM:6/12
>>> explain.getDescription() : weight(TERM:6/12 in 0), product of:
>>> Detail 0 : 0.99999994 = queryWeight(TERM:6/12), product of:
>>>   2.0986123 = idf(docFreq=1)
>>>   0.47650534 = queryNorm
>>>
>>> Detail 1 : 0.0 = fieldWeight(TERM:6/12 in 0), product of:
>>>   0.0 = tf(termFreq(TERM:6/12)=0)
>>>   2.0986123 = idf(docFreq=1)
>>>   0.5 = fieldNorm(field=TERM, doc=0)
>>>
>>> Number of results returned: 1
>>> SampleLucene.displayIndexResults
>>> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>>> 1.0    0    260278007    6/12 (finding)
>>> -- 
>>>
>>> My tokeniser called BaseAnalyzer extends Analyzer. Since I wanted to
>>> retain all non whitespace characters and not just letters and digits, I
>>> introduced the following block of code in the overridden tokenStream( )
>>>
>>> -- 
>>> public TokenStream tokenStream(String fieldName, Reader reader) {
>>>
>>>         return new CharTokenizer(reader) {
>>>
>>>             protected char normalize(char c) {
>>>                      return Character.toLowerCase(c);
>>>             }
>>>                 protected boolean isTokenChar(char c) {
>>>                        boolean type = false;
>>>                        boolean space =   Character.isWhitespace(c);
>>>                        boolean letDig =  Character.isLetterOrDigit(c);
>>>
>>>                         if(letDig && !space) //letter or digit but not
>>> whitespace
>>>                             type = true;
>>>                         else if(!letDig && !space)   //not letter,digit
>>> or whitespace (retain non-whitespace characters)
>>>                             type = true;
>>>                         else if( !letDig && space)              //is not
>>> a letter or digit but is a whitespace
>>>                             type = false;
>>>                 return type;
>>>             }
>>>         };
>>>       }
>>>
>>> ---
>>> The problem is that when the term "6/12 (finding)" is tokenised, two
>>> tokens are generated viz. '6/12' and '(finding)'. Therefore when I
>>> search for '6/12' this term is returned as in a way it is an EXACT token
>>> match.
>>>
>>> However when the term "R-eye=6/12 (finding)" is tokenised it again
>>> results in two tokens viz. 'R-eye=6/12' and '(finding)'. So now if I
>>> look for '6/12' its no more an exact match since there is no token with
>>> this EXACT value. A simple searcher.search(query) isnt useful to pull
>>> out the partial token match.
>>>
>>> I think it wont be useful to create separate tokens for "6", "/", "12"
>>> or "R","-","eye","=", and so on. Im having a look at the RegexTermEnum
>>> and WildcardTermEnum as they might possibily help.
>>>
>>> Would appreciate your comments on the BaseAnalyzer tokenizer and query
>>> explanation Ive received so far.
>>>
>>> Thanks
>>> Rahil
>>>
>>> Erick Erickson wrote:
>>>
>>> > Most often, from what I've seen on this e-mail list, unexpected
>>> > results are
>>> > because you're not indexing on the tokens you *think* you're indexing.
>>> Or
>>> > not searching on them. By that I mean that the analyzers you're using
>>> are
>>> > behaving in ways you don't expect.
>>> >
>>> > That said, I think you're getting exactly what you should. I suspect
>>> > you're
>>> > indexing tokens as follows
>>> > doc1: "6/12"  and "(finding)"
>>> > doc2: "R-eye=6/12" and "(finding)"
>>> >
>>> > So it makes perfect sense that searching in 6/12 returns doc1 and
>>> > search on
>>> > R-eye=6/12 returns doc 2
>>> >
>>> > So, first question: Have you actually used something like Luke (google
>>> > luke
>>> > lucene) to examine your index and see if what you've put in there is
>>> what
>>> > you expect? What analyzer is your custom analyzer built upon and is it
>>> > doing
>>> > anything you're unaware of (for instance, lower-casing the 'R' in your
>>> > second example)?
>>> >
>>> > Here's what I'd do.
>>> > 1> get Luke and see what's actually in your index.
>>> > 2> use searcher.explain (?) to see the query you're actually emitting.
>>> > 3> if you make no headway, post the smallest code snippets you can
>>> that
>>> > illustrate the problem. Folks would need the indexing AND searching
>>> code.
>>> >
>>> > As far as queryies like "contains" in java.... Well sure. Write a
>>> filter
>>> > that filters on regular expressions or wildcards (you'll need
>>> > WildcardTermEnum and RegexTermEnum). Or index things differently (e.g.
>>> > index
>>> > "6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on
>>> > doc 2.
>>> > Now your searches for "6/12" will work. Or index "6" "/", "12" and
>>> > "finding"
>>> > on doc1, index similarly for doc2, and use a SpanNearQuery with an
>>> > appropriate span value. Or....
>>> >
>>> > This is all gobbldeygook if you haven't gotten a copy of "Lucene In
>>> > Action",
>>> > which you should read in order to get the most out of Lucene. It's for
>>> > the
>>> > 1.4 code base, but the 2.0 Lucene code base isn't that much different.
>>> > More
>>> > importantly, it ties lots of stuff together. Also, the junit tests
>>> > that come
>>> > along with the Lucene code can be invaluable to show you how to do
>>> > something.
>>> >
>>> > Hope this helps
>>> > Erick
>>> >
>>> > On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>>> >
>>> >>
>>> >> Hi
>>> >>
>>> >> I have a custom-built Analyzer where I tokenize all non-whitespace
>>> >> characters as well available in the field "TERM" (which is the only
>>> >> field being tokenised).
>>> >>
>>> >> If I now query my index file for a term "6/12" for instance, I get
>>> back
>>> >> only ONE result
>>> >>
>>> >> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>>> >> 1.0    0    260278007    6/12 (finding)
>>> >>
>>> >> instead of TWO. There is another token in the index file of the form
>>> >>
>>> >> 2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en
>>> >>
>>> >> At first it wasn't quite obvious to me why this was happening. But
>>> after
>>> >> playing around a bit I realised that if I pass a query "R-eye=6/12"
>>> >> instead, I will get this second result (but not the first one
>>> now). Is
>>> >> there a way to tweak the  Query query = parser.parse(searchString)
>>> >> method so that I can get both the records if I query for "6/12".
>>> >> Something like a 'contains' query in Java.
>>> >>
>>> >> Will appreciate all help. Thanks a lot
>>> >>
>>> >> Regards
>>> >> Rahil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 16:37:44 2006
Return-Path: <java-user-return-23822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85448 invoked from network); 6 Oct 2006 16:37:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 16:37:43 -0000
Received: (qmail 74744 invoked by uid 500); 6 Oct 2006 16:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74719 invoked by uid 500); 6 Oct 2006 16:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74708 invoked by uid 99); 6 Oct 2006 16:37:37 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 09:37:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [128.230.18.29] ([128.230.18.29:4763] helo=mailer.syr.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 52/C5-24193-E4686254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 09:37:34 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.158F771A@mailer.syr.edu>; Fri, 6 Oct 2006 12:37:31 -0400
Message-ID: <4526864A.5060106@syr.edu>
Date: Fri, 06 Oct 2006 12:37:30 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performing a like query
References: <451FAEF8.2000300@yahoo.co.uk>	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>	 <452045A4.8000501@yahoo.co.uk> <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com> <452662B5.8000905@yahoo.co.uk> <45268499.8030105@syr.edu>
In-Reply-To: <45268499.8030105@syr.edu>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Steven Rowe wrote:
>    \s*(?:\b|(?<=\S)(?=\s)|(?<=\s)(?=\S))\s*

Oops, here's an improved version to cover the beginning- and
end-of-string non-alphanumeric cases (E.g. "=some text-"):

    \s*(?:\b|(?<=\S)(?=\s)|(?<=\s)(?=\S)|\A|\z)\s*

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 17:26:07 2006
Return-Path: <java-user-return-23823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2513 invoked from network); 6 Oct 2006 17:26:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 17:26:07 -0000
Received: (qmail 61632 invoked by uid 500); 6 Oct 2006 17:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61605 invoked by uid 500); 6 Oct 2006 17:26:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61594 invoked by uid 99); 6 Oct 2006 17:26:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 10:26:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [65.39.152.239] ([65.39.152.239:42311] helo=white.metrobridge.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C9/17-24193-3A196254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 10:25:57 -0700
Received: from [10.10.1.163] (unknown [66.119.182.210])
	by white.metrobridge.net (Postfix) with ESMTP id 6E85995C0C1
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 08:57:30 -0700 (PDT)
Message-ID: <4526917E.9000109@elasticpath.com>
Date: Fri, 06 Oct 2006 10:25:18 -0700
From: Ryan Heinen <ryan.heinen@elasticpath.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Force a query to match at least two clauses
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

If I want make sure that only documents that contain at least two of the 
N TermQueries A, B, C, and D (N=4) are considered matches, what is the 
best way to approach this? I know I can expand it out into several 
boolean clauses like so:

(+A +B) (+A +C) (+A +D) (+B +C) (+B +D) (+C +D)

But unfortunately that doesn't really scale well as N increases. Also a 
solution where the minimum number of clauses to match is variable would 
be ideal.

Does anyone know of a way to accomplish this?

Thanks,

Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 17:41:32 2006
Return-Path: <java-user-return-23824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8040 invoked from network); 6 Oct 2006 17:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 17:41:31 -0000
Received: (qmail 82699 invoked by uid 500); 6 Oct 2006 17:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82673 invoked by uid 500); 6 Oct 2006 17:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82662 invoked by uid 99); 6 Oct 2006 17:41:25 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 10:41:25 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.189] ([64.233.182.189:32594] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B6/87-24193-04596254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 10:41:21 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1120441nfe
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 10:41:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LujKkVBHJYIZU1yIKCA+SV9XXLInAjRWjS8mJYRETcA5tNCymK35Qwfhf+oOXMbgGVb8B3r1B5BqPBAdWP/9ecnrppHrqjh3EMk9oCwCnEx1NnZUi6j9dLgjFP24XxC6xhJ/AuAsX0LCiI6dN1SJNiRTO5jrHCwLRHHLcZalI6k=
Received: by 10.82.105.13 with SMTP id d13mr228217buc;
        Fri, 06 Oct 2006 10:41:17 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Fri, 6 Oct 2006 10:41:16 -0700 (PDT)
Message-ID: <6e3ae6310610061041g7fbb7ccbpf232d55337cf4826@mail.gmail.com>
Date: Fri, 6 Oct 2006 10:41:17 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ask for a question about Lucene
In-Reply-To: <BAY20-F2C71AC43FB0EA885C8FF281130@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BAY20-F2C71AC43FB0EA885C8FF281130@phx.gbl>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's java based J2EE application. It can search any database that has
a jdbc driver. You just need to put a DB2 jdbc driver in the directory
and change the configuration file. You can talk to me directly if you
have more specific questions.

Chris Lu
---------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/6/06, lily yan <lily_hh2003@hotmail.com> wrote:
> Hello Chris Lu,
>
> Thanks very much for your reply. The DBSight is a very cool search tool.
> Just got two question: is this a java-based application? it seems that
> DBSight doesn't support DB2 database?
>
> Regards,
> lilyyan
>
>
> >From: "Chris Lu" <chris.lu@gmail.com>
> >Reply-To: java-user@lucene.apache.org
> >To: java-user@lucene.apache.org
> >Subject: Re: ask for a question about Lucene
> >Date: Thu, 5 Oct 2006 22:02:06 -0700
> >
> >You can use DBSight. It's free for your data. And you just need to
> >follow this example you will know how to use it, no java coding
> >needed. And you can schedule jobs to synchronize with the database.
> >
> >http://wiki.dbsight.com/index.php?title=3DStep_by_step
> >
> >The website is:
> >http://www.dbsight.net
> >
> >Chris Lu
> >---------------------------------
> >Instant Lucene Search on Any Database/Application
> >http://www.dbsight.net
> >
> >On 10/5/06, lily yan <lily_hh2003@hotmail.com> wrote:
> >>Hello ALL,
> >>
> >>i'm new to Lucene and wandering where i can start from Lucene? : )
> >>
> >>basically my application is: when user input some keywords (can be more
> >>than
> >>one words) within an academic research site, the output will be the
> >>researchers' academic interests.
> >>
> >>there are will be a DB2 database that contains: (about 150 records in t=
he
> >>table)
> >>
> >>a.  researcher's name,
> >>
> >>b. academic research interests (data type might be long varchar)
> >>
> >>c.  research description (data type might be clob)
> >>
> >>d. a field called keywords used for searching (data type varchar)
> >>
> >>    etc...
> >>
> >>a java program will do the search based on the user's input.
> >>
> >>there will be two kinds of search: basic search and advance search base=
d
> >>on
> >>user's choice
> >>
> >>for basic search, the program will do search within the "keyword" field=
 of
> >>the database.
> >>
> >>for advance search, the program will do search within the "academic
> >>research
> >>interests" field or
> >>
> >>"research description" field of the database.
> >>
> >>my questions:
> >>
> >>1. if user choose to do basic search, does the program need use Lucene?
> >>
> >>2. if user choose to do advance search, does  Lucene can be used to thi=
s
> >>scenario?
> >>
> >>i mean will the datatype of the fields of the database matter if using
> >>Lucene ? cause i will use both long varchar and clob.
> >>
> >>3. is this a good idea that i choose use Lucene for my application
> >>scenario,
> >>cause the database will only have 150 records.
> >>
> >>4. if i don't use Lucene, then basically the program will just do a
> >>exhustive search in the database, right?
> >>
> >>Thanks again for answering my questions,
> >>
> >>lilyyan
> >>
> >>_________________________________________________________________
> >>Express yourself - download free Windows Live Messenger themes!
> >>http://clk.atdmt.com/MSN/go/msnnkwme0020000001msn/direct/01/?href=3Dhtt=
p://imagine-msn.com/themes/vibe/default.aspx?locale=3Den-us&source=3Dhmtagl=
ine
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> _________________________________________________________________
> Search=97Your way, your world, right now!
> http://imagine-windowslive.com/minisites/searchlaunch/?locale=3Den-us&FOR=
M=3DWLMTAG
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 17:47:24 2006
Return-Path: <java-user-return-23825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10503 invoked from network); 6 Oct 2006 17:47:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 17:47:24 -0000
Received: (qmail 94822 invoked by uid 500); 6 Oct 2006 17:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94791 invoked by uid 500); 6 Oct 2006 17:47:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94765 invoked by uid 99); 6 Oct 2006 17:47:21 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 10:47:21 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=yseeley@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.190] ([64.233.182.190:39645] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id C0/B7-24193-6A696254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 10:47:19 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1121987nfe
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 10:47:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Pw5iizE2VYoO19J4OvrLQi06Kt6Bq36FX/vxMNMsV2mEp6l/i/vRKn+WRxMeo5gBodWhGTybBC5JmI0CmbB5dzZQvav7DhbTLoAR2I6rb3vwauwBfllQcImwW4/xBXIFs3rh+AmA44Cozq6fa6fnMNKXklj2Psxc+ozFBGzYlIs=
Received: by 10.82.120.14 with SMTP id s14mr226836buc;
        Fri, 06 Oct 2006 10:47:15 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Fri, 6 Oct 2006 10:47:15 -0700 (PDT)
Message-ID: <c68e39170610061047x705364aes2cea0eeb1c337e17@mail.gmail.com>
Date: Fri, 6 Oct 2006 13:47:15 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Force a query to match at least two clauses
In-Reply-To: <4526917E.9000109@elasticpath.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4526917E.9000109@elasticpath.com>
X-Google-Sender-Auth: 7b3791fd8f4c2a1d
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See BooleanQuery.setMinimumNumberShouldMatch()
There isn't currently any QueryParser support, so you have to create
the query pragmatically.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

On 10/6/06, Ryan Heinen <ryan.heinen@elasticpath.com> wrote:
> Hello,
>
> If I want make sure that only documents that contain at least two of the
> N TermQueries A, B, C, and D (N=4) are considered matches, what is the
> best way to approach this? I know I can expand it out into several
> boolean clauses like so:
>
> (+A +B) (+A +C) (+A +D) (+B +C) (+B +D) (+C +D)
>
> But unfortunately that doesn't really scale well as N increases. Also a
> solution where the minimum number of clauses to match is variable would
> be ideal.
>
> Does anyone know of a way to accomplish this?
>
> Thanks,
>
> Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 17:53:16 2006
Return-Path: <java-user-return-23826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12776 invoked from network); 6 Oct 2006 17:53:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 17:53:16 -0000
Received: (qmail 5739 invoked by uid 500); 6 Oct 2006 17:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5710 invoked by uid 500); 6 Oct 2006 17:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5699 invoked by uid 99); 6 Oct 2006 17:53:10 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 10:53:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [65.39.152.239] ([65.39.152.239:34855] helo=white.metrobridge.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 19/C7-24193-A7796254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 10:50:51 -0700
Received: from [10.10.1.163] (unknown [66.119.182.210])
	by white.metrobridge.net (Postfix) with ESMTP id E428295C049
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 09:22:25 -0700 (PDT)
Message-ID: <45269753.5050605@elasticpath.com>
Date: Fri, 06 Oct 2006 10:50:11 -0700
From: Ryan Heinen <ryan.heinen@elasticpath.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Force a query to match at least two clauses
References: <4526917E.9000109@elasticpath.com> <c68e39170610061047x705364aes2cea0eeb1c337e17@mail.gmail.com>
In-Reply-To: <c68e39170610061047x705364aes2cea0eeb1c337e17@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> See BooleanQuery.setMinimumNumberShouldMatch()
> There isn't currently any QueryParser support, so you have to create
> the query pragmatically.

Thanks Yonik for your quick response; that is exactly what I was looking 
for. Next time I'll check the docs a little more closely. I am 
generating the queries programatically already so it should be fairly 
straightforward to add that call.

Thanks again,

Ryan

> 
> 
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search server
> 
> On 10/6/06, Ryan Heinen <ryan.heinen@elasticpath.com> wrote:
>> Hello,
>>
>> If I want make sure that only documents that contain at least two of the
>> N TermQueries A, B, C, and D (N=4) are considered matches, what is the
>> best way to approach this? I know I can expand it out into several
>> boolean clauses like so:
>>
>> (+A +B) (+A +C) (+A +D) (+B +C) (+B +D) (+C +D)
>>
>> But unfortunately that doesn't really scale well as N increases. Also a
>> solution where the minimum number of clauses to match is variable would
>> be ideal.
>>
>> Does anyone know of a way to accomplish this?
>>
>> Thanks,
>>
>> Ryan
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 17:53:44 2006
Return-Path: <java-user-return-23827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12853 invoked from network); 6 Oct 2006 17:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 17:53:44 -0000
Received: (qmail 7577 invoked by uid 500); 6 Oct 2006 17:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7548 invoked by uid 500); 6 Oct 2006 17:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7537 invoked by uid 99); 6 Oct 2006 17:53:38 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 10:53:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [65.39.152.239] ([65.39.152.239:34911] helo=white.metrobridge.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 78/D7-24193-F1896254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 10:53:35 -0700
Received: from [10.10.1.163] (unknown [66.119.182.210])
	by white.metrobridge.net (Postfix) with ESMTP id 44E0D95C049
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 09:25:10 -0700 (PDT)
Message-ID: <452697FB.5010704@elasticpath.com>
Date: Fri, 06 Oct 2006 10:52:59 -0700
From: Ryan Heinen <ryan.heinen@elasticpath.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: [BULK] Re: NPE thrown in invertDocument [RESOLVED]
References: <451C44DD.4090007@elasticpath.com> <200609292048.29847@danielnaber.de>
In-Reply-To: <200609292048.29847@danielnaber.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> On Thursday 28 September 2006 23:55, Ryan Heinen wrote:
> 
>> I am creating an index using a RAMDirectory, and am running across a
>> situation where when I call IndexSearcher.addDocument it throws a
>> NullPointerException.
> 
> Could you create a small test case that reporduces this? This usually makes 
> it easier to find the problem (for you) or to fix the bug (for the 
> developers) if there is any.

Well, I finally had a chance to take a closer look at the code in an 
attempt to create a test case when I discovered that the particular 
IndexSearcher that I was having trouble with was being given null as 
it's analyzer.

Sorry for the false alarm, and thanks for the help,

Ryan


> 
> Regards
>  Daniel
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 18:16:50 2006
Return-Path: <java-user-return-23828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21906 invoked from network); 6 Oct 2006 18:16:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 18:16:49 -0000
Received: (qmail 53834 invoked by uid 500); 6 Oct 2006 18:16:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53625 invoked by uid 500); 6 Oct 2006 18:16:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53614 invoked by uid 99); 6 Oct 2006 18:16:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 11:16:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [69.55.225.129] ([69.55.225.129:48289] helo=ehatchersolutions.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F5/68-24193-58D96254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 11:16:39 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D316130EFC18; Fri,  6 Oct 2006 14:16:33 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 7481E30EFC16
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 14:16:25 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45269753.5050605@elasticpath.com>
References: <4526917E.9000109@elasticpath.com> <c68e39170610061047x705364aes2cea0eeb1c337e17@mail.gmail.com> <45269753.5050605@elasticpath.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2ACDC7AA-3206-4AA4-9FCA-D72971B59079@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Force a query to match at least two clauses
Date: Fri, 6 Oct 2006 14:16:19 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 6, 2006, at 1:50 PM, Ryan Heinen wrote:

> Yonik Seeley wrote:
>> See BooleanQuery.setMinimumNumberShouldMatch()
>> There isn't currently any QueryParser support, so you have to create
>> the query pragmatically.
>
> Thanks Yonik for your quick response; that is exactly what I was  
> looking for. Next time I'll check the docs a little more closely. I  
> am generating the queries programatically already so it should be  
> fairly straightforward to add that call.

Yeah, but are you creating the queries pragmatically also?!   
Pragmatic always comes before programatic.  ;)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 18:27:06 2006
Return-Path: <java-user-return-23829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24039 invoked from network); 6 Oct 2006 18:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 18:27:06 -0000
Received: (qmail 66353 invoked by uid 500); 6 Oct 2006 18:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65391 invoked by uid 500); 6 Oct 2006 18:27:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65378 invoked by uid 99); 6 Oct 2006 18:27:00 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 11:27:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [194.109.24.35] ([194.109.24.35:3115] helo=smtp-vbr15.xs4all.nl)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2D/98-24193-DEF96254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 11:26:55 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id k96IQoBR031848
	for <java-user@lucene.apache.org>; Fri, 6 Oct 2006 20:26:51 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
Date: Fri, 6 Oct 2006 20:26:50 +0200
User-Agent: KMail/1.8.2
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>
In-Reply-To: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610062026.50345.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 06 October 2006 14:37, Erick Erickson wrote:
...
> Fortunately, the PM agrees that it's silly to think about span queries
> involving OR or NOT for this app. So I'm left with something like Jo*n AND
> sm*th AND jon?es WITHIN 6.

OR works much the same as term expansion for wildcards.

> The only approach that's occurred to me is to create a filter on for the
> terms, giving me a subset of my docs that have any terms satisfying the
> above. For each doc in the filter, get creative with TermPositionVector for
> determining whether the document matches. It seems that this would involve
> creating a list of all positions in each doc in my filter that match jo*n,
> another for sm*th, and another for jon?es and seeing if the distance
> (however I define that) between any triple of terms (one from each list) is
> less than 6.

> My gut feel is that this explodes time-wise based upon the number of terms
> that match. In this particular application, we are indexing 20K books. Based
> on indexing 4K of them, this amounts to about a 4G index (although I
> acutally expect this to be somewhat larger since I haven't indexed all the
> fields, just the text so far). I can't imagine that comparing the expanded
> terms for, say, 10,000 docs will be fast. I'm putting together an experiment
> to test this though.
>
> But someone could save me a lot of work by telling me that this is solved
> already. This is your chance <G>......

It's solved :) here:
http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/

The surround query language uses only the spans package for
WITHIN like queries, no filters.
You may not want to use the parser, but all the rest could be handy.
 
> The expanding queries (e.g. PrefixQuery, RegexQuery, WildcardQuery) all blow
> up with TooManyClauses, and I've tried upping the MaxClauses field but that
> takes forever and *then* blows up. Even with -Xmx set as high as I can.

The surround language has its own limitation on the maximum number
of terms expanded for wildcards, and it works nicely even for rather
high numbers of terms (thousands) for WITHIN like queries,
given enough RAM.

It shouldn't be too difficult to add NOT queries within WITHIN,
there already is a SpanNotQuery in Lucene to map onto.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 18:40:59 2006
Return-Path: <java-user-return-23830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27848 invoked from network); 6 Oct 2006 18:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 18:40:59 -0000
Received: (qmail 86653 invoked by uid 500); 6 Oct 2006 18:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86369 invoked by uid 500); 6 Oct 2006 18:40:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86358 invoked by uid 99); 6 Oct 2006 18:40:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 11:40:52 -0700
X-ASF-Spam-Status: No, hits=0.6 required=5.0 tests=NO_REAL_NAME
Received: from [66.35.230.4] ([66.35.230.4:51195] helo=mx1.funmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id FA/E8-24193-D23A6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 11:40:45 -0700
Received: from mail01.kittyhawk.funmail.com (mail01.kittyhawk.funmail.com [66.35.215.133])
	by mx1.funmail.com (Postfix) with ESMTP id A9A23A32F7
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 11:40:42 -0700 (PDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Design Consideration for lucene index
Date: Fri, 6 Oct 2006 11:40:37 -0700
Message-ID: <91C65A732E71A54ABD1F74F4C14D7D0201A4B11E@mail01.kittyhawk.funmail.com>
In-Reply-To: <2ACDC7AA-3206-4AA4-9FCA-D72971B59079@ehatchersolutions.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Design Consideration for lucene index
thread-index: Acbpc5axL4juRN3DTQmVWemvFZu7tAAAKI0w
From: <smathews@funmobility.com>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am a newbie to the lucene search area. I would like to best way to do
the following using lucene in terms of efficiency and the size of the
index.

Question : #1
I have a table that contains some tags. These tags are tagged against
multiple images that are in a different table (potentially 20 to 30,000
images). If I am searching for a tag phrase and get the corresponding
images, the approach that I was thinking is to join these two tables and
index the result set.
For example:
Tag(abc)- ImageId1, Tag(abc)-ImageId2, Tag(abc)-ImageId3 etc. Hence this
is a fairly fat joint. Assuming that we are doing like this how is the
performance on lucene? If it is a bad design, what should be a better
way of doing this? Looking forward to your valuable suggestions.

Question : #2
I need to search the multiple fields from a table. The search phrase
needs to look for the fields DESCRIPTION1 and DESCRIPTION2 in the table.
I have done something like this:
while (rs.next()) {
 Document doc =3D new Document();
 doc.add(new Field("ID", String.valueOf(rs.getInt("ID")),
Field.Store.YES, Field.Index.UN_TOKENIZED));
 doc.add(new Field("Description1", rs.getString("Description1"),
Field.Store.YES, Field.Index.TOKENIZED));
 doc.add(new Field("Description2", rs.getString("Description2"),
Field.Store.YES, Field.Index.TOKENIZED));
 String content =3D rs.getString("Description1") + " " +
rs.getString("Description2")=20
 doc.add(new Field("cContent", content, Field.Store.YES,
Field.Index.TOKENIZED));
 list[0].add(doc);
 }

Do I need to do the cContent part for searching? Is this increasing the
size of the index? Is it better to create a dynamic query that looks for
the description1 description2 field or use the cContent?

Please help me in figuring out these things.
Thanks

Mathews



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 19:34:35 2006
Return-Path: <java-user-return-23831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47985 invoked from network); 6 Oct 2006 19:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 19:34:34 -0000
Received: (qmail 55961 invoked by uid 500); 6 Oct 2006 19:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55893 invoked by uid 500); 6 Oct 2006 19:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55882 invoked by uid 99); 6 Oct 2006 19:34:27 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 12:34:27 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:25822] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id D2/2A-24193-CBFA6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 12:34:21 -0700
Received: by py-out-1112.google.com with SMTP id s49so1125871pyc
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 12:34:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qm4IJ1p2cXevK2sTRwzzw85R4RV7sOMusRlQ0TRG7UcDJJQKlVJ2qQkvWe2RbspnZ90dRAqjPZedlQ3TEk7l2+AotHzegqqy7yFasE/czwLu8/xqP47zU9N0O1aHriakr+UQROyyGa6yPrUBvYx1ppmBgYwOJ6haCnTLkU2/tnE=
Received: by 10.35.66.12 with SMTP id t12mr6564713pyk;
        Fri, 06 Oct 2006 12:34:16 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Fri, 6 Oct 2006 12:34:16 -0700 (PDT)
Message-ID: <359a92830610061234jaaadd8fue761f83adaabd3df@mail.gmail.com>
Date: Fri, 6 Oct 2006 15:34:16 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design Consideration for lucene index
In-Reply-To: <91C65A732E71A54ABD1F74F4C14D7D0201A4B11E@mail01.kittyhawk.funmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9665_15086747.1160163256763"
References: <2ACDC7AA-3206-4AA4-9FCA-D72971B59079@ehatchersolutions.com>
	 <91C65A732E71A54ABD1F74F4C14D7D0201A4B11E@mail01.kittyhawk.funmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9665_15086747.1160163256763
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you're *sure* that your database solution isn't adequate <G>.... see
below.

On 10/6/06, smathews@funmobility.com <smathews@funmobility.com> wrote:
>
> I am a newbie to the lucene search area. I would like to best way to do
> the following using lucene in terms of efficiency and the size of the
> index.
>
> Question : #1
> I have a table that contains some tags. These tags are tagged against
> multiple images that are in a different table (potentially 20 to 30,000
> images). If I am searching for a tag phrase and get the corresponding
> images, the approach that I was thinking is to join these two tables and
> index the result set.
> For example:
> Tag(abc)- ImageId1, Tag(abc)-ImageId2, Tag(abc)-ImageId3 etc. Hence this
> is a fairly fat joint. Assuming that we are doing like this how is the
> performance on lucene? If it is a bad design, what should be a better
> way of doing this? Looking forward to your valuable suggestions.



So, really, you're de-normalizing your database into an index. It seems that
what you're really doing here is, for each tag, storing a list of images.
Then, given a tag, you want all the images. What do you think about
something like this....
doc = new Document();
doc.add("ID", "Tag(abc)", STORED, UNTOKENIZED); (note, IDs are often best
untokenized, since you really don't want to split them up).
doc.add("images", "ImageId1", STORED, NO); (not indexed, but stored).
doc.add("images", "ImageId2", STORED, NO);
.
.
.
writer.add(doc);

Now, to get the images associated with a tag, you just search for the doc
whose ID is your tag, get the doc and read the stored images field. You'll
have to parse the image IDs out, but that should be trivial. The search
should be extremely fast since one and only one "document" matches.

There's no problem storing multiple data into the same document field. Or
you could assemble the whole list of IDs into a string and add the "images"
field only once. or.....

You can vary this as you see fit. For instance, you could store each image
in its own field in the doc. There are ways to enumerate the fields in a
given document, so once your search was satisfied by tag id, you'd be off
and running.

doc.add("image1", "ImageId1", STORED, NO); (not indexed, but stored).
doc.add("image2", "ImageId2", STORED, NO);


NOTE: there is no requirement that each document in a lucene index have the
same number or name of fields. In fact, you could create an index that for
which no two documents had any field in common. Not, perhaps, a *useful*
index, but you could do it. If your head is in the DB table world, this may
not immediately occur to you <G>....


Don't know if this helps, but I thought I'd mention it.


Question : #2
> I need to search the multiple fields from a table. The search phrase
> needs to look for the fields DESCRIPTION1 and DESCRIPTION2 in the table.
> I have done something like this:
> while (rs.next()) {
> Document doc = new Document();
> doc.add(new Field("ID", String.valueOf(rs.getInt("ID")),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
> doc.add(new Field("Description1", rs.getString("Description1"),
> Field.Store.YES, Field.Index.TOKENIZED));
> doc.add(new Field("Description2", rs.getString("Description2"),
> Field.Store.YES, Field.Index.TOKENIZED));
> String content = rs.getString("Description1") + " " +
> rs.getString("Description2")
> doc.add(new Field("cContent", content, Field.Store.YES,
> Field.Index.TOKENIZED));
> list[0].add(doc);
> }
>
> Do I need to do the cContent part for searching? Is this increasing the
> size of the index? Is it better to create a dynamic query that looks for
> the description1 description2 field or use the cContent?


No, you do not need the cContent part for searching. Yes, it'll increase the
size of your index to include both (how could it not?).

Whether you should store description1 and description2, or just the
combination of the two depends upon whether you ever expect to need to
distinguish between them during searching. All other things being equal, I
tend to favor leaving them in two distinct fields, as I don't believe
there's a noticable penalty for searching both, and you preserve
information.

OTOH, it depends also on how you want to search your data. Let's say you
want to ask "Are terms A and B in the description fields?" If you store them
as distinct fields, you need to form something like if (A is in description1
or description2) and (B is indescription1 or description2). Whereas if they
are combined, all you have to ask is if (A and B are in combined).

So, let's assume that you have two description fields "because we had to
split them up to fit them in fixed length columns in the DB". Putting them
back together actually makes the index representation of the problem truer
to the real problem space, so that's yet another consideration.....

Hope this helps
Erick

Please help me in figuring out these things.
> Thanks
>
> Mathews
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9665_15086747.1160163256763--

From java-user-return-23832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 20:02:04 2006
Return-Path: <java-user-return-23832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60140 invoked from network); 6 Oct 2006 20:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:02:04 -0000
Received: (qmail 93112 invoked by uid 500); 6 Oct 2006 20:01:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93077 invoked by uid 500); 6 Oct 2006 20:01:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93066 invoked by uid 99); 6 Oct 2006 20:01:56 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:01:56 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.179] ([64.233.166.179:44914] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 76/BA-24193-036B6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 13:01:54 -0700
Received: by py-out-1112.google.com with SMTP id s49so1134205pyc
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 13:01:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e25Oe2OUYXXIayxAG8+lvuKnp78UVCrRX361Tt8b+cwujwDBcjL51ZuIHWOOU340g6s0nw/MQ7ee7z0QDVWHR30yNb3I70U9kBLP8zTJW+MX/aiJuCzlEARYVf4TovzoYAxfvm12nfAjZFDELKoA0nZyTjdH3vcXybQWtrGCxW0=
Received: by 10.35.119.8 with SMTP id w8mr6588720pym;
        Fri, 06 Oct 2006 13:01:50 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Fri, 6 Oct 2006 13:01:50 -0700 (PDT)
Message-ID: <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com>
Date: Fri, 6 Oct 2006 16:01:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
In-Reply-To: <200610062026.50345.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10070_3745635.1160164910181"
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>
	 <200610062026.50345.paul.elschot@xs4all.nl>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10070_3745635.1160164910181
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Paul:

Splendid! Now if I just understood a single thing about the SrndQuery family
<G>.

I followed your link, and took a look at the text file. That should give me
enough to get started.

But if you wanted to e-mail me any sample code or long explanations of what
this all does, I would forever be your lackey <G>....

I should also fairly easily be able to run a few of these against the
partial index I already have to get some sense of now it'll all work out in
my problem space. I suspect that the actual number of distinct terms won't
grow too much after the first 4,000 books, so it'll probably be pretty safe
to get this running in the "worst case", find out if/where things blow up,
and put in some safeguards. Or perhaps discover that it's completely and
entirely perfect <G>.

Thanks again
Erick

On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Friday 06 October 2006 14:37, Erick Erickson wrote:
> ...
> > Fortunately, the PM agrees that it's silly to think about span queries
> > involving OR or NOT for this app. So I'm left with something like Jo*n
> AND
> > sm*th AND jon?es WITHIN 6.
>
> OR works much the same as term expansion for wildcards.
>
> > The only approach that's occurred to me is to create a filter on for the
> > terms, giving me a subset of my docs that have any terms satisfying the
> > above. For each doc in the filter, get creative with TermPositionVector
> for
> > determining whether the document matches. It seems that this would
> involve
> > creating a list of all positions in each doc in my filter that match
> jo*n,
> > another for sm*th, and another for jon?es and seeing if the distance
> > (however I define that) between any triple of terms (one from each list)
> is
> > less than 6.
>
> > My gut feel is that this explodes time-wise based upon the number of
> terms
> > that match. In this particular application, we are indexing 20K books.
> Based
> > on indexing 4K of them, this amounts to about a 4G index (although I
> > acutally expect this to be somewhat larger since I haven't indexed all
> the
> > fields, just the text so far). I can't imagine that comparing the
> expanded
> > terms for, say, 10,000 docs will be fast. I'm putting together an
> experiment
> > to test this though.
> >
> > But someone could save me a lot of work by telling me that this is
> solved
> > already. This is your chance <G>......
>
> It's solved :) here:
> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
>
> The surround query language uses only the spans package for
> WITHIN like queries, no filters.
> You may not want to use the parser, but all the rest could be handy.
>
> > The expanding queries (e.g. PrefixQuery, RegexQuery, WildcardQuery) all
> blow
> > up with TooManyClauses, and I've tried upping the MaxClauses field but
> that
> > takes forever and *then* blows up. Even with -Xmx set as high as I can.
>
> The surround language has its own limitation on the maximum number
> of terms expanded for wildcards, and it works nicely even for rather
> high numbers of terms (thousands) for WITHIN like queries,
> given enough RAM.
>
> It shouldn't be too difficult to add NOT queries within WITHIN,
> there already is a SpanNotQuery in Lucene to map onto.
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10070_3745635.1160164910181--

From java-user-return-23833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 20:30:42 2006
Return-Path: <java-user-return-23833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72007 invoked from network); 6 Oct 2006 20:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:30:41 -0000
Received: (qmail 40765 invoked by uid 500); 6 Oct 2006 20:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40738 invoked by uid 500); 6 Oct 2006 20:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40718 invoked by uid 99); 6 Oct 2006 20:30:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:30:34 -0700
X-ASF-Spam-Status: No, hits=0.6 required=5.0 tests=NO_REAL_NAME
Received: from [66.35.230.4] ([66.35.230.4:45210] helo=mx1.funmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CA/4B-24193-6ECB6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 13:30:31 -0700
Received: from mail01.kittyhawk.funmail.com (mail01.kittyhawk.funmail.com [66.35.215.133])
	by mx1.funmail.com (Postfix) with ESMTP id 9CACEA3783
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 13:30:25 -0700 (PDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Design Consideration for lucene index
Date: Fri, 6 Oct 2006 13:30:15 -0700
Message-ID: <91C65A732E71A54ABD1F74F4C14D7D0201A4B1AF@mail01.kittyhawk.funmail.com>
In-Reply-To: <359a92830610061234jaaadd8fue761f83adaabd3df@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Design Consideration for lucene index
thread-index: AcbpfnwHblEPIAlAQvCEnPB/m+ayOQAB2ilA
From: <smathews@funmobility.com>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erick for your suggestions. I am sure that I might be thinking
with the DB cap. Let me look into your suggestions for the question #1.
I will get back to you if I need more inputs from you.


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, October 06, 2006 12:34 PM
To: java-user@lucene.apache.org
Subject: Re: Design Consideration for lucene index

If you're *sure* that your database solution isn't adequate <G>.... see
below.

On 10/6/06, smathews@funmobility.com <smathews@funmobility.com> wrote:
>
> I am a newbie to the lucene search area. I would like to best way to
do
> the following using lucene in terms of efficiency and the size of the
> index.
>
> Question : #1
> I have a table that contains some tags. These tags are tagged against
> multiple images that are in a different table (potentially 20 to
30,000
> images). If I am searching for a tag phrase and get the corresponding
> images, the approach that I was thinking is to join these two tables
and
> index the result set.
> For example:
> Tag(abc)- ImageId1, Tag(abc)-ImageId2, Tag(abc)-ImageId3 etc. Hence
this
> is a fairly fat joint. Assuming that we are doing like this how is the
> performance on lucene? If it is a bad design, what should be a better
> way of doing this? Looking forward to your valuable suggestions.



So, really, you're de-normalizing your database into an index. It seems
that
what you're really doing here is, for each tag, storing a list of
images.
Then, given a tag, you want all the images. What do you think about
something like this....
doc =3D new Document();
doc.add("ID", "Tag(abc)", STORED, UNTOKENIZED); (note, IDs are often
best
untokenized, since you really don't want to split them up).
doc.add("images", "ImageId1", STORED, NO); (not indexed, but stored).
doc.add("images", "ImageId2", STORED, NO);
.
.
.
writer.add(doc);

Now, to get the images associated with a tag, you just search for the
doc
whose ID is your tag, get the doc and read the stored images field.
You'll
have to parse the image IDs out, but that should be trivial. The search
should be extremely fast since one and only one "document" matches.

There's no problem storing multiple data into the same document field.
Or
you could assemble the whole list of IDs into a string and add the
"images"
field only once. or.....

You can vary this as you see fit. For instance, you could store each
image
in its own field in the doc. There are ways to enumerate the fields in a
given document, so once your search was satisfied by tag id, you'd be
off
and running.

doc.add("image1", "ImageId1", STORED, NO); (not indexed, but stored).
doc.add("image2", "ImageId2", STORED, NO);


NOTE: there is no requirement that each document in a lucene index have
the
same number or name of fields. In fact, you could create an index that
for
which no two documents had any field in common. Not, perhaps, a *useful*
index, but you could do it. If your head is in the DB table world, this
may
not immediately occur to you <G>....


Don't know if this helps, but I thought I'd mention it.


Question : #2
> I need to search the multiple fields from a table. The search phrase
> needs to look for the fields DESCRIPTION1 and DESCRIPTION2 in the
table.
> I have done something like this:
> while (rs.next()) {
> Document doc =3D new Document();
> doc.add(new Field("ID", String.valueOf(rs.getInt("ID")),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
> doc.add(new Field("Description1", rs.getString("Description1"),
> Field.Store.YES, Field.Index.TOKENIZED));
> doc.add(new Field("Description2", rs.getString("Description2"),
> Field.Store.YES, Field.Index.TOKENIZED));
> String content =3D rs.getString("Description1") + " " +
> rs.getString("Description2")
> doc.add(new Field("cContent", content, Field.Store.YES,
> Field.Index.TOKENIZED));
> list[0].add(doc);
> }
>
> Do I need to do the cContent part for searching? Is this increasing
the
> size of the index? Is it better to create a dynamic query that looks
for
> the description1 description2 field or use the cContent?


No, you do not need the cContent part for searching. Yes, it'll increase
the
size of your index to include both (how could it not?).

Whether you should store description1 and description2, or just the
combination of the two depends upon whether you ever expect to need to
distinguish between them during searching. All other things being equal,
I
tend to favor leaving them in two distinct fields, as I don't believe
there's a noticable penalty for searching both, and you preserve
information.

OTOH, it depends also on how you want to search your data. Let's say you
want to ask "Are terms A and B in the description fields?" If you store
them
as distinct fields, you need to form something like if (A is in
description1
or description2) and (B is indescription1 or description2). Whereas if
they
are combined, all you have to ask is if (A and B are in combined).

So, let's assume that you have two description fields "because we had to
split them up to fit them in fixed length columns in the DB". Putting
them
back together actually makes the index representation of the problem
truer
to the real problem space, so that's yet another consideration.....

Hope this helps
Erick

Please help me in figuring out these things.
> Thanks
>
> Mathews
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 20:31:49 2006
Return-Path: <java-user-return-23834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72807 invoked from network); 6 Oct 2006 20:31:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:31:49 -0000
Received: (qmail 42993 invoked by uid 500); 6 Oct 2006 20:31:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42969 invoked by uid 500); 6 Oct 2006 20:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42958 invoked by uid 99); 6 Oct 2006 20:31:42 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:31:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [194.109.24.25] ([194.109.24.25:1979] helo=smtp-vbr5.xs4all.nl)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 00/5B-24193-72DB6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 13:31:37 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id k96KVSF3008676
	for <java-user@lucene.apache.org>; Fri, 6 Oct 2006 22:31:28 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
Date: Fri, 6 Oct 2006 22:31:27 +0200
User-Agent: KMail/1.8.2
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com> <200610062026.50345.paul.elschot@xs4all.nl> <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com>
In-Reply-To: <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610062231.27842.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick,

On Friday 06 October 2006 22:01, Erick Erickson wrote:
> Paul:
> 
> Splendid! Now if I just understood a single thing about the SrndQuery family
> <G>.
> 
> I followed your link, and took a look at the text file. That should give me
> enough to get started.
> 
> But if you wanted to e-mail me any sample code or long explanations of what
> this all does, I would forever be your lackey <G>....

Correcting any bug in the surround source code would do...

> I should also fairly easily be able to run a few of these against the
> partial index I already have to get some sense of now it'll all work out in
> my problem space. I suspect that the actual number of distinct terms won't
> grow too much after the first 4,000 books, so it'll probably be pretty safe
> to get this running in the "worst case", find out if/where things blow up,
> and put in some safeguards. Or perhaps discover that it's completely and
> entirely perfect <G>.

Have a look at the surround test code, and then try and use the surround 
parser as a replacement for the standard query parser.
That should be doable, and it will at least allow you to get some
(nested) proximity queries running against your own data.
The next step is to replace the parser with your own, assuming you 
have one already.

I never got round to writing javadocs for it, and I realize that is
an obstacle. The problem is that writing good javadocs takes me
about as much time as writing the code in the first place.

There is a safeguard in the surround code, it's built into the 
BasicQueryFactory class. It is used at the bottom
of the surround code to generate no more than a maximum
of Lucene TermQuery's and SpanTermQuery's.
The top of the surround code is its parser.

Regards,
Paul Elschot

 
> Thanks again
> Erick
> 
> On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >
> > On Friday 06 October 2006 14:37, Erick Erickson wrote:
> > ...
> > > Fortunately, the PM agrees that it's silly to think about span queries
> > > involving OR or NOT for this app. So I'm left with something like Jo*n
> > AND
> > > sm*th AND jon?es WITHIN 6.
> >
> > OR works much the same as term expansion for wildcards.
> >
> > > The only approach that's occurred to me is to create a filter on for the
> > > terms, giving me a subset of my docs that have any terms satisfying the
> > > above. For each doc in the filter, get creative with TermPositionVector
> > for
> > > determining whether the document matches. It seems that this would
> > involve
> > > creating a list of all positions in each doc in my filter that match
> > jo*n,
> > > another for sm*th, and another for jon?es and seeing if the distance
> > > (however I define that) between any triple of terms (one from each list)
> > is
> > > less than 6.
> >
> > > My gut feel is that this explodes time-wise based upon the number of
> > terms
> > > that match. In this particular application, we are indexing 20K books.
> > Based
> > > on indexing 4K of them, this amounts to about a 4G index (although I
> > > acutally expect this to be somewhat larger since I haven't indexed all
> > the
> > > fields, just the text so far). I can't imagine that comparing the
> > expanded
> > > terms for, say, 10,000 docs will be fast. I'm putting together an
> > experiment
> > > to test this though.
> > >
> > > But someone could save me a lot of work by telling me that this is
> > solved
> > > already. This is your chance <G>......
> >
> > It's solved :) here:
> > http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
> >
> > The surround query language uses only the spans package for
> > WITHIN like queries, no filters.
> > You may not want to use the parser, but all the rest could be handy.
> >
> > > The expanding queries (e.g. PrefixQuery, RegexQuery, WildcardQuery) all
> > blow
> > > up with TooManyClauses, and I've tried upping the MaxClauses field but
> > that
> > > takes forever and *then* blows up. Even with -Xmx set as high as I can.
> >
> > The surround language has its own limitation on the maximum number
> > of terms expanded for wildcards, and it works nicely even for rather
> > high numbers of terms (thousands) for WITHIN like queries,
> > given enough RAM.
> >
> > It shouldn't be too difficult to add NOT queries within WITHIN,
> > there already is a SpanNotQuery in Lucene to map onto.
> >
> > Regards,
> > Paul Elschot
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 20:46:21 2006
Return-Path: <java-user-return-23835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81343 invoked from network); 6 Oct 2006 20:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 20:46:20 -0000
Received: (qmail 70760 invoked by uid 500); 6 Oct 2006 20:46:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70735 invoked by uid 500); 6 Oct 2006 20:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70724 invoked by uid 99); 6 Oct 2006 20:46:13 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 13:46:13 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=markrmiller@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.233] ([66.249.82.233:21293] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 33/AB-24193-090C6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 13:46:09 -0700
Received: by wx-out-0506.google.com with SMTP id s15so898613wxc
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 13:46:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=pT8rpgg3+GohId6/vMiIi39hhYl7pN9K9DOJnEsf5bVZctK1ktIlu5oV4eFzkHGMen9dJGxLsNwyY7ABxrpMD65Hem+fXR1+0glKCWAgX1VZKC+te+nz8zRvI4haEkAZibxuGPNmPRWN4VyCIT2KEBwkTOKknAT0g++nkqeeAlg=
Received: by 10.70.42.15 with SMTP id p15mr6116653wxp;
        Fri, 06 Oct 2006 13:46:04 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id g2sm2778774wra.2006.10.06.13.46.03;
        Fri, 06 Oct 2006 13:46:04 -0700 (PDT)
Message-ID: <4526C092.3080504@gmail.com>
Date: Fri, 06 Oct 2006 16:46:10 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: wildcard and span queries
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>	 <200610062026.50345.paul.elschot@xs4all.nl> <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com>
In-Reply-To: <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul's parser is beyond my feeble comprehension...but I would start by 
looking at SrndTruncQuery. It looks to me like this enumerates each 
possible match just like a SpanRegexQuery does...I am too lazy to figure 
out what the visitor pattern is doing so I don't know if they then get 
added to a boolean query, but I don't know what else would happen. If 
this is the case, I am wondering if it is any more efficient than the 
SpanRegex implementation...which could be changed to a SpanWildcard 
implementation. How exactly is this better at avoiding a toomanyclauses 
exception or ram fillup. Is it just the fact that the (lets say) three 
wildcard terms are anded so this should dramatically reduce the matches? 
I don't want to sound any stupider, so I will stop there--hopefully Paul 
will expound on this.

- Mark

Erick Erickson wrote:
> Paul:
>
> Splendid! Now if I just understood a single thing about the SrndQuery 
> family
> <G>.
>
> I followed your link, and took a look at the text file. That should 
> give me
> enough to get started.
>
> But if you wanted to e-mail me any sample code or long explanations of 
> what
> this all does, I would forever be your lackey <G>....
>
> I should also fairly easily be able to run a few of these against the
> partial index I already have to get some sense of now it'll all work 
> out in
> my problem space. I suspect that the actual number of distinct terms 
> won't
> grow too much after the first 4,000 books, so it'll probably be pretty 
> safe
> to get this running in the "worst case", find out if/where things blow 
> up,
> and put in some safeguards. Or perhaps discover that it's completely and
> entirely perfect <G>.
>
> Thanks again
> Erick
>
> On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>>
>> On Friday 06 October 2006 14:37, Erick Erickson wrote:
>> ...
>> > Fortunately, the PM agrees that it's silly to think about span queries
>> > involving OR or NOT for this app. So I'm left with something like Jo*n
>> AND
>> > sm*th AND jon?es WITHIN 6.
>>
>> OR works much the same as term expansion for wildcards.
>>
>> > The only approach that's occurred to me is to create a filter on 
>> for the
>> > terms, giving me a subset of my docs that have any terms satisfying 
>> the
>> > above. For each doc in the filter, get creative with 
>> TermPositionVector
>> for
>> > determining whether the document matches. It seems that this would
>> involve
>> > creating a list of all positions in each doc in my filter that match
>> jo*n,
>> > another for sm*th, and another for jon?es and seeing if the distance
>> > (however I define that) between any triple of terms (one from each 
>> list)
>> is
>> > less than 6.
>>
>> > My gut feel is that this explodes time-wise based upon the number of
>> terms
>> > that match. In this particular application, we are indexing 20K books.
>> Based
>> > on indexing 4K of them, this amounts to about a 4G index (although I
>> > acutally expect this to be somewhat larger since I haven't indexed all
>> the
>> > fields, just the text so far). I can't imagine that comparing the
>> expanded
>> > terms for, say, 10,000 docs will be fast. I'm putting together an
>> experiment
>> > to test this though.
>> >
>> > But someone could save me a lot of work by telling me that this is
>> solved
>> > already. This is your chance <G>......
>>
>> It's solved :) here:
>> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
>>
>> The surround query language uses only the spans package for
>> WITHIN like queries, no filters.
>> You may not want to use the parser, but all the rest could be handy.
>>
>> > The expanding queries (e.g. PrefixQuery, RegexQuery, WildcardQuery) 
>> all
>> blow
>> > up with TooManyClauses, and I've tried upping the MaxClauses field but
>> that
>> > takes forever and *then* blows up. Even with -Xmx set as high as I 
>> can.
>>
>> The surround language has its own limitation on the maximum number
>> of terms expanded for wildcards, and it works nicely even for rather
>> high numbers of terms (thousands) for WITHIN like queries,
>> given enough RAM.
>>
>> It shouldn't be too difficult to add NOT queries within WITHIN,
>> there already is a SpanNotQuery in Lucene to map onto.
>>
>> Regards,
>> Paul Elschot
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 21:10:38 2006
Return-Path: <java-user-return-23836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92455 invoked from network); 6 Oct 2006 21:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:10:38 -0000
Received: (qmail 7595 invoked by uid 500); 6 Oct 2006 21:10:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7165 invoked by uid 500); 6 Oct 2006 21:10:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7154 invoked by uid 99); 6 Oct 2006 21:10:28 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:10:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [194.109.24.31] ([194.109.24.31:1262] helo=smtp-vbr11.xs4all.nl)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id A7/2C-24193-E36C6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 14:10:24 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.13.8/8.13.8) with ESMTP id k96LAJ7x044530
	for <java-user@lucene.apache.org>; Fri, 6 Oct 2006 23:10:19 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
Date: Fri, 6 Oct 2006 23:10:18 +0200
User-Agent: KMail/1.8.2
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com> <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com> <4526C092.3080504@gmail.com>
In-Reply-To: <4526C092.3080504@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610062310.18275.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mark,

On Friday 06 October 2006 22:46, Mark Miller wrote:
> Paul's parser is beyond my feeble comprehension...but I would start by 
> looking at SrndTruncQuery. It looks to me like this enumerates each 
> possible match just like a SpanRegexQuery does...I am too lazy to figure 
> out what the visitor pattern is doing so I don't know if they then get 
> added to a boolean query, but I don't know what else would happen. If 

They can also be added to a SpanOrQuery as SpanTermQuery,
this depends on the context of the query (distance query or not).
The visitor pattern is used to have the same code for distance queries
and other queries as far as possible.

> this is the case, I am wondering if it is any more efficient than the 
> SpanRegex implementation...which could be changed to a SpanWildcard 

I don't think the surround implementation of expanding terms is more
efficient that the Lucene implementation.
Surround does have the functionality of a SpanWildCard, but
the implementation of the expansion is shared, see above.

> implementation. How exactly is this better at avoiding a toomanyclauses 
> exception or ram fillup. Is it just the fact that the (lets say) three 
> wildcard terms are anded so this should dramatically reduce the matches? 

The limitation in BasicQueryFactory works for a complete surround query,
which can be nested.
In Lucene only the max nr of clauses for a single level BooleanQuery
can be controlled.

 >...

Regards,
Paul Elschot

 
> - Mark
> 
> Erick Erickson wrote:
> > Paul:
> >
> > Splendid! Now if I just understood a single thing about the SrndQuery 
> > family
> > <G>.
> >
> > I followed your link, and took a look at the text file. That should 
> > give me
> > enough to get started.
> >
> > But if you wanted to e-mail me any sample code or long explanations of 
> > what
> > this all does, I would forever be your lackey <G>....
> >
> > I should also fairly easily be able to run a few of these against the
> > partial index I already have to get some sense of now it'll all work 
> > out in
> > my problem space. I suspect that the actual number of distinct terms 
> > won't
> > grow too much after the first 4,000 books, so it'll probably be pretty 
> > safe
> > to get this running in the "worst case", find out if/where things blow 
> > up,
> > and put in some safeguards. Or perhaps discover that it's completely and
> > entirely perfect <G>.
> >
> > Thanks again
> > Erick
> >
> > On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >>
> >> On Friday 06 October 2006 14:37, Erick Erickson wrote:
> >> ...
> >> > Fortunately, the PM agrees that it's silly to think about span queries
> >> > involving OR or NOT for this app. So I'm left with something like Jo*n
> >> AND
> >> > sm*th AND jon?es WITHIN 6.
> >>
> >> OR works much the same as term expansion for wildcards.
> >>
> >> > The only approach that's occurred to me is to create a filter on 
> >> for the
> >> > terms, giving me a subset of my docs that have any terms satisfying 
> >> the
> >> > above. For each doc in the filter, get creative with 
> >> TermPositionVector
> >> for
> >> > determining whether the document matches. It seems that this would
> >> involve
> >> > creating a list of all positions in each doc in my filter that match
> >> jo*n,
> >> > another for sm*th, and another for jon?es and seeing if the distance
> >> > (however I define that) between any triple of terms (one from each 
> >> list)
> >> is
> >> > less than 6.
> >>
> >> > My gut feel is that this explodes time-wise based upon the number of
> >> terms
> >> > that match. In this particular application, we are indexing 20K books.
> >> Based
> >> > on indexing 4K of them, this amounts to about a 4G index (although I
> >> > acutally expect this to be somewhat larger since I haven't indexed all
> >> the
> >> > fields, just the text so far). I can't imagine that comparing the
> >> expanded
> >> > terms for, say, 10,000 docs will be fast. I'm putting together an
> >> experiment
> >> > to test this though.
> >> >
> >> > But someone could save me a lot of work by telling me that this is
> >> solved
> >> > already. This is your chance <G>......
> >>
> >> It's solved :) here:
> >> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
> >>
> >> The surround query language uses only the spans package for
> >> WITHIN like queries, no filters.
> >> You may not want to use the parser, but all the rest could be handy.
> >>
> >> > The expanding queries (e.g. PrefixQuery, RegexQuery, WildcardQuery) 
> >> all
> >> blow
> >> > up with TooManyClauses, and I've tried upping the MaxClauses field but
> >> that
> >> > takes forever and *then* blows up. Even with -Xmx set as high as I 
> >> can.
> >>
> >> The surround language has its own limitation on the maximum number
> >> of terms expanded for wildcards, and it works nicely even for rather
> >> high numbers of terms (thousands) for WITHIN like queries,
> >> given enough RAM.
> >>
> >> It shouldn't be too difficult to add NOT queries within WITHIN,
> >> there already is a SpanNotQuery in Lucene to map onto.
> >>
> >> Regards,
> >> Paul Elschot
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 06 21:51:55 2006
Return-Path: <java-user-return-23837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18097 invoked from network); 6 Oct 2006 21:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Oct 2006 21:51:55 -0000
Received: (qmail 67811 invoked by uid 500); 6 Oct 2006 21:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67776 invoked by uid 500); 6 Oct 2006 21:51:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67765 invoked by uid 99); 6 Oct 2006 21:51:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 14:51:48 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.191] ([64.233.182.191:48156] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5B/EC-24193-FEFC6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 14:51:44 -0700
Received: by nf-out-0910.google.com with SMTP id c2so848643nfe
        for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 14:51:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NwtAmFZBnD284rx8UW2lMFDo4/tfjHIRKG96tas9ejjA95fgKxv5dw9L+7Ec6qyquwSD9u+e1rf0jI0/mFgH1+8HFtF4XF9Sowg6bNpvp5Cmldxdk0AdOs+nMZH4CkB946KgbR30OhvgZ9bXtt+8N+LnU54/epyHZR6sjMZY1ik=
Received: by 10.82.106.14 with SMTP id e14mr245321buc;
        Fri, 06 Oct 2006 14:51:39 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Fri, 6 Oct 2006 14:51:39 -0700 (PDT)
Message-ID: <6e3ae6310610061451m7a89bb20kd6b2c800f60b1b42@mail.gmail.com>
Date: Fri, 6 Oct 2006 14:51:39 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design Consideration for lucene index
In-Reply-To: <359a92830610061234jaaadd8fue761f83adaabd3df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2ACDC7AA-3206-4AA4-9FCA-D72971B59079@ehatchersolutions.com>
	 <91C65A732E71A54ABD1F74F4C14D7D0201A4B11E@mail01.kittyhawk.funmail.com>
	 <359a92830610061234jaaadd8fue761f83adaabd3df@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Regarding Question #1:
If there is only Keyword matching for tags, you can achieve the same
by creating a table with two fields like this: (one tag, a list of
images) in database to mimic Erick's answer. No lucene really needed
for this case. Of course this would not help if you want to search
several tags.

Since you are searching for Images, the right way for your case may be
to create a Document with (id:"image id", tags: "tag1, tag2, tag3").
And you can do full text search with several tags.

You are welcome to experiment different ways to organize your data
using DBSight. No java coding needed. You can see the results right
away.

Chris Lu
-----------------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/6/06, Erick Erickson <erickerickson@gmail.com> wrote:
> If you're *sure* that your database solution isn't adequate <G>.... see
> below.
>
> On 10/6/06, smathews@funmobility.com <smathews@funmobility.com> wrote:
> >
> > I am a newbie to the lucene search area. I would like to best way to do
> > the following using lucene in terms of efficiency and the size of the
> > index.
> >
> > Question : #1
> > I have a table that contains some tags. These tags are tagged against
> > multiple images that are in a different table (potentially 20 to 30,000
> > images). If I am searching for a tag phrase and get the corresponding
> > images, the approach that I was thinking is to join these two tables and
> > index the result set.
> > For example:
> > Tag(abc)- ImageId1, Tag(abc)-ImageId2, Tag(abc)-ImageId3 etc. Hence this
> > is a fairly fat joint. Assuming that we are doing like this how is the
> > performance on lucene? If it is a bad design, what should be a better
> > way of doing this? Looking forward to your valuable suggestions.
>
>
>
> So, really, you're de-normalizing your database into an index. It seems that
> what you're really doing here is, for each tag, storing a list of images.
> Then, given a tag, you want all the images. What do you think about
> something like this....
> doc = new Document();
> doc.add("ID", "Tag(abc)", STORED, UNTOKENIZED); (note, IDs are often best
> untokenized, since you really don't want to split them up).
> doc.add("images", "ImageId1", STORED, NO); (not indexed, but stored).
> doc.add("images", "ImageId2", STORED, NO);
> .
> .
> .
> writer.add(doc);
>
> Now, to get the images associated with a tag, you just search for the doc
> whose ID is your tag, get the doc and read the stored images field. You'll
> have to parse the image IDs out, but that should be trivial. The search
> should be extremely fast since one and only one "document" matches.
>
> There's no problem storing multiple data into the same document field. Or
> you could assemble the whole list of IDs into a string and add the "images"
> field only once. or.....
>
> You can vary this as you see fit. For instance, you could store each image
> in its own field in the doc. There are ways to enumerate the fields in a
> given document, so once your search was satisfied by tag id, you'd be off
> and running.
>
> doc.add("image1", "ImageId1", STORED, NO); (not indexed, but stored).
> doc.add("image2", "ImageId2", STORED, NO);
>
>
> NOTE: there is no requirement that each document in a lucene index have the
> same number or name of fields. In fact, you could create an index that for
> which no two documents had any field in common. Not, perhaps, a *useful*
> index, but you could do it. If your head is in the DB table world, this may
> not immediately occur to you <G>....
>
>
> Don't know if this helps, but I thought I'd mention it.
>
>
> Question : #2
> > I need to search the multiple fields from a table. The search phrase
> > needs to look for the fields DESCRIPTION1 and DESCRIPTION2 in the table.
> > I have done something like this:
> > while (rs.next()) {
> > Document doc = new Document();
> > doc.add(new Field("ID", String.valueOf(rs.getInt("ID")),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > doc.add(new Field("Description1", rs.getString("Description1"),
> > Field.Store.YES, Field.Index.TOKENIZED));
> > doc.add(new Field("Description2", rs.getString("Description2"),
> > Field.Store.YES, Field.Index.TOKENIZED));
> > String content = rs.getString("Description1") + " " +
> > rs.getString("Description2")
> > doc.add(new Field("cContent", content, Field.Store.YES,
> > Field.Index.TOKENIZED));
> > list[0].add(doc);
> > }
> >
> > Do I need to do the cContent part for searching? Is this increasing the
> > size of the index? Is it better to create a dynamic query that looks for
> > the description1 description2 field or use the cContent?
>
>
> No, you do not need the cContent part for searching. Yes, it'll increase the
> size of your index to include both (how could it not?).
>
> Whether you should store description1 and description2, or just the
> combination of the two depends upon whether you ever expect to need to
> distinguish between them during searching. All other things being equal, I
> tend to favor leaving them in two distinct fields, as I don't believe
> there's a noticable penalty for searching both, and you preserve
> information.
>
> OTOH, it depends also on how you want to search your data. Let's say you
> want to ask "Are terms A and B in the description fields?" If you store them
> as distinct fields, you need to form something like if (A is in description1
> or description2) and (B is indescription1 or description2). Whereas if they
> are combined, all you have to ask is if (A and B are in combined).
>
> So, let's assume that you have two description fields "because we had to
> split them up to fit them in fixed length columns in the DB". Putting them
> back together actually makes the index representation of the problem truer
> to the real problem space, so that's yet another consideration.....
>
> Hope this helps
> Erick
>
> Please help me in figuring out these things.
> > Thanks
> >
> > Mathews
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 07 00:08:59 2006
Return-Path: <java-user-return-23838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45852 invoked from network); 7 Oct 2006 00:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Oct 2006 00:08:59 -0000
Received: (qmail 71127 invoked by uid 500); 7 Oct 2006 00:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71014 invoked by uid 500); 7 Oct 2006 00:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71003 invoked by uid 99); 7 Oct 2006 00:08:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 17:08:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:47231] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 90/0F-24193-D00F6254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 17:08:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5BD025B766; Fri,  6 Oct 2006 17:08:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4CAC87F403
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 17:08:42 -0700 (PDT)
Date: Fri, 6 Oct 2006 17:08:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Design Consideration for lucene index
In-Reply-To: <91C65A732E71A54ABD1F74F4C14D7D0201A4B11E@mail01.kittyhawk.funmail.com>
Message-ID: <Pine.LNX.4.58.0610061702410.6144@hal.rescomp.berkeley.edu>
References: <91C65A732E71A54ABD1F74F4C14D7D0201A4B11E@mail01.kittyhawk.funmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


The mantra I tell people when they are trying to decide how to index their
"relational" data is to start by asking yourself what you want the results
to be.

Is the primary list of "things" you want to return to your clients a list
of "tags" or a list of "images" ... It's not clear to me what the answer
is based on your question, but whatever it the "things" you care most
about are, make document for each, and denormalize the rest of the data
into those documents, indexing the stuff you want to search on, and
storing the stuff you want to be able to return.

Sometimes you have differnet use cases with differnet primary "things"
(ie: sometimes you want to return a list of movies, and sometimes you want
to return a list of actors) ... so you make differnet types of documents
and flatten the data in both -- you wind up storing the info that Bogart
was in the Maltese Falcon twice, once in the movie document and once in
the actor document, but that's what denormalizing your data for fast
searching is all about.


: Date: Fri, 6 Oct 2006 11:40:37 -0700
: From: smathews@funmobility.com
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Design Consideration for lucene index
:
: I am a newbie to the lucene search area. I would like to best way to do
: the following using lucene in terms of efficiency and the size of the
: index.
:
: Question : #1
: I have a table that contains some tags. These tags are tagged against
: multiple images that are in a different table (potentially 20 to 30,000
: images). If I am searching for a tag phrase and get the corresponding
: images, the approach that I was thinking is to join these two tables and
: index the result set.
: For example:
: Tag(abc)- ImageId1, Tag(abc)-ImageId2, Tag(abc)-ImageId3 etc. Hence this
: is a fairly fat joint. Assuming that we are doing like this how is the
: performance on lucene? If it is a bad design, what should be a better
: way of doing this? Looking forward to your valuable suggestions.
:
: Question : #2
: I need to search the multiple fields from a table. The search phrase
: needs to look for the fields DESCRIPTION1 and DESCRIPTION2 in the table.
: I have done something like this:
: while (rs.next()) {
:  Document doc = new Document();
:  doc.add(new Field("ID", String.valueOf(rs.getInt("ID")),
: Field.Store.YES, Field.Index.UN_TOKENIZED));
:  doc.add(new Field("Description1", rs.getString("Description1"),
: Field.Store.YES, Field.Index.TOKENIZED));
:  doc.add(new Field("Description2", rs.getString("Description2"),
: Field.Store.YES, Field.Index.TOKENIZED));
:  String content = rs.getString("Description1") + " " +
: rs.getString("Description2")
:  doc.add(new Field("cContent", content, Field.Store.YES,
: Field.Index.TOKENIZED));
:  list[0].add(doc);
:  }
:
: Do I need to do the cContent part for searching? Is this increasing the
: size of the index? Is it better to create a dynamic query that looks for
: the description1 description2 field or use the cContent?
:
: Please help me in figuring out these things.
: Thanks
:
: Mathews
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 07 01:38:40 2006
Return-Path: <java-user-return-23839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67111 invoked from network); 7 Oct 2006 01:38:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Oct 2006 01:38:40 -0000
Received: (qmail 33754 invoked by uid 500); 7 Oct 2006 01:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33475 invoked by uid 500); 7 Oct 2006 01:38:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33464 invoked by uid 99); 7 Oct 2006 01:38:34 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Oct 2006 18:38:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [66.35.230.5] ([66.35.230.5:43318] helo=mx2.funmail.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 23/70-24193-41507254 for <java-user@lucene.apache.org>; Fri, 06 Oct 2006 18:38:30 -0700
Received: from mail01.kittyhawk.funmail.com (mail01.kittyhawk.funmail.com [66.35.215.133])
	by mx2.funmail.com (Postfix) with ESMTP id 9D32911C390
	for <java-user@lucene.apache.org>; Fri,  6 Oct 2006 18:38:24 -0700 (PDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Design Consideration for lucene index
Date: Fri, 6 Oct 2006 18:38:46 -0700
Message-ID: <91C65A732E71A54ABD1F74F4C14D7D0201A4B30A@mail01.kittyhawk.funmail.com>
In-Reply-To: <6e3ae6310610061451m7a89bb20kd6b2c800f60b1b42@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Design Consideration for lucene index
thread-index: Acbpkav43yny9TbbTjeCuYHCOygnJgACSBFA
From: "Silvy Mathews" <smathews@funmobility.com>
To: <java-user@lucene.apache.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,
I need to search for multiple tags that match the search phrase. These
tags can have multiple images associated with it. Hence I am looking for
the image Ids that is associated with the matching tags. Thanks for
sending me the DBSIght link. I will look into it.
Thanks
Mathews

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com]=20
Sent: Friday, October 06, 2006 2:52 PM
To: java-user@lucene.apache.org
Subject: Re: Design Consideration for lucene index

Regarding Question #1:
If there is only Keyword matching for tags, you can achieve the same
by creating a table with two fields like this: (one tag, a list of
images) in database to mimic Erick's answer. No lucene really needed
for this case. Of course this would not help if you want to search
several tags.

Since you are searching for Images, the right way for your case may be
to create a Document with (id:"image id", tags: "tag1, tag2, tag3").
And you can do full text search with several tags.

You are welcome to experiment different ways to organize your data
using DBSight. No java coding needed. You can see the results right
away.

Chris Lu
-----------------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/6/06, Erick Erickson <erickerickson@gmail.com> wrote:
> If you're *sure* that your database solution isn't adequate <G>....
see
> below.
>
> On 10/6/06, smathews@funmobility.com <smathews@funmobility.com> wrote:
> >
> > I am a newbie to the lucene search area. I would like to best way to
do
> > the following using lucene in terms of efficiency and the size of
the
> > index.
> >
> > Question : #1
> > I have a table that contains some tags. These tags are tagged
against
> > multiple images that are in a different table (potentially 20 to
30,000
> > images). If I am searching for a tag phrase and get the
corresponding
> > images, the approach that I was thinking is to join these two tables
and
> > index the result set.
> > For example:
> > Tag(abc)- ImageId1, Tag(abc)-ImageId2, Tag(abc)-ImageId3 etc. Hence
this
> > is a fairly fat joint. Assuming that we are doing like this how is
the
> > performance on lucene? If it is a bad design, what should be a
better
> > way of doing this? Looking forward to your valuable suggestions.
>
>
>
> So, really, you're de-normalizing your database into an index. It
seems that
> what you're really doing here is, for each tag, storing a list of
images.
> Then, given a tag, you want all the images. What do you think about
> something like this....
> doc =3D new Document();
> doc.add("ID", "Tag(abc)", STORED, UNTOKENIZED); (note, IDs are often
best
> untokenized, since you really don't want to split them up).
> doc.add("images", "ImageId1", STORED, NO); (not indexed, but stored).
> doc.add("images", "ImageId2", STORED, NO);
> .
> .
> .
> writer.add(doc);
>
> Now, to get the images associated with a tag, you just search for the
doc
> whose ID is your tag, get the doc and read the stored images field.
You'll
> have to parse the image IDs out, but that should be trivial. The
search
> should be extremely fast since one and only one "document" matches.
>
> There's no problem storing multiple data into the same document field.
Or
> you could assemble the whole list of IDs into a string and add the
"images"
> field only once. or.....
>
> You can vary this as you see fit. For instance, you could store each
image
> in its own field in the doc. There are ways to enumerate the fields in
a
> given document, so once your search was satisfied by tag id, you'd be
off
> and running.
>
> doc.add("image1", "ImageId1", STORED, NO); (not indexed, but stored).
> doc.add("image2", "ImageId2", STORED, NO);
>
>
> NOTE: there is no requirement that each document in a lucene index
have the
> same number or name of fields. In fact, you could create an index that
for
> which no two documents had any field in common. Not, perhaps, a
*useful*
> index, but you could do it. If your head is in the DB table world,
this may
> not immediately occur to you <G>....
>
>
> Don't know if this helps, but I thought I'd mention it.
>
>
> Question : #2
> > I need to search the multiple fields from a table. The search phrase
> > needs to look for the fields DESCRIPTION1 and DESCRIPTION2 in the
table.
> > I have done something like this:
> > while (rs.next()) {
> > Document doc =3D new Document();
> > doc.add(new Field("ID", String.valueOf(rs.getInt("ID")),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > doc.add(new Field("Description1", rs.getString("Description1"),
> > Field.Store.YES, Field.Index.TOKENIZED));
> > doc.add(new Field("Description2", rs.getString("Description2"),
> > Field.Store.YES, Field.Index.TOKENIZED));
> > String content =3D rs.getString("Description1") + " " +
> > rs.getString("Description2")
> > doc.add(new Field("cContent", content, Field.Store.YES,
> > Field.Index.TOKENIZED));
> > list[0].add(doc);
> > }
> >
> > Do I need to do the cContent part for searching? Is this increasing
the
> > size of the index? Is it better to create a dynamic query that looks
for
> > the description1 description2 field or use the cContent?
>
>
> No, you do not need the cContent part for searching. Yes, it'll
increase the
> size of your index to include both (how could it not?).
>
> Whether you should store description1 and description2, or just the
> combination of the two depends upon whether you ever expect to need to
> distinguish between them during searching. All other things being
equal, I
> tend to favor leaving them in two distinct fields, as I don't believe
> there's a noticable penalty for searching both, and you preserve
> information.
>
> OTOH, it depends also on how you want to search your data. Let's say
you
> want to ask "Are terms A and B in the description fields?" If you
store them
> as distinct fields, you need to form something like if (A is in
description1
> or description2) and (B is indescription1 or description2). Whereas if
they
> are combined, all you have to ask is if (A and B are in combined).
>
> So, let's assume that you have two description fields "because we had
to
> split them up to fit them in fixed length columns in the DB". Putting
them
> back together actually makes the index representation of the problem
truer
> to the real problem space, so that's yet another consideration.....
>
> Hope this helps
> Erick
>
> Please help me in figuring out these things.
> > Thanks
> >
> > Mathews
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 07 17:08:00 2006
Return-Path: <java-user-return-23840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13941 invoked from network); 7 Oct 2006 17:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Oct 2006 17:08:00 -0000
Received: (qmail 7827 invoked by uid 500); 7 Oct 2006 17:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7657 invoked by uid 500); 7 Oct 2006 17:07:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7646 invoked by uid 99); 7 Oct 2006 17:07:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Oct 2006 10:07:54 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=otis_gospodnetic@yahoo.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.8 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [206.190.39.227] ([206.190.39.227:41710] helo=web50314.mail.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AE/A5-09076-9EED7254 for <java-user@lucene.apache.org>; Sat, 07 Oct 2006 10:07:53 -0700
Received: (qmail 75415 invoked by uid 60001); 7 Oct 2006 17:07:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ydm75XAPym513mKASty+fzxprbEyaUc0oIBCIGkynJfTCxDA5elH8LLR8XB0ZTorUP9MowghRpDifsfFXcsNFyKZNs1Qvm5r3YSi/ytdsrydXexbsiJvbKuvddfPnhOLyQuoN2b2Lq7QOcCTfPXLjpUFXOoO5zd53p6E4CK5jvo=  ;
Message-ID: <20061007170750.75413.qmail@web50314.mail.yahoo.com>
Received: from [74.65.202.166] by web50314.mail.yahoo.com via HTTP; Sat, 07 Oct 2006 10:07:50 PDT
Date: Sat, 7 Oct 2006 10:07:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Spam filter for lucene project
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is also Akismet.=0A=0A----- Original Message ----=0AFrom: John Haxby =
<jch@scalix.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, October =
6, 2006 6:17:18 AM=0ASubject: Re: Spam filter for lucene project=0A=0ARajiv=
 Roopan wrote:=0A> Hello, I'm currently running a site which allows users t=
o post. Lately =0A> posts=0A> have been getting out of hand. I was wonderin=
g if anyone knows of an open=0A> source spam filter that I can add to my pr=
oject to scan the posts =0A> (which are=0A> just plain text)  for spam?=0As=
pamassassin should work with a little effort.   You might also want to =0Al=
ook at the spam filtering that's part of Thunderbird, although that =0Awoul=
d be rather more work to integrate.=0A=0A----------------------------------=
-----------------------------------=0ATo unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 03:44:58 2006
Return-Path: <java-user-return-23841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3247 invoked from network); 8 Oct 2006 03:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 03:44:57 -0000
Received: (qmail 68393 invoked by uid 500); 8 Oct 2006 03:44:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68348 invoked by uid 500); 8 Oct 2006 03:44:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68336 invoked by uid 99); 8 Oct 2006 03:44:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Oct 2006 20:44:52 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=otis_gospodnetic@yahoo.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.8 required=5.0 tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [206.190.38.56] ([206.190.38.56:22436] helo=web50302.mail.yahoo.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 8C/F7-11753-13478254 for <java-user@lucene.apache.org>; Sat, 07 Oct 2006 20:44:51 -0700
Received: (qmail 96261 invoked by uid 60001); 8 Oct 2006 03:44:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=MnIXEpY3gfVFd9iJoJLtXkWMxOTvpxxfK32qVL4T5CEO5w67rHljXjcT3aTKnZlW5vML2GifVdAgSIIUYcLp/NmJ9cT08L/JTbx0+ncSIF86J75zVLPpwELod5pggQXUQT88TRmoH78cgHBX19OCtpVzW5penusnZ2NCdHMtcAQ=  ;
Message-ID: <20061008034447.96259.qmail@web50302.mail.yahoo.com>
Received: from [74.65.202.166] by web50302.mail.yahoo.com via HTTP; Sat, 07 Oct 2006 20:44:47 PDT
Date: Sat, 7 Oct 2006 20:44:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: QueryParser syntax French Operator
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Patrick,=0A=0AIf I were trying to do this, I'd modify QueryParser.jj to =
construct the grammar for boolean operators based on something like Locale =
(or LANG env. variable?).  I'd try adding code a la:=0Aen_AND =3D AND=0Aen_=
OR =3D OR=0Aen_NOT =3D NOT=0Afr_AND =3D ET=0Afr_OR =3D OU=0Afr_NOT =3D SAUF=
=0A=0AAnd then:=0Aif (locale is 'fr')=0A // construct the grammar with fr_*=
=0A...=0A=0ASomething like that.=0A=0AOtis=0A=0A----- Original Message ----=
=0AFrom: Patrick Turcotte <patrick.turcotte@usherbrooke.ca>=0ATo: java-user=
@lucene.apache.org=0ASent: Tuesday, October 3, 2006 11:15:56 AM=0ASubject: =
QueryParser syntax French Operator=0A=0AHi,=0A=0AIs there a way to add / re=
place the text for the boolean operators used=0Aby the query parser?=0A=0AW=
e would like to replace (or even better, add), "AND", "OR" and "NOT" by=0A"=
ET", "OU" and "SAUF".=0A=0AIs there a way to configure the QueryParser to d=
o it?=0A=0AWe know we could always modify QueryParser.jj to add them to the=
 list,=0Abut we'd rather like not to have to recompile/rejar each time ther=
e is a=0Anew version of Lucene.=0A=0AThanks=0A=0A-- =0APatrick Turcotte=0A=
=0A=0A=0A------------------------------------------------------------------=
---=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor=
 additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 04:34:24 2006
Return-Path: <java-user-return-23842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6525 invoked from network); 8 Oct 2006 04:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 04:34:24 -0000
Received: (qmail 89026 invoked by uid 500); 8 Oct 2006 04:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89000 invoked by uid 500); 8 Oct 2006 04:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88989 invoked by uid 99); 8 Oct 2006 04:34:18 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Oct 2006 21:34:18 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=magawake@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.5 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [66.249.82.227] ([66.249.82.227:6202] helo=wx-out-0506.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B4/E8-11753-7CF78254 for <java-user@lucene.apache.org>; Sat, 07 Oct 2006 21:34:15 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1134292wxc
        for <java-user@lucene.apache.org>; Sat, 07 Oct 2006 21:34:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=hLknr5XXRQYvS1bm5qAsTPclENI0k9MGbvyv5y1sRZSbYW1na+MmorUjg5Z3m3IL/Z6c25R8ic5qsRUXrdmSIK3YVQFN6IlO1hGSrzLRifKMvQ3djDlX2/IOLzek71eAiceZqYbh2rvzBc7+Ogtdh2iiTjLhs3rObhmkq1IeJNY=
Received: by 10.90.116.6 with SMTP id o6mr2185857agc;
        Sat, 07 Oct 2006 21:34:12 -0700 (PDT)
Received: by 10.90.72.11 with HTTP; Sat, 7 Oct 2006 21:34:12 -0700 (PDT)
Message-ID: <1cbd6f830610072134xc077bc4je85c595d2c21c124@mail.gmail.com>
Date: Sun, 8 Oct 2006 00:34:12 -0400
From: "Mag Gam" <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Jdbc Directory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_144824_5515936.1160282052417"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_144824_5515936.1160282052417
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,

After some latenight google searching, I came across this interesting
website, http://static.compassframework.org/docs/latest/jdbcdirectory.html
Is this framework free?  Is anyone using this? If so, how is it for newbies
to Lucene/Derby/Java? I always wanted to have a lucene index in a RDBMS ...

TIA

------=_Part_144824_5515936.1160282052417--

From java-user-return-23843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 07:36:54 2006
Return-Path: <java-user-return-23843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49984 invoked from network); 8 Oct 2006 07:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 07:36:54 -0000
Received: (qmail 73236 invoked by uid 500); 8 Oct 2006 07:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73199 invoked by uid 500); 8 Oct 2006 07:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73188 invoked by uid 99); 8 Oct 2006 07:36:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 00:36:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [169.229.70.167] ([169.229.70.167:42962] helo=rescomp.berkeley.edu)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id CE/3C-11753-D8AA8254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 00:36:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 076385B781; Sun,  8 Oct 2006 00:36:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DEE137F403
	for <java-user@lucene.apache.org>; Sun,  8 Oct 2006 00:36:42 -0700 (PDT)
Date: Sun, 8 Oct 2006 00:36:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: FieldSelectorResult instance descriptions?
Message-ID: <Pine.LNX.4.58.0610080021190.7461@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


there aren't any javadocs for the static instances of FieldSelectorResult,
and the javadocs for FieldSelector.accept suggest that it returns a
boolean ... can someone fill in the blanks about what the various
constants are suppose to mean?

LOAD seems obvious, NO_LOAD seems relatively clear .... the exact meaning
of LAZY_LOAD is something i'd like to clarify (so i might as well go for
broke and ask about LOAD_AND_BREAK and LOAD_FOR_MERGE too).




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 08:37:30 2006
Return-Path: <java-user-return-23844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56218 invoked from network); 8 Oct 2006 08:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 08:37:29 -0000
Received: (qmail 93975 invoked by uid 500); 8 Oct 2006 08:37:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93944 invoked by uid 500); 8 Oct 2006 08:37:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93933 invoked by uid 99); 8 Oct 2006 08:37:22 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 01:37:22 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.187] ([64.233.182.187:28051] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 81/7D-11753-EB8B8254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 01:37:18 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1170710nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 01:37:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NruHl7k8j4+kOowfL8ZVkbDBUTt1t7PwTvDOD2Juh1GhwusQtWOsq/f8HMiY0wWdFZJc+SvYE9S/ivWoL2a/EhMzGET6h/A5/V7NmANaQKiK0gpx2lOdb1GUGBlTzEK4ygCGded/qZGknz4Xga8sRP2+oF4ZjT+BMBj0nfO1l9E=
Received: by 10.82.111.8 with SMTP id j8mr317615buc;
        Sun, 08 Oct 2006 01:37:14 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 01:37:14 -0700 (PDT)
Message-ID: <6e3ae6310610080137q4b0b09a0pf356d333d4ad5137@mail.gmail.com>
Date: Sun, 8 Oct 2006 01:37:14 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Jdbc Directory
In-Reply-To: <1cbd6f830610072134xc077bc4je85c595d2c21c124@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1cbd6f830610072134xc077bc4je85c595d2c21c124@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Compass is free and good when you use hibernate to store data into
database and create Lucene index. What you found is a Jdbc based
implementation of Lucene Directory class, which is not specifically
for Compass.

Storing lucene's index content into database doesn't give you fast
performance compared with local file access, of course it may not
matter much depending on your application's requirement.

Chris Lu
----------------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/7/06, Mag Gam <magawake@gmail.com> wrote:
> Hi folks,
>
> After some latenight google searching, I came across this interesting
> website, http://static.compassframework.org/docs/latest/jdbcdirectory.html
> Is this framework free?  Is anyone using this? If so, how is it for newbies
> to Lucene/Derby/Java? I always wanted to have a lucene index in a RDBMS ...
>
> TIA
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 10:55:52 2006
Return-Path: <java-user-return-23845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74808 invoked from network); 8 Oct 2006 10:55:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 10:55:52 -0000
Received: (qmail 77869 invoked by uid 500); 8 Oct 2006 10:55:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77530 invoked by uid 500); 8 Oct 2006 10:55:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77519 invoked by uid 99); 8 Oct 2006 10:55:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 03:55:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
Received: from [80.236.3.115] ([80.236.3.115:36175] helo=nash.numericable.net)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 70/70-11753-C29D8254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 03:55:42 -0700
Received: (qmail 22382 invoked from network); 8 Oct 2006 10:55:36 -0000
Received: from unknown (HELO [192.168.1.149]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by nash.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 8 Oct 2006 10:55:36 -0000
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: FieldSelectorResult instance descriptions?
Date: Sun, 8 Oct 2006 12:55:35 +0200
User-Agent: KMail/1.9.1
References: <Pine.LNX.4.58.0610080021190.7461@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0610080021190.7461@hal.rescomp.berkeley.edu>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200610081255.35168.nicolas.lalevee@anyware-tech.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Dimanche 08 Octobre 2006 09:36, Chris Hostetter a =E9crit=A0:
> there aren't any javadocs for the static instances of FieldSelectorResult,
> and the javadocs for FieldSelector.accept suggest that it returns a
> boolean ... can someone fill in the blanks about what the various
> constants are suppose to mean?

If you read the entire source as I did, I becomes clear ! :)
The interesting code is in FieldsReader.

> LOAD seems obvious, NO_LOAD seems relatively clear .... the exact meaning
> of LAZY_LOAD is something i'd like to clarify (so i might as well go for
> broke and ask about LOAD_AND_BREAK and LOAD_FOR_MERGE too).

LOAD : normal load of the field (the default behaviour)
NO_LOAD : skip the field, it's value won't be available
LAZY_LOAD : do not load the field value, but if you request it later, it wi=
ll=20
be loaded on request. Note that it can be lazy-loaded only if the reader is=
=20
still opened.
LOAD_AND_BREAK : load the field value, and don't load the next fields of th=
e=20
document
LOAD_FOR_MERGE : internal use when merging segments: it avoids uncompressin=
g=20
and recompressing data, the data is merged "binarily".

Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 10:57:38 2006
Return-Path: <java-user-return-23846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76823 invoked from network); 8 Oct 2006 10:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 10:57:38 -0000
Received: (qmail 79531 invoked by uid 500); 8 Oct 2006 10:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79308 invoked by uid 500); 8 Oct 2006 10:57:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79297 invoked by uid 99); 8 Oct 2006 10:57:32 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 03:57:32 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=dayzman@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.176] ([64.233.166.176:30690] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AA/70-11753-B99D8254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 03:57:31 -0700
Received: by py-out-1112.google.com with SMTP id s49so1624403pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 03:57:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=mB5YB26UejZUTik81RCh0+COsAGLtp5CwKX9/i+FJyxZVNyjIC+v585vFuVgwXocZ1Q54yER8w93/9Zzeub5q7x0qwtsVnnDmxI5cV9hGPQbYBIS04pHgkfylLhVdezY4ceSypeQyTDyuyG9Beb+/RmvtTs7cDfS/vrRiK9QwKg=
Received: by 10.35.119.11 with SMTP id w11mr10244965pym;
        Sun, 08 Oct 2006 03:57:29 -0700 (PDT)
Received: by 10.35.99.2 with HTTP; Sun, 8 Oct 2006 03:57:28 -0700 (PDT)
Message-ID: <429c032d0610080357s2a3d2360j30107af4d767db98@mail.gmail.com>
Date: Sun, 8 Oct 2006 18:57:28 +0800
From: "Michael Chan" <dayzman@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene searching algorithm
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Does anyone know where I can find descriptions of Lucene's searching
algorithm, besides the lecture at University of Pisa 2004? Has it been
published? I'm trying to find a reference to the algorithm.

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 11:26:16 2006
Return-Path: <java-user-return-23847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89040 invoked from network); 8 Oct 2006 11:26:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 11:26:16 -0000
Received: (qmail 96964 invoked by uid 500); 8 Oct 2006 11:26:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96924 invoked by uid 500); 8 Oct 2006 11:26:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96912 invoked by uid 99); 8 Oct 2006 11:26:08 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of cambazz@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 04:26:05 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1196124nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 04:24:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=LanmqBS1odr7tFbfWiSf7UQQvXDbnD/wQcbO43zxC5XV1h+MnbP8OYFXeAOOh9pD0gfU88rI2WnIlNv5hwa/BSGVKvkwQT4yOO0CGtWK0wqXR96HISJFFOptoYucgV3k/RurWREFypw9cVdV1n7ylN6QPdgF5TFwH84qqlz6844=
Received: by 10.48.242.19 with SMTP id p19mr8381795nfh;
        Sun, 08 Oct 2006 04:24:43 -0700 (PDT)
Received: from ?192.168.1.33? ( [85.105.14.92])
        by mx.google.com with ESMTP id v20sm4123323nfc.2006.10.08.04.24.42;
        Sun, 08 Oct 2006 04:24:43 -0700 (PDT)
Message-ID: <4528DFF7.6080500@gmail.com>
Date: Sun, 08 Oct 2006 14:24:39 +0300
From: Cam Bazz <cambazz@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: lucene link database
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I would like to make a link database using lucene. Similar to one that 
nutch uses. I have read the basic documentation and understood how 
document indexing, search, and scoring works. But what I like is 
different documents having different kind of links (semantic links) to 
each other. I would like to be able to search in the database like 
incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am 
talking about, might not necessarily be hypertext links.

How would I approach to a problem like this?

Best Regards,
-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 14:14:55 2006
Return-Path: <java-user-return-23848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20006 invoked from network); 8 Oct 2006 14:14:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 14:14:55 -0000
Received: (qmail 93338 invoked by uid 500); 8 Oct 2006 14:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92997 invoked by uid 500); 8 Oct 2006 14:14:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92986 invoked by uid 99); 8 Oct 2006 14:14:47 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of karl.wettin@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 07:14:47 -0700
Received: by py-out-1112.google.com with SMTP id s49so1661077pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 07:14:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jHvVN5O0vnbEfYxLMlpwgCNf9C/H1jkmn/Dq5+cfkgANG+nIdgPnyaYFIsVechZPuQ4SVeqTHQqvRA1u1lJB8TC0/Af17XeZq4SvdejjVr9HKFVsR8RNZUq00eVqW6N4HcKf69jcydRhfBocOS32KqJDKUCASUGe0OVHIse/njo=
Received: by 10.35.20.14 with SMTP id x14mr10536857pyi;
        Sun, 08 Oct 2006 07:14:26 -0700 (PDT)
Received: by 10.35.127.4 with HTTP; Sun, 8 Oct 2006 07:14:26 -0700 (PDT)
Message-ID: <9fc755c20610080714y6eac565du4d8acb37f53f9943@mail.gmail.com>
Date: Sun, 8 Oct 2006 16:14:26 +0200
From: "karl wettin" <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator
In-Reply-To: <20061008034447.96259.qmail@web50302.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061008034447.96259.qmail@web50302.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/8/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Patrick,
>
> If I were trying to do this, I'd modify QueryParser.jj to construct the grammar for boolean operators based on something like Locale (or LANG env. variable?).  I'd try adding code a la:
> en_AND = AND
> en_OR = OR
> en_NOT = NOT
> fr_AND = ET
> fr_OR = OU
> fr_NOT = SAUF
>
> And then:
> if (locale is 'fr')
>  // construct the grammar with fr_*
> ...
>
> Something like that.

It is a good thought, but as number of locales grows with similar
languages you'll get deterministic errors in the lexer. So I would
absolutely recommend one grammar file per language. Not sure if JavaCC
allows inheritance, but with ANTlr this would be a very simple and
effective way to solve the problem.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 14:23:18 2006
Return-Path: <java-user-return-23849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21234 invoked from network); 8 Oct 2006 14:23:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 14:23:17 -0000
Received: (qmail 99188 invoked by uid 500); 8 Oct 2006 14:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99149 invoked by uid 500); 8 Oct 2006 14:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99136 invoked by uid 99); 8 Oct 2006 14:23:11 -0000
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 07:23:10 -0700
Received: by py-out-1112.google.com with SMTP id s49so1662878pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 07:22:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OYzqARllYnHTI74k97YkW7v0ER+fu6IoKYoNOAOntD5wChQ8qnQXj2v+BajTVHCP03AZHjncmyQ147Rigvq6wYTC4eEcGLDmFplaH+E987swjbavoo9nNvue8wYK0tefPWisM8boeeJtii6HI+oE19P2nVdJRb2IDPS++JhRsKI=
Received: by 10.35.119.8 with SMTP id w8mr10572254pym;
        Sun, 08 Oct 2006 07:22:48 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 07:22:48 -0700 (PDT)
Message-ID: <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
Date: Sun, 8 Oct 2006 10:22:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4528DFF7.6080500@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23208_16197973.1160317368741"
References: <4528DFF7.6080500@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_23208_16197973.1160317368741
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Aproach it in whatever way you want as long as it solves your problem <G>.

My first question is why use lucene? Would a database suit your needs
better? Of course, I can't say. Lucene shines at full-text searching, so
it's a closer call if you aren't searching on parts of text. By that I mean
that if you're not searching on *parts* of your links, you may want to
consider a DB solution.

That said, and if I understand your requirement, you have a pretty simple
design. Each document has two fields, incominglinks and outgoing links. But
see the note below. Lucene indexes what you give it, so the fact that some
of the links aren't hypertext links is immaterial to Lucene. Since you
control both the indexer and searcher, these confrom to whatever your
requirements are. It's up to you to map semantics onto these entities.

One common trap DB-savvy people have is that they think of documents as
entries in a table, all with the same fields. There is nothing requiring you
to have the *same* fields in each document in an index. You could have an
index for which no two documents shared *any* common field if you choose.

So, if you want to find out what, say, which documents have link X as an
incoming link, just search on incominglinks:X. If you wanted to find the
documents that had any incoming links X, Y, Z that matched an outgoing link
in another document, just search the OR of these in outgoinglinks.

If you want some kind of map of the whole web of links, you'll have to write
some iterative loop and keep track. There's nothing built in that I know of
that lets you answer "Given link X, show me all the documents no more than 3
hops away". Lucene is an *engine*, designed to have apps built on top of it.
Lucene doesn't deal with relations between documents, just searching what
you've indexed.

It's easy enough to store a variable number of links in your incominglinks
or outgoinglinks field. Just be sure they're tokenized appropriately. You
can add them any way you choose, either concatenate them all into a big
string and index that, or index them into the same field, e.g.
Document doc = new Document();
doc.add("incoming", "link1");
doc.add("incoming", "link2");
.
.
.
writer.add(doc);

According to a discussion from a while ago, this is the same as
doc.add("incoming", "link1 link2");
in terms of how it all gets handled internally.


NOTE: I'm skipping most of the question of which Analyzer you use. This will
almost surely trip you up sometime. I'd suggest starting with
WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
will break your links up in ways you don't expect. Really, really, really
get a copy of Luke to see what's actually *in* your index and how searches
work. And how the analyzer you choose changes what's searched for, as well
as what's indexec. Google lucene luke and you'll find it.

Anyway, hope this all helps.
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Hello,
>
> I would like to make a link database using lucene. Similar to one that
> nutch uses. I have read the basic documentation and understood how
> document indexing, search, and scoring works. But what I like is
> different documents having different kind of links (semantic links) to
> each other. I would like to be able to search in the database like
> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> talking about, might not necessarily be hypertext links.
>
> How would I approach to a problem like this?
>
> Best Regards,
> -C.B.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23208_16197973.1160317368741--

From java-user-return-23850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 17:15:27 2006
Return-Path: <java-user-return-23850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52960 invoked from network); 8 Oct 2006 17:15:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 17:15:27 -0000
Received: (qmail 21889 invoked by uid 500); 8 Oct 2006 17:15:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21215 invoked by uid 500); 8 Oct 2006 17:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21204 invoked by uid 99); 8 Oct 2006 17:15:19 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of cambazz@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 10:15:19 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1262872nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 10:14:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Viw8chln3AV7XMNpEwE+PhZ2hji9ztIryfp+LyEj3t0WCnzn701T1D/O6H2ZCJr/w8O2sCV4tkfb8jaxk0SVxyoPzwH/lFIGmUHgbn4RWyph3GiVFWL4hzRwq889biqSgjOFb5RqQPbYBo2NNtjuKVA5VcfyZEPws23O2OFGzF0=
Received: by 10.49.29.3 with SMTP id g3mr654551nfj;
        Sun, 08 Oct 2006 10:14:57 -0700 (PDT)
Received: from ?192.168.1.33? ( [85.105.14.92])
        by mx.google.com with ESMTP id c1sm12453361nfe.2006.10.08.10.14.55;
        Sun, 08 Oct 2006 10:14:57 -0700 (PDT)
Message-ID: <4529320B.2060508@gmail.com>
Date: Sun, 08 Oct 2006 20:14:51 +0300
From: Cam Bazz <cambazz@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: lucene link database
References: <4528DFF7.6080500@gmail.com> <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
In-Reply-To: <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear Erick;

Thank you for your detailed insight. I have been trying to code a graph 
object database for sometime.
I have prototyped on relational as well as object oriented databases, 
including opensource and commercial implementations.
(so far, I have tried hibernate, objectivity/db, db4o) while object 
databases excel in traversing links, they are poor when searching.

lucene so far solves the problem of solving. I am thinking of a document 
as a list of tuples. (sequence of fields) and I can do searches with 
lucene, it is really nice.

now I have to solve the problem of linking. if I keep the nodes with a 
lucene index, and I can fetch documents with a doc_id, or some sort of 
surrogate identifier, and
use those identifiers as node_id in an object graph, that will be what I 
want. but in order to do that I need to be able to query the lucene 
index by document_id.

I was referring to the link db of the nutch. They do have some sort of 
link db implementation, that runs with hadoop, but I have not understood 
the full code.
I am trying to understand the structure of this link database. I was 
thinking of using documents with src and dst fields, that have document 
id's as values. (one idea, I will try it tomorrow)

Again thanks a bunch.

Best Regards,
C.B.

Erick Erickson wrote:
> Aproach it in whatever way you want as long as it solves your problem 
> <G>.
>
> My first question is why use lucene? Would a database suit your needs
> better? Of course, I can't say. Lucene shines at full-text searching, so
> it's a closer call if you aren't searching on parts of text. By that I 
> mean
> that if you're not searching on *parts* of your links, you may want to
> consider a DB solution.
>
> That said, and if I understand your requirement, you have a pretty simple
> design. Each document has two fields, incominglinks and outgoing 
> links. But
> see the note below. Lucene indexes what you give it, so the fact that 
> some
> of the links aren't hypertext links is immaterial to Lucene. Since you
> control both the indexer and searcher, these confrom to whatever your
> requirements are. It's up to you to map semantics onto these entities.
>
> One common trap DB-savvy people have is that they think of documents as
> entries in a table, all with the same fields. There is nothing 
> requiring you
> to have the *same* fields in each document in an index. You could have an
> index for which no two documents shared *any* common field if you choose.
>
> So, if you want to find out what, say, which documents have link X as an
> incoming link, just search on incominglinks:X. If you wanted to find the
> documents that had any incoming links X, Y, Z that matched an outgoing 
> link
> in another document, just search the OR of these in outgoinglinks.
>
> If you want some kind of map of the whole web of links, you'll have to 
> write
> some iterative loop and keep track. There's nothing built in that I 
> know of
> that lets you answer "Given link X, show me all the documents no more 
> than 3
> hops away". Lucene is an *engine*, designed to have apps built on top 
> of it.
> Lucene doesn't deal with relations between documents, just searching what
> you've indexed.
>
> It's easy enough to store a variable number of links in your 
> incominglinks
> or outgoinglinks field. Just be sure they're tokenized appropriately. You
> can add them any way you choose, either concatenate them all into a big
> string and index that, or index them into the same field, e.g.
> Document doc = new Document();
> doc.add("incoming", "link1");
> doc.add("incoming", "link2");
> .
> .
> .
> writer.add(doc);
>
> According to a discussion from a while ago, this is the same as
> doc.add("incoming", "link1 link2");
> in terms of how it all gets handled internally.
>
>
> NOTE: I'm skipping most of the question of which Analyzer you use. 
> This will
> almost surely trip you up sometime. I'd suggest starting with
> WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> will break your links up in ways you don't expect. Really, really, really
> get a copy of Luke to see what's actually *in* your index and how 
> searches
> work. And how the analyzer you choose changes what's searched for, as 
> well
> as what's indexec. Google lucene luke and you'll find it.
>
> Anyway, hope this all helps.
> Erick
>
> On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>>
>> Hello,
>>
>> I would like to make a link database using lucene. Similar to one that
>> nutch uses. I have read the basic documentation and understood how
>> document indexing, search, and scoring works. But what I like is
>> different documents having different kind of links (semantic links) to
>> each other. I would like to be able to search in the database like
>> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
>> talking about, might not necessarily be hypertext links.
>>
>> How would I approach to a problem like this?
>>
>> Best Regards,
>> -C.B.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 19:25:06 2006
Return-Path: <java-user-return-23851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83388 invoked from network); 8 Oct 2006 19:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 19:25:06 -0000
Received: (qmail 36553 invoked by uid 500); 8 Oct 2006 19:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36524 invoked by uid 500); 8 Oct 2006 19:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36513 invoked by uid 99); 8 Oct 2006 19:24:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 12:24:58 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.190] ([64.233.182.190:18797] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 43/91-01505-C8A49254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 11:59:24 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1285067nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 19:45:31 2006
Return-Path: <java-user-return-23852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86405 invoked from network); 8 Oct 2006 19:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 19:45:31 -0000
Received: (qmail 57774 invoked by uid 500); 8 Oct 2006 19:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57740 invoked by uid 500); 8 Oct 2006 19:45:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57728 invoked by uid 99); 8 Oct 2006 19:45:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 12:45:24 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.186] ([64.233.182.186:26622] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DD/F1-01505-4EC49254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:09:24 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1287017nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:09:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 20:26:21 2006
Return-Path: <java-user-return-23853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93972 invoked from network); 8 Oct 2006 20:26:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 20:26:21 -0000
Received: (qmail 89053 invoked by uid 500); 8 Oct 2006 20:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88927 invoked by uid 500); 8 Oct 2006 20:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88738 invoked by uid 99); 8 Oct 2006 20:26:12 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 13:26:12 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.184] ([64.233.182.184:43079] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E4/D2-01505-79159254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:29:28 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1290965nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:29:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 20:32:11 2006
Return-Path: <java-user-return-23854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95174 invoked from network); 8 Oct 2006 20:32:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 20:32:11 -0000
Received: (qmail 98051 invoked by uid 500); 8 Oct 2006 20:32:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97871 invoked by uid 500); 8 Oct 2006 20:32:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97860 invoked by uid 99); 8 Oct 2006 20:32:03 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 13:32:03 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.186] ([64.233.182.186:46523] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F3/F2-01505-A8259254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:33:32 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1291814nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:33:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 20:33:00 2006
Return-Path: <java-user-return-23855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95302 invoked from network); 8 Oct 2006 20:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 20:32:59 -0000
Received: (qmail 99992 invoked by uid 500); 8 Oct 2006 20:32:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99702 invoked by uid 500); 8 Oct 2006 20:32:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99691 invoked by uid 99); 8 Oct 2006 20:32:52 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 13:32:52 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.9 required=5.0 tests=HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.176] ([64.233.166.176:5966] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 48/F2-01505-BA259254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:34:05 -0700
Received: by py-out-1112.google.com with SMTP id s49so1732799pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:34:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 20:45:31 2006
Return-Path: <java-user-return-23856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98170 invoked from network); 8 Oct 2006 20:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 20:45:31 -0000
Received: (qmail 11511 invoked by uid 500); 8 Oct 2006 20:45:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11240 invoked by uid 500); 8 Oct 2006 20:45:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11222 invoked by uid 99); 8 Oct 2006 20:45:24 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 13:45:24 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:10379] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4A/33-01505-C8459254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:42:05 -0700
Received: by py-out-1112.google.com with SMTP id s49so1734707pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:42:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=thJz4L5KkNLi9RQx89Bt/KG4GH0T2iibC4kxhIXbkHLE2Hzqyn7uE1xcyTeHQrEWvjqTHJmb1qZhLUo4wc/QVFLCvCVnPBNc9hBojxeqXqFy5CnBiDWoqcI3ipL2pMbsv+qLPqRj/ML1i3k3D4LZfU/LQzWv2C9UmFZfiHhv1bg=
Received: by 10.35.132.13 with SMTP id j13mr11128517pyn;
        Sun, 08 Oct 2006 12:42:02 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:42:02 -0700 (PDT)
Message-ID: <359a92830610081242i2d036a46u55a8383fb9d4c11@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:42:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26161_4488017.1160336522135"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26161_4488017.1160336522135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you breaking up your query? That is, what analyzer are you using for
query parsing? Or are you building your own query programmatically?

Also, what about capitalization? Some of the analyzers automatically
lower-case the terms, either at index time or query time (or both). If
there's a mis-match, you get "strange" results.

I suspect what's happening is that your analyzers (either at index time,
query time or both) aren't behaving as you assume. I've gotten the most
intuitive results, when starting out, using WhitespaceAnalyzer. Once you're
comfortable with that analyzer, then think about the more complex ones.

And just to make it more confusing, if I understand correctly, when you
index UN_TOKENIZED, it doesn't matter what analyzer you use, it's ignored. I
might be wrong about this one though.....

I recommend downloading luke (google lucene luke). It'll let you look at
your index, and have queries parsed by various analyzers (and also explain
how the query is interpreted). It'll answer many, many, many questions for
you about "what really happened".

Best
Erick

On 10/8/06, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> Hi All
>
> I am trying to index a field which has more than one word with space e.g.
> "My Word"
> i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> Word"
> its not yielding any result.. if I index it TOKENIZED and use phrase
> query..
> then use
> phrase query then it yields result on all 3 combination "My" , "Word", "MY
> Word"
> but I actually want to show result only on "My Word"...
>
> Is term qurey limited to one word? i mean if we index a word with space
> and
> index it UN_TOKENIZED..
> shouldnt TermQuery yeild result to "My Word".
>
>
> Ismail
>
>

------=_Part_26161_4488017.1160336522135--

From java-user-return-23857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 20:47:07 2006
Return-Path: <java-user-return-23857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98669 invoked from network); 8 Oct 2006 20:47:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 20:47:07 -0000
Received: (qmail 14636 invoked by uid 500); 8 Oct 2006 20:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14598 invoked by uid 500); 8 Oct 2006 20:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14587 invoked by uid 99); 8 Oct 2006 20:46:59 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 13:46:59 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.189] ([64.233.182.189:54914] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 82/43-01505-2E459254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:43:32 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1293881nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:43:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 20:47:28 2006
Return-Path: <java-user-return-23858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98751 invoked from network); 8 Oct 2006 20:47:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 20:47:27 -0000
Received: (qmail 16342 invoked by uid 500); 8 Oct 2006 20:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16249 invoked by uid 500); 8 Oct 2006 20:47:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16232 invoked by uid 99); 8 Oct 2006 20:47:20 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 13:47:20 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.9 required=5.0 tests=HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.180] ([64.233.166.180:11533] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 15/43-01505-30559254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:44:03 -0700
Received: by py-out-1112.google.com with SMTP id s49so1735146pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:44:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 20:57:18 2006
Return-Path: <java-user-return-23859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 369 invoked from network); 8 Oct 2006 20:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 20:57:18 -0000
Received: (qmail 27587 invoked by uid 500); 8 Oct 2006 20:57:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26462 invoked by uid 500); 8 Oct 2006 20:57:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26451 invoked by uid 99); 8 Oct 2006 20:57:12 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 13:57:12 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.181] ([64.233.166.181:16383] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 5B/73-01505-4E659254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:52:04 -0700
Received: by py-out-1112.google.com with SMTP id s49so1736924pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:52:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=thJz4L5KkNLi9RQx89Bt/KG4GH0T2iibC4kxhIXbkHLE2Hzqyn7uE1xcyTeHQrEWvjqTHJmb1qZhLUo4wc/QVFLCvCVnPBNc9hBojxeqXqFy5CnBiDWoqcI3ipL2pMbsv+qLPqRj/ML1i3k3D4LZfU/LQzWv2C9UmFZfiHhv1bg=
Received: by 10.35.132.13 with SMTP id j13mr11128517pyn;
        Sun, 08 Oct 2006 12:42:02 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:42:02 -0700 (PDT)
Message-ID: <359a92830610081242i2d036a46u55a8383fb9d4c11@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:42:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26161_4488017.1160336522135"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26161_4488017.1160336522135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you breaking up your query? That is, what analyzer are you using for
query parsing? Or are you building your own query programmatically?

Also, what about capitalization? Some of the analyzers automatically
lower-case the terms, either at index time or query time (or both). If
there's a mis-match, you get "strange" results.

I suspect what's happening is that your analyzers (either at index time,
query time or both) aren't behaving as you assume. I've gotten the most
intuitive results, when starting out, using WhitespaceAnalyzer. Once you're
comfortable with that analyzer, then think about the more complex ones.

And just to make it more confusing, if I understand correctly, when you
index UN_TOKENIZED, it doesn't matter what analyzer you use, it's ignored. I
might be wrong about this one though.....

I recommend downloading luke (google lucene luke). It'll let you look at
your index, and have queries parsed by various analyzers (and also explain
how the query is interpreted). It'll answer many, many, many questions for
you about "what really happened".

Best
Erick

On 10/8/06, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> Hi All
>
> I am trying to index a field which has more than one word with space e.g.
> "My Word"
> i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> Word"
> its not yielding any result.. if I index it TOKENIZED and use phrase
> query..
> then use
> phrase query then it yields result on all 3 combination "My" , "Word", "MY
> Word"
> but I actually want to show result only on "My Word"...
>
> Is term qurey limited to one word? i mean if we index a word with space
> and
> index it UN_TOKENIZED..
> shouldnt TermQuery yeild result to "My Word".
>
>
> Ismail
>
>

------=_Part_26161_4488017.1160336522135--

From java-user-return-23860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 21:08:00 2006
Return-Path: <java-user-return-23860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3128 invoked from network); 8 Oct 2006 21:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 21:07:59 -0000
Received: (qmail 39154 invoked by uid 500); 8 Oct 2006 21:07:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39069 invoked by uid 500); 8 Oct 2006 21:07:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39058 invoked by uid 99); 8 Oct 2006 21:07:53 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 14:07:53 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.185] ([64.233.182.185:5300] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 71/B3-01505-7A859254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:59:37 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1296857nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 12:59:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 21:13:28 2006
Return-Path: <java-user-return-23861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5018 invoked from network); 8 Oct 2006 21:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 21:13:27 -0000
Received: (qmail 46457 invoked by uid 500); 8 Oct 2006 21:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46425 invoked by uid 500); 8 Oct 2006 21:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46414 invoked by uid 99); 8 Oct 2006 21:13:21 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 14:13:21 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.191] ([64.233.182.191:8614] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 40/D3-01505-69959254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:03:36 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1297844nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:03:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 21:14:04 2006
Return-Path: <java-user-return-23862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5097 invoked from network); 8 Oct 2006 21:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 21:14:04 -0000
Received: (qmail 48395 invoked by uid 500); 8 Oct 2006 21:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48100 invoked by uid 500); 8 Oct 2006 21:13:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48089 invoked by uid 99); 8 Oct 2006 21:13:58 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 14:13:58 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.9 required=5.0 tests=HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.181] ([64.233.166.181:23507] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id F3/D3-01505-6B959254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:04:06 -0700
Received: by py-out-1112.google.com with SMTP id s49so1739625pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:04:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 21:23:41 2006
Return-Path: <java-user-return-23863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13782 invoked from network); 8 Oct 2006 21:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 21:23:41 -0000
Received: (qmail 61772 invoked by uid 500); 8 Oct 2006 21:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61507 invoked by uid 500); 8 Oct 2006 21:23:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61496 invoked by uid 99); 8 Oct 2006 21:23:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 14:23:35 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.181] ([64.233.166.181:28192] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E6/04-01505-69B59254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:12:08 -0700
Received: by py-out-1112.google.com with SMTP id m51so1861828pye
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:12:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=thJz4L5KkNLi9RQx89Bt/KG4GH0T2iibC4kxhIXbkHLE2Hzqyn7uE1xcyTeHQrEWvjqTHJmb1qZhLUo4wc/QVFLCvCVnPBNc9hBojxeqXqFy5CnBiDWoqcI3ipL2pMbsv+qLPqRj/ML1i3k3D4LZfU/LQzWv2C9UmFZfiHhv1bg=
Received: by 10.35.132.13 with SMTP id j13mr11128517pyn;
        Sun, 08 Oct 2006 12:42:02 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:42:02 -0700 (PDT)
Message-ID: <359a92830610081242i2d036a46u55a8383fb9d4c11@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:42:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26161_4488017.1160336522135"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26161_4488017.1160336522135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you breaking up your query? That is, what analyzer are you using for
query parsing? Or are you building your own query programmatically?

Also, what about capitalization? Some of the analyzers automatically
lower-case the terms, either at index time or query time (or both). If
there's a mis-match, you get "strange" results.

I suspect what's happening is that your analyzers (either at index time,
query time or both) aren't behaving as you assume. I've gotten the most
intuitive results, when starting out, using WhitespaceAnalyzer. Once you're
comfortable with that analyzer, then think about the more complex ones.

And just to make it more confusing, if I understand correctly, when you
index UN_TOKENIZED, it doesn't matter what analyzer you use, it's ignored. I
might be wrong about this one though.....

I recommend downloading luke (google lucene luke). It'll let you look at
your index, and have queries parsed by various analyzers (and also explain
how the query is interpreted). It'll answer many, many, many questions for
you about "what really happened".

Best
Erick

On 10/8/06, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> Hi All
>
> I am trying to index a field which has more than one word with space e.g.
> "My Word"
> i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> Word"
> its not yielding any result.. if I index it TOKENIZED and use phrase
> query..
> then use
> phrase query then it yields result on all 3 combination "My" , "Word", "MY
> Word"
> but I actually want to show result only on "My Word"...
>
> Is term qurey limited to one word? i mean if we index a word with space
> and
> index it UN_TOKENIZED..
> shouldnt TermQuery yeild result to "My Word".
>
>
> Ismail
>
>

------=_Part_26161_4488017.1160336522135--

From java-user-return-23864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 21:42:48 2006
Return-Path: <java-user-return-23864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20774 invoked from network); 8 Oct 2006 21:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 21:42:47 -0000
Received: (qmail 88792 invoked by uid 500); 8 Oct 2006 21:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88636 invoked by uid 500); 8 Oct 2006 21:42:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88625 invoked by uid 99); 8 Oct 2006 21:42:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 14:42:39 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.185] ([64.233.182.185:30632] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 7A/74-01505-4DF59254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:30:13 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1302813nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:30:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 21:49:22 2006
Return-Path: <java-user-return-23865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23525 invoked from network); 8 Oct 2006 21:49:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 21:49:22 -0000
Received: (qmail 1868 invoked by uid 500); 8 Oct 2006 21:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1836 invoked by uid 500); 8 Oct 2006 21:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1825 invoked by uid 99); 8 Oct 2006 21:49:15 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 14:49:15 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.9 required=5.0 tests=HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.183] ([64.233.166.183:42130] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 03/A4-01505-D2169254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:35:57 -0700
Received: by py-out-1112.google.com with SMTP id s49so1746343pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:35:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 21:54:56 2006
Return-Path: <java-user-return-23866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25589 invoked from network); 8 Oct 2006 21:54:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 21:54:55 -0000
Received: (qmail 12209 invoked by uid 500); 8 Oct 2006 21:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11997 invoked by uid 500); 8 Oct 2006 21:54:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11986 invoked by uid 99); 8 Oct 2006 21:54:49 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 14:54:49 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.181] ([64.233.166.181:44290] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 73/C4-01505-50269254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:39:35 -0700
Received: by py-out-1112.google.com with SMTP id s49so1747369pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:39:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=thJz4L5KkNLi9RQx89Bt/KG4GH0T2iibC4kxhIXbkHLE2Hzqyn7uE1xcyTeHQrEWvjqTHJmb1qZhLUo4wc/QVFLCvCVnPBNc9hBojxeqXqFy5CnBiDWoqcI3ipL2pMbsv+qLPqRj/ML1i3k3D4LZfU/LQzWv2C9UmFZfiHhv1bg=
Received: by 10.35.132.13 with SMTP id j13mr11128517pyn;
        Sun, 08 Oct 2006 12:42:02 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:42:02 -0700 (PDT)
Message-ID: <359a92830610081242i2d036a46u55a8383fb9d4c11@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:42:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26161_4488017.1160336522135"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26161_4488017.1160336522135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you breaking up your query? That is, what analyzer are you using for
query parsing? Or are you building your own query programmatically?

Also, what about capitalization? Some of the analyzers automatically
lower-case the terms, either at index time or query time (or both). If
there's a mis-match, you get "strange" results.

I suspect what's happening is that your analyzers (either at index time,
query time or both) aren't behaving as you assume. I've gotten the most
intuitive results, when starting out, using WhitespaceAnalyzer. Once you're
comfortable with that analyzer, then think about the more complex ones.

And just to make it more confusing, if I understand correctly, when you
index UN_TOKENIZED, it doesn't matter what analyzer you use, it's ignored. I
might be wrong about this one though.....

I recommend downloading luke (google lucene luke). It'll let you look at
your index, and have queries parsed by various analyzers (and also explain
how the query is interpreted). It'll answer many, many, many questions for
you about "what really happened".

Best
Erick

On 10/8/06, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> Hi All
>
> I am trying to index a field which has more than one word with space e.g.
> "My Word"
> i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> Word"
> its not yielding any result.. if I index it TOKENIZED and use phrase
> query..
> then use
> phrase query then it yields result on all 3 combination "My" , "Word", "MY
> Word"
> but I actually want to show result only on "My Word"...
>
> Is term qurey limited to one word? i mean if we index a word with space
> and
> index it UN_TOKENIZED..
> shouldnt TermQuery yeild result to "My Word".
>
>
> Ismail
>
>

------=_Part_26161_4488017.1160336522135--

From java-user-return-23867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 22:08:45 2006
Return-Path: <java-user-return-23867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28063 invoked from network); 8 Oct 2006 22:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 22:08:45 -0000
Received: (qmail 26712 invoked by uid 500); 8 Oct 2006 22:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25792 invoked by uid 500); 8 Oct 2006 22:08:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25780 invoked by uid 99); 8 Oct 2006 22:08:39 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 15:08:39 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.191] ([64.233.182.191:46577] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E0/15-01505-F5469254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:49:36 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1306530nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 13:49:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 22:44:54 2006
Return-Path: <java-user-return-23868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35504 invoked from network); 8 Oct 2006 22:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 22:44:54 -0000
Received: (qmail 62732 invoked by uid 500); 8 Oct 2006 22:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62007 invoked by uid 500); 8 Oct 2006 22:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61996 invoked by uid 99); 8 Oct 2006 22:44:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 15:44:46 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.186] ([64.233.182.186:62823] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 6B/C5-01505-B0969254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:09:33 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1310411nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:09:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 22:51:01 2006
Return-Path: <java-user-return-23869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37273 invoked from network); 8 Oct 2006 22:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 22:51:00 -0000
Received: (qmail 74110 invoked by uid 500); 8 Oct 2006 22:50:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74086 invoked by uid 500); 8 Oct 2006 22:50:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74075 invoked by uid 99); 8 Oct 2006 22:50:54 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 15:50:54 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.9 required=5.0 tests=HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.177] ([64.233.166.177:63911] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 2C/E5-01505-30A69254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:13:41 -0700
Received: by py-out-1112.google.com with SMTP id s49so1755024pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:13:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 23:26:25 2006
Return-Path: <java-user-return-23870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43470 invoked from network); 8 Oct 2006 23:26:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 23:26:24 -0000
Received: (qmail 21133 invoked by uid 500); 8 Oct 2006 23:26:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20875 invoked by uid 500); 8 Oct 2006 23:26:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20864 invoked by uid 99); 8 Oct 2006 23:26:18 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 16:26:18 -0700
Received: by py-out-1112.google.com with SMTP id s49so1784195pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 16:25:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=thJz4L5KkNLi9RQx89Bt/KG4GH0T2iibC4kxhIXbkHLE2Hzqyn7uE1xcyTeHQrEWvjqTHJmb1qZhLUo4wc/QVFLCvCVnPBNc9hBojxeqXqFy5CnBiDWoqcI3ipL2pMbsv+qLPqRj/ML1i3k3D4LZfU/LQzWv2C9UmFZfiHhv1bg=
Received: by 10.35.132.13 with SMTP id j13mr11128517pyn;
        Sun, 08 Oct 2006 12:42:02 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:42:02 -0700 (PDT)
Message-ID: <359a92830610081242i2d036a46u55a8383fb9d4c11@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:42:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26161_4488017.1160336522135"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26161_4488017.1160336522135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you breaking up your query? That is, what analyzer are you using for
query parsing? Or are you building your own query programmatically?

Also, what about capitalization? Some of the analyzers automatically
lower-case the terms, either at index time or query time (or both). If
there's a mis-match, you get "strange" results.

I suspect what's happening is that your analyzers (either at index time,
query time or both) aren't behaving as you assume. I've gotten the most
intuitive results, when starting out, using WhitespaceAnalyzer. Once you're
comfortable with that analyzer, then think about the more complex ones.

And just to make it more confusing, if I understand correctly, when you
index UN_TOKENIZED, it doesn't matter what analyzer you use, it's ignored. I
might be wrong about this one though.....

I recommend downloading luke (google lucene luke). It'll let you look at
your index, and have queries parsed by various analyzers (and also explain
how the query is interpreted). It'll answer many, many, many questions for
you about "what really happened".

Best
Erick

On 10/8/06, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> Hi All
>
> I am trying to index a field which has more than one word with space e.g.
> "My Word"
> i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> Word"
> its not yielding any result.. if I index it TOKENIZED and use phrase
> query..
> then use
> phrase query then it yields result on all 3 combination "My" , "Word", "MY
> Word"
> but I actually want to show result only on "My Word"...
>
> Is term qurey limited to one word? i mean if we index a word with space
> and
> index it UN_TOKENIZED..
> shouldnt TermQuery yeild result to "My Word".
>
>
> Ismail
>
>

------=_Part_26161_4488017.1160336522135--

From java-user-return-23871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 23:27:54 2006
Return-Path: <java-user-return-23871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43859 invoked from network); 8 Oct 2006 23:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 23:27:54 -0000
Received: (qmail 23714 invoked by uid 500); 8 Oct 2006 23:27:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23670 invoked by uid 500); 8 Oct 2006 23:27:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23644 invoked by uid 99); 8 Oct 2006 23:27:48 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 16:27:48 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.178] ([64.233.166.178:14976] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 9A/B6-01505-9AF69254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:37:46 -0700
Received: by py-out-1112.google.com with SMTP id s49so1760548pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:37:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=thJz4L5KkNLi9RQx89Bt/KG4GH0T2iibC4kxhIXbkHLE2Hzqyn7uE1xcyTeHQrEWvjqTHJmb1qZhLUo4wc/QVFLCvCVnPBNc9hBojxeqXqFy5CnBiDWoqcI3ipL2pMbsv+qLPqRj/ML1i3k3D4LZfU/LQzWv2C9UmFZfiHhv1bg=
Received: by 10.35.132.13 with SMTP id j13mr11128517pyn;
        Sun, 08 Oct 2006 12:42:02 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:42:02 -0700 (PDT)
Message-ID: <359a92830610081242i2d036a46u55a8383fb9d4c11@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:42:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26161_4488017.1160336522135"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26161_4488017.1160336522135
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you breaking up your query? That is, what analyzer are you using for
query parsing? Or are you building your own query programmatically?

Also, what about capitalization? Some of the analyzers automatically
lower-case the terms, either at index time or query time (or both). If
there's a mis-match, you get "strange" results.

I suspect what's happening is that your analyzers (either at index time,
query time or both) aren't behaving as you assume. I've gotten the most
intuitive results, when starting out, using WhitespaceAnalyzer. Once you're
comfortable with that analyzer, then think about the more complex ones.

And just to make it more confusing, if I understand correctly, when you
index UN_TOKENIZED, it doesn't matter what analyzer you use, it's ignored. I
might be wrong about this one though.....

I recommend downloading luke (google lucene luke). It'll let you look at
your index, and have queries parsed by various analyzers (and also explain
how the query is interpreted). It'll answer many, many, many questions for
you about "what really happened".

Best
Erick

On 10/8/06, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> Hi All
>
> I am trying to index a field which has more than one word with space e.g.
> "My Word"
> i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> Word"
> its not yielding any result.. if I index it TOKENIZED and use phrase
> query..
> then use
> phrase query then it yields result on all 3 combination "My" , "Word", "MY
> Word"
> but I actually want to show result only on "My Word"...
>
> Is term qurey limited to one word? i mean if we index a word with space
> and
> index it UN_TOKENIZED..
> shouldnt TermQuery yeild result to "My Word".
>
>
> Ismail
>
>

------=_Part_26161_4488017.1160336522135--

From java-user-return-23872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 08 23:33:53 2006
Return-Path: <java-user-return-23872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44890 invoked from network); 8 Oct 2006 23:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Oct 2006 23:33:52 -0000
Received: (qmail 30199 invoked by uid 500); 8 Oct 2006 23:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30075 invoked by uid 500); 8 Oct 2006 23:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30064 invoked by uid 99); 8 Oct 2006 23:33:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 16:33:46 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.186] ([64.233.182.186:26054] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id E9/D6-01505-07079254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:41:05 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1316549nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 14:41:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 00:22:52 2006
Return-Path: <java-user-return-23873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62341 invoked from network); 9 Oct 2006 00:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 00:22:52 -0000
Received: (qmail 97303 invoked by uid 500); 9 Oct 2006 00:22:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97179 invoked by uid 500); 9 Oct 2006 00:22:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97160 invoked by uid 99); 9 Oct 2006 00:22:46 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 17:22:46 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.185] ([64.233.182.185:26481] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 4A/C0-03466-F6399254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 17:10:24 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1346361nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 17:10:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 01:30:21 2006
Return-Path: <java-user-return-23874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83044 invoked from network); 9 Oct 2006 01:30:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 01:30:21 -0000
Received: (qmail 94114 invoked by uid 500); 9 Oct 2006 01:30:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93819 invoked by uid 500); 9 Oct 2006 01:30:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93808 invoked by uid 99); 9 Oct 2006 01:30:14 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 18:30:14 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.0 required=5.0 tests=
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.189] ([64.233.182.189:5547] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 13/B2-03466-19E99254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 17:57:56 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1354523nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 17:57:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 02:36:36 2006
Return-Path: <java-user-return-23875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91917 invoked from network); 9 Oct 2006 02:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 02:36:36 -0000
Received: (qmail 57786 invoked by uid 500); 9 Oct 2006 02:36:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57512 invoked by uid 500); 9 Oct 2006 02:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57501 invoked by uid 99); 9 Oct 2006 02:36:27 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 19:36:27 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.9 required=5.0 tests=HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.176] ([64.233.166.176:17106] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id B6/34-03466-C43A9254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 18:18:06 -0700
Received: by py-out-1112.google.com with SMTP id s49so1808870pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 18:17:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 02:59:09 2006
Return-Path: <java-user-return-23876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96089 invoked from network); 9 Oct 2006 02:59:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 02:59:08 -0000
Received: (qmail 76491 invoked by uid 500); 9 Oct 2006 02:59:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76447 invoked by uid 500); 9 Oct 2006 02:59:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76436 invoked by uid 99); 9 Oct 2006 02:59:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 19:59:02 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=ismail@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.0 required=5.0 tests=HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.189] ([64.233.182.189:33033] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id DB/B4-03466-5A5A9254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 18:28:06 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1359867nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 18:28:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 04:09:42 2006
Return-Path: <java-user-return-23877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17295 invoked from network); 9 Oct 2006 04:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 04:09:40 -0000
Received: (qmail 87505 invoked by uid 500); 9 Oct 2006 04:08:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87229 invoked by uid 500); 9 Oct 2006 04:08:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86341 invoked by uid 99); 9 Oct 2006 04:08:29 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 21:08:28 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=3.4 required=5.0 tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.181] ([64.233.166.181:51241] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id AD/C6-03466-DDFA9254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 19:11:41 -0700
Received: by py-out-1112.google.com with SMTP id s49so1821844pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 19:11:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 04:11:24 2006
Return-Path: <java-user-return-23878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19012 invoked from network); 9 Oct 2006 04:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 04:11:24 -0000
Received: (qmail 5345 invoked by uid 500); 9 Oct 2006 04:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5292 invoked by uid 500); 9 Oct 2006 04:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5249 invoked by uid 99); 9 Oct 2006 04:11:12 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 21:11:12 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.187] ([64.233.182.187:19038] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 3B/27-03466-EB1B9254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 19:19:44 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1368824nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 19:19:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 04:53:43 2006
Return-Path: <java-user-return-23879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45267 invoked from network); 9 Oct 2006 04:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 04:53:43 -0000
Received: (qmail 75920 invoked by uid 500); 9 Oct 2006 04:53:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75894 invoked by uid 500); 9 Oct 2006 04:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75859 invoked by uid 99); 9 Oct 2006 04:53:35 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 21:53:35 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=erickerickson@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=2.9 required=5.0 tests=HTML_10_20,HTML_MESSAGE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.166.176] ([64.233.166.176:31937] helo=py-out-1112.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 63/60-06006-1B5D9254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 21:53:15 -0700
Received: by py-out-1112.google.com with SMTP id s49so1863055pyc
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 21:52:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NQMmg9s4TTGEzVpiPDZ/8MGuhS1YlxXwCBuWH/JECf8uxiy7Z5G9ZpoaCkTHpsZg+2bMEuyoFIBnYujo0hi4xUdqTNdI3GlWPCa8unn8DqoUZQzprrhsJa94zKY+Hy4XSQI9jSXxxmPQtfbcwlREJUlEzQm+Ux3eSCvaJgW84Dw=
Received: by 10.35.121.2 with SMTP id y2mr11074569pym;
        Sun, 08 Oct 2006 12:33:59 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Sun, 8 Oct 2006 12:33:59 -0700 (PDT)
Message-ID: <359a92830610081233p4e994937l6fe02486b3cfcd27@mail.gmail.com>
Date: Sun, 8 Oct 2006 15:33:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26097_32338164.1160336039533"
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26097_32338164.1160336039533
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A quick word of caution about doc IDs. Lucene assigns a document id at index
time, but that ID is *not* guaranteed to remain the same for a given
document. For instance... you index docs A, B, and C. They get Lucene IDs 1,
2, 3. Then you remove doc B and optimize the index. As I understand it, doc
C will get re-assigned ID 2, and ID 3 won't exist.

In reality, I don't think that the algorithm is quite as simplistic as that,
but that's the idea. So be sure to assign your own unique identifiers that
you add to your docs as a field value.

Others on this list have talked abouta hybrid solution. That is, have *both*
lucene and a database, each doing what they do best. It's more complicated,
especially keeping the two in synch. some tools have been mentioned, I think
if you search the archive for database you'll bet a bunch of threads. But I
thought I'd mention it..

Best of luck
Erick

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
>
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty
> simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have
> an
> > index for which no two documents shared *any* common field if you
> choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching
> what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately.
> You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really,
> really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I
> am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26097_32338164.1160336039533--

From java-user-return-23880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 05:10:40 2006
Return-Path: <java-user-return-23880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51575 invoked from network); 9 Oct 2006 05:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 05:10:31 -0000
Received: (qmail 17585 invoked by uid 500); 9 Oct 2006 05:09:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13395 invoked by uid 500); 9 Oct 2006 05:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9403 invoked by uid 99); 9 Oct 2006 05:09:02 -0000
Received: from idunn.apache.osuosl.org (HELO idunn.apache.osuosl.org) (140.211.166.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 22:09:01 -0700
Authentication-Results: idunn.apache.osuosl.org header.from=chris.lu@gmail.com; domainkeys=good
X-ASF-Spam-Status: No, hits=0.5 required=5.0 tests=DNS_FROM_RFC_ABUSE
DomainKey-Status: good
X-DomainKeys: Ecelerity dk_validate implementing draft-delany-domainkeys-base-01
Received: from [64.233.182.185] ([64.233.182.185:35409] helo=nf-out-0910.google.com)
	by idunn.apache.osuosl.org (ecelerity 2.1.1.8 r(12930)) with ESMTP
	id 82/2A-03466-675C9254 for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 20:43:54 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1383657nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 20:43:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 06:51:50 2006
Return-Path: <java-user-return-23881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93173 invoked from network); 9 Oct 2006 06:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 06:51:50 -0000
Received: (qmail 56283 invoked by uid 500); 9 Oct 2006 06:51:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56263 invoked by uid 500); 9 Oct 2006 06:51:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56252 invoked by uid 99); 9 Oct 2006 06:51:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 23:51:44 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ismail@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 23:51:42 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1420723nfe
        for <java-user@lucene.apache.org>; Sun, 08 Oct 2006 23:51:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ATM+2yQ0pi5mBSeg3m+veiOl+F4hT/XPxcC2qgtL3MXG3TYproqtM/qSGCdwHG5vlU2w7iJY2ysAISs/U5BDyrGZhbbTqWhQeLMNLpRygpgeYnX1yadk2yWvSPDfD4/mcbmIRrIhSSh3/2rpXGd0sB8Tw8iPT3p0I80sEaepzx4=
Received: by 10.48.254.10 with SMTP id b10mr780760nfi;
        Sun, 08 Oct 2006 11:59:21 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 8 Oct 2006 11:59:21 -0700 (PDT)
Message-ID: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Date: Sun, 8 Oct 2006 14:59:21 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: TermQuery and PhraseQuery..problem with word with space
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189053_17343237.1160333961304"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_189053_17343237.1160333961304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All

I am trying to index a field which has more than one word with space e.g.
"My Word"
i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My Word"
its not yielding any result.. if I index it TOKENIZED and use phrase query..
then use
phrase query then it yields result on all 3 combination "My" , "Word", "MY
Word"
but I actually want to show result only on "My Word"...

Is term qurey limited to one word? i mean if we index a word with space and
index it UN_TOKENIZED..
shouldnt TermQuery yeild result to "My Word".


Ismail

------=_Part_189053_17343237.1160333961304--

From java-user-return-23882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 06:55:57 2006
Return-Path: <java-user-return-23882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93997 invoked from network); 9 Oct 2006 06:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 06:55:57 -0000
Received: (qmail 62444 invoked by uid 500); 9 Oct 2006 06:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62416 invoked by uid 500); 9 Oct 2006 06:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62405 invoked by uid 99); 9 Oct 2006 06:55:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Oct 2006 23:55:51 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 08 Oct 2006 23:55:49 -0700
Received: (qmail 31658 invoked from network); 9 Oct 2006 06:52:21 -0000
Received: from unknown (HELO bhavin) (172.16.3.37)
  by mailserver with SMTP; 9 Oct 2006 06:52:21 -0000
Message-ID: <003201c6eb71$e25a2c30$4b0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: How to fire a query ?
Date: Mon, 9 Oct 2006 12:39:37 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002F_01C6EB9F.FB5F92F0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002F_01C6EB9F.FB5F92F0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi guys,

How to fire "digital camera" when someone fire "digital cam" .. ?
Do i need to make manual list for such items and look up at search time =
or theree is any better way to do this...

-Bhavin pandya
------=_NextPart_000_002F_01C6EB9F.FB5F92F0--


From java-user-return-23883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 07:24:00 2006
Return-Path: <java-user-return-23883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7978 invoked from network); 9 Oct 2006 07:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 07:23:59 -0000
Received: (qmail 99930 invoked by uid 500); 9 Oct 2006 07:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99893 invoked by uid 500); 9 Oct 2006 07:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99882 invoked by uid 99); 9 Oct 2006 07:23:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 00:23:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 00:23:50 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1427923nfe
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 00:23:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L6CGAkdL8YyEffWiBiqytzf021hhjr7vio8qeV5hIgCnqMNpPUW08nax+P96Gu9VX4LBFJa+V8p45hfPu/q7oFwmvBIw6Bj563KFBfej35TSWq3YFeOs6nS25mZSPGjmX8WGAPfnArDyT3SCQFv8GxfnSKxHfvwkkvZuc/+D+3s=
Received: by 10.82.126.19 with SMTP id y19mr336864buc;
        Sun, 08 Oct 2006 12:33:27 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Sun, 8 Oct 2006 12:33:27 -0700 (PDT)
Message-ID: <6e3ae6310610081233x107ce8eeh50db5fef97ab7e40@mail.gmail.com>
Date: Sun, 8 Oct 2006 12:33:27 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene link database
In-Reply-To: <4529320B.2060508@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4528DFF7.6080500@gmail.com>
	 <359a92830610080722nb2dbe45xc03ad3ed7ba7da5c@mail.gmail.com>
	 <4529320B.2060508@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Like Erick said, one Lucene Document usually doens't equal to one
table entry. You need to flatten the database object into Lucene
Document. You can write your code in Hibernate and use Compass to
store data into Lucene. If you code is already finished, or you want a
scalable solution, DBSight can help you to traverse the object graph
and flatten the object into Lucene Document.

Or If you have difficulty to flatten the object, maybe the best way
for you is to search Lucene index twice, or once in DB, the other time
in Lucene? You can use something like "node_id:123 OR node_id:234 OR
..."

Chris Lu
------------------------------
Instant Lucene Search on Any Database/Application
http://www.dbsight.net

On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> Dear Erick;
>
> Thank you for your detailed insight. I have been trying to code a graph
> object database for sometime.
> I have prototyped on relational as well as object oriented databases,
> including opensource and commercial implementations.
> (so far, I have tried hibernate, objectivity/db, db4o) while object
> databases excel in traversing links, they are poor when searching.
>
> lucene so far solves the problem of solving. I am thinking of a document
> as a list of tuples. (sequence of fields) and I can do searches with
> lucene, it is really nice.
>
> now I have to solve the problem of linking. if I keep the nodes with a
> lucene index, and I can fetch documents with a doc_id, or some sort of
> surrogate identifier, and
> use those identifiers as node_id in an object graph, that will be what I
> want. but in order to do that I need to be able to query the lucene
> index by document_id.
>
> I was referring to the link db of the nutch. They do have some sort of
> link db implementation, that runs with hadoop, but I have not understood
> the full code.
> I am trying to understand the structure of this link database. I was
> thinking of using documents with src and dst fields, that have document
> id's as values. (one idea, I will try it tomorrow)
>
> Again thanks a bunch.
>
> Best Regards,
> C.B.
>
> Erick Erickson wrote:
> > Aproach it in whatever way you want as long as it solves your problem
> > <G>.
> >
> > My first question is why use lucene? Would a database suit your needs
> > better? Of course, I can't say. Lucene shines at full-text searching, so
> > it's a closer call if you aren't searching on parts of text. By that I
> > mean
> > that if you're not searching on *parts* of your links, you may want to
> > consider a DB solution.
> >
> > That said, and if I understand your requirement, you have a pretty simple
> > design. Each document has two fields, incominglinks and outgoing
> > links. But
> > see the note below. Lucene indexes what you give it, so the fact that
> > some
> > of the links aren't hypertext links is immaterial to Lucene. Since you
> > control both the indexer and searcher, these confrom to whatever your
> > requirements are. It's up to you to map semantics onto these entities.
> >
> > One common trap DB-savvy people have is that they think of documents as
> > entries in a table, all with the same fields. There is nothing
> > requiring you
> > to have the *same* fields in each document in an index. You could have an
> > index for which no two documents shared *any* common field if you choose.
> >
> > So, if you want to find out what, say, which documents have link X as an
> > incoming link, just search on incominglinks:X. If you wanted to find the
> > documents that had any incoming links X, Y, Z that matched an outgoing
> > link
> > in another document, just search the OR of these in outgoinglinks.
> >
> > If you want some kind of map of the whole web of links, you'll have to
> > write
> > some iterative loop and keep track. There's nothing built in that I
> > know of
> > that lets you answer "Given link X, show me all the documents no more
> > than 3
> > hops away". Lucene is an *engine*, designed to have apps built on top
> > of it.
> > Lucene doesn't deal with relations between documents, just searching what
> > you've indexed.
> >
> > It's easy enough to store a variable number of links in your
> > incominglinks
> > or outgoinglinks field. Just be sure they're tokenized appropriately. You
> > can add them any way you choose, either concatenate them all into a big
> > string and index that, or index them into the same field, e.g.
> > Document doc = new Document();
> > doc.add("incoming", "link1");
> > doc.add("incoming", "link2");
> > .
> > .
> > .
> > writer.add(doc);
> >
> > According to a discussion from a while ago, this is the same as
> > doc.add("incoming", "link1 link2");
> > in terms of how it all gets handled internally.
> >
> >
> > NOTE: I'm skipping most of the question of which Analyzer you use.
> > This will
> > almost surely trip you up sometime. I'd suggest starting with
> > WhitespaceAnalyzer as that's more intuitive. Some of the other analyzers
> > will break your links up in ways you don't expect. Really, really, really
> > get a copy of Luke to see what's actually *in* your index and how
> > searches
> > work. And how the analyzer you choose changes what's searched for, as
> > well
> > as what's indexec. Google lucene luke and you'll find it.
> >
> > Anyway, hope this all helps.
> > Erick
> >
> > On 10/8/06, Cam Bazz <cambazz@gmail.com> wrote:
> >>
> >> Hello,
> >>
> >> I would like to make a link database using lucene. Similar to one that
> >> nutch uses. I have read the basic documentation and understood how
> >> document indexing, search, and scoring works. But what I like is
> >> different documents having different kind of links (semantic links) to
> >> each other. I would like to be able to search in the database like
> >> incominglinksofdocument(id), outgoinglinksofdocument(id). the links I am
> >> talking about, might not necessarily be hypertext links.
> >>
> >> How would I approach to a problem like this?
> >>
> >> Best Regards,
> >> -C.B.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 08:12:03 2006
Return-Path: <java-user-return-23884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22683 invoked from network); 9 Oct 2006 08:12:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 08:12:03 -0000
Received: (qmail 99067 invoked by uid 500); 9 Oct 2006 08:11:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98884 invoked by uid 500); 9 Oct 2006 08:11:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98864 invoked by uid 99); 9 Oct 2006 08:11:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:11:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:11:50 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id k994eqx8098022
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 04:40:52 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k994h9PK2478152
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 06:43:09 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k994eprK032196
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 06:40:51 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k994ept2032193
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 06:40:51 +0200
In-Reply-To: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
Subject: Re: TermQuery and PhraseQuery..problem with word with space
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF3821B325.55F165C0-ON88257202.0018E2D3-88257202.001991DC@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 8 Oct 2006 20:39:17 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 09/10/2006 06:43:09
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I am trying to index a field which has more than one word with space e.g.
> "My Word"
> i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
Word"
> its not yielding any result..

Seems that it should work.

Few things to check:
- make sure you are indexing with UN_TOKENIZED.
- check that either both field and query text are lower-cased or both are
not lower-cased.
- use Luke to examine the content of the index (when adding as
un-tokenized);
  print the query (toString);
  - do they match each other? match your expectation?

>
> Is term qurey limited to one word? i mean if we index a word with space
and
> index it UN_TOKENIZED..
> shouldnt TermQuery yeild result to "My Word".
>
>
> Ismail

There is no such limitation.

Hope this helps,
Doron



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 08:45:17 2006
Return-Path: <java-user-return-23885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31277 invoked from network); 9 Oct 2006 08:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 08:45:17 -0000
Received: (qmail 46827 invoked by uid 500); 9 Oct 2006 08:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46796 invoked by uid 500); 9 Oct 2006 08:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46778 invoked by uid 99); 9 Oct 2006 08:45:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 01:45:10 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.33] (HELO web26011.mail.ukl.yahoo.com) (217.146.177.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Oct 2006 01:45:06 -0700
Received: (qmail 79877 invoked by uid 60001); 9 Oct 2006 08:44:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=E5BLSerOTum8YLALbnVmX87WfyNPHjSulPbfyDhp9i+v/p9jyzIRfHnROHcY5KSekC9kslLRvjVUK/yiJRwBUei0BzBs1pnJz4tHbzroSHDa1Ta2Zpyr+RG6RgOlHRqfFOXoXhppA5rKmOvtRDhkgKHNh3Ml5c/uScuzXrBJ+wY=  ;
Message-ID: <20061009084443.79875.qmail@web26011.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26011.mail.ukl.yahoo.com via HTTP; Mon, 09 Oct 2006 08:44:43 GMT
Date: Mon, 9 Oct 2006 08:44:43 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: lucene link database
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>if you search the archive for database you'll bet a bunch of threads=0A=
=0AThis was a hybrid implementation I did which worked with HSQLDB and Derb=
y:=0A=0Ahttp://www.mail-archive.com/java-user@lucene.apache.org/msg02953.ht=
ml=0A=0A=0ACheers=0AMark=0A=0A----- Original Message ----=0AFrom: Erick Eri=
ckson <erickerickson@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: S=
unday, 8 October, 2006 8:33:59 PM=0ASubject: Re: lucene link database=0A=0A=
A quick word of caution about doc IDs. Lucene assigns a document id at inde=
x=0Atime, but that ID is *not* guaranteed to remain the same for a given=0A=
document. For instance... you index docs A, B, and C. They get Lucene IDs 1=
,=0A2, 3. Then you remove doc B and optimize the index. As I understand it,=
 doc=0AC will get re-assigned ID 2, and ID 3 won't exist.=0A=0AIn reality, =
I don't think that the algorithm is quite as simplistic as that,=0Abut that=
's the idea. So be sure to assign your own unique identifiers that=0Ayou ad=
d to your docs as a field value.=0A=0AOthers on this list have talked about=
a hybrid solution. That is, have *both*=0Alucene and a database, each doing=
 what they do best. It's more complicated,=0Aespecially keeping the two in =
synch. some tools have been mentioned, I think=0Aif you search the archive =
for database you'll bet a bunch of threads. But I=0Athought I'd mention it.=
.=0A=0ABest of luck=0AErick=0A=0AOn 10/8/06, Cam Bazz <cambazz@gmail.com> w=
rote:=0A>=0A> Dear Erick;=0A>=0A> Thank you for your detailed insight. I ha=
ve been trying to code a graph=0A> object database for sometime.=0A> I have=
 prototyped on relational as well as object oriented databases,=0A> includi=
ng opensource and commercial implementations.=0A> (so far, I have tried hib=
ernate, objectivity/db, db4o) while object=0A> databases excel in traversin=
g links, they are poor when searching.=0A>=0A> lucene so far solves the pro=
blem of solving. I am thinking of a document=0A> as a list of tuples. (sequ=
ence of fields) and I can do searches with=0A> lucene, it is really nice.=
=0A>=0A> now I have to solve the problem of linking. if I keep the nodes wi=
th a=0A> lucene index, and I can fetch documents with a doc_id, or some sor=
t of=0A> surrogate identifier, and=0A> use those identifiers as node_id in =
an object graph, that will be what I=0A> want. but in order to do that I ne=
ed to be able to query the lucene=0A> index by document_id.=0A>=0A> I was r=
eferring to the link db of the nutch. They do have some sort of=0A> link db=
 implementation, that runs with hadoop, but I have not understood=0A> the f=
ull code.=0A> I am trying to understand the structure of this link database=
. I was=0A> thinking of using documents with src and dst fields, that have =
document=0A> id's as values. (one idea, I will try it tomorrow)=0A>=0A> Aga=
in thanks a bunch.=0A>=0A> Best Regards,=0A> C.B.=0A>=0A> Erick Erickson wr=
ote:=0A> > Aproach it in whatever way you want as long as it solves your pr=
oblem=0A> > <G>.=0A> >=0A> > My first question is why use lucene? Would a d=
atabase suit your needs=0A> > better? Of course, I can't say. Lucene shines=
 at full-text searching, so=0A> > it's a closer call if you aren't searchin=
g on parts of text. By that I=0A> > mean=0A> > that if you're not searching=
 on *parts* of your links, you may want to=0A> > consider a DB solution.=0A=
> >=0A> > That said, and if I understand your requirement, you have a prett=
y=0A> simple=0A> > design. Each document has two fields, incominglinks and =
outgoing=0A> > links. But=0A> > see the note below. Lucene indexes what you=
 give it, so the fact that=0A> > some=0A> > of the links aren't hypertext l=
inks is immaterial to Lucene. Since you=0A> > control both the indexer and =
searcher, these confrom to whatever your=0A> > requirements are. It's up to=
 you to map semantics onto these entities.=0A> >=0A> > One common trap DB-s=
avvy people have is that they think of documents as=0A> > entries in a tabl=
e, all with the same fields. There is nothing=0A> > requiring you=0A> > to =
have the *same* fields in each document in an index. You could have=0A> an=
=0A> > index for which no two documents shared *any* common field if you=0A=
> choose.=0A> >=0A> > So, if you want to find out what, say, which document=
s have link X as an=0A> > incoming link, just search on incominglinks:X. If=
 you wanted to find the=0A> > documents that had any incoming links X, Y, Z=
 that matched an outgoing=0A> > link=0A> > in another document, just search=
 the OR of these in outgoinglinks.=0A> >=0A> > If you want some kind of map=
 of the whole web of links, you'll have to=0A> > write=0A> > some iterative=
 loop and keep track. There's nothing built in that I=0A> > know of=0A> > t=
hat lets you answer "Given link X, show me all the documents no more=0A> > =
than 3=0A> > hops away". Lucene is an *engine*, designed to have apps built=
 on top=0A> > of it.=0A> > Lucene doesn't deal with relations between docum=
ents, just searching=0A> what=0A> > you've indexed.=0A> >=0A> > It's easy e=
nough to store a variable number of links in your=0A> > incominglinks=0A> >=
 or outgoinglinks field. Just be sure they're tokenized appropriately.=0A> =
You=0A> > can add them any way you choose, either concatenate them all into=
 a big=0A> > string and index that, or index them into the same field, e.g.=
=0A> > Document doc =3D new Document();=0A> > doc.add("incoming", "link1");=
=0A> > doc.add("incoming", "link2");=0A> > .=0A> > .=0A> > .=0A> > writer.a=
dd(doc);=0A> >=0A> > According to a discussion from a while ago, this is th=
e same as=0A> > doc.add("incoming", "link1 link2");=0A> > in terms of how i=
t all gets handled internally.=0A> >=0A> >=0A> > NOTE: I'm skipping most of=
 the question of which Analyzer you use.=0A> > This will=0A> > almost surel=
y trip you up sometime. I'd suggest starting with=0A> > WhitespaceAnalyzer =
as that's more intuitive. Some of the other analyzers=0A> > will break your=
 links up in ways you don't expect. Really, really,=0A> really=0A> > get a =
copy of Luke to see what's actually *in* your index and how=0A> > searches=
=0A> > work. And how the analyzer you choose changes what's searched for, a=
s=0A> > well=0A> > as what's indexec. Google lucene luke and you'll find it=
.=0A> >=0A> > Anyway, hope this all helps.=0A> > Erick=0A> >=0A> > On 10/8/=
06, Cam Bazz <cambazz@gmail.com> wrote:=0A> >>=0A> >> Hello,=0A> >>=0A> >> =
I would like to make a link database using lucene. Similar to one that=0A> =
>> nutch uses. I have read the basic documentation and understood how=0A> >=
> document indexing, search, and scoring works. But what I like is=0A> >> d=
ifferent documents having different kind of links (semantic links) to=0A> >=
> each other. I would like to be able to search in the database like=0A> >>=
 incominglinksofdocument(id), outgoinglinksofdocument(id). the links I=0A> =
am=0A> >> talking about, might not necessarily be hypertext links.=0A> >>=
=0A> >> How would I approach to a problem like this?=0A> >>=0A> >> Best Reg=
ards,=0A> >> -C.B.=0A> >>=0A> >> ------------------------------------------=
---------------------------=0A> >> To unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0A> >> For additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A> >>=0A> >>=0A> >=0A>=0A>=0A> ---------------------=
------------------------------------------------=0A> To unsubscribe, e-mail=
: java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A=0A=0A=0A=09=09=0A____=
_______________________________________________________ =0AYahoo! Messenger=
 - with free PC-PC calling and photo sharing. http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 09:19:47 2006
Return-Path: <java-user-return-23886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38536 invoked from network); 9 Oct 2006 09:19:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 09:19:46 -0000
Received: (qmail 5723 invoked by uid 500); 9 Oct 2006 09:19:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5436 invoked by uid 500); 9 Oct 2006 09:19:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5425 invoked by uid 99); 9 Oct 2006 09:19:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 02:19:40 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of backman.rickard@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 02:19:39 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1358814wxc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 02:19:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qkflexksLJjPOojeff91eUWybNxid3/yiRDJHxEM9qc82D0NWuReWD2WVUsZyET7sV2lEFg5p1EJxg/FfsY4ebjsN+t6+XDTGRa6t//crMgbzIOa5TALzT1hvR2jZ1w2cXh6oq7onN3cp2bgJGFeVaC4FTlIaWNds21rrrqogRY=
Received: by 10.70.19.16 with SMTP id 16mr10813400wxs;
        Mon, 09 Oct 2006 02:19:18 -0700 (PDT)
Received: by 10.70.89.6 with HTTP; Mon, 9 Oct 2006 02:19:18 -0700 (PDT)
Message-ID: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
Date: Mon, 9 Oct 2006 11:19:18 +0200
From: "=?ISO-8859-1?Q?Rickard_B=E4ckman?=" <backman.rickard@gmail.com>
To: java-user@lucene.apache.org
Subject: Incremental updates / slow searches.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88446_8070572.1160385558775"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_88446_8070572.1160385558775
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

we are using a search system based on Lucene and have recently tried to add
incremental updating of the index instead of building a new index every now
and then. However we now run into problems as our searches starts to take
very long time to complete.

Our index is about 8-9GB large and we are sending lots of updates / second
(we are probably merging in 200 - 300 in a few seconds). Today we buffer a
bunch of updates and then merge them into the existing index like a batch,
first doing deletes and then inserts.

We are currently not using any special tuning of Lucene.

Does anyone have any similiar experiences from Lucene or advices on how to
reduce the amount of times it takes to perform a search? In particular what
would be an optimal combination of update size, merge factor, max buffered
docs?

/Rickard

------=_Part_88446_8070572.1160385558775--

From java-user-return-23887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 09:55:43 2006
Return-Path: <java-user-return-23887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46329 invoked from network); 9 Oct 2006 09:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 09:55:42 -0000
Received: (qmail 60139 invoked by uid 500); 9 Oct 2006 09:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59132 invoked by uid 500); 9 Oct 2006 09:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59121 invoked by uid 99); 9 Oct 2006 09:55:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 02:55:34 -0700
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [130.88.13.7] (HELO curlew.cs.man.ac.uk) (130.88.13.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 02:55:29 -0700
Received: from gerhayn.mcc.ac.uk ([10.2.18.1])
	by curlew.cs.man.ac.uk with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GWrqV-000Cat-87
	for java-user@lucene.apache.org; Mon, 09 Oct 2006 10:54:51 +0100
Received: from cspool34.cs.man.ac.uk ([130.88.195.134]:2740)
	by gerhayn.mcc.ac.uk with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GWrqV-0003hZ-0V
	for java-user@lucene.apache.org; Mon, 09 Oct 2006 10:54:51 +0100
Message-ID: <452A1C6B.80107@yahoo.co.uk>
Date: Mon, 09 Oct 2006 10:54:51 +0100
From: Rahil <qamar_rahil@yahoo.co.uk>
Reply-To:  qamar_rahil@yahoo.co.uk
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.13) Gecko/20060414
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performing a like query
References: <451FAEF8.2000300@yahoo.co.uk>	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>	 <452045A4.8000501@yahoo.co.uk> <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com> <452662B5.8000905@yahoo.co.uk> <45268499.8030105@syr.edu>
In-Reply-To: <45268499.8030105@syr.edu>
Content-Type: multipart/alternative;
 boundary="------------000406090106040005030106"
X-Authenticated-Sender: Rahil Qamar from cspool34.cs.man.ac.uk [130.88.195.134]:2740
X-Authenticated-From: R.Qamar@postgrad.manchester.ac.uk
X-UoM: Scanned by the University Mail System. See http://www.itservices.manchester.ac.uk/email/filtering/information/ for details.
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------000406090106040005030106
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi Steve

Thanks for your response. I was just wondering whether there is a 
difference between the regular expression you sent me i.e.
 (i)   \s*(?:\b|(?<=\S)(?=\s)|(?<=\s)(?=\S))\s*

    and
   
 (ii)   \\b

as they lead to the same output. For example, the string search "testing 
a-new string=3/4" results in the same output :
Item is :
Item is : testing
Item is : 
Item is : a
Item is : -
Item is : new
Item is : 
Item is : string
Item is : =
Item is : 3
Item is : /
Item is : 4

What Id like to do though is remove the split over space characters so 
that the output is such :
Item is : testing
Item is : a
Item is : -
Item is : new
Item is : string
Item is : =
Item is : 3
Item is : /
Item is : 4

Im not great at regular expressions so would really appreciate if you 
could provide me with some insight into expression (i) .

Thanks for all your help
Rahil

Steven Rowe wrote:

>Hi Rahil,
>
>Rahil wrote:
>  
>
>>I couldnt figure out a valid regular expression to write a valid 
>>Pattern.compile(String regex) which can tokenise a string into "O/E -
>>visual acuity R-eye=6/24" into "O","/","E", "-", "visual", "acuity",
>>"R", "-", "eye", "=", "6", "/", "24".
>>    
>>
>
>The following regular expression should match boundaries between word
>and non-word, or between space and non-space, in either order, and
>includes contiguous whitespace:
>
>   \s*(?:\b|(?<=\S)(?=\s)|(?<=\s)(?=\S))\s*
>
>Note that with the above regex, the "(%$#!)" in "some (%$#!) text" will
>be tokenized as a single token.
>
>Hope it helps,
>Steve
>
>  
>
>>Erick Erickson wrote:
>>
>>    
>>
>>>Well, I'm not the greatest expert, but a quick look doesn't show me
>>>anything
>>>obvious. But I have to ask, wouldn't WhiteSpaceAnalyzer work for you?
>>>Although I don't remember whether WhiteSpaceAnalyzer lowercases or not.
>>>
>>>It sure looks like you're getting reasonable results given how you're
>>>tokenizing.
>>>
>>>If not that, you might want to think about PatternAnalyzer. It's in the
>>>memory contribution section, see import
>>>org.apache.lucene.index.memory.PatternAnalyzer. One note of caution, the
>>>regex identifies what is NOT a token, rather than what is. This threw
>>>me for
>>>a bit.
>>>
>>>I still claim that you could break the tokens up like "6", "/", "12", and
>>>make SpanNearQuery work with a span of 0 (or 1, I don't remember right
>>>now),
>>>but that may well be more trouble than it's worth, it's up to you of
>>>course.
>>>What you get out of this is, essentially, is a query that's only
>>>satisfied
>>>if the terms you specify are right next to each other. So you'd find both
>>>your documents in your example, since you would have tokenized "6", "/",
>>>"12" in, say positions 0, 1, 2 in doc1 and 4, 5, 6 in the second doc. But
>>>since they're tokens that are next to each other in each doc,
>>>searching with
>>>a SpanNearQuery for "6", "/", and "12" that are "right next to each
>>>other",
>>>which you specify with a slop of 0 as I remember you should get both.
>>>
>>>Alternatively, if you tokenize it this way, a PhraseQuery might work as
>>>well, Thus, searching for "6 / 12" (as a phrase query and note the
>>>spaces)
>>>might be just what you want. You'd have to tokenize the query, but that's
>>>relatively easy. This is probably much simpler than a SpanNearQuery
>>>now that
>>>I think about it.....
>>>
>>>Be aware that if you use the *TermEnums we've been talking about, you'll
>>>probably wind up wrapping them in a ConstantScoreQuery. And if you
>>>have no
>>>*other* terms, you won't get any relevancy out of your search. This
>>>may be
>>>important.....
>>>
>>>Anyway, that's as creative as I can be Sunday night <G>. Best of luck....
>>>
>>>Erick
>>>
>>>On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>>>
>>>      
>>>
>>>>Hi Erick
>>>>
>>>>Thanks for your response. There's a lot to chew on in your reply and Im
>>>>looking at the suggestions you've made.
>>>>
>>>>Yeah I have Luke installed and have queried my index but there isn't any
>>>>great explanation Im getting out of it.  A query for "6/12" is sent as
>>>>"TERM:6/12" which is quite straight-forward. I did an explanation of the
>>>>query in my code though and got some more information but that too
>>>>wasn't of much help either.
>>>>-- 
>>>>Explanation explain = searcher.explain(query,0);
>>>>
>>>>OUTPUT:
>>>>query: +TERM:6/12
>>>>explain.getDescription() : weight(TERM:6/12 in 0), product of:
>>>>Detail 0 : 0.99999994 = queryWeight(TERM:6/12), product of:
>>>>  2.0986123 = idf(docFreq=1)
>>>>  0.47650534 = queryNorm
>>>>
>>>>Detail 1 : 0.0 = fieldWeight(TERM:6/12 in 0), product of:
>>>>  0.0 = tf(termFreq(TERM:6/12)=0)
>>>>  2.0986123 = idf(docFreq=1)
>>>>  0.5 = fieldNorm(field=TERM, doc=0)
>>>>
>>>>Number of results returned: 1
>>>>SampleLucene.displayIndexResults
>>>>SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>>>>1.0    0    260278007    6/12 (finding)
>>>>-- 
>>>>
>>>>My tokeniser called BaseAnalyzer extends Analyzer. Since I wanted to
>>>>retain all non whitespace characters and not just letters and digits, I
>>>>introduced the following block of code in the overridden tokenStream( )
>>>>
>>>>-- 
>>>>public TokenStream tokenStream(String fieldName, Reader reader) {
>>>>
>>>>        return new CharTokenizer(reader) {
>>>>
>>>>            protected char normalize(char c) {
>>>>                     return Character.toLowerCase(c);
>>>>            }
>>>>                protected boolean isTokenChar(char c) {
>>>>                       boolean type = false;
>>>>                       boolean space =   Character.isWhitespace(c);
>>>>                       boolean letDig =  Character.isLetterOrDigit(c);
>>>>
>>>>                        if(letDig && !space) //letter or digit but not
>>>>whitespace
>>>>                            type = true;
>>>>                        else if(!letDig && !space)   //not letter,digit
>>>>or whitespace (retain non-whitespace characters)
>>>>                            type = true;
>>>>                        else if( !letDig && space)              //is not
>>>>a letter or digit but is a whitespace
>>>>                            type = false;
>>>>                return type;
>>>>            }
>>>>        };
>>>>      }
>>>>
>>>>---
>>>>The problem is that when the term "6/12 (finding)" is tokenised, two
>>>>tokens are generated viz. '6/12' and '(finding)'. Therefore when I
>>>>search for '6/12' this term is returned as in a way it is an EXACT token
>>>>match.
>>>>
>>>>However when the term "R-eye=6/12 (finding)" is tokenised it again
>>>>results in two tokens viz. 'R-eye=6/12' and '(finding)'. So now if I
>>>>look for '6/12' its no more an exact match since there is no token with
>>>>this EXACT value. A simple searcher.search(query) isnt useful to pull
>>>>out the partial token match.
>>>>
>>>>I think it wont be useful to create separate tokens for "6", "/", "12"
>>>>or "R","-","eye","=", and so on. Im having a look at the RegexTermEnum
>>>>and WildcardTermEnum as they might possibily help.
>>>>
>>>>Would appreciate your comments on the BaseAnalyzer tokenizer and query
>>>>explanation Ive received so far.
>>>>
>>>>Thanks
>>>>Rahil
>>>>
>>>>Erick Erickson wrote:
>>>>
>>>>        
>>>>
>>>>>Most often, from what I've seen on this e-mail list, unexpected
>>>>>results are
>>>>>because you're not indexing on the tokens you *think* you're indexing.
>>>>>          
>>>>>
>>>>Or
>>>>        
>>>>
>>>>>not searching on them. By that I mean that the analyzers you're using
>>>>>          
>>>>>
>>>>are
>>>>        
>>>>
>>>>>behaving in ways you don't expect.
>>>>>
>>>>>That said, I think you're getting exactly what you should. I suspect
>>>>>you're
>>>>>indexing tokens as follows
>>>>>doc1: "6/12"  and "(finding)"
>>>>>doc2: "R-eye=6/12" and "(finding)"
>>>>>
>>>>>So it makes perfect sense that searching in 6/12 returns doc1 and
>>>>>search on
>>>>>R-eye=6/12 returns doc 2
>>>>>
>>>>>So, first question: Have you actually used something like Luke (google
>>>>>luke
>>>>>lucene) to examine your index and see if what you've put in there is
>>>>>          
>>>>>
>>>>what
>>>>        
>>>>
>>>>>you expect? What analyzer is your custom analyzer built upon and is it
>>>>>doing
>>>>>anything you're unaware of (for instance, lower-casing the 'R' in your
>>>>>second example)?
>>>>>
>>>>>Here's what I'd do.
>>>>>1> get Luke and see what's actually in your index.
>>>>>2> use searcher.explain (?) to see the query you're actually emitting.
>>>>>3> if you make no headway, post the smallest code snippets you can
>>>>>          
>>>>>
>>>>that
>>>>        
>>>>
>>>>>illustrate the problem. Folks would need the indexing AND searching
>>>>>          
>>>>>
>>>>code.
>>>>        
>>>>
>>>>>As far as queryies like "contains" in java.... Well sure. Write a
>>>>>          
>>>>>
>>>>filter
>>>>        
>>>>
>>>>>that filters on regular expressions or wildcards (you'll need
>>>>>WildcardTermEnum and RegexTermEnum). Or index things differently (e.g.
>>>>>index
>>>>>"6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on
>>>>>doc 2.
>>>>>Now your searches for "6/12" will work. Or index "6" "/", "12" and
>>>>>"finding"
>>>>>on doc1, index similarly for doc2, and use a SpanNearQuery with an
>>>>>appropriate span value. Or....
>>>>>
>>>>>This is all gobbldeygook if you haven't gotten a copy of "Lucene In
>>>>>Action",
>>>>>which you should read in order to get the most out of Lucene. It's for
>>>>>the
>>>>>1.4 code base, but the 2.0 Lucene code base isn't that much different.
>>>>>More
>>>>>importantly, it ties lots of stuff together. Also, the junit tests
>>>>>that come
>>>>>along with the Lucene code can be invaluable to show you how to do
>>>>>something.
>>>>>
>>>>>Hope this helps
>>>>>Erick
>>>>>
>>>>>On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>>>>>
>>>>>          
>>>>>
>>>>>>Hi
>>>>>>
>>>>>>I have a custom-built Analyzer where I tokenize all non-whitespace
>>>>>>characters as well available in the field "TERM" (which is the only
>>>>>>field being tokenised).
>>>>>>
>>>>>>If I now query my index file for a term "6/12" for instance, I get
>>>>>>            
>>>>>>
>>>>back
>>>>        
>>>>
>>>>>>only ONE result
>>>>>>
>>>>>>SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>>>>>>1.0    0    260278007    6/12 (finding)
>>>>>>
>>>>>>instead of TWO. There is another token in the index file of the form
>>>>>>
>>>>>>2561280012    0    163939000    R-eye=6/12 (finding)    0    3    en
>>>>>>
>>>>>>At first it wasn't quite obvious to me why this was happening. But
>>>>>>            
>>>>>>
>>>>after
>>>>        
>>>>
>>>>>>playing around a bit I realised that if I pass a query "R-eye=6/12"
>>>>>>instead, I will get this second result (but not the first one
>>>>>>            
>>>>>>
>>>>now). Is
>>>>        
>>>>
>>>>>>there a way to tweak the  Query query = parser.parse(searchString)
>>>>>>method so that I can get both the records if I query for "6/12".
>>>>>>Something like a 'contains' query in Java.
>>>>>>
>>>>>>Will appreciate all help. Thanks a lot
>>>>>>
>>>>>>Regards
>>>>>>Rahil
>>>>>>            
>>>>>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>

--------------000406090106040005030106--

From java-user-return-23888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 11:49:19 2006
Return-Path: <java-user-return-23888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87915 invoked from network); 9 Oct 2006 11:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 11:49:19 -0000
Received: (qmail 25023 invoked by uid 500); 9 Oct 2006 11:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24823 invoked by uid 500); 9 Oct 2006 11:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24812 invoked by uid 99); 9 Oct 2006 11:49:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 04:49:12 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of eliakis@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 04:49:09 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1387621wxc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 04:48:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:mime-version:content-type;
        b=LVeW8OK9A9SOBPzhQ8lL1JNMGUSfRrZbuybXgqQX1WrzcXHz9ugtnmJ3uUQQnxPPLhm76drqwuU3dLrS307hksSRTByfr4GT0n5TFSGMvtSdP8y3Cp2Q9eiCAtzDwH4g8lxfBuTAVyXqUI1sfxlTG3n4w00ObfGKNKDkIlDoXbM=
Received: by 10.70.65.5 with SMTP id n5mr11056692wxa;
        Mon, 09 Oct 2006 04:48:48 -0700 (PDT)
Received: by 10.70.19.13 with HTTP; Mon, 9 Oct 2006 04:48:48 -0700 (PDT)
Message-ID: <e129b0e70610090448r271bff11l87b17a1d15d155f1@mail.gmail.com>
Date: Mon, 9 Oct 2006 14:48:48 +0300
From: "Stelios Eliakis" <eliakis@gmail.com>
To: java-user@lucene.apache.org
Subject: highlight optimization
Cc: silegav@gmail.com
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_160475_6867733.1160394528750"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_160475_6867733.1160394528750
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I have a collection of 500 txt documents and I implement a web
application(JSP) for searching these documents.
In addition, the application shows the BestFragment of each result and
highlights the query terms.
My application is slow enough (about 2,5-3 seconds for each query) even if I
run it from my computer (It's not publiched yet).
Do you suggest me something in order to improve speed?
I have read that you have to keep the indexsearcher open. Is it right? and
how could I do that(when I must close it)?

In Highlighting I use the following
                     String result =
highlighter.getBestFragment(tokenStream,text)


text parameter must be String so I open the document and convert it to
String. Of course it is time consuming. Is there a different way?

Thanks in advance,

-- 
Stelios Eliakis

------=_Part_160475_6867733.1160394528750--

From java-user-return-23889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 14:17:29 2006
Return-Path: <java-user-return-23889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44594 invoked from network); 9 Oct 2006 14:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 14:17:29 -0000
Received: (qmail 50659 invoked by uid 500); 9 Oct 2006 14:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50368 invoked by uid 500); 9 Oct 2006 14:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50357 invoked by uid 99); 9 Oct 2006 14:17:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:17:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:17:20 -0700
Received: from [192.168.128.211] ([192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k99EGugv030502
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 17:16:57 +0300
Message-ID: <452A59D5.4090300@sirma.bg>
Date: Mon, 09 Oct 2006 17:16:53 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: threadsafe QueryParser?
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Method
static public Query parse(String query, String field, Analyzer analyzer)
in class QueryParser is deprecated in 1.9.1 and the suggestion is: /"Use 
an instance of QueryParser and the {@link #parse(String)} method instead."/
My question is: in the context of multi threaded app, is it safe that 
distinct threads utilize the same instance of QueryParser for parsing 
their queries?

ps. After writing this letter, I incidentally ran into the answer in the 
end of the class comment of QueryParser:
/ * <p>Note that QueryParser is <em>not</em> thread-safe.</p>/

So, is this it?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 14:25:48 2006
Return-Path: <java-user-return-23890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47562 invoked from network); 9 Oct 2006 14:25:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 14:25:48 -0000
Received: (qmail 75473 invoked by uid 500); 9 Oct 2006 14:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75445 invoked by uid 500); 9 Oct 2006 14:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75434 invoked by uid 99); 9 Oct 2006 14:25:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:25:40 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:25:38 -0700
Received: by py-out-1112.google.com with SMTP id d80so2281916pyd
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 07:25:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CVArw2C4I6ogkTzzpoZ0Y4rfW+JuCrSpHWm65QY5UC6MHzqhKEy8qvcPMZG4/MPFMRpqGXXop8r+fhfc03Lt7k9ZAzFcJ+EUV8HJ3WZYNJvb3JGl/gBlrX1EXzxXKqMpK0urBy4DHRUqOMr5MnMcKkYGf130UGgQEWg04GrY0GA=
Received: by 10.35.20.14 with SMTP id x14mr12960668pyi;
        Mon, 09 Oct 2006 07:25:16 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 9 Oct 2006 07:25:14 -0700 (PDT)
Message-ID: <359a92830610090725p35ae00bdw76aa35de3f8aea16@mail.gmail.com>
Date: Mon, 9 Oct 2006 10:25:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: highlight optimization
In-Reply-To: <e129b0e70610090448r271bff11l87b17a1d15d155f1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36431_14085294.1160403915921"
References: <e129b0e70610090448r271bff11l87b17a1d15d155f1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_36431_14085294.1160403915921
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The fastest way to see if opening/closing your searcher is a problem would
be to write a tiny little program that opened the index, fired off a few
queries and timed each one. The queries can be canned, of course. I'm
thinking this is, say, less that 20 lines (including imports). If you're
familiar with junit, think of it in those terms.

Once you've proved that is a bottleneck you want to work on, you probably
need a search server. We've used XmlRpc, which has server code built-in, and
has worked like a charm for us. It'll add a bit of complexity, but it'll
keep your searchers open.

That said, I suspect that someone will chime in with another solution, since
this is already implemented <G>....

Erick

On 10/9/06, Stelios Eliakis <eliakis@gmail.com> wrote:
>
> Hi,
> I have a collection of 500 txt documents and I implement a web
> application(JSP) for searching these documents.
> In addition, the application shows the BestFragment of each result and
> highlights the query terms.
> My application is slow enough (about 2,5-3 seconds for each query) even if
> I
> run it from my computer (It's not publiched yet).
> Do you suggest me something in order to improve speed?
> I have read that you have to keep the indexsearcher open. Is it right? and
> how could I do that(when I must close it)?
>
> In Highlighting I use the following
>                      String result =
> highlighter.getBestFragment(tokenStream,text)
>
>
> text parameter must be String so I open the document and convert it to
> String. Of course it is time consuming. Is there a different way?
>
> Thanks in advance,
>
> --
> Stelios Eliakis
>
>

------=_Part_36431_14085294.1160403915921--

From java-user-return-23891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 14:29:21 2006
Return-Path: <java-user-return-23891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48574 invoked from network); 9 Oct 2006 14:29:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 14:29:21 -0000
Received: (qmail 84620 invoked by uid 500); 9 Oct 2006 14:29:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84588 invoked by uid 500); 9 Oct 2006 14:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84577 invoked by uid 99); 9 Oct 2006 14:29:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:29:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [15.219.201.135] (HELO bgerelbas02.asiapac.hp.net) (15.219.201.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:29:07 -0700
Received: from bgeexg11.asiapacific.cpqcorp.net (bgeexg11.asiapacific.cpqcorp.net [16.150.33.26])
	by bgerelbas02.asiapac.hp.net (Postfix) with ESMTP id 72A21333E3
	for <java-user@lucene.apache.org>; Mon,  9 Oct 2006 19:58:45 +0530 (IST)
Received: from bgeexc01.asiapacific.cpqcorp.net ([16.150.33.37]) by bgeexg11.asiapacific.cpqcorp.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 9 Oct 2006 19:58:44 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6EBAF.3A014194"
Subject: How to search with empty content
Date: Mon, 9 Oct 2006 19:57:57 +0530
Message-ID: <E572CFB9847D084587D2F6EAB5DFF48C06418AD6@bgeexc01.asiapacific.cpqcorp.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to search with empty content
Thread-Index: Acbrrx2pyYGIJSJVTnW+m0r9vHF0PA==
From: "Kumar, Samala Santhosh (TPKM)" <samala-santhosh.kumar@hp.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Oct 2006 14:28:44.0943 (UTC) FILETIME=[39E019F0:01C6EBAF]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6EBAF.3A014194
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20
I want to search without giving any input, when I search leaving blank
the search text box it should give me all the documents present in the
index. please give me some solution or pointers.=20

regards
Santhosh


=20

=20


=20

=20

------_=_NextPart_001_01C6EBAF.3A014194--

From java-user-return-23892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 14:58:40 2006
Return-Path: <java-user-return-23892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56280 invoked from network); 9 Oct 2006 14:58:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 14:58:40 -0000
Received: (qmail 49596 invoked by uid 500); 9 Oct 2006 14:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49307 invoked by uid 500); 9 Oct 2006 14:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49296 invoked by uid 99); 9 Oct 2006 14:58:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:58:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 07:58:26 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1590ADCD@mailer.syr.edu>; Mon, 9 Oct 2006 10:58:05 -0400
Message-ID: <452A637D.3090400@syr.edu>
Date: Mon, 09 Oct 2006 10:58:05 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performing a like query
References: <451FAEF8.2000300@yahoo.co.uk>	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>	 <452045A4.8000501@yahoo.co.uk> <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com> <452662B5.8000905@yahoo.co.uk> <45268499.8030105@syr.edu> <452A1C6B.80107@yahoo.co.uk>
In-Reply-To: <452A1C6B.80107@yahoo.co.uk>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Rahil,

Rahil wrote:
> I was just wondering whether there is a
> difference between the regular expression you sent me i.e.
> (i)   \s*(?:\b|(?<=\S)(?=\s)|(?<=\s)(?=\S))\s*
> 
>    and
>   (ii)   \\b
> 
> as they lead to the same output. For example, the string search "testing
> a-new string=3/4" results in the same output : [...]

There is a difference for strings like "testing a- -new string=3/4" --
with (ii), you will get:

   ..., "a", "- -", "new", ...

but with (i), you will get:

   ..., "a", "-", "-", "new", ...

> What Id like to do though is remove the split over space characters [...]

>From my reading of org.apache.lucene.index.memory.PatternAnalyzer
(assuming you're using this class), I don't think this is necessary,
since it just throws away zero-length tokens.  Actually, given the
below-discussed algorithm for PatternAnalyzer, I don't think it's even
possible to do what you want.

Here's the PatternAnalyzer.next() method definition (from
<http://svn.apache.org/viewvc/lucene/java/trunk/contrib/memory/src/java/org/apache/lucene/index/memory/PatternAnalyzer.java?revision=450725&view=markup>):

public Token next() {
  if (matcher == null) return null;

  while (true) { // loop takes care of leading and trailing boundary cases
    int start = pos;
    int end;
    boolean isMatch = matcher.find();
    if (isMatch) {
      end = matcher.start();
      pos = matcher.end();
    } else {
      end = str.length();
      matcher = null; // we're finished
    }

    if (start != end) { // non-empty match (header/trailer)
      String text = str.substring(start, end);
      if (toLowerCase) text = text.toLowerCase(locale);
      return new Token(text, start, end);
    }
    if (!isMatch) return null;
  }
}

This method finds token breakpoints, remembering the end of the previous
breakpoint (in instance field "pos"), then compares the beginning of the
current breakpoint with the end of the previous breakpoint ("if (start
!= end)"), creating a Token *only* if the text between breakpoints has
longer than zero length.

If you're familiar with Perl, this class emulates a Perl regex idiom:

(iii) @tokens = grep { length > 0 } split /my-regex/, $text;

That is, return a list of tokens generated by breaking text on a regex,
filtering out zero-length tokens.

Actually, the way I usually write this in Perl is:

(iv) @tokens = grep { /\S/ } split /my-regex/, $text;

In the above version, tokens are kept only if they contain at least one
non-space character (this also filters out zero-length tokens).
PatternAnalyzer, OTOH, *will* emit whitespace-only tokens - it
implements (iii), not (iv).

Hope it helps,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 15:02:15 2006
Return-Path: <java-user-return-23893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57246 invoked from network); 9 Oct 2006 15:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 15:02:15 -0000
Received: (qmail 58824 invoked by uid 500); 9 Oct 2006 15:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58600 invoked by uid 500); 9 Oct 2006 15:02:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58589 invoked by uid 99); 9 Oct 2006 15:02:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 08:02:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of m.scott.tiger@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 08:02:03 -0700
Received: by py-out-1112.google.com with SMTP id s49so2043875pyc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 08:01:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=mFh09kZqtJM66Sqkcu+Yu14kVppANfz27aJ73Q0A2th3/VdZ8ZkUoJmhT8t/jdatgmeyoLdoUxwEtBzg+moC946Z9oE2smyZJxyYjdv2lm7Vv+mHVIj45wsjQXst5HxR09lc1QsX+KViBdDeDZnJQe7Y++IGykH92FE7p0jF0qI=
Received: by 10.35.132.20 with SMTP id j20mr13000587pyn;
        Mon, 09 Oct 2006 08:01:42 -0700 (PDT)
Received: from ?192.168.1.22? ( [221.113.32.130])
        by mx.google.com with ESMTP id s72sm3840829pyc.2006.10.09.08.01.41;
        Mon, 09 Oct 2006 08:01:42 -0700 (PDT)
Message-ID: <452A6452.5060808@gmail.com>
Date: Tue, 10 Oct 2006 00:01:38 +0900
From: Scott <m.scott.tiger@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to search with empty content
References: <E572CFB9847D084587D2F6EAB5DFF48C06418AD6@bgeexc01.asiapacific.cpqcorp.net>
In-Reply-To: <E572CFB9847D084587D2F6EAB5DFF48C06418AD6@bgeexc01.asiapacific.cpqcorp.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can get all document by using MatchAllDocsQuery.

Kumar, Samala Santhosh (TPKM) wrote:
>  
> I want to search without giving any input, when I search leaving blank
> the search text box it should give me all the documents present in the
> index. please give me some solution or pointers. 
> 
> regards
> Santhosh
> 
> 
>  
> 
>  
> 
> 
>  
> 
>  
> 

-- 
Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 16:00:12 2006
Return-Path: <java-user-return-23894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81918 invoked from network); 9 Oct 2006 16:00:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 16:00:12 -0000
Received: (qmail 314 invoked by uid 500); 9 Oct 2006 16:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 292 invoked by uid 500); 9 Oct 2006 16:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 278 invoked by uid 99); 9 Oct 2006 16:00:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:00:02 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ismail@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:00:01 -0700
Received: by nf-out-0910.google.com with SMTP id c2so1558707nfe
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 08:59:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IB4swnbKVD0F9liPGJy+ucVAZD53S2L0UFjL/N56ZhER3Ubgol2xrj8Hm5ImTJ8/p13KN0o+o/qU0QoBMCC9sZAaav3XZKRGgXaPgWraB/ubq3E5KwgyLk5z3vxqJpDp0e8PA2CFFYUCU75aD+H6IFtNxhNpM7GkXZEkS0XhXus=
Received: by 10.48.210.20 with SMTP id i20mr2278240nfg;
        Mon, 09 Oct 2006 08:59:39 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Mon, 9 Oct 2006 08:59:39 -0700 (PDT)
Message-ID: <1f07f6920610090859r2b6a8d8fj89a8eb3f51c7ac93@mail.gmail.com>
Date: Mon, 9 Oct 2006 11:59:39 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <OF3821B325.55F165C0-ON88257202.0018E2D3-88257202.001991DC@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_206779_21252904.1160409579082"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
	 <OF3821B325.55F165C0-ON88257202.0018E2D3-88257202.001991DC@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_206779_21252904.1160409579082
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am using StandardAnalyzer while indexing the field..
I  am also a creatign a field called full_text in which i am adding all
these individual  fields as TOKENIZED.


here is the code

while(choiceIt.hasNext()){
          PersonProfileAnswer pa=(PersonProfileAnswer)choiceIt.next();
            if(pa.getPersonProfileChoice()!=null)
            {
                        doc.add(new Field(FULL_TEXT,
pa.getPersonProfileChoice().getChoice(),Field.Store.NO,Field.Index.TOKENIZED
));
             LuceneProfileQuestion lpf=this.getLuceneProfileQuestion(
pa.getPersonProfileChoice().getPersonProfileQuestion().getId());

                  doc.add(new Field(lpf.getLuceneFieldName(),
pa.getPersonProfileChoice().getChoice(),Field.Store.NO,
Field.Index.UN_TOKENIZED));

            }
         }

when i use luke i can see the term is there.. e.g.  for a lucence field
called "fav_stores" UN_TOKENIZED terms "Ann Taylor" and "Banana Republic"
are there..



If i make a search on full_text.. and type "banana" or "republic" or
"banana republic" i get the doucment as result..  In my java class i am
using phrasequery for full_text and termquery for each individual filed..

e.g. TermQuery subjectQuery=new TermQuery(new Term("fav_stores",favStores));


In luke i do not  see any option to select query type but when I make search
on "fav_stores" with term "Banana Republic"  there is no result.


On 10/9/06, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> > I am trying to index a field which has more than one word with space e.g
> .
> > "My Word"
> > i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> Word"
> > its not yielding any result..
>
> Seems that it should work.
>
> Few things to check:
> - make sure you are indexing with UN_TOKENIZED.
> - check that either both field and query text are lower-cased or both are
> not lower-cased.
> - use Luke to examine the content of the index (when adding as
> un-tokenized);
> print the query (toString);
> - do they match each other? match your expectation?
>
> >
> > Is term qurey limited to one word? i mean if we index a word with space
> and
> > index it UN_TOKENIZED..
> > shouldnt TermQuery yeild result to "My Word".
> >
> >
> > Ismail
>
> There is no such limitation.
>
> Hope this helps,
> Doron
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_206779_21252904.1160409579082--

From java-user-return-23895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 16:08:35 2006
Return-Path: <java-user-return-23895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86013 invoked from network); 9 Oct 2006 16:08:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 16:08:35 -0000
Received: (qmail 18279 invoked by uid 500); 9 Oct 2006 16:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18045 invoked by uid 500); 9 Oct 2006 16:08:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18034 invoked by uid 99); 9 Oct 2006 16:08:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:08:27 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cfowler@jwpepper.com designates 65.126.22.124 as permitted sender)
Received: from [65.126.22.124] (HELO mimesweeper.jwpepper.com) (65.126.22.124)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:08:26 -0700
Received: from jwpds1.fw.jwpepper.com (unverified) by mimesweeper.jwpepper.com
 (Content Technologies SMTPRS 4.3.14) with ESMTP id <T7b396374bfc0a803f9344@mimesweeper.jwpepper.com> for <java-user@lucene.apache.org>;
 Mon, 9 Oct 2006 12:09:56 -0700
To: java-user@lucene.apache.org
Subject: deleteDocuments being ingnored
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OF5F58F848.A2D92F73-ON85257202.0057E2D6-85257202.0058A086@jwpepper.com>
From: cfowler@jwpepper.com
Date: Mon, 9 Oct 2006 12:06:57 -0400
X-MIMETrack: Serialize by Router on JWPDS1/JWPEPPER(Release 7.0.1FP1|April 17, 2006) at
 10/09/2006 12:06:59 PM,
	Serialize complete at 10/09/2006 12:06:59 PM
Content-Type: multipart/alternative; boundary="=_alternative 0058A08485257202_="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 0058A08485257202_=
Content-Type: text/plain; charset="US-ASCII"

Hello,

        I'm brand new to this, so hopefully you can help me. I'm 
attempting to use the IndexReader object in lucene v2 to delete and readd 
documents. I very easily set up an index and my documents are added. Now 
I'm trying to update the same index by deleting the document before 
readding. The problem is that it appears that my deleteDocument() 
instruction is being ignored. I've tried using the IndexModifier object 
and the IndexReader and both have the same behavior. If anyone can point 
out my error, or help me debug this I'll be forever in your debt. Here is 
the jist of the code. 

This is the main section:
                IndexWriter writer = new IndexWriter(indexDir,new 
StandardAnalyzer(), false);
                writer.setUseCompoundFile(false);
                indexDirectory(writer, dataDir);
                int numIndexed = writer.docCount();
                writer.optimize();
                writer.close();

Down at the point just before readding my document I have the following 
code (i know batch is better, just doing it this for now):
                IndexReader ir = IndexReader.open(indexDir);
                System.out.println(">>>" + ir.numDocs());
                ir.delete(new Term("filename",f.getAbsolutePath()));
                System.out.println("deletes?" + ir.hasDeletions());
                ir.close();
                if (deleted > 0) {
                        System.out.println("deleted old index of " + 
f.getAbsolutePath());
                }
                System.out.println("Indexing " + f.getAbsolutePath());
                Document doc = new Document();
                doc.add(new Field("contents",loadContents
(doc),Field.Store.NO,Field.Index.TOKENIZED));
                doc.add(new Field("filename", 
f.getAbsolutePath(),Field.Store.YES,Field.Index.TOKENIZED));  
writer.addDocument(doc);

Thanks,

Chris
--=_alternative 0058A08485257202_=--

From java-user-return-23896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 16:12:44 2006
Return-Path: <java-user-return-23896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87795 invoked from network); 9 Oct 2006 16:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 16:12:44 -0000
Received: (qmail 27702 invoked by uid 500); 9 Oct 2006 16:12:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27662 invoked by uid 500); 9 Oct 2006 16:12:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27651 invoked by uid 99); 9 Oct 2006 16:12:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:12:37 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cfowler@jwpepper.com designates 65.126.22.124 as permitted sender)
Received: from [65.126.22.124] (HELO mimesweeper.jwpepper.com) (65.126.22.124)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:12:37 -0700
Received: from jwpds1.fw.jwpepper.com (unverified) by mimesweeper.jwpepper.com
 (Content Technologies SMTPRS 4.3.14) with ESMTP id <T7b39674792c0a803f9344@mimesweeper.jwpepper.com> for <java-user@lucene.apache.org>;
 Mon, 9 Oct 2006 12:14:07 -0700
In-Reply-To: <OF5F58F848.A2D92F73-ON85257202.0057E2D6-85257202.0058A086@jwpepper.com>
To: java-user@lucene.apache.org
Subject: Re: deleteDocuments being ingnored
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OFCBBE0254.64BD1A01-ON85257202.0058DABA-85257202.00590248@jwpepper.com>
From: cfowler@jwpepper.com
Date: Mon, 9 Oct 2006 12:11:08 -0400
X-MIMETrack: Serialize by Router on JWPDS1/JWPEPPER(Release 7.0.1FP1|April 17, 2006) at
 10/09/2006 12:11:09 PM,
	Serialize complete at 10/09/2006 12:11:09 PM
Content-Type: multipart/alternative; boundary="=_alternative 0059024585257202_="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 0059024585257202_=
Content-Type: text/plain; charset="US-ASCII"

My apologies, the IndexReader code I included was a commented out trial. 
Here is the active version. Sorry for the error:

                IndexReader ir = IndexReader.open(indexDir);
                System.out.println(">>>" + ir.numDocs());
                int deleted = ir.deleteDocuments(new Term("filename"
,f.getAbsolutePath()));
                System.out.println("deletes?" + ir.hasDeletions());
                ir.close();
 
                if (deleted > 0) {
                        System.out.println("deleted old index of " + 
f.getAbsolutePath());
                }
--=_alternative 0059024585257202_=--

From java-user-return-23897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 16:18:22 2006
Return-Path: <java-user-return-23897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89548 invoked from network); 9 Oct 2006 16:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 16:18:21 -0000
Received: (qmail 36557 invoked by uid 500); 9 Oct 2006 16:18:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36522 invoked by uid 500); 9 Oct 2006 16:18:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36478 invoked by uid 99); 9 Oct 2006 16:18:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:18:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:18:11 -0700
Received: by ug-out-1314.google.com with SMTP id k40so642052ugc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 09:17:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=js+exf6PY2+rDy6CJciGiH+4QMA79jdv/VbSfnFQpM2FfK6LeHn7ViBv2JbtYDWAYpUktcEpvRgU5QaMRUNg+HMWo3uR57uML504xm2zardrXofvq71HFrjUEO+bHXvI8q0LwONBpt+VuX4sRyFgBm7ZZrh0cmMW7pWqXE244pU=
Received: by 10.67.119.5 with SMTP id w5mr7053314ugm;
        Mon, 09 Oct 2006 09:17:49 -0700 (PDT)
Received: by 10.67.22.3 with HTTP; Mon, 9 Oct 2006 09:17:48 -0700 (PDT)
Message-ID: <f18c9dde0610090917h61a7d468wfdebe2e101960159@mail.gmail.com>
Date: Mon, 9 Oct 2006 18:17:48 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: deleteDocuments being ingnored
In-Reply-To: <OF5F58F848.A2D92F73-ON85257202.0057E2D6-85257202.0058A086@jwpepper.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32935_20616408.1160410668968"
References: <OF5F58F848.A2D92F73-ON85257202.0057E2D6-85257202.0058A086@jwpepper.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_32935_20616408.1160410668968
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>                 System.out.println("Indexing " + f.getAbsolutePath());
>                 Document doc = new Document();
>                 doc.add(new Field("contents",loadContents
> (doc),Field.Store.NO,Field.Index.TOKENIZED));
>                 doc.add(new Field("filename",
> f.getAbsolutePath(),Field.Store.YES,Field.Index.TOKENIZED));
> writer.addDocument(doc);
>

Hi Chris,

Do you open the writer to add your "update" to before you close the
indexreader to delete the outdated index document?
Another question comes in mind, do you open a new IndexReader for your
searches after the update was written to the index?

You have to follow these steps:
1. Add you document
2. close writer
3. open reader
4. delete the outdated stuff
5. close reader
6. open writer
7. add the update
8. close writer
9. release new searcher / reader

hope that gives you a little help.

best regards simon

------=_Part_32935_20616408.1160410668968--

From java-user-return-23898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 16:47:13 2006
Return-Path: <java-user-return-23898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 933 invoked from network); 9 Oct 2006 16:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 16:47:13 -0000
Received: (qmail 80606 invoked by uid 500); 9 Oct 2006 16:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79766 invoked by uid 500); 9 Oct 2006 16:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79755 invoked by uid 99); 9 Oct 2006 16:47:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:47:05 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:47:04 -0700
Received: by py-out-1112.google.com with SMTP id s49so2075052pyc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 09:46:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gqY6UB53LW7KocsFbw8DQT0XFXW8jzb697knG32kj8JxHX1e8aT0Vkjy15G+JP589puok7G54hC+RU0jhmfjDtOVBZShZd8f1FP47zkooCo16TKxU4vRIOA/eeZZjxgkCrJ+rrC2NTiCpZf1qrNYXnFF9nN8IaQ3AE6qJgl+jeU=
Received: by 10.35.95.1 with SMTP id x1mr13174828pyl;
        Mon, 09 Oct 2006 09:46:43 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 9 Oct 2006 09:46:42 -0700 (PDT)
Message-ID: <359a92830610090946i21114ffcy60f2d6d5f7803135@mail.gmail.com>
Date: Mon, 9 Oct 2006 12:46:42 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <1f07f6920610090859r2b6a8d8fj89a8eb3f51c7ac93@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39048_7311708.1160412402894"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
	 <OF3821B325.55F165C0-ON88257202.0018E2D3-88257202.001991DC@il.ibm.com>
	 <1f07f6920610090859r2b6a8d8fj89a8eb3f51c7ac93@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_39048_7311708.1160412402894
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, when you look in the "fav_stores" field in Luke, what do you see?

And, are you searching on "Banana Republic" with the capitals? If so, and
your index has the letters in lower case, that's your problem.

Erick

On 10/9/06, Ismail Siddiqui <ismail@gmail.com> wrote:
>
> I am using StandardAnalyzer while indexing the field..
> I  am also a creatign a field called full_text in which i am adding all
> these individual  fields as TOKENIZED.
>
>
> here is the code
>
> while(choiceIt.hasNext()){
>           PersonProfileAnswer pa=(PersonProfileAnswer)choiceIt.next();
>             if(pa.getPersonProfileChoice()!=null)
>             {
>                         doc.add(new Field(FULL_TEXT,
> pa.getPersonProfileChoice().getChoice(),Field.Store.NO,
> Field.Index.TOKENIZED
> ));
>              LuceneProfileQuestion lpf=this.getLuceneProfileQuestion(
> pa.getPersonProfileChoice().getPersonProfileQuestion().getId());
>
>                   doc.add(new Field(lpf.getLuceneFieldName(),
> pa.getPersonProfileChoice().getChoice(),Field.Store.NO,
> Field.Index.UN_TOKENIZED));
>
>             }
>          }
>
> when i use luke i can see the term is there.. e.g.  for a lucence field
> called "fav_stores" UN_TOKENIZED terms "Ann Taylor" and "Banana Republic"
> are there..
>
>
>
> If i make a search on full_text.. and type "banana" or "republic" or
> "banana republic" i get the doucment as result..  In my java class i am
> using phrasequery for full_text and termquery for each individual filed..
>
> e.g. TermQuery subjectQuery=new TermQuery(new
> Term("fav_stores",favStores));
>
>
> In luke i do not  see any option to select query type but when I make
> search
> on "fav_stores" with term "Banana Republic"  there is no result.
>
>
> On 10/9/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> >
> > > I am trying to index a field which has more than one word with space
> e.g
> > .
> > > "My Word"
> > > i am indexng it UN_TOKENIZED .. but when i use TermQuery to query "My
> > Word"
> > > its not yielding any result..
> >
> > Seems that it should work.
> >
> > Few things to check:
> > - make sure you are indexing with UN_TOKENIZED.
> > - check that either both field and query text are lower-cased or both
> are
> > not lower-cased.
> > - use Luke to examine the content of the index (when adding as
> > un-tokenized);
> > print the query (toString);
> > - do they match each other? match your expectation?
> >
> > >
> > > Is term qurey limited to one word? i mean if we index a word with
> space
> > and
> > > index it UN_TOKENIZED..
> > > shouldnt TermQuery yeild result to "My Word".
> > >
> > >
> > > Ismail
> >
> > There is no such limitation.
> >
> > Hope this helps,
> > Doron
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_39048_7311708.1160412402894--

From java-user-return-23899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 16:48:17 2006
Return-Path: <java-user-return-23899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1148 invoked from network); 9 Oct 2006 16:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 16:48:17 -0000
Received: (qmail 82226 invoked by uid 500); 9 Oct 2006 16:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81579 invoked by uid 500); 9 Oct 2006 16:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81568 invoked by uid 99); 9 Oct 2006 16:48:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:48:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 09:48:10 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id k99Gln9R011958
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 16:47:49 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k99Go6Qp1839166
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 18:50:06 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k99Glm2r017465
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 18:47:48 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k99GlmM0017460
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 18:47:48 +0200
In-Reply-To: <1f07f6920610090859r2b6a8d8fj89a8eb3f51c7ac93@mail.gmail.com>
Subject: Re: TermQuery and PhraseQuery..problem with word with space
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFF82C571D.52A2941E-ON88257202.005AD521-88257202.005C1FBB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 9 Oct 2006 08:46:14 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 09/10/2006 18:50:06
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would guess that one of your assumptions is wrong...
The assumptions to check are:

At indexing:
- lpf.getLuceneFieldName() == "fav_stores"
- pa.getPersonProfileChoice().getChoice() == "Banana Republic"

At search:
- the query is created like this:
   new TermQuery(new Term("fav_stores","Banana Republic"))
- the searcher is opened after closing the writes that added that doc.

Best to check this by writing a tiny stand-alone program that demonstrates
this behavior.

"Ismail Siddiqui" <ismail@gmail.com> wrote on 09/10/2006 08:59:39:
> I am using StandardAnalyzer while indexing the field..
> I  am also a creatign a field called full_text in which i am adding all
> these individual  fields as TOKENIZED.
>
>
> here is the code
>
> while(choiceIt.hasNext()){
>           PersonProfileAnswer pa=(PersonProfileAnswer)choiceIt.next();
>             if(pa.getPersonProfileChoice()!=null)
>             {
>                         doc.add(new Field(FULL_TEXT,
>
pa.getPersonProfileChoice().getChoice(),Field.Store.NO,Field.Index.TOKENIZED

> ));
>              LuceneProfileQuestion lpf=this.getLuceneProfileQuestion(
> pa.getPersonProfileChoice().getPersonProfileQuestion().getId());
>
>                   doc.add(new Field(lpf.getLuceneFieldName(),
> pa.getPersonProfileChoice().getChoice(),Field.Store.NO,
> Field.Index.UN_TOKENIZED));
>
>             }
>          }
>
> when i use luke i can see the term is there.. e.g.  for a lucence field
> called "fav_stores" UN_TOKENIZED terms "Ann Taylor" and "Banana Republic"
> are there..
>
>
>
> If i make a search on full_text.. and type "banana" or "republic" or
> "banana republic" i get the doucment as result..  In my java class i am
> using phrasequery for full_text and termquery for each individual filed..
>
> e.g. TermQuery subjectQuery=new TermQuery(new
Term("fav_stores",favStores));
>
>
> In luke i do not  see any option to select query type but when I make
search
> on "fav_stores" with term "Banana Republic"  there is no result.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 17:43:42 2006
Return-Path: <java-user-return-23900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22791 invoked from network); 9 Oct 2006 17:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 17:43:41 -0000
Received: (qmail 85812 invoked by uid 500); 9 Oct 2006 17:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85776 invoked by uid 500); 9 Oct 2006 17:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85765 invoked by uid 99); 9 Oct 2006 17:43:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:43:35 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ismail@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:43:35 -0700
Received: by nf-out-0910.google.com with SMTP id c2so10069nfe
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 10:43:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PObQeiUf2hya/AXhYOzxPANDWGVnLwFDUN/vLQaTVY9NtIoU33EHdUCr45l1Y3xts/b0JApnkRwoEBqRIqXCFq4Nwy360YPjW3sXSruAl484T6bIlG9160G6T7Vyc9+eIlkJpwUi8RVDJiWLqRSxkJj5Apkv66cS0OexsBHN1n0=
Received: by 10.49.93.13 with SMTP id v13mr140797nfl;
        Mon, 09 Oct 2006 10:43:13 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Mon, 9 Oct 2006 10:43:13 -0700 (PDT)
Message-ID: <1f07f6920610091043y62bb19f9qf37efe7e692db639@mail.gmail.com>
Date: Mon, 9 Oct 2006 13:43:13 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery and PhraseQuery..problem with word with space
In-Reply-To: <359a92830610090946i21114ffcy60f2d6d5f7803135@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_209655_33086785.1160415793422"
References: <1f07f6920610081159j275f8eb6v79959063d4be96c8@mail.gmail.com>
	 <OF3821B325.55F165C0-ON88257202.0018E2D3-88257202.001991DC@il.ibm.com>
	 <1f07f6920610090859r2b6a8d8fj89a8eb3f51c7ac93@mail.gmail.com>
	 <359a92830610090946i21114ffcy60f2d6d5f7803135@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_209655_33086785.1160415793422
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

in fav_stores i see "Banana Republic" and "Ann Taylor" there .. and i am
searching it with the capitals.


On 10/9/06, Erick Erickson <erickerickson@gmail.com> wrote:

> OK, when you look in the "fav_stores" field in Luke, what do you see?
>
> And, are you searching on "Banana Republic" with the capitals? If so, and
> your index has the letters in lower case, that's your problem.
>
> Erick
>

------=_Part_209655_33086785.1160415793422--

From java-user-return-23901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 17:50:05 2006
Return-Path: <java-user-return-23901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24015 invoked from network); 9 Oct 2006 17:50:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 17:50:04 -0000
Received: (qmail 95904 invoked by uid 500); 9 Oct 2006 17:49:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95761 invoked by uid 500); 9 Oct 2006 17:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95750 invoked by uid 99); 9 Oct 2006 17:49:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:49:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:49:56 -0700
Received: by nf-out-0910.google.com with SMTP id c2so11794nfe
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 10:49:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=qFvWVQ7KO5BDw9vmqlrY83y1gjxqDi8OfSVN9uNW8gdL/UzeUq3JWvHgg3l5gsu3n/wHzZhdlIr0pQPonJZFyrIBR8goOjNSr8tnHbZmKZE5Q6qG6HbKe7xGIIrbBJSK3AKPn5iH48r5OQI6lluSs9ZbxaEkfx0gzxGyBKuxsz8=
Received: by 10.82.107.15 with SMTP id f15mr686012buc;
        Mon, 09 Oct 2006 10:49:34 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Mon, 9 Oct 2006 10:49:34 -0700 (PDT)
Message-ID: <c68e39170610091049r445bf830x1d42e7c857e4112c@mail.gmail.com>
Date: Mon, 9 Oct 2006 13:49:34 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Incremental updates / slow searches.
In-Reply-To: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
X-Google-Sender-Auth: 7e03df5e09c09e2d
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The biggest thing would be to limit how often you open a new
IndexSearcher, and when you do, warm up the new searcher in the
background while you continue serving searches with the existing
searcher.  This is the strategy that Solr uses.

There is also the issue of if you are analyzing/merging docs on the
same servers that you are executing searches on.  You can use a
separate box to build the index and distribute changes to boxes used
for searching.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

On 10/9/06, Rickard B=E4ckman <backman.rickard@gmail.com> wrote:
> Hi,
>
> we are using a search system based on Lucene and have recently tried to a=
dd
> incremental updating of the index instead of building a new index every n=
ow
> and then. However we now run into problems as our searches starts to take
> very long time to complete.
>
> Our index is about 8-9GB large and we are sending lots of updates / secon=
d
> (we are probably merging in 200 - 300 in a few seconds). Today we buffer =
a
> bunch of updates and then merge them into the existing index like a batch=
,
> first doing deletes and then inserts.
>
> We are currently not using any special tuning of Lucene.
>
> Does anyone have any similiar experiences from Lucene or advices on how t=
o
> reduce the amount of times it takes to perform a search? In particular wh=
at
> would be an optimal combination of update size, merge factor, max buffere=
d
> docs?
>
> /Rickard
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 17:55:07 2006
Return-Path: <java-user-return-23902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24895 invoked from network); 9 Oct 2006 17:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 17:55:06 -0000
Received: (qmail 4226 invoked by uid 500); 9 Oct 2006 17:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4204 invoked by uid 500); 9 Oct 2006 17:55:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4193 invoked by uid 99); 9 Oct 2006 17:55:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:54:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 10:54:58 -0700
Received: by nf-out-0910.google.com with SMTP id c2so13101nfe
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 10:54:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=XNvzpIZGeji/uDqFPC/Ajz39I5ImFi4R0/CubGX3N3G3v2mFiFJhxNg+IHK5krbRQokF0Vygcy8qWXSime1NPA8BKca6RfUOekMg9290YncjJpypf063mnWLQlUtrXTrRLm/IekW+2hvv3h+LRoY1/h+c+aLApohYtYZzeEpLCk=
Received: by 10.82.107.15 with SMTP id f15mr686462buc;
        Mon, 09 Oct 2006 10:54:36 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Mon, 9 Oct 2006 10:54:36 -0700 (PDT)
Message-ID: <c68e39170610091054j60fe02a8i1fd4cd3a27ff1175@mail.gmail.com>
Date: Mon, 9 Oct 2006 13:54:36 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: threadsafe QueryParser?
In-Reply-To: <452A59D5.4090300@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <452A59D5.4090300@sirma.bg>
X-Google-Sender-Auth: 86e71aef99efa019
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/9/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
> Method
> static public Query parse(String query, String field, Analyzer analyzer)
> in class QueryParser is deprecated in 1.9.1 and the suggestion is: /"Use
> an instance of QueryParser and the {@link #parse(String)} method instead."/
> My question is: in the context of multi threaded app, is it safe that
> distinct threads utilize the same instance of QueryParser for parsing
> their queries?
>
> ps. After writing this letter, I incidentally ran into the answer in the
> end of the class comment of QueryParser:
> / * <p>Note that QueryParser is <em>not</em> thread-safe.</p>/
>
> So, is this it?

Yes.  A single QueryParser object should not be used from multiple threads.
It's unclear why one would want to do so anyway.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 18:36:13 2006
Return-Path: <java-user-return-23903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37385 invoked from network); 9 Oct 2006 18:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 18:36:13 -0000
Received: (qmail 63413 invoked by uid 500); 9 Oct 2006 18:36:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63390 invoked by uid 500); 9 Oct 2006 18:36:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63379 invoked by uid 99); 9 Oct 2006 18:36:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 11:36:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.211] (HELO spunkymail-a1.dreamhost.com) (208.97.132.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 11:36:02 -0700
Received: from [192.168.0.2] (syru77-179.syr.edu [128.230.77.179])
	by spunkymail-a1.dreamhost.com (Postfix) with ESMTP id 23409FE2B7
	for <java-user@lucene.apache.org>; Mon,  9 Oct 2006 11:35:41 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <429c032d0610080357s2a3d2360j30107af4d767db98@mail.gmail.com>
References: <429c032d0610080357s2a3d2360j30107af4d767db98@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AACF1BCD-9D9F-4BC0-9280-CE1EC4D0AFCB@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene searching algorithm
Date: Mon, 9 Oct 2006 14:35:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Michael,

I think there are a number of good resources on this:

1.  http://lucene.apache.org/java/scoring.html covers the basics of  
searching.  The bottom has some pseudo code as well.

2. Lucene In Action

3.  Search this list and other places for information on the Vector  
Space Model.  The Wiki also has a number of links, etc. that may  
prove useful, including a variety of talks and articles.

4.  Last of all, and probably best of all, the code!  Have a look at  
how TermQuery and BooleanQuery work, as well as the Searchers, etc.

Hope this helps,
Grant

On Oct 8, 2006, at 6:57 AM, Michael Chan wrote:

> Hi,
>
> Does anyone know where I can find descriptions of Lucene's searching
> algorithm, besides the lecture at University of Pisa 2004? Has it been
> published? I'm trying to find a reference to the algorithm.
>
> Thanks,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 19:14:20 2006
Return-Path: <java-user-return-23904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52012 invoked from network); 9 Oct 2006 19:14:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 19:14:20 -0000
Received: (qmail 36438 invoked by uid 500); 9 Oct 2006 19:14:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36410 invoked by uid 500); 9 Oct 2006 19:14:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36399 invoked by uid 99); 9 Oct 2006 19:14:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 12:14:13 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 12:14:11 -0700
Received: by py-out-1112.google.com with SMTP id s49so2117580pyc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 12:13:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mLYheKBDoziAfGGJ3AGs9DQ7yDgIQ3LA1TymiKFyqdnphYbrQYrnIifm/XJBnYHRIQGO3KFN8Y2vKJpni6jxEc/f7jrNftENwq1UlMHoPH2JrmBEttiC+0Bd4hAymrw/hJR/AZFntkwH+M/nLw28EHKFw6PZxMSZvGWhtcWKDOY=
Received: by 10.35.117.5 with SMTP id u5mr13416252pym;
        Mon, 09 Oct 2006 12:13:51 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 9 Oct 2006 12:13:50 -0700 (PDT)
Message-ID: <359a92830610091213n22cafca7k657f0a2d7dd50b8d@mail.gmail.com>
Date: Mon, 9 Oct 2006 15:13:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
In-Reply-To: <200610062310.18275.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42140_14166883.1160421230512"
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>
	 <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com>
	 <4526C092.3080504@gmail.com>
	 <200610062310.18275.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_42140_14166883.1160421230512
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I'm using the surround code, and it seems to be working...with the
following questions (always, more questions)...

> I'm gettng an exception sometimes of TooManyBasicQueries. I can control
this by initializing BasicQueryFactory with a larger number. Do you have any
cautions about upping this number?

> There's a hard-coded value minimumPrefixLength set to 3 down in the code
Surround query parser (allowedSuffix). I see no method to change this. I
assume that this is to prevent using up too much memory/time. What should I
know about this value? I'm mostly interested in a justification for the
product manager why allowing, say, two character (or one character) prefixes
is a bad idea <G>.

> I'm a bit confused. It appears that TooManyBooleanClauses is orthogonal to
Surround queries. That is, trying RegexSpanQuery doesn't want to work at all
with the same search clause, as it runs out of memory pretty quickly......

However, working with three-letter prefixes is blazingly fast.........

Thanks again...

Erick

On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Mark,
>
> On Friday 06 October 2006 22:46, Mark Miller wrote:
> > Paul's parser is beyond my feeble comprehension...but I would start by
> > looking at SrndTruncQuery. It looks to me like this enumerates each
> > possible match just like a SpanRegexQuery does...I am too lazy to figure
> > out what the visitor pattern is doing so I don't know if they then get
> > added to a boolean query, but I don't know what else would happen. If
>
> They can also be added to a SpanOrQuery as SpanTermQuery,
> this depends on the context of the query (distance query or not).
> The visitor pattern is used to have the same code for distance queries
> and other queries as far as possible.
>
> > this is the case, I am wondering if it is any more efficient than the
> > SpanRegex implementation...which could be changed to a SpanWildcard
>
> I don't think the surround implementation of expanding terms is more
> efficient that the Lucene implementation.
> Surround does have the functionality of a SpanWildCard, but
> the implementation of the expansion is shared, see above.
>
> > implementation. How exactly is this better at avoiding a toomanyclauses
> > exception or ram fillup. Is it just the fact that the (lets say) three
> > wildcard terms are anded so this should dramatically reduce the matches?
>
> The limitation in BasicQueryFactory works for a complete surround query,
> which can be nested.
> In Lucene only the max nr of clauses for a single level BooleanQuery
> can be controlled.
>
> >...
>
> Regards,
> Paul Elschot
>
>
> > - Mark
> >
> > Erick Erickson wrote:
> > > Paul:
> > >
> > > Splendid! Now if I just understood a single thing about the SrndQuery
> > > family
> > > <G>.
> > >
> > > I followed your link, and took a look at the text file. That should
> > > give me
> > > enough to get started.
> > >
> > > But if you wanted to e-mail me any sample code or long explanations of
> > > what
> > > this all does, I would forever be your lackey <G>....
> > >
> > > I should also fairly easily be able to run a few of these against the
> > > partial index I already have to get some sense of now it'll all work
> > > out in
> > > my problem space. I suspect that the actual number of distinct terms
> > > won't
> > > grow too much after the first 4,000 books, so it'll probably be pretty
> > > safe
> > > to get this running in the "worst case", find out if/where things blow
> > > up,
> > > and put in some safeguards. Or perhaps discover that it's completely
> and
> > > entirely perfect <G>.
> > >
> > > Thanks again
> > > Erick
> > >
> > > On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > >>
> > >> On Friday 06 October 2006 14:37, Erick Erickson wrote:
> > >> ...
> > >> > Fortunately, the PM agrees that it's silly to think about span
> queries
> > >> > involving OR or NOT for this app. So I'm left with something like
> Jo*n
> > >> AND
> > >> > sm*th AND jon?es WITHIN 6.
> > >>
> > >> OR works much the same as term expansion for wildcards.
> > >>
> > >> > The only approach that's occurred to me is to create a filter on
> > >> for the
> > >> > terms, giving me a subset of my docs that have any terms satisfying
> > >> the
> > >> > above. For each doc in the filter, get creative with
> > >> TermPositionVector
> > >> for
> > >> > determining whether the document matches. It seems that this would
> > >> involve
> > >> > creating a list of all positions in each doc in my filter that
> match
> > >> jo*n,
> > >> > another for sm*th, and another for jon?es and seeing if the
> distance
> > >> > (however I define that) between any triple of terms (one from each
> > >> list)
> > >> is
> > >> > less than 6.
> > >>
> > >> > My gut feel is that this explodes time-wise based upon the number
> of
> > >> terms
> > >> > that match. In this particular application, we are indexing 20K
> books.
> > >> Based
> > >> > on indexing 4K of them, this amounts to about a 4G index (although
> I
> > >> > acutally expect this to be somewhat larger since I haven't indexed
> all
> > >> the
> > >> > fields, just the text so far). I can't imagine that comparing the
> > >> expanded
> > >> > terms for, say, 10,000 docs will be fast. I'm putting together an
> > >> experiment
> > >> > to test this though.
> > >> >
> > >> > But someone could save me a lot of work by telling me that this is
> > >> solved
> > >> > already. This is your chance <G>......
> > >>
> > >> It's solved :) here:
> > >> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
> > >>
> > >> The surround query language uses only the spans package for
> > >> WITHIN like queries, no filters.
> > >> You may not want to use the parser, but all the rest could be handy.
> > >>
> > >> > The expanding queries (e.g. PrefixQuery, RegexQuery, WildcardQuery)
> > >> all
> > >> blow
> > >> > up with TooManyClauses, and I've tried upping the MaxClauses field
> but
> > >> that
> > >> > takes forever and *then* blows up. Even with -Xmx set as high as I
> > >> can.
> > >>
> > >> The surround language has its own limitation on the maximum number
> > >> of terms expanded for wildcards, and it works nicely even for rather
> > >> high numbers of terms (thousands) for WITHIN like queries,
> > >> given enough RAM.
> > >>
> > >> It shouldn't be too difficult to add NOT queries within WITHIN,
> > >> there already is a SpanNotQuery in Lucene to map onto.
> > >>
> > >> Regards,
> > >> Paul Elschot
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_42140_14166883.1160421230512--

From java-user-return-23905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 19:20:40 2006
Return-Path: <java-user-return-23905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59567 invoked from network); 9 Oct 2006 19:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 19:20:39 -0000
Received: (qmail 52672 invoked by uid 500); 9 Oct 2006 19:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52646 invoked by uid 500); 9 Oct 2006 19:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52635 invoked by uid 99); 9 Oct 2006 19:20:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 12:20:32 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 12:20:31 -0700
Received: by py-out-1112.google.com with SMTP id s49so2119282pyc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 12:20:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=evXQS8aBrKO1gaJj/n5AqZTINQ8rOxS6WvmZGv2kkmZT7DtdQeHnw0G5cICgJS8uh5m9JPYp+kWi850hsL4HkVCZCNdqlra6dgBylb8EjGW/JsV9VStUQSQDd7C8CeWNNwTIiwPGFrcGICZiM+jsVh0fp5LkBieRp6Qs8MeHhes=
Received: by 10.35.61.17 with SMTP id o17mr13434618pyk;
        Mon, 09 Oct 2006 12:20:10 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 9 Oct 2006 12:20:10 -0700 (PDT)
Message-ID: <359a92830610091220g26e8ee29md6621c5498303d6f@mail.gmail.com>
Date: Mon, 9 Oct 2006 15:20:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
In-Reply-To: <359a92830610091213n22cafca7k657f0a2d7dd50b8d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42308_4979480.1160421610260"
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>
	 <359a92830610061301w2b84843anf1d90a71180e1aaa@mail.gmail.com>
	 <4526C092.3080504@gmail.com>
	 <200610062310.18275.paul.elschot@xs4all.nl>
	 <359a92830610091213n22cafca7k657f0a2d7dd50b8d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_42308_4979480.1160421610260
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, forget the stuff about "TooManyBooleanClauses". I finally figured out
that if I specify the surround to have the same semantics as a SpanRegex (
i.e, and(eri*, mal*)) it blows up with TooManyBooleanClauses. So that makes
more sense to me now.

Specifying 20w(eri*, mal*) is what I was using before.

Erick

On 10/9/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> OK, I'm using the surround code, and it seems to be working...with the
> following questions (always, more questions)...
>
> > I'm gettng an exception sometimes of TooManyBasicQueries. I can control
> this by initializing BasicQueryFactory with a larger number. Do you have any
> cautions about upping this number?
>
> > There's a hard-coded value minimumPrefixLength set to 3 down in the code
> Surround query parser (allowedSuffix). I see no method to change this. I
> assume that this is to prevent using up too much memory/time. What should I
> know about this value? I'm mostly interested in a justification for the
> product manager why allowing, say, two character (or one character) prefixes
> is a bad idea <G>.
>
> > I'm a bit confused. It appears that TooManyBooleanClauses is orthogonal
> to Surround queries. That is, trying RegexSpanQuery doesn't want to work at
> all with the same search clause, as it runs out of memory pretty
> quickly......
>
> However, working with three-letter prefixes is blazingly fast.........
>
> Thanks again...
>
> Erick
>
> On 10/6/06, Paul Elschot < paul.elschot@xs4all.nl> wrote:
> >
> > Mark,
> >
> > On Friday 06 October 2006 22:46, Mark Miller wrote:
> > > Paul's parser is beyond my feeble comprehension...but I would start by
> > > looking at SrndTruncQuery. It looks to me like this enumerates each
> > > possible match just like a SpanRegexQuery does...I am too lazy to
> > figure
> > > out what the visitor pattern is doing so I don't know if they then get
> > > added to a boolean query, but I don't know what else would happen. If
> >
> > They can also be added to a SpanOrQuery as SpanTermQuery,
> > this depends on the context of the query (distance query or not).
> > The visitor pattern is used to have the same code for distance queries
> > and other queries as far as possible.
> >
> > > this is the case, I am wondering if it is any more efficient than the
> > > SpanRegex implementation...which could be changed to a SpanWildcard
> >
> > I don't think the surround implementation of expanding terms is more
> > efficient that the Lucene implementation.
> > Surround does have the functionality of a SpanWildCard, but
> > the implementation of the expansion is shared, see above.
> >
> > > implementation. How exactly is this better at avoiding a
> > toomanyclauses
> > > exception or ram fillup. Is it just the fact that the (lets say) three
> >
> > > wildcard terms are anded so this should dramatically reduce the
> > matches?
> >
> > The limitation in BasicQueryFactory works for a complete surround query,
> > which can be nested.
> > In Lucene only the max nr of clauses for a single level BooleanQuery
> > can be controlled.
> >
> > >...
> >
> > Regards,
> > Paul Elschot
> >
> >
> > > - Mark
> > >
> > > Erick Erickson wrote:
> > > > Paul:
> > > >
> > > > Splendid! Now if I just understood a single thing about the
> > SrndQuery
> > > > family
> > > > <G>.
> > > >
> > > > I followed your link, and took a look at the text file. That should
> > > > give me
> > > > enough to get started.
> > > >
> > > > But if you wanted to e-mail me any sample code or long explanations
> > of
> > > > what
> > > > this all does, I would forever be your lackey <G>....
> > > >
> > > > I should also fairly easily be able to run a few of these against
> > the
> > > > partial index I already have to get some sense of now it'll all work
> >
> > > > out in
> > > > my problem space. I suspect that the actual number of distinct terms
> > > > won't
> > > > grow too much after the first 4,000 books, so it'll probably be
> > pretty
> > > > safe
> > > > to get this running in the "worst case", find out if/where things
> > blow
> > > > up,
> > > > and put in some safeguards. Or perhaps discover that it's completely
> > and
> > > > entirely perfect <G>.
> > > >
> > > > Thanks again
> > > > Erick
> > > >
> > > > On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > >>
> > > >> On Friday 06 October 2006 14:37, Erick Erickson wrote:
> > > >> ...
> > > >> > Fortunately, the PM agrees that it's silly to think about span
> > queries
> > > >> > involving OR or NOT for this app. So I'm left with something like
> > Jo*n
> > > >> AND
> > > >> > sm*th AND jon?es WITHIN 6.
> > > >>
> > > >> OR works much the same as term expansion for wildcards.
> > > >>
> > > >> > The only approach that's occurred to me is to create a filter on
> > > >> for the
> > > >> > terms, giving me a subset of my docs that have any terms
> > satisfying
> > > >> the
> > > >> > above. For each doc in the filter, get creative with
> > > >> TermPositionVector
> > > >> for
> > > >> > determining whether the document matches. It seems that this
> > would
> > > >> involve
> > > >> > creating a list of all positions in each doc in my filter that
> > match
> > > >> jo*n,
> > > >> > another for sm*th, and another for jon?es and seeing if the
> > distance
> > > >> > (however I define that) between any triple of terms (one from
> > each
> > > >> list)
> > > >> is
> > > >> > less than 6.
> > > >>
> > > >> > My gut feel is that this explodes time-wise based upon the number
> > of
> > > >> terms
> > > >> > that match. In this particular application, we are indexing 20K
> > books.
> > > >> Based
> > > >> > on indexing 4K of them, this amounts to about a 4G index
> > (although I
> > > >> > acutally expect this to be somewhat larger since I haven't
> > indexed all
> > > >> the
> > > >> > fields, just the text so far). I can't imagine that comparing the
> > > >> expanded
> > > >> > terms for, say, 10,000 docs will be fast. I'm putting together an
> > > >> experiment
> > > >> > to test this though.
> > > >> >
> > > >> > But someone could save me a lot of work by telling me that this
> > is
> > > >> solved
> > > >> > already. This is your chance <G>......
> > > >>
> > > >> It's solved :) here:
> > > >> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
> > > >>
> > > >> The surround query language uses only the spans package for
> > > >> WITHIN like queries, no filters.
> > > >> You may not want to use the parser, but all the rest could be
> > handy.
> > > >>
> > > >> > The expanding queries (e.g. PrefixQuery, RegexQuery,
> > WildcardQuery)
> > > >> all
> > > >> blow
> > > >> > up with TooManyClauses, and I've tried upping the MaxClauses
> > field but
> > > >> that
> > > >> > takes forever and *then* blows up. Even with -Xmx set as high as
> > I
> > > >> can.
> > > >>
> > > >> The surround language has its own limitation on the maximum number
> > > >> of terms expanded for wildcards, and it works nicely even for
> > rather
> > > >> high numbers of terms (thousands) for WITHIN like queries,
> > > >> given enough RAM.
> > > >>
> > > >> It shouldn't be too difficult to add NOT queries within WITHIN,
> > > >> there already is a SpanNotQuery in Lucene to map onto.
> > > >>
> > > >> Regards,
> > > >> Paul Elschot
> > > >>
> > > >>
> > ---------------------------------------------------------------------
> > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>
> > > >>
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_42308_4979480.1160421610260--

From java-user-return-23906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 20:01:34 2006
Return-Path: <java-user-return-23906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78485 invoked from network); 9 Oct 2006 20:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 20:01:34 -0000
Received: (qmail 18130 invoked by uid 500); 9 Oct 2006 20:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18093 invoked by uid 500); 9 Oct 2006 20:01:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18082 invoked by uid 99); 9 Oct 2006 20:01:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 13:01:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 13:01:26 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id k99K1495050736
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 22:01:04 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
Date: Mon, 9 Oct 2006 22:01:02 +0200
User-Agent: KMail/1.8.2
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com> <359a92830610091213n22cafca7k657f0a2d7dd50b8d@mail.gmail.com> <359a92830610091220g26e8ee29md6621c5498303d6f@mail.gmail.com>
In-Reply-To: <359a92830610091220g26e8ee29md6621c5498303d6f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610092201.03138.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick,

On Monday 09 October 2006 21:20, Erick Erickson wrote:
> OK, forget the stuff about "TooManyBooleanClauses". I finally figured out
> that if I specify the surround to have the same semantics as a SpanRegex (
> i.e, and(eri*, mal*)) it blows up with TooManyBooleanClauses. So that makes
> more sense to me now.
> 
> Specifying 20w(eri*, mal*) is what I was using before.
> 
> Erick
> 
> On 10/9/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > OK, I'm using the surround code, and it seems to be working...with the
> > following questions (always, more questions)...
> >
> > > I'm gettng an exception sometimes of TooManyBasicQueries. I can control
> > this by initializing BasicQueryFactory with a larger number. Do you have 
any
> > cautions about upping this number?
> >
> > > There's a hard-coded value minimumPrefixLength set to 3 down in the code
> > Surround query parser (allowedSuffix). I see no method to change this. I
> > assume that this is to prevent using up too much memory/time. What should 
I
> > know about this value? I'm mostly interested in a justification for the
> > product manager why allowing, say, two character (or one character) 
prefixes
> > is a bad idea <G>.

Once BasicQueryFactory has a satisfactory limitation, that is one that
a user can understand when the exception for too many basic queries
is thrown, there is no need to keep this minimim prefix length at 3,
1 or 2 will also do. When using many thousands as the max. basic queries,
the term expansion itself might take some time to reach that maximum.

You might want to ask the PM for a reasonable query involving such short
prefixes, though. In most western languages, they do not make much sense.

> >
> > > I'm a bit confused. It appears that TooManyBooleanClauses is orthogonal
> > to Surround queries. That is, trying RegexSpanQuery doesn't want to work 
at
> > all with the same search clause, as it runs out of memory pretty
> > quickly......
> >
> > However, working with three-letter prefixes is blazingly fast.........

Your index is probably not very large (yet). Make sure to reevaluate
the max. number of basic queries as it grows.

Did you try nesting like this:
20d( 4w(lucene, action), 5d(hatch*, gospod*))
?

Could you tell a bit more about the target grammar?

Regards,
Paul Elschot


> >
> > Thanks again...
> >
> > Erick
> >
> > On 10/6/06, Paul Elschot < paul.elschot@xs4all.nl> wrote:
> > >
> > > Mark,
> > >
> > > On Friday 06 October 2006 22:46, Mark Miller wrote:
> > > > Paul's parser is beyond my feeble comprehension...but I would start by
> > > > looking at SrndTruncQuery. It looks to me like this enumerates each
> > > > possible match just like a SpanRegexQuery does...I am too lazy to
> > > figure
> > > > out what the visitor pattern is doing so I don't know if they then get
> > > > added to a boolean query, but I don't know what else would happen. If
> > >
> > > They can also be added to a SpanOrQuery as SpanTermQuery,
> > > this depends on the context of the query (distance query or not).
> > > The visitor pattern is used to have the same code for distance queries
> > > and other queries as far as possible.
> > >
> > > > this is the case, I am wondering if it is any more efficient than the
> > > > SpanRegex implementation...which could be changed to a SpanWildcard
> > >
> > > I don't think the surround implementation of expanding terms is more
> > > efficient that the Lucene implementation.
> > > Surround does have the functionality of a SpanWildCard, but
> > > the implementation of the expansion is shared, see above.
> > >
> > > > implementation. How exactly is this better at avoiding a
> > > toomanyclauses
> > > > exception or ram fillup. Is it just the fact that the (lets say) three
> > >
> > > > wildcard terms are anded so this should dramatically reduce the
> > > matches?
> > >
> > > The limitation in BasicQueryFactory works for a complete surround query,
> > > which can be nested.
> > > In Lucene only the max nr of clauses for a single level BooleanQuery
> > > can be controlled.
> > >
> > > >...
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > >
> > > > - Mark
> > > >
> > > > Erick Erickson wrote:
> > > > > Paul:
> > > > >
> > > > > Splendid! Now if I just understood a single thing about the
> > > SrndQuery
> > > > > family
> > > > > <G>.
> > > > >
> > > > > I followed your link, and took a look at the text file. That should
> > > > > give me
> > > > > enough to get started.
> > > > >
> > > > > But if you wanted to e-mail me any sample code or long explanations
> > > of
> > > > > what
> > > > > this all does, I would forever be your lackey <G>....
> > > > >
> > > > > I should also fairly easily be able to run a few of these against
> > > the
> > > > > partial index I already have to get some sense of now it'll all work
> > >
> > > > > out in
> > > > > my problem space. I suspect that the actual number of distinct terms
> > > > > won't
> > > > > grow too much after the first 4,000 books, so it'll probably be
> > > pretty
> > > > > safe
> > > > > to get this running in the "worst case", find out if/where things
> > > blow
> > > > > up,
> > > > > and put in some safeguards. Or perhaps discover that it's completely
> > > and
> > > > > entirely perfect <G>.
> > > > >
> > > > > Thanks again
> > > > > Erick
> > > > >
> > > > > On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > > >>
> > > > >> On Friday 06 October 2006 14:37, Erick Erickson wrote:
> > > > >> ...
> > > > >> > Fortunately, the PM agrees that it's silly to think about span
> > > queries
> > > > >> > involving OR or NOT for this app. So I'm left with something like
> > > Jo*n
> > > > >> AND
> > > > >> > sm*th AND jon?es WITHIN 6.
> > > > >>
> > > > >> OR works much the same as term expansion for wildcards.
> > > > >>
> > > > >> > The only approach that's occurred to me is to create a filter on
> > > > >> for the
> > > > >> > terms, giving me a subset of my docs that have any terms
> > > satisfying
> > > > >> the
> > > > >> > above. For each doc in the filter, get creative with
> > > > >> TermPositionVector
> > > > >> for
> > > > >> > determining whether the document matches. It seems that this
> > > would
> > > > >> involve
> > > > >> > creating a list of all positions in each doc in my filter that
> > > match
> > > > >> jo*n,
> > > > >> > another for sm*th, and another for jon?es and seeing if the
> > > distance
> > > > >> > (however I define that) between any triple of terms (one from
> > > each
> > > > >> list)
> > > > >> is
> > > > >> > less than 6.
> > > > >>
> > > > >> > My gut feel is that this explodes time-wise based upon the number
> > > of
> > > > >> terms
> > > > >> > that match. In this particular application, we are indexing 20K
> > > books.
> > > > >> Based
> > > > >> > on indexing 4K of them, this amounts to about a 4G index
> > > (although I
> > > > >> > acutally expect this to be somewhat larger since I haven't
> > > indexed all
> > > > >> the
> > > > >> > fields, just the text so far). I can't imagine that comparing the
> > > > >> expanded
> > > > >> > terms for, say, 10,000 docs will be fast. I'm putting together an
> > > > >> experiment
> > > > >> > to test this though.
> > > > >> >
> > > > >> > But someone could save me a lot of work by telling me that this
> > > is
> > > > >> solved
> > > > >> > already. This is your chance <G>......
> > > > >>
> > > > >> It's solved :) here:
> > > > >> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
> > > > >>
> > > > >> The surround query language uses only the spans package for
> > > > >> WITHIN like queries, no filters.
> > > > >> You may not want to use the parser, but all the rest could be
> > > handy.
> > > > >>
> > > > >> > The expanding queries (e.g. PrefixQuery, RegexQuery,
> > > WildcardQuery)
> > > > >> all
> > > > >> blow
> > > > >> > up with TooManyClauses, and I've tried upping the MaxClauses
> > > field but
> > > > >> that
> > > > >> > takes forever and *then* blows up. Even with -Xmx set as high as
> > > I
> > > > >> can.
> > > > >>
> > > > >> The surround language has its own limitation on the maximum number
> > > > >> of terms expanded for wildcards, and it works nicely even for
> > > rather
> > > > >> high numbers of terms (thousands) for WITHIN like queries,
> > > > >> given enough RAM.
> > > > >>
> > > > >> It shouldn't be too difficult to add NOT queries within WITHIN,
> > > > >> there already is a SpanNotQuery in Lucene to map onto.
> > > > >>
> > > > >> Regards,
> > > > >> Paul Elschot
> > > > >>
> > > > >>
> > > ---------------------------------------------------------------------
> > > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >>
> > > > >>
> > > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 20:10:23 2006
Return-Path: <java-user-return-23907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83091 invoked from network); 9 Oct 2006 20:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 20:10:22 -0000
Received: (qmail 34136 invoked by uid 500); 9 Oct 2006 20:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34106 invoked by uid 500); 9 Oct 2006 20:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34094 invoked by uid 99); 9 Oct 2006 20:10:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 13:10:06 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 13:10:05 -0700
Received: by py-out-1112.google.com with SMTP id s49so2134289pyc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 13:09:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PZLhqax7lro/LkztnVAQFNR+ryYFOvhagQz2CXy3unzg2IRPGaeQZUOsyeaCYgHEx6FN1/wUCo0UYhZuKIDQJUEIAm0/dw/QMAMfumsEgqYPF44eMjGUeJyvO5gwij0kHw/G9qHqBaLl6W4IfAFYz6QGWIMttdbliDKk4YsKsK0=
Received: by 10.35.119.11 with SMTP id w11mr13594366pym;
        Mon, 09 Oct 2006 13:09:43 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 9 Oct 2006 13:09:21 -0700 (PDT)
Message-ID: <359a92830610091309l36b3e30ek56a3446e5fcb0027@mail.gmail.com>
Date: Mon, 9 Oct 2006 16:09:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
In-Reply-To: <200610092201.03138.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43017_27234048.1160424561457"
References: <359a92830610060537j168d65c7od65f7f7088cdedec@mail.gmail.com>
	 <359a92830610091213n22cafca7k657f0a2d7dd50b8d@mail.gmail.com>
	 <359a92830610091220g26e8ee29md6621c5498303d6f@mail.gmail.com>
	 <200610092201.03138.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_43017_27234048.1160424561457
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've already started that conversation with the PM, I'm just trying to get a
better idea of what's possible. I'll whimper tooth and nail to keep from
having to do a lot of work to add a feature to a product that nobody in
their right mind would ever use <G>.

As far as the grammar, we don't actually have one yet. That's part of what
this exploration is all about. The kicker is that what we are indexing is
OCR data, some of which is pretty trashy. So you wind up with "interesting"
words in your index, things like rtyHrS. So the whole question of allowing
very specific queries on detailed wildcards (combined with spans) is under
discussion. It's not at all clear to me that there's any value to the end
users in the capability of, say, two character prefixes. And, it's an easy
rule that "prefix queries must specify at least 3 non-wildcard
characters"....

Thanks for your advice. You're quite correct that the index isn't very large
yet. My task tonight is to index about 4K books. I suspect that the number
of terms won't increase dramatically after that many books, but that's an
assumption on my part.

Thanks again
Erick

On 10/9/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Erick,
>
> On Monday 09 October 2006 21:20, Erick Erickson wrote:
> > OK, forget the stuff about "TooManyBooleanClauses". I finally figured
> out
> > that if I specify the surround to have the same semantics as a SpanRegex
> (
> > i.e, and(eri*, mal*)) it blows up with TooManyBooleanClauses. So that
> makes
> > more sense to me now.
> >
> > Specifying 20w(eri*, mal*) is what I was using before.
> >
> > Erick
> >
> > On 10/9/06, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > OK, I'm using the surround code, and it seems to be working...with the
> > > following questions (always, more questions)...
> > >
> > > > I'm gettng an exception sometimes of TooManyBasicQueries. I can
> control
> > > this by initializing BasicQueryFactory with a larger number. Do you
> have
> any
> > > cautions about upping this number?
> > >
> > > > There's a hard-coded value minimumPrefixLength set to 3 down in the
> code
> > > Surround query parser (allowedSuffix). I see no method to change this.
> I
> > > assume that this is to prevent using up too much memory/time. What
> should
> I
> > > know about this value? I'm mostly interested in a justification for
> the
> > > product manager why allowing, say, two character (or one character)
> prefixes
> > > is a bad idea <G>.
>
> Once BasicQueryFactory has a satisfactory limitation, that is one that
> a user can understand when the exception for too many basic queries
> is thrown, there is no need to keep this minimim prefix length at 3,
> 1 or 2 will also do. When using many thousands as the max. basic queries,
> the term expansion itself might take some time to reach that maximum.
>
> You might want to ask the PM for a reasonable query involving such short
> prefixes, though. In most western languages, they do not make much sense.
>
> > >
> > > > I'm a bit confused. It appears that TooManyBooleanClauses is
> orthogonal
> > > to Surround queries. That is, trying RegexSpanQuery doesn't want to
> work
> at
> > > all with the same search clause, as it runs out of memory pretty
> > > quickly......
> > >
> > > However, working with three-letter prefixes is blazingly fast.........
>
> Your index is probably not very large (yet). Make sure to reevaluate
> the max. number of basic queries as it grows.
>
> Did you try nesting like this:
> 20d( 4w(lucene, action), 5d(hatch*, gospod*))
> ?
>
> Could you tell a bit more about the target grammar?
>
> Regards,
> Paul Elschot
>
>
> > >
> > > Thanks again...
> > >
> > > Erick
> > >
> > > On 10/6/06, Paul Elschot < paul.elschot@xs4all.nl> wrote:
> > > >
> > > > Mark,
> > > >
> > > > On Friday 06 October 2006 22:46, Mark Miller wrote:
> > > > > Paul's parser is beyond my feeble comprehension...but I would
> start by
> > > > > looking at SrndTruncQuery. It looks to me like this enumerates
> each
> > > > > possible match just like a SpanRegexQuery does...I am too lazy to
> > > > figure
> > > > > out what the visitor pattern is doing so I don't know if they then
> get
> > > > > added to a boolean query, but I don't know what else would happen.
> If
> > > >
> > > > They can also be added to a SpanOrQuery as SpanTermQuery,
> > > > this depends on the context of the query (distance query or not).
> > > > The visitor pattern is used to have the same code for distance
> queries
> > > > and other queries as far as possible.
> > > >
> > > > > this is the case, I am wondering if it is any more efficient than
> the
> > > > > SpanRegex implementation...which could be changed to a
> SpanWildcard
> > > >
> > > > I don't think the surround implementation of expanding terms is more
> > > > efficient that the Lucene implementation.
> > > > Surround does have the functionality of a SpanWildCard, but
> > > > the implementation of the expansion is shared, see above.
> > > >
> > > > > implementation. How exactly is this better at avoiding a
> > > > toomanyclauses
> > > > > exception or ram fillup. Is it just the fact that the (lets say)
> three
> > > >
> > > > > wildcard terms are anded so this should dramatically reduce the
> > > > matches?
> > > >
> > > > The limitation in BasicQueryFactory works for a complete surround
> query,
> > > > which can be nested.
> > > > In Lucene only the max nr of clauses for a single level BooleanQuery
> > > > can be controlled.
> > > >
> > > > >...
> > > >
> > > > Regards,
> > > > Paul Elschot
> > > >
> > > >
> > > > > - Mark
> > > > >
> > > > > Erick Erickson wrote:
> > > > > > Paul:
> > > > > >
> > > > > > Splendid! Now if I just understood a single thing about the
> > > > SrndQuery
> > > > > > family
> > > > > > <G>.
> > > > > >
> > > > > > I followed your link, and took a look at the text file. That
> should
> > > > > > give me
> > > > > > enough to get started.
> > > > > >
> > > > > > But if you wanted to e-mail me any sample code or long
> explanations
> > > > of
> > > > > > what
> > > > > > this all does, I would forever be your lackey <G>....
> > > > > >
> > > > > > I should also fairly easily be able to run a few of these
> against
> > > > the
> > > > > > partial index I already have to get some sense of now it'll all
> work
> > > >
> > > > > > out in
> > > > > > my problem space. I suspect that the actual number of distinct
> terms
> > > > > > won't
> > > > > > grow too much after the first 4,000 books, so it'll probably be
> > > > pretty
> > > > > > safe
> > > > > > to get this running in the "worst case", find out if/where
> things
> > > > blow
> > > > > > up,
> > > > > > and put in some safeguards. Or perhaps discover that it's
> completely
> > > > and
> > > > > > entirely perfect <G>.
> > > > > >
> > > > > > Thanks again
> > > > > > Erick
> > > > > >
> > > > > > On 10/6/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > > > >>
> > > > > >> On Friday 06 October 2006 14:37, Erick Erickson wrote:
> > > > > >> ...
> > > > > >> > Fortunately, the PM agrees that it's silly to think about
> span
> > > > queries
> > > > > >> > involving OR or NOT for this app. So I'm left with something
> like
> > > > Jo*n
> > > > > >> AND
> > > > > >> > sm*th AND jon?es WITHIN 6.
> > > > > >>
> > > > > >> OR works much the same as term expansion for wildcards.
> > > > > >>
> > > > > >> > The only approach that's occurred to me is to create a filter
> on
> > > > > >> for the
> > > > > >> > terms, giving me a subset of my docs that have any terms
> > > > satisfying
> > > > > >> the
> > > > > >> > above. For each doc in the filter, get creative with
> > > > > >> TermPositionVector
> > > > > >> for
> > > > > >> > determining whether the document matches. It seems that this
> > > > would
> > > > > >> involve
> > > > > >> > creating a list of all positions in each doc in my filter
> that
> > > > match
> > > > > >> jo*n,
> > > > > >> > another for sm*th, and another for jon?es and seeing if the
> > > > distance
> > > > > >> > (however I define that) between any triple of terms (one from
> > > > each
> > > > > >> list)
> > > > > >> is
> > > > > >> > less than 6.
> > > > > >>
> > > > > >> > My gut feel is that this explodes time-wise based upon the
> number
> > > > of
> > > > > >> terms
> > > > > >> > that match. In this particular application, we are indexing
> 20K
> > > > books.
> > > > > >> Based
> > > > > >> > on indexing 4K of them, this amounts to about a 4G index
> > > > (although I
> > > > > >> > acutally expect this to be somewhat larger since I haven't
> > > > indexed all
> > > > > >> the
> > > > > >> > fields, just the text so far). I can't imagine that comparing
> the
> > > > > >> expanded
> > > > > >> > terms for, say, 10,000 docs will be fast. I'm putting
> together an
> > > > > >> experiment
> > > > > >> > to test this though.
> > > > > >> >
> > > > > >> > But someone could save me a lot of work by telling me that
> this
> > > > is
> > > > > >> solved
> > > > > >> > already. This is your chance <G>......
> > > > > >>
> > > > > >> It's solved :) here:
> > > > > >>
> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/
> > > > > >>
> > > > > >> The surround query language uses only the spans package for
> > > > > >> WITHIN like queries, no filters.
> > > > > >> You may not want to use the parser, but all the rest could be
> > > > handy.
> > > > > >>
> > > > > >> > The expanding queries (e.g. PrefixQuery, RegexQuery,
> > > > WildcardQuery)
> > > > > >> all
> > > > > >> blow
> > > > > >> > up with TooManyClauses, and I've tried upping the MaxClauses
> > > > field but
> > > > > >> that
> > > > > >> > takes forever and *then* blows up. Even with -Xmx set as high
> as
> > > > I
> > > > > >> can.
> > > > > >>
> > > > > >> The surround language has its own limitation on the maximum
> number
> > > > > >> of terms expanded for wildcards, and it works nicely even for
> > > > rather
> > > > > >> high numbers of terms (thousands) for WITHIN like queries,
> > > > > >> given enough RAM.
> > > > > >>
> > > > > >> It shouldn't be too difficult to add NOT queries within WITHIN,
> > > > > >> there already is a SpanNotQuery in Lucene to map onto.
> > > > > >>
> > > > > >> Regards,
> > > > > >> Paul Elschot
> > > > > >>
> > > > > >>
> > > >
> ---------------------------------------------------------------------
> > > > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >>
> > > > > >>
> > > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43017_27234048.1160424561457--

From java-user-return-23908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 20:45:03 2006
Return-Path: <java-user-return-23908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97149 invoked from network); 9 Oct 2006 20:45:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 20:45:02 -0000
Received: (qmail 89432 invoked by uid 500); 9 Oct 2006 20:44:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89402 invoked by uid 500); 9 Oct 2006 20:44:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89391 invoked by uid 99); 9 Oct 2006 20:44:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 13:44:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 13:44:54 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id k99KiWH5101680
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 20:44:32 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k99KkoZ92613254
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 22:46:50 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k99KiVWL015304
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 22:44:31 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k99KiV6R015301
	for <java-user@lucene.apache.org>; Mon, 9 Oct 2006 22:44:31 +0200
In-Reply-To: <359a92830610091309l36b3e30ek56a3446e5fcb0027@mail.gmail.com>
Subject: Re: wildcard and span queries
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF5609FF4B.91A2330C-ON88257202.006FD442-88257202.0071C97E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 9 Oct 2006 12:42:51 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 09/10/2006 22:46:50
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Erick Erickson" <erickerickson@gmail.com> wrote on 09/10/2006 13:09:21:
> ... The kicker is that what we are indexing is
> OCR data, some of which is pretty trashy. So you wind up with
"interesting"
> words in your index, things like rtyHrS. So the whole question of
allowing
> very specific queries on detailed wildcards (combined with spans) is
under
> discussion. It's not at all clear to me that there's any value to the end
> users in the capability of, say, two character prefixes. And, it's an
easy
> rule that "prefix queries must specify at least 3 non-wildcard
> characters"....

Erick, I may be out of course here, but, fwiw, have you considered n-gram
indexing/search for a degree of fuzziness to compensate for OCR errors..?

For a four words query you would probably get ~20 tokens (bigrams?) - no
matter what the index size is. You would then probably want to score higher
by LA (lexical affinity - query terms appear close to each other in the
document) - and I am not sure to what degree a span query (made of n-gram
terms) would serve that, because (1) all terms in the span need to be there
(well, I think:-); and, (2) you would like to increase doc score for
close-by terms only for close-by query n-grams.

So there might not be a ready to use solution in Lucene for this, but
perhaps this is a more robust direction to try than the wild card approach
- I mean, if users want to type a wild card query, it is their right to do
so, but for an application logic this does not seem the best choice.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 21:23:02 2006
Return-Path: <java-user-return-23909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32780 invoked from network); 9 Oct 2006 21:23:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 21:23:01 -0000
Received: (qmail 34828 invoked by uid 500); 9 Oct 2006 21:22:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34342 invoked by uid 500); 9 Oct 2006 21:22:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34331 invoked by uid 99); 9 Oct 2006 21:22:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 14:22:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 14:22:55 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D5A335B773; Mon,  9 Oct 2006 14:22:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CA26C7F403
	for <java-user@lucene.apache.org>; Mon,  9 Oct 2006 14:22:33 -0700 (PDT)
Date: Mon, 9 Oct 2006 14:22:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: FieldSelectorResult instance descriptions?
In-Reply-To: <200610081255.35168.nicolas.lalevee@anyware-tech.com>
Message-ID: <Pine.LNX.4.58.0610091400170.22755@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0610080021190.7461@hal.rescomp.berkeley.edu>
 <200610081255.35168.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: If you read the entire source as I did, I becomes clear ! :)
: The interesting code is in FieldsReader.

Not neccessarily.  There can be differneces between how constants are
used and how they are suppose to be used (depending on wether or not the
code using them has any bugs in it)


: NO_LOAD : skip the field, it's value won't be available

Should the client expecation for "NO_LOAD" fileds be that the
Document.getField/getFieldable will return will null, and that
the List returned by getFields() will not contain anything for these
fields, or should clients assume there may be an "empty" Fieldable object
returned by any of these methods (or included in the list)

: LAZY_LOAD : do not load the field value, but if you request it later, it will
: be loaded on request. Note that it can be lazy-loaded only if the reader is
: still opened.

What should clicents expected to happen if the reader has already been
closed?

: LOAD_FOR_MERGE : internal use when merging segments: it avoids uncompressing
: and recompressing data, the data is merged "binarily".

this seems like a second-class citizen then correct? not intende for
client code to use in their FieldSelector ? ... so what if the do use
it? ... can they expect the data n the Field object to be uncompressed on
the fly if they attempt to access it later?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 22:01:35 2006
Return-Path: <java-user-return-23910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44695 invoked from network); 9 Oct 2006 22:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 22:01:35 -0000
Received: (qmail 82425 invoked by uid 500); 9 Oct 2006 22:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81493 invoked by uid 500); 9 Oct 2006 22:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81482 invoked by uid 99); 9 Oct 2006 22:01:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 15:01:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 15:01:27 -0700
Received: from zorro ([24.201.31.203]) by VL-MO-MR002.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with SMTP id <0J6W004R92HTY740@VL-MO-MR002.ip.videotron.ca> for
 java-user@lucene.apache.org; Mon, 09 Oct 2006 18:01:05 -0400 (EDT)
Date: Mon, 09 Oct 2006 17:59:40 -0400
From: Patrick Turcotte <patrick.turcotte@usherbrooke.ca>
Subject: RE: QueryParser syntax French Operator
In-reply-to: <9fc755c20610080714y6eac565du4d8acb37f53f9943@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 8BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


	Hi,

	I was thinking of something along those lines.

	Last week, I was able to take time to understand the JavaCC syntax and
possiblities.

	I have some cleaning up, testing and documentation to do, but basically, I
was able to expand the AND / OR / NOT patterns at runtime using the
ResourceBundle paradigm. I'll keep you posted.

Patrick

> -----Message d'origine-----
> De : karl wettin [mailto:karl.wettin@gmail.com]
> Envoy : 8 octobre, 2006 10:14
>  : java-user@lucene.apache.org
> Objet : Re: QueryParser syntax French Operator
>
>
> On 10/8/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Hi Patrick,
> >
> > If I were trying to do this, I'd modify QueryParser.jj to
> construct the grammar for boolean operators based on something
> like Locale (or LANG env. variable?).  I'd try adding code a la:
> > en_AND = AND
> > en_OR = OR
> > en_NOT = NOT
> > fr_AND = ET
> > fr_OR = OU
> > fr_NOT = SAUF
> >
> > And then:
> > if (locale is 'fr')
> >  // construct the grammar with fr_*
> > ...
> >
> > Something like that.
>
> It is a good thought, but as number of locales grows with similar
> languages you'll get deterministic errors in the lexer. So I would
> absolutely recommend one grammar file per language. Not sure if JavaCC
> allows inheritance, but with ANTlr this would be a very simple and
> effective way to solve the problem.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 22:02:01 2006
Return-Path: <java-user-return-23911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44762 invoked from network); 9 Oct 2006 22:02:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 22:02:01 -0000
Received: (qmail 83159 invoked by uid 500); 9 Oct 2006 22:01:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82976 invoked by uid 500); 9 Oct 2006 22:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82962 invoked by uid 99); 9 Oct 2006 22:01:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 15:01:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a13.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 15:01:53 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.dreamhost.com (Postfix) with ESMTP id 9589C129B34
	for <java-user@lucene.apache.org>; Mon,  9 Oct 2006 15:01:31 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0610091400170.22755@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0610080021190.7461@hal.rescomp.berkeley.edu> <200610081255.35168.nicolas.lalevee@anyware-tech.com> <Pine.LNX.4.58.0610091400170.22755@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7F793D18-59EB-42E8-96AC-FA7598CF33C7@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: FieldSelectorResult instance descriptions?
Date: Mon, 9 Oct 2006 18:01:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See http://www.gossamer-threads.com/lists/lucene/java-dev/33964? 
search_string=Lazy%20Field%20Loading;#33964 for the discussion on  
Java Dev from wayback if you want more background info.

To some extent, I still think Lazy Fields are in the early adopter  
stage, since they haven't officially been released, so these  
questions are good for vetting them.  And there is still the question  
of how to handle Document.getField() versus Document.getFieldable 
()...  but that is a discussion for the dev list.


See below for more...

HTH,
Grant
On Oct 9, 2006, at 5:22 PM, Chris Hostetter wrote:

>
> : If you read the entire source as I did, I becomes clear ! :)
> : The interesting code is in FieldsReader.
>
> Not neccessarily.  There can be differneces between how constants are
> used and how they are suppose to be used (depending on wether or  
> not the
> code using them has any bugs in it)
>

I will put some javadocs on these (or if someone wants to add a  
patch...)


>
> : NO_LOAD : skip the field, it's value won't be available
>
> Should the client expecation for "NO_LOAD" fileds be that the
> Document.getField/getFieldable will return will null, and that
> the List returned by getFields() will not contain anything for these
> fields, or should clients assume there may be an "empty" Fieldable  
> object
> returned by any of these methods (or included in the list)

My understanding is in the NO_LOAD case, doc.add(Field) is not  
called, so Document.getField() will return null.  Again, I will try  
to get some javadocs on this part.

>
> : LAZY_LOAD : do not load the field value, but if you request it  
> later, it will
> : be loaded on request. Note that it can be lazy-loaded only if the  
> reader is
> : still opened.
>
> What should clicents expected to happen if the reader has already been
> closed?
>

Search the dev list for "Semantics of a closed IndexInput" for some  
discussion on this between Doug and I.  Unfortunately, the answer  
isn't all that satisfying, since it is undefined.  I would prefer  
better treatment than that, but it isn't obvious.  I originally  
thought there would be an exception to catch or something (in fact,  
my original test cases had expected it to be handled), but ended up  
putting the handling on the application, since the app should know  
when it has been closed.


> : LOAD_FOR_MERGE : internal use when merging segments: it avoids  
> uncompressing
> : and recompressing data, the data is merged "binarily".
>
> this seems like a second-class citizen then correct? not intende for
> client code to use in their FieldSelector ? ... so what if the do use
> it? ... can they expect the data n the Field object to be  
> uncompressed on
> the fly if they attempt to access it later?
>

I would agree it is a second-class citizen, but maybe Otis can add  
his thoughts, as I think he added this feature.  I am unsure of the  
results of using it outside of the merge scope.

>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 09 23:40:19 2006
Return-Path: <java-user-return-23912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69778 invoked from network); 9 Oct 2006 23:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Oct 2006 23:40:19 -0000
Received: (qmail 11027 invoked by uid 500); 9 Oct 2006 23:40:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10991 invoked by uid 500); 9 Oct 2006 23:40:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10980 invoked by uid 99); 9 Oct 2006 23:40:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 16:40:12 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 16:40:11 -0700
Received: by py-out-1112.google.com with SMTP id e30so2578599pya
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 16:39:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MoCCJAm+Wwsx3bRE8mOQwSJBEF9E2Qki71UytNXWIiv/hRUmRNjJ+q0sCWsUtFVtRTA7F1+4t9CaCIeutmrE0VGbkgs1JnU65z4jf+9UPAheRMZQp+wa4biaO9x0vHAU/X9CiTvNeEUakcjUW/7LFEmiOhbpHg1sdiHUnIMfmZY=
Received: by 10.35.114.16 with SMTP id r16mr363222pym;
        Mon, 09 Oct 2006 16:39:46 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 9 Oct 2006 16:39:45 -0700 (PDT)
Message-ID: <359a92830610091639q43e882c0lc4b5d0a3cd0c95fe@mail.gmail.com>
Date: Mon, 9 Oct 2006 19:39:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
In-Reply-To: <OF5609FF4B.91A2330C-ON88257202.006FD442-88257202.0071C97E@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45539_29386522.1160437186100"
References: <359a92830610091309l36b3e30ek56a3446e5fcb0027@mail.gmail.com>
	 <OF5609FF4B.91A2330C-ON88257202.006FD442-88257202.0071C97E@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_45539_29386522.1160437186100
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Doron:

Thanks for the suggestion, I'll certainly put it on my list, depending upon
what the PM decides. This app is geneaology reasearch, and users *can* put
in their own wildcards...

This is why I love this list... lots of smart people giving me suggestions I
never would have thought of <G>...

Thanks
Erick

On 10/9/06, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> "Erick Erickson" <erickerickson@gmail.com> wrote on 09/10/2006 13:09:21:
> > ... The kicker is that what we are indexing is
> > OCR data, some of which is pretty trashy. So you wind up with
> "interesting"
> > words in your index, things like rtyHrS. So the whole question of
> allowing
> > very specific queries on detailed wildcards (combined with spans) is
> under
> > discussion. It's not at all clear to me that there's any value to the
> end
> > users in the capability of, say, two character prefixes. And, it's an
> easy
> > rule that "prefix queries must specify at least 3 non-wildcard
> > characters"....
>
> Erick, I may be out of course here, but, fwiw, have you considered n-gram
> indexing/search for a degree of fuzziness to compensate for OCR errors..?
>
> For a four words query you would probably get ~20 tokens (bigrams?) - no
> matter what the index size is. You would then probably want to score
> higher
> by LA (lexical affinity - query terms appear close to each other in the
> document) - and I am not sure to what degree a span query (made of n-gram
> terms) would serve that, because (1) all terms in the span need to be
> there
> (well, I think:-); and, (2) you would like to increase doc score for
> close-by terms only for close-by query n-grams.
>
> So there might not be a ready to use solution in Lucene for this, but
> perhaps this is a more robust direction to try than the wild card approach
>
> - I mean, if users want to type a wild card query, it is their right to do
> so, but for an application logic this does not seem the best choice.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_45539_29386522.1160437186100--

From java-user-return-23913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 03:23:13 2006
Return-Path: <java-user-return-23913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39558 invoked from network); 10 Oct 2006 03:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 03:23:13 -0000
Received: (qmail 74677 invoked by uid 500); 10 Oct 2006 03:23:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74459 invoked by uid 500); 10 Oct 2006 03:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74443 invoked by uid 99); 10 Oct 2006 03:23:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 20:23:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 20:23:04 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 056AD5B777; Mon,  9 Oct 2006 20:22:43 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 00B857F403
	for <java-user@lucene.apache.org>; Mon,  9 Oct 2006 20:22:43 -0700 (PDT)
Date: Mon, 9 Oct 2006 20:22:43 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Incremental updates / slow searches.
In-Reply-To: <c68e39170610091049r445bf830x1d42e7c857e4112c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610092020290.5067@hal.rescomp.berkeley.edu>
References: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
 <c68e39170610091049r445bf830x1d42e7c857e4112c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


don't forget to optimize your index every now and then as well... deleting
a document just marks it as "deleted" it still gets inspectected by every
query during scoring at least once to see that it can skip it, optimizing
is the only thing that truely removes the "deleted" documents.


: Date: Mon, 9 Oct 2006 13:49:34 -0400
: From: Yonik Seeley <yonik@apache.org>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: Incremental updates / slow searches.
:
: The biggest thing would be to limit how often you open a new
: IndexSearcher, and when you do, warm up the new searcher in the
: background while you continue serving searches with the existing
: searcher.  This is the strategy that Solr uses.
:
: There is also the issue of if you are analyzing/merging docs on the
: same servers that you are executing searches on.  You can use a
: separate box to build the index and distribute changes to boxes used
: for searching.
:
: -Yonik
: http://incubator.apache.org/solr Solr, the open-source Lucene search serv=
er
:
: On 10/9/06, Rickard B=E4ckman <backman.rickard@gmail.com> wrote:
: > Hi,
: >
: > we are using a search system based on Lucene and have recently tried to=
 add
: > incremental updating of the index instead of building a new index every=
 now
: > and then. However we now run into problems as our searches starts to ta=
ke
: > very long time to complete.
: >
: > Our index is about 8-9GB large and we are sending lots of updates / sec=
ond
: > (we are probably merging in 200 - 300 in a few seconds). Today we buffe=
r a
: > bunch of updates and then merge them into the existing index like a bat=
ch,
: > first doing deletes and then inserts.
: >
: > We are currently not using any special tuning of Lucene.
: >
: > Does anyone have any similiar experiences from Lucene or advices on how=
 to
: > reduce the amount of times it takes to perform a search? In particular =
what
: > would be an optimal combination of update size, merge factor, max buffe=
red
: > docs?
: >
: > /Rickard
: >
: >
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 03:53:28 2006
Return-Path: <java-user-return-23914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43482 invoked from network); 10 Oct 2006 03:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 03:53:27 -0000
Received: (qmail 88609 invoked by uid 500); 10 Oct 2006 03:53:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88567 invoked by uid 500); 10 Oct 2006 03:53:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88556 invoked by uid 99); 10 Oct 2006 03:53:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 20:53:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 20:53:21 -0700
Received: by nf-out-0910.google.com with SMTP id c2so155720nfe
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 20:53:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=OAf5UsV6dqGDxL10/FK9cFMOqNt09Zlc1dMaCg3qXjAgoI2DvGVvjecEaEGbGZcciTRX2nVSL903crJb3w0FWE8xRtaEppPzAlpf8pmXjPVQX2Gq3c7P62PcPCxrH6RJykn2zbAOatF+0W4omW7yCOlEoeLMmgbTTxofEQa6GF8=
Received: by 10.82.114.3 with SMTP id m3mr733958buc;
        Mon, 09 Oct 2006 20:52:59 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Mon, 9 Oct 2006 20:52:59 -0700 (PDT)
Message-ID: <c68e39170610092052u17e1eca2p79cc9da77ef7e718@mail.gmail.com>
Date: Mon, 9 Oct 2006 23:52:59 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Incremental updates / slow searches.
In-Reply-To: <Pine.LNX.4.58.0610092020290.5067@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
	 <c68e39170610091049r445bf830x1d42e7c857e4112c@mail.gmail.com>
	 <Pine.LNX.4.58.0610092020290.5067@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 9ca73e538e630f58
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/9/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> don't forget to optimize your index every now and then as well... deleting
> a document just marks it as "deleted" it still gets inspectected by every
> query during scoring at least once to see that it can skip it, optimizing
> is the only thing that truely removes the "deleted" documents.

I'd refine that statement to "optimizing is the easiest way to remove
any deleted documents that still exist in the index".

Deleted documents are removed from segments that are merged, so it
depends on things like the mergeFactor, maxBufferedDocs, and where the
deleted docs are in the index (in the smallest or largest segments).
Some deleted docs will be removed quickly, but some won't.

Optimizing an index also has a beneficial effect on search speed even
beyond removing all of the deleted docs.  Each index segment is
actually a complete index on it's own... so if search is generally
O(log(N)), searching across M segments of since N will take M *
log(N).  If those segments are "optimized" into a single segment, the
search will be O(log(M*N)).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 06:15:31 2006
Return-Path: <java-user-return-23915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72816 invoked from network); 10 Oct 2006 06:15:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 06:15:30 -0000
Received: (qmail 97610 invoked by uid 500); 10 Oct 2006 06:15:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97587 invoked by uid 500); 10 Oct 2006 06:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97576 invoked by uid 99); 10 Oct 2006 06:15:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 23:15:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mathias.lux@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Oct 2006 23:15:22 -0700
Received: by ug-out-1314.google.com with SMTP id k40so734872ugc
        for <java-user@lucene.apache.org>; Mon, 09 Oct 2006 23:15:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:sender;
        b=qq3894HnamElKCUq/SS+OPeDyLfT3OZRwSsuwKcofoiczPjI/kbFDE2fdPYZZF1sbr/JxmXLlhrX8FC/8shxgfM73TWigC51aCRVm3REMPmbflVUNQQsnOImhn4XisLvUXVkCWE0W17TN0ht/Rz25Gda48rlFhz0M0dDatOZxRg=
Received: by 10.67.24.13 with SMTP id b13mr7838907ugj;
        Mon, 09 Oct 2006 23:15:00 -0700 (PDT)
Received: from ?143.205.122.226? ( [143.205.122.226])
        by mx.google.com with ESMTP id e23sm2272501ugd.2006.10.09.23.15.00;
        Mon, 09 Oct 2006 23:15:00 -0700 (PDT)
Message-ID: <452B3A63.3020801@juggle.at>
Date: Tue, 10 Oct 2006 08:14:59 +0200
From: Mathias Lux <mathias@juggle.at>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Incremental updates / slow searches.
References: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
In-Reply-To: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
Sender: Mathias Lux <mathias.lux@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rickard Bckman wrote:
> Hi,
> 
> we are using a search system based on Lucene and have recently tried to add
> incremental updating of the index instead of building a new index every now
> and then. However we now run into problems as our searches starts to take
> very long time to complete.
> 
> Our index is about 8-9GB large and we are sending lots of updates / second
> (we are probably merging in 200 - 300 in a few seconds). Today we buffer a
> bunch of updates and then merge them into the existing index like a batch,
> first doing deletes and then inserts.

Hi Rickard,

Eventually you can try another strategy: If your "main" index doesn't
change that much over a short time, you can have it unchanged for let's
say a day. All inserts are done in another small index and searching is
done with a MultiSearcher using both Indices.

Benefits:
 + Big index remains optimized
 + Small index can be optimized after every x-th update, it doesn't take
that long
 + Search time reduced due to optimized indices
 + Small index can be updated on a remote indexing machine and then
distributed to the search servers (which could be a pain in the ass with
9 Gigs of data *gg*)
 - Merge has to be done in the night
 - Deletes have to be scheduled in the night
 - If you don't do the deletes you have eventually outdated results
(depends on your scenario)
 - You are using multisearcher, which might be somewhat slower

Of course you can also do the deletes in the main index within the
updates, but then your index is not that optimal any more. Its kind of
bargain between accuracy and runtime, as everything in retrieval.

Obviously there are pros and cons of this strategy and whether it is
appropriate for you depends on the use case -> well ... I'd like to
other opinions too ;)

hope that helps a bit,
  Mathias

-- 
    '   '    '
      '   '    '     Mathias Lux
 o/          '  \o   mathias@juggle.at
 /-'            -\   skype://dermotte, icq # 1988617
/\               /\  http://www.SemanticMetadata.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 07:41:29 2006
Return-Path: <java-user-return-23916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3216 invoked from network); 10 Oct 2006 07:41:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 07:41:29 -0000
Received: (qmail 87560 invoked by uid 500); 10 Oct 2006 07:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87537 invoked by uid 500); 10 Oct 2006 07:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87526 invoked by uid 99); 10 Oct 2006 07:41:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 00:41:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [15.219.201.135] (HELO bgerelbas02.asiapac.hp.net) (15.219.201.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 00:41:17 -0700
Received: from bgeexg12.asiapacific.cpqcorp.net (bgeexg12.asiapacific.cpqcorp.net [16.150.33.62])
	by bgerelbas02.asiapac.hp.net (Postfix) with ESMTP id E38EC340BD
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 12:35:36 +0530 (IST)
Received: from bgeexc01.asiapacific.cpqcorp.net ([16.150.33.37]) by bgeexg12.asiapacific.cpqcorp.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 10 Oct 2006 12:35:36 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to search with empty content
Date: Tue, 10 Oct 2006 12:34:47 +0530
Message-ID: <E572CFB9847D084587D2F6EAB5DFF48C064989AC@bgeexc01.asiapacific.cpqcorp.net>
In-Reply-To: <452A6452.5060808@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to search with empty content
Thread-Index: Acbrs+ieY/t/ksSvSHaVjP/osgV/1AAhilVQ
From: "Kumar, Samala Santhosh (TPKM)" <samala-santhosh.kumar@hp.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Oct 2006 07:05:36.0581 (UTC) FILETIME=[7C63C750:01C6EC3A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I went through lucene API about MatchAllDocsQuery, I didn't uderstood
how to use it, can you please exaplain me with small code ?


regards
santhosh=20


-----Original Message-----
From: Scott [mailto:m.scott.tiger@gmail.com]=20
Sent: Monday, October 09, 2006 8:32 PM
To: java-user@lucene.apache.org
Subject: Re: How to search with empty content

You can get all document by using MatchAllDocsQuery.

Kumar, Samala Santhosh (TPKM) wrote:
> =20
> I want to search without giving any input, when I search leaving blank

> the search text box it should give me all the documents present in the

> index. please give me some solution or pointers.
>=20
> regards
> Santhosh
>=20
>=20
> =20
>=20
> =20
>=20
>=20
> =20
>=20
> =20
>=20

--
Scott

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 07:48:39 2006
Return-Path: <java-user-return-23917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5885 invoked from network); 10 Oct 2006 07:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 07:48:39 -0000
Received: (qmail 94274 invoked by uid 500); 10 Oct 2006 07:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94230 invoked by uid 500); 10 Oct 2006 07:48:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94218 invoked by uid 99); 10 Oct 2006 07:48:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 00:48:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 00:48:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E6AD430EFC19; Tue, 10 Oct 2006 03:48:04 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 103DB30EFC18
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 03:48:03 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <E572CFB9847D084587D2F6EAB5DFF48C064989AC@bgeexc01.asiapacific.cpqcorp.net>
References: <E572CFB9847D084587D2F6EAB5DFF48C064989AC@bgeexc01.asiapacific.cpqcorp.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6ADA66D1-BA74-4A08-B38E-625F7118F883@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to search with empty content
Date: Tue, 10 Oct 2006 03:48:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 10, 2006, at 3:04 AM, Kumar, Samala Santhosh (TPKM) wrote:
> I went through lucene API about MatchAllDocsQuery, I didn't uderstood
> how to use it, can you please exaplain me with small code ?


Hits hits = searcher.search(new MatchAllDocsQuery());

    Erik




>
>
> regards
> santhosh
>
>
> -----Original Message-----
> From: Scott [mailto:m.scott.tiger@gmail.com]
> Sent: Monday, October 09, 2006 8:32 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to search with empty content
>
> You can get all document by using MatchAllDocsQuery.
>
> Kumar, Samala Santhosh (TPKM) wrote:
>>
>> I want to search without giving any input, when I search leaving  
>> blank
>
>> the search text box it should give me all the documents present in  
>> the
>
>> index. please give me some solution or pointers.
>>
>> regards
>> Santhosh
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
> --
> Scott
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 09:11:41 2006
Return-Path: <java-user-return-23918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40889 invoked from network); 10 Oct 2006 09:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 09:11:41 -0000
Received: (qmail 23585 invoked by uid 500); 10 Oct 2006 09:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22555 invoked by uid 500); 10 Oct 2006 09:11:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22544 invoked by uid 99); 10 Oct 2006 09:11:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 02:11:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 02:11:32 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id E6773746CB
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 11:11:09 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6EC4C.32325C8E"
Subject: Strange Spellchecker behaviour
Date: Tue, 10 Oct 2006 11:12:23 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BE40@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Strange Spellchecker behaviour
Thread-Index: AcbsTCbzHuIXYp0ATCCMHbKnqJUFHA==
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6EC4C.32325C8E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello, I have found that the spellchecker behaves a bit strange. My =
spell indexer class below doesn't work if I use the spellfield string =
set in the constructor directly, but it does work if I use the intern() =
value. The problem resides in the hasNext() method of LuceneIterator =
where an object comparison between two field strings occur. Now I got =
everything to work here, but I do wonder why it didn't work in my first =
version.
=20
public boolean hasNext() {
      has_next_called =3D true;
      try {
        // if there is still words
        if (!termEnum.next()) {
          actualTerm =3D null;
          return false;
       }
       //  if the next word are in the field
      actualTerm =3D termEnum.term();
      String fieldt =3D actualTerm.field();
      if (fieldt !=3D field) {
         actualTerm =3D null;
         return false;
      }
      return true;
    } catch (IOException ex) {
      ex.printStackTrace();
      return false;
    }
}

=20
=20
=20
=20
public class SpellIndexer {
=20
 private Directory indexMainDirectory;
 private Directory indexSpellDirectory;
 private String spellField;
=20
 public SpellIndexer(String spellField,
      String indexMainDirectoryStr,
      String indexSpellDirectoryStr) throws IOException{
  this.spellField =3D spellField;
  this.indexMainDirectory =3D =
FSDirectory.getDirectory(indexMainDirectoryStr,false);
  this.indexSpellDirectory =3D =
FSDirectory.getDirectory(indexSpellDirectoryStr,true);
 }
=20
=20
 public boolean rebuildSpellIndex(File indexDir) throws IOException {
        Directory indexSpellDir =3D indexDir =3D=3D null ? =
indexSpellDirectory : FSDirectory.getDirectory(indexDir,true);
        IndexReader indexReader =3D null;
        boolean success =3D false;
        try {
            indexReader =3D IndexReader.open(indexMainDirectory);
            Dictionary dictionary =3D new LuceneDictionary(indexReader, =
spellField.intern());  // <---------------- Doesn't work with spellField =
directly
            SpellChecker spellChecker =3D new =
SpellChecker(indexSpellDir);
            spellChecker.indexDictionary(dictionary);
            success =3D true;
        } finally {
            if (indexReader !=3D null) {
                indexReader.close();
            }
        }
        return success;
    }
}


------_=_NextPart_001_01C6EC4C.32325C8E--

From java-user-return-23919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 10:23:18 2006
Return-Path: <java-user-return-23919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61542 invoked from network); 10 Oct 2006 10:23:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 10:23:18 -0000
Received: (qmail 41251 invoked by uid 500); 10 Oct 2006 10:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41218 invoked by uid 500); 10 Oct 2006 10:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41207 invoked by uid 99); 10 Oct 2006 10:23:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 03:23:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of supriya.shyamal@artnology.com designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 03:23:08 -0700
Received: (qmail 11896 invoked from network); 10 Oct 2006 10:22:46 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]846468@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 10 Oct 2006 10:22:46 -0000
Message-ID: <452B7475.4000003@artnology.com>
Date: Tue, 10 Oct 2006 12:22:45 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: What is the advantage of setting using compund file to false
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello All,

I have question regarding the use of Compound file fo rindex, what is 
the advantage & disadvantage of enabling use of compound file(which is 
default I think) or disabling the useo of it.

Thanks,
supriya

-- 
Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 10:56:47 2006
Return-Path: <java-user-return-23920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77428 invoked from network); 10 Oct 2006 10:56:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 10:56:46 -0000
Received: (qmail 97401 invoked by uid 500); 10 Oct 2006 10:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96470 invoked by uid 500); 10 Oct 2006 10:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96459 invoked by uid 99); 10 Oct 2006 10:56:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 03:56:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 03:56:39 -0700
Received: by ug-out-1314.google.com with SMTP id k40so756202ugc
        for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 03:56:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TCPvUWnqMG6DEiyccJPGGuJ4/BDJVMPbOEUMtC2yhdThgrdLLJjuRhS9B8YceTS7ii3uTHjFr9j+MGfnMinjd6kZQt3IFUF6fW0XgO2yGQDKZ0WdY0+Qgpp6aiJT+69X9o2/zjnTgMaTX9qr6TPno2qgYk1OCvz+aQVUNCqzUro=
Received: by 10.66.255.7 with SMTP id c7mr332480ugi;
        Tue, 10 Oct 2006 03:56:17 -0700 (PDT)
Received: by 10.67.22.3 with HTTP; Tue, 10 Oct 2006 03:56:17 -0700 (PDT)
Message-ID: <f18c9dde0610100356k1a7498fei7122f2bba7f4a667@mail.gmail.com>
Date: Tue, 10 Oct 2006 12:56:17 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: What is the advantage of setting using compund file to false
In-Reply-To: <452B7475.4000003@artnology.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <452B7475.4000003@artnology.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGksCgpJbiBMdWNlbmUgdGhlcmUgYXJlIHR3byB0eXBlcyBvZiBpbmRleCBzdHJ1Y3R1cmUgIGNv
bXBvdW5kIGluZGV4IGFuZAptdWx0aS1maWxlIGluZGV4LiBJbiBtdWx0aS1maWxlIGluZGV4LCB3
aGVuIG5ldyBkb2N1bWVudHMgYXJlIGluc2VydGVkCnRvIGFuIGluZGV4LCB0aGV5IGFyZSBzdG9y
ZWQgaW4gYSBzZXBhcmF0ZSBzZWdtZW50OyB0aGlzIGNhdXNlcwppbmNyZWFzZSBvZiBmaWxlcyBp
biBhbiBpbmRleCBzdHJ1Y3R1cmUuIFRoZXJlZm9yZSwgbXVsdGktZmlsZSBpbmRleApoYXMgbW9y
ZSBmaWxlcyB0aGFuIGNvbXBvdW5kIGluZGV4LgpDb21wb3VuZCBpbmRleCB0eXBlIGNvbnNpc3Rz
IG9mIHRocmVlIGZpbGVzOyB0d28gb2YgdGhlbSBhcmUKImRlbGV0YWJsZSIgZmlsZSB0aGF0IHNo
b3dzIHRoZSB1bnVzZWQgZmlsZXMgaW4gaW5kZXggYW5kICJzZWdtZW50cyIKZmlsZSB0aGF0IHNo
b3dzIHRoZSBzZWdtZW50IG5hbWVzIGFuZCB0aGVpciBzaXplLiBUaGUgdGhpcmQgb25lCmNvbnRh
aW5zIHRoZSBhbGwgaW5kZXhlZCBkb2N1bWVudHMgYW5kIHRoZWlyIGZpZWxkIHZhbHVlcy4gSW4g
Y29tcG91bmQKaW5kZXggYWxsIGluZGV4ZWQgZmlsZXMgYXJlIG1lcmdlZCBpbnRvIG9uZSBzaW5n
bGUgZmlsZS4gU28sIHRoZQpudW1iZXIgb2YgZmlsZXMgaW4gdGhlIGluZGV4IGlzIG1pbmltaXpl
ZC4KVGhlIGFkdmFudGFnZSBvZiBtdWx0aS1maWxlIGlzIHRoZSB0aW1lIGZvciBpbmRleGluZyBk
b2N1bWVudHMgdGFrZXMKbGVzcyB0aGFuIGNvbXBvdW5kIGZpbGUuIEJlY2F1c2UsIGluIGNvbXBv
dW5kIGZpbGUgdGhlIGluZGV4ZWQgZmlsZXMKYXJlIGluIGFkZGl0aW9uIG1lcmdlZCBpbnRvIG9u
ZSBzaW5nbGUgZmlsZS4gVGhpcyBjYW4gYmUgc3VpdGFibGUgd2hlbgp0aGUgbnVtYmVyIG9mIGRv
Y3VtZW50cyBpcyBsYXJnZSB3aGlsZSBpbmRleGluZy4KT24gdGhlIG90aGVyIGhhbmQsIHRoZSBh
ZHZhbnRhZ2Ugb2YgY29tcG91bmQgZmlsZSBhcHBlYXJzIGluCnNlYXJjaGluZy4gQmVjYXVzZSwg
dGhlIHRvdGFsIG51bWJlciBvZiBmaWxlIGFjY2Vzc2VzIGZvciByZWFkaW5nIGRhdGEKYXJlIG1p
bmltdW0gaW4gY29tcG91bmQgaW5kZXguIEluIGNvbnRyYXN0LCB1c2luZyBtdWx0aS1maWxlIGlu
ZGV4IHRoZQpmaWxlIGZldGNoZXMgaW5jcmVhc2UgYmVjYXVzZSB0aGUgcHJvZ3JhbSBuZWVkcyB0
byBvcGVuIG1vcmUgZmlsZXMgaW4Kb3JkZXIgdG8gcmV0cmlldmUgcmVxdWlyZWQgZG9jdW1lbnRz
IGZyb20gdGhlIGluZGV4LiBUaGlzIGlzIGltcG9ydGFudAp3aGlsZSBzZWFyY2ggdGltZSBpbiBh
biBhcHBsaWNhdGlvbiBpcyBpbiBjb25zaWRlcmF0aW9uLgoKSSBkbyBwcmVmZXIgdG8gdXNlIGNv
bXBvdW5kRmlsZSh0cnVlKSBhcyBJIHdvcmsgb24gdW5peCBwbGF0Zm9ybXMKb3RoZXJ3aXNlIHlv
dSB3aWxsIGVuZCB1cCB3aXRoICJ0b28gbWFueSBvcGVuIGZpbGVzIiB2ZXJ5IG9mdGVuIQoKYmVz
dCByZWdhcmRzIFNpbW9uCgpidHc6IG5pY2UgdG8gc2VlIGFub3RoZXIgcGVyc29uIGZyb20gQmVy
bGluIG9uIHRoZSBsaXN0IQoKLS0tLS0tLS0tLS0KCm1haWx0bzogc2ltb253QGFwYWNoZS5vcmcK
Ck9uIDEwLzEwLzA2LCBTdXByaXlhIEt1bWFyIFNoeWFtYWwgPHN1cHJpeWEuc2h5YW1hbEBhcnRu
b2xvZ3kuY29tPiB3cm90ZToKPiBIZWxsbyBBbGwsCj4KPiBJIGhhdmUgcXVlc3Rpb24gcmVnYXJk
aW5nIHRoZSB1c2Ugb2YgQ29tcG91bmQgZmlsZSBmbyByaW5kZXgsIHdoYXQgaXMKPiB0aGUgYWR2
YW50YWdlICYgZGlzYWR2YW50YWdlIG9mIGVuYWJsaW5nIHVzZSBvZiBjb21wb3VuZCBmaWxlKHdo
aWNoIGlzCj4gZGVmYXVsdCBJIHRoaW5rKSBvciBkaXNhYmxpbmcgdGhlIHVzZW8gb2YgaXQuCj4K
PiBUaGFua3MsCj4gc3Vwcml5YQo+Cj4gLS0KPiBNaXQgZnJldW5kbGljaGVuIEdyw7zDn2VuIC8g
UmVnYXJkcwo+Cj4gU3Vwcml5YSBLdW1hciBTaHlhbWFsCj4KPiBTb2Z0d2FyZSBEZXZlbG9wZXIK
PiB0ZWwgKzQ5ICgzMCkgNDQzIDUwIDk5IC0yMgo+IGZheCArNDkgKDMwKSA0NDMgNTAgOTkgLTk5
Cj4gZW1haWwgc3Vwcml5YS5zaHlhbWFsQGFydG5vbG9neS5jb20KPiBfX19fX19fX19fX19fX19f
X19fX19fX19fX18KPiBhcnRub2xvZ3kgR21iSAo+IE1pbGFzdHIuIDQKPiAxMDQzNyBCZXJsaW4K
PiBfX19fX19fX19fX19fX19fX19fX19fX19fX18KPgo+IGh0dHA6Ly93d3cuYXJ0bm9sb2d5LmNv
bQo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fCj4KPiAgTmV3cyAvIEFrdHVlbGxlIFByb2pla3RlOgo+ICAq
IGFydG5vbG9neSBnZXdpbm50IEF1c3NjaHJlaWJ1bmcgZGVzIEJ1bmRlc21pbmlzdGVyaXVtcyBk
ZXMgSW5uZXJuOgo+ICAgIFNvZnR3YXJlbMO2c3VuZyBmw7xyIGRpZSBWZXJ3YWx0dW5nIGRlciBT
YW1tbHVuZyB6ZWl0Z2Vuw7Zzc2lzY2hlcgo+ICAgIEt1bnN0d2Vya2UgenVyIGt1bHR1cmVsbGVu
IFJlcHLDpHNlbnRhdGlvbiBkZXMgQnVuZGVzLgo+Cj4gIFByb2pla3RyZWZlcmVuemVuOgo+ICAq
IEdsb2JhbGVyIGVTaG9wIHVuZCBDb3Jwb3JhdGUtU2l0ZSBmw7xyIFNwcmluZ2VyOiB3d3cuc3By
aW5nZXJvbmxpbmUuY29tCj4gICogRS1EZXRhaWxpbmctUG9ydGFsIGbDvHIgTm92YXJ0aXM6IHd3
dy5pbnRlcmFrdGl2Lm5vdmFydGlzLmRlCj4gICogU2VydmljZS1DZW50ZXItUGxhdHRmb3JtIGbD
vHIgQmlvZ2VuOiB3d3cubXMtbGlmZS5kZQo+ICAqIGVDUk0tU3lzdGVtIGbDvHIgR3LDvG5lbnRo
YWw6IHd3dy5ncnVlbmVudGhhbC5jb20KPgo+IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+Cj4KPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVA
bHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K


From java-user-return-23921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 11:03:48 2006
Return-Path: <java-user-return-23921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80130 invoked from network); 10 Oct 2006 11:03:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 11:03:48 -0000
Received: (qmail 11590 invoked by uid 500); 10 Oct 2006 11:03:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11559 invoked by uid 500); 10 Oct 2006 11:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11548 invoked by uid 99); 10 Oct 2006 11:03:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 04:03:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of supriya.shyamal@artnology.com designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 04:03:40 -0700
Received: (qmail 17168 invoked from network); 10 Oct 2006 11:03:17 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]846468@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 10 Oct 2006 11:03:17 -0000
Message-ID: <452B7DF3.4040600@artnology.com>
Date: Tue, 10 Oct 2006 13:03:15 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: What is the advantage of setting using compund file to false
References: <452B7475.4000003@artnology.com> <f18c9dde0610100356k1a7498fei7122f2bba7f4a667@mail.gmail.com>
In-Reply-To: <f18c9dde0610100356k1a7498fei7122f2bba7f4a667@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Simon,

Thanks for your very good detailed explanation, it really cleared my 
doubts.

Thanks once again,

Regards
supriya

Simon Willnauer wrote:
> Hi,
>
> In Lucene there are two types of index structure  compound index and
> multi-file index. In multi-file index, when new documents are inserted
> to an index, they are stored in a separate segment; this causes
> increase of files in an index structure. Therefore, multi-file index
> has more files than compound index.
> Compound index type consists of three files; two of them are
> "deletable" file that shows the unused files in index and "segments"
> file that shows the segment names and their size. The third one
> contains the all indexed documents and their field values. In compound
> index all indexed files are merged into one single file. So, the
> number of files in the index is minimized.
> The advantage of multi-file is the time for indexing documents takes
> less than compound file. Because, in compound file the indexed files
> are in addition merged into one single file. This can be suitable when
> the number of documents is large while indexing.
> On the other hand, the advantage of compound file appears in
> searching. Because, the total number of file accesses for reading data
> are minimum in compound index. In contrast, using multi-file index the
> file fetches increase because the program needs to open more files in
> order to retrieve required documents from the index. This is important
> while search time in an application is in consideration.
>
> I do prefer to use compoundFile(true) as I work on unix platforms
> otherwise you will end up with "too many open files" very often!
>
> best regards Simon
>
> btw: nice to see another person from Berlin on the list!
>
> -----------
>
> mailto: simonw@apache.org
>
> On 10/10/06, Supriya Kumar Shyamal <supriya.shyamal@artnology.com> wrote:
>> Hello All,
>>
>> I have question regarding the use of Compound file fo rindex, what is
>> the advantage & disadvantage of enabling use of compound file(which is
>> default I think) or disabling the useo of it.
>>
>> Thanks,
>> supriya
>>
>> -- 
>> Mit freundlichen Gren / Regards
>>
>> Supriya Kumar Shyamal
>>
>> Software Developer
>> tel +49 (30) 443 50 99 -22
>> fax +49 (30) 443 50 99 -99
>> email supriya.shyamal@artnology.com
>> ___________________________
>> artnology GmbH
>> Milastr. 4
>> 10437 Berlin
>> ___________________________
>>
>> http://www.artnology.com
>> __________________________________________________________________________ 
>>
>>
>>  News / Aktuelle Projekte:
>>  * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
>>    Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
>>    Kunstwerke zur kulturellen Reprsentation des Bundes.
>>
>>  Projektreferenzen:
>>  * Globaler eShop und Corporate-Site fr Springer: 
>> www.springeronline.com
>>  * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
>>  * Service-Center-Plattform fr Biogen: www.ms-life.de
>>  * eCRM-System fr Grnenthal: www.gruenenthal.com
>>
>> ___________________________________________________________________________ 
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


-- 
Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 11:06:37 2006
Return-Path: <java-user-return-23922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80573 invoked from network); 10 Oct 2006 11:06:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 11:06:37 -0000
Received: (qmail 13922 invoked by uid 500); 10 Oct 2006 11:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13891 invoked by uid 500); 10 Oct 2006 11:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13880 invoked by uid 99); 10 Oct 2006 11:06:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 04:06:30 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [130.88.94.110] (HELO gannet.scg.man.ac.uk) (130.88.94.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 04:06:29 -0700
Received: from gomwe.mcc.ac.uk ([10.2.18.2])
	by gannet.scg.man.ac.uk with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GXFR0-000McW-Rr
	for java-user@lucene.apache.org; Tue, 10 Oct 2006 12:06:06 +0100
Received: from cspool34.cs.man.ac.uk ([130.88.195.134]:2860)
	by gomwe.mcc.ac.uk with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.60 (FreeBSD))
	(envelope-from <qamar_rahil@yahoo.co.uk>)
	id 1GXFR0-0008x6-F1
	for java-user@lucene.apache.org; Tue, 10 Oct 2006 12:06:06 +0100
Message-ID: <452B7E9B.6040800@yahoo.co.uk>
Date: Tue, 10 Oct 2006 12:06:03 +0100
From: Rahil <qamar_rahil@yahoo.co.uk>
Reply-To:  qamar_rahil@yahoo.co.uk
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.13) Gecko/20060414
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performing a like query
References: <451FAEF8.2000300@yahoo.co.uk>	 <359a92830610010452k6a7f0fdao295a4217d37219b1@mail.gmail.com>	 <452045A4.8000501@yahoo.co.uk>	 <359a92830610011652o5936b0c4y8466be8aa7f98570@mail.gmail.com>	 <452662B5.8000905@yahoo.co.uk> <359a92830610060924n5e8c0923odcd5116b871ab0be@mail.gmail.com>
In-Reply-To: <359a92830610060924n5e8c0923odcd5116b871ab0be@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated-Sender: Rahil Qamar from cspool34.cs.man.ac.uk [130.88.195.134]:2860
X-Authenticated-From: R.Qamar@postgrad.manchester.ac.uk
X-UoM: Scanned by the University Mail System. See http://www.itservices.manchester.ac.uk/email/filtering/information/ for details.
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erick

I think you've made some really important observations. Steven has 
provided a good regular expression to help with word and non-words. For 
the moment I have reverted to my analyser and am going to try doing some 
clever pattern matching later. Also, Ill try using a different analyser 
for indexing and querying and see whether that makes a difference.

Im determined to sort this out but time constraints mean I cant give it 
too much time! :)

Thanks again for the insight
Rahil

Erick Erickson wrote:

> My intuition is that you'll have a real problem using regular 
> expressions.
> It'll either be incredibly ugly (and unmaintainable) or just won't work
> since the regular expression tools tend to throw out the delimiters.
>
> I think you'll be much better off writing your own analyzer (see LIA, the
> synonym injector code for a model, although you probably won't want 
> the gap
> to be 0). The analyzer will just march down the string, and return the 
> first
> part of the line up to the delimiter. And return the delimiter if 
> that's the
> first thing in the line. Logically, it looks kinda like this:
>
> 1st call: returns R, preserves the rest (/E - visual acuity R-eye=6/24)
> 2nd call. recognizes that the line starts with a delimiter and returns 
> that,
> preserving (E - visual acuity R-eye=6/24)
> & etc.
>
>
> The only real question is whether you really want to preserve the 
> delimiters
> or whether that's unnecessary. Remember that if you use the same 
> analyzer in
> both indexing and querying (with a few subtlties), you get the same token
> stream. Whether that works for you depends upon whether the delimiters 
> hold
> information, and their presence/absence alters the meaning of the field.
>
> Not a huge help, but all I can come up with.
>
> Good luck
> Erick
>
> On 10/6/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>
>>
>> Hi Erick
>>
>> Im having trouble with writing a good regular expression for the
>> PatternAnalyzer to deal with word and non-word characters.I couldnt
>> figure out a valid regular expression to write a valid
>> Pattern.compile(String regex) which can tokenise a string into "O/E -
>> visual acuity R-eye=6/24" into "O","/","E", "-", "visual", "acuity",
>> "R", "-", "eye", "=", "6", "/", "24". Ive given it quite a few shots but
>> am now totally frustrated with it. I can either tokenise at \W+ or \w+
>> but not both.
>>
>> Could you please help.
>>
>> Thanks a lot. Much appreciate it.
>>
>> Regards
>> Rahil
>>
>> Erick Erickson wrote:
>>
>> > Well, I'm not the greatest expert, but a quick look doesn't show me
>> > anything
>> > obvious. But I have to ask, wouldn't WhiteSpaceAnalyzer work for you?
>> > Although I don't remember whether WhiteSpaceAnalyzer lowercases or 
>> not.
>> >
>> > It sure looks like you're getting reasonable results given how you're
>> > tokenizing.
>> >
>> > If not that, you might want to think about PatternAnalyzer. It's in 
>> the
>> > memory contribution section, see import
>> > org.apache.lucene.index.memory.PatternAnalyzer. One note of 
>> caution, the
>> > regex identifies what is NOT a token, rather than what is. This threw
>> > me for
>> > a bit.
>> >
>> > I still claim that you could break the tokens up like "6", "/", "12",
>> and
>> > make SpanNearQuery work with a span of 0 (or 1, I don't remember right
>> > now),
>> > but that may well be more trouble than it's worth, it's up to you of
>> > course.
>> > What you get out of this is, essentially, is a query that's only
>> > satisfied
>> > if the terms you specify are right next to each other. So you'd find
>> both
>> > your documents in your example, since you would have tokenized "6", 
>> "/",
>> > "12" in, say positions 0, 1, 2 in doc1 and 4, 5, 6 in the second doc.
>> But
>> > since they're tokens that are next to each other in each doc,
>> > searching with
>> > a SpanNearQuery for "6", "/", and "12" that are "right next to each
>> > other",
>> > which you specify with a slop of 0 as I remember you should get both.
>> >
>> > Alternatively, if you tokenize it this way, a PhraseQuery might 
>> work as
>> > well, Thus, searching for "6 / 12" (as a phrase query and note the
>> > spaces)
>> > might be just what you want. You'd have to tokenize the query, but
>> that's
>> > relatively easy. This is probably much simpler than a SpanNearQuery
>> > now that
>> > I think about it.....
>> >
>> > Be aware that if you use the *TermEnums we've been talking about, 
>> you'll
>> > probably wind up wrapping them in a ConstantScoreQuery. And if you
>> > have no
>> > *other* terms, you won't get any relevancy out of your search. This
>> > may be
>> > important.....
>> >
>> > Anyway, that's as creative as I can be Sunday night <G>. Best of
>> luck....
>> >
>> > Erick
>> >
>> > On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>> >
>> >>
>> >> Hi Erick
>> >>
>> >> Thanks for your response. There's a lot to chew on in your reply 
>> and Im
>> >> looking at the suggestions you've made.
>> >>
>> >> Yeah I have Luke installed and have queried my index but there isn't
>> any
>> >> great explanation Im getting out of it.  A query for "6/12" is 
>> sent as
>> >> "TERM:6/12" which is quite straight-forward. I did an explanation of
>> the
>> >> query in my code though and got some more information but that too
>> >> wasn't of much help either.
>> >> --
>> >> Explanation explain = searcher.explain(query,0);
>> >>
>> >> OUTPUT:
>> >> query: +TERM:6/12
>> >> explain.getDescription() : weight(TERM:6/12 in 0), product of:
>> >> Detail 0 : 0.99999994 = queryWeight(TERM:6/12), product of:
>> >>   2.0986123 = idf(docFreq=1)
>> >>   0.47650534 = queryNorm
>> >>
>> >> Detail 1 : 0.0 = fieldWeight(TERM:6/12 in 0), product of:
>> >>   0.0 = tf(termFreq(TERM:6/12)=0)
>> >>   2.0986123 = idf(docFreq=1)
>> >>   0.5 = fieldNorm(field=TERM, doc=0)
>> >>
>> >> Number of results returned: 1
>> >> SampleLucene.displayIndexResults
>> >> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>> >> 1.0    0    260278007    6/12 (finding)
>> >> --
>> >>
>> >> My tokeniser called BaseAnalyzer extends Analyzer. Since I wanted to
>> >> retain all non whitespace characters and not just letters and 
>> digits, I
>> >> introduced the following block of code in the overridden 
>> tokenStream( )
>> >>
>> >> --
>> >> public TokenStream tokenStream(String fieldName, Reader reader) {
>> >>
>> >>         return new CharTokenizer(reader) {
>> >>
>> >>             protected char normalize(char c) {
>> >>                      return Character.toLowerCase(c);
>> >>             }
>> >>                 protected boolean isTokenChar(char c) {
>> >>                        boolean type = false;
>> >>                        boolean space =   Character.isWhitespace(c);
>> >>                        boolean letDig =  
>> Character.isLetterOrDigit(c);
>> >>
>> >>                         if(letDig && !space) //letter or digit but 
>> not
>> >> whitespace
>> >>                             type = true;
>> >>                         else if(!letDig && !space)   //not 
>> letter,digit
>> >> or whitespace (retain non-whitespace characters)
>> >>                             type = true;
>> >>                         else if( !letDig && space)              //is
>> not
>> >> a letter or digit but is a whitespace
>> >>                             type = false;
>> >>                 return type;
>> >>             }
>> >>         };
>> >>       }
>> >>
>> >> ---
>> >> The problem is that when the term "6/12 (finding)" is tokenised, two
>> >> tokens are generated viz. '6/12' and '(finding)'. Therefore when I
>> >> search for '6/12' this term is returned as in a way it is an EXACT
>> token
>> >> match.
>> >>
>> >> However when the term "R-eye=6/12 (finding)" is tokenised it again
>> >> results in two tokens viz. 'R-eye=6/12' and '(finding)'. So now if I
>> >> look for '6/12' its no more an exact match since there is no token 
>> with
>> >> this EXACT value. A simple searcher.search(query) isnt useful to pull
>> >> out the partial token match.
>> >>
>> >> I think it wont be useful to create separate tokens for "6", "/", 
>> "12"
>> >> or "R","-","eye","=", and so on. Im having a look at the 
>> RegexTermEnum
>> >> and WildcardTermEnum as they might possibily help.
>> >>
>> >> Would appreciate your comments on the BaseAnalyzer tokenizer and 
>> query
>> >> explanation Ive received so far.
>> >>
>> >> Thanks
>> >> Rahil
>> >>
>> >> Erick Erickson wrote:
>> >>
>> >> > Most often, from what I've seen on this e-mail list, unexpected
>> >> > results are
>> >> > because you're not indexing on the tokens you *think* you're
>> indexing.
>> >> Or
>> >> > not searching on them. By that I mean that the analyzers you're 
>> using
>> >> are
>> >> > behaving in ways you don't expect.
>> >> >
>> >> > That said, I think you're getting exactly what you should. I 
>> suspect
>> >> > you're
>> >> > indexing tokens as follows
>> >> > doc1: "6/12"  and "(finding)"
>> >> > doc2: "R-eye=6/12" and "(finding)"
>> >> >
>> >> > So it makes perfect sense that searching in 6/12 returns doc1 and
>> >> > search on
>> >> > R-eye=6/12 returns doc 2
>> >> >
>> >> > So, first question: Have you actually used something like Luke
>> (google
>> >> > luke
>> >> > lucene) to examine your index and see if what you've put in 
>> there is
>> >> what
>> >> > you expect? What analyzer is your custom analyzer built upon and is
>> it
>> >> > doing
>> >> > anything you're unaware of (for instance, lower-casing the 'R' in
>> your
>> >> > second example)?
>> >> >
>> >> > Here's what I'd do.
>> >> > 1> get Luke and see what's actually in your index.
>> >> > 2> use searcher.explain (?) to see the query you're actually
>> emitting.
>> >> > 3> if you make no headway, post the smallest code snippets you can
>> >> that
>> >> > illustrate the problem. Folks would need the indexing AND searching
>> >> code.
>> >> >
>> >> > As far as queryies like "contains" in java.... Well sure. Write a
>> >> filter
>> >> > that filters on regular expressions or wildcards (you'll need
>> >> > WildcardTermEnum and RegexTermEnum). Or index things differently 
>> (e.g
>> .
>> >> > index
>> >> > "6/12" and "finding" on doc1 and "r". "eye" "6/12" and "finding" on
>> >> > doc 2.
>> >> > Now your searches for "6/12" will work. Or index "6" "/", "12" and
>> >> > "finding"
>> >> > on doc1, index similarly for doc2, and use a SpanNearQuery with an
>> >> > appropriate span value. Or....
>> >> >
>> >> > This is all gobbldeygook if you haven't gotten a copy of "Lucene In
>> >> > Action",
>> >> > which you should read in order to get the most out of Lucene. It's
>> for
>> >> > the
>> >> > 1.4 code base, but the 2.0 Lucene code base isn't that much
>> different.
>> >> > More
>> >> > importantly, it ties lots of stuff together. Also, the junit tests
>> >> > that come
>> >> > along with the Lucene code can be invaluable to show you how to do
>> >> > something.
>> >> >
>> >> > Hope this helps
>> >> > Erick
>> >> >
>> >> > On 10/1/06, Rahil <qamar_rahil@yahoo.co.uk> wrote:
>> >> >
>> >> >>
>> >> >> Hi
>> >> >>
>> >> >> I have a custom-built Analyzer where I tokenize all non-whitespace
>> >> >> characters as well available in the field "TERM" (which is the 
>> only
>> >> >> field being tokenised).
>> >> >>
>> >> >> If I now query my index file for a term "6/12" for instance, I get
>> >> back
>> >> >> only ONE result
>> >> >>
>> >> >> SCORE    DESCRIPTIONSTATUS    CONCEPTID    TERM
>> >> >> 1.0    0    260278007    6/12 (finding)
>> >> >>
>> >> >> instead of TWO. There is another token in the index file of the 
>> form
>> >> >>
>> >> >> 2561280012    0    163939000    R-eye=6/12 (finding)    0    
>> 3    en
>> >> >>
>> >> >> At first it wasn't quite obvious to me why this was happening. But
>> >> after
>> >> >> playing around a bit I realised that if I pass a query 
>> "R-eye=6/12"
>> >> >> instead, I will get this second result (but not the first one
>> >> now). Is
>> >> >> there a way to tweak the  Query query = parser.parse(searchString)
>> >> >> method so that I can get both the records if I query for "6/12".
>> >> >> Something like a 'contains' query in Java.
>> >> >>
>> >> >> Will appreciate all help. Thanks a lot
>> >> >>
>> >> >> Regards
>> >> >> Rahil
>> >> >>
>> >> >>
>> >> >>
>> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 15:22:58 2006
Return-Path: <java-user-return-23923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63666 invoked from network); 10 Oct 2006 15:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 15:22:58 -0000
Received: (qmail 94471 invoked by uid 500); 10 Oct 2006 15:22:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94445 invoked by uid 500); 10 Oct 2006 15:22:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94433 invoked by uid 500); 10 Oct 2006 15:22:51 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 94430 invoked by uid 99); 10 Oct 2006 15:22:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 08:22:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [82.66.241.117] (HELO core-techs.fr) (82.66.241.117)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 08:22:49 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
Subject: Query suggestion
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6EC7F.BA9137DE"
Date: Tue, 10 Oct 2006 17:20:45 +0200
Message-ID: <89B91E1E3835B3478FFE134A6C448E56040CF2@olympe.core-techs.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query suggestion
thread-index: AcbsdD2LXR5xeqEWQV+Vpwsi8p/A8gAC2qhz
From: "Louis Sicard" <lsicard@core-techs.fr>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6EC7F.BA9137DE
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am designing a search engine based on Lucene 2.0 and I would like to =
add a specific feature to help users in their search by suggesting them =
a number of queries related to their seach. e. g. user searches for =
"Java" and we will suggest him "Building web applications in Java" and =
"SOAP technology and Java" and "Visit the Java island".

Do you know any solutions that would already exist? Otherwise do you =
have any idea about designing such a feature?

Thank you!

Louis Sicard


------_=_NextPart_001_01C6EC7F.BA9137DE--

From java-user-return-23924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 18:13:51 2006
Return-Path: <java-user-return-23924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41874 invoked from network); 10 Oct 2006 18:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 18:13:51 -0000
Received: (qmail 61623 invoked by uid 500); 10 Oct 2006 18:13:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60748 invoked by uid 500); 10 Oct 2006 18:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60737 invoked by uid 500); 10 Oct 2006 18:13:43 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 60734 invoked by uid 99); 10 Oct 2006 18:13:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:13:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sp0065@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:13:43 -0700
Received: by py-out-1112.google.com with SMTP id d80so2827519pyd
        for <lucene-user@jakarta.apache.org>; Tue, 10 Oct 2006 11:13:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=bck7weCf7ryvAtJ2Fpx2OajjxSNFwnL4wh4nF2WszvoucxVJHR6IunuU3JUoR8qUcyM9Aj25A6YA1IwEgmeJ2H6iXRSPh+z9KZeZuSZZHg0ind0G43N7c533vzfMNfPj1hXtR57XZxxxKwhoAY7Ias8EvfNglri7ekJRwu3oG9M=
Received: by 10.35.135.12 with SMTP id m12mr15816463pyn;
        Tue, 10 Oct 2006 11:13:21 -0700 (PDT)
Received: by 10.35.125.19 with HTTP; Tue, 10 Oct 2006 11:13:21 -0700 (PDT)
Message-ID: <e2b4bf8d0610101113o5db2029eg5d8422bba11bff63@mail.gmail.com>
Date: Tue, 10 Oct 2006 13:13:21 -0500
From: "Serhiy Polyakov" <sp0065@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Lucene in Action examples complie problem
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I started to study Lucene following the book Lucene in Action.

I am trying to compile book examples downloaded from the book site:
http://www.manning.com/hatcher2/

When I am trying to compile first example (Indexer.java) it gives me
the following error:

LuceneInAction\src\lia\meetlucene\Indexer.java:80: cannot find symbol
symbol  : method Text(java.lang.String,java.io.FileReader)
location: class org.apache.lucene.document.Field
    doc.add(Field.Text("contents", new FileReader(f)));

I know that file lucene-core-2.0.0.jar is in CLASSPATH and other classes like
org.apache.lucene.index.IndexWriter are working OK. The only class I
am having problem with is org.apache.lucene.document.Field;

Can you suggest something?

Thanks,
Serhiy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 18:24:15 2006
Return-Path: <java-user-return-23925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47270 invoked from network); 10 Oct 2006 18:24:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 18:24:14 -0000
Received: (qmail 77322 invoked by uid 500); 10 Oct 2006 18:24:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77301 invoked by uid 500); 10 Oct 2006 18:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77290 invoked by uid 99); 10 Oct 2006 18:24:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:24:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of nick.mailinglists@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:24:06 -0700
Received: by wx-out-0506.google.com with SMTP id s15so1785488wxc
        for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 11:23:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=WkpXt0GegGlhSY2PQm5HwplNkuccBiXUvDP6Sqm1xWKyxLtEGz70XDD+RO/1gU40vRIBIZKmFF2SYqn8u1SEeZleNzErO8j/5Q+XUdHsLtG55l1eGlU/WVaNaExn68zVFcb5ZAOTbiAxlSSvLksmJ/s6Q+CzTMDRxYmXL/PgeF0=
Received: by 10.90.115.9 with SMTP id n9mr3912883agc;
        Tue, 10 Oct 2006 11:23:46 -0700 (PDT)
Received: from ?9.30.52.13? ( [129.42.184.35])
        by mx.google.com with ESMTP id 12sm972230wrl.2006.10.10.11.23.44;
        Tue, 10 Oct 2006 11:23:45 -0700 (PDT)
Message-ID: <452BE513.5010904@gmail.com>
Date: Tue, 10 Oct 2006 11:23:15 -0700
From: Nick Puz <nick.mailinglists@gmail.com>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: corrupt index: .fdx and stored norms
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am working on the development of a product that is using Lucene. A
corrupt index was reported by testers and it is in an odd state.
The indexes are built in batches (to multiple ram indexes in parallel)
and then eventually merged into a disk index with
IndexWriter.addIndexes(Directory[]).
Somehow the index got corrupted, there were no indications of a crash or
errors in log. The failure in SegmentMerger.mergeNorms:
   private void mergeNorms() throws IOException {
     for (int i = 0; i < fieldInfos.size(); i++) {
       FieldInfo fi = fieldInfos.fieldInfo(i);
       if (fi.isIndexed && !fi.omitNorms) {
         IndexOutput output = directory.createOutput(segment + ".f" + i);
         try {
           for (int j = 0; j < readers.size(); j++) {
             IndexReader reader = (IndexReader) readers.elementAt(j);
             int maxDoc = reader.maxDoc();
             byte[] input = new byte[maxDoc];
             reader.norms(fi.name, input, 0);  <==== ERROR HERE
             for (int k = 0; k < maxDoc; k++) {
               if (!reader.isDeleted(k)) {
                 output.writeByte(input[k]);
               }
             }
           }
         } finally {
           output.close();
         }
       }
     }
   }

The problem is that the maxDoc() returned by the indexReader 
(FieldsReader in this case) is larger then the size, in bytes, of the 
norms file. then there is an error in IndexInput.read(byte[], int, int) 
because there is not enough data in file to read.
Here is part of the directory listing (there are many stored fields of 
the same size so omitting all but first 3):

-rw-r--r--  1 icmadmin db2grp1        811 Sep 27 20:48 _a4.fnm
-rw-r--r--  1 icmadmin db2grp1    1451696 Sep 27 20:49 _a4.fdx
-rw-r--r--  1 icmadmin db2grp1   12736304 Sep 27 20:49 _a4.fdt
-rw-r--r--  1 icmadmin db2grp1 5648544509 Sep 27 21:30 _a4.prx
-rw-r--r--  1 icmadmin db2grp1 1695149231 Sep 27 21:30 _a4.frq
-rw-r--r--  1 icmadmin db2grp1   45688880 Sep 27 21:30 _a4.tis
-rw-r--r--  1 icmadmin db2grp1     673588 Sep 27 21:30 _a4.tii
-rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f2
-rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f1
-rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f0

from looking at the code the sizeof(.fdx)/8 should equal sizeof(.f0) but 
it doesn't in this case.

any ideas? Also, I'm wasn't sure if this was more appropriate for dev or 
user so i guessed user.

-Nick
(programmer working @ ibm)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 18:33:53 2006
Return-Path: <java-user-return-23926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49744 invoked from network); 10 Oct 2006 18:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 18:33:52 -0000
Received: (qmail 97597 invoked by uid 500); 10 Oct 2006 18:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97562 invoked by uid 500); 10 Oct 2006 18:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97551 invoked by uid 99); 10 Oct 2006 18:33:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:33:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:33:43 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9AIXLep174212
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 18:33:21 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9AIZf7G2920678
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 20:35:41 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9AIXLkS007810
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 20:33:21 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9AIXLaV007805
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 20:33:21 +0200
In-Reply-To: <f18c9dde0610100356k1a7498fei7122f2bba7f4a667@mail.gmail.com>
Subject: Re: What is the advantage of setting using compund file to false
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF60CCD6D5.345E0204-ON88257203.00622134-88257203.00640D93@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 10 Oct 2006 10:12:50 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/10/2006 20:35:41
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A bit of clarification:
Lucene index is made of multiple "segments".
Compound format: stores each segment in a single file - less files
created/opened.
Not-compound format: stores each segment in multi-files - more files
created/opened.
Not-compound is likely to be faster for indexing.
Optimizing the index (no matter if compound or not) would merge index
segments into one segment - this would also make search faster.

Also see http://lucene.apache.org/java/docs/fileformats.html

"Simon Willnauer" <simon.willnauer@googlemail.com> wrote on 10/10/2006
03:56:17:

> Hi,
>
> In Lucene there are two types of index structure  compound index and
> multi-file index. In multi-file index, when new documents are inserte=
d
> to an index, they are stored in a separate segment; this causes
> increase of files in an index structure. Therefore, multi-file index
> has more files than compound index.
> Compound index type consists of three files; two of them are
> "deletable" file that shows the unused files in index and "segments"
> file that shows the segment names and their size. The third one
> contains the all indexed documents and their field values. In compoun=
d
> index all indexed files are merged into one single file. So, the
> number of files in the index is minimized.
> The advantage of multi-file is the time for indexing documents takes
> less than compound file. Because, in compound file the indexed files
> are in addition merged into one single file. This can be suitable whe=
n
> the number of documents is large while indexing.
> On the other hand, the advantage of compound file appears in
> searching. Because, the total number of file accesses for reading dat=
a
> are minimum in compound index. In contrast, using multi-file index th=
e
> file fetches increase because the program needs to open more files in=

> order to retrieve required documents from the index. This is importan=
t
> while search time in an application is in consideration.
>
> I do prefer to use compoundFile(true) as I work on unix platforms
> otherwise you will end up with "too many open files" very often!
>
> best regards Simon
>
> btw: nice to see another person from Berlin on the list!
>
> -----------
>
> mailto: simonw@apache.org
>
> On 10/10/06, Supriya Kumar Shyamal <supriya.shyamal@artnology.com> wr=
ote:
> > Hello All,
> >
> > I have question regarding the use of Compound file fo rindex, what =
is
> > the advantage & disadvantage of enabling use of compound file(which=
 is
> > default I think) or disabling the useo of it.
> >
> > Thanks,
> > supriya
> >
> > --
> > Mit freundlichen Gr=FC=DFen / Regards
> >
> > Supriya Kumar Shyamal
> >
> > Software Developer
> > tel +49 (30) 443 50 99 -22
> > fax +49 (30) 443 50 99 -99
> > email supriya.shyamal@artnology.com
> > ___________________________
> > artnology GmbH
> > Milastr. 4
> > 10437 Berlin
> > ___________________________
> >
> > http://www.artnology.com
> >
_______________________________________________________________________=
___
> >
> >  News / Aktuelle Projekte:
> >  * artnology gewinnt Ausschreibung des Bundesministeriums des Inner=
n:
> >    Softwarel=F6sung f=FCr die Verwaltung der Sammlung zeitgen=F6ssi=
scher
> >    Kunstwerke zur kulturellen Repr=E4sentation des Bundes.
> >
> >  Projektreferenzen:
> >  * Globaler eShop und Corporate-Site f=FCr Springer:
www.springeronline.com
> >  * E-Detailing-Portal f=FCr Novartis: www.interaktiv.novartis.de
> >  * Service-Center-Plattform f=FCr Biogen: www.ms-life.de
> >  * eCRM-System f=FCr Gr=FCnenthal: www.gruenenthal.com
> >
> >
_______________________________________________________________________=
____
> >
> >
> > -------------------------------------------------------------------=
--
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 18:34:52 2006
Return-Path: <java-user-return-23927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50012 invoked from network); 10 Oct 2006 18:34:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 18:34:52 -0000
Received: (qmail 1169 invoked by uid 500); 10 Oct 2006 18:34:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 933 invoked by uid 500); 10 Oct 2006 18:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 921 invoked by uid 99); 10 Oct 2006 18:34:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:34:45 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 11:34:43 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9AIYMVZ174628
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 18:34:22 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9AIaff13072162
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 20:36:41 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9AIYLML001816
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 20:34:21 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9AIYLYH001813
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 20:34:21 +0200
In-Reply-To: <e2b4bf8d0610101113o5db2029eg5d8422bba11bff63@mail.gmail.com>
Subject: Re: Lucene in Action examples complie problem
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF6BE4A76E.5ECA6424-ON88257203.0064999F-88257203.0065DD67@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 10 Oct 2006 10:32:38 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/10/2006 20:36:41
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Field.Text()  was deprecated in Lucene 1.9 and then removed in 2.0.
The book examples were not updated for 2.0 yet.

You should now use Field(String, String, Field.Store, Field.Index).
To have the same behavior as old Field.Text use: Field(name, value,
Field.Store.YES, Field.Index.TOKENIZED).

For other release issues - see the FAQ entry
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-d09fdfc8a6335eab4e3f3dc8ac41a40a3666318e

Regards,
Doron

"Serhiy Polyakov" <sp0065@gmail.com> wrote on 10/10/2006 11:13:21:

> Hi,
>
> I started to study Lucene following the book Lucene in Action.
>
> I am trying to compile book examples downloaded from the book site:
> http://www.manning.com/hatcher2/
>
> When I am trying to compile first example (Indexer.java) it gives me
> the following error:
>
> LuceneInAction\src\lia\meetlucene\Indexer.java:80: cannot find symbol
> symbol  : method Text(java.lang.String,java.io.FileReader)
> location: class org.apache.lucene.document.Field
>     doc.add(Field.Text("contents", new FileReader(f)));
>
> I know that file lucene-core-2.0.0.jar is in CLASSPATH and other classes
like
> org.apache.lucene.index.IndexWriter are working OK. The only class I
> am having problem with is org.apache.lucene.document.Field;
>
> Can you suggest something?
>
> Thanks,
> Serhiy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 19:06:18 2006
Return-Path: <java-user-return-23928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61820 invoked from network); 10 Oct 2006 19:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 19:06:18 -0000
Received: (qmail 60684 invoked by uid 500); 10 Oct 2006 19:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60654 invoked by uid 500); 10 Oct 2006 19:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60643 invoked by uid 99); 10 Oct 2006 19:06:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:06:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:06:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 37A7530EFC19; Tue, 10 Oct 2006 15:05:49 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 811DA30EFC18
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 15:05:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <e2b4bf8d0610101113o5db2029eg5d8422bba11bff63@mail.gmail.com>
References: <e2b4bf8d0610101113o5db2029eg5d8422bba11bff63@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <59D1B59D-A0C7-497D-BA2C-283EB81C2D92@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene in Action examples complie problem
Date: Tue, 10 Oct 2006 15:05:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have long been meaning to publish an updated codebase for Lucene in  
Action compatible with Lucene 2.0.  I adjusted the code a while ago,  
but I haven't published it yet (and I think the plan is to wait until  
LIA2 is finished to do so).  I did make notes when I made these  
changes, and I'm pasting them below for all to benefit from.


Replace all BooleanQuery.add's, e.g.:

    -      subjectQuery.add(tq, false, false);
    +      subjectQuery.add(tq, BooleanClause.Occur.SHOULD);

Substitute RangeFilter for DateFilter usage, e.g.:

    -    DateFilter filter = new DateFilter("modified", jan1, dec31);
    +    RangeFilter filter = new RangeFilter("modified", jan1,  
dec31, true, true);

    NOTE: The dates are now String's generated by  
DateUtils.dateToString() and incompatible with DateField

Replace all Field.Keyword/UnStored/Text/UnIndexed with the enumerated  
types, e.g.:

    -      doc.add(Field.Keyword("animal", animal));
    +      doc.add(new Field("animal", animal, Field.Store.YES,  
Field.Index.UN_TOKENIZED));


Rename PhrasePrefixQuery -> MultiPhraseQuery

Use instance of QueryParser instead of static parse method, e.g.:

    -        Query query = QueryParser.parse(expression, "contents",  
analyzer);
    +        Query query = new QueryParser("contents", analyzer).parse 
(expression)


QueryParser subclasses adjusted for overridden getXXXQuery method  
signatures.

IndexReader.delete() updated to be  
IndexReader.deleteDocument/.deleteDocuments()

IndexWriter internal configuration values now accessed through  
getters/setters rather than the fields directly, with minMergeDocs  
renamed as setMaxBufferedDocs().

QueryParser.setLowercaseWildcardTerms() replaced  
with .setLowercaseExpandedTerms()

QueryParser.getRangeQuery() still uses DateField when constructing a  
RangeQuery.
   If your index is built using DateTools, you will need to subclass  
and override, as shown in QueryParserTest.testRangeQuery().




On Oct 10, 2006, at 2:13 PM, Serhiy Polyakov wrote:

> Hi,
>
> I started to study Lucene following the book Lucene in Action.
>
> I am trying to compile book examples downloaded from the book site:
> http://www.manning.com/hatcher2/
>
> When I am trying to compile first example (Indexer.java) it gives me
> the following error:
>
> LuceneInAction\src\lia\meetlucene\Indexer.java:80: cannot find symbol
> symbol  : method Text(java.lang.String,java.io.FileReader)
> location: class org.apache.lucene.document.Field
>    doc.add(Field.Text("contents", new FileReader(f)));
>
> I know that file lucene-core-2.0.0.jar is in CLASSPATH and other  
> classes like
> org.apache.lucene.index.IndexWriter are working OK. The only class I
> am having problem with is org.apache.lucene.document.Field;
>
> Can you suggest something?
>
> Thanks,
> Serhiy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 19:24:55 2006
Return-Path: <java-user-return-23929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82826 invoked from network); 10 Oct 2006 19:24:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 19:24:54 -0000
Received: (qmail 8377 invoked by uid 500); 10 Oct 2006 19:24:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8351 invoked by uid 500); 10 Oct 2006 19:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8278 invoked by uid 99); 10 Oct 2006 19:24:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:24:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of nick.mailinglists@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:24:41 -0700
Received: by ug-out-1314.google.com with SMTP id k40so851737ugc
        for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 12:24:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=cz6Llfyrn4ayJEWFDZ5Q9tkHdakT3lcSAFTuk/SDgULPI2x3D7mS9dl8Fy26xlU++fa84pMJDuOUZYRL8OyT7JvfG7TYxC3hA3mb6efnFMPz9Epn/fLymkE5WvB4t0pSNKFXJHTqHgcIIsQYEsmxFLWld/hOoG+4EKKyUxpVrCE=
Received: by 10.78.128.11 with SMTP id a11mr6144748hud;
        Tue, 10 Oct 2006 12:24:19 -0700 (PDT)
Received: by 10.78.166.3 with HTTP; Tue, 10 Oct 2006 12:24:19 -0700 (PDT)
Message-ID: <d1b7bc060610101224h23a6b01bn672862a61df422e0@mail.gmail.com>
Date: Tue, 10 Oct 2006 12:24:19 -0700
From: "NIck P" <nick.mailinglists@gmail.com>
To: java-user@lucene.apache.org
Subject: corrupt index: .fdx and stored norms
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, i sent this 30 min ago and it didn't seem to go through so i'm
trying again, i apologize if two copies finally arrive.

I am working on the development of a product that is using Lucene. A
corrupt index was reported by testers and it is in an odd state.
The indexes are built in batches (to multiple ram indexes in parallel)
and then eventually merged into a disk index with
IndexWriter.addIndexes(Directory[]).
Somehow the index got corrupted, there were no indications of a crash or
errors in log. The failure in SegmentMerger.mergeNorms:
  private void mergeNorms() throws IOException {
    for (int i = 0; i < fieldInfos.size(); i++) {
      FieldInfo fi = fieldInfos.fieldInfo(i);
      if (fi.isIndexed && !fi.omitNorms) {
        IndexOutput output = directory.createOutput(segment + ".f" + i);
        try {
          for (int j = 0; j < readers.size(); j++) {
            IndexReader reader = (IndexReader) readers.elementAt(j);
            int maxDoc = reader.maxDoc();
            byte[] input = new byte[maxDoc];
            reader.norms(fi.name, input, 0);  <==== ERROR HERE
            for (int k = 0; k < maxDoc; k++) {
              if (!reader.isDeleted(k)) {
                output.writeByte(input[k]);
              }
            }
          }
        } finally {
          output.close();
        }
      }
    }
  }

The problem is that the maxDoc() returned by the indexReader
(FieldsReader in this case) is larger then the size, in bytes, of the
norms file. then there is an error in IndexInput.read(byte[], int,
int) because there is not enough data in file to read.
Here is part of the directory listing (there are many stored fields of
the same size so omitting all but first 3):

-rw-r--r--  1 icmadmin db2grp1        811 Sep 27 20:48 _a4.fnm
-rw-r--r--  1 icmadmin db2grp1    1451696 Sep 27 20:49 _a4.fdx
-rw-r--r--  1 icmadmin db2grp1   12736304 Sep 27 20:49 _a4.fdt
-rw-r--r--  1 icmadmin db2grp1 5648544509 Sep 27 21:30 _a4.prx
-rw-r--r--  1 icmadmin db2grp1 1695149231 Sep 27 21:30 _a4.frq
-rw-r--r--  1 icmadmin db2grp1   45688880 Sep 27 21:30 _a4.tis
-rw-r--r--  1 icmadmin db2grp1     673588 Sep 27 21:30 _a4.tii
-rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f2
-rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f1
-rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f0

from looking at the code the sizeof(.fdx)/8 should equal sizeof(.f0)
but it doesn't in this case.

any ideas? Also, I'm wasn't sure if this was more appropriate for dev
or user so i guessed user.

-Nick
(programmer working @ ibm)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 19:25:55 2006
Return-Path: <java-user-return-23930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83080 invoked from network); 10 Oct 2006 19:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 19:25:55 -0000
Received: (qmail 11621 invoked by uid 500); 10 Oct 2006 19:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11590 invoked by uid 500); 10 Oct 2006 19:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11579 invoked by uid 99); 10 Oct 2006 19:25:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:25:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:25:47 -0700
Received: by nf-out-0910.google.com with SMTP id a4so182599nfc
        for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 12:25:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Y6pRIM5aaJZB3eIIWQCmo2aEBn5mFBFYQIjb//Ah9lg/ZBSMvoAlrjUe6ZLYctoNv/4uTeti7SbPS5SKexTfkNDKOvI7EMThHSxhLnZno7E8j1j6pG+YEEicJh1NYmh/JA5BIzRVsDwaVzvQYr/W7DQ7TEGA7ZT4WenVBaKZHuE=
Received: by 10.82.142.9 with SMTP id p9mr812011bud;
        Tue, 10 Oct 2006 12:25:25 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Tue, 10 Oct 2006 12:25:25 -0700 (PDT)
Message-ID: <c68e39170610101225s297dac9aof14acb0c13fe769@mail.gmail.com>
Date: Tue, 10 Oct 2006 15:25:25 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: What is the advantage of setting using compund file to false
In-Reply-To: <f18c9dde0610100356k1a7498fei7122f2bba7f4a667@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <452B7475.4000003@artnology.com>
	 <f18c9dde0610100356k1a7498fei7122f2bba7f4a667@mail.gmail.com>
X-Google-Sender-Auth: 08f5030e1b6edabd
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/10/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> On the other hand, the advantage of compound file appears in
> searching.

In my testing from some time ago, this wasn't the case.  non-compound
indexes were faster to search too.

If you get too many open files,
 - configure your OS to increase the number of open files
 - increase maxBufferedDocs to increase the size of the smallest
segments and thus decrease the total number of segments
 - decrease the merge factor some to further reduce the number of
files (this will slow indexing some, but speed up searching on
non-optimized indicies).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 19:35:24 2006
Return-Path: <java-user-return-23931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88844 invoked from network); 10 Oct 2006 19:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 19:35:24 -0000
Received: (qmail 36549 invoked by uid 500); 10 Oct 2006 19:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36509 invoked by uid 500); 10 Oct 2006 19:35:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36498 invoked by uid 99); 10 Oct 2006 19:35:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:35:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 12:35:15 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9AJYr69177338
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 19:34:53 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9AJbDqc3285122
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 21:37:13 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9AJYrHi019735
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 21:34:53 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9AJYrju019732
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 21:34:53 +0200
In-Reply-To: <59D1B59D-A0C7-497D-BA2C-283EB81C2D92@ehatchersolutions.com>
Subject: Re: Lucene in Action examples complie problem
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF1BE046FD.8F96B44E-ON88257203.006A6476-88257203.006AC6CB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 10 Oct 2006 11:26:17 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/10/2006 21:37:13
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I wonder if this should be in the FAQ entry "How do i get code written for
Lucene 1.4.x to work with Lucene 2.x", Or perhaps just adding there a link
to your post here -
http://www.nabble.com/Lucene-in-Action-examples-complie-problem-tf2418478.html#a6743189

Erik Hatcher <erik@ehatchersolutions.com> wrote on 10/10/2006 12:05:41:

> I have long been meaning to publish an updated codebase for Lucene in
> Action compatible with Lucene 2.0.  I adjusted the code a while ago,
> but I haven't published it yet (and I think the plan is to wait until
> LIA2 is finished to do so).  I did make notes when I made these
> changes, and I'm pasting them below for all to benefit from.
>
>
> Replace all BooleanQuery.add's, e.g.:
>
>     -      subjectQuery.add(tq, false, false);
>     +      subjectQuery.add(tq, BooleanClause.Occur.SHOULD);
>
> Substitute RangeFilter for DateFilter usage, e.g.:
>
>     -    DateFilter filter = new DateFilter("modified", jan1, dec31);
>     +    RangeFilter filter = new RangeFilter("modified", jan1,
> dec31, true, true);
>
>     NOTE: The dates are now String's generated by
> DateUtils.dateToString() and incompatible with DateField
>
> Replace all Field.Keyword/UnStored/Text/UnIndexed with the enumerated
> types, e.g.:
>
>     -      doc.add(Field.Keyword("animal", animal));
>     +      doc.add(new Field("animal", animal, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
>
> Rename PhrasePrefixQuery -> MultiPhraseQuery
>
> Use instance of QueryParser instead of static parse method, e.g.:
>
>     -        Query query = QueryParser.parse(expression, "contents",
> analyzer);
>     +        Query query = new QueryParser("contents", analyzer).parse
> (expression)
>
>
> QueryParser subclasses adjusted for overridden getXXXQuery method
> signatures.
>
> IndexReader.delete() updated to be
> IndexReader.deleteDocument/.deleteDocuments()
>
> IndexWriter internal configuration values now accessed through
> getters/setters rather than the fields directly, with minMergeDocs
> renamed as setMaxBufferedDocs().
>
> QueryParser.setLowercaseWildcardTerms() replaced
> with .setLowercaseExpandedTerms()
>
> QueryParser.getRangeQuery() still uses DateField when constructing a
> RangeQuery.
>    If your index is built using DateTools, you will need to subclass
> and override, as shown in QueryParserTest.testRangeQuery().
>
>
>
>
> On Oct 10, 2006, at 2:13 PM, Serhiy Polyakov wrote:
>
> > Hi,
> >
> > I started to study Lucene following the book Lucene in Action.
> >
> > I am trying to compile book examples downloaded from the book site:
> > http://www.manning.com/hatcher2/
> >
> > When I am trying to compile first example (Indexer.java) it gives me
> > the following error:
> >
> > LuceneInAction\src\lia\meetlucene\Indexer.java:80: cannot find symbol
> > symbol  : method Text(java.lang.String,java.io.FileReader)
> > location: class org.apache.lucene.document.Field
> >    doc.add(Field.Text("contents", new FileReader(f)));
> >
> > I know that file lucene-core-2.0.0.jar is in CLASSPATH and other
> > classes like
> > org.apache.lucene.index.IndexWriter are working OK. The only class I
> > am having problem with is org.apache.lucene.document.Field;
> >
> > Can you suggest something?
> >
> > Thanks,
> > Serhiy
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 21:06:06 2006
Return-Path: <java-user-return-23932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25631 invoked from network); 10 Oct 2006 21:06:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 21:06:06 -0000
Received: (qmail 68053 invoked by uid 500); 10 Oct 2006 21:05:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68016 invoked by uid 500); 10 Oct 2006 21:05:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67901 invoked by uid 99); 10 Oct 2006 21:05:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:05:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:05:57 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9AL5ZeW078418
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 21:05:35 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9AL7t5Z2658360
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:07:55 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9AL5ZrJ022347
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:05:35 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9AL5ZLD022344
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:05:35 +0200
In-Reply-To: <d1b7bc060610101224h23a6b01bn672862a61df422e0@mail.gmail.com>
Subject: Re: corrupt index: .fdx and stored norms
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF1922BB8D.BD0D92DA-ON88257203.00723068-88257203.0072ECBF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 10 Oct 2006 12:55:17 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/10/2006 23:07:55
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nick, could you provide additional info:
(1) Env info - Lucene version, Java version, OS, JVM args (e.g. -XmNNN),
etc...
(2) is this reproducible? By the file sizes there seem to be ~182 indexed
docs when the problem occur, so, if this is reproducible it would hopefully
not take too long. If reproducible, I wonder if you can also create it
without storing any field... (should go faster).

- Doron

"NIck P" <nick.mailinglists@gmail.com> wrote on 10/10/2006 12:24:19:

> Hi, i sent this 30 min ago and it didn't seem to go through so i'm
> trying again, i apologize if two copies finally arrive.
>
> I am working on the development of a product that is using Lucene. A
> corrupt index was reported by testers and it is in an odd state.
> The indexes are built in batches (to multiple ram indexes in parallel)
> and then eventually merged into a disk index with
> IndexWriter.addIndexes(Directory[]).
> Somehow the index got corrupted, there were no indications of a crash or
> errors in log. The failure in SegmentMerger.mergeNorms:
>   private void mergeNorms() throws IOException {
>     for (int i = 0; i < fieldInfos.size(); i++) {
>       FieldInfo fi = fieldInfos.fieldInfo(i);
>       if (fi.isIndexed && !fi.omitNorms) {
>         IndexOutput output = directory.createOutput(segment + ".f" + i);
>         try {
>           for (int j = 0; j < readers.size(); j++) {
>             IndexReader reader = (IndexReader) readers.elementAt(j);
>             int maxDoc = reader.maxDoc();
>             byte[] input = new byte[maxDoc];
>             reader.norms(fi.name, input, 0);  <==== ERROR HERE
>             for (int k = 0; k < maxDoc; k++) {
>               if (!reader.isDeleted(k)) {
>                 output.writeByte(input[k]);
>               }
>             }
>           }
>         } finally {
>           output.close();
>         }
>       }
>     }
>   }
>
> The problem is that the maxDoc() returned by the indexReader
> (FieldsReader in this case) is larger then the size, in bytes, of the
> norms file. then there is an error in IndexInput.read(byte[], int,
> int) because there is not enough data in file to read.
> Here is part of the directory listing (there are many stored fields of
> the same size so omitting all but first 3):
>
> -rw-r--r--  1 icmadmin db2grp1        811 Sep 27 20:48 _a4.fnm
> -rw-r--r--  1 icmadmin db2grp1    1451696 Sep 27 20:49 _a4.fdx
> -rw-r--r--  1 icmadmin db2grp1   12736304 Sep 27 20:49 _a4.fdt
> -rw-r--r--  1 icmadmin db2grp1 5648544509 Sep 27 21:30 _a4.prx
> -rw-r--r--  1 icmadmin db2grp1 1695149231 Sep 27 21:30 _a4.frq
> -rw-r--r--  1 icmadmin db2grp1   45688880 Sep 27 21:30 _a4.tis
> -rw-r--r--  1 icmadmin db2grp1     673588 Sep 27 21:30 _a4.tii
> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f2
> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f1
> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f0
>
> from looking at the code the sizeof(.fdx)/8 should equal sizeof(.f0)
> but it doesn't in this case.
>
> any ideas? Also, I'm wasn't sure if this was more appropriate for dev
> or user so i guessed user.
>
> -Nick
> (programmer working @ ibm)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 21:17:12 2006
Return-Path: <java-user-return-23933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30249 invoked from network); 10 Oct 2006 21:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 21:17:12 -0000
Received: (qmail 96026 invoked by uid 500); 10 Oct 2006 21:17:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95987 invoked by uid 500); 10 Oct 2006 21:17:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95969 invoked by uid 99); 10 Oct 2006 21:17:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:17:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:17:03 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9ALGfU5140410
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 21:16:41 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9ALJ0PN2883744
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:19:01 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9ALGeW2029842
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:16:40 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9ALGePs029836
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:16:40 +0200
In-Reply-To: <OF1922BB8D.BD0D92DA-ON88257203.00723068-88257203.0072ECBF@il.ibm.com>
Subject: Re: corrupt index: .fdx and stored norms
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFBABD13E9.EF75B70B-ON88257203.0074A70C-88257203.0074BC89@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 10 Oct 2006 13:15:04 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/10/2006 23:19:00
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I meant ~182K files ...

> Nick, could you provide additional info:
> (1) Env info - Lucene version, Java version, OS, JVM args (e.g. -XmNNN),
> etc...
> (2) is this reproducible? By the file sizes there seem to be ~182 indexed
> docs when the problem occur, so, if this is reproducible it would
hopefully
> not take too long. If reproducible, I wonder if you can also create it
> without storing any field... (should go faster).
>
> - Doron
>
> "NIck P" <nick.mailinglists@gmail.com> wrote on 10/10/2006 12:24:19:
>
> > Hi, i sent this 30 min ago and it didn't seem to go through so i'm
> > trying again, i apologize if two copies finally arrive.
> >
> > I am working on the development of a product that is using Lucene. A
> > corrupt index was reported by testers and it is in an odd state.
> > The indexes are built in batches (to multiple ram indexes in parallel)
> > and then eventually merged into a disk index with
> > IndexWriter.addIndexes(Directory[]).
> > Somehow the index got corrupted, there were no indications of a crash
or
> > errors in log. The failure in SegmentMerger.mergeNorms:
> >   private void mergeNorms() throws IOException {
> >     for (int i = 0; i < fieldInfos.size(); i++) {
> >       FieldInfo fi = fieldInfos.fieldInfo(i);
> >       if (fi.isIndexed && !fi.omitNorms) {
> >         IndexOutput output = directory.createOutput(segment + ".f" +
i);
> >         try {
> >           for (int j = 0; j < readers.size(); j++) {
> >             IndexReader reader = (IndexReader) readers.elementAt(j);
> >             int maxDoc = reader.maxDoc();
> >             byte[] input = new byte[maxDoc];
> >             reader.norms(fi.name, input, 0);  <==== ERROR HERE
> >             for (int k = 0; k < maxDoc; k++) {
> >               if (!reader.isDeleted(k)) {
> >                 output.writeByte(input[k]);
> >               }
> >             }
> >           }
> >         } finally {
> >           output.close();
> >         }
> >       }
> >     }
> >   }
> >
> > The problem is that the maxDoc() returned by the indexReader
> > (FieldsReader in this case) is larger then the size, in bytes, of the
> > norms file. then there is an error in IndexInput.read(byte[], int,
> > int) because there is not enough data in file to read.
> > Here is part of the directory listing (there are many stored fields of
> > the same size so omitting all but first 3):
> >
> > -rw-r--r--  1 icmadmin db2grp1        811 Sep 27 20:48 _a4.fnm
> > -rw-r--r--  1 icmadmin db2grp1    1451696 Sep 27 20:49 _a4.fdx
> > -rw-r--r--  1 icmadmin db2grp1   12736304 Sep 27 20:49 _a4.fdt
> > -rw-r--r--  1 icmadmin db2grp1 5648544509 Sep 27 21:30 _a4.prx
> > -rw-r--r--  1 icmadmin db2grp1 1695149231 Sep 27 21:30 _a4.frq
> > -rw-r--r--  1 icmadmin db2grp1   45688880 Sep 27 21:30 _a4.tis
> > -rw-r--r--  1 icmadmin db2grp1     673588 Sep 27 21:30 _a4.tii
> > -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f2
> > -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f1
> > -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f0
> >
> > from looking at the code the sizeof(.fdx)/8 should equal sizeof(.f0)
> > but it doesn't in this case.
> >
> > any ideas? Also, I'm wasn't sure if this was more appropriate for dev
> > or user so i guessed user.
> >
> > -Nick
> > (programmer working @ ibm)
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 21:17:19 2006
Return-Path: <java-user-return-23934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30303 invoked from network); 10 Oct 2006 21:17:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 21:17:18 -0000
Received: (qmail 96395 invoked by uid 500); 10 Oct 2006 21:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96375 invoked by uid 500); 10 Oct 2006 21:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96254 invoked by uid 99); 10 Oct 2006 21:17:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:17:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 14:17:03 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9ALGfQR036508
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 21:16:41 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9ALJ0xG2470058
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:19:00 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9ALGexF029839
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:16:40 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9ALGePr029836
	for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 23:16:40 +0200
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BE40@ad01.aza.se>
Subject: Re: Strange Spellchecker behaviour
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF37AD1D97.06C40280-ON88257203.0074578D-88257203.0074953E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 10 Oct 2006 13:13:23 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/10/2006 23:19:00
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I believe this was fixed in http://issues.apache.org/jira/browse/LUCENE=
-593

- Doron

Bj=F6rn Ekengren <bjorn.ekengren@avanza.se> wrote on 10/10/2006 02:12:2=
3:
> Hello, I have found that the spellchecker behaves a bit strange. My
> spell indexer class below doesn't work if I use the spellfield
> string set in the constructor directly, but it does work if I use
> the intern() value. The problem resides in the hasNext() method of
> LuceneIterator where an object comparison between two field strings
> occur. Now I got everything to work here, but I do wonder why it
> didn't work in my first version.=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 10 22:07:16 2006
Return-Path: <java-user-return-23935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53493 invoked from network); 10 Oct 2006 22:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Oct 2006 22:07:15 -0000
Received: (qmail 67791 invoked by uid 500); 10 Oct 2006 22:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67529 invoked by uid 500); 10 Oct 2006 22:07:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67518 invoked by uid 99); 10 Oct 2006 22:07:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:07:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of nick.mailinglists@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 15:07:06 -0700
Received: by wx-out-0506.google.com with SMTP id s15so12813wxc
        for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 15:06:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XwR2VZsVm7f+DVMi343e0h2NqJ4tchwOFaWIPsJUiCs8FW6U8P5pZQmaEb7toxmfhjFK2nFJqlV7tQyWw84pk01hPmmCPSxMj/PWeMte/r/4p4dH4FT+u4gML01EvKEj0RhU85/nZpPH9bTp9qqQ1xZKdFoLRyGHAsFASlomoYA=
Received: by 10.70.132.2 with SMTP id f2mr606649wxd;
        Tue, 10 Oct 2006 15:06:45 -0700 (PDT)
Received: from ?9.30.52.13? ( [129.42.184.35])
        by mx.google.com with ESMTP id 64sm39157wra.2006.10.10.15.06.44;
        Tue, 10 Oct 2006 15:06:45 -0700 (PDT)
Message-ID: <452C1957.5030000@gmail.com>
Date: Tue, 10 Oct 2006 15:06:15 -0700
From: Nick Puz <nick.mailinglists@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: corrupt index: .fdx and stored norms
References: <OFBABD13E9.EF75B70B-ON88257203.0074A70C-88257203.0074BC89@il.ibm.com>
In-Reply-To: <OFBABD13E9.EF75B70B-ON88257203.0074A70C-88257203.0074BC89@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Doron,
sorry, forgot to include env... Here is env for test machine that create 
the index:
- lucene 1.9.1
- ibm jdk 1.5 sr2
- RedHat enterprise linux release 4 (kernel 2.6.9-34ELsmp on x86_64)
- 8GB RAM
- 2 dual core xeon 3.4ghz.
- indexes on local disks, locks also on local (/tmp)

 From the existing files it is easy to reproduce (just open index writer 
and call optimize). I haven't been able to reproduce it yet and the 
tester is currently re-running, it actually takes a long time to get 
this far (index is about 5GB) and a lot happens before getting to lucene.

i spent a little time looking through the merge code and didn't see the 
code path that would result in this situation (.fdx has different docs 
then norms). i'm hoping that the long running tests is able to repro.

has anyone seen a similar problem, or does someone w/ more experience of 
lucene src know a scenario that should be able to create this situation?

thanks,
-nick

Doron Cohen wrote:
> I meant ~182K files ...
> 
>> Nick, could you provide additional info:
>> (1) Env info - Lucene version, Java version, OS, JVM args (e.g. -XmNNN),
>> etc...
>> (2) is this reproducible? By the file sizes there seem to be ~182 indexed
>> docs when the problem occur, so, if this is reproducible it would
> hopefully
>> not take too long. If reproducible, I wonder if you can also create it
>> without storing any field... (should go faster).
>>
>> - Doron
>>
>> "NIck P" <nick.mailinglists@gmail.com> wrote on 10/10/2006 12:24:19:
>>
>>> Hi, i sent this 30 min ago and it didn't seem to go through so i'm
>>> trying again, i apologize if two copies finally arrive.
>>>
>>> I am working on the development of a product that is using Lucene. A
>>> corrupt index was reported by testers and it is in an odd state.
>>> The indexes are built in batches (to multiple ram indexes in parallel)
>>> and then eventually merged into a disk index with
>>> IndexWriter.addIndexes(Directory[]).
>>> Somehow the index got corrupted, there were no indications of a crash
> or
>>> errors in log. The failure in SegmentMerger.mergeNorms:
>>>   private void mergeNorms() throws IOException {
>>>     for (int i = 0; i < fieldInfos.size(); i++) {
>>>       FieldInfo fi = fieldInfos.fieldInfo(i);
>>>       if (fi.isIndexed && !fi.omitNorms) {
>>>         IndexOutput output = directory.createOutput(segment + ".f" +
> i);
>>>         try {
>>>           for (int j = 0; j < readers.size(); j++) {
>>>             IndexReader reader = (IndexReader) readers.elementAt(j);
>>>             int maxDoc = reader.maxDoc();
>>>             byte[] input = new byte[maxDoc];
>>>             reader.norms(fi.name, input, 0);  <==== ERROR HERE
>>>             for (int k = 0; k < maxDoc; k++) {
>>>               if (!reader.isDeleted(k)) {
>>>                 output.writeByte(input[k]);
>>>               }
>>>             }
>>>           }
>>>         } finally {
>>>           output.close();
>>>         }
>>>       }
>>>     }
>>>   }
>>>
>>> The problem is that the maxDoc() returned by the indexReader
>>> (FieldsReader in this case) is larger then the size, in bytes, of the
>>> norms file. then there is an error in IndexInput.read(byte[], int,
>>> int) because there is not enough data in file to read.
>>> Here is part of the directory listing (there are many stored fields of
>>> the same size so omitting all but first 3):
>>>
>>> -rw-r--r--  1 icmadmin db2grp1        811 Sep 27 20:48 _a4.fnm
>>> -rw-r--r--  1 icmadmin db2grp1    1451696 Sep 27 20:49 _a4.fdx
>>> -rw-r--r--  1 icmadmin db2grp1   12736304 Sep 27 20:49 _a4.fdt
>>> -rw-r--r--  1 icmadmin db2grp1 5648544509 Sep 27 21:30 _a4.prx
>>> -rw-r--r--  1 icmadmin db2grp1 1695149231 Sep 27 21:30 _a4.frq
>>> -rw-r--r--  1 icmadmin db2grp1   45688880 Sep 27 21:30 _a4.tis
>>> -rw-r--r--  1 icmadmin db2grp1     673588 Sep 27 21:30 _a4.tii
>>> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f2
>>> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f1
>>> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f0
>>>
>>> from looking at the code the sizeof(.fdx)/8 should equal sizeof(.f0)
>>> but it doesn't in this case.
>>>
>>> any ideas? Also, I'm wasn't sure if this was more appropriate for dev
>>> or user so i guessed user.
>>>
>>> -Nick
>>> (programmer working @ ibm)
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 03:27:49 2006
Return-Path: <java-user-return-23936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33685 invoked from network); 11 Oct 2006 03:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 03:27:49 -0000
Received: (qmail 69355 invoked by uid 500); 11 Oct 2006 03:27:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69329 invoked by uid 500); 11 Oct 2006 03:27:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69317 invoked by uid 99); 11 Oct 2006 03:27:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 20:27:41 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ridabenjelloun@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Oct 2006 20:27:40 -0700
Received: by wx-out-0506.google.com with SMTP id s15so84566wxc
        for <java-user@lucene.apache.org>; Tue, 10 Oct 2006 20:27:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=CcXrK4ct71cK0UOlYlwkELr/EVDsHkGaqWK5+7eChrSFswkfhLhDgoNIloUcaZnvKwGW7tHoRiR7ERATDUkLw+SE86k9NfI5mh3mOz7Ci7j+8xcOHx1/zOishcZuh67vhGsjvoftGfRGALUP+eQItBImPnX/EF9UjC7Rgl28lXo=
Received: by 10.70.118.4 with SMTP id q4mr491642wxc;
        Tue, 10 Oct 2006 20:27:20 -0700 (PDT)
Received: by 10.70.128.16 with HTTP; Tue, 10 Oct 2006 20:27:19 -0700 (PDT)
Message-ID: <79976ce70610102027l255fb766k71916f4d4c165b64@mail.gmail.com>
Date: Tue, 10 Oct 2006 23:27:19 -0400
From: "Rida Benjelloun" <rida.benjelloun@doculibre.com>
Sender: ridabenjelloun@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Query suggestion
In-Reply-To: <89B91E1E3835B3478FFE134A6C448E56040CF2@olympe.core-techs.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19956_10119269.1160537239996"
References: <89B91E1E3835B3478FFE134A6C448E56040CF2@olympe.core-techs.local>
X-Google-Sender-Auth: 7f2d0cbd7538b587
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19956_10119269.1160537239996
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
You can look at Nutch and Ontology plugin.
Best regards









-----------------------------------------------------------
Rida Benjelloun,
DocuLibre inc.
Site Web : http://www.doculibre.com
Courriel : rida.benjelloun@doculibre.com
-----------------------------------------------------------

On 10/10/06, Louis Sicard <lsicard@core-techs.fr> wrote:
>
> Hi,
>
> I am designing a search engine based on Lucene 2.0 and I would like to add
> a specific feature to help users in their search by suggesting them a number
> of queries related to their seach. e. g. user searches for "Java" and we
> will suggest him "Building web applications in Java" and "SOAP technology
> and Java" and "Visit the Java island".
>
> Do you know any solutions that would already exist? Otherwise do you have
> any idea about designing such a feature?
>
> Thank you!
>
> Louis Sicard
>
>
>


--

------=_Part_19956_10119269.1160537239996--

From java-user-return-23937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 09:49:26 2006
Return-Path: <java-user-return-23937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39804 invoked from network); 11 Oct 2006 09:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 09:49:25 -0000
Received: (qmail 33162 invoked by uid 500); 11 Oct 2006 09:49:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32942 invoked by uid 500); 11 Oct 2006 09:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32931 invoked by uid 99); 11 Oct 2006 09:49:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 02:49:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [70.84.250.228] (HELO nix1.fastnix.com) (70.84.250.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 02:49:15 -0700
Received: from [134.159.98.226] (helo=youra9279112e3)
	by nix1.fastnix.com with esmtpa (Exim 4.52)
	id 1GXahm-0004MH-Fo
	for java-user@lucene.apache.org; Wed, 11 Oct 2006 15:18:51 +0530
From: "sachin" <sachin.khaire@noemacorp.com>
To: <java-user@lucene.apache.org>
Subject: RE: Advantage of putting lucene index in RDBMS
Date: Wed, 11 Oct 2006 15:19:07 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <452632CB.4010706@tejnora.cz>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbpM/r7P0sIragaSTW5Oh2yNAHhJwD5i1qw
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nix1.fastnix.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - noemacorp.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20061011094917.56C4810FB001@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I feel implementing the Lucene inside the RDBMS is nothing but
implementation of following interfaces :

TermDocs
TermVector
TermPositions


-----Original Message-----
From: Karel Tejnora [mailto:karel@tejnora.cz] 
Sent: Friday, October 06, 2006 4:11 PM
To: java-user@lucene.apache.org
Subject: Re: Advantage of putting lucene index in RDBMS

One think, generally use RDBM for the STORED fields is good idea because 
every segment merging / optimize copies those data once or twice (cfs).

I'm thinking about to put STORED fields in extra file and put pointers 
in cfs. Delete will just mark document as delete. And new operation 
omptimize_full
deletes and corrects pointers.


Karel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 10:08:01 2006
Return-Path: <java-user-return-23938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46762 invoked from network); 11 Oct 2006 10:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 10:08:01 -0000
Received: (qmail 66906 invoked by uid 500); 11 Oct 2006 10:07:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66864 invoked by uid 500); 11 Oct 2006 10:07:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66853 invoked by uid 99); 11 Oct 2006 10:07:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 03:07:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Oct 2006 03:07:52 -0700
Received: (qmail 16519 invoked from network); 11 Oct 2006 10:04:23 -0000
Received: from unknown (HELO bhavin) (172.16.3.75)
  by mailserver with SMTP; 11 Oct 2006 10:04:23 -0000
Message-ID: <003701c6ed1f$06842350$4b0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject:  How to fire a query ?
Date: Wed, 11 Oct 2006 15:51:33 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi guys,

How to fire "digital camera" when someone fire "digital cam" .. ?
Do i need to make manual list for such items and look up at search time or 
theree is any better way to do this...

-Bhavin pandya 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 10:09:50 2006
Return-Path: <java-user-return-23939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47142 invoked from network); 11 Oct 2006 10:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 10:09:49 -0000
Received: (qmail 71187 invoked by uid 500); 11 Oct 2006 10:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71161 invoked by uid 500); 11 Oct 2006 10:09:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71150 invoked by uid 99); 11 Oct 2006 10:09:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 03:09:41 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of backman.rickard@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 03:09:39 -0700
Received: by wx-out-0506.google.com with SMTP id s15so154545wxc
        for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 03:09:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=c1qDZciUNc9emLmIUL7uJ62V0X49FN9zjobXcfGlFZtPuTZ/49rIZbOfY47SdqNJ5dzi7k5JAvEAFKp2zSVtF4L18lGTVdgLfuhxEqCtiMaRCmFOw1BM0qXdVaxMxsQPw7UKRIu6lZZaTwQDuqNGPnkdMo+obsucoruTwLHLuMU=
Received: by 10.70.29.14 with SMTP id c14mr395184wxc;
        Wed, 11 Oct 2006 03:09:18 -0700 (PDT)
Received: by 10.70.89.6 with HTTP; Wed, 11 Oct 2006 03:09:18 -0700 (PDT)
Message-ID: <1c5b1bea0610110309n232b1bf8j858d17060f65998a@mail.gmail.com>
Date: Wed, 11 Oct 2006 12:09:18 +0200
From: "=?ISO-8859-1?Q?Rickard_B=E4ckman?=" <backman.rickard@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Incremental updates / slow searches.
In-Reply-To: <c68e39170610091049r445bf830x1d42e7c857e4112c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13521_147382.1160561358910"
References: <1c5b1bea0610090219g56e8cf47t5895c04bc77614dd@mail.gmail.com>
	 <c68e39170610091049r445bf830x1d42e7c857e4112c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13521_147382.1160561358910
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks for the suggestions.

We tried to reduce the amount of times we open a new searcher with some
progress. However
a lot of our searches still times out. We are currently opening a new
searcher and warms it up before
doing the switch. We even map the fields we are using for deleting to the
document ids to be able to do
deletes without doing any searches.

Analyzing / merging is done on the same machine as the searches.
I guess that you are suggesting building the index on another machine and
copying it to the searching machine? Or is there any other solution that
still
uses incremental updatse on the searching machine?

/Rickard

On 10/9/06, Yonik Seeley <yonik@apache.org> wrote:
>
> The biggest thing would be to limit how often you open a new
> IndexSearcher, and when you do, warm up the new searcher in the
> background while you continue serving searches with the existing
> searcher.  This is the strategy that Solr uses.
>
> There is also the issue of if you are analyzing/merging docs on the
> same servers that you are executing searches on.  You can use a
> separate box to build the index and distribute changes to boxes used
> for searching.
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> On 10/9/06, Rickard B=E4ckman <backman.rickard@gmail.com> wrote:
> > Hi,
> >
> > we are using a search system based on Lucene and have recently tried to
> add
> > incremental updating of the index instead of building a new index every
> now
> > and then. However we now run into problems as our searches starts to
> take
> > very long time to complete.
> >
> > Our index is about 8-9GB large and we are sending lots of updates /
> second
> > (we are probably merging in 200 - 300 in a few seconds). Today we buffe=
r
> a
> > bunch of updates and then merge them into the existing index like a
> batch,
> > first doing deletes and then inserts.
> >
> > We are currently not using any special tuning of Lucene.
> >
> > Does anyone have any similiar experiences from Lucene or advices on how
> to
> > reduce the amount of times it takes to perform a search? In particular
> what
> > would be an optimal combination of update size, merge factor, max
> buffered
> > docs?
> >
> > /Rickard
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13521_147382.1160561358910--

From java-user-return-23940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 12:25:57 2006
Return-Path: <java-user-return-23940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88498 invoked from network); 11 Oct 2006 12:25:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 12:25:56 -0000
Received: (qmail 82342 invoked by uid 500); 11 Oct 2006 12:25:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81920 invoked by uid 500); 11 Oct 2006 12:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81909 invoked by uid 99); 11 Oct 2006 12:25:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 05:25:50 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 05:25:49 -0700
Received: by py-out-1112.google.com with SMTP id s49so190197pyc
        for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 05:25:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gEp+D0ZdMRhsi4vvwld299eB2vvYhHgnZj/LayBRKQrwTkcrSe/pbpqN16pnYA0YVLyHQ5hRGy/TPuW+dnuKFi69ALxQrZsXDHr4IYchaNR/EhCjIuL5u2dIuaTQs3KhruOp2w0ZXR0G0lMvsQKsjG3BdgOkDip7rjrSN77/YmM=
Received: by 10.35.103.1 with SMTP id f1mr700643pym;
        Wed, 11 Oct 2006 05:25:27 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 11 Oct 2006 05:25:26 -0700 (PDT)
Message-ID: <359a92830610110525q7509a3f1uc65e3dc4bca4aaed@mail.gmail.com>
Date: Wed, 11 Oct 2006 08:25:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, "Bhavin Pandya" <bhavinp@rediff.co.in>
Subject: Re: How to fire a query ?
In-Reply-To: <003701c6ed1f$06842350$4b0310ac@bhavin>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2365_6895333.1160569526161"
References: <003701c6ed1f$06842350$4b0310ac@bhavin>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2365_6895333.1160569526161
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might have luck with one of the stemming analyzers, both at index time
and at search time. Do note that stemmers have their own quirks. It's not
clear that they would transform "camera" into "cam", for instance. Other
than that, I don't know how to get what you want. Perhaps you could provide
more detail?

Best
Erick

On 10/11/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>
>
> Hi guys,
>
> How to fire "digital camera" when someone fire "digital cam" .. ?
> Do i need to make manual list for such items and look up at search time or
> theree is any better way to do this...
>
> -Bhavin pandya
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2365_6895333.1160569526161--

From java-user-return-23941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 14:47:12 2006
Return-Path: <java-user-return-23941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36736 invoked from network); 11 Oct 2006 14:47:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 14:47:12 -0000
Received: (qmail 99586 invoked by uid 500); 11 Oct 2006 14:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99559 invoked by uid 500); 11 Oct 2006 14:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99548 invoked by uid 99); 11 Oct 2006 14:47:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 07:47:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.3.115.2] (HELO office.redwerk.com) (212.3.115.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 07:47:02 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GXfMB-00020t-MU
	for java-user@lucene.apache.org; Wed, 11 Oct 2006 17:46:51 +0300
Date: Wed, 11 Oct 2006 17:46:51 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: Distinct search
Message-ID: <20061011144651.GC7564@office.redwerk.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there!

I have a index structure like this:

document_id
some_text
.....

when searching for some set of documents, there could be a case when several
comments for the same document match the search criteria. In such case I need
to get single hit for all such cases, in other word - perform a "group by"-like 
operation based on document_id. For example, if I have records

1 : 10 : some text here
2 : 10 : some another text here

and the search string was "+some_text:some" - I need get only one hit for both 
these records (return only document_id).

I know I could collect all hits and then filter them, but I need also paging
functionality, so if I need to collect 1.000.000 hits into 50.000 of records -
I need to traverse all 1.000.000 of records, put 50.000 of unique items into
helper array, then get last page with 10 results - and it will take a lot of
time.

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 15:31:16 2006
Return-Path: <java-user-return-23942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47315 invoked from network); 11 Oct 2006 15:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 15:31:15 -0000
Received: (qmail 98684 invoked by uid 500); 11 Oct 2006 15:31:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98644 invoked by uid 500); 11 Oct 2006 15:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98633 invoked by uid 99); 11 Oct 2006 15:31:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 08:31:08 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 08:31:05 -0700
Received: by py-out-1112.google.com with SMTP id e30so223013pya
        for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 08:30:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ry91g1rqRggxOjJW+b1fXNZhumyXKjjEsZ7bfBkO0IFLvg6T6GRY40ABVr/9jm7+aJzSjoVO34KRzTsIZIv8DNkMshcXNHIuYwQG6Tjs6dmtKavTwgMycJ5HKKVFiVK+0qOCxY32T/OuEFgz1eVPKUs1XzLFk5CVjf4HFv5t+rU=
Received: by 10.35.121.2 with SMTP id y2mr1024652pym;
        Wed, 11 Oct 2006 08:30:03 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 11 Oct 2006 08:30:03 -0700 (PDT)
Message-ID: <359a92830610110830j709684eai70e133581fe94de6@mail.gmail.com>
Date: Wed, 11 Oct 2006 11:30:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distinct search
In-Reply-To: <20061011144651.GC7564@office.redwerk.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5480_19003427.1160580603485"
References: <20061011144651.GC7564@office.redwerk.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5480_19003427.1160580603485
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There's no real group_by functionality in Lucene. I'd have to ask, though,
"why organize your index this way"? I'm guessing that you're approaching
this from a database perspective, and if that's so, you may want to re-think
some things. Although see below for my contradicting myself.....

Lucene excels as a text search engine, NOT a RDMBS. It's almost a sure bet
that when you find yourself trying to do DB like things in lucene, you
should either
1> re-think how you use Lucene
2> use a database or
3> use a hybrid solution, using Lucene for your text searches and a DB for
the DB-like things you want to do.

In your example (and I understand that you've perhaps simplified it enough
for brevity that the following is inapplicable), instead of indexing these
records, why not put all the text in a single field for each doc ID? e.g.
Document doc = new Document();
doc.add(new Field("id", "10", ....);
doc.add(new Field("some_text", "some text here",.....));
doc.add(new Field("some_text", "some another text here",......));  // NOTE,
the field is exactly the same as the previous line.
writer.write(doc);

This will create one lucene document, with an id of 10, and text "some text
here some another text here". ( I left out the storage and indexing flags
above).

Now, when you search your hits object will have one and only one entry for
doc ID 10. It'll have relevance scores, and should fix you right up. This
assumes that you're breaking your some_text up into tokens using the
appropriate  tokenizer.


Note: it didn't occur to me until I'd used Lucene for some time, but
according to a discussion a while back, the above is exactly equivalent to
doc.add(new Field("id", "10", ....));
doc.add(new Field("some_text", "some text here some another text here",
......));
writer.write(doc);

Of course, how this applies to your paging issues is another story. I'm also
dealing with trying to get a mapping between offsets into a document and the
corresponding pages. It's interesting, especially when it comes to wildcard
queries, and I haven't found a satisfactory soulution yet. One "interesting"
issue if you choose to consider each page (record) as a lucene document is
how you deal with relevancy. That is, how do 10 hits on 3 pages of a 100
page book rank compared to 25 hits on 15 pages of a 900 page book? Which is
"more relevant"? This may be completely irrelevant to your problem, but I'm
inferring that your records correspond to a page......

Eric Hatcher suggested re-casting all the queries into Span queries and then
using a Spans object. This, together with perhaps bumping the offsets of the
first term of each page by, say, 10.000 might work for me. I'll know more in
a day or two....

Hope this helps
Erick

On 10/11/06, Eugeny N Dzhurinsky <bofh@redwerk.com> wrote:
>
> Hi there!
>
> I have a index structure like this:
>
> document_id
> some_text
> .....
>
> when searching for some set of documents, there could be a case when
> several
> comments for the same document match the search criteria. In such case I
> need
> to get single hit for all such cases, in other word - perform a "group
> by"-like
> operation based on document_id. For example, if I have records
>
> 1 : 10 : some text here
> 2 : 10 : some another text here
>
> and the search string was "+some_text:some" - I need get only one hit for
> both
> these records (return only document_id).
>
> I know I could collect all hits and then filter them, but I need also
> paging
> functionality, so if I need to collect 1.000.000 hits into 50.000 of
> records -
> I need to traverse all 1.000.000 of records, put 50.000 of unique items
> into
> helper array, then get last page with 10 results - and it will take a lot
> of
> time.
>
> --
> Eugene N Dzhurinsky
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5480_19003427.1160580603485--

From java-user-return-23943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 15:45:23 2006
Return-Path: <java-user-return-23943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50665 invoked from network); 11 Oct 2006 15:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 15:45:22 -0000
Received: (qmail 32056 invoked by uid 500); 11 Oct 2006 15:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31982 invoked by uid 500); 11 Oct 2006 15:45:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31919 invoked by uid 99); 11 Oct 2006 15:45:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 08:45:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.3.115.2] (HELO office.redwerk.com) (212.3.115.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 08:45:01 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GXgGI-00026C-91
	for java-user@lucene.apache.org; Wed, 11 Oct 2006 18:44:50 +0300
Date: Wed, 11 Oct 2006 18:44:50 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: Re: Distinct search
Message-ID: <20061011154450.GD7564@office.redwerk.com>
References: <20061011144651.GC7564@office.redwerk.com> <359a92830610110830j709684eai70e133581fe94de6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
In-Reply-To: <359a92830610110830j709684eai70e133581fe94de6@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, Oct 11, 2006 at 11:30:03AM -0400, Erick Erickson wrote:
> There's no real group_by functionality in Lucene. I'd have to ask, though,
> "why organize your index this way"? I'm guessing that you're approaching
> this from a database perspective, and if that's so, you may want to re-think
> some things. Although see below for my contradicting myself.....
> 
> Lucene excels as a text search engine, NOT a RDMBS. It's almost a sure bet
> that when you find yourself trying to do DB like things in lucene, you
> should either
> 1> re-think how you use Lucene
> 2> use a database or
> 3> use a hybrid solution, using Lucene for your text searches and a DB for
> the DB-like things you want to do.
> 
> In your example (and I understand that you've perhaps simplified it enough
> for brevity that the following is inapplicable), instead of indexing these
> records, why not put all the text in a single field for each doc ID? e.g.
> Document doc = new Document();
> doc.add(new Field("id", "10", ....);
> doc.add(new Field("some_text", "some text here",.....));
> doc.add(new Field("some_text", "some another text here",......));  // NOTE,
> the field is exactly the same as the previous line.
> writer.write(doc);
> 
> This will create one lucene document, with an id of 10, and text "some text
> here some another text here". ( I left out the storage and indexing flags
> above).
> 
> Now, when you search your hits object will have one and only one entry for
> doc ID 10. It'll have relevance scores, and should fix you right up. This
> assumes that you're breaking your some_text up into tokens using the
> appropriate  tokenizer.
> 
> 
> Note: it didn't occur to me until I'd used Lucene for some time, but
> according to a discussion a while back, the above is exactly equivalent to
> doc.add(new Field("id", "10", ....));
> doc.add(new Field("some_text", "some text here some another text here",
> ......));
> writer.write(doc);
> 
> Of course, how this applies to your paging issues is another story. I'm also
> dealing with trying to get a mapping between offsets into a document and the
> corresponding pages. It's interesting, especially when it comes to wildcard
> queries, and I haven't found a satisfactory soulution yet. One "interesting"
> issue if you choose to consider each page (record) as a lucene document is
> how you deal with relevancy. That is, how do 10 hits on 3 pages of a 100
> page book rank compared to 25 hits on 15 pages of a 900 page book? Which is
> "more relevant"? This may be completely irrelevant to your problem, but I'm
> inferring that your records correspond to a page......
> 
> Eric Hatcher suggested re-casting all the queries into Span queries and then
> using a Spans object. This, together with perhaps bumping the offsets of the
> first term of each page by, say, 10.000 might work for me. I'll know more in
> a day or two....
> 
> Hope this helps
> Erick


Thank you very juch for a prompt response!
I really trying to apply full-text search to an existing database, so I might
think in RDBMS domain way. In general, I didn't think of adding several fields
with the same name to a Document object, which is to be idexed, this migh help
me, but:

* if something (for instance - a comment to a document) is changed, I need to
change the index somehow
* if some new comment added - i need to add it to a index record
* if some comment is deleted - I need to remove it from an index record

As far as I remember, Lucene doesn't allow to modify index records, so I need
to delete the record and add it again, am I correct?

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 16:25:12 2006
Return-Path: <java-user-return-23944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64116 invoked from network); 11 Oct 2006 16:25:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 16:25:12 -0000
Received: (qmail 19675 invoked by uid 500); 11 Oct 2006 16:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19650 invoked by uid 500); 11 Oct 2006 16:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19639 invoked by uid 99); 11 Oct 2006 16:25:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:25:04 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:25:02 -0700
Received: by nz-out-0102.google.com with SMTP id z6so112275nzd
        for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 09:24:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZIpc7vg8JdXePqL9/gIhhIldr2jPGIzq09y/3NmyZYxa3XIfKMxD3WZ1EattliuJfVotkOXthib5d0YrZ0fMbz91wDfweERzDNcIs0HdkKZ+SRv/KN+Rwo6Nn8pIrgLl/+6RZUyL1o3CKnbYgCy1AhDgHuWf9szclCvrWumyDw4=
Received: by 10.35.72.1 with SMTP id z1mr1064676pyk;
        Wed, 11 Oct 2006 09:09:40 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 11 Oct 2006 09:09:39 -0700 (PDT)
Message-ID: <359a92830610110909g1669fb20n51cb97cbb5a04709@mail.gmail.com>
Date: Wed, 11 Oct 2006 12:09:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distinct search
In-Reply-To: <20061011154450.GD7564@office.redwerk.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6337_18049826.1160582980050"
References: <20061011144651.GC7564@office.redwerk.com>
	 <359a92830610110830j709684eai70e133581fe94de6@mail.gmail.com>
	 <20061011154450.GD7564@office.redwerk.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6337_18049826.1160582980050
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No problem. Partly, it's helping me clarify my current problem <G>....

Yes, you must delete and re-add a document to change it. You might want to
look at the IndexModifier class. Be aware of some things:
1> Lucene doc IDs may change when the index is changed, I think after
optimization. So, in order to find specific docs you'll want to add a unique
ID field.
2> deleteing a document only marks it as deleted. It's still actually in the
index (although you won't be able to see it). Optimizing an index actually
physically removes it (and shrinks the index size).
3> after changing an index, you must open a new IndexReader before you see
the changes.
4> The only information you can reliably get out of an index is data you've
stored (e.g. Field.Store.YES). This only matters if you're trying to read
the doc *from* the index and change it. If you're just replacing it with a
fresh copy from somewhere else (e.g. re-reading the doc from the database),
it's not a problem.
5> Lucene has no notion of constraints. That is, Lucene is perfectly happy
with two identical documents in the index, so be sure to delete before you
add <G>....

Erick

On 10/11/06, Eugeny N Dzhurinsky <bofh@redwerk.com> wrote:
>
> On Wed, Oct 11, 2006 at 11:30:03AM -0400, Erick Erickson wrote:
> > There's no real group_by functionality in Lucene. I'd have to ask,
> though,
> > "why organize your index this way"? I'm guessing that you're approaching
> > this from a database perspective, and if that's so, you may want to
> re-think
> > some things. Although see below for my contradicting myself.....
> >
> > Lucene excels as a text search engine, NOT a RDMBS. It's almost a sure
> bet
> > that when you find yourself trying to do DB like things in lucene, you
> > should either
> > 1> re-think how you use Lucene
> > 2> use a database or
> > 3> use a hybrid solution, using Lucene for your text searches and a DB
> for
> > the DB-like things you want to do.
> >
> > In your example (and I understand that you've perhaps simplified it
> enough
> > for brevity that the following is inapplicable), instead of indexing
> these
> > records, why not put all the text in a single field for each doc ID? e.g
> .
> > Document doc = new Document();
> > doc.add(new Field("id", "10", ....);
> > doc.add(new Field("some_text", "some text here",.....));
> > doc.add(new Field("some_text", "some another text here",......));  //
> NOTE,
> > the field is exactly the same as the previous line.
> > writer.write(doc);
> >
> > This will create one lucene document, with an id of 10, and text "some
> text
> > here some another text here". ( I left out the storage and indexing
> flags
> > above).
> >
> > Now, when you search your hits object will have one and only one entry
> for
> > doc ID 10. It'll have relevance scores, and should fix you right up.
> This
> > assumes that you're breaking your some_text up into tokens using the
> > appropriate  tokenizer.
> >
> >
> > Note: it didn't occur to me until I'd used Lucene for some time, but
> > according to a discussion a while back, the above is exactly equivalent
> to
> > doc.add(new Field("id", "10", ....));
> > doc.add(new Field("some_text", "some text here some another text here",
> > ......));
> > writer.write(doc);
> >
> > Of course, how this applies to your paging issues is another story. I'm
> also
> > dealing with trying to get a mapping between offsets into a document and
> the
> > corresponding pages. It's interesting, especially when it comes to
> wildcard
> > queries, and I haven't found a satisfactory soulution yet. One
> "interesting"
> > issue if you choose to consider each page (record) as a lucene document
> is
> > how you deal with relevancy. That is, how do 10 hits on 3 pages of a 100
> > page book rank compared to 25 hits on 15 pages of a 900 page book? Which
> is
> > "more relevant"? This may be completely irrelevant to your problem, but
> I'm
> > inferring that your records correspond to a page......
> >
> > Eric Hatcher suggested re-casting all the queries into Span queries and
> then
> > using a Spans object. This, together with perhaps bumping the offsets of
> the
> > first term of each page by, say, 10.000 might work for me. I'll know
> more in
> > a day or two....
> >
> > Hope this helps
> > Erick
>
>
> Thank you very juch for a prompt response!
> I really trying to apply full-text search to an existing database, so I
> might
> think in RDBMS domain way. In general, I didn't think of adding several
> fields
> with the same name to a Document object, which is to be idexed, this migh
> help
> me, but:
>
> * if something (for instance - a comment to a document) is changed, I need
> to
> change the index somehow
> * if some new comment added - i need to add it to a index record
> * if some comment is deleted - I need to remove it from an index record
>
> As far as I remember, Lucene doesn't allow to modify index records, so I
> need
> to delete the record and add it again, am I correct?
>
> --
> Eugene N Dzhurinsky
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6337_18049826.1160582980050--

From java-user-return-23945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 16:33:30 2006
Return-Path: <java-user-return-23945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68293 invoked from network); 11 Oct 2006 16:33:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 16:33:30 -0000
Received: (qmail 36843 invoked by uid 500); 11 Oct 2006 16:33:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36807 invoked by uid 500); 11 Oct 2006 16:33:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36796 invoked by uid 99); 11 Oct 2006 16:33:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:33:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.3.115.2] (HELO office.redwerk.com) (212.3.115.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 09:33:22 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GXh16-0002zj-Fl
	for java-user@lucene.apache.org; Wed, 11 Oct 2006 19:33:12 +0300
Date: Wed, 11 Oct 2006 19:33:12 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: Re: Distinct search
Message-ID: <20061011163312.GB11429@office.redwerk.com>
References: <20061011144651.GC7564@office.redwerk.com> <359a92830610110830j709684eai70e133581fe94de6@mail.gmail.com> <20061011154450.GD7564@office.redwerk.com> <359a92830610110909g1669fb20n51cb97cbb5a04709@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
In-Reply-To: <359a92830610110909g1669fb20n51cb97cbb5a04709@mail.gmail.com>
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, Oct 11, 2006 at 12:09:40PM -0400, Erick Erickson wrote:
> No problem. Partly, it's helping me clarify my current problem <G>....
> 
> Yes, you must delete and re-add a document to change it. You might want to
> look at the IndexModifier class. Be aware of some things:
> 1> Lucene doc IDs may change when the index is changed, I think after
> optimization. So, in order to find specific docs you'll want to add a unique
> ID field.
> 2> deleteing a document only marks it as deleted. It's still actually in the
> index (although you won't be able to see it). Optimizing an index actually
> physically removes it (and shrinks the index size).
> 3> after changing an index, you must open a new IndexReader before you see
> the changes.
> 4> The only information you can reliably get out of an index is data you've
> stored (e.g. Field.Store.YES). This only matters if you're trying to read
> the doc *from* the index and change it. If you're just replacing it with a
> fresh copy from somewhere else (e.g. re-reading the doc from the database),
> it's not a problem.
> 5> Lucene has no notion of constraints. That is, Lucene is perfectly happy
> with two identical documents in the index, so be sure to delete before you
> add <G>....

Thats great!
Looks like the solution I needed, because each record will definitely has
unique ID, I need to just index document  and it's comments - not store 
contents etc, and I don't need any constraints!

I just need to search for something, which search will return set of that
unique IDs (those IDs are obtained from a database).

Thank you very much for all your help!

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 18:17:53 2006
Return-Path: <java-user-return-23946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97108 invoked from network); 11 Oct 2006 18:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 18:17:53 -0000
Received: (qmail 31250 invoked by uid 500); 11 Oct 2006 18:17:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31227 invoked by uid 500); 11 Oct 2006 18:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31216 invoked by uid 99); 11 Oct 2006 18:17:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:17:45 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:17:44 -0700
Received: by py-out-1112.google.com with SMTP id i49so63951pyi
        for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 11:17:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=onPqzZsgU7fmb2XwDLqyMnof8Bq/c+8RQq5Dhs1tqQTnu0/v0HADvnON7ur9sTi4bNpRvGjpv8NnfAggh90i5ZzOvHK+UPyewjLUdsgpX6C+ZPtvKe/dOapDnrHlhnl+HhJFr04BHgwR+Jn8V+aN+6JoxknVVdoPqU95s84wiNQ=
Received: by 10.35.102.1 with SMTP id e1mr1287636pym;
        Wed, 11 Oct 2006 11:17:22 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 11 Oct 2006 11:17:22 -0700 (PDT)
Message-ID: <359a92830610111117j233bc652w7e9d553d05530522@mail.gmail.com>
Date: Wed, 11 Oct 2006 14:17:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
In-Reply-To: <359a92830610091639q43e882c0lc4b5d0a3cd0c95fe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8948_14682330.1160590642490"
References: <359a92830610091309l36b3e30ek56a3446e5fcb0027@mail.gmail.com>
	 <OF5609FF4B.91A2330C-ON88257202.006FD442-88257202.0071C97E@il.ibm.com>
	 <359a92830610091639q43e882c0lc4b5d0a3cd0c95fe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8948_14682330.1160590642490
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Problem 3482:

I'm probably close to being able to start work. Except...

How to count hits with SrndQuery? Or, more generally, with arbitrary
wildcards and boolean operators?

So, say I've indexed a book by page. That is, each page is a document. I
know a particular page matches my query because the SrndQuery found it. Now,
I want to answer the question "How many times did the query match on this
page"?

For a Srnd query of, say, the form "20w(e?ci, ma?l, k?nd, m??ik?, k?i?f,
h?n???d, co?e, ca??l?, r????o?e, cl?p, ho???k?)". Imagine adding a not or
three, a nested pair of OR clauses and..... No, DON'T tell me that that
probably wouldn't match any pages anyway <G>....

Anyway, I want to answer "how many times does this occur on the page".
Another way of asking this, I suppose, is "how many terms would be
highlighted on that page", but I don't think highlighting helps. And I'm
aware that the question "how many times does 'this' occur" is ambiguous,
especially when we add the not case in......

I can think of a couple of approaches:
1> get down and dirty with the terms. That is, examine the term position
vectors and compare all the nasty details of where they occur, combined
with, say, regextermenum and go at it. This is fairly ugly, especially with
nested queries. But I can do it especially if we limit the complexity of the
query or define the hitcount more simply.
2> get clever with a regex, fetch the text of the page and see how many
times the regex matches. I'd imagine that the regex will
be...er...unpleasant.
2a> Use simpler regex expressions for each term, assemble the list of match
positions, and count.
2b> Isn't this really just using TermDocs as it was meant to be used?
combined with regextermenum?
2c> Since the number of regex matches on a particular page is much smaller
than the number of regex matches over the entire index, does anyone have a
feel for whether <2a> or <2b> is easier/faster? For <2a>, I'm analyzing a
page with a regex. For <2b>, Lucene has already done the pattern matching,
but I'm reading a bunch of different termdocs......

Fortunately, for this application, I only care about the hits per page for a
single book at a time. I do NOT have to create a list of all hits on all
pages for all books that have any match.

Thanks
Erick

On 10/9/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Doron:
>
> Thanks for the suggestion, I'll certainly put it on my list, depending
> upon what the PM decides. This app is geneaology reasearch, and users
> *can* put in their own wildcards...
>
> This is why I love this list... lots of smart people giving me suggestions
> I never would have thought of <G>...
>
> Thanks
> Erick
>
> On 10/9/06, Doron Cohen < DORONC@il.ibm.com> wrote:
> >
> > "Erick Erickson" <erickerickson@gmail.com> wrote on 09/10/2006 13:09:21:
> > > ... The kicker is that what we are indexing is
> > > OCR data, some of which is pretty trashy. So you wind up with
> > "interesting"
> > > words in your index, things like rtyHrS. So the whole question of
> > allowing
> > > very specific queries on detailed wildcards (combined with spans) is
> > under
> > > discussion. It's not at all clear to me that there's any value to the
> > end
> > > users in the capability of, say, two character prefixes. And, it's an
> > easy
> > > rule that "prefix queries must specify at least 3 non-wildcard
> > > characters"....
> >
> > Erick, I may be out of course here, but, fwiw, have you considered
> > n-gram
> > indexing/search for a degree of fuzziness to compensate for OCR
> > errors..?
> >
> > For a four words query you would probably get ~20 tokens (bigrams?) - no
> > matter what the index size is. You would then probably want to score
> > higher
> > by LA (lexical affinity - query terms appear close to each other in the
> > document) - and I am not sure to what degree a span query (made of
> > n-gram
> > terms) would serve that, because (1) all terms in the span need to be
> > there
> > (well, I think:-); and, (2) you would like to increase doc score for
> > close-by terms only for close-by query n-grams.
> >
> > So there might not be a ready to use solution in Lucene for this, but
> > perhaps this is a more robust direction to try than the wild card
> > approach
> > - I mean, if users want to type a wild card query, it is their right to
> > do
> > so, but for an application logic this does not seem the best choice.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_8948_14682330.1160590642490--

From java-user-return-23947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 18:31:34 2006
Return-Path: <java-user-return-23947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1954 invoked from network); 11 Oct 2006 18:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 18:31:33 -0000
Received: (qmail 51213 invoked by uid 500); 11 Oct 2006 18:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50709 invoked by uid 500); 11 Oct 2006 18:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50698 invoked by uid 99); 11 Oct 2006 18:31:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:31:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:31:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 365B430EFC18; Wed, 11 Oct 2006 14:31:05 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id E3CF230EFC17
	for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 14:31:02 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830610111117j233bc652w7e9d553d05530522@mail.gmail.com>
References: <359a92830610091309l36b3e30ek56a3446e5fcb0027@mail.gmail.com> <OF5609FF4B.91A2330C-ON88257202.006FD442-88257202.0071C97E@il.ibm.com> <359a92830610091639q43e882c0lc4b5d0a3cd0c95fe@mail.gmail.com> <359a92830610111117j233bc652w7e9d553d05530522@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <23727C4B-B199-4FF6-A4D9-297CCAD3F54A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: wildcard and span queries
Date: Wed, 11 Oct 2006 14:30:58 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick - what about using getSpans() from the SpanQuery that is  
generated?   That should give you what you're after I think.

	Erik


On Oct 11, 2006, at 2:17 PM, Erick Erickson wrote:

> Problem 3482:
>
> I'm probably close to being able to start work. Except...
>
> How to count hits with SrndQuery? Or, more generally, with arbitrary
> wildcards and boolean operators?
>
> So, say I've indexed a book by page. That is, each page is a  
> document. I
> know a particular page matches my query because the SrndQuery found  
> it. Now,
> I want to answer the question "How many times did the query match  
> on this
> page"?
>
> For a Srnd query of, say, the form "20w(e?ci, ma?l, k?nd, m??ik?, k? 
> i?f,
> h?n???d, co?e, ca??l?, r????o?e, cl?p, ho???k?)". Imagine adding a  
> not or
> three, a nested pair of OR clauses and..... No, DON'T tell me that  
> that
> probably wouldn't match any pages anyway <G>....
>
> Anyway, I want to answer "how many times does this occur on the page".
> Another way of asking this, I suppose, is "how many terms would be
> highlighted on that page", but I don't think highlighting helps.  
> And I'm
> aware that the question "how many times does 'this' occur" is  
> ambiguous,
> especially when we add the not case in......
>
> I can think of a couple of approaches:
> 1> get down and dirty with the terms. That is, examine the term  
> position
> vectors and compare all the nasty details of where they occur,  
> combined
> with, say, regextermenum and go at it. This is fairly ugly,  
> especially with
> nested queries. But I can do it especially if we limit the  
> complexity of the
> query or define the hitcount more simply.
> 2> get clever with a regex, fetch the text of the page and see how  
> many
> times the regex matches. I'd imagine that the regex will
> be...er...unpleasant.
> 2a> Use simpler regex expressions for each term, assemble the list  
> of match
> positions, and count.
> 2b> Isn't this really just using TermDocs as it was meant to be used?
> combined with regextermenum?
> 2c> Since the number of regex matches on a particular page is much  
> smaller
> than the number of regex matches over the entire index, does anyone  
> have a
> feel for whether <2a> or <2b> is easier/faster? For <2a>, I'm  
> analyzing a
> page with a regex. For <2b>, Lucene has already done the pattern  
> matching,
> but I'm reading a bunch of different termdocs......
>
> Fortunately, for this application, I only care about the hits per  
> page for a
> single book at a time. I do NOT have to create a list of all hits  
> on all
> pages for all books that have any match.
>
> Thanks
> Erick
>
> On 10/9/06, Erick Erickson <erickerickson@gmail.com> wrote:
>>
>> Doron:
>>
>> Thanks for the suggestion, I'll certainly put it on my list,  
>> depending
>> upon what the PM decides. This app is geneaology reasearch, and users
>> *can* put in their own wildcards...
>>
>> This is why I love this list... lots of smart people giving me  
>> suggestions
>> I never would have thought of <G>...
>>
>> Thanks
>> Erick
>>
>> On 10/9/06, Doron Cohen < DORONC@il.ibm.com> wrote:
>> >
>> > "Erick Erickson" <erickerickson@gmail.com> wrote on 09/10/2006  
>> 13:09:21:
>> > > ... The kicker is that what we are indexing is
>> > > OCR data, some of which is pretty trashy. So you wind up with
>> > "interesting"
>> > > words in your index, things like rtyHrS. So the whole question of
>> > allowing
>> > > very specific queries on detailed wildcards (combined with  
>> spans) is
>> > under
>> > > discussion. It's not at all clear to me that there's any value  
>> to the
>> > end
>> > > users in the capability of, say, two character prefixes. And,  
>> it's an
>> > easy
>> > > rule that "prefix queries must specify at least 3 non-wildcard
>> > > characters"....
>> >
>> > Erick, I may be out of course here, but, fwiw, have you considered
>> > n-gram
>> > indexing/search for a degree of fuzziness to compensate for OCR
>> > errors..?
>> >
>> > For a four words query you would probably get ~20 tokens  
>> (bigrams?) - no
>> > matter what the index size is. You would then probably want to  
>> score
>> > higher
>> > by LA (lexical affinity - query terms appear close to each other  
>> in the
>> > document) - and I am not sure to what degree a span query (made of
>> > n-gram
>> > terms) would serve that, because (1) all terms in the span need  
>> to be
>> > there
>> > (well, I think:-); and, (2) you would like to increase doc score  
>> for
>> > close-by terms only for close-by query n-grams.
>> >
>> > So there might not be a ready to use solution in Lucene for  
>> this, but
>> > perhaps this is a more robust direction to try than the wild card
>> > approach
>> > - I mean, if users want to type a wild card query, it is their  
>> right to
>> > do
>> > so, but for an application logic this does not seem the best  
>> choice.
>> >
>> >
>> >  
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 18:57:49 2006
Return-Path: <java-user-return-23948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8353 invoked from network); 11 Oct 2006 18:57:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 18:57:48 -0000
Received: (qmail 74617 invoked by uid 500); 11 Oct 2006 18:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74589 invoked by uid 500); 11 Oct 2006 18:57:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74578 invoked by uid 99); 11 Oct 2006 18:57:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:57:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 11:57:40 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.13.8/8.13.8) with ESMTP id k9BIvI6W091175
	for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 20:57:19 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: wildcard and span queries
Date: Wed, 11 Oct 2006 20:57:11 +0200
User-Agent: KMail/1.8.2
References: <359a92830610091309l36b3e30ek56a3446e5fcb0027@mail.gmail.com> <359a92830610111117j233bc652w7e9d553d05530522@mail.gmail.com> <23727C4B-B199-4FF6-A4D9-297CCAD3F54A@ehatchersolutions.com>
In-Reply-To: <23727C4B-B199-4FF6-A4D9-297CCAD3F54A@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610112057.14127.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 11 October 2006 20:30, Erik Hatcher wrote:
> Erick - what about using getSpans() from the SpanQuery that is  
> generated?   That should give you what you're after I think.
> 
> 	Erik

You can also use skipTo(docNr) on the spans to skip to the docNr
of the book that you're after. A Filter for the single book would also
work, but using skipTo() yourself on the spans is easier.

Regards,
Paul Elschot


> 
> 
> On Oct 11, 2006, at 2:17 PM, Erick Erickson wrote:
> 
> > Problem 3482:
> >
> > I'm probably close to being able to start work. Except...
> >
> > How to count hits with SrndQuery? Or, more generally, with arbitrary
> > wildcards and boolean operators?
> >
> > So, say I've indexed a book by page. That is, each page is a  
> > document. I
> > know a particular page matches my query because the SrndQuery found  
> > it. Now,
> > I want to answer the question "How many times did the query match  
> > on this
> > page"?
> >
> > For a Srnd query of, say, the form "20w(e?ci, ma?l, k?nd, m??ik?, k? 
> > i?f,
> > h?n???d, co?e, ca??l?, r????o?e, cl?p, ho???k?)". Imagine adding a  
> > not or
> > three, a nested pair of OR clauses and..... No, DON'T tell me that  
> > that
> > probably wouldn't match any pages anyway <G>....
> >
> > Anyway, I want to answer "how many times does this occur on the page".
> > Another way of asking this, I suppose, is "how many terms would be
> > highlighted on that page", but I don't think highlighting helps.  
> > And I'm
> > aware that the question "how many times does 'this' occur" is  
> > ambiguous,
> > especially when we add the not case in......
> >
> > I can think of a couple of approaches:
> > 1> get down and dirty with the terms. That is, examine the term  
> > position
> > vectors and compare all the nasty details of where they occur,  
> > combined
> > with, say, regextermenum and go at it. This is fairly ugly,  
> > especially with
> > nested queries. But I can do it especially if we limit the  
> > complexity of the
> > query or define the hitcount more simply.
> > 2> get clever with a regex, fetch the text of the page and see how  
> > many
> > times the regex matches. I'd imagine that the regex will
> > be...er...unpleasant.
> > 2a> Use simpler regex expressions for each term, assemble the list  
> > of match
> > positions, and count.
> > 2b> Isn't this really just using TermDocs as it was meant to be used?
> > combined with regextermenum?
> > 2c> Since the number of regex matches on a particular page is much  
> > smaller
> > than the number of regex matches over the entire index, does anyone  
> > have a
> > feel for whether <2a> or <2b> is easier/faster? For <2a>, I'm  
> > analyzing a
> > page with a regex. For <2b>, Lucene has already done the pattern  
> > matching,
> > but I'm reading a bunch of different termdocs......
> >
> > Fortunately, for this application, I only care about the hits per  
> > page for a
> > single book at a time. I do NOT have to create a list of all hits  
> > on all
> > pages for all books that have any match.
> >
> > Thanks
> > Erick
> >
> > On 10/9/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >>
> >> Doron:
> >>
> >> Thanks for the suggestion, I'll certainly put it on my list,  
> >> depending
> >> upon what the PM decides. This app is geneaology reasearch, and users
> >> *can* put in their own wildcards...
> >>
> >> This is why I love this list... lots of smart people giving me  
> >> suggestions
> >> I never would have thought of <G>...
> >>
> >> Thanks
> >> Erick
> >>
> >> On 10/9/06, Doron Cohen < DORONC@il.ibm.com> wrote:
> >> >
> >> > "Erick Erickson" <erickerickson@gmail.com> wrote on 09/10/2006  
> >> 13:09:21:
> >> > > ... The kicker is that what we are indexing is
> >> > > OCR data, some of which is pretty trashy. So you wind up with
> >> > "interesting"
> >> > > words in your index, things like rtyHrS. So the whole question of
> >> > allowing
> >> > > very specific queries on detailed wildcards (combined with  
> >> spans) is
> >> > under
> >> > > discussion. It's not at all clear to me that there's any value  
> >> to the
> >> > end
> >> > > users in the capability of, say, two character prefixes. And,  
> >> it's an
> >> > easy
> >> > > rule that "prefix queries must specify at least 3 non-wildcard
> >> > > characters"....
> >> >
> >> > Erick, I may be out of course here, but, fwiw, have you considered
> >> > n-gram
> >> > indexing/search for a degree of fuzziness to compensate for OCR
> >> > errors..?
> >> >
> >> > For a four words query you would probably get ~20 tokens  
> >> (bigrams?) - no
> >> > matter what the index size is. You would then probably want to  
> >> score
> >> > higher
> >> > by LA (lexical affinity - query terms appear close to each other  
> >> in the
> >> > document) - and I am not sure to what degree a span query (made of
> >> > n-gram
> >> > terms) would serve that, because (1) all terms in the span need  
> >> to be
> >> > there
> >> > (well, I think:-); and, (2) you would like to increase doc score  
> >> for
> >> > close-by terms only for close-by query n-grams.
> >> >
> >> > So there might not be a ready to use solution in Lucene for  
> >> this, but
> >> > perhaps this is a more robust direction to try than the wild card
> >> > approach
> >> > - I mean, if users want to type a wild card query, it is their  
> >> right to
> >> > do
> >> > so, but for an application logic this does not seem the best  
> >> choice.
> >> >
> >> >
> >> >  
> >> ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 21:37:02 2006
Return-Path: <java-user-return-23949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73541 invoked from network); 11 Oct 2006 21:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 21:37:01 -0000
Received: (qmail 28764 invoked by uid 500); 11 Oct 2006 21:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28731 invoked by uid 500); 11 Oct 2006 21:36:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28720 invoked by uid 99); 11 Oct 2006 21:36:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 14:36:53 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of isaacrc82@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 14:36:53 -0700
Received: by ug-out-1314.google.com with SMTP id k40so200246ugc
        for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 14:36:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=tsLQV0iPLBVi1RyZqJy0ysrXE47Rx2e7alQ4nt8Oa112AJZ0K+QyeotkFh2DoFQQVj0/9NPlbF5s4Bak7xMzC3s7T4HL9Q4OJukq2Ujx8iNqmje6xD8gRB2RY+NEzpo993zdCP8GKHwuhWNokFdo5BgoT0tNBcU/3LmYOm4Kzss=
Received: by 10.67.121.15 with SMTP id y15mr1647718ugm;
        Wed, 11 Oct 2006 14:36:31 -0700 (PDT)
Received: by 10.66.232.5 with HTTP; Wed, 11 Oct 2006 14:36:31 -0700 (PDT)
Message-ID: <bf1404350610111436t36d5817j47399c90bad53795@mail.gmail.com>
Date: Wed, 11 Oct 2006 16:36:31 -0500
From: "Ariel Isaac Romero Cartaya" <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Big problem with big indexes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44229_19565488.1160602591687"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44229_19565488.1160602591687
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hi everybody:

     I have a big problem making prallel searches in big indexes.
     I have indexed with lucene over 60 000 articles, I have distributed the
indexes in 10 computers nodes so each index not exceed the 60 MB of size. I
makes parallel searches in those indexes but I get the search results after
40 MINUTES !!! Then I put the indexes in memory to do the parallel searches
But still I get the search results after 3 minutes !!! that`s to mucho time
waiting !!!
  How Can I reduce the time of search ???
  Could you help me please ???
  I need help !!!!!

Greetings

------=_Part_44229_19565488.1160602591687--

From java-user-return-23950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 11 22:53:03 2006
Return-Path: <java-user-return-23950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9264 invoked from network); 11 Oct 2006 22:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Oct 2006 22:53:02 -0000
Received: (qmail 66782 invoked by uid 500); 11 Oct 2006 22:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66750 invoked by uid 500); 11 Oct 2006 22:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66739 invoked by uid 99); 11 Oct 2006 22:52:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 15:52:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 15:52:54 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id D1A56B735C
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 08:51:41 +1000 (EST)
Message-ID: <452D75B1.1030002@nuix.com.au>
Date: Thu, 12 Oct 2006 08:52:33 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061010)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to fire a query ?
References: <003701c6ed1f$06842350$4b0310ac@bhavin>
In-Reply-To: <003701c6ed1f$06842350$4b0310ac@bhavin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bhavin Pandya wrote:
> 
> Hi guys,
> 
> How to fire "digital camera" when someone fire "digital cam" .. ?
> Do i need to make manual list for such items and look up at search time 
> or theree is any better way to do this...

You will need a list, but you may not need to make it manually (look at 
WordNet, I'm not saying that it will have this exact example you just 
gave, but it has many others which would at least cut down your workload.)

I would do this by extending QueryParser and overriding the relevant 
methods.  It will be somewhat more difficult to handle phrase queries 
since the number of permutations will increase as the number of words in 
the phrase increases.  But at least it would give you a way to do it 
without actually performing multiple searches.

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 00:37:43 2006
Return-Path: <java-user-return-23951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40525 invoked from network); 12 Oct 2006 00:37:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 00:37:43 -0000
Received: (qmail 81306 invoked by uid 500); 12 Oct 2006 00:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81276 invoked by uid 500); 12 Oct 2006 00:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81265 invoked by uid 99); 12 Oct 2006 00:37:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 17:37:35 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 17:37:34 -0700
Received: by py-out-1112.google.com with SMTP id i49so172108pyi
        for <java-user@lucene.apache.org>; Wed, 11 Oct 2006 17:37:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xhmrhwl6UnSlj4jMdR47MmfuNVaLaJMZNf8TQd2Lq0UnMvUi7FpqTzQ8FMaPaHm87ALsn7ah9i9+2IERjRfHa3TbE60CpsMIBkhD3ZKeikiCPFys2bUWO6SICGEc6W12nHiMtcxma6bgVdvx6jEs/fpuLo6trpXIoD2FP2Wa8AU=
Received: by 10.35.95.1 with SMTP id x1mr1946159pyl;
        Wed, 11 Oct 2006 17:37:13 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 11 Oct 2006 17:37:12 -0700 (PDT)
Message-ID: <359a92830610111737l64ca6a4do16f58bae898d334a@mail.gmail.com>
Date: Wed, 11 Oct 2006 20:37:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Big problem with big indexes
In-Reply-To: <bf1404350610111436t36d5817j47399c90bad53795@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4816_27119767.1160613433629"
References: <bf1404350610111436t36d5817j47399c90bad53795@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4816_27119767.1160613433629
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Something's extremely not right <G>....

First of all, I'm running a 1.4G index on a single machine and getting very
good results, under 10 seconds even for the most complex queries I'm firing.
This is with 870,000 documents, and includes sorting by criteria other than
relevance. And using span queries. And using wildcards that build their own
filters.

So, something must be very different about how you are using lucene to get
such poor search times.

So, please tell us significantly more about the structure of your index and
post the shortest example you can of your search code that demonstrates the
problem, and maybe some of the wiser heads than mine can help out too.

There should be no need to put the index in RAM, the index is just not big
enough.

So, some of the things I think would help analyze your problems....

1> hardware and op systems you're running on. Including how much memory
you're allowing your JVM to have.
2> network topology. If you're running the searchers locally and just
storing the indexes on remote machines, you're possibly having network
latency problems. Personally, I don't think your problem is properly
addressed by splitting your index. 600MB of index is just not big enough to
need this.
3> This *should* work on a local machine with just a single index. How much
trouble would it be to create it so? Can you try that and see what
difference that makes?
4> how did you build your index? Is it optimized? Can you give us an idea of
how many fields you are storing and some indication of the relative sizes of
each? Mostly, I'm asking whether you have a bunch of small fields and some
other very large ones.
5> Put one of the indexes on your local machine and get a copy of Luke
(google luke lucene) and fire off a few queries via Luke and tell us what
kind of results you get. Actually, this is probably the first thing you
should try. If you get radically different results with Luke than your code,
you can be pretty sure you're doing something out of the ordinary.
6> Timings of *only* the search code. By that I mean the time it takes for
searcher.search to complete. It's vaguely possible that the search is fine,
but something you're doing when processing the results is taking forever. I
have no evidence for this, of course, but it'd be a useful bit of
information.

I don't know if this helps much, but from your description, I think there's
a fundamental, correctable problem because nobody would use the product if
it gave such poor search times. And lots of people use it.

Best
Erick

On 10/11/06, Ariel Isaac Romero Cartaya <isaacrc82@gmail.com> wrote:
>
> Hi everybody:
>
>      I have a big problem making prallel searches in big indexes.
>      I have indexed with lucene over 60 000 articles, I have distributed
> the
> indexes in 10 computers nodes so each index not exceed the 60 MB of size.
> I
> makes parallel searches in those indexes but I get the search results
> after
> 40 MINUTES !!! Then I put the indexes in memory to do the parallel
> searches
> But still I get the search results after 3 minutes !!! that`s to mucho
> time
> waiting !!!
>   How Can I reduce the time of search ???
>   Could you help me please ???
>   I need help !!!!!
>
> Greetings
>
>

------=_Part_4816_27119767.1160613433629--

From java-user-return-23952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 00:48:17 2006
Return-Path: <java-user-return-23952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41887 invoked from network); 12 Oct 2006 00:48:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 00:48:16 -0000
Received: (qmail 90140 invoked by uid 500); 12 Oct 2006 00:48:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90104 invoked by uid 500); 12 Oct 2006 00:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90093 invoked by uid 99); 12 Oct 2006 00:48:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 17:48:10 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Oct 2006 17:48:09 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9C0ll2n200500
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 00:47:47 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9C0o9i23215504
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 02:50:09 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9C0llfE025914
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 02:47:47 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9C0llK1025909
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 02:47:47 +0200
In-Reply-To: <bf1404350610111436t36d5817j47399c90bad53795@mail.gmail.com>
Subject: Re: Big problem with big indexes
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF3912FE69.2713FB6F-ON88257205.0001C552-88257205.000454C7@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 11 Oct 2006 16:47:18 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 12/10/2006 02:50:09
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

These times really are not reasonable. But 60K do not seem much for Lucene.
I once indexed ~1M docs of ~20K each, that's ~20GB input collection. The
result index size was ~2.5GB and the search times for a short query 2-3
words free text (or) query was ~300ms for a "hot" query and ~900ms for a
"cold" query. This was a single machine.

It may very well be that your settings are different - e.g. fields stored
or not (I don't recall if my fields were stored), types of queries, etc.

If you can provide more information on the scenario, people on the list
running similar settings would be able to comment:
- what queries?
- what happens if you run the same query again?
- how often are you updating the index, optimizing, opening new searchers?
- do you reuse searchers or open a new one for each query?
- how many results are you asking for? (more than 50?)
- did you measure search time on a single searcher?
  (without the distribution, even for a subset of your documents)
  what times do you measure here?
- did you try to use MultiReader instead of MultiSeracher?

Also, I understand that you partitioned the index, so that you have 10
indexes each "covering" 6K docs out of your 60K docs, right? If so, is this
just a test, preparing for a bigger index? Because if 60K docs is what you
intend to index, at least by my experience, not sure that partitioning the
index is a must.

The FAQ is also helpful, for instance
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-47995886fbb41d8e7da103f8cda2d935f99dc6c8


Last, a word of encourage, based on my experience and what I saw in this
list, it is certain you would be accelerate this,

- Doron

"Ariel Isaac Romero Cartaya" <isaacrc82@gmail.com> wrote on 11/10/2006
14:36:31:

>  Hi everybody:
>
>      I have a big problem making prallel searches in big indexes.
>      I have indexed with lucene over 60 000 articles, I have distributed
the
> indexes in 10 computers nodes so each index not exceed the 60 MB of size.
I
> makes parallel searches in those indexes but I get the search results
after
> 40 MINUTES !!! Then I put the indexes in memory to do the parallel
searches
> But still I get the search results after 3 minutes !!! that`s to mucho
time
> waiting !!!
>   How Can I reduce the time of search ???
>   Could you help me please ???
>   I need help !!!!!
>
> Greetings


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 10:35:28 2006
Return-Path: <java-user-return-23953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22742 invoked from network); 12 Oct 2006 10:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 10:35:27 -0000
Received: (qmail 9146 invoked by uid 500); 12 Oct 2006 10:35:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9096 invoked by uid 500); 12 Oct 2006 10:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9085 invoked by uid 99); 12 Oct 2006 10:35:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 03:35:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [70.84.250.228] (HELO nix1.fastnix.com) (70.84.250.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 03:35:19 -0700
Received: from [134.159.98.226] (helo=youra9279112e3)
	by nix1.fastnix.com with esmtpa (Exim 4.52)
	id 1GXxtt-0006Ja-TG
	for java-user@lucene.apache.org; Thu, 12 Oct 2006 16:04:54 +0530
From: "sachin" <sachin.khaire@noemacorp.com>
To: <java-user@lucene.apache.org>
Subject: Document on Indexing in Lucene
Date: Thu, 12 Oct 2006 16:04:50 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <E07627674982E445BBD8236E84A6A39805D780EC@ctsinpunsxua>
Thread-Index: AcbmyHT3wdCny6+2RYKvLXIy3ZwZywHHNAKA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nix1.fastnix.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - noemacorp.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20061012103520.4891010FB013@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I have got lot of personal emails for sharing the "Lucene Investigation"
document. It is not possible to reply each of the Emails. So I am putting
this document inside my briefcase. Anyone interested please go to following
site and get the document.

http://briefcase.yahoo.com/pickupartistmistry

password: chotachetan


Document prescribes the detail information about Indexing of Lucene.
Document has enough diagrams simplify whole idea.

I am currently working on further Indexing using RDBMS.

It is nice if I receive good review comments for this document.

Thank you
Sachin Khaire






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 10:52:49 2006
Return-Path: <java-user-return-23954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26788 invoked from network); 12 Oct 2006 10:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 10:52:48 -0000
Received: (qmail 24411 invoked by uid 500); 12 Oct 2006 10:52:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24383 invoked by uid 500); 12 Oct 2006 10:52:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24372 invoked by uid 99); 12 Oct 2006 10:52:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 03:52:42 -0700
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=RCVD_FAKE_HELO_DOTCOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of prasenjitm@aol.com designates 152.163.225.130 as permitted sender)
Received: from [152.163.225.130] (HELO omr-r02.mail.aol.com) (152.163.225.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 03:52:41 -0700
Received: from aol.com (10.146.146.6)
  by omr-r02.mail.aol.com with ESMTP; 12 Oct 2006 06:52:20 -0400
Message-ID: <452E1A55.5090709@aol.com>
Date: Thu, 12 Oct 2006 16:05:01 +0530
From: Prasenjit Mukherjee <prasenjitm@aol.com>
User-Agent: Mozilla Thunderbird 1.0.7-1.4.1 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Document on Indexing in Lucene
References: <20061012103520.4891010FB013@asf.osuosl.org>
In-Reply-To: <20061012103520.4891010FB013@asf.osuosl.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

did someone delete the shared doc ?

sachin.khaire@noemacorp.com wrote:

>Hello,
>
>I have got lot of personal emails for sharing the "Lucene Investigation"
>document. It is not possible to reply each of the Emails. So I am putting
>this document inside my briefcase. Anyone interested please go to following
>site and get the document.
>
>http://briefcase.yahoo.com/pickupartistmistry
>
>password: chotachetan
>
>
>Document prescribes the detail information about Indexing of Lucene.
>Document has enough diagrams simplify whole idea.
>
>I am currently working on further Indexing using RDBMS.
>
>It is nice if I receive good review comments for this document.
>
>Thank you
>Sachin Khaire
>
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 14:18:05 2006
Return-Path: <java-user-return-23955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96507 invoked from network); 12 Oct 2006 14:18:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 14:18:04 -0000
Received: (qmail 70562 invoked by uid 500); 12 Oct 2006 14:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70543 invoked by uid 500); 12 Oct 2006 14:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70524 invoked by uid 99); 12 Oct 2006 14:17:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:17:57 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenenator@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:17:56 -0700
Received: by nz-out-0102.google.com with SMTP id z6so234534nzd
        for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 07:17:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=k7mat3Z5qWLnSGpP2CH/+Yuza0jPxcRs0HIWCXX6OY4b4iW8oscv4QCRalbMrtdF/0IlLnWDNVStzB4GAENb2HgAWA6U0zoI8hiL0xXJnS1vV8ZuNk8zLOAdkmMBWSoEj7UZdLWR/7jHP1Aezgnbrjojt7rmd1jAJcaB9IzcEtU=
Received: by 10.64.156.3 with SMTP id d3mr2825638qbe;
        Thu, 12 Oct 2006 07:17:35 -0700 (PDT)
Received: by 10.65.157.4 with HTTP; Thu, 12 Oct 2006 07:17:35 -0700 (PDT)
Message-ID: <8d3f78d30610120717x12d79283hac63689f7604a6c0@mail.gmail.com>
Date: Thu, 12 Oct 2006 09:17:35 -0500
From: "Apache Lucene" <lucenenator@gmail.com>
To: java-user@lucene.apache.org
Subject: IOException and index corruption
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46248_23894584.1160662655373"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_46248_23894584.1160662655373
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When I am adding a document to the lucene index if the method throws an
IOException and if I continue with adding other documents ignoring the
exception, will the index be corrupted? What happens to the fields which are
already written to the index?

------=_Part_46248_23894584.1160662655373--

From java-user-return-23956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 14:22:35 2006
Return-Path: <java-user-return-23956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98740 invoked from network); 12 Oct 2006 14:22:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 14:22:35 -0000
Received: (qmail 87922 invoked by uid 500); 12 Oct 2006 14:22:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87889 invoked by uid 500); 12 Oct 2006 14:22:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87878 invoked by uid 99); 12 Oct 2006 14:22:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:22:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:22:27 -0700
Received: from smtp-a.omnis.com (smtp-a.omnis.com [216.239.128.237])
	by smtp.omnis.com (Postfix) with ESMTP id 7A36E1BE45
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 07:21:35 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	(Authenticated sender: wataylor@as-st.com)
	by smtp-a.omnis.com (Postfix) with ESMTP id 766FD491311
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 07:21:35 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <20061012103520.4891010FB013@asf.osuosl.org>
References: <20061012103520.4891010FB013@asf.osuosl.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <06e3d8117bfddaaf8a63890a0453b87f@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Document on Indexing in Lucene
Date: Thu, 12 Oct 2006 10:55:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When I went there, I got a message that there were no shared folders in 
the brief case.
It never gave me an opportunity to enter the password.

Thanks.

Bill Taylor

On Oct 12, 2006, at 6:34 AM, sachin wrote:

> Hello,
>
> I have got lot of personal emails for sharing the "Lucene 
> Investigation"
> document. It is not possible to reply each of the Emails. So I am 
> putting
> this document inside my briefcase. Anyone interested please go to 
> following
> site and get the document.
>
> http://briefcase.yahoo.com/pickupartistmistry
>
> password: chotachetan
>
>
> Document prescribes the detail information about Indexing of Lucene.
> Document has enough diagrams simplify whole idea.
>
> I am currently working on further Indexing using RDBMS.
>
> It is nice if I receive good review comments for this document.
>
> Thank you
> Sachin Khaire
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 14:26:17 2006
Return-Path: <java-user-return-23957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 516 invoked from network); 12 Oct 2006 14:26:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 14:26:16 -0000
Received: (qmail 97269 invoked by uid 500); 12 Oct 2006 14:26:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97240 invoked by uid 500); 12 Oct 2006 14:26:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97226 invoked by uid 99); 12 Oct 2006 14:26:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:26:08 -0700
X-ASF-Spam-Status: No, hits=-5.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HABEAS_ACCREDITED_COI,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of MChenini@geico.com designates 205.143.200.58 as permitted sender)
Received: from [205.143.200.58] (HELO smtp58.geico.com) (205.143.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:26:07 -0700
X-IronPort-AV: i="4.09,301,1157342400"; 
   d="scan'208,217"; a="179009296:sNHT50423294"
X-GEICO-DISCLAIMER: Disclaimer added
Received: from GP2K0084V1.GEICO.corp.net ([10.49.32.212]) by gp2k0346.GEICO.corp.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 12 Oct 2006 10:25:46 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6EE0A.4D927A54"
Subject: a design question
Date: Thu, 12 Oct 2006 10:25:44 -0400
Message-ID: <5C039EC39FDBB74CBD2104A95C6FF1EB0628A44E@GP2K0084V1.GEICO.corp.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: a design question
Thread-Index: AcbuCk2XEJx4Y83WSQuojhQWf6Y/8A==
From: "Chenini, Mohamed " <MChenini@geico.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Oct 2006 14:25:46.0077 (UTC) FILETIME=[4E8090D0:01C6EE0A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6EE0A.4D927A54
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

Hello,

This is a design question: For Lucene to be able to process a million
documents and in the purpose for the search application to be scalable
and still have a good response time do we need to use an EJB container
such as Weblogic or is a Servlet container such as Tomcat sufficient to
do the job? This design should take into consideration remote searching.

Thanks,
Mohamed
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
This email/fax message is for the sole use of the intended
recipient(s) and may contain confidential and privileged information.
Any unauthorized review, use, disclosure or distribution of this
email/fax is prohibited. If you are not the intended recipient, please
destroy all paper and electronic copies of the original message.

------_=_NextPart_001_01C6EE0A.4D927A54--

From java-user-return-23958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 14:30:41 2006
Return-Path: <java-user-return-23958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1417 invoked from network); 12 Oct 2006 14:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 14:30:41 -0000
Received: (qmail 4964 invoked by uid 500); 12 Oct 2006 14:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4940 invoked by uid 500); 12 Oct 2006 14:30:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4929 invoked by uid 99); 12 Oct 2006 14:30:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:30:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of bouctou.tom@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:30:33 -0700
Received: by wx-out-0506.google.com with SMTP id s15so523829wxc
        for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 07:30:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=csB5efWrD7/F9ySfPc6xZyWNAs+a9kXGkIop50esJlH9QY6YuKaB5/y4Vk0PFZXj8lb9EsdfmcBDnbRatvgY09sqGHGBvLGKHoAnhoUSrjy5fRxULQsNK/mBr0Vzc2Gi7k6pVq4C1NdmiHvr0cf8mV/h8JS6mL1k3eDlZvthANI=
Received: by 10.70.118.4 with SMTP id q4mr3020808wxc;
        Thu, 12 Oct 2006 07:30:12 -0700 (PDT)
Received: from ?192.168.1.110? ( [141.157.187.124])
        by mx.google.com with ESMTP id h10sm2763346wxd.2006.10.12.07.30.11;
        Thu, 12 Oct 2006 07:30:11 -0700 (PDT)
Message-ID: <452E5172.9080303@gmail.com>
Date: Thu, 12 Oct 2006 10:30:10 -0400
From: Tom Bouctou <bouctou.tom@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Document on Indexing in Lucene
References: <20061012103520.4891010FB013@asf.osuosl.org> <06e3d8117bfddaaf8a63890a0453b87f@as-st.com>
In-Reply-To: <06e3d8117bfddaaf8a63890a0453b87f@as-st.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

go to http://briefcase.yahoo.com/pickupartistmistry
click on login
enter user pickupartistmistry
password: chotachetan
the document should be there

-tom


Bill Taylor wrote:
> When I went there, I got a message that there were no shared folders 
> in the brief case.
> It never gave me an opportunity to enter the password.
>
> Thanks.
>
> Bill Taylor
>
> On Oct 12, 2006, at 6:34 AM, sachin wrote:
>
>> Hello,
>>
>> I have got lot of personal emails for sharing the "Lucene Investigation"
>> document. It is not possible to reply each of the Emails. So I am 
>> putting
>> this document inside my briefcase. Anyone interested please go to 
>> following
>> site and get the document.
>>
>> http://briefcase.yahoo.com/pickupartistmistry
>>
>> password: chotachetan
>>
>>
>> Document prescribes the detail information about Indexing of Lucene.
>> Document has enough diagrams simplify whole idea.
>>
>> I am currently working on further Indexing using RDBMS.
>>
>> It is nice if I receive good review comments for this document.
>>
>> Thank you
>> Sachin Khaire
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 14:47:13 2006
Return-Path: <java-user-return-23959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6011 invoked from network); 12 Oct 2006 14:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 14:47:13 -0000
Received: (qmail 32670 invoked by uid 500); 12 Oct 2006 14:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32103 invoked by uid 500); 12 Oct 2006 14:47:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32092 invoked by uid 99); 12 Oct 2006 14:47:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:47:06 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Oct 2006 07:47:04 -0700
Received: (qmail 56877 invoked by uid 60001); 12 Oct 2006 14:46:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=JfkAi90r0nE4C1ndFS0Xpd6k8ZIyV/nyOEflWIYyKbOH5nCDjiQYmcmp0WqGRtPHu2bVyoSBxEC66JIBiU+Iv1VOXFWrImQWa4fsMq/egiE5PwEhXvGSxLX9j/D+TOQ6RZfFEvY1vk2kD8GZ+Two1NQTr7O2rdb2aCsVdokmECw=  ;
Message-ID: <20061012144642.56875.qmail@web26003.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Thu, 12 Oct 2006 14:46:42 GMT
Date: Thu, 12 Oct 2006 14:46:42 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: a design question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

EJB explicitly precludes you from accessing files, including via third part=
y libraries such as Lucene.=0A=0Ahttp://java.sun.com/blueprints/qanda/ejb_t=
ier/restrictions.html=0A=0AIn practice you may be able to get away with it =
but I see no particular reasons why using an EJB server should offer any be=
nefits over a Servlet container.=0A=0ACheers=0AMark=0A=0A----- Original Mes=
sage ----=0AFrom: "Chenini, Mohamed " <MChenini@geico.com>=0ATo: java-user@=
lucene.apache.org=0ASent: Thursday, 12 October, 2006 3:25:44 PM=0ASubject: =
a design question=0A=0AHello,=0A=0AThis is a design question: For Lucene to=
 be able to process a million=0Adocuments and in the purpose for the search=
 application to be scalable=0Aand still have a good response time do we nee=
d to use an EJB container=0Asuch as Weblogic or is a Servlet container such=
 as Tomcat sufficient to=0Ado the job? This design should take into conside=
ration remote searching.=0A=0AThanks,=0AMohamed=0A=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0AThis email/fax message is for the so=
le use of the intended=0Arecipient(s) and may contain confidential and priv=
ileged information.=0AAny unauthorized review, use, disclosure or distribut=
ion of this=0Aemail/fax is prohibited. If you are not the intended recipien=
t, please=0Adestroy all paper and electronic copies of the original message=
.=0A=0A=0A=0A=0ASend instant messages to your online friends http://uk.mess=
enger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 14:50:23 2006
Return-Path: <java-user-return-23960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7509 invoked from network); 12 Oct 2006 14:50:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 14:50:22 -0000
Received: (qmail 42445 invoked by uid 500); 12 Oct 2006 14:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42422 invoked by uid 500); 12 Oct 2006 14:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42411 invoked by uid 99); 12 Oct 2006 14:50:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:50:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 07:50:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 616EF30EFC17; Thu, 12 Oct 2006 10:49:52 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id E843630EFC17
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 10:49:50 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8d3f78d30610120717x12d79283hac63689f7604a6c0@mail.gmail.com>
References: <8d3f78d30610120717x12d79283hac63689f7604a6c0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3291C8A8-141A-49EA-96FF-168AF753E290@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: IOException and index corruption
Date: Thu, 12 Oct 2006 10:49:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 12, 2006, at 10:17 AM, Apache Lucene wrote:
> When I am adding a document to the lucene index if the method  
> throws an
> IOException and if I continue with adding other documents ignoring the
> exception, will the index be corrupted? What happens to the fields  
> which are
> already written to the index?

This would surely depend on what caused the IOException.  I would not  
recommend continuing to add documents in light of an IOException though.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 15:04:32 2006
Return-Path: <java-user-return-23961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11616 invoked from network); 12 Oct 2006 15:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 15:04:31 -0000
Received: (qmail 70944 invoked by uid 500); 12 Oct 2006 15:04:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70917 invoked by uid 500); 12 Oct 2006 15:04:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70906 invoked by uid 99); 12 Oct 2006 15:04:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 08:04:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 08:04:23 -0700
Received: from smtp-a.omnis.com (smtp-a.omnis.com [216.239.128.237])
	by smtp.omnis.com (Postfix) with ESMTP id B73BF1CF0D
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 08:04:01 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	(Authenticated sender: wataylor@as-st.com)
	by smtp-a.omnis.com (Postfix) with ESMTP id 8C08F46F79C
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 08:04:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <20061012144642.56875.qmail@web26003.mail.ukl.yahoo.com>
References: <20061012144642.56875.qmail@web26003.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b8f506fa2d005fede631f67be572f68b@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: a design question
Date: Thu, 12 Oct 2006 11:38:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IN THEORY, EJB containers are better able than Tomcat to spread 
incoming requests over a multitude of servers.  There was considerable 
discussion some time ago about index search speed on a single 
processor.   I do not remember the details, but there was some 
information about how fast a search might be expected to go with one 
processor.

If that is fast enough, Tomcat should suffice.

My search application has a few short documents so my experience is not 
relevant.

On Oct 12, 2006, at 10:46 AM, mark harwood wrote:

> EJB explicitly precludes you from accessing files, including via third 
> party libraries such as Lucene.
>
> http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html
>
> In practice you may be able to get away with it but I see no 
> particular reasons why using an EJB server should offer any benefits 
> over a Servlet container.
>
> Cheers
> Mark
>
> ----- Original Message ----
> From: "Chenini, Mohamed " <MChenini@geico.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, 12 October, 2006 3:25:44 PM
> Subject: a design question
>
> Hello,
>
> This is a design question: For Lucene to be able to process a million
> documents and in the purpose for the search application to be scalable
> and still have a good response time do we need to use an EJB container
> such as Weblogic or is a Servlet container such as Tomcat sufficient to
> do the job? This design should take into consideration remote 
> searching.
>
> Thanks,
> Mohamed
> ====================
> This email/fax message is for the sole use of the intended
> recipient(s) and may contain confidential and privileged information.
> Any unauthorized review, use, disclosure or distribution of this
> email/fax is prohibited. If you are not the intended recipient, please
> destroy all paper and electronic copies of the original message.
>
>
>
>
> Send instant messages to your online friends 
> http://uk.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 15:14:09 2006
Return-Path: <java-user-return-23962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15263 invoked from network); 12 Oct 2006 15:14:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 15:14:08 -0000
Received: (qmail 89439 invoked by uid 500); 12 Oct 2006 15:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89407 invoked by uid 500); 12 Oct 2006 15:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89388 invoked by uid 99); 12 Oct 2006 15:13:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 08:13:57 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenenator@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 08:13:56 -0700
Received: by nz-out-0102.google.com with SMTP id z6so245305nzd
        for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 08:13:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hlWrXhMQzqhPjMjUY9AXy5+EgU23LXK3WqYHxKJWZUJOxDhEYU9HmWyjUHwZH6njW8LWj3S+kSspW3giU5OIRRYm4QHGZel4z5+ElU3lbwbcyKNebvhJz20aIPw5rfrAc2neLZJ9+wIYxkJPUleF6cwyNiFk5l55vHnsINpgiN0=
Received: by 10.64.156.12 with SMTP id d12mr2936498qbe;
        Thu, 12 Oct 2006 08:13:34 -0700 (PDT)
Received: by 10.65.157.4 with HTTP; Thu, 12 Oct 2006 08:13:34 -0700 (PDT)
Message-ID: <8d3f78d30610120813i1a5c59ffta0cb8f48734e0bad@mail.gmail.com>
Date: Thu, 12 Oct 2006 10:13:34 -0500
From: "Apache Lucene" <lucenenator@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IOException and index corruption
In-Reply-To: <3291C8A8-141A-49EA-96FF-168AF753E290@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47289_19297184.1160666014363"
References: <8d3f78d30610120717x12d79283hac63689f7604a6c0@mail.gmail.com>
	 <3291C8A8-141A-49EA-96FF-168AF753E290@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47289_19297184.1160666014363
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

For example in the following statement
 doc.add(new Field("contents", parser.getReader(), Field.TermVector.YES));

The reader is causing the IOException when internally invertDocument()
method is called where tokenstream is generated from the reader. I am not
worried if the document info is corrupted in the index. But what I care the
most is if it affects other index data.

What is the best way to recover this? Unfortunately there is no easy way to
delete the document. If I keep a counter and track down this document. Can I
delete the document with IndexReader.deleteDocument(docNum); ?


On 10/12/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Oct 12, 2006, at 10:17 AM, Apache Lucene wrote:
> > When I am adding a document to the lucene index if the method
> > throws an
> > IOException and if I continue with adding other documents ignoring the
> > exception, will the index be corrupted? What happens to the fields
> > which are
> > already written to the index?
>
> This would surely depend on what caused the IOException.  I would not
> recommend continuing to add documents in light of an IOException though.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_47289_19297184.1160666014363--

From java-user-return-23963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 19:05:12 2006
Return-Path: <java-user-return-23963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17412 invoked from network); 12 Oct 2006 19:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 19:05:11 -0000
Received: (qmail 32208 invoked by uid 500); 12 Oct 2006 19:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32178 invoked by uid 500); 12 Oct 2006 19:05:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32167 invoked by uid 99); 12 Oct 2006 19:05:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 12:05:04 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.199.167] (HELO web81703.mail.mud.yahoo.com) (68.142.199.167)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Oct 2006 12:05:02 -0700
Received: (qmail 1915 invoked by uid 60001); 12 Oct 2006 19:04:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=Ba03Jmp2cTeHhaFq2RMZ420QnOCYGhpTWJfWAOhyH2FippgYotFgi6tyuJpk0x8Nldc3NGbwtYhourNXpvTB92PgNg35u81hZ0OEqZgfx69w/5U5ORp+G/74s3Y69j1mweXHLmaB8cTu0PHokKcprm36HmGYMGgannRFYSRCkA4=  ;
Message-ID: <20061012190442.1913.qmail@web81703.mail.mud.yahoo.com>
Received: from [66.201.45.201] by web81703.mail.mud.yahoo.com via HTTP; Thu, 12 Oct 2006 12:04:42 PDT
Date: Thu, 12 Oct 2006 12:04:42 -0700 (PDT)
From: <rayvittal-lists@yahoo.com>
Subject: Avoiding sort by date
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi folks,

I am using Lucene 2.0

In our application, I am indexing a stream of documents. Each document is fairly small (< 1 KB), but there can be 10's of millions of documents. Each document has a Timestamp field. Users can enter free-form searches and a date/time range. They are most interested in the most recent documents (as indicated in the Timestamp field). An obvious way to do achieve this is to 
searcher = new IndexSearcher(indexDir);
RangeFilter rf = new RangeFilter("day", start, end, true, true);
hits = searcher.search(query,rf,new Sort(new SortField[]{
                    new SortField("timestamp",SortField.STRING,true )}));

Depending on the query, there may be millions of hits results. If the same query is executed several times in quick succession, the heap quickly runs out of memory. I suspect that this is because Lucene needs to load all the millions of hits in order to sort the results.

My idea is to avoid the Sort() entirely. Is there a way, during indexing (or by setting Weights inside the query) to automatically set the score for more recent documents higher?

Thanks
--
Solidguy



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 19:59:30 2006
Return-Path: <java-user-return-23964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38934 invoked from network); 12 Oct 2006 19:59:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 19:59:30 -0000
Received: (qmail 34853 invoked by uid 500); 12 Oct 2006 19:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34807 invoked by uid 500); 12 Oct 2006 19:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34796 invoked by uid 99); 12 Oct 2006 19:59:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 12:59:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 12:59:21 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2A7E130EFC17; Thu, 12 Oct 2006 15:59:00 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0194530EFC17
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 15:58:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20061012190442.1913.qmail@web81703.mail.mud.yahoo.com>
References: <20061012190442.1913.qmail@web81703.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FAD25459-91BA-41CB-AF89-DD16FF201B09@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Avoiding sort by date
Date: Thu, 12 Oct 2006 15:58:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You really should be using the same IndexSearcher for successive  
searches.  Sorting works best when done with a "warm" searcher.  Have  
a look at Solr's warming strategy, and consider adopting that in some  
way.

	Erik


On Oct 12, 2006, at 3:04 PM, <rayvittal-lists@yahoo.com> wrote:

> Hi folks,
>
> I am using Lucene 2.0
>
> In our application, I am indexing a stream of documents. Each  
> document is fairly small (< 1 KB), but there can be 10's of  
> millions of documents. Each document has a Timestamp field. Users  
> can enter free-form searches and a date/time range. They are most  
> interested in the most recent documents (as indicated in the  
> Timestamp field). An obvious way to do achieve this is to
> searcher = new IndexSearcher(indexDir);
> RangeFilter rf = new RangeFilter("day", start, end, true, true);
> hits = searcher.search(query,rf,new Sort(new SortField[]{
>                     new SortField 
> ("timestamp",SortField.STRING,true )}));
>
> Depending on the query, there may be millions of hits results. If  
> the same query is executed several times in quick succession, the  
> heap quickly runs out of memory. I suspect that this is because  
> Lucene needs to load all the millions of hits in order to sort the  
> results.
>
> My idea is to avoid the Sort() entirely. Is there a way, during  
> indexing (or by setting Weights inside the query) to automatically  
> set the score for more recent documents higher?
>
> Thanks
> --
> Solidguy
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 21:17:42 2006
Return-Path: <java-user-return-23965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66026 invoked from network); 12 Oct 2006 21:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 21:17:42 -0000
Received: (qmail 56124 invoked by uid 500); 12 Oct 2006 21:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55855 invoked by uid 500); 12 Oct 2006 21:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55844 invoked by uid 99); 12 Oct 2006 21:17:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 14:17:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 14:17:34 -0700
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 86DDE1BE6
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 15:17:14 -0600 (MDT)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 09889-01 for <java-user@lucene.apache.org>;
	Thu, 12 Oct 2006 15:17:07 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id B1E9F2390
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 15:17:07 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6EE43.C5E5E70C"
Subject: Large index question
Date: Thu, 12 Oct 2006 15:14:57 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Large index question
Thread-Index: AcbuQ3gfSd8kWHD9QtSd7LUcVUJm1A==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6EE43.C5E5E70C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Supposed I want to index 500,000 documents (average document size is
4kBs).  Let's assume I create a single index and that the index is
static (I'm not going to add any new documents to it).  I would guess
the index would be around 2GB. =20

=20

Now, I do searches against this on a somewhat beefy machine (2GB RAM,
Core 2 Duo, Windows XP).  Does anyone have any idea what kinds of search
times I can expect for moderately complicated searches (several sets of
keywords against several fields)?  Are there things I can do to increase
search performance?  For example, does Lucene like lots of RAM, lots of
CPU, faster HD, all of the above?  Am I better splitting the index file
into 2 (N?) versions and search on multiple indexes simultaneously? =20

=20

Anyone have any thoughts about this?

=20

Scott=20

=20


------_=_NextPart_001_01C6EE43.C5E5E70C--

From java-user-return-23966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 22:04:34 2006
Return-Path: <java-user-return-23966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83860 invoked from network); 12 Oct 2006 22:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 22:04:33 -0000
Received: (qmail 11196 invoked by uid 500); 12 Oct 2006 22:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11165 invoked by uid 500); 12 Oct 2006 22:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11152 invoked by uid 99); 12 Oct 2006 22:04:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 15:04:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 15:04:26 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9CM44YQ155602
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 22:04:04 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9CM6RQa2637836
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 00:06:27 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9CM44ba011258
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 00:04:04 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9CM447e011253
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 00:04:04 +0200
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
Subject: Re: Large index question
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF378BBBE8.E60CAE5F-ON88257205.0075D750-88257205.007744F3@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 12 Oct 2006 13:42:44 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 13/10/2006 00:06:27
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"Scott Smith" <ssmith@mainstreamdata.com> wrote on 12/10/2006 14:14:57:

> Supposed I want to index 500,000 documents (average document size is
> 4kBs).  Let's assume I create a single index and that the index is
> static (I'm not going to add any new documents to it).  I would guess
> the index would be around 2GB.

The input data size is ~2GB but the index itself may be smaller,
particularly if not storing fields/termvectors.

> Now, I do searches against this on a somewhat beefy machine (2GB RAM,
> Core 2 Duo, Windows XP).  Does anyone have any idea what kinds of search
> times I can expect for moderately complicated searches (several sets of
> keywords against several fields)?  Are there things I can do to increase
> search performance?  For example, does Lucene like lots of RAM, lots of
> CPU, faster HD, all of the above?  Am I better splitting the index file
> into 2 (N?) versions and search on multiple indexes simultaneously?
>
> Anyone have any thoughts about this?

Indexing time (at list for plain text or simple HTML) would be stg near
half an hour, so you might just give it a try. If index size turns out to
be small enough to reside in RAM (and you don't need the RAM for other
activities at the same time) you could try RAMDirectory. I wonder if anyone
ever compared RAMDir to a "hot" searcher above FSDir, - seems that having
all the index data in RAM would be faster than relying on IO caching by the
system, but if for some reason the RAMDir cannot be in RAM all the time, I
would assume that paging in/out would make it more costly than using FSDir
and just count on system IO caching. In the latter case see relevant
discussions on warming a searcher and caching filters.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 23:11:39 2006
Return-Path: <java-user-return-23967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4557 invoked from network); 12 Oct 2006 23:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 23:11:39 -0000
Received: (qmail 10083 invoked by uid 500); 12 Oct 2006 23:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10045 invoked by uid 500); 12 Oct 2006 23:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10030 invoked by uid 99); 12 Oct 2006 23:11:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 16:11:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.225.94] (HELO alnrmhc14.comcast.net) (204.127.225.94)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 16:11:29 -0700
Received: from ebola.biohz.net ([71.198.37.44])
          by comcast.net (alnrmhc14) with ESMTP
          id <20061012231108b1400j83e2e>; Thu, 12 Oct 2006 23:11:08 +0000
Received: from CKMPC08 (localhost.biohz.net [127.0.0.1])
	by ebola.biohz.net (Postfix) with SMTP id 80F4018775A
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 16:08:20 -0700 (PDT)
Message-ID: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
From: "Renaud Waldura" <renaud+lucene@waldura.com>
To: <java-user@lucene.apache.org>
Subject: QueryParser Is Badly Broken
Date: Thu, 12 Oct 2006 16:11:07 -0700
Organization: The Waldura Foundation
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm developing an application used by scientists -- people who have a pretty 
good idea of what logic is -- and they were shocked to find out that neither 
of these queries return the same results:

1- banana AND apple OR orange
2- banana AND (apple OR orange)
3- (banana AND apple) OR orange

I'd expect (1) to be either (2) or (3), but it turns out it's parsed as 
"+banana apple orange". I was rather, uh, dismayed by this find, as it 
doesn't seem to make sense.

I just spent half a day reading up on the various ways QueryParser is 
broken, by going through the bugs and the mailing-list archives. And I'm 
still unable to come to a conclusion. Here's where I'm at:

    a- queries which mix boolean operators require strict parenthesizing to 
work right

    b- "+" isn't shorthand for "AND"; using it with "AND"/"OR"/"NOT" and the 
default operator "" rarely does what you expect

    c- the stock QueryParser doesn't work well in these cases

    d- there's a new PrecedenceQueryParser at 
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneous that 
solves *some* of the issues but creates others

    e- there is a non-Lucene effort to create a query parser with a 
different syntax at http://famestalker.com/devwiki/

While we are also developing a query-building UI, users must be able to 
enter text queries as well. What do other folks do? I mean, this is pretty 
bad. I can hardly go back to my scientists and tell them Lucene is unable to 
handle 2 boolean operators, that they should parenthesize everything by 
hand. I mean, that's just cheesy.

--Renaud



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 23:55:45 2006
Return-Path: <java-user-return-23968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17297 invoked from network); 12 Oct 2006 23:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 23:55:45 -0000
Received: (qmail 84517 invoked by uid 500); 12 Oct 2006 23:55:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84425 invoked by uid 500); 12 Oct 2006 23:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84414 invoked by uid 99); 12 Oct 2006 23:55:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 16:55:38 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 16:55:37 -0700
Received: by py-out-1112.google.com with SMTP id i49so562098pyi
        for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 16:55:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EQP3cb7vEfj2RvZCuAbaa23iT+jCchbYhj6R7ZZqg3asr3jBGL37FHKosetf8cCZazimnG+sZAp33iJA0eFLkHxRx/JRtvqBMUUndq2vxxb61TNZtc6O6bWbTiMATQ9/81fPC4kEWNGCxhmS8mUWd3TiZKoxQdEZImKyMLKR50A=
Received: by 10.35.95.1 with SMTP id x1mr4308962pyl;
        Thu, 12 Oct 2006 16:55:07 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Thu, 12 Oct 2006 16:55:07 -0700 (PDT)
Message-ID: <ab0709bf0610121655u6043ea97u69c09dba02f57975@mail.gmail.com>
Date: Thu, 12 Oct 2006 19:55:07 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser Is Badly Broken
In-Reply-To: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31037_24891930.1160697307554"
References: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_31037_24891930.1160697307554
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There is also the Surround Query Parser in contrib by the way...I would bet
that Paul will tell you that it does not have these issues. I can't wait to
see the replies on this one...I didn't realize that the QueryParser had
these problems and am a bit skeptical...unfortunately I am away from home
and cannot check it out.

On another note...http://famestalker.com/devwik/ will be done soon...I only
have not gotten around to finishing the final touches because there did not
appear to be a lot of initial interest (and what there was has waned
drastically) and I am not ready to use it myself yet. It does correctly
handle order of operations however, and as far as I know is the only parser
to handle arbitray nesting and mixing of boolean and proximity queries.
(perhaps surround does as well...I would be really interested to know, but I
assume that it handles only the base cases ie not "(car & basket) within 2
of (horse & carriage within 3 of car). Of course who really cares about such
queries, but hey ;)

You'll get better advice from others more experienced, but my bet is that
Paul's surround parser is top notch and correctly does what you want.

- Mark

>

On 10/12/06, Renaud Waldura <renaud+lucene@waldura.com> wrote:
>
> I'm developing an application used by scientists -- people who have a
> pretty
> good idea of what logic is -- and they were shocked to find out that
> neither
> of these queries return the same results:
>
> 1- banana AND apple OR orange
> 2- banana AND (apple OR orange)
> 3- (banana AND apple) OR orange
>
> I'd expect (1) to be either (2) or (3), but it turns out it's parsed as
> "+banana apple orange". I was rather, uh, dismayed by this find, as it
> doesn't seem to make sense.
>
> I just spent half a day reading up on the various ways QueryParser is
> broken, by going through the bugs and the mailing-list archives. And I'm
> still unable to come to a conclusion. Here's where I'm at:
>
>     a- queries which mix boolean operators require strict parenthesizing
> to
> work right
>
>     b- "+" isn't shorthand for "AND"; using it with "AND"/"OR"/"NOT" and
> the
> default operator "" rarely does what you expect
>
>     c- the stock QueryParser doesn't work well in these cases
>
>     d- there's a new PrecedenceQueryParser at
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneousthat
> solves *some* of the issues but creates others
>
>     e- there is a non-Lucene effort to create a query parser with a
> different syntax at http://famestalker.com/devwiki/
>
> While we are also developing a query-building UI, users must be able to
> enter text queries as well. What do other folks do? I mean, this is pretty
> bad. I can hardly go back to my scientists and tell them Lucene is unable
> to
> handle 2 boolean operators, that they should parenthesize everything by
> hand. I mean, that's just cheesy.
>
> --Renaud
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31037_24891930.1160697307554--

From java-user-return-23969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 12 23:55:55 2006
Return-Path: <java-user-return-23969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17351 invoked from network); 12 Oct 2006 23:55:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Oct 2006 23:55:55 -0000
Received: (qmail 85843 invoked by uid 500); 12 Oct 2006 23:55:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85812 invoked by uid 500); 12 Oct 2006 23:55:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85801 invoked by uid 99); 12 Oct 2006 23:55:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 16:55:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 16:55:47 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id BCCECB735C
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 09:54:36 +1000 (EST)
Message-ID: <452ED600.8080901@nuix.com.au>
Date: Fri, 13 Oct 2006 09:55:44 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061011)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser Is Badly Broken
References: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
In-Reply-To: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Renaud Waldura wrote:
> While we are also developing a query-building UI, users must be able to 
> enter text queries as well. What do other folks do? I mean, this is 
> pretty bad. I can hardly go back to my scientists and tell them Lucene 
> is unable to handle 2 boolean operators, that they should parenthesize 
> everything by hand. I mean, that's just cheesy.

What I'm doing for our application is to advise users to put in the 
parentheses.  It's cheesy, but safe.

What I would do if the application were relatively new is to advise 
against using AND/OR/NOT, and using + and - instead since it seems that 
syntax is relatively reliable.  Actually I would probably consider 
removing the AND/OR/NOT syntax from the query parser itself.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 00:11:25 2006
Return-Path: <java-user-return-23970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20409 invoked from network); 13 Oct 2006 00:11:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 00:11:25 -0000
Received: (qmail 5609 invoked by uid 500); 13 Oct 2006 00:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5027 invoked by uid 500); 13 Oct 2006 00:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5015 invoked by uid 99); 13 Oct 2006 00:11:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:11:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 17:11:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E926E30EFC19; Thu, 12 Oct 2006 20:10:56 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 662F930EFC17
	for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 20:10:53 -0400 (EDT)
In-Reply-To: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
References: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EE055BBB-F8E1-4D25-9B2F-0401D2655CC7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser Is Badly Broken
Date: Thu, 12 Oct 2006 20:10:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 12, 2006, at 7:11 PM, Renaud Waldura wrote:
> I'm developing an application used by scientists -- people who have  
> a pretty good idea of what logic is -- and they were shocked to  
> find out that neither of these queries return the same results:
>
> 1- banana AND apple OR orange
> 2- banana AND (apple OR orange)
> 3- (banana AND apple) OR orange
>
> I'd expect (1) to be either (2) or (3), but it turns out it's  
> parsed as "+banana apple orange". I was rather, uh, dismayed by  
> this find, as it doesn't seem to make sense.

It's not news to the die hard Luceners that QueryParser is mangled.   
It's a kitchen sink syntax with more bells and whistles than most  
applications need.  I've yet to come across  a project that has used  
QueryParser as-is, not because it's "broken", but because every  
application has been unique in how queries are expressed by users.

>    a- queries which mix boolean operators require strict  
> parenthesizing to work right
>
>    b- "+" isn't shorthand for "AND"; using it with "AND"/"OR"/"NOT"  
> and the default operator "" rarely does what you expect

AND/OR are oddly named in terms of how they map to the underlying  
BooleanQuery they create.  AND really means to make both clauses  
MUST, and OR means to make them SHOULD.  And, as you've painfully  
experienced, the precedence is not "logical".

>    c- the stock QueryParser doesn't work well in these cases
>
>    d- there's a new PrecedenceQueryParser at http://svn.apache.org/ 
> repos/asf/lucene/java/trunk/contrib/miscellaneous that solves  
> *some* of the issues but creates others

What issues does PQP create?  Perhaps we can get those fixed and  
replace QueryParser with it.

> While we are also developing a query-building UI, users must be  
> able to enter text queries as well. What do other folks do? I mean,  
> this is pretty bad. I can hardly go back to my scientists and tell  
> them Lucene is unable to handle 2 boolean operators, that they  
> should parenthesize everything by hand. I mean, that's just cheesy.

It really boils down to user interface, from my perspective.  Do the  
users need to type in all of that kind of logic?  Or could they be  
presented with a simpler syntax with just +/- in front of terms to  
indicate MUST/NOT (and SHOULD with no prefix)?  Perhaps they could be  
presented with two text boxes, one for required terms, and another  
for optional terms (and maybe another for prohibited terms)?

We are all certainly very open to improving QueryParser, or PQP.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 01:25:50 2006
Return-Path: <java-user-return-23971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45633 invoked from network); 13 Oct 2006 01:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 01:25:50 -0000
Received: (qmail 66682 invoked by uid 500); 13 Oct 2006 01:25:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66653 invoked by uid 500); 13 Oct 2006 01:25:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66642 invoked by uid 99); 13 Oct 2006 01:25:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 18:25:42 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.199.173] (HELO web81709.mail.mud.yahoo.com) (68.142.199.173)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Oct 2006 18:25:41 -0700
Received: (qmail 49577 invoked by uid 60001); 13 Oct 2006 01:25:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=BxzKwyJDiSz5H5TWMUMxZgOjESIK+B32Bg/p4NIprsYt2JmjQL3NI25vqKsyxf4IqjNOQJGpnKdUXpviXQr1CDVMI/FRncFp9dxafnTVO9Vxgk/9Qg2HK44OiKBuvKC3jLL5QvxTX3a/m5K8hR17Tk5cnKhw61rfIEbus4dmKno=  ;
Message-ID: <20061013012519.49569.qmail@web81709.mail.mud.yahoo.com>
Received: from [66.201.45.201] by web81709.mail.mud.yahoo.com via HTTP; Thu, 12 Oct 2006 18:25:19 PDT
Date: Thu, 12 Oct 2006 18:25:19 -0700 (PDT)
From: <rayvittal-lists@yahoo.com>
Subject: Re: Avoiding sort by date
To: java-user@lucene.apache.org
In-Reply-To: <FAD25459-91BA-41CB-AF89-DD16FF201B09@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, Erik for the pointer to Solr.

Since the document index is added to frequently, creating new IndexSearchers is required anyway. We plan to 'age' out already created IndexSearcher and create new ones every few minutes. Solr's cache regeneration would be useful in this scenario.

Does the Sort function create some kind of internal cache? Observing the heap, it seems that a full garbage collection after calling IndexSearcher.close() still leaves a lot of memory occupied.

Thanks
--
Solidguy

----- Original Message ----
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
Sent: Thursday, October 12, 2006 12:58:50 PM
Subject: Re: Avoiding sort by date

You really should be using the same IndexSearcher for successive  
searches.  Sorting works best when done with a "warm" searcher.  Have  
a look at Solr's warming strategy, and consider adopting that in some  
way.

    Erik


On Oct 12, 2006, at 3:04 PM, <rayvittal-lists@yahoo.com> wrote:

> Hi folks,
>
> I am using Lucene 2.0
>
> In our application, I am indexing a stream of documents. Each  
> document is fairly small (< 1 KB), but there can be 10's of  
> millions of documents. Each document has a Timestamp field. Users  
> can enter free-form searches and a date/time range. They are most  
> interested in the most recent documents (as indicated in the  
> Timestamp field). An obvious way to do achieve this is to
> searcher = new IndexSearcher(indexDir);
> RangeFilter rf = new RangeFilter("day", start, end, true, true);
> hits = searcher.search(query,rf,new Sort(new SortField[]{
>                     new SortField 
> ("timestamp",SortField.STRING,true )}));
>
> Depending on the query, there may be millions of hits results. If  
> the same query is executed several times in quick succession, the  
> heap quickly runs out of memory. I suspect that this is because  
> Lucene needs to load all the millions of hits in order to sort the  
> results.
>
> My idea is to avoid the Sort() entirely. Is there a way, during  
> indexing (or by setting Weights inside the query) to automatically  
> set the score for more recent documents higher?
>
> Thanks
> --
> Solidguy
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 01:52:16 2006
Return-Path: <java-user-return-23972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53819 invoked from network); 13 Oct 2006 01:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 01:52:16 -0000
Received: (qmail 80719 invoked by uid 500); 13 Oct 2006 01:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80688 invoked by uid 500); 13 Oct 2006 01:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80677 invoked by uid 99); 13 Oct 2006 01:52:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 18:52:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 18:52:08 -0700
Received: by nf-out-0910.google.com with SMTP id d4so1374145nfe
        for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 18:51:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eiTd1tqMOPDyAKZtP7lco4A0oipFQ41tkf8LEN/s9aU1YNjukKrxotoC4y88r0zWGvPY1hqq7Kpt/Gtq8g72zckc+okZOtUXN3MSxg8eNVIGqs3jEavL8mLD7ul089kR1P40rGftUhfcw+aOu/hwZ4Zz88/7uOoeHkoCqZ3oaKM=
Received: by 10.82.98.13 with SMTP id v13mr466280bub;
        Thu, 12 Oct 2006 18:51:46 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Thu, 12 Oct 2006 18:51:46 -0700 (PDT)
Message-ID: <6e3ae6310610121851s79ea1f8bt151e88082824ef2f@mail.gmail.com>
Date: Thu, 12 Oct 2006 18:51:46 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a design question
In-Reply-To: <b8f506fa2d005fede631f67be572f68b@as-st.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061012144642.56875.qmail@web26003.mail.ukl.yahoo.com>
	 <b8f506fa2d005fede631f67be572f68b@as-st.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think a standalone J2EE application will be good and better loose
coupling than EJB. You can seperate memory, disk, and CPU resources
from your main application. You can send results back in XML, JSON, or
other formats.

Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 10/12/06, Bill Taylor <wataylor@as-st.com> wrote:
> IN THEORY, EJB containers are better able than Tomcat to spread
> incoming requests over a multitude of servers.  There was considerable
> discussion some time ago about index search speed on a single
> processor.   I do not remember the details, but there was some
> information about how fast a search might be expected to go with one
> processor.
>
> If that is fast enough, Tomcat should suffice.
>
> My search application has a few short documents so my experience is not
> relevant.
>
> On Oct 12, 2006, at 10:46 AM, mark harwood wrote:
>
> > EJB explicitly precludes you from accessing files, including via third
> > party libraries such as Lucene.
> >
> > http://java.sun.com/blueprints/qanda/ejb_tier/restrictions.html
> >
> > In practice you may be able to get away with it but I see no
> > particular reasons why using an EJB server should offer any benefits
> > over a Servlet container.
> >
> > Cheers
> > Mark
> >
> > ----- Original Message ----
> > From: "Chenini, Mohamed " <MChenini@geico.com>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, 12 October, 2006 3:25:44 PM
> > Subject: a design question
> >
> > Hello,
> >
> > This is a design question: For Lucene to be able to process a million
> > documents and in the purpose for the search application to be scalable
> > and still have a good response time do we need to use an EJB container
> > such as Weblogic or is a Servlet container such as Tomcat sufficient to
> > do the job? This design should take into consideration remote
> > searching.
> >
> > Thanks,
> > Mohamed
> > ====================
> > This email/fax message is for the sole use of the intended
> > recipient(s) and may contain confidential and privileged information.
> > Any unauthorized review, use, disclosure or distribution of this
> > email/fax is prohibited. If you are not the intended recipient, please
> > destroy all paper and electronic copies of the original message.
> >
> >
> >
> >
> > Send instant messages to your online friends
> > http://uk.messenger.yahoo.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 02:00:20 2006
Return-Path: <java-user-return-23973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58748 invoked from network); 13 Oct 2006 02:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 02:00:19 -0000
Received: (qmail 87576 invoked by uid 500); 13 Oct 2006 02:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87546 invoked by uid 500); 13 Oct 2006 02:00:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87534 invoked by uid 99); 13 Oct 2006 02:00:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 19:00:13 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 19:00:11 -0700
Received: by nf-out-0910.google.com with SMTP id a4so1010819nfc
        for <java-user@lucene.apache.org>; Thu, 12 Oct 2006 18:59:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=b5mA0JUEwGi2rj1JdGJrVwT0J0g08WvVbmb9ddtW3jvzOVkyCZileOFqIvXwOkymKpkS9Li1CNhIKOjWDwjFXN6z1E/CU42sPpJj55Poeo395hpb1X+le+F1hpktqQgfCDO4G8anEYSoiyDXCwTg8P9sdqFd/bdkXNrFb8YXREM=
Received: by 10.82.107.15 with SMTP id f15mr465562buc;
        Thu, 12 Oct 2006 18:59:49 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Thu, 12 Oct 2006 18:59:48 -0700 (PDT)
Message-ID: <6e3ae6310610121859q19092c49wf1c30407c2b0e747@mail.gmail.com>
Date: Thu, 12 Oct 2006 18:59:48 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Large index question
In-Reply-To: <OF378BBBE8.E60CAE5F-ON88257205.0075D750-88257205.007744F3@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
	 <OF378BBBE8.E60CAE5F-ON88257205.0075D750-88257205.007744F3@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lots of memory will help a lot. I have a customer of DBSight and he is
using Intel Core Duo, and configure everything in memory. The index
size is about 700M. When I checked his system's average response time,
it's 12ms! I guess you can estimate what you will get from your beefy
machine.

So it maybe a good idea to try your index in a 64bit JVM with the
whole index in memory.

For indexing, it's better to have faster disks for this IO intensive process.

Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com


On 10/12/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> "Scott Smith" <ssmith@mainstreamdata.com> wrote on 12/10/2006 14:14:57:
>
> > Supposed I want to index 500,000 documents (average document size is
> > 4kBs).  Let's assume I create a single index and that the index is
> > static (I'm not going to add any new documents to it).  I would guess
> > the index would be around 2GB.
>
> The input data size is ~2GB but the index itself may be smaller,
> particularly if not storing fields/termvectors.
>
> > Now, I do searches against this on a somewhat beefy machine (2GB RAM,
> > Core 2 Duo, Windows XP).  Does anyone have any idea what kinds of search
> > times I can expect for moderately complicated searches (several sets of
> > keywords against several fields)?  Are there things I can do to increase
> > search performance?  For example, does Lucene like lots of RAM, lots of
> > CPU, faster HD, all of the above?  Am I better splitting the index file
> > into 2 (N?) versions and search on multiple indexes simultaneously?
> >
> > Anyone have any thoughts about this?
>
> Indexing time (at list for plain text or simple HTML) would be stg near
> half an hour, so you might just give it a try. If index size turns out to
> be small enough to reside in RAM (and you don't need the RAM for other
> activities at the same time) you could try RAMDirectory. I wonder if anyone
> ever compared RAMDir to a "hot" searcher above FSDir, - seems that having
> all the index data in RAM would be faster than relying on IO caching by the
> system, but if for some reason the RAMDir cannot be in RAM all the time, I
> would assume that paging in/out would make it more costly than using FSDir
> and just count on system IO caching. In the latter case see relevant
> discussions on warming a searcher and caching filters.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 04:53:53 2006
Return-Path: <java-user-return-23974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5128 invoked from network); 13 Oct 2006 04:53:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 04:53:53 -0000
Received: (qmail 6684 invoked by uid 500); 13 Oct 2006 04:53:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6647 invoked by uid 500); 13 Oct 2006 04:53:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6629 invoked by uid 99); 13 Oct 2006 04:53:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 21:53:45 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Oct 2006 21:53:43 -0700
Received: (qmail 20817 invoked by uid 60001); 13 Oct 2006 04:53:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AIocBvBxN3avqaZTKNUiVKHne/woSlA78G/yfQxKmQK5O7GKJ+mkGLellhhbBWtlUQkOJQk5eBPa8+Q3gbiDSiVP/i3+5EEZxghepxVMHkDlLcX+rAlXlmOAgzIPYDJ4VSSVfy6hZBp5f5rxAGWgtXULLgGbb7EMTqbpa7AozTw=  ;
Message-ID: <20061013045322.20815.qmail@web50313.mail.yahoo.com>
Received: from [63.192.54.107] by web50313.mail.yahoo.com via HTTP; Thu, 12 Oct 2006 21:53:22 PDT
Date: Thu, 12 Oct 2006 21:53:22 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: a design question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Gecko? ;)=0AMy advice: stay away from EJBs as much as you can.  They are to=
o complicated and too heavy for most systems.  Servlet containers like Jett=
y, Tomcat, or Resin are often perfectly suitable for the job and a lot simp=
ler.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: "Chenini, Mohamed "=
 <MChenini@geico.com>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, O=
ctober 12, 2006 10:25:44 AM=0ASubject: a design question=0A=0AHello,=0A=0AT=
his is a design question: For Lucene to be able to process a million=0Adocu=
ments and in the purpose for the search application to be scalable=0Aand st=
ill have a good response time do we need to use an EJB container=0Asuch as =
Weblogic or is a Servlet container such as Tomcat sufficient to=0Ado the jo=
b? This design should take into consideration remote searching.=0A=0AThanks=
,=0AMohamed=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=0AThis email/fax message is for the sole use of the intended=0Arecipient(s=
) and may contain confidential and privileged information.=0AAny unauthoriz=
ed review, use, disclosure or distribution of this=0Aemail/fax is prohibite=
d. If you are not the intended recipient, please=0Adestroy all paper and el=
ectronic copies of the original message.=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 05:48:17 2006
Return-Path: <java-user-return-23975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17394 invoked from network); 13 Oct 2006 05:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 05:48:17 -0000
Received: (qmail 49766 invoked by uid 500); 13 Oct 2006 05:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49734 invoked by uid 500); 13 Oct 2006 05:48:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49715 invoked by uid 99); 13 Oct 2006 05:48:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 22:48:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 22:48:08 -0700
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id A8CFFD900BC; Fri, 13 Oct 2006 06:49:03 +0100
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: Error while closing IndexWriter
Date: Fri, 13 Oct 2006 11:24:07 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0178_01C6EEBA.1AB9A6A0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acbui/8KJZ3k0JGTTFajr/y8pC4viw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <200610130649406.SM01080@shivani>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0178_01C6EEBA.1AB9A6A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

I am facing a peculiar problem. 

I am trying to index a file and the indexing code executes without any error
but when I try to close the indexer, I get the following error and the error
comes very rarely but when it does, no code on document indexing works and I
finally have to delete all indexes and run a re-indexing utility.

Can anyone please suggest what might be the problem?

 

Thanks a ton

Shivani

 

Stack Trace:

java.lang.ArrayIndexOutOfBoundsException: 97 >= 17

            at java.util.Vector.elementAt(Vector.java:432)

            at
org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

            at
org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

            at
org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

            at
org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

            at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

            at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

            at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

            at
org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

            at rd.admin.Indexer.indexFile(Indexer.java:150)

 

 

Code:

    public void indexFile(File indexDirFile, File resumeFile) throws
IOException, FileNotFoundException

    {

 

        IndexWriter indexwriter = null;

            

        File afile[] = indexDirFile.listFiles();

        boolean flag = false;

 

        if (afile.length <= 0)

            flag = true;

        

        indexwriter = new IndexWriter(indexDirFile, new StandardAnalyzer(),
flag);

        

        doIndexing(indexwriter, resumeFile);

 

        closeIndexWriter(indexwriter);

    }

 

 

//--------------------------------------------------------------------------
----------------------//

    public void doIndexing(IndexWriter indexwriter, File resumeFile) throws
FileNotFoundException

    {

 

        System.out.println("Indexing of File " + resumeFile.getName() +
"Started...");

        Document document = new Document();

       

        if (resumeFile.getName().endsWith(".pdf"))

        {

            FileInputStream fileinputstream;

            try

            {

                fileinputstream = new FileInputStream(resumeFile);

            }

            catch (FileNotFoundException e1)

            {

                e1.printStackTrace();

                throw new MyRuntimeException(e1.getMessage(), e1);

            }

            Object obj = null;

            InputStreamReader inputstreamreader = null;

            OutputStreamWriter outputstreamwriter = null;

            PDDocument pddocument = null;

            try

            {

                PDFParser pdfparser = new PDFParser(fileinputstream);

                pdfparser.parse();

                pddocument = pdfparser.getPDDocument();

                ByteArrayOutputStream bytearrayoutputstream = new
ByteArrayOutputStream();

                outputstreamwriter = new
OutputStreamWriter(bytearrayoutputstream);

                PDFTextStripper pdftextstripper = new PDFTextStripper();

                pdftextstripper.writeText(pddocument.getDocument(),
outputstreamwriter);

                byte abyte0[] = bytearrayoutputstream.toByteArray();

                inputstreamreader = new InputStreamReader(new
ByteArrayInputStream(abyte0));

                document.add(Field.Text(IndexerColumns.contents,
inputstreamreader));

                abyte0 = bytearrayoutputstream.toByteArray();

            }

            catch (Exception e)

            {

                System.out.println("error in indexFile " + e.getMessage());

                e.printStackTrace();

            }

            finally

            {

                if (inputstreamreader != null)

                {

                    inputstreamreader = null;

                }

 

                if (outputstreamwriter != null)

                {

                    try

                    {

                        outputstreamwriter.close();

                    }

                    catch (IOException e2)

                    {

                        e2.printStackTrace();

                    }

                }

                if (pddocument != null)

                {

                    try

                    {

                        pddocument.close();

                    }

                    catch (IOException e2)

                    {

                        e2.printStackTrace();

                    }

                }

                inputstreamreader = null;

            }

        }

        else

        {

            document.add(Field.Text(IndexerColumns.contents, new
FileReader(resumeFile)));

        }

        document.add(Field.Keyword(IndexerColumns.id,
String.valueOf(mapLuceneParams.get(IndexerColumns.id))));

        

        for (int i = 0; i < this.columnInfos.length; i++)

        {

            ColumnInfo columnInfo = columnInfos[i];

            String value =
String.valueOf(mapLuceneParams.get(columnInfo.columnName));

 

            if (value != null)

            {

                value = value.trim();

                if (value.length() != 0)

                {

                    if (columnInfo.istokenized)

                    {

                        document.add(Field.Text(columnInfo.columnName,
value));

                    }

                    else

                    {

                        document.add(Field.Keyword(columnInfo.columnName,
value.toLowerCase()));

 

                    }

                }

            }

        }

        document.add(Field.Keyword(IndexerColumns.filePath, String

                .valueOf(mapLuceneParams.get(IndexerColumns.filePath))));

 

        try

        {

            indexwriter.addDocument(documentWithCustomFields);

        }

        catch (IOException e)

        {            

            closeIndexWriter(indexwriter);           

            e.printStackTrace();

            throw new MyRuntimeException(e.getMessage(), e);

        }

        

    }

 

//--------------------------------------------------------------------------
----------------------//

    private void closeIndexWriter(IndexWriter indexwriter)

    {

 

 

        if (indexwriter != null)

        {

            System.out.println("going to close index writer");

            try

            {

                indexwriter.close();

            }

            catch (IOException e1)

            {

                e1.printStackTrace();

            }

        }

 

    }

 

 


------=_NextPart_000_0178_01C6EEBA.1AB9A6A0--


From java-user-return-23976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 06:47:48 2006
Return-Path: <java-user-return-23976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29961 invoked from network); 13 Oct 2006 06:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 06:47:47 -0000
Received: (qmail 19241 invoked by uid 500); 13 Oct 2006 06:47:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18409 invoked by uid 500); 13 Oct 2006 06:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18398 invoked by uid 99); 13 Oct 2006 06:47:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 23:47:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Oct 2006 23:47:38 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9D6lFnl127624
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 06:47:16 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9D6ndiI2101354
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 08:49:39 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9D6lF8L028778
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 08:47:15 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9D6lFi7028775
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 08:47:15 +0200
In-Reply-To: <200610130649406.SM01080@shivani>
Subject: Re: Error while closing IndexWriter
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFDCC8C64F.2A4D6124-ON88257206.00233122-88257206.00254243@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 12 Oct 2006 22:46:57 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 13/10/2006 08:49:39
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am far from perfect in this pdf text extracting, however I noticed
something in your code that you may want to check to clear up the reason
for this failure, see below..

"Shivani Sawhney" <shivani@netedgecomputing.com> wrote on 12/10/2006
22:54:07:
> Hi All,
>
> I am facing a peculiar problem.
>
> I am trying to index a file and the indexing code executes without any
error
> but when I try to close the indexer, I get the following error and the
error
> comes very rarely but when it does, no code on document indexing works
and I
> finally have to delete all indexes and run a re-indexing utility.
>
> Can anyone please suggest what might be the problem?
>
> Stack Trace:
>
> java.lang.ArrayIndexOutOfBoundsException: 97 >= 17
>             at java.util.Vector.elementAt(Vector.java:432)
>             at
> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)
>             at
> org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)
>             at
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)
>             at
> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)
>             at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)
>             at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)
>             at
>
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)
>             at
> org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)
>             at rd.admin.Indexer.indexFile(Indexer.java:150)
> ...
> ...
>    try {
>      indexwriter.addDocument(documentWithCustomFields);

Here documentWithCustomFields is added to the index, but the code provided
does not handle this doc variable at all... might be just a typo in the
code snippet (i.e. if you cleaned it for the mail), or else a real problem
in the code, attempting to add to the index the wrong, perhaps null,
document?

>    } catch (IOException e) {
>      closeIndexWriter(indexwriter);

Here, once catching an exception, you are first attempting to close the
index and only then print the exception e. So if this "close" line is
throwing the exception with the stack trace above, you can't really know
that addDocument "executes without any error". Better switch between these
2 lines.

>      e.printStackTrace();
>      throw new MyRuntimeException(e.getMessage(), e);
>    }
>

There are 2 calls in your code to closeIndexWriter() and I can't tell which
line is Indexer.java:150, is it this one:
    doIndexing(indexwriter, resumeFile);
    closeIndexWriter(indexwriter);
Or this one:
    } catch (IOException e) {
      closeIndexWriter(indexwriter);

Hope this helps at all.

If not - add some info on the exception, also on the code path taken before
getting this error (many ifs in this code), and lucene version used.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 07:24:14 2006
Return-Path: <java-user-return-23977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45081 invoked from network); 13 Oct 2006 07:24:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 07:24:14 -0000
Received: (qmail 78598 invoked by uid 500); 13 Oct 2006 07:24:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78567 invoked by uid 500); 13 Oct 2006 07:24:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78539 invoked by uid 99); 13 Oct 2006 07:24:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 00:24:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 00:24:01 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id k9D7NdAs087963
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 09:23:39 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: QueryParser Is Badly Broken
Date: Fri, 13 Oct 2006 09:23:38 +0200
User-Agent: KMail/1.8.2
References: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu> <ab0709bf0610121655u6043ea97u69c09dba02f57975@mail.gmail.com>
In-Reply-To: <ab0709bf0610121655u6043ea97u69c09dba02f57975@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610130923.38238.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 13 October 2006 01:55, Mark Miller wrote:
> There is also the Surround Query Parser in contrib by the way...I would bet
> that Paul will tell you that it does not have these issues. I can't wait to

Indeed.

> see the replies on this one...I didn't realize that the QueryParser had
> these problems and am a bit skeptical...unfortunately I am away from home
> and cannot check it out.

Surround is not perfect, either. One of the disadvantages of surround
is that it does not map to PhraseQuery.

> On another note...http://famestalker.com/devwik/ will be done soon...I only

The url gives a not found 404 error here.

> have not gotten around to finishing the final touches because there did not
> appear to be a lot of initial interest (and what there was has waned
> drastically) and I am not ready to use it myself yet. It does correctly
> handle order of operations however, and as far as I know is the only parser
> to handle arbitray nesting and mixing of boolean and proximity queries.
> (perhaps surround does as well...I would be really interested to know, but I
> assume that it handles only the base cases ie not "(car & basket) within 2
> of (horse & carriage within 3 of car). Of course who really cares about such
> queries, but hey ;)

Surround maps proximity queries to SpanNearQuery, and that only allows
OR'ing in its operands. Surround does not map to SpanNotQuery,
but it will parse nested proximity queries and generate a nested
SpanNearQuery.
 
> You'll get better advice from others more experienced, but my bet is that
> Paul's surround parser is top notch and correctly does what you want.
> 
> - Mark
> 
> >
> 
> On 10/12/06, Renaud Waldura <renaud+lucene@waldura.com> wrote:
> >
> > I'm developing an application used by scientists -- people who have a
> > pretty
> > good idea of what logic is -- and they were shocked to find out that
> > neither
> > of these queries return the same results:
> >
> > 1- banana AND apple OR orange
> > 2- banana AND (apple OR orange)
> > 3- (banana AND apple) OR orange
> >
> > I'd expect (1) to be either (2) or (3), but it turns out it's parsed as
> > "+banana apple orange". I was rather, uh, dismayed by this find, as it
> > doesn't seem to make sense.
> >
> > I just spent half a day reading up on the various ways QueryParser is
> > broken, by going through the bugs and the mailing-list archives. And I'm
> > still unable to come to a conclusion. Here's where I'm at:
> >
> >     a- queries which mix boolean operators require strict parenthesizing
> > to
> > work right
> >
> >     b- "+" isn't shorthand for "AND"; using it with "AND"/"OR"/"NOT" and
> > the
> > default operator "" rarely does what you expect
> >
> >     c- the stock QueryParser doesn't work well in these cases
> >
> >     d- there's a new PrecedenceQueryParser at
> > 
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneousthat
> > solves *some* of the issues but creates others
> >
> >     e- there is a non-Lucene effort to create a query parser with a
> > different syntax at http://famestalker.com/devwiki/
> >
> > While we are also developing a query-building UI, users must be able to
> > enter text queries as well. What do other folks do? I mean, this is pretty
> > bad. I can hardly go back to my scientists and tell them Lucene is unable
> > to
> > handle 2 boolean operators, that they should parenthesize everything by
> > hand. I mean, that's just cheesy.

For a query building UI it might be better to output queries in XML form
to a Lucene server, see contrib/xml-query-parser .

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 07:43:52 2006
Return-Path: <java-user-return-23978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51216 invoked from network); 13 Oct 2006 07:43:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 07:43:51 -0000
Received: (qmail 15370 invoked by uid 500); 13 Oct 2006 07:43:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15331 invoked by uid 500); 13 Oct 2006 07:43:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15318 invoked by uid 99); 13 Oct 2006 07:43:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 00:43:43 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 00:43:42 -0700
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id k9D7hA0s012480
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 10:43:10 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mada6kx_; 13 Oct 2006 10:42:00 +0300
Message-ID: <452F4381.5000106@teamware.com>
Date: Fri, 13 Oct 2006 17:42:57 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Analyzers and multiple languages
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I'm new to Lucene and wanted some advice on analyzers, stemmers and language 
analysis.  I've got LIA, so have read it's chapters.

I am writing a framework that needs to be able to index documents from a range 
of languages where just the character set of the document is known.  Has anyone 
looked at or is using language analysis to determine the language of a document 
in ISO-8859-1.

Is it worth doing or does StandardAnalyzer cope well with most European 
languages as long as it is provided with a suitable multi-lingual set of stop words.

What about stemming?  I see Google now says it does stemming, but again here 
language detection seems to be a stumbling block in the way of choosing the 
right stemmer.  Does stemming provide much of an index size reduction and is it 
actually useful in search?

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 07:47:33 2006
Return-Path: <java-user-return-23979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51725 invoked from network); 13 Oct 2006 07:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 07:47:33 -0000
Received: (qmail 24867 invoked by uid 500); 13 Oct 2006 07:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24836 invoked by uid 500); 13 Oct 2006 07:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24825 invoked by uid 99); 13 Oct 2006 07:47:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 00:47:25 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 00:47:25 -0700
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id k9D7l0P4012882
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 10:47:00 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id madaaml3; 13 Oct 2006 10:46:00 +0300
Message-ID: <452F4474.2090105@teamware.com>
Date: Fri, 13 Oct 2006 17:47:00 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Email and attachments
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am a newbie with Lucene and I am working out the best way to index email data.

An earlier poster talked about index attachments with two alternatives: 
However, there is a third alternative:

Each message/attachment is indexed as a separate Document with the email header 
data included in all Documents.  The drawback of this approach seems to be that 
it is not possible to make AND searches between two body parts in different 
documents directly in Lucene (or is it?).

One advantage of this approach is that it is then possible to use a different 
Analyzer for each Document, which is useful when the attachments contain data in 
different languages.

If combining all attachments to a single body field, it's only possible to use 
the index or Document analyzer.

Has anyone used this type of approach and does it work?

Regards
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 08:10:18 2006
Return-Path: <java-user-return-23980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56856 invoked from network); 13 Oct 2006 08:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 08:10:18 -0000
Received: (qmail 66982 invoked by uid 500); 13 Oct 2006 08:10:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66953 invoked by uid 500); 13 Oct 2006 08:10:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66936 invoked by uid 99); 13 Oct 2006 08:10:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 01:10:10 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of gaoligong@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO nz-out-0102.google.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 01:10:10 -0700
Received: by nz-out-0102.google.com with SMTP id z6so337514nzd
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 01:09:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZDBEjbYKv4F7vstlClR0ajmkWg3/YqPaChtX7lT74pxc8lbgui4jpQsyitV5Vyy4tIeqTLnh8X3GHYepaIpo4q9CQWQukLazxaMyZ+q6FZyLpx5e37oQ75VRFUrNhKlKupgQWiZRCSNeFRS1KvvGaRuZXdLxjPQ1UVVIxNR3v3M=
Received: by 10.65.214.19 with SMTP id r19mr4408384qbq;
        Fri, 13 Oct 2006 00:59:48 -0700 (PDT)
Received: by 10.64.3.17 with HTTP; Fri, 13 Oct 2006 00:59:48 -0700 (PDT)
Message-ID: <739f0ce40610130059y883ff6bk6bd1770830a798a9@mail.gmail.com>
Date: Fri, 13 Oct 2006 15:59:48 +0800
From: "tony yin" <gaoligong@gmail.com>
To: java-user@lucene.apache.org
Subject: advanced search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20125_32809371.1160726388765"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20125_32809371.1160726388765
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I wanta search several fields use NOT condition, but how?
for example:
I store "test" in {"id", "name", "value", ...} fields.
now I search "test" NOT in "id". That's it.

Can anyone help me?


-- 
Kindly Regards

Tony
===============================

------=_Part_20125_32809371.1160726388765--

From java-user-return-23981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 10:33:03 2006
Return-Path: <java-user-return-23981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95423 invoked from network); 13 Oct 2006 10:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 10:33:02 -0000
Received: (qmail 11264 invoked by uid 500); 13 Oct 2006 10:32:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11247 invoked by uid 500); 13 Oct 2006 10:32:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11236 invoked by uid 99); 13 Oct 2006 10:32:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 03:32:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cambazz@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 03:32:53 -0700
Received: by nf-out-0910.google.com with SMTP id a4so1126650nfc
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 03:32:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=FdOzdwfnLVrd/9pzb8oJ9orkyIdMLS05qygOX/B2MyEH8pEpTgprYRCILrX35+GDFBp3bBGB+fFdUQXF0rKJ70lbgffYhj9FetvZ7EZqZbM3Oy7QUGPIhN/7J0QxauqgVXM1GLOmZoJi7sdNEB7G70BW8KjiwCGkz8jRa+G/PYM=
Received: by 10.49.29.3 with SMTP id g3mr6685826nfj;
        Fri, 13 Oct 2006 03:32:31 -0700 (PDT)
Received: from ?192.168.1.33? ( [85.105.14.92])
        by mx.google.com with ESMTP id l21sm598878nfc.2006.10.13.03.32.31;
        Fri, 13 Oct 2006 03:32:31 -0700 (PDT)
Message-ID: <452F6B3D.6080003@gmail.com>
Date: Fri, 13 Oct 2006 13:32:29 +0300
From: Cam Bazz <cambazz@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: lucene field data types
References: <20061012103520.4891010FB013@asf.osuosl.org> <452E1A55.5090709@aol.com>
In-Reply-To: <452E1A55.5090709@aol.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Is there any difference on the field data format. I like to store 
strings, numbers, and dates in fields.
I was storing everything as string. but is there another way, especially 
for storing date types?

Best Regards,
-C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 11:40:19 2006
Return-Path: <java-user-return-23982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31887 invoked from network); 13 Oct 2006 11:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 11:40:19 -0000
Received: (qmail 13953 invoked by uid 500); 13 Oct 2006 11:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13925 invoked by uid 500); 13 Oct 2006 11:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13914 invoked by uid 99); 13 Oct 2006 11:40:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 04:40:10 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 04:40:08 -0700
Received: by py-out-1112.google.com with SMTP id i49so753799pyi
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 04:39:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XSUaYAW82+WWCoNZyJBTnOXgrEFZl/FRWY9Nt18X1EX2xJOtTd0j5Pwvbf1b9OXZEDZT/YSWj5vWIeq6uL7B3dymg2jgZMHdFbtmwVS2+B8NpGal+ib46EhJj2LR2Rt1M51s4nXB8mzjfnC6ePJPxq1uMHEShA1XjnFEiBJR8MY=
Received: by 10.35.82.15 with SMTP id j15mr5506960pyl;
        Fri, 13 Oct 2006 04:39:47 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Fri, 13 Oct 2006 04:39:46 -0700 (PDT)
Message-ID: <ab0709bf0610130439k556934edn4e01a7dd10d50f@mail.gmail.com>
Date: Fri, 13 Oct 2006 07:39:46 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser Is Badly Broken
In-Reply-To: <200610130923.38238.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39239_9199582.1160739586921"
References: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
	 <ab0709bf0610121655u6043ea97u69c09dba02f57975@mail.gmail.com>
	 <200610130923.38238.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_39239_9199582.1160739586921
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> On another note...http://famestalker.com
>
> /devwik/ will be done soon...I only
>
> The url gives a not found 404 error here.


Due to a typo on my part:

 http://famestalker.com/devwiki/



On 10/13/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Friday 13 October 2006 01:55, Mark Miller wrote:
> > There is also the Surround Query Parser in contrib by the way...I would
> bet
> > that Paul will tell you that it does not have these issues. I can't wait
> to
>
> Indeed.
>
> > see the replies on this one...I didn't realize that the QueryParser had
> > these problems and am a bit skeptical...unfortunately I am away from
> home
> > and cannot check it out.
>
> Surround is not perfect, either. One of the disadvantages of surround
> is that it does not map to PhraseQuery.
>
> > On another note...http://famestalker.com/devwik/ will be done soon...I
> only
>
> The url gives a not found 404 error here.
>
> > have not gotten around to finishing the final touches because there did
> not
> > appear to be a lot of initial interest (and what there was has waned
> > drastically) and I am not ready to use it myself yet. It does correctly
> > handle order of operations however, and as far as I know is the only
> parser
> > to handle arbitray nesting and mixing of boolean and proximity queries.
> > (perhaps surround does as well...I would be really interested to know,
> but I
> > assume that it handles only the base cases ie not "(car & basket) within
> 2
> > of (horse & carriage within 3 of car). Of course who really cares about
> such
> > queries, but hey ;)
>
> Surround maps proximity queries to SpanNearQuery, and that only allows
> OR'ing in its operands. Surround does not map to SpanNotQuery,
> but it will parse nested proximity queries and generate a nested
> SpanNearQuery.
>
> > You'll get better advice from others more experienced, but my bet is
> that
> > Paul's surround parser is top notch and correctly does what you want.
> >
> > - Mark
> >
> > >
> >
> > On 10/12/06, Renaud Waldura <renaud+lucene@waldura.com> wrote:
> > >
> > > I'm developing an application used by scientists -- people who have a
> > > pretty
> > > good idea of what logic is -- and they were shocked to find out that
> > > neither
> > > of these queries return the same results:
> > >
> > > 1- banana AND apple OR orange
> > > 2- banana AND (apple OR orange)
> > > 3- (banana AND apple) OR orange
> > >
> > > I'd expect (1) to be either (2) or (3), but it turns out it's parsed
> as
> > > "+banana apple orange". I was rather, uh, dismayed by this find, as it
> > > doesn't seem to make sense.
> > >
> > > I just spent half a day reading up on the various ways QueryParser is
> > > broken, by going through the bugs and the mailing-list archives. And
> I'm
> > > still unable to come to a conclusion. Here's where I'm at:
> > >
> > >     a- queries which mix boolean operators require strict
> parenthesizing
> > > to
> > > work right
> > >
> > >     b- "+" isn't shorthand for "AND"; using it with "AND"/"OR"/"NOT"
> and
> > > the
> > > default operator "" rarely does what you expect
> > >
> > >     c- the stock QueryParser doesn't work well in these cases
> > >
> > >     d- there's a new PrecedenceQueryParser at
> > >
>
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneousthat
> > > solves *some* of the issues but creates others
> > >
> > >     e- there is a non-Lucene effort to create a query parser with a
> > > different syntax at http://famestalker.com/devwiki/
> > >
> > > While we are also developing a query-building UI, users must be able
> to
> > > enter text queries as well. What do other folks do? I mean, this is
> pretty
> > > bad. I can hardly go back to my scientists and tell them Lucene is
> unable
> > > to
> > > handle 2 boolean operators, that they should parenthesize everything
> by
> > > hand. I mean, that's just cheesy.
>
> For a query building UI it might be better to output queries in XML form
> to a Lucene server, see contrib/xml-query-parser .
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39239_9199582.1160739586921--

From java-user-return-23983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 12:23:25 2006
Return-Path: <java-user-return-23983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55340 invoked from network); 13 Oct 2006 12:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 12:23:25 -0000
Received: (qmail 78232 invoked by uid 500); 13 Oct 2006 12:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78194 invoked by uid 500); 13 Oct 2006 12:23:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78183 invoked by uid 99); 13 Oct 2006 12:23:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:23:16 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:23:14 -0700
Received: by py-out-1112.google.com with SMTP id i49so767330pyi
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 05:22:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V3H/xlaeEx/4te12oSlobdei4Z3rCwl5e8boWbQfku82Jni1Ew843oz+0mB0wKnoWA67jIlsP19+k2nTSEuh/shgImZU9l6t/VfxG+wRdzB5gPDDWQj709slHZipn0tjs18fThVDrAt+xahDndWjEC/1XYJ1ijo6Eea/3aAjp54=
Received: by 10.35.12.13 with SMTP id p13mr5580084pyi;
        Fri, 13 Oct 2006 05:22:54 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Fri, 13 Oct 2006 05:22:53 -0700 (PDT)
Message-ID: <359a92830610130522p5812201fwce286e3e303d72e2@mail.gmail.com>
Date: Fri, 13 Oct 2006 08:22:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzers and multiple languages
In-Reply-To: <452F4381.5000106@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28879_11839683.1160742173139"
References: <452F4381.5000106@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_28879_11839683.1160742173139
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This won't be *really* helpful, but I remember this being discussed at some
length a while ago. You'd be able to see some good info if you searched the
list archive, probably for language

I didn't pay much attention since this isn't something I'm concerned with
lately, so I can't be much real help...

Best
Erick

On 10/13/06, Antony Bowesman <adb@teamware.com> wrote:
>
> Hello,
>
> I'm new to Lucene and wanted some advice on analyzers, stemmers and
> language
> analysis.  I've got LIA, so have read it's chapters.
>
> I am writing a framework that needs to be able to index documents from a
> range
> of languages where just the character set of the document is known.  Has
> anyone
> looked at or is using language analysis to determine the language of a
> document
> in ISO-8859-1.
>
> Is it worth doing or does StandardAnalyzer cope well with most European
> languages as long as it is provided with a suitable multi-lingual set of
> stop words.
>
> What about stemming?  I see Google now says it does stemming, but again
> here
> language detection seems to be a stumbling block in the way of choosing
> the
> right stemmer.  Does stemming provide much of an index size reduction and
> is it
> actually useful in search?
>
> Antony
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28879_11839683.1160742173139--

From java-user-return-23984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 12:38:52 2006
Return-Path: <java-user-return-23984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60618 invoked from network); 13 Oct 2006 12:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 12:38:52 -0000
Received: (qmail 99444 invoked by uid 500); 13 Oct 2006 12:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99407 invoked by uid 500); 13 Oct 2006 12:38:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99396 invoked by uid 99); 13 Oct 2006 12:38:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:38:45 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:38:42 -0700
Received: by py-out-1112.google.com with SMTP id i49so772250pyi
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 05:38:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oMFEOoU7S+gkcNCWbQn06ZOD7YVboXD2mhY6SPhDdfUlTyPP0VTLrJDJ7+QH3uIg3rqSBwJlW5jOXnXPus2axAE2yf+p3ISkYTNUBxILE+2c6xMuBNqMY8sJbeHYuHXc4HZ6QhbfK6RM9T8fLMHl0Z+ciJ4MjnMJkT0lEC6+/tY=
Received: by 10.35.72.1 with SMTP id z1mr5589734pyk;
        Fri, 13 Oct 2006 05:38:12 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Fri, 13 Oct 2006 05:38:12 -0700 (PDT)
Message-ID: <ab0709bf0610130538h4bf28b47x4d397cd6dd022f12@mail.gmail.com>
Date: Fri, 13 Oct 2006 08:38:12 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: a design question
In-Reply-To: <20061013045322.20815.qmail@web50313.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40327_32483347.1160743092195"
References: <20061013045322.20815.qmail@web50313.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_40327_32483347.1160743092195
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

An EJB container will generally not give you better performance than a non
EJB container (other than it might be a more efficient...but that will not
be because it is an EJB container). The main difference is that you will be
able to use EJB's and the other Java EE goodies that a J2EE container
provides, like persistence and distributed transaction management. Unless
you are going to go with Glassfish (there may be one or two other obscure
ones) you will not be using EJB 3.0 and it is generally not recommended to
use < EJB 3.0--see Rod Johnson's J2EE without EJB as well as tons of other
books. You are better off going with tomcat and combination of Spring and
Hibernate or something. There is an RMI searcher in Lucene and you should be
able to easily use it with a servlet container. Apaches XML-RPC 3.0 java
extension also has a remote object proxy system and will allow you to pass
serial objects back from remote methods although it does not seem to support
dynamic remote loading of implementations. Jini might also be worth looking
into, although it seems that it is not possible to use Jini in tomcat
securley without modifing both Jini and Tomcat. Glassfish is supposedly
better suited to this.

In the end, a million documents is nothing to lucene if you have even
remotley decent hardware (probably even if you don't). Lucene will spit
around a million documents in her sleep. I'd develop in Tomcat (or similiar)
and check out solutions like Spring and Hibernate as you need J2EE (or JEE)
solutions.

- Mark

On 10/13/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Gecko? ;)
> My advice: stay away from EJBs as much as you can.  They are too
> complicated and too heavy for most systems.  Servlet containers like Jetty,
> Tomcat, or Resin are often perfectly suitable for the job and a lot simpler.
>
> Otis
>
> ----- Original Message ----
> From: "Chenini, Mohamed " <MChenini@geico.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, October 12, 2006 10:25:44 AM
> Subject: a design question
>
> Hello,
>
> This is a design question: For Lucene to be able to process a million
> documents and in the purpose for the search application to be scalable
> and still have a good response time do we need to use an EJB container
> such as Weblogic or is a Servlet container such as Tomcat sufficient to
> do the job? This design should take into consideration remote searching.
>
> Thanks,
> Mohamed
> ====================
> This email/fax message is for the sole use of the intended
> recipient(s) and may contain confidential and privileged information.
> Any unauthorized review, use, disclosure or distribution of this
> email/fax is prohibited. If you are not the intended recipient, please
> destroy all paper and electronic copies of the original message.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40327_32483347.1160743092195--

From java-user-return-23985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 12:43:31 2006
Return-Path: <java-user-return-23985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62353 invoked from network); 13 Oct 2006 12:43:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 12:43:31 -0000
Received: (qmail 9437 invoked by uid 500); 13 Oct 2006 12:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9412 invoked by uid 500); 13 Oct 2006 12:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9401 invoked by uid 99); 13 Oct 2006 12:43:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:43:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of karl.wettin@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:43:19 -0700
Received: by nf-out-0910.google.com with SMTP id a4so1161261nfc
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 05:42:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Tzstj9V5h2ZEHj5I9uIiwkqeAnaeh6hjyIolML6H7x2gnYfzuiKMBAMrZpaDscpes4ASSB8iLP6tN9cw5yJ8YQvwZXY9Mm+FyXyfX1nlpjawfTextVQVTHLlQPnP2C7Daox7Tfj52kvnKfLa+T/e1KUY/5OW4MpuBS8Q5Sb2RJk=
Received: by 10.82.106.14 with SMTP id e14mr534674buc;
        Fri, 13 Oct 2006 05:42:58 -0700 (PDT)
Received: from ?172.16.1.123? ( [212.162.171.110])
        by mx.google.com with ESMTP id o9sm879209nfa.2006.10.13.05.42.57;
        Fri, 13 Oct 2006 05:42:57 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <739f0ce40610130059y883ff6bk6bd1770830a798a9@mail.gmail.com>
References: <739f0ce40610130059y883ff6bk6bd1770830a798a9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <578AB087-31D5-4949-9BF9-EB7377D469CD@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: advanced search
Date: Fri, 13 Oct 2006 14:42:54 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


13 okt 2006 kl. 09.59 skrev tony yin:

> I wanta search several fields use NOT condition, but how?
> for example:
> I store "test" in {"id", "name", "value", ...} fields.
> now I search "test" NOT in "id". That's it.
>
> Can anyone help me?

You will not get any matchs looking for just a boolean NOT-clause. It  
has to be combined with something that matches. Perhaps a  
MatchAllDocumentsQuery will do it for you.

But to answer your question: a not-query is a Clause of a BooleanQuery.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 12:47:08 2006
Return-Path: <java-user-return-23986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63192 invoked from network); 13 Oct 2006 12:47:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 12:47:07 -0000
Received: (qmail 14514 invoked by uid 500); 13 Oct 2006 12:47:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14231 invoked by uid 500); 13 Oct 2006 12:47:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14220 invoked by uid 99); 13 Oct 2006 12:47:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:47:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of karl.wettin@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:46:57 -0700
Received: by nf-out-0910.google.com with SMTP id a4so1162228nfc
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 05:46:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Lp5hapuyZTSuDFE3UI36f3EEOM7jg7m2sQUAZxj6yppEe5GVqKdxTYbcFrlbvG5vKQkBVDsvcClvjsXWIcNxL8iMm1d7wybOoqDyko7MmS9RDxUeuGVtRCdiaKw0vMkmLPA8fEHU3ocq2EkmX6jOYtyMK3VvpjlIiUvjYJRTBqo=
Received: by 10.49.10.3 with SMTP id n3mr6923857nfi;
        Fri, 13 Oct 2006 05:46:35 -0700 (PDT)
Received: from ?172.16.1.123? ( [212.162.171.110])
        by mx.google.com with ESMTP id p72sm906886nfc.2006.10.13.05.46.33;
        Fri, 13 Oct 2006 05:46:35 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <452F6B3D.6080003@gmail.com>
References: <20061012103520.4891010FB013@asf.osuosl.org> <452E1A55.5090709@aol.com> <452F6B3D.6080003@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AE027610-103D-48BF-8CD5-9DE05379D863@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: lucene field data types
Date: Fri, 13 Oct 2006 14:46:32 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


13 okt 2006 kl. 12.32 skrev Cam Bazz:

> Is there any difference on the field data format. I like to store  
> strings, numbers, and dates in fields.
> I was storing everything as string. but is there another way,  
> especially for storing date types?

On a low level everything is stored as terms (read: string values).   
DateTools will take care of the conversion for you.

http://lucene.apache.org/java/docs/api/org/apache/lucene/document/ 
DateTools.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 12:49:51 2006
Return-Path: <java-user-return-23987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63837 invoked from network); 13 Oct 2006 12:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 12:49:50 -0000
Received: (qmail 20514 invoked by uid 500); 13 Oct 2006 12:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20242 invoked by uid 500); 13 Oct 2006 12:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20231 invoked by uid 99); 13 Oct 2006 12:49:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:49:43 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 05:49:41 -0700
Received: by nz-out-0102.google.com with SMTP id z6so353906nzd
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 05:49:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lHExo6chDemoAo2MTxuMm/EYwWdVbI9YGt83nopqlR3LLU/l9efVe5v6J/9O1DMRFur1QPPutr0jBxzdS7ZEqthkiyGxSw7Kt+wGABU9bHv50ujyrgjgXrnN2Y7VtTMVJyWv+cln10RMMPiC9Xyg5/QTK8Wpns6D0oVbTJe3IbQ=
Received: by 10.35.39.13 with SMTP id r13mr5639226pyj;
        Fri, 13 Oct 2006 05:49:21 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Fri, 13 Oct 2006 05:49:20 -0700 (PDT)
Message-ID: <ab0709bf0610130549rf4255aakc2d017fce7e3baca@mail.gmail.com>
Date: Fri, 13 Oct 2006 08:49:21 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzers and multiple languages
In-Reply-To: <452F4381.5000106@teamware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40635_26999935.1160743761003"
References: <452F4381.5000106@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_40635_26999935.1160743761003
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Generally, stemming is not a method for index size reduction even though
that might be a side effect. It is very useful in search however...you would
generally want a search for skiing to also hit ski and skier (I can't spell
so don't get caught up on that). There are lots of those examples...if you
are doing general search, stemming is great, if not quite as great as
lemmatization. Look at the Snowball stemmers in contrib. The stemming king
wrote them I believe.


Language recognition can be a pain in the ass. Do some google searching and
check out this:
http://en.wikipedia.org/wiki/Language_recognition_chart

- Mark

On 10/13/06, Antony Bowesman <adb@teamware.com> wrote:
>
> Hello,
>
> I'm new to Lucene and wanted some advice on analyzers, stemmers and
> language
> analysis.  I've got LIA, so have read it's chapters.
>
> I am writing a framework that needs to be able to index documents from a
> range
> of languages where just the character set of the document is known.  Has
> anyone
> looked at or is using language analysis to determine the language of a
> document
> in ISO-8859-1.
>
> Is it worth doing or does StandardAnalyzer cope well with most European
> languages as long as it is provided with a suitable multi-lingual set of
> stop words.
>
> What about stemming?  I see Google now says it does stemming, but again
> here
> language detection seems to be a stumbling block in the way of choosing
> the
> right stemmer.  Does stemming provide much of an index size reduction and
> is it
> actually useful in search?
>
> Antony
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40635_26999935.1160743761003--

From java-user-return-23988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 13:15:29 2006
Return-Path: <java-user-return-23988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69545 invoked from network); 13 Oct 2006 13:15:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 13:15:28 -0000
Received: (qmail 76932 invoked by uid 500); 13 Oct 2006 13:15:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76906 invoked by uid 500); 13 Oct 2006 13:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76895 invoked by uid 99); 13 Oct 2006 13:15:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 06:15:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 13 Oct 2006 06:15:19 -0700
Received: (qmail invoked by alias); 13 Oct 2006 13:14:57 -0000
Received: from p548C5F0F.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.95.15]
  by mail.gmx.net (mp011) with SMTP; 13 Oct 2006 15:14:58 +0200
X-Authenticated: #3493418
Message-ID: <452F90D8.1020604@gmx.de>
Date: Fri, 13 Oct 2006 15:12:56 +0200
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Analyzers and multiple languages
References: <452F4381.5000106@teamware.com>
In-Reply-To: <452F4381.5000106@teamware.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Antony,

I have a similar problem. My collection contains mainly German 
documents, but some in English and few in French, Spain and Latin. I 
know that each language has its own stemming rules.

Language detection is not my domain. But I can imagine it could be 
possible to detect the language of a document by statistics methods like 
character based n-grams. "", "", "", "" are quite often used in 
German words, th could indicate English and so on. It is probably more 
complex. Matching stop words of a language in a document could be 
another or additional way. How ever, lets say I can detect the language 
of a document. Than I would use an analyzer or stemmer in the language 
of the document.

Now I see two other problems. Quite often you will find mainly English 
terms in non English documents. You will use for these terms the wrong 
analyzer. Another problem is the query. You should use the same analyzer 
for indexing the documents and parsing the queries. The query is usually 
to short for statistical methods, and you will find stop words in a 
query not so often.

So I decide for my task to use one analyzer for all documents and the 
queries. I use the stemmer of the most probably language of my 
documents. That is not perfect but should be OK.

Sren

Antony Bowesman wrote:
> Hello,
> 
> I'm new to Lucene and wanted some advice on analyzers, stemmers and 
> language analysis.  I've got LIA, so have read it's chapters.
> 
> I am writing a framework that needs to be able to index documents from a 
> range of languages where just the character set of the document is 
> known.  Has anyone looked at or is using language analysis to determine 
> the language of a document in ISO-8859-1.
> 
> Is it worth doing or does StandardAnalyzer cope well with most European 
> languages as long as it is provided with a suitable multi-lingual set of 
> stop words.
> 
> What about stemming?  I see Google now says it does stemming, but again 
> here language detection seems to be a stumbling block in the way of 
> choosing the right stemmer.  Does stemming provide much of an index size 
> reduction and is it actually useful in search?
> 
> Antony

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 14:41:00 2006
Return-Path: <java-user-return-23989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4129 invoked from network); 13 Oct 2006 14:41:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 14:41:00 -0000
Received: (qmail 55578 invoked by uid 500); 13 Oct 2006 14:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55548 invoked by uid 500); 13 Oct 2006 14:40:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55536 invoked by uid 99); 13 Oct 2006 14:40:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:40:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [132.210.244.93] (HELO smtpi2.usherbrooke.ca) (132.210.244.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:40:47 -0700
Received: from [127.0.0.1] ([132.210.142.98])
	by smtpi2.usherbrooke.ca (8.13.1/8.13.1) with ESMTP id k9DEdvKj018355
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 10:40:00 -0400
Message-ID: <452FA55B.7030709@USherbrooke.ca>
Date: Fri, 13 Oct 2006 10:40:27 -0400
From: Patrick Turcotte <Patrick.Turcotte@USherbrooke.ca>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: QueryParser syntax French Operator : DONE!
References: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca>
In-Reply-To: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-UdeS-MailScanner-Information: Veuillez consulter le http://www.usherbrooke.ca/vers/virus-courriel
X-UdeS-MailScanner: Aucun code suspect =?ISO-8859-1?Q?d=E9tect=E9?=
X-MailScanner-SpamCheck: n'est pas un polluriel, SpamAssassin (score=-4.399,
	requis 5, autolearn=not spam, ALL_TRUSTED -1.80, BAYES_00 -2.60)
X-UdeS-MailScanner-From: patrick.turcotte@usherbrooke.ca
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello!

This may not be the best place for this message, sorry if this is the 
case, but since this is the result of a question I asked here, I decided 
to post it here. If I'm in error, please refer me to the best procedure. 
Thanks!

I've completed the desired "patch". I now have a version of the 
QueryParser that can "understand" the AND, OR and NOT keyword in other 
languages.

1) Patched from revision 454769 of lucene 2.1dev (trunk)
2) The "ant test" target is still successful when the modified 
QueryParser is used
3) It doesn't break actual code
4) The default behavior is the same as before
5) It has to be deliberately activated
6) It use ResourceBundle to find the keywords translation
7) Comes with FRENCH translation
8) Comes with JUnit testCases
9) Adds 1 public method to QueryParser

So, now, how do I go about sending it all to the those who can decide to 
integrate it? Where? In what format? Etc.

Thanks,

Patrick Turcotte



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 14:49:59 2006
Return-Path: <java-user-return-23990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8862 invoked from network); 13 Oct 2006 14:49:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 14:49:59 -0000
Received: (qmail 89054 invoked by uid 500); 13 Oct 2006 14:49:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89018 invoked by uid 500); 13 Oct 2006 14:49:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89007 invoked by uid 99); 13 Oct 2006 14:49:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:49:51 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ngvinny@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:49:50 -0700
Received: by wx-out-0506.google.com with SMTP id s15so824811wxc
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 07:49:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jEwdkQlo5wOQMuM3lakG2prdUof6VJ/ky2WLqOB3bau6+XZZSYtdgT/zLJgB20yl+QzxOLUp8cP3AKxuKHTQdmlWs8JI0wr5nzmDBVxklak4pV/b7xeWrS7IUhYtdCt8GhlivG1RKwGGc2qgVMEVcW9DCG/DzTvT/icU/Xl1jsM=
Received: by 10.90.54.4 with SMTP id c4mr2348280aga;
        Fri, 13 Oct 2006 07:49:29 -0700 (PDT)
Received: by 10.90.56.4 with HTTP; Fri, 13 Oct 2006 07:49:29 -0700 (PDT)
Message-ID: <5db95abe0610130749k7f509533obb18550cc9bd6596@mail.gmail.com>
Date: Fri, 13 Oct 2006 15:49:29 +0100
From: "Vinny Ng" <ngvinny@gmail.com>
To: java-user@lucene.apache.org
Subject: multiple field query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51532_6055814.1160750969404"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_51532_6055814.1160750969404
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi List,

I'd like to have a query consisting of different keywords on different
fields, e.g. "title:Lucene" "author:Otis" with the second part having
boosted value of 2.

Assuming I use the same Analyzer for both parts of the query then how should
i compose my query ?

Thanks a lot.

Ng

------=_Part_51532_6055814.1160750969404--

From java-user-return-23991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 14:51:47 2006
Return-Path: <java-user-return-23991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9829 invoked from network); 13 Oct 2006 14:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 14:51:46 -0000
Received: (qmail 95816 invoked by uid 500); 13 Oct 2006 14:51:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95771 invoked by uid 500); 13 Oct 2006 14:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95760 invoked by uid 99); 13 Oct 2006 14:51:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:51:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a17.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:51:35 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.dreamhost.com (Postfix) with ESMTP id B46AA73C91
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 07:51:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <452FA55B.7030709@USherbrooke.ca>
References: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca> <452FA55B.7030709@USherbrooke.ca>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FC208BBA-61C3-4CBC-89D4-B7819E66D42C@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: QueryParser syntax French Operator : DONE!
Date: Fri, 13 Oct 2006 10:51:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Patrick,

Thanks for the work.  Create a bug in JIRA and upload a patch (see  
svn diff).  See the Wiki for information on how to contribute.

Thanks,
Grant

On Oct 13, 2006, at 10:40 AM, Patrick Turcotte wrote:

> Hello!
>
> This may not be the best place for this message, sorry if this is  
> the case, but since this is the result of a question I asked here,  
> I decided to post it here. If I'm in error, please refer me to the  
> best procedure. Thanks!
>
> I've completed the desired "patch". I now have a version of the  
> QueryParser that can "understand" the AND, OR and NOT keyword in  
> other languages.
>
> 1) Patched from revision 454769 of lucene 2.1dev (trunk)
> 2) The "ant test" target is still successful when the modified  
> QueryParser is used
> 3) It doesn't break actual code
> 4) The default behavior is the same as before
> 5) It has to be deliberately activated
> 6) It use ResourceBundle to find the keywords translation
> 7) Comes with FRENCH translation
> 8) Comes with JUnit testCases
> 9) Adds 1 public method to QueryParser
>
> So, now, how do I go about sending it all to the those who can  
> decide to integrate it? Where? In what format? Etc.
>
> Thanks,
>
> Patrick Turcotte
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 14:53:15 2006
Return-Path: <java-user-return-23992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10086 invoked from network); 13 Oct 2006 14:53:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 14:53:14 -0000
Received: (qmail 98032 invoked by uid 500); 13 Oct 2006 14:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98014 invoked by uid 500); 13 Oct 2006 14:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98003 invoked by uid 99); 13 Oct 2006 14:53:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:53:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:53:07 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A38C430EFC19; Fri, 13 Oct 2006 10:52:46 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [206.106.231.149] (unknown [206.106.231.149])
	by ehatchersolutions.com (Postfix) with ESMTP id 9CF0E30EFC19
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 10:52:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <452F4381.5000106@teamware.com>
References: <452F4381.5000106@teamware.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EDE3E0DA-77BC-4A74-B28F-32AA964A6894@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Analyzers and multiple languages
Date: Fri, 13 Oct 2006 10:52:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 13, 2006, at 3:42 AM, Antony Bowesman wrote:
> I am writing a framework that needs to be able to index documents  
> from a range of languages where just the character set of the  
> document is known.  Has anyone looked at or is using language  
> analysis to determine the language of a document in ISO-8859-1.

There is a language identifier plugin in the Nutch codebase that  
could surely be distilled (and there are plans to do so) into a  
standalone library:

	<http://svn.apache.org/viewvc/lucene/nutch/trunk/src/plugin/ 
languageidentifier/>


> What about stemming?  I see Google now says it does stemming, but  
> again here language detection seems to be a stumbling block in the  
> way of choosing the right stemmer.  Does stemming provide much of  
> an index size reduction and is it actually useful in search?

Stemming shouldn't be considered for reducing index size, but rather  
to improve a users experience in findability.  It is quite useful in  
the right situations, but it is not something that all projects  
desire, so you'd have to see if it fits your needs specifically.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 14:57:08 2006
Return-Path: <java-user-return-23993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11581 invoked from network); 13 Oct 2006 14:57:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 14:57:08 -0000
Received: (qmail 8783 invoked by uid 500); 13 Oct 2006 14:56:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8743 invoked by uid 500); 13 Oct 2006 14:56:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8661 invoked by uid 99); 13 Oct 2006 14:56:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:56:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 07:56:47 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C3DCB30EFC1A; Fri, 13 Oct 2006 10:56:26 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [206.106.231.149] (unknown [206.106.231.149])
	by ehatchersolutions.com (Postfix) with ESMTP id 5934A30EFC19
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 10:56:24 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20061013012519.49569.qmail@web81709.mail.mud.yahoo.com>
References: <20061013012519.49569.qmail@web81709.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <68642E92-78FB-41CD-8978-40BA537D27BD@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Avoiding sort by date
Date: Fri, 13 Oct 2006 10:56:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 12, 2006, at 9:25 PM, <rayvittal-lists@yahoo.com> wrote:
> Does the Sort function create some kind of internal cache?  
> Observing the heap, it seems that a full garbage collection after  
> calling IndexSearcher.close() still leaves a lot of memory occupied.

Yes, sorting caches, potentially a lot.  I'm not sure what could be  
going on with the excessive memory usage, but certainly the sorting  
caches can be large.



>
> Thanks
> --
> Solidguy
>
> ----- Original Message ----
> From: Erik Hatcher <erik@ehatchersolutions.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, October 12, 2006 12:58:50 PM
> Subject: Re: Avoiding sort by date
>
> You really should be using the same IndexSearcher for successive
> searches.  Sorting works best when done with a "warm" searcher.  Have
> a look at Solr's warming strategy, and consider adopting that in some
> way.
>
>     Erik
>
>
> On Oct 12, 2006, at 3:04 PM, <rayvittal-lists@yahoo.com> wrote:
>
>> Hi folks,
>>
>> I am using Lucene 2.0
>>
>> In our application, I am indexing a stream of documents. Each
>> document is fairly small (< 1 KB), but there can be 10's of
>> millions of documents. Each document has a Timestamp field. Users
>> can enter free-form searches and a date/time range. They are most
>> interested in the most recent documents (as indicated in the
>> Timestamp field). An obvious way to do achieve this is to
>> searcher = new IndexSearcher(indexDir);
>> RangeFilter rf = new RangeFilter("day", start, end, true, true);
>> hits = searcher.search(query,rf,new Sort(new SortField[]{
>>                     new SortField
>> ("timestamp",SortField.STRING,true )}));
>>
>> Depending on the query, there may be millions of hits results. If
>> the same query is executed several times in quick succession, the
>> heap quickly runs out of memory. I suspect that this is because
>> Lucene needs to load all the millions of hits in order to sort the
>> results.
>>
>> My idea is to avoid the Sort() entirely. Is there a way, during
>> indexing (or by setting Weights inside the query) to automatically
>> set the score for more recent documents higher?
>>
>> Thanks
>> --
>> Solidguy
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 15:01:43 2006
Return-Path: <java-user-return-23994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13790 invoked from network); 13 Oct 2006 15:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 15:01:42 -0000
Received: (qmail 24520 invoked by uid 500); 13 Oct 2006 15:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24484 invoked by uid 500); 13 Oct 2006 15:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24473 invoked by uid 99); 13 Oct 2006 15:01:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 08:01:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of terry@net-frame.com designates 65.212.180.92 as permitted sender)
Received: from [65.212.180.92] (HELO pyramid-03.kattare.com) (65.212.180.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 08:01:32 -0700
Received: from [192.168.1.103] (ip70-187-212-38.dc.dc.cox.net [70.187.212.38])
	(authenticated bits=0)
	by pyramid-03.kattare.com (8.13.6/8.13.6) with ESMTP id k9DF1Ehi015774
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 08:01:15 -0700
Message-ID: <452FAA37.3020607@net-frame.com>
Date: Fri, 13 Oct 2006 11:01:11 -0400
From: Terry Steichen <terry@net-frame.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: advanced search
References: <739f0ce40610130059y883ff6bk6bd1770830a798a9@mail.gmail.com> <578AB087-31D5-4949-9BF9-EB7377D469CD@gmail.com>
In-Reply-To: <578AB087-31D5-4949-9BF9-EB7377D469CD@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can just add a field to your indexed docs that always evaluates to a 
fixed value.  Then you can do queries like: +doc:1 -id:test

karl wettin wrote:
>
> 13 okt 2006 kl. 09.59 skrev tony yin:
>
>> I wanta search several fields use NOT condition, but how?
>> for example:
>> I store "test" in {"id", "name", "value", ...} fields.
>> now I search "test" NOT in "id". That's it.
>>
>> Can anyone help me?
>
> You will not get any matchs looking for just a boolean NOT-clause. It 
> has to be combined with something that matches. Perhaps a 
> MatchAllDocumentsQuery will do it for you.
>
> But to answer your question: a not-query is a Clause of a BooleanQuery.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 15:41:15 2006
Return-Path: <java-user-return-23995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32988 invoked from network); 13 Oct 2006 15:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 15:41:15 -0000
Received: (qmail 14918 invoked by uid 500); 13 Oct 2006 15:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14884 invoked by uid 500); 13 Oct 2006 15:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14873 invoked by uid 99); 13 Oct 2006 15:41:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 08:41:05 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 08:41:04 -0700
Received: by py-out-1112.google.com with SMTP id m51so1118340pye
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 08:40:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tjj+pdpBjLx0A11nSfMkdUBlPZAzeDlN3MvyItyMSWU/dT6NUHfCBR5N55VR5YJe6WGvsQX3dJk8K4biK57R6dq0cVSwujaju+cs9tlkFw85lTbz2p2XOWwM4f5lQK/f8Y67Fm3JrPFptHmSoUU0IHoigeV487VZKavnQ22Tous=
Received: by 10.35.17.14 with SMTP id u14mr5915686pyi;
        Fri, 13 Oct 2006 08:40:09 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Fri, 13 Oct 2006 08:40:09 -0700 (PDT)
Message-ID: <ab0709bf0610130840s7679e6b3i62e47f5d589d00ad@mail.gmail.com>
Date: Fri, 13 Oct 2006 11:40:09 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator : DONE!
In-Reply-To: <452FA55B.7030709@USherbrooke.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44553_24922176.1160754009759"
References: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca>
	 <452FA55B.7030709@USherbrooke.ca>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44553_24922176.1160754009759
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Could you say in a few words what you did to accomplish this? I know that
you mentioned you used a resource bundle, but what part of the code reads
this resource bundle? What method did you use to get by the JavaCC issues?

thanks,

-Mark

On 10/13/06, Patrick Turcotte <Patrick.Turcotte@usherbrooke.ca> wrote:
>
> Hello!
>
> This may not be the best place for this message, sorry if this is the
> case, but since this is the result of a question I asked here, I decided
> to post it here. If I'm in error, please refer me to the best procedure.
> Thanks!
>
> I've completed the desired "patch". I now have a version of the
> QueryParser that can "understand" the AND, OR and NOT keyword in other
> languages.
>
> 1) Patched from revision 454769 of lucene 2.1dev (trunk)
> 2) The "ant test" target is still successful when the modified
> QueryParser is used
> 3) It doesn't break actual code
> 4) The default behavior is the same as before
> 5) It has to be deliberately activated
> 6) It use ResourceBundle to find the keywords translation
> 7) Comes with FRENCH translation
> 8) Comes with JUnit testCases
> 9) Adds 1 public method to QueryParser
>
> So, now, how do I go about sending it all to the those who can decide to
> integrate it? Where? In what format? Etc.
>
> Thanks,
>
> Patrick Turcotte
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44553_24922176.1160754009759--

From java-user-return-23996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 16:25:48 2006
Return-Path: <java-user-return-23996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47508 invoked from network); 13 Oct 2006 16:25:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 16:25:48 -0000
Received: (qmail 5505 invoked by uid 500); 13 Oct 2006 16:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5478 invoked by uid 500); 13 Oct 2006 16:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5467 invoked by uid 99); 13 Oct 2006 16:25:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 09:25:40 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 13 Oct 2006 09:25:37 -0700
Received: (qmail 36371 invoked by uid 60001); 13 Oct 2006 16:25:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=1aaumPIE1knKSqAtOJAcyKosLe1BirUiCyZGXkf8AjRusTQMP/Dqhtiu7Dh/y83XKPDPGVXN+L7E2DU1TtYzOVvnHtRIF7hCifXr3uwZOj2r3JfK3W4W7xKNXgbD+r07mdxBzpLyibWban3He1G2uMQpHybm26TSt/Ig2af6kKE=  ;
Message-ID: <20061013162516.36369.qmail@web50309.mail.yahoo.com>
Received: from [63.192.54.107] by web50309.mail.yahoo.com via HTTP; Fri, 13 Oct 2006 09:25:16 PDT
Date: Fri, 13 Oct 2006 09:25:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: multiple field query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"title:Lucene author:Otis^2.0" for example.=0A=0AYou can also call setBoost=
(float) on the query object (see http://www.lucenebook.com/search?query=3Ds=
etBoost for some examples).=0A=0AOtis=0A=0A----- Original Message ----=0AFr=
om: Vinny Ng <ngvinny@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: =
Friday, October 13, 2006 10:49:29 AM=0ASubject: multiple field query=0A=0AH=
i List,=0A=0AI'd like to have a query consisting of different keywords on d=
ifferent=0Afields, e.g. "title:Lucene" "author:Otis" with the second part h=
aving=0Aboosted value of 2.=0A=0AAssuming I use the same Analyzer for both =
parts of the query then how should=0Ai compose my query ?=0A=0AThanks a lot=
.=0A=0ANg=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 16:30:39 2006
Return-Path: <java-user-return-23997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48643 invoked from network); 13 Oct 2006 16:30:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 16:30:38 -0000
Received: (qmail 15596 invoked by uid 500); 13 Oct 2006 16:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15450 invoked by uid 500); 13 Oct 2006 16:30:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15439 invoked by uid 99); 13 Oct 2006 16:30:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 09:30:31 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 13 Oct 2006 09:30:30 -0700
Received: (qmail 58782 invoked by uid 60001); 13 Oct 2006 16:30:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CXeI1CZmSkOixm/rJwgO0zJeACIYZ86GZFFlHRocxhwmFlHTlFICNN50C1ZPM6x2clFg9CKT3Pq+0ypNyaWBvrCkHTiJ8Sekzhs51ccrrG1eMZJ/P2tgoBGs+oYRB6pzReu6OD+YUrCOzx/U2txuQOVkmBA1lKkH7x4I9JTFL04=  ;
Message-ID: <20061013163009.58780.qmail@web50315.mail.yahoo.com>
Received: from [63.192.54.107] by web50315.mail.yahoo.com via HTTP; Fri, 13 Oct 2006 09:30:09 PDT
Date: Fri, 13 Oct 2006 09:30:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: QueryParser syntax French Operator : DONE!
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Had this page open for somebody else:=0A  http://wiki.apache.org/jakarta-lu=
cene/HowToContribute=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Pat=
rick Turcotte <Patrick.Turcotte@USherbrooke.ca>=0ATo: java-user@lucene.apac=
he.org=0ASent: Friday, October 13, 2006 10:40:27 AM=0ASubject: QueryParser =
syntax French Operator : DONE!=0A=0AHello!=0A=0AThis may not be the best pl=
ace for this message, sorry if this is the =0Acase, but since this is the r=
esult of a question I asked here, I decided =0Ato post it here. If I'm in e=
rror, please refer me to the best procedure. =0AThanks!=0A=0AI've completed=
 the desired "patch". I now have a version of the =0AQueryParser that can "=
understand" the AND, OR and NOT keyword in other =0Alanguages.=0A=0A1) Patc=
hed from revision 454769 of lucene 2.1dev (trunk)=0A2) The "ant test" targe=
t is still successful when the modified =0AQueryParser is used=0A3) It does=
n't break actual code=0A4) The default behavior is the same as before=0A5) =
It has to be deliberately activated=0A6) It use ResourceBundle to find the =
keywords translation=0A7) Comes with FRENCH translation=0A8) Comes with JUn=
it testCases=0A9) Adds 1 public method to QueryParser=0A=0ASo, now, how do =
I go about sending it all to the those who can decide to =0Aintegrate it? W=
here? In what format? Etc.=0A=0AThanks,=0A=0APatrick Turcotte=0A=0A=0A=0A--=
-------------------------------------------------------------------=0ATo un=
subscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional=
 commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 17:16:37 2006
Return-Path: <java-user-return-23998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58431 invoked from network); 13 Oct 2006 17:16:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 17:16:35 -0000
Received: (qmail 78086 invoked by uid 500); 13 Oct 2006 17:16:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78065 invoked by uid 500); 13 Oct 2006 17:16:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78054 invoked by uid 99); 13 Oct 2006 17:16:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 10:16:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.155] (HELO rwcrmhc15.comcast.net) (216.148.227.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 10:16:20 -0700
Received: from ebola.biohz.net ([71.198.37.44])
          by comcast.net (rwcrmhc15) with ESMTP
          id <20061013171557m15009g0lue>; Fri, 13 Oct 2006 17:15:57 +0000
Received: from CKMPC08 (localhost.biohz.net [127.0.0.1])
	by ebola.biohz.net (Postfix) with SMTP id 811C218775A
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 10:13:08 -0700 (PDT)
Message-ID: <001e01c6eeeb$3f17fde0$970fda80@libraria.ucsf.edu>
From: "Renaud Waldura" <renaud+lucene@waldura.com>
To: <java-user@lucene.apache.org>
Subject: Re: QueryParser Is Badly Broken
Date: Fri, 13 Oct 2006 10:15:56 -0700
Organization: The Waldura Foundation
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I realize my statement of dread may be news to some; here are my references.

QueryParser not handling queries containing AND and OR
http://issues.apache.org/jira/browse/LUCENE-167

Query Parser flags clauses with explicit OR as required when followed by 
explicit AND
http://issues.apache.org/jira/browse/LUCENE-218

TERM1 OR NOT TERM2 does not perform as expected (single negated queries 
don't work)
http://issues.apache.org/jira/browse/LUCENE-666

Don't mix operators "+", "-" with "AND", "NOT", etc.
http://issues.apache.org/jira/browse/LUCENE-72

Very interesting thread at:
http://marc.theaimsgroup.com/?l=lucene-user&m=107096388328864&w=2


"an expression without parenthesis, when interpreted, assumes terms on 
either side of an AND clause are compulsory terms, and any terms on either 
side of an OR clause are optional. However, if you combine AND and OR in an 
expression, the optional terms have no effect because the others are 
compulsory."
http://marc.theaimsgroup.com/?l=lucene-user&m=107107383315532&w=2

All open query parser issues, 19 total.
https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&mode=hide&pid=12310110&sorter/order=DESC&sorter/field=priority&resolution=-1&component=12310234
--Renaud



----- Original Message ----- 
From: "Renaud Waldura" <renaud+lucene@waldura.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, October 12, 2006 4:11 PM
Subject: QueryParser Is Badly Broken


> I'm developing an application used by scientists -- people who have a 
> pretty good idea of what logic is -- and they were shocked to find out 
> that neither of these queries return the same results:
>
> 1- banana AND apple OR orange
> 2- banana AND (apple OR orange)
> 3- (banana AND apple) OR orange
>
> I'd expect (1) to be either (2) or (3), but it turns out it's parsed as 
> "+banana apple orange". I was rather, uh, dismayed by this find, as it 
> doesn't seem to make sense.
>
> I just spent half a day reading up on the various ways QueryParser is 
> broken, by going through the bugs and the mailing-list archives. And I'm 
> still unable to come to a conclusion. Here's where I'm at:
>
>    a- queries which mix boolean operators require strict parenthesizing to 
> work right
>
>    b- "+" isn't shorthand for "AND"; using it with "AND"/"OR"/"NOT" and 
> the default operator "" rarely does what you expect
>
>    c- the stock QueryParser doesn't work well in these cases
>
>    d- there's a new PrecedenceQueryParser at 
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/miscellaneous 
> that solves *some* of the issues but creates others
>
>    e- there is a non-Lucene effort to create a query parser with a 
> different syntax at http://famestalker.com/devwiki/
>
> While we are also developing a query-building UI, users must be able to 
> enter text queries as well. What do other folks do? I mean, this is pretty 
> bad. I can hardly go back to my scientists and tell them Lucene is unable 
> to handle 2 boolean operators, that they should parenthesize everything by 
> hand. I mean, that's just cheesy.
>
> --Renaud
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-23999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 18:11:14 2006
Return-Path: <java-user-return-23999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68831 invoked from network); 13 Oct 2006 18:11:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 18:11:13 -0000
Received: (qmail 70147 invoked by uid 500); 13 Oct 2006 18:11:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70118 invoked by uid 500); 13 Oct 2006 18:11:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70107 invoked by uid 99); 13 Oct 2006 18:11:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:11:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [132.210.244.93] (HELO smtpi2.usherbrooke.ca) (132.210.244.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:11:02 -0700
Received: from [127.0.0.1] ([132.210.142.98])
	by smtpi2.usherbrooke.ca (8.13.1/8.13.1) with ESMTP id k9DIATwN022131
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 14:10:32 -0400
Message-ID: <452FD6B3.4040005@USherbrooke.ca>
Date: Fri, 13 Oct 2006 14:10:59 -0400
From: Patrick Turcotte <Patrick.Turcotte@USherbrooke.ca>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator : DONE!
References: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca>	 <452FA55B.7030709@USherbrooke.ca> <ab0709bf0610130840s7679e6b3i62e47f5d589d00ad@mail.gmail.com>
In-Reply-To: <ab0709bf0610130840s7679e6b3i62e47f5d589d00ad@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-UdeS-MailScanner-Information: Veuillez consulter le http://www.usherbrooke.ca/vers/virus-courriel
X-UdeS-MailScanner: Aucun code suspect =?ISO-8859-1?Q?d=E9tect=E9?=
X-MailScanner-SpamCheck: n'est pas un polluriel, SpamAssassin (score=-4.399,
	requis 5, autolearn=not spam, ALL_TRUSTED -1.80, BAYES_00 -2.60)
X-UdeS-MailScanner-From: patrick.turcotte@usherbrooke.ca
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mark Miller wrote:
> Could you say in a few words what you did to accomplish this? I know that
> you mentioned you used a resource bundle, but what part of the code reads
> this resource bundle? What method did you use to get by the JavaCC 
> issues?
>
    Basically:

    * I used TOKEN_MGR_DECLS to declare fields in the TokenManager class.

    * When setting a Locale or setting the useLocalizedOperators options
      (new method) in QueryParser, I fetch, with ResourceBundle, the
      strings to match against and set (with token_source.fieldName)
      values to be used by the TokenManager class
    * I expanded the token <TERM> to do further processing (as per
      JavaCC syntax), which create a TokenLixicalActions(Token
      matchedToken) in the TokenManager class with syntax:

<TERM: <_TERM_START_CHAR> (<_TERM_CHAR>)* >
{
    // THIS Will end up in TokenLixicalActions(Token matchedToken) method
    // DEFINE java processing with matchedToken.image to get to the 
matched string, set matchedToken.kind accordingly.
    // USES fields set by the QueryParser to decide on behavior
}

    Hope this answer your question.

Patrick
> thanks,
>
> -Mark
>
> On 10/13/06, Patrick Turcotte <Patrick.Turcotte@usherbrooke.ca> wrote:
>>
>> Hello!
>>
>> This may not be the best place for this message, sorry if this is the
>> case, but since this is the result of a question I asked here, I decided
>> to post it here. If I'm in error, please refer me to the best procedure.
>> Thanks!
>>
>> I've completed the desired "patch". I now have a version of the
>> QueryParser that can "understand" the AND, OR and NOT keyword in other
>> languages.
>>
>> 1) Patched from revision 454769 of lucene 2.1dev (trunk)
>> 2) The "ant test" target is still successful when the modified
>> QueryParser is used
>> 3) It doesn't break actual code
>> 4) The default behavior is the same as before
>> 5) It has to be deliberately activated
>> 6) It use ResourceBundle to find the keywords translation
>> 7) Comes with FRENCH translation
>> 8) Comes with JUnit testCases
>> 9) Adds 1 public method to QueryParser
>>
>> So, now, how do I go about sending it all to the those who can decide to
>> integrate it? Where? In what format? Etc.
>>
>> Thanks,
>>
>> Patrick Turcotte
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


-- 
Patrick Turcotte
------------------------------------
Patrick.Turcotte@USherbrooke.ca
(819) 821-8000, poste 63234
1-800-267-8337 poste 63234



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 18:16:33 2006
Return-Path: <java-user-return-24000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69980 invoked from network); 13 Oct 2006 18:16:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 18:16:33 -0000
Received: (qmail 83407 invoked by uid 500); 13 Oct 2006 18:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83379 invoked by uid 500); 13 Oct 2006 18:16:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83368 invoked by uid 99); 13 Oct 2006 18:16:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:16:26 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:16:23 -0700
Received: by py-out-1112.google.com with SMTP id i49so876727pyi
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 11:16:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SlPFTC6QuRwI8lXtiNCm5kRP3v89ijEkUeswtYXfGWE47qfiP1xUqIjFjaO4IupzW0VtPdeDHWdVn1WpcIEjfsAG2G2/pX9ZwWEVTE5mxpuY6LrDHWvepuyuZW6t7JiqkB5KwWDOqX7Gjc2KKQz5cpKpuNtifAnmwZ0ycNlirmQ=
Received: by 10.35.121.9 with SMTP id y9mr6201178pym;
        Fri, 13 Oct 2006 11:16:02 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Fri, 13 Oct 2006 11:16:02 -0700 (PDT)
Message-ID: <ab0709bf0610131116n963ce2auc54bd563287b3e5@mail.gmail.com>
Date: Fri, 13 Oct 2006 14:16:02 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator : DONE!
In-Reply-To: <452FD6B3.4040005@USherbrooke.ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47929_22933259.1160763362325"
References: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca>
	 <452FA55B.7030709@USherbrooke.ca>
	 <ab0709bf0610130840s7679e6b3i62e47f5d589d00ad@mail.gmail.com>
	 <452FD6B3.4040005@USherbrooke.ca>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47929_22933259.1160763362325
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Great work Patrick. I was unfamiliar with the use of TOKEN_MGR_DECLS. Looks
like a powerfull feature for dynamic token selection. Thanks a lot,

- Mark

On 10/13/06, Patrick Turcotte <Patrick.Turcotte@usherbrooke.ca> wrote:
>
> Mark Miller wrote:
> > Could you say in a few words what you did to accomplish this? I know
> that
> > you mentioned you used a resource bundle, but what part of the code
> reads
> > this resource bundle? What method did you use to get by the JavaCC
> > issues?
> >
>     Basically:
>
>     * I used TOKEN_MGR_DECLS to declare fields in the TokenManager class.
>
>     * When setting a Locale or setting the useLocalizedOperators options
>       (new method) in QueryParser, I fetch, with ResourceBundle, the
>       strings to match against and set (with token_source.fieldName)
>       values to be used by the TokenManager class
>     * I expanded the token <TERM> to do further processing (as per
>       JavaCC syntax), which create a TokenLixicalActions(Token
>       matchedToken) in the TokenManager class with syntax:
>
> <TERM: <_TERM_START_CHAR> (<_TERM_CHAR>)* >
> {
>     // THIS Will end up in TokenLixicalActions(Token matchedToken) method
>     // DEFINE java processing with matchedToken.image to get to the
> matched string, set matchedToken.kind accordingly.
>     // USES fields set by the QueryParser to decide on behavior
> }
>
>     Hope this answer your question.
>
> Patrick
> > thanks,
> >
> > -Mark
> >
> > On 10/13/06, Patrick Turcotte <Patrick.Turcotte@usherbrooke.ca> wrote:
> >>
> >> Hello!
> >>
> >> This may not be the best place for this message, sorry if this is the
> >> case, but since this is the result of a question I asked here, I
> decided
> >> to post it here. If I'm in error, please refer me to the best
> procedure.
> >> Thanks!
> >>
> >> I've completed the desired "patch". I now have a version of the
> >> QueryParser that can "understand" the AND, OR and NOT keyword in other
> >> languages.
> >>
> >> 1) Patched from revision 454769 of lucene 2.1dev (trunk)
> >> 2) The "ant test" target is still successful when the modified
> >> QueryParser is used
> >> 3) It doesn't break actual code
> >> 4) The default behavior is the same as before
> >> 5) It has to be deliberately activated
> >> 6) It use ResourceBundle to find the keywords translation
> >> 7) Comes with FRENCH translation
> >> 8) Comes with JUnit testCases
> >> 9) Adds 1 public method to QueryParser
> >>
> >> So, now, how do I go about sending it all to the those who can decide
> to
> >> integrate it? Where? In what format? Etc.
> >>
> >> Thanks,
> >>
> >> Patrick Turcotte
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> --
> Patrick Turcotte
> ------------------------------------
> Patrick.Turcotte@USherbrooke.ca
> (819) 821-8000, poste 63234
> 1-800-267-8337 poste 63234
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_47929_22933259.1160763362325--

From java-user-return-24001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 18:35:04 2006
Return-Path: <java-user-return-24001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73406 invoked from network); 13 Oct 2006 18:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 18:35:04 -0000
Received: (qmail 12331 invoked by uid 500); 13 Oct 2006 18:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12296 invoked by uid 500); 13 Oct 2006 18:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12285 invoked by uid 99); 13 Oct 2006 18:34:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:34:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sp0065@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:34:54 -0700
Received: by py-out-1112.google.com with SMTP id i49so882289pyi
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 11:34:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=RWAvUDoRhZJ8z50Z26rYg/2mkOeigGfuls824kvEQDB8410WlRwL+8dAHxX6SGJvM1OPu3p2IZ9DdAyg4MHuL87+SFYyXVcpRBkqXVW+T+gaGfaHYSGzwBH+myCuhkhw+WTmYTbQ766YW1UU2olUncyWdsGm/NR+eTEzXC2A3MA=
Received: by 10.35.89.10 with SMTP id r10mr6218662pyl;
        Fri, 13 Oct 2006 11:34:33 -0700 (PDT)
Received: by 10.35.125.19 with HTTP; Fri, 13 Oct 2006 11:34:33 -0700 (PDT)
Message-ID: <e2b4bf8d0610131134p771c3febv3bf3df43353ba642@mail.gmail.com>
Date: Fri, 13 Oct 2006 13:34:33 -0500
From: "Serhiy Polyakov" <sp0065@gmail.com>
To: java-user@lucene.apache.org
Subject: DB to Lucene parsers
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I need to index a database with Lucene. Can you suggest where to start
looking for the DB to Lucene parsers? I will need to parse data from
MySQL, MS SQL, Oracle and several other databases. Structure of data
is pretty simple - almost flat tables. I know I can do DB -> XML ->
Lucene but may be there are other solutions?

Thanks,
Serhiy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 18:40:23 2006
Return-Path: <java-user-return-24002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75052 invoked from network); 13 Oct 2006 18:40:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 18:40:23 -0000
Received: (qmail 21159 invoked by uid 500); 13 Oct 2006 18:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21129 invoked by uid 500); 13 Oct 2006 18:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21118 invoked by uid 99); 13 Oct 2006 18:40:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:40:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of james@bittorrent.com designates 38.99.5.41 as permitted sender)
Received: from [38.99.5.41] (HELO mail.bittorrent.com) (38.99.5.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:40:13 -0700
Received: by mail.bittorrent.com (Postfix, from userid 106)
	id E85DC8BF3; Fri, 13 Oct 2006 11:39:48 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-26) on mail.bittorrent.com
X-Spam-Level: 
Received: from [10.0.1.146] (dsl081-025-066.sfo1.dsl.speakeasy.net [64.81.25.66])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.bittorrent.com (Postfix) with ESMTP id CE90D8BDF
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 11:39:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <87F5C1A5-905E-4D01-9DE7-D44DF44D826A@bittorrent.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: James O'Rourke <james@bittorrent.com>
Subject: highlighting with WildcardQuery
Date: Fri, 13 Oct 2006 11:39:31 -0700
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there anyway to do highlighting when using a WildcardQuery when  
there is no IndexReader available? I simply want to do it with a  
chunk of text, but it fails because the WildcardQuery needs to call  
rewrite - but doesn't know about the IndexReader.

Code (using PyLucene-2.0.0 - can translate to java if like)

def gethighlightedfragments(text, searchString,
     fragmentLength = 50, numFragments = 3,  opening= '<span class= 
\"highlight\">', closing = '</span>'):
     """ Returns a list of text fragments with returns included for  
80 char max width """
     """ Defaults to OR operator which is good for formatting """
     analyzer = StandardAnalyzer()
     #print text
     strs = searchString.split()
     bq = BooleanQuery()
     for s in strs:
         print s
         q = WildcardQuery(Term('f', '*' + s +  '*'))
         #print q.toString()
         bq.add(q,  BooleanClause.Occur.SHOULD)
     #print bq.toString()
     scorer = QueryScorer(bq)
     formatter = SimpleHTMLFormatter(opening, closing)
     highlighter = Highlighter(formatter, scorer)
     fragmenter = SimpleFragmenter(fragmentLength)
     highlighter.setTextFragmenter(fragmenter)

     tokenStream = analyzer.tokenStream('f', StringReader(text))
     return  highlighter.getBestFragments(tokenStream, text,  
numFragments)


Basically, I want to show partial word matches also.

James


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 18:56:37 2006
Return-Path: <java-user-return-24003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79318 invoked from network); 13 Oct 2006 18:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 18:56:37 -0000
Received: (qmail 59971 invoked by uid 500); 13 Oct 2006 18:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59942 invoked by uid 500); 13 Oct 2006 18:56:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59931 invoked by uid 99); 13 Oct 2006 18:56:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:56:29 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 11:56:27 -0700
Received: by nf-out-0910.google.com with SMTP id a4so1261529nfc
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 11:56:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=luTFoxPtzdkNlPkq1iNEpmGlktUFeVNnDExXD6523EVLlcv7m6mdo3tC7kqfmPmuQMl5qewzITuT/n3FlHVTnGdYf+IDd6lRKWk12wUPZWmQT4p38h8vMZdVkfaJNo1+bE6CSmSq1N4UHjr8NYaa+BMIkbgAG/VNHVIBz/8nga4=
Received: by 10.82.135.13 with SMTP id i13mr653284bud;
        Fri, 13 Oct 2006 11:56:05 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Fri, 13 Oct 2006 11:56:05 -0700 (PDT)
Message-ID: <6e3ae6310610131156v2a3e138wf02aa49f3921e5a4@mail.gmail.com>
Date: Fri, 13 Oct 2006 11:56:05 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DB to Lucene parsers
In-Reply-To: <e2b4bf8d0610131134p771c3febv3bf3df43353ba642@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e2b4bf8d0610131134p771c3febv3bf3df43353ba642@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can use DBSight's free version. It'll flatten complicated database
structures into Lucene index. Any JDBC-supported database are
supported.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 10/13/06, Serhiy Polyakov <sp0065@gmail.com> wrote:
> Hi,
>
> I need to index a database with Lucene. Can you suggest where to start
> looking for the DB to Lucene parsers? I will need to parse data from
> MySQL, MS SQL, Oracle and several other databases. Structure of data
> is pretty simple - almost flat tables. I know I can do DB -> XML ->
> Lucene but may be there are other solutions?
>
> Thanks,
> Serhiy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 19:03:34 2006
Return-Path: <java-user-return-24004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80347 invoked from network); 13 Oct 2006 19:03:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 19:03:34 -0000
Received: (qmail 65886 invoked by uid 500); 13 Oct 2006 19:03:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64917 invoked by uid 500); 13 Oct 2006 19:03:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64906 invoked by uid 99); 13 Oct 2006 19:03:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 12:03:28 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO nz-out-0102.google.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 12:03:25 -0700
Received: by nz-out-0102.google.com with SMTP id z6so411379nzd
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 12:03:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WbfzfCMV5bkfvHsIzgkgX9HgDahdvnzUihrmtGSy5gxfF6grrpxtEh8AcJ0mXiZMswcfdGtARIViyCN6g18vgn1d245Z55e8KZlySVcKAieM9KnB0dR552Lhk9vDjwYW5SDzkLh51KQsci9hWSn0cmrlhMNN6aQ5vHxf8mbbew4=
Received: by 10.35.123.10 with SMTP id a10mr6289752pyn;
        Fri, 13 Oct 2006 12:03:04 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Fri, 13 Oct 2006 12:03:04 -0700 (PDT)
Message-ID: <ab0709bf0610131203y741f449ei527f3884dd976134@mail.gmail.com>
Date: Fri, 13 Oct 2006 15:03:04 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DB to Lucene parsers
In-Reply-To: <e2b4bf8d0610131134p771c3febv3bf3df43353ba642@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48982_24515349.1160766184706"
References: <e2b4bf8d0610131134p771c3febv3bf3df43353ba642@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_48982_24515349.1160766184706
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 10/13/06, Serhiy Polyakov <sp0065@gmail.com> wrote:
>
> Hi,
>
>  I know I can do DB -> XML ->
> Lucene but may be there are other solutions?


There is no need to go from DB -> XML -> Lucene. While you can write an XML
Document handler for Lucene (as is done in LIA), it would be just as easy to
write a simple DB handler...just extract your field name, value pairs from
the DB and add them as fields to a lucene Document. You can write a general
implementation or something more specific depending on your needs.

- Mark

------=_Part_48982_24515349.1160766184706--

From java-user-return-24005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 20:37:29 2006
Return-Path: <java-user-return-24005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9257 invoked from network); 13 Oct 2006 20:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 20:37:29 -0000
Received: (qmail 85673 invoked by uid 500); 13 Oct 2006 20:37:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85626 invoked by uid 500); 13 Oct 2006 20:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85609 invoked by uid 99); 13 Oct 2006 20:37:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 13:37:21 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sp0065@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 13:37:20 -0700
Received: by py-out-1112.google.com with SMTP id i49so917957pyi
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 13:36:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=fZz32b2R5UABK7+S3anj7eMLfmyizVWtUZLJjoT2/Fa/IURZF+BZqrkjFAXIx7keL6ABAg2USGZgly7DGtgVQObJXBAkPzJktRewiiSWEYVy1NnG9T6q/n2+ZOJGXoRTM1n48mw7189TQmCELMfoloacbz+AyIvurB/ZatcqmR0=
Received: by 10.35.78.13 with SMTP id f13mr6448468pyl;
        Fri, 13 Oct 2006 13:36:57 -0700 (PDT)
Received: by 10.35.125.19 with HTTP; Fri, 13 Oct 2006 13:36:57 -0700 (PDT)
Message-ID: <e2b4bf8d0610131336t60b00138h5bc4c06c0c49f6e8@mail.gmail.com>
Date: Fri, 13 Oct 2006 15:36:57 -0500
From: "Serhiy Polyakov" <sp0065@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene SRW/SRU
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I want to access Lucene index with SRW Web Service and the SRU. I know
that Online Computer Library Center has one implementation:
http://www.oclc.org/research/announcements/2003-11-07b.htm
But it is kind of limited to DSpace digital repository system (I will
check more about that).

Could you please advise about other implementations if any?

Thanks,
Serhiy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 20:55:58 2006
Return-Path: <java-user-return-24006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14148 invoked from network); 13 Oct 2006 20:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 20:55:57 -0000
Received: (qmail 11346 invoked by uid 500); 13 Oct 2006 20:55:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11310 invoked by uid 500); 13 Oct 2006 20:55:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11298 invoked by uid 99); 13 Oct 2006 20:55:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 13:55:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [132.210.244.93] (HELO smtpi2.usherbrooke.ca) (132.210.244.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 13:55:49 -0700
Received: from [127.0.0.1] ([132.210.142.98])
	by smtpi2.usherbrooke.ca (8.13.1/8.13.1) with ESMTP id k9DKt5Qf009224
	for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 16:55:07 -0400
Message-ID: <452FFD46.6090106@USherbrooke.ca>
Date: Fri, 13 Oct 2006 16:55:34 -0400
From: Patrick Turcotte <Patrick.Turcotte@USherbrooke.ca>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator : DONE!
References: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca> <452FA55B.7030709@USherbrooke.ca> <FC208BBA-61C3-4CBC-89D4-B7819E66D42C@apache.org>
In-Reply-To: <FC208BBA-61C3-4CBC-89D4-B7819E66D42C@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-UdeS-MailScanner-Information: Veuillez consulter le http://www.usherbrooke.ca/vers/virus-courriel
X-UdeS-MailScanner: Aucun code suspect =?ISO-8859-1?Q?d=E9tect=E9?=
X-MailScanner-SpamCheck: n'est pas un polluriel, SpamAssassin (score=-4.399,
	requis 5, autolearn=not spam, ALL_TRUSTED -1.80, BAYES_00 -2.60)
X-UdeS-MailScanner-From: patrick.turcotte@usherbrooke.ca
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Submitted to Jira with key LUCENE-682

Patrick

Grant Ingersoll wrote:
> Hi Patrick,
>
> Thanks for the work.  Create a bug in JIRA and upload a patch (see svn 
> diff).  See the Wiki for information on how to contribute.
>
> Thanks,
> Grant
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 13 20:56:04 2006
Return-Path: <java-user-return-24007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14201 invoked from network); 13 Oct 2006 20:56:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Oct 2006 20:56:04 -0000
Received: (qmail 12107 invoked by uid 500); 13 Oct 2006 20:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12076 invoked by uid 500); 13 Oct 2006 20:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12026 invoked by uid 99); 13 Oct 2006 20:55:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 13:55:54 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of patrek@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 13:55:52 -0700
Received: by wx-out-0506.google.com with SMTP id s17so1002880wxc
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 13:55:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ANkDKI8C8pNVfsRlFmZsaMpzOqgU7p3CO/ZiCTAn764lkzsVNJzeUvPyVKBau7wpYBudM6mQQNA/u8T3+yDZzRZGiB0XZYygKleFw7SSglez0QC7s1Z6gVfYwhQX5iOBmRECnwoLx4is8FhYE+FJnvxIDSc5U4t5WcvjQVqWizA=
Received: by 10.70.53.7 with SMTP id b7mr5977648wxa;
        Fri, 13 Oct 2006 13:55:31 -0700 (PDT)
Received: by 10.70.13.9 with HTTP; Fri, 13 Oct 2006 13:55:31 -0700 (PDT)
Message-ID: <48b038c60610131355y241c6105xfa60468b4cf541b6@mail.gmail.com>
Date: Fri, 13 Oct 2006 16:55:31 -0400
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser syntax French Operator : DONE!
In-Reply-To: <ab0709bf0610131116n963ce2auc54bd563287b3e5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71362_28566154.1160772931347"
References: <LOBBIFAMHAJDKNIKLIPJEEPEGCAA.patrick.turcotte@usherbrooke.ca>
	 <452FA55B.7030709@USherbrooke.ca>
	 <ab0709bf0610130840s7679e6b3i62e47f5d589d00ad@mail.gmail.com>
	 <452FD6B3.4040005@USherbrooke.ca>
	 <ab0709bf0610131116n963ce2auc54bd563287b3e5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_71362_28566154.1160772931347
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mark!

I have to mention Benoit Mercier here who worked with me so we could
understand how to expand a term and use TOKEN_MGR_DECLS.

Patrick

On 10/13/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> Great work Patrick. I was unfamiliar with the use of TOKEN_MGR_DECLS.
> Looks
> like a powerfull feature for dynamic token selection. Thanks a lot,
>
> - Mark
>
>
>

------=_Part_71362_28566154.1160772931347--

From java-user-return-24008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 00:06:55 2006
Return-Path: <java-user-return-24008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59776 invoked from network); 14 Oct 2006 00:06:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 00:06:55 -0000
Received: (qmail 96740 invoked by uid 500); 14 Oct 2006 00:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96711 invoked by uid 500); 14 Oct 2006 00:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 65983 invoked by uid 99); 13 Oct 2006 20:19:05 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of abublic@gmail.com designates 66.249.92.168 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=Ae3dX06siwV0FoEIgrmrznxdANU2Qy5q6tl8n3fL/MRS2h9VPpsUkCGrMqFNMGlIlVoBMgPcHnZSFtIcfmMWSFFpDtvjqlswEtrMXVKKEy0xriEnyPhBLxZv/r3NH3Goz51LR3+sSFG8/GUYrGCUfHHhyvKcaaAePv414XeoUOw=
Date: Sat, 14 Oct 2006 00:18:43 +0400
From: Artem <abublic@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem <abublic@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <6410326709.20061014001843@gmail.com>
To: Scott Smith <java-user@lucene.apache.org>
Subject: Re: Large index question
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
References:
 <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=Windows-1251
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Scott!

I think your index is just not large really. My Sharehound's indexes of my
corporate LAN is about 10G/10mlns of (really small) documents now, and queries
get really little time, less than a second for non-sorted queries and some more
for sorted. The machine is some P4 with 1G RAM. I use just FSDir.

Best regards,
Artem.

SS> Supposed I want to index 500,000 documents (average document size is
SS> 4kBs).  Let's assume I create a single index and that the index is
SS> static (I'm not going to add any new documents to it).  I would guess
SS> the index would be around 2GB.  

 

SS> Now, I do searches against this on a somewhat beefy machine (2GB RAM,
SS> Core 2 Duo, Windows XP).  Does anyone have any idea what kinds of search
SS> times I can expect for moderately complicated searches (several sets of
SS> keywords against several fields)?  Are there things I can do to increase
SS> search performance?  For example, does Lucene like lots of RAM, lots of
SS> CPU, faster HD, all of the above?  Am I better splitting the index file
SS> into 2 (N?) versions and search on multiple indexes simultaneously?  

 

SS> Anyone have any thoughts about this?

 

SS> Scott 

 




-- 
 ,
 Artem                          mailto:abublic@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 01:06:34 2006
Return-Path: <java-user-return-24009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65242 invoked from network); 14 Oct 2006 01:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 01:06:34 -0000
Received: (qmail 21159 invoked by uid 500); 14 Oct 2006 01:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21118 invoked by uid 500); 14 Oct 2006 01:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21107 invoked by uid 99); 14 Oct 2006 01:06:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 18:06:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 18:06:27 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9E165Il038242
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 01:06:05 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9E18UsG3158034
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 03:08:30 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9E165f2032642
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 03:06:05 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9E165w2032636
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 03:06:05 +0200
In-Reply-To: <452FAA37.3020607@net-frame.com>
Subject: Re: advanced search
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF847C5B71.7099A47C-ON88257207.00040D21-88257207.00044674@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 13 Oct 2006 16:46:41 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 14/10/2006 03:08:30
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Terry Steichen <terry@net-frame.com> wrote on 13/10/2006 08:01:11:
> You can just add a field to your indexed docs that always evaluates to a
> fixed value.  Then you can do queries like: +doc:1 -id:test

Alternatively you can use MatchAllDocsQuery, e.g.

    BooleanQuery bq = new BooleanQuery();
    bq.add(new MatchAllDocsQuery(),Occur.SHOULD);
    bq.add(new TermQuery(new Term("id","test")),Occur.MUST_NOT);

>
> karl wettin wrote:
> >
> > 13 okt 2006 kl. 09.59 skrev tony yin:
> >
> >> I wanta search several fields use NOT condition, but how?
> >> for example:
> >> I store "test" in {"id", "name", "value", ...} fields.
> >> now I search "test" NOT in "id". That's it.
> >>
> >> Can anyone help me?
> >
> > You will not get any matchs looking for just a boolean NOT-clause. It
> > has to be combined with something that matches. Perhaps a
> > MatchAllDocumentsQuery will do it for you.
> >
> > But to answer your question: a not-query is a Clause of a BooleanQuery.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 01:42:07 2006
Return-Path: <java-user-return-24010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73623 invoked from network); 14 Oct 2006 01:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 01:42:07 -0000
Received: (qmail 34566 invoked by uid 500); 14 Oct 2006 01:42:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34537 invoked by uid 500); 14 Oct 2006 01:42:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34526 invoked by uid 99); 14 Oct 2006 01:42:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 18:42:01 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 18:42:00 -0700
Received: by py-out-1112.google.com with SMTP id i49so1000778pyi
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 18:41:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cd1a4brykDMr56Iqtf8qW0FczCN3B2kofpx5WIMfhD9WOs8gOcdEZlvMxVyHpud8RuvlwFJtnhAHdkUDMb7XewcqXSqvVnhtZRgHlerkY1eIi6+ukZWzMn+zQnLEa5eVZPY1qh6XSqTZtB6oV56acU06AwEAL6Q7OwrZwyeyBWk=
Received: by 10.35.132.13 with SMTP id j13mr6959018pyn;
        Fri, 13 Oct 2006 18:41:38 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Fri, 13 Oct 2006 18:41:38 -0700 (PDT)
Message-ID: <ab0709bf0610131841i3a88028jf3a9aec044504355@mail.gmail.com>
Date: Fri, 13 Oct 2006 21:41:38 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Large index question
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54006_25247183.1160790098842"
References: <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_54006_25247183.1160790098842
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I recently played around with a 2 million doc index of docs that averaged
between 2-10k. The system had 4 gig of ram and a 3 gig dual core proc (not
using a parallel searcher to take advantage of the extra core)...pretty
beefy, but with 4 times the docs your talking about. I didn't see a query
that took over a second without a sort.

A similar setup on a single core 3200+ AMD 64 with a gig of ram was also
blazingly fast (no sorts involved again).

- Mark

On 10/12/06, Scott Smith <ssmith@mainstreamdata.com> wrote:
>
> Supposed I want to index 500,000 documents (average document size is
> 4kBs).  Let's assume I create a single index and that the index is
> static (I'm not going to add any new documents to it).  I would guess
> the index would be around 2GB.
>
>
>
> Now, I do searches against this on a somewhat beefy machine (2GB RAM,
> Core 2 Duo, Windows XP).  Does anyone have any idea what kinds of search
> times I can expect for moderately complicated searches (several sets of
> keywords against several fields)?  Are there things I can do to increase
> search performance?  For example, does Lucene like lots of RAM, lots of
> CPU, faster HD, all of the above?  Am I better splitting the index file
> into 2 (N?) versions and search on multiple indexes simultaneously?
>
>
>
> Anyone have any thoughts about this?
>
>
>
> Scott
>
>
>
>
>

------=_Part_54006_25247183.1160790098842--

From java-user-return-24011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 05:20:06 2006
Return-Path: <java-user-return-24011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9953 invoked from network); 14 Oct 2006 05:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 05:20:05 -0000
Received: (qmail 74512 invoked by uid 500); 14 Oct 2006 05:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74453 invoked by uid 500); 14 Oct 2006 05:19:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74418 invoked by uid 99); 14 Oct 2006 05:19:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 22:19:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of artvas@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Oct 2006 22:19:47 -0700
Received: by ug-out-1314.google.com with SMTP id k40so543256ugc
        for <java-user@lucene.apache.org>; Fri, 13 Oct 2006 22:19:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:from:x-mailer:reply-to:x-priority:message-id:to:cc:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding;
        b=oaXju/3QAHo56E3cUvFzD0dGqs7wz1X+B5vhGBuJR4RZUtQPUkjllIz4NFvwBBsX1vM5WTWof4u+pQdnjEKQhSopgphkqqqfwFimcaUBcdQj6S1aUx0+/y6Ni4RhESnC2YAvl/F9QF7TClnRP+OOjEKjnhoGCc8eay1AWeta7V0=
Received: by 10.66.252.4 with SMTP id z4mr5191080ugh;
        Fri, 13 Oct 2006 22:19:25 -0700 (PDT)
Received: from ppp236-233.pptp.mtu-net.ru ( [81.195.236.233])
        by mx.google.com with ESMTP id k1sm1078957ugf.2006.10.13.22.19.24;
        Fri, 13 Oct 2006 22:19:24 -0700 (PDT)
Date: Sat, 14 Oct 2006 09:19:28 +0400
From: Artem Vasiliev <artvas@gmail.com>
X-Mailer: The Bat! (v2.04.7) Personal
Reply-To: Artem Vasiliev <artvas@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <1592028860.20061014091928@gmail.com>
To: "Scott Smith" <ssmith@mainstreamdata.com>
CC: java-user@lucene.apache.org
Subject: Re: Large index question
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
References:
 <55F9EF953014514EB6BEE1F5198CEEB44897CD@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Scott!

I think your index is just not large really. My Sharehound's indexes of my
corporate LAN is about 10G/10mlns of (really small) documents now, and queries
get really little time, less than a second for non-sorted queries and some more
for sorted. The machine is some P4 with 1G RAM. I use just FSDir.

Best regards,
Artem.

SS> Supposed I want to index 500,000 documents (average document size is
SS> 4kBs).  Let's assume I create a single index and that the index is
SS> static (I'm not going to add any new documents to it).  I would guess
SS> the index would be around 2GB.  

 

SS> Now, I do searches against this on a somewhat beefy machine (2GB RAM,
SS> Core 2 Duo, Windows XP).  Does anyone have any idea what kinds of search
SS> times I can expect for moderately complicated searches (several sets of
SS> keywords against several fields)?  Are there things I can do to increase
SS> search performance?  For example, does Lucene like lots of RAM, lots of
SS> CPU, faster HD, all of the above?  Am I better splitting the index file
SS> into 2 (N?) versions and search on multiple indexes simultaneously?  

 

SS> Anyone have any thoughts about this?

 

SS> Scott


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 07:35:42 2006
Return-Path: <java-user-return-24012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33665 invoked from network); 14 Oct 2006 07:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 07:35:42 -0000
Received: (qmail 24534 invoked by uid 500); 14 Oct 2006 07:35:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24491 invoked by uid 500); 14 Oct 2006 07:35:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24480 invoked by uid 99); 14 Oct 2006 07:35:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 00:35:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 00:35:34 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9E7ZCnI059622
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 07:35:12 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9E7bbXR2785332
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 09:37:37 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9E7ZBCU008255
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 09:35:11 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9E7Z7Es008237
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 09:35:07 +0200
In-Reply-To: <87F5C1A5-905E-4D01-9DE7-D44DF44D826A@bittorrent.com>
Subject: Re: highlighting with WildcardQuery
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFEC0B99D8.3B914105-ON88257207.0028952D-88257207.0029A134@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 13 Oct 2006 23:34:42 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 14/10/2006 09:37:33
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The IndexReader is needed for finding all wildcard matches (by the index
lexicon). It seems you do not want to expand the wild card query by the
index lexicon, but rather with that of the highlighted text (which may not
be indexed at all). I think you have at least two ways to do that:

(1) create a (highlight) QueryScorer with:
   new QueryScorer(WeightedTerm weightedTerms[])
which means that you provide all the "lexicon" knowledge usually taken from
the index(reader), i.e. which words are valid for the wild card
'expression'.

(2) extend QueryScorer, implementing
   float getTokenScore(Token token)
such that tokens matching the wildcard expr get nonzero score.

- Doron

"James O'Rourke" <james@bittorrent.com> wrote on 13/10/2006 11:39:31:

> Is there anyway to do highlighting when using a WildcardQuery when
> there is no IndexReader available? I simply want to do it with a
> chunk of text, but it fails because the WildcardQuery needs to call
> rewrite - but doesn't know about the IndexReader.
>
> Code (using PyLucene-2.0.0 - can translate to java if like)
>
> def gethighlightedfragments(text, searchString,
>      fragmentLength = 50, numFragments = 3,  opening= '<span class=
> \"highlight\">', closing = '</span>'):
>      """ Returns a list of text fragments with returns included for
> 80 char max width """
>      """ Defaults to OR operator which is good for formatting """
>      analyzer = StandardAnalyzer()
>      #print text
>      strs = searchString.split()
>      bq = BooleanQuery()
>      for s in strs:
>          print s
>          q = WildcardQuery(Term('f', '*' + s +  '*'))
>          #print q.toString()
>          bq.add(q,  BooleanClause.Occur.SHOULD)
>      #print bq.toString()
>      scorer = QueryScorer(bq)
>      formatter = SimpleHTMLFormatter(opening, closing)
>      highlighter = Highlighter(formatter, scorer)
>      fragmenter = SimpleFragmenter(fragmentLength)
>      highlighter.setTextFragmenter(fragmenter)
>
>      tokenStream = analyzer.tokenStream('f', StringReader(text))
>      return  highlighter.getBestFragments(tokenStream, text,
> numFragments)
>
>
> Basically, I want to show partial word matches also.
>
> James
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 09:41:11 2006
Return-Path: <java-user-return-24013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46091 invoked from network); 14 Oct 2006 09:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 09:41:11 -0000
Received: (qmail 72250 invoked by uid 500); 14 Oct 2006 09:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72199 invoked by uid 500); 14 Oct 2006 09:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72188 invoked by uid 99); 14 Oct 2006 09:41:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 02:41:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ehs@pobox.com designates 207.106.133.28 as permitted sender)
Received: from [207.106.133.28] (HELO proof.pobox.com) (207.106.133.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 02:41:02 -0700
Received: from proof (localhost [127.0.0.1])
	by proof.pobox.com (Postfix) with ESMTP id 6E24828D8A
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 05:40:58 -0400 (EDT)
Received: from [192.168.1.100] (c-68-50-155-8.hsd1.md.comcast.net [68.50.155.8])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by proof.sasl.smtp.pobox.com (Postfix) with ESMTP id 5D03081677
	for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 05:40:58 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <e2b4bf8d0610131336t60b00138h5bc4c06c0c49f6e8@mail.gmail.com>
References: <e2b4bf8d0610131336t60b00138h5bc4c06c0c49f6e8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D0FC10D1-D2F0-4EDD-9B15-5C22D2CB2E9F@pobox.com>
Content-Transfer-Encoding: 7bit
From: Edward Summers <ehs@pobox.com>
Subject: Re: Lucene SRW/SRU
Date: Sat, 14 Oct 2006 05:40:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Oct 13, 2006, at 4:36 PM, Serhiy Polyakov wrote:
> I want to access Lucene index with SRW Web Service and the SRU. I know
> that Online Computer Library Center has one implementation:
> http://www.oclc.org/research/announcements/2003-11-07b.htm
> But it is kind of limited to DSpace digital repository system (I will
> check more about that).
>
> Could you please advise about other implementations if any?

The Extensible Text Framework [1] from the California Digital Library  
is a wrapper around Lucene and provides (among other things) a SRU  
Servlet [2].

//Ed

[1] http://www.cdlib.org/inside/projects/xtf/
[2] http://xtf.sourceforge.net/WebDocs/HTML/XTF_Experimental_Features/ 
XTFExperimental.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 14:33:23 2006
Return-Path: <java-user-return-24014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16693 invoked from network); 14 Oct 2006 14:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 14:33:22 -0000
Received: (qmail 84516 invoked by uid 500); 14 Oct 2006 14:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83503 invoked by uid 500); 14 Oct 2006 14:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83482 invoked by uid 99); 14 Oct 2006 14:33:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 07:33:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.222.193.2] (HELO sidekick.frogspace.net) (216.222.193.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 07:33:09 -0700
Received: from pool-68-160-46-168.bos.east.verizon.net ([68.160.46.168] helo=aroushlt)
	by sidekick.frogspace.net with esmtp (Exim 4.44)
	id 1GYkZE-0004QW-FZ; Sat, 14 Oct 2006 07:32:49 -0700
From: "George Aroush" <george@aroush.net>
To: <java-dev@lucene.apache.org>,
	<java-user@lucene.apache.org>
Subject: RE: Lucene 2.0.1 release date
Date: Sat, 14 Oct 2006 10:32:47 -0400
Message-ID: <032601c6ef9d$9f6b4870$52844109@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <000301c6edb3$eaea9990$c4ba3109@aroushlt>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Acbts+pPTydAswooSdCmXrM71ir8fQB6VpIA
X-SA-Exim-Connect-IP: 68.160.46.168
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi folks,

Sorry for reposting this question (see original email below) and this time
to both mailing list.

If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
appreciate it very much.

As some of you may know, I am the porter of Lucene to Lucene.Net knowing
when 2.0.1 will be released will help me plan things out.

Regards,

-- George Aroush


-----Original Message-----
From: George Aroush [mailto:george@aroush.net] 
Sent: Thursday, October 12, 2006 12:07 AM
To: java-dev@lucene.apache.org
Subject: Lucene 2.0.1 release date

Hi folks,

What's the plan for Lucene 2.0.1 release date?

Thanks!

-- George Aroush


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 14 19:58:27 2006
Return-Path: <java-user-return-24015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72741 invoked from network); 14 Oct 2006 19:58:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Oct 2006 19:58:27 -0000
Received: (qmail 30602 invoked by uid 500); 14 Oct 2006 19:58:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30563 invoked by uid 500); 14 Oct 2006 19:58:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30552 invoked by uid 99); 14 Oct 2006 19:58:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 12:58:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.99.47.68] (HELO mail13.simplicato.com) (207.99.47.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 12:58:19 -0700
Received: from mail13.simplicato.com (localhost [127.0.0.1])
	by mail13.simplicato.com (Postfix) with ESMTP id 98B0777ADB2;
	Sat, 14 Oct 2006 15:57:56 -0400 (EDT)
Received: from PEACE (unknown [216.195.213.27])
	by mail13.simplicato.com (Postfix) with ESMTP id 6F5A077AD95;
	Sat, 14 Oct 2006 15:57:56 -0400 (EDT)
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Cc: "'Jong Kim'" <jkim@sitescape.com>
Subject: Looking for a stemmer that can return all inflected forms
Date: Sat, 14 Oct 2006 15:57:59 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0038_01C6EFA9.857337F0"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: Acbvywwc7PsB9u4AQqyeXT+o2gsdnw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20061014195756.6F5A077AD95@mail13.simplicato.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0038_01C6EFA9.857337F0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,
 
I'm looking for a stemmer that is capable of returning all morphological 
variants  of a query term (to be used for high-recall search). For example, 
given a query term of 'cares', I would like to be able to generate 'cares', 
'care', 'cared', and 'caring'.
 
I looked at the Porter stemmer, Snowball stemmer, and the K-stem. 
All of them provide a method that takes a surface string ('cares') as an 
input and returns its base form/stem, which is 'care' in this example. 
But it appears that I can not use the stemmer to generate all of the 
inflected forms of a given query term. 
 
Does anyone know of such tool for Lucene? 
Any help or pointer would be greatly appreciated. 
 
Thanks
/Jong

------=_NextPart_000_0038_01C6EFA9.857337F0--


From java-user-return-24016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 00:27:03 2006
Return-Path: <java-user-return-24016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99621 invoked from network); 15 Oct 2006 00:27:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 00:27:03 -0000
Received: (qmail 44802 invoked by uid 500); 15 Oct 2006 00:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44774 invoked by uid 500); 15 Oct 2006 00:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44763 invoked by uid 99); 15 Oct 2006 00:26:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 17:26:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike.klaas@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 17:26:55 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1774768nfe
        for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 17:26:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ARUldemNR3vvgbK+q8L/4fx+YCO379wbwY6iBrw6MoYvQFdr3/MFXpDUFg6UlULwTPIYr/nmcoJGXBFVEvQqEXmkI0ZcW3jrCphgpLMYZrfMmtoxfaINeHTQTT4E4AVeLKFZ8gtjubZXBcMr7c6ihHbjM1e3HqXzRFHe1OyeyFg=
Received: by 10.78.151.15 with SMTP id y15mr5761416hud;
        Sat, 14 Oct 2006 17:26:34 -0700 (PDT)
Received: by 10.78.172.1 with HTTP; Sat, 14 Oct 2006 17:26:34 -0700 (PDT)
Message-ID: <3d2ce8cb0610141726id1831e4x61ba6899241c1b1a@mail.gmail.com>
Date: Sat, 14 Oct 2006 17:26:34 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Looking for a stemmer that can return all inflected forms
Cc: "Jong Kim" <jkim@sitescape.com>
In-Reply-To: <20061014195756.6F5A077AD95@mail13.simplicato.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061014195756.6F5A077AD95@mail13.simplicato.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/14/06, Jong Kim <jkim@sitescape.com> wrote:
> Hi,
>
> I'm looking for a stemmer that is capable of returning all morphological
> variants  of a query term (to be used for high-recall search). For example,
> given a query term of 'cares', I would like to be able to generate 'cares',
> 'care', 'cared', and 'caring'.
>
> I looked at the Porter stemmer, Snowball stemmer, and the K-stem.
> All of them provide a method that takes a surface string ('cares') as an
> input and returns its base form/stem, which is 'care' in this example.
> But it appears that I can not use the stemmer to generate all of the
> inflected forms of a given query term.

Stemming is a multi-step, lossy, one-way operation and  it does not
suprised me that none of these packages attempts the reverse
operation.

My suggestion is to create a reverse stemmer yourself by taking the
lexicon of your corpus, stemming all the terms, and inverting the map.
 At query time, a lookup can be performed using a trie or hashtable.

best,
-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 03:09:39 2006
Return-Path: <java-user-return-24017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27856 invoked from network); 15 Oct 2006 03:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 03:09:38 -0000
Received: (qmail 22104 invoked by uid 500); 15 Oct 2006 03:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22074 invoked by uid 500); 15 Oct 2006 03:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22063 invoked by uid 99); 15 Oct 2006 03:09:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 20:09:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 20:09:29 -0700
Received: from smtp-a.omnis.com (smtp-a.omnis.com [216.239.128.237])
	by smtp.omnis.com (Postfix) with ESMTP id 50D981C15F;
	Sat, 14 Oct 2006 20:09:07 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	(Authenticated sender: wataylor@as-st.com)
	by smtp-a.omnis.com (Postfix) with ESMTP id D359546F796;
	Sat, 14 Oct 2006 20:09:07 -0700 (PDT)
In-Reply-To: <20061014195756.6F5A077AD95@mail13.simplicato.com>
References: <20061014195756.6F5A077AD95@mail13.simplicato.com>
Mime-Version: 1.0 (Apple Message framework v624)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <113bcad10f50f78456021855ed2d25e2@as-st.com>
Content-Transfer-Encoding: 7bit
Cc: "'Jong Kim'" <jkim@sitescape.com>
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Looking for a stemmer that can return all inflected forms
Date: Sat, 14 Oct 2006 23:43:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Oct 14, 2006, at 3:57 PM, Jong Kim wrote:

> Hi,
>
> I'm looking for a stemmer that is capable of returning all 
> morphological
> variants  of a query term (to be used for high-recall search). For 
> example,
> given a query term of 'cares', I would like to be able to generate 
> 'cares',
> 'care', 'cared', and 'caring'.
>
> I looked at the Porter stemmer, Snowball stemmer, and the K-stem.
> All of them provide a method that takes a surface string ('cares') as 
> an
> input and returns its base form/stem, which is 'care' in this example.

First of all, I would GREATLY appreciate it if you would tell me which 
of these is easiest to incorporate into Lucene.  I have the same 
problem you do.  I have solved the other end of it but do not knot how 
to fit a stemmer into Lucene.

> But it appears that I can not use the stemmer to generate all of the
> inflected forms of a given query term.
>
> Does anyone know of such tool for Lucene?

I am writing one which is VERY SPECIAL PURPOSE and therefore my code 
not likely to be of much use to you.  HOWEVER, the basic idea is quite 
simple:

Idea 1:

1) Since you have to use the stemmer against something, you are reading 
words out of the index and extracting their stems.

2) Having done that for a word, find all "nearby" words which have the 
same stem.  The simplest definition of "nearby" that I can think of is 
that the word starts with the stem, but you might want to drop the last 
character of the stem and look for all words that start with that.  
Thus, if the stem is "care" you would look at all words that start with 
"car" and if they have "care" as the stem, they are in the same family.

The advantage of this approach is that you do not ever offer any words 
that are not in your index.  If you found cares and cared but not 
caring in your index, you would not want to suggest that someone search 
for caring because they won't find it.  So you use the index as the 
source of words to stem.

Idea 2:

Another way to do it is to build a hash map of tree sets keyed to the 
stem.  Each stem has a tree set of all words which have it as a stem.  
The code would look something like

HashMap<String, TreeSet> stemmedWords = new HashMap<String, TreeSet>();
TreeSet<String> wordsForStem;

for (String word : all words in the index)  {
	stem = MagicStemmer(word);  // I left out code for words that do not 
have stems
           if ( (wordsForStem = stemmedWords.get(stem)) == null) {
               wordsForStem = new TreeSet<String>();  // Tree set for 
the new stem
               stemmedWords.put(stem, wordsForStem); // Now this stem 
has a set for its words
          }
         wordsForStem.add(word); // Put the word into the tree set for 
its stem
}

For each stem from all the words in your index, you get a tree set 
which contains all the words which have it as a stem;  The tree set 
keeps its words in alphabetical order.

If you want the stems to be displayed in alphabetical order, use a 
TreeMap instead of a HashMap.

> Any help or pointer would be greatly appreciated.

I would appreciate your telling me which stemmer for English words is 
easiest to incorporate into Lucene and where to find it.  Thanks.

Bill Taylor


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 03:15:11 2006
Return-Path: <java-user-return-24018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29292 invoked from network); 15 Oct 2006 03:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 03:15:11 -0000
Received: (qmail 27155 invoked by uid 500); 15 Oct 2006 03:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27130 invoked by uid 500); 15 Oct 2006 03:15:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27118 invoked by uid 99); 15 Oct 2006 03:15:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 20:15:05 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.252.110.211] (HELO web56202.mail.re3.yahoo.com) (216.252.110.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Oct 2006 20:15:04 -0700
Received: (qmail 677 invoked by uid 60001); 15 Oct 2006 03:14:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=zQnIKinhzowRLowDSkEO6pVK207YROFY+EiSCk/TRq+/Gw2pC7vguv3hTpznoo9LwQYkDZx3lKkq872cMuOG1xbyAiYh+8ZTF4r9Dx7NOJybCLU0QG2bW7UG6/jI6y9gejIkH08FXMCuR5C0FLxomPGgWh/FRToGt9BFC3YnQ4g=  ;
Message-ID: <20061015031443.675.qmail@web56202.mail.re3.yahoo.com>
Received: from [69.143.131.187] by web56202.mail.re3.yahoo.com via HTTP; Sat, 14 Oct 2006 20:14:43 PDT
Date: Sat, 14 Oct 2006 20:14:43 -0700 (PDT)
From: John Gilbert <jgilbert01@yahoo.com>
Subject: java.io.IOException: read past EOF
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1128088136-1160882083=:99350"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1128088136-1160882083=:99350
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable

I am trying to write an Ejb3Directory. It seems to work for index writing b=
ut not for searching.=0AI get the EOF exception. I assume this means that e=
ither my OutputStream or InputStream is doing=0Asomething wrong. It fails b=
ecause the CSInputStream has a length of zero when it reads the .fnm sectio=
n =0Aof the .cfs file.=0A=0ADoes anyone have any suggestions? =0AThanks!=0A=
=0AHere is more background info:=0A=0A- Using version 1.4.3=0A- Stack trace=
=0Ajava.io.IOException: read past EOF=0A    at org.apache.lucene.store.Inpu=
tStream.refill(InputStream.java:154)=0A    at org.apache.lucene.store.Input=
Stream.readByte(InputStream.java:43)=0A    at=0A org.apache.lucene.store.In=
putStream.readVInt(InputStream.java:83)=0A    at org.apache.lucene.index.Fi=
eldInfos.read(FieldInfos.java:195)=0A    at org.apache.lucene.index.FieldIn=
fos.<init>(FieldInfos.java:55)=0A    at org.apache.lucene.index.SegmentRead=
er.initialize(SegmentReader.java:109)=0A    at org.apache.lucene.index.Segm=
entReader.<init>(SegmentReader.java:89)=0A    at org.apache.lucene.index.In=
dexReader$1.doBody(IndexReader.java:118)=0A    at org.apache.lucene.store.L=
ock$With.run(Lock.java:109)=0A    at org.apache.lucene.index.IndexReader.op=
en(IndexReader.java:111)=0A    at org.apache.lucene.index.IndexReader.open(=
IndexReader.java:106)=0A    at org.apache.lucene.search.IndexSearcher.<init=
>(IndexSearcher.java:43)=0A=0A=0A- Entity Bean=0A=0A@Entity=0Apublic class =
IndexBean implements Serializable=0A {=0A    @Id private String name;=0A   =
 @Lob private byte[] data;=0A    @Version private Calendar timestamp;=0A   =
 ...=0A}=0A=0A- InputStream=0A=0Apublic class Ejb3InputStream extends Input=
Stream {=0A    private java.io.InputStream is;=0A=0A    public Ejb3InputStr=
eam(IndexBean bean) {=0A        this.is =3D new ByteArrayInputStream(bean.g=
etData());=0A        length =3D bean.getData().length;=0A    }=0A=0A    pub=
lic void close() throws IOException {=0A        is.close();=0A    }=0A=0A  =
  protected void readInternal(byte[] b, int off, int len) throws IOExceptio=
n {=0A        is.read(b, off, len);=0A    }=0A=0A    protected void seekInt=
ernal(long n) throws=0A IOException {=0A        is.skip(n);=0A    }=0A}=0A=
=0A- OutputStream=0A=0Apublic class Ejb3OutputStream extends OutputStream {=
=0A    private IndexBean bean;=0A    private ByteArrayOutputStream os =3D n=
ew ByteArrayOutputStream();=0A=0A    public Ejb3OutputStream(IndexBean bean=
) {=0A        this.bean =3D bean;=0A    }=0A=0A    protected void flushBuff=
er(byte[] b, int len) throws IOException {=0A        os.write(b);=0A    }=
=0A=0A    public long length() throws IOException {=0A        return os.siz=
e();=0A    }=0A=0A    public final void close() throws IOException {=0A    =
    super.close();=0A       =0A bean.setData(os.toByteArray());=0A    }=0A}=
=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A=0A
--0-1128088136-1160882083=:99350--

From java-user-return-24019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 03:48:21 2006
Return-Path: <java-user-return-24019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44376 invoked from network); 15 Oct 2006 03:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 03:48:21 -0000
Received: (qmail 49680 invoked by uid 500); 15 Oct 2006 03:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49648 invoked by uid 500); 15 Oct 2006 03:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49637 invoked by uid 99); 15 Oct 2006 03:48:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 20:48:16 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 20:48:15 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9F3lreP053224
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 03:47:53 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9F3oJNF2494718
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 05:50:19 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9F3lqGE026644
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 05:47:52 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9F3lqXm026639
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 05:47:52 +0200
In-Reply-To: <20061015031443.675.qmail@web56202.mail.re3.yahoo.com>
Subject: Re: java.io.IOException: read past EOF
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFF3A93C54.90CF1E8D-ON88257208.001427EC-88257208.0014D4A3@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 14 Oct 2006 19:47:31 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 15/10/2006 05:50:19
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Gilbert <jgilbert01@yahoo.com> wrote on 14/10/2006 20:14:43:
> I am trying to write an Ejb3Directory. It seems to work for index
> writing but not for searching.
> I get the EOF exception. I assume this means that either my
> OutputStream or InputStream is doing
> something wrong. It fails because the CSInputStream has a length of
> zero when it reads the .fnm section
> of the .cfs file.
>
> Does anyone have any suggestions?

Seems flushBuffer() ignores its length param:

> public class Ejb3OutputStream extends OutputStream {
>     protected void flushBuffer(byte[] b, int len) throws IOException {
>         os.write(b);
>     }

Shouldn't it be like this?

   os.write(b, 0, len);


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 04:29:42 2006
Return-Path: <java-user-return-24020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47641 invoked from network); 15 Oct 2006 04:29:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 04:29:41 -0000
Received: (qmail 73757 invoked by uid 500); 15 Oct 2006 04:29:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73730 invoked by uid 500); 15 Oct 2006 04:29:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73719 invoked by uid 99); 15 Oct 2006 04:29:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 21:29:36 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Oct 2006 21:29:35 -0700
Received: (qmail 60165 invoked by uid 60001); 15 Oct 2006 04:29:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=vZfoye459RZNvjTFQMeVo7Y3C99LGvxn9OwFwdSuqC/qabTA5c0EbT5Lr9LE2QhiaPeYs251wPYf/rr7xxuwwAv8d400QzX8/zwakWHJMeWQ4xkQ/IeXOE0gba9rcbL+dhJC3gvwDA3RPK0xMWiCvBkNlKxkSngLRrBhkLBgKKU=  ;
Message-ID: <20061015042914.60163.qmail@web50309.mail.yahoo.com>
Received: from [74.65.202.166] by web50309.mail.yahoo.com via HTTP; Sat, 14 Oct 2006 21:29:14 PDT
Date: Sat, 14 Oct 2006 21:29:14 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Multiple-field queries
To: java-user@lucene.apache.org
Cc: Enzo Michelangeli <enzomich@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Redirecting to java-user.=0AI wouldn't worry too much about complexity of o=
ption 1, unless you know that's just the nature of your app.=0ANote that go=
ing with option one you benefit from the ability to assign different boosts=
 to different fields, length norm comes into play when scoring, etc.=0A=0AO=
tis=0A=0A----- Original Message ----=0AFrom: Enzo Michelangeli <enzomich@gm=
ail.com>=0ATo: java-dev@lucene.apache.org=0ASent: Sunday, October 15, 2006 =
12:14:51 AM=0ASubject: Multiple-field queries=0A=0AI need to be able to sea=
rch over multiple fields at the same time. The =0Asuggestions I have seen s=
o far to solve this problem are either:=0A=0A1. Use a boolean query, or=0A2=
. During indexing, create an extra "all" field and add it every time =0Aano=
ther field is added to the document.=0A=0AHowever, 1. may make the query ve=
ry large and inefficient, and 2. is =0Aproblematic with fields built from a=
 Reader, because the Reader gets closed =0Aafter the first field is indexed=
 (and using a cloned Reader would require =0Arunning a text extractor twice=
, which sounds wasteful of CPU cycles).=0A=0AWould it be possible to add to=
 the API some method to add in on stroke =0Amultiple fields that share a sa=
me Reader, while using that Reader only once, =0Aor to define fields with a=
n array of names (such as Field f =3D new =0AField(String[], Reader) ) rath=
er than a single name?=0A=0AIf not, are there alternative ways to achieve m=
y goal, other than =0Apre-reading the data into a String, which is obviousl=
y dangerous because it =0Acan cause a memory allocation failure if the end =
of file doesn't arrive soon =0Aenough?=0A=0AThanks --=0A=0AEnzo=0A=0A=0A---=
------------------------------------------------------------------=0ATo uns=
ubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org=0AFor additional c=
ommands, e-mail: java-dev-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 04:38:27 2006
Return-Path: <java-user-return-24021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48118 invoked from network); 15 Oct 2006 04:38:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 04:38:27 -0000
Received: (qmail 76928 invoked by uid 500); 15 Oct 2006 04:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76899 invoked by uid 500); 15 Oct 2006 04:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76888 invoked by uid 99); 15 Oct 2006 04:38:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 21:38:21 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Oct 2006 21:38:21 -0700
Received: (qmail 222 invoked by uid 60001); 15 Oct 2006 04:37:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=dR2qd9i+RHYHXj/UdObMk0l8M8Glxsnz5OYJb+m5aJWxwgbD7GquMq2x7HGIlIip9VAXgKmqbfXIaUCznuMzqlfxUJ8uWp/eaNMWIYPDyzvil6C2dlFU9+g1rTE/OMxy7rqA+hVoYLobdfbyXiAzEMO1oRdxjDj1kp4Bafx5GLY=  ;
Message-ID: <20061015043756.220.qmail@web50307.mail.yahoo.com>
Received: from [74.65.202.166] by web50307.mail.yahoo.com via HTTP; Sat, 14 Oct 2006 21:37:56 PDT
Date: Sat, 14 Oct 2006 21:37:56 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Looking for a stemmer that can return all inflected forms
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bill: Lucene already comes with PorterStemFilter (class name), which you ca=
n use for English.=0A=0AIdeas 1 and 2 sound interesting, but I think they m=
ay end up offering false positives.  The reason is obvious - multiple and u=
nrelated words can get stemmed to the same stem.=0AIs "care" really the ste=
m for "caring"?  Maybe.  But imagine the stem is "car".  Suddenly the word =
"cars" shares the same "car" stem and you have a false positive.=0A=0AJong:=
 I _think_ what you need is a "reverse lemmatizer".=0A=0AOtis=0A=0A----- Or=
iginal Message ----=0AFrom: Bill Taylor <wataylor@as-st.com>=0ATo: java-use=
r@lucene.apache.org=0ACc: Jong Kim <jkim@sitescape.com>=0ASent: Saturday, O=
ctober 14, 2006 11:43:10 PM=0ASubject: Re: Looking for a stemmer that can r=
eturn all inflected forms=0A=0AOn Oct 14, 2006, at 3:57 PM, Jong Kim wrote:=
=0A=0A> Hi,=0A>=0A> I'm looking for a stemmer that is capable of returning =
all =0A> morphological=0A> variants  of a query term (to be used for high-r=
ecall search). For =0A> example,=0A> given a query term of 'cares', I would=
 like to be able to generate =0A> 'cares',=0A> 'care', 'cared', and 'caring=
'.=0A>=0A> I looked at the Porter stemmer, Snowball stemmer, and the K-stem=
.=0A> All of them provide a method that takes a surface string ('cares') as=
 =0A> an=0A> input and returns its base form/stem, which is 'care' in this =
example.=0A=0AFirst of all, I would GREATLY appreciate it if you would tell=
 me which =0Aof these is easiest to incorporate into Lucene.  I have the sa=
me =0Aproblem you do.  I have solved the other end of it but do not knot ho=
w =0Ato fit a stemmer into Lucene.=0A=0A> But it appears that I can not use=
 the stemmer to generate all of the=0A> inflected forms of a given query te=
rm.=0A>=0A> Does anyone know of such tool for Lucene?=0A=0AI am writing one=
 which is VERY SPECIAL PURPOSE and therefore my code =0Anot likely to be of=
 much use to you.  HOWEVER, the basic idea is quite =0Asimple:=0A=0AIdea 1:=
=0A=0A1) Since you have to use the stemmer against something, you are readi=
ng =0Awords out of the index and extracting their stems.=0A=0A2) Having don=
e that for a word, find all "nearby" words which have the =0Asame stem.  Th=
e simplest definition of "nearby" that I can think of is =0Athat the word s=
tarts with the stem, but you might want to drop the last =0Acharacter of th=
e stem and look for all words that start with that.  =0AThus, if the stem i=
s "care" you would look at all words that start with =0A"car" and if they h=
ave "care" as the stem, they are in the same family.=0A=0AThe advantage of =
this approach is that you do not ever offer any words =0Athat are not in yo=
ur index.  If you found cares and cared but not =0Acaring in your index, yo=
u would not want to suggest that someone search =0Afor caring because they =
won't find it.  So you use the index as the =0Asource of words to stem.=0A=
=0AIdea 2:=0A=0AAnother way to do it is to build a hash map of tree sets ke=
yed to the =0Astem.  Each stem has a tree set of all words which have it as=
 a stem.  =0AThe code would look something like=0A=0AHashMap<String, TreeSe=
t> stemmedWords =3D new HashMap<String, TreeSet>();=0ATreeSet<String> words=
ForStem;=0A=0Afor (String word : all words in the index)  {=0A    stem =3D =
MagicStemmer(word);  // I left out code for words that do not =0Ahave stems=
=0A           if ( (wordsForStem =3D stemmedWords.get(stem)) =3D=3D null) {=
=0A               wordsForStem =3D new TreeSet<String>();  // Tree set for =
=0Athe new stem=0A               stemmedWords.put(stem, wordsForStem); // N=
ow this stem =0Ahas a set for its words=0A          }=0A         wordsForSt=
em.add(word); // Put the word into the tree set for =0Aits stem=0A}=0A=0AFo=
r each stem from all the words in your index, you get a tree set =0Awhich c=
ontains all the words which have it as a stem;  The tree set =0Akeeps its w=
ords in alphabetical order.=0A=0AIf you want the stems to be displayed in a=
lphabetical order, use a =0ATreeMap instead of a HashMap.=0A=0A> Any help o=
r pointer would be greatly appreciated.=0A=0AI would appreciate your tellin=
g me which stemmer for English words is =0Aeasiest to incorporate into Luce=
ne and where to find it.  Thanks.=0A=0ABill Taylor=0A=0A=0A----------------=
-----------------------------------------------------=0ATo unsubscribe, e-m=
ail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-m=
ail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 04:41:35 2006
Return-Path: <java-user-return-24022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48272 invoked from network); 15 Oct 2006 04:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 04:41:34 -0000
Received: (qmail 78890 invoked by uid 500); 15 Oct 2006 04:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78850 invoked by uid 500); 15 Oct 2006 04:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78839 invoked by uid 99); 15 Oct 2006 04:41:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 21:41:29 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Oct 2006 21:41:28 -0700
Received: (qmail 23894 invoked by uid 60001); 15 Oct 2006 04:41:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=x3RsHHh02QvM1gKWFsKcCL8IC1tRg5jGQw1jAciv97aICGwzmII5gRunMAndt3/LdLlZ2MqJFs3mErLZsJ9UrWjnOsRiCpK75r5/Lf80LBKGNTKX41FL7QpiTwsqd3Rsk36i/S1iVhE+JjAtEze4+gQzs8dvVCdEas8qZzezR0E=  ;
Message-ID: <20061015044107.23892.qmail@web50313.mail.yahoo.com>
Received: from [74.65.202.166] by web50313.mail.yahoo.com via HTTP; Sat, 14 Oct 2006 21:41:07 PDT
Date: Sat, 14 Oct 2006 21:41:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene 2.0.1 release date
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'd have to check CHANGES.txt, but I don't think that many bugs have been f=
ixed and not that many new features added that anyone is itching for a new =
release.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: George Aroush <=
george@aroush.net>=0ATo: java-dev@lucene.apache.org; java-user@lucene.apach=
e.org=0ASent: Saturday, October 14, 2006 10:32:47 AM=0ASubject: RE: Lucene =
2.0.1 release date=0A=0AHi folks,=0A=0ASorry for reposting this question (s=
ee original email below) and this time=0Ato both mailing list.=0A=0AIf anyo=
ne can tell me what is the plan for Lucene 2.0.1 release, I would=0Aappreci=
ate it very much.=0A=0AAs some of you may know, I am the porter of Lucene t=
o Lucene.Net knowing=0Awhen 2.0.1 will be released will help me plan things=
 out.=0A=0ARegards,=0A=0A-- George Aroush=0A=0A=0A-----Original Message----=
-=0AFrom: George Aroush [mailto:george@aroush.net] =0ASent: Thursday, Octob=
er 12, 2006 12:07 AM=0ATo: java-dev@lucene.apache.org=0ASubject: Lucene 2.0=
.1 release date=0A=0AHi folks,=0A=0AWhat's the plan for Lucene 2.0.1 releas=
e date?=0A=0AThanks!=0A=0A-- George Aroush=0A=0A=0A------------------------=
---------------------------------------------=0ATo unsubscribe, e-mail: jav=
a-dev-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java=
-dev-help@lucene.apache.org=0A=0A=0A---------------------------------------=
------------------------------=0ATo unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@luc=
ene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 04:49:50 2006
Return-Path: <java-user-return-24023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48701 invoked from network); 15 Oct 2006 04:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 04:49:49 -0000
Received: (qmail 91950 invoked by uid 500); 15 Oct 2006 04:49:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90926 invoked by uid 500); 15 Oct 2006 04:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90915 invoked by uid 99); 15 Oct 2006 04:49:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 21:49:44 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ekemokai@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 21:49:44 -0700
Received: by py-out-1112.google.com with SMTP id i49so1353693pyi
        for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 21:49:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=tcoY+/W7z7uJ8t5m9duakgQ6iKNRVNsbTLk/ttNHe2npmzVOHOtWmgF7x0BidsrXQuZxKC3yoQdi6ZB2qqWNajyzwzQl+2L4y+OEH4fcNBxWucxrZn4aj4gnFeS7exQvkaIesig9HtHZfAXUMSwxMHBj6+asDID0VvOInD/VpGA=
Received: by 10.64.233.12 with SMTP id f12mr7819398qbh;
        Sat, 14 Oct 2006 21:49:21 -0700 (PDT)
Received: by 10.65.158.7 with HTTP; Sat, 14 Oct 2006 21:49:21 -0700 (PDT)
Message-ID: <dac893430610142149n5134efd3i5ce63da9ee80ba88@mail.gmail.com>
Date: Sun, 15 Oct 2006 00:49:21 -0400
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader.deleteDocuments
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73944_28925825.1160887761380"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_73944_28925825.1160887761380
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys,
I am a newbee so excuse me if this is a repost. From the javadoc it seems
Reader.deleteDocuments deletes only documents that have the provided term,
but the implementation examples that I have seen and from the behaviour of
my own app, deleteDocuments(term) deletes documents that don't have the
given term. Can someone clarify this for me?

Thanks
Edmond Kemokai.


"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_73944_28925825.1160887761380--

From java-user-return-24024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 05:59:38 2006
Return-Path: <java-user-return-24024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58914 invoked from network); 15 Oct 2006 05:59:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 05:59:37 -0000
Received: (qmail 20962 invoked by uid 500); 15 Oct 2006 05:59:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20934 invoked by uid 500); 15 Oct 2006 05:59:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20923 invoked by uid 99); 15 Oct 2006 05:59:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 22:59:32 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ismail@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 22:59:30 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1812940nfe
        for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 22:59:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=eDxdqHltr/ErJ3oxrAFipg1DbAV0qXgac1ZiIJVzCorb4Ge/ET4JiRAr5O2eF2mG15e+D9Fcgj1CDebucJwwX77pWLNGJ3H+QhbYtnbifGizZ5bKOZhR1DWu8aUgGxkiger9vUVwrjqfwK13+6jNUpmIQIVeNfoV+5Ve8LREkr0=
Received: by 10.49.29.3 with SMTP id g3mr9952790nfj;
        Sat, 14 Oct 2006 22:59:09 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sat, 14 Oct 2006 22:59:09 -0700 (PDT)
Message-ID: <1f07f6920610142259h3e717c76o5a0cf395d5e23d24@mail.gmail.com>
Date: Sun, 15 Oct 2006 01:59:09 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: problem deleting documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_116897_7416017.1160891949250"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_116897_7416017.1160891949250
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi guys
i am having problem deleting documents .. apparently its not doin it.. here
is the code snippet

     public void delete(final BoardMessage message)
     {
        try{

           IndexReader fsReader;

           if  (index.exists()) {
              fsReader  =IndexReader.open(index);
              fsReader.deleteDocuments(new Term("pk",message.getId()+""));
              fsReader.close();
           }

        }
        catch(IOException e){
         e.printStackTrace();
        }

now pk is primary key which i am storing but not indexing it..
     doc.add(new Field("pk", message.getId().toString(),Field.Store.YES,
                    Field.Index.NO));

when i am making a search i can get pk and show it in result...but above
code is not deleting the document

------=_Part_116897_7416017.1160891949250--

From java-user-return-24025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 06:07:21 2006
Return-Path: <java-user-return-24025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59549 invoked from network); 15 Oct 2006 06:07:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 06:07:21 -0000
Received: (qmail 24630 invoked by uid 500); 15 Oct 2006 06:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24594 invoked by uid 500); 15 Oct 2006 06:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24583 invoked by uid 99); 15 Oct 2006 06:07:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 23:07:15 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Oct 2006 23:07:15 -0700
Received: (qmail 82693 invoked by uid 60001); 15 Oct 2006 06:06:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=vBdRH6pZOzo2edwiZFf/PWEAe8sfpaL+NE9D4GuQ2qM0tecVXuJ9ubLcnyRSwfdiXKYrYs+BYhjULQWnwSs9FJ9XXK34CFSMDLc6U6fPug562dZ1/m2jIldPo0pXeURgJJQenLFXT+jE+0Iwz9vWhaZjYtp06bedO9qP8h/ScJo=  ;
Message-ID: <20061015060650.82691.qmail@web50315.mail.yahoo.com>
Received: from [74.65.202.166] by web50315.mail.yahoo.com via HTTP; Sat, 14 Oct 2006 23:06:50 PDT
Date: Sat, 14 Oct 2006 23:06:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexReader.deleteDocuments
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The javadoc is right. :)=0A=0AOtis=0A=0A----- Original Message ----=0AFrom:=
 EDMOND KEMOKAI <ekemokai@gmail.com>=0ATo: java-user@lucene.apache.org=0ASe=
nt: Sunday, October 15, 2006 12:49:21 AM=0ASubject: IndexReader.deleteDocum=
ents=0A=0AHi guys,=0AI am a newbee so excuse me if this is a repost. From t=
he javadoc it seems=0AReader.deleteDocuments deletes only documents that ha=
ve the provided term,=0Abut the implementation examples that I have seen an=
d from the behaviour of=0Amy own app, deleteDocuments(term) deletes documen=
ts that don't have the=0Agiven term. Can someone clarify this for me?=0A=0A=
Thanks=0AEdmond Kemokai.=0A=0A=0A"talk trash and carry a small stick."=0APA=
UL KRUGMAN (NYT)=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 06:12:33 2006
Return-Path: <java-user-return-24026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59848 invoked from network); 15 Oct 2006 06:12:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 06:12:32 -0000
Received: (qmail 27777 invoked by uid 500); 15 Oct 2006 06:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27741 invoked by uid 500); 15 Oct 2006 06:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27725 invoked by uid 99); 15 Oct 2006 06:12:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 23:12:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 23:12:25 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9F6C36L120710
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 06:12:03 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9F6ETqh2498572
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 08:14:29 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9F6C2Ic007850
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 08:12:02 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9F6C2hL007840
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 08:12:02 +0200
In-Reply-To: <1f07f6920610142259h3e717c76o5a0cf395d5e23d24@mail.gmail.com>
Subject: Re: problem deleting documents
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFD5851859.53838D37-ON88257208.002192A5-88257208.0021F703@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 14 Oct 2006 22:10:59 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 15/10/2006 08:14:29
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> now pk is primary key which i am storing but not indexing it..
>      doc.add(new Field("pk", message.getId().toString(),Field.Store.YES,
>                     Field.Index.NO));

You would need to index it for this to work.
>From javadocs for IndexReader.deleteDocuments(Term):
  Deletes all documents _containing_ term
Containment relates to indexed terms.

>
> when i am making a search i can get pk and show it in result...but above
> code is not deleting the document

- Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 06:47:21 2006
Return-Path: <java-user-return-24027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61702 invoked from network); 15 Oct 2006 06:47:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 06:47:21 -0000
Received: (qmail 39936 invoked by uid 500); 15 Oct 2006 06:47:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39905 invoked by uid 500); 15 Oct 2006 06:47:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39894 invoked by uid 99); 15 Oct 2006 06:47:15 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ekemokai@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Oct 2006 23:47:15 -0700
Received: by py-out-1112.google.com with SMTP id i49so1374354pyi
        for <java-user@lucene.apache.org>; Sat, 14 Oct 2006 23:45:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=S9aRUa3yt3HjiLJljkjbR8j7QLM/1w3ik0go0/N0shyX0v0I43W1QaA+/7AuVeLJbz9fRruztSFc+moq8yqqqycinvl34rqmahSQZSi7uOhAdBFMfoUMH/6UBgw5XKsuVcD+noAp8Zw45mL9fx5nKeXp+i+/zEb+AO26WTyr4O0=
Received: by 10.64.156.3 with SMTP id d3mr7872773qbe;
        Sat, 14 Oct 2006 23:35:43 -0700 (PDT)
Received: by 10.65.158.7 with HTTP; Sat, 14 Oct 2006 23:35:43 -0700 (PDT)
Message-ID: <dac893430610142335h698e76acx54acaf6e48140b6a@mail.gmail.com>
Date: Sun, 15 Oct 2006 02:35:43 -0400
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.deleteDocuments
In-Reply-To: <20061015060650.82691.qmail@web50315.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74336_2019553.1160894143517"
References: <20061015060650.82691.qmail@web50315.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_74336_2019553.1160894143517
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the response Otis, below is a link to the javadoc in the API:

http://lucene.apache.org/java/docs/api/org/apache/lucene/demo/DeleteFiles.html
( Deletes documents from an index that do not contain a term)

Here is a link to the actual sample implementation:
http://svn.apache.org/repos/asf/lucene/java/trunk/src/demo/org/apache/lucene/demo/DeleteFiles.java

In the file above you have code that looks like this:

      Term term = new Term("path", args[0]);
      int deleted = reader.deleteDocuments(term);

So in effect it should delete documents that don't contain the "path" value
correspoding to what's in args[0]. Except the API documentation suggests the
opposite. In other words the above code should delete only documents
containing "path" values equal to args[0] (this is obviously more
intuitive). Here is the API doc for what the above code snippet should do:

(
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#deleteDocuments(org.apache.lucene.index.Term)
):

Deletes all documents containing term. This is useful if one uses a document
field to hold a unique ID string for the document. Then to delete such a
document, one merely constructs a term with the appropriate field and the
unique ID string as its text and passes it to this method. See
deleteDocument(int)<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#deleteDocument%28int%29>for
information about when this deletion will become effective.



>From observation in my app, it is deleting documents that don't have the
provided term, which means there's no easy way to delete a doc (other than
iterating) even if you have a unique id.

On 10/15/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> The javadoc is right. :)
>
> Otis
>
> ----- Original Message ----
> From: EDMOND KEMOKAI <ekemokai@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, October 15, 2006 12:49:21 AM
> Subject: IndexReader.deleteDocuments
>
> Hi guys,
> I am a newbee so excuse me if this is a repost. From the javadoc it seems
> Reader.deleteDocuments deletes only documents that have the provided term,
> but the implementation examples that I have seen and from the behaviour of
> my own app, deleteDocuments(term) deletes documents that don't have the
> given term. Can someone clarify this for me?
>
> Thanks
> Edmond Kemokai.
>
>
> "talk trash and carry a small stick."
> PAUL KRUGMAN (NYT)
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_74336_2019553.1160894143517--

From java-user-return-24028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 09:08:11 2006
Return-Path: <java-user-return-24028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84871 invoked from network); 15 Oct 2006 09:08:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 09:08:11 -0000
Received: (qmail 83247 invoked by uid 500); 15 Oct 2006 09:08:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83206 invoked by uid 500); 15 Oct 2006 09:08:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83194 invoked by uid 99); 15 Oct 2006 09:08:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 02:08:03 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrprabhu@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 02:08:02 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1833772nfe
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 02:07:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gqwOxSrBHmFX4DRZAbhXnkYnpcOeT2qBbaHY6lV7RObffbcxEnUiNiHiKyRDMpxOF6IN8YuD/prHhjDlO+I0C80FC5C0rO0O6fbckWIiEY8POgqYgmOGjP14GDN2Owy4RHQqeDbQCHT4vIMmaCxzNMuxAlzEl/aEDmXiy2A/R8E=
Received: by 10.82.129.8 with SMTP id b8mr782970bud;
        Sun, 15 Oct 2006 02:07:40 -0700 (PDT)
Received: by 10.82.148.5 with HTTP; Sun, 15 Oct 2006 02:07:40 -0700 (PDT)
Message-ID: <f13b62210610150207s2f42102do90d1516beb9c37ae@mail.gmail.com>
Date: Sun, 15 Oct 2006 02:07:40 -0700
From: "Raghavendra Prabhu" <rrprabhu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date
In-Reply-To: <20061015044107.23892.qmail@web50313.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40846_7628005.1160903260149"
References: <20061015044107.23892.qmail@web50313.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_40846_7628005.1160903260149
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would very much like to see the .NET port in line with lucene java
This would result in index compatibility and equivalent features as that
lucene provides

George - Cheers for the continuous effort to keep lucene.net in line with
Lucene

Regards,
Prabhu




On 10/14/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> I'd have to check CHANGES.txt, but I don't think that many bugs have been
> fixed and not that many new features added that anyone is itching for a new
> release.
>
> Otis
>
> ----- Original Message ----
> oFrom: George Aroush <george@aroush.net>
> To: java-dev@lucene.apache.org; java-user@lucene.apache.org
> Sent: Saturday, October 14, 2006 10:32:47 AM
> Subject: RE: Lucene 2.0.1 release date
>
> Hi folks,
>
> Sorry for reposting this question (see original email below) and this time
> to both mailing list.
>
> If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
> appreciate it very much.
>
> As some of you may know, I am the porter of Lucene to Lucene.Net knowing
> when 2.0.1 will be released will help me plan things out.
>
> Regards,
>
> -- George Aroush
>
>
> -----Original Message-----
> From: George Aroush [mailto:george@aroush.net]
> Sent: Thursday, October 12, 2006 12:07 AM
> To: java-dev@lucene.apache.org
> Subject: Lucene 2.0.1 release date
>
> Hi folks,
>
> What's the plan for Lucene 2.0.1 release date?
>
> Thanks!
>
> -- George Aroush
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-dev-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40846_7628005.1160903260149--

From java-user-return-24029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 10:19:30 2006
Return-Path: <java-user-return-24029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92153 invoked from network); 15 Oct 2006 10:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 10:19:30 -0000
Received: (qmail 14952 invoked by uid 500); 15 Oct 2006 10:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14931 invoked by uid 500); 15 Oct 2006 10:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14907 invoked by uid 99); 15 Oct 2006 10:19:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 03:19:22 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ismail@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 03:19:21 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1842519nfe
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 03:19:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qV2PjS8ysOjmsFlFFiwS5kEYvfzXrPMDvbSzL+28RRjIS4BACurbEO5MEU83D0GJcFb9PbSojMEzdsoIsD5nkmOnlUSsmVdw5RlLXmYr+E+OB/o+LDPhEDiI+OfQOaCwqPs/gYC4Mx5U6dDqUu4w7cmgAOK7rqncj4BqAX2O3Zg=
Received: by 10.49.55.13 with SMTP id h13mr10152479nfk;
        Sun, 15 Oct 2006 03:18:59 -0700 (PDT)
Received: by 10.49.81.18 with HTTP; Sun, 15 Oct 2006 03:18:59 -0700 (PDT)
Message-ID: <1f07f6920610150318o38160589n7d381124c346b8fb@mail.gmail.com>
Date: Sun, 15 Oct 2006 06:18:59 -0400
From: "Ismail Siddiqui" <ismail@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem deleting documents
In-Reply-To: <OFD5851859.53838D37-ON88257208.002192A5-88257208.0021F703@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_117697_22268967.1160907539245"
References: <1f07f6920610142259h3e717c76o5a0cf395d5e23d24@mail.gmail.com>
	 <OFD5851859.53838D37-ON88257208.002192A5-88257208.0021F703@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_117697_22268967.1160907539245
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks, it worked

On 10/15/06, Doron Cohen <DORONC@il.ibm.com> wrote:
>
> > now pk is primary key which i am storing but not indexing it..
> >      doc.add(new Field("pk", message.getId().toString(),Field.Store.YES,
> >                     Field.Index.NO));
>
> You would need to index it for this to work.
> From javadocs for IndexReader.deleteDocuments(Term):
> Deletes all documents _containing_ term
> Containment relates to indexed terms.
>
> >
> > when i am making a search i can get pk and show it in result...but above
> > code is not deleting the document
>
> - Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_117697_22268967.1160907539245--

From java-user-return-24030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 10:30:24 2006
Return-Path: <java-user-return-24030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93123 invoked from network); 15 Oct 2006 10:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 10:30:24 -0000
Received: (qmail 19741 invoked by uid 500); 15 Oct 2006 10:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19717 invoked by uid 500); 15 Oct 2006 10:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 66832 invoked by uid 99); 14 Oct 2006 22:26:50 -0000
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=px4KbrYqVPjqWsk0ptx4Hg7/aY2mbSfkI8YG3GCOdvOmdTC7WxEenotwN71fMunOScdGTvXBiR1UR2fctUE0vNHnlI+ypy1KMM6XWUs+1hEx00ZXSWNJ7iclzp2FBMZsL2uRCpMTAo/w6b0WsUNhhgsmf8rbizdkgP2TPbVAnbk=  ;
Message-ID: <20061014222628.6131.qmail@web56204.mail.re3.yahoo.com>
Date: Sat, 14 Oct 2006 15:26:28 -0700 (PDT)
From: John Gilbert <jgilbert01@yahoo.com>
Subject: java.io.IOException: read past EOF
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1252077351-1160864788=:98845"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1252077351-1160864788=:98845
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable

I am trying to write an Ejb3Directory. It seems to work for index writing b=
ut not for searching.=0AI get the EOF exception. I assume this means that e=
ither my OutputStream or InputStream is doing=0Asomething wrong. It fails b=
ecause the CSInputStream has a length of zero when it reads the .fnm sectio=
n =0Aof the .cfs file.=0A=0ADoes anyone have any suggestions? =0AThanks!=0A=
=0AHere is more background info:=0A=0A- Using version 1.4.3=0A- Stack trace=
=0Ajava.io.IOException: read past EOF=0A    at org.apache.lucene.store.Inpu=
tStream.refill(InputStream.java:154)=0A    at org.apache.lucene.store.Input=
Stream.readByte(InputStream.java:43)=0A    at org.apache.lucene.store.Input=
Stream.readVInt(InputStream.java:83)=0A    at org.apache.lucene.index.Field=
Infos.read(FieldInfos.java:195)=0A    at org.apache.lucene.index.FieldInfos=
.<init>(FieldInfos.java:55)=0A    at org.apache.lucene.index.SegmentReader.=
initialize(SegmentReader.java:109)=0A    at org.apache.lucene.index.Segment=
Reader.<init>(SegmentReader.java:89)=0A    at org.apache.lucene.index.Index=
Reader$1.doBody(IndexReader.java:118)=0A    at org.apache.lucene.store.Lock=
$With.run(Lock.java:109)=0A    at org.apache.lucene.index.IndexReader.open(=
IndexReader.java:111)=0A    at org.apache.lucene.index.IndexReader.open(Ind=
exReader.java:106)=0A    at org.apache.lucene.search.IndexSearcher.<init>(I=
ndexSearcher.java:43)=0A=0A=0A- Entity Bean=0A=0A@Entity=0Apublic class Ind=
exBean implements Serializable {=0A    @Id private String name;=0A    @Lob =
private byte[] data;=0A    @Version private Calendar timestamp;=0A    ...=
=0A}=0A=0A- InputStream=0A=0Apublic class Ejb3InputStream extends InputStre=
am {=0A    private java.io.InputStream is;=0A=0A    public Ejb3InputStream(=
IndexBean bean) {=0A        this.is =3D new ByteArrayInputStream(bean.getDa=
ta());=0A        length =3D bean.getData().length;=0A    }=0A=0A    public =
void close() throws IOException {=0A        is.close();=0A    }=0A=0A    pr=
otected void readInternal(byte[] b, int off, int len) throws IOException {=
=0A        is.read(b, off, len);=0A    }=0A=0A    protected void seekIntern=
al(long n) throws IOException {=0A        is.skip(n);=0A    }=0A}=0A=0A- Ou=
tputStream=0A=0Apublic class Ejb3OutputStream extends OutputStream {=0A    =
private IndexBean bean;=0A    private ByteArrayOutputStream os =3D new Byte=
ArrayOutputStream();=0A=0A    public Ejb3OutputStream(IndexBean bean) {=0A =
       this.bean =3D bean;=0A    }=0A=0A    protected void flushBuffer(byte=
[] b, int len) throws IOException {=0A        os.write(b);=0A    }=0A=0A   =
 public long length() throws IOException {=0A        return os.size();=0A  =
  }=0A=0A    public final void close() throws IOException {=0A        super=
.close();=0A        bean.setData(os.toByteArray());=0A    }=0A}=0A=0A=0A=0A=
=0A=0A=0A=0A=0A
--0-1252077351-1160864788=:98845--

From java-user-return-24031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 10:44:53 2006
Return-Path: <java-user-return-24031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95208 invoked from network); 15 Oct 2006 10:44:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 10:44:53 -0000
Received: (qmail 27074 invoked by uid 500); 15 Oct 2006 10:44:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27043 invoked by uid 500); 15 Oct 2006 10:44:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27032 invoked by uid 99); 15 Oct 2006 10:44:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 03:44:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 03:44:46 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id k9FAiOfY046996
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 12:44:24 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: QueryParser Is Badly Broken
Date: Sun, 15 Oct 2006 12:44:23 +0200
User-Agent: KMail/1.8.2
References: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu> <200610130923.38238.paul.elschot@xs4all.nl> <ab0709bf0610130439k556934edn4e01a7dd10d50f@mail.gmail.com>
In-Reply-To: <ab0709bf0610130439k556934edn4e01a7dd10d50f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610151244.23625.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mark,

you wrote:
> > On another note...http://famestalker.com
> >
...
> 
>  http://famestalker.com/devwiki/

Could you explain how "Paragraph/Sentence Proximity Searching"
is implemented in Qsol?

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 12:48:44 2006
Return-Path: <java-user-return-24032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16313 invoked from network); 15 Oct 2006 12:48:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 12:48:44 -0000
Received: (qmail 75505 invoked by uid 500); 15 Oct 2006 12:48:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75472 invoked by uid 500); 15 Oct 2006 12:48:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75461 invoked by uid 99); 15 Oct 2006 12:48:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 05:48:37 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cfowler@jwpepper.com designates 65.126.22.124 as permitted sender)
Received: from [65.126.22.124] (HELO mimesweeper.jwpepper.com) (65.126.22.124)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 05:48:36 -0700
Received: from jwpds1.fw.jwpepper.com (unverified) by mimesweeper.jwpepper.com
 (Content Technologies SMTPRS 4.3.14) with ESMTP id <T7b5792c4c4c0a803f9374@mimesweeper.jwpepper.com> for <java-user@lucene.apache.org>;
 Sun, 15 Oct 2006 08:50:13 -0700
In-Reply-To: <1f07f6920610142259h3e717c76o5a0cf395d5e23d24@mail.gmail.com>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: problem deleting documents
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.1 January 17, 2006
Message-ID: <OFE30FD63D.626C072F-ON85257208.00460DFD-85257208.004654D3@jwpepper.com>
From: cfowler@jwpepper.com
Date: Sun, 15 Oct 2006 08:47:06 -0400
X-MIMETrack: Serialize by Router on JWPDS1/JWPEPPER(Release 7.0.1FP1|April 17, 2006) at
 10/15/2006 08:47:07 AM,
	Serialize complete at 10/15/2006 08:47:07 AM
Content-Type: multipart/alternative; boundary="=_alternative 004654CD85257208_="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 004654CD85257208_=
Content-Type: text/plain; charset="US-ASCII"

Ismail,

        I was having the same type of problem (using v2) until I changed 
my index to change the ID field from Field.Index.TOKENIZED to 
Field.Index.UN_TOKENIZED. Can you try that, or create a secondary field 
that is set up that way with your pk id in it?

Chris



"Ismail Siddiqui" <ismail@gmail.com> 
10/15/2006 01:58 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
problem deleting documents






hi guys
i am having problem deleting documents .. apparently its not doin it.. 
here
is the code snippet

     public void delete(final BoardMessage message)
     {
        try{

           IndexReader fsReader;

           if  (index.exists()) {
              fsReader  =IndexReader.open(index);
              fsReader.deleteDocuments(new Term("pk",message.getId()+""));
              fsReader.close();
           }

        }
        catch(IOException e){
         e.printStackTrace();
        }

now pk is primary key which i am storing but not indexing it..
     doc.add(new Field("pk", message.getId().toString(),Field.Store.YES,
                    Field.Index.NO));

when i am making a search i can get pk and show it in result...but above
code is not deleting the document


--=_alternative 004654CD85257208_=--

From java-user-return-24033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 13:03:32 2006
Return-Path: <java-user-return-24033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17996 invoked from network); 15 Oct 2006 13:03:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 13:03:32 -0000
Received: (qmail 88591 invoked by uid 500); 15 Oct 2006 13:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88562 invoked by uid 500); 15 Oct 2006 13:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88548 invoked by uid 99); 15 Oct 2006 13:03:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:03:27 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 06:03:26 -0700
Received: by py-out-1112.google.com with SMTP id i49so1442597pyi
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 06:02:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qsmbOqjGlgUYRU1Jjg7L+axx2qBeINJHQlwg0LbOtbPJ79cjme/TiUwHVx6OFwQ6QJaP0jGvhJfiIOdUokfDPDC9nFHe5Vt/grkn8PT8pj8595n5J0RXDrz0PWUMiH6eAFxdAhc2mC9HkZ7Dk+I8IP8au3WKz2LyxptSB729yos=
Received: by 10.35.57.5 with SMTP id j5mr10907066pyk;
        Sun, 15 Oct 2006 06:02:32 -0700 (PDT)
Received: by 10.35.124.6 with HTTP; Sun, 15 Oct 2006 06:02:32 -0700 (PDT)
Message-ID: <ab0709bf0610150602t4fb0b5a2scbd9180d407fd153@mail.gmail.com>
Date: Sun, 15 Oct 2006 09:02:32 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser Is Badly Broken
In-Reply-To: <200610151244.23625.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67997_3414924.1160917352542"
References: <001101c6ee53$b2bee8f0$970fda80@libraria.ucsf.edu>
	 <200610130923.38238.paul.elschot@xs4all.nl>
	 <ab0709bf0610130439k556934edn4e01a7dd10d50f@mail.gmail.com>
	 <200610151244.23625.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_67997_3414924.1160917352542
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In a way that certainly needs more testing (haven't had the time), but here
is the gist:

I modified the SpanNotQuery to allow a certain number of span crossings--
making it something of a WithinSpanQuery. So instead of just being able to
say find "something" and "something else" and don't let it span a paragraph
marker span, you can say find this and it can span up to to 3 paragraph
marker spans. I then made a special standard analyzer that uses a standard
sentence recognizer regex to inject sentence marker tokens. Paragraphs seem
less detectable, so right now the analyzer just looks for the paragraph
symbol...perhaps a double newline might be better though. I still have not
worked out the best para/sent token markers to put in the index or the best
way to mark paragraphs in the input text. I also would like to make it so
that a paragraph marker also works as a sentence marker so that they do not
need to be doubled up.


- Mark

On 10/15/06, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Mark,
>
> you wrote:
> > > On another note...http://famestalker.com
> > >
> ...
> >
> >  http://famestalker.com/devwiki/
>
> Could you explain how "Paragraph/Sentence Proximity Searching"
> is implemented in Qsol?
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_67997_3414924.1160917352542--

From java-user-return-24034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 22:19:13 2006
Return-Path: <java-user-return-24034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20469 invoked from network); 15 Oct 2006 22:19:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 22:19:13 -0000
Received: (qmail 21988 invoked by uid 500); 15 Oct 2006 22:19:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21941 invoked by uid 500); 15 Oct 2006 22:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21930 invoked by uid 99); 15 Oct 2006 22:19:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 15:19:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.99.47.68] (HELO mail13.simplicato.com) (207.99.47.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 15:19:05 -0700
Received: from mail13.simplicato.com (localhost [127.0.0.1])
	by mail13.simplicato.com (Postfix) with ESMTP id 71E3077AF05
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 18:18:43 -0400 (EDT)
Received: from PEACE (unknown [216.195.213.27])
	by mail13.simplicato.com (Postfix) with ESMTP id 50FCB77AEF2
	for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 18:18:43 -0400 (EDT)
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: RE: Looking for a stemmer that can return all inflected forms
Date: Sun, 15 Oct 2006 18:18:45 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcbwE9CE/tyBRu3LTLejurLJuaD6sAAk0wNg
In-Reply-To: <20061015043756.220.qmail@web50307.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20061015221843.50FCB77AEF2@mail13.simplicato.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All: Thanks for the ideas and suggestions. 

Bill: As Otis pointed out, Lucene already comes with a couple
of stemmers (I'm using Lucene 2.0). Besides PorterStemFilter,
you can also take a look at SnowballAnalyzer and SnowballFilter
classes which support more than just English. The integration
is pretty straightforward.

/Jong

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Sunday, October 15, 2006 12:38 AM
To: java-user@lucene.apache.org
Subject: Re: Looking for a stemmer that can return all inflected forms

Bill: Lucene already comes with PorterStemFilter (class name), which you can
use for English.

Ideas 1 and 2 sound interesting, but I think they may end up offering false
positives.  The reason is obvious - multiple and unrelated words can get
stemmed to the same stem.
Is "care" really the stem for "caring"?  Maybe.  But imagine the stem is
"car".  Suddenly the word "cars" shares the same "car" stem and you have a
false positive.

Jong: I _think_ what you need is a "reverse lemmatizer".

Otis

----- Original Message ----
From: Bill Taylor <wataylor@as-st.com>
To: java-user@lucene.apache.org
Cc: Jong Kim <jkim@sitescape.com>
Sent: Saturday, October 14, 2006 11:43:10 PM
Subject: Re: Looking for a stemmer that can return all inflected forms

On Oct 14, 2006, at 3:57 PM, Jong Kim wrote:

> Hi,
>
> I'm looking for a stemmer that is capable of returning all 
> morphological variants  of a query term (to be used for high-recall 
> search). For example, given a query term of 'cares', I would like to 
> be able to generate 'cares', 'care', 'cared', and 'caring'.
>
> I looked at the Porter stemmer, Snowball stemmer, and the K-stem.
> All of them provide a method that takes a surface string ('cares') as 
> an input and returns its base form/stem, which is 'care' in this 
> example.

First of all, I would GREATLY appreciate it if you would tell me which of
these is easiest to incorporate into Lucene.  I have the same problem you
do.  I have solved the other end of it but do not knot how to fit a stemmer
into Lucene.

> But it appears that I can not use the stemmer to generate all of the 
> inflected forms of a given query term.
>
> Does anyone know of such tool for Lucene?

I am writing one which is VERY SPECIAL PURPOSE and therefore my code not
likely to be of much use to you.  HOWEVER, the basic idea is quite
simple:

Idea 1:

1) Since you have to use the stemmer against something, you are reading
words out of the index and extracting their stems.

2) Having done that for a word, find all "nearby" words which have the same
stem.  The simplest definition of "nearby" that I can think of is that the
word starts with the stem, but you might want to drop the last character of
the stem and look for all words that start with that.  
Thus, if the stem is "care" you would look at all words that start with
"car" and if they have "care" as the stem, they are in the same family.

The advantage of this approach is that you do not ever offer any words that
are not in your index.  If you found cares and cared but not caring in your
index, you would not want to suggest that someone search for caring because
they won't find it.  So you use the index as the source of words to stem.

Idea 2:

Another way to do it is to build a hash map of tree sets keyed to the stem.
Each stem has a tree set of all words which have it as a stem.  
The code would look something like

HashMap<String, TreeSet> stemmedWords = new HashMap<String, TreeSet>();
TreeSet<String> wordsForStem;

for (String word : all words in the index)  {
    stem = MagicStemmer(word);  // I left out code for words that do not
have stems
           if ( (wordsForStem = stemmedWords.get(stem)) == null) {
               wordsForStem = new TreeSet<String>();  // Tree set for the
new stem
               stemmedWords.put(stem, wordsForStem); // Now this stem has a
set for its words
          }
         wordsForStem.add(word); // Put the word into the tree set for its
stem }

For each stem from all the words in your index, you get a tree set which
contains all the words which have it as a stem;  The tree set keeps its
words in alphabetical order.

If you want the stems to be displayed in alphabetical order, use a TreeMap
instead of a HashMap.

> Any help or pointer would be greatly appreciated.

I would appreciate your telling me which stemmer for English words is
easiest to incorporate into Lucene and where to find it.  Thanks.

Bill Taylor


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 15 22:49:05 2006
Return-Path: <java-user-return-24035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24988 invoked from network); 15 Oct 2006 22:49:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Oct 2006 22:49:05 -0000
Received: (qmail 45190 invoked by uid 500); 15 Oct 2006 22:48:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45150 invoked by uid 500); 15 Oct 2006 22:48:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45139 invoked by uid 99); 15 Oct 2006 22:48:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 15:48:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 15:48:58 -0700
Received: by nf-out-0910.google.com with SMTP id l24so1575379nfc
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 15:48:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=dLj8h3Hk6zetLtx+jHrEjaHJU758GUgJFu4QBcjfDvUf/N7dD13PTqfQIqqSVnseu7eZEQSCVppsdGy+tFSRqs1lgG4fADGWmNfkKWTdMt8T3yoUxIgice9VNosZmbbf0rlXZ49bwEsnWmxNUuqcqiplglLvFdzfnYMie9ScfL0=
Received: by 10.82.139.17 with SMTP id m17mr842314bud;
        Sun, 15 Oct 2006 15:48:37 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Sun, 15 Oct 2006 15:48:37 -0700 (PDT)
Message-ID: <c68e39170610151548h103951dfg5326921b3a683cd5@mail.gmail.com>
Date: Sun, 15 Oct 2006 18:48:37 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: serious Lazy Field bug
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: f2b9c3dd49841c35
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If anyone is using the new lazy field loading feature from the Lucene
trunk, you should turn it off or upgrade to the next nightly build
(lucene-2006-10-16) or later.

Bug details here:
http://issues.apache.org/jira/browse/LUCENE-683

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 00:15:12 2006
Return-Path: <java-user-return-24036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33451 invoked from network); 16 Oct 2006 00:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 00:15:12 -0000
Received: (qmail 92993 invoked by uid 500); 16 Oct 2006 00:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92794 invoked by uid 500); 16 Oct 2006 00:15:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92783 invoked by uid 99); 16 Oct 2006 00:15:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 17:15:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.222.193.2] (HELO sidekick.frogspace.net) (216.222.193.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 17:15:04 -0700
Received: from pool-68-160-46-168.bos.east.verizon.net ([68.160.46.168] helo=aroushlt)
	by sidekick.frogspace.net with esmtp (Exim 4.44)
	id 1GZG7w-0005GK-MR
	for java-user@lucene.apache.org; Sun, 15 Oct 2006 17:14:45 -0700
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene 2.0.1 release date
Date: Sun, 15 Oct 2006 20:14:43 -0400
Message-ID: <021e01c6f0b8$14fafe80$a0464c09@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <20061015044107.23892.qmail@web50313.mail.yahoo.com>
Thread-Index: AcbwFDN1TOrlo5RxTsKXVCvu3C8qtAAonUlg
X-SA-Exim-Connect-IP: 68.160.46.168
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reply Otis.

I looked at the CHANGES.txt file and saw quit a bit of changes.  For my port
from Java to C#, I can't rely on the trunk code as it is (to my knowledge)
changes on a monthly basic if not weekly.  What I need is an official
release so that I can use it as the port point.

Regards,

-- George Aroush


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Sunday, October 15, 2006 12:41 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date

I'd have to check CHANGES.txt, but I don't think that many bugs have been
fixed and not that many new features added that anyone is itching for a new
release.

Otis

----- Original Message ----
From: George Aroush <george@aroush.net>
To: java-dev@lucene.apache.org; java-user@lucene.apache.org
Sent: Saturday, October 14, 2006 10:32:47 AM
Subject: RE: Lucene 2.0.1 release date

Hi folks,

Sorry for reposting this question (see original email below) and this time
to both mailing list.

If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
appreciate it very much.

As some of you may know, I am the porter of Lucene to Lucene.Net knowing
when 2.0.1 will be released will help me plan things out.

Regards,

-- George Aroush


-----Original Message-----
From: George Aroush [mailto:george@aroush.net]
Sent: Thursday, October 12, 2006 12:07 AM
To: java-dev@lucene.apache.org
Subject: Lucene 2.0.1 release date

Hi folks,

What's the plan for Lucene 2.0.1 release date?

Thanks!

-- George Aroush


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 03:09:10 2006
Return-Path: <java-user-return-24037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69212 invoked from network); 16 Oct 2006 03:09:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 03:09:10 -0000
Received: (qmail 37689 invoked by uid 500); 16 Oct 2006 03:09:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37661 invoked by uid 500); 16 Oct 2006 03:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37650 invoked by uid 99); 16 Oct 2006 03:09:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 20:09:04 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 20:09:03 -0700
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id k9G38ZO5006535
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 06:08:37 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mag68xgx; 16 Oct 2006 06:08:00 +0300
Message-ID: <4532F7B5.2020602@teamware.com>
Date: Mon, 16 Oct 2006 13:08:37 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Query not finding indexed data
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a field "attname" that is indexed with Field.Store.YES, 
Field.Index.UN_TOKENIZED.  I have a document with the attname of 
"IqTstAdminGuide2.pdf".

QueryParser parser = new QueryParser("body", new StandardAnalyzer());
Query query = parser.parse("attname:IqTstAdminGuide2.pdf");

fails to find the Document, which I guess is because of StandardAnalyzer 
lowercasing the filename.

How can one instruct the QueryParser only to use the Analyzer to analyse fields 
in an expression that were tokenized during the indexing process and to not 
analyse those that were UN_TOKENIZED?

Regards
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 03:32:54 2006
Return-Path: <java-user-return-24038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72304 invoked from network); 16 Oct 2006 03:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 03:32:54 -0000
Received: (qmail 56690 invoked by uid 500); 16 Oct 2006 03:32:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56646 invoked by uid 500); 16 Oct 2006 03:32:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56635 invoked by uid 99); 16 Oct 2006 03:32:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 20:32:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 20:32:48 -0700
Received: by nf-out-0910.google.com with SMTP id b2so2032055nfe
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 20:32:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=n0DNA8fU15kozf83r4mTerTkH1G/YCuNiqsykxfmZuwD8aIstw5uVdvozoqK2h8I+CF2mZwtb+3Yq7WAJmscw38V8Y44QCO6OYtR+k52yogd61xI3J8w/eRFHNpJ5xJadDC0rl+K7gkgswE95p6FfG7+oWiD7gQRLaeXPos2+R4=
Received: by 10.82.142.9 with SMTP id p9mr865647bud;
        Sun, 15 Oct 2006 20:32:26 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Sun, 15 Oct 2006 20:32:26 -0700 (PDT)
Message-ID: <c68e39170610152032r101d59k93d04c0ff03c02a0@mail.gmail.com>
Date: Sun, 15 Oct 2006 23:32:26 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Avoiding sort by date
In-Reply-To: <20061013012519.49569.qmail@web81709.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <FAD25459-91BA-41CB-AF89-DD16FF201B09@ehatchersolutions.com>
	 <20061013012519.49569.qmail@web81709.mail.mud.yahoo.com>
X-Google-Sender-Auth: bd6321f37bfff738
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/12/06, rayvittal-lists@yahoo.com <rayvittal-lists@yahoo.com> wrote:
> Does the Sort function create some kind of internal cache?

Yes, it's called the FieldCache, and there is a cache with a weak
reference to the index reader as a key.  As long as there is a
reference to the index reader (even after close() has been called) the
cache data will exist.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

> Observing the heap, it seems that a full garbage collection after calling
> IndexSearcher.close() still leaves a lot of memory occupied.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 04:01:42 2006
Return-Path: <java-user-return-24039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76436 invoked from network); 16 Oct 2006 04:01:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 04:01:42 -0000
Received: (qmail 74770 invoked by uid 500); 16 Oct 2006 04:01:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74290 invoked by uid 500); 16 Oct 2006 04:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74279 invoked by uid 99); 16 Oct 2006 04:01:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 21:01:35 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ekemokai@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 21:01:34 -0700
Received: by nz-out-0102.google.com with SMTP id k1so483735nzf
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 21:01:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rwBsEXksfCQwiNktpmqBUbeDvw3opq2u929vC//qZefapbPJVjGKZs3mCIGllVUCr2H9Wn902CbxRnasQgR5MVQW19XkHBFhruaHMqzVEJFCEcpARcTKc9t6CxIv8qTVXu0TJ05essMfZrJDKxp64w1LVZkQMp13uepqtFGRiug=
Received: by 10.65.241.20 with SMTP id t20mr9266055qbr;
        Sun, 15 Oct 2006 21:01:11 -0700 (PDT)
Received: by 10.65.158.7 with HTTP; Sun, 15 Oct 2006 21:01:11 -0700 (PDT)
Message-ID: <dac893430610152101j7573451eu43de08a559cde49f@mail.gmail.com>
Date: Mon, 16 Oct 2006 00:01:11 -0400
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.deleteDocuments
In-Reply-To: <dac893430610142335h698e76acx54acaf6e48140b6a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82206_30030720.1160971271251"
References: <20061015060650.82691.qmail@web50315.mail.yahoo.com>
	 <dac893430610142335h698e76acx54acaf6e48140b6a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_82206_30030720.1160971271251
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can somebody please clarify the intended behaviour of
IndexReader.deleteDocuments()?, between the various documentations and
implementations it seems this function is broken. API doc says it should
delete docs containing the provided term but instead it deletes all
documents not containg the given term.

On 10/15/06, EDMOND KEMOKAI <ekemokai@gmail.com> wrote:
>
> Thanks for the response Otis, below is a link to the javadoc in the API:
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/demo/DeleteFiles.html
>
> ( Deletes documents from an index that do not contain a term)
>
> Here is a link to the actual sample implementation:
>
> http://svn.apache.org/repos/asf/lucene/java/trunk/src/demo/org/apache/lucene/demo/DeleteFiles.java
>
> In the file above you have code that looks like this:
>
>       Term term = new Term("path", args[0]);
>
>       int deleted = reader.deleteDocuments(term);
>
> So in effect it should delete documents that don't contain the "path"
> value correspoding to what's in args[0]. Except the API documentation
> suggests the opposite. In other words the above code should delete only
> documents containing "path" values equal to args[0] (this is obviously more
> intuitive). Here is the API doc for what the above code snippet should do:
>
> (http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#deleteDocuments(org.apache.lucene.index.Term)
>
> <http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#deleteDocuments%28org.apache.lucene.index.Term%29>
> ):
>
> Deletes all documents containing term. This is useful if one uses a
> document field to hold a unique ID string for the document. Then to delete
> such a document, one merely constructs a term with the appropriate field and
> the unique ID string as its text and passes it to this method. See
> deleteDocument(int)<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#deleteDocument%28int%29>for information about when this deletion will become effective.
>
>
>
> From observation in my app, it is deleting documents that don't have the
> provided term, which means there's no easy way to delete a doc (other than
> iterating) even if you have a unique id.
>
> On 10/15/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > The javadoc is right. :)
> >
> > Otis
> >
> > ----- Original Message ----
> > From: EDMOND KEMOKAI <ekemokai@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Sunday, October 15, 2006 12:49:21 AM
> > Subject: IndexReader.deleteDocuments
> >
> > Hi guys,
> > I am a newbee so excuse me if this is a repost. From the javadoc it
> > seems
> > Reader.deleteDocuments deletes only documents that have the provided
> > term,
> > but the implementation examples that I have seen and from the behaviour
> > of
> > my own app, deleteDocuments(term) deletes documents that don't have the
> > given term. Can someone clarify this for me?
> >
> > Thanks
> > Edmond Kemokai.
> >
> >
> > "talk trash and carry a small stick."
> > PAUL KRUGMAN (NYT)
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> "talk trash and carry a small stick."
> PAUL KRUGMAN (NYT)
>



-- 
    * "Still searching for the gatekeeper to the Valence-Band, let me out of
here!"

    * "When I was coming up, it was a dangerous world, and you knew exactly
who they were. It was us versus them, and it was clear who them was. Today,
we are not so sure who the they are, but we know they're there."

           Poet Laureate G.W Bush (I am not a Bush basher by the way)

"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_82206_30030720.1160971271251--

From java-user-return-24040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 04:18:54 2006
Return-Path: <java-user-return-24040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78475 invoked from network); 16 Oct 2006 04:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 04:18:54 -0000
Received: (qmail 92916 invoked by uid 500); 16 Oct 2006 04:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92872 invoked by uid 500); 16 Oct 2006 04:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92861 invoked by uid 99); 16 Oct 2006 04:18:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 21:18:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 21:18:48 -0700
Received: by nf-out-0910.google.com with SMTP id b2so2041413nfe
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 21:18:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=HaSsvhS3/XiZb//epIDR68OhW2Fok5lgUVNkox5oZMOtXaq+kIbHZWx2UVXlQBogH2T0/gBfGg5oVsxxYYOiDdBEgLkWZZ3YJ+KcZHJuoekajrfJaXZI5PO1FRpzrHbK/BffY91U5BtcrbDAEEsaFVJrLymU6LlJopwXC5g25CU=
Received: by 10.82.152.16 with SMTP id z16mr869918bud;
        Sun, 15 Oct 2006 21:18:26 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Sun, 15 Oct 2006 21:18:26 -0700 (PDT)
Message-ID: <c68e39170610152118v52d86d0fw1ad44bc551d78581@mail.gmail.com>
Date: Mon, 16 Oct 2006 00:18:26 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: IndexReader.deleteDocuments
In-Reply-To: <dac893430610152101j7573451eu43de08a559cde49f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061015060650.82691.qmail@web50315.mail.yahoo.com>
	 <dac893430610142335h698e76acx54acaf6e48140b6a@mail.gmail.com>
	 <dac893430610152101j7573451eu43de08a559cde49f@mail.gmail.com>
X-Google-Sender-Auth: 32b5368d4dba38a9
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/16/06, EDMOND KEMOKAI <ekemokai@gmail.com> wrote:
> Can somebody please clarify the intended behaviour of
> IndexReader.deleteDocuments()?

It deletes documents containing the term.  The API docs are correct,
the demo docs are incorrect if they say otherwise.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 04:36:18 2006
Return-Path: <java-user-return-24041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80959 invoked from network); 16 Oct 2006 04:36:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 04:36:17 -0000
Received: (qmail 6603 invoked by uid 500); 16 Oct 2006 04:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6564 invoked by uid 500); 16 Oct 2006 04:36:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6545 invoked by uid 99); 16 Oct 2006 04:36:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 21:36:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 21:36:10 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9G4ZmIP325360
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 04:35:48 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9G4cHcs3211264
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 06:38:17 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9G4Zmde024391
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 06:35:48 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9G4ZmHE024386
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 06:35:48 +0200
In-Reply-To: <4532F7B5.2020602@teamware.com>
Subject: Re: Query not finding indexed data
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFA797CB46.98E990ED-ON88257209.001682FD-88257209.0016FEF6@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 15 Oct 2006 20:11:10 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 16/10/2006 06:38:16
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Antony, you cannot instruct the query parser to do that. Note that an
application can add both tokenized and un_tokenized data under the same
field name. This is an application logic to know that a certain query is
not to be tokenized. In this case you could create your query with:
  query = new TermQuery(fieldName, "IqTstAdminGuide2.pdf");

Hope this helps,
Doron

Antony Bowesman <adb@teamware.com> wrote on 15/10/2006 20:08:37:
> Hi,
>
> I have a field "attname" that is indexed with Field.Store.YES,
> Field.Index.UN_TOKENIZED.  I have a document with the attname of
> "IqTstAdminGuide2.pdf".
>
> QueryParser parser = new QueryParser("body", new StandardAnalyzer());
> Query query = parser.parse("attname:IqTstAdminGuide2.pdf");
>
> fails to find the Document, which I guess is because of StandardAnalyzer
> lowercasing the filename.
>
> How can one instruct the QueryParser only to use the Analyzer to
> analyse fields
> in an expression that were tokenized during the indexing process and to
not
> analyse those that were UN_TOKENIZED?
>
> Regards
> Antony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 05:47:05 2006
Return-Path: <java-user-return-24042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99586 invoked from network); 16 Oct 2006 05:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 05:47:04 -0000
Received: (qmail 75687 invoked by uid 500); 16 Oct 2006 05:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74659 invoked by uid 500); 16 Oct 2006 05:46:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74648 invoked by uid 99); 16 Oct 2006 05:46:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 22:46:56 -0700
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_FONT_BIG,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.29.68.221] (HELO netedgecomputing.com) (81.29.68.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 22:46:54 -0700
Received: from shivani [61.246.2.159] by netedgecomputing.com with ESMTP
  (SMTPD32-8.12) id AD143645009C; Mon, 16 Oct 2006 06:48:04 +0100
From: "Shivani Sawhney" <shivani@netedgecomputing.com>
To: <java-user@lucene.apache.org>
Subject: RE: Error while closing IndexWriter
Date: Mon, 16 Oct 2006 11:23:10 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00A4_01C6F115.779134D0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <OFDCC8C64F.2A4D6124-ON88257206.00233122-88257206.00254243@il.ibm.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: Acbuk7a7HZjrPKGdQUaezhCGUeMKewCTc9BQ
Message-Id: <200610160648718.SM01080@shivani>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00A4_01C6F115.779134D0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

Sorry Doron, if the code added in my last mail was confusing and thanks for
the reply. The code added in my last mail was not exactly the version that
was causing problem, this one is.

The lucene version is 1.2.

 

Waiting for a suggestion.

 

 

 

Code:

public void indexFile(File indexDirFile, File resumeFile) throws IOException

    {

 

        IndexWriter indexwriter = null;

        try

        {            

            File afile[] = indexDirFile.listFiles();

            boolean flag = false;

            if (afile.length <= 0)

                flag = true;

            indexwriter = new IndexWriter(indexDirFile, new
StandardAnalyzer(), flag);

            doIndexing(indexwriter, resumeFile); // following method

           

            if (indexwriter != null)

            {

                indexwriter.close(); // <--Indexer.java:150 (Error here)

            }

        }

        catch (IOException e)

        {

            e.printStackTrace();

            throw new Error(e);

        }

    }

 

//--------------------------------------------------------------------------
----------//

public void doIndexing(IndexWriter indexwriter, File resumeFile)

    {

 

       

        Document document = new Document();        

        if (resumeFile.getName().endsWith(".pdf"))

        {

            ...

            // Code for indexing PDF docs. Right now the inputs are not PDF
docs, 

            // so I have removed this piece as it could not have been
causing problems.

        }

        else

        {

            try

            {

                document.add(Field.Text(IndexerColumns.contents, new
FileReader(resumeFile)));

            }

            catch (FileNotFoundException e)

            {

                e.printStackTrace();

                throw new MyRuntimeException(e.getMessage(), e);

            }

        }        

       

        for (int i = 0; i < this.columnInfos.length; i++)

        {

            ColumnInfo columnInfo = columnInfos[i];

            String value =
String.valueOf(mapLuceneParams.get(columnInfo.columnName));

 

            if (value != null)

            {

                value = value.trim();

                if (value.length() != 0)

                {

                  document.add(Field.Text(columnInfo.columnName, value));

                }

            }

        }

 

        try

        {           

            indexwriter.addDocument(document);            

        }

        catch (IOException e)

        {

            e.printStackTrace();

            throw new MyRuntimeException(e.getMessage(), e);

        }

    }

}

 

Regards,

Shivani Sawhney
NetEdge Computing Global Services Private Limited 
A-14, Sector-7, NOIDA U.P. 201-301
Tel #  91-120-2423281, 2423282 
Fax #  91-120-2423279 
www.netedgecomputing.com <http://www.netedgecomputing.com/>  

****************************************************************************
***********************************

Disclaimer:

This message may contain confidential and/or privileged information. If you
are not the addressee or authorized to receive this for the addressee, you
must not use, copy, disclose or take any action based on this message or any
information herein. If you have received this message in error, please
advise the sender immediately by reply e-mail and delete this message. Thank
you for your cooperation.-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com] 
Sent: Friday, October 13, 2006 12:17 PM
To: java-user@lucene.apache.org
Subject: Re: Error while closing IndexWriter

 

I am far from perfect in this pdf text extracting, however I noticed

something in your code that you may want to check to clear up the reason

for this failure, see below..

 

"Shivani Sawhney" <shivani@netedgecomputing.com> wrote on 12/10/2006

22:54:07:

> Hi All,

> 

> I am facing a peculiar problem.

> 

> I am trying to index a file and the indexing code executes without any

error

> but when I try to close the indexer, I get the following error and the

error

> comes very rarely but when it does, no code on document indexing works

and I

> finally have to delete all indexes and run a re-indexing utility.

> 

> Can anyone please suggest what might be the problem?

> 

> Stack Trace:

> 

> java.lang.ArrayIndexOutOfBoundsException: 97 >= 17

>             at java.util.Vector.elementAt(Vector.java:432)

>             at

> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:135)

>             at

> org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:103)

>             at

> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:237)

>             at

> org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:169)

>             at

> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:97)

>             at

> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:425)

>             at

> 

org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:373)

>             at

> org.apache.lucene.index.IndexWriter.close(IndexWriter.java:193)

>             at rd.admin.Indexer.indexFile(Indexer.java:150)

> ...

> ...

>    try {

>      indexwriter.addDocument(documentWithCustomFields);

 

Here documentWithCustomFields is added to the index, but the code provided

does not handle this doc variable at all... might be just a typo in the

code snippet (i.e. if you cleaned it for the mail), or else a real problem

in the code, attempting to add to the index the wrong, perhaps null,

document?

 

>    } catch (IOException e) {

>      closeIndexWriter(indexwriter);

 

Here, once catching an exception, you are first attempting to close the

index and only then print the exception e. So if this "close" line is

throwing the exception with the stack trace above, you can't really know

that addDocument "executes without any error". Better switch between these

2 lines.

 

>      e.printStackTrace();

>      throw new MyRuntimeException(e.getMessage(), e);

>    }

> 

 

There are 2 calls in your code to closeIndexWriter() and I can't tell which

line is Indexer.java:150, is it this one:

    doIndexing(indexwriter, resumeFile);

    closeIndexWriter(indexwriter);

Or this one:

    } catch (IOException e) {

      closeIndexWriter(indexwriter);

 

Hope this helps at all.

 

If not - add some info on the exception, also on the code path taken before

getting this error (many ifs in this code), and lucene version used.

 

Regards,

Doron

 

 

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

 


------=_NextPart_000_00A4_01C6F115.779134D0--


From java-user-return-24043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 06:00:20 2006
Return-Path: <java-user-return-24043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1715 invoked from network); 16 Oct 2006 06:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 06:00:19 -0000
Received: (qmail 91335 invoked by uid 500); 16 Oct 2006 06:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91302 invoked by uid 500); 16 Oct 2006 06:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91291 invoked by uid 99); 16 Oct 2006 06:00:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 23:00:11 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mekin.m@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 23:00:10 -0700
Received: by nf-out-0910.google.com with SMTP id b2so2061235nfe
        for <java-user@lucene.apache.org>; Sun, 15 Oct 2006 22:59:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=T9w4bOHA1dZesz3Fxm0kfVHh9RhRhT3sVFBGzSZZJ4vxr7uGBHB9jvVcErXIJHSJDStiattI2euxnQrGosr5F6oL7uUcVT/Y31KUsPPWpoNspWt+DU4TaXPcMbx3viHGQG0ZgWZj936Xo1Ikx79TvVCR5Mt/xxjEVQqe82UsnRc=
Received: by 10.49.55.13 with SMTP id h13mr11547399nfk;
        Sun, 15 Oct 2006 22:59:49 -0700 (PDT)
Received: by 10.49.37.16 with HTTP; Sun, 15 Oct 2006 22:59:49 -0700 (PDT)
Message-ID: <865c77680610152259w28f3d15cs574c29282cadea27@mail.gmail.com>
Date: Mon, 16 Oct 2006 11:29:49 +0530
From: Mek <mekin.m@gmail.com>
To: java-user@lucene.apache.org
Subject: constructing smaller phrase queries given a multi-word query
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Has anyone dealt with the problem of constructing sub-queries given a
multi-word query ?

Here is an example to illustrate what I mean:

user queries for -> A B C D
right now I change that query to "A B C D" A B C D to give phrase
matches higher weightage.

What might happen though, is that the user is looking for a document
where "A B" in Field1 & "C D"  in Field2.

So I should ideally be constructing the query as :

"A B C D"^20 "A B"^10 "C D"^10 "B C D"^15  "A B C"^15 A B C D

Has someone solved this problem, are there other ways to handle this problem ?


Thanks,
mek.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 06:45:58 2006
Return-Path: <java-user-return-24044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11346 invoked from network); 16 Oct 2006 06:45:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 06:45:57 -0000
Received: (qmail 53011 invoked by uid 500); 16 Oct 2006 06:45:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52990 invoked by uid 500); 16 Oct 2006 06:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52979 invoked by uid 99); 16 Oct 2006 06:45:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 23:45:51 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Oct 2006 23:45:50 -0700
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id k9G6jG6N021247
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 09:45:16 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mag9908l; 16 Oct 2006 09:45:00 +0300
Message-ID: <45332A6A.50602@teamware.com>
Date: Mon, 16 Oct 2006 16:44:58 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query not finding indexed data
References: <OFA797CB46.98E990ED-ON88257209.001682FD-88257209.0016FEF6@il.ibm.com>
In-Reply-To: <OFA797CB46.98E990ED-ON88257209.001682FD-88257209.0016FEF6@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doron Cohen wrote:
> Hi Antony, you cannot instruct the query parser to do that. Note that an

Thanks, I suspected as much.  I've changed it to make the field tokenized.

> field name. This is an application logic to know that a certain query is
> not to be tokenized. In this case you could create your query with:
>   query = new TermQuery(fieldName, "IqTstAdminGuide2.pdf");

The query is user driven, so I can't know without parsing whether it should be 
tokenised or not.  I would have to extend the parser to make use of TermQuery - 
it's easier just to tokenize the field now I understand Lucene's behaviour.

Regards
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 08:25:33 2006
Return-Path: <java-user-return-24045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43751 invoked from network); 16 Oct 2006 08:25:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 08:25:33 -0000
Received: (qmail 55126 invoked by uid 500); 16 Oct 2006 08:25:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55098 invoked by uid 500); 16 Oct 2006 08:25:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55086 invoked by uid 99); 16 Oct 2006 08:25:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 01:25:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 01:25:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9391230EFC16; Mon, 16 Oct 2006 04:25:04 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 8F6E130EFC16
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 04:25:00 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45332A6A.50602@teamware.com>
References: <OFA797CB46.98E990ED-ON88257209.001682FD-88257209.0016FEF6@il.ibm.com> <45332A6A.50602@teamware.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6DCBC109-7B4F-4836-88D7-28454D9E05BF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query not finding indexed data
Date: Mon, 16 Oct 2006 04:24:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 16, 2006, at 2:44 AM, Antony Bowesman wrote:

> Doron Cohen wrote:
>> Hi Antony, you cannot instruct the query parser to do that. Note  
>> that an
>
> Thanks, I suspected as much.  I've changed it to make the field  
> tokenized.
>
>> field name. This is an application logic to know that a certain  
>> query is
>> not to be tokenized. In this case you could create your query with:
>>   query = new TermQuery(fieldName, "IqTstAdminGuide2.pdf");
>
> The query is user driven, so I can't know without parsing whether  
> it should be tokenised or not.  I would have to extend the parser  
> to make use of TermQuery - it's easier just to tokenize the field  
> now I understand Lucene's behaviour.

You can also use PerFieldAnalyzerWrapper as the analyzer for  
QueryParser, and for all your untokenized fields, specify a  
KeywordAnalyzer.  That will keep untokenized fields from being split  
(as best it can given QueryParser meta-syntax).

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 09:44:37 2006
Return-Path: <java-user-return-24046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64913 invoked from network); 16 Oct 2006 09:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 09:44:37 -0000
Received: (qmail 47682 invoked by uid 500); 16 Oct 2006 09:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47586 invoked by uid 500); 16 Oct 2006 09:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47575 invoked by uid 99); 16 Oct 2006 09:44:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 02:44:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [141.37.9.230] (HELO mail.htwg-konstanz.de) (141.37.9.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 02:44:27 -0700
Received: from hpdl320-2.fh-konstanz.de (hpdl320-2.htwg-konstanz.de [141.37.9.222])
	by mail.htwg-konstanz.de (8.12.10/8.12.10) with ESMTP id k9G9hnR8017925
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 11:43:49 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by hpdl320-2.fh-konstanz.de (Postfix) with ESMTP id C167717DF3
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 11:44:04 +0200 (CEST)
Received: from u32-17.dsl.vianetworks.de (u32-17.dsl.vianetworks.de [212.168.171.17]) 
	by webmail.fh-konstanz.de (IMP) with HTTP 
	for <paechter@localhost>; Mon, 16 Oct 2006 11:44:04 +0200
Message-ID: <1160991844.45335464b9b40@webmail.fh-konstanz.de>
Date: Mon, 16 Oct 2006 11:44:04 +0200
From: Christoph =?iso-8859-1?b?UORjaHRlcg==?= <Paechter@htwg-konstanz.de>
To: java-user@lucene.apache.org
Subject: Searching pdf, getting page number
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.2
X-Originating-IP: 212.168.171.17
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I know that I can index pdf-files (using a third-party library).

Is it possible to search the index for a phrase, getting not only the
document, but also the page number in the (pdf-)document?
Or is it even possible to get a bookmark, leading to this page?

I am thankful for any information you can provide me, either how to do 
this indicing and searching, or where I can find further information or 
example code.

Kind regards
Christoph

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 11:41:13 2006
Return-Path: <java-user-return-24047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14448 invoked from network); 16 Oct 2006 11:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 11:41:13 -0000
Received: (qmail 40006 invoked by uid 500); 16 Oct 2006 11:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39980 invoked by uid 500); 16 Oct 2006 11:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39969 invoked by uid 99); 16 Oct 2006 11:41:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 04:41:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of supriya.shyamal@artnology.com designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 04:41:04 -0700
Received: (qmail 11080 invoked from network); 16 Oct 2006 11:40:40 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]383542@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 16 Oct 2006 11:40:40 -0000
Message-ID: <45336FB7.6030805@artnology.com>
Date: Mon, 16 Oct 2006 13:40:39 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Parallel Index Search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello All,

If I am not mistaken the process of locking the Index by different 
objects like IndexReader or Indexwriter, theoratically only one Thread 
can access the index at a time.

When we do search on the index it creates a commit lock so the other 
thread does not modify the index, so other thread waits until the 
previosu therads release the lock, is it right?

So in this case I should say index accessed one by one not parallel?

Its just my speculation, please don't get me wrong.

Because I try to share the same index by 6 instances and since the lock 
for 5 instances are disabled and only once instance can modify the 
index, at this case I achive the parallel read of the index. Only 
disadvantage is that when the index modified then I get 
FileNotFoundException, ao I do some kind of  respawn the search again.

If I implement the lock mechanism in the DB using the custom locking 
then I am afraid the index performance will be reduced but the only 
advantage is that I can avoid FNFE.

With Regards,
supriya
-- 

Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 12:16:33 2006
Return-Path: <java-user-return-24048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26510 invoked from network); 16 Oct 2006 12:16:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 12:16:32 -0000
Received: (qmail 98740 invoked by uid 500); 16 Oct 2006 12:16:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98707 invoked by uid 500); 16 Oct 2006 12:16:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98690 invoked by uid 99); 16 Oct 2006 12:16:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 05:16:24 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 05:16:22 -0700
Received: by py-out-1112.google.com with SMTP id i49so1800007pyi
        for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 05:15:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NXQpqKRSoO83c33GTXnS2jHoiaiPHvyE/5iZ6p8QW7YzacYf3MpANJiRLsnwRTbEBeeiqC2Hzv/S/6GAjg9iL80MD9/PNFp6jzMtuSG8Lm2RCwrM/bLh3bKa9Ct57ccb1iVeXTvPpD1+zngJoGDYrTR+w4LXIaYuK2dHqCXDZk0=
Received: by 10.35.31.14 with SMTP id i14mr12703591pyj;
        Mon, 16 Oct 2006 05:15:27 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 16 Oct 2006 05:15:24 -0700 (PDT)
Message-ID: <359a92830610160515x41e9d12dw8631f19463d20ae1@mail.gmail.com>
Date: Mon, 16 Oct 2006 08:15:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching pdf, getting page number
In-Reply-To: <1160991844.45335464b9b40@webmail.fh-konstanz.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59534_31035662.1161000924616"
References: <1160991844.45335464b9b40@webmail.fh-konstanz.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_59534_31035662.1161000924616
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, anything's possible <G>.

There's nothing magic about Lucene and its interaction with, say, a PDF
document. What you put into the index is all you can get out. So..

You could index the PDF document by pages. That is, each page is a lucene
"document", related by some ID (NOT the lucene doc_id, since that can
change).

You could index the document and give the first term of each page a large
positionincrementgap and reconstruct the page data.

You could index meta-data in a field of the document giving the term offset=
s
of each page start and reconstruct which page it came from.

You could insert a special token at the beginning of each page. You'd have
to count to get the page.

and on and on. The take-away here is that Lucene is a search *engine*, not =
a
package. You have to carefully construct your application around Lucene to
get this kind of meta-data out of it...

That said, there might already be a contribution and/or package out there
that does much of this for you, but I'm unaware of any...

Hope this helps at least a little
Erick

On 10/16/06, Christoph P=E4chter <Paechter@htwg-konstanz.de> wrote:
>
> Hi,
>
> I know that I can index pdf-files (using a third-party library).
>
> Is it possible to search the index for a phrase, getting not only the
> document, but also the page number in the (pdf-)document?
> Or is it even possible to get a bookmark, leading to this page?
>
> I am thankful for any information you can provide me, either how to do
> this indicing and searching, or where I can find further information or
> example code.
>
> Kind regards
> Christoph
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_59534_31035662.1161000924616--

From java-user-return-24049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 12:44:05 2006
Return-Path: <java-user-return-24049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35312 invoked from network); 16 Oct 2006 12:44:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 12:44:04 -0000
Received: (qmail 49913 invoked by uid 500); 16 Oct 2006 12:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49707 invoked by uid 500); 16 Oct 2006 12:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49696 invoked by uid 99); 16 Oct 2006 12:43:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 05:43:57 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of isaacrc82@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 05:43:54 -0700
Received: by ug-out-1314.google.com with SMTP id k40so739366ugc
        for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 05:43:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=PoDiVv2C5J6UwottkHeVN0MS90k/ulLJWYgApddGJ9uWEVLN3DrCyQ9kY+c7a3HewZfDLVo72tXx1n6HUM3ksYpfPkodMBAnGqwNJUyX3LIPVHSFsxaiEnWC5qgLSjdzvEwhbABSc5Q/CIu2o5LnozVwNFtUwZYU8r5UJ0LylqY=
Received: by 10.67.21.11 with SMTP id y11mr8026713ugi;
        Mon, 16 Oct 2006 05:43:32 -0700 (PDT)
Received: by 10.66.232.5 with HTTP; Mon, 16 Oct 2006 05:43:32 -0700 (PDT)
Message-ID: <bf1404350610160543i12ee8881k45f8a49aaadeb254@mail.gmail.com>
Date: Mon, 16 Oct 2006 07:43:32 -0500
From: "Ariel Isaac Romero Cartaya" <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Big problem with big indexes
Cc: erickerickson@gmail.com
In-Reply-To: <359a92830610111737l64ca6a4do16f58bae898d334a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118220_7255668.1161002612128"
References: <bf1404350610111436t36d5817j47399c90bad53795@mail.gmail.com>
	 <359a92830610111737l64ca6a4do16f58bae898d334a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_118220_7255668.1161002612128
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First af all, what is your machine architecture ??? Do you have a super pc
???
I'm running this on a dual xeon hyperthreading 2,4 Ghz, 1 Gb RAM,  HD SATA.
I Can not get the times results you get. I think  that the problem may be in
the structure of my index, for example I use a special analyzer for the
english language, filter stopwords, stemming and synonims detection with
wordnet but I need to do this to get the results I get. Could you help me to
fix this problem.
I'm desesperate.
Greetings

On 10/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Something's extremely not right <G>....
>
> First of all, I'm running a 1.4G index on a single machine and getting
> very
> good results, under 10 seconds even for the most complex queries I'm
> firing.
> This is with 870,000 documents, and includes sorting by criteria other
> than
> relevance. And using span queries. And using wildcards that build their
> own
> filters.
>
> So, something must be very different about how you are using lucene to get
> such poor search times.
>
> So, please tell us significantly more about the structure of your index
> and
> post the shortest example you can of your search code that demonstrates
> the
> problem, and maybe some of the wiser heads than mine can help out too.
>
> There should be no need to put the index in RAM, the index is just not big
> enough.
>
> So, some of the things I think would help analyze your problems....
>
> 1> hardware and op systems you're running on. Including how much memory
> you're allowing your JVM to have.
> 2> network topology. If you're running the searchers locally and just
> storing the indexes on remote machines, you're possibly having network
> latency problems. Personally, I don't think your problem is properly
> addressed by splitting your index. 600MB of index is just not big enough
> to
> need this.
> 3> This *should* work on a local machine with just a single index. How
> much
> trouble would it be to create it so? Can you try that and see what
> difference that makes?
> 4> how did you build your index? Is it optimized? Can you give us an idea
> of
> how many fields you are storing and some indication of the relative sizes
> of
> each? Mostly, I'm asking whether you have a bunch of small fields and some
> other very large ones.
> 5> Put one of the indexes on your local machine and get a copy of Luke
> (google luke lucene) and fire off a few queries via Luke and tell us what
> kind of results you get. Actually, this is probably the first thing you
> should try. If you get radically different results with Luke than your
> code,
> you can be pretty sure you're doing something out of the ordinary.
> 6> Timings of *only* the search code. By that I mean the time it takes for
> searcher.search to complete. It's vaguely possible that the search is
> fine,
> but something you're doing when processing the results is taking forever.
> I
> have no evidence for this, of course, but it'd be a useful bit of
> information.
>
> I don't know if this helps much, but from your description, I think
> there's
> a fundamental, correctable problem because nobody would use the product if
> it gave such poor search times. And lots of people use it.
>
> Best
> Erick
>
> On 10/11/06, Ariel Isaac Romero Cartaya <isaacrc82@gmail.com> wrote:
> >
> > Hi everybody:
> >
> >      I have a big problem making prallel searches in big indexes.
> >      I have indexed with lucene over 60 000 articles, I have distributed
> > the
> > indexes in 10 computers nodes so each index not exceed the 60 MB of
> size.
> > I
> > makes parallel searches in those indexes but I get the search results
> > after
> > 40 MINUTES !!! Then I put the indexes in memory to do the parallel
> > searches
> > But still I get the search results after 3 minutes !!! that`s to mucho
> > time
> > waiting !!!
> >   How Can I reduce the time of search ???
> >   Could you help me please ???
> >   I need help !!!!!
> >
> > Greetings
> >
> >
>
>

------=_Part_118220_7255668.1161002612128--

From java-user-return-24050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 13:41:51 2006
Return-Path: <java-user-return-24050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60257 invoked from network); 16 Oct 2006 13:41:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 13:41:51 -0000
Received: (qmail 41539 invoked by uid 500); 16 Oct 2006 13:41:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41233 invoked by uid 500); 16 Oct 2006 13:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41222 invoked by uid 99); 16 Oct 2006 13:41:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 06:41:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 06:41:40 -0700
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 98731DB3420
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 09:41:15 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by db2.internal (MEProxy); Mon, 16 Oct 2006 09:41:17 -0400
X-Sasl-enc: L+KDV6H3FuPk6w80u9xxTYHjDpsvqPYpxxwCO5+3MACm 1161006077
Received: from [10.17.4.90] (pool-71-162-112-195.bstnma.fios.verizon.net [71.162.112.195])
	by mail.messagingengine.com (Postfix) with ESMTP id 817E014CD8
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 09:41:16 -0400 (EDT)
Message-ID: <45338BF8.7030406@mikemccandless.com>
Date: Mon, 16 Oct 2006 09:41:12 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Parallel Index Search
References: <45336FB7.6030805@artnology.com>
In-Reply-To: <45336FB7.6030805@artnology.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Supriya Kumar Shyamal wrote:

> If I am not mistaken the process of locking the Index by different 
> objects like IndexReader or Indexwriter, theoratically only one Thread 
> can access the index at a time.

Actually, only one writer can write to the index at once.  Multiple
readers can read from the index.

On top of that, multiple threads may share one writer and one reader.
Ie, these classes are thread safe.

> When we do search on the index it creates a commit lock so the other 
> thread does not modify the index, so other thread waits until the 
> previosu therads release the lock, is it right?
> 
> So in this case I should say index accessed one by one not parallel?

The commit lock is only held while a reader is loading the index and
while a writer is "committing" its changes to the index.  These times
should be brief.  Whereas, the write lock is held for the entire time
that a writer is open.

> Its just my speculation, please don't get me wrong.
> 
> Because I try to share the same index by 6 instances and since the lock 
> for 5 instances are disabled and only once instance can modify the 
> index, at this case I achive the parallel read of the index. Only 
> disadvantage is that when the index modified then I get 
> FileNotFoundException, ao I do some kind of  respawn the search again.

You should not have to disable locking to do this sharing; in fact,
disabling locking will lead to the "FileNotFoundException" on
instantiating a reader when a writer is committing.

> If I implement the lock mechanism in the DB using the custom locking 
> then I am afraid the index performance will be reduced but the only 
> advantage is that I can avoid FNFE.

There are also open issues at least over NFS eg:

     http://issues.apache.org/jira/browse/LUCENE-673

Whereby even with proper (native) locking it's still possible to
hit exceptions due to caching in the NFS client.  Are you using NFS?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 13:50:00 2006
Return-Path: <java-user-return-24051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63218 invoked from network); 16 Oct 2006 13:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 13:50:00 -0000
Received: (qmail 68919 invoked by uid 500); 16 Oct 2006 13:49:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68881 invoked by uid 500); 16 Oct 2006 13:49:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68870 invoked by uid 99); 16 Oct 2006 13:49:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 06:49:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.230.241.32] (HELO fed1rmmtao07.cox.net) (68.230.241.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 06:49:46 -0700
Received: from fed1rmimpo01.cox.net ([70.169.32.71])
          by fed1rmmtao07.cox.net
          (InterMail vM.6.01.06.01 201-2131-130-101-20060113) with ESMTP
          id <20061016134924.TUFV28934.fed1rmmtao07.cox.net@fed1rmimpo01.cox.net>
          for <java-user@lucene.apache.org>;
          Mon, 16 Oct 2006 09:49:24 -0400
Received: from dv1040 ([68.111.209.17])
	by fed1rmimpo01.cox.net with bizsmtp
	id b1p91V0070P3yP00000000
	Mon, 16 Oct 2006 09:49:12 -0400
Reply-To: <gstead@ieee.org>
From: "Graham Stead" <gstead@ieee.org>
To: <java-user@lucene.apache.org>
Subject: RE: Avoiding sort by date
Date: Mon, 16 Oct 2006 06:49:19 -0700
Message-ID: <012101c6f129$e11aa210$0401a8c0@dv1040>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <c68e39170610152032r101d59k93d04c0ff03c02a0@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Acbw08WQVUIe+MqIQNGI7Plu4bTC8wAU/JDQ
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Given that you want to score new documents higher (implicitly sorting them),
I wonder whether Solr's FunctionQuery (specifically ReciprocalFloatFunction
-
http://incubator.apache.org/solr/docs/api/org/apache/solr/search/function/Re
ciprocalFloatFunction.html) may also be helpful. It gives newer documents
higher scores than older documents. 

I believe ReciprocalFloatFunction uses the document order within the index
to help accomplish this (see ReverseOrdFieldSource), so your code would have
to index new documents after older ones. Usually this is not a problem.

In your case, I'm not sure when it's better to use Sort or
ReciprocalFloatFunction. Perhaps someone with more knowledge than I could
advise?

-Graham

> -----Original Message-----
> From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf 
> Of Yonik Seeley
> Sent: Sunday, October 15, 2006 8:32 PM
> To: java-user@lucene.apache.org
> Subject: Re: Avoiding sort by date
> 
> On 10/12/06, rayvittal-lists@yahoo.com 
> <rayvittal-lists@yahoo.com> wrote:
> > Does the Sort function create some kind of internal cache?
> 
> Yes, it's called the FieldCache, and there is a cache with a 
> weak reference to the index reader as a key.  As long as 
> there is a reference to the index reader (even after close() 
> has been called) the cache data will exist.
> 
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene 
> search server



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 13:53:18 2006
Return-Path: <java-user-return-24052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64326 invoked from network); 16 Oct 2006 13:53:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 13:53:18 -0000
Received: (qmail 80560 invoked by uid 500); 16 Oct 2006 13:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80534 invoked by uid 500); 16 Oct 2006 13:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80523 invoked by uid 99); 16 Oct 2006 13:53:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 06:53:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of supriya.shyamal@artnology.com designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 06:53:07 -0700
Received: (qmail 22482 invoked from network); 16 Oct 2006 13:49:44 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]868262@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 16 Oct 2006 13:49:44 -0000
Message-ID: <45338DF6.5060301@artnology.com>
Date: Mon, 16 Oct 2006 15:49:42 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Parallel Index Search
References: <45336FB7.6030805@artnology.com> <45338BF8.7030406@mikemccandless.com>
In-Reply-To: <45338BF8.7030406@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael McCandless wrote:
> Supriya Kumar Shyamal wrote:
>
>> If I am not mistaken the process of locking the Index by different 
>> objects like IndexReader or Indexwriter, theoratically only one 
>> Thread can access the index at a time.
>
> Actually, only one writer can write to the index at once.  Multiple
> readers can read from the index.
>
> On top of that, multiple threads may share one writer and one reader.
> Ie, these classes are thread safe.
>
>> When we do search on the index it creates a commit lock so the other 
>> thread does not modify the index, so other thread waits until the 
>> previosu therads release the lock, is it right?
>>
>> So in this case I should say index accessed one by one not parallel?
>
> The commit lock is only held while a reader is loading the index and
> while a writer is "committing" its changes to the index.  These times
> should be brief.  Whereas, the write lock is held for the entire time
> that a writer is open.
But IndexSearcher open index using INdexReader right?
>
>> Its just my speculation, please don't get me wrong.
>>
>> Because I try to share the same index by 6 instances and since the 
>> lock for 5 instances are disabled and only once instance can modify 
>> the index, at this case I achive the parallel read of the index. Only 
>> disadvantage is that when the index modified then I get 
>> FileNotFoundException, ao I do some kind of  respawn the search again.
>
> You should not have to disable locking to do this sharing; in fact,
> disabling locking will lead to the "FileNotFoundException" on
> instantiating a reader when a writer is committing.
>
>> If I implement the lock mechanism in the DB using the custom locking 
>> then I am afraid the index performance will be reduced but the only 
>> advantage is that I can avoid FNFE.
>
> There are also open issues at least over NFS eg:
>
>     http://issues.apache.org/jira/browse/LUCENE-673
>
> Whereby even with proper (native) locking it's still possible to
> hit exceptions due to caching in the NFS client.  Are you using NFS?
>
Yes I am using NFS and for sharing I use the READ-ONLY FS mount so that 
the search instance cannot do any modification by mistake , otherwise it 
can corrupt the index.
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


-- 
Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 14:40:59 2006
Return-Path: <java-user-return-24053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80709 invoked from network); 16 Oct 2006 14:40:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 14:40:58 -0000
Received: (qmail 90534 invoked by uid 500); 16 Oct 2006 14:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90462 invoked by uid 500); 16 Oct 2006 14:40:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90309 invoked by uid 99); 16 Oct 2006 14:40:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:40:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:40:38 -0700
Received: from smtp-a.omnis.com (smtp-a.omnis.com [216.239.128.237])
	by smtp.omnis.com (Postfix) with ESMTP id 844041B44E
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 07:40:16 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	(Authenticated sender: wataylor@as-st.com)
	by smtp-a.omnis.com (Postfix) with ESMTP id 3881646F797
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 07:40:17 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <1160991844.45335464b9b40@webmail.fh-konstanz.de>
References: <1160991844.45335464b9b40@webmail.fh-konstanz.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <39b5583139393997261f6bf0b20efd13@as-st.com>
Content-Transfer-Encoding: quoted-printable
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Searching pdf, getting page number
Date: Mon, 16 Oct 2006 11:14:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Oct 16, 2006, at 5:44 AM, Christoph P=E4chter wrote:

> Hi,
>
> I know that I can index pdf-files (using a third-party library).

Could you please tell me where to find this library?

> Is it possible to search the index for a phrase, getting not only the
> document, but also the page number in the (pdf-)document?
> Or is it even possible to get a bookmark, leading to this page?
>
> I am thankful for any information you can provide me, either how to do
> this indicing and searching, or where I can find further information =
or
> example code.
>
> Kind regards
> Christoph
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 14:46:26 2006
Return-Path: <java-user-return-24054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82109 invoked from network); 16 Oct 2006 14:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 14:46:26 -0000
Received: (qmail 2718 invoked by uid 500); 16 Oct 2006 14:46:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2676 invoked by uid 500); 16 Oct 2006 14:46:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2615 invoked by uid 99); 16 Oct 2006 14:46:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:46:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 07:46:10 -0700
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 3634EDB2F4D
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 10:45:47 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by db2.internal (MEProxy); Mon, 16 Oct 2006 10:45:49 -0400
X-Sasl-enc: eTFc2lVlUGi4hCs7rpRWoioITV4ZpFdRbchQGLDIgklO 1161009949
Received: from [10.17.4.90] (pool-71-162-112-195.bstnma.fios.verizon.net [71.162.112.195])
	by mail.messagingengine.com (Postfix) with ESMTP id 2D7A114E13
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 10:45:48 -0400 (EDT)
Message-ID: <45339B18.80905@mikemccandless.com>
Date: Mon, 16 Oct 2006 10:45:44 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Parallel Index Search
References: <45336FB7.6030805@artnology.com> <45338BF8.7030406@mikemccandless.com> <45338DF6.5060301@artnology.com>
In-Reply-To: <45338DF6.5060301@artnology.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Supriya Kumar Shyamal wrote:

>>> If I am not mistaken the process of locking the Index by different 
>>> objects like IndexReader or Indexwriter, theoratically only one 
>>> Thread can access the index at a time.
>>
>> Actually, only one writer can write to the index at once.  Multiple
>> readers can read from the index.
>>
>> On top of that, multiple threads may share one writer and one reader.
>> Ie, these classes are thread safe.
>>
>>> When we do search on the index it creates a commit lock so the other 
>>> thread does not modify the index, so other thread waits until the 
>>> previosu therads release the lock, is it right?
>>>
>>> So in this case I should say index accessed one by one not parallel?
>>
>> The commit lock is only held while a reader is loading the index and
>> while a writer is "committing" its changes to the index.  These times
>> should be brief.  Whereas, the write lock is held for the entire time
>> that a writer is open.
> But IndexSearcher open index using INdexReader right?

Yes, IndexSearcher will open an IndexReader.  So every time you open
it, the commit lock is acquired, the IndexReader reads all segments
details from the index, and then the commit lock is released.  But,
this lock needs to be shared across all your machines, so that the
writer is prevented from committing while a reader is reading the
index.

Aside: note that you should not be re-opening an IndexSearcher with
every search.  It's much more efficient to open it (and reopen it
every so often) and then share that one instance across many searches.

>>
>>> Its just my speculation, please don't get me wrong.
>>>
>>> Because I try to share the same index by 6 instances and since the 
>>> lock for 5 instances are disabled and only once instance can modify 
>>> the index, at this case I achive the parallel read of the index. Only 
>>> disadvantage is that when the index modified then I get 
>>> FileNotFoundException, ao I do some kind of  respawn the search again.
>>
>> You should not have to disable locking to do this sharing; in fact,
>> disabling locking will lead to the "FileNotFoundException" on
>> instantiating a reader when a writer is committing.
>>
>>> If I implement the lock mechanism in the DB using the custom locking 
>>> then I am afraid the index performance will be reduced but the only 
>>> advantage is that I can avoid FNFE.
>>
>> There are also open issues at least over NFS eg:
>>
>>     http://issues.apache.org/jira/browse/LUCENE-673
>>
>> Whereby even with proper (native) locking it's still possible to
>> hit exceptions due to caching in the NFS client.  Are you using NFS?
>>
> Yes I am using NFS and for sharing I use the READ-ONLY FS mount so that 
> the search instance cannot do any modification by mistake , otherwise it 
> can corrupt the index.

OK, Lucene currently hits intermittant FileNotFoundException over NFS
(see that issue I listed for the gory details).  Furthermore (worse),
correct locking (native locking) does not in fact fix the issue.

We are working on small changes to how Lucene stores the index in the
filesystem ("lockless commits") that do away with the commit lock
entirely.  This not only enables readers to actually be entirely
read-only, but it also allows Lucene to work properly over NFS.

Unfortunately it's going to be a while before this is actually
available (it's still being developed).  In the mean time, one
workaround is to do something similar to the Solr project (built on
top of Lucene) which takes snapshots of the index at "known safe"
times and then readers read from these snapshots instead of the live
index.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 15:27:16 2006
Return-Path: <java-user-return-24055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93586 invoked from network); 16 Oct 2006 15:27:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 15:27:16 -0000
Received: (qmail 97552 invoked by uid 500); 16 Oct 2006 15:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97530 invoked by uid 500); 16 Oct 2006 15:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97519 invoked by uid 99); 16 Oct 2006 15:27:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 08:27:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 08:27:05 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1595531C@mailer.syr.edu>; Mon, 16 Oct 2006 11:26:44 -0400
Message-ID: <4533A4B4.5000300@syr.edu>
Date: Mon, 16 Oct 2006 11:26:44 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Looking for a stemmer that can return all inflected forms
References: <20061014195756.6F5A077AD95@mail13.simplicato.com>
In-Reply-To: <20061014195756.6F5A077AD95@mail13.simplicato.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jong,

Jong Kim wrote:
> I'm looking for a stemmer that is capable of returning all morphological 
> variants  of a query term (to be used for high-recall search). For example, 
> given a query term of 'cares', I would like to be able to generate 'cares', 
> 'care', 'cared', and 'caring'.

To achieve high recall, can't you just stem terms both when indexing and
when querying?

The only reasons I can think of not to do so are to support both
high-precision and high-recall queries with the same index, or to give
greater weight to exact-match documents than to stemmed-match documents
within a single query.  If either of these is the case, you could
maintain two fields (one stemmed and one non-stemmed) or two indexes,
and choose which field/index to use (reason #1) or combine the two in a
single query (reason #2).

Actually, now that I think about it more, two indexes for reason #2
(i.e., stemmed match as fallback if exact match fails) would be tricky,
due to issues with fusion of search results -- better to use two fields
in a single index for this case.

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 15:45:30 2006
Return-Path: <java-user-return-24056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98159 invoked from network); 16 Oct 2006 15:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 15:45:30 -0000
Received: (qmail 40789 invoked by uid 500); 16 Oct 2006 15:45:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40761 invoked by uid 500); 16 Oct 2006 15:45:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40744 invoked by uid 99); 16 Oct 2006 15:45:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 08:45:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 08:45:20 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15955709@mailer.syr.edu>; Mon, 16 Oct 2006 11:45:00 -0400
Message-ID: <4533A8FB.2030509@syr.edu>
Date: Mon, 16 Oct 2006 11:44:59 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching pdf, getting page number
References: <1160991844.45335464b9b40@webmail.fh-konstanz.de> <39b5583139393997261f6bf0b20efd13@as-st.com>
In-Reply-To: <39b5583139393997261f6bf0b20efd13@as-st.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Bill,

Bill Taylor wrote:
> On Oct 16, 2006, at 5:44 AM, Christoph Pchter wrote:
>> I know that I can index pdf-files (using a third-party library).
> 
> Could you please tell me where to find this library? 

There are several PDF extraction packages listed here (look under the
"Lucene Document Converters" heading):

<http://lucene.apache.org/java/docs/contributions.html>

I haven't personally used it, but the documentation for PDF Box (one of
the packages listed on the above-linked page) describes integration with
Lucene:

<http://www.pdfbox.org/userguide/text_extraction.html#Lucene+Integration>

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 17:44:07 2006
Return-Path: <java-user-return-24057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38137 invoked from network); 16 Oct 2006 17:44:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 17:44:07 -0000
Received: (qmail 3822 invoked by uid 500); 16 Oct 2006 17:43:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3782 invoked by uid 500); 16 Oct 2006 17:43:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3766 invoked by uid 99); 16 Oct 2006 17:43:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:43:58 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [198.22.153.39] (HELO EXCHCLUSTUSA.pega.com) (198.22.153.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 10:43:55 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6F14A.9AC96BAD"
Subject: BooleanQuery.TooManyClauses exception
Date: Mon, 16 Oct 2006 13:43:33 -0400
Message-ID: <D867A529C569F64BAC09C622E55B408401ED3C1E@EXCHCLUSTUSA.rpega.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery.TooManyClauses exception
Thread-Index: AcbxSpns21eiSgzxSW+tAdgjRwaARA==
From: "Bushey, John" <John.Bushey@pega.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6F14A.9AC96BAD
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi - Can someone explain the reason why I'm getting the TooManyClauses
exception?  I have a general understanding of the issue based on my
reading, but I don't understand the mechanics of the it.  Specifically
how is my query being expanded to cause this problem?  How am I
exceeding the default 1024 clauses?  My query looks like the following.

=20

pyLabel:(test) OR pyDescription:(test) AND ( pxCreateDateTime:[20060401
TO 20060901] )

=20

The problem only happens when my date range exceeds ~2 months.  The date
is indexed with more precision, but for my query purposes I only care
about the date and not the time stamp portion.  What can I do to solve
or mitigate this problem and be able to search a date range that spans
at least a year? Is setMaxClauseCount() a predictable solution?  How
would reducing the precision of my date during indexing help?

=20

=20

Thanks

John

=20

=20

=20


------_=_NextPart_001_01C6F14A.9AC96BAD--

From java-user-return-24058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 18:32:20 2006
Return-Path: <java-user-return-24058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72724 invoked from network); 16 Oct 2006 18:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 18:32:19 -0000
Received: (qmail 31385 invoked by uid 500); 16 Oct 2006 18:32:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31355 invoked by uid 500); 16 Oct 2006 18:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31344 invoked by uid 99); 16 Oct 2006 18:32:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 11:32:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 11:32:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 31AA75B778; Mon, 16 Oct 2006 11:31:49 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 287D37F403
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 11:31:49 -0700 (PDT)
Date: Mon, 16 Oct 2006 11:31:49 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery.TooManyClauses exception
In-Reply-To: <D867A529C569F64BAC09C622E55B408401ED3C1E@EXCHCLUSTUSA.rpega.com>
Message-ID: <Pine.LNX.4.58.0610161128090.14880@hal.rescomp.berkeley.edu>
References: <D867A529C569F64BAC09C622E55B408401ED3C1E@EXCHCLUSTUSA.rpega.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


RangeQueries expand to a boolean query containing all terms in the range,
so it doesn't matter if you search on a course grain range, if you store
the dates with high granulatiry -- the number of terms will be high.

this wiki page discusses some of the merrits of using multiple date fields
with various levels of granulairty...
http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing
...but frankly, i suggest you just use a ConstantScoringRangeQuery (which
uses a RangeFilter under the covers) and save yourself the headache.



: Date: Mon, 16 Oct 2006 13:43:33 -0400
: From: "Bushey, John" <John.Bushey@pega.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: BooleanQuery.TooManyClauses exception
:
: Hi - Can someone explain the reason why I'm getting the TooManyClauses
: exception?  I have a general understanding of the issue based on my
: reading, but I don't understand the mechanics of the it.  Specifically
: how is my query being expanded to cause this problem?  How am I
: exceeding the default 1024 clauses?  My query looks like the following.
:
:
:
: pyLabel:(test) OR pyDescription:(test) AND ( pxCreateDateTime:[20060401
: TO 20060901] )
:
:
:
: The problem only happens when my date range exceeds ~2 months.  The date
: is indexed with more precision, but for my query purposes I only care
: about the date and not the time stamp portion.  What can I do to solve
: or mitigate this problem and be able to search a date range that spans
: at least a year? Is setMaxClauseCount() a predictable solution?  How
: would reducing the precision of my date during indexing help?
:
:
:
:
:
: Thanks
:
: John
:
:
:
:
:
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 18:59:55 2006
Return-Path: <java-user-return-24059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80688 invoked from network); 16 Oct 2006 18:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 18:59:54 -0000
Received: (qmail 15772 invoked by uid 500); 16 Oct 2006 18:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15745 invoked by uid 500); 16 Oct 2006 18:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15734 invoked by uid 99); 16 Oct 2006 18:59:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 11:59:48 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.252.110.212] (HELO web56203.mail.re3.yahoo.com) (216.252.110.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Oct 2006 11:59:46 -0700
Received: (qmail 51654 invoked by uid 60001); 16 Oct 2006 18:59:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=4mFttnOmdLHExk0AWej+PS7jZu1HHr5fl5ZYv9unfS74IGdUFZ6dWZ0yAVi9K9wWC3zaAFUHraeiktqKxeNHp/1JjkPvnliMvE18u2KnwZ+Fcb49KiUoXPlUOS3MygG18iZE+PS19W63hcXuXne+hWXrsh8ndFsWy0QEykG5L6s=  ;
Message-ID: <20061016185925.51652.qmail@web56203.mail.re3.yahoo.com>
Received: from [68.163.79.130] by web56203.mail.re3.yahoo.com via HTTP; Mon, 16 Oct 2006 11:59:25 PDT
Date: Mon, 16 Oct 2006 11:59:25 -0700 (PDT)
From: John Gilbert <jgilbert01@yahoo.com>
Subject: Re: java.io.IOException: read past EOF
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-571240312-1161025165=:51453"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-571240312-1161025165=:51453
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable

turns out i needed a seek method.=0A=0Ai ended up modeling it after the RAM=
 Directory.=0Ai turned the RAMFile into an @Entity.=0Athe directory accesse=
s the EntityManager.=0Aand i am using JBossCache.=0Apreliminary testing sho=
ws comparable response times.=0A=0A=0A=0A=0A=0A
--0-571240312-1161025165=:51453--

From java-user-return-24060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 20:29:08 2006
Return-Path: <java-user-return-24060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21564 invoked from network); 16 Oct 2006 20:29:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 20:29:07 -0000
Received: (qmail 35068 invoked by uid 500); 16 Oct 2006 20:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35036 invoked by uid 500); 16 Oct 2006 20:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35014 invoked by uid 99); 16 Oct 2006 20:28:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 13:28:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ohara@genome.chop.edu designates 159.14.214.193 as permitted sender)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 13:28:56 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Mon, 16 Oct 2006 16:28:35 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <BD9D81A9-396D-4CFE-9EA8-4BF9EF1CAD5B@genome.chop.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Help with Custom Analyzer
Date: Mon, 16 Oct 2006 16:28:35 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a few questions regarding writing a custom analyzer.

My situation is that I would like to use the StandardAnalyzer but  
with some data-specific rules.  I was wondering if there was a way of  
telling the StandardAnalyzer to treat a string of text, that would  
normally be tokenized into more than one token, as only one token  
(maybe by inserting quotes around the text).  For example, say the  
StandardAnalyzer normally splits the string of text  
ohara@genome.chop.edu into 4 tokens, but I want it to split the  
string into only 1 token.  Could I accomplish this by surrounding the  
string with quotes or by using some other type of flag?

Another question I have is how do I modify the text being analyzed?   
 From how I interpreted what I have read (which could easily be off),  
it looks like in order to accomplish what I have previously  
described, I am going to have to add some code to my custom  
analyzer's tokenStream method.  I see that tokenStream() has a Field  
and a Reader as parameters.  Would the way I go about adding rules be  
to edit the reader text?  If so, would manipulation of the text be  
easier if I were to convert the reader into a string?

Any help is greatly appreciated.  Thanks.

-Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 21:32:45 2006
Return-Path: <java-user-return-24061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65145 invoked from network); 16 Oct 2006 21:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 21:32:44 -0000
Received: (qmail 69963 invoked by uid 500); 16 Oct 2006 21:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69938 invoked by uid 500); 16 Oct 2006 21:32:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69927 invoked by uid 99); 16 Oct 2006 21:32:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 14:32:36 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Oct 2006 14:32:34 -0700
Received: (qmail 39790 invoked by uid 60001); 16 Oct 2006 21:32:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Q+Sb5cSExL/gxKxn7DqYD63QT9dFsojO5xAC2PAdjp0mEdAYoCX5dCXZznPeMn3R+/dV7C7Gsw+iZysrLeGmaA7+9LWicAZ26TAIEOb1d/5kUjN1Ay70KqWLWehIpE6pa9xHpeF4IDZgTi4DswQFCHtefrZuSbwQKWZHJ86w1b0=  ;
Message-ID: <20061016213213.39788.qmail@web50314.mail.yahoo.com>
Received: from [74.65.202.166] by web50314.mail.yahoo.com via HTTP; Mon, 16 Oct 2006 14:32:13 PDT
Date: Mon, 16 Oct 2006 14:32:13 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Help with Custom Analyzer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Ryan,=0A=0AStandardAnalyzer should already be smart about keeping email =
addresses as a single token:=0A=0A  // email addresses=0A| <EMAIL: <ALPHANU=
M> (("."|"-"|"_") <ALPHANUM>)* "@" <ALPHANUM> (("."|"-") <ALPHANUM>)+ >=0A=
=0A(this is from StandardAnalyzer.jj)=0A=0AAs for changing the text you fee=
d to Lucene, that's all up to you.  Changing the String seems like the simp=
lest approach.  If you want to wrap that in StringReader, you can, but you =
can also just work with Strings.=0A=0AOtis=0A=0A----- Original Message ----=
=0AFrom: Ryan O'Hara <ohara@genome.chop.edu>=0ATo: java-user@lucene.apache.=
org=0ASent: Monday, October 16, 2006 4:28:35 PM=0ASubject: Help with Custom=
 Analyzer=0A=0AI have a few questions regarding writing a custom analyzer.=
=0A=0AMy situation is that I would like to use the StandardAnalyzer but  =
=0Awith some data-specific rules.  I was wondering if there was a way of  =
=0Atelling the StandardAnalyzer to treat a string of text, that would  =0An=
ormally be tokenized into more than one token, as only one token  =0A(maybe=
 by inserting quotes around the text).  For example, say the  =0AStandardAn=
alyzer normally splits the string of text  =0Aohara@genome.chop.edu into 4 =
tokens, but I want it to split the  =0Astring into only 1 token.  Could I a=
ccomplish this by surrounding the  =0Astring with quotes or by using some o=
ther type of flag?=0A=0AAnother question I have is how do I modify the text=
 being analyzed?   =0A From how I interpreted what I have read (which could=
 easily be off),  =0Ait looks like in order to accomplish what I have previ=
ously  =0Adescribed, I am going to have to add some code to my custom  =0Aa=
nalyzer's tokenStream method.  I see that tokenStream() has a Field  =0Aand=
 a Reader as parameters.  Would the way I go about adding rules be  =0Ato e=
dit the reader text?  If so, would manipulation of the text be  =0Aeasier i=
f I were to convert the reader into a string?=0A=0AAny help is greatly appr=
eciated.  Thanks.=0A=0A-Ryan=0A=0A-----------------------------------------=
----------------------------=0ATo unsubscribe, e-mail: java-user-unsubscrib=
e@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 21:44:56 2006
Return-Path: <java-user-return-24062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69637 invoked from network); 16 Oct 2006 21:44:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 21:44:56 -0000
Received: (qmail 94092 invoked by uid 500); 16 Oct 2006 21:44:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93990 invoked by uid 500); 16 Oct 2006 21:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93979 invoked by uid 99); 16 Oct 2006 21:44:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 14:44:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wataylor@as-st.com designates 216.239.128.26 as permitted sender)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 14:44:45 -0700
Received: from smtp-b.omnis.com (smtp-b.omnis.com [216.239.128.238])
	by smtp.omnis.com (Postfix) with ESMTP id 32A381B8E2
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 14:44:24 -0700 (PDT)
Received: from [192.168.6.223] (d-65-175-205-96.metrocast.net [65.175.205.96])
	(Authenticated sender: wataylor@as-st.com)
	by smtp-b.omnis.com (Postfix) with ESMTP id 214D31C00872
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 14:44:23 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v624)
In-Reply-To: <20061016213213.39788.qmail@web50314.mail.yahoo.com>
References: <20061016213213.39788.qmail@web50314.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <c6a321a6a089814d3d10fe701b272475@as-st.com>
Content-Transfer-Encoding: 7bit
From: Bill Taylor <wataylor@as-st.com>
Subject: Re: Help with Custom Analyzer
Date: Mon, 16 Oct 2006 18:18:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.624)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is not THAT hard to write a custom analyzer, that is what I did.  I 
found that there is a bug in the setup, however, in that there are two 
incompatible definitions of Token.  The generated file 
<xx>Tokenizer.java refers to the wrong definition of Token so I ahve to 
patch it before it will compile.

Other than that, doing a custom analyzer is pretty simple.


On Oct 16, 2006, at 5:32 PM, Otis Gospodnetic wrote:

> Hi Ryan,
>
> StandardAnalyzer should already be smart about keeping email addresses 
> as a single token:
>
>   // email addresses
> | <EMAIL: <ALPHANUM> (("."|"-"|"_") <ALPHANUM>)* "@" <ALPHANUM> 
> (("."|"-") <ALPHANUM>)+ >
>
> (this is from StandardAnalyzer.jj)
>
> As for changing the text you feed to Lucene, that's all up to you.  
> Changing the String seems like the simplest approach.  If you want to 
> wrap that in StringReader, you can, but you can also just work with 
> Strings.
>
> Otis
>
> ----- Original Message ----
> From: Ryan O'Hara <ohara@genome.chop.edu>
> To: java-user@lucene.apache.org
> Sent: Monday, October 16, 2006 4:28:35 PM
> Subject: Help with Custom Analyzer
>
> I have a few questions regarding writing a custom analyzer.
>
> My situation is that I would like to use the StandardAnalyzer but
> with some data-specific rules.  I was wondering if there was a way of
> telling the StandardAnalyzer to treat a string of text, that would
> normally be tokenized into more than one token, as only one token
> (maybe by inserting quotes around the text).  For example, say the
> StandardAnalyzer normally splits the string of text
> ohara@genome.chop.edu into 4 tokens, but I want it to split the
> string into only 1 token.  Could I accomplish this by surrounding the
> string with quotes or by using some other type of flag?
>
> Another question I have is how do I modify the text being analyzed?
>  From how I interpreted what I have read (which could easily be off),
> it looks like in order to accomplish what I have previously
> described, I am going to have to add some code to my custom
> analyzer's tokenStream method.  I see that tokenStream() has a Field
> and a Reader as parameters.  Would the way I go about adding rules be
> to edit the reader text?  If so, would manipulation of the text be
> easier if I were to convert the reader into a string?
>
> Any help is greatly appreciated.  Thanks.
>
> -Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 21:47:50 2006
Return-Path: <java-user-return-24063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70248 invoked from network); 16 Oct 2006 21:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 21:47:50 -0000
Received: (qmail 3828 invoked by uid 500); 16 Oct 2006 21:47:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3770 invoked by uid 500); 16 Oct 2006 21:47:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3759 invoked by uid 99); 16 Oct 2006 21:47:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 14:47:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 14:47:39 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Mon, 16 Oct 2006 17:47:18 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20061016213213.39788.qmail@web50314.mail.yahoo.com>
References: <20061016213213.39788.qmail@web50314.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3CE122E7-419C-4AD1-9FE4-7751ECCC29DC@genome.chop.edu>
Content-Transfer-Encoding: 7bit
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: Help with Custom Analyzer
Date: Mon, 16 Oct 2006 17:47:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry, I wasn't really concerned with email addresses  - I was just  
using that as an example.  How would I tell the StandardAnalyzer that  
I want a certain phrase to be tokenized as a token?  Surround by  
quotes or ..?  Also, how would you recommend manipulating the Reader  
object?  You said something about manipulating it as a String.  Do  
you mean like:

try {
             String line = "";
             int charValue = 0;
             BufferedReader in = new BufferedReader(reader);
             while((line = in.readLine()) != null){
                 text += line + " ";
             }
         } catch (Exception e) {
             System.out.println(e.getMessage());
         }

//make text changes
//cast back into a Reader

Thanks for the response.

-Ryan

On Oct 16, 2006, at 5:32 PM, Otis Gospodnetic wrote:

> Hi Ryan,
>
> StandardAnalyzer should already be smart about keeping email  
> addresses as a single token:
>
>   // email addresses
> | <EMAIL: <ALPHANUM> (("."|"-"|"_") <ALPHANUM>)* "@" <ALPHANUM>  
> (("."|"-") <ALPHANUM>)+ >
>
> (this is from StandardAnalyzer.jj)
>
> As for changing the text you feed to Lucene, that's all up to you.   
> Changing the String seems like the simplest approach.  If you want  
> to wrap that in StringReader, you can, but you can also just work  
> with Strings.
>
> Otis
>
> ----- Original Message ----
> From: Ryan O'Hara <ohara@genome.chop.edu>
> To: java-user@lucene.apache.org
> Sent: Monday, October 16, 2006 4:28:35 PM
> Subject: Help with Custom Analyzer
>
> I have a few questions regarding writing a custom analyzer.
>
> My situation is that I would like to use the StandardAnalyzer but
> with some data-specific rules.  I was wondering if there was a way of
> telling the StandardAnalyzer to treat a string of text, that would
> normally be tokenized into more than one token, as only one token
> (maybe by inserting quotes around the text).  For example, say the
> StandardAnalyzer normally splits the string of text
> ohara@genome.chop.edu into 4 tokens, but I want it to split the
> string into only 1 token.  Could I accomplish this by surrounding the
> string with quotes or by using some other type of flag?
>
> Another question I have is how do I modify the text being analyzed?
>  From how I interpreted what I have read (which could easily be off),
> it looks like in order to accomplish what I have previously
> described, I am going to have to add some code to my custom
> analyzer's tokenStream method.  I see that tokenStream() has a Field
> and a Reader as parameters.  Would the way I go about adding rules be
> to edit the reader text?  If so, would manipulation of the text be
> easier if I were to convert the reader into a string?
>
> Any help is greatly appreciated.  Thanks.
>
> -Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 16 22:14:51 2006
Return-Path: <java-user-return-24064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81330 invoked from network); 16 Oct 2006 22:14:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Oct 2006 22:14:50 -0000
Received: (qmail 43052 invoked by uid 500); 16 Oct 2006 22:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43020 invoked by uid 500); 16 Oct 2006 22:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43009 invoked by uid 99); 16 Oct 2006 22:14:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:14:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 15:14:41 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9GMEJuA257474
	for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 22:14:19 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9GMGnC02801858
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 00:16:49 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9GMEJD0015694
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 00:14:19 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9GMEJmX015691
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 00:14:19 +0200
In-Reply-To: <20061016213213.39788.qmail@web50314.mail.yahoo.com>
Subject: Re: Help with Custom Analyzer
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFBD23728B.781DFA1E-ON88257209.00776030-88257209.0077EAD1@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 16 Oct 2006 13:49:49 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 17/10/2006 00:16:49
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 16/10/2006 14:32:13:
> Hi Ryan,
>
> StandardAnalyzer should already be smart about keeping email
> addresses as a single token:
>
>   // email addresses
> | <EMAIL: <ALPHANUM> (("."|"-"|"_") <ALPHANUM>)* "@" <ALPHANUM>
> (("."|"-") <ALPHANUM>)+ >
>
> (this is from StandardAnalyzer.jj)
>
> As for changing the text you feed to Lucene, that's all up to you.
> Changing the String seems like the simplest approach.  If you want
> to wrap that in StringReader, you can, but you can also just work
> with Strings.

Also, if you would to modify the tokens generated by the
[Standard]Analyzer, you could write your own TokenFilter - e.g. like the
SynonymFilter in the LIA book.

>
> Otis
>
> ----- Original Message ----
> From: Ryan O'Hara <ohara@genome.chop.edu>
> To: java-user@lucene.apache.org
> Sent: Monday, October 16, 2006 4:28:35 PM
> Subject: Help with Custom Analyzer
>
> I have a few questions regarding writing a custom analyzer.
>
> My situation is that I would like to use the StandardAnalyzer but
> with some data-specific rules.  I was wondering if there was a way of
> telling the StandardAnalyzer to treat a string of text, that would
> normally be tokenized into more than one token, as only one token
> (maybe by inserting quotes around the text).  For example, say the
> StandardAnalyzer normally splits the string of text
> ohara@genome.chop.edu into 4 tokens, but I want it to split the
> string into only 1 token.  Could I accomplish this by surrounding the
> string with quotes or by using some other type of flag?
>
> Another question I have is how do I modify the text being analyzed?
>  From how I interpreted what I have read (which could easily be off),
> it looks like in order to accomplish what I have previously
> described, I am going to have to add some code to my custom
> analyzer's tokenStream method.  I see that tokenStream() has a Field
> and a Reader as parameters.  Would the way I go about adding rules be
> to edit the reader text?  If so, would manipulation of the text be
> easier if I were to convert the reader into a string?
>
> Any help is greatly appreciated.  Thanks.
>
> -Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 00:50:59 2006
Return-Path: <java-user-return-24065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20610 invoked from network); 17 Oct 2006 00:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 00:50:59 -0000
Received: (qmail 37071 invoked by uid 500); 17 Oct 2006 00:50:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36977 invoked by uid 500); 17 Oct 2006 00:50:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36966 invoked by uid 99); 17 Oct 2006 00:50:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 17:50:51 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.195] (HELO web36403.mail.mud.yahoo.com) (209.191.91.195)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Oct 2006 17:50:49 -0700
Received: (qmail 87230 invoked by uid 60001); 17 Oct 2006 00:50:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=GwwEsr0WG/xvkcob+j5pZ303emOWsJvZ24UaHrN2hQNxL2cQZmL5zK8ex9P/acOLey5gNcgwqFd9xw2TRwlz1XBNhkQRwHac3umkzNqV/4LXy+Zu2r3EloznsmBd3qRtsDES3gLdZ+cTFfnxijZkPbuSTrTCfRRKNAQ6q2fFPGs=  ;
Message-ID: <20061017005027.87227.qmail@web36403.mail.mud.yahoo.com>
Received: from [24.125.100.254] by web36403.mail.mud.yahoo.com via HTTP; Mon, 16 Oct 2006 17:50:27 PDT
Date: Mon, 16 Oct 2006 17:50:27 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: PrefixFilter and WildcardQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1084614039-1161046227=:87158"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1084614039-1161046227=:87158
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,

I have have multiple fields that I need to search on. All these fields need to support wildcard search. I am ANDing these search fields using BooleanQuery. There is no need for score in my search.

How do I implement these. I have seen PrefixFilter and it sounds promising. But then how do I implement search for multiple fields (AND)  and using PrefixFilter. I could not find any discussion related to these.

Any help would be highly appreciated.

Thanks,
-Vasu

 		
---------------------------------
Do you Yahoo!?
 Everyone is raving about the  all-new Yahoo! Mail.
--0-1084614039-1161046227=:87158--

From java-user-return-24066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 01:16:00 2006
Return-Path: <java-user-return-24066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25290 invoked from network); 17 Oct 2006 01:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 01:15:59 -0000
Received: (qmail 62903 invoked by uid 500); 17 Oct 2006 01:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62859 invoked by uid 500); 17 Oct 2006 01:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62848 invoked by uid 99); 17 Oct 2006 01:15:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 18:15:53 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 18:15:51 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9H1FUK3152462
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 01:15:30 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9H1Hx3c2801836
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 03:17:59 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9H1FTB7016580
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 03:15:29 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9H1FTSR016577
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 03:15:29 +0200
In-Reply-To: <20061017005027.87227.qmail@web36403.mail.mud.yahoo.com>
Subject: Re: PrefixFilter and WildcardQuery
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6F2AC08D.DEACD8F3-ON8825720A.000645F1-8825720A.00067B33@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 16 Oct 2006 17:10:47 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 17/10/2006 03:17:59
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi Vasu, how about using ChainedFilter(yourPrefixFilters[],
ChainedFilter.AND)?

vasu shah <vasushah23@yahoo.com> wrote on 16/10/2006 17:50:27:
> Hi,
>
> I have have multiple fields that I need to search on. All these
> fields need to support wildcard search. I am ANDing these search
> fields using BooleanQuery. There is no need for score in my search.
>
> How do I implement these. I have seen PrefixFilter and it sounds
> promising. But then how do I implement search for multiple fields
> (AND)  and using PrefixFilter. I could not find any discussion
> related to these.
>
> Any help would be highly appreciated.
>
> Thanks,
> -Vasu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 01:16:16 2006
Return-Path: <java-user-return-24067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25354 invoked from network); 17 Oct 2006 01:16:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 01:16:15 -0000
Received: (qmail 64345 invoked by uid 500); 17 Oct 2006 01:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64321 invoked by uid 500); 17 Oct 2006 01:16:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64310 invoked by uid 99); 17 Oct 2006 01:16:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 18:16:09 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 18:16:07 -0700
Received: by py-out-1112.google.com with SMTP id i49so2021874pyi
        for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 18:15:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NwIe5DxmprJdJxd+L5Evzx8vqG15wvk7RPFI5I3iCAPTUiPnQZkdtEqVASeCI5Kq/pWABT7AUQXkrSdkltJ5ucuEL1yJXM9dMwkQDbA0nnPKG5iX3FB88AhfkJ55ltLOglFllGBBpQCo0K7OvM5GfqeTNBKYNTVLNAV/auGct0Q=
Received: by 10.35.57.5 with SMTP id j5mr14497922pyk;
        Mon, 16 Oct 2006 18:15:11 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Mon, 16 Oct 2006 18:15:11 -0700 (PDT)
Message-ID: <359a92830610161815x2f322af9x9329bb5986416024@mail.gmail.com>
Date: Mon, 16 Oct 2006 21:15:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: PrefixFilter and WildcardQuery
In-Reply-To: <20061017005027.87227.qmail@web36403.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70858_18922603.1161047711740"
References: <20061017005027.87227.qmail@web36403.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_70858_18922603.1161047711740
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, depending on what you mean by wildcard, a prefixfilter isn't
necessarily what you want. If wildcard means abc*, then prefixfilter is
right. If it means ab*cd?fg, a prefix filter isn't useful unless you want to
do some fancy indexing.

Think about writing your own filter. Wrap it in a ConstantScoreQuery and put
as many of these together in a BooleanQuery as you want, anding and oring
and notting as you see fit.

 It's a good thing you don't want scoring, since ConstantScoreQueriy doesn't
support it <G>.

You could also do something similar with regular expressions (there are
classes to support this in the 1.9 API, contrib section).

There's also CachingWrapperFilter if you think your filters will be re-used.

Here's an example of a wildcard filter (Lucene 1.9) ...

public class WildcardTermFilter
        extends Filter {
    private static final long serialVersionUID = 1L;


    protected BitSet bits = null;
    private String   field;
    private String   value;

    public WildcardTermFilter(String field, String value) {
        this.field = field;
        this.value = value;
    }

    public BitSet bits(IndexReader reader)
            throws IOException {
        bits = new BitSet(reader.maxDoc());

        TermDocs         termDocs = reader.termDocs();
        WildcardTermEnum wildEnum = new WildcardTermEnum(reader, new
Term(field, value));

        for (Term term = null; (term = wildEnum.term()) != null;
wildEnum.next()) {
            termDocs.seek(term);

            while (termDocs.next()) {
                bits.set(termDocs.doc());
            }
        }

        return bits;
    }
}

Hope this helps
Erick

On 10/16/06, vasu shah <vasushah23@yahoo.com> wrote:
>
> Hi,
>
> I have have multiple fields that I need to search on. All these fields
> need to support wildcard search. I am ANDing these search fields using
> BooleanQuery. There is no need for score in my search.
>
> How do I implement these. I have seen PrefixFilter and it sounds
> promising. But then how do I implement search for multiple fields (AND)  and
> using PrefixFilter. I could not find any discussion related to these.
>
> Any help would be highly appreciated.
>
> Thanks,
> -Vasu
>
>
> ---------------------------------
> Do you Yahoo!?
> Everyone is raving about the  all-new Yahoo! Mail.
>

------=_Part_70858_18922603.1161047711740--

From java-user-return-24068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 01:29:23 2006
Return-Path: <java-user-return-24068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34141 invoked from network); 17 Oct 2006 01:29:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 01:29:23 -0000
Received: (qmail 75615 invoked by uid 500); 17 Oct 2006 01:29:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75585 invoked by uid 500); 17 Oct 2006 01:29:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75572 invoked by uid 99); 17 Oct 2006 01:29:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 18:29:16 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ekemokai@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 18:29:15 -0700
Received: by nz-out-0102.google.com with SMTP id k1so613423nzf
        for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 18:28:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=qLI+TaQMO+tDGGplF+OpNr6eLC5E6LiQCBYoMEGTfMQ5dtP2jDncNjeTyInn15+0K7bYAyT6tg8G6QfDEEtIUFa/dr8LWjq20w9+Ox19WqRV1qEw1Pi4msMBLLYvyuVYIBSE2xh5qISXUgxtsanDHd+L4HD9Im2CYEwiR1hrTQg=
Received: by 10.65.232.12 with SMTP id j12mr11189449qbr;
        Mon, 16 Oct 2006 18:28:54 -0700 (PDT)
Received: by 10.65.158.7 with HTTP; Mon, 16 Oct 2006 18:28:54 -0700 (PDT)
Message-ID: <dac893430610161828s1451cc65if8358c2661d7a12@mail.gmail.com>
Date: Mon, 16 Oct 2006 21:28:54 -0400
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: reloading index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97368_18375657.1161048534385"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_97368_18375657.1161048534385
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Guys
  How do you reload an index. I have a webapp which might need to be
redeployed but whenever i test FSDirectory.list(), nothing is returned.  The
segments and .cfs file is in the directory but those aren't recognized
either.

-- 

"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_97368_18375657.1161048534385--

From java-user-return-24069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 02:56:04 2006
Return-Path: <java-user-return-24069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50792 invoked from network); 17 Oct 2006 02:56:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 02:56:03 -0000
Received: (qmail 49452 invoked by uid 500); 17 Oct 2006 02:55:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48739 invoked by uid 500); 17 Oct 2006 02:55:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48728 invoked by uid 99); 17 Oct 2006 02:55:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 19:55:56 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ekemokai@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO nz-out-0102.google.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 19:55:56 -0700
Received: by nz-out-0102.google.com with SMTP id k1so619913nzf
        for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 19:55:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ejBiStZ44t95XAHA6UKfV8YBT5J9ee086MAUqgyb7vsDyvUoPJ4OcrjhAfw+4OYRRO15+75M454bWOTdW2mi3czQLAE/2F1Dxb4b6vamUKAGaDwaal1P3u9y7PDHrbyZki5ByiurMcSmUVqDqQKsyR9Vr7qjdiHJUK7vJLU1d08=
Received: by 10.65.220.15 with SMTP id x15mr11308123qbq;
        Mon, 16 Oct 2006 19:55:35 -0700 (PDT)
Received: by 10.65.158.7 with HTTP; Mon, 16 Oct 2006 19:55:35 -0700 (PDT)
Message-ID: <dac893430610161955ld4b0365ya4bacc46e6b98745@mail.gmail.com>
Date: Mon, 16 Oct 2006 22:55:35 -0400
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: reading indice
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_98059_887519.1161053735203"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_98059_887519.1161053735203
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can someone tell me how read an index into memory, or how to open an
existing index for reading?

-- 
"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_98059_887519.1161053735203--

From java-user-return-24070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 03:56:52 2006
Return-Path: <java-user-return-24070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63816 invoked from network); 17 Oct 2006 03:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 03:56:51 -0000
Received: (qmail 24630 invoked by uid 500); 17 Oct 2006 03:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24603 invoked by uid 500); 17 Oct 2006 03:56:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24592 invoked by uid 99); 17 Oct 2006 03:56:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 20:56:44 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heritrix.lucene@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 20:56:43 -0700
Received: by py-out-1112.google.com with SMTP id i49so2066400pyi
        for <java-user@lucene.apache.org>; Mon, 16 Oct 2006 20:56:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uRlNXF1We/mOd0AhzJUmjgfgTD67kxJ2aV5mi43Ak9v563Y/GvvMmzlcPVl+jASGEEEh5ftbu0Mte40dpVOHf0Up5OJQZJIaMLc6HnGtIvqv6UjcaPJSlZBSr6qj3s7YJcwR4UMwkWnniO1hCEjeZIUIvRqneRNgOMU8lNWGwnQ=
Received: by 10.35.99.6 with SMTP id b6mr14317303pym;
        Mon, 16 Oct 2006 20:50:19 -0700 (PDT)
Received: by 10.35.62.10 with HTTP; Mon, 16 Oct 2006 20:50:18 -0700 (PDT)
Message-ID: <a36516400610162050y1367c37ey298b6c498122da1e@mail.gmail.com>
Date: Tue, 17 Oct 2006 09:20:18 +0530
From: heritrix.lucene <heritrix.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reading indice
In-Reply-To: <dac893430610161955ld4b0365ya4bacc46e6b98745@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102528_19583814.1161057018906"
References: <dac893430610161955ld4b0365ya4bacc46e6b98745@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_102528_19583814.1161057018906
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Read

*org.apache.lucene.index.IndexReader *And
*org.apache.lucene.search.IndexSearcher

There are description available in these docs.



*


On 10/17/06, EDMOND KEMOKAI <ekemokai@gmail.com> wrote:
>
> Can someone tell me how read an index into memory, or how to open an
> existing index for reading?
>
> --
> "talk trash and carry a small stick."
> PAUL KRUGMAN (NYT)
>
>

------=_Part_102528_19583814.1161057018906--

From java-user-return-24071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 09:44:08 2006
Return-Path: <java-user-return-24071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72237 invoked from network); 17 Oct 2006 09:44:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 09:44:08 -0000
Received: (qmail 40177 invoked by uid 500); 17 Oct 2006 09:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40142 invoked by uid 500); 17 Oct 2006 09:44:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40131 invoked by uid 99); 17 Oct 2006 09:44:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 02:44:01 -0700
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.86.4.25] (HELO web7606.mail.in.yahoo.com) (202.86.4.25)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Oct 2006 02:43:59 -0700
Received: (qmail 14095 invoked by uid 60001); 17 Oct 2006 09:43:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=axx2Nc78PMu0K4i5HUWOiQNVB+7elTBA2CPlkdqGPZ7K3sMLjfKqWQcHnP3daOBzWEC7HFaPvLe3mNxPkNXeX4nNNIHHcByDHH+vjpJ/3waMAAeuDJvNfwpKj2wCkk+2IrIkIzlOLzQ4+lP1spnjFNC8IwYazjc+oeS9Qp+ky/I=  ;
Message-ID: <20061017094332.14093.qmail@web7606.mail.in.yahoo.com>
Received: from [220.225.42.205] by web7606.mail.in.yahoo.com via HTTP; Tue, 17 Oct 2006 10:43:32 BST
Date: Tue, 17 Oct 2006 10:43:32 +0100 (BST)
From: Mukesh Bhardwaj <sbmukesh@yahoo.co.in>
Subject: Which field cause a hit in multifield query
To: java-user@lucene.apache.org
In-Reply-To: <dac893430610161955ld4b0365ya4bacc46e6b98745@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-88674243-1161078212=:9243"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-88674243-1161078212=:9243
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
If I do a search such as "field1:jim OR field2:bob" is there any way to
determine for each document that was a hit, which field caused the hit?

Or rather, since they both might, is there any easy way to find out
which fields definitely cause a hit?

Regards,
  --Mukesh


 				
---------------------------------
 Find out what India is talking about on  - Yahoo! Answers India 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-88674243-1161078212=:9243--

From java-user-return-24072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 12:13:54 2006
Return-Path: <java-user-return-24072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16695 invoked from network); 17 Oct 2006 12:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 12:13:53 -0000
Received: (qmail 39555 invoked by uid 500); 17 Oct 2006 12:13:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39524 invoked by uid 500); 17 Oct 2006 12:13:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39513 invoked by uid 99); 17 Oct 2006 12:13:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 05:13:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a9.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 05:13:43 -0700
Received: from [192.168.0.2] (syru77-179.syr.edu [128.230.77.179])
	by spunkymail-a9.dreamhost.com (Postfix) with ESMTP id DEF3D20A17
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 05:13:20 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20061017094332.14093.qmail@web7606.mail.in.yahoo.com>
References: <20061017094332.14093.qmail@web7606.mail.in.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5A2AE467-9E8E-4A9C-B10D-1F6A65FCA757@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Which field cause a hit in multifield query
Date: Tue, 17 Oct 2006 08:13:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Take a look at the explain functionality on the Searcher


On Oct 17, 2006, at 5:43 AM, Mukesh Bhardwaj wrote:

> Hi,
> If I do a search such as "field1:jim OR field2:bob" is there any  
> way to
> determine for each document that was a hit, which field caused the  
> hit?
>
> Or rather, since they both might, is there any easy way to find out
> which fields definitely cause a hit?
>
> Regards,
>   --Mukesh
>
>
>  				
> ---------------------------------
>  Find out what India is talking about on  - Yahoo! Answers India
>  Send FREE SMS to your friend's mobile from Yahoo! Messenger  
> Version 8. Get it NOW

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 12:50:38 2006
Return-Path: <java-user-return-24073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30430 invoked from network); 17 Oct 2006 12:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 12:50:37 -0000
Received: (qmail 20496 invoked by uid 500); 17 Oct 2006 12:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20463 invoked by uid 500); 17 Oct 2006 12:50:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20452 invoked by uid 99); 17 Oct 2006 12:50:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 05:50:30 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.195] (HELO web36403.mail.mud.yahoo.com) (209.191.91.195)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Oct 2006 05:50:29 -0700
Received: (qmail 2605 invoked by uid 60001); 17 Oct 2006 12:50:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=KuOshsXTDOgEac9lN4K29WnjrYyKkGbt7hmLPzNe8D5iaAl9wi4QxBpYF4L5g1Mxp+uy16NqaW/jdoJkv953m74fiHN5e5djvE3r6/2V1PU5s4TMzBXGyxUe04PD55MobUA1P6FluLYhq4InFEOvCghl7hN0/2Wc860XyytPRKg=  ;
Message-ID: <20061017125009.2603.qmail@web36403.mail.mud.yahoo.com>
Received: from [208.210.219.130] by web36403.mail.mud.yahoo.com via HTTP; Tue, 17 Oct 2006 05:50:09 PDT
Date: Tue, 17 Oct 2006 05:50:09 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Re: PrefixFilter and WildcardQuery
To: java-user@lucene.apache.org
In-Reply-To: <359a92830610161815x2f322af9x9329bb5986416024@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1556409505-1161089409=:1930"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1556409505-1161089409=:1930
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks for all your help. 
   
  I used PrefixFilter, ChainedFilter, CachingWrapperFilter, ConstantScoreQuery and the search speed has been dramatically improved. I am just doing wildcard search like abc*. 
   
  It used to give me OOM problem with WildcardQuery. Will I get the same problem with the new approach. Is the PrefixFilter designed to take care of OOM problem due to expanding of the boolean queries.
   
  Thanks,
  -Vasu

Erick Erickson <erickerickson@gmail.com> wrote:
  Well, depending on what you mean by wildcard, a prefixfilter isn't
necessarily what you want. If wildcard means abc*, then prefixfilter is
right. If it means ab*cd?fg, a prefix filter isn't useful unless you want to
do some fancy indexing.

Think about writing your own filter. Wrap it in a ConstantScoreQuery and put
as many of these together in a BooleanQuery as you want, anding and oring
and notting as you see fit.

It's a good thing you don't want scoring, since ConstantScoreQueriy doesn't
support it .

You could also do something similar with regular expressions (there are
classes to support this in the 1.9 API, contrib section).

There's also CachingWrapperFilter if you think your filters will be re-used.

Here's an example of a wildcard filter (Lucene 1.9) ...

public class WildcardTermFilter
extends Filter {
private static final long serialVersionUID = 1L;


protected BitSet bits = null;
private String field;
private String value;

public WildcardTermFilter(String field, String value) {
this.field = field;
this.value = value;
}

public BitSet bits(IndexReader reader)
throws IOException {
bits = new BitSet(reader.maxDoc());

TermDocs termDocs = reader.termDocs();
WildcardTermEnum wildEnum = new WildcardTermEnum(reader, new
Term(field, value));

for (Term term = null; (term = wildEnum.term()) != null;
wildEnum.next()) {
termDocs.seek(term);

while (termDocs.next()) {
bits.set(termDocs.doc());
}
}

return bits;
}
}

Hope this helps
Erick

On 10/16/06, vasu shah wrote:
>
> Hi,
>
> I have have multiple fields that I need to search on. All these fields
> need to support wildcard search. I am ANDing these search fields using
> BooleanQuery. There is no need for score in my search.
>
> How do I implement these. I have seen PrefixFilter and it sounds
> promising. But then how do I implement search for multiple fields (AND) and
> using PrefixFilter. I could not find any discussion related to these.
>
> Any help would be highly appreciated.
>
> Thanks,
> -Vasu
>
>
> ---------------------------------
> Do you Yahoo!?
> Everyone is raving about the all-new Yahoo! Mail.
>


 		
---------------------------------
Stay in the know. Pulse on the new Yahoo.com.  Check it out. 
--0-1556409505-1161089409=:1930--

From java-user-return-24074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 13:55:47 2006
Return-Path: <java-user-return-24074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58328 invoked from network); 17 Oct 2006 13:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 13:55:47 -0000
Received: (qmail 67424 invoked by uid 500); 17 Oct 2006 13:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67389 invoked by uid 500); 17 Oct 2006 13:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67378 invoked by uid 99); 17 Oct 2006 13:55:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 06:55:38 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of isaacrc82@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 06:55:35 -0700
Received: by ug-out-1314.google.com with SMTP id k40so996054ugc
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 06:55:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=GgMgOP5vZQLsFgvT2yAXQ/ydqJtA8aAi5FYAcMWMKd6TwNTusZ69YWRyFHpmZnXCRPxy601iOJBbhC6BwlTZrc2zfdg7CtE9QoCIQzrKL8q/atA3FAnMocZczJYcEpqfctfY2lhKm1WiITlDO3q4UNUYygu26QJIsU6f+huRCeE=
Received: by 10.67.21.11 with SMTP id y11mr9811972ugi;
        Tue, 17 Oct 2006 06:55:11 -0700 (PDT)
Received: by 10.66.232.5 with HTTP; Tue, 17 Oct 2006 06:55:11 -0700 (PDT)
Message-ID: <bf1404350610170655gdee892ese982e205dfdbd90a@mail.gmail.com>
Date: Tue, 17 Oct 2006 08:55:11 -0500
From: "Ariel Isaac Romero Cartaya" <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Big problem with big indexes
Cc: erickerickson@gmail.com
In-Reply-To: <359a92830610111737l64ca6a4do16f58bae898d334a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_142447_30060081.1161093311688"
References: <bf1404350610111436t36d5817j47399c90bad53795@mail.gmail.com>
	 <359a92830610111737l64ca6a4do16f58bae898d334a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_142447_30060081.1161093311688
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here are pieces of my source code:

First of all, I search in all the indexes given a query String with a
parallel searcher. As you can see I make a multi field query. Then you can
see the index format I use, I store in the index all the fields. My index is
optimized.

          public  Hits search(String query) throws IOException  {

        AnalyzerHandler analizer = new AnalyzerHandler();
        Query pquery = null;

        try {
            pquery = MultiFieldQueryParser.parse(query, new String[]
{"title", "sumary", "filename", "content", "author"}, analizer.getAnalyzer
());
        } catch (ParseException e1) {
            e1.printStackTrace();
        }

        Searchable[] searchables = new Searchable[IndexCount];

        for (int i = 0; i < IndexCount; i++) {
            searchables[i] = new IndexSearcher(RAMIndexsManager.getInstance
().getDirectoryAt(i));
        }

        Searcher parallelSearcher = new ParallelMultiSearcher(searchables);

        return parallelSearcher.search(pquery);


      }

Then in another method I obtain the fragment where the term occur, As you
can see I use an EnglisAnalyzer that filter stopwords, stemming, synonims
detection ... :

    public Vector getResults(Hits h, String string) throws IOException{

        Vector ResultItems = new Vector();
        int cantHits = h.length();
        if (cantHits!=0){

            QueryParser qparser = new QueryParser("content", new
AnalyzerHandler().getAnalyzer());
            Query query1 = null;
            try {
                query1 = qparser.parse(string);
            } catch (ParseException e1) {
                e1.printStackTrace();
            }

            QueryScorer scorer = new QueryScorer(query1);

            Highlighter highlighter = new Highlighter(scorer);

            Fragmenter fragmenter = new SimpleFragmenter(150);

            highlighter.setTextFragmenter(fragmenter);


            for (int i = 0; i < cantHits; i++) {

                org.apache.lucene.document.Document doc = h.doc(i);

                String filename = doc.get("filename");

                filename = filename.substring(filename.indexOf("/") + 1);

                String filepath  = doc.get("filepath");

                Integer id = new Integer(h.id(i));

                String score = (h.score(i))+ "";

                int fileSize = Integer.parseInt(doc.get("filesize"));

                String title = doc.get("title");
                String summary = doc.get("sumary");

                //fragment
                String body = h.doc(i).get("content");

                TokenStream stream =  new
EnglishAnalyzer().tokenStream("content",new StringReader(body));

                String[] fragment = highlighter.getBestFragments(stream,
body, 4);
                //fragment



                if (fragment.length == 0)  {
                    fragment = new String[1];
                    fragment[0] = "";
                }



                StringBuilder buffer = new StringBuilder();

                for (int I = 0; I < fragment.length; I++){
                    buffer.append(validateCad(fragment[I]) + "...\n");
                }

                String stringFragment = buffer.toString();

                ResultItem result = new ResultItem();
                        result.setFilename(fileName);
                        result.setFilepath(filePath);
                        result.setFilesize(filesize);
                        result.setScore(Double.parseDouble(score));
                        result.setFragment(fragment);
                        result.setId(new Integer(id));
                        result.setSummary(summary);
                        result.setTitle(title);
                        ResultItems.add(result);


                }
        }



        return ResultItems;
    }


So these are the principals methods that make search. Could you tell me if I
do something wrong or inefficient ?
As you can see I make a parallel search, I have a dual xeon machine with two
CPU hyperthreading 2,4 Ghz 512 RAM but when I make the parallel searcher I
can see in my command prompt on Linux that the 3 og my 4 cpu are always idle
while only one is working, why occur that if the parallel searcher must
saturate all the CPU of work.

I hope you can help me.

------=_Part_142447_30060081.1161093311688--

From java-user-return-24075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 14:38:43 2006
Return-Path: <java-user-return-24075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69874 invoked from network); 17 Oct 2006 14:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 14:38:43 -0000
Received: (qmail 55455 invoked by uid 500); 17 Oct 2006 14:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55410 invoked by uid 500); 17 Oct 2006 14:38:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55399 invoked by uid 99); 17 Oct 2006 14:38:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 07:38:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 07:38:29 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 1894747 for java-user@lucene.apache.org; Tue, 17 Oct 2006 16:38:07 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: Preventing merging by IndexWriter
Date: Tue, 17 Oct 2006 16:33:54 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Preventing merging by IndexWriter
Thread-Index: Acbx+OeZc+6noasyR+SuGPBdEOFRwA==
From: "Johan Stuyts" <j.stuyts@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

(I am using Lucene 2.0.0)

I have been looking at a way to use stable IDs with Lucene. The reason I
want this is so I can efficiently store and retrieve information outside
of Lucene for filtering search results. It looks like this is going to
require most of Lucene to be rewritten, so I gave up on that approach.

I have a new idea where I want the documents IDs to only change at a
specific moment instead of whenever Lucene choses to do so. This way the
document IDs remain stable and I can use these IDs in the external data.
I want to merge the segments of the index at a specific moment because
updating the external data to match the new document IDs is too
expensive to do continuously. At the moment that I want to merge the
segments of the index causing the document IDs to change, I can also
update my external data so the correct data is attached to the correct
Lucene document ID. If I understand correctly, merging only shifts
document IDs to remove deleted document IDs, so I can do the same
shifting with the external data by getting the set of deleted documents
before the merge.

I already set 'mergeFactor' and 'maxBufferedDocs' to very high values so
all documents of a batch will be stored in RAM. The problem I am facing
is that the IndexWriter merges the segments in RAM with the segments on
disk when I close the IndexWriter. What I need instead is that the
IndexWriter will create a new segment on disk containing the data from
the segment(s) in RAM. This way the document IDs of the exising disk
segments are not affected.

Creating a new segment instead of merging with the existing ones will
also cause lots of segments with a variable number of documents to be
created on disk, but I believe the IndexReader/IndexSearcher is able to
handle this. I only have to make sure that the number of segments does
not become to high (i.e. merge regularly) because this might cause 'too
many open files' errors.

So my questions are: is there a way to prevent the IndexWriter from
merging, forcing it to create a new segment for each indexing batch? And
if so, will it still be possible to merge the disk segments when I want
to?

Kind regards,

Johan Stuyts
Hippo=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 15:16:11 2006
Return-Path: <java-user-return-24076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87610 invoked from network); 17 Oct 2006 15:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 15:16:11 -0000
Received: (qmail 37013 invoked by uid 500); 17 Oct 2006 15:15:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36966 invoked by uid 500); 17 Oct 2006 15:15:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36937 invoked by uid 99); 17 Oct 2006 15:15:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:15:51 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:15:49 -0700
Received: by py-out-1112.google.com with SMTP id i49so2260863pyi
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 08:15:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pwq9ViGyIKnXDs1UlZaxiCbrWa96XtToxl6qIorxLJg1cj4rd9LOkM6na2gH3II/dKn5Vr/8RfnuS718+FhBtyS0yNel4+j3kZOSvEdBncQNBq1uzy1MWmUUY1a9qOtJP4oHxF9PCzd5PPekFo2ZvOfAiRNFRYG0NCaAftsdmjU=
Received: by 10.35.113.12 with SMTP id q12mr15503681pym;
        Tue, 17 Oct 2006 08:15:18 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 17 Oct 2006 08:15:18 -0700 (PDT)
Message-ID: <359a92830610170815m2647ba8dw1860cc2a1cfd692b@mail.gmail.com>
Date: Tue, 17 Oct 2006 11:15:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing merging by IndexWriter
In-Reply-To: <359a92830610170812r161f65a8j48449ddc13f0fac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_80613_7362213.1161098118618"
References: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local>
	 <359a92830610170812r161f65a8j48449ddc13f0fac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_80613_7362213.1161098118618
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ignore the bit about keeping the mappings, it's too tricky unless really
really necessary, since by virtue of updating the meta-data document, you'll
delete a document, thus perhaps changing the Lucene IDs.

I should proofread before hitting the "send" button <G>...

Erick

On 10/17/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Why go through all this effort when it's easy to make your own unique ID?
> Add a new field to each document "myuniqueid" and fill it in yourself. It'll
> never change then.
>
>
> The complex coordination way.
> To coordinate things, you could keep the last ID used (and maybe other
> information) in a unique doc. Remember that Lucene doesn't require that
> every doc has the same fields. So it's possible to keep meta-data in a
> document without ever getting that document confused with your "real"
> documents. You could even keep the lucene docID <-> your new ID mapping in
> this document if it would help. Imagine a doc like this...
>
> metadata (contains some dummy string to make finding this doc easy).
> lastuniqueid (contains the last document ID you assigned).
> mapping(contains, say, a bunch of strings of the form ####:@@@@ where the
> #### is the Lucene ID and @@@@ is your id) I suspect you don't really need
> this.
>
>
> Whenever you add documents to your index, read the meta-data document, use
> lastunieuqid + 1 for your new document, and write the meta-data document
> back.
>
>
> The easy coordination:
> Alternatively, at the beginning of an indexing run, just use a TermEnum to
> find the maximum already-used uniqueid and assign incremental IDs to new
> documents. I was surprised at how very quickly you can enumerate a field in
> a Lucene index. Look around at the various TermEnum classes to see if you
> can easily find the largest one rather than iterating all of the terms. This
> may not be a good idea if you're indexing small chunks often....
>
> Of course, I may misunderstand your problem space enough that this is
> useless. If so, please tell us the problem you're trying to solve and maybe
> wiser heads than mine will have better suggestions....
>
> Erick
>
> On 10/17/06, Johan Stuyts <j.stuyts@hippo.nl> wrote:
> >
> > Hi,
> >
> > (I am using Lucene 2.0.0)
> >
> > I have been looking at a way to use stable IDs with Lucene. The reason I
> > want this is so I can efficiently store and retrieve information outside
> > of Lucene for filtering search results. It looks like this is going to
> > require most of Lucene to be rewritten, so I gave up on that approach.
> >
> > I have a new idea where I want the documents IDs to only change at a
> > specific moment instead of whenever Lucene choses to do so. This way the
> >
> > document IDs remain stable and I can use these IDs in the external data.
> > I want to merge the segments of the index at a specific moment because
> > updating the external data to match the new document IDs is too
> > expensive to do continuously. At the moment that I want to merge the
> > segments of the index causing the document IDs to change, I can also
> > update my external data so the correct data is attached to the correct
> > Lucene document ID. If I understand correctly, merging only shifts
> > document IDs to remove deleted document IDs, so I can do the same
> > shifting with the external data by getting the set of deleted documents
> > before the merge.
> >
> > I already set 'mergeFactor' and 'maxBufferedDocs' to very high values so
> >
> > all documents of a batch will be stored in RAM. The problem I am facing
> > is that the IndexWriter merges the segments in RAM with the segments on
> > disk when I close the IndexWriter. What I need instead is that the
> > IndexWriter will create a new segment on disk containing the data from
> > the segment(s) in RAM. This way the document IDs of the exising disk
> > segments are not affected.
> >
> > Creating a new segment instead of merging with the existing ones will
> > also cause lots of segments with a variable number of documents to be
> > created on disk, but I believe the IndexReader/IndexSearcher is able to
> > handle this. I only have to make sure that the number of segments does
> > not become to high (i.e. merge regularly) because this might cause 'too
> > many open files' errors.
> >
> > So my questions are: is there a way to prevent the IndexWriter from
> > merging, forcing it to create a new segment for each indexing batch? And
> >
> > if so, will it still be possible to merge the disk segments when I want
> > to?
> >
> > Kind regards,
> >
> > Johan Stuyts
> > Hippo
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_80613_7362213.1161098118618--

From java-user-return-24077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 15:42:06 2006
Return-Path: <java-user-return-24077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96157 invoked from network); 17 Oct 2006 15:42:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 15:42:06 -0000
Received: (qmail 19355 invoked by uid 500); 17 Oct 2006 15:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19326 invoked by uid 500); 17 Oct 2006 15:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19295 invoked by uid 99); 17 Oct 2006 15:41:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:41:56 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of patrek@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:41:53 -0700
Received: by wx-out-0506.google.com with SMTP id s13so2153293wxc
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 08:41:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=VGy7zn/aiZz52I6biNagv4FmCcIq4a8isjeoMNdYVbzcMhCU+sG9LekYTtUnVhqm6oqQ7PIZLx9E8dmZjS3NKjyVV9hlvCiOQPLXCsQWsxBeK5Xngxfn/eAOa8+gvO7NafZ8yS9lUL0vgCT9ibc0ImoCdAZi4DUCNM5uL2oAcDM=
Received: by 10.70.100.14 with SMTP id x14mr13966587wxb;
        Tue, 17 Oct 2006 08:41:32 -0700 (PDT)
Received: by 10.70.13.9 with HTTP; Tue, 17 Oct 2006 08:41:32 -0700 (PDT)
Message-ID: <48b038c60610170841w53e3901o10f849aef7381085@mail.gmail.com>
Date: Tue, 17 Oct 2006 11:41:32 -0400
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Help with design
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_123125_2246552.1161099692241"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_123125_2246552.1161099692241
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I'm trying to come up with the best design for a problem.

I want to search texts for expressions that shouldn't be found in them.

My bad expressions list is quite stable. But the texts that I want to scan
change often.

Design I

Index my texts, and then loop on my expressions list to see if I can find
any of them in any of my texts.

I know how to build this design, but I dread rebuilding my index often with
my new/changed texts.


Design II
Index my expressions (usually 2-3 words long). Cut my to-be-checked-text in
sentences, then feed those sentences to lucene to see which are a match with
my expressions. But is it even possible to have a match such as:

sentence to check : "Il mange avec de faux amis." --> indexed info : "faux
amis"

In other word, how to go to answer the question: Does this sencence contains
any of those expressions ? Is it possible? How would I go about it?

Design III
?????

Thanks!

Patrick

------=_Part_123125_2246552.1161099692241--

From java-user-return-24078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 15:47:08 2006
Return-Path: <java-user-return-24078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97337 invoked from network); 17 Oct 2006 15:47:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 15:47:07 -0000
Received: (qmail 33838 invoked by uid 500); 17 Oct 2006 15:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33811 invoked by uid 500); 17 Oct 2006 15:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33800 invoked by uid 99); 17 Oct 2006 15:46:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:46:58 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:46:56 -0700
Received: by nf-out-0910.google.com with SMTP id b2so315597nfe
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 08:46:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=EH0xdAcUlV8iokO5e+Vl0IcXi1S2LnF+4jzEKEOUabHXQdLhipInD6UipocvbIR/vK1LUuxKgNR075qvS3QPYNRHYJOn5rEkja1N/rNJuTO0b8FpQVc3HQZX1KmKH+kyAok+aqxYK7IPdSRfGrzqefLo++ZaCHUjll/POEAKhmc=
Received: by 10.82.131.1 with SMTP id e1mr1531492bud;
        Tue, 17 Oct 2006 08:46:34 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Tue, 17 Oct 2006 08:46:34 -0700 (PDT)
Message-ID: <c68e39170610170846u28b8c0a3wbdf4836b3ed0d72@mail.gmail.com>
Date: Tue, 17 Oct 2006 11:46:34 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Preventing merging by IndexWriter
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local>
X-Google-Sender-Auth: 702019c17981059f
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/17/06, Johan Stuyts <j.stuyts@hippo.nl> wrote:
> So my questions are: is there a way to prevent the IndexWriter from
> merging, forcing it to create a new segment for each indexing batch?

Already done in the Lucene trunk:
http://issues.apache.org/jira/browse/LUCENE-672

Background:
http://www.gossamer-threads.com/lists/lucene/java-dev/39799#39799

> And
> if so, will it still be possible to merge the disk segments when I want
> to?

call optimize()

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 15:47:22 2006
Return-Path: <java-user-return-24079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97406 invoked from network); 17 Oct 2006 15:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 15:47:22 -0000
Received: (qmail 35396 invoked by uid 500); 17 Oct 2006 15:47:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35356 invoked by uid 500); 17 Oct 2006 15:47:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35345 invoked by uid 99); 17 Oct 2006 15:47:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:47:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:47:09 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id DE32E3CF1E3
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 08:49:32 -0700 (PDT)
X-Quarantine-ID: <sron-SI6NKGC>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id sron-SI6NKGC for <java-user@lucene.apache.org>;
	Tue, 17 Oct 2006 08:49:28 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 3C0CA3CF1E4
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 08:49:28 -0700 (PDT)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene 2.0.1 release date
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 17 Oct 2006 08:45:26 -0700
Message-ID: <392521EA2692A2418DF48C331E61E32522AE@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene 2.0.1 release date
Thread-Index: AcbwFDN1TOrlo5RxTsKXVCvu3C8qtAAonUlgAFJxYKA=
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think the idea is that 2.0.1 would be a patch-fix release from the
branch created at 2.0 release. This release would incorporate only
back-ported high-impact patches, where "high-impact" is defined by the
community. Certainly security vulnerabilities would be included. As Otis
said, to date, nobody seems to have raised any issues to that level.

2.1 will include all the patches and new features that have been
committed since 2.0; there've been a number of these. But releases are
done pretty ad hoc at this point and there hasn't been anyone that has
expressed strong interest in (i.e., lobbied for) a release.

There was a little discussion on this topic at the ApacheCon BOF. For a
number of reasons, the Lucene Java trunk has been kept "pretty stable",
with a relatively few number of large changes. This makes it relatively
safe for people to grab a snapshot of the trunk with less concern about
latent bugs. I don't know how many people/projects are doing this rather
than sticking with 2.0.

Keeping the trunk stable doesn't provide an obvious place to start
working on things that people may want to work on and share but at the
same time want to allow to percolate for a while. I think the concern is
that if we start doing this stuff on trunk now, people that are
accustomed to snapping from the trunk might be surprised, and not in a
good way. Nobody wants that.

So releases can be about both what people want (getting features out)
and allowing a bit more instability in trunk. That is, if the community
wants that.

Food for thought and/or discussion?

-----Original Message-----
From: George Aroush [mailto:george@aroush.net]=20
Sent: Sunday, October 15, 2006 5:15 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene 2.0.1 release date

Thanks for the reply Otis.

I looked at the CHANGES.txt file and saw quit a bit of changes.  For my
port
from Java to C#, I can't rely on the trunk code as it is (to my
knowledge)
changes on a monthly basic if not weekly.  What I need is an official
release so that I can use it as the port point.

Regards,

-- George Aroush


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Sunday, October 15, 2006 12:41 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date

I'd have to check CHANGES.txt, but I don't think that many bugs have
been
fixed and not that many new features added that anyone is itching for a
new
release.

Otis

----- Original Message ----
From: George Aroush <george@aroush.net>
To: java-dev@lucene.apache.org; java-user@lucene.apache.org
Sent: Saturday, October 14, 2006 10:32:47 AM
Subject: RE: Lucene 2.0.1 release date

Hi folks,

Sorry for reposting this question (see original email below) and this
time
to both mailing list.

If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
appreciate it very much.

As some of you may know, I am the porter of Lucene to Lucene.Net knowing
when 2.0.1 will be released will help me plan things out.

Regards,

-- George Aroush


-----Original Message-----
From: George Aroush [mailto:george@aroush.net]
Sent: Thursday, October 12, 2006 12:07 AM
To: java-dev@lucene.apache.org
Subject: Lucene 2.0.1 release date

Hi folks,

What's the plan for Lucene 2.0.1 release date?

Thanks!

-- George Aroush


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 15:54:48 2006
Return-Path: <java-user-return-24080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 584 invoked from network); 17 Oct 2006 15:54:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 15:54:48 -0000
Received: (qmail 58133 invoked by uid 500); 17 Oct 2006 15:54:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58107 invoked by uid 500); 17 Oct 2006 15:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58083 invoked by uid 99); 17 Oct 2006 15:54:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:54:35 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of findmath@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 08:54:29 -0700
Received: by nf-out-0910.google.com with SMTP id b2so317561nfe
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 08:54:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZE7/e5eb+h/TsgogetWAPXCjOGpwwCdMCzYBT/AQbakA1f+i5tQ12YfINwMnKtWDO45irupy4CXl23j4TJLH0ZnPn6s/qw/oM1EFLejD74Ai2tPTo8wXZjiyga0ZtpEXRB1GL/xMkRxbv7PhZboJ88/dWWRj/v7w+y7q7v2rIU4=
Received: by 10.82.120.15 with SMTP id s15mr1551666buc;
        Tue, 17 Oct 2006 08:54:07 -0700 (PDT)
Received: by 10.49.60.17 with HTTP; Tue, 17 Oct 2006 08:54:07 -0700 (PDT)
Message-ID: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com>
Date: Tue, 17 Oct 2006 10:54:07 -0500
From: "Find Me" <findmath@gmail.com>
To: java-user@lucene.apache.org, nutch-user@lucene.apache.org
Subject: near duplicates
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_178024_105693.1161100447449"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_178024_105693.1161100447449
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How to eliminate near duplicates from the index? Someone suggested that I
could look at the TermVectors and do a comparision to remove the duplicates.
One major problem with this is the structure of the document is no longer
important. Are there any obvious pitfalls? For example: Document A being a
subset of Document B but in no particular order.

Nutch's DeleteDuplicates class is useful only when the documents are
identical with respect to either URL or the content.

------=_Part_178024_105693.1161100447449--

From java-user-return-24081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:02:43 2006
Return-Path: <java-user-return-24081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4392 invoked from network); 17 Oct 2006 16:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:02:43 -0000
Received: (qmail 88598 invoked by uid 500); 17 Oct 2006 16:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88564 invoked by uid 500); 17 Oct 2006 16:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88475 invoked by uid 99); 17 Oct 2006 16:02:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:02:28 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yositunel@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:02:22 -0700
Received: by nz-out-0102.google.com with SMTP id k1so688020nzf
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 09:02:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DkXb6zNni88OMRHEEAb/z61CTmOK1kwAhWW99AxaACq+1oYh35ZK6CIZyapsa4z/fDFDnS85JUjFUfRcLk7KaOM6kgYEFucyPauf+FTnNyR9ZAcSa0yiHqpDGTsgAr1qnur8fc6DsytGMslrFVA36ateiC+zUQ5NXJXeY+CNH5w=
Received: by 10.65.20.3 with SMTP id x3mr12476153qbi;
        Tue, 17 Oct 2006 09:02:01 -0700 (PDT)
Received: by 10.65.151.3 with HTTP; Tue, 17 Oct 2006 09:02:01 -0700 (PDT)
Message-ID: <32ca66f90610170902x2a22002fkcf66667e95fac8cc@mail.gmail.com>
Date: Tue, 17 Oct 2006 12:02:01 -0400
From: "Rene Pineda" <yositunel@gmail.com>
To: java-user@lucene.apache.org
Subject: Oracle Text 10g... or NOT
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85105_10724240.1161100921622"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_85105_10724240.1161100921622
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi -

I'm currently looking into adding full text search capabilities to our
site.  While some threads in this list had the same basic question (RDBMS
full-text versus lucene), their configurations and conderns were different.
Here's my configuration

* RDBMS is Enteprise Oracle 10g
* RAC-enabled RDMBS
* Dual fiber chanel RAID-5 configuration
* 2-node cluster
* 8GB RAM/per node
* Dual 3.6GHz Intel CPU/per node
* 99% of the content to be indexed is stored in our RDBMS
* Largest table size today 3 Billion (with a B) records
* Average table size 3 Million records

The question is, then, should I use Oracle 10g's full text capabilities or
lucene?

Since we have the oracle enteprise license, cost is not an issue (oracle
text comes with it).    I was able to create a demo using lucene in less
than 1/2 day, and we're looking towards creating the same demo using oracle
10g's full text search capabilities

Some ppl in this list migrated from RDBMS to lucene because of:
* speed - lucene is faster
* RDBMS server off load (someone reported they offloaded 70% of db server
work)
* cost (they didn't have the enteprise oracle license)
* index size - lucene indexes are smaller
* while some people had question with interMedia, I didn't find much
information with the newer Oracle 10g's full text search capabilties

Any thoughts?  Thanks in advance.

------=_Part_85105_10724240.1161100921622--

From java-user-return-24082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:14:46 2006
Return-Path: <java-user-return-24082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7410 invoked from network); 17 Oct 2006 16:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:14:46 -0000
Received: (qmail 23263 invoked by uid 500); 17 Oct 2006 16:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23224 invoked by uid 500); 17 Oct 2006 16:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23213 invoked by uid 99); 17 Oct 2006 16:14:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:14:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:14:34 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 9691F3CF1FD
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 09:16:57 -0700 (PDT)
X-Quarantine-ID: <SdTeY+Bb1oF0>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id SdTeY+Bb1oF0 for <java-user@lucene.apache.org>;
	Tue, 17 Oct 2006 09:16:56 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 5AD453CA1F9
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 09:16:56 -0700 (PDT)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BooleanQuery.TooManyClauses exception
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 17 Oct 2006 09:12:55 -0700
Message-ID: <392521EA2692A2418DF48C331E61E32522B0@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery.TooManyClauses exception
Thread-Index: AcbxSpns21eiSgzxSW+tAdgjRwaARAAu5y+g
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene takes your date range, enumerates all the unique date/time values
in your corpus within that range, and then executes that query. So the
number of terms in your query is going to be equal to the number of
unique date/time values in the range.

The most common way of handling this is to not index the dates to a
higher precision than you need to support your query. If you're only
going to query down to days (and not the time of day within a date),
don't include the extra hours/minutes/seconds in the indexed field. You
can always put the higher precision value in a stored but unindexed
field if you want to retrieve it via the query results.

-----Original Message-----
From: Bushey, John [mailto:John.Bushey@pega.com]=20
Sent: Monday, October 16, 2006 10:44 AM
To: java-user@lucene.apache.org
Subject: BooleanQuery.TooManyClauses exception

Hi - Can someone explain the reason why I'm getting the TooManyClauses
exception?  I have a general understanding of the issue based on my
reading, but I don't understand the mechanics of the it.  Specifically
how is my query being expanded to cause this problem?  How am I
exceeding the default 1024 clauses?  My query looks like the following.

=20

pyLabel:(test) OR pyDescription:(test) AND ( pxCreateDateTime:[20060401
TO 20060901] )

=20

The problem only happens when my date range exceeds ~2 months.  The date
is indexed with more precision, but for my query purposes I only care
about the date and not the time stamp portion.  What can I do to solve
or mitigate this problem and be able to search a date range that spans
at least a year? Is setMaxClauseCount() a predictable solution?  How
would reducing the precision of my date during indexing help?

=20

=20

Thanks

John

=20

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:17:01 2006
Return-Path: <java-user-return-24083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8288 invoked from network); 17 Oct 2006 16:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:17:00 -0000
Received: (qmail 29975 invoked by uid 500); 17 Oct 2006 16:16:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29944 invoked by uid 500); 17 Oct 2006 16:16:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29931 invoked by uid 99); 17 Oct 2006 16:16:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:16:50 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:16:48 -0700
Received: by py-out-1112.google.com with SMTP id i49so2279740pyi
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 09:16:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Dqf8ckt4Fa8RjEEhId7gVIwgQsTi3gs0YclOEQN1Koyf//LtvOuJUpXSZX/tE/JiYIzaK4rLGuO2oMz7UFS4Rl+qdg8I7V2qcMcFAFu1sRuj/10yMB3CwDjiYFeqeQEGXltbNn0RmVsL4yB1nwT5bGw8l0LzbWPvSWah1Ya2YBc=
Received: by 10.35.18.4 with SMTP id v4mr15507343pyi;
        Tue, 17 Oct 2006 08:12:04 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 17 Oct 2006 08:12:04 -0700 (PDT)
Message-ID: <359a92830610170812r161f65a8j48449ddc13f0fac@mail.gmail.com>
Date: Tue, 17 Oct 2006 11:12:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing merging by IndexWriter
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_80521_9528729.1161097924114"
References: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_80521_9528729.1161097924114
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why go through all this effort when it's easy to make your own unique ID?
Add a new field to each document "myuniqueid" and fill it in yourself. It'll
never change then.


The complex coordination way.
To coordinate things, you could keep the last ID used (and maybe other
information) in a unique doc. Remember that Lucene doesn't require that
every doc has the same fields. So it's possible to keep meta-data in a
document without ever getting that document confused with your "real"
documents. You could even keep the lucene docID <-> your new ID mapping in
this document if it would help. Imagine a doc like this...

metadata (contains some dummy string to make finding this doc easy).
lastuniqueid (contains the last document ID you assigned).
mapping(contains, say, a bunch of strings of the form ####:@@@@ where the
#### is the Lucene ID and @@@@ is your id) I suspect you don't really need
this.


Whenever you add documents to your index, read the meta-data document, use
lastunieuqid + 1 for your new document, and write the meta-data document
back.


The easy coordination:
Alternatively, at the beginning of an indexing run, just use a TermEnum to
find the maximum already-used uniqueid and assign incremental IDs to new
documents. I was surprised at how very quickly you can enumerate a field in
a Lucene index. Look around at the various TermEnum classes to see if you
can easily find the largest one rather than iterating all of the terms. This
may not be a good idea if you're indexing small chunks often....

Of course, I may misunderstand your problem space enough that this is
useless. If so, please tell us the problem you're trying to solve and maybe
wiser heads than mine will have better suggestions....

Erick

On 10/17/06, Johan Stuyts <j.stuyts@hippo.nl> wrote:
>
> Hi,
>
> (I am using Lucene 2.0.0)
>
> I have been looking at a way to use stable IDs with Lucene. The reason I
> want this is so I can efficiently store and retrieve information outside
> of Lucene for filtering search results. It looks like this is going to
> require most of Lucene to be rewritten, so I gave up on that approach.
>
> I have a new idea where I want the documents IDs to only change at a
> specific moment instead of whenever Lucene choses to do so. This way the
> document IDs remain stable and I can use these IDs in the external data.
> I want to merge the segments of the index at a specific moment because
> updating the external data to match the new document IDs is too
> expensive to do continuously. At the moment that I want to merge the
> segments of the index causing the document IDs to change, I can also
> update my external data so the correct data is attached to the correct
> Lucene document ID. If I understand correctly, merging only shifts
> document IDs to remove deleted document IDs, so I can do the same
> shifting with the external data by getting the set of deleted documents
> before the merge.
>
> I already set 'mergeFactor' and 'maxBufferedDocs' to very high values so
> all documents of a batch will be stored in RAM. The problem I am facing
> is that the IndexWriter merges the segments in RAM with the segments on
> disk when I close the IndexWriter. What I need instead is that the
> IndexWriter will create a new segment on disk containing the data from
> the segment(s) in RAM. This way the document IDs of the exising disk
> segments are not affected.
>
> Creating a new segment instead of merging with the existing ones will
> also cause lots of segments with a variable number of documents to be
> created on disk, but I believe the IndexReader/IndexSearcher is able to
> handle this. I only have to make sure that the number of segments does
> not become to high (i.e. merge regularly) because this might cause 'too
> many open files' errors.
>
> So my questions are: is there a way to prevent the IndexWriter from
> merging, forcing it to create a new segment for each indexing batch? And
> if so, will it still be possible to merge the disk segments when I want
> to?
>
> Kind regards,
>
> Johan Stuyts
> Hippo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_80521_9528729.1161097924114--

From java-user-return-24084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:21:32 2006
Return-Path: <java-user-return-24084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9724 invoked from network); 17 Oct 2006 16:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:21:32 -0000
Received: (qmail 41587 invoked by uid 500); 17 Oct 2006 16:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41552 invoked by uid 500); 17 Oct 2006 16:21:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41502 invoked by uid 99); 17 Oct 2006 16:21:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:21:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:21:17 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1040473ugc
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 09:20:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=jfLoNZmtNtJ7+jrgFTV/wtefts5eMIZdtYo4mtLAbNk+g//D498TIw17T3q+qt5aq7PIeA5c5sLopGnS1VZVUnOemto4iIirioiGJm9+obhQjLsUgEjwhQpTPJaIJC0hNdATRqyDZbYOFi1eJFM9b6zZcTAb8AJMWqOXOhErNYo=
Received: by 10.67.93.7 with SMTP id v7mr10095280ugl;
        Tue, 17 Oct 2006 09:20:55 -0700 (PDT)
Received: from ?192.168.0.102? ( [83.249.40.19])
        by mx.google.com with ESMTP id k28sm352110ugd.2006.10.17.09.20.54;
        Tue, 17 Oct 2006 09:20:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <bf1404350610170655gdee892ese982e205dfdbd90a@mail.gmail.com>
References: <bf1404350610111436t36d5817j47399c90bad53795@mail.gmail.com> <359a92830610111737l64ca6a4do16f58bae898d334a@mail.gmail.com> <bf1404350610170655gdee892ese982e205dfdbd90a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <54862D69-9DBC-4C2B-838B-76E25A601C17@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Big problem with big indexes
Date: Tue, 17 Oct 2006 18:20:51 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


17 okt 2006 kl. 15.55 skrev Ariel Isaac Romero Cartaya:

> Here are pieces of my source code:

>          public  Hits search(String query) throws IOException  {

>        for (int i = 0; i < IndexCount; i++) {
>            searchables[i] = new IndexSearcher 
> (RAMIndexsManager.getInstance
> ().getDirectoryAt(i));

I didn't look further than this. You can initially try to reuse your  
IndexSearchers. That should help a lot.

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
IndexSearcher.html
"For performance reasons it is recommended to open only one  
IndexSearcher and use it for all of your searches."


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:37:45 2006
Return-Path: <java-user-return-24085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16659 invoked from network); 17 Oct 2006 16:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:37:45 -0000
Received: (qmail 88691 invoked by uid 500); 17 Oct 2006 16:37:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88660 invoked by uid 500); 17 Oct 2006 16:37:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88649 invoked by uid 99); 17 Oct 2006 16:37:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:37:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:37:31 -0700
Received: by nf-out-0910.google.com with SMTP id b2so328087nfe
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 09:37:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=eeB/xeJLTjgLBE+c1/+TJ9z7A435ZwMNTPxiwCV7zT5l1HCdxxQu4alAa9SMe0j21ts7tiuww0TNZxWquarIMrssPfyN/iEcRFQFXGQRy47b/iQyG7LKdrkXdsnruninDLnNffM3tVXD4igb/gzG+u5kP/485ZEEz+bJj6WD5c4=
Received: by 10.49.29.2 with SMTP id g2mr401540nfj;
        Tue, 17 Oct 2006 09:37:09 -0700 (PDT)
Received: from ?192.168.0.102? ( [83.249.40.19])
        by mx.google.com with ESMTP id z73sm2773741nfb.2006.10.17.09.37.05;
        Tue, 17 Oct 2006 09:37:08 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com>
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DEE280E6-4D34-4453-95B8-75A0AB160613@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: near duplicates
Date: Tue, 17 Oct 2006 18:36:56 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


17 okt 2006 kl. 17.54 skrev Find Me:

> How to eliminate near duplicates from the index?

I would probably try to measure the Ecludian distance between all  
documents, computed on terms and their positions. Or perhaps use  
standard deviation to find the distribution of terms in a document.  
One would based on the output from that try to find a threashold.  
Either way it will consume lots of CPU.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:37:55 2006
Return-Path: <java-user-return-24086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16739 invoked from network); 17 Oct 2006 16:37:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:37:55 -0000
Received: (qmail 89771 invoked by uid 500); 17 Oct 2006 16:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89740 invoked by uid 500); 17 Oct 2006 16:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89715 invoked by uid 99); 17 Oct 2006 16:37:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:37:42 -0700
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=RCVD_DOUBLE_IP_SPAM
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [208.253.57.99] (HELO uwamail.unitedway.org) (208.253.57.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:37:39 -0700
Received: from [10.100.8.1] by 10.100.8.99 with StormMail ESMTP id 11336.1575569382;
	Tue, 17 Oct 2006 12:21:46 -0400 (EDT)
Received: from UWMAIL.nt02.unitedway.org ([10.100.20.199]) by uwamail.nt02.unitedway.org with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 17 Oct 2006 12:38:07 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Oracle Text 10g... or NOT
Date: Tue, 17 Oct 2006 12:38:07 -0400
Message-ID: <5B99185C1E450E488073D0FDB8A25C73593B28@UWMAIL.nt02.unitedway.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Oracle Text 10g... or NOT
Thread-Index: AcbyBcenCLPj56aATFOBpZ9Y7t5evwAAeNg0
References: <32ca66f90610170902x2a22002fkcf66667e95fac8cc@mail.gmail.com>
From: "Bryzek.Michael" <Michael.Bryzek@uwa.unitedway.org>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Oct 2006 16:38:07.0901 (UTC) FILETIME=[A0437CD0:01C6F20A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We used Oracle interMedia/Text for search within the RDMS beginning with =
oracle 8i through oracle 10g. Two primary reasons we switched to =
solr/lucene:

  * We saw random errors (< .1% of the time) when users ran full text =
search. We believe the source of this error occurred during index update =
as users ran searches. Oracle support and our team never resolved this =
issue. We prefer to update our data set 2-4 times per hour and could =
never find a reliable way to do this with Oracle.

  * When we upgraded to Oracle 10g release 2, the frequency of these =
errors increased 10 fold and necessitated the change to another solution =
(Oracle support again could not diagnose root cause of our application =
errors). We first implemented Lucene, but then found Solr and have been =
extremely pleased. Solr offers the benefit of a standard XML HTTP API =
which allows us to expose search to all sorts of applications and =
partners with no additional effort.

We run oracle on redhat linux, so your mileage may vary. We also run =
standard edition one now, but oracle text was made part of this edition =
a few years ago.=20

In implementing, we've found a few other features that are quite nice:

  * If we change our indexing strategy (e.g. a new analyzer), we can =
stop the update process, index our data in a separate environment, =
transfer the new index datafiles to production, and restart the =
instance. You might be able to do full online rebuilds with Oracle Text, =
but with lucene it just a non issue.

  * Indexing is fast

  * Scaling search separate from RDBMS is a real blessing

-Mike


-----Original Message-----
From: Rene Pineda [mailto:yositunel@gmail.com]
Sent: Tue 10/17/06 12:02 PM
To: java-user@lucene.apache.org
Subject: Oracle Text 10g... or NOT
=20
Hi -

I'm currently looking into adding full text search capabilities to our
site.  While some threads in this list had the same basic question =
(RDBMS
full-text versus lucene), their configurations and conderns were =
different.
Here's my configuration

* RDBMS is Enteprise Oracle 10g
* RAC-enabled RDMBS
* Dual fiber chanel RAID-5 configuration
* 2-node cluster
* 8GB RAM/per node
* Dual 3.6GHz Intel CPU/per node
* 99% of the content to be indexed is stored in our RDBMS
* Largest table size today 3 Billion (with a B) records
* Average table size 3 Million records

The question is, then, should I use Oracle 10g's full text capabilities =
or
lucene?

Since we have the oracle enteprise license, cost is not an issue (oracle
text comes with it).    I was able to create a demo using lucene in less
than 1/2 day, and we're looking towards creating the same demo using =
oracle
10g's full text search capabilities

Some ppl in this list migrated from RDBMS to lucene because of:
* speed - lucene is faster
* RDBMS server off load (someone reported they offloaded 70% of db =
server
work)
* cost (they didn't have the enteprise oracle license)
* index size - lucene indexes are smaller
* while some people had question with interMedia, I didn't find much
information with the newer Oracle 10g's full text search capabilties

Any thoughts?  Thanks in advance.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:46:17 2006
Return-Path: <java-user-return-24087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20938 invoked from network); 17 Oct 2006 16:46:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:46:16 -0000
Received: (qmail 14488 invoked by uid 500); 17 Oct 2006 16:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14462 invoked by uid 500); 17 Oct 2006 16:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14451 invoked by uid 99); 17 Oct 2006 16:46:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:46:09 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:46:08 -0700
Received: by nf-out-0910.google.com with SMTP id b2so330069nfe
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 09:45:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:from:subject:date:to:x-mailer;
        b=C+EqqSMrtqdqcQoSndW4yrSiK/PF7eGccDojuhwzKdyS1st4SroWFh3BYTLMkRS8yJhlPjMtqYYVnhS60emxDmiNvztpm+90QuUOZHNGqoL46Dx/R9HStcUAd/5A8zPdrvwmwidukkNeRd0ZolpuLNUCMRBGFnMrNzuxrn0y/Rg=
Received: by 10.48.162.15 with SMTP id k15mr1913814nfe;
        Tue, 17 Oct 2006 09:45:46 -0700 (PDT)
Received: from ?192.168.0.102? ( [83.249.40.19])
        by mx.google.com with ESMTP id a24sm1697577nfc.2006.10.17.09.45.44;
        Tue, 17 Oct 2006 09:45:46 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com>
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-10-260217116
Message-Id: <A389DCB4-B00D-42EF-90A6-78D94EB06A04@gmail.com>
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: near duplicates
Date: Tue, 17 Oct 2006 18:45:27 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-10-260217116
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


17 okt 2006 kl. 17.54 skrev Find Me:

> How to eliminate near duplicates from the index?

Oh, one more thing. You should probably look at the norms in order to  
avoid comparing all documents to each other.


--Apple-Mail-10-260217116--

From java-user-return-24088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 16:58:08 2006
Return-Path: <java-user-return-24088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26665 invoked from network); 17 Oct 2006 16:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 16:58:08 -0000
Received: (qmail 42798 invoked by uid 500); 17 Oct 2006 16:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42753 invoked by uid 500); 17 Oct 2006 16:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42741 invoked by uid 99); 17 Oct 2006 16:58:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:58:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 09:57:57 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k9HGvlc15708
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 11:57:47 -0500
Message-ID: <45350B0F.7070109@getopt.org>
Date: Tue, 17 Oct 2006 18:55:43 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: near duplicates
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com> <DEE280E6-4D34-4453-95B8-75A0AB160613@gmail.com>
In-Reply-To: <DEE280E6-4D34-4453-95B8-75A0AB160613@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:
>
> 17 okt 2006 kl. 17.54 skrev Find Me:
>
>> How to eliminate near duplicates from the index?
>
> I would probably try to measure the Ecludian distance between all 
> documents, computed on terms and their positions. Or perhaps use 
> standard deviation to find the distribution of terms in a document. 
> One would based on the output from that try to find a threashold. 
> Either way it will consume lots of CPU.


There are better ways to achieve this. You need to create a fuzzy 
signature of the document, based on term histogram or shingles - take a 
look a the Signature framework in Nutch.

There is a substantial literature on this subject - go to Citeseer and 
run a search for "near duplicate detection".

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 17:02:04 2006
Return-Path: <java-user-return-24089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29815 invoked from network); 17 Oct 2006 17:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 17:02:04 -0000
Received: (qmail 52246 invoked by uid 500); 17 Oct 2006 17:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52216 invoked by uid 500); 17 Oct 2006 17:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52205 invoked by uid 99); 17 Oct 2006 17:01:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:01:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:01:53 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9HH1VZR032402
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 17:01:31 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9HH42oL3100904
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 19:04:02 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9HH1VKM007884
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 19:01:31 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9HH1V4b007879
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 19:01:31 +0200
In-Reply-To: <392521EA2692A2418DF48C331E61E32522B0@professorville.windows.esseff.org>
Subject: RE: BooleanQuery.TooManyClauses exception
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB80964A1.7293E3CA-ON8825720A.005A7B79-8825720A.005AC508@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 17 Oct 2006 08:31:26 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 17/10/2006 19:04:02
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See also relevant FAQ entry & Wiki page:

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831
  http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing

"Steven Parkes" <steven_parkes@esseff.org> wrote on 17/10/2006 09:12:55:

> Lucene takes your date range, enumerates all the unique date/time values
> in your corpus within that range, and then executes that query. So the
> number of terms in your query is going to be equal to the number of
> unique date/time values in the range.
>
> The most common way of handling this is to not index the dates to a
> higher precision than you need to support your query. If you're only
> going to query down to days (and not the time of day within a date),
> don't include the extra hours/minutes/seconds in the indexed field. You
> can always put the higher precision value in a stored but unindexed
> field if you want to retrieve it via the query results.
>
> -----Original Message-----
> From: Bushey, John [mailto:John.Bushey@pega.com]
> Sent: Monday, October 16, 2006 10:44 AM
> To: java-user@lucene.apache.org
> Subject: BooleanQuery.TooManyClauses exception
>
> Hi - Can someone explain the reason why I'm getting the TooManyClauses
> exception?  I have a general understanding of the issue based on my
> reading, but I don't understand the mechanics of the it.  Specifically
> how is my query being expanded to cause this problem?  How am I
> exceeding the default 1024 clauses?  My query looks like the following.
>
>
>
> pyLabel:(test) OR pyDescription:(test) AND ( pxCreateDateTime:[20060401
> TO 20060901] )
>
>
>
> The problem only happens when my date range exceeds ~2 months.  The date
> is indexed with more precision, but for my query purposes I only care
> about the date and not the time stamp portion.  What can I do to solve
> or mitigate this problem and be able to search a date range that spans
> at least a year? Is setMaxClauseCount() a predictable solution?  How
> would reducing the precision of my date during indexing help?
>
>
>
>
>
> Thanks
>
> John
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 17:57:44 2006
Return-Path: <java-user-return-24090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52404 invoked from network); 17 Oct 2006 17:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 17:57:44 -0000
Received: (qmail 18731 invoked by uid 500); 17 Oct 2006 17:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18694 invoked by uid 500); 17 Oct 2006 17:57:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18683 invoked by uid 99); 17 Oct 2006 17:57:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:57:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [198.22.153.39] (HELO EXCHCLUSTUSA.pega.com) (198.22.153.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 10:57:33 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BooleanQuery.TooManyClauses exception
Date: Tue, 17 Oct 2006 13:57:10 -0400
Message-ID: <D867A529C569F64BAC09C622E55B408401F620B2@EXCHCLUSTUSA.rpega.com>
In-Reply-To: <392521EA2692A2418DF48C331E61E32522B0@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery.TooManyClauses exception
Thread-Index: AcbxSpns21eiSgzxSW+tAdgjRwaARAAu5y+gAANQboA=
From: "Bushey, John" <John.Bushey@pega.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks.  That's the explanation that I was looking for.  The WIKI does
not cover this in much detail. The architectural reason for this sounds
strange to me since my background is in relational databases where this
is not an issue so I still have a question. How does reducing the
precision really help?  Does Lucene track the max length of the indexed
value and use that to enumerate all the unique date/time values for the
query?  In my case I have done nothing special to index my dates.  I
just treat them as a string of numbers.


-----Original Message-----
From: Steven Parkes [mailto:steven_parkes@esseff.org]=20
Sent: Tuesday, October 17, 2006 12:13 PM
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses exception

Lucene takes your date range, enumerates all the unique date/time values
in your corpus within that range, and then executes that query. So the
number of terms in your query is going to be equal to the number of
unique date/time values in the range.

The most common way of handling this is to not index the dates to a
higher precision than you need to support your query. If you're only
going to query down to days (and not the time of day within a date),
don't include the extra hours/minutes/seconds in the indexed field. You
can always put the higher precision value in a stored but unindexed
field if you want to retrieve it via the query results.

-----Original Message-----
From: Bushey, John [mailto:John.Bushey@pega.com]=20
Sent: Monday, October 16, 2006 10:44 AM
To: java-user@lucene.apache.org
Subject: BooleanQuery.TooManyClauses exception

Hi - Can someone explain the reason why I'm getting the TooManyClauses
exception?  I have a general understanding of the issue based on my
reading, but I don't understand the mechanics of the it.  Specifically
how is my query being expanded to cause this problem?  How am I
exceeding the default 1024 clauses?  My query looks like the following.

=20

pyLabel:(test) OR pyDescription:(test) AND ( pxCreateDateTime:[20060401
TO 20060901] )

=20

The problem only happens when my date range exceeds ~2 months.  The date
is indexed with more precision, but for my query purposes I only care
about the date and not the time stamp portion.  What can I do to solve
or mitigate this problem and be able to search a date range that spans
at least a year? Is setMaxClauseCount() a predictable solution?  How
would reducing the precision of my date during indexing help?

=20

=20

Thanks

John

=20

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 18:15:24 2006
Return-Path: <java-user-return-24091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62288 invoked from network); 17 Oct 2006 18:15:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:15:23 -0000
Received: (qmail 60700 invoked by uid 500); 17 Oct 2006 18:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60669 invoked by uid 500); 17 Oct 2006 18:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60658 invoked by uid 99); 17 Oct 2006 18:15:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:15:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.104.95.27] (HELO leasing.marketingbrokers.com) (66.104.95.27)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Oct 2006 11:15:14 -0700
Received: from ip66-104-95-25.z95-104-66.customer.algx.net ([66.104.95.25])
          by leasing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 808
          for <java-user@lucene.apache.org>;
          Tue, 17 Oct 2006 11:00:34 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <D867A529C569F64BAC09C622E55B408401F620B2@EXCHCLUSTUSA.rpega.com>
References: <D867A529C569F64BAC09C622E55B408401F620B2@EXCHCLUSTUSA.rpega.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9ae195da31c2147dac0f4638404111ad@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: Peter W. <peter@marketingbrokers.com>
Subject: Re: BooleanQuery.TooManyClauses exception
Date: Tue, 17 Oct 2006 11:14:31 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Another solution is work with plain java dates and calendar objects, 
convert into Lucene strings
using DateTools (resolution day) then query this field with two 
RangeFilters using ChainedFilter.

You will never get the BooleanQuery error.

Peter


On Oct 17, 2006, at 10:57 AM, Bushey, John wrote:

> How does reducing the
> precision really help?  Does Lucene track the max length of the indexed
> value and use that to enumerate all the unique date/time values for the
> query?  In my case I have done nothing special to index my dates.  I
> just treat them as a string of numbers.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 18:17:22 2006
Return-Path: <java-user-return-24092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62581 invoked from network); 17 Oct 2006 18:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:17:22 -0000
Received: (qmail 66724 invoked by uid 500); 17 Oct 2006 18:17:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66685 invoked by uid 500); 17 Oct 2006 18:17:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66674 invoked by uid 99); 17 Oct 2006 18:17:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:17:14 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:17:12 -0700
Received: by nz-out-0102.google.com with SMTP id k1so670nzf
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 11:16:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kVYgYnd7WqNC7Zx3DOXN2q3i3cFF/QgNOuKA4DbMY9t65pRNXD3d87Fi+QljvnUoEc5Nv/c2u8c+DWeq8cMcO8FaXvoDdYSM+bOieGKH+itu7dDpX2oQSb4Lbw0CYiJFcC8no9rr7/mez/fu8yjjjIbX8LEFgcV906Ckq+/WdLc=
Received: by 10.35.96.7 with SMTP id y7mr15797899pyl;
        Tue, 17 Oct 2006 11:16:51 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 17 Oct 2006 11:16:51 -0700 (PDT)
Message-ID: <359a92830610171116h3c23500bv78ebf55a851e73a6@mail.gmail.com>
Date: Tue, 17 Oct 2006 14:16:51 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery.TooManyClauses exception
In-Reply-To: <D867A529C569F64BAC09C622E55B408401F620B2@EXCHCLUSTUSA.rpega.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83870_11652109.1161109011468"
References: <392521EA2692A2418DF48C331E61E32522B0@professorville.windows.esseff.org>
	 <D867A529C569F64BAC09C622E55B408401F620B2@EXCHCLUSTUSA.rpega.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_83870_11652109.1161109011468
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Under the covers, as I understand it, a BooleanQuery is assembled for each
unique term in the range. So, if you store your dates with milliseconds,
there can be, what, 86,000,000+ unique terms per day. If you stored your
times as strings to millisecond resolution, you can have a lot of clauses in
the boolean query, whereas with day resolution, you only would have one at
most. Again, as I understand it, this is tied Lucene's way of scoring
documents for relevance.

An RDBMS really doesn't care about scoring, it's either "it's there or it's
not". That functionality is supplied in Lucene by Filters, which bypass
scoring (e.g. by using ConstantScoreQuery).

BTW, this also applies to other "expanding" queries, like PrefixQuery,
WildcardQuery, etc.

Erick

On 10/17/06, Bushey, John <John.Bushey@pega.com> wrote:
>
> Thanks.  That's the explanation that I was looking for.  The WIKI does
> not cover this in much detail. The architectural reason for this sounds
> strange to me since my background is in relational databases where this
> is not an issue so I still have a question. How does reducing the
> precision really help?  Does Lucene track the max length of the indexed
> value and use that to enumerate all the unique date/time values for the
> query?  In my case I have done nothing special to index my dates.  I
> just treat them as a string of numbers.
>
>
> -----Original Message-----
> From: Steven Parkes [mailto:steven_parkes@esseff.org]
> Sent: Tuesday, October 17, 2006 12:13 PM
> To: java-user@lucene.apache.org
> Subject: RE: BooleanQuery.TooManyClauses exception
>
> Lucene takes your date range, enumerates all the unique date/time values
> in your corpus within that range, and then executes that query. So the
> number of terms in your query is going to be equal to the number of
> unique date/time values in the range.
>
> The most common way of handling this is to not index the dates to a
> higher precision than you need to support your query. If you're only
> going to query down to days (and not the time of day within a date),
> don't include the extra hours/minutes/seconds in the indexed field. You
> can always put the higher precision value in a stored but unindexed
> field if you want to retrieve it via the query results.
>
> -----Original Message-----
> From: Bushey, John [mailto:John.Bushey@pega.com]
> Sent: Monday, October 16, 2006 10:44 AM
> To: java-user@lucene.apache.org
> Subject: BooleanQuery.TooManyClauses exception
>
> Hi - Can someone explain the reason why I'm getting the TooManyClauses
> exception?  I have a general understanding of the issue based on my
> reading, but I don't understand the mechanics of the it.  Specifically
> how is my query being expanded to cause this problem?  How am I
> exceeding the default 1024 clauses?  My query looks like the following.
>
>
>
> pyLabel:(test) OR pyDescription:(test) AND ( pxCreateDateTime:[20060401
> TO 20060901] )
>
>
>
> The problem only happens when my date range exceeds ~2 months.  The date
> is indexed with more precision, but for my query purposes I only care
> about the date and not the time stamp portion.  What can I do to solve
> or mitigate this problem and be able to search a date range that spans
> at least a year? Is setMaxClauseCount() a predictable solution?  How
> would reducing the precision of my date during indexing help?
>
>
>
>
>
> Thanks
>
> John
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_83870_11652109.1161109011468--

From java-user-return-24093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 18:30:16 2006
Return-Path: <java-user-return-24093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67524 invoked from network); 17 Oct 2006 18:30:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:30:16 -0000
Received: (qmail 97174 invoked by uid 500); 17 Oct 2006 18:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97148 invoked by uid 500); 17 Oct 2006 18:30:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97137 invoked by uid 99); 17 Oct 2006 18:30:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:30:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:30:06 -0700
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id B93993CF35D
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 11:32:30 -0700 (PDT)
X-Quarantine-ID: <NfvR1LsOsshq>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NfvR1LsOsshq for <java-user@lucene.apache.org>;
	Tue, 17 Oct 2006 11:32:29 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 0CCFC3CF352
	for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 11:32:29 -0700 (PDT)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BooleanQuery.TooManyClauses exception
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 17 Oct 2006 11:29:44 -0700
Message-ID: <392521EA2692A2418DF48C331E61E32522B1@professorville.windows.esseff.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery.TooManyClauses exception
Thread-Index: AcbxSpns21eiSgzxSW+tAdgjRwaARAAu5y+gAANQboAAAOktEA==
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All has to do with the total focus on strings in an inverted index, as
opposed to the more general model in an RDBMS.

Lucene doesn't need to track the max length. It sees each date as a
string and understands all string intervals lexicographically. That
means 20060401 is less than 20060401HHMMSS for any HHMMSS (equal, if
there is none). This is basically the same ordering as saying "base"
sorts less than "baseball": if one term is a prefix for another, it is
"less than".

Given this ordering, when you ask for DATE TO DATE, Lucene first finds
all tokens in your index within that range and uses that list to compose
a boolean query, which it then executes. With resolution down to
seconds, that can be an awful lot of tokens. If you do resolution down
to days, you know you'll have no more than 365 tokens a year.

Does raise a subtle issue I glossed over, which is that your range query
might not actually getting what you think (depending, of course, on what
you think). You say "TO 20060901", but since 20060901HHMMSS is larger
than 20060901 for any HHMMSS, you're only getting dates up to
20060831HHMMSS (unless you have dates that don't have a time part, which
might then be included.)

The wiki page Doron mentioned,
http://wiki.apache.org/jakarta-lucene/LargeScaleDateRangeProcessing,
does talk about this a bit more. You can add multiple fields so you can
query arbitrary date ranges without things blowing up. For example, if
you wanted to do July 15, 2004 through July 15, 2006, using the coding
in the wiki, instead of doing one query, you could look for all dates by
year in 05, by month in the whole months in 04 and 06, and then by day
in the partial months.

As others have mentioned, there are filters, too.

-----Original Message-----
From: Bushey, John [mailto:John.Bushey@pega.com]=20
Sent: Tuesday, October 17, 2006 10:57 AM
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses exception

Thanks.  That's the explanation that I was looking for.  The WIKI does
not cover this in much detail. The architectural reason for this sounds
strange to me since my background is in relational databases where this
is not an issue so I still have a question. How does reducing the
precision really help?  Does Lucene track the max length of the indexed
value and use that to enumerate all the unique date/time values for the
query?  In my case I have done nothing special to index my dates.  I
just treat them as a string of numbers.


-----Original Message-----
From: Steven Parkes [mailto:steven_parkes@esseff.org]=20
Sent: Tuesday, October 17, 2006 12:13 PM
To: java-user@lucene.apache.org
Subject: RE: BooleanQuery.TooManyClauses exception

Lucene takes your date range, enumerates all the unique date/time values
in your corpus within that range, and then executes that query. So the
number of terms in your query is going to be equal to the number of
unique date/time values in the range.

The most common way of handling this is to not index the dates to a
higher precision than you need to support your query. If you're only
going to query down to days (and not the time of day within a date),
don't include the extra hours/minutes/seconds in the indexed field. You
can always put the higher precision value in a stored but unindexed
field if you want to retrieve it via the query results.

-----Original Message-----
From: Bushey, John [mailto:John.Bushey@pega.com]=20
Sent: Monday, October 16, 2006 10:44 AM
To: java-user@lucene.apache.org
Subject: BooleanQuery.TooManyClauses exception

Hi - Can someone explain the reason why I'm getting the TooManyClauses
exception?  I have a general understanding of the issue based on my
reading, but I don't understand the mechanics of the it.  Specifically
how is my query being expanded to cause this problem?  How am I
exceeding the default 1024 clauses?  My query looks like the following.

=20

pyLabel:(test) OR pyDescription:(test) AND ( pxCreateDateTime:[20060401
TO 20060901] )

=20

The problem only happens when my date range exceeds ~2 months.  The date
is indexed with more precision, but for my query purposes I only care
about the date and not the time stamp portion.  What can I do to solve
or mitigate this problem and be able to search a date range that spans
at least a year? Is setMaxClauseCount() a predictable solution?  How
would reducing the precision of my date during indexing help?

=20

=20

Thanks

John

=20

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 18:39:45 2006
Return-Path: <java-user-return-24094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70231 invoked from network); 17 Oct 2006 18:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 18:39:44 -0000
Received: (qmail 23845 invoked by uid 500); 17 Oct 2006 18:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23778 invoked by uid 500); 17 Oct 2006 18:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23728 invoked by uid 99); 17 Oct 2006 18:39:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:39:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 11:39:33 -0700
Received: by nf-out-0910.google.com with SMTP id b2so358041nfe
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 11:39:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=T5KvqlDgV5HjNt0pzIcKWmi5lJmMZtk63hX71FQZw9NSr2K/78gQtWWCUdQSMPp0ttejqTO8GpdvvRskTk5w08yV6oNCsagFnK8vpMj3vb9WdoX7mlkuNgRYwMOYqgAjy/kRzxlVydtMyy5Tlj28U1cIgC8EESZVzjtQtDZFjbY=
Received: by 10.82.101.3 with SMTP id y3mr1711008bub;
        Tue, 17 Oct 2006 11:39:09 -0700 (PDT)
Received: by 10.82.133.17 with HTTP; Tue, 17 Oct 2006 11:39:09 -0700 (PDT)
Message-ID: <6e3ae6310610171139n77ff8f5ev5f3071b82b3e14ea@mail.gmail.com>
Date: Tue, 17 Oct 2006 11:39:09 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle Text 10g... or NOT
In-Reply-To: <5B99185C1E450E488073D0FDB8A25C73593B28@UWMAIL.nt02.unitedway.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <32ca66f90610170902x2a22002fkcf66667e95fac8cc@mail.gmail.com>
	 <5B99185C1E450E488073D0FDB8A25C73593B28@UWMAIL.nt02.unitedway.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Several additional reasons I can think of:
1) Being able to control the algorithsm, for example,
   1.1) applying your own analyzer to a field.
   1.2) control your own way of ranking
2) De-couple your data model from the searching
  Searching directly on your data model may not be ideal. You may want
to add more attributes, like "ranking", or de-normed info like tags
for the record.
3) Faster
  Faster is not just one advantage. It's a feature. Because it's fast,
you can add many new features based on that, like google's suggest, or
simply more different kinds of search at one shot.

Lucene Draw back:
1) Not easily to combine search results with the SQL conditions

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 10/17/06, Bryzek.Michael <Michael.Bryzek@uwa.unitedway.org> wrote:
> We used Oracle interMedia/Text for search within the RDMS beginning with oracle 8i through oracle 10g. Two primary reasons we switched to solr/lucene:
>
>   * We saw random errors (< .1% of the time) when users ran full text search. We believe the source of this error occurred during index update as users ran searches. Oracle support and our team never resolved this issue. We prefer to update our data set 2-4 times per hour and could never find a reliable way to do this with Oracle.
>
>   * When we upgraded to Oracle 10g release 2, the frequency of these errors increased 10 fold and necessitated the change to another solution (Oracle support again could not diagnose root cause of our application errors). We first implemented Lucene, but then found Solr and have been extremely pleased. Solr offers the benefit of a standard XML HTTP API which allows us to expose search to all sorts of applications and partners with no additional effort.
>
> We run oracle on redhat linux, so your mileage may vary. We also run standard edition one now, but oracle text was made part of this edition a few years ago.
>
> In implementing, we've found a few other features that are quite nice:
>
>   * If we change our indexing strategy (e.g. a new analyzer), we can stop the update process, index our data in a separate environment, transfer the new index datafiles to production, and restart the instance. You might be able to do full online rebuilds with Oracle Text, but with lucene it just a non issue.
>
>   * Indexing is fast
>
>   * Scaling search separate from RDBMS is a real blessing
>
> -Mike
>
>
> -----Original Message-----
> From: Rene Pineda [mailto:yositunel@gmail.com]
> Sent: Tue 10/17/06 12:02 PM
> To: java-user@lucene.apache.org
> Subject: Oracle Text 10g... or NOT
>
> Hi -
>
> I'm currently looking into adding full text search capabilities to our
> site.  While some threads in this list had the same basic question (RDBMS
> full-text versus lucene), their configurations and conderns were different.
> Here's my configuration
>
> * RDBMS is Enteprise Oracle 10g
> * RAC-enabled RDMBS
> * Dual fiber chanel RAID-5 configuration
> * 2-node cluster
> * 8GB RAM/per node
> * Dual 3.6GHz Intel CPU/per node
> * 99% of the content to be indexed is stored in our RDBMS
> * Largest table size today 3 Billion (with a B) records
> * Average table size 3 Million records
>
> The question is, then, should I use Oracle 10g's full text capabilities or
> lucene?
>
> Since we have the oracle enteprise license, cost is not an issue (oracle
> text comes with it).    I was able to create a demo using lucene in less
> than 1/2 day, and we're looking towards creating the same demo using oracle
> 10g's full text search capabilities
>
> Some ppl in this list migrated from RDBMS to lucene because of:
> * speed - lucene is faster
> * RDBMS server off load (someone reported they offloaded 70% of db server
> work)
> * cost (they didn't have the enteprise oracle license)
> * index size - lucene indexes are smaller
> * while some people had question with interMedia, I didn't find much
> information with the newer Oracle 10g's full text search capabilties
>
> Any thoughts?  Thanks in advance.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 19:32:57 2006
Return-Path: <java-user-return-24095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97060 invoked from network); 17 Oct 2006 19:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 19:32:56 -0000
Received: (qmail 43211 invoked by uid 500); 17 Oct 2006 19:32:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43176 invoked by uid 500); 17 Oct 2006 19:32:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43165 invoked by uid 99); 17 Oct 2006 19:32:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:32:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.48.84.103] (HELO mail.waite.net.nz) (210.48.84.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 12:32:46 -0700
Received: from localhost ([127.0.0.1])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1GZufo-0000HD-NY
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 08:32:24 +1300
Received: from mail.waite.net.nz ([127.0.0.1])
	by localhost (gandalf [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 32590-10 for <java-user@lucene.apache.org>;
	Wed, 18 Oct 2006 08:32:24 +1300 (NZDT)
Received: from frodo.lan.waite.net.nz ([192.168.1.29])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1GZufo-0000HA-IB
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 08:32:24 +1300
From: Paul Waite <paul@waite.net.nz>
To: java-user@lucene.apache.org
Subject: Re: index architectures
User-Agent: KMail/1.9.1
References: <1161104516.52249.ezmlm@lucene.apache.org>
In-Reply-To: <1161104516.52249.ezmlm@lucene.apache.org>
MIME-Version: 1.0
Content-Disposition: inline
Date: Wed, 18 Oct 2006 08:32:23 +1300
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Message-Id: <200610180832.23964.paul@waite.net.nz>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at waite.net.nz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi chaps,

Just looking for some ideas/experience as to how to improve our
current architecture.

We have a single-index system containing approx. 2.5 million docs of
about 1-3k each.

The Lucene implementation is a daemon and it services requests on
a port in multi-threaded manner, and it runs on a fairly new dual cpu
box with 2G of ram. Although I have the jvm using ~1.5G, this system
does fairly regularly crash with 'out of memory' errors. It's hard to see
the exact conditions at that point as to cause, but I'm guessing it's
simply a number of users executing queries which return large
resultsets, and then require sorting (just about all queries are sorted
by reverse date, using a field), so chewing up too much memory.

This index is updated frequently, since it is a news site, so this makes
the use of cacheing filters problematic. Typically about 1500 articles
come in per day, and during working hours you'd see them popping
in maybe every few seconds, with longer periods interspersed fairly
randomly. Access to these new articles is expected to be 'immediate'
for folks doing searches.

The nature of this area is such that a great deal of activity focusses
on 'recent' news, in particular the last 24 hours, then the last week,
and perhaps the last month in that order.

With that in mind I had the idea of creating a dual-index architecture
"recent" and "archive", where the "recent" index holds approx. the most
recent 30 days and the "archive" holds the rest.

But there are several refinements on this, and I wondered if anyone
else out there has already solved or at least tackled this problem and
has any suggestions.


For example, here is one idea for how the above might operate:

At a defined point in time, the 30-day index is generated. For us this is
easy. Our article bodies are all stored out on disk, timestamped, and
we can simply generate a list newer than a certain date and index
these to a brand new index.

At the same time, the "archive" index is merged with the existing 30-day
index, to make an updated "archive index.

The system then operates by indexing to the 30-day index and directing
searches to it where date-range is appropriate, otherwise to the
archive index. We would then operate in this mode for a week or so
before refreshing the indexes again.

So searching and sorting would then mostly be done on an index
which has around 45,000 docs in it rather than 2.5 million. I'm supposing
that this will be massively faster to operate with both indexing and
searching/sorting.

Any comments from anyone on this would be very much appreciated.

Cheers,
Paul.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 20:29:14 2006
Return-Path: <java-user-return-24096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21868 invoked from network); 17 Oct 2006 20:29:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 20:29:13 -0000
Received: (qmail 55179 invoked by uid 500); 17 Oct 2006 20:29:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55140 invoked by uid 500); 17 Oct 2006 20:29:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55129 invoked by uid 99); 17 Oct 2006 20:29:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:29:06 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 13:29:05 -0700
Received: by py-out-1112.google.com with SMTP id i49so38575pyi
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 13:28:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cTTuvcq1K94wllsGi6DpTTpwuRMk8+OICcuL8kHHVrJnzRg1uogMSbFf3Djj8vVrcVIlrAvFNUKfkfWGNU+a4c8i3lgy7W0fl5nm804TMPnJeld4AhXQC47ar0/t0Mk2uoDsscTLGQIvvVp30uiVhofIbIuC1cKsfoE0iIjCVSs=
Received: by 10.35.21.9 with SMTP id y9mr16023644pyi;
        Tue, 17 Oct 2006 13:28:44 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 17 Oct 2006 13:28:44 -0700 (PDT)
Message-ID: <359a92830610171328l5bd813ffs4bb1b0462f796b32@mail.gmail.com>
Date: Tue, 17 Oct 2006 16:28:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index architectures
In-Reply-To: <200610180832.23964.paul@waite.net.nz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86135_20169634.1161116924210"
References: <1161104516.52249.ezmlm@lucene.apache.org>
	 <200610180832.23964.paul@waite.net.nz>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_86135_20169634.1161116924210
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've been curious for a while about this scheme, and I'm hoping you
implement it and tell me if it works <G>. In truth, my data is pretty static
so I haven't had to worry about it much. That said...

Would it do (and, perhaps, be less complex) to have a FSDirectory and a
RAMDirectory that you search? And another FSDirectory that gets updated in
the background? Here's the scheme as I see it.

FSDirectorySearch. Holds the bulk of your index. Everything up until, say,
midnight the night before.
FSDirectoryBack.  starts out as a copy of FSDirectorySearch, but is where
you add your new stories. NOTE: you don't search this.
RAMDirectory. Where you stash your new documents dating from the time your
two FSDirectories were identical. It contains the delta between your two
FSDirectories.

Your searcher opens FSDirectorySearch for searching.

A new document comes in. You add it to your FSDirectoryBack and your
RAMDirectory.

A search request comes in. Use a MultiSearcher (or variant) to search
FSDirectorySearch and RAMDirectory. You probably have to re-open your
RAMDirectory for search each time to pick up the most recent additions.
NOTE: you might want to search the archives for performance data on
multi-searchers, I'm not all that familiar with them....

At some interval (daily? hourly? at some pre-determined number of new
stories?) you close up everything, copy your FSDirectoryBack to
FSDirectorySearch, and re-start things. I'm wondering if this kind of scheme
allows you to keep the speed and memory requirements down by processing
requests faster. You might also be able to get some advantage with caching.

Don't know if this is actually a viable scheme, but thought I'd mention it.
And I'm sure you can see several variations on it that might fit your
problem space better.

On a side note: I ran some tests at one point throwing a variable number of
searches (sorted) at my searcher using XmlRpc. I never had out of memory
errors. The index was on the order of 1.4G, 870K documents. What I did see
was the speed take a dive eventually, but at least it was graceful. I have
no idea what was going on in the background, specifically how XmlRpc was
handling memory issues, so I'm not sure how much that helps. I was servicing
100 simultaneous threads as fast as I could spawn them....

So, I wonder if your out of memory issue is really related to the number of
requests you're servicing. But only you will be able to figure that out <G>.
These problems are...er...unpleasant to track down...

I guess I wonder a bit about what large result sets is all about. That is,
do your users really care about results 100-10,000 or do they just want to
page through them on demand? I'm sure you see where this is going, and if
you're already returning, say, 100 documents out of N and letting them page,
ignore this part. If you don't already know all about the inefficiency
inherent in iterating over a Hits object, you might want to search the
archives and/or look at TopDocs and HitCollector....

Best
Erick


On 10/17/06, Paul Waite <paul@waite.net.nz> wrote:
>
> Hi chaps,
>
> Just looking for some ideas/experience as to how to improve our
> current architecture.
>
> We have a single-index system containing approx. 2.5 million docs of
> about 1-3k each.
>
> The Lucene implementation is a daemon and it services requests on
> a port in multi-threaded manner, and it runs on a fairly new dual cpu
> box with 2G of ram. Although I have the jvm using ~1.5G, this system
> does fairly regularly crash with 'out of memory' errors. It's hard to see
> the exact conditions at that point as to cause, but I'm guessing it's
> simply a number of users executing queries which return large
> resultsets, and then require sorting (just about all queries are sorted
> by reverse date, using a field), so chewing up too much memory.
>
> This index is updated frequently, since it is a news site, so this makes
> the use of cacheing filters problematic. Typically about 1500 articles
> come in per day, and during working hours you'd see them popping
> in maybe every few seconds, with longer periods interspersed fairly
> randomly. Access to these new articles is expected to be 'immediate'
> for folks doing searches.
>
> The nature of this area is such that a great deal of activity focusses
> on 'recent' news, in particular the last 24 hours, then the last week,
> and perhaps the last month in that order.
>
> With that in mind I had the idea of creating a dual-index architecture
> "recent" and "archive", where the "recent" index holds approx. the most
> recent 30 days and the "archive" holds the rest.
>
> But there are several refinements on this, and I wondered if anyone
> else out there has already solved or at least tackled this problem and
> has any suggestions.
>
>
> For example, here is one idea for how the above might operate:
>
> At a defined point in time, the 30-day index is generated. For us this is
> easy. Our article bodies are all stored out on disk, timestamped, and
> we can simply generate a list newer than a certain date and index
> these to a brand new index.
>
> At the same time, the "archive" index is merged with the existing 30-day
> index, to make an updated "archive index.
>
> The system then operates by indexing to the 30-day index and directing
> searches to it where date-range is appropriate, otherwise to the
> archive index. We would then operate in this mode for a week or so
> before refreshing the indexes again.
>
> So searching and sorting would then mostly be done on an index
> which has around 45,000 docs in it rather than 2.5 million. I'm supposing
> that this will be massively faster to operate with both indexing and
> searching/sorting.
>
> Any comments from anyone on this would be very much appreciated.
>
> Cheers,
> Paul.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86135_20169634.1161116924210--

From java-user-return-24097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 21:05:16 2006
Return-Path: <java-user-return-24097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33173 invoked from network); 17 Oct 2006 21:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:05:16 -0000
Received: (qmail 31833 invoked by uid 500); 17 Oct 2006 21:05:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31811 invoked by uid 500); 17 Oct 2006 21:05:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31800 invoked by uid 99); 17 Oct 2006 21:05:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:05:09 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.198] (HELO web36406.mail.mud.yahoo.com) (209.191.91.198)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Oct 2006 14:05:07 -0700
Received: (qmail 17178 invoked by uid 60001); 17 Oct 2006 21:04:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=1rkEeZwsHFODsTt5R/m0IyAyW4JmAROztrZdIddVjbniXe4yfOOcRLKotFO5WPNugJYIbib8vPGt1BQZNZONjQi999y9MgFzDw51owp+F9oE7FfphlFXGqe9hXVoqnNjV/GTxtAPdhcpSuTWu/a5iMSZwxcLGhQKJsgaDN6bgUY=  ;
Message-ID: <20061017210447.17176.qmail@web36406.mail.mud.yahoo.com>
Received: from [208.210.219.130] by web36406.mail.mud.yahoo.com via HTTP; Tue, 17 Oct 2006 14:04:47 PDT
Date: Tue, 17 Oct 2006 14:04:47 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: PrefixFilter Memory Consumption
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1345373753-1161119087=:12173"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1345373753-1161119087=:12173
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  Can anyone please tell as to what is the difference between PrefixFilter and WildcardQuery as far as memory is concerned? 
   
  I saw the code of PrefixFilter and it gets TermEnum for all the terms in the index. Won't this consume memory??
   
  I started using PrefixFilter, ConstantScoreQuery instead of WildcardQuery to avoid OOM exception. I am using ChainedFilters to do boolean logic for the filters.
   
  Thanks again for all the help.
   
  -Vasu

 		
---------------------------------
Get your email and more, right on the  new Yahoo.com 
--0-1345373753-1161119087=:12173--

From java-user-return-24098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 21:10:37 2006
Return-Path: <java-user-return-24098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34928 invoked from network); 17 Oct 2006 21:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 21:10:37 -0000
Received: (qmail 48686 invoked by uid 500); 17 Oct 2006 21:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48648 invoked by uid 500); 17 Oct 2006 21:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48630 invoked by uid 99); 17 Oct 2006 21:10:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:10:32 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 14:10:31 -0700
Received: by ug-out-1314.google.com with SMTP id k40so46644ugc
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 14:10:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=bkwbmtTewQdANxlHUH7OteGysRt3CC+3LWRRXT+Rr69EyAPOdvUNmLGJgQCAC9nvkSmVuyCC1w7T046ay920+LsRhKNvvP021hS1T+m1XydRWmsSNN4L3JAQRWRiZfEHLLwn7Mwo0xPWmS2i8qXStrEnpN3vCtRPvuVtEsXCG6c=
Received: by 10.82.131.1 with SMTP id e1mr1767401bud;
        Tue, 17 Oct 2006 14:10:09 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Tue, 17 Oct 2006 14:10:09 -0700 (PDT)
Message-ID: <c68e39170610171410l120c821ck5cbc043c950d575b@mail.gmail.com>
Date: Tue, 17 Oct 2006 17:10:09 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: PrefixFilter Memory Consumption
In-Reply-To: <20061017210447.17176.qmail@web36406.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061017210447.17176.qmail@web36406.mail.mud.yahoo.com>
X-Google-Sender-Auth: 3943f332dcb62531
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/17/06, vasu shah <vasushah23@yahoo.com> wrote:
>   Can anyone please tell as to what is the difference between PrefixFilter and WildcardQuery as far as memory is concerned?
>
>   I saw the code of PrefixFilter and it gets TermEnum for all the terms in the index. Won't this consume memory??

It takes time, not memory.  TermEnum is like an iterator - it doesn't
keep everything it iterates over in memory.  The memory for filters
will be for the bitset (1 bit for every document in the index, so a 1M
doc index will take 125KB of mem per filter).

Both PrefixQuery and PrefixFilter need to use a TermEnum, the
difference is what they do with the resulting terms.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 22:32:14 2006
Return-Path: <java-user-return-24099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66616 invoked from network); 17 Oct 2006 22:32:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 22:32:14 -0000
Received: (qmail 85191 invoked by uid 500); 17 Oct 2006 22:32:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85093 invoked by uid 500); 17 Oct 2006 22:32:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84981 invoked by uid 99); 17 Oct 2006 22:32:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 15:32:07 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.201] (HELO web36409.mail.mud.yahoo.com) (209.191.91.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Oct 2006 15:32:04 -0700
Received: (qmail 57372 invoked by uid 60001); 17 Oct 2006 22:31:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4ppevgZOczwHFZl8+e7acam6JKeqoD8C84KXj2S13qE1D0qGVgx6eh1Ar4K78v2CpeaZ2E7ys/mp8/hTnLG4yzHYTnDpsgDN1d3+FRTZOfB/Ep3gGHCQo5ud4frLM1yYvofExbiWHpzINffdCQHj1o7SeGyYvMy8mUEEd63LKpQ=  ;
Message-ID: <20061017223143.57370.qmail@web36409.mail.mud.yahoo.com>
Received: from [24.125.100.254] by web36409.mail.mud.yahoo.com via HTTP; Tue, 17 Oct 2006 15:31:43 PDT
Date: Tue, 17 Oct 2006 15:31:43 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Re: PrefixFilter Memory Consumption
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170610171410l120c821ck5cbc043c950d575b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-279634796-1161124303=:52813"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-279634796-1161124303=:52813
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks for the explanation. 

I am using ChainedFilter and it is taking some more time than using just one Filter.

I read somewhere on the lucene forums that the speed can be increased for Filters if we have a large bitset and then work on it. Is it possible and if yes, how? I would like to know the technique.

Thanks once again.
-Vasu

Yonik Seeley <yonik@apache.org> wrote: On 10/17/06, vasu shah  wrote:
>   Can anyone please tell as to what is the difference between PrefixFilter and WildcardQuery as far as memory is concerned?
>
>   I saw the code of PrefixFilter and it gets TermEnum for all the terms in the index. Won't this consume memory??

It takes time, not memory.  TermEnum is like an iterator - it doesn't
keep everything it iterates over in memory.  The memory for filters
will be for the bitset (1 bit for every document in the index, so a 1M
doc index will take 125KB of mem per filter).

Both PrefixQuery and PrefixFilter need to use a TermEnum, the
difference is what they do with the resulting terms.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
 All-new Yahoo! Mail - Fire up a more powerful email and get things done faster.
--0-279634796-1161124303=:52813--

From java-user-return-24100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 23:07:17 2006
Return-Path: <java-user-return-24100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74888 invoked from network); 17 Oct 2006 23:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 23:07:16 -0000
Received: (qmail 41846 invoked by uid 500); 17 Oct 2006 23:07:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41753 invoked by uid 500); 17 Oct 2006 23:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41742 invoked by uid 99); 17 Oct 2006 23:07:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:07:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:07:06 -0700
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 82DC5B735C
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 09:05:51 +1000 (EST)
Message-ID: <453561FD.4030703@nuix.com.au>
Date: Wed, 18 Oct 2006 09:06:37 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061016)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Preventing merging by IndexWriter
References: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local> <359a92830610170812r161f65a8j48449ddc13f0fac@mail.gmail.com>
In-Reply-To: <359a92830610170812r161f65a8j48449ddc13f0fac@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick Erickson wrote:
> Why go through all this effort when it's easy to make your own unique ID?

I can think of one reason: hits.id() is orders of magnitude faster than 
hits.doc().

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 17 23:24:04 2006
Return-Path: <java-user-return-24101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79004 invoked from network); 17 Oct 2006 23:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Oct 2006 23:24:03 -0000
Received: (qmail 68144 invoked by uid 500); 17 Oct 2006 23:23:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68117 invoked by uid 500); 17 Oct 2006 23:23:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68106 invoked by uid 99); 17 Oct 2006 23:23:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 16:23:56 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.201] (HELO web36409.mail.mud.yahoo.com) (209.191.91.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Oct 2006 16:23:55 -0700
Received: (qmail 82034 invoked by uid 60001); 17 Oct 2006 23:23:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=MDeVtcjcuZdWWfbZzdy6++NN+chwUqLr1BHvunQDeOZ9Pv6FFyyVmEEnnsopAnOQ0WMDhHqOF6tlT7mamRzpGr90zuodZ4n2/btFwFEPZR7in83W87xOCUTULGoLyMQaodCr/5WToexUwn0H5htvC/6PeghMsVenYkQ0Fz5Vank=  ;
Message-ID: <20061017232331.82032.qmail@web36409.mail.mud.yahoo.com>
Received: from [24.125.100.254] by web36409.mail.mud.yahoo.com via HTTP; Tue, 17 Oct 2006 16:23:31 PDT
Date: Tue, 17 Oct 2006 16:23:31 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Parameterized IndexModifier
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1416092109-1161127411=:81741"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1416092109-1161127411=:81741
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


Hi,

The IndexModifier class always opens up an IndexWriter in the init 
method. If we need to update a document, it closes the IndexWriter and 
opens up IndexReader to delete the desired document. Then again it opens 
IndexWriter to add the document to the index.

Instead can't we pass one extra parameter to the constructor that 
determines whether the operation required is exclusively insert or 
delete/update. If it is just insert, we open the IndexWriter first. If it is 
delete/update, we open IndexReader first.

If we do this will there be any issues?

Thanks,
-Vasu

 		
---------------------------------
How low will we go? Check out Yahoo! Messengers low  PC-to-Phone call rates.
--0-1416092109-1161127411=:81741--

From java-user-return-24102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 00:03:28 2006
Return-Path: <java-user-return-24102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88243 invoked from network); 18 Oct 2006 00:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 00:03:28 -0000
Received: (qmail 10067 invoked by uid 500); 18 Oct 2006 00:03:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10015 invoked by uid 500); 18 Oct 2006 00:03:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9991 invoked by uid 99); 18 Oct 2006 00:03:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 17:03:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [65.61.166.69] (HELO rs30.luxsci.com) (65.61.166.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 17:03:15 -0700
Received: from [10.0.1.7] (ip-65-183-78-29.rev.frii.com [65.183.78.29])
	(authenticated bits=0)
	by rs30.luxsci.com (8.13.7/8.13.7) with ESMTP id k9I02lYm013139;
	Tue, 17 Oct 2006 19:02:48 -0500
In-Reply-To: <6e3ae6310610171139n77ff8f5ev5f3071b82b3e14ea@mail.gmail.com>
References: <32ca66f90610170902x2a22002fkcf66667e95fac8cc@mail.gmail.com> <5B99185C1E450E488073D0FDB8A25C73593B28@UWMAIL.nt02.unitedway.org> <6e3ae6310610171139n77ff8f5ev5f3071b82b3e14ea@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8DA5FB2E-EE48-4F46-9490-58CCC03404C3@colvin.org>
Content-Transfer-Encoding: 7bit
From: Greg Colvin <greg@colvin.org>
Subject: Re: Oracle Text 10g... or NOT
Date: Tue, 17 Oct 2006 18:04:18 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Another option is to run Lucene inside your Oracle instance using  
it's JVM.  This might help with combining Lucene and Oracle search  
results.

On Oct 17, 2006, at 12:39 PM, Chris Lu wrote:
> Several additional reasons I can think of:
> 1) Being able to control the algorithsm, for example,
>   1.1) applying your own analyzer to a field.
>   1.2) control your own way of ranking
> 2) De-couple your data model from the searching
>  Searching directly on your data model may not be ideal. You may want
> to add more attributes, like "ranking", or de-normed info like tags
> for the record.
> 3) Faster
>  Faster is not just one advantage. It's a feature. Because it's fast,
> you can add many new features based on that, like google's suggest, or
> simply more different kinds of search at one shot.
>
> Lucene Draw back:
> 1) Not easily to combine search results with the SQL conditions
>
> -- 
> Chris Lu
> -------------------------
> Instant Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> On 10/17/06, Bryzek.Michael <Michael.Bryzek@uwa.unitedway.org> wrote:
>> We used Oracle interMedia/Text for search within the RDMS  
>> beginning with oracle 8i through oracle 10g. Two primary reasons  
>> we switched to solr/lucene:
>>
>>   * We saw random errors (< .1% of the time) when users ran full  
>> text search. We believe the source of this error occurred during  
>> index update as users ran searches. Oracle support and our team  
>> never resolved this issue. We prefer to update our data set 2-4  
>> times per hour and could never find a reliable way to do this with  
>> Oracle.
>>
>>   * When we upgraded to Oracle 10g release 2, the frequency of  
>> these errors increased 10 fold and necessitated the change to  
>> another solution (Oracle support again could not diagnose root  
>> cause of our application errors). We first implemented Lucene, but  
>> then found Solr and have been extremely pleased. Solr offers the  
>> benefit of a standard XML HTTP API which allows us to expose  
>> search to all sorts of applications and partners with no  
>> additional effort.
>>
>> We run oracle on redhat linux, so your mileage may vary. We also  
>> run standard edition one now, but oracle text was made part of  
>> this edition a few years ago.
>>
>> In implementing, we've found a few other features that are quite  
>> nice:
>>
>>   * If we change our indexing strategy (e.g. a new analyzer), we  
>> can stop the update process, index our data in a separate  
>> environment, transfer the new index datafiles to production, and  
>> restart the instance. You might be able to do full online rebuilds  
>> with Oracle Text, but with lucene it just a non issue.
>>
>>   * Indexing is fast
>>
>>   * Scaling search separate from RDBMS is a real blessing
>>
>> -Mike
>>
>>
>> -----Original Message-----
>> From: Rene Pineda [mailto:yositunel@gmail.com]
>> Sent: Tue 10/17/06 12:02 PM
>> To: java-user@lucene.apache.org
>> Subject: Oracle Text 10g... or NOT
>>
>> Hi -
>>
>> I'm currently looking into adding full text search capabilities to  
>> our
>> site.  While some threads in this list had the same basic question  
>> (RDBMS
>> full-text versus lucene), their configurations and conderns were  
>> different.
>> Here's my configuration
>>
>> * RDBMS is Enteprise Oracle 10g
>> * RAC-enabled RDMBS
>> * Dual fiber chanel RAID-5 configuration
>> * 2-node cluster
>> * 8GB RAM/per node
>> * Dual 3.6GHz Intel CPU/per node
>> * 99% of the content to be indexed is stored in our RDBMS
>> * Largest table size today 3 Billion (with a B) records
>> * Average table size 3 Million records
>>
>> The question is, then, should I use Oracle 10g's full text  
>> capabilities or
>> lucene?
>>
>> Since we have the oracle enteprise license, cost is not an issue  
>> (oracle
>> text comes with it).    I was able to create a demo using lucene  
>> in less
>> than 1/2 day, and we're looking towards creating the same demo  
>> using oracle
>> 10g's full text search capabilities
>>
>> Some ppl in this list migrated from RDBMS to lucene because of:
>> * speed - lucene is faster
>> * RDBMS server off load (someone reported they offloaded 70% of db  
>> server
>> work)
>> * cost (they didn't have the enteprise oracle license)
>> * index size - lucene indexes are smaller
>> * while some people had question with interMedia, I didn't find much
>> information with the newer Oracle 10g's full text search capabilties
>>
>> Any thoughts?  Thanks in advance.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 00:30:39 2006
Return-Path: <java-user-return-24103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99679 invoked from network); 18 Oct 2006 00:30:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 00:30:38 -0000
Received: (qmail 52253 invoked by uid 500); 18 Oct 2006 00:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52213 invoked by uid 500); 18 Oct 2006 00:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52181 invoked by uid 99); 18 Oct 2006 00:30:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 17:30:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO prod.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 17:30:30 -0700
Received: from page.mel.office.aconex.com (unknown [192.168.0.210])
	by prod.aconex.com (Postfix) with ESMTP id F1C03289C0
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 10:30:06 +1000 (EST)
Received: from localhost (page.mel.aconex.com [127.0.0.1])
	by page.mel.office.aconex.com (Postfix) with ESMTP id D1ACF5340F5
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 10:30:05 +1000 (EST)
Received: from page.mel.office.aconex.com ([127.0.0.1])
 by localhost (mail.aconex.com [127.0.0.1]) (amavisd-new, port 10024)
 with LMTP id 18179-01-9 for <java-user@lucene.apache.org>;
 Wed, 18 Oct 2006 10:30:02 +1000 (EST)
Received: from OLIVERDESKTOP (unknown [192.168.0.40])
	by page.mel.office.aconex.com (Postfix) with ESMTP id 56BA5534039
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 10:30:02 +1000 (EST)
From: "Oliver Hutchison" <ohutchison@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: index architectures
Date: Wed, 18 Oct 2006 10:29:59 +1000
Message-ID: <005e01c6f24c$8d199c60$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830610171328l5bd813ffs4bb1b0462f796b32@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
thread-index: AcbyKukao8dls9+FROaQQiJ40revSgAFTX9Q
X-Virus-Scanned: amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can certainly vouch for the benefits of partitioning, we've seen a very
big improvement in searcher refresh times (our main pain point) since we
implemented such an architecture.

Our application has 1000's of indexes, ranging in size from a few meg up
several gigabytes, updates occur very frequently and can effect any document
so we don't have the luxury you have of being able to partition our docs
into a read-only set and a writable set, however we have developed an
architecture that gives us very good performance even with these
constraints.

What we have is 2 FSDirectories, 1 we call the "archive" which is where most
of our docs are stored and 1 called "work" which is where all updated and
new documents are added. We keep the work index as small as possible by
regularly merging its documents into the archive. Searching is done using a
MultiSearcher across the 2 indexes and to keep search results up to date we
need only refresh the work index searcher. We have considered using a
RAMDirectory in addition to the work directory, which would basically mirror
Erick's suggestion, but so far we have found that, as long as we keep the
work FSDirectory small, performance is very good and also given the number
of separate indexes we have there would be quite a bit of additional
complexity managing the memory footprint of all the RAMDirectories we'd
need.

The main (only to be honest) complication with our scheme arises because
deletes/updates can effect any documents, which means we need to apply any
deletes to both the archive and the work partitions. We can do the archive
index deletes using the same Reader that we are searching against and
because deletes immediately effect search results we don't have to throw out
the archive searcher (which is very expensive). However the Reader does not
commit the deletes to disk until you close it, so if we want a consistent
index we do need to close the Reader immediately or risk loosing the
deletes. Catch-22.

Luckily we've found a way around this problem, we have 2 Readers open
against the archive index - the 1st Reader is used for all searching and is
never closed the 2nd Reader is used to keep the index files up to date and
as such is closed then recreated after each update transaction, all deletes
are applied to both readers. There's some trickery needed to allow 2 Readers
to both think they are updating the same FSDirectory when technically only
the 2nd one is, but this is not that difficult to resolve and is well worth
the effort as we never incur the penalty of recreating the archive index
Searcher to keep the search results up to date. Something that used to take
over 10 seconds, mainly because most of our searches are sorted and
therefore a Searcher refresh also requires the FieldCache to be refreshed as
well.

Cheers,

Ollie

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Wednesday, 18 October 2006 6:29 AM
> To: java-user@lucene.apache.org
> Subject: Re: index architectures
> 
> I've been curious for a while about this scheme, and I'm 
> hoping you implement it and tell me if it works <G>. In 
> truth, my data is pretty static so I haven't had to worry 
> about it much. That said...
> 
> Would it do (and, perhaps, be less complex) to have a 
> FSDirectory and a RAMDirectory that you search? And another 
> FSDirectory that gets updated in the background? Here's the 
> scheme as I see it.
> 
> FSDirectorySearch. Holds the bulk of your index. Everything 
> up until, say, midnight the night before.
> FSDirectoryBack.  starts out as a copy of FSDirectorySearch, 
> but is where you add your new stories. NOTE: you don't search this.
> RAMDirectory. Where you stash your new documents dating from 
> the time your two FSDirectories were identical. It contains 
> the delta between your two FSDirectories.
> 
> Your searcher opens FSDirectorySearch for searching.
> 
> A new document comes in. You add it to your FSDirectoryBack 
> and your RAMDirectory.
> 
> A search request comes in. Use a MultiSearcher (or variant) 
> to search FSDirectorySearch and RAMDirectory. You probably 
> have to re-open your RAMDirectory for search each time to 
> pick up the most recent additions.
> NOTE: you might want to search the archives for performance 
> data on multi-searchers, I'm not all that familiar with them....
> 
> At some interval (daily? hourly? at some pre-determined number of new
> stories?) you close up everything, copy your FSDirectoryBack 
> to FSDirectorySearch, and re-start things. I'm wondering if 
> this kind of scheme allows you to keep the speed and memory 
> requirements down by processing requests faster. You might 
> also be able to get some advantage with caching.
> 
> Don't know if this is actually a viable scheme, but thought 
> I'd mention it.
> And I'm sure you can see several variations on it that might 
> fit your problem space better.
> 
> On a side note: I ran some tests at one point throwing a 
> variable number of searches (sorted) at my searcher using 
> XmlRpc. I never had out of memory errors. The index was on 
> the order of 1.4G, 870K documents. What I did see was the 
> speed take a dive eventually, but at least it was graceful. I 
> have no idea what was going on in the background, 
> specifically how XmlRpc was handling memory issues, so I'm 
> not sure how much that helps. I was servicing 100 
> simultaneous threads as fast as I could spawn them....
> 
> So, I wonder if your out of memory issue is really related to 
> the number of requests you're servicing. But only you will be 
> able to figure that out <G>.
> These problems are...er...unpleasant to track down...
> 
> I guess I wonder a bit about what large result sets is all 
> about. That is, do your users really care about results 
> 100-10,000 or do they just want to page through them on 
> demand? I'm sure you see where this is going, and if you're 
> already returning, say, 100 documents out of N and letting 
> them page, ignore this part. If you don't already know all 
> about the inefficiency inherent in iterating over a Hits 
> object, you might want to search the archives and/or look at 
> TopDocs and HitCollector....
> 
> Best
> Erick
> 
> 
> On 10/17/06, Paul Waite <paul@waite.net.nz> wrote:
> >
> > Hi chaps,
> >
> > Just looking for some ideas/experience as to how to improve our 
> > current architecture.
> >
> > We have a single-index system containing approx. 2.5 
> million docs of 
> > about 1-3k each.
> >
> > The Lucene implementation is a daemon and it services requests on a 
> > port in multi-threaded manner, and it runs on a fairly new dual cpu 
> > box with 2G of ram. Although I have the jvm using ~1.5G, 
> this system 
> > does fairly regularly crash with 'out of memory' errors. 
> It's hard to 
> > see the exact conditions at that point as to cause, but I'm 
> guessing 
> > it's simply a number of users executing queries which return large 
> > resultsets, and then require sorting (just about all queries are 
> > sorted by reverse date, using a field), so chewing up too 
> much memory.
> >
> > This index is updated frequently, since it is a news site, so this 
> > makes the use of cacheing filters problematic. Typically about 1500 
> > articles come in per day, and during working hours you'd see them 
> > popping in maybe every few seconds, with longer periods 
> interspersed 
> > fairly randomly. Access to these new articles is expected 
> to be 'immediate'
> > for folks doing searches.
> >
> > The nature of this area is such that a great deal of 
> activity focusses 
> > on 'recent' news, in particular the last 24 hours, then the 
> last week, 
> > and perhaps the last month in that order.
> >
> > With that in mind I had the idea of creating a dual-index 
> architecture 
> > "recent" and "archive", where the "recent" index holds approx. the 
> > most recent 30 days and the "archive" holds the rest.
> >
> > But there are several refinements on this, and I wondered if anyone 
> > else out there has already solved or at least tackled this 
> problem and 
> > has any suggestions.
> >
> >
> > For example, here is one idea for how the above might operate:
> >
> > At a defined point in time, the 30-day index is generated. 
> For us this 
> > is easy. Our article bodies are all stored out on disk, 
> timestamped, 
> > and we can simply generate a list newer than a certain date 
> and index 
> > these to a brand new index.
> >
> > At the same time, the "archive" index is merged with the existing 
> > 30-day index, to make an updated "archive index.
> >
> > The system then operates by indexing to the 30-day index 
> and directing 
> > searches to it where date-range is appropriate, otherwise to the 
> > archive index. We would then operate in this mode for a week or so 
> > before refreshing the indexes again.
> >
> > So searching and sorting would then mostly be done on an 
> index which 
> > has around 45,000 docs in it rather than 2.5 million. I'm supposing 
> > that this will be massively faster to operate with both 
> indexing and 
> > searching/sorting.
> >
> > Any comments from anyone on this would be very much appreciated.
> >
> > Cheers,
> > Paul.
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 00:36:12 2006
Return-Path: <java-user-return-24104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1282 invoked from network); 18 Oct 2006 00:36:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 00:36:12 -0000
Received: (qmail 57673 invoked by uid 500); 18 Oct 2006 00:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57304 invoked by uid 500); 18 Oct 2006 00:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57293 invoked by uid 99); 18 Oct 2006 00:36:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 17:36:04 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 17:36:02 -0700
Received: by py-out-1112.google.com with SMTP id i49so107502pyi
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 17:35:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qGzoZZhL5oBdDFo2pgqhscgHSGuuV7fW2fVHvnSv7lyzf+ysrrTtrpBloULxGjTEGqqU6DdqmcnaWGvh9rEmFKYWmBsyuMoOuuCnkQS4WsDYRCA91chleHiLcR85e+I0P32oYW+FGSeSDAZGeFq76QWpMXkbXdBY74tH4qOSxj0=
Received: by 10.35.98.6 with SMTP id a6mr16456723pym;
        Tue, 17 Oct 2006 17:35:07 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Tue, 17 Oct 2006 17:35:07 -0700 (PDT)
Message-ID: <359a92830610171735g679f5718l1bebd84018ac6fa8@mail.gmail.com>
Date: Tue, 17 Oct 2006 20:35:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing merging by IndexWriter
In-Reply-To: <453561FD.4030703@nuix.com.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_417_19294039.1161131707213"
References: <A955EA1F8FE31749AEC8C998082F6C7CEFE864@hai01.hippo.local>
	 <359a92830610170812r161f65a8j48449ddc13f0fac@mail.gmail.com>
	 <453561FD.4030703@nuix.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_417_19294039.1161131707213
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

True. But is it enough faster than TermDocs.seek(new Term("unique id",
id)).doc() to be worth the complication for this situation? <G>...

Erick

On 10/17/06, Daniel Noll <daniel@nuix.com.au> wrote:
>
> Erick Erickson wrote:
> > Why go through all this effort when it's easy to make your own unique
> ID?
>
> I can think of one reason: hits.id() is orders of magnitude faster than
> hits.doc().
>
> Daniel
>
>
> --
> Daniel Noll
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_417_19294039.1161131707213--

From java-user-return-24105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 05:13:38 2006
Return-Path: <java-user-return-24105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57060 invoked from network); 18 Oct 2006 05:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 05:13:37 -0000
Received: (qmail 42241 invoked by uid 500); 18 Oct 2006 05:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42126 invoked by uid 500); 18 Oct 2006 05:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42115 invoked by uid 99); 18 Oct 2006 05:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 22:13:29 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kuassi.mensah@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 22:13:27 -0700
Received: by nf-out-0910.google.com with SMTP id b2so511181nfe
        for <java-user@lucene.apache.org>; Tue, 17 Oct 2006 22:13:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=o1jIpXM68U83iILa94ZngBJDZ43qiSxnYZYoLU3xZ19tw7El4vcDEPs7yT/z/bleLkycPsw/Zga4wKkPY/uem1q+VAXevQN2OfemR3fYKIHGYgBXG2+2jVFcwlK9XbCyfc4HOq8gIXbJt2/nTmqfN+5fpcTPkXB6wxsj6L9G1HY=
Received: by 10.78.204.1 with SMTP id b1mr10368379hug;
        Tue, 17 Oct 2006 22:13:05 -0700 (PDT)
Received: by 10.78.151.10 with HTTP; Tue, 17 Oct 2006 22:13:05 -0700 (PDT)
Message-ID: <a4ab1f310610172213ifcb00a6jb035c8ceb10b3904@mail.gmail.com>
Date: Tue, 17 Oct 2006 22:13:05 -0700
From: "Kuassi Mensah" <kuassi.mensah@gmail.com>
To: "Greg Colvin" <greg@colvin.org>
Subject: Re: Oracle Text 10g... or NOT
Cc: java-user@lucene.apache.org
In-Reply-To: <8DA5FB2E-EE48-4F46-9490-58CCC03404C3@colvin.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70261_9980981.1161148385362"
References: <32ca66f90610170902x2a22002fkcf66667e95fac8cc@mail.gmail.com>
	 <5B99185C1E450E488073D0FDB8A25C73593B28@UWMAIL.nt02.unitedway.org>
	 <6e3ae6310610171139n77ff8f5ev5f3071b82b3e14ea@mail.gmail.com>
	 <8DA5FB2E-EE48-4F46-9490-58CCC03404C3@colvin.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_70261_9980981.1161148385362
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Right, as described in my book,

> The Oracle database furnishes an embedded Java run time, which can be   >
used by database components such as XDB, *inter*Media, Spatial,
Text,          > XQuery, and so on. Oracle Text leverages the XML DB
framework, which     > includes a protocol server and a specialized Java
Servlet runner, all running > within the database.

Kuassi
- blog http://db360.blogspot.com/
- book http://db360.blogspot.com/2006/08/oracle-database-programming-using-java_01.html




On 10/17/06, Greg Colvin <greg@colvin.org> wrote:
>
> Another option is to run Lucene inside your Oracle instance using
> it's JVM.  This might help with combining Lucene and Oracle search
> results.
>
> On Oct 17, 2006, at 12:39 PM, Chris Lu wrote:
> > Several additional reasons I can think of:
> > 1) Being able to control the algorithsm, for example,
> >   1.1) applying your own analyzer to a field.
> >   1.2) control your own way of ranking
> > 2) De-couple your data model from the searching
> >  Searching directly on your data model may not be ideal. You may want
> > to add more attributes, like "ranking", or de-normed info like tags
> > for the record.
> > 3) Faster
> >  Faster is not just one advantage. It's a feature. Because it's fast,
> > you can add many new features based on that, like google's suggest, or
> > simply more different kinds of search at one shot.
> >
> > Lucene Draw back:
> > 1) Not easily to combine search results with the SQL conditions
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> > On 10/17/06, Bryzek.Michael <Michael.Bryzek@uwa.unitedway.org> wrote:
> >> We used Oracle interMedia/Text for search within the RDMS
> >> beginning with oracle 8i through oracle 10g. Two primary reasons
> >> we switched to solr/lucene:
> >>
> >>   * We saw random errors (< .1% of the time) when users ran full
> >> text search. We believe the source of this error occurred during
> >> index update as users ran searches. Oracle support and our team
> >> never resolved this issue. We prefer to update our data set 2-4
> >> times per hour and could never find a reliable way to do this with
> >> Oracle.
> >>
> >>   * When we upgraded to Oracle 10g release 2, the frequency of
> >> these errors increased 10 fold and necessitated the change to
> >> another solution (Oracle support again could not diagnose root
> >> cause of our application errors). We first implemented Lucene, but
> >> then found Solr and have been extremely pleased. Solr offers the
> >> benefit of a standard XML HTTP API which allows us to expose
> >> search to all sorts of applications and partners with no
> >> additional effort.
> >>
> >> We run oracle on redhat linux, so your mileage may vary. We also
> >> run standard edition one now, but oracle text was made part of
> >> this edition a few years ago.
> >>
> >> In implementing, we've found a few other features that are quite
> >> nice:
> >>
> >>   * If we change our indexing strategy (e.g. a new analyzer), we
> >> can stop the update process, index our data in a separate
> >> environment, transfer the new index datafiles to production, and
> >> restart the instance. You might be able to do full online rebuilds
> >> with Oracle Text, but with lucene it just a non issue.
> >>
> >>   * Indexing is fast
> >>
> >>   * Scaling search separate from RDBMS is a real blessing
> >>
> >> -Mike
> >>
> >>
> >> -----Original Message-----
> >> From: Rene Pineda [mailto:yositunel@gmail.com]
> >> Sent: Tue 10/17/06 12:02 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Oracle Text 10g... or NOT
> >>
> >> Hi -
> >>
> >> I'm currently looking into adding full text search capabilities to
> >> our
> >> site.  While some threads in this list had the same basic question
> >> (RDBMS
> >> full-text versus lucene), their configurations and conderns were
> >> different.
> >> Here's my configuration
> >>
> >> * RDBMS is Enteprise Oracle 10g
> >> * RAC-enabled RDMBS
> >> * Dual fiber chanel RAID-5 configuration
> >> * 2-node cluster
> >> * 8GB RAM/per node
> >> * Dual 3.6GHz Intel CPU/per node
> >> * 99% of the content to be indexed is stored in our RDBMS
> >> * Largest table size today 3 Billion (with a B) records
> >> * Average table size 3 Million records
> >>
> >> The question is, then, should I use Oracle 10g's full text
> >> capabilities or
> >> lucene?
> >>
> >> Since we have the oracle enteprise license, cost is not an issue
> >> (oracle
> >> text comes with it).    I was able to create a demo using lucene
> >> in less
> >> than 1/2 day, and we're looking towards creating the same demo
> >> using oracle
> >> 10g's full text search capabilities
> >>
> >> Some ppl in this list migrated from RDBMS to lucene because of:
> >> * speed - lucene is faster
> >> * RDBMS server off load (someone reported they offloaded 70% of db
> >> server
> >> work)
> >> * cost (they didn't have the enteprise oracle license)
> >> * index size - lucene indexes are smaller
> >> * while some people had question with interMedia, I didn't find much
> >> information with the newer Oracle 10g's full text search capabilties
> >>
> >> Any thoughts?  Thanks in advance.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>

------=_Part_70261_9980981.1161148385362--

From java-user-return-24106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 06:07:25 2006
Return-Path: <java-user-return-24106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70373 invoked from network); 18 Oct 2006 06:07:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 06:07:25 -0000
Received: (qmail 95228 invoked by uid 500); 18 Oct 2006 06:06:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95184 invoked by uid 500); 18 Oct 2006 06:06:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95165 invoked by uid 99); 18 Oct 2006 06:06:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:06:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.48.84.103] (HELO mail.waite.net.nz) (210.48.84.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Oct 2006 23:06:25 -0700
Received: from localhost ([127.0.0.1])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1Ga4Z0-0001XJ-Mz
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 19:06:02 +1300
Received: from mail.waite.net.nz ([127.0.0.1])
	by localhost (gandalf [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 05742-02 for <java-user@lucene.apache.org>;
	Wed, 18 Oct 2006 19:05:57 +1300 (NZDT)
Received: from frodo.lan.waite.net.nz ([192.168.1.29])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1Ga4Yv-0001XE-CA
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 19:05:57 +1300
From: Paul Waite <paul@waite.net.nz>
To: java-user@lucene.apache.org
Subject: Re: index architectures
Date: Wed, 18 Oct 2006 19:05:56 +1300
User-Agent: KMail/1.9.1
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610181905.56302.paul@waite.net.nz>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at waite.net.nz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Many thanks to Erik and Ollie for responding - a lot of ideas and I'll have
my work cut out grokking them properly and thinking about what to do.
I'll respond further as that develops.

One quick thing though - Erik wrote:

> So, I wonder if your out of memory issue is really related to the number
> of requests you're servicing. But only you will be able to figure that
> out <G>. These problems are...er...unpleasant to track down...

Indeed!

> I guess I wonder a bit about what large result sets is all about. That
> is, do your users really care about results 100-10,000 or do they just
> want to page through them on demand?

No they don't want that. They just want a small number. What happens is
they enter some silly query, like searching for all stories with a single
common non-stop-word in them, and with the usual sort criterion of by date
(ie. a field) descending, and a limit of, say 25.

So Lucene then presumably has to haul out a massive resultset, sort it, and
return the top 25 (out of 500,000 or whatever).

Isn't that how it goes? Or am I missing something horribly obvious.


Cheers,
Paul.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 08:41:15 2006
Return-Path: <java-user-return-24107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20445 invoked from network); 18 Oct 2006 08:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 08:41:15 -0000
Received: (qmail 55525 invoked by uid 500); 18 Oct 2006 08:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55490 invoked by uid 500); 18 Oct 2006 08:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55477 invoked by uid 99); 18 Oct 2006 08:41:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 01:41:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 01:41:04 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 1957522 for java-user@lucene.apache.org; Wed, 18 Oct 2006 10:40:41 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Preventing merging by IndexWriter
Date: Wed, 18 Oct 2006 10:36:46 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CEFE865@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Preventing merging by IndexWriter
Thread-Index: AcbyB66mb8FgkYfrT3ykSp33TJODqQAgXSrA
From: "Johan Stuyts" <j.stuyts@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Why go through all this effort when it's easy to make your=20
> own unique ID?
> Add a new field to each document "myuniqueid" and fill it in=20
> yourself. It'll
> never change then.

I am sorry I did not mention in my post that I am aware of this solution
but that it cannot be used for my purposes. I need the stable ID during
filtering and afterwards for counting for faceted browsing. My tests
show, and from the documentation/mailing lists I conclude, that
retrieving a stable ID from a field during filtering and for each hit in
a query result is too expensive.

After your post I put some more thought into storing a stable ID in a
field. I figured I could read all the stable IDs once and create a map
from Lucene IDs to stable IDs. But this takes too long (> 600 ms on my
laptop) for a small set of documents (< 150,000). Another problem is
that I have to do millions of additional lookups during filtering and
counting.

> Of course, I may misunderstand your problem space enough that this is
> useless. If so, please tell us the problem you're trying to=20
> solve and maybe
> wiser heads than mine will have better suggestions....

Here is a description of our problem. We want to build a repository that
can handle a number of documents that is in the low millions (we are
designing the repository for 10 million documents intially). Almost all
navigation through this repository will be faceted. For this we need to
be able to filter based on the facet values selected by the user, and we
have to count how many documents in the search result have a particular
facet value for multiple (estimation: 25-40) facet values. The documents
in the repository are constantly changed and we want the faceted
navigation to be updated in near real-time: if the user refreshes a
search page after making changes to a document, the changes should be
visible. I estimate we have about 250-500 ms, the time it takes to go to
another page and refresh it, to update the index(es).

My idea is to use Lucene for regular searching, and use a custom index
for filtering based on facets and for counting the number of matches for
facet values. For this to work, (reasonably) stable IDs are needed so
updating the facet value index is simply changing values in doing a
number of arrays.

I am willing to sacrifice search performance for stable IDs if it gains
performance in faceted filtering and counting.

Johan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 08:51:16 2006
Return-Path: <java-user-return-24108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23110 invoked from network); 18 Oct 2006 08:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 08:51:15 -0000
Received: (qmail 83055 invoked by uid 500); 18 Oct 2006 08:51:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83011 invoked by uid 500); 18 Oct 2006 08:51:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82997 invoked by uid 99); 18 Oct 2006 08:51:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 01:51:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 01:51:09 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 1958201 for java-user@lucene.apache.org; Wed, 18 Oct 2006 10:50:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Preventing merging by IndexWriter
Date: Wed, 18 Oct 2006 10:47:09 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C87FB77@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Preventing merging by IndexWriter
Thread-Index: AcbyA3xK6MTJe8iFTrert6qj44I+VwAjVRzQ
From: "Johan Stuyts" <j.stuyts@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> > So my questions are: is there a way to prevent the IndexWriter from
> > merging, forcing it to create a new segment for each indexing batch?
>=20
> Already done in the Lucene trunk:
> http://issues.apache.org/jira/browse/LUCENE-672
>=20
> Background:
> http://www.gossamer-threads.com/lists/lucene/java-dev/39799#39799
>=20
> > And
> > if so, will it still be possible to merge the disk segments=20
> when I want
> > to?
>=20
> call optimize()

Thanks, I have got it working now. But I think it is not a viable
solution either. These are the problems that I see:
- the number of segments will probably increase too fast, requiring
optimizations regularly.
- Given the size of the external data, making it consistent with the
Lucene index will, in the worst case, require processing and writing to
disk of hundreds of megabytes.

The biggest problem is of course the combination of them: having to
process too much data too may times.

Johan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 13:24:18 2006
Return-Path: <java-user-return-24109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42108 invoked from network); 18 Oct 2006 13:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 13:24:17 -0000
Received: (qmail 82022 invoked by uid 500); 18 Oct 2006 13:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81957 invoked by uid 500); 18 Oct 2006 13:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81924 invoked by uid 99); 18 Oct 2006 13:24:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 06:24:04 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 06:24:01 -0700
Received: by py-out-1112.google.com with SMTP id i49so333016pyi
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 06:23:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TyaNNz3ztSpO0pJ9lUbfNQD69a9YYKxd6kxR5tE350MClFrpLgieb1sOEkpEwLdOZSmAsjV7XdZ9+bEyZX8c5kU3WcAZ7X0rsPdZ0KJJAi4Wg8NvkTARpDzRnyK47p4BDIywcNx3mHriQjNyQN7whdwu5ug3WuYjTvmpFPOM0tA=
Received: by 10.35.134.12 with SMTP id l12mr17729451pyn;
        Wed, 18 Oct 2006 06:23:20 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 18 Oct 2006 06:23:20 -0700 (PDT)
Message-ID: <359a92830610180623l2882d517m2a86b01fb68b5706@mail.gmail.com>
Date: Wed, 18 Oct 2006 09:23:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index architectures
In-Reply-To: <200610181905.56302.paul@waite.net.nz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7758_15016113.1161177800839"
References: <200610181905.56302.paul@waite.net.nz>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7758_15016113.1161177800839
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, you've got that right. But there's something I think you might be able
to try. Fair warning, I'm remembering things I've read on this list and my
memory isn't what it used to be <G>....

I *think* that if you reduce your result set by, say, a filter, you might
drastically reduce what gets sorted. I'm thinking of something like this
BooleanQuery bq = new BooleanQuery();
bq.add(Filter for the last N days wrapped in a ConstantScoreQuery, MUST)
bq.add(all the rest of your stuff).

RangeFilter might work for you here.

Even if this works, you'll still have to deal with making the range big
enough to do what you want. Perhaps an iterative approach, say the first
time you run the query and you don't get your 25 (or whatever) results,
increase the range and try again.

Again, I'm note entirely sure when the filter gets applied, before or after
the sort. Nor am I sure how to tell. I'd sure like you to do the work and
tell me how <G>.... I *am* sure that this has been discussed in this mailing
list, so a search there might settle this....

C'mon Chris, Erik and Yonki, can't you recognize a plea for help when you
read it<G>?

Although here's yet another thing that flitted through my mind. Is date
really the same as doc ID order? And would you be able to sort on DocID
instead? And would it matter <G>? If you're adding your documents as they
come in, this might work. Doc IDs change, but I *believe* if doc A is added
after doc B, the doc ID for A will always be less than the docID for B,
although neither of them is guaranteed to be the same between index
optimizations. Again, not sure if this helps at all.....

Good luck!
Erick

On 10/18/06, Paul Waite <paul@waite.net.nz> wrote:
>
> Many thanks to Erik and Ollie for responding - a lot of ideas and I'll
> have
> my work cut out grokking them properly and thinking about what to do.
> I'll respond further as that develops.
>
> One quick thing though - Erik wrote:
>
> > So, I wonder if your out of memory issue is really related to the number
> > of requests you're servicing. But only you will be able to figure that
> > out <G>. These problems are...er...unpleasant to track down...
>
> Indeed!
>
> > I guess I wonder a bit about what large result sets is all about. That
> > is, do your users really care about results 100-10,000 or do they just
> > want to page through them on demand?
>
> No they don't want that. They just want a small number. What happens is
> they enter some silly query, like searching for all stories with a single
> common non-stop-word in them, and with the usual sort criterion of by date
> (ie. a field) descending, and a limit of, say 25.
>
> So Lucene then presumably has to haul out a massive resultset, sort it,
> and
> return the top 25 (out of 500,000 or whatever).
>
> Isn't that how it goes? Or am I missing something horribly obvious.
>
>
> Cheers,
> Paul.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7758_15016113.1161177800839--

From java-user-return-24110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 13:41:33 2006
Return-Path: <java-user-return-24110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48205 invoked from network); 18 Oct 2006 13:41:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 13:41:32 -0000
Received: (qmail 51728 invoked by uid 500); 18 Oct 2006 13:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51696 invoked by uid 500); 18 Oct 2006 13:41:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51685 invoked by uid 99); 18 Oct 2006 13:41:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 06:41:24 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 06:41:20 -0700
Received: by py-out-1112.google.com with SMTP id i49so338209pyi
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 06:41:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B2Z3abKrnJGaqF0Hfw8LFIcoW9s4taDVZxxe0YeCUFUtazzilBMzIVgoiC3xGtSGVFhDCOd9vG4aGEJJ0Z7GDje1NOCNBK3CfbxhLIL6UfIUT/3gewsANEcE+G3aEf2Aw3Js532lSGMmZF3zqhv/immO2erPrWlZu+Kb9gFV6zQ=
Received: by 10.35.121.2 with SMTP id y2mr17766468pym;
        Wed, 18 Oct 2006 06:30:22 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 18 Oct 2006 06:30:22 -0700 (PDT)
Message-ID: <359a92830610180630i4d08bcd4j675f1289970f126e@mail.gmail.com>
Date: Wed, 18 Oct 2006 09:30:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing merging by IndexWriter
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C87FB77@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7862_33233595.1161178222007"
References: <A955EA1F8FE31749AEC8C998082F6C7C87FB77@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7862_33233595.1161178222007
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Your problem is out of my experience, so all I can suggest is that you
search the list archive. I know the idea of faceted searching has been
discussed by people with waaay more experience in that realm than I have
and, as I remember, there were some links provided....

I just searched for 'faceted' on the e-mails I've seen since I subscribed to
the list, and there are certainly discussions out there...

This thread might be particularly useful, started  15-May-2006
*Aggregating category hits

*
Best of luck
Erick

On 10/18/06, Johan Stuyts <j.stuyts@hippo.nl> wrote:
>
> > > So my questions are: is there a way to prevent the IndexWriter from
> > > merging, forcing it to create a new segment for each indexing batch?
> >
> > Already done in the Lucene trunk:
> > http://issues.apache.org/jira/browse/LUCENE-672
> >
> > Background:
> > http://www.gossamer-threads.com/lists/lucene/java-dev/39799#39799
> >
> > > And
> > > if so, will it still be possible to merge the disk segments
> > when I want
> > > to?
> >
> > call optimize()
>
> Thanks, I have got it working now. But I think it is not a viable
> solution either. These are the problems that I see:
> - the number of segments will probably increase too fast, requiring
> optimizations regularly.
> - Given the size of the external data, making it consistent with the
> Lucene index will, in the worst case, require processing and writing to
> disk of hundreds of megabytes.
>
> The biggest problem is of course the combination of them: having to
> process too much data too may times.
>
> Johan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7862_33233595.1161178222007--

From java-user-return-24111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 14:40:40 2006
Return-Path: <java-user-return-24111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76304 invoked from network); 18 Oct 2006 14:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 14:40:39 -0000
Received: (qmail 71864 invoked by uid 500); 18 Oct 2006 14:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71840 invoked by uid 500); 18 Oct 2006 14:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71829 invoked by uid 99); 18 Oct 2006 14:40:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 07:40:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 07:40:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7AAD65B76C; Wed, 18 Oct 2006 07:40:06 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 70E457F403
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 07:40:06 -0700 (PDT)
Date: Wed, 18 Oct 2006 07:40:06 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: index architectures
In-Reply-To: <359a92830610180623l2882d517m2a86b01fb68b5706@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610180729520.27019@hal.rescomp.berkeley.edu>
References: <200610181905.56302.paul@waite.net.nz>
 <359a92830610180623l2882d517m2a86b01fb68b5706@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I *think* that if you reduce your result set by, say, a filter, you might
: drastically reduce what gets sorted. I'm thinking of something like this
: BooleanQuery bq = new BooleanQuery();
: bq.add(Filter for the last N days wrapped in a ConstantScoreQuery, MUST)
: bq.add(all the rest of your stuff).
	...
: Again, I'm note entirely sure when the filter gets applied, before or after
: the sort. Nor am I sure how to tell. I'd sure like you to do the work and

The memory required for sorting on a field is independent of the size of
the result -- so a Filter wouldn't help you here.  The reason is becuase
Sorting builds/uses the FieldCache which cotnains all the values for all
docs, so that it can be reused for Sorting future queries as well.

That said: if you are seeing OOM errors when you sort by a field (but
not when you use the docId ordering, or sort by score) then it sounds like
you are keeping refrences to IndexReaders arround after you've stoped
using them -- the FieldCache is kept in a WeakHashMap keyed off of hte
IndexReader, so it should get garbage collected as soon sa you let go of
it.  Another possibility is that you are sorting on too many fields for it
to be able to build the FieldCache for all of them in the RAM you have
available.

There was some discussion recently on java-dev about an approach to
scoring that took advantage of Lazy Field loading insitead of the
FieldCache to sort on the *stored* value of a field, the goal being to
make sorting small result sets possible with small amount of RAM ... but i
don't remember if the person working on it ever submitted a patch.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 15:29:59 2006
Return-Path: <java-user-return-24112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88958 invoked from network); 18 Oct 2006 15:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 15:29:58 -0000
Received: (qmail 9830 invoked by uid 500); 18 Oct 2006 15:29:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9805 invoked by uid 500); 18 Oct 2006 15:29:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9794 invoked by uid 99); 18 Oct 2006 15:29:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 08:29:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [130.57.169.10] (HELO peabody.ximian.com) (130.57.169.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 08:29:49 -0700
Received: (qmail 32132 invoked from network); 18 Oct 2006 15:29:26 -0000
Received: from localhost (HELO posthaste.boston.ximian.com) (joe@127.0.0.1)
  by localhost with SMTP; 18 Oct 2006 15:29:26 -0000
Subject: Re: index architectures
From: Joe Shaw <joeshaw@novell.com>
To: java-user@lucene.apache.org
In-Reply-To: <200610181905.56302.paul@waite.net.nz>
References: <200610181905.56302.paul@waite.net.nz>
Content-Type: text/plain
Date: Wed, 18 Oct 2006 11:29:32 -0400
Message-Id: <1161185372.9288.13.camel@posthaste.boston.ximian.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

On Wed, 2006-10-18 at 19:05 +1300, Paul Waite wrote:
> No they don't want that. They just want a small number. What happens is
> they enter some silly query, like searching for all stories with a single
> common non-stop-word in them, and with the usual sort criterion of by date
> (ie. a field) descending, and a limit of, say 25.
> 
> So Lucene then presumably has to haul out a massive resultset, sort it, and
> return the top 25 (out of 500,000 or whatever).

I had a similar issue recently: users only want the 100 (or whatever)
most recently updated documents which match, and our documents aren't
stored in date-order.

Originally, we would walk the result set, instantiate a Document
instance, pull out the timestamp field, and keep around the top 100
documents.  Obviously this is extremely slow for large result sets.

What I initially did to address this was store a reverse timestamp and
walk the list of terms in the reverse timestamp field (they're sorted
lexigraphically), and return the 100 most recent matching documents.

In most cases this was a lot faster (for a search which returned 153,142
matches, I only had to walk 288 documents to find the 100 most recent),
but in some cases it was a lot slower (for another search which returned
339 matches, I had to walk 292,911 documents to find the 100 most
recent).

In the end I found that I could walk 5 terms for every 2 documents I
could instantiate and tuned a heuristic so that in the worst case (my
second example) searches are 50% slower, but in almost all other cases
they're quite a bit faster.

Hope this helps,
Joe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 15:57:28 2006
Return-Path: <java-user-return-24113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1346 invoked from network); 18 Oct 2006 15:57:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 15:57:28 -0000
Received: (qmail 89360 invoked by uid 500); 18 Oct 2006 15:57:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89336 invoked by uid 500); 18 Oct 2006 15:57:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89314 invoked by uid 99); 18 Oct 2006 15:57:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 08:57:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.97.157.174] (HELO n007.sc1.cp.net) (64.97.157.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 08:57:16 -0700
Received: from [10.1.1.2] (75.45.172.135) by n007.sc1.cp.net (7.2.069.1) (authenticated as mike@curtin.com)
        id 453579ED00029816 for java-user@lucene.apache.org; Wed, 18 Oct 2006 15:56:35 +0000
Message-ID: <45364EB4.4060705@curtin.com>
Date: Wed, 18 Oct 2006 11:56:36 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: index architectures
References: <200610181905.56302.paul@waite.net.nz> <1161185372.9288.13.camel@posthaste.boston.ximian.com>
In-Reply-To: <1161185372.9288.13.camel@posthaste.boston.ximian.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2006-10-18 at 19:05 +1300, Paul Waite wrote:

> No they don't want that. They just want a small number. What happens is
> they enter some silly query, like searching for all stories with a single
> common non-stop-word in them, and with the usual sort criterion of by date
> (ie. a field) descending, and a limit of, say 25.
>
> So Lucene then presumably has to haul out a massive resultset, sort it, and
> return the top 25 (out of 500,000 or whatever).

I had a similar requirement on a project last year.  I implemented a 
two-pronged approach:

1.  Index (i.e. addDocument()) the documents in the order I wanted the final 
sort to be.

2.  Modify a few classes to give a "first N" results capability.

We had 4 or 5 sort orders, so I had multiple indexes on the same data, 2 per 
sort order (forward and reverse), and used the appropriate one at search time.

It wasn't a one-hour change, but it didn't take a man-year either.  Hope it helps!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 16:37:40 2006
Return-Path: <java-user-return-24114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14621 invoked from network); 18 Oct 2006 16:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 16:37:40 -0000
Received: (qmail 87028 invoked by uid 500); 18 Oct 2006 16:37:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86993 invoked by uid 500); 18 Oct 2006 16:37:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86975 invoked by uid 99); 18 Oct 2006 16:37:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 09:37:31 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.204] (HELO web36412.mail.mud.yahoo.com) (209.191.91.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Oct 2006 09:37:27 -0700
Received: (qmail 5987 invoked by uid 60001); 18 Oct 2006 16:37:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=0IrtF88PiJUwsUUlgLbUub2Bissl/hMBqKX80bob3xLSrsD0UJrKYSa1e4Aweibi6wAxSM9ClWIJMXWeW905Q7jx31zs8r+DoRiagKIPDAygiQwASgjOmlvR+JuDk1kfTDc8EzQriw+xA/2DLLf7IfSZULL7i9SElrqIrQKoXBQ=  ;
Message-ID: <20061018163706.5985.qmail@web36412.mail.mud.yahoo.com>
Received: from [208.210.219.130] by web36412.mail.mud.yahoo.com via HTTP; Wed, 18 Oct 2006 09:37:06 PDT
Date: Wed, 18 Oct 2006 09:37:06 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Error using Luke
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2103275427-1161189426=:4309"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-2103275427-1161189426=:4309
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  I am getting this error when accessing my index with Luke.
   
  No sub-file with id _1.f0 found
   
  Does any one have idea about this??
   
  Any help would be appreciated.
   
  Thanks,
  -Vasu

 		
---------------------------------
Stay in the know. Pulse on the new Yahoo.com.  Check it out. 
--0-2103275427-1161189426=:4309--

From java-user-return-24115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 17:13:28 2006
Return-Path: <java-user-return-24115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28315 invoked from network); 18 Oct 2006 17:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:13:27 -0000
Received: (qmail 65732 invoked by uid 500); 18 Oct 2006 17:13:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65690 invoked by uid 500); 18 Oct 2006 17:13:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65677 invoked by uid 99); 18 Oct 2006 17:13:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:13:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.23.182] (HELO mail.spline-software.com) (194.44.23.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:13:15 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 81EE3329DFA; Wed, 18 Oct 2006 20:12:28 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 3CA1D328A81
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 20:12:27 +0300 (EEST)
Message-ID: <45366079.6050502@i-hypergrid.com>
Date: Wed, 18 Oct 2006 20:12:25 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Error using Luke
References: <20061018163706.5985.qmail@web36412.mail.mud.yahoo.com>
In-Reply-To: <20061018163706.5985.qmail@web36412.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

seems that you created your index with norms turned off and trying to 
open with luke which can contain older version of lucene.

vasu shah wrote:
> Hi,
>    
>   I am getting this error when accessing my index with Luke.
>    
>   No sub-file with id _1.f0 found
>    
>   Does any one have idea about this??
>    
>   Any help would be appreciated.
>    
>   Thanks,
>   -Vasu
>
>  		
> ---------------------------------
> Stay in the know. Pulse on the new Yahoo.com.  Check it out. 
>   

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 17:34:12 2006
Return-Path: <java-user-return-24116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36487 invoked from network); 18 Oct 2006 17:34:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:34:12 -0000
Received: (qmail 47148 invoked by uid 500); 18 Oct 2006 17:34:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47085 invoked by uid 500); 18 Oct 2006 17:34:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46989 invoked by uid 99); 18 Oct 2006 17:34:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:33:59 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.91.205] (HELO web36413.mail.mud.yahoo.com) (209.191.91.205)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Oct 2006 10:33:54 -0700
Received: (qmail 88764 invoked by uid 60001); 18 Oct 2006 17:33:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=nwbYvZ7pfNb5zPj/kqJeJ4w71+aao6nJrsDqvhRfjKvEqmc4yzq98Q44pw/KkeWvpO7DYsxqqCwmFqm7Vg1jpWfBn24JChrprhKIzp22O3wujoyfz4m7K3Q/eCPPsEgqSt4SJD9VTSWTFcADQb+kQaueNQrqAqOz9f8KrpsF4Gs=  ;
Message-ID: <20061018173323.88762.qmail@web36413.mail.mud.yahoo.com>
Received: from [208.210.219.130] by web36413.mail.mud.yahoo.com via HTTP; Wed, 18 Oct 2006 10:33:23 PDT
Date: Wed, 18 Oct 2006 10:33:23 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Re: Error using Luke
To: java-user@lucene.apache.org
In-Reply-To: <45366079.6050502@i-hypergrid.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1346827031-1161192803=:88745"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1346827031-1161192803=:88745
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you very much. I have indeed turned off the norms. 
   
  Is there any new version of Luke that I can use?
   
  Thanks,
  -Vasu

Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com> wrote:
  seems that you created your index with norms turned off and trying to 
open with luke which can contain older version of lucene.

vasu shah wrote:
> Hi,
> 
> I am getting this error when accessing my index with Luke.
> 
> No sub-file with id _1.f0 found
> 
> Does any one have idea about this??
> 
> Any help would be appreciated.
> 
> Thanks,
> -Vasu
>
> 
> ---------------------------------
> Stay in the know. Pulse on the new Yahoo.com. Check it out. 
> 

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 			
---------------------------------
Get your own web address for just $1.99/1st yr. We'll help. Yahoo! Small Business.
--0-1346827031-1161192803=:88745--

From java-user-return-24117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 17:38:20 2006
Return-Path: <java-user-return-24117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37460 invoked from network); 18 Oct 2006 17:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:38:19 -0000
Received: (qmail 61142 invoked by uid 500); 18 Oct 2006 17:38:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61102 invoked by uid 500); 18 Oct 2006 17:38:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61073 invoked by uid 99); 18 Oct 2006 17:38:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:38:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:38:07 -0700
Received: by nf-out-0910.google.com with SMTP id n28so720534nfc
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 10:37:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ECOhn412yWPzdGd16ySd1LWLP2roKWklWSazd7bOUj4BZRC7rW1Pi1xna8qx54Q4GnE0FYcx1sYgYl51UEjAB5zTaww04Y7vbxLtujbDLUKrSFkDEJdxj78s9i18msOma9mEUsNUVEDjYDNY8l0CtbB7U5oAueKZizOY9XFOHPU=
Received: by 10.49.55.13 with SMTP id h13mr4215840nfk;
        Wed, 18 Oct 2006 10:37:41 -0700 (PDT)
Received: from ?192.168.0.102? ( [83.249.40.19])
        by mx.google.com with ESMTP id q28sm1860717nfc.2006.10.18.10.37.40;
        Wed, 18 Oct 2006 10:37:41 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45350B0F.7070109@getopt.org>
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com> <DEE280E6-4D34-4453-95B8-75A0AB160613@gmail.com> <45350B0F.7070109@getopt.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1115A347-6A62-4DBD-BBF7-8B1641008B47@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: near duplicates
Date: Wed, 18 Oct 2006 19:37:32 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


17 okt 2006 kl. 18.55 skrev Andrzej Bialecki:
> You need to create a fuzzy signature of the document, based on term  
> histogram or shingles - take a look a the Signature framework in  
> Nutch.
>
> There is a substantial literature on this subject - go to Citeseer  
> and run a search for "near duplicate detection".

Interesting. I'll have to check this out a bit more some day(tm).

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 17:46:28 2006
Return-Path: <java-user-return-24118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39714 invoked from network); 18 Oct 2006 17:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 17:46:27 -0000
Received: (qmail 93732 invoked by uid 500); 18 Oct 2006 17:45:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93693 invoked by uid 500); 18 Oct 2006 17:45:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93655 invoked by uid 99); 18 Oct 2006 17:45:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:45:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.23.182] (HELO mail.spline-software.com) (194.44.23.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 10:45:50 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 9CC4433EBD2; Wed, 18 Oct 2006 20:45:28 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 83C1C33E792
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 20:45:27 +0300 (EEST)
Message-ID: <45366837.6040402@i-hypergrid.com>
Date: Wed, 18 Oct 2006 20:45:27 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Error using Luke
References: <20061018173323.88762.qmail@web36413.mail.mud.yahoo.com>
In-Reply-To: <20061018173323.88762.qmail@web36413.mail.mud.yahoo.com>
Content-Type: multipart/alternative;
 boundary="------------050206040107050501010906"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_30_40,HTML_MESSAGE autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------050206040107050501010906
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

You can get Lucene 1.9.1 and make Luke use this version. (you need 
luke.jar not luke-all.jar)
version 1.9.1 contains API which is removed in 2.0 version of Lucene (as 
deprecated) and should still be able to read indexes created by Lucene 
2.0 (correct me if I'm wrong)

and then run Luke with command line like this:

java -classpath luke.jar;lucene-1.9.1.jar org.getopt.luke.Luke

vasu shah wrote:
> Thank you very much. I have indeed turned off the norms. 
>    
>   Is there any new version of Luke that I can use?
>    
>   Thanks,
>   -Vasu
>
> Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com> wrote:
>   seems that you created your index with norms turned off and trying to 
> open with luke which can contain older version of lucene.
>
> vasu shah wrote:
>   
>> Hi,
>>
>> I am getting this error when accessing my index with Luke.
>>
>> No sub-file with id _1.f0 found
>>
>> Does any one have idea about this??
>>
>> Any help would be appreciated.
>>
>> Thanks,
>> -Vasu
>>
>>
>> ---------------------------------
>> Stay in the know. Pulse on the new Yahoo.com. Check it out. 
>>
>>     
>
>   

-- 
regards,
Volodymyr Bychkoviak


--------------050206040107050501010906--

From java-user-return-24119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 18:54:04 2006
Return-Path: <java-user-return-24119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67039 invoked from network); 18 Oct 2006 18:54:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 18:54:03 -0000
Received: (qmail 2509 invoked by uid 500); 18 Oct 2006 18:53:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2477 invoked by uid 500); 18 Oct 2006 18:53:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2466 invoked by uid 99); 18 Oct 2006 18:53:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:53:55 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterlkeegan@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 11:53:52 -0700
Received: by ug-out-1314.google.com with SMTP id k40so261880ugc
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 11:53:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=As2E+uxgS+36Vj1zRU4Cn5jdhPuBONWbD95IN4DTPUi0DkdsIC3diEQL6WdOEtJwWQdDY9d2EOQ/rrJxTHvn91Wzr2yyROesodHkxwTtwCL4c/mCrODkFbYxYVLYKdEtkLRg3xhlO58el6aG83aGjKuiOcS86Sl6jYz9tsZEFGI=
Received: by 10.66.220.17 with SMTP id s17mr12397570ugg;
        Wed, 18 Oct 2006 11:53:24 -0700 (PDT)
Received: by 10.66.239.19 with HTTP; Wed, 18 Oct 2006 11:53:24 -0700 (PDT)
Message-ID: <e994873a0610181153uc4ac461v5e70cc7986d884d9@mail.gmail.com>
Date: Wed, 18 Oct 2006 14:53:24 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date
In-Reply-To: <392521EA2692A2418DF48C331E61E32522AE@professorville.windows.esseff.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_176482_21236155.1161197604715"
References: <392521EA2692A2418DF48C331E61E32522AE@professorville.windows.esseff.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_176482_21236155.1161197604715
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>This makes it relatively safe for people to grab a snapshot of the trunk
with less >concern about latent bugs.

>I think the concern is that if we start doing this stuff on trunk now,
people that are >accustomed to snapping from the trunk might be surprised,
and not in a good way.

+1 on this. There are some great performance improvements in 2.0.1

Peter

On 10/17/06, Steven Parkes <steven_parkes@esseff.org> wrote:
>
> I think the idea is that 2.0.1 would be a patch-fix release from the
> branch created at 2.0 release. This release would incorporate only
> back-ported high-impact patches, where "high-impact" is defined by the
> community. Certainly security vulnerabilities would be included. As Otis
> said, to date, nobody seems to have raised any issues to that level.
>
> 2.1 will include all the patches and new features that have been
> committed since 2.0; there've been a number of these. But releases are
> done pretty ad hoc at this point and there hasn't been anyone that has
> expressed strong interest in (i.e., lobbied for) a release.
>
> There was a little discussion on this topic at the ApacheCon BOF. For a
> number of reasons, the Lucene Java trunk has been kept "pretty stable",
> with a relatively few number of large changes. This makes it relatively
> safe for people to grab a snapshot of the trunk with less concern about
> latent bugs. I don't know how many people/projects are doing this rather
> than sticking with 2.0.
>
> Keeping the trunk stable doesn't provide an obvious place to start
> working on things that people may want to work on and share but at the
> same time want to allow to percolate for a while. I think the concern is
> that if we start doing this stuff on trunk now, people that are
> accustomed to snapping from the trunk might be surprised, and not in a
> good way. Nobody wants that.
>
> So releases can be about both what people want (getting features out)
> and allowing a bit more instability in trunk. That is, if the community
> wants that.
>
> Food for thought and/or discussion?
>
> -----Original Message-----
> From: George Aroush [mailto:george@aroush.net]
> Sent: Sunday, October 15, 2006 5:15 PM
> To: java-user@lucene.apache.org
> Subject: RE: Lucene 2.0.1 release date
>
> Thanks for the reply Otis.
>
> I looked at the CHANGES.txt file and saw quit a bit of changes.  For my
> port
> from Java to C#, I can't rely on the trunk code as it is (to my
> knowledge)
> changes on a monthly basic if not weekly.  What I need is an official
> release so that I can use it as the port point.
>
> Regards,
>
> -- George Aroush
>
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Sunday, October 15, 2006 12:41 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene 2.0.1 release date
>
> I'd have to check CHANGES.txt, but I don't think that many bugs have
> been
> fixed and not that many new features added that anyone is itching for a
> new
> release.
>
> Otis
>
> ----- Original Message ----
> From: George Aroush <george@aroush.net>
> To: java-dev@lucene.apache.org; java-user@lucene.apache.org
> Sent: Saturday, October 14, 2006 10:32:47 AM
> Subject: RE: Lucene 2.0.1 release date
>
> Hi folks,
>
> Sorry for reposting this question (see original email below) and this
> time
> to both mailing list.
>
> If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
> appreciate it very much.
>
> As some of you may know, I am the porter of Lucene to Lucene.Net knowing
> when 2.0.1 will be released will help me plan things out.
>
> Regards,
>
> -- George Aroush
>
>
> -----Original Message-----
> From: George Aroush [mailto:george@aroush.net]
> Sent: Thursday, October 12, 2006 12:07 AM
> To: java-dev@lucene.apache.org
> Subject: Lucene 2.0.1 release date
>
> Hi folks,
>
> What's the plan for Lucene 2.0.1 release date?
>
> Thanks!
>
> -- George Aroush
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-dev-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_176482_21236155.1161197604715--

From java-user-return-24120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 19:14:29 2006
Return-Path: <java-user-return-24120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76290 invoked from network); 18 Oct 2006 19:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 19:14:29 -0000
Received: (qmail 54798 invoked by uid 500); 18 Oct 2006 19:14:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54755 invoked by uid 500); 18 Oct 2006 19:14:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54744 invoked by uid 99); 18 Oct 2006 19:14:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:14:22 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of guerrebear@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:14:21 -0700
Received: by nz-out-0102.google.com with SMTP id k1so135874nzf
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 12:14:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cFi/V0C8ugdxU2R0gptgFqJu2aX/fzwS63TP4tf7jaTs/YgZt5ZHRR5xOJZuskZTmkx2ViX1d3Mpe9NG4N/98YW1QJ40b9T29zv6FYTr+v6GU3v7yuZ8QJtaCYRbyrbmdsb2aZ7vDglRH1bD5ys2niSPdbm/gvfVRlyvwca70MA=
Received: by 10.64.148.8 with SMTP id v8mr15064347qbd;
        Wed, 18 Oct 2006 12:14:00 -0700 (PDT)
Received: by 10.65.155.7 with HTTP; Wed, 18 Oct 2006 12:14:00 -0700 (PDT)
Message-ID: <12ab69b30610181214sfd137cep51dd6b14b216d633@mail.gmail.com>
Date: Wed, 18 Oct 2006 12:14:00 -0700
From: "Guerre Bear" <guerrebear@gmail.com>
To: java-user@lucene.apache.org
Subject: Scalability Questions
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93438_31777116.1161198840181"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_93438_31777116.1161198840181
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello All,

Lucene looks very interesting to me.  I was wondering if any of you could
comment on a few questions:

1) Assuming I use a typical server such as a dual-core dual-processor Dell
2950, about how many files can Lucene index and still have a sub-two-second
search speed for a simple search string such as "invoice 2005 mitsubishi"?
For the sake of argument, I figure that a typical file will have about 30KB
of text in it.

2) How many of these servers would it take to manage an index of one billion
such files?

3) Are there any HOWTO's on constructing a large Lucene search cluster?

4) Roughly how large is the index file in comparison to the size of the
input files?

5) How does Lucene's search performance/scalability compare to some of the
expensive commercial search products such as Fast?  (www.fastsearch.com)

Thank you all for any comments or suggestions!

Guerre

------=_Part_93438_31777116.1161198840181--

From java-user-return-24121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 19:26:38 2006
Return-Path: <java-user-return-24121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85472 invoked from network); 18 Oct 2006 19:26:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 19:26:37 -0000
Received: (qmail 88780 invoked by uid 500); 18 Oct 2006 19:26:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88718 invoked by uid 500); 18 Oct 2006 19:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88707 invoked by uid 99); 18 Oct 2006 19:26:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:26:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.175] (HELO smtpout.mac.com) (17.250.248.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:26:29 -0700
Received: from mac.com (smtpin05-en2 [10.13.10.150])
	by smtpout.mac.com (Xserve/8.12.11/smtpout05/MantshX 4.0) with ESMTP id k9IJQ79Y009471
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 12:26:07 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin05/MantshX 4.0) with ESMTP id k9IJQ1NC028666
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 12:26:06 -0700 (PDT)
Message-ID: <45367FC7.8030107@mac.com>
Date: Wed, 18 Oct 2006 15:25:59 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: DateTools oddity....
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When I run this java code:

    Long dates = new Long("1154481345000");
    Date dada = new Date(dates.longValue());
    System.out.println(dada.toString());
    System.out.println(DateTools.dateToString(dada, 
DateTools.Resolution.DAY));

I get this output:

    Tue Aug 01 21:15:45 EDT 2006
    20060802

Huh?!  Should it be:
    20060801

??

Any ideas?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 19:31:17 2006
Return-Path: <java-user-return-24122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86553 invoked from network); 18 Oct 2006 19:31:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 19:31:17 -0000
Received: (qmail 96020 invoked by uid 500); 18 Oct 2006 19:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95575 invoked by uid 500); 18 Oct 2006 19:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95555 invoked by uid 99); 18 Oct 2006 19:31:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:31:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.74.196.209] (HELO drachma.dmz.atl2.jboss.com) (64.74.196.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:31:08 -0700
Received: from [127.0.0.1] (drachma.dmz.atl2.jboss.com [64.74.196.209])
	by drachma.dmz.atl2.jboss.com (8.12.11.20060308/8.12.11) with ESMTP id k9IJUk9l014996
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 15:30:47 -0400
Message-ID: <453680E4.8030802@hibernate.org>
Date: Wed, 18 Oct 2006 15:30:44 -0400
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DateTools oddity....
References: <45367FC7.8030107@mac.com>
In-Reply-To: <45367FC7.8030107@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DateTools use GMT as a timezone
    Tue Aug 01 21:15:45 EDT 2006
    Wed Aug 02 02:15:45 EDT 2006

Michael J. Prichard wrote:
>
> When I run this java code:
>
>     Long dates = new Long("1154481345000");
>     Date dada = new Date(dates.longValue());
>     System.out.println(dada.toString());
>     System.out.println(DateTools.dateToString(dada,
> DateTools.Resolution.DAY));
>
> I get this output:
>
>     Tue Aug 01 21:15:45 EDT 2006
>     20060802
>
> Huh?!  Should it be:
>     20060801
>
> ??
>
> Any ideas?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 19:34:33 2006
Return-Path: <java-user-return-24123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87361 invoked from network); 18 Oct 2006 19:34:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 19:34:33 -0000
Received: (qmail 5423 invoked by uid 500); 18 Oct 2006 19:34:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5388 invoked by uid 500); 18 Oct 2006 19:34:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5377 invoked by uid 99); 18 Oct 2006 19:34:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:34:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.148.227.151] (HELO rwcrmhc11.comcast.net) (216.148.227.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:34:25 -0700
Received: from [192.168.168.15] (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc11) with ESMTP
          id <20061018193404m1100rv60te>; Wed, 18 Oct 2006 19:34:04 +0000
Message-ID: <453681AC.3000105@apache.org>
Date: Wed, 18 Oct 2006 12:34:04 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: DateTools oddity....
References: <45367FC7.8030107@mac.com>
In-Reply-To: <45367FC7.8030107@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael J. Prichard wrote:
> I get this output:
> 
>    Tue Aug 01 21:15:45 EDT 2006

That's August 2, 2006 at 01:15:45 GMT.

>    20060802
> 
> Huh?!  Should it be:
>    20060801

DateTools uses GMT.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 19:39:06 2006
Return-Path: <java-user-return-24124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88237 invoked from network); 18 Oct 2006 19:39:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 19:39:06 -0000
Received: (qmail 13308 invoked by uid 500); 18 Oct 2006 19:38:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13283 invoked by uid 500); 18 Oct 2006 19:38:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13272 invoked by uid 99); 18 Oct 2006 19:38:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:38:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.173] (HELO smtpout.mac.com) (17.250.248.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:38:56 -0700
Received: from mac.com (smtpin05-en2 [10.13.10.150])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id k9IJeNAw026001
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 12:40:23 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin05/MantshX 4.0) with ESMTP id k9IJcXob004129
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 12:38:35 -0700 (PDT)
Message-ID: <453682B9.2070207@mac.com>
Date: Wed, 18 Oct 2006 15:38:33 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DateTools oddity....
References: <45367FC7.8030107@mac.com> <453680E4.8030802@hibernate.org>
In-Reply-To: <453680E4.8030802@hibernate.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dang it :)

Anyway to set timezone?

Emmanuel Bernard wrote:

> DateTools use GMT as a timezone
>    Tue Aug 01 21:15:45 EDT 2006
>    Wed Aug 02 02:15:45 EDT 2006
>
> Michael J. Prichard wrote:
>
>>
>> When I run this java code:
>>
>>     Long dates = new Long("1154481345000");
>>     Date dada = new Date(dates.longValue());
>>     System.out.println(dada.toString());
>>     System.out.println(DateTools.dateToString(dada,
>> DateTools.Resolution.DAY));
>>
>> I get this output:
>>
>>     Tue Aug 01 21:15:45 EDT 2006
>>     20060802
>>
>> Huh?!  Should it be:
>>     20060801
>>
>> ??
>>
>> Any ideas?
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 19:57:25 2006
Return-Path: <java-user-return-24125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96745 invoked from network); 18 Oct 2006 19:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 19:57:24 -0000
Received: (qmail 79779 invoked by uid 500); 18 Oct 2006 19:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79749 invoked by uid 500); 18 Oct 2006 19:57:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79732 invoked by uid 99); 18 Oct 2006 19:57:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:57:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.74.196.209] (HELO drachma.dmz.atl2.jboss.com) (64.74.196.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 12:57:14 -0700
Received: from [127.0.0.1] (drachma.dmz.atl2.jboss.com [64.74.196.209])
	by drachma.dmz.atl2.jboss.com (8.12.11.20060308/8.12.11) with ESMTP id k9IJup51024235
	for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 15:56:54 -0400
Message-ID: <45368701.7000406@hibernate.org>
Date: Wed, 18 Oct 2006 15:56:49 -0400
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DateTools oddity....
References: <45367FC7.8030107@mac.com> <453680E4.8030802@hibernate.org> <453682B9.2070207@mac.com>
In-Reply-To: <453682B9.2070207@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No, but using a constant timezone is a good thing anyway since the index 
will not keep track of the info. And will not really care as long as you 
always use DateTools (index and search).
You can always rewrite DateTools with your own timezone, but EDT is bad 
since it is vulnerable to Day light saving mess.

Michael J. Prichard wrote:
> Dang it :)
>
> Anyway to set timezone?
>
> Emmanuel Bernard wrote:
>
>> DateTools use GMT as a timezone
>>    Tue Aug 01 21:15:45 EDT 2006
>>    Wed Aug 02 02:15:45 EDT 2006
>>
>> Michael J. Prichard wrote:
>>
>>>
>>> When I run this java code:
>>>
>>>     Long dates = new Long("1154481345000");
>>>     Date dada = new Date(dates.longValue());
>>>     System.out.println(dada.toString());
>>>     System.out.println(DateTools.dateToString(dada,
>>> DateTools.Resolution.DAY));
>>>
>>> I get this output:
>>>
>>>     Tue Aug 01 21:15:45 EDT 2006
>>>     20060802
>>>
>>> Huh?!  Should it be:
>>>     20060801
>>>
>>> ??
>>>
>>> Any ideas?
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 20:00:24 2006
Return-Path: <java-user-return-24126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97431 invoked from network); 18 Oct 2006 20:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 20:00:23 -0000
Received: (qmail 85657 invoked by uid 500); 18 Oct 2006 20:00:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85631 invoked by uid 500); 18 Oct 2006 20:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85620 invoked by uid 99); 18 Oct 2006 20:00:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:00:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.173.110.23] (HELO mailgw.postbulletin.com) (66.173.110.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:00:15 -0700
Received: from TS18 [10.117.240.254] by mailgw.postbulletin.com with ESMTP
  (SMTPD32-8.05) id A7B7D860122; Wed, 18 Oct 2006 14:59:51 -0500
From: "Paul Snyder" <psnyder@postbulletin.com>
To: <java-user@lucene.apache.org>
Subject: RE: DateTools oddity....
Date: Wed, 18 Oct 2006 14:59:47 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <453682B9.2070207@mac.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Acby7SIa32ToEEIjTImyihuJp4j/YQAABcOw
Message-Id: <200610181459453.SM03404@TS18>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

DITTO !!!

I like date truncation, but when I store a truncated date, I don't want to
retrieve the time in Greenwich, England at midnight of the date I'm
truncating in the local machine's time zone.  Nothing against the Brits, it
just doesn't do me any good to know what time it was over there on the day
in question.  What I want back is midnight of the correct day in the time
zone of the local machine.  In other words, when I specify DAY resolution,
I'm saying TIME-ZONE IS IRRELEVENT, ALWAYS GIVE ME THE CORRECT DATE IN THE
LOCAL TIME ZONE.

Understanding the need for backwards-compatibility, I vote that there ought
to be some kind of parameter I can set when converting Date-To-String and
String-To-Date to force TRUNCATION of a date (as in Oracle, for example) so
that it will return the correct date in local time when retrieved.

Without the ability to force symmetrical storage-retrieval, I think any
DateTools Resolutions to time units greater than hours has no practical
value and only serves to mislead people.

-----Original Message-----
From: Michael J. Prichard [mailto:michael_prichard@mac.com] 
Sent: Wednesday, October 18, 2006 2:39 PM
To: java-user@lucene.apache.org
Subject: Re: DateTools oddity....

Dang it :)

Anyway to set timezone?

Emmanuel Bernard wrote:

> DateTools use GMT as a timezone
>    Tue Aug 01 21:15:45 EDT 2006
>    Wed Aug 02 02:15:45 EDT 2006
>
> Michael J. Prichard wrote:
>
>>
>> When I run this java code:
>>
>>     Long dates = new Long("1154481345000");
>>     Date dada = new Date(dates.longValue());
>>     System.out.println(dada.toString());
>>     System.out.println(DateTools.dateToString(dada,
>> DateTools.Resolution.DAY));
>>
>> I get this output:
>>
>>     Tue Aug 01 21:15:45 EDT 2006
>>     20060802
>>
>> Huh?!  Should it be:
>>     20060801
>>
>> ??
>>
>> Any ideas?
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 20:51:55 2006
Return-Path: <java-user-return-24127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20445 invoked from network); 18 Oct 2006 20:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 20:51:55 -0000
Received: (qmail 10714 invoked by uid 500); 18 Oct 2006 20:51:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10684 invoked by uid 500); 18 Oct 2006 20:51:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10672 invoked by uid 99); 18 Oct 2006 20:51:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:51:47 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 13:51:46 -0700
Received: by py-out-1112.google.com with SMTP id i49so471091pyi
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 13:50:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=t0RzOuMiBzW06UccVhy/kHK4mCmlhzoXZoceAtNHGAZ5gujLuaQd9braqSVacyGP753+yN2HgaPnUMhJ7u9LfOPqUUF7Dd4QmqwL51XfgcBZMT40dgn7JXvVocVj8pLqNH2qRNy4s5cQnJo4NWZOn8druX00r0e7DubewMt/+4s=
Received: by 10.35.66.13 with SMTP id t13mr18575025pyk;
        Wed, 18 Oct 2006 13:50:53 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 18 Oct 2006 13:50:53 -0700 (PDT)
Message-ID: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
Date: Wed, 18 Oct 2006 16:50:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: termpositions at index time...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3238_20246051.1161204653228"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3238_20246051.1161204653228
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here's my problem:

We're indexing books. I need to
a> return books ordered by relevancy
b> for any single book, return the number of hits in each chapter (which, of
course, may be many pages).

1>If I index each page as a document, creating the relevance on a book basis
is interesting, but collecting page hits per book is easy.
2>If I index each book as a document, returning the books by relevance is
easy but aggregating hits per chapter is interesting.

No, creating two indexes is not an option at present, although that would be
the least work for me.....

I can make <2> work if, for a particular field, I can determine what the
last termposition on each page is *at index time*. Oh, we don't want
searches to span pages. Pages are added to the doc with multiple calls like
so....

doc.add('"field", first page text);
doc.add('"field", second page text);
doc.add('"field", third page text);


The only approach I've really managed to come up with so far is to make my
own Analyzer that has the following characteristics...
1> override getPositionIncrementGap for this field and return, say, 100.
This should keep us from spanning pages, and provide a convenient trigger
for me to know we've finished (or are starting to) index a new page.
2> record the last token position and provide a mechanism for me to retrieve
that number. I can then keep a record in this document of what offset each
page starts at, and then accomplish my aggregation by storing, with the
document, the termpositions of the start (or end) of each page.

Note, I'm rolling my own counter for where terms hit. It'll be a degenerate
case of only ANDing things together, so it should be pretty simple even in
the wildcard case.

I'm using the Srnd* classes to do my spans, since they may include wildcards
and don't see a way to get a Spans object from that, but it's late in the
day <G>.

Last time I appealed to y'all, you wrote back that it was already done. My
hope is that it's already done again, but I've spent a couple of hours
looking and it isn't obvious to me. What I want is a way to do something
like this....

doc.add('"field", first page text);
int pos = XXX.getLastTermPosition("field");
doc.add('"field", second page text);
pos = XXX.getLastTermPosition("field");
doc.add('"field", third page text);
pos = XXX.getLastTermPosition("field");

But if I understand what's happening, the text doesn't get analyzed until
the doc is added to the index, all the doc.add(field, value) is just set-up
work without any position information really being available yet. I'd be
happy to be wrong about that <G>.

Thanks
Erick

------=_Part_3238_20246051.1161204653228--

From java-user-return-24128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 21:00:34 2006
Return-Path: <java-user-return-24128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23072 invoked from network); 18 Oct 2006 21:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 21:00:34 -0000
Received: (qmail 37628 invoked by uid 500); 18 Oct 2006 21:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37600 invoked by uid 500); 18 Oct 2006 21:00:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37589 invoked by uid 99); 18 Oct 2006 21:00:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 14:00:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.97.157.140] (HELO n034.sc1.cp.net) (64.97.157.140)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 14:00:24 -0700
Received: from [10.1.1.2] (75.45.172.135) by n034.sc1.cp.net (7.2.069.1) (authenticated as mike@curtin.com)
        id 453687D600003720 for java-user@lucene.apache.org; Wed, 18 Oct 2006 20:59:59 +0000
Message-ID: <453695D1.2050907@curtin.com>
Date: Wed, 18 Oct 2006 17:00:01 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: termpositions at index time...
References: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
In-Reply-To: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick Erickson wrote:

> Here's my problem:
> 
> We're indexing books. I need to
> a> return books ordered by relevancy
> b> for any single book, return the number of hits in each chapter 
> (which, of
> course, may be many pages).
> 
> 1>If I index each page as a document, creating the relevance on a book 
> basis
> is interesting, but collecting page hits per book is easy.
> 2>If I index each book as a document, returning the books by relevance is
> easy but aggregating hits per chapter is interesting.
> 
> No, creating two indexes is not an option at present, although that 
> would be
> the least work for me.....

Could you elaborate on why this approach isn't an option?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 21:50:46 2006
Return-Path: <java-user-return-24129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39317 invoked from network); 18 Oct 2006 21:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 21:50:41 -0000
Received: (qmail 27576 invoked by uid 500); 18 Oct 2006 21:50:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27538 invoked by uid 500); 18 Oct 2006 21:50:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27522 invoked by uid 99); 18 Oct 2006 21:50:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 14:50:34 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 14:50:31 -0700
Received: by py-out-1112.google.com with SMTP id f25so518917pyf
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 14:49:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=M0HNg9NFVfxAHYQ2NGpS8PpLkbzT3UAaciJSkTmkttTCDU2RbpsRgta4GCBgmygwjfMmfgQEj5LDKLIbXJP3Xt3OYbFcnJIr3nPNkdt3GefCPMAAc8+n8vN0OSD5fXu5wOG3uLJkczTtzeia5OMQaXr+hOwALWoF5qyA5yBnFhc=
Received: by 10.35.102.18 with SMTP id e18mr18658971pym;
        Wed, 18 Oct 2006 14:49:37 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 18 Oct 2006 14:49:37 -0700 (PDT)
Message-ID: <359a92830610181449q74d8dc5cj3954445e40685077@mail.gmail.com>
Date: Wed, 18 Oct 2006 17:49:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: termpositions at index time...
In-Reply-To: <453695D1.2050907@curtin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3918_16676301.1161208177044"
References: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
	 <453695D1.2050907@curtin.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3918_16676301.1161208177044
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Arbitrary restrictions by IT on the space the indexes can take up.

Actually, I won't categorically I *can't* make this happen, but in order to
use this option, I need to be able to present a convincing case. And I can't
do that until I've exhausted my options/creativity.

And this it way keeps folks on the list from suggesting it when I've already
thought of it.

Erick

On 10/18/06, Michael D. Curtin <mike@curtin.com> wrote:
>
> Erick Erickson wrote:
>
> > Here's my problem:
> >
> > We're indexing books. I need to
> > a> return books ordered by relevancy
> > b> for any single book, return the number of hits in each chapter
> > (which, of
> > course, may be many pages).
> >
> > 1>If I index each page as a document, creating the relevance on a book
> > basis
> > is interesting, but collecting page hits per book is easy.
> > 2>If I index each book as a document, returning the books by relevance
> is
> > easy but aggregating hits per chapter is interesting.
> >
> > No, creating two indexes is not an option at present, although that
> > would be
> > the least work for me.....
>
> Could you elaborate on why this approach isn't an option?
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3918_16676301.1161208177044--

From java-user-return-24130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 22:13:28 2006
Return-Path: <java-user-return-24130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45276 invoked from network); 18 Oct 2006 22:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:13:28 -0000
Received: (qmail 68296 invoked by uid 500); 18 Oct 2006 22:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68037 invoked by uid 500); 18 Oct 2006 22:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68026 invoked by uid 99); 18 Oct 2006 22:13:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:13:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.97.157.163] (HELO n034.sc1.cp.net) (64.97.157.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:13:20 -0700
Received: from [10.1.1.2] (75.45.172.135) by n034.sc1.cp.net (7.2.069.1) (authenticated as mike@curtin.com)
        id 453687D600007072 for java-user@lucene.apache.org; Wed, 18 Oct 2006 22:12:57 +0000
Message-ID: <4536A6EB.300@curtin.com>
Date: Wed, 18 Oct 2006 18:12:59 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: termpositions at index time...
References: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>	 <453695D1.2050907@curtin.com> <359a92830610181449q74d8dc5cj3954445e40685077@mail.gmail.com>
In-Reply-To: <359a92830610181449q74d8dc5cj3954445e40685077@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick Erickson wrote:

> Arbitrary restrictions by IT on the space the indexes can take up.
> 
> Actually, I won't categorically I *can't* make this happen, but in order to
> use this option, I need to be able to present a convincing case. And I 
> can't
> do that until I've exhausted my options/creativity.

Disk space is a LOT cheaper than engineering time.  Any manager worth his/her 
salt should be able to evaluate that tradeoff in a millisecond, and any IT 
professional unable to do so should be reprimanded.  Maybe your boss can fix 
it.  If not, yours is probably not the only such situation in the world ...

If you can retrieve the pre-index content at search time, maybe this would work:

1.  Create the "real" index in the form that lets you get the top N books by 
relevance, on IT's disks.

2.  Create a temporary index on those books in the form that gives you the 
chapter counts in RAM, search it, then discard it.

If N is sufficiently small, #2 could be pretty darn fast.


If that wouldn't work, here's another idea.  I'm not clear on how your 
solution with getLastTermPosition() would work, but how about just counting 
words in the pages as you document.add() them (instead of relying on 
getLastTermPosition())?  It would mean two passes of parsing, but you wouldn't 
have to modify any Lucene code ...

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Oct 18 22:41:22 2006
Return-Path: <java-user-return-24131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51812 invoked from network); 18 Oct 2006 22:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Oct 2006 22:41:22 -0000
Received: (qmail 33189 invoked by uid 500); 18 Oct 2006 22:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32668 invoked by uid 500); 18 Oct 2006 22:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32657 invoked by uid 99); 18 Oct 2006 22:41:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:41:15 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of drjat320@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 15:41:15 -0700
Received: by nf-out-0910.google.com with SMTP id b2so773089nfe
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 15:40:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=mkWP8n94H1OlFlvmJqk2duPj4s7Hdxyv7Lw0ebODTe5lEegnVd7cOIGeHSEsxEvaDDZvSjnhQ2ExNnId4TVPkxMHNtJF/H305VIW0J+d4OvumK3gPxRz4d5CZ4sfqJSs70IQgLmCVWTOhlOA8sdPidggDnYfJl+WsMHspr73zZU=
Received: by 10.82.136.4 with SMTP id j4mr2633669bud;
        Wed, 18 Oct 2006 15:40:52 -0700 (PDT)
Received: by 10.82.129.20 with HTTP; Wed, 18 Oct 2006 15:40:52 -0700 (PDT)
Message-ID: <288e77f30610181540o59963485q9e2d058290c76114@mail.gmail.com>
Date: Wed, 18 Oct 2006 18:40:52 -0400
From: "d rj" <drjat320@gmail.com>
To: java-user@lucene.apache.org
Subject: question regarding usage of IndexWriter.setMaxFieldLength()
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76574_8500512.1161211252954"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_76574_8500512.1161211252954
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello-

I was wondering about the usage of IndexWriter.setMaxFieldLength()
it is limited, by default, to 10k terms per field.  Can anyone tell me if
this is this a "per field" limit or a "per uniquely named field" limit?
I.e. in the following snippet I add many words to different Fields all w/
the same name.  Will all words be indexed w/ no problem allowing me to
conduct a search across the "text" field for any word occurring in any these
long strings?

string longString1 = <~9k words in string>;
string longString2 = <~9k words in string>;
string longString3 = <~9k words in string>;

Document doc = new Document();
doc.add(new Field("text", longString1, Field.Store.YES,
Field.Index.UN_TOKENIZED));
doc.add(new Field("text", longString2, Field.Store.YES,
Field.Index.UN_TOKENIZED));
doc.add(new Field("text", longString3, Field.Store.YES,
Field.Index.UN_TOKENIZED));


thanks.
-david

------=_Part_76574_8500512.1161211252954--

From java-user-return-24132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 00:06:11 2006
Return-Path: <java-user-return-24132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68408 invoked from network); 19 Oct 2006 00:06:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 00:06:10 -0000
Received: (qmail 84527 invoked by uid 500); 19 Oct 2006 00:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84498 invoked by uid 500); 19 Oct 2006 00:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 72056 invoked by uid 99); 18 Oct 2006 23:50:52 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of john.casey@gmail.com designates 64.233.182.184 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=rMb59bWIBRsZViq6+bMuXuWIpD4woutCo2FePANr/Khne81G0KYlOyu/pl+mH4wBKbQX6LxM/4e9SXan08oeZze+Ucnd/dNiES4c3vlDvozHxF5YdV0IbC4IGg+s8u0fZ40JXYWYWJOfRzlQlp6Yh0v430qrufuPVI6FeuCRlBE=
Message-ID: <be7f17170610181650p40a3aca4p9228a2774ddd06ef@mail.gmail.com>
Date: Thu, 19 Oct 2006 09:50:27 +1000
From: "John Casey" <john.casey@gmail.com>
Reply-To: jacasey@deakin.edu.au
To: nutch-user@lucene.apache.org, idrost@htwm.de
Subject: Re: near duplicates
Cc: "Find Me" <findmath@gmail.com>, java-user@lucene.apache.org
In-Reply-To: <200610181103.47579.drost@informatik.hu-berlin.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75553_23844763.1161215427041"
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com>
	 <200610181103.47579.drost@informatik.hu-berlin.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_75553_23844763.1161215427041
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 10/18/06, Isabel Drost <idrost@htwm.de> wrote:
>
> Find Me wrote:
> > How to eliminate near duplicates from the index? Someone suggested that
> I
> > could look at the TermVectors and do a comparision to remove the
> > duplicates.
>
> As an alternative you could also have a look at the paper "Detecting
> Phrase-Level Duplication on the World Wide Web" by Dennis Fetterly, Mark
> Manasse, Marc Najork.


Another good reference would be Soumen Chakrabarti's reference book, "Mining
the Web - Discovering Knowledge from Hypertext Data",2003 and the section on
shingling and the elimination of near duplicates. Of course I think this
works at the document level rather than at the term vector level but it
might be useful to prevent duplicate documents from being indexed
altogether.

> One major problem with this is the structure of the document is
> > no longer important. Are there any obvious pitfalls? For example:
> Document
> > A being a subset of Document B but in no particular order.
>
> I think this case is pretty unlikely. But I am not sure whether you can
> detect
> near duplicates by only comparing term-document vectors. There might be
> problems with documents with slightly changed words, words that were
> replaced
> with synonyms...
>
> However, if you want to keep some information on the word order, you might
> consider comparing n-gram document vectors. That is, each dimension in the
>
> vector does not only represent one word but a sequence of 2, 3, 4, 5...
> words.



would this involve something like a window of 2-5 words around a particular
term in a document?

Cheers,
> Isabel
>

------=_Part_75553_23844763.1161215427041--

From java-user-return-24133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 00:25:32 2006
Return-Path: <java-user-return-24133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85698 invoked from network); 19 Oct 2006 00:25:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 00:25:31 -0000
Received: (qmail 32403 invoked by uid 500); 19 Oct 2006 00:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32369 invoked by uid 500); 19 Oct 2006 00:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32358 invoked by uid 99); 19 Oct 2006 00:25:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 17:25:24 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 17:25:23 -0700
Received: by nz-out-0102.google.com with SMTP id k1so169221nzf
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 17:25:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nYrxMO1Eyzz4oaZyVzTB3acOH+S6zH2jqqOmRZW7Qzdk+0gelx/DqicPj7yOYDDMPQdtDaRcjaPkRRnfLq3q+nYvng1TMfynlIh/O8GYL7XHTclK28CmSWODukki9c2oSL0p2GoQ5NflcdzJguGKmH7TVpPjas3terlhGVffEPU=
Received: by 10.65.249.10 with SMTP id b10mr15478560qbs;
        Wed, 18 Oct 2006 17:25:02 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 18 Oct 2006 17:25:02 -0700 (PDT)
Message-ID: <359a92830610181725p350e5e5fvde699b896028730c@mail.gmail.com>
Date: Wed, 18 Oct 2006 20:25:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question regarding usage of IndexWriter.setMaxFieldLength()
In-Reply-To: <288e77f30610181540o59963485q9e2d058290c76114@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5114_15232680.1161217502816"
References: <288e77f30610181540o59963485q9e2d058290c76114@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5114_15232680.1161217502816
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I had a similar question a while ago and the answer is "you can't cheat".
According to what the guys said, this

doc.add("field", <a 10,000 word string>)
doc.add("field", <a 10,000 word string>)
doc.add("field", <a 10,000 word string>)

is just the same as this

doc.add("field", <a 30,000 word string>)

But go ahead and increase the maxfieldlength. I'm successfully indexing
(unstored) a 7,500 page book with all the text as a single field. I think I
set the maxfieldlength at something like 10,000,000.

Had to bump the max memory in the JVM to do it, but it worked.

Erick


On 10/18/06, d rj <drjat320@gmail.com> wrote:
>
> Hello-
>
> I was wondering about the usage of IndexWriter.setMaxFieldLength()
> it is limited, by default, to 10k terms per field.  Can anyone tell me if
> this is this a "per field" limit or a "per uniquely named field" limit?
> I.e. in the following snippet I add many words to different Fields all w/
> the same name.  Will all words be indexed w/ no problem allowing me to
> conduct a search across the "text" field for any word occurring in any
> these
> long strings?
>
> string longString1 = <~9k words in string>;
> string longString2 = <~9k words in string>;
> string longString3 = <~9k words in string>;
>
> Document doc = new Document();
> doc.add(new Field("text", longString1, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.add(new Field("text", longString2, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.add(new Field("text", longString3, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
>
> thanks.
> -david
>
>

------=_Part_5114_15232680.1161217502816--

From java-user-return-24134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 00:31:42 2006
Return-Path: <java-user-return-24134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86271 invoked from network); 19 Oct 2006 00:31:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 00:31:42 -0000
Received: (qmail 38656 invoked by uid 500); 19 Oct 2006 00:31:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38318 invoked by uid 500); 19 Oct 2006 00:31:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38307 invoked by uid 99); 19 Oct 2006 00:31:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 17:31:35 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 17:31:34 -0700
Received: by nz-out-0102.google.com with SMTP id k1so170600nzf
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 17:31:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ldm3f7AdQVaQWlJTvpjUn5vFgvzN6TL+oUxZyCjS5d7/KyHQ/o8kxvbz7U4q/8YLUNW7fdX7jCDgHE2Cj9BKCI2OiDoVDML0pQ4Nu8ZRBcMeoW+mjWHGGfyjRU98RT2XkKffND3GTtvuCpFqVHP4tmnmhIHBel5sy6zEdRG3+OU=
Received: by 10.35.49.15 with SMTP id b15mr18921378pyk;
        Wed, 18 Oct 2006 17:21:10 -0700 (PDT)
Received: by 10.35.9.18 with HTTP; Wed, 18 Oct 2006 17:21:10 -0700 (PDT)
Message-ID: <359a92830610181721k71eaa2f4na969dc6fa3b179f9@mail.gmail.com>
Date: Wed, 18 Oct 2006 20:21:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: termpositions at index time...
In-Reply-To: <4536A6EB.300@curtin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5090_29750889.1161217270046"
References: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
	 <453695D1.2050907@curtin.com>
	 <359a92830610181449q74d8dc5cj3954445e40685077@mail.gmail.com>
	 <4536A6EB.300@curtin.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5090_29750889.1161217270046
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I tried the notion of a temporary RAMDirectory already, and the documents
parse unacceptably slowly , 8-10 seconds. Great minds think alike. Believe
it or not, I have to deal with a 7,500 page book that details Civil War
records of Michigan volunteers. The XML form is 24M, probably 16M of text
exclusive of tags.

About your second suggestion, I'm trying to figure out how to do essentially
that. But a word count isn't very straight forward with stop words and dirty
ascii (OCR) data. I'm trying to hook that process into the tokenizer so the
counts have a better chance of being accurate, which is the essence of the
scheme. I'd far rather get the term offset from the same place the indexer
will than try to do a similar-but-not-quite-identical algorithm that failed
miserably on, say, the 3,000th and subsequent pages... I'm sure you've been
somewhere similar....

OK, you've just caused me to think a bit, for which I thank you. I think
it's actually pretty simple. Just instantiate a class that is a thin wrapper
around the Lucene analyzer that implements the tokenstream (or whatever)
interface by calling a contained analyzer (has-a). Return the token and do
any recording I want to. And provide any additional data  to my process as
necessary. I'll have to look at that in the morning.

All in all, I'm probably going to make your exact argument about disk space
being waaaay cheaper than engineering time. That said, exploring this serves
two purposes; first it lets me back my recommendation with data. Second, and
longer term, we're using Lucene on more and more products, and exploring the
nooks and crannies involved in exotic schemes vastly increases my ability to
quickly tirage ways of doing things. The *other* thing my boss is good at is
being OK with a reasonable amount of time "wasted" in order to increase my
toolkit. So it isn't as frustrating as it might have appeared by my rather
off-hand blaming of IT <G>.

Thanks for the suggestions,
Erick

On 10/18/06, Michael D. Curtin <mike@curtin.com> wrote:
>
> Erick Erickson wrote:
>
> > Arbitrary restrictions by IT on the space the indexes can take up.
> >
> > Actually, I won't categorically I *can't* make this happen, but in order
> to
> > use this option, I need to be able to present a convincing case. And I
> > can't
> > do that until I've exhausted my options/creativity.
>
> Disk space is a LOT cheaper than engineering time.  Any manager worth
> his/her
> salt should be able to evaluate that tradeoff in a millisecond, and any IT
> professional unable to do so should be reprimanded.  Maybe your boss can
> fix
> it.  If not, yours is probably not the only such situation in the world
> ...
>
> If you can retrieve the pre-index content at search time, maybe this would
> work:
>
> 1.  Create the "real" index in the form that lets you get the top N books
> by
> relevance, on IT's disks.
>
> 2.  Create a temporary index on those books in the form that gives you the
> chapter counts in RAM, search it, then discard it.
>
> If N is sufficiently small, #2 could be pretty darn fast.
>
>
> If that wouldn't work, here's another idea.  I'm not clear on how your
> solution with getLastTermPosition() would work, but how about just
> counting
> words in the pages as you document.add() them (instead of relying on
> getLastTermPosition())?  It would mean two passes of parsing, but you
> wouldn't
> have to modify any Lucene code ...
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5090_29750889.1161217270046--

From java-user-return-24135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 01:23:08 2006
Return-Path: <java-user-return-24135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17064 invoked from network); 19 Oct 2006 01:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 01:23:07 -0000
Received: (qmail 13677 invoked by uid 500); 19 Oct 2006 01:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13637 invoked by uid 500); 19 Oct 2006 01:23:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13616 invoked by uid 99); 19 Oct 2006 01:23:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 18:23:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.48.84.103] (HELO mail.waite.net.nz) (210.48.84.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 18:22:59 -0700
Received: from localhost ([127.0.0.1])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1GaMcG-0003oQ-T1
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 14:22:36 +1300
Received: from mail.waite.net.nz ([127.0.0.1])
	by localhost (gandalf [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 14529-03 for <java-user@lucene.apache.org>;
	Thu, 19 Oct 2006 14:22:31 +1300 (NZDT)
Received: from frodo.lan.waite.net.nz ([192.168.1.29])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1GaMcB-0003oK-3M
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 14:22:31 +1300
From: Paul Waite <paul@waite.net.nz>
To: java-user@lucene.apache.org
Subject: Re: index architectures
Date: Thu, 19 Oct 2006 14:22:30 +1300
User-Agent: KMail/1.9.1
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610191422.30410.paul@waite.net.nz>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at waite.net.nz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Some excellent feedback guys - thanks heaps.


On my OOM issue, I think Hoss has nailed it here:

> That said: if you are seeing OOM errors when you sort by a field (but
> not when you use the docId ordering, or sort by score) then it sounds
> like  you are keeping refrences to IndexReaders arround after you've
> stoped using them -- the FieldCache is kept in a WeakHashMap keyed off of
> hte IndexReader, so it should get garbage collected as soon sa you let go
> of it.  Another possibility is that you are sorting on too many fields
> for it to be able to build the FieldCache for all of them in the RAM you
> have available. 


I'm using a piece of code written by Peter Halacsy which implements a
SearcherCache class. When we do a search we request a searcher, and this
class looks after giving us one.

It checks whether the index has been updated since the most recent Searcher
was created. If so it creates a new one.

At the same time it 'retires' outdated Searchers, once they have no queries
busy with them.

Looking at that code, if the system gets busy indexing new stuff, and doing
complex searches this is all rather open-ended as to the potential number
of fresh Searchers being created, each with the overhead of building its
FieldCache for the first time. No wonder I'm having problems as the archive
has grown! Looking at it in this light, my OOM's all seem to come just
after a bout of articles have been indexed, and querying is being done
simultaneously, so it does fit.

I guess a solution is probably to cap this process with a maximum number
of active Searchers, meaning potentially some queries might be fobbed off
with slightly out of date versions of the index, in extremis, but it would
right itself once everything settles down again.

Obviously the index partitioning would probably make this a non-issue, but
it seems better to sort the basic problem out anyway, and make it 100%
stable.

Thanks Hoss!

Cheers,
Paul.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 01:33:55 2006
Return-Path: <java-user-return-24136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20486 invoked from network); 19 Oct 2006 01:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 01:33:54 -0000
Received: (qmail 26033 invoked by uid 500); 19 Oct 2006 01:33:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26006 invoked by uid 500); 19 Oct 2006 01:33:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25995 invoked by uid 99); 19 Oct 2006 01:33:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 18:33:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 18:33:45 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9J1XOU6228360
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 01:33:24 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9J1Zv5L3289244
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 03:35:57 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9J1XNHY023237
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 03:33:24 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9J1XNUg023229
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 03:33:23 +0200
In-Reply-To: <200610191422.30410.paul@waite.net.nz>
Subject: Re: index architectures
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB444EFED.131B199B-ON8825720C.000817B5-8825720C.000882DF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 18 Oct 2006 17:32:57 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 19/10/2006 03:35:56
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure if this is the case, but you said "searchers", so might be it -
you can (and should) reuse searchers for multiple/concurrent queries.
IndexSearcher is thread-safe, so no need to have a different searcher for
each query. Keep using this searcher until you decide to open a new
searcher - actually until you 'warmed up' the new (updated) searcher, then
switch to using the new searcher and close the old one.

- Doron

Paul Waite <paul@waite.net.nz> wrote on 18/10/2006 18:22:30:

> Some excellent feedback guys - thanks heaps.
>
>
> On my OOM issue, I think Hoss has nailed it here:
>
> > That said: if you are seeing OOM errors when you sort by a field (but
> > not when you use the docId ordering, or sort by score) then it sounds
> > like  you are keeping refrences to IndexReaders arround after you've
> > stoped using them -- the FieldCache is kept in a WeakHashMap keyed off
of
> > hte IndexReader, so it should get garbage collected as soon sa you let
go
> > of it.  Another possibility is that you are sorting on too many fields
> > for it to be able to build the FieldCache for all of them in the RAM
you
> > have available.
>
>
> I'm using a piece of code written by Peter Halacsy which implements a
> SearcherCache class. When we do a search we request a searcher, and this
> class looks after giving us one.
>
> It checks whether the index has been updated since the most recent
Searcher
> was created. If so it creates a new one.
>
> At the same time it 'retires' outdated Searchers, once they have no
queries
> busy with them.
>
> Looking at that code, if the system gets busy indexing new stuff, and
doing
> complex searches this is all rather open-ended as to the potential number
> of fresh Searchers being created, each with the overhead of building its
> FieldCache for the first time. No wonder I'm having problems as the
archive
> has grown! Looking at it in this light, my OOM's all seem to come just
> after a bout of articles have been indexed, and querying is being done
> simultaneously, so it does fit.
>
> I guess a solution is probably to cap this process with a maximum number
> of active Searchers, meaning potentially some queries might be fobbed off
> with slightly out of date versions of the index, in extremis, but it
would
> right itself once everything settles down again.
>
> Obviously the index partitioning would probably make this a non-issue,
but
> it seems better to sort the basic problem out anyway, and make it 100%
> stable.
>
> Thanks Hoss!
>
> Cheers,
> Paul.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 02:55:47 2006
Return-Path: <java-user-return-24137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45988 invoked from network); 19 Oct 2006 02:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 02:55:47 -0000
Received: (qmail 20603 invoked by uid 500); 19 Oct 2006 02:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20531 invoked by uid 500); 19 Oct 2006 02:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20486 invoked by uid 99); 19 Oct 2006 02:55:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 19:55:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mekin.m@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 19:55:38 -0700
Received: by nf-out-0910.google.com with SMTP id b2so833826nfe
        for <java-user@lucene.apache.org>; Wed, 18 Oct 2006 19:55:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=re9qAiUKLqXpqeLMh4UMH0AW/+MR32DdObRnn/hf7JqFF0X1ONlyqyoyiXrQxcrcliATsifhqVtSS0LR5h/j2u1Ji4SnyOLjUYyPQj0sN5O3uzZnPc8SyDHsQxIAUZmF5hfqleIsjV3LHdLzF22wT/erniVr2f963cmg9TzWFNU=
Received: by 10.48.254.1 with SMTP id b1mr4913369nfi;
        Wed, 18 Oct 2006 19:55:16 -0700 (PDT)
Received: by 10.49.37.16 with HTTP; Wed, 18 Oct 2006 19:55:16 -0700 (PDT)
Message-ID: <865c77680610181955q56bfa4d6h6f98232d39e0ac7e@mail.gmail.com>
Date: Thu, 19 Oct 2006 08:25:16 +0530
From: "Mekin Maheshwari" <mekin.m@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing smaller phrase queries given a multi-word query
In-Reply-To: <865c77680610152259w28f3d15cs574c29282cadea27@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <865c77680610152259w28f3d15cs574c29282cadea27@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Resending, with the hope that the search gurus missed this.

Would really appreciate any advise on this.
Would not want to reinvent the wheel & I am sure this is something
that would have been done.

Thanks,
mek

On 10/16/06, Mek <mekin.m@gmail.com> wrote:
> Has anyone dealt with the problem of constructing sub-queries given a
> multi-word query ?
>
> Here is an example to illustrate what I mean:
>
> user queries for -> A B C D
> right now I change that query to "A B C D" A B C D to give phrase
> matches higher weightage.
>
> What might happen though, is that the user is looking for a document
> where "A B" in Field1 & "C D"  in Field2.
>
> So I should ideally be constructing the query as :
>
> "A B C D"^20 "A B"^10 "C D"^10 "B C D"^15  "A B C"^15 A B C D
>
> Has someone solved this problem, are there other ways to handle this problem ?
>
>
> Thanks,
> mek.
>


-- 
http://mekin.livejournal.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 06:54:30 2006
Return-Path: <java-user-return-24138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95979 invoked from network); 19 Oct 2006 06:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 06:54:30 -0000
Received: (qmail 76493 invoked by uid 500); 19 Oct 2006 06:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76464 invoked by uid 500); 19 Oct 2006 06:54:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76453 invoked by uid 99); 19 Oct 2006 06:54:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 23:54:20 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=INFO_TLD,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.183] (HELO moutng.kundenserver.de) (212.227.126.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Oct 2006 23:54:17 -0700
Received: from [85.220.140.42] (helo=sl-ox.innosystec.site)
	by mrelayeu.kundenserver.de (node=mrelayeu6) with ESMTP (Nemesis),
	id 0ML29c-1GaRmr1FVI-0008So; Thu, 19 Oct 2006 08:53:53 +0200
Received: by sl-ox.innosystec.site (Postfix, from userid 70)
	id 6BFD41822113; Thu, 19 Oct 2006 08:54:08 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-26) on 
	sl-ox.innosystec.site
X-Spam-Level: 
Received: from awkunemann (aw-kunemann.innosystec.site [192.168.3.126])
	by sl-ox.innosystec.site (Postfix) with ESMTP id B3B181822104
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 08:54:05 +0200 (CEST)
From: "Frank Kunemann" <frank.kunemann@innosystec.de>
To: <java-user@lucene.apache.org>
Subject: NativeFSLockFactory problem
Date: Thu, 19 Oct 2006 08:53:50 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <865c77680610181955q56bfa4d6h6f98232d39e0ac7e@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbzK2iPUEBnU+5PQxW2r5Jzu4ocxAAHiHwg
Message-Id: <20061019065405.B3B181822104@sl-ox.innosystec.site>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:83fe6509a69fdd0b3dc2966fb66dcbe7
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-7.0 required=7.5 tests=ALL_TRUSTED,AWL,BAYES_50,
	INFO_TLD,USER_IN_WHITELIST_TO autolearn=no version=3.1.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 
Hi all,

I'm trying to use the new class NativeFSLockFactory, but as you can guess I
have a problem using it.
Don't know what I'm doing wrong, so here is the code:


FSDirectory dir = FSDirectory.getDirectory(indexDir, create,
NativeFSLockFactory.getLockFactory());
logger.info("Index: "+indexDir.getAbsolutePath()+" Lock file:
"+dir.getLockID());
this.writer = new IndexWriter(dir, new StandardAnalyzer(), create);


Just to explain: indexDir is a file, create is set to false. 2nd line is to
see what is going on.


My problem is that there are many indices, for testing purpose just 4 of
them. The first one is started and working like it should, but from the 2nd
on I get those "Lock obtain timed out"- exceptions.
This is the log output:

08:38:05,199 INFO  [IndexerManager] No indexer found for directory
D:\[mydir]\index1- starting new one!
08:38:05,199 INFO  [Indexer] Index: D:\[mydir]\index1 Lock file:
lucene-0ca7838f9396a636d1feda5aabb9b8db
08:38:05,215 INFO  [IndexerManager] New amount of Indexers: 1
08:38:05,215 INFO  [IndexerManager] No indexer found for directory
D:\[mydir]\index2- starting new one!
08:38:05,215 INFO  [Indexer] Index: D:\[mydir]\index2 Lock file:
lucene-cc9dfaabbf7ad61c4bb3af007b88288c
08:38:06,213 ERROR [IndexerManager] Lock obtain timed out:
NativeFSLock@C:\Dokumente und Einstellungen\[user]\Lokale
Einstellungen\Temp\lucene-fd415060ae453638d69faa9fa07fbe95-n-write.lock
java.io.IOException: Lock obtain timed out: NativeFSLock@C:\Dokumente und
Einstellungen\[user]\Lokale
Einstellungen\Temp\lucene-fd415060ae453638d69faa9fa07fbe95-n-write.lock
	at org.apache.lucene.store.Lock.obtain(Lock.java:68)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:257)
	at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:247)
	at de.innosystec.iar.indexing.Indexer.setUp(Indexer.java:101)
	at de.innosystec.iar.indexing.Indexer.<init>(Indexer.java:80)
	at
de.innosystec.iar.indexing.IndexerManager.addDocumentElement(IndexerManager.
java:228)
	at
de.innosystec.iar.parsing.ParserManager.indexDocumentElement(ParserManager.j
ava:286)
	at
de.innosystec.iar.parsing.ParserThread.startWorking(ParserThread.java:378)
	at de.innosystec.iar.parsing.ParserThread.run(ParserThread.java:175)
	at java.lang.Thread.run(Unknown Source)


The lock file mentioned in the exception is really created and used by the
first index. Seems like the FSDirectory.getLockID method doesn't work for
NativeFSLockFactory?
I'm using Win XP on my test platform.


Regards,
Frank


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 10:03:21 2006
Return-Path: <java-user-return-24139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66374 invoked from network); 19 Oct 2006 10:03:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 10:03:21 -0000
Received: (qmail 12726 invoked by uid 500); 19 Oct 2006 10:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12561 invoked by uid 500); 19 Oct 2006 10:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12497 invoked by uid 99); 19 Oct 2006 10:03:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 03:03:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 03:03:02 -0700
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 47CECDB5E18
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 06:02:41 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by db2.internal (MEProxy); Thu, 19 Oct 2006 06:02:43 -0400
X-Sasl-enc: SrZTOiM4SCoCj+giHgWslH2HtwdZzfzo0+335R6SoaYk 1161252163
Received: from [10.17.4.90] (pool-71-162-112-195.bstnma.fios.verizon.net [71.162.112.195])
	by mail.messagingengine.com (Postfix) with ESMTP id 665D88BFB
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 06:02:42 -0400 (EDT)
Message-ID: <45374D3A.20601@mikemccandless.com>
Date: Thu, 19 Oct 2006 06:02:34 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NativeFSLockFactory problem
References: <20061019065405.B3B181822104@sl-ox.innosystec.site>
In-Reply-To: <20061019065405.B3B181822104@sl-ox.innosystec.site>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Frank Kunemann wrote:
>  
> Hi all,
> 
> I'm trying to use the new class NativeFSLockFactory, but as you can guess I
> have a problem using it.
> Don't know what I'm doing wrong, so here is the code:

There is a serious bug with NativeFSLockFactory as it now stands --
it's precisely the issue you've come across: different directories end
up incorrectly sharing the same lock file.  I am working on the fix
and will re-submit the patch soon.  Sorry about this.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 10:24:28 2006
Return-Path: <java-user-return-24140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72741 invoked from network); 19 Oct 2006 10:24:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 10:24:28 -0000
Received: (qmail 63287 invoked by uid 500); 19 Oct 2006 10:24:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63230 invoked by uid 500); 19 Oct 2006 10:24:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63219 invoked by uid 99); 19 Oct 2006 10:24:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 03:24:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 03:24:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6D65A30EFC17; Thu, 19 Oct 2006 06:23:58 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 3845830EFC17
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 06:23:49 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
References: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3990A28A-2578-4DC1-BB41-2CD43E59583C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: termpositions at index time...
Date: Thu, 19 Oct 2006 06:23:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Oct 18, 2006, at 4:50 PM, Erick Erickson wrote:
> We're indexing books. I need to
> a> return books ordered by relevancy
> b> for any single book, return the number of hits in each chapter  
> (which, of
> course, may be many pages).

I think your application deserves a good look at XTF:

	<http://www.cdlib.org/inside/projects/xtf/>

Here's an example of its results:

	<http://content.cdlib.org/xtf/view? 
query=gold&docId=kt6489n9wp&chunk.id=0&toc.depth=1&toc.id=0&brand=oac&x= 
22&y=9>

I've been looking into XTF lately.  I've seen that they do some  
patches to Lucene, or at least now extend it somehow, and I'm curious  
if anyone on this list is part of the XTF team and could describe the  
changes they've made to Lucene and possibly submit them for  
consideration into the core.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 11:39:37 2006
Return-Path: <java-user-return-24141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3969 invoked from network); 19 Oct 2006 11:39:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 11:39:36 -0000
Received: (qmail 22720 invoked by uid 500); 19 Oct 2006 11:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22618 invoked by uid 500); 19 Oct 2006 11:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22582 invoked by uid 99); 19 Oct 2006 11:39:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 04:39:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.187] (HELO moutng.kundenserver.de) (212.227.126.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 04:39:20 -0700
Received: from [85.220.140.42] (helo=sl-ox.innosystec.site)
	by mrelayeu.kundenserver.de (node=mrelayeu1) with ESMTP (Nemesis),
	id 0MKwpI-1GaWEk3wGE-0004V1; Thu, 19 Oct 2006 13:38:59 +0200
Received: by sl-ox.innosystec.site (Postfix, from userid 70)
	id 2B31C1822113; Thu, 19 Oct 2006 13:39:14 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-26) on 
	sl-ox.innosystec.site
X-Spam-Level: 
Received: from awkunemann (aw-kunemann.innosystec.site [192.168.3.126])
	by sl-ox.innosystec.site (Postfix) with ESMTP id 72C361822104
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 13:39:11 +0200 (CEST)
From: "Frank Kunemann" <frank.kunemann@innosystec.de>
To: <java-user@lucene.apache.org>
Subject: RE: NativeFSLockFactory problem
Date: Thu, 19 Oct 2006 13:38:56 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
thread-index: AcbzZkeYKWlybSU/RwOTMQWno85yiwADJnWA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <45374D3A.20601@mikemccandless.com>
Message-Id: <20061019113911.72C361822104@sl-ox.innosystec.site>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:83fe6509a69fdd0b3dc2966fb66dcbe7
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-7.7 required=7.5 tests=ALL_TRUSTED,AWL,BAYES_50,
	USER_IN_WHITELIST_TO autolearn=no version=3.1.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Mike,

no problem. Just good to know its not my fault this time... ;)


Regards,
Frank

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com] 
Sent: Thursday, October 19, 2006 12:03 PM
To: java-user@lucene.apache.org
Subject: Re: NativeFSLockFactory problem

Frank Kunemann wrote:
>  
> Hi all,
> 
> I'm trying to use the new class NativeFSLockFactory, but as you can 
> guess I have a problem using it.
> Don't know what I'm doing wrong, so here is the code:

There is a serious bug with NativeFSLockFactory as it now stands -- it's
precisely the issue you've come across: different directories end up
incorrectly sharing the same lock file.  I am working on the fix and will
re-submit the patch soon.  Sorry about this.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 12:05:57 2006
Return-Path: <java-user-return-24142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15023 invoked from network); 19 Oct 2006 12:05:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 12:05:57 -0000
Received: (qmail 4990 invoked by uid 500); 19 Oct 2006 12:05:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4946 invoked by uid 500); 19 Oct 2006 12:05:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4935 invoked by uid 99); 19 Oct 2006 12:05:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:05:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:05:47 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GaWeM-00046Y-S0
	for java-user@lucene.apache.org; Thu, 19 Oct 2006 05:05:26 -0700
Message-ID: <6895371.post@talk.nabble.com>
Date: Thu, 19 Oct 2006 05:05:26 -0700 (PDT)
From: pc123 <pranab@myway.com>
To: java-user@lucene.apache.org
Subject: farsi parser
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pranab@myway.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Do we have a farsi parser available? If "arabic" parser is available, how can
i customize it to farsi/persian.
-- 
View this message in context: http://www.nabble.com/farsi-parser-tf2472916.html#a6895371
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 12:09:28 2006
Return-Path: <java-user-return-24143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16451 invoked from network); 19 Oct 2006 12:09:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 12:09:28 -0000
Received: (qmail 17786 invoked by uid 500); 19 Oct 2006 12:09:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17762 invoked by uid 500); 19 Oct 2006 12:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17751 invoked by uid 99); 19 Oct 2006 12:09:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:09:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:09:18 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GaWhm-0004Rw-2l
	for java-user@lucene.apache.org; Thu, 19 Oct 2006 05:08:58 -0700
Message-ID: <6895440.post@talk.nabble.com>
Date: Thu, 19 Oct 2006 05:08:58 -0700 (PDT)
From: pc123 <pranab@myway.com>
To: java-user@lucene.apache.org
Subject: farsi analyser
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pranab@myway.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


sorry i meant farsi analyser instead of farsi parser.
-- 
View this message in context: http://www.nabble.com/farsi-analyser-tf2472949.html#a6895440
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 12:15:08 2006
Return-Path: <java-user-return-24144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17613 invoked from network); 19 Oct 2006 12:15:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 12:15:08 -0000
Received: (qmail 31728 invoked by uid 500); 19 Oct 2006 12:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31704 invoked by uid 500); 19 Oct 2006 12:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 81325 invoked by uid 99); 19 Oct 2006 10:35:08 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DATE_IN_PAST_48_96,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
From: postmaster@av.mimer.no
To: java-user@lucene.apache.org
Date: Tue, 17 Oct 2006 07:00:34 +0200
MIME-Version: 1.0
Content-Type: multipart/report; report-type=delivery-status;
	boundary="9B095B5ADSN=_01C6F19B2588EED60000063Aav.mimer.no"
X-DSNContext: 7ce717b1 - 1196 - 00000002 - 00000000
Message-ID: <LsxpTljBO0000029b@av.mimer.no>
Subject: Delivery Status Notification (Failure)
X-OriginalArrivalTime: 19 Oct 2006 10:34:10.0171 (UTC) FILETIME=[1CC9D4B0:01C6F36A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--9B095B5ADSN=_01C6F19B2588EED60000063Aav.mimer.no
Content-Type: text/plain; charset=unicode-1-1-utf-7

This is an automatically generated Delivery Status Notification.

Delivery to the following recipients failed.

       java-user@lucene.apache.org




--9B095B5ADSN=_01C6F19B2588EED60000063Aav.mimer.no
Content-Type: message/delivery-status

Reporting-MTA: dns;av.mimer.no
Received-From-MTA: dns;av.mimer.no
Arrival-Date: Tue, 17 Oct 2006 06:52:24 +0200

Final-Recipient: rfc822;java-user@lucene.apache.org
Action: failed
Status: 5.5.0
Diagnostic-Code: smtp;550 SPF forgery: Please see http://www.openspf.org/why.html?sender=java-user%40lucene.apache.org&ip=213.184.200.35&receiver=asf.osuosl.org

--9B095B5ADSN=_01C6F19B2588EED60000063Aav.mimer.no
Content-Type: message/rfc822

Received: from mail pickup service by av.mimer.no with Microsoft SMTPSVC;
	 Tue, 17 Oct 2006 06:52:24 +0200
Received: from mail.apache.org ([209.237.227.199]) by av.mimer.no with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 16 Oct 2006 17:27:10 +0200
Received: (qmail 97530 invoked by uid 500); 16 Oct 2006 15:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97519 invoked by uid 99); 16 Oct 2006 15:27:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 08:27:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Oct 2006 08:27:05 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.1595531C@mailer.syr.edu>; Mon, 16 Oct 2006 11:26:44 -0400
Message-ID: <4533A4B4.5000300@syr.edu>
Date: Mon, 16 Oct 2006 11:26:44 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Looking for a stemmer that can return all inflected forms
References: <20061014195756.6F5A077AD95@mail13.simplicato.com>
In-Reply-To: <20061014195756.6F5A077AD95@mail13.simplicato.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
Return-Path: java-user-return-24055-developer=docstream.no@lucene.apache.org
X-OriginalArrivalTime: 16 Oct 2006 15:27:11.0171 (UTC) FILETIME=[8CA44930:01C6F137]

Hi Jong,

Jong Kim wrote:
> I'm looking for a stemmer that is capable of returning all morphological 
> variants  of a query term (to be used for high-recall search). For example, 
> given a query term of 'cares', I would like to be able to generate 'cares', 
> 'care', 'cared', and 'caring'.

To achieve high recall, can't you just stem terms both when indexing and
when querying?

The only reasons I can think of not to do so are to support both
high-precision and high-recall queries with the same index, or to give
greater weight to exact-match documents than to stemmed-match documents
within a single query.  If either of these is the case, you could
maintain two fields (one stemmed and one non-stemmed) or two indexes,
and choose which field/index to use (reason #1) or combine the two in a
single query (reason #2).

Actually, now that I think about it more, two indexes for reason #2
(i.e., stemmed match as fallback if exact match fails) would be tricky,
due to issues with fusion of search results -- better to use two fields
in a single index for this case.

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--9B095B5ADSN=_01C6F19B2588EED60000063Aav.mimer.no--

From java-user-return-24145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 12:35:16 2006
Return-Path: <java-user-return-24145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28227 invoked from network); 19 Oct 2006 12:35:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 12:35:16 -0000
Received: (qmail 87935 invoked by uid 500); 19 Oct 2006 12:35:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87893 invoked by uid 500); 19 Oct 2006 12:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87882 invoked by uid 99); 19 Oct 2006 12:35:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:35:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:35:00 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1GaX6W-0002sM-1X
	for java-user@lucene.apache.org; Thu, 19 Oct 2006 14:34:32 +0200
Received: from vil35-2-82-236-174-106.fbx.proxad.net ([82.236.174.106])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 14:34:32 +0200
Received: from pierrick.brihaye by vil35-2-82-236-174-106.fbx.proxad.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 14:34:32 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Pierrick Brihaye <pierrick.brihaye@free.fr>
Subject:  Re: farsi parser
Date:  Thu, 19 Oct 2006 14:34:18 +0200
Lines: 20
Message-ID:  <453770CA.1030906@free.fr>
References:  <6895371.post@talk.nabble.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: vil35-2-82-236-174-106.fbx.proxad.net
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
In-Reply-To: <6895371.post@talk.nabble.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

pc123 a crit :

> Do we have a farsi parser available? If "arabic" parser is available, how can
> i customize it to farsi/persian.

If you are talking about Aramorph for Java 
(http://www.nongnu.org/aramorph/english/index.html), you are on the 
wrong track. Aramorph is a *morphological* analyzer that takes into 
account the structure of the arabic language, which is totally different 
from farsi.

The difference between arabic and farsi is the same as the one between 
icelandic and turkish : they "just" share the same alphabet excepted "a 
few" diacritics :-)

Cheers,

p.b.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 12:37:17 2006
Return-Path: <java-user-return-24146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28828 invoked from network); 19 Oct 2006 12:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 12:37:17 -0000
Received: (qmail 98479 invoked by uid 500); 19 Oct 2006 12:37:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98440 invoked by uid 500); 19 Oct 2006 12:37:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98427 invoked by uid 99); 19 Oct 2006 12:37:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:37:07 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:37:01 -0700
Received: by ug-out-1314.google.com with SMTP id k40so424526ugc
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 05:36:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QCBQ7dSjMeCHyGwj+7muPILMXxdGVsdS0Fk2l00NjfrJT0hP2a/ubi3779cRjLeJQfX8d5tB4jtBuHl/DqTEF3arybw1CfcxR7BnyLk7EgwmBlsrFdnNQAWYVQqk7aqeO1Sicgnk0Atmx33i9fWTeikyql/0CKbWUb8xPqEMWgA=
Received: by 10.82.109.19 with SMTP id h19mr2727601buc;
        Thu, 19 Oct 2006 05:36:39 -0700 (PDT)
Received: by 10.82.162.13 with HTTP; Thu, 19 Oct 2006 05:36:39 -0700 (PDT)
Message-ID: <359a92830610190536l36c6aea6hcf650955659d9fd8@mail.gmail.com>
Date: Thu, 19 Oct 2006 08:36:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing smaller phrase queries given a multi-word query
In-Reply-To: <865c77680610181955q56bfa4d6h6f98232d39e0ac7e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62566_23462690.1161261399194"
References: <865c77680610152259w28f3d15cs574c29282cadea27@mail.gmail.com>
	 <865c77680610181955q56bfa4d6h6f98232d39e0ac7e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_62566_23462690.1161261399194
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What is the use case you're trying to solve? It doesn't make sense to me
that you want to take a query from a user and split it over fields under the
covers.

 Why not just index those separate fields into the yet a third field and
search there?

Or why not just put it all into one field in the first place?

The more details of what you're trying to do you provide, the better answers
you'll get <G>..

Best
Erick



On 10/18/06, Mekin Maheshwari <mekin.m@gmail.com> wrote:
>
> Resending, with the hope that the search gurus missed this.
>
> Would really appreciate any advise on this.
> Would not want to reinvent the wheel & I am sure this is something
> that would have been done.
>
> Thanks,
> mek
>
> On 10/16/06, Mek <mekin.m@gmail.com> wrote:
> > Has anyone dealt with the problem of constructing sub-queries given a
> > multi-word query ?
> >
> > Here is an example to illustrate what I mean:
> >
> > user queries for -> A B C D
> > right now I change that query to "A B C D" A B C D to give phrase
> > matches higher weightage.
> >
> > What might happen though, is that the user is looking for a document
> > where "A B" in Field1 & "C D"  in Field2.
> >
> > So I should ideally be constructing the query as :
> >
> > "A B C D"^20 "A B"^10 "C D"^10 "B C D"^15  "A B C"^15 A B C D
> >
> > Has someone solved this problem, are there other ways to handle this
> problem ?
> >
> >
> > Thanks,
> > mek.
> >
>
>
> --
> http://mekin.livejournal.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_62566_23462690.1161261399194--

From java-user-return-24147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 12:39:12 2006
Return-Path: <java-user-return-24147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29222 invoked from network); 19 Oct 2006 12:39:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 12:39:11 -0000
Received: (qmail 1804 invoked by uid 500); 19 Oct 2006 12:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1778 invoked by uid 500); 19 Oct 2006 12:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 85631 invoked by uid 99); 19 Oct 2006 12:34:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Message-ID: <453770CA.1030906@free.fr>
Date: Thu, 19 Oct 2006 14:34:18 +0200
From: Pierrick Brihaye <pierrick.brihaye@free.fr>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
Newsgroups: gmane.comp.jakarta.lucene.user
To:  java-user@lucene.apache.org
Subject: Re: farsi parser
References: <6895371.post@talk.nabble.com>
In-Reply-To: <6895371.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

pc123 a crit :

> Do we have a farsi parser available? If "arabic" parser is available, how can
> i customize it to farsi/persian.

If you are talking about Aramorph for Java 
(http://www.nongnu.org/aramorph/english/index.html), you are on the 
wrong track. Aramorph is a *morphological* analyzer that takes into 
account the structure of the arabic language, which is totally different 
from farsi.

The difference between arabic and farsi is the same as the one between 
icelandic and turkish : they "just" share the same alphabet excepted "a 
few" diacritics :-)

Cheers,

p.b.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 12:41:38 2006
Return-Path: <java-user-return-24148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30089 invoked from network); 19 Oct 2006 12:41:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 12:41:38 -0000
Received: (qmail 6112 invoked by uid 500); 19 Oct 2006 12:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6083 invoked by uid 500); 19 Oct 2006 12:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6072 invoked by uid 99); 19 Oct 2006 12:41:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:41:29 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 05:41:28 -0700
Received: by ug-out-1314.google.com with SMTP id k40so425744ugc
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 05:41:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VVpzm9Gh4ksB/jqQM3YiOte7t+4dKsBMgK4hO20pkaQJah3l+wg4ID4yz6xBzZ9F8q3b0Xy/XkIAb5qZ9vsknZy+0EnqH45XCx0bJwnssxel/ZhFaR8q8wpcAfsyPhccKsMYfG28PdURzU+MdmCeRLAz2nVQdx/3gijvcO1IBuE=
Received: by 10.82.129.8 with SMTP id b8mr2741633bud;
        Thu, 19 Oct 2006 05:41:06 -0700 (PDT)
Received: by 10.82.162.13 with HTTP; Thu, 19 Oct 2006 05:41:06 -0700 (PDT)
Message-ID: <359a92830610190541p70c34e0cn2fa4cee6fcb96c66@mail.gmail.com>
Date: Thu, 19 Oct 2006 08:41:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: termpositions at index time...
In-Reply-To: <3990A28A-2578-4DC1-BB41-2CD43E59583C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62610_7582642.1161261666431"
References: <359a92830610181350u2111779ehe71756be56e9fd6f@mail.gmail.com>
	 <3990A28A-2578-4DC1-BB41-2CD43E59583C@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_62610_7582642.1161261666431
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks. That's very similar to what we're doing, and I'd love to see some
technical details too...

Erick

On 10/19/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Oct 18, 2006, at 4:50 PM, Erick Erickson wrote:
> > We're indexing books. I need to
> > a> return books ordered by relevancy
> > b> for any single book, return the number of hits in each chapter
> > (which, of
> > course, may be many pages).
>
> I think your application deserves a good look at XTF:
>
>         <http://www.cdlib.org/inside/projects/xtf/>
>
> Here's an example of its results:
>
>         <http://content.cdlib.org/xtf/view?
> query=gold&docId=kt6489n9wp&chunk.id=0&toc.depth=1&toc.id=0&brand=oac&x=
> 22&y=9>
>
> I've been looking into XTF lately.  I've seen that they do some
> patches to Lucene, or at least now extend it somehow, and I'm curious
> if anyone on this list is part of the XTF team and could describe the
> changes they've made to Lucene and possibly submit them for
> consideration into the core.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_62610_7582642.1161261666431--

From java-user-return-24149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 13:10:42 2006
Return-Path: <java-user-return-24149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41692 invoked from network); 19 Oct 2006 13:10:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 13:10:41 -0000
Received: (qmail 87553 invoked by uid 500); 19 Oct 2006 13:10:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87522 invoked by uid 500); 19 Oct 2006 13:10:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87511 invoked by uid 99); 19 Oct 2006 13:10:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 06:10:33 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beatriz.ramos.moreno@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 06:10:30 -0700
Received: by ug-out-1314.google.com with SMTP id k40so434291ugc
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 06:10:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cbh+cRLoG+kgLRRDUnIqCaLNeuEt1jck51cD4NGqKo2xYKKjM42GJUupq3oiIrqJObQ4QZnylbthiogQ1EhU1j7ARy07QqVjlTav0QUJBP2FP0blZyH98xCvgKVrQPrzfPx63QCQ0C1sb/sfZdp6cwPxFtIVyx/mgmB9/K/dMc4=
Received: by 10.82.152.16 with SMTP id z16mr2755387bud;
        Thu, 19 Oct 2006 06:10:08 -0700 (PDT)
Received: by 10.82.120.13 with HTTP; Thu, 19 Oct 2006 06:10:08 -0700 (PDT)
Message-ID: <cb8ed9940610190610m765fad77j1accd08a004e2516@mail.gmail.com>
Date: Thu, 19 Oct 2006 15:10:08 +0200
From: "beatriz ramos" <beatriz.ramos.moreno@gmail.com>
To: java-user@lucene.apache.org
Subject: implementing our own Scorer (BM25)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93585_9562440.1161263408441"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_93585_9562440.1161263408441
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,
I'm trying to implement my own scoring algorithm with Lucene but I don't get
any results.

Lucene documentation explains how to implement new scoring, modifying Query,
Weight and Scorer classes. I have tried this but doesn't work

Do you have any idea?
I need some example to understand the process and modifications

Thanks

------=_Part_93585_9562440.1161263408441--

From java-user-return-24150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 13:38:55 2006
Return-Path: <java-user-return-24150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56920 invoked from network); 19 Oct 2006 13:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 13:38:54 -0000
Received: (qmail 90606 invoked by uid 500); 19 Oct 2006 13:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90573 invoked by uid 500); 19 Oct 2006 13:38:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90562 invoked by uid 99); 19 Oct 2006 13:38:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 06:38:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 06:38:43 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 2045798 for java-user@lucene.apache.org; Thu, 19 Oct 2006 15:38:21 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Preventing merging by IndexWriter
Date: Thu, 19 Oct 2006 15:37:39 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CEFE867@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Preventing merging by IndexWriter
Thread-Index: Acbyuxv5HS98v3YKR2GWftprFU/4QQAxekZA
From: "Johan Stuyts" <j.stuyts@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I just searched for 'faceted' on the e-mails I've seen since=20
> I subscribed to
> the list, and there are certainly discussions out there...

I did already, but...

> This thread might be particularly useful, started  15-May-2006
> *Aggregating category hits

it seems I missed this one. Thanks.

I guess it is time we started evaluating Solr.

I still see problems because of:
- very frequent updates (expected to be thousands an hour);
- dense facets, more than 1 in 20 documents in a facet (e.g. month,
department, site section);
- the filters are also used for authorization. We want to use facets for
authorization, this means we have to combine (disjunction and
conjunction) the bit sets (expected number is less than 10) of a user
for each request.

But I will keep looking for solutions, and trying different
implementations. Today I finished a very simple test suite with which I
can compare the implementations.

Johan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 13:59:46 2006
Return-Path: <java-user-return-24151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64681 invoked from network); 19 Oct 2006 13:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 13:59:45 -0000
Received: (qmail 66606 invoked by uid 500); 19 Oct 2006 13:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66590 invoked by uid 500); 19 Oct 2006 13:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66579 invoked by uid 99); 19 Oct 2006 13:59:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 06:59:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a9.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 06:59:27 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.dreamhost.com (Postfix) with ESMTP id 1B6F620A48
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 06:59:07 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <cb8ed9940610190610m765fad77j1accd08a004e2516@mail.gmail.com>
References: <cb8ed9940610190610m765fad77j1accd08a004e2516@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <984DFB03-AA92-49E4-9355-9E58F75AB2BE@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: implementing our own Scorer (BM25)
Date: Thu, 19 Oct 2006 09:58:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please provide more information about what you have done so far.

On Oct 19, 2006, at 9:10 AM, beatriz ramos wrote:

> Hello,
> I'm trying to implement my own scoring algorithm with Lucene but I  
> don't get
> any results.
>
> Lucene documentation explains how to implement new scoring,  
> modifying Query,
> Weight and Scorer classes. I have tried this but doesn't work
>
> Do you have any idea?
> I need some example to understand the process and modifications
>
> Thanks

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 14:48:26 2006
Return-Path: <java-user-return-24152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84830 invoked from network); 19 Oct 2006 14:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 14:48:25 -0000
Received: (qmail 36458 invoked by uid 500); 19 Oct 2006 14:48:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36424 invoked by uid 500); 19 Oct 2006 14:48:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36413 invoked by uid 99); 19 Oct 2006 14:48:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 07:48:15 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hesnews@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 07:48:10 -0700
Received: by nz-out-0102.google.com with SMTP id z6so262516nzd
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 07:47:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TJyu6aEYlQ3Qq34gpoOaWtGyAKbUYioZUaN2sUh+0P7D+BTqr/vbG5tYh2wTL+jLUzTXjb9MEW+JeoWKqfoavnuBOzmgM/wse/ADjMAaffwSwS9YPR+zAgUDAbajant6yjXVc8/HnWKGPRi0EwfsHpBF254EJbHdfZWaQ+nrvwA=
Received: by 10.64.156.1 with SMTP id d1mr16710494qbe;
        Thu, 19 Oct 2006 07:37:47 -0700 (PDT)
Received: by 10.64.114.11 with HTTP; Thu, 19 Oct 2006 07:37:47 -0700 (PDT)
Message-ID: <77a4819a0610190737y46f70b74t6932d36e906313c1@mail.gmail.com>
Date: Thu, 19 Oct 2006 16:37:47 +0200
From: "Hes Siemelink" <hesnews@gmail.com>
To: java-user@lucene.apache.org
Subject: Don't use the same index for updating and searching
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10392_18580387.1161268667456"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10392_18580387.1161268667456
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, I posted a while ago about sudden FileNotFoundExceptions. In a nutshell:
my Lucene index went corrupt after a couple of days under heavy load on a
Linux server with missing segment files.

The problem kept occuring, but I haven't found the cause. I couldn't
reproduce it with a simulated load on my development machine or the test
server.

Here's a sketch of the setup: there were 14 indexes that received
simultaneous updates and search queries. Each index had own thread for
updates (so the index wasn;t updated concurrently), but allowed for reading
from other threads. Updating consisted of deleting on index intry and adding
a new one. On average I would say there was one update request and one
search request per second.

So, this turned out not to be stable! After a while (a day or so, or two),
any index would get corrupted, because a segment would disappear.

I circumvented the problem using seperate indexes for searching and
updating. The search index is copied every ten minutes to accomodate new
search requests. The problem seems to have gone away.

So here's my tip: if you have continuous updates and a lot of search
requests, use different indexes for searching and for updating!

Cheers,

   Hes.

------=_Part_10392_18580387.1161268667456--

From java-user-return-24153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 15:35:40 2006
Return-Path: <java-user-return-24153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14033 invoked from network); 19 Oct 2006 15:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 15:35:40 -0000
Received: (qmail 81496 invoked by uid 500); 19 Oct 2006 15:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81468 invoked by uid 500); 19 Oct 2006 15:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 76488 invoked by uid 99); 19 Oct 2006 15:33:17 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.es;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type;
  b=nBp7+pGG5i/ebPrLJVOLGW9qLxn16yJHXi8gXMjj0xCJNdv+jrzuPlNKLL7lC1Zti2MGps2vmbQA1dyDc743JduiD+0c/dbPZHqeTj85VoL7wGnG3XAPO471HyhW5FKPXq9ssyc5WwBX40TeuWPSawgJcV4ID5D65VW+b1gs6Do=  ;
Message-ID: <20061019153249.5820.qmail@web25507.mail.ukl.yahoo.com>
Date: Thu, 19 Oct 2006 15:32:49 +0000 (GMT)
From: =?iso-8859-1?Q?M=AA_Paz_Belmonte_L=F3pez?= <pazbl@yahoo.es>
Subject: Lucene document length
To: Java-User@Lucene.Apache.Org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-267836093-1161271969=:5268"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-267836093-1161271969=:5268
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,=0AI=B4m working with Lucene. I need to get the documents length. I h=
ad seen the documentations and I don=B4t find anything.=0A=0ADo you have an=
y idea?=0A=0AThanks.=0A=0A=0A=0A=0A=09=09=0A_______________________________=
_______________ =0ALLama Gratis a cualquier PC del Mundo. =0ALlamadas a fij=
os y m=F3viles desde 1 c=E9ntimo por minuto. =0Ahttp://es.voice.yahoo.com
--0-267836093-1161271969=:5268--

From java-user-return-24154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 15:36:14 2006
Return-Path: <java-user-return-24154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14199 invoked from network); 19 Oct 2006 15:36:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 15:36:14 -0000
Received: (qmail 85669 invoked by uid 500); 19 Oct 2006 15:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85633 invoked by uid 500); 19 Oct 2006 15:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85622 invoked by uid 99); 19 Oct 2006 15:36:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 08:36:01 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beatriz.ramos.moreno@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 08:35:58 -0700
Received: by ug-out-1314.google.com with SMTP id k40so478582ugc
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 08:35:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=e2YiNrDHHfg3tcRdfJfkgjr44FTTijogLKRPVX7vi48k16GBAhZNjagaMlz4uNwfCUfTntJ7ckZD/BpMl9qwAjn2NTx1UvzAKg7NfNdUum/8MOJ8GjDfLX/sz8EjPkO2KaJ8VqXiJGoYzExEfiw+XBUI/qlNBYExdolI76LvHRg=
Received: by 10.82.152.16 with SMTP id z16mr99368bud;
        Thu, 19 Oct 2006 08:35:36 -0700 (PDT)
Received: by 10.82.120.13 with HTTP; Thu, 19 Oct 2006 08:35:35 -0700 (PDT)
Message-ID: <cb8ed9940610190835w2d8557c2q73ad30acc18f65ac@mail.gmail.com>
Date: Thu, 19 Oct 2006 17:35:36 +0200
From: "beatriz ramos" <beatriz.ramos.moreno@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: implementing our own Scorer (BM25)
Cc: gsingers@apache.org
In-Reply-To: <984DFB03-AA92-49E4-9355-9E58F75AB2BE@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95440_3054654.1161272136056"
References: <cb8ed9940610190610m765fad77j1accd08a004e2516@mail.gmail.com>
	 <984DFB03-AA92-49E4-9355-9E58F75AB2BE@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_95440_3054654.1161272136056
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Excuse me, I don't want to write a very long email.

This is the BM25 Scorer formule:

         log((N-f+0.5)/(f+0.5)) =B7 (k1 + 1) =B7 c  /  (c+k1=B7( (1-b)+b=B7=
l/L))
where

               N =3D total number of documents
               f =3D inverse frecuency (number of documents which contain t=
he
term)
               c =3D term frecuency in a document
               l =3D lenght of document
               L =3D average document lenght
               k1, b =3D constants

I think f is the same as idf in default Lucene scorer formule and c is the
same as tf.
I implement BM25 Scorer formule in score method of BM25Scorer class (my own
Scorer class that extends of Scorer class)

                public class BM25Scorer extends Scorer{
                        public BM25Scorer(Similarity similarity) {
                                  super(similarity);
                        }
                }


The problem is that I would have to implement my own Similarity class with
some specific abstract methods like queryNorm(float sumOfSquaredWeights) bu=
t
I don't know how to calculate sumOfSquaredWeights with the parameters of
BM25 Scorer formule

Do I have to change only Query, Weigth and Scorer class or I need to create
my own Similarity class?

Thanks







On 19/10/06, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Please provide more information about what you have done so far.
>
> On Oct 19, 2006, at 9:10 AM, beatriz ramos wrote:
>
> > Hello,
> > I'm trying to implement my own scoring algorithm with Lucene but I
> > don't get
> > any results.
> >
> > Lucene documentation explains how to implement new scoring,
> > modifying Query,
> > Weight and Scorer classes. I have tried this but doesn't work
> >
> > Do you have any idea?
> > I need some example to understand the process and modifications
> >
> > Thanks
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_95440_3054654.1161272136056--

From java-user-return-24155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 15:55:01 2006
Return-Path: <java-user-return-24155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20927 invoked from network); 19 Oct 2006 15:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 15:55:01 -0000
Received: (qmail 22157 invoked by uid 500); 19 Oct 2006 15:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22128 invoked by uid 500); 19 Oct 2006 15:54:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22113 invoked by uid 99); 19 Oct 2006 15:54:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 08:54:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [137.108.246.32] (HELO venus.open.ac.uk) (137.108.246.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 08:54:48 -0700
Received: from vostok.open.ac.uk ([137.108.140.139])
	by venus.open.ac.uk with esmtp (Exim 4.62)
	(envelope-from <J.Zhu@open.ac.uk>)
	id 1GaaDw-0000cc-Nn; Thu, 19 Oct 2006 16:54:24 +0100
Received: from EPPING-EVS1.open.ac.uk ([137.108.170.245]) by vostok.open.ac.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 19 Oct 2006 16:54:24 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: implementing our own Scorer (BM25)
Date: Thu, 19 Oct 2006 16:54:23 +0100
Message-ID: <E0FEA5DF00E59E409F90C854A1B45BAA01470507@EPPING-EVS1.open.ac.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: implementing our own Scorer (BM25)
Thread-Index: AcbzlE3tL5nDw4e3Qw+NTZm7xe5bjQAAlhXQ
From: "J.Zhu" <J.Zhu@open.ac.uk>
To: <java-user@lucene.apache.org>
Cc: <gsingers@apache.org>
X-OriginalArrivalTime: 19 Oct 2006 15:54:24.0728 (UTC) FILETIME=[D98E8D80:01C6F396]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, we are having a discussion in java-dev@lucene.apache.org about
implementing probabilistic language modelling approaches such as BM25 in
Lucene. Hope you can join us there.

Jianhan=20

-----Original Message-----
From: beatriz ramos [mailto:beatriz.ramos.moreno@gmail.com]=20
Sent: 19 October 2006 16:36
To: java-user@lucene.apache.org
Cc: gsingers@apache.org
Subject: Re: implementing our own Scorer (BM25)

Excuse me, I don't want to write a very long email.

This is the BM25 Scorer formule:

         log((N-f+0.5)/(f+0.5)) * (k1 + 1) * c  /  (c+k1*( (1-b)+b*l/L))
where

               N =3D total number of documents
               f =3D inverse frecuency (number of documents which =
contain
the
term)
               c =3D term frecuency in a document
               l =3D lenght of document
               L =3D average document lenght
               k1, b =3D constants

I think f is the same as idf in default Lucene scorer formule and c is
the same as tf.
I implement BM25 Scorer formule in score method of BM25Scorer class (my
own Scorer class that extends of Scorer class)

                public class BM25Scorer extends Scorer{
                        public BM25Scorer(Similarity similarity) {
                                  super(similarity);
                        }
                }


The problem is that I would have to implement my own Similarity class
with some specific abstract methods like queryNorm(float
sumOfSquaredWeights) but I don't know how to calculate
sumOfSquaredWeights with the parameters of
BM25 Scorer formule

Do I have to change only Query, Weigth and Scorer class or I need to
create my own Similarity class?

Thanks







On 19/10/06, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Please provide more information about what you have done so far.
>
> On Oct 19, 2006, at 9:10 AM, beatriz ramos wrote:
>
> > Hello,
> > I'm trying to implement my own scoring algorithm with Lucene but I=20
> > don't get any results.
> >
> > Lucene documentation explains how to implement new scoring,=20
> > modifying Query, Weight and Scorer classes. I have tried this but=20
> > doesn't work
> >
> > Do you have any idea?
> > I need some example to understand the process and modifications
> >
> > Thanks
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 16:53:10 2006
Return-Path: <java-user-return-24156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36696 invoked from network); 19 Oct 2006 16:53:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 16:53:09 -0000
Received: (qmail 37677 invoked by uid 500); 19 Oct 2006 16:53:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37636 invoked by uid 500); 19 Oct 2006 16:53:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37625 invoked by uid 99); 19 Oct 2006 16:53:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 09:53:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 09:52:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0847F5B781; Thu, 19 Oct 2006 09:52:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F22907F403
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 09:52:36 -0700 (PDT)
Date: Thu, 19 Oct 2006 09:52:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Don't use the same index for updating and searching
In-Reply-To: <77a4819a0610190737y46f70b74t6932d36e906313c1@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610190950450.31681@hal.rescomp.berkeley.edu>
References: <77a4819a0610190737y46f70b74t6932d36e906313c1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This doesn't really sound right ... were you by any chance using NFS (or
some other network storage mechanism) in the orriginal implimentation?


: So, this turned out not to be stable! After a while (a day or so, or two),
: any index would get corrupted, because a segment would disappear.
:
: I circumvented the problem using seperate indexes for searching and
: updating. The search index is copied every ten minutes to accomodate new
: search requests. The problem seems to have gone away.
:
: So here's my tip: if you have continuous updates and a lot of search
: requests, use different indexes for searching and for updating!



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 22:49:53 2006
Return-Path: <java-user-return-24157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82919 invoked from network); 19 Oct 2006 22:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 22:49:52 -0000
Received: (qmail 82029 invoked by uid 500); 19 Oct 2006 22:49:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81789 invoked by uid 500); 19 Oct 2006 22:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81763 invoked by uid 99); 19 Oct 2006 22:49:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:49:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 15:49:43 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6D564B735C
	for <java-user@lucene.apache.org>; Fri, 20 Oct 2006 08:48:26 +1000 (EST)
Message-ID: <4538010B.5080203@nuix.com.au>
Date: Fri, 20 Oct 2006 08:49:47 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061018)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene document length
References: <20061019153249.5820.qmail@web25507.mail.ukl.yahoo.com>
In-Reply-To: <20061019153249.5820.qmail@web25507.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

M Paz Belmonte Lpez wrote:
> Hello,
> Im working with Lucene. I need to get the documents length. I had seen the documentations and I dont find anything.

What exactly do you mean by the length of a "document"?  A document has 
a number of fields, and you could get the length of a field if the field 
were stored.

But what I'd do is calculate the length of the original text and put it 
into a new field so that I can get at it faster.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 19 23:52:34 2006
Return-Path: <java-user-return-24158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3815 invoked from network); 19 Oct 2006 23:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Oct 2006 23:52:34 -0000
Received: (qmail 88569 invoked by uid 500); 19 Oct 2006 23:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88473 invoked by uid 500); 19 Oct 2006 23:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88462 invoked by uid 99); 19 Oct 2006 23:52:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 16:52:27 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mekin.m@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 16:52:25 -0700
Received: by nf-out-0910.google.com with SMTP id b2so1141486nfe
        for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 16:52:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Wj7JAs2U8S6r0xa1Y/bhGea30mxoUfC71fqqVUuJpaOWxa1bPnAT/uKm8z5ezm5nMPSvPaYtizokQz1kEQcWiIZyXjUshJ8dlzk5u99kKALre4wXkX2Y7kGr28FkOO5kt1wzwPmNGe78G5geNVLxeARt4fMC5LSBxOiEBgtiUSA=
Received: by 10.49.8.10 with SMTP id l10mr6913690nfi;
        Thu, 19 Oct 2006 16:52:02 -0700 (PDT)
Received: by 10.49.37.16 with HTTP; Thu, 19 Oct 2006 16:52:02 -0700 (PDT)
Message-ID: <865c77680610191652vc81be4fq919cd89b689b02ee@mail.gmail.com>
Date: Fri, 20 Oct 2006 05:22:02 +0530
From: "Mekin Maheshwari" <mekin.m@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing smaller phrase queries given a multi-word query
In-Reply-To: <359a92830610190536l36c6aea6hcf650955659d9fd8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <865c77680610152259w28f3d15cs574c29282cadea27@mail.gmail.com>
	 <865c77680610181955q56bfa4d6h6f98232d39e0ac7e@mail.gmail.com>
	 <359a92830610190536l36c6aea6hcf650955659d9fd8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 10/19/06, Erick Erickson <erickerickson@gmail.com> wrote:
> What is the use case you're trying to solve? It doesn't make sense to me
> that you want to take a query from a user and split it over fields under the
> covers.

Well I am planning on doing exactly that, given that we have seen some
amount of user queries which need to match across fields.

eg. "rowling goblet of fire" - need to match rowling in 1 field &
"goblet of fire in another
"hilary duff most wanted" - need to match "hilary duff" in 1 field &
"most wanted" in another


>
>  Why not just index those separate fields into the yet a third field and
> search there?
>
> Or why not just put it all into one field in the first place?

I need the ability to boost matches in certain fields higher than others.
So both the above approaches do not work for me.

Not all fields have the same analyzer, so thats another reason for not
using 1 catch-all field.

I am trying out DisjunctionMaxQueries  and will soon move to it.
I first want a phrase match to be done & if that fails then a non-phrase match.
My problem is that I cant easily decide which phrases to build given a
4+word query from the user.

Thanks Erik for the response,
Hope I have done a better job of explaining my problem,

-mek



>
> The more details of what you're trying to do you provide, the better answers
> you'll get <G>..




>
> Best
> Erick
>
>
>
> On 10/18/06, Mekin Maheshwari <mekin.m@gmail.com> wrote:
> >
> > Resending, with the hope that the search gurus missed this.
> >
> > Would really appreciate any advise on this.
> > Would not want to reinvent the wheel & I am sure this is something
> > that would have been done.
> >
> > Thanks,
> > mek
> >
> > On 10/16/06, Mek <mekin.m@gmail.com> wrote:
> > > Has anyone dealt with the problem of constructing sub-queries given a
> > > multi-word query ?
> > >
> > > Here is an example to illustrate what I mean:
> > >
> > > user queries for -> A B C D
> > > right now I change that query to "A B C D" A B C D to give phrase
> > > matches higher weightage.
> > >
> > > What might happen though, is that the user is looking for a document
> > > where "A B" in Field1 & "C D"  in Field2.
> > >
> > > So I should ideally be constructing the query as :
> > >
> > > "A B C D"^20 "A B"^10 "C D"^10 "B C D"^15  "A B C"^15 A B C D
> > >
> > > Has someone solved this problem, are there other ways to handle this
> > problem ?
> > >
> > >
> > > Thanks,
> > > mek.
> > >
> >
> >
> > --
> > http://mekin.livejournal.com/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>


-- 
http://mekin.livejournal.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 20 00:04:21 2006
Return-Path: <java-user-return-24159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5244 invoked from network); 20 Oct 2006 00:04:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 00:04:21 -0000
Received: (qmail 98163 invoked by uid 500); 20 Oct 2006 00:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98113 invoked by uid 500); 20 Oct 2006 00:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98102 invoked by uid 99); 20 Oct 2006 00:04:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 17:04:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Oct 2006 17:04:13 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8C4635B780; Thu, 19 Oct 2006 17:03:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8487A7F403
	for <java-user@lucene.apache.org>; Thu, 19 Oct 2006 17:03:52 -0700 (PDT)
Date: Thu, 19 Oct 2006 17:03:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: constructing smaller phrase queries given a multi-word query
In-Reply-To: <865c77680610191652vc81be4fq919cd89b689b02ee@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0610191654200.20179@hal.rescomp.berkeley.edu>
References: <865c77680610152259w28f3d15cs574c29282cadea27@mail.gmail.com> 
 <865c77680610181955q56bfa4d6h6f98232d39e0ac7e@mail.gmail.com> 
 <359a92830610190536l36c6aea6hcf650955659d9fd8@mail.gmail.com>
 <865c77680610191652vc81be4fq919cd89b689b02ee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: eg. "rowling goblet of fire" - need to match rowling in 1 field &
: "goblet of fire in another
: "hilary duff most wanted" - need to match "hilary duff" in 1 field &
: "most wanted" in another

: >  Why not just index those separate fields into the yet a third field and
: > search there?
: >
: > Or why not just put it all into one field in the first place?
:
: I need the ability to boost matches in certain fields higher than others.
: So both the above approaches do not work for me.
:
: Not all fields have the same analyzer, so thats another reason for not
: using 1 catch-all field.

your "catchall" file can have yet-another-analyzer ... typically a more
simplistic analyzer then the field specifcs ones, the important thing is
that the user input is parsed using the appropriate analyzer for each
field.

: I am trying out DisjunctionMaxQueries  and will soon move to it.
: I first want a phrase match to be done & if that fails then a non-phrase match.
: My problem is that I cant easily decide which phrases to build given a
: 4+word query from the user.

The initial approach you described to build all of the possible
permutations is the best approach i can think of - using DisMax to group
things in such a way that ensure that no one term/phrase common in
multiple fields dominates the score ... you'll also probably want to play
with BooleanQuery.setMinNumberShouldMatch and disabling coord ...

...personally i'v never really tried tackling what you describe, because
queries are typically either simple enough that using it as a simple
phrase across multiple fields works, or it's compliacted enough that you
aren't going to find good "sub phrase" matches in a general way.  relying
on matching the individual terms usually covers those cases well enough
(because you've got enough terms to get a meaningful score)

the one exception that i've been considering persuing for one project is
to recognize *really* common phrases that should really be thought of as a
single term (ie: "digital camera") ... but in most cases they probably be
dealt with in the analyzers using synonyms that collapse the multiple
tokens down to a single marker token (ie: digital_camera)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 20 07:47:01 2006
Return-Path: <java-user-return-24160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10046 invoked from network); 20 Oct 2006 07:47:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 07:47:01 -0000
Received: (qmail 77497 invoked by uid 500); 20 Oct 2006 07:46:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77468 invoked by uid 500); 20 Oct 2006 07:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77457 invoked by uid 99); 20 Oct 2006 07:46:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 00:46:52 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Oct 2006 00:46:51 -0700
Received: (qmail 50333 invoked by uid 60001); 20 Oct 2006 07:46:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2MvOtYxog0TZHsRSWQDGl1IP0iyNS6ocI63Bc3Ru0W24AxeRmc07N0ur7DuBIHhgMPVVehknxZp/LSJ6vkoN9SZabe3HU1Ji0vJlT6UTV9r/fO4LXKY0zAfo1rb3lafHyhDwBaedQhpDiM7ee/qAiJtRopVgaEb74NUE6ff8/og=  ;
Message-ID: <20061020074623.50331.qmail@web50301.mail.yahoo.com>
Received: from [74.65.202.166] by web50301.mail.yahoo.com via HTTP; Fri, 20 Oct 2006 00:46:23 PDT
Date: Fri, 20 Oct 2006 00:46:23 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Scalability Questions
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Guerre,=0A=0AThe reason you haven't received any answers yet is because =
this is pretty impossible the answer.....and so I'll try to answer your que=
stions now, at 3:40 AM. ;)=0A=0A----- Original Message ----=0AFrom: Guerre =
Bear <guerrebear@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Wedne=
sday, October 18, 2006 3:14:00 PM=0ASubject: Scalability Questions=0A=0AHel=
lo All,=0A=0ALucene looks very interesting to me.  I was wondering if any o=
f you could=0Acomment on a few questions:=0A=0A1) Assuming I use a typical =
server such as a dual-core dual-processor Dell=0A2950, about how many files=
 can Lucene index and still have a sub-two-second=0Asearch speed for a simp=
le search string such as "invoice 2005 mitsubishi"?=0AFor the sake of argum=
ent, I figure that a typical file will have about 30KB=0Aof text in it.=0A=
=0AImpossible to answer.  It would depend whether your index is in RAM (cac=
hed) or not, how many queries are hitting it symultaneously, how complex th=
e queries are, how deep in search results you are going, etc.=0A=0A2) How m=
any of these servers would it take to manage an index of one billion=0Asuch=
 files?=0A=0AHm, 9 zeros.... my semi-wild guess is that this would require =
100+ search servers.=0A=0A3) Are there any HOWTO's on constructing a large =
Lucene search cluster?=0A=0ANope.  People have done it, I've done some of i=
t, but there is no good and publicly available information.  This would mak=
e a good case study for Lucene in Action 2, but my guess is that no company=
 would want to share their secrets.=0A=0A4) Roughly how large is the index =
file in comparison to the size of the=0Ainput files?=0A=0AIt depends on whe=
ther you store fields or just index them, plus there is also a compression =
(gzip -9 equivalent) option.=0A=0A5) How does Lucene's search performance/s=
calability compare to some of the=0Aexpensive commercial search products su=
ch as Fast?  (www.fastsearch.com)=0A=0AI can't go into details here, but I =
have information from a few _very_ reliable sources that you should think 2=
-3-4-5.... times before going with FAST.  Sorry I can't be more specific.=
=0A=0AOtis=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 20 10:25:59 2006
Return-Path: <java-user-return-24161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45830 invoked from network); 20 Oct 2006 10:25:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 10:25:59 -0000
Received: (qmail 83869 invoked by uid 500); 20 Oct 2006 10:25:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83810 invoked by uid 500); 20 Oct 2006 10:25:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83778 invoked by uid 99); 20 Oct 2006 10:25:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 03:25:47 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.234] (HELO web60811.mail.yahoo.com) (209.73.178.234)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Oct 2006 03:25:43 -0700
Received: (qmail 41483 invoked by uid 60001); 20 Oct 2006 10:25:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=snh2qrI8PTdxnjHOiFcXMs1fiUd07b7wU2L6rBHT65yuFylRHbtsT/1s0qt/mlbPJRaY8ZGsVnE0SD4I4Bgn1xqxL1FSz7N/tT5bFUCiCRiTS1/ped/wMrgDBAnG66dTtPt6Oj6RUrZAfTE7HYir4jWDDIbNl7eaaq59a7FUOOc=  ;
Message-ID: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
Received: from [212.199.22.205] by web60811.mail.yahoo.com via HTTP; Fri, 20 Oct 2006 03:25:17 PDT
Date: Fri, 20 Oct 2006 03:25:17 -0700 (PDT)
From: zzzzz shalev <zzzzz_shalev@yahoo.com>
Subject: part of speech tagger
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-138948599-1161339917=:39755"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-138948599-1161339917=:39755
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hello all,
   
    i would like to retrieve during query time, the part of speech of each word in a query,
  does anyone know of an implementation of a java part of speech api?
   
  thanks in advance,
   
   

 		
---------------------------------
Stay in the know. Pulse on the new Yahoo.com.  Check it out. 
--0-138948599-1161339917=:39755--

From java-user-return-24162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 20 10:54:21 2006
Return-Path: <java-user-return-24162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52370 invoked from network); 20 Oct 2006 10:54:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 10:54:20 -0000
Received: (qmail 11985 invoked by uid 500); 20 Oct 2006 10:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11192 invoked by uid 500); 20 Oct 2006 10:54:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11181 invoked by uid 99); 20 Oct 2006 10:54:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 03:54:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 03:54:11 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Gas01-0002ig-VU
	for java-user@lucene.apache.org; Fri, 20 Oct 2006 12:53:15 +0200
Received: from vil35-2-82-236-174-106.fbx.proxad.net ([82.236.174.106])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 20 Oct 2006 12:53:13 +0200
Received: from pierrick.brihaye by vil35-2-82-236-174-106.fbx.proxad.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 20 Oct 2006 12:53:13 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Pierrick Brihaye <pierrick.brihaye@free.fr>
Subject:  Re: part of speech tagger
Date:  Fri, 20 Oct 2006 12:52:55 +0200
Lines: 24
Message-ID:  <4538AA87.7010401@free.fr>
References:  <20061020102517.41481.qmail@web60811.mail.yahoo.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: vil35-2-82-236-174-106.fbx.proxad.net
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
In-Reply-To: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ji,

zzzzz shalev a crit :

> hello all,
> 
> i would like to retrieve during query time, the part of speech of
> each word in a query, does anyone know of an implementation of a java
> part of speech api?
> 
> thanks in advance,

Aramorph for Java, which is an arabic Analyzer that provides a Lucene
interface, feeds the token type
(http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/Token.html#type())
with a (possible) POS label. See
http://www.nongnu.org/aramorph/english/lucene.html.

This token type may (and actually is) be used to filter "empty" words.

Cheers,

p.b.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 20 12:10:16 2006
Return-Path: <java-user-return-24163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99045 invoked from network); 20 Oct 2006 12:10:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 12:10:15 -0000
Received: (qmail 22075 invoked by uid 500); 20 Oct 2006 12:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22042 invoked by uid 500); 20 Oct 2006 12:10:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22031 invoked by uid 99); 20 Oct 2006 12:10:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 05:10:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a7.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 05:10:02 -0700
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.dreamhost.com (Postfix) with ESMTP id 544F15BDEF
	for <java-user@lucene.apache.org>; Fri, 20 Oct 2006 05:09:41 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
References: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4E2FD1F8-8196-4108-B388-6B9BE56BF815@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: part of speech tagger
Date: Fri, 20 Oct 2006 08:09:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Google Brill tagger or Brill part of speech tagger.  I believe there  
is a Java API.  It is trainable, as well.

-Grant

On Oct 20, 2006, at 6:25 AM, zzzzz shalev wrote:

> hello all,
>
>     i would like to retrieve during query time, the part of speech  
> of each word in a query,
>   does anyone know of an implementation of a java part of speech api?
>
>   thanks in advance,
>
>
>
>  		
> ---------------------------------
> Stay in the know. Pulse on the new Yahoo.com.  Check it out.

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 20 12:59:10 2006
Return-Path: <java-user-return-24164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15603 invoked from network); 20 Oct 2006 12:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 12:59:10 -0000
Received: (qmail 22376 invoked by uid 500); 20 Oct 2006 12:59:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21748 invoked by uid 500); 20 Oct 2006 12:59:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21737 invoked by uid 99); 20 Oct 2006 12:59:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 05:59:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 05:59:01 -0700
Received: by wx-out-0506.google.com with SMTP id s13so1047653wxc
        for <java-user@lucene.apache.org>; Fri, 20 Oct 2006 05:58:40 -0700 (PDT)
Received: by 10.70.29.7 with SMTP id c7mr708845wxc;
        Fri, 20 Oct 2006 05:58:40 -0700 (PDT)
Received: by 10.70.36.13 with HTTP; Fri, 20 Oct 2006 05:58:40 -0700 (PDT)
Message-ID: <320c7db10610200558r6ccda5f1n4d49c6bc4d6832de@mail.gmail.com>
Date: Fri, 20 Oct 2006 14:58:40 +0200
From: "Fredrik Hedberg" <fredrik@avafan.com>
To: java-user@lucene.apache.org
Subject: Re: part of speech tagger
In-Reply-To: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

http://opennlp.sf.net/

 - Fredrik

2006/10/20, zzzzz shalev <zzzzz_shalev@yahoo.com>:
> hello all,
>
>     i would like to retrieve during query time, the part of speech of each word in a query,
>   does anyone know of an implementation of a java part of speech api?
>
>   thanks in advance,
>
>
>
>
> ---------------------------------
> Stay in the know. Pulse on the new Yahoo.com.  Check it out.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 20 14:29:08 2006
Return-Path: <java-user-return-24165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52343 invoked from network); 20 Oct 2006 14:29:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Oct 2006 14:29:07 -0000
Received: (qmail 99570 invoked by uid 500); 20 Oct 2006 14:28:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99466 invoked by uid 500); 20 Oct 2006 14:28:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99405 invoked by uid 99); 20 Oct 2006 14:28:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 07:28:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Oct 2006 07:28:49 -0700
Received: from [192.168.1.99] (gate.marathonconsulting.com [69.38.225.18])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id k9KESXc17451
	for <java-user@lucene.apache.org>; Fri, 20 Oct 2006 10:28:33 -0400
Message-ID: <4538DD05.2090205@alias-i.com>
Date: Fri, 20 Oct 2006 10:28:21 -0400
From: Breck Baldwin <breck@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: part of speech tagger
References: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
In-Reply-To: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

LingPipe has one, see a tutorial at:

http://alias-i.com/lingpipe/demos/tutorial/posTags/read-me.html

Also look at the competition for academic packages that may or may not 
have POS taggers. See:

http://alias-i.com/lingpipe/web/competition.html

breck (disclosure--we make LingPipe)

zzzzz shalev wrote:
> hello all,
>    
>     i would like to retrieve during query time, the part of speech of each word in a query,
>   does anyone know of an implementation of a java part of speech api?
>    
>   thanks in advance,
>    
>    
> 
>  		
> ---------------------------------
> Stay in the know. Pulse on the new Yahoo.com.  Check it out. 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 06:45:26 2006
Return-Path: <java-user-return-24208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41455 invoked from network); 26 Oct 2006 06:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:33:04 -0000
Received: (qmail 64645 invoked by uid 500); 24 Oct 2006 18:39:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64609 invoked by uid 500); 24 Oct 2006 18:39:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64591 invoked by uid 99); 24 Oct 2006 18:39:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:39:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 11:39:31 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9OId9Vu282294
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 18:39:09 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9OIfpB63084304
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 20:41:51 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9OId94H001540
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 20:39:09 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9OId9Wh001537
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 20:39:09 +0200
In-Reply-To: <200610210852.01464.paul@waite.net.nz>
Subject: Re: index architectures
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF8B3E2CD2.B4E65092-ON88257211.00614D08-88257211.006668A9@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 24 Oct 2006 10:38:34 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 24/10/2006 20:41:51
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Perhaps another comment on the same line - I think you would be able to=
 get
more from your system by bounding the number of open searchers to 2:

 - old, serving 'old' queries, would be soon closed;
 - new, being opened and warmed up, and then serving 'new' queries;

Because... - if I understood how your current setting is working, the
following timed sequence is possible:
 t1.  index updated;
 t2.  query q2 arrives; new searcher s2 opened; s2 starts serving q2;
 t3.  index updated;
 t4.  query q3 arrives; s3 opened; s3 starts serving q3;
 t5.  index updated;
 t6.  q6 arrives; s6 starts to open (takes long, system busy);
 t7.  index updated;
 t8.  q8 arrives; s8 starts to open;
 t9.  s2 done serving q2; s2 is closed;
 t10. s6 done opening; s6 starts serving q6;
 t11. index updated;
And so on...

So, if this is indeed possible (otherwise how would you be able to set
different limits on number of open searchers) I think it would make mor=
e
sense to have the following sequence instead:
 t1.  index updated; a background thread starts to open and warm search=
er
s1;
 t2.  query q2 arrives; s1 not ready yet, hence s0 start serving q2;
 t3.  index updated; two active searchers exist, so do nothing further.=

 t3a. s1 is ready, s0 marked to be retired when free;
 t4.  query q3 arrives; s1 start serving q3;
 t5.  index updated;
 t6.  q6 arrives; s1 starts serving q6;
 t7.  index updated;
 t8.  q8 arrives; s2 starts serving q8;
 t9.  s0 done serving q2; background thread closes s0, start opening &
warming s9.
 t10. index updated;
And so on...

So you avoid exhausting IO resources, by waiting with opening a new
searcher until the previously opened searcher is up and running, and th=
e
previous previous searcher is done and gone. This assumes that your sea=
rch
application does not keep search references too long when serving a que=
ry.
In addition, a query never waits for a searcher to open - it always use=
s
the most recent available searcher.

Hope this makes sense,
Doron

Paul Waite <paul@waite.net.nz> wrote on 20/10/2006 12:52:01:

Paul Waite wrote on 20/10/2006 12:52:01:
> Doron wrote:
>
> > Not sure if this is the case, but you said "searchers", so might be=
 it
-
> > you can (and should) reuse searchers for multiple/concurrent querie=
s.
> > IndexSearcher is thread-safe, so no need to have a different search=
er
for
> > each query. Keep using this searcher until you decide to open a new=

> > searcher - actually until you 'warmed up' the new (updated) searche=
r,
> > then switch to using the new searcher and close the old one.
> >
> > - Doron
>
>
> Thanks Doron, yes we are re-using our Searchers. The particular piece=
 of
> code I refer to below, written by Peter Halcsy contains a method call=
ed
> 'getSearcher()' and this returns a cached IndexSearcher. However firs=
t
> it checks whether the index has been changed since the current Search=
er
> was instantiated, and if so, 'retires' the current, cached Searcher a=
nd
> returns a brand new one. Any retired Searchers get removed once all t=
heir
> current queries are finished.
>
> I have re-worked that piece to put a configurable cap on the number o=
f
> these, which should stop the open-ended behaviour which would lead to=

> our OOM's. Once that max is reached, getSearcher() keeps returning
> the current cached Searcher whether the index is changed or not.
>
> I've tested this and seen it in action by continuously indexing docs =
at
> about 40ms per document, and writing a query benchmarker client which=

> forks N times, with each child looping through a bunch of pre-prepare=
d
> queries. Together with some good logging I can see the searchers bein=
g
> created up to the max. number, then as I vary the indexing throughput=

> it drops back and new Searchers are once more created to get searchin=
g
> back up to date with the index changes.
>
>
> Cheers,
> Paul.
>
>
>
> > Paul Waite <paul@waite.net.nz> wrote on 18/10/2006 18:22:30:
> >
> > > Some excellent feedback guys - thanks heaps.
> > >
> > >
> > > On my OOM issue, I think Hoss has nailed it here:
> > >
> > > > That said: if you are seeing OOM errors when you sort by a fiel=
d
(but
> > > > not when you use the docId ordering, or sort by score) then it
sounds
> > > > like =A0you are keeping refrences to IndexReaders arround after=

you've
> > > > stoped using them -- the FieldCache is kept in a WeakHashMap ke=
yed
> off
> > of
> > > > hte IndexReader, so it should get garbage collected as soon sa =
you
> let
> > go
> > > > of it. =A0Another possibility is that you are sorting on too ma=
ny
> fields
> > > > for it to be able to build the FieldCache for all of them in th=
e
RAM
> > you
> > > > have available.
> > >
> > >
> > > I'm using a piece of code written by Peter Halacsy which implemen=
ts a
> > > SearcherCache class. When we do a search we request a searcher, a=
nd
> this
> > > class looks after giving us one.
> > >
> > > It checks whether the index has been updated since the most recen=
t
> > Searcher
> > > was created. If so it creates a new one.
> > >
> > > At the same time it 'retires' outdated Searchers, once they have =
no
> > queries
> > > busy with them.
> > >
> > > Looking at that code, if the system gets busy indexing new stuff,=
 and
> > doing
> > > complex searches this is all rather open-ended as to the potentia=
l
> number
> > > of fresh Searchers being created, each with the overhead of build=
ing
> its
> > > FieldCache for the first time. No wonder I'm having problems as t=
he
> > archive
> > > has grown! Looking at it in this light, my OOM's all seem to come=

just
> > > after a bout of articles have been indexed, and querying is being=

done
> > > simultaneously, so it does fit.
> > >
> > > I guess a solution is probably to cap this process with a maximum=

> number
> > > of active Searchers, meaning potentially some queries might be fo=
bbed

> off
> > > with slightly out of date versions of the index, in extremis, but=
 it
> > would
> > > right itself once everything settles down again.
> > >
> > > Obviously the index partitioning would probably make this a
non-issue,
> > but
> > > it seems better to sort the basic problem out anyway, and make it=

100%
> > > stable.
> > >
> > > Thanks Hoss!
> > >
> > > Cheers,
> > > Paul.
> > >
> > > -----------------------------------------------------------------=
----
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org=

> > >
>
> --
> Suspicion always haunts the guilty mind.
>       -- Wm. Shakespeare
>
> ---------------------------------------------------------------------=

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 07:18:45 2006
Return-Path: <java-user-return-24206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52876 invoked from network); 26 Oct 2006 06:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:38:43 -0000
Received: (qmail 60402 invoked by uid 500); 24 Oct 2006 15:04:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60375 invoked by uid 500); 24 Oct 2006 15:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60364 invoked by uid 99); 24 Oct 2006 15:04:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 08:04:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 08:03:52 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k9OF3eA28469
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 10:03:41 -0500
Message-ID: <453E2B45.7030606@getopt.org>
Date: Tue, 24 Oct 2006 17:03:33 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: near duplicates
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com> <DEE280E6-4D34-4453-95B8-75A0AB160613@gmail.com> <45350B0F.7070109@getopt.org> <453E21DB.3060406@tera-code.com.ar>
In-Reply-To: <453E21DB.3060406@tera-code.com.ar>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Beto Siless wrote:
> Hi Andrej!
>
> I'm taking a look to fuzzy signatures for near duplicate detection and 
> and I have seen your TextProfileSignature. The question is: If I index 
> the documents with their text signature, is there a way to filter near 
> duplicates at search time without comparing each document with all other?


Well, Nutch uses DeleteDuplicates tool for this, which basically sorts 
and compares these signatures and removes all duplicates from the index. 
Then, when searching, there are simply no duplicates anymore because 
they have been already deleted.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 03:59:29 2006
Return-Path: <java-user-return-24194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3077 invoked from network); 26 Oct 2006 00:27:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 00:27:17 -0000
Received: (qmail 42719 invoked by uid 500); 24 Oct 2006 03:34:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42691 invoked by uid 500); 24 Oct 2006 03:34:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42679 invoked by uid 99); 24 Oct 2006 03:34:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Oct 2006 20:34:04 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Oct 2006 20:33:51 -0700
Received: (qmail 5708 invoked by uid 60001); 24 Oct 2006 03:33:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DDzederS/j9ckcpLXT46TUuXskESIulLvW7YNySgR64zhSHC8Mw6EeIqcjpvKiYN0jvILlDsarNBInfMMVVgAcnI6vNaQ4L2/ICDok82EEP8eHsxjaids0KS3cu3L5JmCYpvghb71hR+8nNWZuRW6gLmotkI95p5IyF14s5iSy8=  ;
Message-ID: <20061024033330.5706.qmail@web50312.mail.yahoo.com>
Received: from [74.65.202.166] by web50312.mail.yahoo.com via HTTP; Mon, 23 Oct 2006 20:33:30 PDT
Date: Mon, 23 Oct 2006 20:33:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: experiences with lingpipe
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Martin,=0A=0A----- Original Message ----=0AFrom: Martin Braun <mbraun@un=
i-hd.de>=0ATo: java-user@lucene.apache.org=0ASent: Monday, October 23, 2006=
 4:29:03 AM=0ASubject: experiences with lingpipe=0A=0Ahi all,=0A=0Adoes any=
body have practical experiences with Ling Pipes Spellchecker=0A(http://www.=
alias-i.com/lingpipe/demos/tutorial/querySpellChecker/read-me.html)?=0A=0AW=
ith lucenes spellcheck contribution I am not really satisfied because=0Athe=
 Index has some (many?) mispelled words, so the did you mean class=0A(from =
the jave.net example) is good in finding similar mispelled words.=0AWith th=
e similarWords  Function the correct word is only around Position=0A2-5  - =
though it should be more frequent in the index.=0A=0AOG: You can modify tha=
t code and exclude low-frequency words (probably misspellings) from your sp=
ellchecker index.=0A=0ASo for know I am thinking of switching to lingpipe, =
but I have a couple=0Aof questions:=0A=0AIs it better than lucenes  spell-c=
heck contribution?=0AWhat about performance?=0AWhat about the quality of su=
ggestions?=0A=0AOG: Lucene's spellchecker is pretty basic.  Check LingPipe =
mailing list.  A few weeks ago, I asked Bob to describe why/how LingPipe sp=
ellchecker is better than Lucene's, and he provided a detailed answer.=0ANo=
te that LingPipe is not free.=0A=0AOtis=0A=0A=0ADoes anybody have a good id=
ea how to find typos in the index.=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 04:30:06 2006
Return-Path: <java-user-return-24212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35607 invoked from network); 26 Oct 2006 00:59:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 00:59:31 -0000
Received: (qmail 16786 invoked by uid 500); 25 Oct 2006 15:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16754 invoked by uid 500); 25 Oct 2006 15:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16743 invoked by uid 99); 25 Oct 2006 15:47:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 08:47:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 08:47:21 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k9PFkv15028588
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 17:46:57 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id EC2518BC45
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 17:46:57 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 01391-03 for <java-user@lucene.apache.org>;
 Wed, 25 Oct 2006 17:46:56 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id BFBF78BC43
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 17:46:56 +0200 (CEST)
Message-ID: <453F86F0.5060101@uni-hd.de>
Date: Wed, 25 Oct 2006 17:46:56 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.7 (X11/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: experiences with lingpipe
References: <453C7D4F.2090502@uni-hd.de> <453D5740.4050005@alias-i.com>
In-Reply-To: <453D5740.4050005@alias-i.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Breck,

thanks for your answer.
>>
>> With lucenes spellcheck contribution I am not really satisfied because
>> the Index has some (many?) mispelled words, so the did you mean class
>> (from the jave.net example) is good in finding similar mispelled words.
>> With the similarWords  Function the correct word is only around Position
>> 2-5  - though it should be more frequent in the index.
> 
> Not quite sure I understand what the issue is here. Is it that the
> similarWords returns ranked words and the correct one is too far down
> the ranked list?

Yes that is exactly the problem. The problem is even worse when
searching with multiple words, because the corrected query has often no
results.  Another part of the problem are that there are some (many ?)
typos in the search_index.

>> What about performance?
> 
> Tuning params dominate the performance space. A small beam (16 active
> hypotheses) will be quite snappy (I have 200 queries/sec with a 32 beam.
> over a 80 gig text collection that with some pruning was 5 gig in memory
> running an 8 gram model)
> 

That's really impressive (though I didn't understand what you mean with
"beams").

Did I unterstand the  license term correctly, that I could use Lingpipe
for free when I am building a Search Engine for a Academic Website (for
free use)?

thanks,
martin

> Tuning is a big deal and I need to write a tuning tutorial. I am doing
> more teaching/training now so that may happen.
> 
> 
> breck
> 
>>
>>
>> Does anybody have a good idea how to find typos in the index.
>>
>> tia,
>> martin
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 05:45:23 2006
Return-Path: <java-user-return-24210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40481 invoked from network); 26 Oct 2006 01:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 01:03:41 -0000
Received: (qmail 55095 invoked by uid 500); 25 Oct 2006 08:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55069 invoked by uid 500); 25 Oct 2006 08:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55058 invoked by uid 99); 25 Oct 2006 08:47:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 01:47:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [85.90.206.104] (HELO office.redwerk.com) (85.90.206.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 01:47:28 -0700
Received: from bofh by office.redwerk.com with local (Exim 4.63 (FreeBSD))
	(envelope-from <bofh@redwerk.com>)
	id 1GcePv-0000SX-EN
	for java-user@lucene.apache.org; Wed, 25 Oct 2006 11:47:19 +0300
Date: Wed, 25 Oct 2006 11:47:19 +0300
From: Eugeny N Dzhurinsky <bofh@redwerk.com>
To: java-user@lucene.apache.org
Subject: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.apache.lucene.queryParser.Token
Message-ID: <20061025084719.GB1654@office.redwerk.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=koi8-r
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there!

I'm trying to implement a service, which is doing search on Lucene index. This
service contains a method returning List of Integer values, and takes custom
object as a parameter. All objects passing to this service are serializable,
but for some reason when executing this code

Query includeQuery = queryParser.parse(findQuery.getIncludeQuery());

("findQuery" is object, which passed to the find method)

this exception is thrown

java.rmi.UnmarshalException: Error unmarshaling return; nested exception is: 
 java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.apache.lucene.queryParser.Token
 sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
 sun.rmi.server.UnicastRef.invoke(Unknown Source)
 LuceneService.LuceneService_Stub.find(Unknown Source)

Am I miss something?

-- 
Eugene N Dzhurinsky

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 05:58:49 2006
Return-Path: <java-user-return-24217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8215 invoked from network); 26 Oct 2006 04:01:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:01:48 -0000
Received: (qmail 73794 invoked by uid 500); 26 Oct 2006 03:32:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73772 invoked by uid 500); 26 Oct 2006 03:32:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73761 invoked by uid 99); 26 Oct 2006 03:32:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 20:32:34 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.236.182] (HELO web58414.mail.re3.yahoo.com) (68.142.236.182)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Oct 2006 20:32:22 -0700
Received: (qmail 94233 invoked by uid 60001); 26 Oct 2006 03:32:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NH1YXsSLM1fyIamgb5C2oj1jvJ/+6ym1E8TJQXYA3g7AbzmIcuI4FQ/mmvt76NP4BqL3eF09y9yF3YG9zsWKvAXA/Uf/0lu08N6g6xmH4JLCi80SUhjeL8SOaqg2qirlETlworJjtxi2TDdiLmwngZ1oIPRbuExhZcDMCVVezuw=  ;
Message-ID: <20061026033201.94231.qmail@web58414.mail.re3.yahoo.com>
Received: from [68.239.26.191] by web58414.mail.re3.yahoo.com via HTTP; Wed, 25 Oct 2006 20:32:01 PDT
Date: Wed, 25 Oct 2006 20:32:01 -0700 (PDT)
From: qaz zaq <fortques@yahoo.com>
Subject: Analyzer.getPositionIncrementGap question
To: java-user@lucene.apache.org
In-Reply-To: <200610181905.56302.paul@waite.net.nz>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-52810543-1161833521=:78765"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-52810543-1161833521=:78765
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I have multiple values want to add to the same FIELD, and I also want to add non-zero but NON CONSTANT position increment gap among those values.  e.g., gap between "value1" and "value2" is 10, but gap between "value2" and "value3" is 100. is there any how can I achieve that?
   
  d.add(new Field ("fld", "value1");
  d.add(new Field ("fld", "value2");
  d.add(new Field ("fld", "value3");
  indexWriter.addDocument(d);

 		
---------------------------------
 All-new Yahoo! Mail - Fire up a more powerful email and get things done faster.
--0-52810543-1161833521=:78765--

From java-user-return-24211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 06:10:51 2006
Return-Path: <java-user-return-24211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33650 invoked from network); 26 Oct 2006 04:15:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:15:49 -0000
Received: (qmail 99685 invoked by uid 500); 25 Oct 2006 09:11:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99655 invoked by uid 500); 25 Oct 2006 09:11:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99644 invoked by uid 99); 25 Oct 2006 09:11:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 02:11:56 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of beatriz.ramos.moreno@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 02:11:44 -0700
Received: by nf-out-0910.google.com with SMTP id b2so481303nfe
        for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 02:11:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xnpx6mZqDuu0HIPC8tiWxW7rV41kaWaPHJuIFdxUkvfnfCTgmJJ2Lr8Z6ONF0x+A2WTLwZdazoagI6p9b0zIRV+u3J8+rnm2SHDaNeYcIFZUY7hmfT7RSldiehMADtKJg4SWX0SOz1jLx9kARHSxcpHK7CNwCOnzb+MAP6ja7fw=
Received: by 10.82.129.8 with SMTP id b8mr43661bud;
        Wed, 25 Oct 2006 02:11:22 -0700 (PDT)
Received: by 10.82.120.13 with HTTP; Wed, 25 Oct 2006 02:11:21 -0700 (PDT)
Message-ID: <cb8ed9940610250211p409d3a25p3174024e713f92f4@mail.gmail.com>
Date: Wed, 25 Oct 2006 11:11:21 +0200
From: "beatriz ramos" <beatriz.ramos.moreno@gmail.com>
To: java-user@lucene.apache.org, samir.abdou@unine.ch
Subject: Re: number of term occurrences
In-Reply-To: <000301c6f759$04b3cc80$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23185_21093606.1161767481956"
References: <25bd904f0610240329g495ffee0y6eb5fbd90add4bc8@mail.gmail.com>
	 <000301c6f759$04b3cc80$2f0b7d82@philosophe>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23185_21093606.1161767481956
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmsgeW91CgpJIGhhZCBmb3Jnb3R0ZW4gIkZpZWxkLlRlcm1WZWN0b3IuWUVTIiB3aGVuIEkg
Y3JlYXRlZCB0aGUgbmV3IEZpZWxkCgoKCk9uIDI0LzEwLzA2LCBTYW1pciBBYmRvdSA8U2FtaXIu
QWJkb3VAdW5pbmUuY2g+IHdyb3RlOgo+Cj4gSGksCj4KPiBZb3UgaW5kZXhlZCB3aXRob3V0IHN0
b3JpbmcgdmVjdG9ycyEgVGhpcyBpcyB3aHkgdGhlIHRlcm0gdmVjdG9yIGlzIG51bGwuCj4KPiBT
YW1pcgo+Cj4KPiAtLS0tLU1lc3NhZ2UgZCdvcmlnaW5lLS0tLS0KPiBEZTogUGF6IEJlbG1vbnRl
IFttYWlsdG86cGF6YmwxQGdtYWlsLmNvbV0KPiBFbnZveek6IG1hcmRpLCAyNC4gb2N0b2JyZSAy
MDA2IDEyOjMwCj4gwDogamF2YS11c2VyCj4gT2JqZXQ6IFJlOiBudW1iZXIgb2YgdGVybSBvY2N1
cnJlbmNlcwo+Cj4gSGksCj4KPiBJIGhhdmUgdHJpZWQgdGhpcyBvcHRpb25zIHRvbyBhbmQgdGhl
IFRlcm0gVmVjdG9yIHJldHVybiBudWxsLgo+Cj4gV2hpY2ggZG8geW91IHRoaW5rIHRoYXQgaXQg
aXMgdGhlIHByb2JsZW0/Cj4KPgo+IDIwMDYvMTAvMjQsIGJlYXRyaXogcmFtb3MgPGJlYXRyaXou
cmFtb3MubW9yZW5vQGdtYWlsLmNvbT46Cj4gPgo+ID4KPiA+Cj4gPiAtLS0tLS0tLS0tIEZvcndh
cmRlZCBtZXNzYWdlIC0tLS0tLS0tLS0KPiA+IEZyb206IGJlYXRyaXogcmFtb3MgPGJlYXRyaXou
cmFtb3MubW9yZW5vQGdtYWlsLmNvbT4KPiA+IERhdGU6IDI0LU9jdC0yMDA2IDExOjI0Cj4gPiBT
dWJqZWN0OiBSZTogbnVtYmVyIG9mIHRlcm0gb2NjdXJyZW5jZXMKPiA+IFRvOiBqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmcKPiA+Cj4gPiBIaSwgdGhhbmtzIGZvciBhbGwgeW91ciBhbnN3ZXJz
LCBidXQgdGhleSBkb24ndCB3b3JrCj4gPgo+ID4gSSBoYXZlIHRyaWVkIHRoZSAzIG9wdGlvbnMg
YW5kIHdpdGggYWxsIG9mIHRoZW0gd2UgZ2V0IHRlcm1Eb2MgPSAwCj4gPiBJIGhhdmUgY2hlY2tl
ZCBteSBpbmRleCB3aXRoIEx1a2Ugc29mdHdhcmUgYW5kIHRlcm1Eb2MgaXMgMSBoZXJlLCBzbyBt
eQo+ID4gaW5kZXggaXMgY29ycmVjdC4KPiA+Cj4gPiBpcyBpdCBwb3NzaWJsZSBJIGhhdmUgYSBw
cm9ibGVtIHdpdGggdGhlIHJlYWRlcj8gKGJlY2F1c2UgbXkgaW5kZXggaXMKPiA+IGFsbHJpZ2h0
KQo+ID4KPiA+IFRoYW5rcwo+ID4KPiA+ICh3aGVuIEkgdGFsayBhYm91dCB0ZXJtRG9jcywgaXQg
bWVhbnMgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB3aGljaCB0ZXJtCj4gPiBhcHBlYXJzKQo+ID4K
PiA+Cj4gPgo+ID4gT24gMjQvMTAvMDYsIEdyYW50IEluZ2Vyc29sbCA8Z3NpbmdlcnNAYXBhY2hl
Lm9yZz4gd3JvdGU6Cj4gPiA+Cj4gPiA+IFlvdSBjYW4gYWxzbyB1c2UgVGVybSBWZWN0b3JzLCBh
dCB0aGUgY29zdCBvZiBleHRyYSBzdG9yYWdlLiAgU2VhcmNoCj4gPiA+IHRoaXMgbGlzdCBmb3Ig
VGVybSBWZWN0b3JzIGZvciBpbmZvIG9uIGhvdyB0byBpbXBsZW1lbnQuCj4gPiA+Cj4gPiA+IE9u
IE9jdCAyMywgMjAwNiwgYXQgNTo1MCBBTSwgYmVhdHJpeiByYW1vcyB3cm90ZToKPiA+ID4KPiA+
ID4gPiBIZWxsbywKPiA+ID4gPiBJtG0gd29ya2luZyB3aXRoIEx1Y2VuZS4gSSBuZWVkIHRvIGdl
dCB0aGUgbnVtYmVyIG9mIG9jY3VycmVuY2VzIG9mCj4gPiA+ID4gdGhlIHRlcm0KPiA+ID4gPiBp
biB0aGUgZG9jdW1lbnQuIEkgaGFkIHNlZW4gdGhlIGRvY3VtZW50YXRpb25zIGFudCBJIGRvbrR0
IGZpbmQKPiA+ID4gPiBhbnl0aGluZy4KPiA+ID4gPiBEbyB5b3UgaGF2ZSBhbnkgaWRlYT8KPiA+
ID4gPiBUaGFua3MuCj4gPiA+Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+
IEdyYW50IEluZ2Vyc29sbAo+ID4gPiBTci4gU29mdHdhcmUgRW5naW5lZXIKPiA+ID4gQ2VudGVy
IGZvciBOYXR1cmFsIExhbmd1YWdlIFByb2Nlc3NpbmcKPiA+ID4gU3lyYWN1c2UgVW5pdmVyc2l0
eQo+ID4gPiAzMzUgSGluZHMgSGFsbAo+ID4gPiBTeXJhY3VzZSwgTlkgMTMyNDQKPiA+ID4gaHR0
cDovL3d3dy5jbmxwLm9yZwo+ID4gPgo+ID4gPgo+ID4gPgo+ID4gPgo+ID4gPiAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnCj4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+Cj4gPiA+Cj4gPgo+Cj4KPiAtLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVA
bHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
------=_Part_23185_21093606.1161767481956--

From java-user-return-24216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 06:18:58 2006
Return-Path: <java-user-return-24216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41487 invoked from network); 26 Oct 2006 04:21:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:21:06 -0000
Received: (qmail 36857 invoked by uid 500); 26 Oct 2006 03:17:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36833 invoked by uid 500); 26 Oct 2006 03:17:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36822 invoked by uid 99); 26 Oct 2006 03:17:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 20:17:14 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Oct 2006 20:17:02 -0700
Received: (qmail 290 invoked by uid 60001); 26 Oct 2006 03:16:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=qiB+I31bI5qvgpQmcdxGKfTdvykpUW/eVxushEYYKt6YZARp6Zjz5xB0DPptrfByBEJEc+vvEshLTSQ3rQEJb8o9h0+b4dr94fVvfKsmbQU/MHJCCn4hG9az94MI8rdCpubFiIM+DS7DkifZXKoTY+/gYDQfnkAV7YXuW6UiQGE=  ;
Message-ID: <20061026031641.285.qmail@web50302.mail.yahoo.com>
Received: from [74.65.202.166] by web50302.mail.yahoo.com via HTTP; Wed, 25 Oct 2006 20:16:41 PDT
Date: Wed, 25 Oct 2006 20:16:41 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene 2.0.1 release date
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

George,=0A=0AYou may want to subscribe to java-dev or just look through the=
 java-dev archives to see how Lucene releases come about.  Let me try re-en=
acting it.=0A=0Adev 1: What do people think about a X.Y release?=0Agroup: S=
ure, why not, looks like we have enough changes, some bug fixes, some perfo=
rmance improvements, ok, let's=0Adev 1: Ok, I'll make a release in the next=
 few days....=0A=0Adev 1 then does the svn branching, updating the version =
number in build.xml, compiling, jaring, signing, pushing to appropriate mac=
hines, etc., announces on java-dev, waits for the mirrors to get a copy of =
the new release, and finally announces it on java-user.=0A=0AThe point is t=
hat releases are not planned ahead of time, so we can never tell which file=
s that have been modified between, say, X.Y and X.Y.Z release.  We know tha=
t only when the release is made.  In short, if you don't want to or can't p=
ort in "real-time", you have to wait for the release to be made, and then s=
tart work on your new release.=0A=0AOtis=0A=0A----- Original Message ----=
=0AFrom: George Aroush <george@aroush.net>=0ATo: java-user@lucene.apache.or=
g=0ASent: Wednesday, October 25, 2006 9:40:39 PM=0ASubject: RE: Lucene 2.0.=
1 release date=0A=0AHi Steven and all,=0A=0A(Sorry for the late response.)=
=0A=0AThis is all fine, but here is my problem with not having a way of kno=
wing=0Awhat makes up 2.0.1.=0A=0AI have ported 2.0 from Java to C#.  I used=
 the packaged (ZIP download) of=0ALucene 2.0 as my port point.  Now, it's t=
ime for me to port 2.0.1 to C#.  To=0Ado so, I need to run a diff between 2=
.0 and 2.0.1 -- how do I go about doing=0Athe diff when I don't know what m=
akes up 2.0.1?  Can I get the list of files=0Athat make up 2.0.1 from SVN? =
 If so, how?  Is what's in the trunk of Lucene=0Amakes up 2.0.1 or 2.1?  (S=
orry, I am not fluent with SVN.)=0A=0ARegards,=0A=0A-- George=0A=0A-----Ori=
ginal Message-----=0AFrom: Steven Parkes [mailto:steven_parkes@esseff.org] =
=0ASent: Tuesday, October 17, 2006 11:45 AM=0ATo: java-user@lucene.apache.o=
rg=0ASubject: RE: Lucene 2.0.1 release date=0A=0AI think the idea is that 2=
.0.1 would be a patch-fix release from the branch=0Acreated at 2.0 release.=
 This release would incorporate only back-ported=0Ahigh-impact patches, whe=
re "high-impact" is defined by the community.=0ACertainly security vulnerab=
ilities would be included. As Otis said, to date,=0Anobody seems to have ra=
ised any issues to that level.=0A=0A2.1 will include all the patches and ne=
w features that have been committed=0Asince 2.0; there've been a number of =
these. But releases are done pretty ad=0Ahoc at this point and there hasn't=
 been anyone that has expressed strong=0Ainterest in (i.e., lobbied for) a =
release.=0A=0AThere was a little discussion on this topic at the ApacheCon =
BOF. For a=0Anumber of reasons, the Lucene Java trunk has been kept "pretty=
 stable", with=0Aa relatively few number of large changes. This makes it re=
latively safe for=0Apeople to grab a snapshot of the trunk with less concer=
n about latent bugs.=0AI don't know how many people/projects are doing this=
 rather than sticking=0Awith 2.0.=0A=0AKeeping the trunk stable doesn't pro=
vide an obvious place to start working=0Aon things that people may want to =
work on and share but at the same time=0Awant to allow to percolate for a w=
hile. I think the concern is that if we=0Astart doing this stuff on trunk n=
ow, people that are accustomed to snapping=0Afrom the trunk might be surpri=
sed, and not in a good way. Nobody wants that.=0A=0ASo releases can be abou=
t both what people want (getting features out) and=0Aallowing a bit more in=
stability in trunk. That is, if the community wants=0Athat.=0A=0AFood for t=
hought and/or discussion?=0A=0A-----Original Message-----=0AFrom: George Ar=
oush [mailto:george@aroush.net]=0ASent: Sunday, October 15, 2006 5:15 PM=0A=
To: java-user@lucene.apache.org=0ASubject: RE: Lucene 2.0.1 release date=0A=
=0AThanks for the reply Otis.=0A=0AI looked at the CHANGES.txt file and saw=
 quit a bit of changes.  For my port=0Afrom Java to C#, I can't rely on the=
 trunk code as it is (to my=0Aknowledge)=0Achanges on a monthly basic if no=
t weekly.  What I need is an official=0Arelease so that I can use it as the=
 port point.=0A=0ARegards,=0A=0A-- George Aroush=0A=0A=0A-----Original Mess=
age-----=0AFrom: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=0ASen=
t: Sunday, October 15, 2006 12:41 AM=0ATo: java-user@lucene.apache.org=0ASu=
bject: Re: Lucene 2.0.1 release date=0A=0AI'd have to check CHANGES.txt, bu=
t I don't think that many bugs have been=0Afixed and not that many new feat=
ures added that anyone is itching for a new=0Arelease.=0A=0AOtis=0A=0A-----=
 Original Message ----=0AFrom: George Aroush <george@aroush.net>=0ATo: java=
-dev@lucene.apache.org; java-user@lucene.apache.org=0ASent: Saturday, Octob=
er 14, 2006 10:32:47 AM=0ASubject: RE: Lucene 2.0.1 release date=0A=0AHi fo=
lks,=0A=0ASorry for reposting this question (see original email below) and =
this time=0Ato both mailing list.=0A=0AIf anyone can tell me what is the pl=
an for Lucene 2.0.1 release, I would=0Aappreciate it very much.=0A=0AAs som=
e of you may know, I am the porter of Lucene to Lucene.Net knowing=0Awhen 2=
.0.1 will be released will help me plan things out.=0A=0ARegards,=0A=0A-- G=
eorge Aroush=0A=0A=0A-----Original Message-----=0AFrom: George Aroush [mail=
to:george@aroush.net]=0ASent: Thursday, October 12, 2006 12:07 AM=0ATo: jav=
a-dev@lucene.apache.org=0ASubject: Lucene 2.0.1 release date=0A=0AHi folks,=
=0A=0AWhat's the plan for Lucene 2.0.1 release date?=0A=0AThanks!=0A=0A-- G=
eorge Aroush=0A=0A=0A------------------------------------------------------=
---------------=0ATo unsubscribe, e-mail: java-dev-unsubscribe@lucene.apach=
e.org=0AFor additional commands, e-mail: java-dev-help@lucene.apache.org=0A=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addit=
ional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A----------=
-----------------------------------------------------------=0ATo unsubscrib=
e, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional command=
s, e-mail: java-user-help@lucene.apache.org=0A=0A=0A-----------------------=
----------------------------------------------=0ATo unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: ja=
va-user-help@lucene.apache.org=0A=0A=0A------------------------------------=
---------------------------------=0ATo unsubscribe, e-mail: java-user-unsub=
scribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@=
lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 06:36:00 2006
Return-Path: <java-user-return-24215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99344 invoked from network); 26 Oct 2006 04:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:34:24 -0000
Received: (qmail 64254 invoked by uid 500); 26 Oct 2006 01:41:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64210 invoked by uid 500); 26 Oct 2006 01:41:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64172 invoked by uid 99); 26 Oct 2006 01:41:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:41:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.222.193.2] (HELO sidekick.frogspace.net) (216.222.193.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 18:41:00 -0700
Received: from pool-68-160-31-39.bos.east.verizon.net ([68.160.31.39] helo=aroushlt)
	by sidekick.frogspace.net with esmtp (Exim 4.44)
	id 1GcuEZ-0008Um-Ry
	for java-user@lucene.apache.org; Wed, 25 Oct 2006 18:40:40 -0700
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene 2.0.1 release date
Date: Wed, 25 Oct 2006 21:40:39 -0400
Message-ID: <009401c6f89f$be4c7c90$6401a8c0@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <392521EA2692A2418DF48C331E61E32522AE@professorville.windows.esseff.org>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AcbwFDN1TOrlo5RxTsKXVCvu3C8qtAAonUlgAFJxYKABp17GsA==
X-SA-Exim-Connect-IP: 68.160.31.39
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steven and all,

(Sorry for the late response.)

This is all fine, but here is my problem with not having a way of knowing
what makes up 2.0.1.

I have ported 2.0 from Java to C#.  I used the packaged (ZIP download) of
Lucene 2.0 as my port point.  Now, it's time for me to port 2.0.1 to C#.  To
do so, I need to run a diff between 2.0 and 2.0.1 -- how do I go about doing
the diff when I don't know what makes up 2.0.1?  Can I get the list of files
that make up 2.0.1 from SVN?  If so, how?  Is what's in the trunk of Lucene
makes up 2.0.1 or 2.1?  (Sorry, I am not fluent with SVN.)

Regards,

-- George

-----Original Message-----
From: Steven Parkes [mailto:steven_parkes@esseff.org] 
Sent: Tuesday, October 17, 2006 11:45 AM
To: java-user@lucene.apache.org
Subject: RE: Lucene 2.0.1 release date

I think the idea is that 2.0.1 would be a patch-fix release from the branch
created at 2.0 release. This release would incorporate only back-ported
high-impact patches, where "high-impact" is defined by the community.
Certainly security vulnerabilities would be included. As Otis said, to date,
nobody seems to have raised any issues to that level.

2.1 will include all the patches and new features that have been committed
since 2.0; there've been a number of these. But releases are done pretty ad
hoc at this point and there hasn't been anyone that has expressed strong
interest in (i.e., lobbied for) a release.

There was a little discussion on this topic at the ApacheCon BOF. For a
number of reasons, the Lucene Java trunk has been kept "pretty stable", with
a relatively few number of large changes. This makes it relatively safe for
people to grab a snapshot of the trunk with less concern about latent bugs.
I don't know how many people/projects are doing this rather than sticking
with 2.0.

Keeping the trunk stable doesn't provide an obvious place to start working
on things that people may want to work on and share but at the same time
want to allow to percolate for a while. I think the concern is that if we
start doing this stuff on trunk now, people that are accustomed to snapping
from the trunk might be surprised, and not in a good way. Nobody wants that.

So releases can be about both what people want (getting features out) and
allowing a bit more instability in trunk. That is, if the community wants
that.

Food for thought and/or discussion?

-----Original Message-----
From: George Aroush [mailto:george@aroush.net]
Sent: Sunday, October 15, 2006 5:15 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene 2.0.1 release date

Thanks for the reply Otis.

I looked at the CHANGES.txt file and saw quit a bit of changes.  For my port
from Java to C#, I can't rely on the trunk code as it is (to my
knowledge)
changes on a monthly basic if not weekly.  What I need is an official
release so that I can use it as the port point.

Regards,

-- George Aroush


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Sunday, October 15, 2006 12:41 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date

I'd have to check CHANGES.txt, but I don't think that many bugs have been
fixed and not that many new features added that anyone is itching for a new
release.

Otis

----- Original Message ----
From: George Aroush <george@aroush.net>
To: java-dev@lucene.apache.org; java-user@lucene.apache.org
Sent: Saturday, October 14, 2006 10:32:47 AM
Subject: RE: Lucene 2.0.1 release date

Hi folks,

Sorry for reposting this question (see original email below) and this time
to both mailing list.

If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
appreciate it very much.

As some of you may know, I am the porter of Lucene to Lucene.Net knowing
when 2.0.1 will be released will help me plan things out.

Regards,

-- George Aroush


-----Original Message-----
From: George Aroush [mailto:george@aroush.net]
Sent: Thursday, October 12, 2006 12:07 AM
To: java-dev@lucene.apache.org
Subject: Lucene 2.0.1 release date

Hi folks,

What's the plan for Lucene 2.0.1 release date?

Thanks!

-- George Aroush


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 06:55:47 2006
Return-Path: <java-user-return-24209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90305 invoked from network); 26 Oct 2006 05:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:03:26 -0000
Received: (qmail 2600 invoked by uid 500); 24 Oct 2006 20:11:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2538 invoked by uid 500); 24 Oct 2006 20:11:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2519 invoked by uid 99); 24 Oct 2006 20:11:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:11:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 13:11:06 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9OKAiFD076882
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 20:10:44 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9OKDQGT3272750
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 22:13:26 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9OKAirw013356
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 22:10:44 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9OKAiQK013353
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 22:10:44 +0200
In-Reply-To: <cb8ed9940610240224w6e03441fk626c52eca463ed7c@mail.gmail.com>
Subject: Re: number of term occurrences
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF38C20138.04DC2A63-ON88257211.006D149B-88257211.006DB237@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 24 Oct 2006 11:58:10 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 24/10/2006 22:13:26
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know why the termDocs option did not work for you. Perhaps you =
did
not (re)open the searcher after the index was populated?  Anyhow, here =
is a
small code snippet that does just this, see if it works for you, then y=
ou
can compare it to your code...

  void numberOfTermOcc() throws Exception {
    System.out.println("=3D=3D=3D=3D=3D=3D=3D=3D populate index");
    RAMDirectory dir =3D new RAMDirectory();
    IndexWriter iw =3D new IndexWriter(dir,
                                     new StandardAnalyzer(),true);
    for (int i =3D 0; i < 10; i++) {
      Document doc =3D new Document();
      for (int j =3D 0; j < 10; j++) {
        doc.add(new Field("field_"+(i+j), "value_"+(i+j),
                          Field.Store.NO, Field.Index.TOKENIZED));
        doc.add(new Field("field_"+(i+j), "value_"+(i+j),
                          Field.Store.NO, Field.Index.TOKENIZED));
        doc.add(new Field("field_"+(i+j), "value_"+(i+j+1),
                          Field.Store.NO, Field.Index.TOKENIZED));
      }
      iw.addDocument(doc);
    }
    iw.close();

    IndexReader ir =3D IndexReader.open(dir);
    printTermDocs(ir, new Term("field_7","value_7"));
    printTermDocs(ir, new Term("field_7","value_8"));
  }

  void printTermDocs(IndexReader ir, Term t) throws IOException {
    System.out.println("=3D=3D=3D=3D=3D=3D=3D=3D=3D iterate docs for "+=
t);
    TermDocs td =3D ir.termDocs(t);

    while (td.next()) {
      System.out.println("term frequency in doc "+td.doc()+
                         " is: "+ td.freq());
    };
  }

"beatriz ramos" <beatriz.ramos.moreno@gmail.com> wrote on 24/10/2006
02:24:47:

> Hi, thanks for all your answers, but they don't work
>
> I have tried the 3 options and with all of them we get termDoc =3D 0
> I have checked my index with Luke software and termDoc is 1 here, so =
my
> index is correct.
>
> is it possible I have a problem with the reader? (because my index is=

> allright)
>
> Thanks
>
> (when I talk about termDocs, it means number of documents in which te=
rm
> appears)
>
>
>
> On 24/10/06, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > You can also use Term Vectors, at the cost of extra storage.  Searc=
h
> > this list for Term Vectors for info on how to implement.
> >
> > On Oct 23, 2006, at 5:50 AM, beatriz ramos wrote:
> >
> > > Hello,
> > > I=B4m working with Lucene. I need to get the number of occurrence=
s of
> > > the term
> > > in the document. I had seen the documentations ant I don=B4t find=

> > > anything.
> > > Do you have any idea?
> > > Thanks.
> >
> > --------------------------
> > Grant Ingersoll
> > Sr. Software Engineer
> > Center for Natural Language Processing
> > Syracuse University
> > 335 Hinds Hall
> > Syracuse, NY 13244
> > http://www.cnlp.org
> >
> >
> >
> >
> > -------------------------------------------------------------------=
--
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 06:57:07 2006
Return-Path: <java-user-return-24200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57549 invoked from network); 26 Oct 2006 04:57:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 04:57:50 -0000
Received: (qmail 70131 invoked by uid 500); 24 Oct 2006 12:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70106 invoked by uid 500); 24 Oct 2006 12:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70095 invoked by uid 99); 24 Oct 2006 12:25:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 05:25:57 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 05:25:43 -0700
Received: by nf-out-0910.google.com with SMTP id b2so181764nfe
        for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 05:25:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=taW6r+AKpLL5h5WJICVLuAcckhtvokCA5dOdyiBcD67JFMmk6mQm1fNHMUJzQdC4QXoZA/pqerMDBuOu1StoShRW6GKtehl5Q0Ws8dvqSdyyS6+AkRqrZNDR/x3UdZSQKjdsitlyxFcz5lQBhcXeWOERoofRh6YsZoD/i+YmziY=
Received: by 10.82.136.4 with SMTP id j4mr1666593bud;
        Tue, 24 Oct 2006 05:25:21 -0700 (PDT)
Received: by 10.82.162.13 with HTTP; Tue, 24 Oct 2006 05:25:21 -0700 (PDT)
Message-ID: <359a92830610240525g342bb318y66d854171de14cfb@mail.gmail.com>
Date: Tue, 24 Oct 2006 08:25:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index short text
In-Reply-To: <c2174c890610240420v444fa064jd9d400becf657e8f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3284_13525109.1161692721432"
References: <c2174c890610240420v444fa064jd9d400becf657e8f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3284_13525109.1161692721432
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Could you specify why the score is not suitable? What is it you're trying to
do that isn't working correctly?

At a guess, I'd suspect that if you're using, say, StandardAnalyzer during
index time, the input stream is being tokenized differently than you expect.
And, depending upon what analyzer you use at query time, you could be seeing
results that are surprising.

But that is only a guess since I don't know what behavior you would like to
see but do not see.

Best
Erick

On 10/24/06, zhongyi yuan <yzy1980@gmail.com> wrote:
>
> I use lucene to index the address information, because the address
> information is so short, so I think use the Lucene Score computing is
> not suitable.
> who can give me some advices to index short address information.
>
> the format of address is: name,address etc.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3284_13525109.1161692721432--

From java-user-return-24218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 07:03:39 2006
Return-Path: <java-user-return-24218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98904 invoked from network); 26 Oct 2006 05:05:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:05:04 -0000
Received: (qmail 12496 invoked by uid 500); 26 Oct 2006 05:05:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12454 invoked by uid 500); 26 Oct 2006 05:05:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12443 invoked by uid 99); 26 Oct 2006 05:05:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 22:05:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 22:04:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 37FAF5B77C; Wed, 25 Oct 2006 22:04:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2FCED7F403
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 22:04:36 -0700 (PDT)
Date: Wed, 25 Oct 2006 22:04:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date
In-Reply-To: <20061026031641.285.qmail@web50302.mail.yahoo.com>
Message-ID: <Pine.LNX.4.58.0610252159070.14627@hal.rescomp.berkeley.edu>
References: <20061026031641.285.qmail@web50302.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The point is that releases are not planned ahead of time, so we can
: never tell which files that have been modified between, say, X.Y and
: X.Y.Z release.  We know that only when the release is made.  In short,

that's not entirely true ... it's very easy to determine exactly what has
changed between any two releases by diffing the releases, but that can
only be done once the release is made.

typically there is a window of time in which the changes that will be
going into a release are applied to a branch specificly created for that
release, so thta people can try it out and check for last minute bugs ...
at that point you will have a reasonably high level of confidence that you
know what is going to be in that release, and you could start working on
porting then (even though the release isn't final) recording what versions
you port and using subversion to check for any bug fixes made after that.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 07:19:44 2006
Return-Path: <java-user-return-24214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78602 invoked from network); 26 Oct 2006 05:29:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:29:18 -0000
Received: (qmail 23343 invoked by uid 500); 25 Oct 2006 20:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23306 invoked by uid 500); 25 Oct 2006 20:17:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23295 invoked by uid 99); 25 Oct 2006 20:17:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 13:17:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 13:17:12 -0700
Received: from [192.168.1.99] (gate.marathonconsulting.com [69.38.225.18])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id k9PKH0c23998
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 16:17:01 -0400
Message-ID: <453FC61F.5010505@alias-i.com>
Date: Wed, 25 Oct 2006 16:16:31 -0400
From: Breck Baldwin <breck@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: experiences with lingpipe
References: <453C7D4F.2090502@uni-hd.de> <453D5740.4050005@alias-i.com> <453F86F0.5060101@uni-hd.de>
In-Reply-To: <453F86F0.5060101@uni-hd.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Martin Braun wrote:
> Hi Breck,
> 
> thanks for your answer.
> 
<snip>
> 
>>>What about performance?
>>
>>Tuning params dominate the performance space. A small beam (16 active
>>hypotheses) will be quite snappy (I have 200 queries/sec with a 32 beam.
>>over a 80 gig text collection that with some pruning was 5 gig in memory
>>running an 8 gram model)
>>
> 
> 
> That's really impressive (though I didn't understand what you mean with
> "beams").

Beam is how many active spellings your search space has. So 'brek' with 
a beam of 3 would retain 3 different spelling variations as a result of 
the best scoreing edits against the underlyinig language model--it is 
maintained in a left to right scan of the word.

> 
> Did I unterstand the  license term correctly, that I could use Lingpipe
> for free when I am building a Search Engine for a Academic Website (for
> free use)?

Yep.

best

breck
> 
> thanks,
> martin
> 
> 
>>Tuning is a big deal and I need to write a tuning tutorial. I am doing
>>more teaching/training now so that may happen.
>>
>>
>>breck
>>
>>
>>>
>>>Does anybody have a good idea how to find typos in the index.
>>>
>>>tia,
>>>martin
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> 

-- 
Breck Baldwin
Alias-i, Inc.
181 North 11th Street, Suite 401
Brooklyn, NY 11211
v:718.290.9170
f:718.290.9171
m:917.292.8845
breck@alias-i.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 07:22:33 2006
Return-Path: <java-user-return-24207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87683 invoked from network); 26 Oct 2006 05:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:34:47 -0000
Received: (qmail 40181 invoked by uid 500); 24 Oct 2006 17:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40153 invoked by uid 500); 24 Oct 2006 17:10:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40142 invoked by uid 99); 24 Oct 2006 17:10:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 10:10:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 10:10:40 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9OHAHA4210436
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 17:10:17 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9OHCx5C2527362
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 19:12:59 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9OHAHrF017525
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 19:10:17 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9OHAHoc017522
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 19:10:17 +0200
In-Reply-To: <20061020074623.50331.qmail@web50301.mail.yahoo.com>
Subject: Re: Scalability Questions
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFB6CDA8B8.5C14FA8B-ON88257211.005C7688-88257211.005D1CA4@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 24 Oct 2006 08:57:01 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 24/10/2006 19:12:59
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

>> 4) Roughly how large is the index file in comparison to the size of the
>> input files?
>
> It depends on whether you store fields or just index them, plus
> there is also a compression (gzip -9 equivalent) option.

As an example - index size numbers I saw: when indexing 1M docs of ~20KB of
very simple HTML, that is input size of ~19GB, and having only doc name
(URL) as a stored field, and no term vectors, index size was ~2.5GB. As
Otis said, this really depends on your settings which may be much different
from the above, but perhaps this would give you a feeling what you can
expect.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 07:38:52 2006
Return-Path: <java-user-return-24201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56974 invoked from network); 26 Oct 2006 05:50:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 05:50:20 -0000
Received: (qmail 98173 invoked by uid 500); 24 Oct 2006 13:18:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98141 invoked by uid 500); 24 Oct 2006 13:18:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98105 invoked by uid 99); 24 Oct 2006 13:18:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 06:18:26 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pazbl1@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 06:18:14 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1475517ugc
        for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 06:17:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DXdaLEGvlBDsEtkyrrjhzn7D5TifZomwtfWdZyX6qxrqxwpbdMtsNKPcXsgDB8ceY7vRqrNtcHvDZEUe6aVS6bXnuREVNGV+wN5A5s1/ukaq+eHVDwZKN+UXs+g13rwUldjp+17V7oabhhGF2mg/S13eY0V27F0gVrJuR9laWRM=
Received: by 10.78.201.10 with SMTP id y10mr9221129huf;
        Tue, 24 Oct 2006 06:17:51 -0700 (PDT)
Received: by 10.78.161.12 with HTTP; Tue, 24 Oct 2006 06:17:51 -0700 (PDT)
Message-ID: <25bd904f0610240617t6d492defh199eccab95ab003a@mail.gmail.com>
Date: Tue, 24 Oct 2006 15:17:51 +0200
From: "Paz Belmonte" <pazbl1@gmail.com>
To: java-user@lucene.apache.org, samir.abdou@unine.ch
Subject: Re: number of term occurrences
In-Reply-To: <000301c6f759$04b3cc80$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8917_27784311.1161695871834"
References: <25bd904f0610240329g495ffee0y6eb5fbd90add4bc8@mail.gmail.com>
	 <000301c6f759$04b3cc80$2f0b7d82@philosophe>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8917_27784311.1161695871834
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSBkb24ndCBrbm93LiBIb3cgYXJlIHRoaXMgdmVjdG9ycyBzdG9yZWQ/CkNvdWxkIHlvdSBzaG93
IG1lIGFuIGV4YW1wbGU/IChvciBkb2N1bWVudGF0aW9uIHdoZXJlIEkgY2FuIGZpbmQgaXQpCgoy
MDA2LzEwLzI0LCBTYW1pciBBYmRvdSA8U2FtaXIuQWJkb3VAdW5pbmUuY2g+Ogo+Cj4gSGksCj4K
PiBZb3UgaW5kZXhlZCB3aXRob3V0IHN0b3JpbmcgdmVjdG9ycyEgVGhpcyBpcyB3aHkgdGhlIHRl
cm0gdmVjdG9yIGlzIG51bGwuCj4KPiBTYW1pcgo+Cj4KPiAtLS0tLU1lc3NhZ2UgZCdvcmlnaW5l
LS0tLS0KPiBEZTogUGF6IEJlbG1vbnRlIFttYWlsdG86cGF6YmwxQGdtYWlsLmNvbV0KPiBFbnZv
eek6IG1hcmRpLCAyNC4gb2N0b2JyZSAyMDA2IDEyOjMwCj4gwDogamF2YS11c2VyCj4gT2JqZXQ6
IFJlOiBudW1iZXIgb2YgdGVybSBvY2N1cnJlbmNlcwo+Cj4gSGksCj4KPiBJIGhhdmUgdHJpZWQg
dGhpcyBvcHRpb25zIHRvbyBhbmQgdGhlIFRlcm0gVmVjdG9yIHJldHVybiBudWxsLgo+Cj4gV2hp
Y2ggZG8geW91IHRoaW5rIHRoYXQgaXQgaXMgdGhlIHByb2JsZW0/Cj4KPgo+IDIwMDYvMTAvMjQs
IGJlYXRyaXogcmFtb3MgPGJlYXRyaXoucmFtb3MubW9yZW5vQGdtYWlsLmNvbT46Cj4gPgo+ID4K
PiA+Cj4gPiAtLS0tLS0tLS0tIEZvcndhcmRlZCBtZXNzYWdlIC0tLS0tLS0tLS0KPiA+IEZyb206
IGJlYXRyaXogcmFtb3MgPGJlYXRyaXoucmFtb3MubW9yZW5vQGdtYWlsLmNvbT4KPiA+IERhdGU6
IDI0LU9jdC0yMDA2IDExOjI0Cj4gPiBTdWJqZWN0OiBSZTogbnVtYmVyIG9mIHRlcm0gb2NjdXJy
ZW5jZXMKPiA+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiA+Cj4gPiBIaSwgdGhh
bmtzIGZvciBhbGwgeW91ciBhbnN3ZXJzLCBidXQgdGhleSBkb24ndCB3b3JrCj4gPgo+ID4gSSBo
YXZlIHRyaWVkIHRoZSAzIG9wdGlvbnMgYW5kIHdpdGggYWxsIG9mIHRoZW0gd2UgZ2V0IHRlcm1E
b2MgPSAwCj4gPiBJIGhhdmUgY2hlY2tlZCBteSBpbmRleCB3aXRoIEx1a2Ugc29mdHdhcmUgYW5k
IHRlcm1Eb2MgaXMgMSBoZXJlLCBzbyBteQo+ID4gaW5kZXggaXMgY29ycmVjdC4KPiA+Cj4gPiBp
cyBpdCBwb3NzaWJsZSBJIGhhdmUgYSBwcm9ibGVtIHdpdGggdGhlIHJlYWRlcj8gKGJlY2F1c2Ug
bXkgaW5kZXggaXMKPiA+IGFsbHJpZ2h0KQo+ID4KPiA+IFRoYW5rcwo+ID4KPiA+ICh3aGVuIEkg
dGFsayBhYm91dCB0ZXJtRG9jcywgaXQgbWVhbnMgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB3aGlj
aCB0ZXJtCj4gPiBhcHBlYXJzKQo+ID4KPiA+Cj4gPgo+ID4gT24gMjQvMTAvMDYsIEdyYW50IElu
Z2Vyc29sbCA8Z3NpbmdlcnNAYXBhY2hlLm9yZz4gd3JvdGU6Cj4gPiA+Cj4gPiA+IFlvdSBjYW4g
YWxzbyB1c2UgVGVybSBWZWN0b3JzLCBhdCB0aGUgY29zdCBvZiBleHRyYSBzdG9yYWdlLiAgU2Vh
cmNoCj4gPiA+IHRoaXMgbGlzdCBmb3IgVGVybSBWZWN0b3JzIGZvciBpbmZvIG9uIGhvdyB0byBp
bXBsZW1lbnQuCj4gPiA+Cj4gPiA+IE9uIE9jdCAyMywgMjAwNiwgYXQgNTo1MCBBTSwgYmVhdHJp
eiByYW1vcyB3cm90ZToKPiA+ID4KPiA+ID4gPiBIZWxsbywKPiA+ID4gPiBJtG0gd29ya2luZyB3
aXRoIEx1Y2VuZS4gSSBuZWVkIHRvIGdldCB0aGUgbnVtYmVyIG9mIG9jY3VycmVuY2VzIG9mCj4g
PiA+ID4gdGhlIHRlcm0KPiA+ID4gPiBpbiB0aGUgZG9jdW1lbnQuIEkgaGFkIHNlZW4gdGhlIGRv
Y3VtZW50YXRpb25zIGFudCBJIGRvbrR0IGZpbmQKPiA+ID4gPiBhbnl0aGluZy4KPiA+ID4gPiBE
byB5b3UgaGF2ZSBhbnkgaWRlYT8KPiA+ID4gPiBUaGFua3MuCj4gPiA+Cj4gPiA+IC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+IEdyYW50IEluZ2Vyc29sbAo+ID4gPiBTci4gU29mdHdh
cmUgRW5naW5lZXIKPiA+ID4gQ2VudGVyIGZvciBOYXR1cmFsIExhbmd1YWdlIFByb2Nlc3NpbmcK
PiA+ID4gU3lyYWN1c2UgVW5pdmVyc2l0eQo+ID4gPiAzMzUgSGluZHMgSGFsbAo+ID4gPiBTeXJh
Y3VzZSwgTlkgMTMyNDQKPiA+ID4gaHR0cDovL3d3dy5jbmxwLm9yZwo+ID4gPgo+ID4gPgo+ID4g
Pgo+ID4gPgo+ID4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDog
amF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4g
PiA+Cj4gPiA+Cj4gPgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
------=_Part_8917_27784311.1161695871834--

From java-user-return-24196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 09:47:27 2006
Return-Path: <java-user-return-24196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21117 invoked from network); 26 Oct 2006 06:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:18:38 -0000
Received: (qmail 19602 invoked by uid 500); 24 Oct 2006 09:25:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19577 invoked by uid 500); 24 Oct 2006 09:25:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19566 invoked by uid 99); 24 Oct 2006 09:25:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 02:25:22 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of beatriz.ramos.moreno@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 02:25:10 -0700
Received: by nf-out-0910.google.com with SMTP id b2so135663nfe
        for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 02:24:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MKluQnTjeFPxOq9MWyd4y3/AyZpsycj6m5hOPCJ4U+PhKKdPAh1S8G3PUS732FQWLW5TX8KPpuvxk44FIUKzXtZON2NgCvQxVvG01hTBrRDg94x43mD68MI7O715SeDsXUFsUp6h1yf4VxWokSsigCUJujm5/M1lZZ6u/r9TIys=
Received: by 10.82.131.1 with SMTP id e1mr1631729bud;
        Tue, 24 Oct 2006 02:24:48 -0700 (PDT)
Received: by 10.82.120.13 with HTTP; Tue, 24 Oct 2006 02:24:47 -0700 (PDT)
Message-ID: <cb8ed9940610240224w6e03441fk626c52eca463ed7c@mail.gmail.com>
Date: Tue, 24 Oct 2006 11:24:47 +0200
From: "beatriz ramos" <beatriz.ramos.moreno@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: number of term occurrences
In-Reply-To: <22E7D818-2EF4-4979-8BDD-31B014251F4E@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4711_32777818.1161681887906"
References: <cb8ed9940610230250v6c26e822wa842c7e5538ed11@mail.gmail.com>
	 <22E7D818-2EF4-4979-8BDD-31B014251F4E@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4711_32777818.1161681887906
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, thanks for all your answers, but they don't work

I have tried the 3 options and with all of them we get termDoc =3D 0
I have checked my index with Luke software and termDoc is 1 here, so my
index is correct.

is it possible I have a problem with the reader? (because my index is
allright)

Thanks

(when I talk about termDocs, it means number of documents in which term
appears)



On 24/10/06, Grant Ingersoll <gsingers@apache.org> wrote:
>
> You can also use Term Vectors, at the cost of extra storage.  Search
> this list for Term Vectors for info on how to implement.
>
> On Oct 23, 2006, at 5:50 AM, beatriz ramos wrote:
>
> > Hello,
> > I=B4m working with Lucene. I need to get the number of occurrences of
> > the term
> > in the document. I had seen the documentations ant I don=B4t find
> > anything.
> > Do you have any idea?
> > Thanks.
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4711_32777818.1161681887906--

From java-user-return-24199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 09:51:48 2006
Return-Path: <java-user-return-24199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76137 invoked from network); 26 Oct 2006 06:50:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:50:42 -0000
Received: (qmail 49603 invoked by uid 500); 24 Oct 2006 11:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49584 invoked by uid 500); 24 Oct 2006 11:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49573 invoked by uid 99); 24 Oct 2006 11:21:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 04:21:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yzy1980@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 04:21:10 -0700
Received: by ug-out-1314.google.com with SMTP id k40so1448268ugc
        for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 04:20:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jIrmuUHSU/+yBJCwCaPNBxfBfzYj2F0STxnSn9Eik5LIbf9f3odKO/HqZ3mkY114keBAZImxr7Ip5CPNliidTiDtamE26BThvZuwoXkd2JFhLO5+WWCiYnMzFcr4uIhHEqIlk2Rur/hV+NCLuM8A5ViqPxx2IoImAF8fCz1iHko=
Received: by 10.78.158.11 with SMTP id g11mr1523145hue;
        Tue, 24 Oct 2006 04:20:48 -0700 (PDT)
Received: by 10.78.129.13 with HTTP; Tue, 24 Oct 2006 04:20:48 -0700 (PDT)
Message-ID: <c2174c890610240420v444fa064jd9d400becf657e8f@mail.gmail.com>
Date: Tue, 24 Oct 2006 19:20:48 +0800
From: "zhongyi yuan" <yzy1980@gmail.com>
To: java-user@lucene.apache.org
Subject: index short text
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I use lucene to index the address information, because the address
information is so short, so I think use the Lucene Score computing is
not suitable.
who can give me some advices to index short address information.

the format of address is: name,address etc.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 10:04:38 2006
Return-Path: <java-user-return-24202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53849 invoked from network); 26 Oct 2006 06:26:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:26:38 -0000
Received: (qmail 79593 invoked by uid 500); 24 Oct 2006 13:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79568 invoked by uid 500); 24 Oct 2006 13:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79556 invoked by uid 99); 24 Oct 2006 13:54:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 06:54:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [129.97.152.11] (HELO services04.student.cs.uwaterloo.ca) (129.97.152.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 06:54:23 -0700
Received: from cpu14.student.cs.uwaterloo.ca (daemon@cpu14.student.cs.uwaterloo.ca [129.97.152.114])
	by services04.student.cs.uwaterloo.ca (8.13.8/8.13.8) with ESMTP id k9ODruJ3015248;
	Tue, 24 Oct 2006 09:54:00 -0400 (EDT)
Received: (from pgwillia@localhost)
	by cpu14.student.cs.uwaterloo.ca (8.13.4/8.13.4) id k9ODrtYe018874;
	Tue, 24 Oct 2006 09:53:55 -0400 (EDT)
Date: Tue, 24 Oct 2006 09:53:55 -0400 (EDT)
From: Tricia Williams <pgwillia@student.cs.uwaterloo.ca>
To: Paz Belmonte <pazbl1@gmail.com>
cc: java-user@lucene.apache.org
Subject: Re: number of term occurrences
In-Reply-To: <25bd904f0610240617t6d492defh199eccab95ab003a@mail.gmail.com>
Message-ID: <Pine.GSO.4.64.0610240946230.17738@cpu14.student.cs.uwaterloo.ca>
References: <25bd904f0610240329g495ffee0y6eb5fbd90add4bc8@mail.gmail.com> 
 <000301c6f759$04b3cc80$2f0b7d82@philosophe>
 <25bd904f0610240617t6d492defh199eccab95ab003a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0 (services04.student.cs.uwaterloo.ca [129.97.152.11]); Tue, 24 Oct 2006 09:54:01 -0400 (EDT)
X-Miltered: at aegina with ID 453E1AF4.000 by Joe's j-chkmail (http://j-chkmail.ensmp.fr)!
X-Virus-Scanned: ClamAV version 0.88.5, clamav-milter version 0.88.5 on localhost
X-Virus-Status: Clean
X-UUID: 5afd246a-a0c6-426f-888a-68a0cd65f5ca
X-Virus-Checked: Checked by ClamAV on apache.org

When you create a Document by adding Field(s) 
(http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html) 
consider the last constructor which allows you to specify if the the field 
will have its TermVector stored or not stored.  Also, Luke has a column in 
its document view which tells you if the TermVector is stored or not 
stored by the presence or lack of precence of a + under the T column.

Cheers,
Tricia

On Tue, 24 Oct 2006, Paz Belmonte wrote:

> I don't know. How are this vectors stored?
> Could you show me an example? (or documentation where I can find it)
>
> 2006/10/24, Samir Abdou <Samir.Abdou@unine.ch>:
>>
>> Hi,
>>
>> You indexed without storing vectors! This is why the term vector is null.
>>
>> Samir
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 10:16:09 2006
Return-Path: <java-user-return-24213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3781 invoked from network); 26 Oct 2006 07:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:05:50 -0000
Received: (qmail 22955 invoked by uid 500); 25 Oct 2006 18:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22931 invoked by uid 500); 25 Oct 2006 18:24:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22918 invoked by uid 99); 25 Oct 2006 18:24:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:24:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Oct 2006 11:24:15 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9PINr3h157012
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 18:23:53 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9PIQad93158082
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 20:26:36 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9PINrjM019433
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 20:23:53 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9PINqJQ019428
	for <java-user@lucene.apache.org>; Wed, 25 Oct 2006 20:23:52 +0200
In-Reply-To: <20061025084719.GB1654@office.redwerk.com>
Subject: Re: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.apache.lucene.queryParser.Token
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF5AC6EFB3.1AAC9ABB-ON88257212.0063E237-88257212.00648596@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 25 Oct 2006 10:17:58 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 25/10/2006 20:26:36
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eugene,

If the query parser (from some reason) throws a ParseException, and the RMI
layer attempts to marshal/serialize that exception, there would probably be
an issue because although ParseException is serializable (as all
throwables) it has a Token data member, which is not serializable. Can you
check if this is the case?

- Doron

Eugeny N Dzhurinsky <bofh@redwerk.com> wrote on 25/10/2006 01:47:19:

> Hi there!
>
> I'm trying to implement a service, which is doing search on Lucene index.
This
> service contains a method returning List of Integer values, and takes
custom
> object as a parameter. All objects passing to this service are
serializable,
> but for some reason when executing this code
>
> Query includeQuery = queryParser.parse(findQuery.getIncludeQuery());
>
> ("findQuery" is object, which passed to the find method)
>
> this exception is thrown
>
> java.rmi.UnmarshalException: Error unmarshaling return; nested exception
is:
>  java.io.WriteAbortedException: writing aborted; java.io.
> NotSerializableException: org.apache.lucene.queryParser.Token
>  sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
>  sun.rmi.server.UnicastRef.invoke(Unknown Source)
>  LuceneService.LuceneService_Stub.find(Unknown Source)
>
> Am I miss something?
>
> --
> Eugene N Dzhurinsky


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 10:57:28 2006
Return-Path: <java-user-return-24203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36152 invoked from network); 26 Oct 2006 06:53:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:53:39 -0000
Received: (qmail 24745 invoked by uid 500); 24 Oct 2006 14:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24696 invoked by uid 500); 24 Oct 2006 14:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24660 invoked by uid 99); 24 Oct 2006 14:09:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 07:09:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [201.216.245.26] (HELO sledge.tera-code.com.ar) (201.216.245.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 07:08:42 -0700
Received: from [192.168.1.54] (devel.tera-code.com.ar [201.216.245.25])
	by sledge.tera-code.com.ar (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k9ODsGqr005076
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 10:54:16 -0300
Message-ID: <453E1E4F.1080300@tera-code.com.ar>
Date: Tue, 24 Oct 2006 11:08:15 -0300
From: Beto Siless <beto@tera-code.com.ar>
Organization: tera-code
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: near duplicates
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com> <A389DCB4-B00D-42EF-90A6-78D94EB06A04@gmail.com>
In-Reply-To: <A389DCB4-B00D-42EF-90A6-78D94EB06A04@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Karl!
I'm interested in near duplicate detection based on termFreqVectos. Now 
I'm comparing all documents with each other (calculating the angle)... 
Is there a way to avoid that?

Thanks!
Beto

karl wettin wrote:
> 
> 17 okt 2006 kl. 17.54 skrev Find Me:
> 
>> How to eliminate near duplicates from the index?
> 
> Oh, one more thing. You should probably look at the norms in order to 
> avoid comparing all documents to each other.
> 
> 
> 
> ------------------------------------------------------------------------
> 
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.1.408 / Virus Database: 268.13.4/477 - Release Date: 10/16/2006

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:00:11 2006
Return-Path: <java-user-return-24204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40050 invoked from network); 26 Oct 2006 06:55:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 06:55:52 -0000
Received: (qmail 59432 invoked by uid 500); 24 Oct 2006 14:24:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59395 invoked by uid 500); 24 Oct 2006 14:23:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59377 invoked by uid 99); 24 Oct 2006 14:23:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 07:23:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [201.216.245.26] (HELO sledge.tera-code.com.ar) (201.216.245.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 07:23:44 -0700
Received: from [192.168.1.54] (devel.tera-code.com.ar [201.216.245.25])
	by sledge.tera-code.com.ar (8.13.4/8.13.4/Debian-3sarge1) with ESMTP id k9OE9NM0005763
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 11:09:24 -0300
Message-ID: <453E21DB.3060406@tera-code.com.ar>
Date: Tue, 24 Oct 2006 11:23:23 -0300
From: Beto Siless <beto@tera-code.com.ar>
Organization: tera-code
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: near duplicates
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com> <DEE280E6-4D34-4453-95B8-75A0AB160613@gmail.com> <45350B0F.7070109@getopt.org>
In-Reply-To: <45350B0F.7070109@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andrej!

I'm taking a look to fuzzy signatures for near duplicate detection and 
and I have seen your TextProfileSignature. The question is: If I index 
the documents with their text signature, is there a way to filter near 
duplicates at search time without comparing each document with all other?

Thanks
Beto

Andrzej Bialecki wrote:
> karl wettin wrote:
>>
>> 17 okt 2006 kl. 17.54 skrev Find Me:
>>
>>> How to eliminate near duplicates from the index?
>>
>> I would probably try to measure the Ecludian distance between all 
>> documents, computed on terms and their positions. Or perhaps use 
>> standard deviation to find the distribution of terms in a document. 
>> One would based on the output from that try to find a threashold. 
>> Either way it will consume lots of CPU.
> 
> 
> There are better ways to achieve this. You need to create a fuzzy 
> signature of the document, based on term histogram or shingles - take a 
> look a the Signature framework in Nutch.
> 
> There is a substantial literature on this subject - go to Citeseer and 
> run a search for "near duplicate detection".
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:13:41 2006
Return-Path: <java-user-return-24197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24435 invoked from network); 26 Oct 2006 07:23:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:23:32 -0000
Received: (qmail 39519 invoked by uid 500); 24 Oct 2006 10:30:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39476 invoked by uid 500); 24 Oct 2006 10:30:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39455 invoked by uid 99); 24 Oct 2006 10:30:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 03:30:14 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pazbl1@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 03:30:01 -0700
Received: by nf-out-0910.google.com with SMTP id b2so152564nfe
        for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 03:29:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DxNBL5Gvvdr7PTYzlwMuxrrMuswQ41u/AmAtMc3x5hI+rumgIoh+6u4MEEQ9CfpMWv3PjO+Q+Kghl/3yJrfuCfECOeJbilI80huq/7f+nUEAVkZdrKL8w4UaucnKLFNoiVmPTtVp4CPk2Pxze1dffPSESrJHKqG9cJ9QRt16p+o=
Received: by 10.78.160.2 with SMTP id i2mr8940181hue;
        Tue, 24 Oct 2006 03:29:39 -0700 (PDT)
Received: by 10.78.161.12 with HTTP; Tue, 24 Oct 2006 03:29:39 -0700 (PDT)
Message-ID: <25bd904f0610240329g495ffee0y6eb5fbd90add4bc8@mail.gmail.com>
Date: Tue, 24 Oct 2006 12:29:39 +0200
From: "Paz Belmonte" <pazbl1@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Re: number of term occurrences
In-Reply-To: <cb8ed9940610240324k33f36a70kc30c5e042a59641d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7157_7659279.1161685779766"
References: <cb8ed9940610230250v6c26e822wa842c7e5538ed11@mail.gmail.com>
	 <22E7D818-2EF4-4979-8BDD-31B014251F4E@apache.org>
	 <cb8ed9940610240224w6e03441fk626c52eca463ed7c@mail.gmail.com>
	 <cb8ed9940610240324k33f36a70kc30c5e042a59641d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7157_7659279.1161685779766
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I have tried this options too and the Term Vector return null.

Which do you think that it is the problem?


2006/10/24, beatriz ramos <beatriz.ramos.moreno@gmail.com>:
>
>
>
> ---------- Forwarded message ----------
> From: beatriz ramos <beatriz.ramos.moreno@gmail.com>
> Date: 24-Oct-2006 11:24
> Subject: Re: number of term occurrences
> To: java-user@lucene.apache.org
>
> Hi, thanks for all your answers, but they don't work
>
> I have tried the 3 options and with all of them we get termDoc =3D 0
> I have checked my index with Luke software and termDoc is 1 here, so my
> index is correct.
>
> is it possible I have a problem with the reader? (because my index is
> allright)
>
> Thanks
>
> (when I talk about termDocs, it means number of documents in which term
> appears)
>
>
>
> On 24/10/06, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > You can also use Term Vectors, at the cost of extra storage.  Search
> > this list for Term Vectors for info on how to implement.
> >
> > On Oct 23, 2006, at 5:50 AM, beatriz ramos wrote:
> >
> > > Hello,
> > > I=B4m working with Lucene. I need to get the number of occurrences of
> > > the term
> > > in the document. I had seen the documentations ant I don=B4t find
> > > anything.
> > > Do you have any idea?
> > > Thanks.
> >
> > --------------------------
> > Grant Ingersoll
> > Sr. Software Engineer
> > Center for Natural Language Processing
> > Syracuse University
> > 335 Hinds Hall
> > Syracuse, NY 13244
> > http://www.cnlp.org
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_7157_7659279.1161685779766--

From java-user-return-24205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:14:31 2006
Return-Path: <java-user-return-24205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25690 invoked from network); 26 Oct 2006 07:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:23:42 -0000
Received: (qmail 33103 invoked by uid 500); 24 Oct 2006 14:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33081 invoked by uid 500); 24 Oct 2006 14:51:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33070 invoked by uid 99); 24 Oct 2006 14:51:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 07:51:49 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of findmath@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 07:51:36 -0700
Received: by nf-out-0910.google.com with SMTP id b2so218137nfe
        for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 07:51:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ShwbZ0G/QeiCd2kH9eJMAE5VXJ9b+2a9fLgiRtKrEU5EHsER/TnYGysCXyJB882pEouiNSzj+QJc4tzebjkgMuL3JC5/f1iXwkavTw90CwOMIYt1MldAmDUmU3GiPN+z6Jpux16j1r1MI+d4sgB/cLLlDgGlpWAYfZo51Xkv6VQ=
Received: by 10.49.92.18 with SMTP id u18mr1337575nfl;
        Tue, 24 Oct 2006 07:51:14 -0700 (PDT)
Received: by 10.49.60.17 with HTTP; Tue, 24 Oct 2006 07:51:14 -0700 (PDT)
Message-ID: <abe188f20610240751n2bce3a81t2ef9a1b755a8f32e@mail.gmail.com>
Date: Tue, 24 Oct 2006 09:51:14 -0500
From: "Find Me" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: near duplicates
In-Reply-To: <453E21DB.3060406@tera-code.com.ar>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13142_22073994.1161701474288"
References: <abe188f20610170854y49db70c3pf4c0fc31ea6a0ab8@mail.gmail.com>
	 <DEE280E6-4D34-4453-95B8-75A0AB160613@gmail.com>
	 <45350B0F.7070109@getopt.org> <453E21DB.3060406@tera-code.com.ar>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13142_22073994.1161701474288
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It doesn't make sense to eliminate near duplicates during search time. But
if you are trying to cluster duplicates together then probably you want to
look at Carrot.

On 10/24/06, Beto Siless <beto@tera-code.com.ar> wrote:
>
> Hi Andrej!
>
> I'm taking a look to fuzzy signatures for near duplicate detection and
> and I have seen your TextProfileSignature. The question is: If I index
> the documents with their text signature, is there a way to filter near
> duplicates at search time without comparing each document with all other?
>
> Thanks
> Beto
>
> Andrzej Bialecki wrote:
> > karl wettin wrote:
> >>
> >> 17 okt 2006 kl. 17.54 skrev Find Me:
> >>
> >>> How to eliminate near duplicates from the index?
> >>
> >> I would probably try to measure the Ecludian distance between all
> >> documents, computed on terms and their positions. Or perhaps use
> >> standard deviation to find the distribution of terms in a document.
> >> One would based on the output from that try to find a threashold.
> >> Either way it will consume lots of CPU.
> >
> >
> > There are better ways to achieve this. You need to create a fuzzy
> > signature of the document, based on term histogram or shingles - take a
> > look a the Signature framework in Nutch.
> >
> > There is a substantial literature on this subject - go to Citeseer and
> > run a search for "near duplicate detection".
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13142_22073994.1161701474288--

From java-user-return-24195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:19:18 2006
Return-Path: <java-user-return-24195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6908 invoked from network); 26 Oct 2006 07:33:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:33:25 -0000
Received: (qmail 61875 invoked by uid 500); 24 Oct 2006 06:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61851 invoked by uid 500); 24 Oct 2006 06:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61838 invoked by uid 99); 24 Oct 2006 06:05:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Oct 2006 23:05:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Oct 2006 23:05:20 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9O64wv3050196
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 06:04:58 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9O67dvF2809858
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 08:07:39 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9O64wAj029742
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 08:04:58 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9O64wrd029737
	for <java-user@lucene.apache.org>; Tue, 24 Oct 2006 08:04:58 +0200
In-Reply-To: <FBA9F803D33470489B9B4676A6B09F0B023D5B0B@mt-exch1.nuance.com>
Subject: Re: "Catalog" backend for document stored fields?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFCE6F446A.C8E99CE9-ON88257211.001E89A3-88257211.00200287@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 23 Oct 2006 21:49:37 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 24/10/2006 08:07:39
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> I'm indexing logs from a transaction-based application.
> ...
> millions documents per month, the size of the indices is ~35 gigs per
month
> (that's the lower bound).  I have no choice but to 'store' each field
values
> (as well as indexing/tokenizing them) because I'll need to retrieve them
in
> order to create various reports.  Also, I have a backlog of ~2 years of
logs
> to index!
> ...
> 1-       is there someone out there that already wrote an extension to
> Lucene so that 'stored' string for each document/field is in fact stored
in
> a centralized repository? Meaning, only an 'index' is actually stored in
the
> document and the real data is put somewhere else.

Do you gain anything from storing the document fields within Lucene?  In
case not, especially if log files are kept somewhere, you cuold make all
'content' fields unstored (reduce index size), and add a stored non-indexed
ID field. It can also be a POINTER field - e.g. <log file name + start
offset + length>.  At search time, for found documents you can retrieve
this ID/POINTER field and then fetch the document from the (original) log
file. Makes sense?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:19:30 2006
Return-Path: <java-user-return-24219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36221 invoked from network); 26 Oct 2006 07:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 07:35:02 -0000
Received: (qmail 38983 invoked by uid 500); 26 Oct 2006 07:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38920 invoked by uid 500); 26 Oct 2006 07:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38881 invoked by uid 99); 26 Oct 2006 07:35:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 00:35:06 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yzy1980@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 00:34:54 -0700
Received: by ug-out-1314.google.com with SMTP id k40so311323ugc
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 00:34:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=effaILadqARufKGCeKvMv6vd005lWsijdTnDiYldx09Gfe1uqbuqYRAuiQYEmwnUNxSE9OqgjxSK4pZY7ij487rojN7W8Ng2zG3Ksg1H3Y9K2ufbAv6Ezq45VHRoG0FGL9FL0U4lXplArMY3MtiQEL/TzGZKgnLQFcXQ6d6+WOc=
Received: by 10.78.166.7 with SMTP id o7mr2371234hue;
        Thu, 26 Oct 2006 00:34:32 -0700 (PDT)
Received: by 10.78.129.13 with HTTP; Thu, 26 Oct 2006 00:34:32 -0700 (PDT)
Message-ID: <c2174c890610260034h226f9f6bm7ea0fe3ddeefd50c@mail.gmail.com>
Date: Thu, 26 Oct 2006 15:34:32 +0800
From: "zhongyi yuan" <yzy1980@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index short text
In-Reply-To: <359a92830610240525g342bb318y66d854171de14cfb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c2174c890610240420v444fa064jd9d400becf657e8f@mail.gmail.com>
	 <359a92830610240525g342bb318y66d854171de14cfb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you. My opinion is using the Current Similarity not
suitable,because most term freq in the address content is one,but in
the lucene, Freq is the very import factor,So I want know some other
method to short information.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:42:36 2006
Return-Path: <java-user-return-24220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8877 invoked from network); 26 Oct 2006 10:57:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 10:57:23 -0000
Received: (qmail 24547 invoked by uid 500); 26 Oct 2006 10:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24515 invoked by uid 500); 26 Oct 2006 10:57:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24500 invoked by uid 99); 26 Oct 2006 10:57:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 03:57:26 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 03:57:12 -0700
Received: by ug-out-1314.google.com with SMTP id k40so340050ugc
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 03:56:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=fkhgAn0Z4usD2RYSpZ7uMSFny+ejXE3+uqdCAbC8uKBSjyYog+MG4OjbbFGeyPTMxjYJTzVHxcdTc2Cvddp98k61kAERZ/bJHR5oD3Q+lVlGjL9kHaOKChv3ArafT12L2HomQG6iVC+s79B4zg0DZsC3l00L6T2hXY0WlrG3yIE=
Received: by 10.78.193.19 with SMTP id q19mr2649458huf;
        Thu, 26 Oct 2006 03:56:50 -0700 (PDT)
Received: by 10.78.159.7 with HTTP; Thu, 26 Oct 2006 03:56:50 -0700 (PDT)
Message-ID: <a9893f800610260356h306e0fc8j22d59e6d4928c952@mail.gmail.com>
Date: Thu, 26 Oct 2006 16:26:50 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: "java user" <java-user@lucene.apache.org>
Subject: Search Problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28711_31360193.1161860210721"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28711_31360193.1161860210721
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have a program to create a lucene index, and another program for searching
that index.

The Search program create an IndexSearcher object once in its constructor,
and I created a method doSearch to search the index. The doSearch method
uses the indexSearcher object to get the Hits.

My Indexer program is continuously adding documents to the index.

My problem is that I am not getting the matching documents in my search
results, which are added after creating the IndexSearcher object in my
Search program.
Is it possible to get all the matching document in the result without
restarting the Searcher program?

Thanks,
Sunil

------=_Part_28711_31360193.1161860210721--

From java-user-return-24221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:42:40 2006
Return-Path: <java-user-return-24221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12178 invoked from network); 26 Oct 2006 10:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 10:57:38 -0000
Received: (qmail 26315 invoked by uid 500); 26 Oct 2006 10:57:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26278 invoked by uid 500); 26 Oct 2006 10:57:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26267 invoked by uid 99); 26 Oct 2006 10:57:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 03:57:42 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 03:57:29 -0700
Received: by ug-out-1314.google.com with SMTP id k40so340110ugc
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 03:57:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=D5EhjDWbzmf04rNon3tT9qoHjXcmJKxhTb/whJNZSByTOjKk6CDnaPhfAHfkEWKTEawH4/e06J8r2owynAU3YIHQ0PMKCv+fYQPpcVQ7VAJAq5afjxY6ORpEgLmDIeOu6IqXpTZf1zmNwu+/A/TPXToRyMATY9fAb1YvMv3PDJw=
Received: by 10.78.117.10 with SMTP id p10mr2594108huc;
        Thu, 26 Oct 2006 03:57:07 -0700 (PDT)
Received: by 10.78.159.7 with HTTP; Thu, 26 Oct 2006 03:57:06 -0700 (PDT)
Message-ID: <a9893f800610260357q3a735e3x5cf9e01e85b8f0a2@mail.gmail.com>
Date: Thu, 26 Oct 2006 16:27:07 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: "java user" <java-user@lucene.apache.org>
Subject: Searching Problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28715_28453557.1161860227330"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28715_28453557.1161860227330
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have a program to create a lucene index, and another program for searching
that index.

The Search program create an IndexSearcher object once in its constructor,
and I created a method doSearch to search the index. The doSearch method
uses the indexSearcher object to get the Hits.

My Indexer program is continuously adding documents to the index.

My problem is that I am not getting the matching documents in my search
results, which are added after creating the IndexSearcher object in my
Search program.
Is it possible to get all the matching document in the result without
restarting the Searcher program?

Thanks,
Sunil

------=_Part_28715_28453557.1161860227330--

From java-user-return-24222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 11:46:31 2006
Return-Path: <java-user-return-24222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59411 invoked from network); 26 Oct 2006 11:19:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 11:19:05 -0000
Received: (qmail 78998 invoked by uid 500); 26 Oct 2006 11:19:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78970 invoked by uid 500); 26 Oct 2006 11:19:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78959 invoked by uid 99); 26 Oct 2006 11:19:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 04:19:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 04:18:56 -0700
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1Gd3Fo-0007rJ-Rt
	for java-user@lucene.apache.org; Thu, 26 Oct 2006 13:18:32 +0200
Message-ID: <4540998D.7070208@tejnora.cz>
Date: Thu, 26 Oct 2006 13:18:37 +0200
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.7 (X11/20060928)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching Problem
References: <a9893f800610260357q3a735e3x5cf9e01e85b8f0a2@mail.gmail.com>
In-Reply-To: <a9893f800610260357q3a735e3x5cf9e01e85b8f0a2@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

Nope. IndexReader obtains a snapshot of index - not closing and opening 
indexreader leads to not deleting files (windows exception, linux will 
not free them).
> Is it possible to get all the matching document in the result without
> restarting the Searcher program?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 12:07:06 2006
Return-Path: <java-user-return-24223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72384 invoked from network); 26 Oct 2006 12:07:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 12:07:05 -0000
Received: (qmail 926 invoked by uid 500); 26 Oct 2006 12:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 886 invoked by uid 500); 26 Oct 2006 12:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 869 invoked by uid 99); 26 Oct 2006 12:07:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 05:07:09 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 05:06:55 -0700
Received: by ug-out-1314.google.com with SMTP id k40so354869ugc
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 05:06:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Q8s6Tyu9/izLT/h/8g+CC/ZVOyw6qmJOzMpvqwSK+kk98NtDHInJ5EdaKWGDTIx/4v8/o7v3ps9DrPSEqAy56nnywPIIbzJ1d9WSGgC/bYKeLgUpffhEQxHCLUHHzDqHc+HNlJ8v410VldZpfK7JNCKwIEx5O5nX8ARUVCL5vXU=
Received: by 10.78.94.37 with SMTP id r37mr1666328hub;
        Thu, 26 Oct 2006 05:06:32 -0700 (PDT)
Received: by 10.78.159.7 with HTTP; Thu, 26 Oct 2006 05:06:32 -0700 (PDT)
Message-ID: <a9893f800610260506y288e59b8j9b09f2a7c218b9af@mail.gmail.com>
Date: Thu, 26 Oct 2006 17:36:32 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Problem
In-Reply-To: <4540998D.7070208@tejnora.cz>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a9893f800610260357q3a735e3x5cf9e01e85b8f0a2@mail.gmail.com>
	 <4540998D.7070208@tejnora.cz>
X-Virus-Checked: Checked by ClamAV on apache.org

could you please explain?

On 10/26/06, Karel Tejnora <karel@tejnora.cz> wrote:
> Nope. IndexReader obtains a snapshot of index - not closing and opening
> indexreader leads to not deleting files (windows exception, linux will
> not free them).
> > Is it possible to get all the matching document in the result without
> > restarting the Searcher program?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 12:24:27 2006
Return-Path: <java-user-return-24198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 662 invoked from network); 26 Oct 2006 12:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 12:24:23 -0000
Received: (qmail 62913 invoked by uid 500); 24 Oct 2006 10:42:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62843 invoked by uid 500); 24 Oct 2006 10:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62753 invoked by uid 99); 24 Oct 2006 10:42:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 03:42:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Oct 2006 03:42:08 -0700
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.38b ;
	Tue, 24 Oct 2006 12:41:45 +0200
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 24 Oct 2006 12:41:45 +0200
Received: from philosophe ([130.125.11.47]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 24 Oct 2006 12:41:44 +0200
Reply-To: <samir.abdou@unine.ch>
From: "Samir Abdou" <Samir.Abdou@unine.ch>
To: <java-user@lucene.apache.org>
Subject: RE: number of term occurrences
Date: Tue, 24 Oct 2006 12:41:52 +0200
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <000301c6f759$04b3cc80$2f0b7d82@philosophe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <25bd904f0610240329g495ffee0y6eb5fbd90add4bc8@mail.gmail.com>
Thread-Index: Acb3V2VG3vp+CLYvSQGdUoKVWkNE/AAATNcA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-OriginalArrivalTime: 24 Oct 2006 10:41:44.0998 (UTC) FILETIME=[FFF3AC60:01C6F758]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

You indexed without storing vectors! This is why the term vector is =
null.

Samir


-----Message d'origine-----
De=A0: Paz Belmonte [mailto:pazbl1@gmail.com]=20
Envoy=E9=A0: mardi, 24. octobre 2006 12:30
=C0=A0: java-user
Objet=A0: Re: number of term occurrences

Hi,

I have tried this options too and the Term Vector return null.

Which do you think that it is the problem?


2006/10/24, beatriz ramos <beatriz.ramos.moreno@gmail.com>:
>
>
>
> ---------- Forwarded message ----------
> From: beatriz ramos <beatriz.ramos.moreno@gmail.com>
> Date: 24-Oct-2006 11:24
> Subject: Re: number of term occurrences
> To: java-user@lucene.apache.org
>
> Hi, thanks for all your answers, but they don't work
>
> I have tried the 3 options and with all of them we get termDoc =3D 0
> I have checked my index with Luke software and termDoc is 1 here, so =
my
> index is correct.
>
> is it possible I have a problem with the reader? (because my index is
> allright)
>
> Thanks
>
> (when I talk about termDocs, it means number of documents in which =
term
> appears)
>
>
>
> On 24/10/06, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > You can also use Term Vectors, at the cost of extra storage.  Search
> > this list for Term Vectors for info on how to implement.
> >
> > On Oct 23, 2006, at 5:50 AM, beatriz ramos wrote:
> >
> > > Hello,
> > > I=B4m working with Lucene. I need to get the number of occurrences =
of
> > > the term
> > > in the document. I had seen the documentations ant I don=B4t find
> > > anything.
> > > Do you have any idea?
> > > Thanks.
> >
> > --------------------------
> > Grant Ingersoll
> > Sr. Software Engineer
> > Center for Natural Language Processing
> > Syracuse University
> > 335 Hinds Hall
> > Syracuse, NY 13244
> > http://www.cnlp.org
> >
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 13:22:14 2006
Return-Path: <java-user-return-24224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47181 invoked from network); 26 Oct 2006 13:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:22:14 -0000
Received: (qmail 72873 invoked by uid 500); 26 Oct 2006 13:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72848 invoked by uid 500); 26 Oct 2006 13:22:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72837 invoked by uid 99); 26 Oct 2006 13:22:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:22:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:22:02 -0700
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 052B0DBA277
	for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 09:21:41 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Thu, 26 Oct 2006 09:21:43 -0400
X-Sasl-enc: uX4l+Qms+usOGd5HLffDnx6yKUIUWvGboV32n8uhDcZt 1161868902
Received: from [10.17.4.90] (pool-72-70-33-148.bstnma.fios.verizon.net [72.70.33.148])
	by mail.messagingengine.com (Postfix) with ESMTP id E8E18119FE
	for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 09:21:42 -0400 (EDT)
Message-ID: <4540B65E.1020506@mikemccandless.com>
Date: Thu, 26 Oct 2006 09:21:34 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching Problem
References: <a9893f800610260357q3a735e3x5cf9e01e85b8f0a2@mail.gmail.com>	 <4540998D.7070208@tejnora.cz> <a9893f800610260506y288e59b8j9b09f2a7c218b9af@mail.gmail.com>
In-Reply-To: <a9893f800610260506y288e59b8j9b09f2a7c218b9af@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sunil Kumar PK wrote:
> could you please explain?
> 
> On 10/26/06, Karel Tejnora <karel@tejnora.cz> wrote:
>> Nope. IndexReader obtains a snapshot of index - not closing and opening
>> indexreader leads to not deleting files (windows exception, linux will
>> not free them).
>> > Is it possible to get all the matching document in the result without
>> > restarting the Searcher program?

A searcher once created only searches the index as of the "point in 
time" that it was created.  Ie, it's an unchanging snapshot.  So any 
deletes/updates that happen to the index by a writer will not be visible 
until you close and reopen another searcher.

This "point in time" searching relies on certain properties of the 
underlying filesystem in order to work properly.  Windows local and 
remote (SMB) filesystems work because files that are open can't be 
deleted (and Lucene just retries); local UNIX filesystems work because 
the open file handle can still access a deleted file ("delete on last 
close").

However: NFS does not have "delete on last close", so you can't rely on 
"point in time" searching when using NFS across machines (it's possible 
a single machine may work).  If a writer on a different machine has 
committed to the index that a searcher is using over NFS then the 
searcher will eventually hit an IOException with "stale NFS handle". 
See here for details on current known issues with NFS:

   http://issues.apache.org/jira/browse/LUCENE-673

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 13:57:48 2006
Return-Path: <java-user-return-24225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61377 invoked from network); 26 Oct 2006 13:57:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 13:57:47 -0000
Received: (qmail 82227 invoked by uid 500); 26 Oct 2006 13:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82200 invoked by uid 500); 26 Oct 2006 13:57:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82189 invoked by uid 99); 26 Oct 2006 13:57:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:57:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.222.193.2] (HELO sidekick.frogspace.net) (216.222.193.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 06:57:34 -0700
Received: from bi01pt1.ct.us.ibm.com ([129.33.1.37] helo=aroushlt)
	by sidekick.frogspace.net with esmtp (Exim 4.44)
	id 1Gd5jN-0005O3-5P
	for java-user@lucene.apache.org; Thu, 26 Oct 2006 06:57:13 -0700
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene 2.0.1 release date
Date: Thu, 26 Oct 2006 09:57:13 -0400
Message-ID: <013a01c6f906$a400e580$6401a8c0@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <20061026031641.285.qmail@web50302.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: Acb4rTsHGHtmUvACSwKVMtXuo6Y/YAAWCLMw
X-SA-Exim-Connect-IP: 129.33.1.37
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis and all,

I am nearing to a point where I will be able to port in real-time -- and
it's something I want to achieve.  However, before doing so, my hope was to
first sync up Lucene.Net with 2.0.1.  From your email, I take it that even
for the Java folks, they can't accumulate the list of files that make up
2.0.1.  Am I right?  If so, then I will sync up Lucene.Net with what's
currently in the trunk.

Regards,

-- George

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Wednesday, October 25, 2006 11:17 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date

George,

You may want to subscribe to java-dev or just look through the java-dev
archives to see how Lucene releases come about.  Let me try re-enacting it.

dev 1: What do people think about a X.Y release?
group: Sure, why not, looks like we have enough changes, some bug fixes,
some performance improvements, ok, let's dev 1: Ok, I'll make a release in
the next few days....

dev 1 then does the svn branching, updating the version number in build.xml,
compiling, jaring, signing, pushing to appropriate machines, etc., announces
on java-dev, waits for the mirrors to get a copy of the new release, and
finally announces it on java-user.

The point is that releases are not planned ahead of time, so we can never
tell which files that have been modified between, say, X.Y and X.Y.Z
release.  We know that only when the release is made.  In short, if you
don't want to or can't port in "real-time", you have to wait for the release
to be made, and then start work on your new release.

Otis

----- Original Message ----
From: George Aroush <george@aroush.net>
To: java-user@lucene.apache.org
Sent: Wednesday, October 25, 2006 9:40:39 PM
Subject: RE: Lucene 2.0.1 release date

Hi Steven and all,

(Sorry for the late response.)

This is all fine, but here is my problem with not having a way of knowing
what makes up 2.0.1.

I have ported 2.0 from Java to C#.  I used the packaged (ZIP download) of
Lucene 2.0 as my port point.  Now, it's time for me to port 2.0.1 to C#.  To
do so, I need to run a diff between 2.0 and 2.0.1 -- how do I go about doing
the diff when I don't know what makes up 2.0.1?  Can I get the list of files
that make up 2.0.1 from SVN?  If so, how?  Is what's in the trunk of Lucene
makes up 2.0.1 or 2.1?  (Sorry, I am not fluent with SVN.)

Regards,

-- George

-----Original Message-----
From: Steven Parkes [mailto:steven_parkes@esseff.org]
Sent: Tuesday, October 17, 2006 11:45 AM
To: java-user@lucene.apache.org
Subject: RE: Lucene 2.0.1 release date

I think the idea is that 2.0.1 would be a patch-fix release from the branch
created at 2.0 release. This release would incorporate only back-ported
high-impact patches, where "high-impact" is defined by the community.
Certainly security vulnerabilities would be included. As Otis said, to date,
nobody seems to have raised any issues to that level.

2.1 will include all the patches and new features that have been committed
since 2.0; there've been a number of these. But releases are done pretty ad
hoc at this point and there hasn't been anyone that has expressed strong
interest in (i.e., lobbied for) a release.

There was a little discussion on this topic at the ApacheCon BOF. For a
number of reasons, the Lucene Java trunk has been kept "pretty stable", with
a relatively few number of large changes. This makes it relatively safe for
people to grab a snapshot of the trunk with less concern about latent bugs.
I don't know how many people/projects are doing this rather than sticking
with 2.0.

Keeping the trunk stable doesn't provide an obvious place to start working
on things that people may want to work on and share but at the same time
want to allow to percolate for a while. I think the concern is that if we
start doing this stuff on trunk now, people that are accustomed to snapping
from the trunk might be surprised, and not in a good way. Nobody wants that.

So releases can be about both what people want (getting features out) and
allowing a bit more instability in trunk. That is, if the community wants
that.

Food for thought and/or discussion?

-----Original Message-----
From: George Aroush [mailto:george@aroush.net]
Sent: Sunday, October 15, 2006 5:15 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene 2.0.1 release date

Thanks for the reply Otis.

I looked at the CHANGES.txt file and saw quit a bit of changes.  For my port
from Java to C#, I can't rely on the trunk code as it is (to my
knowledge)
changes on a monthly basic if not weekly.  What I need is an official
release so that I can use it as the port point.

Regards,

-- George Aroush


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Sunday, October 15, 2006 12:41 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date

I'd have to check CHANGES.txt, but I don't think that many bugs have been
fixed and not that many new features added that anyone is itching for a new
release.

Otis

----- Original Message ----
From: George Aroush <george@aroush.net>
To: java-dev@lucene.apache.org; java-user@lucene.apache.org
Sent: Saturday, October 14, 2006 10:32:47 AM
Subject: RE: Lucene 2.0.1 release date

Hi folks,

Sorry for reposting this question (see original email below) and this time
to both mailing list.

If anyone can tell me what is the plan for Lucene 2.0.1 release, I would
appreciate it very much.

As some of you may know, I am the porter of Lucene to Lucene.Net knowing
when 2.0.1 will be released will help me plan things out.

Regards,

-- George Aroush


-----Original Message-----
From: George Aroush [mailto:george@aroush.net]
Sent: Thursday, October 12, 2006 12:07 AM
To: java-dev@lucene.apache.org
Subject: Lucene 2.0.1 release date

Hi folks,

What's the plan for Lucene 2.0.1 release date?

Thanks!

-- George Aroush


---------------------------------------------------------------------
To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-dev-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 14:42:02 2006
Return-Path: <java-user-return-24226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81909 invoked from network); 26 Oct 2006 14:42:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 14:42:00 -0000
Received: (qmail 19697 invoked by uid 500); 26 Oct 2006 14:42:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19678 invoked by uid 500); 26 Oct 2006 14:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19667 invoked by uid 99); 26 Oct 2006 14:42:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 07:42:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 07:41:50 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 2342482 for java-user@lucene.apache.org; Thu, 26 Oct 2006 16:41:27 +0200
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Possible documentation error?
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Date: Thu, 26 Oct 2006 16:40:21 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C012B4858@webmail.hippo.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Possible documentation error?
Thread-Index: Acb5DErcMnbwZNluQcioE4PEcdRW9A==
From: "Johan Stuyts" <j.stuyts@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

On the page about the file formats I think there might be a
documentation error below 'frequencies'. The example is '15, 22, 3', but
if I read the paragraph starting with 'DocDelta determines both the
document number and the frequency' correctly this example translates to:
  Doc ID   Freq.
    7       1
   18       3

Instead of documents 7 and 11 as described in the paragraph above the
example.

Shouldn't the example be '15, 8, 3'?

Kind regards,

Johan Stuyts
Hippo=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 14:50:57 2006
Return-Path: <java-user-return-24227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86281 invoked from network); 26 Oct 2006 14:50:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 14:50:55 -0000
Received: (qmail 50269 invoked by uid 500); 26 Oct 2006 14:50:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50240 invoked by uid 500); 26 Oct 2006 14:50:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50229 invoked by uid 99); 26 Oct 2006 14:50:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 07:50:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 07:50:43 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.159CCC22@mailer.syr.edu>; Thu, 26 Oct 2006 10:50:22 -0400
Message-ID: <4540CB2E.8000003@syr.edu>
Date: Thu, 26 Oct 2006 10:50:22 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene 2.0.1 release date
References: <013a01c6f906$a400e580$6401a8c0@aroushlt>
In-Reply-To: <013a01c6f906$a400e580$6401a8c0@aroushlt>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

George Aroush wrote:
> From your email, I take it that even for the Java folks, they can't
> accumulate the list of files that make up 2.0.1.  Am I right?

There has never been and likely will never be a 2.0.1 release.

"2.0.1", "2.1" -- these are labels for *potential* future releases.

"2.1" is much more likely to be the label used for the next release than
"2.0.1".

If you just want to get a copy of the "trunk" (the latest development
versions of files in the Subversion repository, upon which a release
will eventually be based), run the following command, all on one line
(assumes you have installed Subversion):

----
svn checkout http://svn.apache.org/repos/asf/lucene/java/trunk/ lucene-trunk
----

The above command will create a new directory named "lucene-trunk" in
the current directory and then populate it with the latest versions of
the files in the Subversion repository.

If you want to know which files have changed (added, updated, deleted)
in the trunk since the 2.0.0 release, you can run the following (all on
one line) to get a (very very long) listing of unified context diffs for
all files:

----
svn diff http://svn.apache.org/repos/asf/lucene/java/trunk
http://svn.apache.org/repos/asf/lucene/java/branches/lucene_2_0
----

The above command will dump its output to the console, so to capture it
you have to redirect it to a file, e.g. "svn .... > diff.txt".  Note
that the above command does *not* require a local working copy -- you
don't have to download anything first to run it.

If you just want a list of files that have changed since the 2.0.0
release, you can run the following to get an abbreviated diff output
(all on one line):

----
svn diff --diff-cmd diff -x -q
http://svn.apache.org/repos/asf/lucene/java/trunk
http://svn.apache.org/repos/asf/lucene/java/branches/lucene_2_0
----

The above command will give you output that looks like:

----
Index:
contrib/swing/src/java/org/apache/lucene/swing/models/TableSearcher.java
===================================================================
Files
contrib/swing/src/java/org/apache/lucene/swing/models/TableSearcher.java
(.../trunk)      (revision 468016) and
contrib/swing/src/java/org/apache/lucene/swing/models/TableSearcher.java
 (.../branches/lucene_2_0)       (revision 468016) differ
Index:
contrib/swing/src/java/org/apache/lucene/swing/models/ListSearcher.java
===================================================================
[...]
----

To pare this down to just a list of files, you could for example pipe
the svn output to a perl one-liner, i.e. (all on one line):

----
svn diff --diff-cmd diff -x -q
http://svn.apache.org/repos/asf/lucene/java/trunk
http://svn.apache.org/repos/asf/lucene/java/branches/lucene_2_0 | perl
-ne 'print $1 if (/^Index: (.*)/s);'
----

The above command will give you output that looks like:

----
contrib/swing/src/java/org/apache/lucene/swing/models/TableSearcher.java
contrib/swing/src/java/org/apache/lucene/swing/models/ListSearcher.java
[...]
----

Hope it helps,
Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 15:24:24 2006
Return-Path: <java-user-return-24228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99548 invoked from network); 26 Oct 2006 15:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 15:24:18 -0000
Received: (qmail 77980 invoked by uid 500); 26 Oct 2006 15:24:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77951 invoked by uid 500); 26 Oct 2006 15:24:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 53395 invoked by uid 99); 26 Oct 2006 15:19:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Possible memory issue?
Date: Thu, 26 Oct 2006 11:18:33 -0400
Message-ID: <6B6D3063DF0A7A4DB8A989D40C61BEB301D881C1@EMAIL02.wescodist.com>
In-Reply-To: <4540CB2E.8000003@syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Possible memory issue?
Thread-Index: Acb5DiDcbYgG67+QSaCNF2Ke6zNl4gAAQgtg
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Oct 2006 15:18:34.0334 (UTC) FILETIME=[00B6B7E0:01C6F912]
X-Virus-Checked: Checked by ClamAV on apache.org

Howdy all,

	I have a issue with java running out of memory after the search
has been running for a while.  We are using 1.9.1 release and I check
the indexreader's version to determine if I need to get a new searcher
for searches (so I pick up any changes to the index).  I am seeing jumps
in memory for the first search after loads to the index.  After these
jumps the memory does not come back down after a load has taken place..
more loads =3D more memory consumed until we eventually run out.  Is it
possible that this is a bug with lucene caching the memory from the last
search and creating memory for the next search?  Is there a way to tell
lucene to drop it's cached memory if that is the case? =20

	Has anyone come across this possible problem with multiple sort
fields?


Ex.  Java memory before loads hovers around 110M and about half of it
free.
	Many searches take place, memory stays relatively the same
      Then	Load takes place
	Next search uses 192M memory with 80Meg free.. =20
=09

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 15:27:16 2006
Return-Path: <java-user-return-24229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1409 invoked from network); 26 Oct 2006 15:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 15:27:15 -0000
Received: (qmail 84600 invoked by uid 500); 26 Oct 2006 15:27:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84566 invoked by uid 500); 26 Oct 2006 15:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84555 invoked by uid 99); 26 Oct 2006 15:27:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 08:27:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 08:27:03 -0700
Received: from [192.168.128.211] ([192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k9QFQe7i000124
	for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 18:26:40 +0300
Message-ID: <4540D3AF.7090808@sirma.bg>
Date: Thu, 26 Oct 2006 18:26:39 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Putting some constraints on index optimization
References: <a9893f800610260357q3a735e3x5cf9e01e85b8f0a2@mail.gmail.com>	 <4540998D.7070208@tejnora.cz> <a9893f800610260506y288e59b8j9b09f2a7c218b9af@mail.gmail.com> <4540B65E.1020506@mikemccandless.com>
In-Reply-To: <4540B65E.1020506@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Have the following problem with (explicitly invoked) index optimization -
it seems to always merge all existing index segments into a single huge 
segment, which is undesirable in my case.
Is there a way to force index optimization to honor the  
IndexWriter.MAX_MERGE_DOCS setting?

Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 15:40:43 2006
Return-Path: <java-user-return-24230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6400 invoked from network); 26 Oct 2006 15:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 15:40:42 -0000
Received: (qmail 24094 invoked by uid 500); 26 Oct 2006 15:40:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24063 invoked by uid 500); 26 Oct 2006 15:40:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24044 invoked by uid 99); 26 Oct 2006 15:40:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 08:40:37 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of drjat320@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 08:40:16 -0700
Received: by nf-out-0910.google.com with SMTP id b2so68393nfe
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 08:39:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z9jebJiAt6FDEcsCXqjWQNoPwsPRAJiOGIBMZ5+t5oqxryDUpgekS+37gSbSwWjV5Jmrjby+C7kXTvm8vIZK/TY5ZCEoN0crvY8GCSNRH41Guf++ihrW/NtPsr6NRmUBBbPnDFFXs4gWLbe/ghPIs4IerdRbPYCiACcclJQqQ8w=
Received: by 10.82.142.9 with SMTP id p9mr714632bud;
        Thu, 26 Oct 2006 08:39:54 -0700 (PDT)
Received: by 10.82.129.20 with HTTP; Thu, 26 Oct 2006 08:39:54 -0700 (PDT)
Message-ID: <288e77f30610260839q7bd71ef0r1e877ffb678c8a99@mail.gmail.com>
Date: Thu, 26 Oct 2006 11:39:54 -0400
From: "d rj" <drjat320@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Possible memory issue?
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB301D881C1@EMAIL02.wescodist.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38281_2195833.1161877194409"
References: <4540CB2E.8000003@syr.edu>
	 <6B6D3063DF0A7A4DB8A989D40C61BEB301D881C1@EMAIL02.wescodist.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38281_2195833.1161877194409
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would suggest checking that close() is properly called for all
IndexSearcher/Reader/Writer objects when doing adds/deletes and when
recreating IndexSearcher object.
Free memory in the JVM heap can diminish quickly if these objects aren't
properly disposed.
-drj

On 10/26/06, Aigner, Thomas < TAigner@wescodist.com> wrote:
>
> Howdy all,
>
>         I have a issue with java running out of memory after the search
> has been running for a while.  We are using 1.9.1 release and I check
> the indexreader's version to determine if I need to get a new searcher
> for searches (so I pick up any changes to the index).  I am seeing jumps
> in memory for the first search after loads to the index.  After these
> jumps the memory does not come back down after a load has taken place..
> more loads = more memory consumed until we eventually run out.  Is it
> possible that this is a bug with lucene caching the memory from the last
> search and creating memory for the next search?  Is there a way to tell
> lucene to drop it's cached memory if that is the case?
>
>         Has anyone come across this possible problem with multiple sort
> fields?
>
>
> Ex.  Java memory before loads hovers around 110M and about half of it
> free.
>         Many searches take place, memory stays relatively the same
>       Then      Load takes place
>         Next search uses 192M memory with 80Meg free..
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38281_2195833.1161877194409--

From java-user-return-24231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 15:55:37 2006
Return-Path: <java-user-return-24231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10930 invoked from network); 26 Oct 2006 15:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 15:55:37 -0000
Received: (qmail 60761 invoked by uid 500); 26 Oct 2006 15:55:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60633 invoked by uid 500); 26 Oct 2006 15:55:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60622 invoked by uid 99); 26 Oct 2006 15:55:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 08:55:38 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.236.177] (HELO web58409.mail.re3.yahoo.com) (68.142.236.177)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Oct 2006 08:55:22 -0700
Received: (qmail 84769 invoked by uid 60001); 26 Oct 2006 15:55:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=EucijCxWZoeZEzDMnnCCK3HtZkcvUivJmE1rl8nWWIWixNPiMoy249p/K64+NIzJdBKJmLGFMt3DmXX+TCYzqGg+cj5q120DI1wRWW9CjLlQacKNKsAMzVQxyRLE3XJXSEoM4jyhicMA6Ypy/utsD95BN9MoabjMVSHQkSqg4UU=  ;
Message-ID: <20061026155501.84766.qmail@web58409.mail.re3.yahoo.com>
Received: from [132.197.150.201] by web58409.mail.re3.yahoo.com via HTTP; Thu, 26 Oct 2006 08:55:00 PDT
Date: Thu, 26 Oct 2006 08:55:00 -0700 (PDT)
From: qaz zaq <fortques@yahoo.com>
Subject: Re: Analyzer.getPositionIncrementGap question
To: java-user@lucene.apache.org
In-Reply-To: <20061026033201.94231.qmail@web58414.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-781553653-1161878100=:83002"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-781553653-1161878100=:83002
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I am reposting this question. Could somebody help?

qaz zaq <fortques@yahoo.com> wrote:  I have multiple values want to add to the same FIELD, and I also want to add non-zero but NON CONSTANT position increment gap among those values. e.g., gap between "value1" and "value2" is 10, but gap between "value2" and "value3" is 100. is there any how can I achieve that?

d.add(new Field ("fld", "value1");
d.add(new Field ("fld", "value2");
d.add(new Field ("fld", "value3");
indexWriter.addDocument(d);


---------------------------------
All-new Yahoo! Mail - Fire up a more powerful email and get things done faster.

 		
---------------------------------
Do you Yahoo!?
 Get on board. You're invited to try the new Yahoo! Mail.
--0-781553653-1161878100=:83002--

From java-user-return-24232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 15:59:11 2006
Return-Path: <java-user-return-24232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12531 invoked from network); 26 Oct 2006 15:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 15:59:10 -0000
Received: (qmail 70732 invoked by uid 500); 26 Oct 2006 15:59:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70703 invoked by uid 500); 26 Oct 2006 15:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70692 invoked by uid 99); 26 Oct 2006 15:59:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 08:59:13 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 08:58:59 -0700
Received: by ug-out-1314.google.com with SMTP id k40so424250ugc
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 08:58:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jjCG9euOgLqNN3mwhdVc40tiC2IQggjgp6SY2ZMZh1eDxboHPcQsfUl6uyzwBEPz7K7dLnBIXxe7AKWAaM+hKekqPeez72xqpOMiuLxOPnUjPoZRav0IYb/lpyQgJXCoRCsijc4Q8QTYFC4QKK2YO/eTPEo9WbrrqZIv6k0Fwto=
Received: by 10.82.136.4 with SMTP id j4mr749528bud;
        Thu, 26 Oct 2006 08:58:37 -0700 (PDT)
Received: by 10.82.162.13 with HTTP; Thu, 26 Oct 2006 08:58:37 -0700 (PDT)
Message-ID: <359a92830610260858x7ee11c84q827d150c11ca17f3@mail.gmail.com>
Date: Thu, 26 Oct 2006 11:58:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzer.getPositionIncrementGap question
In-Reply-To: <20061026033201.94231.qmail@web58414.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30553_27828469.1161878317247"
References: <200610181905.56302.paul@waite.net.nz>
	 <20061026033201.94231.qmail@web58414.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30553_27828469.1161878317247
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See the SynonymFilter in LIA for how to create your very own analyzer that
gives you total control over the increment between terms. Essentially, that
allows you to set the position increment for each and every token. I suspect
that this would be easier, but what do I know?

The difference is that you can set the position increment for each token,
there's no reason to add the field multiple times. That is, for the call

d.add(new Field("value1 value2 value3")

and have the opportunity to set the position increment for all three terms.
Of course, you could make three calls to d.add as well and this technique
should still work.

But if you really need the gap instead, you can simply override the
getPositionIncrementGap method. But I don't know how you get the current
token when it's called.

One warning if you really *do* need getPositionIncrementGap. There's a bug
in 2.0 that if you use a PerFieldAnalyzerWrapper, getPostitionIncrementGap
isn't called properly. There's a fix in the source and the nightly build.
This doesn't (as far as I know) apply to the SynonymFilter strategy.

Hope this helps
Erick

On 10/25/06, qaz zaq <fortques@yahoo.com> wrote:
>
> I have multiple values want to add to the same FIELD, and I also want to
> add non-zero but NON CONSTANT position increment gap among those values.
> e.g., gap between "value1" and "value2" is 10, but gap between "value2"
> and "value3" is 100. is there any how can I achieve that?
>
>   d.add(new Field ("fld", "value1");
>   d.add(new Field ("fld", "value2");
>   d.add(new Field ("fld", "value3");
>   indexWriter.addDocument(d);
>
>
> ---------------------------------
> All-new Yahoo! Mail - Fire up a more powerful email and get things done
> faster.
>

------=_Part_30553_27828469.1161878317247--

From java-user-return-24233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 16:03:50 2006
Return-Path: <java-user-return-24233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15360 invoked from network); 26 Oct 2006 16:03:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:03:49 -0000
Received: (qmail 85329 invoked by uid 500); 26 Oct 2006 16:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85288 invoked by uid 500); 26 Oct 2006 16:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85277 invoked by uid 99); 26 Oct 2006 16:03:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:03:53 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:03:39 -0700
Received: by nf-out-0910.google.com with SMTP id b2so74060nfe
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 09:03:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IIJ1M0sp13cFAe7p7AqksyvwX+HAGRTxr9H1zpmifdBiwR0mMTDpundCSlB28RRjHJLDOitpcCIjDbBOaIILtPeJpqUlaCy/A9pD8JaGSYnJlzUnOy5zSNPr4DN19DZe9604PqxbAdAjbGuYKubGSIlLJ3Fi4zxnBsmKHTcj2ak=
Received: by 10.82.114.3 with SMTP id m3mr761532buc;
        Thu, 26 Oct 2006 09:03:14 -0700 (PDT)
Received: by 10.82.162.13 with HTTP; Thu, 26 Oct 2006 09:03:14 -0700 (PDT)
Message-ID: <359a92830610260903q561e8d50qaa9a3dbae02c580b@mail.gmail.com>
Date: Thu, 26 Oct 2006 12:03:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <a9893f800610260356h306e0fc8j22d59e6d4928c952@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30645_31796999.1161878594392"
References: <a9893f800610260356h306e0fc8j22d59e6d4928c952@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30645_31796999.1161878594392
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, but you must close and re-open your SEARCHER. There are various schemes
for doing this based upon now expensive it is to open a new searcher and how
often you need to do it, but it's not built into Lucene AFAIK. It all
depends upon how quickly you have to see the results of your update.

Also, be aware that your update code does not necessarily write your data to
the index immediately, so you can only be assured that the data is available
if you, say, close your index updater.

Erick

On 10/26/06, Sunil Kumar PK <pksunilpk@gmail.com> wrote:
>
> Hi,
>
> I have a program to create a lucene index, and another program for
> searching
> that index.
>
> The Search program create an IndexSearcher object once in its constructor,
> and I created a method doSearch to search the index. The doSearch method
> uses the indexSearcher object to get the Hits.
>
> My Indexer program is continuously adding documents to the index.
>
> My problem is that I am not getting the matching documents in my search
> results, which are added after creating the IndexSearcher object in my
> Search program.
> Is it possible to get all the matching document in the result without
> restarting the Searcher program?
>
> Thanks,
> Sunil
>
>

------=_Part_30645_31796999.1161878594392--

From java-user-return-24234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 16:17:06 2006
Return-Path: <java-user-return-24234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21121 invoked from network); 26 Oct 2006 16:17:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:17:05 -0000
Received: (qmail 19990 invoked by uid 500); 26 Oct 2006 16:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19961 invoked by uid 500); 26 Oct 2006 16:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19939 invoked by uid 99); 26 Oct 2006 16:17:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:17:09 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.236.176] (HELO web58408.mail.re3.yahoo.com) (68.142.236.176)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Oct 2006 09:16:53 -0700
Received: (qmail 25806 invoked by uid 60001); 26 Oct 2006 16:16:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=KVQ7QngOk8842+RBJJuncbZG83pEoykvdz3+KpO1fFIAIaqIBf5Y6n40GtQEgFRq7G0jw7N+wNeQvAZIj+vvkP58Ua+dUGMKKKWI3/H9V1FABz6AxPrjWGd9874hQTgnwXYp1JOBVjZ3+QCnRZuBbdixZyydvYG0hJAozJx3M4o=  ;
Message-ID: <20061026161632.25804.qmail@web58408.mail.re3.yahoo.com>
Received: from [132.197.150.201] by web58408.mail.re3.yahoo.com via HTTP; Thu, 26 Oct 2006 09:16:32 PDT
Date: Thu, 26 Oct 2006 09:16:32 -0700 (PDT)
From: qaz zaq <fortques@yahoo.com>
Subject: Re: Analyzer.getPositionIncrementGap question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-982535138-1161879392=:24677"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-982535138-1161879392=:24677
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

  Thanks Erick,
  Since value1, value2, value3, itself can also include multiply tokens, I am not sure  the token based postion increment, d.add(new Field("value1 value2 value3"),  will actually work. I was trying to use 
  getPositionIncrementGap, but there appears to no way to set non constant gap. say, gap between "value1" and "value2" is 10, but gap between "value2" and "value3" is 100.
  
Erick Erickson <erickerickson@gmail.com> wrote:
  See the SynonymFilter in LIA for how to create your very own analyzer that
gives you total control over the increment between terms. Essentially, that
allows you to set the position increment for each and every token. I suspect
that this would be easier, but what do I know?

The difference is that you can set the position increment for each token,
there's no reason to add the field multiple times. That is, for the call

d.add(new Field("value1 value2 value3")

and have the opportunity to set the position increment for all three terms.
Of course, you could make three calls to d.add as well and this technique
should still work.

But if you really need the gap instead, you can simply override the
getPositionIncrementGap method. But I don't know how you get the current
token when it's called.

One warning if you really *do* need getPositionIncrementGap. There's a bug
in 2.0 that if you use a PerFieldAnalyzerWrapper, getPostitionIncrementGap
isn't called properly. There's a fix in the source and the nightly build.
This doesn't (as far as I know) apply to the SynonymFilter strategy.

Hope this helps
Erick

On 10/25/06, qaz zaq wrote:
>
> I have multiple values want to add to the same FIELD, and I also want to
> add non-zero but NON CONSTANT position increment gap among those values.
> e.g., gap between "value1" and "value2" is 10, but gap between "value2"
> and "value3" is 100. is there any how can I achieve that?
>
> d.add(new Field ("fld", "value1");
> d.add(new Field ("fld", "value2");
> d.add(new Field ("fld", "value3");
> indexWriter.addDocument(d);
>
>
> ---------------------------------
> All-new Yahoo! Mail - Fire up a more powerful email and get things done
> faster.
>

    
---------------------------------
  All-new Yahoo! Mail - Fire up a more powerful email and get things done faster.

 		
---------------------------------
How low will we go? Check out Yahoo! Messengers low  PC-to-Phone call rates.
--0-982535138-1161879392=:24677--

From java-user-return-24235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 16:18:54 2006
Return-Path: <java-user-return-24235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21828 invoked from network); 26 Oct 2006 16:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:18:53 -0000
Received: (qmail 25951 invoked by uid 500); 26 Oct 2006 16:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25911 invoked by uid 500); 26 Oct 2006 16:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25895 invoked by uid 99); 26 Oct 2006 16:18:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:18:57 -0700
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.91.193] (HELO web36401.mail.mud.yahoo.com) (209.191.91.193)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Oct 2006 09:18:39 -0700
Received: (qmail 4297 invoked by uid 60001); 26 Oct 2006 16:18:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=mjstzG3zjXeWVwksAlAfWfFV7mwwqjloSClrMpKlIqF5idX0F0P1ECHLdUKgukSIt7zAQfscQSwlDfunge9lLLKVpGZSaaBNjpZvtoyeCE2Ynf+lsLVoImarf25Bsopb7CJm4ZMTsBGcgpdI8xOlsRM4RMlBIGC5oYzFFDTP5UA=  ;
Message-ID: <20061026161818.4295.qmail@web36401.mail.mud.yahoo.com>
Received: from [208.210.219.130] by web36401.mail.mud.yahoo.com via HTTP; Thu, 26 Oct 2006 09:18:18 PDT
Date: Thu, 26 Oct 2006 09:18:18 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: RE: Poor performance "race condition" in FieldSortedHitQueue 
To: java-user@lucene.apache.org
In-Reply-To: <007801c6f629$681d23b0$2800a8c0@aconex.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-236638325-1161879498=:4252"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-236638325-1161879498=:4252
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


Thanks Oliver. It works.
   
  Thanks,
  -Kalpesh
  
Oliver Hutchison <ohutchison@aconex.com> wrote:
  Kalpesh,

Are you using sorting? If you are, then the patch attached to LUCENE-651 may
help. It fixes a race condition that exists in the initialization of the
FieldCache (which is used to accelerate sorting).

Cheers,

Ollie

> -----Original Message-----
> From: kalpesh patel [mailto:kalpesh.modi01@yahoo.com] 
> Sent: Saturday, 21 October 2006 12:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: Poor performance "race condition" in FieldSortedHitQueue 
> 
> Hi,
> 
> Sometimes when the user does a search on the same term at 
> the same time, there is a delay in the search and the memory 
> used considerably goes high. I was going through the lucene 
> user list and saw this discussion about race condition.
> 
> 
> http://www.gossamer-threads.com/lists/lucene/java-user/38753?s
earch_string=race%20condition
> 
> What is the correct approach? Has it been fixed in the 
> nightly builds and if yes, can anyone please point me as to 
> which classes should I update to fix it.
> 
> Any help would be highly appreciated.
> 
> Thanks,
> -Kalpesh
> 
> 
> ---------------------------------
> Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US 
> (and 30+ countries) for 2/min or less.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
How low will we go? Check out Yahoo! Messengers low  PC-to-Phone call rates.
--0-236638325-1161879498=:4252--

From java-user-return-24236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 16:38:36 2006
Return-Path: <java-user-return-24236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28925 invoked from network); 26 Oct 2006 16:38:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 16:38:35 -0000
Received: (qmail 85763 invoked by uid 500); 26 Oct 2006 16:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85725 invoked by uid 500); 26 Oct 2006 16:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85714 invoked by uid 99); 26 Oct 2006 16:38:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:38:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.44.23.182] (HELO mail.spline-software.com) (194.44.23.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 09:38:22 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id DF6AD37DF2E; Thu, 26 Oct 2006 19:37:35 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id C1BF537DE9A
	for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 19:31:31 +0300 (EEST)
Message-ID: <4540E2E3.5040007@i-hypergrid.com>
Date: Thu, 26 Oct 2006 19:31:31 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: obtaining the number of documents stored in a .cfs file
References: <015601c6d0e7$5e42d9a0$a700a8c0@domain.outsystems.com> <1157460488.4933.43.camel@localhost> <44FD76C0.3080303@sirma.bg> <44FE77C7.70700@i-hypergrid.com>
In-Reply-To: <44FE77C7.70700@i-hypergrid.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.4

one mistake in this code
should be
    infos.counter = ++counter;
instead of
    infos.counter = counter++;

Volodymyr Bychkoviak wrote:
> I've used following code to recover index. Note: it only works with 
> .cfs files.
>
>
>    String path = // path to index
>    File file = new File(path);
>    Directory directory = FSDirectory.getDirectory(file, false);
>
>    String[] files = file.list(new FilenameFilter() {
>
>      public boolean accept(File dir, String name) {
>        return name.endsWith(".cfs");
>      }
>
>    });
>      SegmentInfos infos = new SegmentInfos();
>    int counter = 0;
>    for (int i = 0; i < files.length; i++) {
>      String fileName = files[i];
>      String segmentName = fileName.substring(1, 
> fileName.lastIndexOf('.'));
>          int segmentInt = 
> Integer.parseInt(segmentName,Character.MAX_RADIX);
>      counter = Math.max(counter, segmentInt);
>          segmentName = fileName.substring(0, fileName.lastIndexOf('.'));
>          Directory fileReader = new 
> CompoundFileReader(directory,fileName);
>      IndexInput indexStream = fileReader.openInput(segmentName + ".fdx");
>      int size = (int)(indexStream.length() / 8);
>      indexStream.close();
>      fileReader.close();
>          SegmentInfo segmentInfo = new 
> SegmentInfo(segmentName,size,directory);
>      infos.addElement(segmentInfo);
>    }
>
>    infos.counter = counter++;
>      infos.write(directory);
>
> Stanislav Jordanov wrote:
>> Suppose I have a bunch of valid .cfs files while the 
>> segmens/segments.new file is missing or invalid.
>> The task is to 'recover' the present .cfs files into a valid index.
>> I think it will be necessary and sufficient to create a segments file 
>> that references the .cfs files.
>> The only problem I've encountered in generating a vaild and 
>> well-formed segments file is that I need to know the number of docs 
>> in each cfs file.
>> So the couple of questions is:
>> Do I have to put the right number of docs for each segments or any 
>> (dummy) number will do?
>> If I have to put the right number there, how do I get it having the 
>> cfs file?
>>
>> Stanislav
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 17:03:36 2006
Return-Path: <java-user-return-24237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37649 invoked from network); 26 Oct 2006 17:03:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 17:03:35 -0000
Received: (qmail 41274 invoked by uid 500); 26 Oct 2006 17:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41246 invoked by uid 500); 26 Oct 2006 17:03:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41228 invoked by uid 99); 26 Oct 2006 17:03:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:03:37 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 10:03:21 -0700
Received: by nf-out-0910.google.com with SMTP id b2so88562nfe
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 10:02:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tbu6vKQsvQcLnCRl3jrd5vtWh1NsPQBR+1N/1OM6m5rFWMnH/6ZJs3HD5Khc9HZDO1b8RLvNt9s+CPewPwG0DSMoOZ1jqH8OQSD4eNUNOw40OCXly0h8KfZWNFngrPg6fuyW6/aeVKse6+8A/NkC+eFPIeP++/krPr475szxoJg=
Received: by 10.82.114.3 with SMTP id m3mr869636buc;
        Thu, 26 Oct 2006 10:02:57 -0700 (PDT)
Received: by 10.82.162.13 with HTTP; Thu, 26 Oct 2006 10:02:57 -0700 (PDT)
Message-ID: <359a92830610261002g4894cacoe2bcf46eaa2d4ef2@mail.gmail.com>
Date: Thu, 26 Oct 2006 13:02:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzer.getPositionIncrementGap question
In-Reply-To: <20061026161632.25804.qmail@web58408.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31487_13264859.1161882177735"
References: <20061026161632.25804.qmail@web58408.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31487_13264859.1161882177735
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, how about injecting a special token in your input stream, then having
your analyzer record that token and set the position increment of the next
"real" token? Something like

d.add("field", "veryspecialtokenincrementnext100 value1"...);
d.add("field", "veryspecialtokenincrementnext10 value2"...);
d.add("field", "veryspecialtokenincrementnext1000 value3...");

then in your synonym-like analyzer, just do whatever your
veryspecialtokenincrmentnext### indicates? In this case, discard the special
token and set the positionincrement of the next token as indicated?

or inject VerySpecialIncrementNextBasedOnValue and have your analyzer figure
out what the correct increment is for the next token it sees...

If you do elect to include numbers in your veryspecialincre.... make sure
your analyzer pases them through and doesn't strip them.

You could also include the VerySpecial..... in multiple places within
value1, say.


On 10/26/06, qaz zaq <fortques@yahoo.com> wrote:
>
>   Thanks Erick,
>   Since value1, value2, value3, itself can also include multiply tokens, I
> am not sure  the token based postion increment, d.add(new Field("value1
> value2 value3"),  will actually work. I was trying to use
>   getPositionIncrementGap, but there appears to no way to set non constant
> gap. say, gap between "value1" and "value2" is 10, but gap between "value2"
> and "value3" is 100.
>
> Erick Erickson <erickerickson@gmail.com> wrote:
>   See the SynonymFilter in LIA for how to create your very own analyzer
> that
> gives you total control over the increment between terms. Essentially,
> that
> allows you to set the position increment for each and every token. I
> suspect
> that this would be easier, but what do I know?
>
> The difference is that you can set the position increment for each token,
> there's no reason to add the field multiple times. That is, for the call
>
> d.add(new Field("value1 value2 value3")
>
> and have the opportunity to set the position increment for all three
> terms.
> Of course, you could make three calls to d.add as well and this technique
> should still work.
>
> But if you really need the gap instead, you can simply override the
> getPositionIncrementGap method. But I don't know how you get the current
> token when it's called.
>
> One warning if you really *do* need getPositionIncrementGap. There's a bug
> in 2.0 that if you use a PerFieldAnalyzerWrapper, getPostitionIncrementGap
> isn't called properly. There's a fix in the source and the nightly build.
> This doesn't (as far as I know) apply to the SynonymFilter strategy.
>
> Hope this helps
> Erick
>
> On 10/25/06, qaz zaq wrote:
> >
> > I have multiple values want to add to the same FIELD, and I also want to
> > add non-zero but NON CONSTANT position increment gap among those values.
> > e.g., gap between "value1" and "value2" is 10, but gap between "value2"
> > and "value3" is 100. is there any how can I achieve that?
> >
> > d.add(new Field ("fld", "value1");
> > d.add(new Field ("fld", "value2");
> > d.add(new Field ("fld", "value3");
> > indexWriter.addDocument(d);
> >
> >
> > ---------------------------------
> > All-new Yahoo! Mail - Fire up a more powerful email and get things done
> > faster.
> >
>
>
> ---------------------------------
>   All-new Yahoo! Mail - Fire up a more powerful email and get things done
> faster.
>
>
> ---------------------------------
> How low will we go? Check out Yahoo! Messenger's low  PC-to-Phone call
> rates.
>

------=_Part_31487_13264859.1161882177735--

From java-user-return-24238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 17:52:55 2006
Return-Path: <java-user-return-24238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52568 invoked from network); 26 Oct 2006 17:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 17:52:46 -0000
Received: (qmail 63621 invoked by uid 500); 26 Oct 2006 17:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63597 invoked by uid 500); 26 Oct 2006 17:52:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 80117 invoked by uid 99); 26 Oct 2006 17:17:41 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Possible memory issue?
Date: Thu, 26 Oct 2006 13:15:57 -0400
Message-ID: <6B6D3063DF0A7A4DB8A989D40C61BEB301DF1764@EMAIL02.wescodist.com>
In-Reply-To: <288e77f30610260839q7bd71ef0r1e877ffb678c8a99@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Possible memory issue?
Thread-Index: Acb5FRECQjCF+NUIRvehy+EI7K67dAADNOSA
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Oct 2006 17:15:57.0817 (UTC) FILETIME=[66F4EE90:01C6F922]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the advice drj.  I do close the searcher and set it to null
before instantiating another searcher.  I believe that I am closing the
reader and writer at the correct times as well...

-----Original Message-----
From: d rj [mailto:drjat320@gmail.com]=20
Sent: Thursday, October 26, 2006 11:40 AM
To: java-user@lucene.apache.org
Subject: Re: Possible memory issue?

I would suggest checking that close() is properly called for all
IndexSearcher/Reader/Writer objects when doing adds/deletes and when
recreating IndexSearcher object.
Free memory in the JVM heap can diminish quickly if these objects aren't
properly disposed.
-drj

On 10/26/06, Aigner, Thomas < TAigner@wescodist.com> wrote:
>
> Howdy all,
>
>         I have a issue with java running out of memory after the
search
> has been running for a while.  We are using 1.9.1 release and I check
> the indexreader's version to determine if I need to get a new searcher
> for searches (so I pick up any changes to the index).  I am seeing
jumps
> in memory for the first search after loads to the index.  After these
> jumps the memory does not come back down after a load has taken
place..
> more loads =3D more memory consumed until we eventually run out.  Is =
it
> possible that this is a bug with lucene caching the memory from the
last
> search and creating memory for the next search?  Is there a way to
tell
> lucene to drop it's cached memory if that is the case?
>
>         Has anyone come across this possible problem with multiple
sort
> fields?
>
>
> Ex.  Java memory before loads hovers around 110M and about half of it
> free.
>         Many searches take place, memory stays relatively the same
>       Then      Load takes place
>         Next search uses 192M memory with 80Meg free..
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 18:32:52 2006
Return-Path: <java-user-return-24239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67045 invoked from network); 26 Oct 2006 18:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 18:32:43 -0000
Received: (qmail 64174 invoked by uid 500); 26 Oct 2006 18:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64147 invoked by uid 500); 26 Oct 2006 18:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64136 invoked by uid 99); 26 Oct 2006 18:32:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 11:32:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 11:32:31 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2ED075B793; Thu, 26 Oct 2006 11:32:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2B0887F403
	for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 11:32:10 -0700 (PDT)
Date: Thu, 26 Oct 2006 11:32:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Analyzer.getPositionIncrementGap question
In-Reply-To: <20061026161632.25804.qmail@web58408.mail.re3.yahoo.com>
Message-ID: <Pine.LNX.4.58.0610261124040.19246@hal.rescomp.berkeley.edu>
References: <20061026161632.25804.qmail@web58408.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:   getPositionIncrementGap, but there appears to no way to set non
: constant gap. say, gap between "value1" and "value2" is 10, but gap
: between "value2" and "value3" is 100.

by default, non of hte analyzers do anything special in
getPositionIncrementGap -- that's up to you to control in any subclass or
wrapper Analyzer you might write -- at which point the question becomes
what is the general behavior you want? .. you describe a sinle instance
case: gap of 10 after "value1" gap of 100 afer "value2" ... are "value1"
and "value2" magic constants?  what should the gap be if other values are
specified?

your Analyzer can keep track of whatever state it wants to decide what it
will return the next time getPositionIncrimentGap is called ... which in
your case might simply be remembering the last value it was asked to
tokenize and loking that value up in a Map to get the gap to be returned.

: Date: Wed, 25 Oct 2006 20:32:01 -0700 (PDT)
: Date: Thu, 26 Oct 2006 08:55:00 -0700 (PDT)
: I am reposting this question. Could somebody help?

...reposting after 12.5 hours is a little quick ... you have to give
people a chance to do things other then read Lucene email, like Eat and
Sleep.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Oct 26 19:02:16 2006
Return-Path: <java-user-return-24240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82474 invoked from network); 26 Oct 2006 19:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Oct 2006 19:02:15 -0000
Received: (qmail 27601 invoked by uid 500); 26 Oct 2006 19:02:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27573 invoked by uid 500); 26 Oct 2006 19:02:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27560 invoked by uid 99); 26 Oct 2006 19:02:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 12:02:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [210.48.84.103] (HELO mail.waite.net.nz) (210.48.84.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 12:02:06 -0700
Received: from localhost ([127.0.0.1])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1GdAU3-0008HM-QG
	for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 08:01:43 +1300
Received: from mail.waite.net.nz ([127.0.0.1])
	by localhost (gandalf [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 31722-03 for <java-user@lucene.apache.org>;
	Fri, 27 Oct 2006 08:01:37 +1300 (NZDT)
Received: from frodo.lan.waite.net.nz ([192.168.1.29])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1GdATx-0008HD-Ay
	for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 08:01:37 +1300
From: Paul Waite <paul@waite.net.nz>
Subject: Re: java-user Digest 26 Oct 2006 13:22:18 -0000 Issue 474
Date: Fri, 27 Oct 2006 08:01:36 +1300
User-Agent: KMail/1.9.1
Cc: java-user@lucene.apache.org
References: <1161868938.72927.ezmlm@lucene.apache.org>
In-Reply-To: <1161868938.72927.ezmlm@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
To: Undisclosed.Recipients: ;
Message-Id: <200610270801.36378.paul@waite.net.nz>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at waite.net.nz
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen <DORONC@il.ibm.com> wrote:

> Perhaps another comment on the same line - I think you would be able to
> get more from your system by bounding the number of open searchers to 2:

Yep, this is exactly what I've done.


> =A0- old, serving 'old' queries, would be soon closed;
> =A0- new, being opened and warmed up, and then serving 'new' queries;
>=20
> Because... - if I understood how your current setting is working, the
> following timed sequence is possible:
> =A0t1. =A0index updated;
> =A0t2. =A0query q2 arrives; new searcher s2 opened; s2 starts serving q2;
> =A0t3. =A0index updated;
> =A0t4. =A0query q3 arrives; s3 opened; s3 starts serving q3;
> =A0t5. =A0index updated;
> =A0t6. =A0q6 arrives; s6 starts to open (takes long, system busy);
> =A0t7. =A0index updated;
> =A0t8. =A0q8 arrives; s8 starts to open;
> =A0t9. =A0s2 done serving q2; s2 is closed;
> =A0t10. s6 done opening; s6 starts serving q6;
> =A0t11. index updated;
> And so on...
>=20
> So, if this is indeed possible (otherwise how would you be able to set
> different limits on number of open searchers) I think it would make more
> sense to have the following sequence instead:
> =A0t1. =A0index updated; a background thread starts to open and warm sear=
cher
> s1;
> =A0t2. =A0query q2 arrives; s1 not ready yet, hence s0 start serving q2;
> =A0t3. =A0index updated; two active searchers exist, so do nothing furthe=
r.
> =A0t3a. s1 is ready, s0 marked to be retired when free;
> =A0t4. =A0query q3 arrives; s1 start serving q3;
> =A0t5. =A0index updated;
> =A0t6. =A0q6 arrives; s1 starts serving q6;
> =A0t7. =A0index updated;
> =A0t8. =A0q8 arrives; s2 starts serving q8;
> =A0t9. =A0s0 done serving q2; background thread closes s0, start opening &
> warming s9.
> =A0t10. index updated;
> And so on...
>=20
> So you avoid exhausting IO resources, by waiting with opening a new
> searcher until the previously opened searcher is up and running, and the
> previous previous searcher is done and gone. This assumes that your=20
search
> application does not keep search references too long when serving a=20
query.
> In addition, a query never waits for a searcher to open - it always uses
> the most recent available searcher.
>=20
> Hope this makes sense,
> Doron


Absolutely. I have implemented the above scheme, but without the nice
feature of background warming. So the users will have to wear the cost of
that by waiting a bit longer than usual when we are updating the index.

I'm planning to move our system to using Solr, which does have this nice
feature built-in, so I probably won't bother implementing it in our current
search daemon. At least I've stopped the out-of-memory errors.

Cheers,
Paul.

>=20
> Paul Waite <paul@waite.net.nz> wrote on 20/10/2006 12:52:01:
>=20
> Paul Waite wrote on 20/10/2006 12:52:01:
> > Doron wrote:
> >
> > > Not sure if this is the case, but you said "searchers", so might be=20
it
> -
> > > you can (and should) reuse searchers for multiple/concurrent queries.
> > > IndexSearcher is thread-safe, so no need to have a different searcher
> for
> > > each query. Keep using this searcher until you decide to open a new
> > > searcher - actually until you 'warmed up' the new (updated) searcher,
> > > then switch to using the new searcher and close the old one.
> > >
> > > - Doron
> >
> >
> > Thanks Doron, yes we are re-using our Searchers. The particular piece=20
of
> > code I refer to below, written by Peter Halcsy contains a method called
> > 'getSearcher()' and this returns a cached IndexSearcher. However first
> > it checks whether the index has been changed since the current Searcher
> > was instantiated, and if so, 'retires' the current, cached Searcher and
> > returns a brand new one. Any retired Searchers get removed once all=20
their
> > current queries are finished.
> >
> > I have re-worked that piece to put a configurable cap on the number of
> > these, which should stop the open-ended behaviour which would lead to
> > our OOM's. Once that max is reached, getSearcher() keeps returning
> > the current cached Searcher whether the index is changed or not.
> >
> > I've tested this and seen it in action by continuously indexing docs at
> > about 40ms per document, and writing a query benchmarker client which
> > forks N times, with each child looping through a bunch of pre-prepared
> > queries. Together with some good logging I can see the searchers being
> > created up to the max. number, then as I vary the indexing throughput
> > it drops back and new Searchers are once more created to get searching
> > back up to date with the index changes.
> >
> >
> > Cheers,
> > Paul.
> >
> >
> >
> > > Paul Waite <paul@waite.net.nz> wrote on 18/10/2006 18:22:30:
> > >
> > > > Some excellent feedback guys - thanks heaps.
> > > >
> > > >
> > > > On my OOM issue, I think Hoss has nailed it here:
> > > >
> > > > > That said: if you are seeing OOM errors when you sort by a field
> (but
> > > > > not when you use the docId ordering, or sort by score) then it
> sounds
> > > > > like =A0you are keeping refrences to IndexReaders arround after
> you've
> > > > > stoped using them -- the FieldCache is kept in a WeakHashMap=20
keyed
> > off
> > > of
> > > > > hte IndexReader, so it should get garbage collected as soon sa=20
you
> > let
> > > go
> > > > > of it. =A0Another possibility is that you are sorting on too many
> > fields
> > > > > for it to be able to build the FieldCache for all of them in the
> RAM
> > > you
> > > > > have available.
> > > >
> > > >
> > > > I'm using a piece of code written by Peter Halacsy which implements=
=20
a
> > > > SearcherCache class. When we do a search we request a searcher, and
> > this
> > > > class looks after giving us one.
> > > >
> > > > It checks whether the index has been updated since the most recent
> > > Searcher
> > > > was created. If so it creates a new one.
> > > >
> > > > At the same time it 'retires' outdated Searchers, once they have no
> > > queries
> > > > busy with them.
> > > >
> > > > Looking at that code, if the system gets busy indexing new stuff,=20
and
> > > doing
> > > > complex searches this is all rather open-ended as to the potential
> > number
> > > > of fresh Searchers being created, each with the overhead of=20
building
> > its
> > > > FieldCache for the first time. No wonder I'm having problems as the
> > > archive
> > > > has grown! Looking at it in this light, my OOM's all seem to come
> just
> > > > after a bout of articles have been indexed, and querying is being
> done
> > > > simultaneously, so it does fit.
> > > >
> > > > I guess a solution is probably to cap this process with a maximum
> > number
> > > > of active Searchers, meaning potentially some queries might be=20
fobbed
>=20
> > off
> > > > with slightly out of date versions of the index, in extremis, but=20
it
> > > would
> > > > right itself once everything settles down again.
> > > >
> > > > Obviously the index partitioning would probably make this a
> non-issue,
> > > but
> > > > it seems better to sort the basic problem out anyway, and make it
> 100%
> > > > stable.
> > > >
> > > > Thanks Hoss!
> > > >
> > > > Cheers,
> > > > Paul.
> > > >
> > >=20
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> >
> > --
> > Suspicion always haunts the guilty mind.
> > =A0 =A0 =A0 -- Wm. Shakespeare
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20

=2D-=20
Life, like beer, is merely borrowed.
		-- Don Reed

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 05:39:46 2006
Return-Path: <java-user-return-24241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26023 invoked from network); 27 Oct 2006 05:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 05:39:45 -0000
Received: (qmail 7902 invoked by uid 500); 27 Oct 2006 05:39:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7864 invoked by uid 500); 27 Oct 2006 05:39:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7853 invoked by uid 99); 27 Oct 2006 05:39:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:39:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mekin.m@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 22:39:38 -0700
Received: by nf-out-0910.google.com with SMTP id b2so202410nfe
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 22:39:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=sfcwbbjefJtPzbmQ/KYlOqDOFM6NO/UvEQza5al5CUcb8AcZKKkq/7wrZxMvE64Bm2AZzOmnZCi4HJBw5AyZG77Cgkk26Z2NUnsne1rcvpgjX6YiS51L7yzCAMywdxK88OKhsVf1u0MmdTWkyqcXnKdytb1WbJd+y/bK4aENjkU=
Received: by 10.48.254.1 with SMTP id b1mr6560724nfi;
        Thu, 26 Oct 2006 22:39:17 -0700 (PDT)
Received: by 10.49.37.16 with HTTP; Thu, 26 Oct 2006 22:39:17 -0700 (PDT)
Message-ID: <865c77680610262239x5d50ca61r95b7d5c165b02f0d@mail.gmail.com>
Date: Fri, 27 Oct 2006 11:09:17 +0530
From: "Mekin Maheshwari" <mekin.m@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing slows down considerably after a few million documents
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I am creating an index of about 7 Million documents.
The total size of the index is about 2.7G once indexing is done.

For the 1st 3Million documents, the indexer takes about 3 hours (can i
get better than this? )
 - 4 seconds per thousand documents

After this it slows down terribly and takes about 20 seconds for every
thousand documents.


It doesnt seem to be a data issue, as I tried starting to create the
index from the 3Millionth document & I get the initial speed (1k docs
in 3 secs)

What could be going wrong?
I have tried a few things, but cant quickly try out a lot of things as
it takes 3 hours before the slow down happens.

Below is the relevant pieces of the code::

Thanks for the help,
mekin

IndexWriter writer = new IndexWriter(dirname, analyzer,doTotalIndex );
writer.setMergeFactor(1000);

while(more records to get){
 Document doc = new Document();
//... add fields to doc
//add boost to doc
//
 writer.addDocument(doc);
}

writer.optimize();
writer.close();

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 06:31:36 2006
Return-Path: <java-user-return-24242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11756 invoked from network); 27 Oct 2006 06:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 06:31:35 -0000
Received: (qmail 76645 invoked by uid 500); 27 Oct 2006 06:31:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76601 invoked by uid 500); 27 Oct 2006 06:31:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76590 invoked by uid 99); 27 Oct 2006 06:31:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 23:31:38 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 23:31:02 -0700
Received: by nf-out-0910.google.com with SMTP id b2so214295nfe
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 23:30:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n+RXlpZYc3caNS63mn4t2CtqeP8ZZ0E5mxLJw6jbf2qC5qx/XzwgPXJXEXQ14/9hp9s8iaeyGq7Boo2FfMnJRPVVIS6XfnvTF2Dd8dwRll+WSHvQxXoe3dVPN2yS8lxHKAosP2fzucVxPFRuQALwtkdotycZKn297jravnBOpsA=
Received: by 10.78.160.2 with SMTP id i2mr3280280hue;
        Thu, 26 Oct 2006 23:30:40 -0700 (PDT)
Received: by 10.78.159.7 with HTTP; Thu, 26 Oct 2006 23:30:40 -0700 (PDT)
Message-ID: <a9893f800610262330ub5b68b4p619fd68cfa8648dd@mail.gmail.com>
Date: Fri, 27 Oct 2006 12:00:40 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <359a92830610260903q561e8d50qaa9a3dbae02c580b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41008_31409697.1161930640502"
References: <a9893f800610260356h306e0fc8j22d59e6d4928c952@mail.gmail.com>
	 <359a92830610260903q561e8d50qaa9a3dbae02c580b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41008_31409697.1161930640502
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick for the information.

Actually I am using RemoteParallelMultiSearcher with 10 Search Servers, my
crawler program freequently add new documents in to all the Search Servers
in a distributed manner. So in this case, if I add a document in a
particular index, I need to restart the searcher program in that server.
right? Can I do this with a remote call, or I want to add a new method to
Searchable interface?

Thanks,
Sunil

On 10/26/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Yes, but you must close and re-open your SEARCHER. There are various
> schemes
> for doing this based upon now expensive it is to open a new searcher and
> how
> often you need to do it, but it's not built into Lucene AFAIK. It all
> depends upon how quickly you have to see the results of your update.
>
> Also, be aware that your update code does not necessarily write your data
> to
> the index immediately, so you can only be assured that the data is
> available
> if you, say, close your index updater.
>
> Erick
>
> On 10/26/06, Sunil Kumar PK <pksunilpk@gmail.com> wrote:
> >
> > Hi,
> >
> > I have a program to create a lucene index, and another program for
> > searching
> > that index.
> >
> > The Search program create an IndexSearcher object once in its
> constructor,
> > and I created a method doSearch to search the index. The doSearch method
> > uses the indexSearcher object to get the Hits.
> >
> > My Indexer program is continuously adding documents to the index.
> >
> > My problem is that I am not getting the matching documents in my search
> > results, which are added after creating the IndexSearcher object in my
> > Search program.
> > Is it possible to get all the matching document in the result without
> > restarting the Searcher program?
> >
> > Thanks,
> > Sunil
> >
> >
>
>

------=_Part_41008_31409697.1161930640502--

From java-user-return-24243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 06:33:53 2006
Return-Path: <java-user-return-24243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14622 invoked from network); 27 Oct 2006 06:33:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 06:33:51 -0000
Received: (qmail 81646 invoked by uid 500); 27 Oct 2006 06:33:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81557 invoked by uid 500); 27 Oct 2006 06:33:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81546 invoked by uid 99); 27 Oct 2006 06:33:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 23:33:55 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Oct 2006 23:33:43 -0700
Received: by nf-out-0910.google.com with SMTP id b2so214932nfe
        for <java-user@lucene.apache.org>; Thu, 26 Oct 2006 23:33:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z+ADyqbDmfevMoLK+0tAX9ceSrI7xuITrvoBCpVjQwOnK3mt21Hl0iZZQVh7rOcpKc+NLkmLhvSsokCYD15X4lX2HsyCgJmbs7WrX6R089SR2suSD8o2pbRdUCr1VqjH2Sogjn0zkCRq1X7tjT3GXxv6S3zifG9hKEP5iZbULng=
Received: by 10.78.123.5 with SMTP id v5mr4334415huc;
        Thu, 26 Oct 2006 23:33:21 -0700 (PDT)
Received: by 10.78.159.7 with HTTP; Thu, 26 Oct 2006 23:33:21 -0700 (PDT)
Message-ID: <a9893f800610262333g40900140s1cee073981608e30@mail.gmail.com>
Date: Fri, 27 Oct 2006 12:03:21 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching Problem
In-Reply-To: <4540B65E.1020506@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41016_12647062.1161930801670"
References: <a9893f800610260357q3a735e3x5cf9e01e85b8f0a2@mail.gmail.com>
	 <4540998D.7070208@tejnora.cz>
	 <a9893f800610260506y288e59b8j9b09f2a7c218b9af@mail.gmail.com>
	 <4540B65E.1020506@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41016_12647062.1161930801670
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mike for the information.

Actually I am using RemoteParallelMultiSearcher with 10 Search Servers, my
crawler program freequently add new documents in to all the Search Servers
in a distributed manner. So in this case, if I add a document in a
particular index, I need to restart the searcher program in that server.
right? Can I do this with a remote call, or I want to add a new method to
Searchable interface?

Thanks,
Sunil


On 10/26/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Sunil Kumar PK wrote:
> > could you please explain?
> >
> > On 10/26/06, Karel Tejnora <karel@tejnora.cz> wrote:
> >> Nope. IndexReader obtains a snapshot of index - not closing and opening
> >> indexreader leads to not deleting files (windows exception, linux will
> >> not free them).
> >> > Is it possible to get all the matching document in the result without
> >> > restarting the Searcher program?
>
> A searcher once created only searches the index as of the "point in
> time" that it was created.  Ie, it's an unchanging snapshot.  So any
> deletes/updates that happen to the index by a writer will not be visible
> until you close and reopen another searcher.
>
> This "point in time" searching relies on certain properties of the
> underlying filesystem in order to work properly.  Windows local and
> remote (SMB) filesystems work because files that are open can't be
> deleted (and Lucene just retries); local UNIX filesystems work because
> the open file handle can still access a deleted file ("delete on last
> close").
>
> However: NFS does not have "delete on last close", so you can't rely on
> "point in time" searching when using NFS across machines (it's possible
> a single machine may work).  If a writer on a different machine has
> committed to the index that a searcher is using over NFS then the
> searcher will eventually hit an IOException with "stale NFS handle".
> See here for details on current known issues with NFS:
>
>    http://issues.apache.org/jira/browse/LUCENE-673
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_41016_12647062.1161930801670--

From java-user-return-24244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 09:09:59 2006
Return-Path: <java-user-return-24244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31975 invoked from network); 27 Oct 2006 09:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 09:09:58 -0000
Received: (qmail 63079 invoked by uid 500); 27 Oct 2006 09:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63039 invoked by uid 500); 27 Oct 2006 09:10:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63028 invoked by uid 99); 27 Oct 2006 09:10:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:10:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of oliver.donald@snowvalley.com designates 195.172.108.14 as permitted sender)
Received: from [195.172.108.14] (HELO sv-mail.snowvalley.com) (195.172.108.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:09:50 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Scoring documents by position
Date: Fri, 27 Oct 2006 10:09:29 +0100
Message-ID: <403D5F429C79EE4199D99529BB153AD13C927E@sv-mail.snowvalley.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring documents by position
Thread-Index: Acb5p5vI8WvZJ7ovQLCye42zB40eBg==
From: "Oliver Donald" <oliver.donald@SnowValley.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm quite new to Lucene but I've managed to get it to return quite
complex results. The problem is that the results aren't bringing up the
most relevant documents first.

Is it possible to score or boost a result document based on where a
search term appears in a field? Ie, if I search in a title field for
'OpenGL', is it possible to have results like 'OpenGL Guide' to be
scored highter then 'A Guide to OpenGL' ?

Any help appreciated!
Thanks,
Oli


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 09:12:29 2006
Return-Path: <java-user-return-24245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32408 invoked from network); 27 Oct 2006 09:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 09:12:29 -0000
Received: (qmail 69302 invoked by uid 500); 27 Oct 2006 09:12:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69273 invoked by uid 500); 27 Oct 2006 09:12:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69256 invoked by uid 99); 27 Oct 2006 09:12:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:12:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 02:12:22 -0700
Received: from [192.168.128.211] ([192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k9R9Bx7i024199
	for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 12:11:59 +0300
Message-ID: <4541CD5E.30903@sirma.bg>
Date: Fri, 27 Oct 2006 12:11:58 +0300
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Putting some constraints on index optimization
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

[Note: I am reposting this question, as I posted it yesterday and yet it 
hasn't appear on the mail list]

Have the following problem with (explicitly invoked) index optimization -
it seems to always merge all existing index segments into a single huge 
segment, which is undesirable in my case.
Is there a way to force index optimization to honor the  
IndexWriter.MAX_MERGE_DOCS setting?

Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 12:49:04 2006
Return-Path: <java-user-return-24246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18390 invoked from network); 27 Oct 2006 12:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 12:49:04 -0000
Received: (qmail 29056 invoked by uid 500); 27 Oct 2006 12:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29033 invoked by uid 500); 27 Oct 2006 12:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29022 invoked by uid 99); 27 Oct 2006 12:49:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 05:49:08 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 05:48:54 -0700
Received: by nf-out-0910.google.com with SMTP id b2so306286nfe
        for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 05:48:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fl+TkGPiuyHtfk/Qg+UQbwmCNdBHnvWNCESooaMnghyWN7csgAV8Uc7lJ9+xOEzIkCfCkB/SFh1c7YgCjPZTBSm2QiEhGAfLABTBLpU9o6r9hgXGEXHFRDP23HGQp9mq5Bcufrdjafj1VU7OeR5WiF4Ot/Bj64bgx4A/yk5LvMQ=
Received: by 10.82.129.8 with SMTP id b8mr1334231bud;
        Fri, 27 Oct 2006 05:48:33 -0700 (PDT)
Received: by 10.82.162.13 with HTTP; Fri, 27 Oct 2006 05:48:32 -0700 (PDT)
Message-ID: <359a92830610270548l58950490g6028362175a729fd@mail.gmail.com>
Date: Fri, 27 Oct 2006 08:48:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <a9893f800610262330ub5b68b4p619fd68cfa8648dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41228_3029840.1161953312974"
References: <a9893f800610260356h306e0fc8j22d59e6d4928c952@mail.gmail.com>
	 <359a92830610260903q561e8d50qaa9a3dbae02c580b@mail.gmail.com>
	 <a9893f800610262330ub5b68b4p619fd68cfa8648dd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41228_3029840.1161953312974
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not all that familiar with the remotesearcher stuff. But somewhere you
must open an indexreader. So wherever that code is, just close the index
reader (and anything that uses it, like Serachables(?)) and re-open it. That
should pick up your recent changes.

Of course, now would be a fine time for someone who actually understands the
remote/parallel architecture to chime in <G>...

Erick

In the server code, all you have to do something like

On 10/27/06, Sunil Kumar PK <pksunilpk@gmail.com> wrote:
>
> Thanks Erick for the information.
>
> Actually I am using RemoteParallelMultiSearcher with 10 Search Servers, my
> crawler program freequently add new documents in to all the Search Servers
> in a distributed manner. So in this case, if I add a document in a
> particular index, I need to restart the searcher program in that server.
> right? Can I do this with a remote call, or I want to add a new method to
> Searchable interface?
>
> Thanks,
> Sunil
>
> On 10/26/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Yes, but you must close and re-open your SEARCHER. There are various
> > schemes
> > for doing this based upon now expensive it is to open a new searcher and
> > how
> > often you need to do it, but it's not built into Lucene AFAIK. It all
> > depends upon how quickly you have to see the results of your update.
> >
> > Also, be aware that your update code does not necessarily write your
> data
> > to
> > the index immediately, so you can only be assured that the data is
> > available
> > if you, say, close your index updater.
> >
> > Erick
> >
> > On 10/26/06, Sunil Kumar PK <pksunilpk@gmail.com> wrote:
> > >
> > > Hi,
> > >
> > > I have a program to create a lucene index, and another program for
> > > searching
> > > that index.
> > >
> > > The Search program create an IndexSearcher object once in its
> > constructor,
> > > and I created a method doSearch to search the index. The doSearch
> method
> > > uses the indexSearcher object to get the Hits.
> > >
> > > My Indexer program is continuously adding documents to the index.
> > >
> > > My problem is that I am not getting the matching documents in my
> search
> > > results, which are added after creating the IndexSearcher object in my
> > > Search program.
> > > Is it possible to get all the matching document in the result without
> > > restarting the Searcher program?
> > >
> > > Thanks,
> > > Sunil
> > >
> > >
> >
> >
>
>

------=_Part_41228_3029840.1161953312974--

From java-user-return-24247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 14:18:59 2006
Return-Path: <java-user-return-24247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57236 invoked from network); 27 Oct 2006 14:18:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 14:18:51 -0000
Received: (qmail 62422 invoked by uid 500); 27 Oct 2006 14:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62396 invoked by uid 500); 27 Oct 2006 14:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62385 invoked by uid 99); 27 Oct 2006 14:18:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 07:18:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.121.61.10] (HELO phizblip.com) (128.121.61.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 07:18:39 -0700
Received: from [10.0.11.108] (avaliable.octelecom.net [208.187.181.114] (may be forged))
	(authenticated bits=0)
	by phizblip.com (8.13.6.20060614/8.13.6) with ESMTP id k9REDnu0054659
	for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 08:13:49 -0600 (MDT)
Message-ID: <45421481.5000604@my-family.us>
Date: Fri, 27 Oct 2006 08:15:29 -0600
From: Shane <lucene-user@my-family.us>
User-Agent: Thunderbird 1.5.0.7 (X11/20060913)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing slows down considerably after a few million documents
References: <865c77680610262239x5d50ca61r95b7d5c165b02f0d@mail.gmail.com>
In-Reply-To: <865c77680610262239x5d50ca61r95b7d5c165b02f0d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are you doing all 7 million docs with the same writer?  The call to 
optimize will take longer as your index size increases.  So if you are 
actually indexing your docs in smaller chunks, the speed will decrease 
due to the call to optimize.

Mekin Maheshwari wrote:
> I am creating an index of about 7 Million documents.
> The total size of the index is about 2.7G once indexing is done.
>
> For the 1st 3Million documents, the indexer takes about 3 hours (can i
> get better than this? )
> - 4 seconds per thousand documents
>
> After this it slows down terribly and takes about 20 seconds for every
> thousand documents.
>
>
> It doesnt seem to be a data issue, as I tried starting to create the
> index from the 3Millionth document & I get the initial speed (1k docs
> in 3 secs)
>
> What could be going wrong?
> I have tried a few things, but cant quickly try out a lot of things as
> it takes 3 hours before the slow down happens.
>
> Below is the relevant pieces of the code::
>
> Thanks for the help,
> mekin
>
> IndexWriter writer = new IndexWriter(dirname, analyzer,doTotalIndex );
> writer.setMergeFactor(1000);
>
> while(more records to get){
> Document doc = new Document();
> //... add fields to doc
> //add boost to doc
> //
> writer.addDocument(doc);
> }
>
> writer.optimize();
> writer.close();
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 14:58:53 2006
Return-Path: <java-user-return-24248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75065 invoked from network); 27 Oct 2006 14:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 14:58:52 -0000
Received: (qmail 71555 invoked by uid 500); 27 Oct 2006 14:58:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71530 invoked by uid 500); 27 Oct 2006 14:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71519 invoked by uid 99); 27 Oct 2006 14:58:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 07:58:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 07:58:40 -0700
Received: by ug-out-1314.google.com with SMTP id k40so727220ugc
        for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 07:58:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=DSjgTHQjYXRNADoDWePY94oB0wNS3fWqdTLgfxM9Yg6THWr6jlUigK8gNpXuTu667JW42K7B3af6Drk5iDePP15cPhpdI+7RkS80kmfpHL8hy4vcT8Pdesn/6Jeh6xwmU+vW+mcp8G3SCsLH50OdbzvrvJORiuh9sZF/81IEyag=
Received: by 10.82.126.19 with SMTP id y19mr1461910buc;
        Fri, 27 Oct 2006 07:58:18 -0700 (PDT)
Received: by 10.82.149.12 with HTTP; Fri, 27 Oct 2006 07:58:18 -0700 (PDT)
Message-ID: <c68e39170610270758m7b08b93brba9138eaadd91288@mail.gmail.com>
Date: Fri, 27 Oct 2006 10:58:18 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Indexing slows down considerably after a few million documents
In-Reply-To: <865c77680610262239x5d50ca61r95b7d5c165b02f0d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <865c77680610262239x5d50ca61r95b7d5c165b02f0d@mail.gmail.com>
X-Google-Sender-Auth: 0b9653c41e5652c9
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mekin,

A couple of things:
- You might try increasing maxBufferedDocs to 1000 or so (depending on
your document size).  That controls the size of the smallest segments
and will decrease the numer of merges you end up doing.
- Try using the trunk lucene version... it has indexing enhancements
like avoiding some counting overhead when deciding if segments should
be merged.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


On 10/27/06, Mekin Maheshwari <mekin.m@gmail.com> wrote:
> I am creating an index of about 7 Million documents.
> The total size of the index is about 2.7G once indexing is done.
>
> For the 1st 3Million documents, the indexer takes about 3 hours (can i
> get better than this? )
>  - 4 seconds per thousand documents
>
> After this it slows down terribly and takes about 20 seconds for every
> thousand documents.
>
>
> It doesnt seem to be a data issue, as I tried starting to create the
> index from the 3Millionth document & I get the initial speed (1k docs
> in 3 secs)
>
> What could be going wrong?
> I have tried a few things, but cant quickly try out a lot of things as
> it takes 3 hours before the slow down happens.
>
> Below is the relevant pieces of the code::
>
> Thanks for the help,
> mekin
>
> IndexWriter writer = new IndexWriter(dirname, analyzer,doTotalIndex );
> writer.setMergeFactor(1000);
>
> while(more records to get){
>  Document doc = new Document();
> //... add fields to doc
> //add boost to doc
> //
>  writer.addDocument(doc);
> }
>
> writer.optimize();
> writer.close();

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 15:21:08 2006
Return-Path: <java-user-return-24249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88360 invoked from network); 27 Oct 2006 15:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 15:21:07 -0000
Received: (qmail 40458 invoked by uid 500); 27 Oct 2006 15:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40205 invoked by uid 500); 27 Oct 2006 15:21:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40194 invoked by uid 99); 27 Oct 2006 15:21:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 08:21:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.121.61.10] (HELO phizblip.com) (128.121.61.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 08:20:54 -0700
Received: from [10.0.11.108] (avaliable.octelecom.net [208.187.181.114] (may be forged))
	(authenticated bits=0)
	by phizblip.com (8.13.6.20060614/8.13.6) with ESMTP id k9RFKXsH077271
	for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 09:20:33 -0600 (MDT)
Message-ID: <45422425.8080702@my-family.us>
Date: Fri, 27 Oct 2006 09:22:13 -0600
From: Shane <lucene-user@my-family.us>
User-Agent: Thunderbird 1.5.0.7 (X11/20060913)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting "really" found terms
References: <20060905144637.73897.qmail@web26009.mail.ukl.yahoo.com> <453CEF5B.1060803@insideview.com>
In-Reply-To: <453CEF5B.1060803@insideview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Is your objective to avoid highlighting matching tokens which are not in 
a phrase?  I recently received the request to avoid highlighting single 
tokens which appear in the hit (vs. sequences of matched tokens).
I have just completed a partial re-write of the getBestTextFragments to 
allow this.  Now the calling object can specify the minimum number of 
tokens (default is 1 to replicate the current functionality) that have 
to be in a sequence before the tokens will be highlighted.

I haven't done a whole lot of testing as I finished the code last night, 
but if you are interested I have made the code available (along with a 
patch file) at http://my-family.us/highlighter.  To set the minimum 
sequence size, just call setMinTokenSequence(int) after creating the 
Highlighter object.

Shane

Harini Raghavan wrote:
> I have a requirement to highlight phrases. I came across a reference 
> to this alternate highlighter implementation. But I am unable to see 
> the source files for the same. Can someone please point me to it?
>
> Thanks,
> Harini
>
> mark harwood wrote:
>
>> See here for a thread reviewing the challenges and possible solutions 
>> associated with this problem:
>>   http://www.mail-archive.com/java-user@lucene.apache.org/msg02543.html
>>
>> An alternative highlighter implementation was recently contributed here:
>>   http://issues.apache.org/jira/browse/LUCENE-644?page=all
>> I've not had the time to study this alternative in detail (I hope to 
>> soon) so I can't say if it will do Spans correctly.
>> Cheers
>> Mark
>>
>>
>>
>> ----- Original Message ----
>> From: Pierre Van Ingelandt <pvaningelandt@inforama.fr>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, 5 September, 2006 2:21:56 PM
>> Subject: Highlighting "really" found terms
>>
>> Hello,
>>
>> After a search, I need to highlight only the terms that do "really"
>> correspond to the query.
>> For instance :
>> 1/ I search docs with toto and titi in the SAME sentence (using
>> SpanNotQuery(spanNearQuery({"toto","titi"},99999)),".") )
>> 2/ Then I try to highlight "toto" and "titi" found (I use the 
>> queryscorer
>> from highlight package)
>>
>> Then the problem is that it highlights ALL the titi and toto terms in 
>> the
>> documents. (even if they are not in the same sentence).
>> Is there a way to highlight only the terms really found ?
>>
>> Thanks a lot !
>>
>> Pierre
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>  
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 16:02:03 2006
Return-Path: <java-user-return-24250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2813 invoked from network); 27 Oct 2006 16:02:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 16:02:02 -0000
Received: (qmail 29921 invoked by uid 500); 27 Oct 2006 16:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29729 invoked by uid 500); 27 Oct 2006 16:02:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29718 invoked by uid 99); 27 Oct 2006 16:02:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 09:02:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 09:01:49 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id k9RG1Ris059337
	for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 18:01:27 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Scoring documents by position
Date: Fri, 27 Oct 2006 18:01:26 +0200
User-Agent: KMail/1.8.2
References: <403D5F429C79EE4199D99529BB153AD13C927E@sv-mail.snowvalley.com>
In-Reply-To: <403D5F429C79EE4199D99529BB153AD13C927E@sv-mail.snowvalley.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610271801.26683.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 27 October 2006 11:09, Oliver Donald wrote:
> Hi,
> 
> I'm quite new to Lucene but I've managed to get it to return quite
> complex results. The problem is that the results aren't bringing up the
> most relevant documents first.
> 
> Is it possible to score or boost a result document based on where a
> search term appears in a field? Ie, if I search in a title field for
> 'OpenGL', is it possible to have results like 'OpenGL Guide' to be
> scored highter then 'A Guide to OpenGL' ?

SpanFirstQuery does this, but afaik there is no query parser supporting it.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 19:29:51 2006
Return-Path: <java-user-return-24251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92606 invoked from network); 27 Oct 2006 19:29:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 19:29:51 -0000
Received: (qmail 39273 invoked by uid 500); 27 Oct 2006 19:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39241 invoked by uid 500); 27 Oct 2006 19:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39230 invoked by uid 99); 27 Oct 2006 19:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 12:29:55 -0700
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 12:29:43 -0700
Received: by ug-out-1314.google.com with SMTP id k40so808849ugc
        for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 12:29:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ZgAyry7krqC4qj5Mvts7AF2L6q30/nKFxdSs6G1Kc9zFX2WzT+WS+oZnsejYnoii8qjDtF5aBscOQf5xR5Gl8JA74vx2BQuxU5L65phFZAg7Iq+kkrwkF0golmBgyRQJxgDqnUXktMN26XSTg5yNaWDex3iip7bCdap/Izuewks=
Received: by 10.67.103.7 with SMTP id f7mr20496ugm;
        Fri, 27 Oct 2006 12:29:20 -0700 (PDT)
Received: by 10.66.239.7 with HTTP; Fri, 27 Oct 2006 12:29:20 -0700 (PDT)
Message-ID: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
Date: Fri, 27 Oct 2006 15:29:20 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org, lucene-net-user@incubator.apache.org
Subject: Announcement: Lucene powering Monster job search index (Beta)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88451_14086919.1161977360650"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88451_14086919.1161977360650
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am pleased to announce the launch of Monster's new job search Beta web
site, powered by Lucene, at: http://jobsearch.beta.monster.com (notice the
Lucene logo at the bottom of the page!).

The jobs index is implemented with Java Lucene 2.0 on 64-bit Windows (AMD
and Intel processors)

Here are some of the new features:

1. 'Improve your search by'...

The job search results page allows you to browse and 'drill down' through
the results by job category, status, type and salary. The number of matching
jobs in each facet is displayed. There will likely be many more facets to
browse by in the future.

This feature is currently implemented with a custom HitCollector and the
DocSet class from Solr.

2. 'More like this'

Find more jobs like the one you see by clicking on the 'MORE LIKE THIS'
link, which is visible when you hover the mouse over the job title.

This feature is implemented with Lucene's term vectors and the
'MoreLikeThis' contribution class. If you are in 'detailed view', the term
vectors from the job description are used. In 'brief' view, the job title's
term vectors are used.

3. 'Related Titles'

When you do a 'keywords' search, click on a 'related titles' link to filter
you search by similar job titles.

This feature is implemented via a separate Lucene.Net index.

4. Sort by 'Miles'

Find jobs close to you via zip code/radius search. In the search results
page, click on the 'Miles' column to sort the results by distance from your
zip code/radius.

This custom sorting feature is implemented via Lucene's
'SortComparatorSource' interface.

5. Search by date, salary, distance.

Find jobs posted in the last day (or 2,3, etc) or by salary range or
distance.

Numeric range search is one of Lucene's weak points (performance-wise) so we
have implemented this with a custom HitCollector and an extension to the
Lucene index files that stores the numeric field values for all documents.

It is important to point out that this has all been implemented with the
stock Lucene 2.0 library. No code changes were made to the Lucene core.

If you have any feedback regarding the UI, please use the link on the web
page ("send us your feedback"). You can hit me with any other
questions/comments.

Peter

------=_Part_88451_14086919.1161977360650--

From java-user-return-24252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 19:31:28 2006
Return-Path: <java-user-return-24252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93315 invoked from network); 27 Oct 2006 19:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 19:31:27 -0000
Received: (qmail 45493 invoked by uid 500); 27 Oct 2006 19:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45455 invoked by uid 500); 27 Oct 2006 19:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45444 invoked by uid 99); 27 Oct 2006 19:31:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 12:31:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 12:31:16 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 06A325B770; Fri, 27 Oct 2006 12:30:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F185E7F403
	for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 12:30:55 -0700 (PDT)
Date: Fri, 27 Oct 2006 12:30:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Scoring documents by position
In-Reply-To: <200610271801.26683.paul.elschot@xs4all.nl>
Message-ID: <Pine.LNX.4.58.0610271229280.25891@hal.rescomp.berkeley.edu>
References: <403D5F429C79EE4199D99529BB153AD13C927E@sv-mail.snowvalley.com>
 <200610271801.26683.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > 'OpenGL', is it possible to have results like 'OpenGL Guide' to be
: > scored highter then 'A Guide to OpenGL' ?
:
: SpanFirstQuery does this, but afaik there is no query parser supporting it.

if howeveryou *allways* want queries to work this way, it would be pretty
straight foward to subclass QueryParser so that it's current uses of
TermQuery are replaces with SpanFirstQuery.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 20:09:49 2006
Return-Path: <java-user-return-24253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4546 invoked from network); 27 Oct 2006 20:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 20:09:49 -0000
Received: (qmail 17895 invoked by uid 500); 27 Oct 2006 20:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17469 invoked by uid 500); 27 Oct 2006 20:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17457 invoked by uid 99); 27 Oct 2006 20:09:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:09:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:09:40 -0700
Received: by nf-out-0910.google.com with SMTP id b2so412036nfe
        for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 13:09:17 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sWuu+IvG6py2zm/De2wK+JYAb/RLT8fSD+oIeII+DploWG/6NBzQd+KCoiA75NyJIbq25FDf6wqrRt1+QyekItH6fWGiH+Nvys9ununily7cueRQ/YnQAWATpy9xi92C+NFhG3jnFiJEMB4hiwdojpZ11bDPy9CHGgZ6opD2n9M=
Received: by 10.82.142.9 with SMTP id p9mr12629bud;
        Fri, 27 Oct 2006 13:09:17 -0700 (PDT)
Received: by 10.82.131.8 with HTTP; Fri, 27 Oct 2006 13:09:16 -0700 (PDT)
Message-ID: <6e3ae6310610271309o5df7d073v120781e0b0a8d293@mail.gmail.com>
Date: Fri, 27 Oct 2006 13:09:16 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Peter,

Really great job!

I am interested to know how you implemented "4. Sort by 'Miles'". For
example, if starting from a zip code, how to match items within 20
miles?

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 10/27/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> I am pleased to announce the launch of Monster's new job search Beta web
> site, powered by Lucene, at: http://jobsearch.beta.monster.com (notice the
> Lucene logo at the bottom of the page!).
>
> The jobs index is implemented with Java Lucene 2.0 on 64-bit Windows (AMD
> and Intel processors)
>
> Here are some of the new features:
>
> 1. 'Improve your search by'...
>
> The job search results page allows you to browse and 'drill down' through
> the results by job category, status, type and salary. The number of matching
> jobs in each facet is displayed. There will likely be many more facets to
> browse by in the future.
>
> This feature is currently implemented with a custom HitCollector and the
> DocSet class from Solr.
>
> 2. 'More like this'
>
> Find more jobs like the one you see by clicking on the 'MORE LIKE THIS'
> link, which is visible when you hover the mouse over the job title.
>
> This feature is implemented with Lucene's term vectors and the
> 'MoreLikeThis' contribution class. If you are in 'detailed view', the term
> vectors from the job description are used. In 'brief' view, the job title's
> term vectors are used.
>
> 3. 'Related Titles'
>
> When you do a 'keywords' search, click on a 'related titles' link to filter
> you search by similar job titles.
>
> This feature is implemented via a separate Lucene.Net index.
>
> 4. Sort by 'Miles'
>
> Find jobs close to you via zip code/radius search. In the search results
> page, click on the 'Miles' column to sort the results by distance from your
> zip code/radius.
>
> This custom sorting feature is implemented via Lucene's
> 'SortComparatorSource' interface.
>
> 5. Search by date, salary, distance.
>
> Find jobs posted in the last day (or 2,3, etc) or by salary range or
> distance.
>
> Numeric range search is one of Lucene's weak points (performance-wise) so we
> have implemented this with a custom HitCollector and an extension to the
> Lucene index files that stores the numeric field values for all documents.
>
> It is important to point out that this has all been implemented with the
> stock Lucene 2.0 library. No code changes were made to the Lucene core.
>
> If you have any feedback regarding the UI, please use the link on the web
> page ("send us your feedback"). You can hit me with any other
> questions/comments.
>
> Peter
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 20:51:07 2006
Return-Path: <java-user-return-24254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20333 invoked from network); 27 Oct 2006 20:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 20:51:07 -0000
Received: (qmail 9437 invoked by uid 500); 27 Oct 2006 20:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9411 invoked by uid 500); 27 Oct 2006 20:51:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9400 invoked by uid 99); 27 Oct 2006 20:51:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:51:10 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 13:50:58 -0700
Received: by ug-out-1314.google.com with SMTP id k40so828844ugc
        for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 13:50:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=erXHsRc4VIpiXmFoFCEM3NLF3J9qu/saNzxLMtCi8yVLO5bzSSPT4DM6W4xQMuEFMKiWLbxTlVVDSOaq9NKFPXVgJS1h/ajhR4SNy3Zl/qqsM0T+ghhKjQQ/y0US9aS4FMtswfltJmkf0nUeNt/RJ0Elz6RFuEt+xJOp0RmLt+w=
Received: by 10.66.222.9 with SMTP id u9mr158014ugg;
        Fri, 27 Oct 2006 13:50:24 -0700 (PDT)
Received: by 10.66.239.7 with HTTP; Fri, 27 Oct 2006 13:50:20 -0700 (PDT)
Message-ID: <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
Date: Fri, 27 Oct 2006 16:50:24 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <6e3ae6310610271309o5df7d073v120781e0b0a8d293@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89631_256874.1161982224819"
References: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
	 <6e3ae6310610271309o5df7d073v120781e0b0a8d293@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89631_256874.1161982224819
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 10/27/06, Chris Lu <chris.lu@gmail.com> wrote:
>
> Hi, Peter,
>
> Really great job!


Thanks. (I'll tell the team)

I am interested to know how you implemented "4. Sort by 'Miles'". For
> example, if starting from a zip code, how to match items within 20
> miles?


I can tell you how we use Lucene to accomplish this.
At indexing time, each job's location is indexed as a special field. How you
represent the location is up to you. Each time a new index is built the
location data for all documents in the index are fetched via TermEnum and
TermDocs. This is practical because the searcher refresh is done at
predictable times. At query time, a custom SortComparatorSource is created,
using the 'reference' location (the zip/radius). The 'compare' method
performs the calculation to compare the 2 documents' location values (saved
from above) to the reference location.

I believe this can also be accomplished with Solr's FunctionQuery, but I
haven't tried that yet.

Peter

--
> Chris Lu
> -------------------------
> Instant Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> On 10/27/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > I am pleased to announce the launch of Monster's new job search Beta web
> > site, powered by Lucene, at: http://jobsearch.beta.monster.com (notice
> the
> > Lucene logo at the bottom of the page!).
> >
> > The jobs index is implemented with Java Lucene 2.0 on 64-bit Windows
> (AMD
> > and Intel processors)
> >
> > Here are some of the new features:
> >
> > 1. 'Improve your search by'...
> >
> > The job search results page allows you to browse and 'drill down'
> through
> > the results by job category, status, type and salary. The number of
> matching
> > jobs in each facet is displayed. There will likely be many more facets
> to
> > browse by in the future.
> >
> > This feature is currently implemented with a custom HitCollector and the
> > DocSet class from Solr.
> >
> > 2. 'More like this'
> >
> > Find more jobs like the one you see by clicking on the 'MORE LIKE THIS'
> > link, which is visible when you hover the mouse over the job title.
> >
> > This feature is implemented with Lucene's term vectors and the
> > 'MoreLikeThis' contribution class. If you are in 'detailed view', the
> term
> > vectors from the job description are used. In 'brief' view, the job
> title's
> > term vectors are used.
> >
> > 3. 'Related Titles'
> >
> > When you do a 'keywords' search, click on a 'related titles' link to
> filter
> > you search by similar job titles.
> >
> > This feature is implemented via a separate Lucene.Net index.
> >
> > 4. Sort by 'Miles'
> >
> > Find jobs close to you via zip code/radius search. In the search results
> > page, click on the 'Miles' column to sort the results by distance from
> your
> > zip code/radius.
> >
> > This custom sorting feature is implemented via Lucene's
> > 'SortComparatorSource' interface.
> >
> > 5. Search by date, salary, distance.
> >
> > Find jobs posted in the last day (or 2,3, etc) or by salary range or
> > distance.
> >
> > Numeric range search is one of Lucene's weak points (performance-wise)
> so we
> > have implemented this with a custom HitCollector and an extension to the
> > Lucene index files that stores the numeric field values for all
> documents.
> >
> > It is important to point out that this has all been implemented with the
> > stock Lucene 2.0 library. No code changes were made to the Lucene core.
> >
> > If you have any feedback regarding the UI, please use the link on the
> web
> > page ("send us your feedback"). You can hit me with any other
> > questions/comments.
> >
> > Peter
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_89631_256874.1161982224819--

From java-user-return-24255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Oct 27 22:08:52 2006
Return-Path: <java-user-return-24255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67703 invoked from network); 27 Oct 2006 22:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Oct 2006 22:08:51 -0000
Received: (qmail 67259 invoked by uid 500); 27 Oct 2006 22:08:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67066 invoked by uid 500); 27 Oct 2006 22:08:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67055 invoked by uid 99); 27 Oct 2006 22:08:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:08:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 15:08:41 -0700
Received: by ug-out-1314.google.com with SMTP id k40so843508ugc
        for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 15:08:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JpuAate0DISKjDMKpi+P4RF9HzRaeCvLRCwDZvkqo7jz1qCMFJSy0k6K5xOBtBBgVmY90t3XACJBe9yPHRar3V056NfWYirnVd8rgI1HJhXSblP/cCmlBuSc+89LlEnAHOU+VwwrCvBdmiZKLnsDbwkMZ6P8Hz9DTRmfEBi0eSg=
Received: by 10.78.201.8 with SMTP id y8mr262965huf;
        Fri, 27 Oct 2006 15:08:19 -0700 (PDT)
Received: by 10.78.203.10 with HTTP; Fri, 27 Oct 2006 15:08:19 -0700 (PDT)
Message-ID: <3d2ce8cb0610271508v3b751774sf44bcb181fdae5c9@mail.gmail.com>
Date: Fri, 27 Oct 2006 15:08:19 -0700
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Putting some constraints on index optimization
In-Reply-To: <4541CD5E.30903@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4541CD5E.30903@sirma.bg>
X-Virus-Checked: Checked by ClamAV on apache.org

On 10/27/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
> Have the following problem with (explicitly invoked) index optimization -
> it seems to always merge all existing index segments into a single huge
> segment, which is undesirable in my case.
> Is there a way to force index optimization to honor the
> IndexWriter.MAX_MERGE_DOCS setting?

It is unclear to me what you hope to accomplish by optimizing in this
case.  If you set MAX_MERGE_DOCS, lucene will produce a series of
segments of (approximately) that size, plus a bounded (log n) number
of additional segments, the sum of the size of which is <
MAX_MERGE_DOCS.  So at best you'd achieve one more segment merged.  I
doubt optimizing would buy you much, especially as num docs >>
MAX_MERGE_DOCS

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Oct 28 04:35:47 2006
Return-Path: <java-user-return-24256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68360 invoked from network); 28 Oct 2006 04:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Oct 2006 04:35:47 -0000
Received: (qmail 32779 invoked by uid 500); 28 Oct 2006 04:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32739 invoked by uid 500); 28 Oct 2006 04:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32728 invoked by uid 99); 28 Oct 2006 04:35:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 21:35:51 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Oct 2006 21:35:38 -0700
Received: by nf-out-0910.google.com with SMTP id b2so516357nfe
        for <java-user@lucene.apache.org>; Fri, 27 Oct 2006 21:35:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uVsA0CTnvjJ84ZIo2zRV+Cl4ebhasyAr7PJDYhO/YmyHGR444hZObTHFXzCKm6sknxoSws0uUb4TNJhZpDMWcFkHk2roZuqIJW//M87VrcpgzxRHn1BCKypCqWCw9gSV+dqhCeDBf3G4Rfk84GkTFpUrqLv9XmHBhzBLdnvgYY8=
Received: by 10.78.193.19 with SMTP id q19mr753762huf;
        Fri, 27 Oct 2006 21:35:16 -0700 (PDT)
Received: by 10.78.159.7 with HTTP; Fri, 27 Oct 2006 21:35:15 -0700 (PDT)
Message-ID: <a9893f800610272135v77ea4f93o17b633b89ed6b982@mail.gmail.com>
Date: Sat, 28 Oct 2006 10:05:16 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Problem
In-Reply-To: <359a92830610270548l58950490g6028362175a729fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51577_10345932.1162010116016"
References: <a9893f800610260356h306e0fc8j22d59e6d4928c952@mail.gmail.com>
	 <359a92830610260903q561e8d50qaa9a3dbae02c580b@mail.gmail.com>
	 <a9893f800610262330ub5b68b4p619fd68cfa8648dd@mail.gmail.com>
	 <359a92830610270548l58950490g6028362175a729fd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51577_10345932.1162010116016
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick.

On 10/27/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I'm not all that familiar with the remotesearcher stuff. But somewhere you
> must open an indexreader. So wherever that code is, just close the index
> reader (and anything that uses it, like Serachables(?)) and re-open it.
> That
> should pick up your recent changes.
>
> Of course, now would be a fine time for someone who actually understands
> the
> remote/parallel architecture to chime in <G>...
>
> Erick
>
> In the server code, all you have to do something like
>
> On 10/27/06, Sunil Kumar PK <pksunilpk@gmail.com> wrote:
> >
> > Thanks Erick for the information.
> >
> > Actually I am using RemoteParallelMultiSearcher with 10 Search Servers,
> my
> > crawler program freequently add new documents in to all the Search
> Servers
> > in a distributed manner. So in this case, if I add a document in a
> > particular index, I need to restart the searcher program in that server.
> > right? Can I do this with a remote call, or I want to add a new method
> to
> > Searchable interface?
> >
> > Thanks,
> > Sunil
> >
> > On 10/26/06, Erick Erickson <erickerickson@gmail.com> wrote:
> > >
> > > Yes, but you must close and re-open your SEARCHER. There are various
> > > schemes
> > > for doing this based upon now expensive it is to open a new searcher
> and
> > > how
> > > often you need to do it, but it's not built into Lucene AFAIK. It all
> > > depends upon how quickly you have to see the results of your update.
> > >
> > > Also, be aware that your update code does not necessarily write your
> > data
> > > to
> > > the index immediately, so you can only be assured that the data is
> > > available
> > > if you, say, close your index updater.
> > >
> > > Erick
> > >
> > > On 10/26/06, Sunil Kumar PK <pksunilpk@gmail.com> wrote:
> > > >
> > > > Hi,
> > > >
> > > > I have a program to create a lucene index, and another program for
> > > > searching
> > > > that index.
> > > >
> > > > The Search program create an IndexSearcher object once in its
> > > constructor,
> > > > and I created a method doSearch to search the index. The doSearch
> > method
> > > > uses the indexSearcher object to get the Hits.
> > > >
> > > > My Indexer program is continuously adding documents to the index.
> > > >
> > > > My problem is that I am not getting the matching documents in my
> > search
> > > > results, which are added after creating the IndexSearcher object in
> my
> > > > Search program.
> > > > Is it possible to get all the matching document in the result
> without
> > > > restarting the Searcher program?
> > > >
> > > > Thanks,
> > > > Sunil
> > > >
> > > >
> > >
> > >
> >
> >
>
>

------=_Part_51577_10345932.1162010116016--

From java-user-return-24257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 29 03:53:27 2006
Return-Path: <java-user-return-24257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72983 invoked from network); 29 Oct 2006 03:53:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2006 03:53:26 -0000
Received: (qmail 50101 invoked by uid 500); 29 Oct 2006 03:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50066 invoked by uid 500); 29 Oct 2006 03:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50055 invoked by uid 99); 29 Oct 2006 03:53:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Oct 2006 20:53:29 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Oct 2006 20:53:16 -0700
Received: (qmail 53565 invoked by uid 60001); 29 Oct 2006 03:52:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=eTjscwcrO2nMujr02PJ5M/2e+3CyxXKfSeiYGLaofupb8XtCXxbrzkmJjlYUKNTxW2/BJGdJK66WoZgN8DbBLSiiYeXrFMRgXvzDAb2yDuX5ayEIbf0iBjjtDnuV4wkNII2WH1xlacjIcDW4H2nzxCMevi9whP/12bl45EOAmmM=  ;
Message-ID: <20061029035255.53563.qmail@web50313.mail.yahoo.com>
Received: from [74.65.202.166] by web50313.mail.yahoo.com via HTTP; Sat, 28 Oct 2006 20:52:55 PDT
Date: Sat, 28 Oct 2006 20:52:55 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
To: java-user@lucene.apache.org
In-Reply-To: <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

--- Peter Keegan <peterlkeegan@gmail.com> wrote:

> On 10/27/06, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > Hi, Peter,
> >
> > Really great job!
> 
> 
> Thanks. (I'll tell the team)

If it's not a secret, can you tell us a bit more about what's behind
the search in terms of hardware, and how much pounding that hardware
takes in terms of QPS?  People always ask about this stuff.

Thanks,
Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Oct 29 09:30:55 2006
Return-Path: <java-user-return-24258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8139 invoked from network); 29 Oct 2006 09:30:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Oct 2006 09:30:55 -0000
Received: (qmail 73140 invoked by uid 500); 29 Oct 2006 09:30:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73113 invoked by uid 500); 29 Oct 2006 09:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73102 invoked by uid 99); 29 Oct 2006 09:30:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 01:30:59 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of the.mindstorm.mailinglist@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 01:30:47 -0800
Received: by nf-out-0910.google.com with SMTP id b2so813795nfe
        for <java-user@lucene.apache.org>; Sun, 29 Oct 2006 01:30:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nnkQFU2W+lybnQ6hhec3iiZ0aXerIAObpjARyBFzsoN3dGMWY7ZUK+0CHt3GkUD6o3hub7zUVxnGpyZ9EtGZs0/VLMjpkIueL05yciaXlxJSwS8ndYSJ3L53TFr6hLzJUyEQflJOXCDETU9im00mRGaxj9jSa/upZ60TVCNHI/Y=
Received: by 10.78.158.11 with SMTP id g11mr2743499hue;
        Sun, 29 Oct 2006 01:30:26 -0800 (PST)
Received: by 10.78.81.11 with HTTP; Sun, 29 Oct 2006 01:30:26 -0800 (PST)
Message-ID: <c6f400460610290130p7ef59941m539122d06f7399ab@mail.gmail.com>
Date: Sun, 29 Oct 2006 11:30:26 +0200
From: "Alexandru Popescu" <the.mindstorm.mailinglist@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <20061029035255.53563.qmail@web50313.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
	 <20061029035255.53563.qmail@web50313.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Peter it looks impressive. Congrats! A small suggestion, though, after
performing a search the filtering criteria is not displayed anywhere.
I guess it would make sense to write it in a read-only form somewhere
on the result pages:

Jobs 1-50 of 7896 matches to Jobs 1-50 of 7896 matching criteria (a
small hidden stuff showing the criteria).

./alex
--
.w( the_mindstorm )p.


On 10/29/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi,
>
> --- Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> > On 10/27/06, Chris Lu <chris.lu@gmail.com> wrote:
> > >
> > > Hi, Peter,
> > >
> > > Really great job!
> >
> >
> > Thanks. (I'll tell the team)
>
> If it's not a secret, can you tell us a bit more about what's behind
> the search in terms of hardware, and how much pounding that hardware
> takes in terms of QPS?  People always ask about this stuff.
>
> Thanks,
> Otis
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 06:11:39 2006
Return-Path: <java-user-return-24259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43223 invoked from network); 30 Oct 2006 06:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 06:11:39 -0000
Received: (qmail 36809 invoked by uid 500); 30 Oct 2006 06:11:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36768 invoked by uid 500); 30 Oct 2006 06:11:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36756 invoked by uid 99); 30 Oct 2006 06:11:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 22:11:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amit_soni@netcore.co.in designates 202.162.240.3 as permitted sender)
Received: from [202.162.240.3] (HELO lvs2.netcore.co.in) (202.162.240.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 22:11:31 -0800
Received: from uucp3.netcore.co.in (uucp3.netcore.co.in [202.162.229.13])
	by lvs2.netcore.co.in (Postfix) with ESMTP id EE7C3B9339
	for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 11:41:02 +0530 (IST)
Received: from uucp1.netcore.co.in (unknown [192.168.2.1])
	by uucp3.netcore.co.in (Postfix) with ESMTP id 52CD63B8A4
	for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 11:41:02 +0530 (IST)
Received: by uucp1.netcore.co.in (Postfix, from userid 10)
	id A7661C80A; Mon, 30 Oct 2006 11:41:02 +0530 (IST)
Received: from [192.168.70.9] (unknown [192.168.70.9])
	by ho.netcore.co.in (Postfix) with ESMTP id F2CF8834366
	for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 11:41:53 +0530 (IST)
Message-ID: <45459906.8050601@netcore.co.in>
Date: Mon, 30 Oct 2006 11:47:42 +0530
From: Amit Soni <amit_soni@netcore.co.in>
Reply-To: amit_soni@netcore.co.in
Organization: netCORE Solutions
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene search priorities
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-MailServ-MailFilter-MailScanner-Information: Please contact the ISP for more information
X-MailServ-MailFilter-MailScanner: Found to be clean
X-MailScanner-From: amit_soni@netcore.co.in
X-Virus-Checked: Checked by ClamAV on apache.org

Hi list.

I am using lucene search for one of my site search. In which i am 
fetching values from the database and then index it.

The fields which the docuement contains is:
1. hwid
2. title
3. author
4. keywords
5. synonyms

Now i want the search result should be as per the following priorities
1. title
2. keywords
3. synonyms

But right now it is in some different priorities. So if some one has and 
idean regarding this then please let me know.

Thanks,
Amit Soni

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 07:42:41 2006
Return-Path: <java-user-return-24260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63288 invoked from network); 30 Oct 2006 07:42:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 07:42:41 -0000
Received: (qmail 57858 invoked by uid 500); 30 Oct 2006 07:42:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57817 invoked by uid 500); 30 Oct 2006 07:42:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57806 invoked by uid 99); 30 Oct 2006 07:42:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 23:42:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Oct 2006 23:42:32 -0800
Received: from [192.168.128.211] ([192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id k9U7g77i001708
	for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 09:42:09 +0200
Message-ID: <4545ACCF.5000807@sirma.bg>
Date: Mon, 30 Oct 2006 09:42:07 +0200
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Putting some constraints on index optimization
References: <4541CD5E.30903@sirma.bg> <3d2ce8cb0610271508v3b751774sf44bcb181fdae5c9@mail.gmail.com>
In-Reply-To: <3d2ce8cb0610271508v3b751774sf44bcb181fdae5c9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

By optimizing (in this particular case) I seek to minimize the disk 
space used by the index files.
My index is incremental - docs get added and deleted on the fly.
There is also a user defined constraint of total index size (in terms of 
disk space).
There is another user defined constraint of max segments size which is 
approximated by IndexWriter.MAX_MERGE_DOCS
When this max index size is reached, I would like to first try optimize 
the index
which (if I am not mistaken) will remove from each segment the documents 
marked as deleted thus saving some space.
Correct or am I missing something?

Regards,
Stanislav

Mike Klaas wrote:
> On 10/27/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
>> Have the following problem with (explicitly invoked) index 
>> optimization -
>> it seems to always merge all existing index segments into a single huge
>> segment, which is undesirable in my case.
>> Is there a way to force index optimization to honor the
>> IndexWriter.MAX_MERGE_DOCS setting?
>
> It is unclear to me what you hope to accomplish by optimizing in this
> case.  If you set MAX_MERGE_DOCS, lucene will produce a series of
> segments of (approximately) that size, plus a bounded (log n) number
> of additional segments, the sum of the size of which is <
> MAX_MERGE_DOCS.  So at best you'd achieve one more segment merged.  I
> doubt optimizing would buy you much, especially as num docs >>
> MAX_MERGE_DOCS
>
> -Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 09:58:59 2006
Return-Path: <java-user-return-24261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1780 invoked from network); 30 Oct 2006 09:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 09:58:58 -0000
Received: (qmail 62634 invoked by uid 500); 30 Oct 2006 09:59:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62612 invoked by uid 500); 30 Oct 2006 09:59:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62601 invoked by uid 99); 30 Oct 2006 09:59:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 01:59:03 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of khoon.ee.gan@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 01:58:49 -0800
Received: by nf-out-0910.google.com with SMTP id b2so1133851nfe
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 01:57:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=X4nzApNqoz9elJfltpD8cek90FbmE2YYbwt2szJi2vhtDPr5JztSOusx6dGkSEIAMJT4JgsY2B10kEaz4E4rsT/J8xF3yXs6ek6IgIB5wG6RUKfTicbqxF8LsIuob2HJ2DNiZKHGefwxJYzclHtja0CpSYWh2yhcdtKpwNMECEg=
Received: by 10.82.127.15 with SMTP id z15mr367346buc;
        Mon, 30 Oct 2006 01:57:14 -0800 (PST)
Received: by 10.82.140.20 with HTTP; Mon, 30 Oct 2006 01:57:14 -0800 (PST)
Message-ID: <85c493340610300157t57ea76a3oa1695e8b3a533b23@mail.gmail.com>
Date: Mon, 30 Oct 2006 17:57:14 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing floating point number
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74060_10308342.1162202234221"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74060_10308342.1162202234221
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Newbie question. How do we index floating point number in Lucene, so that it
is sortable ? There is a built-in utility class 'NumberTools' which help
with indexing integer. Does Lucene has the same mechanism for floating point
number?

Thanks.

------=_Part_74060_10308342.1162202234221--

From java-user-return-24262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 10:39:06 2006
Return-Path: <java-user-return-24262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9391 invoked from network); 30 Oct 2006 10:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 10:39:05 -0000
Received: (qmail 15925 invoked by uid 500); 30 Oct 2006 10:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15892 invoked by uid 500); 30 Oct 2006 10:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15881 invoked by uid 99); 30 Oct 2006 10:39:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 02:39:10 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [62.151.11.161] (HELO smtp.ya.com) (62.151.11.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 02:38:56 -0800
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1GeUWm-0000yI-00
	for java-user@lucene.apache.org; Mon, 30 Oct 2006 11:38:00 +0100
Message-ID: <0b7e01c6fc0f$b3e535d0$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
Subject: How do I obtain the document id in order to delete from index?
Date: Mon, 30 Oct 2006 11:39:39 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0B7B_01C6FC18.15968B00"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0B7B_01C6FC18.15968B00
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
I've been reading Lucene documentation and I see there are two ways of =
deleting a document from an index: by id and by term.

Supose I have an index with three fields: field1, field2 and field3, and =
I want to delete all documents with field1=3Dvalue1 and field2=3Dvalue2.
I think I must use deletion by Id, but I don't know how to obtain the Id =
of the documents I want to delete.

Thanks
------=_NextPart_000_0B7B_01C6FC18.15968B00--


From java-user-return-24263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 10:44:22 2006
Return-Path: <java-user-return-24263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10482 invoked from network); 30 Oct 2006 10:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 10:44:21 -0000
Received: (qmail 25111 invoked by uid 500); 30 Oct 2006 10:44:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25080 invoked by uid 500); 30 Oct 2006 10:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25069 invoked by uid 99); 30 Oct 2006 10:44:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 02:44:26 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [62.151.11.163] (HELO smtp.ya.com) (62.151.11.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 02:44:11 -0800
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1GeUbx-0003ke-00
	for java-user@lucene.apache.org; Mon, 30 Oct 2006 11:43:21 +0100
Message-ID: <0b8b01c6fc10$738eea20$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
References: <0b7e01c6fc0f$b3e535d0$1e8e10ac@ecommerce.tspain.local>
Subject: Re: How do I obtain the document id in order to delete from index?
Date: Mon, 30 Oct 2006 11:45:01 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

I think I found it.

I must do a query an then loop through the hits to obtain the id with 
hit.id(int n).

If anyone knows any better way...

Thanks


----- Original Message ----- 
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
Sent: Monday, October 30, 2006 11:39 AM
Subject: How do I obtain the document id in order to delete from index?


Hi,
I've been reading Lucene documentation and I see there are two ways of 
deleting a document from an index: by id and by term.

Supose I have an index with three fields: field1, field2 and field3, and I 
want to delete all documents with field1=value1 and field2=value2.
I think I must use deletion by Id, but I don't know how to obtain the Id of 
the documents I want to delete.

Thanks 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 12:46:22 2006
Return-Path: <java-user-return-24264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51422 invoked from network); 30 Oct 2006 12:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 12:46:21 -0000
Received: (qmail 98335 invoked by uid 500); 30 Oct 2006 12:46:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98305 invoked by uid 500); 30 Oct 2006 12:46:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98294 invoked by uid 99); 30 Oct 2006 12:46:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:46:25 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 04:46:12 -0800
Received: by nf-out-0910.google.com with SMTP id b2so1175514nfe
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 04:45:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SQ3WhV/6F5g0aj9E71VaK+I4FvbcoiabFtH7D73C2iqx4liu2UjAECB9gjcnNIgR6Oe1UjQUWFDnNz6KoF3X6cafO2exAdiR/pfo7SFt9aNzIdrNCsfTlaaAgjDzuGCX+Pw811aggIIu6KUjK0UsntDhoQmNuto8VOThrNrD+5Y=
Received: by 10.82.114.3 with SMTP id m3mr399091buc;
        Mon, 30 Oct 2006 04:45:50 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Mon, 30 Oct 2006 04:45:50 -0800 (PST)
Message-ID: <359a92830610300445j27bc4210v68ae8033ad880889@mail.gmail.com>
Date: Mon, 30 Oct 2006 07:45:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, amit_soni@netcore.co.in
Subject: Re: Lucene search priorities
In-Reply-To: <45459906.8050601@netcore.co.in>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4091_18563863.1162212350465"
References: <45459906.8050601@netcore.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4091_18563863.1162212350465
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think what you want is IndexSearcher.search(Query, Filter, Sort). Filter
may be null, and Sort is a Sort object that allows you to sort on multiple
fields at once, which I assume is what you mane by "priorities".

Read the cautions about memory usage for a Sort object though.

Best
Erick

On 10/30/06, Amit Soni <amit_soni@netcore.co.in> wrote:
>
> Hi list.
>
> I am using lucene search for one of my site search. In which i am
> fetching values from the database and then index it.
>
> The fields which the docuement contains is:
> 1. hwid
> 2. title
> 3. author
> 4. keywords
> 5. synonyms
>
> Now i want the search result should be as per the following priorities
> 1. title
> 2. keywords
> 3. synonyms
>
> But right now it is in some different priorities. So if some one has and
> idean regarding this then please let me know.
>
> Thanks,
> Amit Soni
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4091_18563863.1162212350465--

From java-user-return-24265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 14:02:43 2006
Return-Path: <java-user-return-24265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74623 invoked from network); 30 Oct 2006 14:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 14:02:42 -0000
Received: (qmail 27496 invoked by uid 500); 30 Oct 2006 14:02:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27469 invoked by uid 500); 30 Oct 2006 14:02:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27458 invoked by uid 99); 30 Oct 2006 14:02:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:02:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amit_soni@netcore.co.in designates 202.162.240.2 as permitted sender)
Received: from [202.162.240.2] (HELO lvs2.netcore.co.in) (202.162.240.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:02:27 -0800
Received: from uucp3.netcore.co.in (uucp3.netcore.co.in [202.162.229.13])
	by lvs2.netcore.co.in (Postfix) with ESMTP id 3898FB84BC
	for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 19:32:03 +0530 (IST)
Received: from uucp1.netcore.co.in (unknown [192.168.2.1])
	by uucp3.netcore.co.in (Postfix) with ESMTP
	id B91233B893; Mon, 30 Oct 2006 19:32:02 +0530 (IST)
Received: by uucp1.netcore.co.in (Postfix, from userid 10)
	id 27059C7A8; Mon, 30 Oct 2006 19:32:04 +0530 (IST)
Received: from [192.168.70.9] (unknown [192.168.70.9])
	by ho.netcore.co.in (Postfix) with ESMTP id 00B99834366;
	Mon, 30 Oct 2006 19:31:28 +0530 (IST)
Message-ID: <45460718.60605@netcore.co.in>
Date: Mon, 30 Oct 2006 19:37:20 +0530
From: Amit Soni <amit_soni@netcore.co.in>
Reply-To: amit_soni@netcore.co.in
Organization: netCORE Solutions
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Erick Erickson <erickerickson@gmail.com>
Cc: java-user@lucene.apache.org
Subject: Re: Lucene search priorities
References: <45459906.8050601@netcore.co.in> <359a92830610300445j27bc4210v68ae8033ad880889@mail.gmail.com>
In-Reply-To: <359a92830610300445j27bc4210v68ae8033ad880889@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------020104070702050900010207"
X-MailServ-MailFilter-MailScanner-Information: Please contact the ISP for more information
X-MailServ-MailFilter-MailScanner: Found to be clean
X-MailScanner-From: amit_soni@netcore.co.in
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020104070702050900010207
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Erick,

Thanks for the reply.

Actually the priorities mean when i search for example for cancer then 
in the result if get the result in order like
1. it appears in title
2. it appears in keywords
3. it appears in synonyms.

But right now with the default implementation when i search for query 
'cancer' then for say document range 1 to 10 i got 9th result which 
contains given 'cancer' query appears in synonyms field while in 10th 
result the 'cancer' query appears in keyword field . But actually i want 
10th result before 9th.

So i can do the same using Sort class. Or i can do the same with 
anything else.

I hope you understand want i want to ask.

Thanks,
Amit Soni


Erick Erickson wrote:

> I think what you want is IndexSearcher.search(Query, Filter, Sort). 
> Filter may be null, and Sort is a Sort object that allows you to sort 
> on multiple fields at once, which I assume is what you mane by 
> "priorities".
>
> Read the cautions about memory usage for a Sort object though.
>
> Best
> Erick
>
> On 10/30/06, *Amit Soni* < amit_soni@netcore.co.in 
> <mailto:amit_soni@netcore.co.in>> wrote:
>
>     Hi list.
>
>     I am using lucene search for one of my site search. In which i am
>     fetching values from the database and then index it.
>
>     The fields which the docuement contains is:
>     1. hwid
>     2. title
>     3. author
>     4. keywords
>     5. synonyms
>
>     Now i want the search result should be as per the following
>     priorities
>     1. title
>     2. keywords
>     3. synonyms
>
>     But right now it is in some different priorities. So if some one
>     has and
>     idean regarding this then please let me know.
>
>     Thanks,
>     Amit Soni
>
>     ---------------------------------------------------------------------
>     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>     <mailto:java-user-unsubscribe@lucene.apache.org>
>     For additional commands, e-mail: java-user-help@lucene.apache.org
>     <mailto:java-user-help@lucene.apache.org>
>
>


--------------020104070702050900010207--

From java-user-return-24266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 14:08:33 2006
Return-Path: <java-user-return-24266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76301 invoked from network); 30 Oct 2006 14:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 14:08:32 -0000
Received: (qmail 38119 invoked by uid 500); 30 Oct 2006 14:08:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37921 invoked by uid 500); 30 Oct 2006 14:08:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37910 invoked by uid 99); 30 Oct 2006 14:08:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:08:36 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:08:22 -0800
Received: by wx-out-0506.google.com with SMTP id s15so1316264wxc
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 06:08:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DH2sTEYuGU2/Ir/cQ7kqWT6+JrXp/J5FnfPDjltdeWWHyvoHfB5Y9weOe5xtnykzF4cmgtUntQXg13IEziKaG1iNatb09cXJAogqeCPKDR3d1Pi7NFrrlqhj82B+HTa/I7vEtmHTT8HYvycPcB/go2GVdahxy2YHX3UITpPZsl4=
Received: by 10.70.29.7 with SMTP id c7mr4964142wxc;
        Mon, 30 Oct 2006 06:08:02 -0800 (PST)
Received: by 10.70.13.9 with HTTP; Mon, 30 Oct 2006 06:08:02 -0800 (PST)
Message-ID: <48b038c60610300608g48687c91r78e1f9a4b4bf5eaf@mail.gmail.com>
Date: Mon, 30 Oct 2006 09:08:02 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org, amit_soni@netcore.co.in
Subject: Re: Lucene search priorities
In-Reply-To: <45460718.60605@netcore.co.in>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109753_6352101.1162217282141"
References: <45459906.8050601@netcore.co.in>
	 <359a92830610300445j27bc4210v68ae8033ad880889@mail.gmail.com>
	 <45460718.60605@netcore.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109753_6352101.1162217282141
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't remember the syntax right now, but how about giving a boost to
certain fields, either while indexing or while searching ?

Patrick

On 10/30/06, Amit Soni <amit_soni@netcore.co.in> wrote:
>
> Hi Erick,
>
> Thanks for the reply.
>
> Actually the priorities mean when i search for example for cancer then
> in the result if get the result in order like
> 1. it appears in title
> 2. it appears in keywords
> 3. it appears in synonyms.
>
> But right now with the default implementation when i search for query
> 'cancer' then for say document range 1 to 10 i got 9th result which
> contains given 'cancer' query appears in synonyms field while in 10th
> result the 'cancer' query appears in keyword field . But actually i want
> 10th result before 9th.
>
> So i can do the same using Sort class. Or i can do the same with
> anything else.
>
> I hope you understand want i want to ask.
>
> Thanks,
> Amit Soni
>
>
> Erick Erickson wrote:
>
> > I think what you want is IndexSearcher.search(Query, Filter, Sort).
> > Filter may be null, and Sort is a Sort object that allows you to sort
> > on multiple fields at once, which I assume is what you mane by
> > "priorities".
> >
> > Read the cautions about memory usage for a Sort object though.
> >
> > Best
> > Erick
> >
> > On 10/30/06, *Amit Soni* < amit_soni@netcore.co.in
> > <mailto:amit_soni@netcore.co.in>> wrote:
> >
> >     Hi list.
> >
> >     I am using lucene search for one of my site search. In which i am
> >     fetching values from the database and then index it.
> >
> >     The fields which the docuement contains is:
> >     1. hwid
> >     2. title
> >     3. author
> >     4. keywords
> >     5. synonyms
> >
> >     Now i want the search result should be as per the following
> >     priorities
> >     1. title
> >     2. keywords
> >     3. synonyms
> >
> >     But right now it is in some different priorities. So if some one
> >     has and
> >     idean regarding this then please let me know.
> >
> >     Thanks,
> >     Amit Soni
> >
> >
> ---------------------------------------------------------------------
> >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >     <mailto:java-user-unsubscribe@lucene.apache.org>
> >     For additional commands, e-mail: java-user-help@lucene.apache.org
> >     <mailto:java-user-help@lucene.apache.org>
> >
> >
>
>
>

------=_Part_109753_6352101.1162217282141--

From java-user-return-24267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 14:14:19 2006
Return-Path: <java-user-return-24267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77637 invoked from network); 30 Oct 2006 14:14:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 14:14:18 -0000
Received: (qmail 48370 invoked by uid 500); 30 Oct 2006 14:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48340 invoked by uid 500); 30 Oct 2006 14:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48329 invoked by uid 99); 30 Oct 2006 14:14:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:14:21 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Oct 2006 06:14:05 -0800
Received: (qmail 18836 invoked from network); 30 Oct 2006 14:10:02 -0000
Received: from unknown (HELO bhavin) (172.16.3.151)
  by mailserver with SMTP; 30 Oct 2006 14:10:02 -0000
Message-ID: <008101c6fc2f$9fd92b30$970310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <45459906.8050601@netcore.co.in> <359a92830610300445j27bc4210v68ae8033ad880889@mail.gmail.com> <45460718.60605@netcore.co.in> <48b038c60610300608g48687c91r78e1f9a4b4bf5eaf@mail.gmail.com>
Subject: Re: Lucene search priorities
Date: Mon, 30 Oct 2006 19:58:06 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi amit,
You can give boost to query at search time...
and you can boost to perticular field at index time....

- Bhavin pandya

----- Original Message ----- 
From: "Patrick Turcotte" <patrek@gmail.com>
To: <java-user@lucene.apache.org>; <amit_soni@netcore.co.in>
Sent: Monday, October 30, 2006 7:38 PM
Subject: Re: Lucene search priorities


>I don't remember the syntax right now, but how about giving a boost to
> certain fields, either while indexing or while searching ?
> 
> Patrick
> 
> On 10/30/06, Amit Soni <amit_soni@netcore.co.in> wrote:
>>
>> Hi Erick,
>>
>> Thanks for the reply.
>>
>> Actually the priorities mean when i search for example for cancer then
>> in the result if get the result in order like
>> 1. it appears in title
>> 2. it appears in keywords
>> 3. it appears in synonyms.
>>
>> But right now with the default implementation when i search for query
>> 'cancer' then for say document range 1 to 10 i got 9th result which
>> contains given 'cancer' query appears in synonyms field while in 10th
>> result the 'cancer' query appears in keyword field . But actually i want
>> 10th result before 9th.
>>
>> So i can do the same using Sort class. Or i can do the same with
>> anything else.
>>
>> I hope you understand want i want to ask.
>>
>> Thanks,
>> Amit Soni
>>
>>
>> Erick Erickson wrote:
>>
>> > I think what you want is IndexSearcher.search(Query, Filter, Sort).
>> > Filter may be null, and Sort is a Sort object that allows you to sort
>> > on multiple fields at once, which I assume is what you mane by
>> > "priorities".
>> >
>> > Read the cautions about memory usage for a Sort object though.
>> >
>> > Best
>> > Erick
>> >
>> > On 10/30/06, *Amit Soni* < amit_soni@netcore.co.in
>> > <mailto:amit_soni@netcore.co.in>> wrote:
>> >
>> >     Hi list.
>> >
>> >     I am using lucene search for one of my site search. In which i am
>> >     fetching values from the database and then index it.
>> >
>> >     The fields which the docuement contains is:
>> >     1. hwid
>> >     2. title
>> >     3. author
>> >     4. keywords
>> >     5. synonyms
>> >
>> >     Now i want the search result should be as per the following
>> >     priorities
>> >     1. title
>> >     2. keywords
>> >     3. synonyms
>> >
>> >     But right now it is in some different priorities. So if some one
>> >     has and
>> >     idean regarding this then please let me know.
>> >
>> >     Thanks,
>> >     Amit Soni
>> >
>> >
>> ---------------------------------------------------------------------
>> >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >     <mailto:java-user-unsubscribe@lucene.apache.org>
>> >     For additional commands, e-mail: java-user-help@lucene.apache.org
>> >     <mailto:java-user-help@lucene.apache.org>
>> >
>> >
>>
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 14:21:56 2006
Return-Path: <java-user-return-24268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85465 invoked from network); 30 Oct 2006 14:21:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 14:21:54 -0000
Received: (qmail 79604 invoked by uid 500); 30 Oct 2006 14:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79568 invoked by uid 500); 30 Oct 2006 14:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79557 invoked by uid 99); 30 Oct 2006 14:21:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:21:57 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:21:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1203074ugc
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 06:21:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W9fXWJbBHS/NZ0WAEFhREeQ0dc9U4GOia9uB1HEN5LhB9q47x7L9J5r83sdJ8N9WdCdzPpJqE6XNpRSQOx4ZZNWybK2Qcbpza9eaTx6zGOScQdaDSgbJq735n4bPmvNmJQnGFrMsV29nGd2FeuT17Nkpfv11E2zeEYSzzx/BDeY=
Received: by 10.67.27.3 with SMTP id e3mr4183835ugj;
        Mon, 30 Oct 2006 06:21:20 -0800 (PST)
Received: by 10.66.239.7 with HTTP; Mon, 30 Oct 2006 06:21:20 -0800 (PST)
Message-ID: <e994873a0610300621w4594cc0ct285f7fd74f632735@mail.gmail.com>
Date: Mon, 30 Oct 2006 10:21:20 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <20061029035255.53563.qmail@web50313.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_123541_7922207.1162218080855"
References: <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
	 <20061029035255.53563.qmail@web50313.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_123541_7922207.1162218080855
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Otis,

The Lucene components for this beta are running on 4 dual core AMD Opteron (
2.6GHZ) processors, for a total of 8 CPUs. It has 32GB RAM, although 16GB
would probably suffice. The query rate is currently quite low probably
because of the low visibility of the beta page. We haven't measured QPS
rates for this configuration, yet, but if you look at some of my previous
posts, you'll see some QPS data on somewhat similar hardware. I think that
actual rates will be lower, though, because the complexity of the queries,
counting, sorting, etc have increased.

Peter

On 10/28/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Hi,
>
> --- Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> > On 10/27/06, Chris Lu <chris.lu@gmail.com> wrote:
> > >
> > > Hi, Peter,
> > >
> > > Really great job!
> >
> >
> > Thanks. (I'll tell the team)
>
> If it's not a secret, can you tell us a bit more about what's behind
> the search in terms of hardware, and how much pounding that hardware
> takes in terms of QPS?  People always ask about this stuff.
>
> Thanks,
> Otis
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_123541_7922207.1162218080855--

From java-user-return-24269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 14:25:11 2006
Return-Path: <java-user-return-24269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86757 invoked from network); 30 Oct 2006 14:25:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 14:25:11 -0000
Received: (qmail 1009 invoked by uid 500); 30 Oct 2006 14:25:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 976 invoked by uid 500); 30 Oct 2006 14:25:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 965 invoked by uid 99); 30 Oct 2006 14:25:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:25:14 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 06:25:00 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1204034ugc
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 06:24:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Hu77V/LaKJJlFYx7jXOh00IPoH0cEyz+bvST+56oWVQ+HW0dxGWttHoqpgf7Fe6wpi6XH5CRPxYZxJKRpXyAKygygMzcztIsV3cSE45lmaANYCipXySnvu/Cbn/pJWvxfY8rZcqOtPaKB4Fe9DNz3gQ673NIPBtfkweBthidFno=
Received: by 10.67.21.11 with SMTP id y11mr4187433ugi;
        Mon, 30 Oct 2006 06:24:38 -0800 (PST)
Received: by 10.66.239.7 with HTTP; Mon, 30 Oct 2006 06:24:38 -0800 (PST)
Message-ID: <e994873a0610300624m52446ecbya0865a07fb6c987d@mail.gmail.com>
Date: Mon, 30 Oct 2006 10:24:38 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <c6f400460610290130p7ef59941m539122d06f7399ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_123649_22259256.1162218278266"
References: <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
	 <20061029035255.53563.qmail@web50313.mail.yahoo.com>
	 <c6f400460610290130p7ef59941m539122d06f7399ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_123649_22259256.1162218278266
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Alex,

I like your suggestion (I've found myself wondering what the last search
was, too), and I've forwarded it to the UI developer.

Thanks,
Peter


On 10/29/06, Alexandru Popescu <the.mindstorm.mailinglist@gmail.com> wrote:
>
> Peter it looks impressive. Congrats! A small suggestion, though, after
> performing a search the filtering criteria is not displayed anywhere.
> I guess it would make sense to write it in a read-only form somewhere
> on the result pages:
>
> Jobs 1-50 of 7896 matches to Jobs 1-50 of 7896 matching criteria (a
> small hidden stuff showing the criteria).
>
> ./alex
> --
> .w( the_mindstorm )p.
>
>
> On 10/29/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Hi,
> >
> > --- Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > > On 10/27/06, Chris Lu <chris.lu@gmail.com> wrote:
> > > >
> > > > Hi, Peter,
> > > >
> > > > Really great job!
> > >
> > >
> > > Thanks. (I'll tell the team)
> >
> > If it's not a secret, can you tell us a bit more about what's behind
> > the search in terms of hardware, and how much pounding that hardware
> > takes in terms of QPS?  People always ask about this stuff.
> >
> > Thanks,
> > Otis
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_123649_22259256.1162218278266--

From java-user-return-24270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 15:46:33 2006
Return-Path: <java-user-return-24270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14557 invoked from network); 30 Oct 2006 15:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 15:46:32 -0000
Received: (qmail 99113 invoked by uid 500); 30 Oct 2006 15:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99088 invoked by uid 500); 30 Oct 2006 15:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99074 invoked by uid 99); 30 Oct 2006 15:46:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 07:46:36 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.57.169.10] (HELO peabody.ximian.com) (130.57.169.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 07:46:22 -0800
Received: (qmail 32070 invoked from network); 30 Oct 2006 15:45:58 -0000
Received: from localhost (HELO posthaste.boston.ximian.com) (joe@127.0.0.1)
  by localhost with SMTP; 30 Oct 2006 15:45:58 -0000
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
From: Joe Shaw <joeshaw@novell.com>
To: java-user@lucene.apache.org
In-Reply-To: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
References: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
Content-Type: text/plain
Date: Mon, 30 Oct 2006 10:46:06 -0500
Message-Id: <1162223166.9917.4.camel@posthaste.boston.ximian.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.0 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Peter,

On Fri, 2006-10-27 at 15:29 -0400, Peter Keegan wrote:
> Numeric range search is one of Lucene's weak points (performance-wise) so we
> have implemented this with a custom HitCollector and an extension to the
> Lucene index files that stores the numeric field values for all documents.
> 
> It is important to point out that this has all been implemented with the
> stock Lucene 2.0 library. No code changes were made to the Lucene core.

Can you give some technical details on the extension to the Lucene index
files?  How did you do it without making any changes to the Lucene core?

Thanks,
Joe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 16:14:14 2006
Return-Path: <java-user-return-24271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25365 invoked from network); 30 Oct 2006 16:14:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 16:14:13 -0000
Received: (qmail 68028 invoked by uid 500); 30 Oct 2006 16:14:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68000 invoked by uid 500); 30 Oct 2006 16:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67984 invoked by uid 99); 30 Oct 2006 16:14:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:14:17 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of khoon.ee.gan@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:14:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1237674ugc
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 08:13:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tf9pS7+qiz86/8T29T8qS/Dth0NaxOdxNfwq2t/IZ7Z7RFKVMSrcKBF3B4FgsO4A8G23cOGMf0Uywu5VCbdun2ABd10X7YPyQsKQDeiWFkpRgTDYZX8xZeqoRwE2iVZ4FJPe8l3185VELrky55Mwjf1L6xcMbzIQZEEeualeKzw=
Received: by 10.82.101.3 with SMTP id y3mr655063bub;
        Mon, 30 Oct 2006 08:13:41 -0800 (PST)
Received: by 10.82.140.20 with HTTP; Mon, 30 Oct 2006 08:13:40 -0800 (PST)
Message-ID: <85c493340610300813q1e1e29a1j54e4075308916703@mail.gmail.com>
Date: Tue, 31 Oct 2006 00:13:40 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78637_7600034.1162224820997"
References: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
	 <6e3ae6310610271309o5df7d073v120781e0b0a8d293@mail.gmail.com>
	 <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78637_7600034.1162224820997
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Peter,

Congratulation on the beta launch :)

If you dont mind, I would like to ask you more on the feature "4. Sort by
Miles".

When you search by "4. Sort by Miles", I suppose the sorting by relevance
(of the search keyword) is lost? Since this is implemented using a custom
SortComparatorSource.

Also, I suppose, if FunctionQuery were used, we can make "job distance by
miles" part of the relavancy of the search results?

Could you comment or confirm my assertion ? Thanks :)


On 10/28/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> On 10/27/06, Chris Lu <chris.lu@gmail.com> wrote:
> >
> > Hi, Peter,
> >
> > Really great job!
>
>
> Thanks. (I'll tell the team)
>
> I am interested to know how you implemented "4. Sort by 'Miles'". For
> > example, if starting from a zip code, how to match items within 20
> > miles?
>
>
> I can tell you how we use Lucene to accomplish this.
> At indexing time, each job's location is indexed as a special field. How
> you
> represent the location is up to you. Each time a new index is built the
> location data for all documents in the index are fetched via TermEnum and
> TermDocs. This is practical because the searcher refresh is done at
> predictable times. At query time, a custom SortComparatorSource is
> created,
> using the 'reference' location (the zip/radius). The 'compare' method
> performs the calculation to compare the 2 documents' location values
> (saved
> from above) to the reference location.
>
> I believe this can also be accomplished with Solr's FunctionQuery, but I
> haven't tried that yet.
>
> Peter
>
> --
> > Chris Lu
> > -------------------------
> > Instant Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> > On 10/27/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > I am pleased to announce the launch of Monster's new job search Beta
> web
> > > site, powered by Lucene, at: http://jobsearch.beta.monster.com (notice
> > the
> > > Lucene logo at the bottom of the page!).
> > >
> > > The jobs index is implemented with Java Lucene 2.0 on 64-bit Windows
> > (AMD
> > > and Intel processors)
> > >
> > > Here are some of the new features:
> > >
> > > 1. 'Improve your search by'...
> > >
> > > The job search results page allows you to browse and 'drill down'
> > through
> > > the results by job category, status, type and salary. The number of
> > matching
> > > jobs in each facet is displayed. There will likely be many more facets
> > to
> > > browse by in the future.
> > >
> > > This feature is currently implemented with a custom HitCollector and
> the
> > > DocSet class from Solr.
> > >
> > > 2. 'More like this'
> > >
> > > Find more jobs like the one you see by clicking on the 'MORE LIKE
> THIS'
> > > link, which is visible when you hover the mouse over the job title.
> > >
> > > This feature is implemented with Lucene's term vectors and the
> > > 'MoreLikeThis' contribution class. If you are in 'detailed view', the
> > term
> > > vectors from the job description are used. In 'brief' view, the job
> > title's
> > > term vectors are used.
> > >
> > > 3. 'Related Titles'
> > >
> > > When you do a 'keywords' search, click on a 'related titles' link to
> > filter
> > > you search by similar job titles.
> > >
> > > This feature is implemented via a separate Lucene.Net index.
> > >
> > > 4. Sort by 'Miles'
> > >
> > > Find jobs close to you via zip code/radius search. In the search
> results
> > > page, click on the 'Miles' column to sort the results by distance from
> > your
> > > zip code/radius.
> > >
> > > This custom sorting feature is implemented via Lucene's
> > > 'SortComparatorSource' interface.
> > >
> > > 5. Search by date, salary, distance.
> > >
> > > Find jobs posted in the last day (or 2,3, etc) or by salary range or
> > > distance.
> > >
> > > Numeric range search is one of Lucene's weak points (performance-wise)
> > so we
> > > have implemented this with a custom HitCollector and an extension to
> the
> > > Lucene index files that stores the numeric field values for all
> > documents.
> > >
> > > It is important to point out that this has all been implemented with
> the
> > > stock Lucene 2.0 library. No code changes were made to the Lucene
> core.
> > >
> > > If you have any feedback regarding the UI, please use the link on the
> > web
> > > page ("send us your feedback"). You can hit me with any other
> > > questions/comments.
> > >
> > > Peter
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_78637_7600034.1162224820997--

From java-user-return-24272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 16:31:39 2006
Return-Path: <java-user-return-24272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28864 invoked from network); 30 Oct 2006 16:31:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 16:31:38 -0000
Received: (qmail 12999 invoked by uid 500); 30 Oct 2006 16:31:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12978 invoked by uid 500); 30 Oct 2006 16:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12967 invoked by uid 99); 30 Oct 2006 16:31:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:31:42 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:31:28 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1243434ugc
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 08:31:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EyY1nJKdrd8CMkOdtUN/NRDuOk8vIz7tMsQULu1mnCDnIfj0GZMN+Jv6lnmZjKDWU2w4JqchVXubBwcvM0IT/pPx9ToDnMoMw+If2dOWYKZ1aq+IUuPT9BQHvDP9wr2v+8HeXkvzFHJSxExZdaq4igss0kba+9YHiN4ouurs394=
Received: by 10.67.97.7 with SMTP id z7mr4417701ugl;
        Mon, 30 Oct 2006 08:31:05 -0800 (PST)
Received: by 10.66.239.7 with HTTP; Mon, 30 Oct 2006 08:31:05 -0800 (PST)
Message-ID: <e994873a0610300831p1229ad0k69de63cba052bd22@mail.gmail.com>
Date: Mon, 30 Oct 2006 12:31:05 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <1162223166.9917.4.camel@posthaste.boston.ximian.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_126523_20385277.1162225865503"
References: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
	 <1162223166.9917.4.camel@posthaste.boston.ximian.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_126523_20385277.1162225865503
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Joe,

Fields with numeric values are stored in a separate file as binary values in
an internal format. Lucene is unaware of this file and unaware of the range
expression in the query. The range expression is parsed outside of Lucene
and used in a custom HitCollector to filter out documents that aren't in the
requested range(s). A goal was to do this without having to modify Lucene.
Our scheme is pretty efficient, but not very general purpose in its current
form, though.

Peter


On 10/30/06, Joe Shaw <joeshaw@novell.com> wrote:
>
> Hi Peter,
>
> On Fri, 2006-10-27 at 15:29 -0400, Peter Keegan wrote:
> > Numeric range search is one of Lucene's weak points (performance-wise)
> so we
> > have implemented this with a custom HitCollector and an extension to the
> > Lucene index files that stores the numeric field values for all
> documents.
> >
> > It is important to point out that this has all been implemented with the
> > stock Lucene 2.0 library. No code changes were made to the Lucene core.
>
> Can you give some technical details on the extension to the Lucene index
> files?  How did you do it without making any changes to the Lucene core?
>
> Thanks,
> Joe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_126523_20385277.1162225865503--

From java-user-return-24273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 16:35:42 2006
Return-Path: <java-user-return-24273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30149 invoked from network); 30 Oct 2006 16:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 16:35:41 -0000
Received: (qmail 27258 invoked by uid 500); 30 Oct 2006 16:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27233 invoked by uid 500); 30 Oct 2006 16:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27219 invoked by uid 99); 30 Oct 2006 16:35:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:35:45 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 08:35:31 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1244741ugc
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 08:35:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YXqTGDe1aqHf46hrvHGbPYycTUUT8svLlsAjifhX/MLsvG8BHox1xfUyXS/E+u8SHu2j2lxKIMXG9XE4PduaBsa7zdzAcEn8zvdIUlvxJ61z8CQmcTgxFObhnYch3BmPL3YlEC+VMKO6YWylTfjvA+q6qBZnDPScb8RgvhwANLs=
Received: by 10.66.216.6 with SMTP id o6mr4459921ugg;
        Mon, 30 Oct 2006 08:35:08 -0800 (PST)
Received: by 10.66.239.7 with HTTP; Mon, 30 Oct 2006 08:35:08 -0800 (PST)
Message-ID: <e994873a0610300835y6d43d274l679326a1a3da21f0@mail.gmail.com>
Date: Mon, 30 Oct 2006 12:35:08 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <85c493340610300813q1e1e29a1j54e4075308916703@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_126631_29236906.1162226108468"
References: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
	 <6e3ae6310610271309o5df7d073v120781e0b0a8d293@mail.gmail.com>
	 <e994873a0610271350x3e2eca84g2c0abfd66b187fc0@mail.gmail.com>
	 <85c493340610300813q1e1e29a1j54e4075308916703@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_126631_29236906.1162226108468
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

KEGan,

>When you search by "4. Sort by Miles", I suppose the sorting by relevance
>(of the search keyword) is lost? Since this is implemented using a custom
>SortComparatorSource.

Sorting by miles becomes the primary sort key, score and date become
secondary sort fields (in the case of ties).

>Also, I suppose, if FunctionQuery were used, we can make "job distance by
>miles" part of the relavancy of the search results?

Yes, this is my understanding of the power of FunctionQuery.

Peter

On 10/30/06, KEGan <khoon.ee.gan@gmail.com> wrote:
>
> Peter,
>
> Congratulation on the beta launch :)
>
> If you dont mind, I would like to ask you more on the feature "4. Sort by
> Miles".
>
> When you search by "4. Sort by Miles", I suppose the sorting by relevance
> (of the search keyword) is lost? Since this is implemented using a custom
> SortComparatorSource.
>
> Also, I suppose, if FunctionQuery were used, we can make "job distance by
> miles" part of the relavancy of the search results?
>
> Could you comment or confirm my assertion ? Thanks :)
>
>
> On 10/28/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > On 10/27/06, Chris Lu <chris.lu@gmail.com> wrote:
> > >
> > > Hi, Peter,
> > >
> > > Really great job!
> >
> >
> > Thanks. (I'll tell the team)
> >
> > I am interested to know how you implemented "4. Sort by 'Miles'". For
> > > example, if starting from a zip code, how to match items within 20
> > > miles?
> >
> >
> > I can tell you how we use Lucene to accomplish this.
> > At indexing time, each job's location is indexed as a special field. How
> > you
> > represent the location is up to you. Each time a new index is built the
> > location data for all documents in the index are fetched via TermEnum
> and
> > TermDocs. This is practical because the searcher refresh is done at
> > predictable times. At query time, a custom SortComparatorSource is
> > created,
> > using the 'reference' location (the zip/radius). The 'compare' method
> > performs the calculation to compare the 2 documents' location values
> > (saved
> > from above) to the reference location.
> >
> > I believe this can also be accomplished with Solr's FunctionQuery, but I
> > haven't tried that yet.
> >
> > Peter
> >
> > --
> > > Chris Lu
> > > -------------------------
> > > Instant Full-Text Search On Any Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > >
> > > On 10/27/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > > I am pleased to announce the launch of Monster's new job search Beta
> > web
> > > > site, powered by Lucene, at: http://jobsearch.beta.monster.com(notice
> > > the
> > > > Lucene logo at the bottom of the page!).
> > > >
> > > > The jobs index is implemented with Java Lucene 2.0 on 64-bit Windows
> > > (AMD
> > > > and Intel processors)
> > > >
> > > > Here are some of the new features:
> > > >
> > > > 1. 'Improve your search by'...
> > > >
> > > > The job search results page allows you to browse and 'drill down'
> > > through
> > > > the results by job category, status, type and salary. The number of
> > > matching
> > > > jobs in each facet is displayed. There will likely be many more
> facets
> > > to
> > > > browse by in the future.
> > > >
> > > > This feature is currently implemented with a custom HitCollector and
> > the
> > > > DocSet class from Solr.
> > > >
> > > > 2. 'More like this'
> > > >
> > > > Find more jobs like the one you see by clicking on the 'MORE LIKE
> > THIS'
> > > > link, which is visible when you hover the mouse over the job title.
> > > >
> > > > This feature is implemented with Lucene's term vectors and the
> > > > 'MoreLikeThis' contribution class. If you are in 'detailed view',
> the
> > > term
> > > > vectors from the job description are used. In 'brief' view, the job
> > > title's
> > > > term vectors are used.
> > > >
> > > > 3. 'Related Titles'
> > > >
> > > > When you do a 'keywords' search, click on a 'related titles' link to
> > > filter
> > > > you search by similar job titles.
> > > >
> > > > This feature is implemented via a separate Lucene.Net index.
> > > >
> > > > 4. Sort by 'Miles'
> > > >
> > > > Find jobs close to you via zip code/radius search. In the search
> > results
> > > > page, click on the 'Miles' column to sort the results by distance
> from
> > > your
> > > > zip code/radius.
> > > >
> > > > This custom sorting feature is implemented via Lucene's
> > > > 'SortComparatorSource' interface.
> > > >
> > > > 5. Search by date, salary, distance.
> > > >
> > > > Find jobs posted in the last day (or 2,3, etc) or by salary range or
> > > > distance.
> > > >
> > > > Numeric range search is one of Lucene's weak points
> (performance-wise)
> > > so we
> > > > have implemented this with a custom HitCollector and an extension to
> > the
> > > > Lucene index files that stores the numeric field values for all
> > > documents.
> > > >
> > > > It is important to point out that this has all been implemented with
> > the
> > > > stock Lucene 2.0 library. No code changes were made to the Lucene
> > core.
> > > >
> > > > If you have any feedback regarding the UI, please use the link on
> the
> > > web
> > > > page ("send us your feedback"). You can hit me with any other
> > > > questions/comments.
> > > >
> > > > Peter
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
>

------=_Part_126631_29236906.1162226108468--

From java-user-return-24274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Oct 30 17:55:53 2006
Return-Path: <java-user-return-24274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53512 invoked from network); 30 Oct 2006 17:55:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Oct 2006 17:55:52 -0000
Received: (qmail 23356 invoked by uid 500); 30 Oct 2006 17:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23333 invoked by uid 500); 30 Oct 2006 17:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23313 invoked by uid 99); 30 Oct 2006 17:55:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 09:55:51 -0800
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 09:55:39 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1271222ugc
        for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 09:55:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Q77CFCS6+XRnWDn6IQNWPWLqLf3I7FMhglTXdrkCu4mnkY1hoORSpPTX3CsdRI6+sZmYWr8miiLvV0ByNL36EA5pjwS5HTE1pXKSjZH6+dPWsY3XCcfNxyJErkwPyWDBqoFnAo5epqCMq/YRJQKPh9zdeSx+Ku/ZEPNSdg519hw=
Received: by 10.82.123.16 with SMTP id v16mr801645buc;
        Mon, 30 Oct 2006 09:55:17 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 30 Oct 2006 09:55:17 -0800 (PST)
Message-ID: <c68e39170610300955h33dc0156t59054e5970a95b64@mail.gmail.com>
Date: Mon, 30 Oct 2006 12:55:17 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Indexing floating point number
In-Reply-To: <85c493340610300157t57ea76a3oa1695e8b3a533b23@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85c493340610300157t57ea76a3oa1695e8b3a533b23@mail.gmail.com>
X-Google-Sender-Auth: cd865a6570ccf0aa
X-Virus-Checked: Checked by ClamAV on apache.org

On 10/30/06, KEGan <khoon.ee.gan@gmail.com> wrote:
> Newbie question. How do we index floating point number in Lucene, so that it
> is sortable ? There is a built-in utility class 'NumberTools' which help
> with indexing integer. Does Lucene has the same mechanism for floating point
> number?

You can look at NumberUtils in Solr, it has conversions for
int/long/float/double that make strings that sort correctly (for range
queries as well as sorts).  If you use Solr, these transformations are
automatically applied during indexing and querying depending on the
declared type of the field.

http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/util/NumberUtils.java?view=markup

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 01:33:51 2006
Return-Path: <java-user-return-24275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89259 invoked from network); 31 Oct 2006 01:33:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 01:33:50 -0000
Received: (qmail 91584 invoked by uid 500); 31 Oct 2006 01:33:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91540 invoked by uid 500); 31 Oct 2006 01:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91523 invoked by uid 99); 31 Oct 2006 01:33:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:33:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.39.31.158] (HELO zeus.atlassian.com) (64.39.31.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 17:33:37 -0800
Received: from [192.168.0.160] ([203.14.171.190])
	(authenticated (0 bits))
	by zeus.atlassian.com (8.12.11.20060308/8.11.6) with ESMTP id k9V1XEMn007262
	for <java-user@lucene.apache.org>; Mon, 30 Oct 2006 19:33:15 -0600
Message-ID: <4546A7D9.2070203@atlassian.com>
Date: Tue, 31 Oct 2006 12:33:13 +1100
From: Jed Wesley-Smith <jed@atlassian.com>
User-Agent: Thunderbird 1.5.0.7 (X11/20060918)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: FSDirectory.close()
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

All,

Just a quick question regarding the need to call Directory.close() 
(actually for an FSDirectory) and whether it is really necessary. As far 
as I can tell, the only implication of this is that the refCount is not 
decremented and therefore the FSDirectory will persist for the life of 
the VM. This is not a problem for us as it never changes for us, and so 
will stick around anyway.

The way we use the directory is to use it for creating IndexReaders and 
IndexWriters that are closed directly after use (apart from the Reader 
used for a Searcher which is closed only when mutative operations are 
made to the index).

At the moment, Directory.close() is NEVER called, not even during 
application shutdown. This doesn't appear to have any problems, but we 
are just wondering if anybody has seen any problems with not calling it.

-- 
cheers,
- jed.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 05:09:11 2006
Return-Path: <java-user-return-24276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47171 invoked from network); 31 Oct 2006 05:09:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 05:09:10 -0000
Received: (qmail 36868 invoked by uid 500); 31 Oct 2006 05:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36675 invoked by uid 500); 31 Oct 2006 05:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36664 invoked by uid 99); 31 Oct 2006 05:09:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 21:09:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of amit_soni@netcore.co.in designates 202.162.240.2 as permitted sender)
Received: from [202.162.240.2] (HELO lvs2.netcore.co.in) (202.162.240.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Oct 2006 21:09:01 -0800
Received: from uucp3.netcore.co.in (uucp3.netcore.co.in [202.162.229.13])
	by lvs2.netcore.co.in (Postfix) with ESMTP id F27CEB7BEE;
	Tue, 31 Oct 2006 10:38:35 +0530 (IST)
Received: from uucp1.netcore.co.in (unknown [192.168.2.1])
	by uucp3.netcore.co.in (Postfix) with ESMTP
	id 9E58E3B89C; Tue, 31 Oct 2006 10:38:34 +0530 (IST)
Received: by uucp1.netcore.co.in (Postfix, from userid 10)
	id 2BE55C7C9; Tue, 31 Oct 2006 10:38:35 +0530 (IST)
Received: from [192.168.70.9] (unknown [192.168.70.9])
	by ho.netcore.co.in (Postfix) with ESMTP id CD12783437A;
	Tue, 31 Oct 2006 10:39:03 +0530 (IST)
Message-ID: <4546DBD2.3070005@netcore.co.in>
Date: Tue, 31 Oct 2006 10:44:58 +0530
From: Amit Soni <amit_soni@netcore.co.in>
Reply-To: amit_soni@netcore.co.in
Organization: netCORE Solutions
User-Agent: Mozilla Thunderbird 1.0.7 (X11/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org, bhavinp@rediff.co.in
Subject: Re: Lucene search priorities
References: <45459906.8050601@netcore.co.in> <359a92830610300445j27bc4210v68ae8033ad880889@mail.gmail.com> <45460718.60605@netcore.co.in> <48b038c60610300608g48687c91r78e1f9a4b4bf5eaf@mail.gmail.com> <008101c6fc2f$9fd92b30$970310ac@bhavin>
In-Reply-To: <008101c6fc2f$9fd92b30$970310ac@bhavin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-MailServ-MailFilter-MailScanner-Information: Please contact the ISP for more information
X-MailServ-MailFilter-MailScanner: Found to be clean
X-MailScanner-From: amit_soni@netcore.co.in
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bhavin,

Thanks a lot for your reply. But i am little confuse this time. Do i 
have to give boost and index and search both or either index or search?
Also can you give some docs which has something on how to use boost on 
particular fields.

Thanks,
Amit Soni

Bhavin Pandya wrote:

> Hi amit,
> You can give boost to query at search time...
> and you can boost to perticular field at index time....
>
> - Bhavin pandya
>
> ----- Original Message ----- From: "Patrick Turcotte" <patrek@gmail.com>
> To: <java-user@lucene.apache.org>; <amit_soni@netcore.co.in>
> Sent: Monday, October 30, 2006 7:38 PM
> Subject: Re: Lucene search priorities
>
>
>> I don't remember the syntax right now, but how about giving a boost to
>> certain fields, either while indexing or while searching ?
>>
>> Patrick
>>
>> On 10/30/06, Amit Soni <amit_soni@netcore.co.in> wrote:
>>
>>>
>>> Hi Erick,
>>>
>>> Thanks for the reply.
>>>
>>> Actually the priorities mean when i search for example for cancer then
>>> in the result if get the result in order like
>>> 1. it appears in title
>>> 2. it appears in keywords
>>> 3. it appears in synonyms.
>>>
>>> But right now with the default implementation when i search for query
>>> 'cancer' then for say document range 1 to 10 i got 9th result which
>>> contains given 'cancer' query appears in synonyms field while in 10th
>>> result the 'cancer' query appears in keyword field . But actually i 
>>> want
>>> 10th result before 9th.
>>>
>>> So i can do the same using Sort class. Or i can do the same with
>>> anything else.
>>>
>>> I hope you understand want i want to ask.
>>>
>>> Thanks,
>>> Amit Soni
>>>
>>>
>>> Erick Erickson wrote:
>>>
>>> > I think what you want is IndexSearcher.search(Query, Filter, Sort).
>>> > Filter may be null, and Sort is a Sort object that allows you to sort
>>> > on multiple fields at once, which I assume is what you mane by
>>> > "priorities".
>>> >
>>> > Read the cautions about memory usage for a Sort object though.
>>> >
>>> > Best
>>> > Erick
>>> >
>>> > On 10/30/06, *Amit Soni* < amit_soni@netcore.co.in
>>> > <mailto:amit_soni@netcore.co.in>> wrote:
>>> >
>>> >     Hi list.
>>> >
>>> >     I am using lucene search for one of my site search. In which i am
>>> >     fetching values from the database and then index it.
>>> >
>>> >     The fields which the docuement contains is:
>>> >     1. hwid
>>> >     2. title
>>> >     3. author
>>> >     4. keywords
>>> >     5. synonyms
>>> >
>>> >     Now i want the search result should be as per the following
>>> >     priorities
>>> >     1. title
>>> >     2. keywords
>>> >     3. synonyms
>>> >
>>> >     But right now it is in some different priorities. So if some one
>>> >     has and
>>> >     idean regarding this then please let me know.
>>> >
>>> >     Thanks,
>>> >     Amit Soni
>>> >
>>> >
>>> ---------------------------------------------------------------------
>>> >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >     <mailto:java-user-unsubscribe@lucene.apache.org>
>>> >     For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >     <mailto:java-user-help@lucene.apache.org>
>>> >
>>> >
>>>
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 12:03:41 2006
Return-Path: <java-user-return-24277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64017 invoked from network); 31 Oct 2006 12:03:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 12:03:40 -0000
Received: (qmail 45695 invoked by uid 500); 31 Oct 2006 12:03:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45623 invoked by uid 500); 31 Oct 2006 12:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45592 invoked by uid 99); 31 Oct 2006 12:03:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 04:03:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.36.14.183] (HELO server.honek.org) (80.36.14.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 04:03:25 -0800
Received: from localhost (localhost [127.0.0.1])
	by server.honek.org (ESMTP Sendmail 8.9.11 on SuSE Linux 7.1 (i386)) with ESMTP id ACC3F5DF41
	for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 12:57:54 +0100 (CET)
Received: from server.honek.org ([127.0.0.1])
 by localhost (server.honek.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 32634-06 for <java-user@lucene.apache.org>;
 Tue, 31 Oct 2006 12:57:50 +0100 (CET)
Received: from www.lpis.com (localhost [127.0.0.1])
	by server.honek.org (ESMTP Sendmail 8.9.11 on SuSE Linux 7.1 (i386)) with ESMTP id 260815DF40
	for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 12:57:50 +0100 (CET)
Received: from 194.30.80.57
        (SquirrelMail authenticated user miren)
        by www.lpis.com with HTTP;
        Tue, 31 Oct 2006 12:57:50 +0100 (CET)
Message-ID: <6999.194.30.80.57.1162295870.squirrel@www.lpis.com>
Date: Tue, 31 Oct 2006 12:57:50 +0100 (CET)
Subject: My frirst problem using lucene
From: "Miren" <miren@tinieblas.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.5
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Scanned: amavisd-new at honek.org
X-Virus-Checked: Checked by ClamAV on apache.org

hello
i am trying to use lucene annd i am my fisrt problem.
i have install the demo example into the tomcat and when i try to load
osne search, into the results.jsp page appears this error. can you help
me?
thanks.

org.apache.jasper.JasperException: No se puede compilar la clase para JSP

Ha tenido lugar un error en la lnea: 60 en el archivo jsp: /results.jsp
Error de servlet generado:
C:\Tomcat
5.0\work\Catalina\localhost\luceneweb\org\apache\jsp\results_jsp.java:169:
parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser
cannot be applied to
(java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
                        query = QueryParser.parse(queryString, "contents",
analyzer); //parse the
                                           ^


Ha tenido lugar un error en la lnea: 60 en el archivo jsp: /results.jsp
Error de servlet generado:
Note: C:\Tomcat
5.0\work\Catalina\localhost\luceneweb\org\apache\jsp\results_jsp.java uses
or overrides a deprecated API.
Note: Recompile with -deprecation for details.
1 error



	org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:84)
	org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:332)
	org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:412)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:451)
	org.apache.jasper.compiler.Compiler.compile(Compiler.java:439)
	org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:511)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:295)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:802)


nota La traza completa de la causa de este error se encuentra en los
archivos de diario de Apache Tomcat/5.0.28.


--------------------------------------------------------------------------------

Apache Tomcat/5.0.28



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 13:04:02 2006
Return-Path: <java-user-return-24278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82064 invoked from network); 31 Oct 2006 13:04:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 13:04:00 -0000
Received: (qmail 59626 invoked by uid 500); 31 Oct 2006 13:04:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59586 invoked by uid 500); 31 Oct 2006 13:04:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59551 invoked by uid 99); 31 Oct 2006 13:04:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 05:04:02 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 05:03:48 -0800
Received: by nf-out-0910.google.com with SMTP id b2so250589nfe
        for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 05:03:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=We+++y+THwpGXu6ldDsoPLSqY72Yjt4uncQDL7IhybSR90Jh6Hma9M/UdsQojqpiHNXUhDQFGWGuivLYIW0G2r3UBGv9/t4m0iAZqOQxKqEdImAmrITkSUydrqooZEyArWbh8MZ8Cg2dfT7h/BwqiTi0ACwQDrF2ttWUYPe0qRc=
Received: by 10.82.105.13 with SMTP id d13mr1034010buc;
        Tue, 31 Oct 2006 05:03:23 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Tue, 31 Oct 2006 05:03:18 -0800 (PST)
Message-ID: <359a92830610310503p70abf149od369b0832b221d77@mail.gmail.com>
Date: Tue, 31 Oct 2006 08:03:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, amit_soni@netcore.co.in
Subject: Re: Lucene search priorities
In-Reply-To: <4546DBD2.3070005@netcore.co.in>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3610_2965849.1162299798487"
References: <45459906.8050601@netcore.co.in>
	 <359a92830610300445j27bc4210v68ae8033ad880889@mail.gmail.com>
	 <45460718.60605@netcore.co.in>
	 <48b038c60610300608g48687c91r78e1f9a4b4bf5eaf@mail.gmail.com>
	 <008101c6fc2f$9fd92b30$970310ac@bhavin>
	 <4546DBD2.3070005@netcore.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3610_2965849.1162299798487
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't remember who wrote this, Chris or Yonik or Otis, but here's the word
from somebody who actually knows...

index time field boosts are away to express things like "this document title
is worth twice as much as the title of most documents". query time boosts
are a way to express "i care about matches on this clause of my query twice
as much as I do about matches to other clauses of my query".

so which boost you use depends on your goal.

Erick

On 10/31/06, Amit Soni <amit_soni@netcore.co.in> wrote:
>
> Hi Bhavin,
>
> Thanks a lot for your reply. But i am little confuse this time. Do i
> have to give boost and index and search both or either index or search?
> Also can you give some docs which has something on how to use boost on
> particular fields.
>
> Thanks,
> Amit Soni
>
> Bhavin Pandya wrote:
>
> > Hi amit,
> > You can give boost to query at search time...
> > and you can boost to perticular field at index time....
> >
> > - Bhavin pandya
> >
> > ----- Original Message ----- From: "Patrick Turcotte" <patrek@gmail.com>
> > To: <java-user@lucene.apache.org>; <amit_soni@netcore.co.in>
> > Sent: Monday, October 30, 2006 7:38 PM
> > Subject: Re: Lucene search priorities
> >
> >
> >> I don't remember the syntax right now, but how about giving a boost to
> >> certain fields, either while indexing or while searching ?
> >>
> >> Patrick
> >>
> >> On 10/30/06, Amit Soni <amit_soni@netcore.co.in> wrote:
> >>
> >>>
> >>> Hi Erick,
> >>>
> >>> Thanks for the reply.
> >>>
> >>> Actually the priorities mean when i search for example for cancer then
> >>> in the result if get the result in order like
> >>> 1. it appears in title
> >>> 2. it appears in keywords
> >>> 3. it appears in synonyms.
> >>>
> >>> But right now with the default implementation when i search for query
> >>> 'cancer' then for say document range 1 to 10 i got 9th result which
> >>> contains given 'cancer' query appears in synonyms field while in 10th
> >>> result the 'cancer' query appears in keyword field . But actually i
> >>> want
> >>> 10th result before 9th.
> >>>
> >>> So i can do the same using Sort class. Or i can do the same with
> >>> anything else.
> >>>
> >>> I hope you understand want i want to ask.
> >>>
> >>> Thanks,
> >>> Amit Soni
> >>>
> >>>
> >>> Erick Erickson wrote:
> >>>
> >>> > I think what you want is IndexSearcher.search(Query, Filter, Sort).
> >>> > Filter may be null, and Sort is a Sort object that allows you to
> sort
> >>> > on multiple fields at once, which I assume is what you mane by
> >>> > "priorities".
> >>> >
> >>> > Read the cautions about memory usage for a Sort object though.
> >>> >
> >>> > Best
> >>> > Erick
> >>> >
> >>> > On 10/30/06, *Amit Soni* < amit_soni@netcore.co.in
> >>> > <mailto:amit_soni@netcore.co.in>> wrote:
> >>> >
> >>> >     Hi list.
> >>> >
> >>> >     I am using lucene search for one of my site search. In which i
> am
> >>> >     fetching values from the database and then index it.
> >>> >
> >>> >     The fields which the docuement contains is:
> >>> >     1. hwid
> >>> >     2. title
> >>> >     3. author
> >>> >     4. keywords
> >>> >     5. synonyms
> >>> >
> >>> >     Now i want the search result should be as per the following
> >>> >     priorities
> >>> >     1. title
> >>> >     2. keywords
> >>> >     3. synonyms
> >>> >
> >>> >     But right now it is in some different priorities. So if some one
> >>> >     has and
> >>> >     idean regarding this then please let me know.
> >>> >
> >>> >     Thanks,
> >>> >     Amit Soni
> >>> >
> >>> >
> >>> ---------------------------------------------------------------------
> >>> >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> >     <mailto:java-user-unsubscribe@lucene.apache.org>
> >>> >     For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>> >     <mailto:java-user-help@lucene.apache.org>
> >>> >
> >>> >
> >>>
> >>>
> >>>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3610_2965849.1162299798487--

From java-user-return-24279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 13:17:52 2006
Return-Path: <java-user-return-24279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86320 invoked from network); 31 Oct 2006 13:17:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 13:17:52 -0000
Received: (qmail 79089 invoked by uid 500); 31 Oct 2006 13:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79040 invoked by uid 500); 31 Oct 2006 13:17:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78997 invoked by uid 99); 31 Oct 2006 13:17:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 05:17:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [195.18.148.14] (HELO bat-mail02.banetele.basefarm.net) (195.18.148.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 05:16:58 -0800
Received: from [85.221.54.38] (port=27806 helo=dev02.tv2katalogen.no)
	by bat-mail02.banetele.basefarm.net with esmtp (Exim 4.63)
	(envelope-from <fb@mtouch.no>)
	id 1GetTE-0004Yu-8l
	for java-user@lucene.apache.org; Tue, 31 Oct 2006 14:16:00 +0100
From: Frode Bjerkholt <fb@mtouch.no>
Organization: mTouch AS
To: java-user@lucene.apache.org
Subject: Re: Lucene search priorities
Date: Tue, 31 Oct 2006 14:23:48 +0100
User-Agent: KMail/1.9.1
References: <45459906.8050601@netcore.co.in> <4546DBD2.3070005@netcore.co.in> <359a92830610310503p70abf149od369b0832b221d77@mail.gmail.com>
In-Reply-To: <359a92830610310503p70abf149od369b0832b221d77@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200610311423.49015.fb@mtouch.no>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

This is probably related to my question from October 5. - Here is the repon=
se=20
from Doron Cohen:

=46rode Bjerkholt <fb@mtouch.no> wrote on 05/10/2006 01:10:43:
> My intention is to give different terms in a field different boost
values.
> The queries from a use perspective, will be one fulltext input field.
> The following code illustrates this:
>
> Field f1 =3D new Field("name", "John", Field.Store.NO,
=46ield.Index.TOKENIZED);
> Field f2 =3D new Field("name", "Doe", Field.Store.NO,
=46ield.Index.TOKENIZED);
>
> f1.setBoost(1.0f);
> f2.setBoost(2.0f);
>
> doc.add(f1);
> doc.add(f2);
>
> In the current version of Lucene, as far as I now, this does not work -
> Allthough it would have been a very powerful feature.

To support this, additional info would need to be stored along with each
index token - i.e. along with each occurrence of each index term in each
indexed document. There are discussions on adding (in a future "flexible"
index structure) token "payloads". If/when this is added, and if this is
flexible and general as desired, such boost per token can be stored there
and then used at scoring. For more info on this search for "payloads" in
the dev mailing list.

Notice however that even so, without separating to distinct fields, when
searching for "Doe" - both its occurrences as "name" and as "last name"
would be collected, and there would be no way to look for only matches of
it as, say, "last name".

>
> The current solution is to make a firstname field and a lastname field,
and
> then make a complex query like this:
>
> Input: Eric Doe
>
> (firstname:Eric OR lastname:Eric^2) AND (firstname:Doe OR lastname:Doe^2)
>
> The performance of such a query is quite slow, and it becomes even worse
when
> you have more than two fields and/or more words in the input string.
>
> My questions:
>
> 1. Is there a better/faster solution to accomplish such a query?
>

I think one way (which I don't like but you may think otherwise) would be
to insert two tokens for a boosted one at indexing time, so that your
indexing code would look like:
=C2=A0 Field f1 =3D new Field("mixed", "John Doe", Store.NO, TOKENIZED);
=C2=A0 doc.add(f1);
=C2=A0 Field f2 =3D new Field("mixed", "Doe", Store.NO, TOKENIZED);
=C2=A0 doc.add(f2);
This would enlarge the index.
You might need to work the gap (between f1 and f2) to avoid false phrase
matches.
But your query should be simple and faster.

> Field f2 =3D new Field("name", "Doe", Field.Store.NO,
=46ield.Index.TOKENIZED);

> 2. Would it be possible to implement the described feature in a
> future version
> of Lucene?





Tirsdag 31 oktober 2006 14:03, skrev Erick Erickson:
> I don't remember who wrote this, Chris or Yonik or Otis, but here's the
> word from somebody who actually knows...
>
> index time field boosts are away to express things like "this document
> title is worth twice as much as the title of most documents". query time
> boosts are a way to express "i care about matches on this clause of my
> query twice as much as I do about matches to other clauses of my query".
>
> so which boost you use depends on your goal.
>
> Erick
>
> On 10/31/06, Amit Soni <amit_soni@netcore.co.in> wrote:
> > Hi Bhavin,
> >
> > Thanks a lot for your reply. But i am little confuse this time. Do i
> > have to give boost and index and search both or either index or search?
> > Also can you give some docs which has something on how to use boost on
> > particular fields.
> >
> > Thanks,
> > Amit Soni
> >
> > Bhavin Pandya wrote:
> > > Hi amit,
> > > You can give boost to query at search time...
> > > and you can boost to perticular field at index time....
> > >
> > > - Bhavin pandya
> > >
> > > ----- Original Message ----- From: "Patrick Turcotte"
> > > <patrek@gmail.com> To: <java-user@lucene.apache.org>;
> > > <amit_soni@netcore.co.in>
> > > Sent: Monday, October 30, 2006 7:38 PM
> > > Subject: Re: Lucene search priorities
> > >
> > >> I don't remember the syntax right now, but how about giving a boost =
to
> > >> certain fields, either while indexing or while searching ?
> > >>
> > >> Patrick
> > >>
> > >> On 10/30/06, Amit Soni <amit_soni@netcore.co.in> wrote:
> > >>> Hi Erick,
> > >>>
> > >>> Thanks for the reply.
> > >>>
> > >>> Actually the priorities mean when i search for example for cancer
> > >>> then in the result if get the result in order like
> > >>> 1. it appears in title
> > >>> 2. it appears in keywords
> > >>> 3. it appears in synonyms.
> > >>>
> > >>> But right now with the default implementation when i search for que=
ry
> > >>> 'cancer' then for say document range 1 to 10 i got 9th result which
> > >>> contains given 'cancer' query appears in synonyms field while in 10=
th
> > >>> result the 'cancer' query appears in keyword field . But actually i
> > >>> want
> > >>> 10th result before 9th.
> > >>>
> > >>> So i can do the same using Sort class. Or i can do the same with
> > >>> anything else.
> > >>>
> > >>> I hope you understand want i want to ask.
> > >>>
> > >>> Thanks,
> > >>> Amit Soni
> > >>>
> > >>> Erick Erickson wrote:
> > >>> > I think what you want is IndexSearcher.search(Query, Filter, Sort=
).
> > >>> > Filter may be null, and Sort is a Sort object that allows you to
> >
> > sort
> >
> > >>> > on multiple fields at once, which I assume is what you mane by
> > >>> > "priorities".
> > >>> >
> > >>> > Read the cautions about memory usage for a Sort object though.
> > >>> >
> > >>> > Best
> > >>> > Erick
> > >>> >
> > >>> > On 10/30/06, *Amit Soni* < amit_soni@netcore.co.in
> > >>> > <mailto:amit_soni@netcore.co.in>> wrote:
> > >>> >
> > >>> >     Hi list.
> > >>> >
> > >>> >     I am using lucene search for one of my site search. In which i
> >
> > am
> >
> > >>> >     fetching values from the database and then index it.
> > >>> >
> > >>> >     The fields which the docuement contains is:
> > >>> >     1. hwid
> > >>> >     2. title
> > >>> >     3. author
> > >>> >     4. keywords
> > >>> >     5. synonyms
> > >>> >
> > >>> >     Now i want the search result should be as per the following
> > >>> >     priorities
> > >>> >     1. title
> > >>> >     2. keywords
> > >>> >     3. synonyms
> > >>> >
> > >>> >     But right now it is in some different priorities. So if some
> > >>> > one has and
> > >>> >     idean regarding this then please let me know.
> > >>> >
> > >>> >     Thanks,
> > >>> >     Amit Soni
> > >>>
> > >>> -------------------------------------------------------------------=
=2D-
> > >>>
> > >>> >     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg
> > >>> >     <mailto:java-user-unsubscribe@lucene.apache.org>
> > >>> >     For additional commands, e-mail:
> >
> > java-user-help@lucene.apache.org
> >
> > >>> >     <mailto:java-user-help@lucene.apache.org>
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org

Best Regards,

=46rode

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 16:30:51 2006
Return-Path: <java-user-return-24280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63881 invoked from network); 31 Oct 2006 16:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 16:30:49 -0000
Received: (qmail 77737 invoked by uid 500); 31 Oct 2006 16:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77702 invoked by uid 500); 31 Oct 2006 16:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77691 invoked by uid 99); 31 Oct 2006 16:30:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 08:30:52 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of valerio.schiavoni@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 08:30:37 -0800
Received: by nf-out-0910.google.com with SMTP id b2so301284nfe
        for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 08:30:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=myk9OKYHfK/pzHKMasyYKO6aorAk4g2W1SF1VBYldTeCvrqCvtoM0qjf7yIzWB95tnia0ZYuH53DSw/CmMVnpvvWx3IzOZTNGJkHBIKS09KWTtzggRfgCg2A5UhDmX0gh8x0G4QsYCjznDRrC1ToMBxUWXpqjs8bCZOCfdgyDjk=
Received: by 10.82.190.2 with SMTP id n2mr1187548buf;
        Tue, 31 Oct 2006 08:30:16 -0800 (PST)
Received: by 10.82.176.7 with HTTP; Tue, 31 Oct 2006 08:30:15 -0800 (PST)
Message-ID: <fa5c729b0610310830j4a57c749y8b306740cfc9c10a@mail.gmail.com>
Date: Tue, 31 Oct 2006 17:30:15 +0100
From: "Valerio Schiavoni" <valerio.schiavoni@gmail.com>
To: java-user@lucene.apache.org
Subject: how to handle words with accent?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7734_21520232.1162312215957"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7734_21520232.1162312215957
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

hello,
i use lucene to index documents in Italian. many terms end with accented
letters: societ=E0, fedelt=E0, etc

What happen now is that if a user search for : societa' (note the a and the
' character), it doesn't get the same results as he would when searching fo=
r
societ=E0.

What is the best practice to handle such situations ?
i haven't tuned anyhow lucene, and i'm using the default analyzer.

thanks for any suggestions,
valerio
--=20
http://valerioschiavoni.blogspot.com
http://jroller.com/page/vschiavoni

------=_Part_7734_21520232.1162312215957--

From java-user-return-24281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 16:40:20 2006
Return-Path: <java-user-return-24281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66044 invoked from network); 31 Oct 2006 16:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 16:40:19 -0000
Received: (qmail 11612 invoked by uid 500); 31 Oct 2006 16:40:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11573 invoked by uid 500); 31 Oct 2006 16:40:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11562 invoked by uid 99); 31 Oct 2006 16:40:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 08:40:22 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 08:40:02 -0800
Received: by wr-out-0506.google.com with SMTP id i32so307027wra
        for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 08:39:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pn/4bGWyggSzXeCtK14RZFNVM/Zh1Nz0sjS05vDU2zWAfD7XAddgG7SPIsFDcpHwMi5abgYivb+rP0Vj5QrQTzEBfRRrbxrL9CWI2UdJTT/IVEST1KViQEfmrGsS9Rlgk84EMzLs+rX0zItk6pu0yX8XKcUqxpqsz61rrdEmILQ=
Received: by 10.65.219.14 with SMTP id w14mr7130134qbq;
        Tue, 31 Oct 2006 08:39:29 -0800 (PST)
Received: by 10.65.22.5 with HTTP; Tue, 31 Oct 2006 08:39:28 -0800 (PST)
Message-ID: <48b038c60610310839y11fe7738va1d16d83f0c35ba4@mail.gmail.com>
Date: Tue, 31 Oct 2006 11:39:28 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to handle words with accent?
In-Reply-To: <fa5c729b0610310830j4a57c749y8b306740cfc9c10a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9633_802631.1162312768782"
References: <fa5c729b0610310830j4a57c749y8b306740cfc9c10a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9633_802631.1162312768782
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Should both results be returned in both cases?

If so, take a look at the IsoLatin1Filter class, it will remove those
accents for indexing and searching if needed.

Patrick

On 10/31/06, Valerio Schiavoni <valerio.schiavoni@gmail.com> wrote:
>
> hello,
> i use lucene to index documents in Italian. many terms end with accented
> letters: societ=E0, fedelt=E0, etc
>
> What happen now is that if a user search for : societa' (note the a and
> the
> ' character), it doesn't get the same results as he would when searching
> for
> societ=E0.
>
> What is the best practice to handle such situations ?
> i haven't tuned anyhow lucene, and i'm using the default analyzer.
>
> thanks for any suggestions,
> valerio
> --
> http://valerioschiavoni.blogspot.com
> http://jroller.com/page/vschiavoni
>
>

------=_Part_9633_802631.1162312768782--

From java-user-return-24282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 16:56:23 2006
Return-Path: <java-user-return-24282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73848 invoked from network); 31 Oct 2006 16:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 16:56:15 -0000
Received: (qmail 67350 invoked by uid 500); 31 Oct 2006 16:56:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67291 invoked by uid 500); 31 Oct 2006 16:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67028 invoked by uid 99); 31 Oct 2006 16:56:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 08:56:14 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of valerio.schiavoni@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 08:55:53 -0800
Received: by nf-out-0910.google.com with SMTP id b2so307839nfe
        for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 08:55:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pGCorgGXNlywMHt6AAwIUmXQLaAtUk4D3p3ATw3s+tzPc7Ah3eS1YiN+KgRdfiicQcgSqBYFrKcXQLXKpJRJknSo7nKZWSjK4aM/j4EuyadsYSA2e+qoXCSc/RID1uwmhAtngpawOMgyxR9pxQ1BIeOd9d94Tob+k6SCnlt0kjE=
Received: by 10.82.107.15 with SMTP id f15mr1188852buc;
        Tue, 31 Oct 2006 08:55:30 -0800 (PST)
Received: by 10.82.176.7 with HTTP; Tue, 31 Oct 2006 08:55:30 -0800 (PST)
Message-ID: <fa5c729b0610310855l48c8b2f7jc02747c33ae193c@mail.gmail.com>
Date: Tue, 31 Oct 2006 17:55:30 +0100
From: "Valerio Schiavoni" <valerio.schiavoni@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to handle words with accent?
In-Reply-To: <48b038c60610310839y11fe7738va1d16d83f0c35ba4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8034_33241413.1162313730723"
References: <fa5c729b0610310830j4a57c749y8b306740cfc9c10a@mail.gmail.com>
	 <48b038c60610310839y11fe7738va1d16d83f0c35ba4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8034_33241413.1162313730723
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

actually yes, it would be a good result!
is the class you mentioned the one referred here:

http://sourceforge.net/mailarchive/message.php?msg_id=3D11811387

(which I had to extract from the sources of the project mentioned in the
post)
or you were referring to something else ?

thanks a lot!

On 10/31/06, Patrick Turcotte <patrek@gmail.com> wrote:
>
> Should both results be returned in both cases?
>
> If so, take a look at the IsoLatin1Filter class, it will remove those
> accents for indexing and searching if needed.
>
> Patrick
>
> On 10/31/06, Valerio Schiavoni <valerio.schiavoni@gmail.com> wrote:
> >
> > hello,
> > i use lucene to index documents in Italian. many terms end with accente=
d
> > letters: societ=E0, fedelt=E0, etc
> >
> > What happen now is that if a user search for : societa' (note the a and
> > the
> > ' character), it doesn't get the same results as he would when searchin=
g
> > for
> > societ=E0.
> >
> > What is the best practice to handle such situations ?
> > i haven't tuned anyhow lucene, and i'm using the default analyzer.
> >
> > thanks for any suggestions,
> > valerio
> > --
> > http://valerioschiavoni.blogspot.com
> > http://jroller.com/page/vschiavoni
> >
> >
>
>


--=20
http://valerioschiavoni.blogspot.com
http://jroller.com/page/vschiavoni

------=_Part_8034_33241413.1162313730723--

From java-user-return-24283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 17:00:17 2006
Return-Path: <java-user-return-24283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75492 invoked from network); 31 Oct 2006 17:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 17:00:16 -0000
Received: (qmail 77928 invoked by uid 500); 31 Oct 2006 17:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77905 invoked by uid 500); 31 Oct 2006 17:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77894 invoked by uid 99); 31 Oct 2006 17:00:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 09:00:21 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 09:00:07 -0800
Received: by wr-out-0506.google.com with SMTP id i32so315122wra
        for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 08:59:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OW50p5wcdeOGSuBsNGzVVxj3vr8pM5J1EZ6ZTIarQCziuhfdlCqemy8fD4i9CdAR4ouw5YDESQrXDU2fB/PQZDWj/41bEGkp2Hs84BR+asQS2/ROS2RwCLWXetV5wMrisPvxc2mn404DkMY/oOpZUd519VjtlOAc4tfIZR4MqiA=
Received: by 10.65.183.7 with SMTP id k7mr7179688qbp;
        Tue, 31 Oct 2006 08:59:46 -0800 (PST)
Received: by 10.65.22.5 with HTTP; Tue, 31 Oct 2006 08:59:46 -0800 (PST)
Message-ID: <48b038c60610310859h35260a1o217cf26297fae218@mail.gmail.com>
Date: Tue, 31 Oct 2006 11:59:46 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to handle words with accent?
In-Reply-To: <fa5c729b0610310855l48c8b2f7jc02747c33ae193c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10042_17946767.1162313986107"
References: <fa5c729b0610310830j4a57c749y8b306740cfc9c10a@mail.gmail.com>
	 <48b038c60610310839y11fe7738va1d16d83f0c35ba4@mail.gmail.com>
	 <fa5c729b0610310855l48c8b2f7jc02747c33ae193c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10042_17946767.1162313986107
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I was referring to
http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/ISOLatin1=
AccentFilter.htmlwhich
is in the
2.0 version of Lucene.

Patrick

On 10/31/06, Valerio Schiavoni <valerio.schiavoni@gmail.com> wrote:
>
> actually yes, it would be a good result!
> is the class you mentioned the one referred here:
>
> http://sourceforge.net/mailarchive/message.php?msg_id=3D11811387
>
> (which I had to extract from the sources of the project mentioned in the
> post)
> or you were referring to something else ?
>
> thanks a lot!
>
> On 10/31/06, Patrick Turcotte <patrek@gmail.com> wrote:
> >
> > Should both results be returned in both cases?
> >
> > If so, take a look at the IsoLatin1Filter class, it will remove those
> > accents for indexing and searching if needed.
> >
> > Patrick
> >
> > On 10/31/06, Valerio Schiavoni <valerio.schiavoni@gmail.com> wrote:
> > >
> > > hello,
> > > i use lucene to index documents in Italian. many terms end with
> accented
> > > letters: societ=E0, fedelt=E0, etc
> > >
> > > What happen now is that if a user search for : societa' (note the a
> and
> > > the
> > > ' character), it doesn't get the same results as he would when
> searching
> > > for
> > > societ=E0.
> > >
> > > What is the best practice to handle such situations ?
> > > i haven't tuned anyhow lucene, and i'm using the default analyzer.
> > >
> > > thanks for any suggestions,
> > > valerio
> > > --
> > > http://valerioschiavoni.blogspot.com
> > > http://jroller.com/page/vschiavoni
> > >
> > >
> >
> >
>
>
> --
> http://valerioschiavoni.blogspot.com
> http://jroller.com/page/vschiavoni
>
>

------=_Part_10042_17946767.1162313986107--

From java-user-return-24284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 20:51:36 2006
Return-Path: <java-user-return-24284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84921 invoked from network); 31 Oct 2006 20:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 20:51:36 -0000
Received: (qmail 14901 invoked by uid 500); 31 Oct 2006 20:51:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14874 invoked by uid 500); 31 Oct 2006 20:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14863 invoked by uid 99); 31 Oct 2006 20:51:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:51:40 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 12:51:28 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1640242ugc
        for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 12:51:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gnLpa1yFnFu2zu3JeUOw67aDtLWyHWGyypYlFRHzaiVfNYNWTAfgezJMjpPNYKwGzr43cKBRQ8hJ/qCqG3yz+jPOU4zlpNPy50OIQMtpejAvJ/TUVf8YuuXMhyHnE0OU4Ytb9bfQ2AeU7IHyNE1VTFoJ5wZvooeof9+K5TE27MY=
Received: by 10.82.109.19 with SMTP id h19mr1277297buc;
        Tue, 31 Oct 2006 12:51:06 -0800 (PST)
Received: by 10.82.131.8 with HTTP; Tue, 31 Oct 2006 12:51:05 -0800 (PST)
Message-ID: <6e3ae6310610311251s1da7100dta354fe8744842a76@mail.gmail.com>
Date: Tue, 31 Oct 2006 12:51:05 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: My frirst problem using lucene
In-Reply-To: <6999.194.30.80.57.1162295870.squirrel@www.lpis.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6999.194.30.80.57.1162295870.squirrel@www.lpis.com>
X-Virus-Checked: Checked by ClamAV on apache.org

My guess is:
change from
  QueryParser.parse(queryString, "contents", analyzer);
to
  QueryParser.parse(queryString);

btw:
Can you please translate the errors into English?

--=20
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 10/31/06, Miren <miren@tinieblas.com> wrote:
> hello
> i am trying to use lucene annd i am my fisrt problem.
> i have install the demo example into the tomcat and when i try to load
> osne search, into the results.jsp page appears this error. can you help
> me?
> thanks.
>
> org.apache.jasper.JasperException: No se puede compilar la clase para JSP
>
> Ha tenido lugar un error en la l=EDnea: 60 en el archivo jsp: /results.js=
p
> Error de servlet generado:
> C:\Tomcat
> 5.0\work\Catalina\localhost\luceneweb\org\apache\jsp\results_jsp.java:169=
:
> parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser
> cannot be applied to
> (java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
>                         query =3D QueryParser.parse(queryString, "content=
s",
> analyzer); //parse the
>                                            ^
>
>
> Ha tenido lugar un error en la l=EDnea: 60 en el archivo jsp: /results.js=
p
> Error de servlet generado:
> Note: C:\Tomcat
> 5.0\work\Catalina\localhost\luceneweb\org\apache\jsp\results_jsp.java use=
s
> or overrides a deprecated API.
> Note: Recompile with -deprecation for details.
> 1 error
>
>
>
>         org.apache.jasper.compiler.DefaultErrorHandler.javacError(Default=
ErrorHandler.java:84)
>         org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispat=
cher.java:332)
>         org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:4=
12)
>         org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)
>         org.apache.jasper.compiler.Compiler.compile(Compiler.java:451)
>         org.apache.jasper.compiler.Compiler.compile(Compiler.java:439)
>         org.apache.jasper.JspCompilationContext.compile(JspCompilationCon=
text.java:511)
>         org.apache.jasper.servlet.JspServletWrapper.service(JspServletWra=
pper.java:295)
>         org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.ja=
va:292)
>         org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)
>         javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
>
>
> nota La traza completa de la causa de este error se encuentra en los
> archivos de diario de Apache Tomcat/5.0.28.
>
>
> -------------------------------------------------------------------------=
-------
>
> Apache Tomcat/5.0.28
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 23:13:01 2006
Return-Path: <java-user-return-24285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54139 invoked from network); 31 Oct 2006 23:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 23:13:01 -0000
Received: (qmail 72210 invoked by uid 500); 31 Oct 2006 23:13:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71975 invoked by uid 500); 31 Oct 2006 23:13:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71964 invoked by uid 99); 31 Oct 2006 23:13:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:13:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:12:47 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9VNCPOH194436
	for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 23:12:25 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9VNFIx32719866
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 00:15:18 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9VNCP5U013334
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 00:12:25 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9VNCPTW013331
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 00:12:25 +0100
In-Reply-To: <359a92830610310503p70abf149od369b0832b221d77@mail.gmail.com>
Subject: Re: Lucene search priorities
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF091EBE6C.A8D62193-ON88257218.007E50F6-88257218.007E8A13@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 31 Oct 2006 15:02:08 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 01/11/2006 01:15:18
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Erick Erickson" <erickerickson@gmail.com> wrote on 31/10/2006 05:03:18:
> I don't remember who wrote this, Chris or Yonik or Otis, but here's the
word
> from somebody who actually knows...
>
> index time field boosts are away to express things like "this document
title
> is worth twice as much as the title of most documents". query time boosts
> are a way to express "i care about matches on this clause of my query
twice
> as much as I do about matches to other clauses of my query".
>
> so which boost you use depends on your goal.
>
> Erick
>
> On 10/31/06, Amit Soni <amit_soni@netcore.co.in> wrote:
> >
> > Hi Bhavin,
> >
> > Thanks a lot for your reply. But i am little confuse this time. Do i
> > have to give boost and index and search both or either index or search?
> > Also can you give some docs which has something on how to use boost on
> > particular fields.

Hi Amit,

In addition see "Score Boosting" section in
http://lucene.apache.org/java/docs/scoring.html

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 23:43:10 2006
Return-Path: <java-user-return-24286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63053 invoked from network); 31 Oct 2006 23:43:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 23:43:09 -0000
Received: (qmail 21730 invoked by uid 500); 31 Oct 2006 23:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21707 invoked by uid 500); 31 Oct 2006 23:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21696 invoked by uid 99); 31 Oct 2006 23:43:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:43:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:43:01 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id k9VNgd3f022680
	for <java-user@lucene.apache.org>; Tue, 31 Oct 2006 23:42:39 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id k9VNjWK53121166
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 00:45:32 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k9VNgdcu017872
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 00:42:39 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k9VNgdpc017869
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 00:42:39 +0100
In-Reply-To: <6999.194.30.80.57.1162295870.squirrel@www.lpis.com>
Subject: Re: My frirst problem using lucene
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFFFDD4CE7.E1AAC210-ON88257218.00801BEC-88257218.00805B4D@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 31 Oct 2006 15:21:59 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 01/11/2006 01:45:32
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Might be related to an already resolved issue - see related discussion:
http://www.nabble.com/lucene-web-demo-is-not-working--tf1736444.html#a4718639

"Miren" <miren@tinieblas.com> wrote on 31/10/2006 03:57:50:
> parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser
> cannot be applied to
> (java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
>                         query = QueryParser.parse(queryString,
"contents",
> analyzer); //parse the


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Oct 31 23:55:54 2006
Return-Path: <java-user-return-24287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66499 invoked from network); 31 Oct 2006 23:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Oct 2006 23:55:54 -0000
Received: (qmail 50280 invoked by uid 500); 31 Oct 2006 23:55:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50251 invoked by uid 500); 31 Oct 2006 23:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50239 invoked by uid 99); 31 Oct 2006 23:55:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Oct 2006 15:55:58 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.84] (HELO web52001.mail.yahoo.com) (206.190.48.84)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 31 Oct 2006 15:55:45 -0800
Received: (qmail 78803 invoked by uid 60001); 31 Oct 2006 23:55:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=BLU+ufVtjkzdQLEosMMxez/OoN5VpuowQQ7Oz/ZyriRpDMWEvuWUOZ3qlkRxBM+IbYJgf64KWd2rZFYMA0Xh9lGGePEm+W52oC2Xe1JFAOa2KGKUttjhB0RP/GETnaW7wdPtmfKaJL4VTMXmDVAVmXgib8OoeBnkcRJhcIEOgxM=  ;
Message-ID: <20061031235524.78801.qmail@web52001.mail.yahoo.com>
Received: from [12.162.3.126] by web52001.mail.yahoo.com via HTTP; Tue, 31 Oct 2006 15:55:24 PST
Date: Tue, 31 Oct 2006 15:55:23 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Question on storing object hierarchy in Lucene Index
To: java-user@lucene.apache.org, java-user-info@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0ALets consider the following object structure.=0A=0A           X=0A=
            |=0A            --------- Y=0A                         |=0A    =
                     --------- Z=0A=0AThe objects Y and Z does not have an =
existance on their own. They are owned by object X.=0A=0AHow do we effectiv=
ely search such object structure using Lucene? The way I see is to denormal=
ize this object structure and save the values of X, Y and Z in same field s=
eparated by some separator. During searh, again combine the values of X, Y =
and Z while constructing the query.=0A=0AAre there any best practices aroun=
d storing the such data structure inside Lucene Index?=0A=0ARegards,=0ARaje=
sh=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


