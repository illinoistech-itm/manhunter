From java-user-return-31711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 16:58:26 2008
Return-Path: <java-user-return-31711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93233 invoked from network); 1 Jan 2008 16:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 16:58:25 -0000
Received: (qmail 2022 invoked by uid 500); 1 Jan 2008 16:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1988 invoked by uid 500); 1 Jan 2008 16:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1977 invoked by uid 99); 1 Jan 2008 16:58:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 08:58:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucene@nitwit.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 16:57:57 +0000
Received: (qmail 26853 invoked from network); 1 Jan 2008 16:57:49 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.229.117])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 1 Jan 2008 16:57:49 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 8F2F34C038A
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 17:57:49 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: CachingWrapperFilter: why cache per IndexReader?
Date: Tue, 1 Jan 2008 17:57:49 +0100
User-Agent: KMail/1.9.7
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801011757.49297.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

Is there are particular reason why CachingWrapperFilter caches per IndexReader 
and not per IndexReader.directory()? If there are multiple 
IndexSearcher/IndexReader instances (and only one Directory) cache will be 
built and held in memory redundantly. I don't see any sense in doing so (?).

Thanks for hints...
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 18:27:03 2008
Return-Path: <java-user-return-31712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13485 invoked from network); 1 Jan 2008 18:27:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 18:27:03 -0000
Received: (qmail 41604 invoked by uid 500); 1 Jan 2008 18:26:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41569 invoked by uid 500); 1 Jan 2008 18:26:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41558 invoked by uid 99); 1 Jan 2008 18:26:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 10:26:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 72.14.252.154 as permitted sender)
Received: from [72.14.252.154] (HELO po-out-1718.google.com) (72.14.252.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 18:26:21 +0000
Received: by po-out-1718.google.com with SMTP id c31so3393542poi.0
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2008 10:26:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=RglWyo3LywSMen3T7RumcnTRyhDb0wnmZfQQ4SM2FPU=;
        b=KnsyKQYFOqvxrjFB3znTAA5N7UgbfApR1za3woiGAoH2Rwo07liKQSnFvCOulZstXODLAiPYrT2Gw9OHJT4ap6I9xR/BrNoXMyTAu6egkrG0zCEzISOD7jcAOhBzYSIpVLfcenpeflBYiA26n7bKCAQ+JyBxdlhdQ++8uAMD2zE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K3l3MG9qpCLce1wRKpQO0tjY2g3k4ZRKHQBGIx3nopPYOQSSabn7VxtZXFBvMEPm9h1OfyjTKoZUAY2QLk1A+nK/lOl9lJyrLDzCuAf522JuatQ5xQ6reqXR5KeDBqZS5XezgcHBfqrTJ/CzSBEs3McLn2E5dP692rMHU1sr97Q=
Received: by 10.141.13.16 with SMTP id q16mr6919242rvi.99.1199211984957;
        Tue, 01 Jan 2008 10:26:24 -0800 (PST)
Received: by 10.141.195.20 with HTTP; Tue, 1 Jan 2008 10:26:24 -0800 (PST)
Message-ID: <d27fa17e0801011026l54da919cif143f7f0e0baa369@mail.gmail.com>
Date: Tue, 1 Jan 2008 23:56:24 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents
In-Reply-To: <11AD0FC4-A4A4-42DC-A7E0-3B7B64802D0A@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20179_31190428.1199211984653"
References: <20071230005459.GC2029@dbruhn.de>
	 <20071230123825.GA16137@dbruhn.de>
	 <11AD0FC4-A4A4-42DC-A7E0-3B7B64802D0A@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20179_31190428.1199211984653
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> I got a large index and when searching for a term I want the newer
> documents be at the begining of the result set. I dont need a real order
> by time but lucene should prioritze the newer documents.
> I got the time of the document creation as a index-field but it takes
> very long if I would force lucene to sort by this field, so I want to
> avoid this and instead use a less sharp priority based ordering.
>
> Can anybody give me a hint?
>

I am not sure why you don't want to use SortField for your purpose. It's not
as bad option as you describe above. See, lucene already sorts the documents
on SCORE. Now for your problem what you additionally want is do sorting by
date if SCORE is same - for very large index (say of size N) you are just
adding O(N) complexity to the whole process... which is linear in nature.
Because you would be doing sorting within similar score buckets (say average
size is k) - this would take k * lg k. For very large index there would be
lots of such buckets (say B), we can safely assume B >>> k. So total
additional complexity is B k lg k. For B >>> k, k lg k would be equivalent
to 1. Hence additional complexity is only B or N (a better proxy).

I hope I am clear.

Feel free to comment.

P.S: In our application we are already using SortField based mechanism...
it's not adding lots of extra CPU cycles to the whole process of search.

Regards,
Shailendra

On Dec 30, 2007 8:40 PM, Grant Ingersoll <gsingers@apache.org> wrote:

> I think it is the case that Luke doesn't show the boosts, see http://www.gossamer-threads.com/lists/lucene/java-user/32020?search_string=Luke%20boost%201;#32020
>
>
>
> On Dec 30, 2007, at 7:38 AM, Dominik Bruhn wrote:
>
> > Hy,
> > a solution came into my mind:
> > Every document gets boosted by a integer which I increment each time I
> > add a new document to the index. So the newer documents should get a
> > bigger boost than the older ones.
> >
> > I tried it out and ran into a problem:
> > Although I set the Boost via doc.setBoost (value) for each document
> > before writing it to the index it doesnt change anything. Even worse
> > if I look at the index using Luke (Version 0.7.1) each document got
> > a boost of 1 not of the value supplied.
> >
> > Who can help me?
> >
> > Thanks
> > --
> > Dominik Bruhn
> > mailto: dominik@dbruhn.de
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Shailendra Sharma
+91-988-011-3066

------=_Part_20179_31190428.1199211984653--

From java-user-return-31713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 18:27:34 2008
Return-Path: <java-user-return-31713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13560 invoked from network); 1 Jan 2008 18:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 18:27:33 -0000
Received: (qmail 43159 invoked by uid 500); 1 Jan 2008 18:27:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43124 invoked by uid 500); 1 Jan 2008 18:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43113 invoked by uid 99); 1 Jan 2008 18:27:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 10:27:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 18:27:04 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 198A25B530
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 10:26:55 -0800 (PST)
Message-Id: <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <200801011757.49297.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
Date: Tue, 1 Jan 2008 13:26:51 -0500
References: <200801011757.49297.lucene@nitwit.de>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

My guess would be b/c best practice is usually to only have one Reader/ 
Searcher per Directory, but I don't know if that is the real reason.   
Most discussions/testing I have seen indicate a single Reader/Searcher  
performs best.

-Grant

On Jan 1, 2008, at 11:57 AM, Timo Nentwig wrote:

> Hi!
>
> Is there are particular reason why CachingWrapperFilter caches per  
> IndexReader
> and not per IndexReader.directory()? If there are multiple
> IndexSearcher/IndexReader instances (and only one Directory) cache  
> will be
> built and held in memory redundantly. I don't see any sense in doing  
> so (?).
>
> Thanks for hints...
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 18:39:26 2008
Return-Path: <java-user-return-31714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15172 invoked from network); 1 Jan 2008 18:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 18:39:26 -0000
Received: (qmail 49557 invoked by uid 500); 1 Jan 2008 18:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49525 invoked by uid 500); 1 Jan 2008 18:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49514 invoked by uid 99); 1 Jan 2008 18:39:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 10:39:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 18:38:46 +0000
Received: by rv-out-0910.google.com with SMTP id k20so4042572rvb.5
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2008 10:38:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=vMhiw+yrzk9i+pYSuCcyGlwDrFM/VZVfG/ROfRSzu2E=;
        b=dcY6eaD1O3w1KgLPuGUKTq76MZNDiFGyEbBe5k92ER7hR4Un/wG2kIe0WL+J68Yzw++ILFh6a8k10qIsbv0lKzxcCxxHu/YMsd5BxKrt/U00UmJkE6yFVuX7QLMxCr38tC6ld5VZhdt4FrTaT/PoLzIk76fvO6pMo5zriKNqHJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yv5/A0duYX8GUCJZZ3yNZRFgltO2qdWdTX19Hgt500NcLLMU1/IoDsnp78ziMXlSfbs5Kq/gkzeWfXoBJl6liL28gGrlBLSdOucgZmLpU4JSmoBDZANWIuQ3fKF/AxM9qA0QAajePzLY3pAEwsSSq5mg0cRVO6t/iZUvxZVcgHU=
Received: by 10.141.90.17 with SMTP id s17mr6897332rvl.241.1199212728471;
        Tue, 01 Jan 2008 10:38:48 -0800 (PST)
Received: by 10.141.195.20 with HTTP; Tue, 1 Jan 2008 10:38:48 -0800 (PST)
Message-ID: <d27fa17e0801011038y4a47401ancdb866a80f561789@mail.gmail.com>
Date: Wed, 2 Jan 2008 00:08:48 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
In-Reply-To: <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20200_21988163.1199212728449"
References: <200801011757.49297.lucene@nitwit.de>
	 <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20200_21988163.1199212728449
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> Is there are particular reason why CachingWrapperFilter caches per
> IndexReader
> and not per IndexReader.directory()? If there are multiple
> IndexSearcher/IndexReader instances (and only one Directory) cache will be
> built and held in memory redundantly. I don't see any sense in doing so
> (?).
>

It's very simple... when you are talking about cache here you are talking
about "In Memory Cache" and not "Persistent" cache. IndexReader is something
which closely resembles in-memory snapshot of indices, while directory()
refers to persisted indices. With this analogy the caching solution fits
best at IndexReader level.

Over that, same directory can be opened by multiple processes (not threads)
- to complicate the situation these processes can be running on distributed
machines. It would require lot of IPCs and very complicated solution to
provide caching at directory level.

Regards,
Shailendra

On Jan 1, 2008 11:56 PM, Grant Ingersoll <gsingers@apache.org> wrote:

> My guess would be b/c best practice is usually to only have one Reader/
> Searcher per Directory, but I don't know if that is the real reason.
> Most discussions/testing I have seen indicate a single Reader/Searcher
> performs best.
>
> -Grant
>
> On Jan 1, 2008, at 11:57 AM, Timo Nentwig wrote:
>
> > Hi!
> >
> > Is there are particular reason why CachingWrapperFilter caches per
> > IndexReader
> > and not per IndexReader.directory()? If there are multiple
> > IndexSearcher/IndexReader instances (and only one Directory) cache
> > will be
> > built and held in memory redundantly. I don't see any sense in doing
> > so (?).
> >
> > Thanks for hints...
> > Timo
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Shailendra Sharma
+91-988-011-3066

------=_Part_20200_21988163.1199212728449--

From java-user-return-31715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 19:34:56 2008
Return-Path: <java-user-return-31715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22095 invoked from network); 1 Jan 2008 19:34:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 19:34:56 -0000
Received: (qmail 67180 invoked by uid 500); 1 Jan 2008 19:34:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67153 invoked by uid 500); 1 Jan 2008 19:34:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67142 invoked by uid 99); 1 Jan 2008 19:34:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 11:34:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@nitwit.de designates 80.67.29.23 as permitted sender)
Received: from [80.67.29.23] (HELO smtprelay09.ispgateway.de) (80.67.29.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 19:34:13 +0000
Received: (qmail 12430 invoked from network); 1 Jan 2008 19:34:14 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.229.117])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay09.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 1 Jan 2008 19:34:14 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 90A844C0659
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 20:34:14 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
Date: Tue, 1 Jan 2008 20:34:14 +0100
User-Agent: KMail/1.9.7
References: <200801011757.49297.lucene@nitwit.de> <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org> <d27fa17e0801011038y4a47401ancdb866a80f561789@mail.gmail.com>
In-Reply-To: <d27fa17e0801011038y4a47401ancdb866a80f561789@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801012034.14411.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 01 January 2008 19:38:48 Shailendra Sharma wrote:
> > Is there are particular reason why CachingWrapperFilter caches per
> > IndexReader
> > and not per IndexReader.directory()? If there are multiple
> > IndexSearcher/IndexReader instances (and only one Directory) cache will
> > be built and held in memory redundantly. I don't see any sense in doing
> > so (?).
>
> It's very simple... when you are talking about cache here you are talking
> about "In Memory Cache" and not "Persistent" cache. IndexReader is
> something which closely resembles in-memory snapshot of indices, while
> directory() refers to persisted indices. With this analogy the caching
> solution fits best at IndexReader level.
>
> Over that, same directory can be opened by multiple processes (not threads)

Hmm? But it will be different instances anyway. And that's all you need to use 
it a key for a WeakHashMap. Maybe we are talking at cross-purposes...

I suggest to use reader.directory() instead of reader as key for the 
WeakHashMap. This way multiple IndexSearcher/IndexReacher instances would 
share the cache.

> - to complicate the situation these processes can be running on distributed
> machines. It would require lot of IPCs and very complicated solution to
> provide caching at directory level.
>
> Regards,
> Shailendra
>
> On Jan 1, 2008 11:56 PM, Grant Ingersoll <gsingers@apache.org> wrote:
> > My guess would be b/c best practice is usually to only have one Reader/
> > Searcher per Directory, but I don't know if that is the real reason.
> > Most discussions/testing I have seen indicate a single Reader/Searcher
> > performs best.
> >
> > -Grant
> >
> > On Jan 1, 2008, at 11:57 AM, Timo Nentwig wrote:
> > > Hi!
> > >
> > > Is there are particular reason why CachingWrapperFilter caches per
> > > IndexReader
> > > and not per IndexReader.directory()? If there are multiple
> > > IndexSearcher/IndexReader instances (and only one Directory) cache
> > > will be
> > > built and held in memory redundantly. I don't see any sense in doing
> > > so (?).
> > >
> > > Thanks for hints...
> > > Timo
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> > http://www.lucenebootcamp.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 19:41:14 2008
Return-Path: <java-user-return-31716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23071 invoked from network); 1 Jan 2008 19:41:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 19:41:14 -0000
Received: (qmail 70609 invoked by uid 500); 1 Jan 2008 19:40:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70578 invoked by uid 500); 1 Jan 2008 19:40:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70567 invoked by uid 99); 1 Jan 2008 19:40:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 11:40:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@nitwit.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 19:40:32 +0000
Received: (qmail 31334 invoked from network); 1 Jan 2008 19:40:35 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.229.117])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 1 Jan 2008 19:40:35 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 16B914C065C
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 20:40:36 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
Date: Tue, 1 Jan 2008 20:40:35 +0100
User-Agent: KMail/1.9.7
References: <200801011757.49297.lucene@nitwit.de> <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org>
In-Reply-To: <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801012040.35900.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 01 January 2008 19:26:51 Grant Ingersoll wrote:
> My guess would be b/c best practice is usually to only have one Reader/
> Searcher per Directory, but I don't know if that is the real reason.
> Most discussions/testing I have seen indicate a single Reader/Searcher
> performs best.

Well, I read this (in the FAQ) that I should use only a single 
Searcher/Reader. And I really would like to but I ran into some FSDirectory 
IO synchronized{} bottleneck and hence (still) don't see any alternative to 
pooling multiple seachers (which waste a lot of memory).

Even LUCENE-997 doesn't produce relief here... :-\

But in general, since IndexSearcher is single-threaded I don't think that this 
a wise approach. No matter how large the index, no matter the IO system, no 
matter how many queries you want all this to go thru a single thread? How 
long since does a single thread plus synchronous IO scale?

However I yet didn't find any discussion on this topic so I'd be glad if 
somebody could give me a link.

> -Grant
>
> On Jan 1, 2008, at 11:57 AM, Timo Nentwig wrote:
> > Hi!
> >
> > Is there are particular reason why CachingWrapperFilter caches per
> > IndexReader
> > and not per IndexReader.directory()? If there are multiple
> > IndexSearcher/IndexReader instances (and only one Directory) cache
> > will be
> > built and held in memory redundantly. I don't see any sense in doing
> > so (?).
> >
> > Thanks for hints...
> > Timo
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 20:06:52 2008
Return-Path: <java-user-return-31717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26837 invoked from network); 1 Jan 2008 20:06:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 20:06:51 -0000
Received: (qmail 81037 invoked by uid 500); 1 Jan 2008 20:06:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81007 invoked by uid 500); 1 Jan 2008 20:06:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80996 invoked by uid 99); 1 Jan 2008 20:06:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 12:06:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.229 as permitted sender)
Received: from [72.14.204.229] (HELO qb-out-0506.google.com) (72.14.204.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 20:06:08 +0000
Received: by qb-out-0506.google.com with SMTP id o21so124009qba.9
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2008 12:06:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=4aU0eDIPz0RxibrYo/jBZaRIJXS8eqviQAgZviwtXTw=;
        b=SMRz5ZJ5suD7Mh/BxaDjsQP9iGWwPw6RX6pvuPQlosr0qAAQZ7LI37v3fmEM55gcEWJkjEzd0RJPdY7Qe2wAAMUbhUnnBbDKZ84xsVkgq2C2ncPCi+JbbNRB8dzsPAcNBncZx2ltgF+mJnWCCNyz8SXwbtyFDtVry3jHgHby4ho=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=pNsS7wN4rbVY+f/gXxzRXWtKPKH4II4PCBS3caMTozeMf/jwtRAosDozT4tWnvj80vMghdmfMe3l6qqU8ea5TbVjj84wrthjr+VvKliesHJB0SReXSU9f9L56r6TmvTCy/Zlx2CfXsr5ATmdDMQqMiwCpz8lfh6LEmI9EzxXin8=
Received: by 10.64.203.4 with SMTP id a4mr27697959qbg.6.1199217970787;
        Tue, 01 Jan 2008 12:06:10 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id z21sm7707494qbc.21.2008.01.01.12.06.09
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 01 Jan 2008 12:06:09 -0800 (PST)
Message-ID: <477A9D2E.5010908@gmail.com>
Date: Tue, 01 Jan 2008 15:06:06 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
References: <200801011757.49297.lucene@nitwit.de> <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org> <200801012040.35900.lucene@nitwit.de>
In-Reply-To: <200801012040.35900.lucene@nitwit.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The main reason to use a single IndexReader is because its very time 
consuming to open an IndexReader. If your index is pretty static, maybe 
this is not much of a concern. Otherwise its a major concern. But lets 
say its not...then we have to assume your going to have a huge index 
(otherwise the single thread bottleneck is just not going to matter) and 
if you have a huge index, 9 times out of 10, the bottleneck will be disk 
IO and your unlikely to benefit much from multiple Readers anyway.

Perhaps, in some esoteric case, multiple readers is the right idea 
(monster, monster, super IO system, static index?? maybe...)...but 
unless you have run into this case and have some data to show it, I 
would stick with what the community currently designates as best 
practice. Otherwise, your really just getting ahead of yourself. Single 
searcher has been scaled to some pretty huge sites. More than one 
searcher is usually responsible for very slow performance.

- Mark

Timo Nentwig wrote:
> On Tuesday 01 January 2008 19:26:51 Grant Ingersoll wrote:
>   
>> My guess would be b/c best practice is usually to only have one Reader/
>> Searcher per Directory, but I don't know if that is the real reason.
>> Most discussions/testing I have seen indicate a single Reader/Searcher
>> performs best.
>>     
>
> Well, I read this (in the FAQ) that I should use only a single 
> Searcher/Reader. And I really would like to but I ran into some FSDirectory 
> IO synchronized{} bottleneck and hence (still) don't see any alternative to 
> pooling multiple seachers (which waste a lot of memory).
>
> Even LUCENE-997 doesn't produce relief here... :-\
>
> But in general, since IndexSearcher is single-threaded I don't think that this 
> a wise approach. No matter how large the index, no matter the IO system, no 
> matter how many queries you want all this to go thru a single thread? How 
> long since does a single thread plus synchronous IO scale?
>
> However I yet didn't find any discussion on this topic so I'd be glad if 
> somebody could give me a link.
>
>   
>> -Grant
>>
>> On Jan 1, 2008, at 11:57 AM, Timo Nentwig wrote:
>>     
>>> Hi!
>>>
>>> Is there are particular reason why CachingWrapperFilter caches per
>>> IndexReader
>>> and not per IndexReader.directory()? If there are multiple
>>> IndexSearcher/IndexReader instances (and only one Directory) cache
>>> will be
>>> built and held in memory redundantly. I don't see any sense in doing
>>> so (?).
>>>
>>> Thanks for hints...
>>> Timo
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>> http://www.lucenebootcamp.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 20:33:32 2008
Return-Path: <java-user-return-31718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33723 invoked from network); 1 Jan 2008 20:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 20:33:32 -0000
Received: (qmail 96452 invoked by uid 500); 1 Jan 2008 20:33:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96429 invoked by uid 500); 1 Jan 2008 20:33:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96417 invoked by uid 99); 1 Jan 2008 20:33:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 12:33:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@nitwit.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 20:32:52 +0000
Received: (qmail 19485 invoked from network); 1 Jan 2008 20:32:54 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.229.117])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 1 Jan 2008 20:32:54 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 19AFF4C06AA
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 21:32:55 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
Date: Tue, 1 Jan 2008 21:32:54 +0100
User-Agent: KMail/1.9.7
References: <200801011757.49297.lucene@nitwit.de> <200801012040.35900.lucene@nitwit.de> <477A9D2E.5010908@gmail.com>
In-Reply-To: <477A9D2E.5010908@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801012132.54945.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 01 January 2008 21:06:06 Mark Miller wrote:
> The main reason to use a single IndexReader is because its very time
> consuming to open an IndexReader. If your index is pretty static, maybe

Yes, it takes quite some time to build it and it's not changed but rebuilt 
from scratch.

> Perhaps, in some esoteric case, multiple readers is the right idea

I recently talked to a guy how stated that they'd solved their performance 
issues by breaking up the index into multiple sub-indices and searching them 
in parallel (probably using ParallelMultiSearcher)...hmm, well, I've had (and 
still have) my doubts but on the other hand what's the benefit of 
ParallelMultiSearcher if it doesn't scale better than searching a monolithic 
index?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 21:25:36 2008
Return-Path: <java-user-return-31719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58235 invoked from network); 1 Jan 2008 21:25:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 21:25:35 -0000
Received: (qmail 22564 invoked by uid 500); 1 Jan 2008 21:25:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22522 invoked by uid 500); 1 Jan 2008 21:25:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22511 invoked by uid 99); 1 Jan 2008 21:25:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 13:25:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 21:24:55 +0000
Received: by mu-out-0910.google.com with SMTP id g7so3439444muf.0
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2008 13:24:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=uKaZbC8l6js+nNrTYpfsIshU9j8vt28ObHSxkZ3V100=;
        b=uWwzS7sLt8a6L0I3f5Nopvynjo0zT86xy1ZxJWZZeSdmlGzgiDnAvOv8OsOfAJ4N38yIDkrP1N/siw9X99WGZpPM4iRQG292fIe4zrPgkqAmYcIoF1hlPlBI1k4k70MQjXLRexr4yfJ8geLYtgP+Y6Gq3OLFt5rnMV6lRYIWB7k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=FPox8D35QYECFXq/2fvi3hX/igx61Npna+34daTi34/9P/AFtppx9BGXW3HXhT826XJ0TBixYbRO6zzd96+mkdeRJv9Aos/15Jqivm3ip4+c3ayQifeCUYQP4ajySu3iJ/uut8aQ2KlNEhMu/nnPtC70tUfWEDQz7WXjL4JUq7Y=
Received: by 10.64.3.9 with SMTP id 9mr3156094qbc.0.1199222697726;
        Tue, 01 Jan 2008 13:24:57 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f12sm7663793qba.32.2008.01.01.13.24.56
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 01 Jan 2008 13:24:56 -0800 (PST)
Message-ID: <477AAFA5.40503@gmail.com>
Date: Tue, 01 Jan 2008 16:24:53 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
References: <200801011757.49297.lucene@nitwit.de> <200801012040.35900.lucene@nitwit.de> <477A9D2E.5010908@gmail.com> <200801012132.54945.lucene@nitwit.de>
In-Reply-To: <200801012132.54945.lucene@nitwit.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I believe that, in general, you'll find that ParallelMultiSearcher is 
much slower than just using a MultiSearcher. ParralelMultiSeacher is of 
use when you can put the different indexes on separate hard drives or 
even better, separate systems (using RMI or something).

- Mark

Timo Nentwig wrote:
> On Tuesday 01 January 2008 21:06:06 Mark Miller wrote:
>   
>> The main reason to use a single IndexReader is because its very time
>> consuming to open an IndexReader. If your index is pretty static, maybe
>>     
>
> Yes, it takes quite some time to build it and it's not changed but rebuilt 
> from scratch.
>
>   
>> Perhaps, in some esoteric case, multiple readers is the right idea
>>     
>
> I recently talked to a guy how stated that they'd solved their performance 
> issues by breaking up the index into multiple sub-indices and searching them 
> in parallel (probably using ParallelMultiSearcher)...hmm, well, I've had (and 
> still have) my doubts but on the other hand what's the benefit of 
> ParallelMultiSearcher if it doesn't scale better than searching a monolithic 
> index?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 21:40:43 2008
Return-Path: <java-user-return-31720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75267 invoked from network); 1 Jan 2008 21:40:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 21:40:43 -0000
Received: (qmail 27757 invoked by uid 500); 1 Jan 2008 21:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27717 invoked by uid 500); 1 Jan 2008 21:40:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27706 invoked by uid 99); 1 Jan 2008 21:40:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 13:40:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@nitwit.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 21:40:02 +0000
Received: (qmail 19136 invoked from network); 1 Jan 2008 21:40:04 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.229.117])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay08.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 1 Jan 2008 21:40:04 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 5B0374C0639
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 22:40:05 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
Date: Tue, 1 Jan 2008 22:40:05 +0100
User-Agent: KMail/1.9.7
References: <200801011757.49297.lucene@nitwit.de> <200801012132.54945.lucene@nitwit.de> <477AAFA5.40503@gmail.com>
In-Reply-To: <477AAFA5.40503@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801012240.05187.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 01 January 2008 22:24:53 Mark Miller wrote:
> I believe that, in general, you'll find that ParallelMultiSearcher is

You believe or you know? And if you know why is there a ParallelMultiSearcher  
at all? :)

And I still wonder why everybody belives and finds out on his own why isn't 
there are comprehensive collection of common knowledge and best practices for 
lucene out there?

> much slower than just using a MultiSearcher. ParralelMultiSeacher is of
> use when you can put the different indexes on separate hard drives or

Well, the index might not be on different HDs but *of couse* we're talking 
about multiple hard drives (at least some RAID, in my case it's some 
expensive netapp, however I don't know which one exactely but I can find 
out...).

> even better, separate systems (using RMI or something).
>
> - Mark
>
> Timo Nentwig wrote:
> > On Tuesday 01 January 2008 21:06:06 Mark Miller wrote:
> >> The main reason to use a single IndexReader is because its very time
> >> consuming to open an IndexReader. If your index is pretty static, maybe
> >
> > Yes, it takes quite some time to build it and it's not changed but
> > rebuilt from scratch.
> >
> >> Perhaps, in some esoteric case, multiple readers is the right idea
> >
> > I recently talked to a guy how stated that they'd solved their
> > performance issues by breaking up the index into multiple sub-indices and
> > searching them in parallel (probably using ParallelMultiSearcher)...hmm,
> > well, I've had (and still have) my doubts but on the other hand what's
> > the benefit of ParallelMultiSearcher if it doesn't scale better than
> > searching a monolithic index?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 21:53:08 2008
Return-Path: <java-user-return-31721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77898 invoked from network); 1 Jan 2008 21:53:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 21:53:08 -0000
Received: (qmail 36056 invoked by uid 500); 1 Jan 2008 21:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36029 invoked by uid 500); 1 Jan 2008 21:52:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36018 invoked by uid 99); 1 Jan 2008 21:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 13:52:50 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 21:52:25 +0000
Received: by py-out-1112.google.com with SMTP id y63so7690789pyg.9
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2008 13:52:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=xrYHpslPvtpp9HfQkh9oGAgcLF+aJ73MiWKOs1UzAto=;
        b=QsBYkqJNyitzLRnyFUMYqFu4/quTPFx/GbrYbsEuS0C5pFfaYfMSqV/eC49SO1qPA4W4af0Mxi9E5AQx3VY6Ae4eJPxFU5LtApP+6WPD+TP0cDKmzwFiGe6iKECGRmyX0mPbhcYuTLcS0v2qlo3mWb22GUZmK9se40BTw47uUFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=eWlMM4UJFEswQqaS+HkQLXP9c2SqwV4zT4T3w217WNTsjoDHCMWiKXjrVJCoZTrTFob8/uEdxPK4bVUexpflAI2OyMTNHIe8YMOMOo/FE+vFoJZ5c4lWBV1AmSYr850Xodl2y3TQ6z8jKCnRE1BmSGdrW4XB16Oa5hfRXCOGxnI=
Received: by 10.65.135.19 with SMTP id m19mr27940147qbn.63.1199224348982;
        Tue, 01 Jan 2008 13:52:28 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e14sm7757948qba.28.2008.01.01.13.52.27
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 01 Jan 2008 13:52:27 -0800 (PST)
Message-ID: <477AB618.9020103@gmail.com>
Date: Tue, 01 Jan 2008 16:52:24 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
References: <200801011757.49297.lucene@nitwit.de> <200801012132.54945.lucene@nitwit.de> <477AAFA5.40503@gmail.com> <200801012240.05187.lucene@nitwit.de>
In-Reply-To: <200801012240.05187.lucene@nitwit.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The reason there is a ParallelMusltiSearcher is because of the reasons 
given: if you are distributing your index across machines or hard 
drives, doing things in parallel is fater. I don't think RAID counts. 
RAID will do the parallelism for you with a single index.

I say I believe because its hard to be certain with Lucene...there are a 
lot of variables depending on your setup, and frankly, a lot my 
information is not hard core, but from memories of posts and work and 
playing, etc. I don't want to sound more definitive than I am. On a 
normal system, you will find ParallelMultiSearcher slower. If your 
distributing your index over multiple machines or hard drives, you will 
find it faster.

This mailing list is one of the best places for best practices: 
http://www.nabble.com/Lucene-f44.html

Search it, and you will find discussions on this very topic.

The next best place to look is the FAQ at the Lucene home page. There is 
a growing list of advice and best practices. Your still not going to 
find a lot that is definitive. A ton depends on your particular 
circumstances. There has been a lot of work done lately to make sure 
Lucene runs the best it can using out of the box defaults, but this can 
only go so far. Lucene is *very* configurable, and the best 
configuration can depend on very specific setups. The best advice is to 
try and test, try and test. If your a nut for getting things perfect, 
there is an excellent benchmark system in contrib that will help your 
efforts tremendously.

- Mark



Timo Nentwig wrote:
> On Tuesday 01 January 2008 22:24:53 Mark Miller wrote:
>   
>> I believe that, in general, you'll find that ParallelMultiSearcher is
>>     
>
> You believe or you know? And if you know why is there a ParallelMultiSearcher  
> at all? :)
>
> And I still wonder why everybody belives and finds out on his own why isn't 
> there are comprehensive collection of common knowledge and best practices for 
> lucene out there?
>
>   
>> much slower than just using a MultiSearcher. ParralelMultiSeacher is of
>> use when you can put the different indexes on separate hard drives or
>>     
>
> Well, the index might not be on different HDs but *of couse* we're talking 
> about multiple hard drives (at least some RAID, in my case it's some 
> expensive netapp, however I don't know which one exactely but I can find 
> out...).
>
>   
>> even better, separate systems (using RMI or something).
>>
>> - Mark
>>
>> Timo Nentwig wrote:
>>     
>>> On Tuesday 01 January 2008 21:06:06 Mark Miller wrote:
>>>       
>>>> The main reason to use a single IndexReader is because its very time
>>>> consuming to open an IndexReader. If your index is pretty static, maybe
>>>>         
>>> Yes, it takes quite some time to build it and it's not changed but
>>> rebuilt from scratch.
>>>
>>>       
>>>> Perhaps, in some esoteric case, multiple readers is the right idea
>>>>         
>>> I recently talked to a guy how stated that they'd solved their
>>> performance issues by breaking up the index into multiple sub-indices and
>>> searching them in parallel (probably using ParallelMultiSearcher)...hmm,
>>> well, I've had (and still have) my doubts but on the other hand what's
>>> the benefit of ParallelMultiSearcher if it doesn't scale better than
>>> searching a monolithic index?
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 22:40:57 2008
Return-Path: <java-user-return-31722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85678 invoked from network); 1 Jan 2008 22:40:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 22:40:57 -0000
Received: (qmail 56409 invoked by uid 500); 1 Jan 2008 22:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56372 invoked by uid 500); 1 Jan 2008 22:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56361 invoked by uid 99); 1 Jan 2008 22:40:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 14:40:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 22:40:17 +0000
Received: by fk-out-0910.google.com with SMTP id z23so5874636fkz.5
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2008 14:40:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=6jDNqFY9XnjjcSHu7Vjd1rSgafmf0xnY8Xq/Ewo792Q=;
        b=h9pFN41ySMwfvah1R+DEjfQF9YQEzeaSL8C0m9NCNm853lF1xSraTx0qEnBSFyCXOw8imnfkrtVl1V57e6NfM5YR8CvOV8Egk3eDaBXeVBmtHOMJ8DACj1fFoxBxHEwRB+S3VHtl4J5a66E306thp+0JjpurLCEzTWEq9n8HvdQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rqp4iNVQ6gsCYQcXLI2i34xHIAI3t/A8SQ5SFWoxDhhA55PNX5KLR212WYpvhG8eVC8BDuxYgYshnrG3py4v39ghanq+Hl5jKokXrXwSRcXoKUJI7Zi+x2eFpA4rFnbptpErNSZJUBDjQY6p6vpV7KEhLJyTLj72fAYz1f9xfXE=
Received: by 10.82.174.20 with SMTP id w20mr24446926bue.21.1199227220420;
        Tue, 01 Jan 2008 14:40:20 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 1 Jan 2008 14:40:20 -0800 (PST)
Message-ID: <359a92830801011440u3550a9cbve8b911ac860751bd@mail.gmail.com>
Date: Tue, 1 Jan 2008 17:40:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
In-Reply-To: <200801012240.05187.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21247_30248071.1199227220417"
References: <200801011757.49297.lucene@nitwit.de>
	 <200801012132.54945.lucene@nitwit.de> <477AAFA5.40503@gmail.com>
	 <200801012240.05187.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21247_30248071.1199227220417
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Jan 1, 2008 4:40 PM, Timo Nentwig <lucene@nitwit.de> wrote:

> On Tuesday 01 January 2008 22:24:53 Mark Miller wrote:
> > I believe that, in general, you'll find that ParallelMultiSearcher is
>
> You believe or you know? And if you know why is there a
> ParallelMultiSearcher
> at all? :)
>
> And I still wonder why everybody belives and finds out on his own why
> isn't
> there are comprehensive collection of common knowledge and best practices
> for
> lucene out there?


uuuh, because no one like you has made one? Lucene is *free*, and depends
upon contributors. Who volunteer their own time. Who have other jobs. We'd
all
be grateful if you would write up your experiences and contribute to help
fill
the gap....

Best
Erick


>
>
> > much slower than just using a MultiSearcher. ParralelMultiSeacher is of
> > use when you can put the different indexes on separate hard drives or
>
> Well, the index might not be on different HDs but *of couse* we're talking
> about multiple hard drives (at least some RAID, in my case it's some
> expensive netapp, however I don't know which one exactely but I can find
> out...).
>
> > even better, separate systems (using RMI or something).
> >
> > - Mark
> >
> > Timo Nentwig wrote:
> > > On Tuesday 01 January 2008 21:06:06 Mark Miller wrote:
> > >> The main reason to use a single IndexReader is because its very time
> > >> consuming to open an IndexReader. If your index is pretty static,
> maybe
> > >
> > > Yes, it takes quite some time to build it and it's not changed but
> > > rebuilt from scratch.
> > >
> > >> Perhaps, in some esoteric case, multiple readers is the right idea
> > >
> > > I recently talked to a guy how stated that they'd solved their
> > > performance issues by breaking up the index into multiple sub-indices
> and
> > > searching them in parallel (probably using
> ParallelMultiSearcher)...hmm,
> > > well, I've had (and still have) my doubts but on the other hand what's
> > > the benefit of ParallelMultiSearcher if it doesn't scale better than
> > > searching a monolithic index?
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21247_30248071.1199227220417--

From java-user-return-31723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 01 23:02:40 2008
Return-Path: <java-user-return-31723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89691 invoked from network); 1 Jan 2008 23:02:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jan 2008 23:02:40 -0000
Received: (qmail 66562 invoked by uid 500); 1 Jan 2008 23:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66519 invoked by uid 500); 1 Jan 2008 23:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66508 invoked by uid 99); 1 Jan 2008 23:02:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 15:02:23 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 23:02:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 9DA4121232
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 15:02:03 -0800 (PST)
Message-Id: <CBBB9335-DF88-4F31-8EB1-92BAEEC8B8AE@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <200801012240.05187.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
Date: Tue, 1 Jan 2008 18:02:02 -0500
References: <200801011757.49297.lucene@nitwit.de> <200801012132.54945.lucene@nitwit.de> <477AAFA5.40503@gmail.com> <200801012240.05187.lucene@nitwit.de>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 1, 2008, at 4:40 PM, Timo Nentwig wrote:

> On Tuesday 01 January 2008 22:24:53 Mark Miller wrote:
>> I believe that, in general, you'll find that ParallelMultiSearcher is
>
> You believe or you know? And if you know why is there a  
> ParallelMultiSearcher
> at all? :)
>
> And I still wonder why everybody belives and finds out on his own  
> why isn't
> there are comprehensive collection of common knowledge and best  
> practices for
> lucene out there?

http://wiki.apache.org/lucene-java/BasicsOfPerformance

Cheers,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 05:11:10 2008
Return-Path: <java-user-return-31724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92422 invoked from network); 2 Jan 2008 05:11:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 05:11:10 -0000
Received: (qmail 28359 invoked by uid 500); 2 Jan 2008 05:10:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28336 invoked by uid 500); 2 Jan 2008 05:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28313 invoked by uid 99); 2 Jan 2008 05:10:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 21:10:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 05:10:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J9vs3-0006rj-CG
	for java-user@lucene.apache.org; Tue, 01 Jan 2008 21:10:27 -0800
Message-ID: <14573890.post@talk.nabble.com>
Date: Tue, 1 Jan 2008 21:10:27 -0800 (PST)
From: CowboyX <frank.hampshire@ruleburst.com>
To: java-user@lucene.apache.org
Subject: Question about Boolean Operators
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: frank.hampshire@ruleburst.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Ive search to see if anyone has asked this before, and i couldn't find
anything. Apologies if this is a stupid question.

What's the difference between the "AND" and the "+" boolean operators. Also
the "NOT" and "-" boolean operators? Are each of these pair of operators
functionally equivalent?

>From the examples provided in the Query Syntax documentation at:
http://lucene.apache.org/java/docs/queryparsersyntax.html#Boolean%20operators
it looks as if these are the same.

Any comments would be welcome on this.
-- 
View this message in context: http://www.nabble.com/Question-about-Boolean-Operators-tp14573890p14573890.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 06:27:45 2008
Return-Path: <java-user-return-31725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83473 invoked from network); 2 Jan 2008 06:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 06:27:45 -0000
Received: (qmail 67928 invoked by uid 500); 2 Jan 2008 06:27:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67895 invoked by uid 500); 2 Jan 2008 06:27:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67884 invoked by uid 99); 2 Jan 2008 06:27:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 22:27:28 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chrislin0426@gmail.com designates 72.14.214.232 as permitted sender)
Received: from [72.14.214.232] (HELO hu-out-0506.google.com) (72.14.214.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 06:27:05 +0000
Received: by hu-out-0506.google.com with SMTP id 27so626827hub.15
        for <java-user@lucene.apache.org>; Tue, 01 Jan 2008 22:27:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Nok7BRW/rjGNbdyEHEitgLu7++FrvUhzZh7hVy+iuv0=;
        b=IGZkAqaYdDv5Tig2DALt3QQvpSBn97/ex1LeJzx86fXS48igVAkHq9QflGfybQVDsxGCd0WiVLAPiN8rEwkEdODFZShMIFQblDNYezUK5vH6YuU/7dxE05cZtQUvcinnnBLM801cUs0+xH10JQhMp+VBEKIDVoUWejhe71+Qnik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=elQeo9DjXDvUhCPR3dhD0Se/exA8HteITgN0cNIp4zPOfC0hf643hgHMu3tDBuMr8lMv3iaTHCLIi1Q+yG6aW2Gbmdn6+qMB8VJYZzvuIr6AmKfvgeaeBvDjIu5DJnSgA4cV3Iuzt+reDEZYFeat8rSmXqjww0/7iiLp1nMkzoQ=
Received: by 10.78.168.1 with SMTP id q1mr16209765hue.76.1199255227920;
        Tue, 01 Jan 2008 22:27:07 -0800 (PST)
Received: by 10.78.194.15 with HTTP; Tue, 1 Jan 2008 22:27:07 -0800 (PST)
Message-ID: <89762a530801012227na33e4fla228ab5dad20baee@mail.gmail.com>
Date: Wed, 2 Jan 2008 14:27:07 +0800
From: Chris <chrislin0426@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question about Boolean Operators
In-Reply-To: <14573890.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5923_11361896.1199255227919"
References: <14573890.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5923_11361896.1199255227919
Content-Type: text/plain; charset=BIG5
Content-Transfer-Encoding: base64
Content-Disposition: inline

RGVhciBDb3dCb3lYIC4KCiAgICBpZiB5b3UgdXNlIGx1Y2VuZSBxdWVyeSBmdW5jdGlvbiB3aXRo
IGJvb2xlYW4gcXVlcnkgLiBZb3UgY2FuIHRyeSB0byB1c2UKdGhlIEJvb2xlYW5RdWVyeSB0byBj
cmVhdGUgdGhlIGxvZ2ljIHdpdGggeW91cnNlbGYuCgogICAgTGlrZSB0aGUgY29kZaFHCiAgIEJv
b2xlYW5RdWVyeSBxdWVyeSA9IG5ldyBCb29sZWFuUXVlcnkoKTsKICAgcXVlcnkuYWRkKG5ldyBU
ZXJtUXVlcnkoKSAsIEJvb2xlYW5DbGF1c2UuT2NjdXIuTVVTVCk7ICAvLyBmb3IgKwoKICAgIG9y
CiAgICBxdWVyeS5hZGQobmV3IFRlcm1RdWVyeSgpLCBCb29sZWFuQ2xhdXNlLk9jY3VyLk1VU1Rf
Tk9UKTsgLy8gZm9yIC0KCnlvdSBjYW4gZmluZCB0aGUgaW5mb3JtYXRpb24gd2l0aCBsdWNlbmUg
amF2YWRvYwpodHRwOi8vbHVjZW5lLnpvbmVzLmFwYWNoZS5vcmc6ODA4MC9odWRzb24vam9iL0x1
Y2VuZS1OaWdodGx5L2phdmFkb2MvCgpDbGFzc2VzIHdpdGggQm9vbGVhblF1ZXJ5ICBhbmQgQm9v
bGVhbkNsYXVzZS5PY2N1cgoKYWJvdmUKCgpDaHJpcy4KCiAgU2VhcmNoIFRlYW0gaW4gUENIT01F
IGNvLiBpbiBUYWl3YW4uCgoKCjIwMDgvMS8yLCBDb3dib3lYIDxmcmFuay5oYW1wc2hpcmVAcnVs
ZWJ1cnN0LmNvbT46Cj4KPgo+IEhpLAo+Cj4gSXZlIHNlYXJjaCB0byBzZWUgaWYgYW55b25lIGhh
cyBhc2tlZCB0aGlzIGJlZm9yZSwgYW5kIGkgY291bGRuJ3QgZmluZAo+IGFueXRoaW5nLiBBcG9s
b2dpZXMgaWYgdGhpcyBpcyBhIHN0dXBpZCBxdWVzdGlvbi4KPgo+IFdoYXQncyB0aGUgZGlmZmVy
ZW5jZSBiZXR3ZWVuIHRoZSAiQU5EIiBhbmQgdGhlICIrIiBib29sZWFuIG9wZXJhdG9ycy4KPiBB
bHNvCj4gdGhlICJOT1QiIGFuZCAiLSIgYm9vbGVhbiBvcGVyYXRvcnM/IEFyZSBlYWNoIG9mIHRo
ZXNlIHBhaXIgb2Ygb3BlcmF0b3JzCj4gZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQ/Cj4KPiBGcm9t
IHRoZSBleGFtcGxlcyBwcm92aWRlZCBpbiB0aGUgUXVlcnkgU3ludGF4IGRvY3VtZW50YXRpb24g
YXQ6Cj4KPiBodHRwOi8vbHVjZW5lLmFwYWNoZS5vcmcvamF2YS9kb2NzL3F1ZXJ5cGFyc2Vyc3lu
dGF4Lmh0bWwjQm9vbGVhbiUyMG9wZXJhdG9ycwo+IGl0IGxvb2tzIGFzIGlmIHRoZXNlIGFyZSB0
aGUgc2FtZS4KPgo+IEFueSBjb21tZW50cyB3b3VsZCBiZSB3ZWxjb21lIG9uIHRoaXMuCj4gLS0K
PiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Ogo+IGh0dHA6Ly93d3cubmFiYmxlLmNvbS9R
dWVzdGlvbi1hYm91dC1Cb29sZWFuLU9wZXJhdG9ycy10cDE0NTczODkwcDE0NTczODkwLmh0bWwK
PiBTZW50IGZyb20gdGhlIEx1Y2VuZSAtIEphdmEgVXNlcnMgbWFpbGluZyBsaXN0IGFyY2hpdmUg
YXQgTmFiYmxlLmNvbS4KPgo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+
CgoKLS0gCkNocmlzIExpbgpjaHJpc2xpbjA0MjZAZ21haWwuY29tClRhaXBlaSAsIFRhaXdhbi4K
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0K
------=_Part_5923_11361896.1199255227919--

From java-user-return-31726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 07:04:23 2008
Return-Path: <java-user-return-31726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92204 invoked from network); 2 Jan 2008 07:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 07:04:23 -0000
Received: (qmail 83334 invoked by uid 500); 2 Jan 2008 07:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82369 invoked by uid 500); 2 Jan 2008 07:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82358 invoked by uid 99); 2 Jan 2008 07:04:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 23:04:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 07:03:44 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D39FB71C234; Tue,  1 Jan 2008 23:03:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D19A271C103
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 23:03:48 -0800 (PST)
Date: Tue, 1 Jan 2008 23:03:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
In-Reply-To: <200801012034.14411.lucene@nitwit.de>
Message-ID: <Pine.LNX.4.62.0801012244340.28794@radix.cryptio.net>
References: <200801011757.49297.lucene@nitwit.de> <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org>
 <d27fa17e0801011038y4a47401ancdb866a80f561789@mail.gmail.com>
 <200801012034.14411.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I suggest to use reader.directory() instead of reader as key for the 
: WeakHashMap. This way multiple IndexSearcher/IndexReacher instances would 
: share the cache.

setting aside discussion of why you should/shouldn't use a single 
IndexReader, or why the various places in the Lucene code base (like 
CachingWrapperFilter) that maintain caches using WeakHashMaps *were* built 
using the IndexReader as the key instead of reader.directory(), there are 
two fairly practical reasons why it would be a bad idea to try and do 
this...

1) there is a semi-articulated goal of moving away from "under the 
coveres" weakref caching to more explicit and controllable caching ... 
it's not such a big deal in this case since it only comes into play if the 
user uses th eclass -- but it would still be nice if user code had a way 
to actually monitor/manipulate the cache.  (it's a much bigger issue 
with things like FieldCache, see also LUCENE-831)

2) IndexReader implementations are not currently (and have never really 
been) required to return anything useful from the directory() method ... 
in the trunk, classes like MultiReader will throw an UnSupOpEx if 
directory() is called.   in older versions of Lucene, MultiReader would 
return the directory of the first sub IndexReader it was using -- which 
would result in some pretty frustrating cache key collisions if you tried 
to use the directory instead of the IndexReader itself.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 07:14:11 2008
Return-Path: <java-user-return-31727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95065 invoked from network); 2 Jan 2008 07:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 07:14:10 -0000
Received: (qmail 88902 invoked by uid 500); 2 Jan 2008 07:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88870 invoked by uid 500); 2 Jan 2008 07:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88859 invoked by uid 99); 2 Jan 2008 07:13:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 23:13:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 07:13:32 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 67F4771C1A8; Tue,  1 Jan 2008 23:13:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5EF3271C11E
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 23:13:37 -0800 (PST)
Date: Tue, 1 Jan 2008 23:13:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question about Boolean Operators
In-Reply-To: <14573890.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0801012309290.28794@radix.cryptio.net>
References: <14573890.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: What's the difference between the "AND" and the "+" boolean operators. Also
: the "NOT" and "-" boolean operators? Are each of these pair of operators
: functionally equivalent?
: 
: >From the examples provided in the Query Syntax documentation at:
: http://lucene.apache.org/java/docs/queryparsersyntax.html#Boolean%20operators
: it looks as if these are the same.

this doc may be of use to you...

http://wiki.apache.org/lucene-java/BooleanQuerySyntax

In a nut shell: BooleanQuery is not really boolean ... prefix + and - 
corrispond directly to the MUST and MUST_NOT operators of a BooleanClause 
... AND, OR and NOT make best attempts at mapping singular clause rules to 
boolean operators.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 07:39:11 2008
Return-Path: <java-user-return-31728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99549 invoked from network); 2 Jan 2008 07:39:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 07:39:11 -0000
Received: (qmail 99723 invoked by uid 500); 2 Jan 2008 07:38:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99694 invoked by uid 500); 2 Jan 2008 07:38:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99683 invoked by uid 99); 2 Jan 2008 07:38:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jan 2008 23:38:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 07:38:44 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5630371C074; Tue,  1 Jan 2008 23:38:36 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 45AD871C26E
	for <java-user@lucene.apache.org>; Tue,  1 Jan 2008 23:38:36 -0800 (PST)
Date: Tue, 1 Jan 2008 23:38:36 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: OutOfMemoryError on small search in large, simple index
In-Reply-To: <1197465947.9075.436.camel@pc977>
Message-ID: <Pine.LNX.4.62.0801012335090.28794@radix.cryptio.net>
References: <1194964649.13896.1180.camel@pc977> <200711131613.07641@danielnaber.de>
 <Pine.LNX.4.62.0711130722400.6553@radix.cryptio.net> <1197455867.9075.416.camel@pc977>
 <1197465947.9075.436.camel@pc977>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: On Wed, 2007-12-12 at 11:37 +0100, Lars Clausen wrote:

: Seems there's a reason we still use all this memory:
: SegmentReader.fakeNorms() creates the full-size array for us anyway, so
: the memory usage cannot be avoided as long as somebody asks for the
: norms array at any point.  The solution is starting to look like a patch

Minor (late) nit:  fakeNorms will reuse the same array for every field 
that doesn't have norms -- so while omiting norms from only one field may 
not save you any RAM, omiting norms for 10 fields will save you the RAM 
used by 9 of those fields.  (correct?)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 12:07:35 2008
Return-Path: <java-user-return-31729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48434 invoked from network); 2 Jan 2008 12:07:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 12:07:35 -0000
Received: (qmail 6717 invoked by uid 500); 2 Jan 2008 12:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5826 invoked by uid 500); 2 Jan 2008 12:07:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5815 invoked by uid 99); 2 Jan 2008 12:07:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 04:07:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 64.233.178.250 as permitted sender)
Received: from [64.233.178.250] (HELO hs-out-2122.google.com) (64.233.178.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 12:06:56 +0000
Received: by hs-out-2122.google.com with SMTP id 54so3617648hsz.5
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 04:07:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=JmaXfYQo66iR/F3jSOGllOCQlXbNJaGeXOur9hMW57Y=;
        b=l11/cztCGKPFZfr8xpxFNOq2xfBKh/oMoHjmMgCHHf4Jfy928gAtyWK/ex7LfJKsun5SS4bgu8PSui6o3wEJPpumWfBWPSXo8VM/9cH/ieFBIqmvbz016PVn/KqxfmZmv/dk1SxygT3TohVi6Aff5vRj+OKx0mWe6xhmfu383T4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=ps3Ds4tuYuL+3InXqgEqmfg4sVaUpkBwcXfOLuRNIsYoKZWXHP2tH38uzqjWaRI0EWt9CsgJlbgf47U4qGKKxcuc9CuXXstw/CgEosRGF+MNTbKVTmKX8u+g7jwuD3GHlF3vOH2KthAbk0tZm8g0xru+e4iE+RHGrW0wgY7mMKM=
Received: by 10.150.145.20 with SMTP id s20mr3716821ybd.5.1199275620609;
        Wed, 02 Jan 2008 04:07:00 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Wed, 2 Jan 2008 04:07:00 -0800 (PST)
Message-ID: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
Date: Wed, 2 Jan 2008 10:07:00 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Getting Start to LUCENE 2.2.0 - How to Indexing a Directory of Your WebSite.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29303_25347938.1199275620589"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29303_25347938.1199275620589
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

I'm trying to use the Lucene 2.2.0 in my webpage, I would like to create a
simple websearch field/function in my site.

I'm intalled the example of Lucene, but, there is only a Search funcional
implemented as example, not the indexing files.

I would like to know how I can create a filter to create the lucene index
files

I need to indexing, for example, a directory of my website

I created a example to try to Index a directory wirh a simple TXT file
insite it :

...
       String indexDir =
"c:\\eclipse\\workspace\\JavaSource\\br\\com\\testeLucene"    (* there is a
test.txt file with some words insite it )*

       String dataDir =
"c:\\eclipse\\workspace\\JavaSource\\br\\com\\lucene\\indexedFiles"
...

    public static int index(File indexDir, File dataDir) throws IOException
{

        if (!dataDir.exists() || !dataDir.isDirectory()) {
            throw new IOException(dataDir + "It is NOT a Directory");
        }

        IndexWriter writer = new IndexWriter(indexDir, new
StandardAnalyzer(), true);
        writer.setUseCompoundFile(false);

        indexDirectory(writer, dataDir);

        int numIndexed = writer.docCount();
        writer.optimize();
        writer.close();

        return numIndexed;
    }

All right, the Lunece indexs files were created, but, following the Lucene
Search example, I could find the words that were inside the test.txt file

Is it work ? is it right ?

If someone can help me to starting the Lucene 2.2.0 I will really appreciate
it.

Tks so much.

-- 
_______________________________________________________
Jesiel A.S. Trevisan
Email: jesieltrevisan@gmail.com.br
MSN: jesieltrevisan@hotmail.com
Skype & AIM: jesieltrevisan
YahooMessager: jesiel.trevisan
ICQ:: 46527510
_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_29303_25347938.1199275620589--

From java-user-return-31730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 12:40:13 2008
Return-Path: <java-user-return-31730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61199 invoked from network); 2 Jan 2008 12:40:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 12:40:13 -0000
Received: (qmail 29754 invoked by uid 500); 2 Jan 2008 12:39:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29383 invoked by uid 500); 2 Jan 2008 12:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29372 invoked by uid 99); 2 Jan 2008 12:39:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 04:39:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.202.182 as permitted sender)
Received: from [72.14.202.182] (HELO ro-out-1112.google.com) (72.14.202.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 12:39:31 +0000
Received: by ro-out-1112.google.com with SMTP id k5so837681rog.7
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 04:39:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=pKDp/j5gYg20BPXGmAVxpjw57uuOoK3ympILgyVrew4=;
        b=G1qLBAa75w5S8+Zh1bLSAptzaCqPqu7CdU9f45eEFiApZ0CqpRlehVncQ71d3rHLgnF//cjcqbH+ZJbDOYh2j94Ls4QyqWypN1FUAVsZUrv1JfM+RrTxazftNJcYG/5shLEJ/LweIG3XDWOxFx/TtI0ZGQcKKwENm8VyxN7TmQ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Lu+6CAV/SYWGWmkOF0PHYtHiWpHcuobYW1dWUab6jIDwZeCwBaIn6l6+ox6YueaWdRo3QqdJMfxNXP4QyCjHs9uAhcI3z4SRJ0/Sias1NvuHEj6W/e1wj1mwNBNI2N2qu0d9WdB9iKXait333CWzAQQHxbMWDT18NbdJMs8KeWU=
Received: by 10.142.237.20 with SMTP id k20mr3872744wfh.174.1199277575028;
        Wed, 02 Jan 2008 04:39:35 -0800 (PST)
Received: by 10.142.191.17 with HTTP; Wed, 2 Jan 2008 04:39:34 -0800 (PST)
Message-ID: <3126751e0801020439m258ebb85v84687b7210e151b3@mail.gmail.com>
Date: Wed, 2 Jan 2008 18:09:34 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting Start to LUCENE 2.2.0 - How to Indexing a Directory of Your WebSite.
In-Reply-To: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8485_9809171.1199277575018"
References: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8485_9809171.1199277575018
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hope this info will help..
i have just finished the task...
run the indexer
then run the seracher..
check the mail completly
these are the steps that i ahve followed..
t search directories..




* Indexer.java*



import org.apache.lucene.index.IndexWriter;

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import java.io.File;

import java.io.IOException;

import java.io.FileReader;



public class Indexer {

    public static void index(File indexDir, File dataDir) throws IOException
{

        if (!dataDir.exists() || !dataDir.isDirectory()) {

            throw new IOException(dataDir + " does not exist or is not a
directory");

        }

        IndexWriter writer = new IndexWriter(indexDir, new
StandardAnalyzer(), true);

        indexDirectory(writer, dataDir);

        writer.close();

    }



    private static void indexDirectory(IndexWriter writer, File dir) throws
IOException {

        File[] files = dir.listFiles();

    System.out.println("TOTAL NUMBER OF FILES :"+files.length);

        for (int i=0; i < files.length; i++)

        {



             File f = files[i];

            if (f.isDirectory()) {

                indexDirectory(writer, f);  // recurse

            } else if (f.getName().endsWith(".txt")) {

                indexFile(writer, f);

            }

        }

    }



    private static void indexFile(IndexWriter writer, File f) throws
IOException {



        System.out.println("Indexing " + f.getName()); /*Print the Indexed
File Names*/

        Document doc = new Document();

        doc.add(Field.Text("contents", new FileReader(f)));

        doc.add(Field.Keyword("filename", f.getCanonicalPath()));

        writer.addDocument(doc);

    }

    public static void main(String[] args) throws Exception {



    /*Create 2 new directory called TESTDir for Indexing and DataDir which
will conatain a text file which willbe indexed.*/

       File indexDir=new File("TESTDIR");/*directory where we store the
Lucene index*/

        File dataDir = new File("DataDir");/*directory that contains the
files in txt we want to index*/

        index(indexDir, dataDir);

    }

}





*Searcher.java*

import org.apache.lucene.document.Document;

import org.apache.lucene.search.IndexSearcher;

import org.apache.lucene.search.Query;

import org.apache.lucene.search.Hits;

import org.apache.lucene.store.FSDirectory;

import org.apache.lucene.store.Directory;

import org.apache.lucene.queryParser.QueryParser;

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import java.io.File;

public class Searcher {

    public static void main(String[] args) throws Exception

    {

        File indexDir = new File("TESTDIR");

        String q ="jayanth";

        if (!indexDir.exists() || !indexDir.isDirectory())

        {

            throw new Exception(indexDir + " is does not exist or is not a
directory.");

        }



            search(indexDir, q);

        }

    public static void search(File indexDir, String q)  throws Exception{

    Directory fsDir = FSDirectory.getDirectory(indexDir, false);

    IndexSearcher is = new IndexSearcher(fsDir);

    Query query = QueryParser.parse(q, "contents", new StandardAnalyzer());

    Hits hits = is.search(query);

    System.out.println("Found " + hits.length() + " document(s) that matched
query '" + q + "':");

    for (int i = 0; i < hits.length(); i++) {

        Document doc = hits.doc(i);

        System.out.println(doc.get("filename"));

    }

}

}
---------------------------------------

*Prerequistes of Lucene 1.3 to perform search.*



   1. Lucene 1.3.jar
   2. Index Directory to Hold the Indexes.
   3. Data Directory that holds the files to be indexed
   4. Mandatory Indexing of Document or Files
   5. Only Indexed Data is Searchable



Lucene 1.3. jar

Lucene1.3. jar is an API that contains all the classes and methods packed
together to perform searching.

The jar file can be downloaded from the following site:

http://archive.apache.org/dist/jakarta/lucene/binaries/

The jar file that I have used for the sample program to demonstarte Lucene
search is Lucene 1.3 final.jar.

The jar file should be available in the application jar library.

The sample program will not work if we change the location of jar
file.Thesample program will not perform search if there are
conflicting jar versions
or Duplicate jar versions.

The following steps can be followed to add a Lucene 1.3. jar to NetBeans
IDE:

   1. Right Click on your Project->Properties
   2. Project->Properties->Add jar folder
   3. Browse for Lucene 1.3 jar
   4. Click OK

The Lucene 1.3 final.jar will be added to your sample application.

To cross check just click on the libraries on the project explorer window
and confirm that Lucene1.3 final.jar is visible in the folder structure.



Index Directory to Hold the Indexes

This direcory will hold the Indexes of the data that is supplied.I have
manually created this directory .The directory should be available to the
sample application folder.

I have used NetBeans for my sample program and I have created a directory in
the following path: C:\Documents and Settings\MyWorkSpace\TryLucene

TryLucne is the name of the sample project which contains Lucene1.3final.jar
.

Create a new folder and name the folder as "IndexDir".



Data Directory that holds the files to be indexed

This Directory will hold the the Data files.The sample program will search
.txt files.

Create a new folder manually in the following path and name the folder as
"DataDir"

C:\Documents and Settings\MyWorkSpace\TryLucene

Create some sample .txt files in the "DataDir" folder.



Indexing

The sample program Indexer.java performs Indexing of the .txt files.

Build the application in NetBeansIDE

Compile the Indexer.java in NetBeans

Run the Indexer.java in NetBeans.

The output of Indexer.java displays information about

Total Number of files in the DataDir

Names of the Indexed files in DataDir.

Indexer.java program will Index all the .txt files in the DataDir folder.



Mehods in Indexer.java

   - index(File indexDir, File dataDir)

Check if  dataDir is directory throw reate a new IndexWriter

Indexed writer construstor is used which the following aruguments ()

   - indexDirectory (IndexWriter writer, File dir)----recursively call to
   index all the files in the directory.
   - indexFile (IndexWriter writer, File f) --- get the document object,
   intialise the file reader.



Searching



Specify the directory that contains the index here its is "IndexDir"

Specify the stirng that needs to be searched.

Call->search (indexDir, q); where q is a string

search (indexDir, q)


http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

http://www.dbsight.net/?q=node/47

http://www.roseindia.net/software-tutorials/detail/6533

http://static.compassframework.org/docs/latest/jdbcdirectory.html


http://blog.scalingweb.com/2007/11/03/full-text-search-for-database-using-lucene-search-engine/


http://uborik.org/files/portfolio/info340_history_places_project_full.pdf
---------------------------------------------------------------------------------------------------------------------

On Jan 2, 2008 5:37 PM, Jesiel Trevisan < jesieltrevisan@gmail.com> wrote:

> Hi everyone,
>
> I'm trying to use the Lucene 2.2.0 in my webpage, I would like to create a
> simple websearch field/function in my site.
>
> I'm intalled the example of Lucene, but, there is only a Search funcional
> implemented as example, not the indexing files.
>
> I would like to know how I can create a filter to create the lucene index
> files
>
> I need to indexing, for example, a directory of my website
>
> I created a example to try to Index a directory wirh a simple TXT file
> insite it :
>
> ...
>       String indexDir =
> "c:\\eclipse\\workspace\\JavaSource\\br\\com\\testeLucene"    (* there is
> a
> test.txt file with some words insite it )*
>
>       String dataDir =
> "c:\\eclipse\\workspace\\JavaSource\\br\\com\\lucene\\indexedFiles"
> ...
>
>    public static int index(File indexDir, File dataDir) throws IOException
> {
>
>        if (!dataDir.exists() || !dataDir.isDirectory()) {
>            throw new IOException(dataDir + "It is NOT a Directory");
>        }
>
>        IndexWriter writer = new IndexWriter(indexDir, new
> StandardAnalyzer(), true);
>        writer.setUseCompoundFile (false);
>
>        indexDirectory(writer, dataDir);
>
>        int numIndexed = writer.docCount();
>        writer.optimize();
>        writer.close();
>
>        return numIndexed;
>    }
>
> All right, the Lunece indexs files were created, but, following the Lucene
>
> Search example, I could find the words that were inside the test.txt file
>
> Is it work ? is it right ?
>
> If someone can help me to starting the Lucene 2.2.0 I will really
> appreciate
> it.
>
> Tks so much.
>
> --
> _______________________________________________________
> Jesiel A.S. Trevisan
> Email: jesieltrevisan@gmail.com.br
> MSN: jesieltrevisan@hotmail.com
> Skype & AIM: jesieltrevisan
> YahooMessager: jesiel.trevisan
> ICQ:: 46527510
> _______________________________________________________
> CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
>
> for the sole use of the intended recipient(s) and may contain confidential
> and privileged information or otherwise be protected by law. Any
> unauthorized review, use, disclosure or distribution is prohibited. If you
>
> are not the intended recipient, please contact the sender by reply e-mail
> and destroy all copies of the original message.
>

------=_Part_8485_9809171.1199277575018--

From java-user-return-31731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 14:32:07 2008
Return-Path: <java-user-return-31731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87004 invoked from network); 2 Jan 2008 14:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 14:32:07 -0000
Received: (qmail 40922 invoked by uid 500); 2 Jan 2008 14:31:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40896 invoked by uid 500); 2 Jan 2008 14:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40885 invoked by uid 99); 2 Jan 2008 14:31:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 06:31:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 72.14.202.180 as permitted sender)
Received: from [72.14.202.180] (HELO ro-out-1112.google.com) (72.14.202.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 14:31:23 +0000
Received: by ro-out-1112.google.com with SMTP id k5so854793rog.7
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 06:31:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Sgk4zB+PJ1C1wkvzh05S7hM4EUx4KWkSuhKPygAfUSA=;
        b=KOFCkF3bAgCzrfPkL+h97v2NyH6GbtF0II5ItfQ+9Cb5HXVI7DNnvQNg0kTT26i1U+h/F9+0wwNvrHA9gountBUPRAZzhFh7XIZxvnKA6vcvF5hAWqcaU4OTsPN7WBFrhjaG8pmNc8MHuGuxReOYsbCfEhHj4UbLXA4+WqDGDRw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CFISVVjPimkrDT38mbGWqFe7FfXrOjZKoZ1TVrOlja6qcXTo2VPKyob1Fwrbfz8gXVU67ZK9CSfBOPND75KMdkhPKqJqhpk6puQj4PERL319u0K0mSsD/k9eMF0FPZzLlox5izHBWUdYovVRPHAe86Q7sHMiGKyJMUFVIBXd+pw=
Received: by 10.35.44.16 with SMTP id w16mr6668956pyj.13.1199284286881;
        Wed, 02 Jan 2008 06:31:26 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Wed, 2 Jan 2008 06:31:26 -0800 (PST)
Message-ID: <2bce90af0801020631w39ab6ad1p66e79c028c2c368d@mail.gmail.com>
Date: Wed, 2 Jan 2008 12:31:26 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting Start to LUCENE 2.2.0 - How to Indexing a Directory of Your WebSite.
In-Reply-To: <3126751e0801020439m258ebb85v84687b7210e151b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29695_5369006.1199284286851"
References: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
	 <3126751e0801020439m258ebb85v84687b7210e151b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29695_5369006.1199284286851
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks.

I'm seeing many chances in this Lucene version 1.3 to 2.2.0

For example, does exists Field.Text() ... .KeyWork()... etc

On Jan 2, 2008 10:39 AM, anjana m <anjana.mprasad@gmail.com> wrote:

> Hope this info will help..
> i have just finished the task...
> run the indexer
> then run the seracher..
> check the mail completly
> these are the steps that i ahve followed..
> t search directories..
>
>
>
>
> * Indexer.java*
>
>
>
> import org.apache.lucene.index.IndexWriter;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.document.Field;
>
> import java.io.File;
>
> import java.io.IOException;
>
> import java.io.FileReader;
>
>
>
> public class Indexer {
>
>    public static void index(File indexDir, File dataDir) throws
> IOException
> {
>
>        if (!dataDir.exists() || !dataDir.isDirectory()) {
>
>            throw new IOException(dataDir + " does not exist or is not a
> directory");
>
>        }
>
>        IndexWriter writer = new IndexWriter(indexDir, new
> StandardAnalyzer(), true);
>
>        indexDirectory(writer, dataDir);
>
>        writer.close();
>
>    }
>
>
>
>    private static void indexDirectory(IndexWriter writer, File dir) throws
> IOException {
>
>        File[] files = dir.listFiles();
>
>    System.out.println("TOTAL NUMBER OF FILES :"+files.length);
>
>        for (int i=0; i < files.length; i++)
>
>        {
>
>
>
>             File f = files[i];
>
>            if (f.isDirectory()) {
>
>                indexDirectory(writer, f);  // recurse
>
>            } else if (f.getName().endsWith(".txt")) {
>
>                indexFile(writer, f);
>
>            }
>
>        }
>
>    }
>
>
>
>    private static void indexFile(IndexWriter writer, File f) throws
> IOException {
>
>
>
>        System.out.println("Indexing " + f.getName()); /*Print the Indexed
> File Names*/
>
>        Document doc = new Document();
>
>        doc.add(Field.Text("contents", new FileReader(f)));
>
>        doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>
>        writer.addDocument(doc);
>
>    }
>
>    public static void main(String[] args) throws Exception {
>
>
>
>    /*Create 2 new directory called TESTDir for Indexing and DataDir which
> will conatain a text file which willbe indexed.*/
>
>       File indexDir=new File("TESTDIR");/*directory where we store the
> Lucene index*/
>
>        File dataDir = new File("DataDir");/*directory that contains the
> files in txt we want to index*/
>
>        index(indexDir, dataDir);
>
>    }
>
> }
>
>
>
>
>
> *Searcher.java*
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.search.IndexSearcher;
>
> import org.apache.lucene.search.Query;
>
> import org.apache.lucene.search.Hits;
>
> import org.apache.lucene.store.FSDirectory;
>
> import org.apache.lucene.store.Directory;
>
> import org.apache.lucene.queryParser.QueryParser;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import java.io.File;
>
> public class Searcher {
>
>    public static void main(String[] args) throws Exception
>
>    {
>
>        File indexDir = new File("TESTDIR");
>
>        String q ="jayanth";
>
>        if (!indexDir.exists() || !indexDir.isDirectory())
>
>        {
>
>            throw new Exception(indexDir + " is does not exist or is not a
> directory.");
>
>        }
>
>
>
>            search(indexDir, q);
>
>        }
>
>    public static void search(File indexDir, String q)  throws Exception{
>
>    Directory fsDir = FSDirectory.getDirectory(indexDir, false);
>
>    IndexSearcher is = new IndexSearcher(fsDir);
>
>    Query query = QueryParser.parse(q, "contents", new StandardAnalyzer());
>
>    Hits hits = is.search(query);
>
>    System.out.println("Found " + hits.length() + " document(s) that
> matched
> query '" + q + "':");
>
>    for (int i = 0; i < hits.length(); i++) {
>
>        Document doc = hits.doc(i);
>
>        System.out.println(doc.get("filename"));
>
>    }
>
> }
>
> }
> ---------------------------------------
>
> *Prerequistes of Lucene 1.3 to perform search.*
>
>
>
>   1. Lucene 1.3.jar
>   2. Index Directory to Hold the Indexes.
>   3. Data Directory that holds the files to be indexed
>   4. Mandatory Indexing of Document or Files
>   5. Only Indexed Data is Searchable
>
>
>
> Lucene 1.3. jar
>
> Lucene1.3. jar is an API that contains all the classes and methods packed
> together to perform searching.
>
> The jar file can be downloaded from the following site:
>
> http://archive.apache.org/dist/jakarta/lucene/binaries/
>
> The jar file that I have used for the sample program to demonstarte Lucene
> search is Lucene 1.3 final.jar.
>
> The jar file should be available in the application jar library.
>
> The sample program will not work if we change the location of jar
> file.Thesample program will not perform search if there are
> conflicting jar versions
> or Duplicate jar versions.
>
> The following steps can be followed to add a Lucene 1.3. jar to NetBeans
> IDE:
>
>   1. Right Click on your Project->Properties
>   2. Project->Properties->Add jar folder
>   3. Browse for Lucene 1.3 jar
>   4. Click OK
>
> The Lucene 1.3 final.jar will be added to your sample application.
>
> To cross check just click on the libraries on the project explorer window
> and confirm that Lucene1.3 final.jar is visible in the folder structure.
>
>
>
> Index Directory to Hold the Indexes
>
> This direcory will hold the Indexes of the data that is supplied.I have
> manually created this directory .The directory should be available to the
> sample application folder.
>
> I have used NetBeans for my sample program and I have created a directory
> in
> the following path: C:\Documents and Settings\MyWorkSpace\TryLucene
>
> TryLucne is the name of the sample project which contains
> Lucene1.3final.jar
> .
>
> Create a new folder and name the folder as "IndexDir".
>
>
>
> Data Directory that holds the files to be indexed
>
> This Directory will hold the the Data files.The sample program will search
> .txt files.
>
> Create a new folder manually in the following path and name the folder as
> "DataDir"
>
> C:\Documents and Settings\MyWorkSpace\TryLucene
>
> Create some sample .txt files in the "DataDir" folder.
>
>
>
> Indexing
>
> The sample program Indexer.java performs Indexing of the .txt files.
>
> Build the application in NetBeansIDE
>
> Compile the Indexer.java in NetBeans
>
> Run the Indexer.java in NetBeans.
>
> The output of Indexer.java displays information about
>
> Total Number of files in the DataDir
>
> Names of the Indexed files in DataDir.
>
> Indexer.java program will Index all the .txt files in the DataDir folder.
>
>
>
> Mehods in Indexer.java
>
>   - index(File indexDir, File dataDir)
>
> Check if  dataDir is directory throw reate a new IndexWriter
>
> Indexed writer construstor is used which the following aruguments ()
>
>   - indexDirectory (IndexWriter writer, File dir)----recursively call to
>   index all the files in the directory.
>   - indexFile (IndexWriter writer, File f) --- get the document object,
>   intialise the file reader.
>
>
>
> Searching
>
>
>
> Specify the directory that contains the index here its is "IndexDir"
>
> Specify the stirng that needs to be searched.
>
> Call->search (indexDir, q); where q is a string
>
> search (indexDir, q)
>
>
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> http://www.dbsight.net/?q=node/47
>
> http://www.roseindia.net/software-tutorials/detail/6533
>
> http://static.compassframework.org/docs/latest/jdbcdirectory.html
>
>
>
> http://blog.scalingweb.com/2007/11/03/full-text-search-for-database-using-lucene-search-engine/
>
>
> http://uborik.org/files/portfolio/info340_history_places_project_full.pdf
>
> ---------------------------------------------------------------------------------------------------------------------
>
> On Jan 2, 2008 5:37 PM, Jesiel Trevisan < jesieltrevisan@gmail.com> wrote:
>
> > Hi everyone,
> >
> > I'm trying to use the Lucene 2.2.0 in my webpage, I would like to create
> a
> > simple websearch field/function in my site.
> >
> > I'm intalled the example of Lucene, but, there is only a Search
> funcional
> > implemented as example, not the indexing files.
> >
> > I would like to know how I can create a filter to create the lucene
> index
> > files
> >
> > I need to indexing, for example, a directory of my website
> >
> > I created a example to try to Index a directory wirh a simple TXT file
> > insite it :
> >
> > ...
> >       String indexDir =
> > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\testeLucene"    (* there
> is
> > a
> > test.txt file with some words insite it )*
> >
> >       String dataDir =
> > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\lucene\\indexedFiles"
> > ...
> >
> >    public static int index(File indexDir, File dataDir) throws
> IOException
> > {
> >
> >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> >            throw new IOException(dataDir + "It is NOT a Directory");
> >        }
> >
> >        IndexWriter writer = new IndexWriter(indexDir, new
> > StandardAnalyzer(), true);
> >        writer.setUseCompoundFile (false);
> >
> >        indexDirectory(writer, dataDir);
> >
> >        int numIndexed = writer.docCount();
> >        writer.optimize();
> >        writer.close();
> >
> >        return numIndexed;
> >    }
> >
> > All right, the Lunece indexs files were created, but, following the
> Lucene
> >
> > Search example, I could find the words that were inside the test.txtfile
> >
> > Is it work ? is it right ?
> >
> > If someone can help me to starting the Lucene 2.2.0 I will really
> > appreciate
> > it.
> >
> > Tks so much.
> >
> > --
> > _______________________________________________________
> > Jesiel A.S. Trevisan
> > Email: jesieltrevisan@gmail.com.br
> > MSN: jesieltrevisan@hotmail.com
> > Skype & AIM: jesieltrevisan
> > YahooMessager: jesiel.trevisan
> > ICQ:: 46527510
> > _______________________________________________________
> > CONFIDENTIALITY NOTICE: This e-mail message, including any attachments,
> is
> >
> > for the sole use of the intended recipient(s) and may contain
> confidential
> > and privileged information or otherwise be protected by law. Any
> > unauthorized review, use, disclosure or distribution is prohibited. If
> you
> >
> > are not the intended recipient, please contact the sender by reply
> e-mail
> > and destroy all copies of the original message.
> >
>



-- 
_______________________________________________________
Jesiel A.S. Trevisan
Email: jesieltrevisan@gmail.com.br
MSN: jesieltrevisan@hotmail.com
Skype & AIM: jesieltrevisan
YahooMessager: jesiel.trevisan
ICQ:: 46527510
_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_29695_5369006.1199284286851--

From java-user-return-31732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 15:39:37 2008
Return-Path: <java-user-return-31732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69824 invoked from network); 2 Jan 2008 15:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 15:39:37 -0000
Received: (qmail 41122 invoked by uid 500); 2 Jan 2008 15:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40557 invoked by uid 500); 2 Jan 2008 15:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40546 invoked by uid 99); 2 Jan 2008 15:39:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 07:39:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 15:38:53 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6183511fkz.5
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 07:38:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=72IFho1n2pWia8E/CC9Id52QHieO8l163gsWBzDPTIU=;
        b=LtODUnme8XYyosvpXt0oFZePikS0tdjZEslZPXF/+0uM7sieafZSDUDxf1Trkk2EwOX8Ggoo2C6hCkIEGv4Rfa4m18kLu1ol6QugSRp7JvhmMTomk7R0m3lrfOAxVyy409brfJwpgyVOO1hBPf+KEinoNhGSdrqH5MlSC7Ii7uY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Lep+j8hTNI44NNH+AvPz9O6mKL6G35ZuULKYPwxpwWTfL2QnA02M8MhvTEz2QGbeQjpI+TokNy/bjKIihH9rNDHAe9ATALqw5TBpbUwqOGM8X+zepErw5B/IevL6CcYL/8qR5dYqWFGkAhcM++ZmGYKo5xjgRd4e0oddIhXDD/4=
Received: by 10.82.186.5 with SMTP id j5mr25819188buf.16.1199288333192;
        Wed, 02 Jan 2008 07:38:53 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 2 Jan 2008 07:38:53 -0800 (PST)
Message-ID: <359a92830801020738t4b2611bfg21637b8e4f87161@mail.gmail.com>
Date: Wed, 2 Jan 2008 10:38:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting Start to LUCENE 2.2.0 - How to Indexing a Directory of Your WebSite.
In-Reply-To: <2bce90af0801020631w39ab6ad1p66e79c028c2c368d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23100_19611595.1199288333183"
References: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
	 <3126751e0801020439m258ebb85v84687b7210e151b3@mail.gmail.com>
	 <2bce90af0801020631w39ab6ad1p66e79c028c2c368d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23100_19611595.1199288333183
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, see the Lucene home page (sorry, I forget the exact link) for
the changes for the various upgrades. Especially to 1.9 and then to 2.0.

Erick

On Jan 2, 2008 9:31 AM, Jesiel Trevisan <jesieltrevisan@gmail.com> wrote:

> Thanks.
>
> I'm seeing many chances in this Lucene version 1.3 to 2.2.0
>
> For example, does exists Field.Text() ... .KeyWork()... etc
>
> On Jan 2, 2008 10:39 AM, anjana m <anjana.mprasad@gmail.com> wrote:
>
> > Hope this info will help..
> > i have just finished the task...
> > run the indexer
> > then run the seracher..
> > check the mail completly
> > these are the steps that i ahve followed..
> > t search directories..
> >
> >
> >
> >
> > * Indexer.java*
> >
> >
> >
> > import org.apache.lucene.index.IndexWriter;
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > import org.apache.lucene.document.Document;
> >
> > import org.apache.lucene.document.Field;
> >
> > import java.io.File;
> >
> > import java.io.IOException;
> >
> > import java.io.FileReader;
> >
> >
> >
> > public class Indexer {
> >
> >    public static void index(File indexDir, File dataDir) throws
> > IOException
> > {
> >
> >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> >
> >            throw new IOException(dataDir + " does not exist or is not a
> > directory");
> >
> >        }
> >
> >        IndexWriter writer = new IndexWriter(indexDir, new
> > StandardAnalyzer(), true);
> >
> >        indexDirectory(writer, dataDir);
> >
> >        writer.close();
> >
> >    }
> >
> >
> >
> >    private static void indexDirectory(IndexWriter writer, File dir)
> throws
> > IOException {
> >
> >        File[] files = dir.listFiles();
> >
> >    System.out.println("TOTAL NUMBER OF FILES :"+files.length);
> >
> >        for (int i=0; i < files.length; i++)
> >
> >        {
> >
> >
> >
> >             File f = files[i];
> >
> >            if (f.isDirectory()) {
> >
> >                indexDirectory(writer, f);  // recurse
> >
> >            } else if (f.getName().endsWith(".txt")) {
> >
> >                indexFile(writer, f);
> >
> >            }
> >
> >        }
> >
> >    }
> >
> >
> >
> >    private static void indexFile(IndexWriter writer, File f) throws
> > IOException {
> >
> >
> >
> >        System.out.println("Indexing " + f.getName()); /*Print the
> Indexed
> > File Names*/
> >
> >        Document doc = new Document();
> >
> >        doc.add(Field.Text("contents", new FileReader(f)));
> >
> >        doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> >
> >        writer.addDocument(doc);
> >
> >    }
> >
> >    public static void main(String[] args) throws Exception {
> >
> >
> >
> >    /*Create 2 new directory called TESTDir for Indexing and DataDir
> which
> > will conatain a text file which willbe indexed.*/
> >
> >       File indexDir=new File("TESTDIR");/*directory where we store the
> > Lucene index*/
> >
> >        File dataDir = new File("DataDir");/*directory that contains the
> > files in txt we want to index*/
> >
> >        index(indexDir, dataDir);
> >
> >    }
> >
> > }
> >
> >
> >
> >
> >
> > *Searcher.java*
> >
> > import org.apache.lucene.document.Document;
> >
> > import org.apache.lucene.search.IndexSearcher;
> >
> > import org.apache.lucene.search.Query;
> >
> > import org.apache.lucene.search.Hits;
> >
> > import org.apache.lucene.store.FSDirectory;
> >
> > import org.apache.lucene.store.Directory;
> >
> > import org.apache.lucene.queryParser.QueryParser;
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > import java.io.File;
> >
> > public class Searcher {
> >
> >    public static void main(String[] args) throws Exception
> >
> >    {
> >
> >        File indexDir = new File("TESTDIR");
> >
> >        String q ="jayanth";
> >
> >        if (!indexDir.exists() || !indexDir.isDirectory())
> >
> >        {
> >
> >            throw new Exception(indexDir + " is does not exist or is not
> a
> > directory.");
> >
> >        }
> >
> >
> >
> >            search(indexDir, q);
> >
> >        }
> >
> >    public static void search(File indexDir, String q)  throws Exception{
> >
> >    Directory fsDir = FSDirectory.getDirectory(indexDir, false);
> >
> >    IndexSearcher is = new IndexSearcher(fsDir);
> >
> >    Query query = QueryParser.parse(q, "contents", new
> StandardAnalyzer());
> >
> >    Hits hits = is.search(query);
> >
> >    System.out.println("Found " + hits.length() + " document(s) that
> > matched
> > query '" + q + "':");
> >
> >    for (int i = 0; i < hits.length(); i++) {
> >
> >        Document doc = hits.doc(i);
> >
> >        System.out.println(doc.get("filename"));
> >
> >    }
> >
> > }
> >
> > }
> > ---------------------------------------
> >
> > *Prerequistes of Lucene 1.3 to perform search.*
> >
> >
> >
> >   1. Lucene 1.3.jar
> >   2. Index Directory to Hold the Indexes.
> >   3. Data Directory that holds the files to be indexed
> >   4. Mandatory Indexing of Document or Files
> >   5. Only Indexed Data is Searchable
> >
> >
> >
> > Lucene 1.3. jar
> >
> > Lucene1.3. jar is an API that contains all the classes and methods
> packed
> > together to perform searching.
> >
> > The jar file can be downloaded from the following site:
> >
> > http://archive.apache.org/dist/jakarta/lucene/binaries/
> >
> > The jar file that I have used for the sample program to demonstarte
> Lucene
> > search is Lucene 1.3 final.jar.
> >
> > The jar file should be available in the application jar library.
> >
> > The sample program will not work if we change the location of jar
> > file.Thesample program will not perform search if there are
> > conflicting jar versions
> > or Duplicate jar versions.
> >
> > The following steps can be followed to add a Lucene 1.3. jar to NetBeans
> > IDE:
> >
> >   1. Right Click on your Project->Properties
> >   2. Project->Properties->Add jar folder
> >   3. Browse for Lucene 1.3 jar
> >   4. Click OK
> >
> > The Lucene 1.3 final.jar will be added to your sample application.
> >
> > To cross check just click on the libraries on the project explorer
> window
> > and confirm that Lucene1.3 final.jar is visible in the folder structure.
> >
> >
> >
> > Index Directory to Hold the Indexes
> >
> > This direcory will hold the Indexes of the data that is supplied.I have
> > manually created this directory .The directory should be available to
> the
> > sample application folder.
> >
> > I have used NetBeans for my sample program and I have created a
> directory
> > in
> > the following path: C:\Documents and Settings\MyWorkSpace\TryLucene
> >
> > TryLucne is the name of the sample project which contains
> > Lucene1.3final.jar
> > .
> >
> > Create a new folder and name the folder as "IndexDir".
> >
> >
> >
> > Data Directory that holds the files to be indexed
> >
> > This Directory will hold the the Data files.The sample program will
> search
> > .txt files.
> >
> > Create a new folder manually in the following path and name the folder
> as
> > "DataDir"
> >
> > C:\Documents and Settings\MyWorkSpace\TryLucene
> >
> > Create some sample .txt files in the "DataDir" folder.
> >
> >
> >
> > Indexing
> >
> > The sample program Indexer.java performs Indexing of the .txt files.
> >
> > Build the application in NetBeansIDE
> >
> > Compile the Indexer.java in NetBeans
> >
> > Run the Indexer.java in NetBeans.
> >
> > The output of Indexer.java displays information about
> >
> > Total Number of files in the DataDir
> >
> > Names of the Indexed files in DataDir.
> >
> > Indexer.java program will Index all the .txt files in the DataDir
> folder.
> >
> >
> >
> > Mehods in Indexer.java
> >
> >   - index(File indexDir, File dataDir)
> >
> > Check if  dataDir is directory throw reate a new IndexWriter
> >
> > Indexed writer construstor is used which the following aruguments ()
> >
> >   - indexDirectory (IndexWriter writer, File dir)----recursively call to
> >   index all the files in the directory.
> >   - indexFile (IndexWriter writer, File f) --- get the document object,
> >   intialise the file reader.
> >
> >
> >
> > Searching
> >
> >
> >
> > Specify the directory that contains the index here its is "IndexDir"
> >
> > Specify the stirng that needs to be searched.
> >
> > Call->search (indexDir, q); where q is a string
> >
> > search (indexDir, q)
> >
> >
> >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> > http://www.dbsight.net/?q=node/47
> >
> > http://www.roseindia.net/software-tutorials/detail/6533
> >
> > http://static.compassframework.org/docs/latest/jdbcdirectory.html
> >
> >
> >
> >
> http://blog.scalingweb.com/2007/11/03/full-text-search-for-database-using-lucene-search-engine/
> >
> >
> >
> http://uborik.org/files/portfolio/info340_history_places_project_full.pdf
> >
> >
> ---------------------------------------------------------------------------------------------------------------------
> >
> > On Jan 2, 2008 5:37 PM, Jesiel Trevisan < jesieltrevisan@gmail.com>
> wrote:
> >
> > > Hi everyone,
> > >
> > > I'm trying to use the Lucene 2.2.0 in my webpage, I would like to
> create
> > a
> > > simple websearch field/function in my site.
> > >
> > > I'm intalled the example of Lucene, but, there is only a Search
> > funcional
> > > implemented as example, not the indexing files.
> > >
> > > I would like to know how I can create a filter to create the lucene
> > index
> > > files
> > >
> > > I need to indexing, for example, a directory of my website
> > >
> > > I created a example to try to Index a directory wirh a simple TXT file
> > > insite it :
> > >
> > > ...
> > >       String indexDir =
> > > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\testeLucene"    (* there
> > is
> > > a
> > > test.txt file with some words insite it )*
> > >
> > >       String dataDir =
> > > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\lucene\\indexedFiles"
> > > ...
> > >
> > >    public static int index(File indexDir, File dataDir) throws
> > IOException
> > > {
> > >
> > >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> > >            throw new IOException(dataDir + "It is NOT a Directory");
> > >        }
> > >
> > >        IndexWriter writer = new IndexWriter(indexDir, new
> > > StandardAnalyzer(), true);
> > >        writer.setUseCompoundFile (false);
> > >
> > >        indexDirectory(writer, dataDir);
> > >
> > >        int numIndexed = writer.docCount();
> > >        writer.optimize();
> > >        writer.close();
> > >
> > >        return numIndexed;
> > >    }
> > >
> > > All right, the Lunece indexs files were created, but, following the
> > Lucene
> > >
> > > Search example, I could find the words that were inside the
> test.txtfile
> > >
> > > Is it work ? is it right ?
> > >
> > > If someone can help me to starting the Lucene 2.2.0 I will really
> > > appreciate
> > > it.
> > >
> > > Tks so much.
> > >
> > > --
> > > _______________________________________________________
> > > Jesiel A.S. Trevisan
> > > Email: jesieltrevisan@gmail.com.br
> > > MSN: jesieltrevisan@hotmail.com
> > > Skype & AIM: jesieltrevisan
> > > YahooMessager: jesiel.trevisan
> > > ICQ:: 46527510
> > > _______________________________________________________
> > > CONFIDENTIALITY NOTICE: This e-mail message, including any
> attachments,
> > is
> > >
> > > for the sole use of the intended recipient(s) and may contain
> > confidential
> > > and privileged information or otherwise be protected by law. Any
> > > unauthorized review, use, disclosure or distribution is prohibited. If
> > you
> > >
> > > are not the intended recipient, please contact the sender by reply
> > e-mail
> > > and destroy all copies of the original message.
> > >
> >
>
>
>
> --
> _______________________________________________________
> Jesiel A.S. Trevisan
> Email: jesieltrevisan@gmail.com.br
> MSN: jesieltrevisan@hotmail.com
> Skype & AIM: jesieltrevisan
> YahooMessager: jesiel.trevisan
> ICQ:: 46527510
> _______________________________________________________
> CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
> for the sole use of the intended recipient(s) and may contain confidential
> and privileged information or otherwise be protected by law. Any
> unauthorized review, use, disclosure or distribution is prohibited. If you
> are not the intended recipient, please contact the sender by reply e-mail
> and destroy all copies of the original message.
>

------=_Part_23100_19611595.1199288333183--

From java-user-return-31733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 19:07:45 2008
Return-Path: <java-user-return-31733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60212 invoked from network); 2 Jan 2008 19:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 19:07:45 -0000
Received: (qmail 16440 invoked by uid 500); 2 Jan 2008 19:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16414 invoked by uid 500); 2 Jan 2008 19:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16403 invoked by uid 99); 2 Jan 2008 19:07:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 11:07:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 72.14.252.156 as permitted sender)
Received: from [72.14.252.156] (HELO po-out-1718.google.com) (72.14.252.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 19:07:02 +0000
Received: by po-out-1718.google.com with SMTP id c31so4089387poi.0
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 11:07:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PCebvPEfUlsHpRziPxLTVFdzdTKB4FfYcKDd2AxNf38=;
        b=Zi9y6w1ZiMbykAZuWYTdBJSTvng7IrAIAzoUcAc02M8J26rB6UzqenMNsue+WIcn1iQ662r2k9JiWxY6yljNpacxl9+RpcJLchB0QTLX1aERrdoYgmoI0OJDr1oHEgbAOYDkr/7WWCyWX1YElegkX/xnqdhuvivCiE5p4fiwpYw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E8snf40dmIYCIqCHoLZJXWEmSPLQ5LRttzLPLHEHQw2ToPWqo3CrbsIVOhkIHZ7AoqUkX298aT6n/Tx/vEmRM3Tv0o02ropnJR43EMr+YvmpN/h8zmvOHV6lLPs9y3saw4PoYfmTbNcbt8VyLhrXmlNa1hqLnbuc+Epv/sFKbVI=
Received: by 10.140.193.16 with SMTP id q16mr7561045rvf.109.1199300824175;
        Wed, 02 Jan 2008 11:07:04 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Wed, 2 Jan 2008 11:07:04 -0800 (PST)
Message-ID: <2bce90af0801021107s16f1a65co17110170ba5e45c4@mail.gmail.com>
Date: Wed, 2 Jan 2008 17:07:04 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting Start to LUCENE 2.2.0 - How to Indexing a Directory of Your WebSite.
In-Reply-To: <359a92830801020738t4b2611bfg21637b8e4f87161@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_569_2613272.1199300824072"
References: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
	 <3126751e0801020439m258ebb85v84687b7210e151b3@mail.gmail.com>
	 <2bce90af0801020631w39ab6ad1p66e79c028c2c368d@mail.gmail.com>
	 <359a92830801020738t4b2611bfg21637b8e4f87161@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_569_2613272.1199300824072
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nice!
Now, I got the Lucene's index files and my search found the files with the
keywords.

But in this example, I can get only the search result with any keywords
entered.

Then, someone knows how I can do the search with All Keyword ?

For example, I have the keyword "house red" ... I would like to find the
current page where there is this keyword with All Words.
The pages where has ony "house" or only "red" as keywork, its will be
ignored, then, I'll have as my result all page with all words.

Someone knows how do I have to create this filter ?

Tks.

On Jan 2, 2008 1:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> Yes, see the Lucene home page (sorry, I forget the exact link) for
> the changes for the various upgrades. Especially to 1.9 and then to 2.0.
>
> Erick
>
> On Jan 2, 2008 9:31 AM, Jesiel Trevisan <jesieltrevisan@gmail.com> wrote:
>
> > Thanks.
> >
> > I'm seeing many chances in this Lucene version 1.3 to 2.2.0
> >
> > For example, does exists Field.Text() ... .KeyWork()... etc
> >
> > On Jan 2, 2008 10:39 AM, anjana m <anjana.mprasad@gmail.com> wrote:
> >
> > > Hope this info will help..
> > > i have just finished the task...
> > > run the indexer
> > > then run the seracher..
> > > check the mail completly
> > > these are the steps that i ahve followed..
> > > t search directories..
> > >
> > >
> > >
> > >
> > > * Indexer.java*
> > >
> > >
> > >
> > > import org.apache.lucene.index.IndexWriter;
> > >
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > >
> > > import org.apache.lucene.document.Document;
> > >
> > > import org.apache.lucene.document.Field;
> > >
> > > import java.io.File;
> > >
> > > import java.io.IOException;
> > >
> > > import java.io.FileReader;
> > >
> > >
> > >
> > > public class Indexer {
> > >
> > >    public static void index(File indexDir, File dataDir) throws
> > > IOException
> > > {
> > >
> > >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> > >
> > >            throw new IOException(dataDir + " does not exist or is not
> a
> > > directory");
> > >
> > >        }
> > >
> > >        IndexWriter writer = new IndexWriter(indexDir, new
> > > StandardAnalyzer(), true);
> > >
> > >        indexDirectory(writer, dataDir);
> > >
> > >        writer.close();
> > >
> > >    }
> > >
> > >
> > >
> > >    private static void indexDirectory(IndexWriter writer, File dir)
> > throws
> > > IOException {
> > >
> > >        File[] files = dir.listFiles();
> > >
> > >    System.out.println("TOTAL NUMBER OF FILES :"+files.length);
> > >
> > >        for (int i=0; i < files.length; i++)
> > >
> > >        {
> > >
> > >
> > >
> > >             File f = files[i];
> > >
> > >            if (f.isDirectory()) {
> > >
> > >                indexDirectory(writer, f);  // recurse
> > >
> > >            } else if (f.getName().endsWith(".txt")) {
> > >
> > >                indexFile(writer, f);
> > >
> > >            }
> > >
> > >        }
> > >
> > >    }
> > >
> > >
> > >
> > >    private static void indexFile(IndexWriter writer, File f) throws
> > > IOException {
> > >
> > >
> > >
> > >        System.out.println("Indexing " + f.getName()); /*Print the
> > Indexed
> > > File Names*/
> > >
> > >        Document doc = new Document();
> > >
> > >        doc.add(Field.Text("contents", new FileReader(f)));
> > >
> > >        doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> > >
> > >        writer.addDocument(doc);
> > >
> > >    }
> > >
> > >    public static void main(String[] args) throws Exception {
> > >
> > >
> > >
> > >    /*Create 2 new directory called TESTDir for Indexing and DataDir
> > which
> > > will conatain a text file which willbe indexed.*/
> > >
> > >       File indexDir=new File("TESTDIR");/*directory where we store the
> > > Lucene index*/
> > >
> > >        File dataDir = new File("DataDir");/*directory that contains
> the
> > > files in txt we want to index*/
> > >
> > >        index(indexDir, dataDir);
> > >
> > >    }
> > >
> > > }
> > >
> > >
> > >
> > >
> > >
> > > *Searcher.java*
> > >
> > > import org.apache.lucene.document.Document;
> > >
> > > import org.apache.lucene.search.IndexSearcher;
> > >
> > > import org.apache.lucene.search.Query;
> > >
> > > import org.apache.lucene.search.Hits;
> > >
> > > import org.apache.lucene.store.FSDirectory;
> > >
> > > import org.apache.lucene.store.Directory;
> > >
> > > import org.apache.lucene.queryParser.QueryParser;
> > >
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > >
> > > import java.io.File;
> > >
> > > public class Searcher {
> > >
> > >    public static void main(String[] args) throws Exception
> > >
> > >    {
> > >
> > >        File indexDir = new File("TESTDIR");
> > >
> > >        String q ="jayanth";
> > >
> > >        if (!indexDir.exists() || !indexDir.isDirectory())
> > >
> > >        {
> > >
> > >            throw new Exception(indexDir + " is does not exist or is
> not
> > a
> > > directory.");
> > >
> > >        }
> > >
> > >
> > >
> > >            search(indexDir, q);
> > >
> > >        }
> > >
> > >    public static void search(File indexDir, String q)  throws
> Exception{
> > >
> > >    Directory fsDir = FSDirectory.getDirectory(indexDir, false);
> > >
> > >    IndexSearcher is = new IndexSearcher(fsDir);
> > >
> > >    Query query = QueryParser.parse(q, "contents", new
> > StandardAnalyzer());
> > >
> > >    Hits hits = is.search(query);
> > >
> > >    System.out.println("Found " + hits.length() + " document(s) that
> > > matched
> > > query '" + q + "':");
> > >
> > >    for (int i = 0; i < hits.length(); i++) {
> > >
> > >        Document doc = hits.doc(i);
> > >
> > >        System.out.println(doc.get("filename"));
> > >
> > >    }
> > >
> > > }
> > >
> > > }
> > > ---------------------------------------
> > >
> > > *Prerequistes of Lucene 1.3 to perform search.*
> > >
> > >
> > >
> > >   1. Lucene 1.3.jar
> > >   2. Index Directory to Hold the Indexes.
> > >   3. Data Directory that holds the files to be indexed
> > >   4. Mandatory Indexing of Document or Files
> > >   5. Only Indexed Data is Searchable
> > >
> > >
> > >
> > > Lucene 1.3. jar
> > >
> > > Lucene1.3. jar is an API that contains all the classes and methods
> > packed
> > > together to perform searching.
> > >
> > > The jar file can be downloaded from the following site:
> > >
> > > http://archive.apache.org/dist/jakarta/lucene/binaries/
> > >
> > > The jar file that I have used for the sample program to demonstarte
> > Lucene
> > > search is Lucene 1.3 final.jar.
> > >
> > > The jar file should be available in the application jar library.
> > >
> > > The sample program will not work if we change the location of jar
> > > file.Thesample program will not perform search if there are
> > > conflicting jar versions
> > > or Duplicate jar versions.
> > >
> > > The following steps can be followed to add a Lucene 1.3. jar to
> NetBeans
> > > IDE:
> > >
> > >   1. Right Click on your Project->Properties
> > >   2. Project->Properties->Add jar folder
> > >   3. Browse for Lucene 1.3 jar
> > >   4. Click OK
> > >
> > > The Lucene 1.3 final.jar will be added to your sample application.
> > >
> > > To cross check just click on the libraries on the project explorer
> > window
> > > and confirm that Lucene1.3 final.jar is visible in the folder
> structure.
> > >
> > >
> > >
> > > Index Directory to Hold the Indexes
> > >
> > > This direcory will hold the Indexes of the data that is supplied.Ihave
> > > manually created this directory .The directory should be available to
> > the
> > > sample application folder.
> > >
> > > I have used NetBeans for my sample program and I have created a
> > directory
> > > in
> > > the following path: C:\Documents and Settings\MyWorkSpace\TryLucene
> > >
> > > TryLucne is the name of the sample project which contains
> > > Lucene1.3final.jar
> > > .
> > >
> > > Create a new folder and name the folder as "IndexDir".
> > >
> > >
> > >
> > > Data Directory that holds the files to be indexed
> > >
> > > This Directory will hold the the Data files.The sample program will
> > search
> > > .txt files.
> > >
> > > Create a new folder manually in the following path and name the folder
> > as
> > > "DataDir"
> > >
> > > C:\Documents and Settings\MyWorkSpace\TryLucene
> > >
> > > Create some sample .txt files in the "DataDir" folder.
> > >
> > >
> > >
> > > Indexing
> > >
> > > The sample program Indexer.java performs Indexing of the .txt files.
> > >
> > > Build the application in NetBeansIDE
> > >
> > > Compile the Indexer.java in NetBeans
> > >
> > > Run the Indexer.java in NetBeans.
> > >
> > > The output of Indexer.java displays information about
> > >
> > > Total Number of files in the DataDir
> > >
> > > Names of the Indexed files in DataDir.
> > >
> > > Indexer.java program will Index all the .txt files in the DataDir
> > folder.
> > >
> > >
> > >
> > > Mehods in Indexer.java
> > >
> > >   - index(File indexDir, File dataDir)
> > >
> > > Check if  dataDir is directory throw reate a new IndexWriter
> > >
> > > Indexed writer construstor is used which the following aruguments ()
> > >
> > >   - indexDirectory (IndexWriter writer, File dir)----recursively call
> to
> > >   index all the files in the directory.
> > >   - indexFile (IndexWriter writer, File f) --- get the document
> object,
> > >   intialise the file reader.
> > >
> > >
> > >
> > > Searching
> > >
> > >
> > >
> > > Specify the directory that contains the index here its is "IndexDir"
> > >
> > > Specify the stirng that needs to be searched.
> > >
> > > Call->search (indexDir, q); where q is a string
> > >
> > > search (indexDir, q)
> > >
> > >
> > >
> > >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > >
> > > http://www.dbsight.net/?q=node/47
> > >
> > > http://www.roseindia.net/software-tutorials/detail/6533
> > >
> > > http://static.compassframework.org/docs/latest/jdbcdirectory.html
> > >
> > >
> > >
> > >
> >
> http://blog.scalingweb.com/2007/11/03/full-text-search-for-database-using-lucene-search-engine/
> > >
> > >
> > >
> >
> http://uborik.org/files/portfolio/info340_history_places_project_full.pdf
> > >
> > >
> >
> ---------------------------------------------------------------------------------------------------------------------
> > >
> > > On Jan 2, 2008 5:37 PM, Jesiel Trevisan < jesieltrevisan@gmail.com>
> > wrote:
> > >
> > > > Hi everyone,
> > > >
> > > > I'm trying to use the Lucene 2.2.0 in my webpage, I would like to
> > create
> > > a
> > > > simple websearch field/function in my site.
> > > >
> > > > I'm intalled the example of Lucene, but, there is only a Search
> > > funcional
> > > > implemented as example, not the indexing files.
> > > >
> > > > I would like to know how I can create a filter to create the lucene
> > > index
> > > > files
> > > >
> > > > I need to indexing, for example, a directory of my website
> > > >
> > > > I created a example to try to Index a directory wirh a simple TXT
> file
> > > > insite it :
> > > >
> > > > ...
> > > >       String indexDir =
> > > > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\testeLucene"    (*
> there
> > > is
> > > > a
> > > > test.txt file with some words insite it )*
> > > >
> > > >       String dataDir =
> > > > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\lucene\\indexedFiles"
> > > > ...
> > > >
> > > >    public static int index(File indexDir, File dataDir) throws
> > > IOException
> > > > {
> > > >
> > > >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> > > >            throw new IOException(dataDir + "It is NOT a Directory");
> > > >        }
> > > >
> > > >        IndexWriter writer = new IndexWriter(indexDir, new
> > > > StandardAnalyzer(), true);
> > > >        writer.setUseCompoundFile (false);
> > > >
> > > >        indexDirectory(writer, dataDir);
> > > >
> > > >        int numIndexed = writer.docCount();
> > > >        writer.optimize();
> > > >        writer.close();
> > > >
> > > >        return numIndexed;
> > > >    }
> > > >
> > > > All right, the Lunece indexs files were created, but, following the
> > > Lucene
> > > >
> > > > Search example, I could find the words that were inside the
> > test.txtfile
> > > >
> > > > Is it work ? is it right ?
> > > >
> > > > If someone can help me to starting the Lucene 2.2.0 I will really
> > > > appreciate
> > > > it.
> > > >
> > > > Tks so much.
> > > >
> > > > --
> > > > _______________________________________________________
> > > > Jesiel A.S. Trevisan
> > > > Email: jesieltrevisan@gmail.com.br
> > > > MSN: jesieltrevisan@hotmail.com
> > > > Skype & AIM: jesieltrevisan
> > > > YahooMessager: jesiel.trevisan
> > > > ICQ:: 46527510
> > > > _______________________________________________________
> > > > CONFIDENTIALITY NOTICE: This e-mail message, including any
> > attachments,
> > > is
> > > >
> > > > for the sole use of the intended recipient(s) and may contain
> > > confidential
> > > > and privileged information or otherwise be protected by law. Any
> > > > unauthorized review, use, disclosure or distribution is prohibited.
> If
> > > you
> > > >
> > > > are not the intended recipient, please contact the sender by reply
> > > e-mail
> > > > and destroy all copies of the original message.
> > > >
> > >
> >
> >
> >
> > --
> > _______________________________________________________
> > Jesiel A.S. Trevisan
> > Email: jesieltrevisan@gmail.com.br
> > MSN: jesieltrevisan@hotmail.com
> > Skype & AIM: jesieltrevisan
> > YahooMessager: jesiel.trevisan
> > ICQ:: 46527510
> > _______________________________________________________
> > CONFIDENTIALITY NOTICE: This e-mail message, including any attachments,
> is
> > for the sole use of the intended recipient(s) and may contain
> confidential
> > and privileged information or otherwise be protected by law. Any
> > unauthorized review, use, disclosure or distribution is prohibited. If
> you
> > are not the intended recipient, please contact the sender by reply
> e-mail
> > and destroy all copies of the original message.
> >
>



-- 
_______________________________________________________
Jesiel A.S. Trevisan
Email: jesieltrevisan@gmail.com.br
MSN: jesieltrevisan@hotmail.com
Skype & AIM: jesieltrevisan
YahooMessager: jesiel.trevisan
ICQ:: 46527510
_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_569_2613272.1199300824072--

From java-user-return-31734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 19:29:15 2008
Return-Path: <java-user-return-31734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67229 invoked from network); 2 Jan 2008 19:29:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 19:29:15 -0000
Received: (qmail 51578 invoked by uid 500); 2 Jan 2008 19:28:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51539 invoked by uid 500); 2 Jan 2008 19:28:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51528 invoked by uid 99); 2 Jan 2008 19:28:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 11:28:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.237 as permitted sender)
Received: from [65.54.246.237] (HELO bay0-omc3-s37.bay0.hotmail.com) (65.54.246.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 19:28:32 +0000
Received: from BAY112-W29 ([64.4.26.129]) by bay0-omc3-s37.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 2 Jan 2008 11:28:35 -0800
Message-ID: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_7f002196-1bc3-40b3-96b4-bf6d3759f513_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Using multiple filters
Date: Thu, 3 Jan 2008 00:58:35 +0530
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Jan 2008 19:28:35.0920 (UTC) FILETIME=[AB38D500:01C84D75]
X-Virus-Checked: Checked by ClamAV on apache.org

--_7f002196-1bc3-40b3-96b4-bf6d3759f513_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi all,

I have a query related to using filters.

My search would something like this:

title:java* +pricerange:[00100 TO 01000] +daterange:[20000101 TO 20071231]

which retrieves all books with title "java" that have a price between 100 &=
 1000 and a fall between Jan 01,2000 & Dec 31,2007 daterange.

Can I use multiple filters in such a case (RangeFilter for pricerange & Que=
ryWrapperFilter for daterange)?

How do I specify multiple filters to the IndexSearcher (the API does not su=
pport it as of now)?

Note: I am even open to using RangeQuery as long as it does not hamper perf=
ormance of search. My reading of the mailing list suggests me that using fi=
lters would be better (RangeFilter) than query (RangeQuery): http://www.mai=
l-archive.com/lucene-user@jakarta.apache.org/msg10687.html



--Regards,
Rakesh S



_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D221=

--_7f002196-1bc3-40b3-96b4-bf6d3759f513_--

From java-user-return-31735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 20:08:43 2008
Return-Path: <java-user-return-31735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78219 invoked from network); 2 Jan 2008 20:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 20:08:43 -0000
Received: (qmail 17756 invoked by uid 500); 2 Jan 2008 20:08:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17725 invoked by uid 500); 2 Jan 2008 20:08:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17714 invoked by uid 99); 2 Jan 2008 20:08:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 12:08:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 20:08:01 +0000
Received: by ug-out-1314.google.com with SMTP id u40so2543320ugc.29
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 12:08:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=Kw/CD+80hR8mdDXewAKz27cVCoZ/2wgdpa81GrOApMU=;
        b=T6GjaaL7jY/BGmiowN6O0PB+eT96/OwtezTqiTqStRKQ9aS9z18sa4JUYSjW0/e8j3Rx4uXFjbvLw6BbuR1knFw5tDWi6Oho+lsCy1yd9Q4ItDBC5wcz+9jfzTMTbzePm8uC7NhzLuS7nJqZc5a4mgTPPZI1Qwst+Pwxhzhy8+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=xjc6adI5CCk0BXSpH3m+7egDOtR2YCjVJ0DjF65HKVsihWDaNq6YWbO8XuVLMLIzvJAioYdXxp0yXdA9Pow413iruVXmL9RkRLe9aWFhZbIdDPEN/gizwqCCzri4n5ClXEKeX/7243aOPZiJ6prdovYcmKlcmeJxUJl4OsNmQcg=
Received: by 10.67.116.15 with SMTP id t15mr14222505ugm.21.1199304484994;
        Wed, 02 Jan 2008 12:08:04 -0800 (PST)
Received: from ?10.0.105.71? ( [202.125.143.69])
        by mx.google.com with ESMTPS id 5sm15921870ugc.25.2008.01.02.12.08.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jan 2008 12:08:04 -0800 (PST)
Message-ID: <477BEF10.3060906@gmail.com>
Date: Thu, 03 Jan 2008 01:07:44 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Scoring in Lucene (for Precision and Recall)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am using treceval for precision, recall calculation. Treceval takes 
Relevance judgments and Result file as an arguments to calculate the 
precision, recall. There is a similarity parameter in the result file.

The score which is calculated by Lucene is equal to that similarity 
parameter. Kindly guide me.

Regards,
Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 20:11:29 2008
Return-Path: <java-user-return-31736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78836 invoked from network); 2 Jan 2008 20:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 20:11:28 -0000
Received: (qmail 21532 invoked by uid 500); 2 Jan 2008 20:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21487 invoked by uid 500); 2 Jan 2008 20:11:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21476 invoked by uid 99); 2 Jan 2008 20:11:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 12:11:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 20:10:45 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6298356fkz.5
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 12:10:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=BmoGM5jMJRs1dpSHJOnL2aTSXnphdcqqbA8EGgsfp5Y=;
        b=HOyiWBZQnL9TCREB+azoUAmP4fC2jy9YDWxQTJ8XPiZt/W3tWvozDCEEiH+25tQ3+A+4VM/VpQm8nf/prKNNQI4meOVa6pPdUsIobusLogYiycLJ6wRmje8dtel3nEvKIihCOT2AOyFsgk/sUxLHdNhMm8blJ7kVeHZSI4Dbp3U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cptZwxn8RZ1GFkGbEfwJI+1fa/FRZ5HmhF8dyx4Iy0y7K0Xsd+6QlTeFLZxlKPvki+BJLJlG9q7ckttIpLy/TSfnETFHgmq912U0paIIOerk+v0dM4z5FtwdPb2dJOC9DRVWzFgwtBDCjtlfXiKLgAzYsQf9CpPDrFDvQ0kCIFI=
Received: by 10.82.161.19 with SMTP id j19mr26285266bue.20.1199304647409;
        Wed, 02 Jan 2008 12:10:47 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 2 Jan 2008 12:10:47 -0800 (PST)
Message-ID: <359a92830801021210q5bf956b4te7067445e809fcb0@mail.gmail.com>
Date: Wed, 2 Jan 2008 15:10:47 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting Start to LUCENE 2.2.0 - How to Indexing a Directory of Your WebSite.
In-Reply-To: <2bce90af0801021107s16f1a65co17110170ba5e45c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24088_23020436.1199304647396"
References: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
	 <3126751e0801020439m258ebb85v84687b7210e151b3@mail.gmail.com>
	 <2bce90af0801020631w39ab6ad1p66e79c028c2c368d@mail.gmail.com>
	 <359a92830801020738t4b2611bfg21637b8e4f87161@mail.gmail.com>
	 <2bce90af0801021107s16f1a65co17110170ba5e45c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24088_23020436.1199304647396
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd really recommend the Lucene In Action book. True, it's based on
the 1.4 codebase, but the query syntax isn't changed.

Barring that, take a closer look at the Lucene website, the
"documentation" link on the left and you'll find this page......

http://lucene.apache.org/java/docs/queryparsersyntax.html

If you take time to poke around the website, you'll often find answers MUCH
more quickly than you will waiting around for someone to have the time to
answer e-mails, you can start here:

http://lucene.apache.org/java/docs/

And there's a wealth of information available in the searchable mail
archive,
with many topics covered in much detail. See:

http://wiki.apache.org/lucene-java/MailingListArchives


There's also a Wiki you can access from the Lucene home page.

Best
Erick

On Jan 2, 2008 2:07 PM, Jesiel Trevisan <jesieltrevisan@gmail.com> wrote:

> Nice!
> Now, I got the Lucene's index files and my search found the files with the
> keywords.
>
> But in this example, I can get only the search result with any keywords
> entered.
>
> Then, someone knows how I can do the search with All Keyword ?
>
> For example, I have the keyword "house red" ... I would like to find the
> current page where there is this keyword with All Words.
> The pages where has ony "house" or only "red" as keywork, its will be
> ignored, then, I'll have as my result all page with all words.
>
> Someone knows how do I have to create this filter ?
>
> Tks.
>
> On Jan 2, 2008 1:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > Yes, see the Lucene home page (sorry, I forget the exact link) for
> > the changes for the various upgrades. Especially to 1.9 and then to 2.0.
> >
> > Erick
> >
> > On Jan 2, 2008 9:31 AM, Jesiel Trevisan <jesieltrevisan@gmail.com>
> wrote:
> >
> > > Thanks.
> > >
> > > I'm seeing many chances in this Lucene version 1.3 to 2.2.0
> > >
> > > For example, does exists Field.Text() ... .KeyWork()... etc
> > >
> > > On Jan 2, 2008 10:39 AM, anjana m <anjana.mprasad@gmail.com> wrote:
> > >
> > > > Hope this info will help..
> > > > i have just finished the task...
> > > > run the indexer
> > > > then run the seracher..
> > > > check the mail completly
> > > > these are the steps that i ahve followed..
> > > > t search directories..
> > > >
> > > >
> > > >
> > > >
> > > > * Indexer.java*
> > > >
> > > >
> > > >
> > > > import org.apache.lucene.index.IndexWriter;
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.document.Field;
> > > >
> > > > import java.io.File;
> > > >
> > > > import java.io.IOException;
> > > >
> > > > import java.io.FileReader;
> > > >
> > > >
> > > >
> > > > public class Indexer {
> > > >
> > > >    public static void index(File indexDir, File dataDir) throws
> > > > IOException
> > > > {
> > > >
> > > >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> > > >
> > > >            throw new IOException(dataDir + " does not exist or is
> not
> > a
> > > > directory");
> > > >
> > > >        }
> > > >
> > > >        IndexWriter writer = new IndexWriter(indexDir, new
> > > > StandardAnalyzer(), true);
> > > >
> > > >        indexDirectory(writer, dataDir);
> > > >
> > > >        writer.close();
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    private static void indexDirectory(IndexWriter writer, File dir)
> > > throws
> > > > IOException {
> > > >
> > > >        File[] files = dir.listFiles();
> > > >
> > > >    System.out.println("TOTAL NUMBER OF FILES :"+files.length);
> > > >
> > > >        for (int i=0; i < files.length; i++)
> > > >
> > > >        {
> > > >
> > > >
> > > >
> > > >             File f = files[i];
> > > >
> > > >            if (f.isDirectory()) {
> > > >
> > > >                indexDirectory(writer, f);  // recurse
> > > >
> > > >            } else if (f.getName().endsWith(".txt")) {
> > > >
> > > >                indexFile(writer, f);
> > > >
> > > >            }
> > > >
> > > >        }
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    private static void indexFile(IndexWriter writer, File f) throws
> > > > IOException {
> > > >
> > > >
> > > >
> > > >        System.out.println("Indexing " + f.getName()); /*Print the
> > > Indexed
> > > > File Names*/
> > > >
> > > >        Document doc = new Document();
> > > >
> > > >        doc.add(Field.Text("contents", new FileReader(f)));
> > > >
> > > >        doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> > > >
> > > >        writer.addDocument(doc);
> > > >
> > > >    }
> > > >
> > > >    public static void main(String[] args) throws Exception {
> > > >
> > > >
> > > >
> > > >    /*Create 2 new directory called TESTDir for Indexing and DataDir
> > > which
> > > > will conatain a text file which willbe indexed.*/
> > > >
> > > >       File indexDir=new File("TESTDIR");/*directory where we store
> the
> > > > Lucene index*/
> > > >
> > > >        File dataDir = new File("DataDir");/*directory that contains
> > the
> > > > files in txt we want to index*/
> > > >
> > > >        index(indexDir, dataDir);
> > > >
> > > >    }
> > > >
> > > > }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > *Searcher.java*
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.search.IndexSearcher;
> > > >
> > > > import org.apache.lucene.search.Query;
> > > >
> > > > import org.apache.lucene.search.Hits;
> > > >
> > > > import org.apache.lucene.store.FSDirectory;
> > > >
> > > > import org.apache.lucene.store.Directory;
> > > >
> > > > import org.apache.lucene.queryParser.QueryParser;
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import java.io.File;
> > > >
> > > > public class Searcher {
> > > >
> > > >    public static void main(String[] args) throws Exception
> > > >
> > > >    {
> > > >
> > > >        File indexDir = new File("TESTDIR");
> > > >
> > > >        String q ="jayanth";
> > > >
> > > >        if (!indexDir.exists() || !indexDir.isDirectory())
> > > >
> > > >        {
> > > >
> > > >            throw new Exception(indexDir + " is does not exist or is
> > not
> > > a
> > > > directory.");
> > > >
> > > >        }
> > > >
> > > >
> > > >
> > > >            search(indexDir, q);
> > > >
> > > >        }
> > > >
> > > >    public static void search(File indexDir, String q)  throws
> > Exception{
> > > >
> > > >    Directory fsDir = FSDirectory.getDirectory(indexDir, false);
> > > >
> > > >    IndexSearcher is = new IndexSearcher(fsDir);
> > > >
> > > >    Query query = QueryParser.parse(q, "contents", new
> > > StandardAnalyzer());
> > > >
> > > >    Hits hits = is.search(query);
> > > >
> > > >    System.out.println("Found " + hits.length() + " document(s) that
> > > > matched
> > > > query '" + q + "':");
> > > >
> > > >    for (int i = 0; i < hits.length(); i++) {
> > > >
> > > >        Document doc = hits.doc(i);
> > > >
> > > >        System.out.println(doc.get("filename"));
> > > >
> > > >    }
> > > >
> > > > }
> > > >
> > > > }
> > > > ---------------------------------------
> > > >
> > > > *Prerequistes of Lucene 1.3 to perform search.*
> > > >
> > > >
> > > >
> > > >   1. Lucene 1.3.jar
> > > >   2. Index Directory to Hold the Indexes.
> > > >   3. Data Directory that holds the files to be indexed
> > > >   4. Mandatory Indexing of Document or Files
> > > >   5. Only Indexed Data is Searchable
> > > >
> > > >
> > > >
> > > > Lucene 1.3. jar
> > > >
> > > > Lucene1.3. jar is an API that contains all the classes and methods
> > > packed
> > > > together to perform searching.
> > > >
> > > > The jar file can be downloaded from the following site:
> > > >
> > > > http://archive.apache.org/dist/jakarta/lucene/binaries/
> > > >
> > > > The jar file that I have used for the sample program to demonstarte
> > > Lucene
> > > > search is Lucene 1.3 final.jar.
> > > >
> > > > The jar file should be available in the application jar library.
> > > >
> > > > The sample program will not work if we change the location of jar
> > > > file.Thesample program will not perform search if there are
> > > > conflicting jar versions
> > > > or Duplicate jar versions.
> > > >
> > > > The following steps can be followed to add a Lucene 1.3. jar to
> > NetBeans
> > > > IDE:
> > > >
> > > >   1. Right Click on your Project->Properties
> > > >   2. Project->Properties->Add jar folder
> > > >   3. Browse for Lucene 1.3 jar
> > > >   4. Click OK
> > > >
> > > > The Lucene 1.3 final.jar will be added to your sample application.
> > > >
> > > > To cross check just click on the libraries on the project explorer
> > > window
> > > > and confirm that Lucene1.3 final.jar is visible in the folder
> > structure.
> > > >
> > > >
> > > >
> > > > Index Directory to Hold the Indexes
> > > >
> > > > This direcory will hold the Indexes of the data that is
> supplied.Ihave
> > > > manually created this directory .The directory should be available
> to
> > > the
> > > > sample application folder.
> > > >
> > > > I have used NetBeans for my sample program and I have created a
> > > directory
> > > > in
> > > > the following path: C:\Documents and Settings\MyWorkSpace\TryLucene
> > > >
> > > > TryLucne is the name of the sample project which contains
> > > > Lucene1.3final.jar
> > > > .
> > > >
> > > > Create a new folder and name the folder as "IndexDir".
> > > >
> > > >
> > > >
> > > > Data Directory that holds the files to be indexed
> > > >
> > > > This Directory will hold the the Data files.The sample program will
> > > search
> > > > .txt files.
> > > >
> > > > Create a new folder manually in the following path and name the
> folder
> > > as
> > > > "DataDir"
> > > >
> > > > C:\Documents and Settings\MyWorkSpace\TryLucene
> > > >
> > > > Create some sample .txt files in the "DataDir" folder.
> > > >
> > > >
> > > >
> > > > Indexing
> > > >
> > > > The sample program Indexer.java performs Indexing of the .txt files.
> > > >
> > > > Build the application in NetBeansIDE
> > > >
> > > > Compile the Indexer.java in NetBeans
> > > >
> > > > Run the Indexer.java in NetBeans.
> > > >
> > > > The output of Indexer.java displays information about
> > > >
> > > > Total Number of files in the DataDir
> > > >
> > > > Names of the Indexed files in DataDir.
> > > >
> > > > Indexer.java program will Index all the .txt files in the DataDir
> > > folder.
> > > >
> > > >
> > > >
> > > > Mehods in Indexer.java
> > > >
> > > >   - index(File indexDir, File dataDir)
> > > >
> > > > Check if  dataDir is directory throw reate a new IndexWriter
> > > >
> > > > Indexed writer construstor is used which the following aruguments ()
> > > >
> > > >   - indexDirectory (IndexWriter writer, File dir)----recursively
> call
> > to
> > > >   index all the files in the directory.
> > > >   - indexFile (IndexWriter writer, File f) --- get the document
> > object,
> > > >   intialise the file reader.
> > > >
> > > >
> > > >
> > > > Searching
> > > >
> > > >
> > > >
> > > > Specify the directory that contains the index here its is "IndexDir"
> > > >
> > > > Specify the stirng that needs to be searched.
> > > >
> > > > Call->search (indexDir, q); where q is a string
> > > >
> > > > search (indexDir, q)
> > > >
> > > >
> > > >
> > > >
> > >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > > >
> > > > http://www.dbsight.net/?q=node/47
> > > >
> > > > http://www.roseindia.net/software-tutorials/detail/6533
> > > >
> > > > http://static.compassframework.org/docs/latest/jdbcdirectory.html
> > > >
> > > >
> > > >
> > > >
> > >
> >
> http://blog.scalingweb.com/2007/11/03/full-text-search-for-database-using-lucene-search-engine/
> > > >
> > > >
> > > >
> > >
> >
> http://uborik.org/files/portfolio/info340_history_places_project_full.pdf
> > > >
> > > >
> > >
> >
> ---------------------------------------------------------------------------------------------------------------------
> > > >
> > > > On Jan 2, 2008 5:37 PM, Jesiel Trevisan < jesieltrevisan@gmail.com>
> > > wrote:
> > > >
> > > > > Hi everyone,
> > > > >
> > > > > I'm trying to use the Lucene 2.2.0 in my webpage, I would like to
> > > create
> > > > a
> > > > > simple websearch field/function in my site.
> > > > >
> > > > > I'm intalled the example of Lucene, but, there is only a Search
> > > > funcional
> > > > > implemented as example, not the indexing files.
> > > > >
> > > > > I would like to know how I can create a filter to create the
> lucene
> > > > index
> > > > > files
> > > > >
> > > > > I need to indexing, for example, a directory of my website
> > > > >
> > > > > I created a example to try to Index a directory wirh a simple TXT
> > file
> > > > > insite it :
> > > > >
> > > > > ...
> > > > >       String indexDir =
> > > > > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\testeLucene"    (*
> > there
> > > > is
> > > > > a
> > > > > test.txt file with some words insite it )*
> > > > >
> > > > >       String dataDir =
> > > > >
> "c:\\eclipse\\workspace\\JavaSource\\br\\com\\lucene\\indexedFiles"
> > > > > ...
> > > > >
> > > > >    public static int index(File indexDir, File dataDir) throws
> > > > IOException
> > > > > {
> > > > >
> > > > >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> > > > >            throw new IOException(dataDir + "It is NOT a
> Directory");
> > > > >        }
> > > > >
> > > > >        IndexWriter writer = new IndexWriter(indexDir, new
> > > > > StandardAnalyzer(), true);
> > > > >        writer.setUseCompoundFile (false);
> > > > >
> > > > >        indexDirectory(writer, dataDir);
> > > > >
> > > > >        int numIndexed = writer.docCount();
> > > > >        writer.optimize();
> > > > >        writer.close();
> > > > >
> > > > >        return numIndexed;
> > > > >    }
> > > > >
> > > > > All right, the Lunece indexs files were created, but, following
> the
> > > > Lucene
> > > > >
> > > > > Search example, I could find the words that were inside the
> > > test.txtfile
> > > > >
> > > > > Is it work ? is it right ?
> > > > >
> > > > > If someone can help me to starting the Lucene 2.2.0 I will really
> > > > > appreciate
> > > > > it.
> > > > >
> > > > > Tks so much.
> > > > >
> > > > > --
> > > > > _______________________________________________________
> > > > > Jesiel A.S. Trevisan
> > > > > Email: jesieltrevisan@gmail.com.br
> > > > > MSN: jesieltrevisan@hotmail.com
> > > > > Skype & AIM: jesieltrevisan
> > > > > YahooMessager: jesiel.trevisan
> > > > > ICQ:: 46527510
> > > > > _______________________________________________________
> > > > > CONFIDENTIALITY NOTICE: This e-mail message, including any
> > > attachments,
> > > > is
> > > > >
> > > > > for the sole use of the intended recipient(s) and may contain
> > > > confidential
> > > > > and privileged information or otherwise be protected by law. Any
> > > > > unauthorized review, use, disclosure or distribution is
> prohibited.
> > If
> > > > you
> > > > >
> > > > > are not the intended recipient, please contact the sender by reply
> > > > e-mail
> > > > > and destroy all copies of the original message.
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > _______________________________________________________
> > > Jesiel A.S. Trevisan
> > > Email: jesieltrevisan@gmail.com.br
> > > MSN: jesieltrevisan@hotmail.com
> > > Skype & AIM: jesieltrevisan
> > > YahooMessager: jesiel.trevisan
> > > ICQ:: 46527510
> > > _______________________________________________________
> > > CONFIDENTIALITY NOTICE: This e-mail message, including any
> attachments,
> > is
> > > for the sole use of the intended recipient(s) and may contain
> > confidential
> > > and privileged information or otherwise be protected by law. Any
> > > unauthorized review, use, disclosure or distribution is prohibited. If
> > you
> > > are not the intended recipient, please contact the sender by reply
> > e-mail
> > > and destroy all copies of the original message.
> > >
> >
>
>
>
> --
> _______________________________________________________
> Jesiel A.S. Trevisan
> Email: jesieltrevisan@gmail.com.br
> MSN: jesieltrevisan@hotmail.com
> Skype & AIM: jesieltrevisan
> YahooMessager: jesiel.trevisan
> ICQ:: 46527510
> _______________________________________________________
> CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
> for the sole use of the intended recipient(s) and may contain confidential
> and privileged information or otherwise be protected by law. Any
> unauthorized review, use, disclosure or distribution is prohibited. If you
> are not the intended recipient, please contact the sender by reply e-mail
> and destroy all copies of the original message.
>

------=_Part_24088_23020436.1199304647396--

From java-user-return-31737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 20:34:47 2008
Return-Path: <java-user-return-31737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84731 invoked from network); 2 Jan 2008 20:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 20:34:47 -0000
Received: (qmail 52367 invoked by uid 500); 2 Jan 2008 20:34:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52324 invoked by uid 500); 2 Jan 2008 20:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52313 invoked by uid 99); 2 Jan 2008 20:34:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 12:34:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 20:34:02 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6308813fkz.5
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 12:34:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=I+G0qKULhUsZeV/XInJd61FtEObum0PUHI0zq/+g7Jo=;
        b=jpuHMASLxiYVs6YpAxQNuCwlbqZUBG3DoXC/QQGuzbrZYuDKLv6sNbok5N82pygmrVITq88BztJm44Ib6e0OWGQFG1XpAtUnO+8l2ryPWicYynIw264+CXNVbd6OGbNo+tMv1PxAXUqGEkIDEvxxxJVnSHWpFwRCW8VgLWRzw4E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FBr2W+THDs14QMjGdyYf5RTupmjOnXPhLsJSwVgoQaG9XT22qOecl/XDghsrRnzcWb+I7AQJC0WlV/TAvjIN63Z8Izk2P4QbZoYV0QzA7hh8Fr0e/vJGTlft2Fy/3Sft44WfoZx8V7XKxaL/KCjKps5BoPGWtNKEtIytEsO+/cM=
Received: by 10.82.174.20 with SMTP id w20mr26311697bue.28.1199306045516;
        Wed, 02 Jan 2008 12:34:05 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 2 Jan 2008 12:34:05 -0800 (PST)
Message-ID: <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com>
Date: Wed, 2 Jan 2008 15:34:05 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using multiple filters
In-Reply-To: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24218_21081045.1199306045512"
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24218_21081045.1199306045512
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you can just throw them all together in a
ChainedFilter and use the ChainedFilter wherever
your calls want a Filter.

But I haven't tried it <G>...

Erick

On Jan 2, 2008 2:28 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:

>
> Hi all,
>
> I have a query related to using filters.
>
> My search would something like this:
>
> title:java* +pricerange:[00100 TO 01000] +daterange:[20000101 TO 20071231]
>
> which retrieves all books with title "java" that have a price between 100
> & 1000 and a fall between Jan 01,2000 & Dec 31,2007 daterange.
>
> Can I use multiple filters in such a case (RangeFilter for pricerange &
> QueryWrapperFilter for daterange)?
>
> How do I specify multiple filters to the IndexSearcher (the API does not
> support it as of now)?
>
> Note: I am even open to using RangeQuery as long as it does not hamper
> performance of search. My reading of the mailing list suggests me that using
> filters would be better (RangeFilter) than query (RangeQuery):
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg10687.html
>
>
>
> --Regards,
> Rakesh S
>
>
>
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=221

------=_Part_24218_21081045.1199306045512--

From java-user-return-31738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 20:51:17 2008
Return-Path: <java-user-return-31738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89685 invoked from network); 2 Jan 2008 20:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 20:51:17 -0000
Received: (qmail 76207 invoked by uid 500); 2 Jan 2008 20:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75921 invoked by uid 500); 2 Jan 2008 20:50:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75910 invoked by uid 99); 2 Jan 2008 20:50:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 12:50:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.12.11.95] (HELO smtp006.mail.ukl.yahoo.com) (217.12.11.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 02 Jan 2008 20:50:44 +0000
Received: (qmail 6115 invoked from network); 2 Jan 2008 20:50:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=LwpYzT1vJESxoPANY/Wf1UZKGWQ6K3btd3epDd8nyqjlLSnpBsrWM2lDBekcUUci4L+4J26qzW9ZiUjkL7ZzJsb00+YUQ0g5pB53BscMqiVZVStBFofFEUovrfN0heEkQbXlNk/3YxzRlYEo/npEzpd2uhKMzuxbobox7uOoynw=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp006.mail.ukl.yahoo.com with SMTP; 2 Jan 2008 20:50:36 -0000
X-YMail-OSG: RxmVSN4VM1lR461ElNTmH8iEXjYq9wVoeUUowTUqxZ_2n23M3FBn2s.5XYzMRpMunvtMqKMoI79Wv.QnYWEBvc13xdO3MGUIz_ipa4v_aaMLh0eD
Message-ID: <477BF914.80307@yahoo.co.uk>
Date: Wed, 02 Jan 2008 20:50:28 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using multiple filters
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl> <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com>
In-Reply-To: <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

BooleanFilter in contrib is similar to ChainedFilter but just expresses 
the boolean logic using the same vocabulary as BooleanQuery ("should"s, 
"must"s and "not"s).

Cheers
Mark

Erick Erickson wrote:
> I think you can just throw them all together in a
> ChainedFilter and use the ChainedFilter wherever
> your calls want a Filter.
>
> But I haven't tried it <G>...
>
> Erick
>
> On Jan 2, 2008 2:28 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:
>
>   
>> Hi all,
>>
>> I have a query related to using filters.
>>
>> My search would something like this:
>>
>> title:java* +pricerange:[00100 TO 01000] +daterange:[20000101 TO 20071231]
>>
>> which retrieves all books with title "java" that have a price between 100
>> & 1000 and a fall between Jan 01,2000 & Dec 31,2007 daterange.
>>
>> Can I use multiple filters in such a case (RangeFilter for pricerange &
>> QueryWrapperFilter for daterange)?
>>
>> How do I specify multiple filters to the IndexSearcher (the API does not
>> support it as of now)?
>>
>> Note: I am even open to using RangeQuery as long as it does not hamper
>> performance of search. My reading of the mailing list suggests me that using
>> filters would be better (RangeFilter) than query (RangeQuery):
>> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg10687.html
>>
>>
>>
>> --Regards,
>> Rakesh S
>>
>>
>>
>> _________________________________________________________________
>> Post free property ads on Yello Classifieds now! www.yello.in
>> http://ss1.richmedia.in/recurl.asp?pid=221
>>     
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 20:58:19 2008
Return-Path: <java-user-return-31739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92713 invoked from network); 2 Jan 2008 20:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 20:58:19 -0000
Received: (qmail 86553 invoked by uid 500); 2 Jan 2008 20:58:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86527 invoked by uid 500); 2 Jan 2008 20:58:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86516 invoked by uid 99); 2 Jan 2008 20:58:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 12:58:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 20:57:37 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id EA84410BBCD
	for <java-user@lucene.apache.org>; Wed,  2 Jan 2008 12:57:41 -0800 (PST)
Message-Id: <A9A1F888-6972-4A06-928D-406E0A7B4681@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <477BEF10.3060906@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Scoring in Lucene (for Precision and Recall)
Date: Wed, 2 Jan 2008 15:57:39 -0500
References: <477BEF10.3060906@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

You might also have a look at the quality package under contrib/ 
benchmark, as it works w/ trec files, etc.  I am not sure what the  
similarity parameter is you are referring to, but if I recall (and it  
has been a while), in the rel. files the last number is either 1 or 0,  
depending on whether your system thinks the document is relevant or  
not.  Thus, you could do something like score > 0 ? 1 : 0 for  
outputting that value, or some variation of that.

If that isn't right, I would dig into some of the TREC papers,  
especially the overview paper published each conference, my guess is  
one of them will explain it in more detail, or perhaps any docs for  
the trec_eval program will.

-Grant

On Jan 2, 2008, at 3:07 PM, Liaqat Ali wrote:

> Hello,
>
> I am using treceval for precision, recall calculation. Treceval  
> takes Relevance judgments and Result file as an arguments to  
> calculate the precision, recall. There is a similarity parameter in  
> the result file.
>
> The score which is calculated by Lucene is equal to that similarity  
> parameter. Kindly guide me.
>
> Regards,
> Liaqat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 21:52:51 2008
Return-Path: <java-user-return-31740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12319 invoked from network); 2 Jan 2008 21:52:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 21:52:51 -0000
Received: (qmail 79997 invoked by uid 500); 2 Jan 2008 21:52:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79973 invoked by uid 500); 2 Jan 2008 21:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79955 invoked by uid 99); 2 Jan 2008 21:52:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 13:52:33 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 21:52:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JABVW-0002CA-Bw
	for java-user@lucene.apache.org; Wed, 02 Jan 2008 13:52:14 -0800
Message-ID: <14587056.post@talk.nabble.com>
Date: Wed, 2 Jan 2008 13:52:14 -0800 (PST)
From: CowboyX <frank.hampshire@ruleburst.com>
To: java-user@lucene.apache.org
Subject: Re: Question about Boolean Operators
In-Reply-To: <14573890.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: frank.hampshire@ruleburst.com
References: <14573890.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the responses. I think Ive got a handle on it now.

Cheers

-- 
View this message in context: http://www.nabble.com/Question-about-Boolean-Operators-tp14573890p14587056.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 23:19:14 2008
Return-Path: <java-user-return-31741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42486 invoked from network); 2 Jan 2008 23:19:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 23:19:14 -0000
Received: (qmail 79514 invoked by uid 500); 2 Jan 2008 23:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79486 invoked by uid 500); 2 Jan 2008 23:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79469 invoked by uid 99); 2 Jan 2008 23:18:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 15:18:56 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 23:18:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JACr6-0004tz-FT
	for java-user@lucene.apache.org; Wed, 02 Jan 2008 15:18:36 -0800
Message-ID: <14588320.post@talk.nabble.com>
Date: Wed, 2 Jan 2008 15:18:36 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: Example using filters
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
X-Virus-Checked: Checked by ClamAV on apache.org


I was wondering if there's a good example of using filters out there? I am
building a BooleanQuery and get a TooManyClauses exceptions, so I'm,
exploring using filters as a workaround. Any advice is appreciated. Thanks.
-- 
View this message in context: http://www.nabble.com/Example-using-filters-tp14588320p14588320.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 02 23:49:13 2008
Return-Path: <java-user-return-31742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48441 invoked from network); 2 Jan 2008 23:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2008 23:49:13 -0000
Received: (qmail 3226 invoked by uid 500); 2 Jan 2008 23:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3193 invoked by uid 500); 2 Jan 2008 23:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3182 invoked by uid 99); 2 Jan 2008 23:48:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 15:48:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.172] (HELO web51306.mail.re2.yahoo.com) (206.190.38.172)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 02 Jan 2008 23:48:32 +0000
Received: (qmail 51933 invoked by uid 60001); 2 Jan 2008 23:48:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=mh6fIAr4diXiol06x87+Xo98FL1FnCnTc01UZ/PRXu3IxR5e3Hzyu0VqJi+QflenfyIU2kGH4MvGYd7DLq6OPI16FyXXCQn2BuJu/8cwH7isEb7hnx5z7azR/rHqqye85e1qajDNrPoAByRFZT+9y5X2BlMKkWNfur02qdiV3PA=;
X-YMail-OSG: 4pZnSuMVM1mGIYE60kH8a6e2rC5v2waXcLfH6YDwMbkwWp_.E0gaYgRozCXDH9r1Vsy2Fe22lorVC27w8whx9mfzIy_hWajv.MTBTdAfbvBT2GLyOaPx6koXSY9UQNkMdtCi9tu9ScYiez0-
Received: from [67.188.0.88] by web51306.mail.re2.yahoo.com via HTTP; Wed, 02 Jan 2008 15:48:35 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 2 Jan 2008 15:48:35 -0800 (PST)
From: Ted Chen <nehcdet@yahoo.com>
Subject: modify search result scores
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-325619130-1199317715=:51581"
Message-ID: <660119.51581.qm@web51306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-325619130-1199317715=:51581
Content-Type: text/plain; charset=us-ascii

Hi,
    I'd like to make sure that my search engine can take into account of some non-content based factors.  For example, I'd like to give more score to popular docs based on # of views each document had.  Another example would be to return results with search history (e.g. if we found that most ppl searched the term "school", clicked result document A, we want to boost A up when the term school appears in query) factored in.  
   Can someone recommend a good way of doing this?

Thanks,
Ted


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
--0-325619130-1199317715=:51581--

From java-user-return-31743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 01:04:03 2008
Return-Path: <java-user-return-31743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69060 invoked from network); 3 Jan 2008 01:04:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 01:04:03 -0000
Received: (qmail 48741 invoked by uid 500); 3 Jan 2008 01:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48713 invoked by uid 500); 3 Jan 2008 01:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48702 invoked by uid 99); 3 Jan 2008 01:03:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 17:03:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 01:03:22 +0000
Received: by py-out-1112.google.com with SMTP id y63so8183691pyg.9
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 17:03:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=SbNRxLXfCAlBoxdxaqcxco2bmNgj8XUAqbC0GvLH2SE=;
        b=LysLZS20fMUuCUbV/p1qxWagBKaCy9AqQMOA5gjFHMK72o/KNaBoUG4OWV0jrYQNFvwwSeMjma5nxqiJ27meC6QTR4PUKOUElidWAEeCkw1pnXVWIR1W7ePiit0CHKm8+Xj6Rx72sM7b5I5h0zLvs3nUBmx8asqdrG2PL8W/uAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=pd7BIPzkx+B3el8O6BS2AmB54lNTWNNdtt5XOSGjlWwYA9c0z3T1z6QoDldHVaNvGqQC2SF/N+J4LXhZ7RJDBuviVhAHuUULWl9AkEHTSccaTQ0d1faw6/5a1jWz301u43IVM/BNkui2RdBEP8f9pBvQIdIhxfdbZf0thVS1g08=
Received: by 10.64.150.18 with SMTP id x18mr30945393qbd.0.1199322206617;
        Wed, 02 Jan 2008 17:03:26 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e10sm8551545qbe.12.2008.01.02.17.03.25
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 02 Jan 2008 17:03:25 -0800 (PST)
Message-ID: <477C3458.7010608@gmail.com>
Date: Wed, 02 Jan 2008 20:03:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: modify search result scores
References: <660119.51581.qm@web51306.mail.re2.yahoo.com>
In-Reply-To: <660119.51581.qm@web51306.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/function/package-summary.html 
?

Ted Chen wrote:
> Hi,
>     I'd like to make sure that my search engine can take into account of some non-content based factors.  For example, I'd like to give more score to popular docs based on # of views each document had.  Another example would be to return results with search history (e.g. if we found that most ppl searched the term "school", clicked result document A, we want to boost A up when the term school appears in query) factored in.  
>    Can someone recommend a good way of doing this?
>
> Thanks,
> Ted
>
>
>       ____________________________________________________________________________________
> Never miss a thing.  Make Yahoo your home page. 
> http://www.yahoo.com/r/hs
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 02:27:19 2008
Return-Path: <java-user-return-31744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63004 invoked from network); 3 Jan 2008 02:27:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 02:27:18 -0000
Received: (qmail 12816 invoked by uid 500); 3 Jan 2008 02:27:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12778 invoked by uid 500); 3 Jan 2008 02:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12767 invoked by uid 99); 3 Jan 2008 02:27:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 18:27:01 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 02:26:38 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6442559fkz.5
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 18:26:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=X2ySF2xZwAjdqQQwbSkH/3Cb6V2C2Tkf3/fkmMFT0SU=;
        b=nyhXQg9H28PsLvyKPPD1CcYEBggTtOAIeEW3ddInI+j/3xdtXyABtuvB4R4zJrK4PrbXwrzRENhuZilswc2VpGbRv1H9U9kqO/+UukD1x/sGTmq707N/OxqoKblYfoRmEkSxjoWbzZetanism1FOtvKint0UZAvGc3Z6IBPCsdw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=u3R/6nmzSqllblvTXuJLLxhxmKDFDJ3MElMeoOx7nXm1TvtdVTBZQOVPGhrle9fSFq25x8vEYq5v2H7BsngnbozvhPx76HDlJmsLmIXmCyrqAl75MfD/A/QDkzOp1IpsZtMuYwFH5Jjo6egaQ6O/E4cUI2vC1nR6EYsNSPf1/kw=
Received: by 10.82.112.3 with SMTP id k3mr26815444buc.15.1199327201041;
        Wed, 02 Jan 2008 18:26:41 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 2 Jan 2008 18:26:41 -0800 (PST)
Message-ID: <359a92830801021826y52ae7c97he529b0919fc45257@mail.gmail.com>
Date: Wed, 2 Jan 2008 21:26:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Example using filters
In-Reply-To: <14588320.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25067_613906.1199327201039"
References: <14588320.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25067_613906.1199327201039
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See Lucene In Action, well worth it even if it is built on an
older code base...

But it would also help if you gave us some indication of what
it is that's giving you a TooManyClauses exception. Is it a
date range? A wildcard? A ???

Best
Erick

On Jan 2, 2008 6:18 PM, tgospodinov <spamme@gospodinov.net> wrote:

>
> I was wondering if there's a good example of using filters out there? I am
> building a BooleanQuery and get a TooManyClauses exceptions, so I'm,
> exploring using filters as a workaround. Any advice is appreciated.
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Example-using-filters-tp14588320p14588320.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25067_613906.1199327201039--

From java-user-return-31745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 03:35:54 2008
Return-Path: <java-user-return-31745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84568 invoked from network); 3 Jan 2008 03:35:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 03:35:54 -0000
Received: (qmail 60259 invoked by uid 500); 3 Jan 2008 03:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60228 invoked by uid 500); 3 Jan 2008 03:35:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60216 invoked by uid 99); 3 Jan 2008 03:35:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 19:35:37 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_NEUTRAL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 03:35:22 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id 86E4911D18
	for <java-user@lucene.apache.org>; Wed,  2 Jan 2008 19:35:12 -0800 (PST)
Message-Id: <0FDEDAA5-703C-4003-8E49-F9D6F33B10E9@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8CEFEF37-F785-49D0-A9B8-DB1608ADF352@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing Wikipedia dumps
Date: Wed, 2 Jan 2008 22:35:09 -0500
References: <547045.76613.qm@web50306.mail.re2.yahoo.com> <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com> <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org> <4760E1BC.10105@cs.put.poznan.pl> <CF43AE77-406B-4575-8A09-AD784C536057@mac.com> <47623A00.5060704@cs.put.poznan.pl> <126142c0712181031o45fa19afxfa05399cb2602b91@mail.gmail.com> <8CEFEF37-F785-49D0-A9B8-DB1608ADF352@apache.org>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

I put up a patch and would appreciate testing/feedback.  It's not  
perfect, but it handles most things, I think.

-Grant

On Dec 28, 2007, at 12:19 PM, Grant Ingersoll wrote:

> See https://issues.apache.org/jira/browse/LUCENE-1103
>
>
> On Dec 18, 2007, at 1:31 PM, Marcelo Ochoa wrote:
>
>> Hi All:
>> Just to add simple hack, I had posted at my Blog an entry named
>> "Uploading WikiPedia Dumps to Oracle databases":
>> http://marceloochoa.blogspot.com/2007_12_01_archive.html
>> with instructions to upload WikiPedia Dumps to Oracle XMLDB, it
>> means transforming an XML file to an object-relational storage.
>> Finally, I added instructions to index it with Lucene Domain Index.
>> Best regards, Marcelo.
>>
>> On Dec 14, 2007 5:08 AM, Dawid Weiss <dawid.weiss@cs.put.poznan.pl>  
>> wrote:
>>>
>>> Good pointers, thanks. I asked because I did have a problem like  
>>> this a few
>>> months ago -- none of the existing parsers solved it for me (back  
>>> then).
>>>
>>> D.
>>>
>>>
>>> Petite Abeille wrote:
>>>>
>>>> On Dec 13, 2007, at 8:39 AM, Dawid Weiss wrote:
>>>>
>>>>> Just incidentally -- do you know of something that would parse the
>>>>> wikipedia markup (to plain text, for example)?
>>>>
>>>> If you find out, let us know :)
>>>>
>>>> You may want to check the partial ANTLR grammar for Wikitext:
>>>>
>>>> http://www.mediawiki.org/wiki/User:Stevage/ANTLR
>>>> http://lists.wikimedia.org/pipermail/wikitext-l/2007-December/000117.html
>>>>
>>>> This also might be of interest:
>>>>
>>>> http://www.softlab.ntua.gr/~ttsiod/buildWikipediaOffline.html
>>>>
>>>> "the nice people over at woc.fslab.de have created a standalone
>>>> wiki-markup parser which is ready for use"
>>>> http://fslab.de/svn/wpofflineclient/trunk/mediawiki_sa
>>>> There is also Text::MediawikiFormat:
>>>> http://search.cpan.org/~dprice/Text-MediawikiFormat-0.05/lib/Text/MediawikiFormat.pm
>>>>
>>>> Perhaps you will be better off processing the Wikipedia static HTML
>>>> dump, instead of the XML one:
>>>> http://static.wikipedia.org/
>>>> Not a piece of cake one way or another :(
>>>> Cheers,
>>>> PA.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> -- 
>> Marcelo F. Ochoa
>> http://marceloochoa.blogspot.com/
>> http://marcelo.ochoa.googlepages.com/home
>> ______________
>> Do you Know DBPrism? Look @ DB Prism's Web Site
>> http://www.dbprism.com.ar/index.html
>> More info?
>> Chapter 17 of the book "Programming the Oracle Database using Java &
>> Web Services"
>> http://www.amazon.com/gp/product/1555583296/
>> Chapter 21 of the book "Professional XML Databases" - Wrox Press
>> http://www.amazon.com/gp/product/1861003587/
>> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
>> http://www.oreilly.com/catalog/oracleopen/
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 05:17:44 2008
Return-Path: <java-user-return-31746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10872 invoked from network); 3 Jan 2008 05:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 05:17:44 -0000
Received: (qmail 27093 invoked by uid 500); 3 Jan 2008 05:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27052 invoked by uid 500); 3 Jan 2008 05:17:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27041 invoked by uid 99); 3 Jan 2008 05:17:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 21:17:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.202.179 as permitted sender)
Received: from [72.14.202.179] (HELO ro-out-1112.google.com) (72.14.202.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 05:16:59 +0000
Received: by ro-out-1112.google.com with SMTP id k5so997584rog.7
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 21:17:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=4ov3WOPxw3m+1z5ddYrh7J06h4CVgwNmbPF6Y5Ruo6k=;
        b=puAueYuKP+76Pq1slbOmNxJhlT3Heb2TXpSIx//GkvhvqVMOpsc93avf/CeFk6WLA2QFydQefCOM4jPz/9+qZAK7sUwoLgPpjiFnH96vh6AaTAACcIMI5IxBBtWpNNhATW3cPp03A1VCfV6kbfrwqQLAQhqM+wwOP9klgioTPf0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qcaftoIC4eGBldPzXxVO4jw8wcaboVzkAmBGH1tS9XA/o2ylkd0hOqauWJ/RKDNsvHQ5A8DBSSLZwBBd3/nGbhTdAV3Gq6FmROvMpznCxnp+nn9GQQc6R8Uw6HQi+Hxjv1l3SOXOCIUOLCT7642iGXzNaisP8kRSJScTweMkc9M=
Received: by 10.142.52.9 with SMTP id z9mr3924167wfz.237.1199337421685;
        Wed, 02 Jan 2008 21:17:01 -0800 (PST)
Received: by 10.142.199.6 with HTTP; Wed, 2 Jan 2008 21:17:01 -0800 (PST)
Message-ID: <3126751e0801022117v67873b88n3373df0e00c3edac@mail.gmail.com>
Date: Thu, 3 Jan 2008 10:47:01 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting Start to LUCENE 2.2.0 - How to Indexing a Directory of Your WebSite.
In-Reply-To: <2bce90af0801021107s16f1a65co17110170ba5e45c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24538_20202953.1199337421685"
References: <2bce90af0801020407w5d61505au2c1dd8095b440983@mail.gmail.com>
	 <3126751e0801020439m258ebb85v84687b7210e151b3@mail.gmail.com>
	 <2bce90af0801020631w39ab6ad1p66e79c028c2c368d@mail.gmail.com>
	 <359a92830801020738t4b2611bfg21637b8e4f87161@mail.gmail.com>
	 <2bce90af0801021107s16f1a65co17110170ba5e45c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24538_20202953.1199337421685
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well there is analayser...
you can modify it basedon your needs and use it..

On Jan 3, 2008 12:37 AM, Jesiel Trevisan <jesieltrevisan@gmail.com> wrote:

> Nice!
> Now, I got the Lucene's index files and my search found the files with the
> keywords.
>
> But in this example, I can get only the search result with any keywords
> entered.
>
> Then, someone knows how I can do the search with All Keyword ?
>
> For example, I have the keyword "house red" ... I would like to find the
> current page where there is this keyword with All Words.
> The pages where has ony "house" or only "red" as keywork, its will be
> ignored, then, I'll have as my result all page with all words.
>
> Someone knows how do I have to create this filter ?
>
> Tks.
>
> On Jan 2, 2008 1:38 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > Yes, see the Lucene home page (sorry, I forget the exact link) for
> > the changes for the various upgrades. Especially to 1.9 and then to 2.0.
> >
> > Erick
> >
> > On Jan 2, 2008 9:31 AM, Jesiel Trevisan <jesieltrevisan@gmail.com>
> wrote:
> >
> > > Thanks.
> > >
> > > I'm seeing many chances in this Lucene version 1.3 to 2.2.0
> > >
> > > For example, does exists Field.Text() ... .KeyWork()... etc
> > >
> > > On Jan 2, 2008 10:39 AM, anjana m <anjana.mprasad@gmail.com> wrote:
> > >
> > > > Hope this info will help..
> > > > i have just finished the task...
> > > > run the indexer
> > > > then run the seracher..
> > > > check the mail completly
> > > > these are the steps that i ahve followed..
> > > > t search directories..
> > > >
> > > >
> > > >
> > > >
> > > > * Indexer.java*
> > > >
> > > >
> > > >
> > > > import org.apache.lucene.index.IndexWriter;
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.document.Field;
> > > >
> > > > import java.io.File;
> > > >
> > > > import java.io.IOException;
> > > >
> > > > import java.io.FileReader;
> > > >
> > > >
> > > >
> > > > public class Indexer {
> > > >
> > > >    public static void index(File indexDir, File dataDir) throws
> > > > IOException
> > > > {
> > > >
> > > >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> > > >
> > > >            throw new IOException(dataDir + " does not exist or is
> not
> > a
> > > > directory");
> > > >
> > > >        }
> > > >
> > > >        IndexWriter writer = new IndexWriter(indexDir, new
> > > > StandardAnalyzer(), true);
> > > >
> > > >        indexDirectory(writer, dataDir);
> > > >
> > > >        writer.close();
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    private static void indexDirectory(IndexWriter writer, File dir)
> > > throws
> > > > IOException {
> > > >
> > > >        File[] files = dir.listFiles();
> > > >
> > > >    System.out.println("TOTAL NUMBER OF FILES :"+files.length);
> > > >
> > > >        for (int i=0; i < files.length; i++)
> > > >
> > > >        {
> > > >
> > > >
> > > >
> > > >             File f = files[i];
> > > >
> > > >            if (f.isDirectory()) {
> > > >
> > > >                indexDirectory(writer, f);  // recurse
> > > >
> > > >            } else if (f.getName().endsWith(".txt")) {
> > > >
> > > >                indexFile(writer, f);
> > > >
> > > >            }
> > > >
> > > >        }
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    private static void indexFile(IndexWriter writer, File f) throws
> > > > IOException {
> > > >
> > > >
> > > >
> > > >        System.out.println("Indexing " + f.getName()); /*Print the
> > > Indexed
> > > > File Names*/
> > > >
> > > >        Document doc = new Document();
> > > >
> > > >        doc.add(Field.Text("contents", new FileReader(f)));
> > > >
> > > >        doc.add(Field.Keyword("filename", f.getCanonicalPath()));
> > > >
> > > >        writer.addDocument(doc);
> > > >
> > > >    }
> > > >
> > > >    public static void main(String[] args) throws Exception {
> > > >
> > > >
> > > >
> > > >    /*Create 2 new directory called TESTDir for Indexing and DataDir
> > > which
> > > > will conatain a text file which willbe indexed.*/
> > > >
> > > >       File indexDir=new File("TESTDIR");/*directory where we store
> the
> > > > Lucene index*/
> > > >
> > > >        File dataDir = new File("DataDir");/*directory that contains
> > the
> > > > files in txt we want to index*/
> > > >
> > > >        index(indexDir, dataDir);
> > > >
> > > >    }
> > > >
> > > > }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > *Searcher.java*
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.search.IndexSearcher;
> > > >
> > > > import org.apache.lucene.search.Query;
> > > >
> > > > import org.apache.lucene.search.Hits;
> > > >
> > > > import org.apache.lucene.store.FSDirectory;
> > > >
> > > > import org.apache.lucene.store.Directory;
> > > >
> > > > import org.apache.lucene.queryParser.QueryParser;
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import java.io.File;
> > > >
> > > > public class Searcher {
> > > >
> > > >    public static void main(String[] args) throws Exception
> > > >
> > > >    {
> > > >
> > > >        File indexDir = new File("TESTDIR");
> > > >
> > > >        String q ="jayanth";
> > > >
> > > >        if (!indexDir.exists() || !indexDir.isDirectory())
> > > >
> > > >        {
> > > >
> > > >            throw new Exception(indexDir + " is does not exist or is
> > not
> > > a
> > > > directory.");
> > > >
> > > >        }
> > > >
> > > >
> > > >
> > > >            search(indexDir, q);
> > > >
> > > >        }
> > > >
> > > >    public static void search(File indexDir, String q)  throws
> > Exception{
> > > >
> > > >    Directory fsDir = FSDirectory.getDirectory(indexDir, false);
> > > >
> > > >    IndexSearcher is = new IndexSearcher(fsDir);
> > > >
> > > >    Query query = QueryParser.parse(q, "contents", new
> > > StandardAnalyzer());
> > > >
> > > >    Hits hits = is.search(query);
> > > >
> > > >    System.out.println("Found " + hits.length() + " document(s) that
> > > > matched
> > > > query '" + q + "':");
> > > >
> > > >    for (int i = 0; i < hits.length(); i++) {
> > > >
> > > >        Document doc = hits.doc(i);
> > > >
> > > >        System.out.println(doc.get("filename"));
> > > >
> > > >    }
> > > >
> > > > }
> > > >
> > > > }
> > > > ---------------------------------------
> > > >
> > > > *Prerequistes of Lucene 1.3 to perform search.*
> > > >
> > > >
> > > >
> > > >   1. Lucene 1.3.jar
> > > >   2. Index Directory to Hold the Indexes.
> > > >   3. Data Directory that holds the files to be indexed
> > > >   4. Mandatory Indexing of Document or Files
> > > >   5. Only Indexed Data is Searchable
> > > >
> > > >
> > > >
> > > > Lucene 1.3. jar
> > > >
> > > > Lucene1.3. jar is an API that contains all the classes and methods
> > > packed
> > > > together to perform searching.
> > > >
> > > > The jar file can be downloaded from the following site:
> > > >
> > > > http://archive.apache.org/dist/jakarta/lucene/binaries/
> > > >
> > > > The jar file that I have used for the sample program to demonstarte
> > > Lucene
> > > > search is Lucene 1.3 final.jar.
> > > >
> > > > The jar file should be available in the application jar library.
> > > >
> > > > The sample program will not work if we change the location of jar
> > > > file.Thesample program will not perform search if there are
> > > > conflicting jar versions
> > > > or Duplicate jar versions.
> > > >
> > > > The following steps can be followed to add a Lucene 1.3. jar to
> > NetBeans
> > > > IDE:
> > > >
> > > >   1. Right Click on your Project->Properties
> > > >   2. Project->Properties->Add jar folder
> > > >   3. Browse for Lucene 1.3 jar
> > > >   4. Click OK
> > > >
> > > > The Lucene 1.3 final.jar will be added to your sample application.
> > > >
> > > > To cross check just click on the libraries on the project explorer
> > > window
> > > > and confirm that Lucene1.3 final.jar is visible in the folder
> > structure.
> > > >
> > > >
> > > >
> > > > Index Directory to Hold the Indexes
> > > >
> > > > This direcory will hold the Indexes of the data that is
> supplied.Ihave
> > > > manually created this directory .The directory should be available
> to
> > > the
> > > > sample application folder.
> > > >
> > > > I have used NetBeans for my sample program and I have created a
> > > directory
> > > > in
> > > > the following path: C:\Documents and Settings\MyWorkSpace\TryLucene
> > > >
> > > > TryLucne is the name of the sample project which contains
> > > > Lucene1.3final.jar
> > > > .
> > > >
> > > > Create a new folder and name the folder as "IndexDir".
> > > >
> > > >
> > > >
> > > > Data Directory that holds the files to be indexed
> > > >
> > > > This Directory will hold the the Data files.The sample program will
> > > search
> > > > .txt files.
> > > >
> > > > Create a new folder manually in the following path and name the
> folder
> > > as
> > > > "DataDir"
> > > >
> > > > C:\Documents and Settings\MyWorkSpace\TryLucene
> > > >
> > > > Create some sample .txt files in the "DataDir" folder.
> > > >
> > > >
> > > >
> > > > Indexing
> > > >
> > > > The sample program Indexer.java performs Indexing of the .txt files.
> > > >
> > > > Build the application in NetBeansIDE
> > > >
> > > > Compile the Indexer.java in NetBeans
> > > >
> > > > Run the Indexer.java in NetBeans.
> > > >
> > > > The output of Indexer.java displays information about
> > > >
> > > > Total Number of files in the DataDir
> > > >
> > > > Names of the Indexed files in DataDir.
> > > >
> > > > Indexer.java program will Index all the .txt files in the DataDir
> > > folder.
> > > >
> > > >
> > > >
> > > > Mehods in Indexer.java
> > > >
> > > >   - index(File indexDir, File dataDir)
> > > >
> > > > Check if  dataDir is directory throw reate a new IndexWriter
> > > >
> > > > Indexed writer construstor is used which the following aruguments ()
> > > >
> > > >   - indexDirectory (IndexWriter writer, File dir)----recursively
> call
> > to
> > > >   index all the files in the directory.
> > > >   - indexFile (IndexWriter writer, File f) --- get the document
> > object,
> > > >   intialise the file reader.
> > > >
> > > >
> > > >
> > > > Searching
> > > >
> > > >
> > > >
> > > > Specify the directory that contains the index here its is "IndexDir"
> > > >
> > > > Specify the stirng that needs to be searched.
> > > >
> > > > Call->search (indexDir, q); where q is a string
> > > >
> > > > search (indexDir, q)
> > > >
> > > >
> > > >
> > > >
> > >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > > >
> > > > http://www.dbsight.net/?q=node/47
> > > >
> > > > http://www.roseindia.net/software-tutorials/detail/6533
> > > >
> > > > http://static.compassframework.org/docs/latest/jdbcdirectory.html
> > > >
> > > >
> > > >
> > > >
> > >
> >
> http://blog.scalingweb.com/2007/11/03/full-text-search-for-database-using-lucene-search-engine/
> > > >
> > > >
> > > >
> > >
> >
> http://uborik.org/files/portfolio/info340_history_places_project_full.pdf
> > > >
> > > >
> > >
> >
> ---------------------------------------------------------------------------------------------------------------------
> > > >
> > > > On Jan 2, 2008 5:37 PM, Jesiel Trevisan < jesieltrevisan@gmail.com>
> > > wrote:
> > > >
> > > > > Hi everyone,
> > > > >
> > > > > I'm trying to use the Lucene 2.2.0 in my webpage, I would like to
> > > create
> > > > a
> > > > > simple websearch field/function in my site.
> > > > >
> > > > > I'm intalled the example of Lucene, but, there is only a Search
> > > > funcional
> > > > > implemented as example, not the indexing files.
> > > > >
> > > > > I would like to know how I can create a filter to create the
> lucene
> > > > index
> > > > > files
> > > > >
> > > > > I need to indexing, for example, a directory of my website
> > > > >
> > > > > I created a example to try to Index a directory wirh a simple TXT
> > file
> > > > > insite it :
> > > > >
> > > > > ...
> > > > >       String indexDir =
> > > > > "c:\\eclipse\\workspace\\JavaSource\\br\\com\\testeLucene"    (*
> > there
> > > > is
> > > > > a
> > > > > test.txt file with some words insite it )*
> > > > >
> > > > >       String dataDir =
> > > > >
> "c:\\eclipse\\workspace\\JavaSource\\br\\com\\lucene\\indexedFiles"
> > > > > ...
> > > > >
> > > > >    public static int index(File indexDir, File dataDir) throws
> > > > IOException
> > > > > {
> > > > >
> > > > >        if (!dataDir.exists() || !dataDir.isDirectory()) {
> > > > >            throw new IOException(dataDir + "It is NOT a
> Directory");
> > > > >        }
> > > > >
> > > > >        IndexWriter writer = new IndexWriter(indexDir, new
> > > > > StandardAnalyzer(), true);
> > > > >        writer.setUseCompoundFile (false);
> > > > >
> > > > >        indexDirectory(writer, dataDir);
> > > > >
> > > > >        int numIndexed = writer.docCount();
> > > > >        writer.optimize();
> > > > >        writer.close();
> > > > >
> > > > >        return numIndexed;
> > > > >    }
> > > > >
> > > > > All right, the Lunece indexs files were created, but, following
> the
> > > > Lucene
> > > > >
> > > > > Search example, I could find the words that were inside the
> > > test.txtfile
> > > > >
> > > > > Is it work ? is it right ?
> > > > >
> > > > > If someone can help me to starting the Lucene 2.2.0 I will really
> > > > > appreciate
> > > > > it.
> > > > >
> > > > > Tks so much.
> > > > >
> > > > > --
> > > > > _______________________________________________________
> > > > > Jesiel A.S. Trevisan
> > > > > Email: jesieltrevisan@gmail.com.br
> > > > > MSN: jesieltrevisan@hotmail.com
> > > > > Skype & AIM: jesieltrevisan
> > > > > YahooMessager: jesiel.trevisan
> > > > > ICQ:: 46527510
> > > > > _______________________________________________________
> > > > > CONFIDENTIALITY NOTICE: This e-mail message, including any
> > > attachments,
> > > > is
> > > > >
> > > > > for the sole use of the intended recipient(s) and may contain
> > > > confidential
> > > > > and privileged information or otherwise be protected by law. Any
> > > > > unauthorized review, use, disclosure or distribution is
> prohibited.
> > If
> > > > you
> > > > >
> > > > > are not the intended recipient, please contact the sender by reply
> > > > e-mail
> > > > > and destroy all copies of the original message.
> > > > >
> > > >
> > >
> > >
> > >
> > > --
> > > _______________________________________________________
> > > Jesiel A.S. Trevisan
> > > Email: jesieltrevisan@gmail.com.br
> > > MSN: jesieltrevisan@hotmail.com
> > > Skype & AIM: jesieltrevisan
> > > YahooMessager: jesiel.trevisan
> > > ICQ:: 46527510
> > > _______________________________________________________
> > > CONFIDENTIALITY NOTICE: This e-mail message, including any
> attachments,
> > is
> > > for the sole use of the intended recipient(s) and may contain
> > confidential
> > > and privileged information or otherwise be protected by law. Any
> > > unauthorized review, use, disclosure or distribution is prohibited. If
> > you
> > > are not the intended recipient, please contact the sender by reply
> > e-mail
> > > and destroy all copies of the original message.
> > >
> >
>
>
>
> --
> _______________________________________________________
> Jesiel A.S. Trevisan
> Email: jesieltrevisan@gmail.com.br
> MSN: jesieltrevisan@hotmail.com
> Skype & AIM: jesieltrevisan
> YahooMessager: jesiel.trevisan
> ICQ:: 46527510
> _______________________________________________________
> CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
> for the sole use of the intended recipient(s) and may contain confidential
> and privileged information or otherwise be protected by law. Any
> unauthorized review, use, disclosure or distribution is prohibited. If you
> are not the intended recipient, please contact the sender by reply e-mail
> and destroy all copies of the original message.
>

------=_Part_24538_20202953.1199337421685--

From java-user-return-31747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 05:34:01 2008
Return-Path: <java-user-return-31747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13518 invoked from network); 3 Jan 2008 05:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 05:34:01 -0000
Received: (qmail 34462 invoked by uid 500); 3 Jan 2008 05:33:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34430 invoked by uid 500); 3 Jan 2008 05:33:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34419 invoked by uid 99); 3 Jan 2008 05:33:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 21:33:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mitiaguin@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 05:33:20 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3437779fga.27
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 21:33:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=5Bqnd44K0rziPrxpN1P2fSmdMFcaG9yUU1Z0pZB2FIY=;
        b=U0e52DDLYpoakHQskpZjXf9sgqMExPEy7oKi0u2o2gc4iqqp6ORbarUpzHNpYeErzxHVxATdGWh3f5AnYxDkyNqDUrRzIq77G/6HxNpao4RcLZSqmNyghOi+JxcnM8n5PhauK/M6CkDEc23kc+tXa3NHEhogh0E5ssvmdngMKww=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=WmH/p227FGLVeAgS0pewwMJNP22kb2kRAxN50JAC+oF4MoA46ZoA0oCVX8AO9RvF9DAExg25p8akEzz6xwfJQqMsZHoIUt/ewbY2ksoIDadrLaOAkYE43UhLLEQyEH0+eTALxvB9jXMmTMMZJvjj2uXsQoMwZeRWUDibjmeT9sU=
Received: by 10.82.152.16 with SMTP id z16mr26972286bud.17.1199338404051;
        Wed, 02 Jan 2008 21:33:24 -0800 (PST)
Received: by 10.82.173.8 with HTTP; Wed, 2 Jan 2008 21:33:24 -0800 (PST)
Message-ID: <cc7a2340801022133y7b19f5d6sd0a3a18a8ddfa990@mail.gmail.com>
Date: Thu, 3 Jan 2008 16:33:24 +1100
From: "Michael Mitiaguin" <mitiaguin@gmail.com>
To: java-user@lucene.apache.org
Subject: Reading field parameters from XML
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I want to keep index parameters in XML.
e.g.
        <Field name="description" store="NO" index="TOKENIZED"
termvector="WITH_OFFSETS" >

May I avoid switch/case  , if/else in my code
and assign somehow Field.Store, Field.Index  and etc...  based on string value.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 05:56:12 2008
Return-Path: <java-user-return-31748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18458 invoked from network); 3 Jan 2008 05:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 05:56:12 -0000
Received: (qmail 50092 invoked by uid 500); 3 Jan 2008 05:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49772 invoked by uid 500); 3 Jan 2008 05:55:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49390 invoked by uid 99); 3 Jan 2008 05:55:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 21:55:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 05:54:52 +0000
Received: by rv-out-0910.google.com with SMTP id k20so4529159rvb.5
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 21:54:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XHENSUo/OOxqBNjmchonOO8WFV+bnoxqEafG25bp2rc=;
        b=eON8qF2YfKWAU79BZ9aHLoOM0L67+ohMCEhinHY4J4XSe0ZgInhbdh4MsQgJHJz2J2+WmXml1UgI5SZX9S/+EWziw2FsucOZGZix5m5PTAu2Ibh2Rgsu3gnkcDdFX6+rbduOaZfS+xkI8X1e3ifffqDRplBNg11fuZhkClox32w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L1+S+klf/ATAr5fnrVDu6qbZGC4kWV177hIiBAy2jTFN5iSGVnQpcNe2MmNDb2TyURZKZhue3rsTAM+HS0zApCaPuw+zJ/V8P32vLfeC3UESrshmWz3dZkw1t0HgtdzZTJiCzrs04uc+P6ey56fMVrhxuLhGhLtkw61mURUuPNo=
Received: by 10.141.141.3 with SMTP id t3mr2317855rvn.52.1199339697339;
        Wed, 02 Jan 2008 21:54:57 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Wed, 2 Jan 2008 21:54:57 -0800 (PST)
Message-ID: <786fde50801022154y5fea5733le82d8e9e0be856fe@mail.gmail.com>
Date: Thu, 3 Jan 2008 07:54:57 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reading field parameters from XML
In-Reply-To: <cc7a2340801022133y7b19f5d6sd0a3a18a8ddfa990@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10105_27226962.1199339697289"
References: <cc7a2340801022133y7b19f5d6sd0a3a18a8ddfa990@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10105_27226962.1199339697289
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

You could create a three static maps between the String and and appropriate
Index/Store/TermVector objects. Those maps are not expensive, and are far
more efficient than the String comparisons ...
If you choose to stick with String comparisons, you might wanna check using
Collator instead of String.equals as it is more efficient for comparing
strings.

On Jan 3, 2008 7:33 AM, Michael Mitiaguin <mitiaguin@gmail.com> wrote:

> I want to keep index parameters in XML.
> e.g.
>        <Field name="description" store="NO" index="TOKENIZED"
> termvector="WITH_OFFSETS" >
>
> May I avoid switch/case  , if/else in my code
> and assign somehow Field.Store, Field.Index  and etc...  based on string
> value.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_10105_27226962.1199339697289--

From java-user-return-31749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 07:06:11 2008
Return-Path: <java-user-return-31749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10508 invoked from network); 3 Jan 2008 07:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 07:06:11 -0000
Received: (qmail 83289 invoked by uid 500); 3 Jan 2008 07:05:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83260 invoked by uid 500); 3 Jan 2008 07:05:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83249 invoked by uid 99); 3 Jan 2008 07:05:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jan 2008 23:05:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 72.14.214.232 as permitted sender)
Received: from [72.14.214.232] (HELO hu-out-0506.google.com) (72.14.214.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 07:05:28 +0000
Received: by hu-out-0506.google.com with SMTP id 27so719742hub.15
        for <java-user@lucene.apache.org>; Wed, 02 Jan 2008 23:05:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=uNj2ouZm3p4BJ9ZqS22tOZI+l01x+ka16MKC2tPIZzA=;
        b=u5/7hJLlm9OgJLhl90VvB4yJH7SH27/FinWEL3+XYRYNj7X+WvfCRJ2QLa1zUTROOCkNlVsBb3wADT0r5iiTVgpEk2HD2RWIIuGyZWkxrqIoXTFWajaLo6Y4pcQ+vQhX/M1w28uwfVchGRWGqQ8dE2EbWye9Yd3Z3h0UssEDCm4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dMbBKKYdLSUERqALsMJuky0GUuc19s/PKsNZNHQAs0g09jtZ9f1WiTymxWY0wJEimvR6TF5LK/8lpICNOFHys4Fcrm8rkUoCWJpbQ/Js+7Qw0ZWflMepfFgNi+3XNMQ/ZwIIwm6kpbzRXJV8H/YgZ1Rabk9rB3gUFWHTk17tP9I=
Received: by 10.66.225.9 with SMTP id x9mr15128637ugg.47.1199343930734;
        Wed, 02 Jan 2008 23:05:30 -0800 (PST)
Received: from ?10.0.111.5? ( [202.125.143.65])
        by mx.google.com with ESMTPS id t38sm16254690ugc.57.2008.01.02.23.05.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jan 2008 23:05:30 -0800 (PST)
Message-ID: <477C892E.1070505@gmail.com>
Date: Thu, 03 Jan 2008 12:05:18 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scoring in Lucene (for Precision and Recall)
References: <477BEF10.3060906@gmail.com> <A9A1F888-6972-4A06-928D-406E0A7B4681@apache.org>
In-Reply-To: <A9A1F888-6972-4A06-928D-406E0A7B4681@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> You might also have a look at the quality package under 
> contrib/benchmark, as it works w/ trec files, etc.  I am not sure what 
> the similarity parameter is you are referring to, but if I recall (and 
> it has been a while), in the rel. files the last number is either 1 or 
> 0, depending on whether your system thinks the document is relevant or 
> not.  Thus, you could do something like score > 0 ? 1 : 0 for 
> outputting that value, or some variation of that.
>
> If that isn't right, I would dig into some of the TREC papers, 
> especially the overview paper published each conference, my guess is 
> one of them will explain it in more detail, or perhaps any docs for 
> the trec_eval program will.
>
> -Grant
>
> On Jan 2, 2008, at 3:07 PM, Liaqat Ali wrote:
>
>> Hello,
>>
>> I am using treceval for precision, recall calculation. Treceval takes 
>> Relevance judgments and Result file as an arguments to calculate the 
>> precision, recall. There is a similarity parameter in the result file.
>>
>> The score which is calculated by Lucene is equal to that similarity 
>> parameter. Kindly guide me.
>>
>> Regards,
>> Liaqat
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Hello Grant,

Thanks for you suggestion, and the similarity parameter is part of 
Result file.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 11:22:18 2008
Return-Path: <java-user-return-31750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87490 invoked from network); 3 Jan 2008 11:22:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 11:22:17 -0000
Received: (qmail 17826 invoked by uid 500); 3 Jan 2008 11:21:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17790 invoked by uid 500); 3 Jan 2008 11:21:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17774 invoked by uid 99); 3 Jan 2008 11:21:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 03:21:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 11:21:37 +0000
Received: by py-out-1112.google.com with SMTP id y63so8386207pyg.9
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 03:21:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=QyV4S0tUSEyyJtH7ARfLNucD19XQUEcX2MOLmMWugzs=;
        b=qD3cRppK4jb89a4zH8ftwIVlEzjk2KCX1jPj46M9ZiMYLGS0PLQzDfkSLD2jafEOeX0pGtYE4vsL4xlknU4xQ/kDYKOinPoL92OFNHMDKt7rPBcwRZTKoTNK4MI+Tjs4RaTnpOMN99ly8bkppyyPCU6GwmVdd0S74tW26aiMmLU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=yF4GkeyJBWPKipNqM+uTGR5gf2S6FsXeQfgKqzaqnzpyUN0e0ap/r/4tB3vSQQGNw5U4UyfRNNA+XPnYfJkMdk2rljTTRUo4ehOrsJ1KnxsIRVp2Q0shjadDIFnA5kC9ya1kjkIrC8l6aytbuoLui10e8K+qh18jkEMf7iFo8Eg=
Received: by 10.35.87.10 with SMTP id p10mr19063243pyl.34.1199359301239;
        Thu, 03 Jan 2008 03:21:41 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Thu, 3 Jan 2008 03:21:41 -0800 (PST)
Message-ID: <2bce90af0801030321r1fb3e1f8h5e3be58a875b027a@mail.gmail.com>
Date: Thu, 3 Jan 2008 09:21:41 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Which nutch version works on JVM 1.4.x ???
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3536_4469835.1199359301231"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3536_4469835.1199359301231
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi everyone, I need some websearch functions, like Spider, than, I will use
the Nutch API=B4s

I would like to know witch JVM version support run the nutch

I got the Nutch release 0.9 and I=B4m seeing that support only JVM 1.5

I'm using the JVM 1.4.2.... Does Nuch 0.8.1 work with it ?

Tks.

_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_3536_4469835.1199359301231--

From java-user-return-31751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 12:28:31 2008
Return-Path: <java-user-return-31751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16359 invoked from network); 3 Jan 2008 12:28:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 12:28:31 -0000
Received: (qmail 80093 invoked by uid 500); 3 Jan 2008 12:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80067 invoked by uid 500); 3 Jan 2008 12:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80056 invoked by uid 99); 3 Jan 2008 12:28:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 04:28:14 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 12:28:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id DB66E15D41A
	for <java-user@lucene.apache.org>; Thu,  3 Jan 2008 04:27:52 -0800 (PST)
Message-Id: <ED445283-2ABA-4D65-8B0C-A5034EC0F1F6@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2bce90af0801030321r1fb3e1f8h5e3be58a875b027a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Which nutch version works on JVM 1.4.x ???
Date: Thu, 3 Jan 2008 07:27:50 -0500
References: <2bce90af0801030321r1fb3e1f8h5e3be58a875b027a@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at Nutch:  http://lucene.apache.org/nutch

-Grant

On Jan 3, 2008, at 6:21 AM, Jesiel Trevisan wrote:

> Hi everyone, I need some websearch functions, like Spider, than, I =20
> will use
> the Nutch API=B4s
>
> I would like to know witch JVM version support run the nutch
>
> I got the Nutch release 0.9 and I=B4m seeing that support only JVM 1.5
>
> I'm using the JVM 1.4.2.... Does Nuch 0.8.1 work with it ?
>
> Tks.
>
> _______________________________________________________
> CONFIDENTIALITY NOTICE: This e-mail message, including any =20
> attachments, is
> for the sole use of the intended recipient(s) and may contain =20
> confidential
> and privileged information or otherwise be protected by law. Any
> unauthorized review, use, disclosure or distribution is prohibited. =20=

> If you
> are not the intended recipient, please contact the sender by reply e-=20=

> mail
> and destroy all copies of the original message.

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 12:35:07 2008
Return-Path: <java-user-return-31752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18715 invoked from network); 3 Jan 2008 12:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 12:35:07 -0000
Received: (qmail 88291 invoked by uid 500); 3 Jan 2008 12:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88265 invoked by uid 500); 3 Jan 2008 12:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88254 invoked by uid 99); 3 Jan 2008 12:34:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 04:34:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 72.14.202.183 as permitted sender)
Received: from [72.14.202.183] (HELO ro-out-1112.google.com) (72.14.202.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 12:34:26 +0000
Received: by ro-out-1112.google.com with SMTP id k5so1082711rog.7
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 04:34:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0U1T/el2poUJGI4oZ+bAnxgKbDLZCNqpe68cCC4mWtQ=;
        b=fbR5u8jApmtdqHSUg32G+AJkh4vqo5KiS5B8s8+sX6dEOVh7kX8IPtGznHLvLMIVI1AfrA1ds+dSnJ0o/IdFdlQRRsVQEzn0ixFbAngLZTmsv7+JLFsCnNDG5vDpuLA2XpN1NnjC0lTAdHQG+UIQZiAsiHkKNiLxKnWJOvJ+3OE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ULZWPi5S8ABBUP8vOPWIPlgwAN0ytyzrOEsDI2CeXoYvvu3fMOSeXcbtB56i5Ox6rD1IcOTfZ1obpZqJKN5xJhzsewFsgideJGFMqEbdRnSvvaSDtbma/loJuogYBIm5iIVPMGqYEjh2qDQh6MXlQlRGIwjfLEyFjRuLV85Xepg=
Received: by 10.35.128.1 with SMTP id f1mr2108832pyn.63.1199363670034;
        Thu, 03 Jan 2008 04:34:30 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Thu, 3 Jan 2008 04:34:29 -0800 (PST)
Message-ID: <2bce90af0801030434n40ab6b69j970a82604877d94c@mail.gmail.com>
Date: Thu, 3 Jan 2008 10:34:29 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which nutch version works on JVM 1.4.x ???
In-Reply-To: <ED445283-2ABA-4D65-8B0C-A5034EC0F1F6@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3649_12807574.1199363670025"
References: <2bce90af0801030321r1fb3e1f8h5e3be58a875b027a@mail.gmail.com>
	 <ED445283-2ABA-4D65-8B0C-A5034EC0F1F6@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3649_12807574.1199363670025
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks Grant,

I was no access this site in this morning, but now I get this information.

Tks.

On Jan 3, 2008 10:27 AM, Grant Ingersoll <gsingers@apache.org> wrote:

> Have a look at Nutch:  http://lucene.apache.org/nutch
>
> -Grant
>
> On Jan 3, 2008, at 6:21 AM, Jesiel Trevisan wrote:
>
> > Hi everyone, I need some websearch functions, like Spider, than, I
> > will use
> > the Nutch API=B4s
> >
> > I would like to know witch JVM version support run the nutch
> >
> > I got the Nutch release 0.9 and I=B4m seeing that support only JVM 1.5
> >
> > I'm using the JVM 1.4.2.... Does Nuch 0.8.1 work with it ?
> >
> > Tks.
> >
> > _______________________________________________________
> > CONFIDENTIALITY NOTICE: This e-mail message, including any
> > attachments, is
> > for the sole use of the intended recipient(s) and may contain
> > confidential
> > and privileged information or otherwise be protected by law. Any
> > unauthorized review, use, disclosure or distribution is prohibited.
> > If you
> > are not the intended recipient, please contact the sender by reply e-
> > mail
> > and destroy all copies of the original message.
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
_______________________________________________________
Jesiel A.S. Trevisan
Email: jesieltrevisan@gmail.com.br
MSN: jesieltrevisan@hotmail.com
Skype & AIM: jesieltrevisan
YahooMessager: jesiel.trevisan
ICQ:: 46527510
_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_3649_12807574.1199363670025--

From java-user-return-31753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 13:02:01 2008
Return-Path: <java-user-return-31753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26410 invoked from network); 3 Jan 2008 13:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 13:02:00 -0000
Received: (qmail 27197 invoked by uid 500); 3 Jan 2008 13:01:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27173 invoked by uid 500); 3 Jan 2008 13:01:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27162 invoked by uid 99); 3 Jan 2008 13:01:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 05:01:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 13:01:20 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6651485fkz.5
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 05:01:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=KBfitNkxk14tz2u+0seQbldCjX0jU9M+jMZ7eiWkEGI=;
        b=vwNKIAO9qJYiln1g2YUostQljLhkE6olHETfNIo/Z6I/4WbpuwXgp9yFjTVPME3TqzGu7hNE2LDPuQV989j5IEYfAIE/THsXJGpsSBXPARo6OuJAF57e9kt1AwLYZ22P0gdcPR4E4ZFf3DdrJ109qfasvGiFyzsSqWbGFflpBAQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OJkV2FXrVi+LzJk76Jacim0819sfZN//sX9wNSXcUfc9USVsZndM2ECiTom4Qi5uQpOzlINUvw2fWrIyG8LRr2KGDl26drBk4o6h0KCpDcPzDGvCeCYUnwqMrMjpI5iiYwCbzuOMzKZ8oTxRVWHSd0y4FYNxQhPaneyhNuVCcZ4=
Received: by 10.82.161.19 with SMTP id j19mr27597207bue.20.1199365283113;
        Thu, 03 Jan 2008 05:01:23 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 3 Jan 2008 05:01:23 -0800 (PST)
Message-ID: <359a92830801030501y437cf70cx525c420dece14779@mail.gmail.com>
Date: Thu, 3 Jan 2008 08:01:23 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reading field parameters from XML
In-Reply-To: <cc7a2340801022133y7b19f5d6sd0a3a18a8ddfa990@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26131_28674230.1199365283108"
References: <cc7a2340801022133y7b19f5d6sd0a3a18a8ddfa990@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26131_28674230.1199365283108
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Do you have any evidence at all that this is worth the effort? I assume
that you're worried about efficiency. In my experience, this is *very*
often a mis-placed concern. And "efficient" code that saves, say,
even 1% of my run time is *not* worth the hours/days/weeks spent
creating and *maintaining* clever code......

Do the simple thing. Then if your application is unacceptably slow,
put a profiler on it and fix what's *really* slow. I can't tell you how
often
I've been sure that I knew where the bottleneck is only to find that
my problem is somewhere completely different.

Best
Erick

On Jan 3, 2008 12:33 AM, Michael Mitiaguin <mitiaguin@gmail.com> wrote:

> I want to keep index parameters in XML.
> e.g.
>        <Field name="description" store="NO" index="TOKENIZED"
> termvector="WITH_OFFSETS" >
>
> May I avoid switch/case  , if/else in my code
> and assign somehow Field.Store, Field.Index  and etc...  based on string
> value.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26131_28674230.1199365283108--

From java-user-return-31754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 13:02:56 2008
Return-Path: <java-user-return-31754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26536 invoked from network); 3 Jan 2008 13:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 13:02:56 -0000
Received: (qmail 31402 invoked by uid 500); 3 Jan 2008 13:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31373 invoked by uid 500); 3 Jan 2008 13:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31362 invoked by uid 99); 3 Jan 2008 13:02:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 05:02:38 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 13:02:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JAPiE-00009A-Ny
	for java-user@lucene.apache.org; Thu, 03 Jan 2008 05:02:18 -0800
Message-ID: <14596587.post@talk.nabble.com>
Date: Thu, 3 Jan 2008 05:02:18 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: Re: Example using filters
In-Reply-To: <359a92830801021826y52ae7c97he529b0919fc45257@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
References: <14588320.post@talk.nabble.com> <359a92830801021826y52ae7c97he529b0919fc45257@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I am using a boolean query that is composed of wildcard queries that have *
around each search term (*search* and *term*). Is there another way to
achieve the same result and stay away from wildcards? Thanks for the help.


Erick Erickson wrote:
> 
> See Lucene In Action, well worth it even if it is built on an
> older code base...
> 
> But it would also help if you gave us some indication of what
> it is that's giving you a TooManyClauses exception. Is it a
> date range? A wildcard? A ???
> 
> Best
> Erick
> 
> On Jan 2, 2008 6:18 PM, tgospodinov <spamme@gospodinov.net> wrote:
> 
>>
>> I was wondering if there's a good example of using filters out there? I
>> am
>> building a BooleanQuery and get a TooManyClauses exceptions, so I'm,
>> exploring using filters as a workaround. Any advice is appreciated.
>> Thanks.
>> --
>> View this message in context:
>> http://www.nabble.com/Example-using-filters-tp14588320p14588320.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Example-using-filters-tp14588320p14596587.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 15:44:14 2008
Return-Path: <java-user-return-31755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80591 invoked from network); 3 Jan 2008 15:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 15:44:14 -0000
Received: (qmail 47861 invoked by uid 500); 3 Jan 2008 15:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47825 invoked by uid 500); 3 Jan 2008 15:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47814 invoked by uid 99); 3 Jan 2008 15:43:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 07:43:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 15:43:31 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6720199fkz.5
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 07:43:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=24mEx3Y4rahU5HZrGGR2nlV9uosxm4juKbQRCqYdZqw=;
        b=rNzG4xf5eJylzmxy9asbS1VfDy1GSf1+h3mT+z+rK6/PBY9C0WTWam9v+hD1NaIdKdDGaCJ252qwejZ/58ZNCRjxixbXEUc0CbG44cOM6mhOhpuKkvtHtNE27bxdlko9sQuMRCmtcpygYXmu/Pdvla2SkSdTDiPBZZOZKoSdgNA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J6K1UWl/O9QIQtC06NjLBYEcKrFGdBvzZOASye6+DbOgYYvX43yigqrCBGF8pvwBKAC5EbS1CNcsay9sEEOKq/fX3rA1VpqvB5ceZmc+7Hlbn6NFcje9jkkxCRs8RX0StBeKO6FZMLoyD62NPrAet+AhM5x+sv4MdwNeEsRFSNY=
Received: by 10.82.157.6 with SMTP id f6mr27915084bue.1.1199375014334;
        Thu, 03 Jan 2008 07:43:34 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 3 Jan 2008 07:43:34 -0800 (PST)
Message-ID: <359a92830801030743x4848936wb41ba660099b38b8@mail.gmail.com>
Date: Thu, 3 Jan 2008 10:43:34 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Example using filters
In-Reply-To: <14596587.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26677_22241669.1199375014329"
References: <14588320.post@talk.nabble.com>
	 <359a92830801021826y52ae7c97he529b0919fc45257@mail.gmail.com>
	 <14596587.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26677_22241669.1199375014329
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Filters are certainly a valid way to go. There are other approaches that
have been discussed at length on the user list. Here's a link to a
searchable
user-list archive...

http://www.gossamer-threads.com/lists/lucene/java-user/

I'm certain that there are examples there.

Best
Erick

On Jan 3, 2008 8:02 AM, tgospodinov <spamme@gospodinov.net> wrote:

>
> I am using a boolean query that is composed of wildcard queries that have
> *
> around each search term (*search* and *term*). Is there another way to
> achieve the same result and stay away from wildcards? Thanks for the help.
>
>
> Erick Erickson wrote:
> >
> > See Lucene In Action, well worth it even if it is built on an
> > older code base...
> >
> > But it would also help if you gave us some indication of what
> > it is that's giving you a TooManyClauses exception. Is it a
> > date range? A wildcard? A ???
> >
> > Best
> > Erick
> >
> > On Jan 2, 2008 6:18 PM, tgospodinov <spamme@gospodinov.net> wrote:
> >
> >>
> >> I was wondering if there's a good example of using filters out there? I
> >> am
> >> building a BooleanQuery and get a TooManyClauses exceptions, so I'm,
> >> exploring using filters as a workaround. Any advice is appreciated.
> >> Thanks.
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Example-using-filters-tp14588320p14588320.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Example-using-filters-tp14588320p14596587.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26677_22241669.1199375014329--

From java-user-return-31756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 15:55:16 2008
Return-Path: <java-user-return-31756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86446 invoked from network); 3 Jan 2008 15:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 15:55:16 -0000
Received: (qmail 60118 invoked by uid 500); 3 Jan 2008 15:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60086 invoked by uid 500); 3 Jan 2008 15:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60075 invoked by uid 99); 3 Jan 2008 15:54:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 07:54:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.225 as permitted sender)
Received: from [65.54.246.225] (HELO bay0-omc3-s25.bay0.hotmail.com) (65.54.246.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 15:54:44 +0000
Received: from BAY112-W32 ([64.4.26.132]) by bay0-omc3-s25.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 3 Jan 2008 07:54:35 -0800
Message-ID: <BAY112-W3281CA334814B8FD271808F9530@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_f8f13474-892c-41ba-b78f-d10d5041fb3e_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Using multiple filters
Date: Thu, 3 Jan 2008 21:24:35 +0530
Importance: Normal
In-Reply-To: <477BF914.80307@yahoo.co.uk>
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>
 <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com>
 <477BF914.80307@yahoo.co.uk>
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Jan 2008 15:54:35.0472 (UTC) FILETIME=[F021B500:01C84E20]
X-Virus-Checked: Checked by ClamAV on apache.org

--_f8f13474-892c-41ba-b78f-d10d5041fb3e_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi Eric, Mark,

I am using Lucene 2.2.0 and I dont see anything like ChainedFilter or Boole=
anFilter. Is that not supported now?

Googling on it I found that the ChainedFilter is in some *misc* package. So=
 I believe it has either been dropped or not shipped with the official vers=
ion.

-- Regards,
Rakesh Shete

> Date: Wed, 2 Jan 2008 20:50:28 +0000
> From: markharw00d@yahoo.co.uk
> To: java-user@lucene.apache.org
> Subject: Re: Using multiple filters
>=20
> BooleanFilter in contrib is similar to ChainedFilter but just expresses=20
> the boolean logic using the same vocabulary as BooleanQuery ("should"s,=20
> "must"s and "not"s).
>=20
> Cheers
> Mark
>=20
> Erick Erickson wrote:
> > I think you can just throw them all together in a
> > ChainedFilter and use the ChainedFilter wherever
> > your calls want a Filter.
> >
> > But I haven't tried it <G>...
> >
> > Erick
> >
> > On Jan 2, 2008 2:28 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:
> >
> >  =20
> >> Hi all,
> >>
> >> I have a query related to using filters.
> >>
> >> My search would something like this:
> >>
> >> title:java* +pricerange:[00100 TO 01000] +daterange:[20000101 TO 20071=
231]
> >>
> >> which retrieves all books with title "java" that have a price between =
100
> >> & 1000 and a fall between Jan 01,2000 & Dec 31,2007 daterange.
> >>
> >> Can I use multiple filters in such a case (RangeFilter for pricerange =
&
> >> QueryWrapperFilter for daterange)?
> >>
> >> How do I specify multiple filters to the IndexSearcher (the API does n=
ot
> >> support it as of now)?
> >>
> >> Note: I am even open to using RangeQuery as long as it does not hamper
> >> performance of search. My reading of the mailing list suggests me that=
 using
> >> filters would be better (RangeFilter) than query (RangeQuery):
> >> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg10687.ht=
ml
> >>
> >>
> >>
> >> --Regards,
> >> Rakesh S
> >>
> >>
> >>
> >> _________________________________________________________________
> >> Post free property ads on Yello Classifieds now! www.yello.in
> >> http://ss1.richmedia.in/recurl.asp?pid=3D221
> >>    =20
> >
> >  =20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D221=

--_f8f13474-892c-41ba-b78f-d10d5041fb3e_--

From java-user-return-31757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 15:56:43 2008
Return-Path: <java-user-return-31757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87439 invoked from network); 3 Jan 2008 15:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 15:56:43 -0000
Received: (qmail 65666 invoked by uid 500); 3 Jan 2008 15:56:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65636 invoked by uid 500); 3 Jan 2008 15:56:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65625 invoked by uid 99); 3 Jan 2008 15:56:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 07:56:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.230 as permitted sender)
Received: from [65.54.246.230] (HELO bay0-omc3-s30.bay0.hotmail.com) (65.54.246.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 15:56:00 +0000
Received: from BAY112-W33 ([64.4.26.133]) by bay0-omc3-s30.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 3 Jan 2008 07:56:04 -0800
Message-ID: <BAY112-W33D8CA5FFE2A37A7041738F9530@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_d1b99f6e-ec5b-4e18-ae0f-29487d90261c_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Using multiple filters
Date: Thu, 3 Jan 2008 21:26:04 +0530
Importance: Normal
In-Reply-To: <BAY112-W3281CA334814B8FD271808F9530@phx.gbl>
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>
 <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com>
  <477BF914.80307@yahoo.co.uk>  <BAY112-W3281CA334814B8FD271808F9530@phx.gbl>
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Jan 2008 15:56:04.0793 (UTC) FILETIME=[255F0290:01C84E21]
X-Virus-Checked: Checked by ClamAV on apache.org

--_d1b99f6e-ec5b-4e18-ae0f-29487d90261c_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Here is the link I found on googgling:

http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/misc/ChainedFilte=
r.html


> From: rakesh_shete@hotmail.com
> To: java-user@lucene.apache.org
> Subject: RE: Using multiple filters
> Date: Thu, 3 Jan 2008 21:24:35 +0530
>=20
>=20
> Hi Eric, Mark,
>=20
> I am using Lucene 2.2.0 and I dont see anything like ChainedFilter or Boo=
leanFilter. Is that not supported now?
>=20
> Googling on it I found that the ChainedFilter is in some *misc* package. =
So I believe it has either been dropped or not shipped with the official ve=
rsion.
>=20
> -- Regards,
> Rakesh Shete
>=20
> > Date: Wed, 2 Jan 2008 20:50:28 +0000
> > From: markharw00d@yahoo.co.uk
> > To: java-user@lucene.apache.org
> > Subject: Re: Using multiple filters
> >=20
> > BooleanFilter in contrib is similar to ChainedFilter but just expresses=
=20
> > the boolean logic using the same vocabulary as BooleanQuery ("should"s,=
=20
> > "must"s and "not"s).
> >=20
> > Cheers
> > Mark
> >=20
> > Erick Erickson wrote:
> > > I think you can just throw them all together in a
> > > ChainedFilter and use the ChainedFilter wherever
> > > your calls want a Filter.
> > >
> > > But I haven't tried it <G>...
> > >
> > > Erick
> > >
> > > On Jan 2, 2008 2:28 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote=
:
> > >
> > >  =20
> > >> Hi all,
> > >>
> > >> I have a query related to using filters.
> > >>
> > >> My search would something like this:
> > >>
> > >> title:java* +pricerange:[00100 TO 01000] +daterange:[20000101 TO 200=
71231]
> > >>
> > >> which retrieves all books with title "java" that have a price betwee=
n 100
> > >> & 1000 and a fall between Jan 01,2000 & Dec 31,2007 daterange.
> > >>
> > >> Can I use multiple filters in such a case (RangeFilter for pricerang=
e &
> > >> QueryWrapperFilter for daterange)?
> > >>
> > >> How do I specify multiple filters to the IndexSearcher (the API does=
 not
> > >> support it as of now)?
> > >>
> > >> Note: I am even open to using RangeQuery as long as it does not hamp=
er
> > >> performance of search. My reading of the mailing list suggests me th=
at using
> > >> filters would be better (RangeFilter) than query (RangeQuery):
> > >> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg10687.=
html
> > >>
> > >>
> > >>
> > >> --Regards,
> > >> Rakesh S
> > >>
> > >>
> > >>
> > >> _________________________________________________________________
> > >> Post free property ads on Yello Classifieds now! www.yello.in
> > >> http://ss1.richmedia.in/recurl.asp?pid=3D221
> > >>    =20
> > >
> > >  =20
> >=20
> >=20
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
>=20
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=3D221

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D219=

--_d1b99f6e-ec5b-4e18-ae0f-29487d90261c_--

From java-user-return-31758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 16:26:53 2008
Return-Path: <java-user-return-31758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7160 invoked from network); 3 Jan 2008 16:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 16:26:52 -0000
Received: (qmail 11413 invoked by uid 500); 3 Jan 2008 16:26:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11374 invoked by uid 500); 3 Jan 2008 16:26:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11363 invoked by uid 99); 3 Jan 2008 16:26:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 08:26:35 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 16:26:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JAStc-0006u5-6S
	for java-user@lucene.apache.org; Thu, 03 Jan 2008 08:26:16 -0800
Message-ID: <14600221.post@talk.nabble.com>
Date: Thu, 3 Jan 2008 08:26:16 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: Is there a mavenized Lucene bundle in the apache maven repo and
 what's the url?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
X-Virus-Checked: Checked by ClamAV on apache.org


I couldn't find the url to the lucene maven repo if there's one. There is an
old version in the glabal maven repo (1.4.2, i think), but I need 2.2.0.

Thanks
-- 
View this message in context: http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-the-apache-maven-repo-and-what%27s-the-url--tp14600221p14600221.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 16:40:09 2008
Return-Path: <java-user-return-31759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12284 invoked from network); 3 Jan 2008 16:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 16:40:09 -0000
Received: (qmail 27229 invoked by uid 500); 3 Jan 2008 16:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27193 invoked by uid 500); 3 Jan 2008 16:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27176 invoked by uid 99); 3 Jan 2008 16:39:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 08:39:52 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of acidbriggs@gmail.com designates 72.14.202.178 as permitted sender)
Received: from [72.14.202.178] (HELO ro-out-1112.google.com) (72.14.202.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 16:39:41 +0000
Received: by ro-out-1112.google.com with SMTP id k5so1178914rog.7
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 08:39:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=REI00ckltb9VpIEP61MexajA/uEJoMf5OxllaZkhw4w=;
        b=N22PuAa8SUwxj/YY/LKqDK+7DvPojcDbdj1/uRlOxQTZ+hhHaowC6/h20qD/odZsnCec990NJBeOS9m/t4yh+zEkj+LiP6TDLtK6oVYzjCBrCWWiSxMfScVuEOe2/1vfSexUuufrAkNSnMtYvK8IcWMCHtb4uLRAhIzHY1ZVPaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=wZ0TmU4eaejMXmKmtmEMsZKM/nKgFZvbKPfeup6yPYhvtuyUmsb3DywgFGluPLfX9XOnUBtPECYkilNV1Wh97ZjSkS+OomhB3IC/tWpJJmdcRgP3BxtuFWn5bwI/l+ofUcs8cKGhNDiI1/JUpilw336aa+OtdYu0UULOCrNqcVc=
Received: by 10.141.69.1 with SMTP id w1mr8188621rvk.147.1199378366439;
        Thu, 03 Jan 2008 08:39:26 -0800 (PST)
Received: by 10.141.178.18 with HTTP; Thu, 3 Jan 2008 08:39:26 -0800 (PST)
Message-ID: <1c0e93080801030839q623cd19bnb3613e40399ce45e@mail.gmail.com>
Date: Thu, 3 Jan 2008 11:39:26 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is there a mavenized Lucene bundle in the apache maven repo and what's the url?
In-Reply-To: <14600221.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <14600221.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Look at the news section for december 24:

http://lucene.apache.org/java/docs/index.html

It's @ http://people.apache.org/maven-snapshot-repository/org/apache/lucene/


On Jan 3, 2008 11:26 AM, tgospodinov <spamme@gospodinov.net> wrote:
>
> I couldn't find the url to the lucene maven repo if there's one. There is an
> old version in the glabal maven repo (1.4.2, i think), but I need 2.2.0.
>
> Thanks
> --
> View this message in context: http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-the-apache-maven-repo-and-what%27s-the-url--tp14600221p14600221.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 16:43:57 2008
Return-Path: <java-user-return-31760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13823 invoked from network); 3 Jan 2008 16:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 16:43:57 -0000
Received: (qmail 31583 invoked by uid 500); 3 Jan 2008 16:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31557 invoked by uid 500); 3 Jan 2008 16:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31546 invoked by uid 99); 3 Jan 2008 16:43:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 08:43:38 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 16:43:26 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Is there a mavenized Lucene bundle in the apache maven repo and what's the url?
Date: Thu, 3 Jan 2008 11:42:43 -0500
Message-ID: <9294E20AED46934EA459020706463F9466447A@SUEXCL-02.ad.syr.edu>
In-Reply-To: <14600221.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is there a mavenized Lucene bundle in the apache maven repo and what's the url?
Thread-Index: AchOJXOkb3/4FaWaRAOgfbO4NC6H3wAAgiSA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

It's in the global maven repo at:

http://repo1.maven.org/maven2/org/apache/lucene/

The 2.2.0 core jar is at:

http://repo1.maven.org/maven2/org/apache/lucene/lucene-core/2.2.0/

Steve

On 01/03/2008 at 11:26 AM, tgospodinov wrote:
>=20
> I couldn't find the url to the lucene maven repo if there's
> one. There is an
> old version in the glabal maven repo (1.4.2, i think), but I
> need 2.2.0.
>=20
> Thanks -- View this message in context:
> http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-th
> e-apache-maven-repo-and-what%27s-the-url--tp14600221p14600221.html =
Sent
> from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> --------------------------------------------------------------------- =
To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 16:45:48 2008
Return-Path: <java-user-return-31761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15184 invoked from network); 3 Jan 2008 16:45:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 16:45:48 -0000
Received: (qmail 40854 invoked by uid 500); 3 Jan 2008 16:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40823 invoked by uid 500); 3 Jan 2008 16:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40812 invoked by uid 99); 3 Jan 2008 16:45:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 08:45:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Chunhe.Dai@fatwire.com designates 69.25.74.53 as permitted sender)
Received: from [69.25.74.53] (HELO mX1.myoutlookOnline.com) (69.25.74.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 16:45:08 +0000
Received: from be014.mail.lan ([10.109.209.114]) by mX1.myoutlookOnline.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 3 Jan 2008 11:45:07 -0500
Received: from be053.mail.lan ([10.109.209.153]) by be014.mail.lan with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 3 Jan 2008 11:45:06 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Suggested number of fields limit per Index
Date: Thu, 3 Jan 2008 11:45:05 -0500
Message-ID: <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
In-Reply-To: <14600221.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Suggested number of fields limit per Index
Thread-Index: AchOJXLbY3MhUcbXS5CoDjPZz/Uk1AAAVEPQ
References: <14600221.post@talk.nabble.com>
From: "Dai, Chunhe" <Chunhe.Dai@fatwire.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jan 2008 16:45:06.0848 (UTC) FILETIME=[FEF8FA00:01C84E27]
X-Virus-Checked: Checked by ClamAV on apache.org

I have been searching online could not find an exact answer; and
wondering if anyone here knows whether there is a preferred max number
of fields limit in lucene index?

We are in the process of deciding how our index would look like in our
lucene integration. For one of our approach, we could have a large
number of fields in the index - say maybe several hundred. But, each
Document in the index do not contain every of those fields and would
only have a few fields within those hundreds of fields (Probably in
tens). Does anyone ever have experience with set up like this? I am
wondering whether there is a potential performance issue with indexing
and searching.

Thanks.
Chunhe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 17:22:24 2008
Return-Path: <java-user-return-31762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36124 invoked from network); 3 Jan 2008 17:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 17:22:23 -0000
Received: (qmail 92909 invoked by uid 500); 3 Jan 2008 17:22:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92874 invoked by uid 500); 3 Jan 2008 17:22:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92863 invoked by uid 99); 3 Jan 2008 17:22:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 09:22:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.87] (HELO web26013.mail.ukl.yahoo.com) (217.12.10.87)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Jan 2008 17:21:42 +0000
Received: (qmail 27843 invoked by uid 60001); 3 Jan 2008 17:21:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Gmrgcq7q0FaPZicFdqX+kcN/nS0ZBwQfd1htd0iouMN1dHYFEhpVqIv91VJnxxdmHrIy3eNXQ8+Xcvt2kbrJbn8JItPSReTHq4LRQcDDcSeaNYcW4cv0q2hHhV1zykWuGS5iELPRyca8JgagU3EDuE02+2OjKJ232UdI+1lwx6w=;
X-YMail-OSG: 4kIyhswVM1l4hdlnxYL5BWMx3EKjcFhlQoClWzEK._VhzsqtVy_cm6_Lu1ybeleSCaPI4QRt1y4dQjz1UbPAWId6mvhlUNpMfqafgRgo8_SAvUMo76ZvIkN0fJk-
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Thu, 03 Jan 2008 17:21:45 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Thu, 3 Jan 2008 17:21:45 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Suggested number of fields limit per Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <101956.27796.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

One thing to watch out for is the "norms" overhead which is one byte per fi=
eld, per document. These are byte arrays used in scoring to account for the=
 length of fields in individual documents.=0AWith hundreds of fields and mi=
llions of documents this can eat up memory.=0A=0AThe good news is you can o=
pt to omit norms for a choice of field or if you have specify indexed field=
 as untokenized.=0A=0ACheers,=0AMark=0A=0A----- Original Message ----=0AFro=
m: "Dai, Chunhe" <Chunhe.Dai@fatwire.com>=0ATo: java-user@lucene.apache.org=
=0ASent: Thursday, 3 January, 2008 4:45:05 PM=0ASubject: Suggested number o=
f fields limit per Index=0A=0AI have been searching online could not find a=
n exact answer; and=0Awondering if anyone here knows whether there is a pre=
ferred max number=0Aof fields limit in lucene index?=0A=0AWe are in the pro=
cess of deciding how our index would look like in our=0Alucene integration.=
 For one of our approach, we could have a large=0Anumber of fields in the i=
ndex - say maybe several hundred. But, each=0ADocument in the index do not =
contain every of those fields and would=0Aonly have a few fields within tho=
se hundreds of fields (Probably in=0Atens). Does anyone ever have experienc=
e with set up like this? I am=0Awondering whether there is a potential perf=
ormance issue with indexing=0Aand searching.=0A=0AThanks.=0AChunhe=0A=0A---=
------------------------------------------------------------------=0ATo uns=
ubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional =
commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A    =
  ___________________________________________________________=0ASupport the=
 World Aids Awareness campaign this month with Yahoo! For Good http://uk.pr=
omotions.yahoo.com/forgood/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 17:29:47 2008
Return-Path: <java-user-return-31763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40090 invoked from network); 3 Jan 2008 17:29:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 17:29:47 -0000
Received: (qmail 10761 invoked by uid 500); 3 Jan 2008 17:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10736 invoked by uid 500); 3 Jan 2008 17:29:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10725 invoked by uid 99); 3 Jan 2008 17:29:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 09:29:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 17:29:07 +0000
Received: by nz-out-0506.google.com with SMTP id i28so1104325nzi.5
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 09:29:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=RPKC1zThv5wMN3PHsIXXmzITtB3hzqN2Cc6ZHNYx7RA=;
        b=TRqxEW6H1Wtl0y5JG0//dKqmqg6E/TbhGSoJI+fW9b3TG11E6yoqjrsjTX+8c1/wNITM4u8USgfIQShSV1k812SPcAxs3Oc0vUbfgAFRbd/gHJNDotceULEpcvM9vkpT6hkay2Q3wCt2/du1y3xL4I8Wg1SHLUWFSxLRguo30fk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=U/TQPbqivqBrCc2/9/9ViA1L1DF2cCxaXH+ppQUwWh31I3ozqniNr0KvGMzEnv9yrNpWmGAWL/dXmSL9SlxavZZ3HoBzrscQBh3Ns8nn8pTYYSTltCD1LlTJJ9mznlxUEGo8XshpnEXJGyjfVZI6ZoryDL0z9vZNkGtPlA17qFM=
Received: by 10.141.37.8 with SMTP id p8mr2850168rvj.53.1199381350680;
        Thu, 03 Jan 2008 09:29:10 -0800 (PST)
Received: by 10.141.178.18 with HTTP; Thu, 3 Jan 2008 09:29:10 -0800 (PST)
Message-ID: <1c0e93080801030929l124e7623tffc9c373de98b47a@mail.gmail.com>
Date: Thu, 3 Jan 2008 12:29:10 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggested number of fields limit per Index
In-Reply-To: <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <14600221.post@talk.nabble.com>
	 <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
X-Virus-Checked: Checked by ClamAV on apache.org

I'll give a quick opinion, and remember that is all it is.

Without more information of the types of documents your are storing, I
would say you are definitely going in the wrong direction.  In my
opinion, an index should describe the common attributes of all the
documents it contains.  You should not be designing an index with a
field commonality between documents of, in your case ~10%;  it should
be 100%.

Perhaps you should be creating multiple indexes that describe the
different types of documents (and I mean document in a lucene sense)?
Or perhaps you are being to fine grained within the content of your
fields?

But, from the sound of it, you have extremely disparate data that you
are trying to cram into a single index.  Like trying to index a car, a
lemon and a thought within the same index. I really don't like
bringing relational database comparisons in but this does sound like
you need to normalize that index and create some 'sub-indexes'.  Null
values, imho, are not good for an index.


Briggs.









On Jan 3, 2008 11:45 AM, Dai, Chunhe <Chunhe.Dai@fatwire.com> wrote:
> I have been searching online could not find an exact answer; and
> wondering if anyone here knows whether there is a preferred max number
> of fields limit in lucene index?
>
> We are in the process of deciding how our index would look like in our
> lucene integration. For one of our approach, we could have a large
> number of fields in the index - say maybe several hundred. But, each
> Document in the index do not contain every of those fields and would
> only have a few fields within those hundreds of fields (Probably in
> tens). Does anyone ever have experience with set up like this? I am
> wondering whether there is a potential performance issue with indexing
> and searching.
>
> Thanks.
> Chunhe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 17:32:34 2008
Return-Path: <java-user-return-31764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42246 invoked from network); 3 Jan 2008 17:32:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 17:32:34 -0000
Received: (qmail 16384 invoked by uid 500); 3 Jan 2008 17:32:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16354 invoked by uid 500); 3 Jan 2008 17:32:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16343 invoked by uid 99); 3 Jan 2008 17:32:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 09:32:16 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 72.14.252.152 as permitted sender)
Received: from [72.14.252.152] (HELO po-out-1718.google.com) (72.14.252.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 17:31:51 +0000
Received: by po-out-1718.google.com with SMTP id c31so4730686poi.0
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 09:31:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=Mq9gICUMoqc1zpSQdK0lQN2Im1XROGZZG1gkQKhyJhs=;
        b=hulnX8N3Cp54/1jGB/zXZ8viE6wq+reYCZpALgJX7YF7wPs+gX6OsRxj324jWZXNjo+3xDoKEBDzNC3EyitAsH8WVvr0TrykdcctcdnjwHtemmjF3QORawOp+sulsVSjl1Y09AbioJKDAlEu7rvhIzMe6o1x6/WTHOvh5U6c3MY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cFVMLBxXNdX8Mfnn7x0MEi4DFIS/rTyE8a4zyHiVlWQIl/3vvwiJD5sNAOb6SuPKPCUgZYwKR86YiPbjcTUni2gvKVnxoAHSdARCsvwmO/G0ccpQHgkTyZTE/QIls5hP/4S7tCJbxj6rNKCsJxzw27DHT59PZL5pGIgt9euhoNc=
Received: by 10.141.189.4 with SMTP id r4mr8243484rvp.98.1199381516168;
        Thu, 03 Jan 2008 09:31:56 -0800 (PST)
Received: by 10.141.178.18 with HTTP; Thu, 3 Jan 2008 09:31:56 -0800 (PST)
Message-ID: <1c0e93080801030931p5f74c65aj7bea6c698f869911@mail.gmail.com>
Date: Thu, 3 Jan 2008 12:31:56 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is there a mavenized Lucene bundle in the apache maven repo and what's the url?
In-Reply-To: <9294E20AED46934EA459020706463F9466447A@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <14600221.post@talk.nabble.com>
	 <9294E20AED46934EA459020706463F9466447A@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, I forgot to mention that the stuff on the apache site is the 2.3
development stuff. Sorry about that.  Heh, I forgot that it was
actually out on the maven mirrors and such. Doh!

On Jan 3, 2008 11:42 AM, Steven A Rowe <sarowe@syr.edu> wrote:
> Hi,
>
> It's in the global maven repo at:
>
> http://repo1.maven.org/maven2/org/apache/lucene/
>
> The 2.2.0 core jar is at:
>
> http://repo1.maven.org/maven2/org/apache/lucene/lucene-core/2.2.0/
>
> Steve
>
>
> On 01/03/2008 at 11:26 AM, tgospodinov wrote:
> >
> > I couldn't find the url to the lucene maven repo if there's
> > one. There is an
> > old version in the glabal maven repo (1.4.2, i think), but I
> > need 2.2.0.
> >
> > Thanks -- View this message in context:
> > http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-th
> > e-apache-maven-repo-and-what%27s-the-url--tp14600221p14600221.html Sent
> > from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > --------------------------------------------------------------------- To
> > unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 17:45:16 2008
Return-Path: <java-user-return-31765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50074 invoked from network); 3 Jan 2008 17:45:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 17:45:16 -0000
Received: (qmail 44893 invoked by uid 500); 3 Jan 2008 17:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44712 invoked by uid 500); 3 Jan 2008 17:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44699 invoked by uid 99); 3 Jan 2008 17:44:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 09:44:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 17:44:33 +0000
Received: by py-out-1112.google.com with SMTP id y63so8523613pyg.9
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 09:44:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=rminBxW63Z0LVXx0FC7O7DjwbenA4HoDT82hJyM4FXg=;
        b=ZvOepGjdBPRO+RkkK2lSNPjaxnGqsRD9jc3n+EbwJ7CmPOXNEUOpHEiTbSNFUS5fnFTt79nU71F+omJHKyvhF4JjlN3353eucToLPU6LejcvehA2ulEYtncIamqGq2G1iYYiSOsIvNRAi3Zy6dQdjkQfruX8Jr5PRXPuvyLRiIA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Joaw6DfzuLUpneIM/4rjfbVqh00xEhyE8LXGXWPsWlbPSXnCFAlcWOVQF55M/TuBki1RHcJMQLlNL7rw4mTZ5iU1uRjX7mkZulZZiDYfiywtrhs0IVcROcE8T/A8hRa82D/53goQKF1PcKqOVtSRV/m4pME3k3RuhX4d8MH8BXs=
Received: by 10.35.117.5 with SMTP id u5mr19459449pym.56.1199382277138;
        Thu, 03 Jan 2008 09:44:37 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Thu, 3 Jan 2008 09:44:37 -0800 (PST)
Message-ID: <2bce90af0801030944r12c9539ep753302bc916e1b57@mail.gmail.com>
Date: Thu, 3 Jan 2008 15:44:37 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Doubts about indexing the localhost ROOT using Dutch 0.8.1
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4941_13919988.1199382277129"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4941_13919988.1199382277129
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello everyone,

I'm seeing the tutorial about Dutch WebSearcher in this URL:
http://peterpuwang.googlepages.com/NutchGuideForDummies.htm

I'm using ducth version 0.8.1 and JVM 1.4.2

I have some doubts about it, for example:

I'm trying to index http://localhost/MyWebSite/  ... but I could do it
because de dutch does not indexing the files insite this URL, for example,
index.jsp ... main.jsp... etc...

but if I try to indexing http://localhost/MyWebSite/index.jsp .... it=B4s w=
ork
good, but it only indexing the index.jsp ... and not its links ....

someone know how I do it ?

tks

_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_4941_13919988.1199382277129--

From java-user-return-31766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 18:03:54 2008
Return-Path: <java-user-return-31766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58647 invoked from network); 3 Jan 2008 18:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 18:03:54 -0000
Received: (qmail 71999 invoked by uid 500); 3 Jan 2008 18:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71963 invoked by uid 500); 3 Jan 2008 18:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71952 invoked by uid 99); 3 Jan 2008 18:03:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 10:03:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 18:03:24 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 849C621248
	for <java-user@lucene.apache.org>; Thu,  3 Jan 2008 10:03:15 -0800 (PST)
Message-Id: <80262D0A-2A94-4978-96C1-A1CA0E772F2B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Suggested number of fields limit per Index
Date: Thu, 3 Jan 2008 13:03:14 -0500
References: <14600221.post@talk.nabble.com> <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Another issues is how to generate queries.  If you have hundreds of  
fields, you may have to generate queries (e.g. using the  
MultfieldQueryParser) across all those fields just to find documents  
that _could_ have those fields.  This can lead to the dreaded  
TooManyClausesException.

That being said, Lucene can handle that many fields; I doubt, though,  
that many would consider it a best practice and I don't think there  
would be any indexing performance issues.  Number of fields can be a  
search issue, but I don't know what your requirements are to say for  
sure.

I would say that if you have alternative approaches that you think  
will work for your other requirements, and use less fields, then give  
that a try.  I don't know if I would go so far as say all fields  
should be in common, but that is a good thing to approach, as it makes  
things easier.  Are you sure you can't just map your fields into a  
common set?  Perhaps if you described the problem a bit more, we can  
help.

-Grant



On Jan 3, 2008, at 11:45 AM, Dai, Chunhe wrote:

> I have been searching online could not find an exact answer; and
> wondering if anyone here knows whether there is a preferred max number
> of fields limit in lucene index?
>
> We are in the process of deciding how our index would look like in our
> lucene integration. For one of our approach, we could have a large
> number of fields in the index - say maybe several hundred. But, each
> Document in the index do not contain every of those fields and would
> only have a few fields within those hundreds of fields (Probably in
> tens). Does anyone ever have experience with set up like this? I am
> wondering whether there is a potential performance issue with indexing
> and searching.
>
> Thanks.
> Chunhe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 18:19:26 2008
Return-Path: <java-user-return-31767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69484 invoked from network); 3 Jan 2008 18:19:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 18:19:25 -0000
Received: (qmail 5414 invoked by uid 500); 3 Jan 2008 18:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5379 invoked by uid 500); 3 Jan 2008 18:19:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5367 invoked by uid 99); 3 Jan 2008 18:19:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 10:19:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Chunhe.Dai@fatwire.com designates 69.25.74.53 as permitted sender)
Received: from [69.25.74.53] (HELO mX1.myoutlookOnline.com) (69.25.74.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 18:18:42 +0000
Received: from be014.mail.lan ([10.109.209.114]) by mX1.myoutlookOnline.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 3 Jan 2008 13:18:45 -0500
Received: from be053.mail.lan ([10.109.209.153]) by be014.mail.lan with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 3 Jan 2008 13:18:45 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Suggested number of fields limit per Index
Date: Thu, 3 Jan 2008 13:18:44 -0500
Message-ID: <2A367F5054E61E44A53901055E462C2F43D1DB@BE053.mail.lan>
In-Reply-To: <80262D0A-2A94-4978-96C1-A1CA0E772F2B@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Suggested number of fields limit per Index
Thread-Index: AchOMwEvm2tQeHsdRD+zJLsb2JNcUQAAHXmg
References: <14600221.post@talk.nabble.com> <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan> <80262D0A-2A94-4978-96C1-A1CA0E772F2B@apache.org>
From: "Dai, Chunhe" <Chunhe.Dai@fatwire.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jan 2008 18:18:45.0589 (UTC) FILETIME=[1400D050:01C84E35]
X-Virus-Checked: Checked by ClamAV on apache.org

Thank all of your guys that made suggestions. I greatly appreciate them.

Our issue is that, our data have the notion of family, for example, a
Product family could contains products like TV, Car, DVD, etc. Of
course, each individual set of the product would have its own set of
definition - which contains the finite number of attributes that
describe each of the actual product like TV, or Car. For example TV
would have size, make, weight; Car might have year of made, number of
doors etc. and of course, all of them have SKU, price as common
attributes.=20

When we set up the index, I originally thought a good idea for setting
up the index would be on the definition - which means, I would set up
one index for TV, another one for Car, and a third one for DVD and so
on. When the idea was presented, people are asking whether it is
possible to put all the product in one indexes called Product and
whether it would cause any problem. They basically want to be able to
search for one common attribute in the index and bring back TV, Car, DVD
at the same time and that is the question got started and I needed to
find out whether this one index per family approach would be causing
trouble down the line.

Thanks again for your help.

-Chunhe  =20

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]=20
Sent: Thursday, January 03, 2008 1:03 PM
To: java-user@lucene.apache.org
Subject: Re: Suggested number of fields limit per Index

Another issues is how to generate queries.  If you have hundreds of
fields, you may have to generate queries (e.g. using the
MultfieldQueryParser) across all those fields just to find documents
that _could_ have those fields.  This can lead to the dreaded
TooManyClausesException.

That being said, Lucene can handle that many fields; I doubt, though,
that many would consider it a best practice and I don't think there
would be any indexing performance issues.  Number of fields can be a
search issue, but I don't know what your requirements are to say for
sure.

I would say that if you have alternative approaches that you think will
work for your other requirements, and use less fields, then give that a
try.  I don't know if I would go so far as say all fields should be in
common, but that is a good thing to approach, as it makes things easier.
Are you sure you can't just map your fields into a common set?  Perhaps
if you described the problem a bit more, we can help.

-Grant



On Jan 3, 2008, at 11:45 AM, Dai, Chunhe wrote:

> I have been searching online could not find an exact answer; and=20
> wondering if anyone here knows whether there is a preferred max number

> of fields limit in lucene index?
>
> We are in the process of deciding how our index would look like in our

> lucene integration. For one of our approach, we could have a large=20
> number of fields in the index - say maybe several hundred. But, each=20
> Document in the index do not contain every of those fields and would=20
> only have a few fields within those hundreds of fields (Probably in=20
> tens). Does anyone ever have experience with set up like this? I am=20
> wondering whether there is a potential performance issue with indexing

> and searching.
>
> Thanks.
> Chunhe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 18:32:14 2008
Return-Path: <java-user-return-31768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73504 invoked from network); 3 Jan 2008 18:32:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 18:32:14 -0000
Received: (qmail 22173 invoked by uid 500); 3 Jan 2008 18:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22145 invoked by uid 500); 3 Jan 2008 18:31:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22134 invoked by uid 99); 3 Jan 2008 18:31:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 10:31:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 18:31:30 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6787194fkz.5
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 10:31:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=qr3OcIiVoInzlrxj0za4N4lpLPvj6wNH2+LotMC2m6Y=;
        b=qff9XQyUGPfvBFz4aYB8MCTMzAxZ1NNkUxvBVJ9LrEICqpBNm7j0Rtj5LfxhTTbOrTj0yLlpe8wC/EW4QhesoblFRGUUSZWC28hfXl0M0cIA2qT67jxybb4gdGd+eGOUzbWlhSjoxCVOV442xNfYvgQeVF15S8WV8RFMEauoNHg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KzkdWBW0N89E2gDi59M1QiiLPcm6bX9HOXKb9EY6t9KRdY8TOzhxH4v8rZBikA/wlJw+T7LjMVJLtQ0nKZqnRnawk5ZYfPBm2RegcBsGJwVepTeJd0ferrS2gYpfP3zAv0W88qm4IVQRBhq1TztsbIOuiK+PpmWW+yXrdAJRUxo=
Received: by 10.82.148.7 with SMTP id v7mr28192419bud.10.1199385092703;
        Thu, 03 Jan 2008 10:31:32 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 3 Jan 2008 10:31:32 -0800 (PST)
Message-ID: <359a92830801031031o485dc1d8p796fec471cb4d7d8@mail.gmail.com>
Date: Thu, 3 Jan 2008 13:31:32 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using multiple filters
In-Reply-To: <BAY112-W33D8CA5FFE2A37A7041738F9530@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27322_14820946.1199385092663"
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>
	 <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com>
	 <477BF914.80307@yahoo.co.uk>
	 <BAY112-W3281CA334814B8FD271808F9530@phx.gbl>
	 <BAY112-W33D8CA5FFE2A37A7041738F9530@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27322_14820946.1199385092663
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to put lucene-misc<version>.jar (which you should have in your
lucene<version>/contrib/misc directory

Erick

On Jan 3, 2008 10:56 AM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:

>
> Here is the link I found on googgling:
>
>
> http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/misc/ChainedFilter.html
>
>
> > From: rakesh_shete@hotmail.com
> > To: java-user@lucene.apache.org
> > Subject: RE: Using multiple filters
> > Date: Thu, 3 Jan 2008 21:24:35 +0530
> >
> >
> > Hi Eric, Mark,
> >
> > I am using Lucene 2.2.0 and I dont see anything like ChainedFilter or
> BooleanFilter. Is that not supported now?
> >
> > Googling on it I found that the ChainedFilter is in some *misc* package.
> So I believe it has either been dropped or not shipped with the official
> version.
> >
> > -- Regards,
> > Rakesh Shete
> >
> > > Date: Wed, 2 Jan 2008 20:50:28 +0000
> > > From: markharw00d@yahoo.co.uk
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Using multiple filters
> > >
> > > BooleanFilter in contrib is similar to ChainedFilter but just
> expresses
> > > the boolean logic using the same vocabulary as BooleanQuery
> ("should"s,
> > > "must"s and "not"s).
> > >
> > > Cheers
> > > Mark
> > >
> > > Erick Erickson wrote:
> > > > I think you can just throw them all together in a
> > > > ChainedFilter and use the ChainedFilter wherever
> > > > your calls want a Filter.
> > > >
> > > > But I haven't tried it <G>...
> > > >
> > > > Erick
> > > >
> > > > On Jan 2, 2008 2:28 PM, Rakesh Shete <rakesh_shete@hotmail.com>
> wrote:
> > > >
> > > >
> > > >> Hi all,
> > > >>
> > > >> I have a query related to using filters.
> > > >>
> > > >> My search would something like this:
> > > >>
> > > >> title:java* +pricerange:[00100 TO 01000] +daterange:[20000101 TO
> 20071231]
> > > >>
> > > >> which retrieves all books with title "java" that have a price
> between 100
> > > >> & 1000 and a fall between Jan 01,2000 & Dec 31,2007 daterange.
> > > >>
> > > >> Can I use multiple filters in such a case (RangeFilter for
> pricerange &
> > > >> QueryWrapperFilter for daterange)?
> > > >>
> > > >> How do I specify multiple filters to the IndexSearcher (the API
> does not
> > > >> support it as of now)?
> > > >>
> > > >> Note: I am even open to using RangeQuery as long as it does not
> hamper
> > > >> performance of search. My reading of the mailing list suggests me
> that using
> > > >> filters would be better (RangeFilter) than query (RangeQuery):
> > > >>
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg10687.html
> > > >>
> > > >>
> > > >>
> > > >> --Regards,
> > > >> Rakesh S
> > > >>
> > > >>
> > > >>
> > > >> _________________________________________________________________
> > > >> Post free property ads on Yello Classifieds now! www.yello.in
> > > >> http://ss1.richmedia.in/recurl.asp?pid=221
> > > >>
> > > >
> > > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > _________________________________________________________________
> > Post free property ads on Yello Classifieds now! www.yello.in
> > http://ss1.richmedia.in/recurl.asp?pid=221
>
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=219

------=_Part_27322_14820946.1199385092663--

From java-user-return-31769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 18:41:28 2008
Return-Path: <java-user-return-31769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76305 invoked from network); 3 Jan 2008 18:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 18:41:28 -0000
Received: (qmail 35906 invoked by uid 500); 3 Jan 2008 18:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35881 invoked by uid 500); 3 Jan 2008 18:41:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35870 invoked by uid 99); 3 Jan 2008 18:41:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 10:41:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 18:40:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 17F4B5B53A
	for <java-user@lucene.apache.org>; Thu,  3 Jan 2008 10:40:30 -0800 (PST)
Message-Id: <440D2479-4B6B-4729-BBD5-614B26E1650E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2A367F5054E61E44A53901055E462C2F43D1DB@BE053.mail.lan>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Suggested number of fields limit per Index
Date: Thu, 3 Jan 2008 13:40:27 -0500
References: <14600221.post@talk.nabble.com> <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan> <80262D0A-2A94-4978-96C1-A1CA0E772F2B@apache.org> <2A367F5054E61E44A53901055E462C2F43D1DB@BE053.mail.lan>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

My suggestion would be:
An "all" field that captures all your attributes and allows for  
generic, easy search across all products.  Additionally, go ahead and  
index all your fields per documents.  Then, for your default search,  
use the all field.  _IF_ you know what category of products you are in  
(i.e. TVs) then you could search against those fields that you know  
are on TVs.  This way, you have a set of fields per product type and  
you make sure that all instances of that product type have those fields.

There really isn't a need for separate indices in this case, I don't  
think.   The tradeoff with the "all" approach is some of your stats  
may be skewed, but it probably isn't provable or noticeable for this  
kind of thing.


On Jan 3, 2008, at 1:18 PM, Dai, Chunhe wrote:

> Thank all of your guys that made suggestions. I greatly appreciate  
> them.
>
> Our issue is that, our data have the notion of family, for example, a
> Product family could contains products like TV, Car, DVD, etc. Of
> course, each individual set of the product would have its own set of
> definition - which contains the finite number of attributes that
> describe each of the actual product like TV, or Car. For example TV
> would have size, make, weight; Car might have year of made, number of
> doors etc. and of course, all of them have SKU, price as common
> attributes.
>
> When we set up the index, I originally thought a good idea for setting
> up the index would be on the definition - which means, I would set up
> one index for TV, another one for Car, and a third one for DVD and so
> on. When the idea was presented, people are asking whether it is
> possible to put all the product in one indexes called Product and
> whether it would cause any problem. They basically want to be able to
> search for one common attribute in the index and bring back TV, Car,  
> DVD
> at the same time and that is the question got started and I needed to
> find out whether this one index per family approach would be causing
> trouble down the line.
>
> Thanks again for your help.
>
> -Chunhe
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Thursday, January 03, 2008 1:03 PM
> To: java-user@lucene.apache.org
> Subject: Re: Suggested number of fields limit per Index
>
> Another issues is how to generate queries.  If you have hundreds of
> fields, you may have to generate queries (e.g. using the
> MultfieldQueryParser) across all those fields just to find documents
> that _could_ have those fields.  This can lead to the dreaded
> TooManyClausesException.
>
> That being said, Lucene can handle that many fields; I doubt, though,
> that many would consider it a best practice and I don't think there
> would be any indexing performance issues.  Number of fields can be a
> search issue, but I don't know what your requirements are to say for
> sure.
>
> I would say that if you have alternative approaches that you think  
> will
> work for your other requirements, and use less fields, then give  
> that a
> try.  I don't know if I would go so far as say all fields should be in
> common, but that is a good thing to approach, as it makes things  
> easier.
> Are you sure you can't just map your fields into a common set?   
> Perhaps
> if you described the problem a bit more, we can help.
>
> -Grant
>
>
>
> On Jan 3, 2008, at 11:45 AM, Dai, Chunhe wrote:
>
>> I have been searching online could not find an exact answer; and
>> wondering if anyone here knows whether there is a preferred max  
>> number
>
>> of fields limit in lucene index?
>>
>> We are in the process of deciding how our index would look like in  
>> our
>
>> lucene integration. For one of our approach, we could have a large
>> number of fields in the index - say maybe several hundred. But, each
>> Document in the index do not contain every of those fields and would
>> only have a few fields within those hundreds of fields (Probably in
>> tens). Does anyone ever have experience with set up like this? I am
>> wondering whether there is a potential performance issue with  
>> indexing
>
>> and searching.
>>
>> Thanks.
>> Chunhe
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 18:42:29 2008
Return-Path: <java-user-return-31770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76477 invoked from network); 3 Jan 2008 18:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 18:42:29 -0000
Received: (qmail 37956 invoked by uid 500); 3 Jan 2008 18:42:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37650 invoked by uid 500); 3 Jan 2008 18:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37638 invoked by uid 99); 3 Jan 2008 18:42:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 10:42:12 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 18:41:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JAV0q-0002yC-77
	for java-user@lucene.apache.org; Thu, 03 Jan 2008 10:41:52 -0800
Message-ID: <14602736.post@talk.nabble.com>
Date: Thu, 3 Jan 2008 10:41:52 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: RE: Is there a mavenized Lucene bundle in the apache maven repo and
 what's the url?
In-Reply-To: <9294E20AED46934EA459020706463F9466447A@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
References: <14600221.post@talk.nabble.com> <9294E20AED46934EA459020706463F9466447A@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Is there a mavenized eclipse bundle out there?


Steven Rowe wrote:
> 
> Hi,
> 
> It's in the global maven repo at:
> 
> http://repo1.maven.org/maven2/org/apache/lucene/
> 
> The 2.2.0 core jar is at:
> 
> http://repo1.maven.org/maven2/org/apache/lucene/lucene-core/2.2.0/
> 
> Steve
> 
> On 01/03/2008 at 11:26 AM, tgospodinov wrote:
>> 
>> I couldn't find the url to the lucene maven repo if there's
>> one. There is an
>> old version in the glabal maven repo (1.4.2, i think), but I
>> need 2.2.0.
>> 
>> Thanks -- View this message in context:
>> http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-th
>> e-apache-maven-repo-and-what%27s-the-url--tp14600221p14600221.html Sent
>> from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> --------------------------------------------------------------------- To
>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>> additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>>
> 
>  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-the-apache-maven-repo-and-what%27s-the-url--tp14600221p14602736.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 18:59:49 2008
Return-Path: <java-user-return-31771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81440 invoked from network); 3 Jan 2008 18:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 18:59:48 -0000
Received: (qmail 57803 invoked by uid 500); 3 Jan 2008 18:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57768 invoked by uid 500); 3 Jan 2008 18:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57757 invoked by uid 99); 3 Jan 2008 18:59:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 10:59:31 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 18:59:06 +0000
Received: by py-out-1112.google.com with SMTP id y63so8550155pyg.9
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 10:59:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=dN1YzG4eYdKFeykdd6Yfo2pn2DADNljg0Hk4YSUPDF8=;
        b=KZcUYYcj2+sYnKfxt+S650VKvAjYstV/ipwgxYJOr9OSuAXdDhNxDCWRbJouVgXPY3FLZmyqwtsNgekuSTQnKUN9uyaXqN1nFCXtrwHDDYnvf+kiDAfZol7KKV8YM4iEcyexWsb/gnRvQ2NRkoYHSMpqauSNrKFKXfiAuIxoEC4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XMJV4LnBRkaDXvyYGWnPrFnHjAHnv6qQkxb4Nl1q74b/WbRWD9wCTeFdJNjHBrVUckl8MBRUxbhTavlKCVsEqBDiUcl1sPqI188l8XSCG4JiYYGxZwpddJs1xNZGrVyjEIpogfv3Uf1FaV8v5ZGA9JzLkj4H1aGYHysPsYWUepM=
Received: by 10.35.42.18 with SMTP id u18mr1747069pyj.58.1199386750882;
        Thu, 03 Jan 2008 10:59:10 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Thu, 3 Jan 2008 10:59:10 -0800 (PST)
Message-ID: <2bce90af0801031059x1106cf8cnad76469828f1c3a5@mail.gmail.com>
Date: Thu, 3 Jan 2008 16:59:10 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Doubts about indexing the localhost ROOT using Dutch 0.8.1
In-Reply-To: <2bce90af0801030944r12c9539ep753302bc916e1b57@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5336_20255035.1199386750878"
References: <2bce90af0801030944r12c9539ep753302bc916e1b57@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5336_20255035.1199386750878
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

wow
I found the error, I have to http://localhost/MyWebSite/index.jsp into the
Urls=B4s txt file... the dutch does not fond the JSP files starting /ROOT/ =
...
I need to put  /ROOT/Index.jsp ......

Well, thanks anyway ;-D

On Jan 3, 2008 3:44 PM, Jesiel Trevisan <jesieltrevisan@gmail.com> wrote:

> Hello everyone,
>
> I'm seeing the tutorial about Dutch WebSearcher in this URL:
> http://peterpuwang.googlepages.com/NutchGuideForDummies.htm
>
> I'm using ducth version 0.8.1 and JVM 1.4.2
>
> I have some doubts about it, for example:
>
> I'm trying to index http://localhost/MyWebSite/  ... but I could do it
> because de dutch does not indexing the files insite this URL, for example=
,
> index.jsp ... main.jsp... etc...
>
> but if I try to indexing http://localhost/MyWebSite/index.jsp .... it=B4s
> work good, but it only indexing the index.jsp ... and not its links ....
>
> someone know how I do it ?
>
> tks
>
> _______________________________________________________
> CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, i=
s
> for the sole use of the intended recipient(s) and may contain confidentia=
l
> and privileged information or otherwise be protected by law. Any
> unauthorized review, use, disclosure or distribution is prohibited. If yo=
u
> are not the intended recipient, please contact the sender by reply e-mail
> and destroy all copies of the original message.




--=20
_______________________________________________________
Jesiel A.S. Trevisan
Email: jesieltrevisan@gmail.com.br
MSN: jesieltrevisan@hotmail.com
Skype & AIM: jesieltrevisan
YahooMessager: jesiel.trevisan
ICQ:: 46527510
_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_5336_20255035.1199386750878--

From java-user-return-31772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 19:11:32 2008
Return-Path: <java-user-return-31772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85282 invoked from network); 3 Jan 2008 19:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 19:11:32 -0000
Received: (qmail 75184 invoked by uid 500); 3 Jan 2008 19:11:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75155 invoked by uid 500); 3 Jan 2008 19:11:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75140 invoked by uid 99); 3 Jan 2008 19:11:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 11:11:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 19:11:01 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id DE03771C21F; Thu,  3 Jan 2008 11:10:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id DA31B71C095
	for <java-user@lucene.apache.org>; Thu,  3 Jan 2008 11:10:52 -0800 (PST)
Date: Thu, 3 Jan 2008 11:10:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Suggested number of fields limit per Index
In-Reply-To: <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
Message-ID: <Pine.LNX.4.62.0801031109350.22928@radix.cryptio.net>
References: <14600221.post@talk.nabble.com> <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: Suggested number of fields limit per Index
: In-Reply-To: <14600221.post@talk.nabble.com>
: References: <14600221.post@talk.nabble.com>

http://people.apache.org/~hossman/#threadhijack

Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 19:28:39 2008
Return-Path: <java-user-return-31773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92316 invoked from network); 3 Jan 2008 19:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 19:28:39 -0000
Received: (qmail 3396 invoked by uid 500); 3 Jan 2008 19:28:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3351 invoked by uid 500); 3 Jan 2008 19:28:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3326 invoked by uid 99); 3 Jan 2008 19:28:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 11:28:17 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 19:28:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JAVjS-0004ZG-0t
	for java-user@lucene.apache.org; Thu, 03 Jan 2008 11:27:58 -0800
Message-ID: <14603460.post@talk.nabble.com>
Date: Thu, 3 Jan 2008 11:27:58 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: Eclipse bundle
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
X-Virus-Checked: Checked by ClamAV on apache.org


Is there a mavenized Eclipse bundle that exposes the Lucene API?
-- 
View this message in context: http://www.nabble.com/Eclipse-bundle-tp14603460p14603460.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 19:33:55 2008
Return-Path: <java-user-return-31774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93748 invoked from network); 3 Jan 2008 19:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 19:33:55 -0000
Received: (qmail 13313 invoked by uid 500); 3 Jan 2008 19:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12327 invoked by uid 500); 3 Jan 2008 19:33:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12315 invoked by uid 99); 3 Jan 2008 19:33:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 11:33:37 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 19:33:12 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m03JXEbP000548
	for <java-user@lucene.apache.org>; Thu, 3 Jan 2008 14:33:14 -0500 (EST)
Received: from mailhub.lss.emc.com (uraeus.lss.emc.com [10.254.144.14]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Thu, 3 Jan 2008 14:33:14 -0500
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id m03JXAG4024068
	for <java-user@lucene.apache.org>; Thu, 3 Jan 2008 14:33:13 -0500 (EST)
From: Seneviratne_Yasoja@emc.com
Received: from CORPUSMX10C.corp.emc.com ([128.221.14.94]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 3 Jan 2008 14:33:02 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Prioiritze new documents
Date: Thu, 3 Jan 2008 14:33:02 -0500
Message-ID: <8856DF1FF75B2348A2D4033D1E8A7EE40222A0BC@CORPUSMX10C.corp.emc.com>
In-Reply-To: <20071230123825.GA16137@dbruhn.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Prioiritze new documents
Thread-Index: AchK4N0z6hvVpAt6SLqupOWV2DHb5ADXepvg
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jan 2008 19:33:02.0889 (UTC) FILETIME=[74C2D190:01C84E3F]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.51425
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

IMHO it would be nice if Lucene's Similarity formula took the
indexed-date of the document into account.  Ideally as an optional
setting, where the user can provide a date field as well.

Some of the other search engines do - for example Fast's Instream.  It
makes sense that as documents age over time, they are less important
than the new ones.

Is JIRA the mechanism where you can add "feature requests" for Lucene?


-----Original Message-----
From: Dominik Bruhn [mailto:dominik@dbruhn.de]=20
Sent: Sunday, December 30, 2007 4:38 AM
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents

Hy,
a solution came into my mind:=20
Every document gets boosted by a integer which I increment each time I
add a new document to the index. So the newer documents should get a
bigger boost than the older ones.=20

I tried it out and ran into a problem:=20
Although I set the Boost via doc.setBoost(value) for each document
before writing it to the index it doesnt change anything. Even worse if
I look at the index using Luke (Version 0.7.1) each document got a boost
of 1 not of the value supplied.

Who can help me?

Thanks
--=20
Dominik Bruhn
mailto: dominik@dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 19:34:06 2008
Return-Path: <java-user-return-31775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93900 invoked from network); 3 Jan 2008 19:34:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 19:34:06 -0000
Received: (qmail 14083 invoked by uid 500); 3 Jan 2008 19:33:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14040 invoked by uid 500); 3 Jan 2008 19:33:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13909 invoked by uid 99); 3 Jan 2008 19:33:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 11:33:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 19:33:21 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 24AAE71C24D; Thu,  3 Jan 2008 11:33:26 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1CCC871C095
	for <java-user@lucene.apache.org>; Thu,  3 Jan 2008 11:33:26 -0800 (PST)
Date: Thu, 3 Jan 2008 11:33:26 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Eclipse bundle
In-Reply-To: <14603460.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0801031130500.22928@radix.cryptio.net>
References: <14603460.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is there a mavenized Eclipse bundle that exposes the Lucene API?

there might be ... it depends on what a "mavenized Eclipse bundle" is.

(googling for those keywords turns up this exact question, and a bunch of 
threads/docs on building ecplise plugins with maven ... so i'm really not 
sure what we are talking about)





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 19:42:10 2008
Return-Path: <java-user-return-31776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96751 invoked from network); 3 Jan 2008 19:42:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 19:42:10 -0000
Received: (qmail 32532 invoked by uid 500); 3 Jan 2008 19:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32505 invoked by uid 500); 3 Jan 2008 19:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32494 invoked by uid 99); 3 Jan 2008 19:41:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 11:41:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 72.14.252.152 as permitted sender)
Received: from [72.14.252.152] (HELO po-out-1718.google.com) (72.14.252.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 19:41:27 +0000
Received: by po-out-1718.google.com with SMTP id c31so4788478poi.0
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 11:41:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=xawFDQ3j89nhxL6UIUP0g2bgUd8Cb01kwZUiW61w4pw=;
        b=i3RY8goMc6JYSmHS5D8QSGbk1LBLDEJsh30OCuQJ4E6lFQBkq5E/0RTs0dZYNsI4Hfnt9HVja/VynsHSYkxCJxLwg6XXEFUaDB3ShSryz6GqrlnWJ/4eQsCyp9JmWd+JsRiQ0uFfbyBOBoEPODlJCu6o0hnHZPmP1LXHCtTWluk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Y1a9/0q9vauItE/Cla2+UDtFmvdbfavyls0fWhDkXpjwBtyV+FBtFQ2045vkkkAacSKa0tVnRM0Hk1k4GB0bi84L3XY1dqr3wpRlgcCmtotXJ3mgZCCFPEAYHRM3eJ6DoaeZkusIQfuPox9nLvXk0bekdWhJaS/tWZDZ6jO2WkQ=
Received: by 10.140.82.38 with SMTP id f38mr5275153rvb.27.1199389292041;
        Thu, 03 Jan 2008 11:41:32 -0800 (PST)
Received: by 10.141.178.18 with HTTP; Thu, 3 Jan 2008 11:41:31 -0800 (PST)
Message-ID: <1c0e93080801031141i6f2a380bkb28f7eb296f3e1d0@mail.gmail.com>
Date: Thu, 3 Jan 2008 14:41:31 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggested number of fields limit per Index
In-Reply-To: <Pine.LNX.4.62.0801031109350.22928@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <14600221.post@talk.nabble.com>
	 <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
	 <Pine.LNX.4.62.0801031109350.22928@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Ummm, Chris, I don't know why you posted this here.  We're all on
track as far as I can tell. Or is this a trap to say that I have
changed the subject and am now talking about thread hijacking? But, I
suppose that would have been you.  ;-)

Briggs.


On Jan 3, 2008 2:10 PM, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Subject: Suggested number of fields limit per Index
> : In-Reply-To: <14600221.post@talk.nabble.com>
> : References: <14600221.post@talk.nabble.com>
>
> http://people.apache.org/~hossman/#threadhijack
>
> Thread Hijacking on Mailing Lists
>
> When starting a new discussion on a mailing list, please do not reply to
> an existing message, instead start a fresh email.  Even if you change the
> subject line of your email, other mail headers still track which thread
> you replied to and your question is "hidden" in that thread and gets less
> attention.   It makes following discussions in the mailing list archives
> particularly difficult.
> See Also:  http://en.wikipedia.org/wiki/Thread_hijacking
>
>
>
>
>
> -Hoss
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 20:20:06 2008
Return-Path: <java-user-return-31777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9470 invoked from network); 3 Jan 2008 20:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 20:20:06 -0000
Received: (qmail 89521 invoked by uid 500); 3 Jan 2008 20:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89489 invoked by uid 500); 3 Jan 2008 20:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89478 invoked by uid 99); 3 Jan 2008 20:19:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 12:19:48 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 20:19:33 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 49CD971C289; Thu,  3 Jan 2008 12:19:25 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4650971C165
	for <java-user@lucene.apache.org>; Thu,  3 Jan 2008 12:19:25 -0800 (PST)
Date: Thu, 3 Jan 2008 12:19:25 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Doubts about indexing the localhost ROOT using Dutch 0.8.1
In-Reply-To: <2bce90af0801030944r12c9539ep753302bc916e1b57@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0801031217280.22928@radix.cryptio.net>
References: <2bce90af0801030944r12c9539ep753302bc916e1b57@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: To: java-user@lucene.apache.org
: Subject: Doubts about indexing the localhost ROOT using Dutch 0.8.1
: 
: Hello everyone,
: 
: I'm seeing the tutorial about Dutch WebSearcher in this URL:
: http://peterpuwang.googlepages.com/NutchGuideForDummies.htm

I'm not sure what "Dutch" is, but your question seemed to be about "Nutch" 
:) ... if you have additional questions, you'll probably want to email the
nutch-user@lucene list, and not the java-user@lucene list ... "Nutch" and 
"Lucene Java" are two very different projects, with very different user 
communities.

http://lucene.apache.org/nutch/mailing_lists.html


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 20:26:41 2008
Return-Path: <java-user-return-31778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12387 invoked from network); 3 Jan 2008 20:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 20:26:41 -0000
Received: (qmail 549 invoked by uid 500); 3 Jan 2008 20:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 473 invoked by uid 500); 3 Jan 2008 20:26:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99529 invoked by uid 99); 3 Jan 2008 20:26:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 12:26:18 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 20:26:05 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0872B71C2AE; Thu,  3 Jan 2008 12:25:57 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 051B571C2AC
	for <java-user@lucene.apache.org>; Thu,  3 Jan 2008 12:25:57 -0800 (PST)
Date: Thu, 3 Jan 2008 12:25:56 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Suggested number of fields limit per Index
In-Reply-To: <1c0e93080801031141i6f2a380bkb28f7eb296f3e1d0@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0801031221590.1629@radix.cryptio.net>
References: <14600221.post@talk.nabble.com>  <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
  <Pine.LNX.4.62.0801031109350.22928@radix.cryptio.net>
 <1c0e93080801031141i6f2a380bkb28f7eb296f3e1d0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Ummm, Chris, I don't know why you posted this here.  We're all on
: track as far as I can tell. Or is this a trap to say that I have
: changed the subject and am now talking about thread hijacking? But, I
: suppose that would have been you.  ;-)

This is my standard reply to anyone (i notice) who thread hijacks on one 
of the Lucene lists.

In this case the message with the subject "Suggested number of fields 
limit per Index" which should have been a new thread was in fact a reply 
to messageId 14600221.post@talk.nabble.com (subject: "Is there a 
mavenized Lucene bundle in the apache maven repo and what's the url?")

http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-the-apache-maven-repo-and-what%27s-the-url--to14600221.html#a14601340


: > http://people.apache.org/~hossman/#threadhijack
: >
: > Thread Hijacking on Mailing Lists
: >
: > When starting a new discussion on a mailing list, please do not reply to
: > an existing message, instead start a fresh email.  Even if you change the
: > subject line of your email, other mail headers still track which thread
: > you replied to and your question is "hidden" in that thread and gets less
: > attention.   It makes following discussions in the mailing list archives
: > particularly difficult.
: > See Also:  http://en.wikipedia.org/wiki/Thread_hijacking


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 20:36:25 2008
Return-Path: <java-user-return-31779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16759 invoked from network); 3 Jan 2008 20:36:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 20:36:25 -0000
Received: (qmail 8456 invoked by uid 500); 3 Jan 2008 20:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8422 invoked by uid 500); 3 Jan 2008 20:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8411 invoked by uid 99); 3 Jan 2008 20:36:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 12:36:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.170] (HELO web51304.mail.re2.yahoo.com) (206.190.38.170)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Jan 2008 20:35:56 +0000
Received: (qmail 98006 invoked by uid 60001); 3 Jan 2008 20:35:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=AP7d2Hc2nd+5jEhfzujgXMts2s46vOyDqsCgWArMkNywVdXpGOzBLNAyvfJ82QRvuDAgscDCm7xGYINObkmc5NCernDDqHavV2eCrQ8GcSSUuGjyObZd4xx7SSKsHPS42IeZwofK+7BiawKTMb0sNpleF4xjX9Z32MEDZURplRI=;
X-YMail-OSG: gf.CLEsVM1ki6OKKe.NJGQ_wPPai3D_U.KDb8ZPL.YZ7TeAo0orHQN3HDiDJdpBk0UyeC5lDuFKCEgQcMICYpkPpXF47vIWRsKPbNr5tzGWeO0rzzj8-
Received: from [24.23.150.151] by web51304.mail.re2.yahoo.com via HTTP; Thu, 03 Jan 2008 12:35:47 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Thu, 3 Jan 2008 12:35:47 -0800 (PST)
From: Ted Chen <nehcdet@yahoo.com>
Subject: boost scores with non-content based information
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2046550223-1199392547=:97431"
Message-ID: <533573.97431.qm@web51304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2046550223-1199392547=:97431
Content-Type: text/plain; charset=us-ascii

Hi,
    I'd like to make sure that my search engine can take into account of some non-content based factors.  For example, I'd like to give more score to popular docs based on # of views each document had.  Another example would be to return results with search history (e.g. if we found that most ppl searched the term "school", clicked result document A, we want to boost A up when the term school appears in query) factored in.  
   Can someone recommend a good way of doing this?
 
Thanks,
Ted
P.S.  My last email didn't get any response.  It's probably because my subject was not accurate.  Retrying with a different message subject ...  Thanks for any input!


      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 

--0-2046550223-1199392547=:97431--

From java-user-return-31780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 20:45:27 2008
Return-Path: <java-user-return-31780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24013 invoked from network); 3 Jan 2008 20:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 20:45:27 -0000
Received: (qmail 22146 invoked by uid 500); 3 Jan 2008 20:45:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22096 invoked by uid 500); 3 Jan 2008 20:45:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22085 invoked by uid 99); 3 Jan 2008 20:45:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 12:45:09 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 20:44:44 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: boost scores with non-content based information
Date: Thu, 3 Jan 2008 15:44:14 -0500
Message-ID: <9294E20AED46934EA459020706463F9466448E@SUEXCL-02.ad.syr.edu>
In-Reply-To: <533573.97431.qm@web51304.mail.re2.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boost scores with non-content based information
Thread-Index: AchOSFB9OsQamD5qTUq3YZf2t6m/LQAALPyw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ted,

On 01/03/2008 at 3:35 PM, Ted Chen wrote:
> I'd like to make sure that my search engine can take into
> account of some non-content based factors.
[snip]
> P.S.  My last email didn't get any response.

Au contraire, mon fr=E8re:

http://www.nabble.com/modify-search-result-scores-td14588970.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 20:48:38 2008
Return-Path: <java-user-return-31781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26461 invoked from network); 3 Jan 2008 20:48:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 20:48:37 -0000
Received: (qmail 29108 invoked by uid 500); 3 Jan 2008 20:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29078 invoked by uid 500); 3 Jan 2008 20:48:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29067 invoked by uid 99); 3 Jan 2008 20:48:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 12:48:19 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 72.14.202.177 as permitted sender)
Received: from [72.14.202.177] (HELO ro-out-1112.google.com) (72.14.202.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 20:47:54 +0000
Received: by ro-out-1112.google.com with SMTP id k5so1307256rog.7
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 12:47:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=Eb+YI7/Zgy4So7TtK6IwQEZ5+QNIn3h5s7jk8Nv4HZA=;
        b=JkFbtnx/+oGqvFomGaUvQSoN/95LPpS1MzZLHwfBSv9tjWAobVWVohr1CeNw/7TpTux8WLM+UDi4bNL4X1A1+OdZ0LDpx2pprwBxjEI5PLvGw0zFCZVUXTjILumvfBqrtk+/u5M8OcK4aZMh8DbF/6+05duMF162HCWnxN09cZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=F3i+0fiV04vbUDb8sAfPY9ZA9j+FTM96R2me1018WE4RJoqTdVskmHCp3knZeUwJQp1L7U3xWdzF0+brJIA0b1JRDkAE+/1QwWZQWRw0Tt9fT9DUIh7Wam7lkhV/gbntNnNfoqy5C27E2AY+IbrUFETKwbyYuPCE7TSwtbP+/rM=
Received: by 10.140.193.16 with SMTP id q16mr8365288rvf.109.1199393278508;
        Thu, 03 Jan 2008 12:47:58 -0800 (PST)
Received: by 10.141.178.18 with HTTP; Thu, 3 Jan 2008 12:47:58 -0800 (PST)
Message-ID: <1c0e93080801031247w66ee9j9891c8476507587a@mail.gmail.com>
Date: Thu, 3 Jan 2008 15:47:58 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggested number of fields limit per Index
In-Reply-To: <Pine.LNX.4.62.0801031221590.1629@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <14600221.post@talk.nabble.com>
	 <2A367F5054E61E44A53901055E462C2F43D1D1@BE053.mail.lan>
	 <Pine.LNX.4.62.0801031109350.22928@radix.cryptio.net>
	 <1c0e93080801031141i6f2a380bkb28f7eb296f3e1d0@mail.gmail.com>
	 <Pine.LNX.4.62.0801031221590.1629@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry. Anyway, back on track.

On Jan 3, 2008 3:25 PM, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Ummm, Chris, I don't know why you posted this here.  We're all on
> : track as far as I can tell. Or is this a trap to say that I have
> : changed the subject and am now talking about thread hijacking? But, I
> : suppose that would have been you.  ;-)
>
> This is my standard reply to anyone (i notice) who thread hijacks on one
> of the Lucene lists.
>
> In this case the message with the subject "Suggested number of fields
> limit per Index" which should have been a new thread was in fact a reply
> to messageId 14600221.post@talk.nabble.com (subject: "Is there a
> mavenized Lucene bundle in the apache maven repo and what's the url?")
>
> http://www.nabble.com/Is-there-a-mavenized-Lucene-bundle-in-the-apache-maven-repo-and-what%27s-the-url--to14600221.html#a14601340
>
>
> : > http://people.apache.org/~hossman/#threadhijack
>
> : >
> : > Thread Hijacking on Mailing Lists
> : >
> : > When starting a new discussion on a mailing list, please do not reply to
> : > an existing message, instead start a fresh email.  Even if you change the
> : > subject line of your email, other mail headers still track which thread
> : > you replied to and your question is "hidden" in that thread and gets less
> : > attention.   It makes following discussions in the mailing list archives
> : > particularly difficult.
> : > See Also:  http://en.wikipedia.org/wiki/Thread_hijacking
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 21:02:33 2008
Return-Path: <java-user-return-31782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34627 invoked from network); 3 Jan 2008 21:02:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 21:02:33 -0000
Received: (qmail 47601 invoked by uid 500); 3 Jan 2008 21:02:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47175 invoked by uid 500); 3 Jan 2008 21:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47164 invoked by uid 99); 3 Jan 2008 21:02:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 13:02:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mitiaguin@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 21:01:53 +0000
Received: by fk-out-0910.google.com with SMTP id z23so6849223fkz.5
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 13:01:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=QT4Kkke2Dt5YekAQ1YyqtkaIIAU7Vp8GBILfr9KRQgs=;
        b=DJIC11ymoMY0iM3MQoVc8zJJJkYRcMZJ5QKRiWVjZTTuqegYl6W6uXC2F1ZwAuO21GHAYwKulBa3jtQs74EZFB8dFkfH9/ZoEpT9WGV+IGYGGgbg9HdC4hYkKg2812dLmq90DXlxisqTnfI+KvEaJuhda2z6sNDygzvnr5LY6gI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=beNiV1eFz/EmPnQvG6oDkdFc5MGV9eFt7rjyT3yqW1AAE/Qm6rDNpIfTjxTLhUMhYUPHJcfvbKUOnH0+8PyGQ0WFvDGOWXZb/W5RjsHu9PhfKymDI2K/HLBmOwpPM4SNpUSxeuSxC+ldbZD9h0TL9Yw/cN8UZYsR8BsesJqxq1Y=
Received: by 10.82.105.13 with SMTP id d13mr28442880buc.30.1199394116457;
        Thu, 03 Jan 2008 13:01:56 -0800 (PST)
Received: by 10.82.173.8 with HTTP; Thu, 3 Jan 2008 13:01:56 -0800 (PST)
Message-ID: <cc7a2340801031301o593a7c30u4aa298c2425d8f9@mail.gmail.com>
Date: Fri, 4 Jan 2008 08:01:56 +1100
From: "Michael Mitiaguin" <mitiaguin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reading field parameters from XML
In-Reply-To: <359a92830801030501y437cf70cx525c420dece14779@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <cc7a2340801022133y7b19f5d6sd0a3a18a8ddfa990@mail.gmail.com>
	 <359a92830801030501y437cf70cx525c420dece14779@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

My initial concern was not about efficiency , but that using xml to
make code more generic results in  far  from from elegant if/else
checks  for each of Field.Store , Field.Index , Field.TermVector.  I'd
prefer suggested way to make initial preparations to create the maps
and then  have an assignment in a single statement.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 21:56:41 2008
Return-Path: <java-user-return-31783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54455 invoked from network); 3 Jan 2008 21:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 21:56:40 -0000
Received: (qmail 18595 invoked by uid 500); 3 Jan 2008 21:56:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18553 invoked by uid 500); 3 Jan 2008 21:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18531 invoked by uid 99); 3 Jan 2008 21:56:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 13:56:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 21:55:50 +0000
Received: by hu-out-0506.google.com with SMTP id 27so816667hub.15
        for <java-user@lucene.apache.org>; Thu, 03 Jan 2008 13:55:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5Kr6A0VqKiTAWExYM3ilvOBVe1Dg38V5Gz1GbJd3WVU=;
        b=uoIwEQfKWHq5cZP2Kg74BieC0WLP2Fjs4mZv7MpbuJ7XqNk9LKKpp5cLPBb0A0nqyKUOEVR917iV51VA4lhHVzQVBp4ivuEfCklUIqTadVjWRbAw4JbxkwAbWRU4d+nTjWJA2rB0BEZbhlnyBKSsdciVGhJbBoMdS4icahIDPKE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k829PXqd3YK1Yb36yWIuvM6dMJuF2cs511Syo9sDhpMUiBMnU1CUcd0vXOvzw6Yk5WWEW2yg3HbkgrL/OmK4gCPnNoYIPD7SDGD6IPwkg0b7uyJ+ATy6fuyAN0HnoHXTgDbZtXu9P01wIftqwto1nR1/C1mg1RBmKdN4WxFMfRI=
Received: by 10.82.159.15 with SMTP id h15mr28516531bue.36.1199397353089;
        Thu, 03 Jan 2008 13:55:53 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Thu, 3 Jan 2008 13:55:53 -0800 (PST)
Message-ID: <652776090801031355m117f6c0fpd258bf36b3a3b60d@mail.gmail.com>
Date: Thu, 3 Jan 2008 13:55:53 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Synonyms and Ranking
In-Reply-To: <B82E3A7E-3447-471B-BF72-AFDDFF2C86C5@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27971_11398515.1199397353075"
References: <14518753.post@talk.nabble.com>
	 <78F0C76E-1A1C-4237-AAA8-DDCCE676FC7E@apache.org>
	 <14527508.post@talk.nabble.com>
	 <B82E3A7E-3447-471B-BF72-AFDDFF2C86C5@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27971_11398515.1199397353075
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Would this approach be recommended for stemmed words as well. For example
let say the original word is
'mower', I want matches on 'mow', 'mowing' and 'mowers' but the most
relevance would obviously be matches
for 'mower'. Should I index my documents unstemmed and then stem at the
query words with a lower
weighting?

-M

On Dec 28, 2007 10:39 AM, Grant Ingersoll <gsingers@apache.org> wrote:

> Yes, the Payload stuff should work for this, but you will have to set
> it up during indexing.  The simpler approach is probably a separate
> field for synonyms, but this means analyzing the same content twice
> (or trying out the TeeTokenFilter, but this is advanced usage at this
> point, since it is unreleased.)
>
> There is no support for payloads in the query parser, so you would
> have to construct the queries on your own or at least add in queries
> based on the clauses that the QueryParser outputs.
>
>
>
> On Dec 28, 2007, at 10:54 AM, Frank Schima wrote:
>
> >
> > Hi Grant,
> >
> >
> >
> > Grant Ingersoll-6 wrote:
> >>
> >> You can use the payload functionality (have a look at
> >> BoostingTermQuery and Michael B. excellent ApacheCon talk at
> >> http://people.apache.org/~buschmi/apachecon/<http://people.apache.org/%7Ebuschmi/apachecon/>).
>  Other option is to
> >> put
> >> the synonyms into a separate field and boost that less than the main
> >> field.
> >>
> >> On Dec 27, 2007, at 4:19 PM, Frank Schima wrote:
> >>
> >>> So I have my fancy new stemmed synonym based Lucene index. Let's say
> >>> I have
> >>> the following synonym defined:
> >>>
> >>> radiation -> radiotherapy (and the reverse)
> >>>
> >>> The search results rank all results exactly the same. Is there a way
> >>> to
> >>> Boost the actual search term a little higher than the synonym(s)?
> >>
> >
> > To be clear, if someone searches for "radiation" I want content
> > exactly with
> > "radiation" to rank higher than content with "radiotherapy". But if
> > someone
> > searches for "radiotherapy", I want content with that to rank higher
> > than
> > content with "radiation". Will Payloads do this for me?
> >
> > I would try it but I'm having trouble figuring out how to do the
> > search. For
> > the search, I'm currently using a MultiFieldQueryParser, so like this:
> >
> >    SnowballAnalyzer sba = new SnowballAnalyzer("English",
> > StopAnalyzer.ENGLISH_STOP_WORDS);
> >    QueryParser qp = new MultiFieldQueryParser( new String[] {"field1",
> > "field2", "field3"}, sba );
> >    try {
> >      Query query = qp.parse(strSearchTerms);
> >    } catch ( Throwable th) {
> >       ...
> >    }
> >
> > However, the payload example in the presentation requires a
> > BoostingTermQuery, like this:
> >
> >    Query query = new BoostingTermQuery( new Term("field",
> > "searchterm"));
> >
> > Is there a way to make the two work together?
> >
> >
> > Thanks!
> > Frank
> >
> >
> > --
> > View this message in context:
> http://www.nabble.com/Synonyms-and-Ranking-tp14518753p14527508.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27971_11398515.1199397353075--

From java-user-return-31784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 21:56:41 2008
Return-Path: <java-user-return-31784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54469 invoked from network); 3 Jan 2008 21:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 21:56:40 -0000
Received: (qmail 18622 invoked by uid 500); 3 Jan 2008 21:56:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18555 invoked by uid 500); 3 Jan 2008 21:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18532 invoked by uid 99); 3 Jan 2008 21:56:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 13:56:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.168] (HELO web51302.mail.re2.yahoo.com) (206.190.38.168)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 03 Jan 2008 21:56:00 +0000
Received: (qmail 70406 invoked by uid 60001); 3 Jan 2008 21:55:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=zDg9l/C64IjeOV5ListY9sFWNnpP4S1QKjgR8N/Kgsz6NkZfL74l5hqyV3D3az+NTQJM1bObVhsld1ZGyGaoxZ4OuXUplJvvA9r8vj9koe2FRE6idKEyAR4C62Xk5yYmUmk4rqSpJQSKu9djwT3Mnh14pzEA3aCp3jj5SKakj0Q=;
X-YMail-OSG: mLIbhSgVM1lODVw08iptW4NToHMSv46S8y7p9yDPO_uQ8TeheJjPxQw21oLf.ixpDGMqQq8lIySNEehHRsOlTBUw.dGflax4hnzhFD7wuLBREsREWqs-
Received: from [24.23.150.151] by web51302.mail.re2.yahoo.com via HTTP; Thu, 03 Jan 2008 13:55:52 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Thu, 3 Jan 2008 13:55:52 -0800 (PST)
From: Ted Chen <nehcdet@yahoo.com>
Subject: Re: boost scores with non-content based information
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1119237007-1199397352=:69916"
Message-ID: <414823.69916.qm@web51302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1119237007-1199397352=:69916
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Mark and Steven, thanks for the link.  It's very helpful.  And, sorry for o=
verlooking mark's reply.=0A=0ATed=0A=0A=0A----- Original Message ----=0AFro=
m: Steven A Rowe <sarowe@syr.edu>=0ATo: java-user@lucene.apache.org=0ASent:=
 Thursday, January 3, 2008 12:44:14 PM=0ASubject: RE: boost scores with non=
-content based information=0A=0AHi Ted,=0A=0AOn 01/03/2008 at 3:35 PM, Ted =
Chen wrote:=0A> I'd like to make sure that my search engine can take into=
=0A> account of some non-content based factors.=0A[snip]=0A> P.S.  My last =
email didn't get any response.=0A=0AAu contraire, mon fr=E8re:=0A=0Ahttp://=
www.nabble.com/modify-search-result-scores-td14588970.html=0A=0A-----------=
----------------------------------------------------------=0ATo unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands=
, e-mail: java-user-help@lucene.apache.org=0A=0A=0A      __________________=
__________________________________________________________________=0ALookin=
g for last minute shopping deals?  =0AFind them fast with Yahoo! Search.  h=
ttp://tools.search.yahoo.com/newsearch/category.php?category=3Dshopping
--0-1119237007-1199397352=:69916--

From java-user-return-31785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 03 23:49:08 2008
Return-Path: <java-user-return-31785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85433 invoked from network); 3 Jan 2008 23:49:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2008 23:49:08 -0000
Received: (qmail 25062 invoked by uid 500); 3 Jan 2008 23:48:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25030 invoked by uid 500); 3 Jan 2008 23:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25019 invoked by uid 99); 3 Jan 2008 23:48:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 15:48:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of NBEYER@cerner.com designates 159.140.213.228 as permitted sender)
Received: from [159.140.213.228] (HELO mail01.cerner.com) (159.140.213.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 23:48:37 +0000
Received: from msbhwhq03.northamerica.cerner.net (msbhwhq03.cerner.com [10.160.16.183])
	by mail01.cerner.com (8.13.8/8.13.8) with ESMTP id m03NmSDa012540
	for <java-user@lucene.apache.org>; Thu, 3 Jan 2008 17:48:28 -0600
Received: from MSMBWHQ12.northamerica.cerner.net ([10.160.16.11]) by msbhwhq03.northamerica.cerner.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 3 Jan 2008 17:48:27 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Eclipse bundle
Date: Thu, 3 Jan 2008 17:47:47 -0600
Message-ID: <310EA4D86FC75B43A37EBD826E5A2A5A01462ABA@MSMBWHQ12.northamerica.cerner.net>
In-Reply-To: <Pine.LNX.4.62.0801031130500.22928@radix.cryptio.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Eclipse bundle
Thread-Index: AchOP5nQpeRfMi6cRvetvCjRI7CRzgAIrUFQ
References: <14603460.post@talk.nabble.com> <Pine.LNX.4.62.0801031130500.22928@radix.cryptio.net>
From: "Beyer,Nathan" <NBEYER@CERNER.COM>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Jan 2008 23:48:27.0819 (UTC) FILETIME=[23218FB0:01C84E63]
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5502:2.3.11,1.2.37,4.0.164 definitions=2008-01-03_05:2008-01-02,2008-01-03,2008-01-03 signatures=0
X-Virus-Checked: Checked by ClamAV on apache.org

Taking a guess here, I think this question could be rephrased as ...

Is there an OSGi bundle(s) the exposes the Lucene APIs and is available
in a Maven repository?

For OSGi stuff, check out the Eclipse Orbit project [1], which wraps up
third-party libraries into OSGi bundles and there is a Lucene bundle,
but it's a bit old (v1.9.1).

-nathan

[1] http://www.eclipse.org/orbit/

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Thursday, January 03, 2008 1:33 PM
To: java-user@lucene.apache.org
Subject: Re: Eclipse bundle


: Is there a mavenized Eclipse bundle that exposes the Lucene API?

there might be ... it depends on what a "mavenized Eclipse bundle" is.

(googling for those keywords turns up this exact question, and a bunch
of=20
threads/docs on building ecplise plugins with maven ... so i'm really
not=20
sure what we are talking about)





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

----------------------------------------------------------------------
CONFIDENTIALITY NOTICE This message and any included attachments are from C=
erner Corporation and are intended only for the addressee. The information =
contained in this message is confidential and may constitute inside or non-=
public information under international, federal, or state securities laws. =
Unauthorized forwarding, printing, copying, distribution, or use of such in=
formation is strictly prohibited and may be unlawful. If you are not the ad=
dressee, please promptly delete this message and notify the sender of the d=
elivery error by e-mail or you may call Cerner's corporate offices in Kansa=
s City, Missouri, U.S.A at (+1) (816)221-1024.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 04 02:41:34 2008
Return-Path: <java-user-return-31786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43735 invoked from network); 4 Jan 2008 02:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2008 02:41:34 -0000
Received: (qmail 31728 invoked by uid 500); 4 Jan 2008 02:41:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31702 invoked by uid 500); 4 Jan 2008 02:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31691 invoked by uid 99); 4 Jan 2008 02:41:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 18:41:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [205.158.62.67] (HELO webmail-outgoing.us4.outblaze.com) (205.158.62.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 02:40:49 +0000
Received: from unknown (unknown [192.168.8.242])
	by webmail-outgoing.us4.outblaze.com (Postfix) with QMQP id F0DA718001AC
	for <java-user@lucene.apache.org>; Fri,  4 Jan 2008 02:40:53 +0000 (GMT)
X-OB-Received: from unknown (205.158.62.182)
  by wfilter3.us4.outblaze.com; 4 Jan 2008 02:40:53 -0000
Received: by ws1-6.us4.outblaze.com (Postfix, from userid 1001)
	id C588D1CE7A2; Fri,  4 Jan 2008 02:40:53 +0000 (GMT)
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"
MIME-Version: 1.0
From: "Oscar Usifer" <oscaruser@programmer.net>
To: java-user@lucene.apache.org
Date: Thu, 3 Jan 2008 21:40:53 -0500
Subject: lucene performance issues
Received: from [66.17.52.203] by ws1-6.us4.outblaze.com with http for
 oscaruser@programmer.net; Thu, 3 Jan 2008 21:40:53 -0500
X-Originating-Ip: 66.17.52.203
X-Originating-Server: ws1-6.us4.outblaze.com
Message-Id: <20080104024053.C588D1CE7A2@ws1-6.us4.outblaze.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Folks,

We're running into some performance bottle neck issues while running lucene=
 search against our indices (approx 1.5 GB in size after optimization), and=
   the search query seems to block on a sychronized read as follows. Obviou=
sly we can upgrade to the latest as a first step. When Tomcat runs into thi=
s,  it stops responding, and is restarted by our monitor software. We ran g=
rinder and it shows it can support about max 7 queries per second (log also=
 included). Any ideas how to why it's running into this issue or to improve=
 performance?

Thanks
OSC

"http-8079-2" daemon prio=3D3D10 tid=3D3D0x08716000 nid=3D3D0x4e65 waiting =
for mo=3D
nitor entry [0xbbffd000..0xbbfff55c]
    java.lang.Thread.State: BLOCKED (on object monitor)
         at org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInt=
er=3D
nal(CompoundFileReader.java:214)
...

Lucene 1.9.1, CompoundFileReader.java:214

     192     static final class CSIndexInput extends BufferedIndexInput {
     193
     194         IndexInput base;
     195         long fileOffset;
     196         long length;
     197
...
     205         /** Expert: implements buffer refill.  Reads bytes from th=
e =3D
current
     206          *  position in the input.
     207          * @param b the array to read bytes into
     208          * @param offset the offset in the array to start storing =
by=3D
tes
     209          * @param len the number of bytes to read
     210          */
     211         protected void readInternal(byte[] b, int offset, int len)
     212         throws IOException
     213         {
     214             synchronized (base) {
     215               long start =3D3D getFilePointer();
     216               if(start + len > length)
     217                 throw new IOException("read past EOF");
     218               base.seek(fileOffset + start);
     219               base.readBytes(b, offset, len);
     220             }
     221         }

lucene 2.2.0
     202     /** Implementation of an IndexInput that reads from a portion =
of=3D
   the
     203      *  compound file. The visibility is left as "package" *only* =
be=3D
cause
     204      *  this helps with testing since JUnit test cases in a differ=
en=3D
t class
     205      *  can then access package fields of this class.
     206      */
     207     static final class CSIndexInput extends BufferedIndexInput {
     208
     209         IndexInput base;
     210         long fileOffset;
     211         long length;
     212
     213         CSIndexInput(final IndexInput base, final long fileOffset,=
 f=3D
inal long length)
     214         {
     215             this(base, fileOffset, length, BufferedIndexInput.BUFF=
ER=3D
_SIZE);
     216         }
     217
     218         CSIndexInput(final IndexInput base, final long fileOffset,=
 f=3D
inal long length, int readBufferSize)
     219         {
     220             super(readBufferSize);
     221             this.base =3D3D base;
     222             this.fileOffset =3D3D fileOffset;
     223             this.length =3D3D length;
     224         }
     225
     226         /** Expert: implements buffer refill.  Reads bytes from th=
e =3D
current
     227          *  position in the input.
     228          * @param b the array to read bytes into
     229          * @param offset the offset in the array to start storing =
by=3D
tes
     230          * @param len the number of bytes to read
     231          */
     232         protected void readInternal(byte[] b, int offset, int len)
     233         throws IOException
     234         {
     235             synchronized (base) {
     236               long start =3D3D getFilePointer();
     237               if(start + len > length)
     238                 throw new IOException("read past EOF");
     239               base.seek(fileOffset + start);
     240               base.readBytes(b, offset, len);
     241             }
     242         }
     243
     244         /** Expert: implements seek.  Sets current position in thi=
s =3D
file, where
     245          *  the next {@link #readInternal(byte[],int,int)} will oc=
cu=3D
r.
     246          * @see #readInternal(byte[],int,int)
     247          */
     248         protected void seekInternal(long pos) {}
     249
     250         /** Closes the stream to further operations. */
     251         public void close() {}
     252
     253         public long length() {
     254           return length;
     255         }
     256
     257
     258     }
     259
     260 }

est	Description	Successful Tests	Errors	Mean Time	Mean Time Standard Deviat=
=3D
ion	TPS	Peak TPS	Mean Response Length	Response Bytes Per Second	Response Er=
=3D
rors	Mean time to resolve host	Mean time to establish connection	Mean time =
=3D
to first byte=3D09
Test 100	html	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D09
Test 200	jsp	18468	18	2710	2320	0.738	7.00	4750	3510	18	16.3	16.5	2700=3D09
Test 300	directory	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D09
Test 400	other	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D09
Test 500	css	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D09
Test 700	image	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D09
Test 10000	viewing a question	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D=
09
Test 10100	viewing a member	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D09
Test 10200	admin tools	0	0		0.00	0.00	0.00		0.00	0=3D09=3D09=3D09=3D09

Full thread dump Java HotSpot(TM) Server VM (1.6.0_03-b05 mixed mode):

"http-8079-29" daemon prio=3D3D10 tid=3D3D0x0881b400 nid=3D3D0x4094 in Obje=
ct.wai=3D
t() [0xb79fe000..0xb79ff65c]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
=3D
nnectionCacheImpl.java:471)
	- locked <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:259)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:237)
	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
=3D
rceManager.java:273)
	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.TranslateLimiter.doFilter(TranslateLimiter.java:27)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.RequestResponseFilter.doFilter(RequestResponseFilter.java=
=3D
:55)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
=3D
va:30)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
=3D
tResponseFilter.java:29)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.HttpSessionFilter.doFilter(HttpSessionFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.LoadingFilter.doFilter(LoadingFilter.java:74)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.FileUploadLimiter.doFilter(FileUploadLimiter.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.DOSFilter.doFilter(DOSFilter.java:426)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.SpiderFilter.doFilter(SpiderFilter.java:257)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperVal=
=3D
ve.java:210)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal=
=3D
ve.java:174)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
=3D
a:127)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
=3D
a:117)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
=3D
.java:108)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
=3D
151)
	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
=3D
java:834)
	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
=3D
ess(Http11AprProtocol.java:640)
	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
	at java.lang.Thread.run(Thread.java:619)

"http-8079-28" daemon prio=3D3D10 tid=3D3D0x0882b000 nid=3D3D0x4093 in Obje=
ct.wai=3D
t() [0xb7bfe000..0xb7bff5dc]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
=3D
nnectionCacheImpl.java:471)
	- locked <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:259)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:237)
	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
=3D
rceManager.java:273)
	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.TranslateLimiter.doFilter(TranslateLimiter.java:27)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.RequestResponseFilter.doFilter(RequestResponseFilter.java=
=3D
:55)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
=3D
va:30)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
=3D
tResponseFilter.java:29)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.HttpSessionFilter.doFilter(HttpSessionFilter.java:64)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.LoadingFilter.doFilter(LoadingFilter.java:74)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.FileUploadLimiter.doFilter(FileUploadLimiter.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.DOSFilter.doFilter(DOSFilter.java:426)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.SpiderFilter.doFilter(SpiderFilter.java:257)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperVal=
=3D
ve.java:210)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal=
=3D
ve.java:174)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
=3D
a:127)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
=3D
a:117)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
=3D
.java:108)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
=3D
151)
	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
=3D
java:834)
	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
=3D
ess(Http11AprProtocol.java:640)
	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
	at java.lang.Thread.run(Thread.java:619)

"http-8079-27" daemon prio=3D3D10 tid=3D3D0x0882a000 nid=3D3D0x408f in Obje=
ct.wai=3D
t() [0xb7dfe000..0xb7dff55c]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
=3D
nnectionCacheImpl.java:471)
	- locked <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:259)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:237)
	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
=3D
rceManager.java:273)
	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
=3D
va:30)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
=3D
tResponseFilter.java:29)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.ErrorFilter.doFilter(ErrorFilter.java:89)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispat=
=3D
cher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(Applicati=
=3D
onDispatcher.java:471)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDis=
=3D
patcher.java:403)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispa=
=3D
tcher.java:301)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.jav=
=3D
a:364)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.=
=3D
java:213)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
=3D
a:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
=3D
a:117)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
=3D
.java:108)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
=3D
151)
	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
=3D
java:834)
	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
=3D
ess(Http11AprProtocol.java:640)
	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
	at java.lang.Thread.run(Thread.java:619)

"http-8079-26" daemon prio=3D3D10 tid=3D3D0x0900f000 nid=3D3D0x408e in Obje=
ct.wai=3D
t() [0xb7ffe000..0xb7fff4dc]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
=3D
nnectionCacheImpl.java:471)
	- locked <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:259)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:237)
	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
=3D
rceManager.java:273)
	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
=3D
va:30)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
=3D
tResponseFilter.java:29)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.ErrorFilter.doFilter(ErrorFilter.java:89)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispat=
=3D
cher.java:691)
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(Applicati=
=3D
onDispatcher.java:471)
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDis=
=3D
patcher.java:403)
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispa=
=3D
tcher.java:301)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.jav=
=3D
a:364)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.=
=3D
java:213)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
=3D
a:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
=3D
a:117)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
=3D
.java:108)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
=3D
151)
	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
=3D
java:834)
	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
=3D
ess(Http11AprProtocol.java:640)
	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
	at java.lang.Thread.run(Thread.java:619)

"http-8079-25" daemon prio=3D3D10 tid=3D3D0x08ba9c00 nid=3D3D0x408d in Obje=
ct.wai=3D
t() [0xb81fe000..0xb81ff85c]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
	at java.lang.Object.wait(Native Method)
	- waiting on <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
=3D
nnectionCacheImpl.java:471)
	- locked <0x64587b78> (a java.util.Stack)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:259)
	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
=3D
onCacheImpl.java:237)
	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
=3D
rceManager.java:273)
	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
=3D
ationFilterChain.java:215)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
=3D
terChain.java:188)

....


--=20
Got No Time? Shop Online for Great Gift Ideas!
http://mail.shopping.com/?linkin_id=3D8033174


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 04 05:26:19 2008
Return-Path: <java-user-return-31787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90362 invoked from network); 4 Jan 2008 05:26:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2008 05:26:19 -0000
Received: (qmail 44830 invoked by uid 500); 4 Jan 2008 05:26:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44800 invoked by uid 500); 4 Jan 2008 05:26:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44789 invoked by uid 99); 4 Jan 2008 05:26:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jan 2008 21:26:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.205 as permitted sender)
Received: from [65.54.246.205] (HELO bay0-omc3-s5.bay0.hotmail.com) (65.54.246.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 05:25:43 +0000
Received: from BAY112-W13 ([64.4.26.113]) by bay0-omc3-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 3 Jan 2008 21:25:35 -0800
Message-ID: <BAY112-W13B594031217A0D5A1A0CFF94C0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_a6f823e9-314b-443b-92c6-e05d20336bb6_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Using multiple filters
Date: Fri, 4 Jan 2008 10:55:35 +0530
Importance: Normal
In-Reply-To: <359a92830801031031o485dc1d8p796fec471cb4d7d8@mail.gmail.com>
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>
	 <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com>
 	 <477BF914.80307@yahoo.co.uk>
 	 <BAY112-W3281CA334814B8FD271808F9530@phx.gbl>
 	 <BAY112-W33D8CA5FFE2A37A7041738F9530@phx.gbl> 
 <359a92830801031031o485dc1d8p796fec471cb4d7d8@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 04 Jan 2008 05:25:35.0473 (UTC) FILETIME=[3BC09E10:01C84E92]
X-Virus-Checked: Checked by ClamAV on apache.org

--_a6f823e9-314b-443b-92c6-e05d20336bb6_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hey thanks Eric.

This should help me.

--Regards=20
Rakesh S

> Date: Thu, 3 Jan 2008 13:31:32 -0500
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Using multiple filters
>=20
> You have to put lucene-misc<version>.jar (which you should have in your
> lucene<version>/contrib/misc directory
>=20
> Erick
>=20
> On Jan 3, 2008 10:56 AM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:
>=20
> >
> > Here is the link I found on googgling:
> >
> >
> > http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/misc/ChainedF=
ilter.html
> >
> >
> > > From: rakesh_shete@hotmail.com
> > > To: java-user@lucene.apache.org
> > > Subject: RE: Using multiple filters
> > > Date: Thu, 3 Jan 2008 21:24:35 +0530
> > >
> > >
> > > Hi Eric, Mark,
> > >
> > > I am using Lucene 2.2.0 and I dont see anything like ChainedFilter or
> > BooleanFilter. Is that not supported now?
> > >
> > > Googling on it I found that the ChainedFilter is in some *misc* packa=
ge.
> > So I believe it has either been dropped or not shipped with the officia=
l
> > version.
> > >
> > > -- Regards,
> > > Rakesh Shete
> > >
> > > > Date: Wed, 2 Jan 2008 20:50:28 +0000
> > > > From: markharw00d@yahoo.co.uk
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: Using multiple filters
> > > >
> > > > BooleanFilter in contrib is similar to ChainedFilter but just
> > expresses
> > > > the boolean logic using the same vocabulary as BooleanQuery
> > ("should"s,
> > > > "must"s and "not"s).
> > > >
> > > > Cheers
> > > > Mark
> > > >
> > > > Erick Erickson wrote:
> > > > > I think you can just throw them all together in a
> > > > > ChainedFilter and use the ChainedFilter wherever
> > > > > your calls want a Filter.
> > > > >
> > > > > But I haven't tried it <G>...
> > > > >
> > > > > Erick
> > > > >
> > > > > On Jan 2, 2008 2:28 PM, Rakesh Shete <rakesh_shete@hotmail.com>
> > wrote:
> > > > >
> > > > >
> > > > >> Hi all,
> > > > >>
> > > > >> I have a query related to using filters.
> > > > >>
> > > > >> My search would something like this:
> > > > >>
> > > > >> title:java* +pricerange:[00100 TO 01000] +daterange:[20000101 TO
> > 20071231]
> > > > >>
> > > > >> which retrieves all books with title "java" that have a price
> > between 100
> > > > >> & 1000 and a fall between Jan 01,2000 & Dec 31,2007 daterange.
> > > > >>
> > > > >> Can I use multiple filters in such a case (RangeFilter for
> > pricerange &
> > > > >> QueryWrapperFilter for daterange)?
> > > > >>
> > > > >> How do I specify multiple filters to the IndexSearcher (the API
> > does not
> > > > >> support it as of now)?
> > > > >>
> > > > >> Note: I am even open to using RangeQuery as long as it does not
> > hamper
> > > > >> performance of search. My reading of the mailing list suggests m=
e
> > that using
> > > > >> filters would be better (RangeFilter) than query (RangeQuery):
> > > > >>
> > http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg10687.htm=
l
> > > > >>
> > > > >>
> > > > >>
> > > > >> --Regards,
> > > > >> Rakesh S
> > > > >>
> > > > >>
> > > > >>
> > > > >> ________________________________________________________________=
_
> > > > >> Post free property ads on Yello Classifieds now! www.yello.in
> > > > >> http://ss1.richmedia.in/recurl.asp?pid=3D221
> > > > >>
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > >
> > > _________________________________________________________________
> > > Post free property ads on Yello Classifieds now! www.yello.in
> > > http://ss1.richmedia.in/recurl.asp?pid=3D221
> >
> > _________________________________________________________________
> > Post free property ads on Yello Classifieds now! www.yello.in
> > http://ss1.richmedia.in/recurl.asp?pid=3D219

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D221=

--_a6f823e9-314b-443b-92c6-e05d20336bb6_--

From java-user-return-31788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 04 19:30:42 2008
Return-Path: <java-user-return-31788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31118 invoked from network); 4 Jan 2008 19:30:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2008 19:30:42 -0000
Received: (qmail 82039 invoked by uid 500); 4 Jan 2008 19:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81742 invoked by uid 500); 4 Jan 2008 19:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81730 invoked by uid 99); 4 Jan 2008 19:30:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 11:30:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 19:30:00 +0000
Received: by ug-out-1314.google.com with SMTP id u40so2798168ugc.29
        for <java-user@lucene.apache.org>; Fri, 04 Jan 2008 11:30:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=fEBtywHluU5JBjYqSgt1liBuZbZeJyuL4vGIEF0a1yI=;
        b=r1o4XOQ7pxsqxFhHC13sQ6qvlpF6HZMurw9zOK4B/prsPSiOuf2ett1q70zJnIHOLMtTNSCXEDNyHNrS6tP5Ff6hugOHeIim0fEYijBjOJT0T3dSMnP84wF1QEiopdobq9rEnBo6r4pAyXpPqtnt+VmGYZl0kaVV3suTLudJv1k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=JhtzZcxTsHEbt3xx686x2xcMc2RdgIWeqWll9HB8VDd1uF3ipjcde/hvD/jZEqfmiDp6+5xJQUhZ3o3wlzC6zFPSIKZ4SGH7UB3ELp6iVizAi4t/IBll4iBtjl+fPW/yH222YzVSf2rB5Su9vlQEPl53rRZixbZl2zQ4YKDYZWc=
Received: by 10.67.116.4 with SMTP id t4mr16851089ugm.68.1199475004352;
        Fri, 04 Jan 2008 11:30:04 -0800 (PST)
Received: from ?89.205.41.32? ( [89.205.41.32])
        by mx.google.com with ESMTPS id o1sm17772513uge.1.2008.01.04.11.30.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 04 Jan 2008 11:30:02 -0800 (PST)
Message-ID: <477E893C.4010905@googlemail.com>
Date: Fri, 04 Jan 2008 20:30:04 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Stemming and highlighting
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>	 <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com> 	 <477BF914.80307@yahoo.co.uk> 	 <BAY112-W3281CA334814B8FD271808F9530@phx.gbl> 	 <BAY112-W33D8CA5FFE2A37A7041738F9530@phx.gbl>  <359a92830801031031o485dc1d8p796fec471cb4d7d8@mail.gmail.com> <BAY112-W13B594031217A0D5A1A0CFF94C0@phx.gbl>
In-Reply-To: <BAY112-W13B594031217A0D5A1A0CFF94C0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dear all,

I am a new Lucene user and I would like to know the following. How does 
Lucene bring together fuzzy queries and highlighting?

Let's say for the query algorithm, the word algorith is also a match, 
how do the highlighter know that it should also highlight
occurrences of the word algorith? (I am not sure it does this anyway)

Thank you!

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 04 22:46:09 2008
Return-Path: <java-user-return-31789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33994 invoked from network); 4 Jan 2008 22:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2008 22:46:09 -0000
Received: (qmail 2766 invoked by uid 500); 4 Jan 2008 22:45:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2737 invoked by uid 500); 4 Jan 2008 22:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2726 invoked by uid 99); 4 Jan 2008 22:45:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 14:45:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.28 as permitted sender)
Received: from [80.67.29.28] (HELO smtprelay11.ispgateway.de) (80.67.29.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 22:45:38 +0000
Received: (qmail 2480 invoked from network); 4 Jan 2008 22:45:31 -0000
Received: from unknown (HELO p54bfda72.dip.t-dialin.net) (695637@[84.191.218.114])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay11.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 4 Jan 2008 22:45:31 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Stemming and highlighting
Date: Fri, 4 Jan 2008 23:46:19 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl> <BAY112-W13B594031217A0D5A1A0CFF94C0@phx.gbl> <477E893C.4010905@googlemail.com>
In-Reply-To: <477E893C.4010905@googlemail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801042346.19975@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Freitag, 4. Januar 2008, Marjan Celikik wrote:

> I am a new Lucene user and I would like to know the following. How does
> Lucene bring together fuzzy queries and highlighting?

You need to call rewrite() on the fuzzy query. This will expand the fuzzy 
query to all similar terms (e.g. belies~ -> belief OR believe). 
Highlighting then doesn't work different than for non-fuzzy queries.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 05 00:07:08 2008
Return-Path: <java-user-return-31790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63077 invoked from network); 5 Jan 2008 00:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2008 00:07:08 -0000
Received: (qmail 17393 invoked by uid 500); 5 Jan 2008 00:06:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17354 invoked by uid 500); 5 Jan 2008 00:06:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17343 invoked by uid 99); 5 Jan 2008 00:06:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 16:06:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.12.11.63] (HELO smtp009.mail.ukl.yahoo.com) (217.12.11.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 05 Jan 2008 00:06:27 +0000
Received: (qmail 75237 invoked from network); 5 Jan 2008 00:06:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=B2BgRUwWc2zV0bdDh8G6sCwU3u6ZxhlxDY6wEwLgNDQFdBlHg68GN7GHe+owF3mCJfviom962lz4LDeKnv/EeSVoV7CflDksbwtgXVq5pPXYmbYPt599R9TGx0ciidLO5Zb+wDiSFnrumrQi4HJ1AZEyOT6/zpKJAh5/v2vXOVE=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp009.mail.ukl.yahoo.com with SMTP; 5 Jan 2008 00:06:30 -0000
X-YMail-OSG: RkZNe.sVM1nI5ahPZG1b2PA4aRI8GhqHioWzB3ix6v08GNLvB9p4zV_.XOMKpVUatLDFJ8NUJQ--
Message-ID: <477ECA01.8050702@yahoo.co.uk>
Date: Sat, 05 Jan 2008 00:06:25 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Stemming and highlighting
References: <BAY112-W299104EDBAA80BDE512D0DF9520@phx.gbl>	 <359a92830801021234l5e0133acx260639ff2f96bdb7@mail.gmail.com> 	 <477BF914.80307@yahoo.co.uk> 	 <BAY112-W3281CA334814B8FD271808F9530@phx.gbl> 	 <BAY112-W33D8CA5FFE2A37A7041738F9530@phx.gbl>  <359a92830801031031o485dc1d8p796fec471cb4d7d8@mail.gmail.com> <BAY112-W13B594031217A0D5A1A0CFF94C0@phx.gbl> <477E893C.4010905@googlemail.com>
In-Reply-To: <477E893C.4010905@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> Let's say for the query algorithm, the word algorith is also a match, 
> how do the highlighter know that it should also highlight
> occurrences of the word algorith? (I am not sure it does this anyway)

The highlighter knows to highlight stemmed words because both the query 
terms and the document content are fed through (hopefully) the same 
analyzer so that "algorithmic", "algorithm", "algorithms" etc become 
stemmed to the same root form in both query and doc content. The tokens 
produced by analyzers include the byte offsets of the *original* full 
word, not just the stemmed form, so the highlighter knows the full 
extent of what to highlight in text.


Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 05 07:31:33 2008
Return-Path: <java-user-return-31791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56787 invoked from network); 5 Jan 2008 07:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2008 07:31:33 -0000
Received: (qmail 10016 invoked by uid 500); 5 Jan 2008 07:31:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9978 invoked by uid 500); 5 Jan 2008 07:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9967 invoked by uid 99); 5 Jan 2008 07:31:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jan 2008 23:31:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 05 Jan 2008 07:30:49 +0000
Received: (qmail 36529 invoked by uid 60001); 5 Jan 2008 07:30:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=qMBp4bJF51uHKG7gw1kFjHOoeCIxpHxBi8yTBR1fCTVAbox8rKd883aQiKA0IhMa8I3eoieuhmCGAXkw7c9X6zASbWXFWd8GwMr6hbW4yszdxIif8A6GV/7diDwABHty8a1hTFYz1DTXqIlmT7MVhjirCM6GVaZrY78YvkKcPY8=;
Received: from [72.231.9.236] by web50309.mail.re2.yahoo.com via HTTP; Fri, 04 Jan 2008 23:30:51 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Fri, 4 Jan 2008 23:30:51 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene performance issues
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <167426.35369.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Oscar,

Here are some ideas:
- Optimize your index (won't help with synchronization, but will help with search performance)
- Consider using the non-compound index format (cca 10% faster)
- Wait for 2.3 (soon!) that has some performance improvements (though this synchronization bit is still there, I believe)

But even without doing any of the above, 7 QPS sounds rather low and I'm wondering if there are some other bottlenecks...

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Oscar Usifer <oscaruser@programmer.net>
To: java-user@lucene.apache.org
Sent: Thursday, January 3, 2008 9:40:53 PM
Subject: lucene performance issues

Folks,

We're running into some performance bottle neck issues while running
 lucene search against our indices (approx 1.5 GB in size after
 optimization), and   the search query seems to block on a sychronized read as
 follows. Obviously we can upgrade to the latest as a first step. When
 Tomcat runs into this,  it stops responding, and is restarted by our
 monitor software. We ran grinder and it shows it can support about max 7
 queries per second (log also included). Any ideas how to why it's running
 into this issue or to improve performance?

Thanks
OSC

"http-8079-2" daemon prio=3D10 tid=3D0x08716000 nid=3D0x4e65 waiting
 for mo=
nitor entry [0xbbffd000..0xbbfff55c]
    java.lang.Thread.State: BLOCKED (on object monitor)
         at
 org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInter=
nal(CompoundFileReader.java:214)
...

Lucene 1.9.1, CompoundFileReader.java:214

     192     static final class CSIndexInput extends BufferedIndexInput
 {
     193
     194         IndexInput base;
     195         long fileOffset;
     196         long length;
     197
...
     205         /** Expert: implements buffer refill.  Reads bytes
 from the =
current
     206          *  position in the input.
     207          * @param b the array to read bytes into
     208          * @param offset the offset in the array to start
 storing by=
tes
     209          * @param len the number of bytes to read
     210          */
     211         protected void readInternal(byte[] b, int offset, int
 len)
     212         throws IOException
     213         {
     214             synchronized (base) {
     215               long start =3D getFilePointer();
     216               if(start + len > length)
     217                 throw new IOException("read past EOF");
     218               base.seek(fileOffset + start);
     219               base.readBytes(b, offset, len);
     220             }
     221         }

lucene 2.2.0
     202     /** Implementation of an IndexInput that reads from a
 portion of=
   the
     203      *  compound file. The visibility is left as "package"
 *only* be=
cause
     204      *  this helps with testing since JUnit test cases in a
 differen=
t class
     205      *  can then access package fields of this class.
     206      */
     207     static final class CSIndexInput extends BufferedIndexInput
 {
     208
     209         IndexInput base;
     210         long fileOffset;
     211         long length;
     212
     213         CSIndexInput(final IndexInput base, final long
 fileOffset, f=
inal long length)
     214         {
     215             this(base, fileOffset, length,
 BufferedIndexInput.BUFFER=
_SIZE);
     216         }
     217
     218         CSIndexInput(final IndexInput base, final long
 fileOffset, f=
inal long length, int readBufferSize)
     219         {
     220             super(readBufferSize);
     221             this.base =3D base;
     222             this.fileOffset =3D fileOffset;
     223             this.length =3D length;
     224         }
     225
     226         /** Expert: implements buffer refill.  Reads bytes
 from the =
current
     227          *  position in the input.
     228          * @param b the array to read bytes into
     229          * @param offset the offset in the array to start
 storing by=
tes
     230          * @param len the number of bytes to read
     231          */
     232         protected void readInternal(byte[] b, int offset, int
 len)
     233         throws IOException
     234         {
     235             synchronized (base) {
     236               long start =3D getFilePointer();
     237               if(start + len > length)
     238                 throw new IOException("read past EOF");
     239               base.seek(fileOffset + start);
     240               base.readBytes(b, offset, len);
     241             }
     242         }
     243
     244         /** Expert: implements seek.  Sets current position in
 this =
file, where
     245          *  the next {@link #readInternal(byte[],int,int)}
 will occu=
r.
     246          * @see #readInternal(byte[],int,int)
     247          */
     248         protected void seekInternal(long pos) {}
     249
     250         /** Closes the stream to further operations. */
     251         public void close() {}
     252
     253         public long length() {
     254           return length;
     255         }
     256
     257
     258     }
     259
     260 }

est    Description    Successful Tests    Errors    Mean Time    Mean
 Time Standard Deviat=
ion    TPS    Peak TPS    Mean Response Length    Response Bytes Per
 Second    Response Er=
rors    Mean time to resolve host    Mean time to establish connection
    Mean time =
to first byte=09
Test 100    html    0    0        0.00    0.00    0.00        0.00
    0=09=09=09=09
Test 200    jsp    18468    18    2710    2320    0.738    7.00    4750
    3510    18    16.3    16.5    2700=09
Test 300    directory    0    0        0.00    0.00    0.00        0.00
    0=09=09=09=09
Test 400    other    0    0        0.00    0.00    0.00        0.00
    0=09=09=09=09
Test 500    css    0    0        0.00    0.00    0.00        0.00
    0=09=09=09=09
Test 700    image    0    0        0.00    0.00    0.00        0.00
    0=09=09=09=09
Test 10000    viewing a question    0    0        0.00    0.00    0.00
        0.00    0=09=09=09=09
Test 10100    viewing a member    0    0        0.00    0.00    0.00
        0.00    0=09=09=09=09
Test 10200    admin tools    0    0        0.00    0.00    0.00    
    0.00    0=09=09=09=09

Full thread dump Java HotSpot(TM) Server VM (1.6.0_03-b05 mixed mode):

"http-8079-29" daemon prio=3D10 tid=3D0x0881b400 nid=3D0x4094 in
 Object.wai=
t() [0xb79fe000..0xb79ff65c]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
nnectionCacheImpl.java:471)
    - locked <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:259)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:237)
    at
 com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
rceManager.java:273)
    at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.TranslateLimiter.doFilter(TranslateLimiter.java:27)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.RequestResponseFilter.doFilter(RequestResponseFilter.java=
:55)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
va:30)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
tResponseFilter.java:29)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.HttpSessionFilter.doFilter(HttpSessionFilter.java:64)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.LoadingFilter.doFilter(LoadingFilter.java:74)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.FileUploadLimiter.doFilter(FileUploadLimiter.java:206)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.DOSFilter.doFilter(DOSFilter.java:426)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.SpiderFilter.doFilter(SpiderFilter.java:257)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperVal=
ve.java:210)
    at
 org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal=
ve.java:174)
    at
 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
a:127)
    at
 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
a:117)
    at
 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
.java:108)
    at
 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
151)
    at
 org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
java:834)
    at
 org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
ess(Http11AprProtocol.java:640)
    at
 org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
    at java.lang.Thread.run(Thread.java:619)

"http-8079-28" daemon prio=3D10 tid=3D0x0882b000 nid=3D0x4093 in
 Object.wai=
t() [0xb7bfe000..0xb7bff5dc]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
nnectionCacheImpl.java:471)
    - locked <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:259)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:237)
    at
 com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
rceManager.java:273)
    at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.TranslateLimiter.doFilter(TranslateLimiter.java:27)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.RequestResponseFilter.doFilter(RequestResponseFilter.java=
:55)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
va:30)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
tResponseFilter.java:29)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.HttpSessionFilter.doFilter(HttpSessionFilter.java:64)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.LoadingFilter.doFilter(LoadingFilter.java:74)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.FileUploadLimiter.doFilter(FileUploadLimiter.java:206)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.DOSFilter.doFilter(DOSFilter.java:426)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.SpiderFilter.doFilter(SpiderFilter.java:257)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperVal=
ve.java:210)
    at
 org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal=
ve.java:174)
    at
 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
a:127)
    at
 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
a:117)
    at
 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
.java:108)
    at
 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
151)
    at
 org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
java:834)
    at
 org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
ess(Http11AprProtocol.java:640)
    at
 org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
    at java.lang.Thread.run(Thread.java:619)

"http-8079-27" daemon prio=3D10 tid=3D0x0882a000 nid=3D0x408f in
 Object.wai=
t() [0xb7dfe000..0xb7dff55c]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
nnectionCacheImpl.java:471)
    - locked <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:259)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:237)
    at
 com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
rceManager.java:273)
    at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
va:30)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
tResponseFilter.java:29)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.ErrorFilter.doFilter(ErrorFilter.java:89)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispat=
cher.java:691)
    at
 org.apache.catalina.core.ApplicationDispatcher.processRequest(Applicati=
onDispatcher.java:471)
    at
 org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDis=
patcher.java:403)
    at
 org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispa=
tcher.java:301)
    at
 org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.jav=
a:364)
    at
 org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.=
java:213)
    at
 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
a:135)
    at
 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
a:117)
    at
 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
.java:108)
    at
 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
151)
    at
 org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
java:834)
    at
 org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
ess(Http11AprProtocol.java:640)
    at
 org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
    at java.lang.Thread.run(Thread.java:619)

"http-8079-26" daemon prio=3D10 tid=3D0x0900f000 nid=3D0x408e in
 Object.wai=
t() [0xb7ffe000..0xb7fff4dc]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
nnectionCacheImpl.java:471)
    - locked <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:259)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:237)
    at
 com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
rceManager.java:273)
    at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
va:30)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
tResponseFilter.java:29)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.ErrorFilter.doFilter(ErrorFilter.java:89)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)
    at
 org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispat=
cher.java:691)
    at
 org.apache.catalina.core.ApplicationDispatcher.processRequest(Applicati=
onDispatcher.java:471)
    at
 org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDis=
patcher.java:403)
    at
 org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispa=
tcher.java:301)
    at
 org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.jav=
a:364)
    at
 org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.=
java:213)
    at
 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
a:135)
    at
 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
a:117)
    at
 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
.java:108)
    at
 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
151)
    at
 org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
java:834)
    at
 org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
ess(Http11AprProtocol.java:640)
    at
 org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
    at java.lang.Thread.run(Thread.java:619)

"http-8079-25" daemon prio=3D10 tid=3D0x08ba9c00 nid=3D0x408d in
 Object.wai=
t() [0xb81fe000..0xb81ff85c]
     java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
nnectionCacheImpl.java:471)
    - locked <0x64587b78> (a java.util.Stack)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:259)
    at
 oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
onCacheImpl.java:237)
    at
 com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
rceManager.java:273)
    at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
    at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
ationFilterChain.java:215)
    at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
terChain.java:188)

....


-- 
Got No Time? Shop Online for Great Gift Ideas!
http://mail.shopping.com/?linkin_id=8033174


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 05 08:44:55 2008
Return-Path: <java-user-return-31792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69959 invoked from network); 5 Jan 2008 08:44:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2008 08:44:55 -0000
Received: (qmail 43253 invoked by uid 500); 5 Jan 2008 08:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43216 invoked by uid 500); 5 Jan 2008 08:44:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43204 invoked by uid 99); 5 Jan 2008 08:44:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2008 00:44:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ahuntwork@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jan 2008 08:44:12 +0000
Received: by an-out-0708.google.com with SMTP id c5so1319584anc.49
        for <java-user@lucene.apache.org>; Sat, 05 Jan 2008 00:44:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=uwUnt7ehxdt92QRrSjhAPVBflRewBYBuVerWGLfIXyQ=;
        b=uRqj7PscJ/AqOj4dYRwkTENXqcmtyg6JilR1ddnAgzFfpWaEtfUn2AlweKZudlSHdaI5etr3+sG8Vpiu0zxrA6vNLC84C7fe5y9JyApnuQgmbN0WbzlJJ2yaxYXUXeYcY+zMMRm2ZO2cQkknIL8Lgy1aTy3lve1Ghem1jGKWcDc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=kDOZcZYPmWa76WxfT1VKITqdtijRYp8IoABkaQBI5fhlh16wS+4HvCWbPMtFXZres9iikl/d4AMt0UOmyM3IQhjFkRiNBpmWRFL5kXmxuSh0v1G4YerquDsT3uMDge3WeyGttHvrCyWelXwB8+9fK9DhfvDXRb5/qF2gIriJLzw=
Received: by 10.100.119.17 with SMTP id r17mr37447604anc.63.1199522656091;
        Sat, 05 Jan 2008 00:44:16 -0800 (PST)
Received: by 10.100.242.18 with HTTP; Sat, 5 Jan 2008 00:44:16 -0800 (PST)
Message-ID: <15606c360801050044j7375411dkff2ce756a882e207@mail.gmail.com>
Date: Sat, 5 Jan 2008 01:44:16 -0700
From: "Andrew Huntwork" <ash@huntwork.net>
Sender: ahuntwork@gmail.com
To: java-user@lucene.apache.org
Subject: Re: lucene performance issues
In-Reply-To: <20080104024053.C588D1CE7A2@ws1-6.us4.outblaze.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20080104024053.C588D1CE7A2@ws1-6.us4.outblaze.com>
X-Google-Sender-Auth: e503fbc40bac48e3
X-Virus-Checked: Checked by ClamAV on apache.org

Your grinder output seems to indicate clearly that your bottleneck is
in your database code, not in lucene.  It seems that the threads are
all blocked trying to get a connection from a connection pool.  Maybe
you're leaking connections, or maybe you need to increase the size of
the pool.



On 1/3/08, Oscar Usifer <oscaruser@programmer.net> wrote:
> Folks,
>
> We're running into some performance bottle neck issues while running lucene
> search against our indices (approx 1.5 GB in size after optimization), and
> the search query seems to block on a sychronized read as follows. Obviously
> we can upgrade to the latest as a first step. When Tomcat runs into this,
> it stops responding, and is restarted by our monitor software. We ran
> grinder and it shows it can support about max 7 queries per second (log also
> included). Any ideas how to why it's running into this issue or to improve
> performance?
>
> Thanks
> OSC
>
> "http-8079-2" daemon prio=3D10 tid=3D0x08716000 nid=3D0x4e65 waiting for mo=
> nitor entry [0xbbffd000..0xbbfff55c]
>     java.lang.Thread.State: BLOCKED (on object monitor)
>          at
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInter=
> nal(CompoundFileReader.java:214)
> ...
>
> Lucene 1.9.1, CompoundFileReader.java:214
>
>      192     static final class CSIndexInput extends BufferedIndexInput {
>      193
>      194         IndexInput base;
>      195         long fileOffset;
>      196         long length;
>      197
> ...
>      205         /** Expert: implements buffer refill.  Reads bytes from the
> =
> current
>      206          *  position in the input.
>      207          * @param b the array to read bytes into
>      208          * @param offset the offset in the array to start storing
> by=
> tes
>      209          * @param len the number of bytes to read
>      210          */
>      211         protected void readInternal(byte[] b, int offset, int len)
>      212         throws IOException
>      213         {
>      214             synchronized (base) {
>      215               long start =3D getFilePointer();
>      216               if(start + len > length)
>      217                 throw new IOException("read past EOF");
>      218               base.seek(fileOffset + start);
>      219               base.readBytes(b, offset, len);
>      220             }
>      221         }
>
> lucene 2.2.0
>      202     /** Implementation of an IndexInput that reads from a portion
> of=
>    the
>      203      *  compound file. The visibility is left as "package" *only*
> be=
> cause
>      204      *  this helps with testing since JUnit test cases in a
> differen=
> t class
>      205      *  can then access package fields of this class.
>      206      */
>      207     static final class CSIndexInput extends BufferedIndexInput {
>      208
>      209         IndexInput base;
>      210         long fileOffset;
>      211         long length;
>      212
>      213         CSIndexInput(final IndexInput base, final long fileOffset,
> f=
> inal long length)
>      214         {
>      215             this(base, fileOffset, length,
> BufferedIndexInput.BUFFER=
> _SIZE);
>      216         }
>      217
>      218         CSIndexInput(final IndexInput base, final long fileOffset,
> f=
> inal long length, int readBufferSize)
>      219         {
>      220             super(readBufferSize);
>      221             this.base =3D base;
>      222             this.fileOffset =3D fileOffset;
>      223             this.length =3D length;
>      224         }
>      225
>      226         /** Expert: implements buffer refill.  Reads bytes from the
> =
> current
>      227          *  position in the input.
>      228          * @param b the array to read bytes into
>      229          * @param offset the offset in the array to start storing
> by=
> tes
>      230          * @param len the number of bytes to read
>      231          */
>      232         protected void readInternal(byte[] b, int offset, int len)
>      233         throws IOException
>      234         {
>      235             synchronized (base) {
>      236               long start =3D getFilePointer();
>      237               if(start + len > length)
>      238                 throw new IOException("read past EOF");
>      239               base.seek(fileOffset + start);
>      240               base.readBytes(b, offset, len);
>      241             }
>      242         }
>      243
>      244         /** Expert: implements seek.  Sets current position in this
> =
> file, where
>      245          *  the next {@link #readInternal(byte[],int,int)} will
> occu=
> r.
>      246          * @see #readInternal(byte[],int,int)
>      247          */
>      248         protected void seekInternal(long pos) {}
>      249
>      250         /** Closes the stream to further operations. */
>      251         public void close() {}
>      252
>      253         public long length() {
>      254           return length;
>      255         }
>      256
>      257
>      258     }
>      259
>      260 }
>
> est	Description	Successful Tests	Errors	Mean Time	Mean Time Standard Deviat=
> ion	TPS	Peak TPS	Mean Response Length	Response Bytes Per Second	Response Er=
> rors	Mean time to resolve host	Mean time to establish connection	Mean time =
> to first byte=09
> Test 100	html	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
> Test 200	jsp	18468	18	2710	2320	0.738	7.00	4750	3510	18	16.3	16.5	2700=09
> Test 300	directory	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
> Test 400	other	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
> Test 500	css	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
> Test 700	image	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
> Test 10000	viewing a question	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
> Test 10100	viewing a member	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
> Test 10200	admin tools	0	0		0.00	0.00	0.00		0.00	0=09=09=09=09
>
> Full thread dump Java HotSpot(TM) Server VM (1.6.0_03-b05 mixed mode):
>
> "http-8079-29" daemon prio=3D10 tid=3D0x0881b400 nid=3D0x4094 in Object.wai=
> t() [0xb79fe000..0xb79ff65c]
>      java.lang.Thread.State: TIMED_WAITING (on object monitor)
> 	at java.lang.Object.wait(Native Method)
> 	- waiting on <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
> nnectionCacheImpl.java:471)
> 	- locked <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:259)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:237)
> 	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
> rceManager.java:273)
> 	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.TranslateLimiter.doFilter(TranslateLimiter.java:27)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.RequestResponseFilter.doFilter(RequestResponseFilter.java=
> :55)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
> va:30)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
> tResponseFilter.java:29)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.HttpSessionFilter.doFilter(HttpSessionFilter.java:64)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.LoadingFilter.doFilter(LoadingFilter.java:74)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.FileUploadLimiter.doFilter(FileUploadLimiter.java:206)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.DOSFilter.doFilter(DOSFilter.java:426)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.SpiderFilter.doFilter(SpiderFilter.java:257)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperVal=
> ve.java:210)
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal=
> ve.java:174)
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
> a:127)
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
> a:117)
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
> .java:108)
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
> 151)
> 	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
> java:834)
> 	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
> ess(Http11AprProtocol.java:640)
> 	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
> 	at java.lang.Thread.run(Thread.java:619)
>
> "http-8079-28" daemon prio=3D10 tid=3D0x0882b000 nid=3D0x4093 in Object.wai=
> t() [0xb7bfe000..0xb7bff5dc]
>      java.lang.Thread.State: TIMED_WAITING (on object monitor)
> 	at java.lang.Object.wait(Native Method)
> 	- waiting on <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
> nnectionCacheImpl.java:471)
> 	- locked <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:259)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:237)
> 	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
> rceManager.java:273)
> 	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.TranslateLimiter.doFilter(TranslateLimiter.java:27)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.RequestResponseFilter.doFilter(RequestResponseFilter.java=
> :55)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
> va:30)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
> tResponseFilter.java:29)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.HttpSessionFilter.doFilter(HttpSessionFilter.java:64)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.LoadingFilter.doFilter(LoadingFilter.java:74)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.FileUploadLimiter.doFilter(FileUploadLimiter.java:206)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.DOSFilter.doFilter(DOSFilter.java:426)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.SpiderFilter.doFilter(SpiderFilter.java:257)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperVal=
> ve.java:210)
> 	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal=
> ve.java:174)
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
> a:127)
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
> a:117)
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
> .java:108)
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
> 151)
> 	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
> java:834)
> 	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
> ess(Http11AprProtocol.java:640)
> 	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
> 	at java.lang.Thread.run(Thread.java:619)
>
> "http-8079-27" daemon prio=3D10 tid=3D0x0882a000 nid=3D0x408f in Object.wai=
> t() [0xb7dfe000..0xb7dff55c]
>      java.lang.Thread.State: TIMED_WAITING (on object monitor)
> 	at java.lang.Object.wait(Native Method)
> 	- waiting on <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
> nnectionCacheImpl.java:471)
> 	- locked <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:259)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:237)
> 	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
> rceManager.java:273)
> 	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
> va:30)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
> tResponseFilter.java:29)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.ErrorFilter.doFilter(ErrorFilter.java:89)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispat=
> cher.java:691)
> 	at org.apache.catalina.core.ApplicationDispatcher.processRequest(Applicati=
> onDispatcher.java:471)
> 	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDis=
> patcher.java:403)
> 	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispa=
> tcher.java:301)
> 	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.jav=
> a:364)
> 	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.=
> java:213)
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
> a:135)
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
> a:117)
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
> .java:108)
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
> 151)
> 	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
> java:834)
> 	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
> ess(Http11AprProtocol.java:640)
> 	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
> 	at java.lang.Thread.run(Thread.java:619)
>
> "http-8079-26" daemon prio=3D10 tid=3D0x0900f000 nid=3D0x408e in Object.wai=
> t() [0xb7ffe000..0xb7fff4dc]
>      java.lang.Thread.State: TIMED_WAITING (on object monitor)
> 	at java.lang.Object.wait(Native Method)
> 	- waiting on <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
> nnectionCacheImpl.java:471)
> 	- locked <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:259)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:237)
> 	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
> rceManager.java:273)
> 	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.TimingFilter.doFilter(TimingFilter.java:52)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.PropertiesFilter.doFilter(PropertiesFilter.java:63)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.ExceptionHandlerFilter.doFilter(ExceptionHandlerFilter.ja=
> va:30)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.StatusHttpServletResponseFilter.doFilter(StatusHttpServle=
> tResponseFilter.java:29)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.ErrorFilter.doFilter(ErrorFilter.java:89)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at com.ee.filter.SessionFilter.doFilter(SessionFilter.java:31)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
> 	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispat=
> cher.java:691)
> 	at org.apache.catalina.core.ApplicationDispatcher.processRequest(Applicati=
> onDispatcher.java:471)
> 	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDis=
> patcher.java:403)
> 	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispa=
> tcher.java:301)
> 	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.jav=
> a:364)
> 	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.=
> java:213)
> 	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav=
> a:135)
> 	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav=
> a:117)
> 	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve=
> .java:108)
> 	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:=
> 151)
> 	at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.=
> java:834)
> 	at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.proc=
> ess(Http11AprProtocol.java:640)
> 	at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)
> 	at java.lang.Thread.run(Thread.java:619)
>
> "http-8079-25" daemon prio=3D10 tid=3D0x08ba9c00 nid=3D0x408d in Object.wai=
> t() [0xb81fe000..0xb81ff85c]
>      java.lang.Thread.State: TIMED_WAITING (on object monitor)
> 	at java.lang.Object.wait(Native Method)
> 	- waiting on <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getPooledConnection(OracleCo=
> nnectionCacheImpl.java:471)
> 	- locked <0x64587b78> (a java.util.Stack)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:259)
> 	at oracle.jdbc.pool.OracleConnectionCacheImpl.getConnection(OracleConnecti=
> onCacheImpl.java:237)
> 	at com.ee.util.OracleDataSourceManager.getConcreteConnection(OracleDataSou=
> rceManager.java:273)
> 	at com.ee.filter.DatabaseFilter.doFilter(DatabaseFilter.java:50)
> 	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic=
> ationFilterChain.java:215)
> 	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil=
> terChain.java:188)
>
> ....
>
>
> --
> Got No Time? Shop Online for Great Gift Ideas!
> http://mail.shopping.com/?linkin_id=8033174
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 06 11:47:06 2008
Return-Path: <java-user-return-31793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78845 invoked from network); 6 Jan 2008 11:47:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2008 11:47:06 -0000
Received: (qmail 79047 invoked by uid 500); 6 Jan 2008 11:46:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79003 invoked by uid 500); 6 Jan 2008 11:46:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78992 invoked by uid 99); 6 Jan 2008 11:46:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 03:46:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@nitwit.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 11:46:24 +0000
Received: (qmail 10981 invoked from network); 6 Jan 2008 11:46:26 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.237.62])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Jan 2008 11:46:26 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 7775E242557
	for <java-user@lucene.apache.org>; Sun,  6 Jan 2008 12:46:31 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
Date: Sun, 6 Jan 2008 12:46:31 +0100
User-Agent: KMail/1.9.7
References: <200801011757.49297.lucene@nitwit.de> <200801012034.14411.lucene@nitwit.de> <Pine.LNX.4.62.0801012244340.28794@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0801012244340.28794@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801061246.31201.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 02 January 2008 08:03:48 Chris Hostetter wrote:
> 1) there is a semi-articulated goal of moving away from "under the
> coveres" weakref caching to more explicit and controllable caching ...

YES! 

BTW why havin caching been removed from QueryFilter at all? Isn't caching the 
only sense of a Filter? I can't think of another one...

> it's not such a big deal in this case since it only comes into play if the
> user uses th eclass -- but it would still be nice if user code had a way
> to actually monitor/manipulate the cache.  (it's a much bigger issue
> with things like FieldCache, see also LUCENE-831)

Yes, I know FieldCache...encountered some queries consuming some 200+ 
MBytes... :-\

> 2) IndexReader implementations are not currently (and have never really
> been) required to return anything useful from the directory() method ...
> in the trunk, classes like MultiReader will throw an UnSupOpEx if
> directory() is called.   in older versions of Lucene, MultiReader would
> return the directory of the first sub IndexReader it was using -- which
> would result in some pretty frustrating cache key collisions if you tried
> to use the directory instead of the IndexReader itself.

Well...implementations really should implement their interface....

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 06 12:14:06 2008
Return-Path: <java-user-return-31794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83372 invoked from network); 6 Jan 2008 12:14:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2008 12:14:06 -0000
Received: (qmail 93411 invoked by uid 500); 6 Jan 2008 12:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93369 invoked by uid 500); 6 Jan 2008 12:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93354 invoked by uid 99); 6 Jan 2008 12:13:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 04:13:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 12:13:26 +0000
Received: by ug-out-1314.google.com with SMTP id u40so2984504ugc.29
        for <java-user@lucene.apache.org>; Sun, 06 Jan 2008 04:13:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        bh=y3qV0rNgA8c5yFSE+3ZbIlqVsqYPvF93PqfFaXrL3Ek=;
        b=NPH31Ke+vzMfGnMrF7dVxo8gjpYBmtLGxOjCy47n6dCQ0L4EdxTZVJeimA7aOMRK2iXo4S2DX17dluZYmdE7aSyczhLDfagaChOCDwvJypkAdDIbTEz0ULuA37o3nYOjUSfF3UwzjW7j/hbttWGhALYArTp0ANOyI2c7Ra/juns=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        b=iddgbA/qY6LrmRvZw09H+N92dLt4C2+QurRoAleWa6qDgOuXB3NCMdqQbjtoxo8FVV0/Wkhxjb19oqfXALEh/9be5Gs1ONjwl9kgDz9uec4iLNSgen4ZZqk8IfP+xisCEAgg//R5r93zj0AY8ySoxrE46Z1wGIJFxnAZUy36Pto=
Received: by 10.66.249.16 with SMTP id w16mr10993362ugh.32.1199621610654;
        Sun, 06 Jan 2008 04:13:30 -0800 (PST)
Received: from ?89.205.41.32? ( [89.205.41.32])
        by mx.google.com with ESMTPS id l22sm19237801uga.30.2008.01.06.04.13.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 06 Jan 2008 04:13:29 -0800 (PST)
Message-ID: <4780C5EE.4070607@googlemail.com>
Date: Sun, 06 Jan 2008 13:13:34 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Query processing with Lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dear all,

Maybe this topic is already discussed (then can I get a reference 
please?)... I would like to know how does Lucene actually process the 
query. For example, take a 2-word query "x y". Does Lucene fetch the 
lists of "x" and "y" and intersect them, or do they do something more 
fancy, for example, top-k techniques that try to avoid a full scan of 
the index lists for "x" and "y" ?

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 06 17:46:25 2008
Return-Path: <java-user-return-31795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21478 invoked from network); 6 Jan 2008 17:46:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2008 17:46:25 -0000
Received: (qmail 72808 invoked by uid 500); 6 Jan 2008 17:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72778 invoked by uid 500); 6 Jan 2008 17:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72767 invoked by uid 99); 6 Jan 2008 17:46:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 09:46:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 64.233.178.247 as permitted sender)
Received: from [64.233.178.247] (HELO hs-out-2122.google.com) (64.233.178.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 17:45:46 +0000
Received: by hs-out-2122.google.com with SMTP id 54so4970776hsz.5
        for <java-user@lucene.apache.org>; Sun, 06 Jan 2008 09:45:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=e7+KpMeMyD5n6FhybjYo99wgF2yAQWdybNB9CFDh7+M=;
        b=vNIeCY3lEPUaxJsKoTUjJvDsvETq1bhvp8NCmpbg6yyAPpQhJE1rMm47s9yX8uQHLPxDpxw4k9FKkCedPScnaa0kitonA9Zo7fVHDn0hkHXoW15vHKf/FeDqSBH0lUDzU+cPTpvj+dkIJFvtD1TLsFWbVdbLHkwXgdyjZAiew3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=RJzuTBnhRue4Fo8hnIxrJv/hNBfEabslS8k6zlgK9Y+y3Yg+wAKdKEOUufAztM7p02MxEfPkEPqE4PGXj7+R7TMtOmPXAxzLPSQ6Lr1rymQk6itlHNnXdF+Uf7Pqu7EsqIemdVuNgWxpn1Cipp2IR5feMckRatx/SJEeBcDnxTc=
Received: by 10.150.148.7 with SMTP id v7mr5164434ybd.26.1199641550996;
        Sun, 06 Jan 2008 09:45:50 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Sun, 6 Jan 2008 09:45:50 -0800 (PST)
Message-ID: <c01704c90801060945s266b5806q7c0412d133ed8388@mail.gmail.com>
Date: Sun, 6 Jan 2008 12:45:50 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Merging Lucene documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18377_20945792.1199641550327"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18377_20945792.1199641550327
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Friends,

I have a unique requirement of merging two or more lucene indexed documents
into just one indexed document . For example

Document newDocutmet = doc1+doc2+doc3

In order to do this I am planning to extract tokenstreams form each document
( i.e doc1, doc2 and doc3) , and use them to construct newDocument . The
reason is , I do not have access to the content of the original documents
(doc1,doc2,doc3)


My questions are

1. Is this the correct approach
2. Do I have to update the start and end offsets of the tokens since the
tokens from original documents (doc1, 2,3) were relative to the original
documents, and in the newDocument these offsets may be wrong.
3. If Yes, then how do I make sure that the mergeded tokens have correct
start and end offset.

Thanks !

------=_Part_18377_20945792.1199641550327--

From java-user-return-31796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 06 18:14:36 2008
Return-Path: <java-user-return-31796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28248 invoked from network); 6 Jan 2008 18:14:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2008 18:14:36 -0000
Received: (qmail 87854 invoked by uid 500); 6 Jan 2008 18:14:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87825 invoked by uid 500); 6 Jan 2008 18:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87808 invoked by uid 99); 6 Jan 2008 18:14:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 10:14:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 18:13:55 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4288453fga.27
        for <java-user@lucene.apache.org>; Sun, 06 Jan 2008 10:13:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=JcWurAxkocq+qt+zRljgRWZmFnSQQ1jdlB0KALHlp4U=;
        b=fdh1jC08/JLaQatEW1KbFdVj/zKhCz1cOkbvzWz+WA0+NGCuiOiGZiYYvSg0lHwSoe/2K5RkN62T4CPaX1troS1Z3SRFeyW7udoN0r2ncmoGRuXITv9KvQDs/GMCOM5k7kBbJQ6OeCLZsK/hEFaaZsSjVejsNcGQnGqwpHYKpvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gE1k6WH9E0PytX6ur9PfHNuJoqhe87rdotvOU7IdMwwIMm0OeO3Im482iGzf20IvPaab9IUaKJTVPgVR/Ryg6p6VAit/XNHDSpo0hEXMGVfr9csL0rszM22RuqAzoPOB9JVmHlWFHNJQCqFn+CIUDQZZhceqFhM2YAPXH73Yy60=
Received: by 10.82.171.16 with SMTP id t16mr33744593bue.11.1199643238538;
        Sun, 06 Jan 2008 10:13:58 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 6 Jan 2008 10:13:58 -0800 (PST)
Message-ID: <359a92830801061013p32711238la7223f2bcb1144f8@mail.gmail.com>
Date: Sun, 6 Jan 2008 13:13:58 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merging Lucene documents
In-Reply-To: <c01704c90801060945s266b5806q7c0412d133ed8388@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35044_5296990.1199643238532"
References: <c01704c90801060945s266b5806q7c0412d133ed8388@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35044_5296990.1199643238532
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't get what you mean about extracting tokenstreams. Tokenstreams
are, as far as I understand, an analysis-time class. That is, either when
originally indexing the document or when analyzing a query.

If you do not have the entire document stored in the index, you have to
do something like reconstruct the document from the indexed data, which
is time-consuming. But see the Luke code for a way to do this.

If you *do* have stored fields, then you have the raw text available.

In either case, you eventually get a string representation of the various
fields in the documents you want to combine. Why not just index that?
Since this is an index process and (presumably) can take some time,
you could either concatenate the strings together in memory and index
the string or write it to a file on disk and then index *that*.

If this is way off base, perhaps a bit more explanation of the problem
you're trying to solve would be in order.

Best
Erick

On Jan 6, 2008 12:45 PM, Developer Developer <devquestions@gmail.com> wrote:

> Hello Friends,
>
> I have a unique requirement of merging two or more lucene indexed
> documents
> into just one indexed document . For example
>
> Document newDocutmet = doc1+doc2+doc3
>
> In order to do this I am planning to extract tokenstreams form each
> document
> ( i.e doc1, doc2 and doc3) , and use them to construct newDocument . The
> reason is , I do not have access to the content of the original documents
> (doc1,doc2,doc3)
>
>
> My questions are
>
> 1. Is this the correct approach
> 2. Do I have to update the start and end offsets of the tokens since the
> tokens from original documents (doc1, 2,3) were relative to the original
> documents, and in the newDocument these offsets may be wrong.
> 3. If Yes, then how do I make sure that the mergeded tokens have correct
> start and end offset.
>
> Thanks !
>

------=_Part_35044_5296990.1199643238532--

From java-user-return-31797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 06 18:54:58 2008
Return-Path: <java-user-return-31797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44080 invoked from network); 6 Jan 2008 18:54:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2008 18:54:57 -0000
Received: (qmail 24807 invoked by uid 500); 6 Jan 2008 18:54:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24778 invoked by uid 500); 6 Jan 2008 18:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24767 invoked by uid 99); 6 Jan 2008 18:54:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 10:54:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 64.233.178.248 as permitted sender)
Received: from [64.233.178.248] (HELO hs-out-2122.google.com) (64.233.178.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 18:54:10 +0000
Received: by hs-out-2122.google.com with SMTP id 54so4987093hsz.5
        for <java-user@lucene.apache.org>; Sun, 06 Jan 2008 10:54:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=un3RLE1NDTO1Pdk8JQeGyUujmtfdVjIhRYYSjijq1ac=;
        b=ibfTHa6pICRT09bX23szyWyin5Sw8Sbv4y42IWd9D0Ae8aiHNFdfmTHbSD5zWyddX+EyIFXANHW+xB03Gup3nYt8ihq8Znrlab82P6OQqmW5KIxEnEOixgmjMRsWUxB0+komEo7ELEIObpMbE+1UZTch6uHe18/dE0fqkHqFpU0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LAL/NltMyoX8ZGxbfzuOSIN9DWGHZeINekvMn+wM3yEffD2m9TVejS7qq87uKahG344eGDMSiyyQdkobgAynZkHlXFt8fdHOGBsCNi21eV2llatVfNft0OnkErkif+/FN7yW2OGWQGPptNcVDqnykX6ecLqzWVWjSW2nbGdQRn0=
Received: by 10.150.92.11 with SMTP id p11mr5186672ybb.105.1199645654745;
        Sun, 06 Jan 2008 10:54:14 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Sun, 6 Jan 2008 10:54:14 -0800 (PST)
Message-ID: <c01704c90801061054g30d6269djf8cc36097200cee9@mail.gmail.com>
Date: Sun, 6 Jan 2008 13:54:14 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merging Lucene documents
In-Reply-To: <359a92830801061013p32711238la7223f2bcb1144f8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18477_29168388.1199645654715"
References: <c01704c90801060945s266b5806q7c0412d133ed8388@mail.gmail.com>
	 <359a92830801061013p32711238la7223f2bcb1144f8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18477_29168388.1199645654715
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Eric,

No, you are not off base. You are on track, but here is my problem.

I have a requirement to create one lucene document per site i.e suppose I
crawl www.xxx.com which has 1000 pages in it. If I use nutch then it will
create 1000 lucene documents i.e 1 document per page. My requirement is to
combine all 1000 pages in to just one lucene document.

One approach is to construct an in memory String by combining content from
all the pages and then index it in lucene as one document, but this is not
an elegant approach because the in memory String would be a memory hog.
Therefore I am trying to construct tokenStream for each document as follows

                  StandardAnalyzer st = new StandardAnalyzer();
                TokenStream stream = st.tokenStream("content", new
StringReader(documentText);

and then  construct a LuceneDocument by using a Field based on tokenStream

*Field<http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/document/Field.html#Field%28java.lang.String,%20org.apache.lucene.analysis.TokenStream%29>
*(String<http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html?is-external=true>
name,
TokenStream<http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/analysis/TokenStream.html>
 tokenStream)

Then TokenStream would be my own implementation which will overrise next()
method and return tokens one by one . With this approach I can avoid
creating a huge in memory string.

So, I am wondering will the tokens have correct offset values with this
approach.

Thanks !




On Jan 6, 2008 1:13 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> I don't get what you mean about extracting tokenstreams. Tokenstreams
> are, as far as I understand, an analysis-time class. That is, either when
> originally indexing the document or when analyzing a query.
>
> If you do not have the entire document stored in the index, you have to
> do something like reconstruct the document from the indexed data, which
> is time-consuming. But see the Luke code for a way to do this.
>
> If you *do* have stored fields, then you have the raw text available.
>
> In either case, you eventually get a string representation of the various
> fields in the documents you want to combine. Why not just index that?
> Since this is an index process and (presumably) can take some time,
> you could either concatenate the strings together in memory and index
> the string or write it to a file on disk and then index *that*.
>
> If this is way off base, perhaps a bit more explanation of the problem
> you're trying to solve would be in order.
>
> Best
> Erick
>
> On Jan 6, 2008 12:45 PM, Developer Developer <devquestions@gmail.com>
> wrote:
>
> > Hello Friends,
> >
> > I have a unique requirement of merging two or more lucene indexed
> > documents
> > into just one indexed document . For example
> >
> > Document newDocutmet = doc1+doc2+doc3
> >
> > In order to do this I am planning to extract tokenstreams form each
> > document
> > ( i.e doc1, doc2 and doc3) , and use them to construct newDocument . The
> > reason is , I do not have access to the content of the original
> documents
> > (doc1,doc2,doc3)
> >
> >
> > My questions are
> >
> > 1. Is this the correct approach
> > 2. Do I have to update the start and end offsets of the tokens since the
> > tokens from original documents (doc1, 2,3) were relative to the original
> > documents, and in the newDocument these offsets may be wrong.
> > 3. If Yes, then how do I make sure that the mergeded tokens have correct
> > start and end offset.
> >
> > Thanks !
> >
>

------=_Part_18477_29168388.1199645654715--

From java-user-return-31798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 06 22:44:35 2008
Return-Path: <java-user-return-31798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93490 invoked from network); 6 Jan 2008 22:44:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2008 22:44:35 -0000
Received: (qmail 93518 invoked by uid 500); 6 Jan 2008 22:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93485 invoked by uid 500); 6 Jan 2008 22:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93474 invoked by uid 99); 6 Jan 2008 22:44:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 14:44:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 22:43:53 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4333721fga.27
        for <java-user@lucene.apache.org>; Sun, 06 Jan 2008 14:43:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=tRdHKOIbwa4QrihLugv8dNDk1TKkLtiszk3rFJ7LvYc=;
        b=nK8aU1wNg+SC9XV5Fke87lVjJeWlueUdFD2Qj4rBlkR8FM6ztFXB/JE3z2NsxOeCX57n5zWCoF4NzAOoJxARee0jlhIIWnBYq3rD5X8evtm+XvGn+QtsZ0T+H8No/RBRQknsemqmCbvMVDsULGMfbw9xJkHnEDHL5VDGlRbviyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dAn6a90awupTlSRbktxmhN2ZTBkSJPxnQN8+qkB/yltBYnKlrYamnvNdeb0hmPNfAYPsIPTPp9CToeLZc3EFnlKwN8g10vA+lw3Ljikff365l4uMYJHSM57UunEL4E4enp692praPgfDRk+4nKGvBxW//kfmPbASaHqHJVOZLfY=
Received: by 10.82.158.12 with SMTP id g12mr7726214bue.18.1199659436461;
        Sun, 06 Jan 2008 14:43:56 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 6 Jan 2008 14:43:56 -0800 (PST)
Message-ID: <359a92830801061443p30e9a994k92276dc386dfd491@mail.gmail.com>
Date: Sun, 6 Jan 2008 17:43:56 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merging Lucene documents
In-Reply-To: <c01704c90801061054g30d6269djf8cc36097200cee9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35491_1074942.1199659436463"
References: <c01704c90801060945s266b5806q7c0412d133ed8388@mail.gmail.com>
	 <359a92830801061013p32711238la7223f2bcb1144f8@mail.gmail.com>
	 <c01704c90801061054g30d6269djf8cc36097200cee9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35491_1074942.1199659436463
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I wonder if offsets mean anything in this context. I suppose another
way of asking this is "why do you care?". What is it that you're trying
to make happen? Or prevent from happening?

The offsets are used for a variety of purposes, but what does it mean
for two offsets to be "close" in this context? Imagine that you have
the following pages:
p1
  p1.1
  p1.2
    p 1.2.1
    p 1.2.2
  p1.3
  p1.4
p2
  p2.1
  p2.2
     p2.2.1
     p2.2.2


Now, is a token on p1.2.1 near or far from a token on p2.2.1? Does
it depend upon how you happened to crawl the site? If so, could you
crawl it one time and get pages p1 followed by p2  the first time, and
the second time get p1, p1.1, p1.2..... p2 the next time? What does
adjacency mean then? and since it can change anyway, does
it really provide you with anything useful?

What all this is leading to is that so far, this seems like an XY problem.
That is, you're trying to solve some (as yet unstated) problem and
assuming that tokenizing is the answer. What is the higher-level
problem you're struggling with? Why couldn't you go ahead and
index each page as a single document, *Also* index the base URL,
then just search with an "AND URL:blah.blort.blivet" clause?

I think my first approach would be really stupid. Just crawl the site, and
write the resulting pages out to one file per site on disk, then index those
files. If for no other reason than re-crawling the website every time will
be an utter pain in the neck because you'll be waiting forever for each
iteration of your index since you have to go back to the site each time.
*Then* worry about elegance <G>...

But I will say, about offsets: If you're overriding next(), you can make
them anything you want.

Best
Erick

On Jan 6, 2008 1:54 PM, Developer Developer <devquestions@gmail.com> wrote:

> Hi Eric,
>
> No, you are not off base. You are on track, but here is my problem.
>
> I have a requirement to create one lucene document per site i.e suppose I
> crawl www.xxx.com which has 1000 pages in it. If I use nutch then it will
> create 1000 lucene documents i.e 1 document per page. My requirement is to
> combine all 1000 pages in to just one lucene document.
>
> One approach is to construct an in memory String by combining content from
> all the pages and then index it in lucene as one document, but this is not
> an elegant approach because the in memory String would be a memory hog.
> Therefore I am trying to construct tokenStream for each document as
> follows
>
>                  StandardAnalyzer st = new StandardAnalyzer();
>                TokenStream stream = st.tokenStream("content", new
> StringReader(documentText);
>
> and then  construct a LuceneDocument by using a Field based on tokenStream
>
> *Field<
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/document/Field.html#Field%28java.lang.String,%20org.apache.lucene.analysis.TokenStream%29
> >
> *(String<
> http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html?is-external=true
> >
> name,
> TokenStream<
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/analysis/TokenStream.html
> >
>  tokenStream)
>
> Then TokenStream would be my own implementation which will overrise next()
> method and return tokens one by one . With this approach I can avoid
> creating a huge in memory string.
>
> So, I am wondering will the tokens have correct offset values with this
> approach.
>
> Thanks !
>
>
>
>
> On Jan 6, 2008 1:13 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > I don't get what you mean about extracting tokenstreams. Tokenstreams
> > are, as far as I understand, an analysis-time class. That is, either
> when
> > originally indexing the document or when analyzing a query.
> >
> > If you do not have the entire document stored in the index, you have to
> > do something like reconstruct the document from the indexed data, which
> > is time-consuming. But see the Luke code for a way to do this.
> >
> > If you *do* have stored fields, then you have the raw text available.
> >
> > In either case, you eventually get a string representation of the
> various
> > fields in the documents you want to combine. Why not just index that?
> > Since this is an index process and (presumably) can take some time,
> > you could either concatenate the strings together in memory and index
> > the string or write it to a file on disk and then index *that*.
> >
> > If this is way off base, perhaps a bit more explanation of the problem
> > you're trying to solve would be in order.
> >
> > Best
> > Erick
> >
> > On Jan 6, 2008 12:45 PM, Developer Developer <devquestions@gmail.com>
> > wrote:
> >
> > > Hello Friends,
> > >
> > > I have a unique requirement of merging two or more lucene indexed
> > > documents
> > > into just one indexed document . For example
> > >
> > > Document newDocutmet = doc1+doc2+doc3
> > >
> > > In order to do this I am planning to extract tokenstreams form each
> > > document
> > > ( i.e doc1, doc2 and doc3) , and use them to construct newDocument .
> The
> > > reason is , I do not have access to the content of the original
> > documents
> > > (doc1,doc2,doc3)
> > >
> > >
> > > My questions are
> > >
> > > 1. Is this the correct approach
> > > 2. Do I have to update the start and end offsets of the tokens since
> the
> > > tokens from original documents (doc1, 2,3) were relative to the
> original
> > > documents, and in the newDocument these offsets may be wrong.
> > > 3. If Yes, then how do I make sure that the mergeded tokens have
> correct
> > > start and end offset.
> > >
> > > Thanks !
> > >
> >
>

------=_Part_35491_1074942.1199659436463--

From java-user-return-31799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 00:36:36 2008
Return-Path: <java-user-return-31799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25739 invoked from network); 7 Jan 2008 00:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 00:36:36 -0000
Received: (qmail 71145 invoked by uid 500); 7 Jan 2008 00:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71115 invoked by uid 500); 7 Jan 2008 00:36:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71104 invoked by uid 99); 7 Jan 2008 00:36:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 16:36:19 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 00:36:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JBfyB-0002gK-LN
	for java-user@lucene.apache.org; Sun, 06 Jan 2008 16:35:59 -0800
Message-ID: <14656336.post@talk.nabble.com>
Date: Sun, 6 Jan 2008 16:35:59 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Question regarding adding documents
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


is it possible to add a document to an index and, while doing so, get the
terms in that document? If so, how would one do this? :x

thanks :)
-- 
View this message in context: http://www.nabble.com/Question-regarding-adding-documents-tp14656336p14656336.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 00:48:45 2008
Return-Path: <java-user-return-31800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27592 invoked from network); 7 Jan 2008 00:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 00:48:45 -0000
Received: (qmail 78593 invoked by uid 500); 7 Jan 2008 00:48:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78563 invoked by uid 500); 7 Jan 2008 00:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78551 invoked by uid 99); 7 Jan 2008 00:48:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 16:48:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 00:48:06 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 953824A8142
	for <java-user@lucene.apache.org>; Mon,  7 Jan 2008 11:46:31 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Fullwidth alphanumeric characters, plus a question on Korean ranges
Date: Mon, 7 Jan 2008 11:47:22 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801071147.22889.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.

We discovered that fullwidth letters are not treated as <LETTER> and fullwidth 
digits are not treated as <DIGIT>.

This in itself is probably easy to fix (including the filter for normalising 
these back to the normal versions) but while sanity checking the blocks in 
StandardTokenizer.jj I found some suspicious parts and felt it necessary to 
check that this is by design as there is no comment explaining the anomalies.

Line 87:
       "\uffa0"-"\uffdc"

  The halfwidth Katakana "letters" (as Unicode calls them) are in <CJ> as
  expected, so I'm wondering if these halfwidth Hangul "letters" should
  actually be in <KOREAN> instead of <LETTER>.

Line 92:
       "\u3040"-"\u318f",

  This block appears to duplicate the ranges in the next three lines and
  suspiciously also includes a range which belongs to <KOREAN>, making me
  wonder what happens when a range is in two blocks.

In case anyone is wondering, the JFlex version of the tokeniser on Lucene 
trunk has the same ranges.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 05:12:49 2008
Return-Path: <java-user-return-31801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95238 invoked from network); 7 Jan 2008 05:12:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 05:12:49 -0000
Received: (qmail 17387 invoked by uid 500); 7 Jan 2008 05:12:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17351 invoked by uid 500); 7 Jan 2008 05:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17340 invoked by uid 99); 7 Jan 2008 05:12:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jan 2008 21:12:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 05:12:08 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 249574A8181
	for <java-user@lucene.apache.org>; Mon,  7 Jan 2008 16:10:36 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Question regarding adding documents
Date: Mon, 7 Jan 2008 16:11:26 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <14656336.post@talk.nabble.com>
In-Reply-To: <14656336.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801071611.26486.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 07 January 2008 11:35:59 chris.b wrote:
> is it possible to add a document to an index and, while doing so, get the
> terms in that document? If so, how would one do this? :x

My first thought would be: when adding fields to the document, use the Field 
constructors which accept a TokenStream and pass in a CachingTokenStream 
wrapped around the real token stream.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 10:04:33 2008
Return-Path: <java-user-return-31802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40935 invoked from network); 7 Jan 2008 10:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 10:04:33 -0000
Received: (qmail 43013 invoked by uid 500); 7 Jan 2008 10:04:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42980 invoked by uid 500); 7 Jan 2008 10:04:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42969 invoked by uid 99); 7 Jan 2008 10:04:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 02:04:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 10:04:04 +0000
Received: from [130.225.25.7] (pc977.sb.statsbiblioteket.dk [130.225.25.7])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JU90069HQMKRV@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 07 Jan 2008 11:03:56 +0100 (MET)
Date: Mon, 07 Jan 2008 11:00:54 +0100
From: Lars Clausen <lc@statsbiblioteket.dk>
Subject: Re: OutOfMemoryError on small search in large, simple index
In-reply-to: <Pine.LNX.4.62.0801012335090.28794@radix.cryptio.net>
To: java-user@lucene.apache.org
Message-id: <1199700054.8503.5.camel@pc977>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.12.1
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <1194964649.13896.1180.camel@pc977>
 <200711131613.07641@danielnaber.de>
 <Pine.LNX.4.62.0711130722400.6553@radix.cryptio.net>
 <1197455867.9075.416.camel@pc977> <1197465947.9075.436.camel@pc977>
 <Pine.LNX.4.62.0801012335090.28794@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


On Tue, 2008-01-01 at 23:38 -0800, Chris Hostetter wrote:
> : On Wed, 2007-12-12 at 11:37 +0100, Lars Clausen wrote:
> 
> : Seems there's a reason we still use all this memory:
> : SegmentReader.fakeNorms() creates the full-size array for us anyway, so
> : the memory usage cannot be avoided as long as somebody asks for the
> : norms array at any point.  The solution is starting to look like a patch
> 
> Minor (late) nit:  fakeNorms will reuse the same array for every field 
> that doesn't have norms -- so while omiting norms from only one field may 
> not save you any RAM, omiting norms for 10 fields will save you the RAM 
> used by 9 of those fields.  (correct?)

Doesn't appear to be the case in our test.  We had two fields with
norms, omitting saved only about 4MB for 50 million entries.  I'm going
to try the patch that's attached to a bug report somewhere, which fakes
the norms without making an array for it.

-Lars



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 10:58:05 2008
Return-Path: <java-user-return-31803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55007 invoked from network); 7 Jan 2008 10:58:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 10:58:05 -0000
Received: (qmail 18080 invoked by uid 500); 7 Jan 2008 10:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17795 invoked by uid 500); 7 Jan 2008 10:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17784 invoked by uid 99); 7 Jan 2008 10:57:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 02:57:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vincenzo.iafelice@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 10:57:37 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4472294fga.27
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 02:57:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=v5ZAWnl4iSaFnGlijB2q3HgBfodAlfHrlxsGPtUaSzk=;
        b=s9eQgyikjOsimfKueN5x8DMXTmRaMkJJaFfTavqnzuD88i5CbGFUSjmCusyGV2sdzL+uj+nHWBa7Agw0rR031Rld2kp0WMuoVAmeBW77Btu/TDZAvtGwQ1zumPRK2M7igHfDvl0kfQV8DLvcEAjr8RLw8pJTMZYvEl07xfjdetM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=FKmAhglZtWiB9n9cwMz2LkBTQ9KYUI6Ip9BGpvrCirbwmXHpr8dSQHYy75DvzhhtOPNEGvApj3kaLTMrkRvbrM2Gp2ZTUHHy3VvUCGBweLZWagkz0BQMFTDOjOUAalJEgO2hnTJ2tte79sVtldvOD+hwrSMYWLIiZtZxGQrlR4M=
Received: by 10.86.84.5 with SMTP id h5mr19999371fgb.49.1199703450181;
        Mon, 07 Jan 2008 02:57:30 -0800 (PST)
Received: by 10.86.68.10 with HTTP; Mon, 7 Jan 2008 02:57:30 -0800 (PST)
Message-ID: <f8e7630f0801070257k4ffffa49p723709b9360d6708@mail.gmail.com>
Date: Mon, 7 Jan 2008 11:57:30 +0100
From: "vincenzo iafelice" <vincenzo.iafelice@gmail.com>
To: java-user@lucene.apache.org
Subject: LUCENE and UIMA
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11275_24656000.1199703450177"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11275_24656000.1199703450177
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

i am a new user of lucene and i have a little problem.
I used UIMA to create a search index for a document collection, so my
question is:
can i use this index with Lucene?

Thanks
Vincenzo

------=_Part_11275_24656000.1199703450177--

From java-user-return-31804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 11:02:30 2008
Return-Path: <java-user-return-31804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56088 invoked from network); 7 Jan 2008 11:02:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 11:02:30 -0000
Received: (qmail 27296 invoked by uid 500); 7 Jan 2008 11:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27274 invoked by uid 500); 7 Jan 2008 11:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27263 invoked by uid 99); 7 Jan 2008 11:02:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 03:02:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jesieltrevisan@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 11:01:49 +0000
Received: by py-out-1112.google.com with SMTP id y63so10061996pyg.9
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 03:01:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xBmvqIQGEOqylvOYWW4i41puBm5Q+AyqBxIs6hswIkU=;
        b=chhi6U4s0xvRd9mdsQ8jfEDgOV562rwp4UR2EuudmpLTlernfoz+ToRUfIL/VOrXn6h2ARsn0fuiy94eftIbcY58ZwoOD5e3kgSRSNFh1T/IEBvK77z2zocWviqibejEMfxOmk/BTpJN7SStDgEcGHzCNJl9FcRaYaqDOeJTba0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h8DmtJIyWvBo5re9ekeHtE9XA+gWSfK+GIGmWdLueQjN4nvfcyMg9d0qT3e5tsRRpUydXTS7MmJNObXvY/ImVSCcm4TObjV4sySO06++nZYclf0matKRDw1jI5A7mDck9YZerrDlrhpKsacJWmvcFkZ/OkVFLGTsXUssLw5wxxM=
Received: by 10.35.68.3 with SMTP id v3mr459053pyk.12.1199703713861;
        Mon, 07 Jan 2008 03:01:53 -0800 (PST)
Received: by 10.35.119.14 with HTTP; Mon, 7 Jan 2008 03:01:53 -0800 (PST)
Message-ID: <2bce90af0801070301l60cc4631ud074d7d1240f447@mail.gmail.com>
Date: Mon, 7 Jan 2008 09:01:53 -0200
From: "Jesiel Trevisan" <jesieltrevisan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE and UIMA
In-Reply-To: <f8e7630f0801070257k4ffffa49p723709b9360d6708@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18739_7600820.1199703713856"
References: <f8e7630f0801070257k4ffffa49p723709b9360d6708@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18739_7600820.1199703713856
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I don=B4t know UIMA, but, you can you NUTCH to create index to Lucene=B4s
search.
Nutch is so easy, it implements the indexing and also search functions.
You can find it in the lucene home page.
Tks.

On Jan 7, 2008 8:57 AM, vincenzo iafelice <vincenzo.iafelice@gmail.com>
wrote:

> Hi all,
>
> i am a new user of lucene and i have a little problem.
> I used UIMA to create a search index for a document collection, so my
> question is:
> can i use this index with Lucene?
>
> Thanks
> Vincenzo
>



--=20
_______________________________________________________
Jesiel A.S. Trevisan
Email: jesieltrevisan@gmail.com.br
MSN: jesieltrevisan@hotmail.com
Skype & AIM: jesieltrevisan
YahooMessager: jesiel.trevisan
ICQ:: 46527510
_______________________________________________________
CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and privileged information or otherwise be protected by law. Any
unauthorized review, use, disclosure or distribution is prohibited. If you
are not the intended recipient, please contact the sender by reply e-mail
and destroy all copies of the original message.

------=_Part_18739_7600820.1199703713856--

From java-user-return-31805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 12:32:05 2008
Return-Path: <java-user-return-31805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84710 invoked from network); 7 Jan 2008 12:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 12:32:05 -0000
Received: (qmail 52078 invoked by uid 500); 7 Jan 2008 12:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52022 invoked by uid 500); 7 Jan 2008 12:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52005 invoked by uid 99); 7 Jan 2008 12:31:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 04:31:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 12:31:25 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4488688fga.27
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 04:31:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=houtMt3R0Ho9QcFHP2h5uVEQYizP+MknSdfp7QL3hWI=;
        b=bWR4EjOrAcnZnAKUPRyxoEyWJHWMC2xbfPepU9Jremu8gmsH1JEUjJgBnpMLD/InhyUEmRUcFoaORNgGDt4D3NOPT/V+7eGo6VrsgUqE2qhCjSdBG4i+Rzbq2z1iNz6BLlPF+tyWOqVoB1pPlHoTstYjRHIQLbQICYH3qKDleIA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ErewDMEvBfPEbmjnlAOhBHiZW5saprl9UMCXrAjtEOWYJENajqpVDeqxV1/8abupdW6L66XPc2pURDoxIxDFlzGZ1cDonbsaewo6eXSR9oRX4mK9rm04ayLpe9rOkhs3utzD4d9MdRqYQtrunvwIr7inGjlIZGSxxKfMN2KFEy0=
Received: by 10.86.54.3 with SMTP id c3mr9008406fga.24.1199709088836;
        Mon, 07 Jan 2008 04:31:28 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Mon, 7 Jan 2008 04:31:28 -0800 (PST)
Message-ID: <e05f0fd10801070431h1b4b11acm9b0f18c61b503609@mail.gmail.com>
Date: Mon, 7 Jan 2008 14:31:28 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question regarding adding documents
In-Reply-To: <200801071611.26486.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8001_19787118.1199709088829"
References: <14656336.post@talk.nabble.com>
	 <200801071611.26486.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8001_19787118.1199709088829
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Or, very similar, wrap the 'real' analyzer A with your analyzer that
delegates to A but also keeps the returned tokens, possibly by
using a CachingTokenFilter.

On Jan 7, 2008 7:11 AM, Daniel Noll <daniel@nuix.com> wrote:

> On Monday 07 January 2008 11:35:59 chris.b wrote:
> > is it possible to add a document to an index and, while doing so, get
> the
> > terms in that document? If so, how would one do this? :x
>
> My first thought would be: when adding fields to the document, use the
> Field
> constructors which accept a TokenStream and pass in a CachingTokenStream
> wrapped around the real token stream.
>
> Daniel
>

------=_Part_8001_19787118.1199709088829--

From java-user-return-31806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 12:49:23 2008
Return-Path: <java-user-return-31806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90843 invoked from network); 7 Jan 2008 12:49:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 12:49:23 -0000
Received: (qmail 65979 invoked by uid 500); 7 Jan 2008 12:49:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65948 invoked by uid 500); 7 Jan 2008 12:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65937 invoked by uid 99); 7 Jan 2008 12:49:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 04:49:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 12:48:40 +0000
Received: by rv-out-0910.google.com with SMTP id k20so6146616rvb.5
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 04:48:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=S5x0f7gw3WaW+DRWVUJ8YuantRuEZQH0Vcho/nbc3Jk=;
        b=wqlmFCjGVYOaGnA9ZjTFZ517BaQ4kUZsOoV6Pp5LHLpyDncXyMcfixK67s6+kPLrzvwyZuvkj4bHBESMh0/yavcP0Cs5f81i2pfTSgQRMM4D4YD/19ZFSqg8Y0HsuRL7Dkti5/bWGY4vddWCVLQL7xPoOu03uCSDua3RU5O0u7c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=nJipfQLrSdaHPFIPIGm81pa24CaQ1fYahhwSUY3ErhDKuMTKSt/LyvyYeY3ZICm+opsqFRi9eLUQWbv2jkgxJZ7og6DuQqqQXsJGS2/QThxq9k5TRgIKkVTG8nDYarrs9a3GPvJO+TtTdI7uay2oyT8KvZLMkOT5WvjAaatefx8=
Received: by 10.141.23.7 with SMTP id a7mr10569684rvj.58.1199710125018;
        Mon, 07 Jan 2008 04:48:45 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Mon, 7 Jan 2008 04:48:44 -0800 (PST)
Message-ID: <52c3ddca0801070448t2386f6f3gfb13aba19e76d2ad@mail.gmail.com>
Date: Mon, 7 Jan 2008 13:48:44 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Wikia search goes live today
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32229_12285049.1199710124993"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32229_12285049.1199710124993
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I noticed that Wikia search goes live today (see
http://www.devxnews.com/article.php/3719906).
Does anybody know where I could find more technical information about their
solution? Are they going to contribute their enhancements back to
Lucene/Nutch/Hadoop code? My understanding is that as long as they claim
they want to build their solution on top of open source technology they
should be contributing back.

http://re.search.wikia.com/search#+wikia%20+lucene%20+nutch%20+hadoop does
not return anything :-)

Regards,
Lukas
-- 
http://blog.lukas-vlcek.com/

------=_Part_32229_12285049.1199710124993--

From java-user-return-31807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 13:14:18 2008
Return-Path: <java-user-return-31807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 187 invoked from network); 7 Jan 2008 13:14:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 13:14:18 -0000
Received: (qmail 1418 invoked by uid 500); 7 Jan 2008 13:14:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1377 invoked by uid 500); 7 Jan 2008 13:14:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1366 invoked by uid 99); 7 Jan 2008 13:14:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 05:14:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 13:13:36 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id AFBEF87F01
	for <java-user@lucene.apache.org>; Mon,  7 Jan 2008 05:13:39 -0800 (PST)
Message-Id: <457FCCA4-72F5-4015-B5C0-F232418DD2AE@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <52c3ddca0801070448t2386f6f3gfb13aba19e76d2ad@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Wikia search goes live today
Date: Mon, 7 Jan 2008 08:13:31 -0500
References: <52c3ddca0801070448t2386f6f3gfb13aba19e76d2ad@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:

> Hi,
>
> I noticed that Wikia search goes live today (see
> http://www.devxnews.com/article.php/3719906).
> Does anybody know where I could find more technical information  
> about their
> solution? Are they going to contribute their enhancements back to
> Lucene/Nutch/Hadoop code? My understanding is that as long as they  
> claim
> they want to build their solution on top of open source technology  
> they
> should be contributing back.

Not sure what they have done, but nothing in the Apache license  
requires contribution back, even if it would be appreciated.

Cheers,
Grant

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 13:36:50 2008
Return-Path: <java-user-return-31808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6947 invoked from network); 7 Jan 2008 13:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 13:36:50 -0000
Received: (qmail 27761 invoked by uid 500); 7 Jan 2008 13:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27677 invoked by uid 500); 7 Jan 2008 13:36:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27666 invoked by uid 99); 7 Jan 2008 13:36:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 05:36:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.199.18.82] (HELO imap.impetus.co.in) (203.199.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 13:36:21 +0000
Received: from impetusdl088 ([192.168.146.77]) by
          imap.impetus.co.in (Netscape Messaging Server 4.15) with ESMTP
          id JUA0UZ00.KJH for <java-user@lucene.apache.org>; Mon, 7 Jan
          2008 19:14:59 +0530 
From: "Shivani Sawhney" <shivani.sawhney@impetus.co.in>
To: <java-user@lucene.apache.org>
Subject: Using Lucene with Jarowinkler
Date: Mon, 7 Jan 2008 19:06:09 +0530
Message-ID: <00ba01c85132$43577980$4d92a8c0@impetus.co.in>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00BB_01C85160.5D0FB580"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AchRMkMXcFdn742PTkiTwH+OQhvMzg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00BB_01C85160.5D0FB580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

I am using Jarowinkler scoring in my current project for matching names. The
database of names against which the inputted value has to be matched is huge
and thus we are faced with performance issues.

 

We now want lucene to help us here; we want lucene's speed for handling huge
data but still want to depend on Jarowinkler for its scoring.

 

Some sample data that we expect a match between are, such as:

*	'Lowery, Betty' and 'Lowery, Betty Sue'
*	'Malik, Mohammad Saleem'  and 'Malik, Mohammad Salim'

 

The questions I have are as follows:

*	What, in lucene, should be used for doing a match between such
Strings where a cut-off score is also to be provided while matching them? I
tried using fuzzy query in the following way but didn't know how to work
with it when the String to be matched has more than one word.

 

        QueryParser queryParser = new QueryParser(Constants.INDEX_KEY, new
StandardAnalyzer());

        query = queryParser.parse(strSearchString +
Constants.LUCENE_FUZZY_QUERY_SYMBOL + Constants.MATCH_CUT_OFF);

 

*	Is Lucene scoring to be used here or simply the fuzzy query?
*	Is there any way I can override the way Lucene's logic for String
match and use Jarowinkler there instead. 

 

 

 

Any help will be appreciated.

 

Thanks

Shivani Sawhney  

 


------=_NextPart_000_00BB_01C85160.5D0FB580--


From java-user-return-31809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 13:53:12 2008
Return-Path: <java-user-return-31809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15848 invoked from network); 7 Jan 2008 13:53:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 13:53:12 -0000
Received: (qmail 54637 invoked by uid 500); 7 Jan 2008 13:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54607 invoked by uid 500); 7 Jan 2008 13:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54596 invoked by uid 99); 7 Jan 2008 13:52:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 05:52:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 13:52:32 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2395508wxd.20
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 05:52:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=jzzYCr1ZUnunlzVSlNCs+uO5GdDIYvQxefNn6jewl2Q=;
        b=XRDlxoLTvSIHW0adNjUtIwyyXI4d2A81rcB2S6fcgQKOvTFXwvmYPGacc0V9wkvuQtRlZcuYfUy2viCd+Skdx1+S3aWTTOJKXo7uXcG3ro1aC+m97E2oOptUXzELqeLjNmVLE12G9NKWksSSuHk4WXUKjLDZTmfcMAY69SNNIgk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DGkFpjpErbZcUIO/aX4/IzJH75k5wZy54wTiee10GNFTz1G/9KVKlWnM5sJMPx8SqESyvoLudq7/MJViCjdzZ1OfTAFCqpgg1p9bGAOJLQs3lTTm4ga9aXkbxAcoh0eRbUdATEqIp+Q79aLRL6TkBky1f2OsiPVyVw0j4zM8hrg=
Received: by 10.150.97.20 with SMTP id u20mr3382846ybb.17.1199713955816;
        Mon, 07 Jan 2008 05:52:35 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Mon, 7 Jan 2008 05:52:35 -0800 (PST)
Message-ID: <c01704c90801070552q4b0cb600m5c0d4ea9ddcb209d@mail.gmail.com>
Date: Mon, 7 Jan 2008 08:52:35 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question regarding adding documents
In-Reply-To: <e05f0fd10801070431h1b4b11acm9b0f18c61b503609@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19531_2397978.1199713955800"
References: <14656336.post@talk.nabble.com>
	 <200801071611.26486.daniel@nuix.com>
	 <e05f0fd10801070431h1b4b11acm9b0f18c61b503609@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19531_2397978.1199713955800
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

here is another approach.

StandardAnalyzer st = new StandardAnalyzer();
StringReader reader= new StringReader("text to index...");
                TokenStream stream = st.tokenStream("content", reader);


Then use the Field constructor such as
*Field<http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/document/Field.html#Field%28java.lang.String,%20org.apache.lucene.analysis.TokenStream%29>
*(String<http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html?is-external=true>
name,
TokenStream<http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/analysis/TokenStream.html>
 tokenStream)

to add a filed to a Document and then add the Document to the index.





On Jan 7, 2008 7:31 AM, Doron Cohen <cdoronc@gmail.com> wrote:

> Or, very similar, wrap the 'real' analyzer A with your analyzer that
> delegates to A but also keeps the returned tokens, possibly by
> using a CachingTokenFilter.
>
> On Jan 7, 2008 7:11 AM, Daniel Noll <daniel@nuix.com> wrote:
>
> > On Monday 07 January 2008 11:35:59 chris.b wrote:
> > > is it possible to add a document to an index and, while doing so, get
> > the
> > > terms in that document? If so, how would one do this? :x
> >
> > My first thought would be: when adding fields to the document, use the
> > Field
> > constructors which accept a TokenStream and pass in a CachingTokenStream
> > wrapped around the real token stream.
> >
> > Daniel
> >
>

------=_Part_19531_2397978.1199713955800--

From java-user-return-31810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 14:00:27 2008
Return-Path: <java-user-return-31810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20090 invoked from network); 7 Jan 2008 14:00:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 14:00:26 -0000
Received: (qmail 66251 invoked by uid 500); 7 Jan 2008 14:00:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66224 invoked by uid 500); 7 Jan 2008 14:00:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66213 invoked by uid 99); 7 Jan 2008 14:00:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 06:00:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of devquestions@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 13:59:55 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2397565wxd.20
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 05:59:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Qmqa4KGYjl1H/wDdVsGZNgjvw/f0ZoIMMtOyvFa4e2o=;
        b=j+YamZJpCtH22nLrTNMwFj2DWiqR9ZZhKfsbRbgFjgifgzPBWodq5OUrGJdJPWGrIk3P9HXLPUQ6JrRgsIlUsFsh4qa6baEKP47drUeq+lR3f1dKNFiRpJ1ua1eOTcqoBUgU7EmGF+QQW/8dY6M0Qq4CzFzn/ZtC1w5UuCzIXww=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TBfq2lpFrPcgQRgDRYajv4Z0ZglejCp45PTnVEjgAmmrCHPOHkciimyFLE2deKPdIqKBznrcADsaGeY1+TK9VMLoWF+BbsUbpNNa6BH6IufzcnvqSi3kcdl3+m7hzpuq9Kx6rxhYmD8dQAMUsOYmFa9egUBPrOF/17Cmkwd6Kjs=
Received: by 10.151.12.1 with SMTP id p1mr171958ybi.14.1199714387296;
        Mon, 07 Jan 2008 05:59:47 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Mon, 7 Jan 2008 05:59:47 -0800 (PST)
Message-ID: <c01704c90801070559g2b69f412k7a915b38f4c4da40@mail.gmail.com>
Date: Mon, 7 Jan 2008 08:59:47 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Merging Lucene documents
In-Reply-To: <359a92830801061443p30e9a994k92276dc386dfd491@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19548_12037290.1199714387120"
References: <c01704c90801060945s266b5806q7c0412d133ed8388@mail.gmail.com>
	 <359a92830801061013p32711238la7223f2bcb1144f8@mail.gmail.com>
	 <c01704c90801061054g30d6269djf8cc36097200cee9@mail.gmail.com>
	 <359a92830801061443p30e9a994k92276dc386dfd491@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19548_12037290.1199714387120
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Eric,

Thank you very much for the insight on offsets. I think I may not really
need to worry about offsets.

Nonetheless, I solved my offset problem by overriding Java StringReader
classs instead of overriding tokenstream class., The StringReader class does
the streaming nicely, thus solving the offset problem and also the memory
hog problem.




On Jan 6, 2008 5:43 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> Well, I wonder if offsets mean anything in this context. I suppose another
> way of asking this is "why do you care?". What is it that you're trying
> to make happen? Or prevent from happening?
>
> The offsets are used for a variety of purposes, but what does it mean
> for two offsets to be "close" in this context? Imagine that you have
> the following pages:
> p1
>  p1.1
>  p1.2
>    p 1.2.1
>    p 1.2.2
>  p1.3
>  p1.4
> p2
>  p2.1
>  p2.2
>     p2.2.1
>     p2.2.2
>
>
> Now, is a token on p1.2.1 near or far from a token on p2.2.1? Does
> it depend upon how you happened to crawl the site? If so, could you
> crawl it one time and get pages p1 followed by p2  the first time, and
> the second time get p1, p1.1, p1.2..... p2 the next time? What does
> adjacency mean then? and since it can change anyway, does
> it really provide you with anything useful?
>
> What all this is leading to is that so far, this seems like an XY problem.
> That is, you're trying to solve some (as yet unstated) problem and
> assuming that tokenizing is the answer. What is the higher-level
> problem you're struggling with? Why couldn't you go ahead and
> index each page as a single document, *Also* index the base URL,
> then just search with an "AND URL:blah.blort.blivet" clause?
>
> I think my first approach would be really stupid. Just crawl the site, and
> write the resulting pages out to one file per site on disk, then index
> those
> files. If for no other reason than re-crawling the website every time will
> be an utter pain in the neck because you'll be waiting forever for each
> iteration of your index since you have to go back to the site each time.
> *Then* worry about elegance <G>...
>
> But I will say, about offsets: If you're overriding next(), you can make
> them anything you want.
>
> Best
> Erick
>
> On Jan 6, 2008 1:54 PM, Developer Developer <devquestions@gmail.com>
> wrote:
>
> > Hi Eric,
> >
> > No, you are not off base. You are on track, but here is my problem.
> >
> > I have a requirement to create one lucene document per site i.e suppose
> I
> > crawl www.xxx.com which has 1000 pages in it. If I use nutch then it
> will
> > create 1000 lucene documents i.e 1 document per page. My requirement is
> to
> > combine all 1000 pages in to just one lucene document.
> >
> > One approach is to construct an in memory String by combining content
> from
> > all the pages and then index it in lucene as one document, but this is
> not
> > an elegant approach because the in memory String would be a memory hog.
> > Therefore I am trying to construct tokenStream for each document as
> > follows
> >
> >                  StandardAnalyzer st = new StandardAnalyzer();
> >                TokenStream stream = st.tokenStream("content", new
> > StringReader(documentText);
> >
> > and then  construct a LuceneDocument by using a Field based on
> tokenStream
> >
> > *Field<
> >
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/document/Field.html#Field%28java.lang.String,%20org.apache.lucene.analysis.TokenStream%29
> > >
> > *(String<
> >
> http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html?is-external=true
> > >
> > name,
> > TokenStream<
> >
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/analysis/TokenStream.html
> > >
> >  tokenStream)
> >
> > Then TokenStream would be my own implementation which will overrise
> next()
> > method and return tokens one by one . With this approach I can avoid
> > creating a huge in memory string.
> >
> > So, I am wondering will the tokens have correct offset values with this
> > approach.
> >
> > Thanks !
> >
> >
> >
> >
> > On Jan 6, 2008 1:13 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > > I don't get what you mean about extracting tokenstreams. Tokenstreams
> > > are, as far as I understand, an analysis-time class. That is, either
> > when
> > > originally indexing the document or when analyzing a query.
> > >
> > > If you do not have the entire document stored in the index, you have
> to
> > > do something like reconstruct the document from the indexed data,
> which
> > > is time-consuming. But see the Luke code for a way to do this.
> > >
> > > If you *do* have stored fields, then you have the raw text available.
> > >
> > > In either case, you eventually get a string representation of the
> > various
> > > fields in the documents you want to combine. Why not just index that?
> > > Since this is an index process and (presumably) can take some time,
> > > you could either concatenate the strings together in memory and index
> > > the string or write it to a file on disk and then index *that*.
> > >
> > > If this is way off base, perhaps a bit more explanation of the problem
> > > you're trying to solve would be in order.
> > >
> > > Best
> > > Erick
> > >
> > > On Jan 6, 2008 12:45 PM, Developer Developer <devquestions@gmail.com>
> > > wrote:
> > >
> > > > Hello Friends,
> > > >
> > > > I have a unique requirement of merging two or more lucene indexed
> > > > documents
> > > > into just one indexed document . For example
> > > >
> > > > Document newDocutmet = doc1+doc2+doc3
> > > >
> > > > In order to do this I am planning to extract tokenstreams form each
> > > > document
> > > > ( i.e doc1, doc2 and doc3) , and use them to construct newDocument .
> > The
> > > > reason is , I do not have access to the content of the original
> > > documents
> > > > (doc1,doc2,doc3)
> > > >
> > > >
> > > > My questions are
> > > >
> > > > 1. Is this the correct approach
> > > > 2. Do I have to update the start and end offsets of the tokens since
> > the
> > > > tokens from original documents (doc1, 2,3) were relative to the
> > original
> > > > documents, and in the newDocument these offsets may be wrong.
> > > > 3. If Yes, then how do I make sure that the mergeded tokens have
> > correct
> > > > start and end offset.
> > > >
> > > > Thanks !
> > > >
> > >
> >
>

------=_Part_19548_12037290.1199714387120--

From java-user-return-31811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 15:06:10 2008
Return-Path: <java-user-return-31811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18390 invoked from network); 7 Jan 2008 15:06:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 15:06:10 -0000
Received: (qmail 75052 invoked by uid 500); 7 Jan 2008 15:05:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75020 invoked by uid 500); 7 Jan 2008 15:05:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75005 invoked by uid 99); 7 Jan 2008 15:05:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 07:05:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 15:05:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id B1810190E35
	for <java-user@lucene.apache.org>; Mon,  7 Jan 2008 07:05:26 -0800 (PST)
Message-Id: <77CE107B-C3FF-4430-B929-2BB26E552DD6@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <00ba01c85132$43577980$4d92a8c0@impetus.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Using Lucene with Jarowinkler
Date: Mon, 7 Jan 2008 10:05:26 -0500
References: <00ba01c85132$43577980$4d92a8c0@impetus.co.in>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

FuzzyQuery uses EditDistance, you probably could create a  
JaroWinklerQuery that mimics FuzzyQuery but calculates the JaroWinkler  
score instead of the edit distance.  As for dealing with phrases, that  
would get a bit more complex, but you may be able to use PhraseQuery  
as an example and then implement a JaroWinklerPhraseQuery or something  
like that.


-Grant

On Jan 7, 2008, at 8:36 AM, Shivani Sawhney wrote:

> Hi All,
>
>
>
> I am using Jarowinkler scoring in my current project for matching  
> names. The
> database of names against which the inputted value has to be matched  
> is huge
> and thus we are faced with performance issues.
>
>
>
> We now want lucene to help us here; we want lucene's speed for  
> handling huge
> data but still want to depend on Jarowinkler for its scoring.
>
>
>
> Some sample data that we expect a match between are, such as:
>
> *	'Lowery, Betty' and 'Lowery, Betty Sue'
> *	'Malik, Mohammad Saleem'  and 'Malik, Mohammad Salim'
>
>
>
> The questions I have are as follows:
>
> *	What, in lucene, should be used for doing a match between such
> Strings where a cut-off score is also to be provided while matching  
> them? I
> tried using fuzzy query in the following way but didn't know how to  
> work
> with it when the String to be matched has more than one word.
>
>
>
>        QueryParser queryParser = new  
> QueryParser(Constants.INDEX_KEY, new
> StandardAnalyzer());
>
>        query = queryParser.parse(strSearchString +
> Constants.LUCENE_FUZZY_QUERY_SYMBOL + Constants.MATCH_CUT_OFF);
>
>
>
> *	Is Lucene scoring to be used here or simply the fuzzy query?
> *	Is there any way I can override the way Lucene's logic for String
> match and use Jarowinkler there instead.
>
>
>
>
>
>
>
> Any help will be appreciated.
>
>
>
> Thanks
>
> Shivani Sawhney
>
>
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 16:22:13 2008
Return-Path: <java-user-return-31812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79743 invoked from network); 7 Jan 2008 16:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 16:22:12 -0000
Received: (qmail 18974 invoked by uid 500); 7 Jan 2008 16:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18951 invoked by uid 500); 7 Jan 2008 16:21:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18940 invoked by uid 99); 7 Jan 2008 16:21:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 08:21:55 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 16:21:30 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 8F396FF1BA
	for <java-user@lucene.apache.org>; Mon,  7 Jan 2008 08:21:34 -0800 (PST)
Message-Id: <9790F870-420D-480A-8171-2794BE2937B1@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <457FCCA4-72F5-4015-B5C0-F232418DD2AE@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Wikia search goes live today
Date: Mon, 7 Jan 2008 11:21:33 -0500
References: <52c3ddca0801070448t2386f6f3gfb13aba19e76d2ad@mail.gmail.com> <457FCCA4-72F5-4015-B5C0-F232418DD2AE@apache.org>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

One other thing to note, you can definitely see Lucene in action (or  
Nutch, that is) by clicking on the score returned for a given document  
(try searching for Lucene) and you see, in all it's glory, the Lucene  
explain results...  It even displays the Nutch logo, which makes me  
wonder if they are misusing an ASF trademark (but, IANAL, so I don't  
know) since they don't state that Nutch is a trademark of the ASF.   
But, that is a discussion for somewhere else...


On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:

>
> On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
>
>> Hi,
>>
>> I noticed that Wikia search goes live today (see
>> http://www.devxnews.com/article.php/3719906).
>> Does anybody know where I could find more technical information  
>> about their
>> solution? Are they going to contribute their enhancements back to
>> Lucene/Nutch/Hadoop code? My understanding is that as long as they  
>> claim
>> they want to build their solution on top of open source technology  
>> they
>> should be contributing back.
>
> Not sure what they have done, but nothing in the Apache license  
> requires contribution back, even if it would be appreciated.
>
> Cheers,
> Grant
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 16:36:56 2008
Return-Path: <java-user-return-31813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89707 invoked from network); 7 Jan 2008 16:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 16:36:56 -0000
Received: (qmail 49679 invoked by uid 500); 7 Jan 2008 16:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49422 invoked by uid 500); 7 Jan 2008 16:36:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49404 invoked by uid 99); 7 Jan 2008 16:36:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 08:36:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 16:36:12 +0000
Received: by nf-out-0910.google.com with SMTP id d3so576285nfc.15
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 08:36:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=SZfNMnfu0CNHHmuW09vECxWa85COT1Bt7UvxgEyd8Bo=;
        b=X1xqTWM/vozjm6vvql0cxCntYucNOTLS8LjKud4i91HKKkZEPrFuwjMW9VGRSWGybYLGMczk0EqS59AjvjMKl5tLoyfAXikFqW1wWvGg/9lrRqwOstbQDTSt2wOPL7Hab4tfLQlJaN4Zr49JwSw9P4h+l00HWna2EYZ7x+eCeWw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Al0QjQ86qKp6C1HkcSNqnIDprD6rR+HkBmUSS+e7KEYfOQWXH4/qIy/AMMK+2EjmrSIT+9BezzVnxjY7/GyFDlq5QfDnMa8OdRhKj+9Y4fdhn9EHYLhAXvUbTFDvVlE4HwkMzaSFYiUvHqPZ5goEINEOjdwf2rD/GY8LQUzw4yg=
Received: by 10.78.150.7 with SMTP id x7mr23301513hud.48.1199723775455;
        Mon, 07 Jan 2008 08:36:15 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Mon, 7 Jan 2008 08:36:15 -0800 (PST)
Message-ID: <6e3ae6310801070836x4d49209fg4f118b682e73f68c@mail.gmail.com>
Date: Mon, 7 Jan 2008 08:36:15 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene with Jarowinkler
In-Reply-To: <00ba01c85132$43577980$4d92a8c0@impetus.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <00ba01c85132$43577980$4d92a8c0@impetus.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Shivani,

For my understanding, Jarowinkler doesn't quite fit with Lucene's
structure. Calculating Jaro-Winkler distance for the query against
each word in the index is quite computational intensive.

What's possible may be using SoundEx, Metaphone, Double Metaphone,
etc, instead. For each word in the index, it can pre-calculate a value
for the query to match against.(which is how Analyzer works).

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer (remain anonymous per request) got 2.6 Million Euro funding!



On Jan 7, 2008 5:36 AM, Shivani Sawhney <shivani.sawhney@impetus.co.in> wrote:
> Hi All,
>
>
>
> I am using Jarowinkler scoring in my current project for matching names. The
> database of names against which the inputted value has to be matched is huge
> and thus we are faced with performance issues.
>
>
>
> We now want lucene to help us here; we want lucene's speed for handling huge
> data but still want to depend on Jarowinkler for its scoring.
>
>
>
> Some sample data that we expect a match between are, such as:
>
> *       'Lowery, Betty' and 'Lowery, Betty Sue'
> *       'Malik, Mohammad Saleem'  and 'Malik, Mohammad Salim'
>
>
>
> The questions I have are as follows:
>
> *       What, in lucene, should be used for doing a match between such
> Strings where a cut-off score is also to be provided while matching them? I
> tried using fuzzy query in the following way but didn't know how to work
> with it when the String to be matched has more than one word.
>
>
>
>         QueryParser queryParser = new QueryParser(Constants.INDEX_KEY, new
> StandardAnalyzer());
>
>         query = queryParser.parse(strSearchString +
> Constants.LUCENE_FUZZY_QUERY_SYMBOL + Constants.MATCH_CUT_OFF);
>
>
>
> *       Is Lucene scoring to be used here or simply the fuzzy query?
> *       Is there any way I can override the way Lucene's logic for String
> match and use Jarowinkler there instead.
>
>
>
>
>
>
>
> Any help will be appreciated.
>
>
>
> Thanks
>
> Shivani Sawhney
>
>
>
>



-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer (remain anonymous per request) got 2.6 Million Euro funding!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 22:15:35 2008
Return-Path: <java-user-return-31814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64181 invoked from network); 7 Jan 2008 22:15:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 22:15:35 -0000
Received: (qmail 28461 invoked by uid 500); 7 Jan 2008 22:15:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28431 invoked by uid 500); 7 Jan 2008 22:15:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28420 invoked by uid 99); 7 Jan 2008 22:15:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 14:15:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 07 Jan 2008 22:15:04 +0000
Received: (qmail 99741 invoked by uid 60001); 7 Jan 2008 22:14:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ZpIJ4nJphuXUsp+WDGi6R463Qme//u3QlDN0BDfBJqocMTXO9vjm0HnjEzkco1f7Ap6OmP/VvshHRMaBQDoN31szCKjvi/CU28rtF368hpnladTbC+CcK5iNlD4hYyWz5HVMQKnNEDD/UNvA7Sxxeh6lB+X9WoHI3z5fgtUFjC8=;
X-YMail-OSG: qHv7piMVM1lcjIOgoF10sbvPHNteMotuYfVCfF2hX4JxgF0HurlZJm_RcyVVwFk0iu9ulzcK1Aff5AVOXDWYwYjpuUw.xCr9PzazgjzBGLJjD1QOLDk-
Received: from [70.107.124.12] by web50309.mail.re2.yahoo.com via HTTP; Mon, 07 Jan 2008 14:14:55 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Mon, 7 Jan 2008 14:14:55 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Wikia search goes live today
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <684818.99653.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

See my comment (around #45-50) on Techcrunch about that from late last night.  There is actually one Wikia guy helping Nutch - Dennis Kubes.  He must have been hitting reload on that TC post, because he IMed me quickly after I posted my comment and clarified that he is that Wikia developer I was referring to in my comment.... so I'm looking forward to more contributions from Dennis and his coworkers! :)

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Sent: Monday, January 7, 2008 11:21:33 AM
Subject: Re: Wikia search goes live today

One other thing to note, you can definitely see Lucene in action (or  
Nutch, that is) by clicking on the score returned for a given document
  
(try searching for Lucene) and you see, in all it's glory, the Lucene  
explain results...  It even displays the Nutch logo, which makes me  
wonder if they are misusing an ASF trademark (but, IANAL, so I don't  
know) since they don't state that Nutch is a trademark of the ASF.   
But, that is a discussion for somewhere else...


On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:

>
> On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
>
>> Hi,
>>
>> I noticed that Wikia search goes live today (see
>> http://www.devxnews.com/article.php/3719906).
>> Does anybody know where I could find more technical information  
>> about their
>> solution? Are they going to contribute their enhancements back to
>> Lucene/Nutch/Hadoop code? My understanding is that as long as they  
>> claim
>> they want to build their solution on top of open source technology  
>> they
>> should be contributing back.
>
> Not sure what they have done, but nothing in the Apache license  
> requires contribution back, even if it would be appreciated.
>
> Cheers,
> Grant
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 22:21:09 2008
Return-Path: <java-user-return-31815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67793 invoked from network); 7 Jan 2008 22:21:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 22:21:09 -0000
Received: (qmail 34462 invoked by uid 500); 7 Jan 2008 22:20:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33632 invoked by uid 500); 7 Jan 2008 22:20:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33589 invoked by uid 99); 7 Jan 2008 22:20:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 14:20:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 07 Jan 2008 22:20:38 +0000
Received: (qmail 47890 invoked by uid 60001); 7 Jan 2008 22:20:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=DhKTHhYo7AB35mo/HdmFqx33wcYq7n8nHzWO5hAEKkF80QRjWX8oGVbUXGHStdCJ/q3UGafB6+vnqqJjViZpQiyKIPyox/uRuqgRarpDWyo0MF5wTh2WARL7u+lbL7kQ7mx8xqlUb0tBbV77iVrR++nJH7ytYK91aM4vHtNoDmU=;
X-YMail-OSG: gnM6YIoVM1knzSmTtl9GtyFc0iTm3..70lkCi_8J1V3vMdGnxdqy6wgZn.Lw6ECgcP8L_WCSs2a.1XvED2OPhGRfIEL0hD4XPPFzYh1VDGZjBljoJioeal05CjxUuuLzdAtyGG7iJ4ptowE-
Received: from [70.107.124.12] by web50301.mail.re2.yahoo.com via HTTP; Mon, 07 Jan 2008 14:20:30 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Mon, 7 Jan 2008 14:20:30 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: OutOfMemoryError on small search in large, simple index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <403937.47197.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Please post your results, Lars!

Thanks,
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Lars Clausen <lc@statsbiblioteket.dk>
To: java-user@lucene.apache.org
Sent: Monday, January 7, 2008 5:00:54 AM
Subject: Re: OutOfMemoryError on small search in large, simple index


On Tue, 2008-01-01 at 23:38 -0800, Chris Hostetter wrote:
> : On Wed, 2007-12-12 at 11:37 +0100, Lars Clausen wrote:
> 
> : Seems there's a reason we still use all this memory:
> : SegmentReader.fakeNorms() creates the full-size array for us
 anyway, so
> : the memory usage cannot be avoided as long as somebody asks for the
> : norms array at any point.  The solution is starting to look like a
 patch
> 
> Minor (late) nit:  fakeNorms will reuse the same array for every
 field 
> that doesn't have norms -- so while omiting norms from only one field
 may 
> not save you any RAM, omiting norms for 10 fields will save you the
 RAM 
> used by 9 of those fields.  (correct?)

Doesn't appear to be the case in our test.  We had two fields with
norms, omitting saved only about 4MB for 50 million entries.  I'm going
to try the patch that's attached to a bug report somewhere, which fakes
the norms without making an array for it.

-Lars



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 22:30:15 2008
Return-Path: <java-user-return-31816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73997 invoked from network); 7 Jan 2008 22:30:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 22:30:15 -0000
Received: (qmail 54252 invoked by uid 500); 7 Jan 2008 22:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54226 invoked by uid 500); 7 Jan 2008 22:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54208 invoked by uid 99); 7 Jan 2008 22:29:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 14:29:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.178.245 as permitted sender)
Received: from [64.233.178.245] (HELO hs-out-2122.google.com) (64.233.178.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 22:29:30 +0000
Received: by hs-out-2122.google.com with SMTP id 54so5416321hsz.5
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 14:29:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=P8i0CgfSyW6YMvSnjPaLI4tqK0/JdJLL/53K2fuQklk=;
        b=VAUCJCBYrOYoDEBfmQbwUwK5Z+Zmcbq2bGs+h+zUZ59Zp7aV8iGiG2GSyjKvDigAPLWUAKIwy4coj7/K86vF1A6kiGgs2DPxnif+yQl1FlOtD/Kkd/L66D7TJWvR8i6+bW3Cmp3iTZlYf+6SgC68msUxKXnCsEM2NhnT6ppUHoQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=BQf9KpV65yc9l6TqEABdI+NhWHLK1vogarA2MW7jK0/KKRJ9lxYkLguCNkJ6q4V65Z0vWeQqjZU1O41eGHFThkbG/SG5t7J8IshKTX6ek4kSjA9jGOEed50/M5dTnXDMuGeU9PPtQogPx7TxLCfE2aHadZTgMRx1UlH9dEgobgY=
Received: by 10.142.229.4 with SMTP id b4mr6424033wfh.184.1199744973654;
        Mon, 07 Jan 2008 14:29:33 -0800 (PST)
Received: by 10.142.108.5 with HTTP; Mon, 7 Jan 2008 14:29:33 -0800 (PST)
Message-ID: <c68e39170801071429y42e916eboe91308a4293a7a9@mail.gmail.com>
Date: Mon, 7 Jan 2008 17:29:33 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on small search in large, simple index
In-Reply-To: <1199700054.8503.5.camel@pc977>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1194964649.13896.1180.camel@pc977>
	 <200711131613.07641@danielnaber.de>
	 <Pine.LNX.4.62.0711130722400.6553@radix.cryptio.net>
	 <1197455867.9075.416.camel@pc977> <1197465947.9075.436.camel@pc977>
	 <Pine.LNX.4.62.0801012335090.28794@radix.cryptio.net>
	 <1199700054.8503.5.camel@pc977>
X-Google-Sender-Auth: d92bde7a374adb0e
X-Virus-Checked: Checked by ClamAV on apache.org

On Jan 7, 2008 5:00 AM, Lars Clausen <lc@statsbiblioteket.dk> wrote:
> Doesn't appear to be the case in our test.  We had two fields with
> norms, omitting saved only about 4MB for 50 million entries.

It should be 50MB.  If you are measuring with an external tool, then
that tool is probably in error.

The norm array is byte[maxDoc()], so you save
(num_fields_with_norm_emited - 1)*maxDoc()

(the -1 compensating for the fake norm array).

>  I'm going
> to try the patch that's attached to a bug report somewhere, which fakes
> the norms without making an array for it.

The problem with this is that it's not backward compatible (getting
the norm array is a public API).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 07 22:30:22 2008
Return-Path: <java-user-return-31817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74108 invoked from network); 7 Jan 2008 22:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2008 22:30:22 -0000
Received: (qmail 55118 invoked by uid 500); 7 Jan 2008 22:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55089 invoked by uid 500); 7 Jan 2008 22:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55069 invoked by uid 99); 7 Jan 2008 22:30:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 14:30:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 22:29:38 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 7A5DC4A8142
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2008 09:28:07 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Question regarding adding documents
Date: Tue, 8 Jan 2008 09:28:54 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <14656336.post@talk.nabble.com> <e05f0fd10801070431h1b4b11acm9b0f18c61b503609@mail.gmail.com> <c01704c90801070552q4b0cb600m5c0d4ea9ddcb209d@mail.gmail.com>
In-Reply-To: <c01704c90801070552q4b0cb600m5c0d4ea9ddcb209d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801080928.54500.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 08 January 2008 00:52:35 Developer Developer wrote:
> here is another approach.
>
> StandardAnalyzer st = new StandardAnalyzer();
> StringReader reader= new StringReader("text to index...");
>                 TokenStream stream = st.tokenStream("content", reader);
>
> Then use the Field constructor such as

This is what I suggested, except that your code won't work in general because 
you might not be able to consume the tokens twice.  Hence why I suggested 
wrapping it in a caching filter, so you can reset it and re-read them.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 05:47:52 2008
Return-Path: <java-user-return-31818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7719 invoked from network); 8 Jan 2008 05:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 05:47:52 -0000
Received: (qmail 61961 invoked by uid 500); 8 Jan 2008 05:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61937 invoked by uid 500); 8 Jan 2008 05:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61926 invoked by uid 99); 8 Jan 2008 05:47:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 21:47:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 05:47:11 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m085l8nc010750
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 07:47:08 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m187b46c; 8 Jan 2008 07:47:00 +0200
Message-ID: <47830E59.2070602@teamware.com>
Date: Tue, 08 Jan 2008 16:47:05 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Deleting a single TermPosition <doc, frequency, position> for a Document
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 08 Jan 2008 07:47:08 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I'd like to 'update' a single Document in a Lucene index.  In practice, this 
'update' is actually just a removal of a single TermPosition for a given Term 
for a given doc Id.

I don't think this is currently possible, but would it be easy to change Lucene 
to support this type of usage?

The reason for this is to optimise my index usage.  I'm using Lucene to index 
arbitrary data sets, however, in some data sets, each Document is indexed once 
for each user who has an interest in the document.  For example, with mail data, 
a mail item (with a single recipient) is stored as two Documents, once with the 
'user' field set to the sender's user Id and again with the user field set to 
the recipents's user Id.  Searches just filter mail for a given user by the user 
field.

When one of those users deletes the mail, the Document with the 'user' field is 
simply deleted.  One of the original reasons for doing this was to enable 
horizontal partitioning of the index.  This works nicely, but of course the 
index is bigger than necessary and the number of terms positions is at least 
double what is necessary.

I had thought to originally indexed the data once, with the user field set to 
the sender and recipient user Id, but when the sender or recipient deletes the 
mail from their mailbox, searching becomes more complicated as the index does 
not reflect the external database state unless the mail is reindexed.

Is this something other's have wanted or are there other solutions to this problem?

Thanks
Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 07:31:42 2008
Return-Path: <java-user-return-31819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14603 invoked from network); 8 Jan 2008 07:31:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 07:31:42 -0000
Received: (qmail 29716 invoked by uid 500); 8 Jan 2008 07:31:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29679 invoked by uid 500); 8 Jan 2008 07:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29668 invoked by uid 99); 8 Jan 2008 07:31:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 23:31:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Jan 2008 07:31:00 +0000
Received: (qmail 24877 invoked by uid 60001); 8 Jan 2008 07:31:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=MERYn6eaek8q+doMmAv4Vo/jNad3XZfFUmyH4wyal1h00Hzi0mxGHCxyQLDxvtz9rGqm+IDOKkIQvWd3zm0Wp9du8afnF5Y2ZpaIwusxIohaxwT6T5I8JCjMm4bXSV5RfpGqjjGtOIXJtmSsyFQjzbwMjrksceSU5nLFAR6jf94=;
X-YMail-OSG: 6dx4bXkVM1nLR5MswdJ0yh3LePqFYcWJn_uq1E07CLgMOPpHMShCZExC0Dgmqq8BfEWAZxI7sBqVY5WaDWysNZ.SWp0bj1KWWiZz2y2VgQKdCFGWqcNNakx3E5SoFIPSZKxTTwwYvWFXwuw-
Received: from [72.231.9.236] by web50312.mail.re2.yahoo.com via HTTP; Mon, 07 Jan 2008 23:31:04 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Mon, 7 Jan 2008 23:31:04 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Deleting a single TermPosition <doc, frequency, position> for a Document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <402011.24845.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Is your user field stored?  If so, you cold find the target Document, get the user field value, modify it, and re-add it to the Document (or something close to this -- I am doing this with one of the indices on simpy.com and it's working well).

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Antony Bowesman <adb@teamware.com>
To: java-user@lucene.apache.org
Sent: Tuesday, January 8, 2008 12:47:05 AM
Subject: Deleting a single TermPosition <doc, frequency, position> for a Document

I'd like to 'update' a single Document in a Lucene index.  In practice,
 this 
'update' is actually just a removal of a single TermPosition for a
 given Term 
for a given doc Id.

I don't think this is currently possible, but would it be easy to
 change Lucene 
to support this type of usage?

The reason for this is to optimise my index usage.  I'm using Lucene to
 index 
arbitrary data sets, however, in some data sets, each Document is
 indexed once 
for each user who has an interest in the document.  For example, with
 mail data, 
a mail item (with a single recipient) is stored as two Documents, once
 with the 
'user' field set to the sender's user Id and again with the user field
 set to 
the recipents's user Id.  Searches just filter mail for a given user by
 the user 
field.

When one of those users deletes the mail, the Document with the 'user'
 field is 
simply deleted.  One of the original reasons for doing this was to
 enable 
horizontal partitioning of the index.  This works nicely, but of course
 the 
index is bigger than necessary and the number of terms positions is at
 least 
double what is necessary.

I had thought to originally indexed the data once, with the user field
 set to 
the sender and recipient user Id, but when the sender or recipient
 deletes the 
mail from their mailbox, searching becomes more complicated as the
 index does 
not reflect the external database state unless the mail is reindexed.

Is this something other's have wanted or are there other solutions to
 this problem?

Thanks
Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 07:49:52 2008
Return-Path: <java-user-return-31820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20164 invoked from network); 8 Jan 2008 07:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 07:49:52 -0000
Received: (qmail 53125 invoked by uid 500); 8 Jan 2008 07:49:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53089 invoked by uid 500); 8 Jan 2008 07:49:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53078 invoked by uid 99); 8 Jan 2008 07:49:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 23:49:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 72.14.252.158 as permitted sender)
Received: from [72.14.252.158] (HELO po-out-1718.google.com) (72.14.252.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 07:49:09 +0000
Received: by po-out-1718.google.com with SMTP id c31so1789847poi.0
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 23:49:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IigMy6xWofWyNxTJ6sMIHuwz4+9Ahy/8Lmm5lCAsJgA=;
        b=NxUQCqvuyHsLKSg6tMQMCBKdKPvuahWiBqizgoj3BLBD9E8uB+ufJiLrtZLlPdCVSB1EsIREYxFhzu+Z9tjpuv/MFPHA4B94nZtklFFVDxZ8xdfZHaA+DN2Apcb3ii8rbKjuXNxWzJ1KfC0frYpe71CBYplrXY9Ca4R9yrmUSkY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rEF9elbkjJdvdLKjTsmh3ekfUJBItK+Y9Lle0w3L2Hw8XODMez1MrWt3xtexXJwMNkxeCgWeGTAjIpHz7d+OADjP5zF9ZE/w3dUlrR6HKuc/QgfobiAkmRYsjeHUI9MjZwV2s3x1a+UIKC4pfNhAAJDEfuoQbKp6cwKdN9OQ4tc=
Received: by 10.141.145.11 with SMTP id x11mr11165550rvn.264.1199778554258;
        Mon, 07 Jan 2008 23:49:14 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Mon, 7 Jan 2008 23:49:14 -0800 (PST)
Message-ID: <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
Date: Tue, 8 Jan 2008 08:49:14 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
In-Reply-To: <684818.99653.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35239_31659037.1199778554260"
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35239_31659037.1199778554260
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This would be great!

I am particularly interested how they are going about customized search (if
they have a plan to do it). I mean if they can reorder raw search results
based on some kind of collective knowledge (which is probably kept outside
of Lucene index - at least that is what I can see from Nutch score
explanations).

Regards,
Lukas

On Jan 7, 2008 11:14 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> See my comment (around #45-50) on Techcrunch about that from late last
> night.  There is actually one Wikia guy helping Nutch - Dennis Kubes.  He
> must have been hitting reload on that TC post, because he IMed me quickly
> after I posted my comment and clarified that he is that Wikia developer I
> was referring to in my comment.... so I'm looking forward to more
> contributions from Dennis and his coworkers! :)
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Monday, January 7, 2008 11:21:33 AM
> Subject: Re: Wikia search goes live today
>
> One other thing to note, you can definitely see Lucene in action (or
> Nutch, that is) by clicking on the score returned for a given document
>
> (try searching for Lucene) and you see, in all it's glory, the Lucene
> explain results...  It even displays the Nutch logo, which makes me
> wonder if they are misusing an ASF trademark (but, IANAL, so I don't
> know) since they don't state that Nutch is a trademark of the ASF.
> But, that is a discussion for somewhere else...
>
>
> On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:
>
> >
> > On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
> >
> >> Hi,
> >>
> >> I noticed that Wikia search goes live today (see
> >> http://www.devxnews.com/article.php/3719906).
> >> Does anybody know where I could find more technical information
> >> about their
> >> solution? Are they going to contribute their enhancements back to
> >> Lucene/Nutch/Hadoop code? My understanding is that as long as they
> >> claim
> >> they want to build their solution on top of open source technology
> >> they
> >> should be contributing back.
> >
> > Not sure what they have done, but nothing in the Apache license
> > requires contribution back, even if it would be appreciated.
> >
> > Cheers,
> > Grant
> >
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> > http://www.lucenebootcamp.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://blog.lukas-vlcek.com/

------=_Part_35239_31659037.1199778554260--

From java-user-return-31821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 07:55:46 2008
Return-Path: <java-user-return-31821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20923 invoked from network); 8 Jan 2008 07:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 07:55:45 -0000
Received: (qmail 57465 invoked by uid 500); 8 Jan 2008 07:55:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57441 invoked by uid 500); 8 Jan 2008 07:55:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57430 invoked by uid 99); 8 Jan 2008 07:55:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jan 2008 23:55:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 72.14.252.158 as permitted sender)
Received: from [72.14.252.158] (HELO po-out-1718.google.com) (72.14.252.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 07:55:03 +0000
Received: by po-out-1718.google.com with SMTP id c31so1792612poi.0
        for <java-user@lucene.apache.org>; Mon, 07 Jan 2008 23:55:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kR0Z9CAZj7X/SxwsYUoQOeaMzgmWT6bLpSImNIVcM0c=;
        b=Rjdf4wT7GruVKD27hcNPy5GzLDposKPoRT1qRSMRYwTkpJptcMD2CIiq4NKRf6V2Dpx3mGl61l2RAIqk1rB24D3ig2luu+F/dV8904B4yFXubV40NaOrXr2tE+qBZ1Zb4EVP4G00bx1obHxDKIPhasuVtDeCcpyxA9FSFTgpo4Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=g5/kjIJy9YZ0lhcZ2I6cdGfKV0WhyyGvmdg2JawNN8I+8fs5xCipgOTEWUAeV3eQCXmgFlFKjPZjs/+LB+dxyxsjE9lIaQoQVUPQzl5HLwjhE82dCv1mlweD5I6LLVG4lu9U+Z4AJWeuQuvl+wZzyfY9TFBTQf3XmzS0H2TrKr0=
Received: by 10.140.187.10 with SMTP id k10mr3791736rvf.86.1199778908019;
        Mon, 07 Jan 2008 23:55:08 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Mon, 7 Jan 2008 23:55:07 -0800 (PST)
Message-ID: <52c3ddca0801072355v50eceedfq22bdfad87e8a018f@mail.gmail.com>
Date: Tue, 8 Jan 2008 08:55:07 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
In-Reply-To: <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35270_26494036.1199778908018"
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>
	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35270_26494036.1199778908018
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

BTW:
1) If they have made any improvements/changes to Nutch (or Lucene/Hadoop)
code and they keep it closed then how they can claim they are using open
sourced algorithms?
2) Wouldn't it be too expensive for them to keep their changes closed going
forward? How about if Nutch changes significantly in the future.

Obviously I don't see the big picture but I think they don't have any other
option then contributing back to community if they mean it seriously.

On Jan 8, 2008 8:49 AM, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:

> This would be great!
>
> I am particularly interested how they are going about customized search
> (if they have a plan to do it). I mean if they can reorder raw search
> results based on some kind of collective knowledge (which is probably kept
> outside of Lucene index - at least that is what I can see from Nutch score
> explanations).
>
> Regards,
> Lukas
>
>
> On Jan 7, 2008 11:14 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
>
> > See my comment (around #45-50) on Techcrunch about that from late last
> > night.  There is actually one Wikia guy helping Nutch - Dennis Kubes.  He
> > must have been hitting reload on that TC post, because he IMed me quickly
> > after I posted my comment and clarified that he is that Wikia developer I
> > was referring to in my comment.... so I'm looking forward to more
> > contributions from Dennis and his coworkers! :)
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> > ----- Original Message ----
> > From: Grant Ingersoll <gsingers@apache.org>
> > To: java-user@lucene.apache.org
> > Sent: Monday, January 7, 2008 11:21:33 AM
> > Subject: Re: Wikia search goes live today
> >
> > One other thing to note, you can definitely see Lucene in action (or
> > Nutch, that is) by clicking on the score returned for a given document
> >
> > (try searching for Lucene) and you see, in all it's glory, the Lucene
> > explain results...  It even displays the Nutch logo, which makes me
> > wonder if they are misusing an ASF trademark (but, IANAL, so I don't
> > know) since they don't state that Nutch is a trademark of the ASF.
> > But, that is a discussion for somewhere else...
> >
> >
> > On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:
> >
> > >
> > > On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
> > >
> > >> Hi,
> > >>
> > >> I noticed that Wikia search goes live today (see
> > >> http://www.devxnews.com/article.php/3719906).
> > >> Does anybody know where I could find more technical information
> > >> about their
> > >> solution? Are they going to contribute their enhancements back to
> > >> Lucene/Nutch/Hadoop code? My understanding is that as long as they
> > >> claim
> > >> they want to build their solution on top of open source technology
> > >> they
> > >> should be contributing back.
> > >
> > > Not sure what they have done, but nothing in the Apache license
> > > requires contribution back, even if it would be appreciated.
> > >
> > > Cheers,
> > > Grant
> > >
> > > --------------------------
> > > Grant Ingersoll
> > > http://lucene.grantingersoll.com
> > > http://www.lucenebootcamp.com
> > >
> > > Lucene Helpful Hints:
> > > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > > http://wiki.apache.org/lucene-java/LuceneFAQ
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> > http://www.lucenebootcamp.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> http://blog.lukas-vlcek.com/
>



-- 
http://blog.lukas-vlcek.com/

------=_Part_35270_26494036.1199778908018--

From java-user-return-31822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 08:01:00 2008
Return-Path: <java-user-return-31822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21965 invoked from network); 8 Jan 2008 08:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 08:01:00 -0000
Received: (qmail 65909 invoked by uid 500); 8 Jan 2008 08:00:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65883 invoked by uid 500); 8 Jan 2008 08:00:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65872 invoked by uid 99); 8 Jan 2008 08:00:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 00:00:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 08:00:28 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0880Eo0014954
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 10:00:14 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m18a07dw; 8 Jan 2008 10:00:00 +0200
Message-ID: <47832D87.2050403@teamware.com>
Date: Tue, 08 Jan 2008 19:00:07 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Deleting a single TermPosition <doc, frequency, position> for
 a Document
References: <402011.24845.qm@web50312.mail.re2.yahoo.com>
In-Reply-To: <402011.24845.qm@web50312.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 08 Jan 2008 10:00:14 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-1.11, required 5,
	autolearn=not spam, BAYES_05 -1.11)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Is your user field stored?  If so, you cold find the target Document, get the
> user field value, modify it, and re-add it to the Document (or something
> close to this -- I am doing this with one of the indices on simpy.com and
> it's working well).

No, it's not stored.  I'm not sure I understand how you 'modify it' as it's not 
possible to modify an existing Document or do you mean you fetch all the stored 
fields from the existing Document, delete the existing Document then add it back 
with the modified field?

I have ~20 fields per Document and most are not stored

Antony


> 
> Otis
> 
> -- Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> ----- Original Message ---- From: Antony Bowesman <adb@teamware.com> To:
> java-user@lucene.apache.org Sent: Tuesday, January 8, 2008 12:47:05 AM 
> Subject: Deleting a single TermPosition <doc, frequency, position> for a
> Document
> 
> I'd like to 'update' a single Document in a Lucene index.  In practice, this
>  'update' is actually just a removal of a single TermPosition for a given
> Term for a given doc Id.
> 
> I don't think this is currently possible, but would it be easy to change
> Lucene to support this type of usage?
> 
> The reason for this is to optimise my index usage.  I'm using Lucene to index
>  arbitrary data sets, however, in some data sets, each Document is indexed
> once for each user who has an interest in the document.  For example, with 
> mail data, a mail item (with a single recipient) is stored as two Documents,
> once with the 'user' field set to the sender's user Id and again with the
> user field set to the recipents's user Id.  Searches just filter mail for a
> given user by the user field.
> 
> When one of those users deletes the mail, the Document with the 'user' field
> is simply deleted.  One of the original reasons for doing this was to enable
>  horizontal partitioning of the index.  This works nicely, but of course the
>  index is bigger than necessary and the number of terms positions is at least
>  double what is necessary.
> 
> I had thought to originally indexed the data once, with the user field set to
>  the sender and recipient user Id, but when the sender or recipient deletes
> the mail from their mailbox, searching becomes more complicated as the index
> does not reflect the external database state unless the mail is reindexed.
> 
> Is this something other's have wanted or are there other solutions to this
> problem?
> 
> Thanks Antony
> 
> 
> 
> 
> --------------------------------------------------------------------- To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For additional
> commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> --------------------------------------------------------------------- To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For additional
> commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 10:00:40 2008
Return-Path: <java-user-return-31823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49937 invoked from network); 8 Jan 2008 10:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 10:00:39 -0000
Received: (qmail 98346 invoked by uid 500); 8 Jan 2008 10:00:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98315 invoked by uid 500); 8 Jan 2008 10:00:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98304 invoked by uid 99); 8 Jan 2008 10:00:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 02:00:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 10:00:11 +0000
Received: from [130.225.25.7] (pc977.sb.statsbiblioteket.dk [130.225.25.7])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JUB00LJ8L43F9@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 08 Jan 2008 11:00:04 +0100 (MET)
Date: Tue, 08 Jan 2008 10:56:53 +0100
From: Lars Clausen <lc@statsbiblioteket.dk>
Subject: Re: OutOfMemoryError on small search in large, simple index
In-reply-to: <403937.47197.qm@web50301.mail.re2.yahoo.com>
To: java-user@lucene.apache.org
Message-id: <1199786213.31652.48.camel@pc977>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.12.1
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <403937.47197.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


On Mon, 2008-01-07 at 14:20 -0800, Otis Gospodnetic wrote:
> Please post your results, Lars!

Tried the patch, and it failed to compile (plain Lucene compiled fine).
In the process, I looked at TermQuery and found that it'd be easier to
copy that code and just hardcode 1.0f for all norms.  Did that and ran
our test index of 50 million entries.  Instead of the 50-60MB it used
before, it is now down to 8-9MB.   For Yonik: This is measured using
jconsole.  Do you have a better tool? 

 I'll do a few more tests to see how it scales, but this is definitely
the way out for us.  Thanks for the cluons! 

-Lars



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 11:13:39 2008
Return-Path: <java-user-return-31824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67507 invoked from network); 8 Jan 2008 11:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 11:13:39 -0000
Received: (qmail 96404 invoked by uid 500); 8 Jan 2008 11:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96327 invoked by uid 500); 8 Jan 2008 11:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96316 invoked by uid 99); 8 Jan 2008 11:13:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 03:13:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 11:12:57 +0000
Received: by fk-out-0910.google.com with SMTP id z23so9066864fkz.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 03:13:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=4SxNa2TZanYdo+z+R6w25w3zRugvUxTzCLct0Gamdv8=;
        b=abreISze5ZNBPEAS6ZYFKmP+rIXRc+K7g3oVdj1dMr6p7ugWvGqiazxw6vjeye9I5SCmpfIvRnm+2RLE5BqhP84D0i7WfZ0ti9elwI41BoVAc+SKI7yM/awyFYvwOIN7IYLsib0ouqIOxpYFg1hYNKs/jNxerzcuEvm2NZ+gPLE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=K7iihXDZugmEeFk70jrjyXami0nLRnIiQRREx3eYQxgkibO+CwI4R2GJcWXQIHnX1SiW87oNKfatpUcGEhB7tZ3oLFZiNUEkm047erACjo3xtXhXWdmPWdWyXp0896otJb90BKX48YBp+b/XDGQQySN6yDJIjJ7ZnQV4z4eK3VQ=
Received: by 10.82.107.15 with SMTP id f15mr976825buc.0.1199790781436;
        Tue, 08 Jan 2008 03:13:01 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 8 Jan 2008 03:13:01 -0800 (PST)
Message-ID: <1bcb7c7f0801080313g15900d3an8e21f40489ef7530@mail.gmail.com>
Date: Tue, 8 Jan 2008 13:13:01 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: PrefixQuery question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11218_14282624.1199790781431"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11218_14282624.1199790781431
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am having a problem qith PrefixQuery:

I have a field name item title which is indexed as:

doc.add(new Field("item_title", item_title.trim().toLowerCase(),
Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES));

and I am forming my query like:

PrefixQuery pq = new PrefixQuery((new Term("item_title", queryText)));

Lets say I have some documents such as

mouse cat apple
mouse cat house
cat house mouse


and when I search for prefix mou, it will return all of 3 documents. what I
like to do is for it to return "mouse cat apple" and "mouse cat house" and
not "cat house mouse"

it will only do this if the field is untokenized I believe.

is there any way to get the desired behavior?

best,
-C.B.

------=_Part_11218_14282624.1199790781431--

From java-user-return-31825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 12:07:56 2008
Return-Path: <java-user-return-31825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87416 invoked from network); 8 Jan 2008 12:07:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 12:07:56 -0000
Received: (qmail 91769 invoked by uid 500); 8 Jan 2008 12:07:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91136 invoked by uid 500); 8 Jan 2008 12:07:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91125 invoked by uid 99); 8 Jan 2008 12:07:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 04:07:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:07:15 +0000
Received: by rv-out-0910.google.com with SMTP id k20so6486909rvb.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 04:07:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kAFk03Wv9EslGgzgvFFigLIX8c5PMdxeskiUp1usQwU=;
        b=KIFTv7yLqorOpIsA3lgWdqsNe4T0WB+/6JGxoJcp7u51oTFbS2KR7so1cnTGh0k0N8jQ17t23VNFApbkan4RUv7eUPIOTayRiitY6KvhoWBztNNN8vQ4YmB3n0kLRHvtN4vpB3fGEMzYFTg0KYlmG75zKBkv0MsLcACxl671Jbk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=toJ60lANBapwV33zgGsERaOA8zB1Fq4Jg1keraCYByaM5v3k7LTsE1poAh2C6B5Qs3Y4s/5go81L5RzGjd9pnJrsJI46GqusS1ufq6Ys2+8HvBt3Da8yuDcVnxe1ZNeSRX4kXAijVRrb4X13tK8agwlCo0EUL5Y/qRXymsLKZCM=
Received: by 10.141.132.8 with SMTP id j8mr11305672rvn.253.1199794040521;
        Tue, 08 Jan 2008 04:07:20 -0800 (PST)
Received: by 10.141.154.21 with HTTP; Tue, 8 Jan 2008 04:07:20 -0800 (PST)
Message-ID: <786fde50801080407s1d8d9f8h6a1e42aae80b6242@mail.gmail.com>
Date: Tue, 8 Jan 2008 14:07:20 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: PrefixQuery question
In-Reply-To: <1bcb7c7f0801080313g15900d3an8e21f40489ef7530@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14212_30893748.1199794040505"
References: <1bcb7c7f0801080313g15900d3an8e21f40489ef7530@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14212_30893748.1199794040505
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you try SpanFirstQuery?

I had the same need in my application, for implementing type-ahead
functionality over the titles and I found that storing them as un_tokenized
gives the best performance (of course, I don't run any query, but iterate
over the terms in my solution).
Span queries are expensive, but you can try it.

On Jan 8, 2008 1:13 PM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello,
>
> I am having a problem qith PrefixQuery:
>
> I have a field name item title which is indexed as:
>
> doc.add(new Field("item_title", item_title.trim().toLowerCase(),
> Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES));
>
> and I am forming my query like:
>
> PrefixQuery pq = new PrefixQuery((new Term("item_title", queryText)));
>
> Lets say I have some documents such as
>
> mouse cat apple
> mouse cat house
> cat house mouse
>
>
> and when I search for prefix mou, it will return all of 3 documents. what
> I
> like to do is for it to return "mouse cat apple" and "mouse cat house" and
> not "cat house mouse"
>
> it will only do this if the field is untokenized I believe.
>
> is there any way to get the desired behavior?
>
> best,
> -C.B.
>



-- 
Regards,

Shai Erera

------=_Part_14212_30893748.1199794040505--

From java-user-return-31826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 12:23:07 2008
Return-Path: <java-user-return-31826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98438 invoked from network); 8 Jan 2008 12:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 12:23:06 -0000
Received: (qmail 7120 invoked by uid 500); 8 Jan 2008 12:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7085 invoked by uid 500); 8 Jan 2008 12:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7070 invoked by uid 99); 8 Jan 2008 12:22:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 04:22:50 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [210.7.66.150] (HELO delhtca02.Infoedge.com) (210.7.66.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:22:37 +0000
Received: from DELHTCA01.Infoedge.com (172.16.3.234) by delhtca02.infoedge.com
 (172.16.3.245) with Microsoft SMTP Server (TLS) id 8.0.751.0; Tue, 8 Jan 2008
 17:49:11 +0530
Received: from [172.16.0.92] (220.225.240.5) by DELHTCA01.Infoedge.com
 (172.16.3.234) with Microsoft SMTP Server id 8.0.744.0; Tue, 8 Jan 2008
 17:49:11 +0530
Subject: Self Join Query
From: sachin <sachin.singhal@naukri.com>
Reply-To: sachin.singhal@naukri.com
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: ieil
Date: Tue, 8 Jan 2008 17:53:01 +0530
Message-ID: <1199794981.3156.79.camel@localhost.localdomain>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 (2.10.1-4.fc7) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


I need to write lucene query something similar to SQL self joins. 

My current implementation is very primitive. I fire first query, get the
results, based on the result of first query I fire second query and then
merge the results from both the queries. The whole processing is very
expensive. Doing this is very easy with SQL query as we need to just
write self join query and database do the rest for you.

What is the best way of implementing the above functionality in lucene?

Regards
Sachin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 12:47:45 2008
Return-Path: <java-user-return-31827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6008 invoked from network); 8 Jan 2008 12:47:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 12:47:45 -0000
Received: (qmail 53382 invoked by uid 500); 8 Jan 2008 12:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52858 invoked by uid 500); 8 Jan 2008 12:47:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52847 invoked by uid 99); 8 Jan 2008 12:47:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 04:47:28 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:47:04 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 26EEC7BED9
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2008 04:47:09 -0800 (PST)
Message-Id: <9E183793-CB46-44F9-B939-2C282ECAF9DD@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <52c3ddca0801072355v50eceedfq22bdfad87e8a018f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Wikia search goes live today
Date: Tue, 8 Jan 2008 07:47:08 -0500
References: <684818.99653.qm@web50309.mail.re2.yahoo.com> <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com> <52c3ddca0801072355v50eceedfq22bdfad87e8a018f@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 8, 2008, at 2:55 AM, Lukas Vlcek wrote:

> BTW:
> 1) If they have made any improvements/changes to Nutch (or Lucene/ 
> Hadoop)
> code and they keep it closed then how they can claim they are using  
> open
> sourced algorithms?

They are "using" it, they just aren't sharing it.  Many companies out  
there do that, they use Lucene but you would never know it unless you  
dug in deep.  It's probably one of the big diffs between the Apache  
license and some of the "other" licenses.  But, having read more about  
it, I don't think Wikia is keeping it closed, but that doesn't mean  
they are contributing back to us, either.  They certainly could host  
the repository themselves and make it available.  Some people host  
Lucene improvements elsewhere b/c they want different licenses.  As  
long as they include the ASF license and give proper credit to it, I  
believe they are fine.

>
> 2) Wouldn't it be too expensive for them to keep their changes  
> closed going
> forward? How about if Nutch changes significantly in the future.

I would think so, but there are no rules against doing stupid things,  
right?


-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 14:39:38 2008
Return-Path: <java-user-return-31828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37308 invoked from network); 8 Jan 2008 14:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 14:39:38 -0000
Received: (qmail 19576 invoked by uid 500); 8 Jan 2008 14:39:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19552 invoked by uid 500); 8 Jan 2008 14:39:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19541 invoked by uid 99); 8 Jan 2008 14:39:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 06:39:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.50.192.7] (HELO eiger.univ-valenciennes.fr) (193.50.192.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 14:38:57 +0000
Received: from [193.50.195.115] (pcinfogest21.univ-valenciennes.fr [193.50.195.115])
	by eiger.univ-valenciennes.fr (Postfix) with ESMTP id DC7EC8CA3
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2008 15:38:54 +0100 (CET)
Message-ID: <47838AFD.7090704@univ-valenciennes.fr>
Date: Tue, 08 Jan 2008 15:38:53 +0100
From: Yannick Caillaux <yannick.caillaux@univ-valenciennes.fr>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Performance and BestFragments
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-UvhcEiger-MailScanner-Information: Please contact the ISP for more information
X-UvhcEiger-MailScanner: Found to be clean
X-UvhcEiger-MailScanner-From: yannick.caillaux@univ-valenciennes.fr
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Hello,

First, sorry for my bad english.

I have an index including 100 Dublin Core notices. I indexed 
title,creator.... and I added a field "fulltext" containing the PDF 
document referenced by the DC notice. (A PDF document is about 200 pages)

There's no problem to index them. But when I try to search using 
org.apache.lucene.search.highlight.Highlighter.getBestFragments (or 
getBestFragment), this method is very long (about 150 ms). So it takes 
15s when I have 100 results!
If I don't use this method the performance is very good.

Is there something to do to improve performance using this method?

Thank you

-- 
Ce message a t vrifi par MailScanner
pour des virus ou des polluriels et rien de
suspect n'a t trouv.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 14:44:26 2008
Return-Path: <java-user-return-31829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39708 invoked from network); 8 Jan 2008 14:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 14:44:26 -0000
Received: (qmail 29117 invoked by uid 500); 8 Jan 2008 14:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28756 invoked by uid 500); 8 Jan 2008 14:44:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28733 invoked by uid 99); 8 Jan 2008 14:44:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 06:44:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of devquestions@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 14:43:58 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2686462wxd.20
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 06:43:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0S5sP4mfMTtuDPXfVgtK82YeK8y6oYSGmDT52f3Updc=;
        b=hoRFkoZ0X9Jo+9mnxGO4furJFBCSfx+Oc9bX5mqS5ThRUuD4YUaF5hQtm9exVQvu/oczOjocMrjK7akEnwYO5QCDpjd063qBvblcU1Kc90XUzpN1MtCyNlrJm2rxHTKSp49xrzLgeDA39mVBXx0dJ1roUjZl81sa7Z4YouPC6sE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=c1xqvNOiwBFBbigFNIMqGRR+ibVHYB4cOAxZu7mTlEClQz+Cs1BIekAOHmQq/5wDE0GLi4Fx/52qrBNUBHvTn+/8MfFHoJorpNvdp4LUj76uIxp3ePhMDsabUFVMLS1xRnBRRxwTOK3TKuXT3TrJ42xTuMWT9b6kqHgHNns0OKc=
Received: by 10.150.154.6 with SMTP id b6mr5950118ybe.64.1199803430081;
        Tue, 08 Jan 2008 06:43:50 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Tue, 8 Jan 2008 06:43:50 -0800 (PST)
Message-ID: <c01704c90801080643o16119692nf3cabc17d9ecc7ba@mail.gmail.com>
Date: Tue, 8 Jan 2008 09:43:50 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org, sachin.singhal@naukri.com
Subject: Re: Self Join Query
In-Reply-To: <1199794981.3156.79.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21558_5736152.1199803430075"
References: <1199794981.3156.79.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21558_5736152.1199803430075
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Provide more details please.

Can you not use boolean query and filters if need be ?



On Jan 8, 2008 7:23 AM, sachin <sachin.singhal@naukri.com> wrote:

>
> I need to write lucene query something similar to SQL self joins.
>
> My current implementation is very primitive. I fire first query, get the
> results, based on the result of first query I fire second query and then
> merge the results from both the queries. The whole processing is very
> expensive. Doing this is very easy with SQL query as we need to just
> write self join query and database do the rest for you.
>
> What is the best way of implementing the above functionality in lucene?
>
> Regards
> Sachin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21558_5736152.1199803430075--

From java-user-return-31830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 14:55:18 2008
Return-Path: <java-user-return-31830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45933 invoked from network); 8 Jan 2008 14:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 14:55:18 -0000
Received: (qmail 45707 invoked by uid 500); 8 Jan 2008 14:55:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45595 invoked by uid 500); 8 Jan 2008 14:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45584 invoked by uid 99); 8 Jan 2008 14:55:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 06:55:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 14:54:37 +0000
Received: by rv-out-0910.google.com with SMTP id k20so6526291rvb.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 06:54:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=OsOmyqVIXwdrGlVECPQWILIZMV7rbbaa7T/Nxaxww8o=;
        b=W56cm99X4iKbzfGY/ByGAMZoOiIqroqoG8LJiJefEBeikDiKANoMTUjAFaSjAwKqh5uhov/sUmWmcG+aLrg2kDi8gBiF691yIxxi/YyPxomb3JWPFidgBsXFK89Zkodc7PbHr20fCifEwEQ4KVDKCFZD+5Tctoq29oOEkXgoHP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=FDKVcb6SwBABgcfYALIjxBF8vrofPXWFcz4E0PUaw/W02wirkmEeXiHkM+Wvqevxii8/ySSyqWE8PVVLTP/R9FDiyQmtL7r10gdBwQSatuCjiklY3vtURNyVYZ6RMOJFCMF7AKDFqR1amjzWJAbsRSxpjtABWnxnOtddkjPieCE=
Received: by 10.140.158.4 with SMTP id g4mr11408759rve.44.1199804082072;
        Tue, 08 Jan 2008 06:54:42 -0800 (PST)
Received: by 10.141.178.18 with HTTP; Tue, 8 Jan 2008 06:54:42 -0800 (PST)
Message-ID: <1c0e93080801080654nf5b375flb3e81b7641aca1c4@mail.gmail.com>
Date: Tue, 8 Jan 2008 09:54:42 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Custom Tokenization of a Single Field
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have an index that contains a couple special fields that I need to
tokenize differently than the rest.   The case is that I basically
have a key/value pair stored as the value.  The field name is
"attribute" and it's value is "SomeValue=1.9"

I need to tokenize the value so that I can search on the field with
just "SomeValue" (i.e. attribute:SomeValue).   Is it possible to do
this?  I basically want to tokenize by "=".   The idea that someone
could search using "attribute:1.9" doesn't matter to me.

Currently, I am using Compass to do my indexing, but I might have to
rip it out if this functionality is only available in Lucene proper.

Hope this is enough info.

Thanks,

Briggs
-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 15:05:20 2008
Return-Path: <java-user-return-31831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6356 invoked from network); 8 Jan 2008 15:05:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 15:05:19 -0000
Received: (qmail 63344 invoked by uid 500); 8 Jan 2008 15:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63309 invoked by uid 500); 8 Jan 2008 15:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63298 invoked by uid 99); 8 Jan 2008 15:05:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 07:05:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 15:04:39 +0000
Received: by fk-out-0910.google.com with SMTP id z23so9167149fkz.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 07:04:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=692j0T0T9FC++YCawZSX7OWCSF2KRRDUMQ5fajKmcZY=;
        b=HgGZy48W7Qkuu7Ppf8qEfJ3erHtL5p6h9lM5gSlh/rmwioaEf8PIaV4vDIQiYNVOj+uinL1jEbpItQhpNJz+fnpS6UXEqGm6i9UAuqgQ1C+wGi3mBVpRjisjMs8WJn33B4O6c5gfeusdzMKvm6Gj7U+b4t9uuS39/adNW3rvDeM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mZCxdGonlyTNpdqu9bRhS8rtrcnKTbAuEM15/T3cxBmWhUiFYp0wHx//iE+xM5A4qSF6RQXTS2Jm5kf9QgR293gh8FL492fAcV3te81OlwhpY7fBiqtCE6cp4w/ldrjt7OTkM+PFuK9UcgCutexl3P7DpEOUe2kEWI9H/ch/GHI=
Received: by 10.82.124.10 with SMTP id w10mr37817397buc.33.1199804683675;
        Tue, 08 Jan 2008 07:04:43 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 8 Jan 2008 07:04:43 -0800 (PST)
Message-ID: <359a92830801080704l403ad5dfhc884c92288009093@mail.gmail.com>
Date: Tue, 8 Jan 2008 10:04:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, sachin.singhal@naukri.com
Subject: Re: Self Join Query
In-Reply-To: <1199794981.3156.79.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43059_17572737.1199804683673"
References: <1199794981.3156.79.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43059_17572737.1199804683673
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's often a mistake to try to force Lucene to act like a database. Is it
possible to just use the database for the join portion and Lucene
for the text search?

Otherwise I agree with Developer Developer. You need to provide
a higher level idea of *what* it is you're trying to accomplish to get
good suggestions.

Best
Erick

On Jan 8, 2008 7:23 AM, sachin <sachin.singhal@naukri.com> wrote:

>
> I need to write lucene query something similar to SQL self joins.
>
> My current implementation is very primitive. I fire first query, get the
> results, based on the result of first query I fire second query and then
> merge the results from both the queries. The whole processing is very
> expensive. Doing this is very easy with SQL query as we need to just
> write self join query and database do the rest for you.
>
> What is the best way of implementing the above functionality in lucene?
>
> Regards
> Sachin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43059_17572737.1199804683673--

From java-user-return-31832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 15:06:31 2008
Return-Path: <java-user-return-31832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17423 invoked from network); 8 Jan 2008 15:06:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 15:06:31 -0000
Received: (qmail 66731 invoked by uid 500); 8 Jan 2008 15:06:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66641 invoked by uid 500); 8 Jan 2008 15:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66630 invoked by uid 99); 8 Jan 2008 15:06:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 07:06:14 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 15:05:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JCG1b-0005HO-5x
	for java-user@lucene.apache.org; Tue, 08 Jan 2008 07:05:55 -0800
Message-ID: <14691223.post@talk.nabble.com>
Date: Tue, 8 Jan 2008 07:05:55 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic Named Entity Indexing
In-Reply-To: <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
References: <14291880.post@talk.nabble.com> <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Following your suggestion (I think), I built a tokenfilter with the following
code for next():

	public final Token next() throws IOException {
		Token newToken = input.next();
		termText = newToken.termText();
		Character tempChar = termText.charAt(0);
		if(Character.isUpperCase(tempChar)) {
			for(int current = 0; current < termText.length(); current++){
				Character currentChar = termText.charAt(current);
				if (Character.isWhitespace(currentChar) &
Character.isUpperCase(currentChar + 1) & current != termText.length()) {
					return newToken;
				}
			}	
		}
		return null;
	}

-----------
and in calling this filter, i'm also calling NGramAnalyzerWrapper wrapping
WhitespaceAnalyzer (these two work together), but when building my index i
get the following error:

Exception in thread "main" java.lang.NullPointerException
	at rem.NamedEntityTokenFilter.next(NamedEntityTokenFilter.java:21)
	at
org.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.java:219)
	at
org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:95)
	at
org.apache.lucene.index.IndexWriter.buildSingleDocSegment(IndexWriter.java:1013)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1001)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
	at ancorpMethods.Handlers.handleDOC(Handlers.java:92)
	at ancorpMethods.Handlers.handleDir(Handlers.java:32)
	at ancorpMethods.Handlers.handleDir(Handlers.java:30)
	at ancorpMethods.Handlers.handleDir(Handlers.java:30)
	at ancorpMethods.Handlers.handleDir(Handlers.java:30)
	at ancorpMethods.Handlers.handleDir(Handlers.java:30)
	at Base.Indexer.indexCapitalNgrams(Indexer.java:155)
	at Base.Indexer.main(Indexer.java:81)

----------
am I forgetting something or am I going the wrong way? :|

-- 
View this message in context: http://www.nabble.com/Basic-Named-Entity-Indexing-tp14291880p14691223.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 15:09:01 2008
Return-Path: <java-user-return-31833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19244 invoked from network); 8 Jan 2008 15:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 15:08:58 -0000
Received: (qmail 72363 invoked by uid 500); 8 Jan 2008 15:08:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72336 invoked by uid 500); 8 Jan 2008 15:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72325 invoked by uid 99); 8 Jan 2008 15:08:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 07:08:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 15:08:17 +0000
Received: by fk-out-0910.google.com with SMTP id z23so9168878fkz.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 07:08:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=F36wkn1Y0n6mP09Vws5Qv9mdDSazvaIswCQBpSnCVGk=;
        b=D3sPhsA+BZe9qCCkxwBX621akxA2M3QP6Hjo2pds2oiRTwYv+jI0jo4hP8rIQ/ffUsMrMA8sXarWH+B+5n93RLFscbWntA2JtGXsfVkDsqY9HsIQ+SHoiIdyV3QbxfyttuytHVist83EQxjGboaSy5vyybg5MtV1sUeGqudekRk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EhQGftYG7ByEkabvJOGg06GqI4nSIIMbR7w+Ok3P6j1mZzW2aA4c9yU39mSSvru0Lu3RdWk+sBR8rfs3iFyVtzYrfiuQ0i3kglhzWMIIs8sJ0gUlK4E4UYU8xcRy8/+xrsghl03wpY4QPljMRYhK12UHWbagPCP4H7cUkvdlFsQ=
Received: by 10.82.112.3 with SMTP id k3mr37842984buc.31.1199804900902;
        Tue, 08 Jan 2008 07:08:20 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 8 Jan 2008 07:08:20 -0800 (PST)
Message-ID: <359a92830801080708q78d0212fk153a06e89b3c51d0@mail.gmail.com>
Date: Tue, 8 Jan 2008 10:08:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Custom Tokenization of a Single Field
In-Reply-To: <1c0e93080801080654nf5b375flb3e81b7641aca1c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43066_33383352.1199804900891"
References: <1c0e93080801080654nf5b375flb3e81b7641aca1c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43066_33383352.1199804900891
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I *think* you want to consider writing your own analyzer that tokenizes
your special fields however you want to. Then use PerFieldAnalyzerWrapper
at both index and query time to break the stream up appropriately for this
(and only this) field..

This would give you two tokens for the attribute field, "SomeValue" and "1.9
"
so you'd even be able to express the notion of your attribute field
containing
both "SomeValue" and "1.9".

Hope this helps
Erick

On Jan 8, 2008 9:54 AM, Briggs <acidbriggs@gmail.com> wrote:

> I have an index that contains a couple special fields that I need to
> tokenize differently than the rest.   The case is that I basically
> have a key/value pair stored as the value.  The field name is
> "attribute" and it's value is "SomeValue=1.9"
>
> I need to tokenize the value so that I can search on the field with
> just "SomeValue" (i.e. attribute:SomeValue).   Is it possible to do
> this?  I basically want to tokenize by "=".   The idea that someone
> could search using "attribute:1.9" doesn't matter to me.
>
> Currently, I am using Compass to do my indexing, but I might have to
> rip it out if this functionality is only available in Lucene proper.
>
> Hope this is enough info.
>
> Thanks,
>
> Briggs
> --
> "Conscious decisions by conscious minds are what make reality real"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43066_33383352.1199804900891--

From java-user-return-31834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 15:29:31 2008
Return-Path: <java-user-return-31834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28195 invoked from network); 8 Jan 2008 15:29:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 15:29:31 -0000
Received: (qmail 411 invoked by uid 500); 8 Jan 2008 15:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 371 invoked by uid 500); 8 Jan 2008 15:29:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 360 invoked by uid 99); 8 Jan 2008 15:29:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 07:29:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 15:28:51 +0000
Received: by rv-out-0910.google.com with SMTP id k20so6534379rvb.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 07:28:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=ypX6y+cb3HLGLq6k2hqVA5bC3ZJY5UXvyhtgCS8mffE=;
        b=c+pYq+a9WJ1VwugYRw4rHyTBFyQXPQltZU2Rm3h69XbX8PmIj1zN0XDOVau8ThknedIISX6SuqRXu088Pcv8f9UcMz+bS0XtRGyLQ/dRr8cbuA5NCdzRzAqeZ4UzMpGXRza5Y76hVAOGRCcumnPv9cZVbKMmu6DSEdcPCxgiUCk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SF6xf7hTFGTItNHFgZKc/J1RcyLJGYwGMM8a+60hU/Lj6TaqGg2Chp1oLtXmU2kikrTl2QfMcP5zSlkxbm368MAB1ZOINolh3EetBhFyrdYm35x8/rUp9Zm4M8tWxuZe+P5QvJ1Bh/cJPBsGTuk6BA7wUl6IDCmJNF3+eUb7rs0=
Received: by 10.140.250.14 with SMTP id x14mr2789990rvh.119.1199806135116;
        Tue, 08 Jan 2008 07:28:55 -0800 (PST)
Received: by 10.141.178.18 with HTTP; Tue, 8 Jan 2008 07:28:55 -0800 (PST)
Message-ID: <1c0e93080801080728s44103d84qfbc0958df887ec23@mail.gmail.com>
Date: Tue, 8 Jan 2008 10:28:55 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Custom Tokenization of a Single Field
In-Reply-To: <359a92830801080708q78d0212fk153a06e89b3c51d0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1c0e93080801080654nf5b375flb3e81b7641aca1c4@mail.gmail.com>
	 <359a92830801080708q78d0212fk153a06e89b3c51d0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Cool.  I just realized that compass also has an annotation value of
analyzer.  Now I'll just have to find out if you can truly have more
than one per index.

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 16:13:35 2008
Return-Path: <java-user-return-31835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47426 invoked from network); 8 Jan 2008 16:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 16:13:34 -0000
Received: (qmail 66397 invoked by uid 500); 8 Jan 2008 16:13:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66370 invoked by uid 500); 8 Jan 2008 16:13:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66359 invoked by uid 99); 8 Jan 2008 16:13:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 08:13:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 16:12:51 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id C5E0E5B52E
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2008 08:12:50 -0800 (PST)
Message-Id: <B5C95A02-CAFD-4A42-819F-3780B7D8A80E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47838AFD.7090704@univ-valenciennes.fr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Performance and BestFragments
Date: Tue, 8 Jan 2008 11:12:49 -0500
References: <47838AFD.7090704@univ-valenciennes.fr>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Are you just trying to search or are you trying to highlight?  =20
Usually, you do your search, and then highlight 1 or more documents.  =20=

You can also speed up highlighting by using term vectors.

-Grant

On Jan 8, 2008, at 9:38 AM, Yannick Caillaux wrote:

> Hello,
>
> First, sorry for my bad english.
>
> I have an index including 100 Dublin Core notices. I indexed =20
> title,creator.... and I added a field "fulltext" containing the PDF =20=

> document referenced by the DC notice. (A PDF document is about 200 =20
> pages)
>
> There's no problem to index them. But when I try to search using =20
> org.apache.lucene.search.highlight.Highlighter.getBestFragments (or =20=

> getBestFragment), this method is very long (about 150 ms). So it =20
> takes 15s when I have 100 results!
> If I don't use this method the performance is very good.
>
> Is there something to do to improve performance using this method?
>
> Thank you
>
> --=20
> Ce message a =E9t=E9 v=E9rifi=E9 par MailScanner
> pour des virus ou des polluriels et rien de
> suspect n'a =E9t=E9 trouv=E9.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 16:19:21 2008
Return-Path: <java-user-return-31836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49393 invoked from network); 8 Jan 2008 16:19:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 16:19:20 -0000
Received: (qmail 71955 invoked by uid 500); 8 Jan 2008 16:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71920 invoked by uid 500); 8 Jan 2008 16:19:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71909 invoked by uid 99); 8 Jan 2008 16:19:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 08:19:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 16:18:38 +0000
Received: by py-out-1112.google.com with SMTP id a73so283399pye.9
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 08:18:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=j7xjSQ7+g7wc+4APz1yUwhRw5s8lZn2C9NenH/xYtJ0=;
        b=BBIm2qUEXDMWVDjL6LwpCLl1/CA36UEF2rKLVAndI/LmdssZYLCc9YoIjAtEYsQY195uNT3AeYL2glhbI6juqfuPXRQ9l5d8G7PFHjOEr7cpAfxowH017bOq6NMGrDM6ar5r7/iDpE5h6FnblIwdALRTW4tvVxb7ES1VfWKadHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=bdt2jW4aUDsK/PHyKRagGlTJ/iDPGRScgP6kX59BwkM+Qfg3fuEUWYGZyeS6jDz+2B1Fdc3fqJw/FUZQhWXYn7hk61Fa9atPVGARWMyHqPn38Q/hxSCI+5mxYW4200xQk4zmI2+GMkuvocQSsX3lZ7L6+/IlFMLMvMZyp+rwbgs=
Received: by 10.65.222.11 with SMTP id z11mr199899qbq.39.1199809122350;
        Tue, 08 Jan 2008 08:18:42 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id 1sm14168269qbh.7.2008.01.08.08.18.41
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 08 Jan 2008 08:18:41 -0800 (PST)
Message-ID: <4783A260.7030804@gmail.com>
Date: Tue, 08 Jan 2008 11:18:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance and BestFragments
References: <47838AFD.7090704@univ-valenciennes.fr> <B5C95A02-CAFD-4A42-819F-3780B7D8A80E@apache.org>
In-Reply-To: <B5C95A02-CAFD-4A42-819F-3780B7D8A80E@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think the problem is that he is calling getBestFrags on every hit 
result for 200 page documents. So he is probably getting the document 
for every result and running the Highlighter on each. Thats some slow 
stuff there. The first simple thought is to page your results and only 
getBestFrags for the number of hits that fit the page. As Grant 
suggested you might also see if the TokenSources class helps you any. 
The gist of the problem is that what you are trying to do is quite 
computationally expensive. Your going to have to make a couple 
compromises...but they may not be so bad.

- Mark

Grant Ingersoll wrote:
> Are you just trying to search or are you trying to highlight?  
> Usually, you do your search, and then highlight 1 or more documents.  
> You can also speed up highlighting by using term vectors.
>
> -Grant
>
> On Jan 8, 2008, at 9:38 AM, Yannick Caillaux wrote:
>
>> Hello,
>>
>> First, sorry for my bad english.
>>
>> I have an index including 100 Dublin Core notices. I indexed 
>> title,creator.... and I added a field "fulltext" containing the PDF 
>> document referenced by the DC notice. (A PDF document is about 200 
>> pages)
>>
>> There's no problem to index them. But when I try to search using 
>> org.apache.lucene.search.highlight.Highlighter.getBestFragments (or 
>> getBestFragment), this method is very long (about 150 ms). So it 
>> takes 15s when I have 100 results!
>> If I don't use this method the performance is very good.
>>
>> Is there something to do to improve performance using this method?
>>
>> Thank you
>>
>> -- 
>> Ce message a t vrifi par MailScanner
>> pour des virus ou des polluriels et rien de
>> suspect n'a t trouv.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 17:26:12 2008
Return-Path: <java-user-return-31837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89284 invoked from network); 8 Jan 2008 17:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 17:26:11 -0000
Received: (qmail 85074 invoked by uid 500); 8 Jan 2008 17:25:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85031 invoked by uid 500); 8 Jan 2008 17:25:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85020 invoked by uid 99); 8 Jan 2008 17:25:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 09:25:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.214.226 as permitted sender)
Received: from [72.14.214.226] (HELO hu-out-0506.google.com) (72.14.214.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 17:25:28 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1390507hub.15
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 09:25:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=hI1x/L1px4R7Z3JJnVkbvufzgIVJPp3mbMI/8k1UTso=;
        b=bRjhwjAwzxKtwB2vBC2D+qqTgV/OogpfcMHRSl9yRDPutLkIoy6YesTh/5uyF+fUGTwOR1mF+Bv9ftMv6VQ6bdKFufV0BV1hogJhn+hr3aHU0aF4PupQw3I09fN07vVDkayk51jvhcW4Ytj/k3ZDGh+Uf4JpnXdmpGT0q2A+xDw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZAk8kDnHmDL7O/qFnyFSu8InnBUSAEAPHNJ+j82qfhVvzLvTULmkBVupapfwkhWru3D6ARVmHJDRry+g/74zYtnjwGRZH/KuI22KwjpqWFtn3owcHO4bIEPVses5M9Qks9jJDypMwAEThClGRaxjacn5OnOa136SJfZPk4IlJCI=
Received: by 10.78.147.6 with SMTP id u6mr8072597hud.78.1199813131669;
        Tue, 08 Jan 2008 09:25:31 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Tue, 8 Jan 2008 09:25:31 -0800 (PST)
Message-ID: <6e3ae6310801080925y5b771251wbc5a72139ec96e9c@mail.gmail.com>
Date: Tue, 8 Jan 2008 09:25:31 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org, sachin.singhal@naukri.com
Subject: Re: Self Join Query
In-Reply-To: <1199794981.3156.79.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1199794981.3156.79.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Sachin,

If you like self-join, you may need to retrieve the data from the
second query and merge them into each Document object. Then you can do
the query in one shot. (it's redundant. but do not try to normalize
data in the index.)

Lucene is an index. Just like index in SQL database, which can only
support one way to query data efficiently. Lucene index can support
one of your query execution path fast. Different query may require
different index structure.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Jan 8, 2008 4:23 AM, sachin <sachin.singhal@naukri.com> wrote:
>
> I need to write lucene query something similar to SQL self joins.
>
> My current implementation is very primitive. I fire first query, get the
> results, based on the result of first query I fire second query and then
> merge the results from both the queries. The whole processing is very
> expensive. Doing this is very easy with SQL query as we need to just
> write self join query and database do the rest for you.
>
> What is the best way of implementing the above functionality in lucene?
>
> Regards
> Sachin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 18:24:20 2008
Return-Path: <java-user-return-31838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11730 invoked from network); 8 Jan 2008 18:24:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 18:24:20 -0000
Received: (qmail 62867 invoked by uid 500); 8 Jan 2008 18:24:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62828 invoked by uid 500); 8 Jan 2008 18:24:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62817 invoked by uid 99); 8 Jan 2008 18:24:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 10:24:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.148.16.70] (HELO smtpoutm.mac.com) (17.148.16.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 18:23:36 +0000
Received: from mac.com (asmtp002-s [10.150.69.65])
	by smtpoutm.mac.com (Xserve/smtpout007/MantshX 4.0) with ESMTP id m08INfsv008943
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 10:23:41 -0800 (PST)
Received: from [10.0.1.200] (va-71-53-213-206.dhcp.embarqhsd.net [71.53.213.206])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp002/MantshX 4.0) with ESMTP id m08INDv3010250
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 10:23:18 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Michael Prichard <michael_prichard@mac.com>
Subject: Sorting on tokenized fields
Date: Tue, 8 Jan 2008 13:22:59 -0500
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Is it possible to sort on a tokenized field?  For example, I break  
email address into pieces, i.e.

michael.prichard@email.com

becomes

michael.prichard@email.com
michael.prichard
michael
prichard
email.com
email


so when sorting on this field I get some strange results.  Do I need  
to create another field just for sorting?  Or are there other ways to  
do it?

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 19:30:23 2008
Return-Path: <java-user-return-31839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33485 invoked from network); 8 Jan 2008 19:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 19:30:23 -0000
Received: (qmail 59174 invoked by uid 500); 8 Jan 2008 19:30:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58169 invoked by uid 500); 8 Jan 2008 19:30:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58153 invoked by uid 99); 8 Jan 2008 19:30:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 11:30:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 19:29:42 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4846091fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 11:29:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=qIXVX7DSroEas5igQZWh8sH03Fvn1WvHoXgTC3zri1Q=;
        b=W5GUhAd6eWL1NbSjWI1FlHQ/Oxpq9ZIfT0bkl6zfMX0nXi7RPa3tzSsle5Lkqjpam5aFL7qjj5w+NQ8WvD4AKT9VRJTwPhS6FKnkiyoBHuzsRySTCqNDRCSbufxWDfM5c07Vo56z3+NgacPPrmn7/4hIiTlhFnu/K+L/hgzNIVw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ASDNYVMrG6JYiIrx6lUFBWdKf5mbS5k/VGDemLNnUShyP1UYHP4chs8zl6Q0ROGFHe5UfgXOvSkSXEDw4QfrupgQC/Y0I6kQeVe273fBxSPKSPMtp+IQusVzWvbA5KUZ6M+K0Yv4+2N4YxeBe5I2mc457/XMiQQwBL/vi1cJGJ4=
Received: by 10.86.53.8 with SMTP id b8mr12849673fga.64.1199820586874;
        Tue, 08 Jan 2008 11:29:46 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 8 Jan 2008 11:29:46 -0800 (PST)
Message-ID: <e05f0fd10801081129y387f7f49w404fafb96df1f6de@mail.gmail.com>
Date: Tue, 8 Jan 2008 21:29:46 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query processing with Lucene
In-Reply-To: <4780C5EE.4070607@googlemail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13930_15895076.1199820586880"
References: <4780C5EE.4070607@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13930_15895076.1199820586880
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Marjan,

Lucene process the query in what can be called
one-doc-at-a-time.

For the example query - x y - (not the phrase query "x y") - all
documents containing either x or y are considered a match.

When processing the query - x y - the posting lists of these two
index terms are traversed, and for each document met on the way,
a score is computed (taking into account both terms), and "collected".
At the end of the traversal, usually best N collected docs are returned as
search result. So, this is an exhaustive computation creating a union of
the two posting. For the query - +x +y - in intersection rather than
union is required, and the way Lucene does it is again to traverse
the two posting lists, just that only documents seen in both lists
are scored and collected. This allows to optimize the search,
skipping large chunks of the posting lists, especially when
one term is rarer than the other.

You can read more on Lucene scoring in Lucene's documentation,
http://lucene.apache.org/java/docs/scoring.html is a good starting
point,

HTH,
Doron

On Jan 6, 2008 2:13 PM, Marjan Celikik <celikik@gmail.com> wrote:

> Dear all,
>
> Maybe this topic is already discussed (then can I get a reference
> please?)... I would like to know how does Lucene actually process the
> query. For example, take a 2-word query "x y". Does Lucene fetch the
> lists of "x" and "y" and intersect them, or do they do something more
> fancy, for example, top-k techniques that try to avoid a full scan of
> the index lists for "x" and "y" ?
>
> Marjan.
>

------=_Part_13930_15895076.1199820586880--

From java-user-return-31840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:00:15 2008
Return-Path: <java-user-return-31840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44880 invoked from network); 8 Jan 2008 20:00:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:00:15 -0000
Received: (qmail 13102 invoked by uid 500); 8 Jan 2008 19:59:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13065 invoked by uid 500); 8 Jan 2008 19:59:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13054 invoked by uid 99); 8 Jan 2008 19:59:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 11:59:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 72.14.202.180 as permitted sender)
Received: from [72.14.202.180] (HELO ro-out-1112.google.com) (72.14.202.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 19:59:31 +0000
Received: by ro-out-1112.google.com with SMTP id k5so2779280rog.7
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 11:59:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=f6U9ShQo0sassHY2/GSDdrb6En3FqHOZz/5bd0RbLJU=;
        b=V157MW8sb7+IwyPEsp+wqyi2LBEyngwcjqqomzcpCC4HZnmBNQlXEHx+Qb934HgdIXGtABAw8QzemOtJEw2FCamC7ysd5lIBD4Mpd2FDLHO8P8jxkcb58fyDrpt/Tlj6+/CfJerfTY2BeX+wuKAomgkgZfJIAqF86p06U1srYDk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=uL6yaiMurF9nub1Jonktv1FBapgrJVIjlAI3jDOEmKmAGR9snMuWZzplTfuGtPTMErxCREQAsViEs2MSlFzeQH3cuT3YzuprksYjnWcD5qKkrb9PdCJ4Ku5qeTQeCs3VM8RkToMW72UWmUBnVf5qI9hGGF1YUOhpZO0dk1ekorM=
Received: by 10.115.23.12 with SMTP id a12mr4911956waj.96.1199822375499;
        Tue, 08 Jan 2008 11:59:35 -0800 (PST)
Received: from ?192.168.1.101? ( [24.82.155.191])
        by mx.google.com with ESMTPS id t1sm65601poh.0.2008.01.08.11.59.33
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 08 Jan 2008 11:59:33 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
References: <684818.99653.qm@web50309.mail.re2.yahoo.com> <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Wikia search goes live today
Date: Tue, 8 Jan 2008 11:59:30 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

On 7-Jan-08, at 11:49 PM, Lukas Vlcek wrote:

> This would be great!
>
> I am particularly interested how they are going about customized  
> search (if
> they have a plan to do it). I mean if they can reorder raw search  
> results
> based on some kind of collective knowledge (which is probably kept  
> outside
> of Lucene index - at least that is what I can see from Nutch score
> explanations).

I don't think that there is anything like that yet.  It looks to me  
like a standard disjunction over title/content/host/url + a global  
document boost based on pagerank-y link analysis (or simply #  
inlinks).  If they are incorporating the "star" ratings yet, it is  
probably folded in to the global doc boost.

-Mike


> Regards,
> Lukas
>
> On Jan 7, 2008 11:14 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
>
>> See my comment (around #45-50) on Techcrunch about that from late  
>> last
>> night.  There is actually one Wikia guy helping Nutch - Dennis  
>> Kubes.  He
>> must have been hitting reload on that TC post, because he IMed me  
>> quickly
>> after I posted my comment and clarified that he is that Wikia  
>> developer I
>> was referring to in my comment.... so I'm looking forward to more
>> contributions from Dennis and his coworkers! :)
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: Grant Ingersoll <gsingers@apache.org>
>> To: java-user@lucene.apache.org
>> Sent: Monday, January 7, 2008 11:21:33 AM
>> Subject: Re: Wikia search goes live today
>>
>> One other thing to note, you can definitely see Lucene in action (or
>> Nutch, that is) by clicking on the score returned for a given  
>> document
>>
>> (try searching for Lucene) and you see, in all it's glory, the Lucene
>> explain results...  It even displays the Nutch logo, which makes me
>> wonder if they are misusing an ASF trademark (but, IANAL, so I don't
>> know) since they don't state that Nutch is a trademark of the ASF.
>> But, that is a discussion for somewhere else...
>>
>>
>> On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:
>>
>>>
>>> On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
>>>
>>>> Hi,
>>>>
>>>> I noticed that Wikia search goes live today (see
>>>> http://www.devxnews.com/article.php/3719906).
>>>> Does anybody know where I could find more technical information
>>>> about their
>>>> solution? Are they going to contribute their enhancements back to
>>>> Lucene/Nutch/Hadoop code? My understanding is that as long as they
>>>> claim
>>>> they want to build their solution on top of open source technology
>>>> they
>>>> should be contributing back.
>>>
>>> Not sure what they have done, but nothing in the Apache license
>>> requires contribution back, even if it would be appreciated.
>>>
>>> Cheers,
>>> Grant
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://lucene.grantingersoll.com
>>> http://www.lucenebootcamp.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>> http://www.lucenebootcamp.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> http://blog.lukas-vlcek.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:10:14 2008
Return-Path: <java-user-return-31841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48660 invoked from network); 8 Jan 2008 20:10:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:10:14 -0000
Received: (qmail 25264 invoked by uid 500); 8 Jan 2008 20:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25239 invoked by uid 500); 8 Jan 2008 20:09:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25228 invoked by uid 99); 8 Jan 2008 20:09:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:09:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [63.133.162.107] (HELO mp-s01.dragonflymc.com) (63.133.162.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:09:30 +0000
Received: from [192.168.1.201] (footoo.visvo.com [192.168.1.201])
	by mp-s01.dragonflymc.com (Postfix) with ESMTP id 6E447F8117
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2008 12:53:05 -0600 (CST)
Message-ID: <4783D882.4080009@apache.org>
Date: Tue, 08 Jan 2008 14:09:38 -0600
From: Dennis Kubes <kubes@apache.org>
User-Agent: Thunderbird 2.0.0.6 (X11/20071022)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
References: <684818.99653.qm@web50309.mail.re2.yahoo.com> <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com> <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>
In-Reply-To: <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Star ratings are being stored but not accounted for in the score as of 
yet.  The plan is to include them in future indexing scores. :)

Dennis

Mike Klaas wrote:
> On 7-Jan-08, at 11:49 PM, Lukas Vlcek wrote:
> 
>> This would be great!
>>
>> I am particularly interested how they are going about customized 
>> search (if
>> they have a plan to do it). I mean if they can reorder raw search results
>> based on some kind of collective knowledge (which is probably kept 
>> outside
>> of Lucene index - at least that is what I can see from Nutch score
>> explanations).
> 
> I don't think that there is anything like that yet.  It looks to me like 
> a standard disjunction over title/content/host/url + a global document 
> boost based on pagerank-y link analysis (or simply # inlinks).  If they 
> are incorporating the "star" ratings yet, it is probably folded in to 
> the global doc boost.
> 
> -Mike
> 
> 
>> Regards,
>> Lukas
>>
>> On Jan 7, 2008 11:14 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> wrote:
>>
>>> See my comment (around #45-50) on Techcrunch about that from late last
>>> night.  There is actually one Wikia guy helping Nutch - Dennis 
>>> Kubes.  He
>>> must have been hitting reload on that TC post, because he IMed me 
>>> quickly
>>> after I posted my comment and clarified that he is that Wikia 
>>> developer I
>>> was referring to in my comment.... so I'm looking forward to more
>>> contributions from Dennis and his coworkers! :)
>>>
>>> Otis
>>> -- 
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>> ----- Original Message ----
>>> From: Grant Ingersoll <gsingers@apache.org>
>>> To: java-user@lucene.apache.org
>>> Sent: Monday, January 7, 2008 11:21:33 AM
>>> Subject: Re: Wikia search goes live today
>>>
>>> One other thing to note, you can definitely see Lucene in action (or
>>> Nutch, that is) by clicking on the score returned for a given document
>>>
>>> (try searching for Lucene) and you see, in all it's glory, the Lucene
>>> explain results...  It even displays the Nutch logo, which makes me
>>> wonder if they are misusing an ASF trademark (but, IANAL, so I don't
>>> know) since they don't state that Nutch is a trademark of the ASF.
>>> But, that is a discussion for somewhere else...
>>>
>>>
>>> On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:
>>>
>>>>
>>>> On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I noticed that Wikia search goes live today (see
>>>>> http://www.devxnews.com/article.php/3719906).
>>>>> Does anybody know where I could find more technical information
>>>>> about their
>>>>> solution? Are they going to contribute their enhancements back to
>>>>> Lucene/Nutch/Hadoop code? My understanding is that as long as they
>>>>> claim
>>>>> they want to build their solution on top of open source technology
>>>>> they
>>>>> should be contributing back.
>>>>
>>>> Not sure what they have done, but nothing in the Apache license
>>>> requires contribution back, even if it would be appreciated.
>>>>
>>>> Cheers,
>>>> Grant
>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://lucene.grantingersoll.com
>>>> http://www.lucenebootcamp.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://lucene.grantingersoll.com
>>> http://www.lucenebootcamp.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> -- 
>> http://blog.lukas-vlcek.com/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:12:51 2008
Return-Path: <java-user-return-31842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50176 invoked from network); 8 Jan 2008 20:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:12:51 -0000
Received: (qmail 31475 invoked by uid 500); 8 Jan 2008 20:12:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31442 invoked by uid 500); 8 Jan 2008 20:12:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31431 invoked by uid 99); 8 Jan 2008 20:12:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:12:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.237 as permitted sender)
Received: from [72.14.214.237] (HELO hu-out-0506.google.com) (72.14.214.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:12:07 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1413494hub.15
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 12:12:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Xf0y86DFKwP7QD383eBgsBBNpblQFO78vY9LqIQOo28=;
        b=ReAr7Jb71AZmebPkDG1KWOOEMq2EdJnWsVdCv9wjoj5d5tBvKXnqtgxXGYO3yNFytuyHMLnRWCLHFfEZajitwo7SKla+KN7RkPn/jgkTxtKr3UlIrXSroZ8pIIAjJiS+Bjz4THSi4ylY4jroB0Ggo02r+xYRnaN8VHVt3+y8FsY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XfJ1tbDGB477mbX+N8S8QhSLiqq3jtlX38IWMk/TB5kP7RbZFXYPko1zQzupKQECrNupga9dDE9lFnJ/UaNwriKEfhhxCtojoizyQ7spJFnB9JPAZ4VMO4HgSK5kEFlk6tCnMlGGNSuELhAeqVVCsAZYA3m2c1d1wKQnHFip17M=
Received: by 10.82.177.3 with SMTP id z3mr38360003bue.35.1199823130447;
        Tue, 08 Jan 2008 12:12:10 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Tue, 8 Jan 2008 12:12:10 -0800 (PST)
Message-ID: <652776090801081212p49f7f1e5mcc05e3f8439d1da6@mail.gmail.com>
Date: Tue, 8 Jan 2008 12:12:10 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
In-Reply-To: <4783D882.4080009@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44430_28164324.1199823130440"
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>
	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>
	 <4783D882.4080009@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44430_28164324.1199823130440
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm surprised they aren't keeping *any* logs or so they claim. Seems foolish
to me from a data-mining prospective.

"A Wikia employee told me today that people were already asking what the
most popular search terms were. He said there was no way of finding out as
no logs are kept." [1]
[1]
http://radar.oreilly.com/archives/2008/01/why_wikia_will_change_search.html

-M

On Jan 8, 2008 12:09 PM, Dennis Kubes <kubes@apache.org> wrote:

> Star ratings are being stored but not accounted for in the score as of
> yet.  The plan is to include them in future indexing scores. :)
>
> Dennis
>
> Mike Klaas wrote:
> > On 7-Jan-08, at 11:49 PM, Lukas Vlcek wrote:
> >
> >> This would be great!
> >>
> >> I am particularly interested how they are going about customized
> >> search (if
> >> they have a plan to do it). I mean if they can reorder raw search
> results
> >> based on some kind of collective knowledge (which is probably kept
> >> outside
> >> of Lucene index - at least that is what I can see from Nutch score
> >> explanations).
> >
> > I don't think that there is anything like that yet.  It looks to me like
> > a standard disjunction over title/content/host/url + a global document
> > boost based on pagerank-y link analysis (or simply # inlinks).  If they
> > are incorporating the "star" ratings yet, it is probably folded in to
> > the global doc boost.
> >
> > -Mike
> >
> >
> >> Regards,
> >> Lukas
> >>
> >> On Jan 7, 2008 11:14 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> >> wrote:
> >>
> >>> See my comment (around #45-50) on Techcrunch about that from late last
> >>> night.  There is actually one Wikia guy helping Nutch - Dennis
> >>> Kubes.  He
> >>> must have been hitting reload on that TC post, because he IMed me
> >>> quickly
> >>> after I posted my comment and clarified that he is that Wikia
> >>> developer I
> >>> was referring to in my comment.... so I'm looking forward to more
> >>> contributions from Dennis and his coworkers! :)
> >>>
> >>> Otis
> >>> --
> >>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >>>
> >>> ----- Original Message ----
> >>> From: Grant Ingersoll <gsingers@apache.org>
> >>> To: java-user@lucene.apache.org
> >>> Sent: Monday, January 7, 2008 11:21:33 AM
> >>> Subject: Re: Wikia search goes live today
> >>>
> >>> One other thing to note, you can definitely see Lucene in action (or
> >>> Nutch, that is) by clicking on the score returned for a given document
> >>>
> >>> (try searching for Lucene) and you see, in all it's glory, the Lucene
> >>> explain results...  It even displays the Nutch logo, which makes me
> >>> wonder if they are misusing an ASF trademark (but, IANAL, so I don't
> >>> know) since they don't state that Nutch is a trademark of the ASF.
> >>> But, that is a discussion for somewhere else...
> >>>
> >>>
> >>> On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:
> >>>
> >>>>
> >>>> On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>> I noticed that Wikia search goes live today (see
> >>>>> http://www.devxnews.com/article.php/3719906).
> >>>>> Does anybody know where I could find more technical information
> >>>>> about their
> >>>>> solution? Are they going to contribute their enhancements back to
> >>>>> Lucene/Nutch/Hadoop code? My understanding is that as long as they
> >>>>> claim
> >>>>> they want to build their solution on top of open source technology
> >>>>> they
> >>>>> should be contributing back.
> >>>>
> >>>> Not sure what they have done, but nothing in the Apache license
> >>>> requires contribution back, even if it would be appreciated.
> >>>>
> >>>> Cheers,
> >>>> Grant
> >>>>
> >>>> --------------------------
> >>>> Grant Ingersoll
> >>>> http://lucene.grantingersoll.com
> >>>> http://www.lucenebootcamp.com
> >>>>
> >>>> Lucene Helpful Hints:
> >>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >>>> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>
> >>> --------------------------
> >>> Grant Ingersoll
> >>> http://lucene.grantingersoll.com
> >>> http://www.lucenebootcamp.com
> >>>
> >>> Lucene Helpful Hints:
> >>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >>> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >> --
> >> http://blog.lukas-vlcek.com/
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44430_28164324.1199823130440--

From java-user-return-31843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:16:27 2008
Return-Path: <java-user-return-31843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51335 invoked from network); 8 Jan 2008 20:16:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:16:26 -0000
Received: (qmail 36857 invoked by uid 500); 8 Jan 2008 20:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36829 invoked by uid 500); 8 Jan 2008 20:16:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36818 invoked by uid 99); 8 Jan 2008 20:16:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:16:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 72.14.202.180 as permitted sender)
Received: from [72.14.202.180] (HELO ro-out-1112.google.com) (72.14.202.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:15:42 +0000
Received: by ro-out-1112.google.com with SMTP id k5so2785870rog.7
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 12:15:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=m1EQHS2PNUm155kNUdpKsHYhvGjDFEBIM3FOzxr7WQw=;
        b=cbIfKLJvcDb7xv11tmSzMJa1AoMhXz2kdU1rQmDiIbXsIhHpqHAbKEkDd6cQbcG/QiZ970q7ebCKQ8/7j4NzPMwY2ES+LsOC1Yt+tX7SvKRnbTJmGodE3f34KUTZaU0xalLjehMrMsul+zThWUBMgngok5T0tsay9taoQk4S6t8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LlQHJoBU1zwtkKDrArAWLkBYBXqAqYZJvjQPiK2wm9Ih7RdN0/CxfO3WtkWpAFj/RQf6GWCy61YJmxVce3IHZhKJhcllriuV5+qnQFO5nHnTRaMen7EhoyxOfLVN0GwVKlkTVr+cqmG5NsqE03LM1BjereOurwFJgIE8xaa2S3Q=
Received: by 10.140.180.42 with SMTP id c42mr9925117rvf.145.1199823346126;
        Tue, 08 Jan 2008 12:15:46 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Tue, 8 Jan 2008 12:15:46 -0800 (PST)
Message-ID: <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com>
Date: Tue, 8 Jan 2008 21:15:46 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
In-Reply-To: <4783D882.4080009@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37730_27370230.1199823346129"
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>
	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>
	 <4783D882.4080009@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37730_27370230.1199823346129
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So staring will be accommodated only during indexing phase. Does it mean it
will be pretty static value not a dynamically changing variable... correct?
In other words if I add my starts to some document it won't affect the
scoring immediately but after indexing cycle. Correct?

On 1/8/08, Dennis Kubes <kubes@apache.org> wrote:
>
> Star ratings are being stored but not accounted for in the score as of
> yet.  The plan is to include them in future indexing scores. :)
>
> Dennis
>
> Mike Klaas wrote:
> > On 7-Jan-08, at 11:49 PM, Lukas Vlcek wrote:
> >
> >> This would be great!
> >>
> >> I am particularly interested how they are going about customized
> >> search (if
> >> they have a plan to do it). I mean if they can reorder raw search
> results
> >> based on some kind of collective knowledge (which is probably kept
> >> outside
> >> of Lucene index - at least that is what I can see from Nutch score
> >> explanations).
> >
> > I don't think that there is anything like that yet.  It looks to me like
> > a standard disjunction over title/content/host/url + a global document
> > boost based on pagerank-y link analysis (or simply # inlinks).  If they
> > are incorporating the "star" ratings yet, it is probably folded in to
> > the global doc boost.
> >
> > -Mike
> >
> >
> >> Regards,
> >> Lukas
> >>
> >> On Jan 7, 2008 11:14 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> >> wrote:
> >>
> >>> See my comment (around #45-50) on Techcrunch about that from late last
> >>> night.  There is actually one Wikia guy helping Nutch - Dennis
> >>> Kubes.  He
> >>> must have been hitting reload on that TC post, because he IMed me
> >>> quickly
> >>> after I posted my comment and clarified that he is that Wikia
> >>> developer I
> >>> was referring to in my comment.... so I'm looking forward to more
> >>> contributions from Dennis and his coworkers! :)
> >>>
> >>> Otis
> >>> --
> >>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >>>
> >>> ----- Original Message ----
> >>> From: Grant Ingersoll <gsingers@apache.org>
> >>> To: java-user@lucene.apache.org
> >>> Sent: Monday, January 7, 2008 11:21:33 AM
> >>> Subject: Re: Wikia search goes live today
> >>>
> >>> One other thing to note, you can definitely see Lucene in action (or
> >>> Nutch, that is) by clicking on the score returned for a given document
> >>>
> >>> (try searching for Lucene) and you see, in all it's glory, the Lucene
> >>> explain results...  It even displays the Nutch logo, which makes me
> >>> wonder if they are misusing an ASF trademark (but, IANAL, so I don't
> >>> know) since they don't state that Nutch is a trademark of the ASF.
> >>> But, that is a discussion for somewhere else...
> >>>
> >>>
> >>> On Jan 7, 2008, at 8:13 AM, Grant Ingersoll wrote:
> >>>
> >>>>
> >>>> On Jan 7, 2008, at 7:48 AM, Lukas Vlcek wrote:
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>> I noticed that Wikia search goes live today (see
> >>>>> http://www.devxnews.com/article.php/3719906).
> >>>>> Does anybody know where I could find more technical information
> >>>>> about their
> >>>>> solution? Are they going to contribute their enhancements back to
> >>>>> Lucene/Nutch/Hadoop code? My understanding is that as long as they
> >>>>> claim
> >>>>> they want to build their solution on top of open source technology
> >>>>> they
> >>>>> should be contributing back.
> >>>>
> >>>> Not sure what they have done, but nothing in the Apache license
> >>>> requires contribution back, even if it would be appreciated.
> >>>>
> >>>> Cheers,
> >>>> Grant
> >>>>
> >>>> --------------------------
> >>>> Grant Ingersoll
> >>>> http://lucene.grantingersoll.com
> >>>> http://www.lucenebootcamp.com
> >>>>
> >>>> Lucene Helpful Hints:
> >>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >>>> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>
> >>> --------------------------
> >>> Grant Ingersoll
> >>> http://lucene.grantingersoll.com
> >>> http://www.lucenebootcamp.com
> >>>
> >>> Lucene Helpful Hints:
> >>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >>> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >> --
> >> http://blog.lukas-vlcek.com/
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://blog.lukas-vlcek.com/

------=_Part_37730_27370230.1199823346129--

From java-user-return-31844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:24:58 2008
Return-Path: <java-user-return-31844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54698 invoked from network); 8 Jan 2008 20:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:24:56 -0000
Received: (qmail 58367 invoked by uid 500); 8 Jan 2008 20:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58239 invoked by uid 500); 8 Jan 2008 20:24:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58210 invoked by uid 99); 8 Jan 2008 20:24:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:24:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:24:25 +0000
Received: from [192.168.0.252] (static-62-233-204-250.devs.futuro.pl [62.233.204.250])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m08KOUj20383
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 14:24:30 -0600
Message-ID: <4783DBE6.7040205@getopt.org>
Date: Tue, 08 Jan 2008 21:24:06 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>	 <4783D882.4080009@apache.org> <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com>
In-Reply-To: <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Lukas Vlcek wrote:
> So staring will be accommodated only during indexing phase. Does it mean it
> will be pretty static value not a dynamically changing variable... correct?
> In other words if I add my starts to some document it won't affect the
> scoring immediately but after indexing cycle. Correct?

(I'm not involved in Wikia development). There are some ways to go about 
it even in the pure Lucene-land, so that the updates are fast without 
reindexing the main content. Hint: ParallelReader.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:27:45 2008
Return-Path: <java-user-return-31845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56084 invoked from network); 8 Jan 2008 20:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:27:45 -0000
Received: (qmail 62133 invoked by uid 500); 8 Jan 2008 20:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62097 invoked by uid 500); 8 Jan 2008 20:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62086 invoked by uid 99); 8 Jan 2008 20:27:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:27:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.148.16.73] (HELO smtpoutm.mac.com) (17.148.16.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:27:01 +0000
Received: from mac.com (asmtp001-s [10.150.69.64])
	by smtpoutm.mac.com (Xserve/smtpout010/MantshX 4.0) with ESMTP id m08KR6MW026584
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 12:27:06 -0800 (PST)
Received: from [10.0.1.200] (va-71-53-213-206.dhcp.embarqhsd.net [71.53.213.206])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp001/MantshX 4.0) with ESMTP id m08KQxtU017060
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 12:27:01 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com>
References: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D8DB10D-832F-465B-B43B-F2B35CAA0622@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Prichard <michael_prichard@mac.com>
Subject: Re: Sorting on tokenized fields
Date: Tue, 8 Jan 2008 15:26:45 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

ok... i should read the manual more often.

i went ahead and just added untokenized, unstored sort fields....

question, if I put a field in to sort of but say I have not indexed  
any as of yet...will the Sort fail?  For example, say I have a BCC  
field and nothing has been indexed with that yet....I run a sort on  
BCC.....I think it fails now...anyway around that?

On Jan 8, 2008, at 1:22 PM, Michael Prichard wrote:

> Is it possible to sort on a tokenized field?  For example, I break  
> email address into pieces, i.e.
>
> michael.prichard@email.com
>
> becomes
>
> michael.prichard@email.com
> michael.prichard
> michael
> prichard
> email.com
> email
>
>
> so when sorting on this field I get some strange results.  Do I  
> need to create another field just for sorting?  Or are there other  
> ways to do it?
>
> Thanks!
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:36:33 2008
Return-Path: <java-user-return-31846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59521 invoked from network); 8 Jan 2008 20:36:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:36:33 -0000
Received: (qmail 76350 invoked by uid 500); 8 Jan 2008 20:36:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76319 invoked by uid 500); 8 Jan 2008 20:36:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76303 invoked by uid 99); 8 Jan 2008 20:36:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:36:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryantxu@gmail.com designates 64.233.178.248 as permitted sender)
Received: from [64.233.178.248] (HELO hs-out-2122.google.com) (64.233.178.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:35:52 +0000
Received: by hs-out-2122.google.com with SMTP id 54so5773131hsz.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 12:35:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=vtSVq5b8aIcJBttinSycfM7WlZi+LPc02Lp4y1jvImE=;
        b=ik1ymsyDLHeJIEyikk9b3gl+QMhRXTbmSNbrk7UyyegAr8DbnmQ04xD1fn0dvPf73/qY0Jb+4cDwwOB0T1EuOWmi/DwlUqLUaAvEdhl5hcukPzSZkvhSuoR9c0ocwYx61Zkc/p0m6ea9/1raRFxzeZFf4isGZogjaY0RzaViMIk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=TWQssaL6Pqpc5Qw0zH5IvKSKD/SSfYi/yzG3Wu8AMDzlONSwT+uz2R2x3LbK2vLkWDPVzRXnvlIoQddVoFoQeR6Y5QzhlFFmE5gi+kqnhGji7SphCqVqRn6ldUNl4CvV0Z2tgpRrJK+7MC5wqWvIPMxQ80BFabIOtdkwua8IlDY=
Received: by 10.143.53.7 with SMTP id f7mr4972330wfk.217.1199824553774;
        Tue, 08 Jan 2008 12:35:53 -0800 (PST)
Received: from ?192.168.1.6? ( [66.92.161.165])
        by mx.google.com with ESMTPS id i16sm114637wxd.30.2008.01.08.12.35.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jan 2008 12:35:52 -0800 (PST)
Message-ID: <4783DDA9.7030009@gmail.com>
Date: Tue, 08 Jan 2008 15:31:37 -0500
From: Ryan McKinley <ryantxu@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>	 <4783D882.4080009@apache.org> <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com> <4783DBE6.7040205@getopt.org>
In-Reply-To: <4783DBE6.7040205@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Andrzej Bialecki wrote:
> Lukas Vlcek wrote:
>> So staring will be accommodated only during indexing phase. Does it 
>> mean it
>> will be pretty static value not a dynamically changing variable... 
>> correct?
>> In other words if I add my starts to some document it won't affect the
>> scoring immediately but after indexing cycle. Correct?
> 
> (I'm not involved in Wikia development). There are some ways to go about 
> it even in the pure Lucene-land, so that the updates are fast without 
> reindexing the main content. Hint: ParallelReader.
> 

in solr (1.3-dev) you can have an external value source with a function 
query...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:37:24 2008
Return-Path: <java-user-return-31847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59866 invoked from network); 8 Jan 2008 20:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:37:24 -0000
Received: (qmail 81230 invoked by uid 500); 8 Jan 2008 20:37:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81194 invoked by uid 500); 8 Jan 2008 20:37:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81178 invoked by uid 99); 8 Jan 2008 20:37:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:37:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.162.224 as permitted sender)
Received: from [64.233.162.224] (HELO nz-out-0506.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:36:41 +0000
Received: by nz-out-0506.google.com with SMTP id i28so1792442nzi.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 12:36:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=iSWJHmcGmTGx+x93vliBNbE/oF1XGQl+r85DrDrcyXs=;
        b=lbstXxk/Fk0K56ta8QEBRBqy0wFJfyLy5MRFy+SiLbZlUWuXdFYe3D5nbo5/vjHs9JU9pUiRyn/zqh4OYpBYCaF7KnYryF2pvN/2PkfGRdqxyAqFG3g/lZbqEatFJA8JdwmuxcsguHnybAt895tz7VowWbMfC0N5S8kyZYyU60Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ulP428pHy1SgOgfc8mkH53VBNilE4tI7i32eoDa/7jRz/dr5+g08l9JsFv0SOjsInVtrc3SPNRskHS9AJEza+5Vp9IXpOs/b3TL9A+xz0XHrAvIanQUfzfYkllaq270NF+QfZKcGEz2hycR2dyaqtyb6AWrsVI60J+XNzzeyrXo=
Received: by 10.140.164.1 with SMTP id m1mr7421331rve.266.1199824605243;
        Tue, 08 Jan 2008 12:36:45 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Tue, 8 Jan 2008 12:36:45 -0800 (PST)
Message-ID: <52c3ddca0801081236l5d18327k74ffd845d424353d@mail.gmail.com>
Date: Tue, 8 Jan 2008 21:36:45 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
In-Reply-To: <4783DBE6.7040205@getopt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37777_9500702.1199824605241"
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>
	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>
	 <4783D882.4080009@apache.org>
	 <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com>
	 <4783DBE6.7040205@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37777_9500702.1199824605241
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

After checking the Lucene API of ParallelReader it seems that the star score
could be stored in different index which shares the same identifier for the
documents. Such index could be small (partitioned to many small indices?) so
the updates can be fast. Is that what you meant Andrzej? ;-)

Anyway, I remember different technique which I once mentioned in Lucene mail
list taking inspiration from book called Programming Collective
Intelligence<http://www.oreilly.com/catalog/9780596529321/>.
The idea is not to store score (may be I should call it user preference)
into index but into neural net. One useful side effect is that this
technique could score reasonably even document without any stars (meaning
"similar" document to highly started documents could score better even if
they haven't been stared by any user yet).

Regards,
Lukas

On 1/8/08, Andrzej Bialecki <ab@getopt.org> wrote:
>
> Lukas Vlcek wrote:
> > So staring will be accommodated only during indexing phase. Does it mean
> it
> > will be pretty static value not a dynamically changing variable...
> correct?
> > In other words if I add my starts to some document it won't affect the
> > scoring immediately but after indexing cycle. Correct?
>
> (I'm not involved in Wikia development). There are some ways to go about
> it even in the pure Lucene-land, so that the updates are fast without
> reindexing the main content. Hint: ParallelReader.
>
>
> --
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://blog.lukas-vlcek.com/

------=_Part_37777_9500702.1199824605241--

From java-user-return-31848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:39:15 2008
Return-Path: <java-user-return-31848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60479 invoked from network); 8 Jan 2008 20:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:39:15 -0000
Received: (qmail 84394 invoked by uid 500); 8 Jan 2008 20:38:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84363 invoked by uid 500); 8 Jan 2008 20:38:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84352 invoked by uid 99); 8 Jan 2008 20:38:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:38:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:38:43 +0000
Received: by nz-out-0506.google.com with SMTP id i28so1792899nzi.5
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 12:38:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=9LWXWp6O+W5Oz6EYTUQ6rGSodD7JiB7EyJKRU1VNtQE=;
        b=hi5eJlePyGJgsW3A+VPBhC3mE3/R4SHl0fY2X2+9LlPKrEIabsaN56UZTHHLwxEIzs6PbbBIl31OzhQ3PCN4u6aD7DrV61WMyAWEDA9TORBaHfnjeL1kU/ddTEAyHwLzQk6C8B7dvf+mBa3VZcXKLpKhvSn6aAgo1OMcJJkyTyk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JiEgPpyK403TmSS7tWcLGSzq53kmCjXI8fOPMkAknRSKmhR9mAFj2wpLDGezGq8GVoajvHqdJ7MJs9GzUjzcNDpMTObGwISg2B1IEnzGIu59FYKpAo0nvHMM3TVS71LJfdZgla5+8KXFnwfrXdDi3GjGUQiy7aT5iElGp4vieL8=
Received: by 10.140.148.3 with SMTP id v3mr696498rvd.129.1199824714738;
        Tue, 08 Jan 2008 12:38:34 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Tue, 8 Jan 2008 12:38:34 -0800 (PST)
Message-ID: <52c3ddca0801081238m5d4a175ekb68e75764ce0da4a@mail.gmail.com>
Date: Tue, 8 Jan 2008 21:38:34 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
In-Reply-To: <52c3ddca0801081236l5d18327k74ffd845d424353d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37787_26672258.1199824714737"
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>
	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>
	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>
	 <4783D882.4080009@apache.org>
	 <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com>
	 <4783DBE6.7040205@getopt.org>
	 <52c3ddca0801081236l5d18327k74ffd845d424353d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37787_26672258.1199824714737
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I should note that this technique is probably not easily applicable to
current Lucene scoring mechanism without additional development.

On 1/8/08, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
>
> After checking the Lucene API of ParallelReader it seems that the star
> score could be stored in different index which shares the same identifier
> for the documents. Such index could be small (partitioned to many small
> indices?) so the updates can be fast. Is that what you meant Andrzej? ;-)
>
> Anyway, I remember different technique which I once mentioned in Lucene
> mail list taking inspiration from book called Programming Collective
> Intelligence <http://www.oreilly.com/catalog/9780596529321/> . The idea is
> not to store score (may be I should call it user preference) into index but
> into neural net. One useful side effect is that this technique could score
> reasonably even document without any stars (meaning "similar" document to
> highly started documents could score better even if they haven't been stared
> by any user yet).
>
> Regards,
> Lukas
>
> On 1/8/08, Andrzej Bialecki <ab@getopt.org> wrote:
> >
> > Lukas Vlcek wrote:
> > > So staring will be accommodated only during indexing phase. Does it
> > mean it
> > > will be pretty static value not a dynamically changing variable...
> > correct?
> > > In other words if I add my starts to some document it won't affect the
> >
> > > scoring immediately but after indexing cycle. Correct?
> >
> > (I'm not involved in Wikia development). There are some ways to go about
> > it even in the pure Lucene-land, so that the updates are fast without
> > reindexing the main content. Hint: ParallelReader.
> >
> >
> > --
> > Best regards,
> > Andrzej Bialecki     <><
> >   ___. ___ ___ ___ _ _   __________________________________
> > [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> > ___|||__||  \|  ||  |  Embedded Unix, System Integration
> > http://www.sigram.com  Contact: info at sigram dot com
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> http://blog.lukas-vlcek.com/
>



-- 
http://blog.lukas-vlcek.com/

------=_Part_37787_26672258.1199824714737--

From java-user-return-31849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 20:52:25 2008
Return-Path: <java-user-return-31849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65040 invoked from network); 8 Jan 2008 20:52:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 20:52:24 -0000
Received: (qmail 7410 invoked by uid 500); 8 Jan 2008 20:52:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7386 invoked by uid 500); 8 Jan 2008 20:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7361 invoked by uid 99); 8 Jan 2008 20:52:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 12:52:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 20:51:37 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4870802fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 12:51:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yc1doId5JMIeHx9gvXDBBDy1j1YJKmauMinkmgE4DXA=;
        b=EOPnnrb3YiHjz1hKWU+Qe6bFBVdEXj2tYBHJaclD1AK9AHgW9lUC+wy7bPAiG3rHykJgdSwVVJcnXQZ1VdgnePpsupEuxIfh/rE9+HfFpK1STcvZdQfxxKXZn2ACFqlGWs4mbiOQgkwzJimSxJL6AI9kq/plHGr+okb9PU+om20=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZznrCbztFzU4T3g8OoP+1ldI5bfcdPyGLsVeBKQPJrpX1l114wFsSNffvd5pA7PSJ/wJyERnhiAOrUYWHEWlQ3WW3NJUydvON6DzFJ4ektTr5zG6rGUQisIhgLRtK9ZYa1JZYw+uzhCq+OkDjXIVhsagPbAQ4ZB8PfYjtujx7Fo=
Received: by 10.86.100.7 with SMTP id x7mr115532fgb.7.1199825501172;
        Tue, 08 Jan 2008 12:51:41 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 8 Jan 2008 12:51:41 -0800 (PST)
Message-ID: <e05f0fd10801081251h292b4606nbf9d9b80cd4dd7c4@mail.gmail.com>
Date: Tue, 8 Jan 2008 22:51:41 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic Named Entity Indexing
In-Reply-To: <14691223.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14211_3468551.1199825501153"
References: <14291880.post@talk.nabble.com>
	 <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net>
	 <14691223.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14211_3468551.1199825501153
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris,

A null pointer exception can be causes by not checking
newToken for null after this line:
    Token newToken = input.next()

I think Hoss meant to call next() on the input as long as returned
tokens do not satisfy the check for being a named entity.

Also, this code assumes white space in the token - which you won't
have since using a WhiteSpaceAnalyzer.

For returning single word names I think something like this should work:

   Token t;
   while ((t = in.next())!=null   && !
Character.isUpperCase(t.termText().getCharAt(0)))
{
   }
   return t;

For identifying two consecutive token starting with an upper case character
and returning them as a single name a bit more code is required.

Btw, I don't understand why the NGram.

HTH, Doron

On Jan 8, 2008 5:05 PM, chris.b <omelhornomedomundo@gmail.com> wrote:

>
> Following your suggestion (I think), I built a tokenfilter with the
> following
> code for next():
>
>        public final Token next() throws IOException {
>                Token newToken = input.next();
>                termText = newToken.termText();
>                Character tempChar = termText.charAt(0);
>                if(Character.isUpperCase(tempChar)) {
>                        for(int current = 0; current < termText.length();
> current++){
>                                Character currentChar = termText.charAt
> (current);
>                                if (Character.isWhitespace(currentChar) &
> Character.isUpperCase(currentChar + 1) & current != termText.length()) {
>                                        return newToken;
>                                }
>                        }
>                }
>                return null;
>        }
>
> -----------
> and in calling this filter, i'm also calling NGramAnalyzerWrapper wrapping
> WhitespaceAnalyzer (these two work together), but when building my index i
> get the following error:
>
> Exception in thread "main" java.lang.NullPointerException
>        at rem.NamedEntityTokenFilter.next(NamedEntityTokenFilter.java:21)
>        at
> org.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.java
> :219)
>        at
> org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:95)
>        at
> org.apache.lucene.index.IndexWriter.buildSingleDocSegment(IndexWriter.java
> :1013)
>        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
> :1001)
>        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
> :983)
>        at ancorpMethods.Handlers.handleDOC(Handlers.java:92)
>        at ancorpMethods.Handlers.handleDir(Handlers.java:32)
>        at ancorpMethods.Handlers.handleDir(Handlers.java:30)
>        at ancorpMethods.Handlers.handleDir(Handlers.java:30)
>        at ancorpMethods.Handlers.handleDir(Handlers.java:30)
>        at ancorpMethods.Handlers.handleDir(Handlers.java:30)
>        at Base.Indexer.indexCapitalNgrams(Indexer.java:155)
>        at Base.Indexer.main(Indexer.java:81)
>
> ----------
> am I forgetting something or am I going the wrong way? :|
>
>

------=_Part_14211_3468551.1199825501153--

From java-user-return-31850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:18:16 2008
Return-Path: <java-user-return-31850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80260 invoked from network); 8 Jan 2008 21:18:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:18:15 -0000
Received: (qmail 59559 invoked by uid 500); 8 Jan 2008 21:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59530 invoked by uid 500); 8 Jan 2008 21:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59519 invoked by uid 99); 8 Jan 2008 21:17:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:17:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryantxu@gmail.com designates 72.14.202.178 as permitted sender)
Received: from [72.14.202.178] (HELO ro-out-1112.google.com) (72.14.202.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:17:43 +0000
Received: by ro-out-1112.google.com with SMTP id k5so2811116rog.7
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 13:17:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=3W1awcKfRwGFaLZQd1iIoI70UPygFv7kkH4NIBkqpz4=;
        b=QJVHaQCf3kSiROl6uhjEYC4B82TLsSvtpSY9PupDad4lKoqsl3GjRwfClP2XrQ+2ecurLsa0M3rM0nZTlUPdQ00B+HIms4sUfSuosOBrukHIIh3kAt6x3o7IC3mEQ2Y/Q0a2Ji88PX5anzWyhjC+7AFXU3TpwRKBtGOIrxtQzmI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MniADWOeXh826vQ7gLv96LkbaIPLEak4W8lZAWnu9hNaijRN2KaOQWJED/Wk4u6MHAVn+7+8k5BnAklNb02CF9IVoXmnvoqTEYxQrLrLyY2d5P7rakHK2Ee40zaLaN2ssn8pSFGehly2EWYWuKZmknzPTamlkmu865zzfvwTUAs=
Received: by 10.110.42.13 with SMTP id p13mr4967979tip.34.1199827051305;
        Tue, 08 Jan 2008 13:17:31 -0800 (PST)
Received: from ?192.168.1.6? ( [66.92.161.165])
        by mx.google.com with ESMTPS id h17sm326329wxd.24.2008.01.08.13.17.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jan 2008 13:17:30 -0800 (PST)
Message-ID: <4783E76A.9050008@gmail.com>
Date: Tue, 08 Jan 2008 16:13:14 -0500
From: Ryan McKinley <ryantxu@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting on tokenized fields
References: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com> <8D8DB10D-832F-465B-B43B-F2B35CAA0622@mac.com>
In-Reply-To: <8D8DB10D-832F-465B-B43B-F2B35CAA0622@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

what do you mean by "fail"? -- there is the sortMissingLast attribute


Michael Prichard wrote:
> ok... i should read the manual more often.
> 
> i went ahead and just added untokenized, unstored sort fields....
> 
> question, if I put a field in to sort of but say I have not indexed any 
> as of yet...will the Sort fail?  For example, say I have a BCC field and 
> nothing has been indexed with that yet....I run a sort on BCC.....I 
> think it fails now...anyway around that?
> 
> On Jan 8, 2008, at 1:22 PM, Michael Prichard wrote:
> 
>> Is it possible to sort on a tokenized field?  For example, I break 
>> email address into pieces, i.e.
>>
>> michael.prichard@email.com
>>
>> becomes
>>
>> michael.prichard@email.com
>> michael.prichard
>> michael
>> prichard
>> email.com
>> email
>>
>>
>> so when sorting on this field I get some strange results.  Do I need 
>> to create another field just for sorting?  Or are there other ways to 
>> do it?
>>
>> Thanks!
>> Michael
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:22:29 2008
Return-Path: <java-user-return-31851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83145 invoked from network); 8 Jan 2008 21:22:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:22:28 -0000
Received: (qmail 70510 invoked by uid 500); 8 Jan 2008 21:22:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70485 invoked by uid 500); 8 Jan 2008 21:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70474 invoked by uid 99); 8 Jan 2008 21:22:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:22:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.73] (HELO smtpoutm.mac.com) (17.148.16.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:21:56 +0000
Received: from mac.com (asmtp008-s [10.150.69.71])
	by smtpoutm.mac.com (Xserve/smtpout010/MantshX 4.0) with ESMTP id m08LLlxp026917
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 13:21:47 -0800 (PST)
Received: from [10.0.1.200] (va-71-53-213-206.dhcp.embarqhsd.net [71.53.213.206])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp008/MantshX 4.0) with ESMTP id m08LLdmI028397
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 13:21:40 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4783E76A.9050008@gmail.com>
References: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com> <8D8DB10D-832F-465B-B43B-F2B35CAA0622@mac.com> <4783E76A.9050008@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <98E643DC-2D01-457E-AF55-284C4186B0B0@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Prichard <michael_prichard@mac.com>
Subject: Re: Sorting on tokenized fields
Date: Tue, 8 Jan 2008 16:21:26 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Meaning that it says "field is not indexed".  Where is  
sortMissingLastAttribute?

thanks.

On Jan 8, 2008, at 4:13 PM, Ryan McKinley wrote:

> what do you mean by "fail"? -- there is the sortMissingLast attribute
>
>
> Michael Prichard wrote:
>> ok... i should read the manual more often.
>> i went ahead and just added untokenized, unstored sort fields....
>> question, if I put a field in to sort of but say I have not  
>> indexed any as of yet...will the Sort fail?  For example, say I  
>> have a BCC field and nothing has been indexed with that yet....I  
>> run a sort on BCC.....I think it fails now...anyway around that?
>> On Jan 8, 2008, at 1:22 PM, Michael Prichard wrote:
>>> Is it possible to sort on a tokenized field?  For example, I  
>>> break email address into pieces, i.e.
>>>
>>> michael.prichard@email.com
>>>
>>> becomes
>>>
>>> michael.prichard@email.com
>>> michael.prichard
>>> michael
>>> prichard
>>> email.com
>>> email
>>>
>>>
>>> so when sorting on this field I get some strange results.  Do I  
>>> need to create another field just for sorting?  Or are there  
>>> other ways to do it?
>>>
>>> Thanks!
>>> Michael
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:24:54 2008
Return-Path: <java-user-return-31852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84283 invoked from network); 8 Jan 2008 21:24:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:24:53 -0000
Received: (qmail 75885 invoked by uid 500); 8 Jan 2008 21:24:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75858 invoked by uid 500); 8 Jan 2008 21:24:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75844 invoked by uid 99); 8 Jan 2008 21:24:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:24:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of celikik@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:24:23 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4881142fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 13:24:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=a/NlDsKa9xqXsKJNjrKnnNlKlnbCuqozA4u4ruaz5m4=;
        b=aJP2AWizbgr9f3SNkNjjSlFxRQAQ3jwHdkcBsxNwzwCpvCzlRQHboBm2/LbH8XB9jlsjbMsaLctRyOZLdZh6fcEVhMCIaziUblb1b5AZEoOkDKwaVBKsJ7U+yGX/8OHJCXiQTawT9FvOoTXpJgGRrLbhxlnE0VGrCQJoSrOXl5k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=FD5IZf+Y4ceCsY/klJMnrnUsDu4IcxmUfrG2JlYX72DUKCBMOtwhCDvpKvf6PAZqwLdo62E0K/btpt2JnogC6sE2UxQPnjdjs7H3NVRt08cTY4Mv71UZCv18QKN52tKQl98V6RWq9QxBpN6Y8WGvjXQC3ljd6n89aEm7+kvu1tc=
Received: by 10.86.9.8 with SMTP id 8mr21668326fgi.70.1199827456521;
        Tue, 08 Jan 2008 13:24:16 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id e32sm185747fke.10.2008.01.08.13.24.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jan 2008 13:24:15 -0800 (PST)
Message-ID: <4783EA08.1040009@googlemail.com>
Date: Tue, 08 Jan 2008 22:24:24 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query processing with Lucene
References: <4780C5EE.4070607@googlemail.com> <e05f0fd10801081129y387f7f49w404fafb96df1f6de@mail.gmail.com>
In-Reply-To: <e05f0fd10801081129y387f7f49w404fafb96df1f6de@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> Hi Marjan,
>
> Lucene process the query in what can be called
> one-doc-at-a-time.
>
> For the example query - x y - (not the phrase query "x y") - all
> documents containing either x or y are considered a match.
>
> When processing the query - x y - the posting lists of these two
> index terms are traversed, and for each document met on the way,
> a score is computed (taking into account both terms), and "collected".
> At the end of the traversal, usually best N collected docs are returned as
> search result. So, this is an exhaustive computation creating a union of
> the two posting. For the query - +x +y - in intersection rather than
> union is required, and the way Lucene does it is again to traverse
> the two posting lists, just that only documents seen in both lists
> are scored and collected. This allows to optimize the search,
> skipping large chunks of the posting lists, especially when
> one term is rarer than the other.
>   
Thank you for your answer.

I am having trouble finding the function which traverses the documents 
such that they get scored. Can you
please tell me where the posting lists (for a +x +y query) get 
intersected after they get read (by next() I guess)
from the index?

In particular, I am interested in how does Lucene get the new positions 
(offsets) of the documents seen
in both posting lists, i.e. positions (in a document) for the query word 
x, and positions for the query word y.

Thank you in advance!

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:31:16 2008
Return-Path: <java-user-return-31853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88490 invoked from network); 8 Jan 2008 21:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:31:15 -0000
Received: (qmail 93881 invoked by uid 500); 8 Jan 2008 21:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93851 invoked by uid 500); 8 Jan 2008 21:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93840 invoked by uid 99); 8 Jan 2008 21:30:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:30:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryantxu@gmail.com designates 72.14.252.158 as permitted sender)
Received: from [72.14.252.158] (HELO po-out-1718.google.com) (72.14.252.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:30:32 +0000
Received: by po-out-1718.google.com with SMTP id c31so2194527poi.0
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 13:30:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=0olJykQw6nISNvDVS2rpog5JroiIQUruS7yJwqYE+ww=;
        b=Nl/gpsLtIIUqWfgsvUWuKBozL0b0VgX8+R4kUFHS0gYYR9AqibW/qLrbPPi33KAjdt8vdiEepKmQaopdR91MzjsEhlIG+NPADso6XJvrCSFtgIfgJOVDJg6oMCEUUPhqW+Z2OO2tc6Vb2zHmgZY+rGlP8xwU3Tr5zgb6PmQMPCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YQqmiWmUvPM+orMNWMgr2UcFSoZycokgP1MiL/iUYqWl2JezLmoptTO2Dhq+FXQusxjJL4S5Ta1U4Cn68v4IYQS75An1kAdoHhJ6bsaAEtDlQTZL/1Cy5NnvbRA6x9PExbT9MYOvJblU5SblNC4XuIJIzbDCcoP666x2Ko+dYmw=
Received: by 10.110.11.10 with SMTP id 10mr541072tik.42.1199827834719;
        Tue, 08 Jan 2008 13:30:34 -0800 (PST)
Received: from ?192.168.1.6? ( [66.92.161.165])
        by mx.google.com with ESMTPS id i17sm187684wxd.19.2008.01.08.13.30.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jan 2008 13:30:33 -0800 (PST)
Message-ID: <4783EA7A.9080807@gmail.com>
Date: Tue, 08 Jan 2008 16:26:18 -0500
From: Ryan McKinley <ryantxu@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting on tokenized fields
References: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com> <8D8DB10D-832F-465B-B43B-F2B35CAA0622@mac.com> <4783E76A.9050008@gmail.com> <98E643DC-2D01-457E-AF55-284C4186B0B0@mac.com>
In-Reply-To: <98E643DC-2D01-457E-AF55-284C4186B0B0@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

my mistake, I thought I was looking at the solr mailing list ;)

If you change your analyzer, it does not change the tokens that are 
already in the index -- you will need to re-index for any changes to 
take effect.

ryan


Michael Prichard wrote:
> Meaning that it says "field is not indexed".  Where is 
> sortMissingLastAttribute?
> 
> thanks.
> 
> On Jan 8, 2008, at 4:13 PM, Ryan McKinley wrote:
> 
>> what do you mean by "fail"? -- there is the sortMissingLast attribute
>>
>>
>> Michael Prichard wrote:
>>> ok... i should read the manual more often.
>>> i went ahead and just added untokenized, unstored sort fields....
>>> question, if I put a field in to sort of but say I have not indexed 
>>> any as of yet...will the Sort fail?  For example, say I have a BCC 
>>> field and nothing has been indexed with that yet....I run a sort on 
>>> BCC.....I think it fails now...anyway around that?
>>> On Jan 8, 2008, at 1:22 PM, Michael Prichard wrote:
>>>> Is it possible to sort on a tokenized field?  For example, I break 
>>>> email address into pieces, i.e.
>>>>
>>>> michael.prichard@email.com
>>>>
>>>> becomes
>>>>
>>>> michael.prichard@email.com
>>>> michael.prichard
>>>> michael
>>>> prichard
>>>> email.com
>>>> email
>>>>
>>>>
>>>> so when sorting on this field I get some strange results.  Do I need 
>>>> to create another field just for sorting?  Or are there other ways 
>>>> to do it?
>>>>
>>>> Thanks!
>>>> Michael
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:37:41 2008
Return-Path: <java-user-return-31854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92381 invoked from network); 8 Jan 2008 21:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:37:41 -0000
Received: (qmail 8111 invoked by uid 500); 8 Jan 2008 21:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8080 invoked by uid 500); 8 Jan 2008 21:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8069 invoked by uid 99); 8 Jan 2008 21:37:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:37:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:36:56 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4884884fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 13:37:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Ap8JK07wDfk5wJznZV7bKb4Ombu7mkj2PF+KFPmySgo=;
        b=lfKFhsDEQ/uQx19h3MN58VjA1fiLSpWZeiwRMOZXxL1gdHWtArF0WNXJ/+2kQJY8/AbV8CdbnyzgAevA+sgczcTu33YdWfjZSaOeszPyZ8g/RqyWZ++EQODXJR1SpO0QLFLUE1i8bscbGB6KMxH5DjXL8QM8KWUf1jY5XIa6uro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WgKVT5iZbChWtVklWGRw7YaG14KkBT4BSmYlN7cQihKmbssZheSUrfZvLHdJZpcNn+ocK+vZf+TWDYTApWzS/Z4JlopkqxVdzKqsiWtF90EZXsZ4TtwSDLUdomFeOcSnoctgTX4sYamrbxzN5/MJ5s4Xwfj7BUJ1Djg6h+aC2Ro=
Received: by 10.86.76.16 with SMTP id y16mr21685421fga.71.1199828220519;
        Tue, 08 Jan 2008 13:37:00 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 8 Jan 2008 13:37:00 -0800 (PST)
Message-ID: <e05f0fd10801081337w19c4b8b1t9211b8be38477ad0@mail.gmail.com>
Date: Tue, 8 Jan 2008 23:37:00 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting on tokenized fields
In-Reply-To: <98E643DC-2D01-457E-AF55-284C4186B0B0@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14453_10265653.1199828220502"
References: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com>
	 <8D8DB10D-832F-465B-B43B-F2B35CAA0622@mac.com>
	 <4783E76A.9050008@gmail.com>
	 <98E643DC-2D01-457E-AF55-284C4186B0B0@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14453_10265653.1199828220502
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Michael, I think you mean the exception thrown when you
search and sort with a field that was not yet indexed:

    RuntimeException: field "BBC" does not appear to be indexed

I think the current behavior is correct, otherwise an application
might (by a bug) attempt to sort by a wrong field, that not only
does not exist yet but will never exist. To prevent hidden bugs
cases like this it is important to throw an exception in this case.
Do you agree?

On Jan 8, 2008 11:21 PM, Michael Prichard <michael_prichard@mac.com> wrote:

> Meaning that it says "field is not indexed".  Where is
> sortMissingLastAttribute?
>
> thanks.
>
> On Jan 8, 2008, at 4:13 PM, Ryan McKinley wrote:
>
> > what do you mean by "fail"? -- there is the sortMissingLast attribute
> >
> >
> > Michael Prichard wrote:
> >> ok... i should read the manual more often.
> >> i went ahead and just added untokenized, unstored sort fields....
> >> question, if I put a field in to sort of but say I have not
> >> indexed any as of yet...will the Sort fail?  For example, say I
> >> have a BCC field and nothing has been indexed with that yet....I
> >> run a sort on BCC.....I think it fails now...anyway around that?
> >> On Jan 8, 2008, at 1:22 PM, Michael Prichard wrote:
> >>> Is it possible to sort on a tokenized field?  For example, I
> >>> break email address into pieces, i.e.
> >>>
> >>> michael.prichard@email.com
> >>>
> >>> becomes
> >>>
> >>> michael.prichard@email.com
> >>> michael.prichard
> >>> michael
> >>> prichard
> >>> email.com
> >>> email
> >>>
> >>>
> >>> so when sorting on this field I get some strange results.  Do I
> >>> need to create another field just for sorting?  Or are there
> >>> other ways to do it?
> >>>
> >>> Thanks!
> >>> Michael
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14453_10265653.1199828220502--

From java-user-return-31855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:42:33 2008
Return-Path: <java-user-return-31855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95189 invoked from network); 8 Jan 2008 21:42:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:42:32 -0000
Received: (qmail 25031 invoked by uid 500); 8 Jan 2008 21:42:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24816 invoked by uid 500); 8 Jan 2008 21:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24805 invoked by uid 99); 8 Jan 2008 21:42:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:42:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.148.16.82] (HELO smtpoutm.mac.com) (17.148.16.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:41:47 +0000
Received: from mac.com (asmtp007-s [10.150.69.70])
	by smtpoutm.mac.com (Xserve/smtpout019/MantshX 4.0) with ESMTP id m08Lfqo9012840
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 13:41:52 -0800 (PST)
Received: from [10.0.1.200] (va-71-53-213-206.dhcp.embarqhsd.net [71.53.213.206])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp007/MantshX 4.0) with ESMTP id m08LfITu025721
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 13:41:24 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <e05f0fd10801081337w19c4b8b1t9211b8be38477ad0@mail.gmail.com>
References: <C59BD508-0AAF-49D3-A24F-C96B60D32956@mac.com> <8D8DB10D-832F-465B-B43B-F2B35CAA0622@mac.com> <4783E76A.9050008@gmail.com> <98E643DC-2D01-457E-AF55-284C4186B0B0@mac.com> <e05f0fd10801081337w19c4b8b1t9211b8be38477ad0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <066D591C-3366-42B2-ABE1-155A0F30CD84@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Prichard <michael_prichard@mac.com>
Subject: Re: Sorting on tokenized fields
Date: Tue, 8 Jan 2008 16:41:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

yes, no worries.

i just check in advance what fields are available and build the Sort  
object accordingly.  Eventually BCC would be there...but not  
necessary so at first.

Anyway, got it to work!  Thanks for your help.

All the best,
Michael

On Jan 8, 2008, at 4:37 PM, Doron Cohen wrote:

> Hi Michael, I think you mean the exception thrown when you
> search and sort with a field that was not yet indexed:
>
>     RuntimeException: field "BBC" does not appear to be indexed
>
> I think the current behavior is correct, otherwise an application
> might (by a bug) attempt to sort by a wrong field, that not only
> does not exist yet but will never exist. To prevent hidden bugs
> cases like this it is important to throw an exception in this case.
> Do you agree?
>
> On Jan 8, 2008 11:21 PM, Michael Prichard  
> <michael_prichard@mac.com> wrote:
>
>> Meaning that it says "field is not indexed".  Where is
>> sortMissingLastAttribute?
>>
>> thanks.
>>
>> On Jan 8, 2008, at 4:13 PM, Ryan McKinley wrote:
>>
>>> what do you mean by "fail"? -- there is the sortMissingLast  
>>> attribute
>>>
>>>
>>> Michael Prichard wrote:
>>>> ok... i should read the manual more often.
>>>> i went ahead and just added untokenized, unstored sort fields....
>>>> question, if I put a field in to sort of but say I have not
>>>> indexed any as of yet...will the Sort fail?  For example, say I
>>>> have a BCC field and nothing has been indexed with that yet....I
>>>> run a sort on BCC.....I think it fails now...anyway around that?
>>>> On Jan 8, 2008, at 1:22 PM, Michael Prichard wrote:
>>>>> Is it possible to sort on a tokenized field?  For example, I
>>>>> break email address into pieces, i.e.
>>>>>
>>>>> michael.prichard@email.com
>>>>>
>>>>> becomes
>>>>>
>>>>> michael.prichard@email.com
>>>>> michael.prichard
>>>>> michael
>>>>> prichard
>>>>> email.com
>>>>> email
>>>>>
>>>>>
>>>>> so when sorting on this field I get some strange results.  Do I
>>>>> need to create another field just for sorting?  Or are there
>>>>> other ways to do it?
>>>>>
>>>>> Thanks!
>>>>> Michael
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> --
>>>>> -
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:49:25 2008
Return-Path: <java-user-return-31856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97921 invoked from network); 8 Jan 2008 21:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:49:25 -0000
Received: (qmail 36941 invoked by uid 500); 8 Jan 2008 21:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36913 invoked by uid 500); 8 Jan 2008 21:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36902 invoked by uid 99); 8 Jan 2008 21:49:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:49:08 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:48:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JCMJU-0002TJ-Od
	for java-user@lucene.apache.org; Tue, 08 Jan 2008 13:48:48 -0800
Message-ID: <14699672.post@talk.nabble.com>
Date: Tue, 8 Jan 2008 13:48:48 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic Named Entity Indexing
In-Reply-To: <e05f0fd10801081251h292b4606nbf9d9b80cd4dd7c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
References: <14291880.post@talk.nabble.com> <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net> <14691223.post@talk.nabble.com> <e05f0fd10801081251h292b4606nbf9d9b80cd4dd7c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Wrapping the whitespaceanalyzer with the ngramfilter it creates unigrams and
the ngrams that i indicate, while maintining the whitespaces. :)
The reason i'm doing this is because I only wish to index names with more
than one token.
-- 
View this message in context: http://www.nabble.com/Basic-Named-Entity-Indexing-tp14291880p14699672.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 21:49:56 2008
Return-Path: <java-user-return-31857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98032 invoked from network); 8 Jan 2008 21:49:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 21:49:56 -0000
Received: (qmail 38618 invoked by uid 500); 8 Jan 2008 21:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38587 invoked by uid 500); 8 Jan 2008 21:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38576 invoked by uid 99); 8 Jan 2008 21:49:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 13:49:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 21:49:15 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4888632fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 13:49:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=dlhZKY1nrXzZ+1XBnX6y5Giy8diVDpqZXWXIu/G7dZU=;
        b=PRea9H6ZekD03mxIbi175/pEdGJbHiZ9UVgHMVacNf5TUKkQf30UvlBgrlVFtTnPbJz0nShlZNjoqgAyuJlE5O8xR3oOvlnqKjbi1SusfdKKvx9od73GxLVk3A3eNSVoTMHGpQPccHWEj5gS4WEJCfc+tq7ehW6TIl2vJO0EwLg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YJyFHcDkSZIKaVcvBohq71Ndc1szo4DDF+ka7lqxl3/A0m/wORGtylhPUByPiz4UfkciwwiRNCetVg4WZTcfM6AzxovS+VAxkIbWSxfMkmtkKkOdXTCn34mfkRw6veBMUJiYDufRZlIMV8FIU/flhz4kMB1rkcsdvo4+VQy3a2I=
Received: by 10.86.97.7 with SMTP id u7mr21674368fgb.65.1199828958270;
        Tue, 08 Jan 2008 13:49:18 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 8 Jan 2008 13:49:18 -0800 (PST)
Message-ID: <e05f0fd10801081349i2cf1c1e3kc25795e3a38ae99c@mail.gmail.com>
Date: Tue, 8 Jan 2008 23:49:18 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query processing with Lucene
In-Reply-To: <4783EA08.1040009@googlemail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14535_26076371.1199828958258"
References: <4780C5EE.4070607@googlemail.com>
	 <e05f0fd10801081129y387f7f49w404fafb96df1f6de@mail.gmail.com>
	 <4783EA08.1040009@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14535_26076371.1199828958258
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is done by Lucene's scorers. You should however start
in http://lucene.apache.org/java/docs/scoring.html, - scorers
are described in the "Algorithm" section. "Offsets" are used
by Phrase Scorers and by Span Scorer.

Doron

On Jan 8, 2008 11:24 PM, Marjan Celikik < celikik@gmail.com> wrote:

> Doron Cohen wrote:
> > Hi Marjan,
> >
> > Lucene process the query in what can be called
> > one-doc-at-a-time.
> >
> > For the example query - x y - (not the phrase query "x y") - all
> > documents containing either x or y are considered a match.
> >
> > When processing the query - x y - the posting lists of these two
> > index terms are traversed, and for each document met on the way,
> > a score is computed (taking into account both terms), and "collected".
> > At the end of the traversal, usually best N collected docs are returned
> as
> > search result. So, this is an exhaustive computation creating a union of
> > the two posting. For the query - +x +y - in intersection rather than
> > union is required, and the way Lucene does it is again to traverse
> > the two posting lists, just that only documents seen in both lists
> > are scored and collected. This allows to optimize the search,
> > skipping large chunks of the posting lists, especially when
> > one term is rarer than the other.
> >
> Thank you for your answer.
>
> I am having trouble finding the function which traverses the documents
> such that they get scored. Can you
> please tell me where the posting lists (for a +x +y query) get
> intersected after they get read (by next() I guess)
> from the index?
>
> In particular, I am interested in how does Lucene get the new positions
> (offsets) of the documents seen
> in both posting lists, i.e. positions (in a document) for the query word
> x, and positions for the query word y.
>
> Thank you in advance!
>
> Marjan.
>

------=_Part_14535_26076371.1199828958258--

From java-user-return-31858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 22:14:43 2008
Return-Path: <java-user-return-31858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10230 invoked from network); 8 Jan 2008 22:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 22:14:42 -0000
Received: (qmail 84141 invoked by uid 500); 8 Jan 2008 22:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84115 invoked by uid 500); 8 Jan 2008 22:14:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84099 invoked by uid 99); 8 Jan 2008 22:14:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 14:14:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 22:13:57 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4896423fga.27
        for <java-user@lucene.apache.org>; Tue, 08 Jan 2008 14:14:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=3Z7L6oO5uD0y/hfAHRIAsSn33cx+xueK67LDRz4EACA=;
        b=bDz5UFfWfbMJRIX2kfqZbxP09rs4H8vNv2JP+9fwsTps5vnL9cjKOUHKGbrJ4dWRv+M0sT3baBGYi2DfJKPN7bwSv3W0v+0J7Einn6lb+1mJWXGoS1DSYC2OBsmX3SK/eM+HtBEjd9mnK9h9Qfqp8P5zUbyc2u8j/YsmkRQfbJo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uQ4ncWoXiUNbsjQuevnNisdW/zPGElplyww19x39Nvk6rEjt3gTfpM/56Bc58RfJCaIqhdVDOLzEHEkkbYOJkYslpu0SZRf6TukFlrTMZlmLMSTrYHn/LVj5KshgY4yFcP0wyY4ygVyYfFAS/MxI7FWSvu5MSzqRmvXLv9bZbFo=
Received: by 10.86.84.5 with SMTP id h5mr21705000fgb.75.1199830441539;
        Tue, 08 Jan 2008 14:14:01 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 8 Jan 2008 14:14:01 -0800 (PST)
Message-ID: <e05f0fd10801081414i67e3a0cfr14a9b7e6bf613c2c@mail.gmail.com>
Date: Wed, 9 Jan 2008 00:14:01 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic Named Entity Indexing
In-Reply-To: <14699672.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14660_29934142.1199830441530"
References: <14291880.post@talk.nabble.com>
	 <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net>
	 <14691223.post@talk.nabble.com>
	 <e05f0fd10801081251h292b4606nbf9d9b80cd4dd7c4@mail.gmail.com>
	 <14699672.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14660_29934142.1199830441530
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Jan 8, 2008 11:48 PM, chris.b <omelhornomedomundo@gmail.com> wrote:

>
> Wrapping the whitespaceanalyzer with the ngramfilter it creates unigrams
> and
> the ngrams that i indicate, while maintining the whitespaces. :)
> The reason i'm doing this is because I only wish to index names with more
> than one token.
>


Then I am not sure I understand you.
Take this input text:

     text by John Bear, old.

A WhiteSpaceAnalyzer would create these tokens:

   text
   by
   John
   Bear,
   old.

An NgramFilter(2,2) wrapping it would create these tokens:

   te
   ex
   xt
   by
   Jo
   ... etc.

You may use other limits but still no token would have a
white space in it.

------=_Part_14660_29934142.1199830441530--

From java-user-return-31859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 22:24:53 2008
Return-Path: <java-user-return-31859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14615 invoked from network); 8 Jan 2008 22:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 22:24:49 -0000
Received: (qmail 99922 invoked by uid 500); 8 Jan 2008 22:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98930 invoked by uid 500); 8 Jan 2008 22:24:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98919 invoked by uid 99); 8 Jan 2008 22:24:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 14:24:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 22:24:07 +0000
Received: from [192.168.0.252] (static-62-233-204-250.devs.futuro.pl [62.233.204.250])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m08MOQk13430
	for <java-user@lucene.apache.org>; Tue, 8 Jan 2008 16:24:27 -0600
Message-ID: <4783F801.7020606@getopt.org>
Date: Tue, 08 Jan 2008 23:24:01 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>	 <4783D882.4080009@apache.org> <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com> <4783DBE6.7040205@getopt.org> <4783DDA9.7030009@gmail.com>
In-Reply-To: <4783DDA9.7030009@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ryan McKinley wrote:
> Andrzej Bialecki wrote:
>> Lukas Vlcek wrote:
>>> So staring will be accommodated only during indexing phase. Does it 
>>> mean it
>>> will be pretty static value not a dynamically changing variable... 
>>> correct?
>>> In other words if I add my starts to some document it won't affect the
>>> scoring immediately but after indexing cycle. Correct?
>>
>> (I'm not involved in Wikia development). There are some ways to go 
>> about it even in the pure Lucene-land, so that the updates are fast 
>> without reindexing the main content. Hint: ParallelReader.
>>
> 
> in solr (1.3-dev) you can have an external value source with a function 
> query...

True, although function query tends to bring more overhead ...

While we're on the subject of complex scoring - I read an interesting 
paper (I don't have a link now), which discussed a so called bucketed 
scoring. The idea is that if your basic scoring is good enough to ensure 
that top-N results are highly relevant, then you can split these results 
into buckets of k documents (let's say 10 ;) ), and within each bucket 
apply arbitrary re-ranking function, which is then very inexpensive to 
perform because of the limited number of documents.

Example: you have a large corpus of web pages, and you want home pages 
to appear first, even if they score somewhat lower - and it doesn't pay 
off to modify the base scoring, because of overfitting, i.e. the scoring 
would be good for home pages but poor for other relevant documents.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 08 22:54:10 2008
Return-Path: <java-user-return-31860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26966 invoked from network); 8 Jan 2008 22:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2008 22:54:10 -0000
Received: (qmail 53056 invoked by uid 500); 8 Jan 2008 22:53:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53027 invoked by uid 500); 8 Jan 2008 22:53:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53016 invoked by uid 99); 8 Jan 2008 22:53:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 14:53:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [63.133.162.107] (HELO mp-s01.dragonflymc.com) (63.133.162.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 22:53:27 +0000
Received: from [192.168.1.201] (footoo.visvo.com [192.168.1.201])
	by mp-s01.dragonflymc.com (Postfix) with ESMTP id 0A55BF8111
	for <java-user@lucene.apache.org>; Tue,  8 Jan 2008 15:37:01 -0600 (CST)
Message-ID: <4783FEEF.1090802@apache.org>
Date: Tue, 08 Jan 2008 16:53:35 -0600
From: Dennis Kubes <kubes@apache.org>
User-Agent: Thunderbird 2.0.0.6 (X11/20071022)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Wikia search goes live today
References: <684818.99653.qm@web50309.mail.re2.yahoo.com>	 <52c3ddca0801072349s33d76d93rf6e03e37f34e95f1@mail.gmail.com>	 <7E1BD60F-5A9E-41BB-9DB2-0B3D52850F7D@gmail.com>	 <4783D882.4080009@apache.org>	 <52c3ddca0801081215nb3053abj9a93e50627f753ee@mail.gmail.com>	 <4783DBE6.7040205@getopt.org>	 <52c3ddca0801081236l5d18327k74ffd845d424353d@mail.gmail.com> <52c3ddca0801081238m5d4a175ekb68e75764ce0da4a@mail.gmail.com>
In-Reply-To: <52c3ddca0801081238m5d4a175ekb68e75764ce0da4a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry about not responding to this before now, been a little busy :).

For those of you who don't know me, I am a committer on the Nutch 
project.  I have been working with Wikia since early July and more 
actively since the beginning of November.  Before Wikia I helped start 
another search engine based on Nutch called Visvo.com.

For the record, yes Search Wikia is using and will be supporting 
Nutch/Hadoop/Lucene/Solr/HBase. It is the intention of Search Wikia to 
help develop these projects and their communities.  We have no intention 
of keeping the changes we make "proprietary". Everything that Search 
Wikia develops (barring an user or personal data) will be considered 
open source and freely available.  Any improvements made to the apache 
projects will be immediately donated back to the community through the 
respective project.

Making search open and transparent is not just limited to source code. 
It is our intention to make the Search Wikia data freely open and 
available as well.  This means that people will be able to download the 
crawl data, link data, content shards, and completed indexes.  Also the 
social networking functionality, named foowi, will become its own open 
source project (probably with an apache license), and will be available 
to download, use, and improve.

And Search Wikia is not alone in this.  Visvo.com in coordination with 
Wikia will be releasing all of its data and source code improvements to 
the community under an OSI approved license, including a python 
framework for managing hadoop configurations on distributed machines, 
automating the fetching and indexing process, and for managing search 
shards.

In terms of the Nutch logo.  There are two standard nutch installations 
and index farms at the following urls.  One in an index hosted at the 
ISC and the other is Visvo's open index.  The ISC index has 
approximately 35M pages while Visvo's index has a little over 50M pages.

http://search.isc.swlabs.org
http://open-index.visvo.com

The main Search Wikia site is hosted in a secure underground hosting 
facility in a bunker in Iowa (http://usshc.com/) and calls to these 
indexes.  So when showing cached pages and explain plans those requests 
go to their respective indexes.

Both indexes are available for search by either browser based or web 2.0 
based clients. We are currently using NUTCH-594 to serve results from 
these indexes in both xml and JSON formats.  An example request 
searching for java would be:

http://search.isc.swlabs.org/nutchsearch?query=java&hitsPerSite=1&lang=en&hitsPerPage=10&type=json
http://open-index.visvo.com/nutchsearch?query=java&hitsPerSite=1&lang=en&hitsPerPage=10&type=json

So we are busy working on getting the data avaiable for download. 
Hopefully we should have a site setup within the next day or so.  If 
anybody has any questions or would like to get some specific data feel 
free to send me an email.

Dennis Kubes

Lukas Vlcek wrote:
> I should note that this technique is probably not easily applicable to
> current Lucene scoring mechanism without additional development.
> 
> On 1/8/08, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
>> After checking the Lucene API of ParallelReader it seems that the star
>> score could be stored in different index which shares the same identifier
>> for the documents. Such index could be small (partitioned to many small
>> indices?) so the updates can be fast. Is that what you meant Andrzej? ;-)
>>
>> Anyway, I remember different technique which I once mentioned in Lucene
>> mail list taking inspiration from book called Programming Collective
>> Intelligence <http://www.oreilly.com/catalog/9780596529321/> . The idea is
>> not to store score (may be I should call it user preference) into index but
>> into neural net. One useful side effect is that this technique could score
>> reasonably even document without any stars (meaning "similar" document to
>> highly started documents could score better even if they haven't been stared
>> by any user yet).
>>
>> Regards,
>> Lukas
>>
>> On 1/8/08, Andrzej Bialecki <ab@getopt.org> wrote:
>>> Lukas Vlcek wrote:
>>>> So staring will be accommodated only during indexing phase. Does it
>>> mean it
>>>> will be pretty static value not a dynamically changing variable...
>>> correct?
>>>> In other words if I add my starts to some document it won't affect the
>>>> scoring immediately but after indexing cycle. Correct?
>>> (I'm not involved in Wikia development). There are some ways to go about
>>> it even in the pure Lucene-land, so that the updates are fast without
>>> reindexing the main content. Hint: ParallelReader.
>>>
>>>
>>> --
>>> Best regards,
>>> Andrzej Bialecki     <><
>>>   ___. ___ ___ ___ _ _   __________________________________
>>> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
>>> ___|||__||  \|  ||  |  Embedded Unix, System Integration
>>> http://www.sigram.com  Contact: info at sigram dot com
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> --
>> http://blog.lukas-vlcek.com/
>>
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 07:07:35 2008
Return-Path: <java-user-return-31861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82916 invoked from network); 9 Jan 2008 07:07:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 07:07:34 -0000
Received: (qmail 63580 invoked by uid 500); 9 Jan 2008 07:07:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63543 invoked by uid 500); 9 Jan 2008 07:07:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63532 invoked by uid 99); 9 Jan 2008 07:07:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jan 2008 23:07:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 Jan 2008 07:07:03 +0000
Received: (qmail 97205 invoked by uid 60001); 9 Jan 2008 07:06:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=vslyVeU1WI/LpthvXiROmoxpuS2qfWJ0dz6ILR39ebe6RTSh5AP7qTPib+og8tmKxF4SrXsrOTEq0p9RdSX7No5S0pFKOIszbjcFuJVdhspnH60/esRRCbHm5VDblKVNiIENL3E7uis+8v4O7Uo/JB3r2Rw7X1/fG9ve+m5ha0U=;
X-YMail-OSG: icKSffQVM1n_EgVeYSmKyJNqkXZ9YddQcOHXTALwQN.o7.nE9oIRx4nIxGu401HbEMQr1fCZ5zoqJ4zg92Zom36H5T.gu12XEfvkL_J7kjDgqIXly4SEOn34gJ.aLqBPKuckxKtTHdDShM8-
Received: from [72.231.9.236] by web50304.mail.re2.yahoo.com via HTTP; Tue, 08 Jan 2008 23:06:54 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Tue, 8 Jan 2008 23:06:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Bucketing (was Re: Wikia search goes live today)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <823920.95993.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds useful.  I suppose this means one would have custom function for within-bucket-reordering? e.g. for a web search you might reorder based on the URL length if you think shorter URLs are an indicator of higher quality.  It also sounds like something that can easily sit outside Lucene....or do you have something else in mind, such as a mechanism to pass a reordering function in Lucene?

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Andrzej Bialecki <ab@getopt.org>
To: java-user@lucene.apache.org
Sent: Tuesday, January 8, 2008 5:24:01 PM
Subject: Re: Wikia search goes live today

Ryan McKinley wrote:
> Andrzej Bialecki wrote:
>> Lukas Vlcek wrote:
>>> So staring will be accommodated only during indexing phase. Does it
 
>>> mean it
>>> will be pretty static value not a dynamically changing variable... 
>>> correct?
>>> In other words if I add my starts to some document it won't affect
 the
>>> scoring immediately but after indexing cycle. Correct?
>>
>> (I'm not involved in Wikia development). There are some ways to go 
>> about it even in the pure Lucene-land, so that the updates are fast 
>> without reindexing the main content. Hint: ParallelReader.
>>
> 
> in solr (1.3-dev) you can have an external value source with a
 function 
> query...

True, although function query tends to bring more overhead ...

While we're on the subject of complex scoring - I read an interesting 
paper (I don't have a link now), which discussed a so called bucketed 
scoring. The idea is that if your basic scoring is good enough to
 ensure 
that top-N results are highly relevant, then you can split these
 results 
into buckets of k documents (let's say 10 ;) ), and within each bucket 
apply arbitrary re-ranking function, which is then very inexpensive to 
perform because of the limited number of documents.

Example: you have a large corpus of web pages, and you want home pages 
to appear first, even if they score somewhat lower - and it doesn't pay
 
off to modify the base scoring, because of overfitting, i.e. the
 scoring 
would be good for home pages but poor for other relevant documents.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 10:31:07 2008
Return-Path: <java-user-return-31862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72026 invoked from network); 9 Jan 2008 10:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 10:31:06 -0000
Received: (qmail 37976 invoked by uid 500); 9 Jan 2008 10:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37953 invoked by uid 500); 9 Jan 2008 10:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37942 invoked by uid 99); 9 Jan 2008 10:30:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 02:30:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 10:30:24 +0000
Received: from [192.168.0.252] (static-62-233-204-250.devs.futuro.pl [62.233.204.250])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m09AUVw31594
	for <java-user@lucene.apache.org>; Wed, 9 Jan 2008 04:30:31 -0600
Message-ID: <4784A23A.6070804@getopt.org>
Date: Wed, 09 Jan 2008 11:30:18 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Bucketing (was Re: Wikia search goes live today)
References: <823920.95993.qm@web50304.mail.re2.yahoo.com>
In-Reply-To: <823920.95993.qm@web50304.mail.re2.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Sounds useful.  I suppose this means one would have custom function
> for within-bucket-reordering? e.g. for a web search you might reorder
> based on the URL length if you think shorter URLs are an indicator of


Yes, that's precisely the idea. It combines the advantages of simple 
(hence fast) scoring inside the IR system, with a complex (hence slow) 
reordering of a small sample of results, performed outside the IR system 
prior to delivering the results.


> higher quality.  It also sounds like something that can easily sit
> outside Lucene....or do you have something else in mind, such as a
> mechanism to pass a reordering function in Lucene?

It should definitely be something outside Lucene - it's meant for cases 
that require more complex ranking (or faster) than those available 
through function query. I only mentioned this here because it is simple 
to implement, yet produces useful results difficult to obtain through 
the usual means (similarity, boosting, even function query).


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 13:29:06 2008
Return-Path: <java-user-return-31863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37280 invoked from network); 9 Jan 2008 13:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 13:29:06 -0000
Received: (qmail 69795 invoked by uid 500); 9 Jan 2008 13:28:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69760 invoked by uid 500); 9 Jan 2008 13:28:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69748 invoked by uid 99); 9 Jan 2008 13:28:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 05:28:49 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 13:28:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id A1456B88AC
	for <java-user@lucene.apache.org>; Wed,  9 Jan 2008 05:28:24 -0800 (PST)
Message-Id: <C832519F-C72D-401C-B52C-E69999FFF991@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4784A23A.6070804@getopt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Bucketing (was Re: Wikia search goes live today)
Date: Wed, 9 Jan 2008 08:28:20 -0500
References: <823920.95993.qm@web50304.mail.re2.yahoo.com> <4784A23A.6070804@getopt.org>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Would be a nice contrib module, though...

-Grant

On Jan 9, 2008, at 5:30 AM, Andrzej Bialecki wrote:

> Otis Gospodnetic wrote:
>> Sounds useful.  I suppose this means one would have custom function
>> for within-bucket-reordering? e.g. for a web search you might reorder
>> based on the URL length if you think shorter URLs are an indicator of
>
>
> Yes, that's precisely the idea. It combines the advantages of simple  
> (hence fast) scoring inside the IR system, with a complex (hence  
> slow) reordering of a small sample of results, performed outside the  
> IR system prior to delivering the results.
>
>
>> higher quality.  It also sounds like something that can easily sit
>> outside Lucene....or do you have something else in mind, such as a
>> mechanism to pass a reordering function in Lucene?
>
> It should definitely be something outside Lucene - it's meant for  
> cases that require more complex ranking (or faster) than those  
> available through function query. I only mentioned this here because  
> it is simple to implement, yet produces useful results difficult to  
> obtain through the usual means (similarity, boosting, even function  
> query).
>
>
> -- 
> Best regards,
> Andrzej Bialecki     <><
> ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 13:51:23 2008
Return-Path: <java-user-return-31864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44922 invoked from network); 9 Jan 2008 13:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 13:51:23 -0000
Received: (qmail 5543 invoked by uid 500); 9 Jan 2008 13:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5507 invoked by uid 500); 9 Jan 2008 13:51:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5496 invoked by uid 99); 9 Jan 2008 13:51:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 05:51:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 13:50:38 +0000
Received: by py-out-1112.google.com with SMTP id a73so322071pye.9
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 05:50:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=6PGnz1XwUmn2DV47jGlk4/rMzQpqJfxPolnee01g+Vc=;
        b=x18T1KUbS8qvENNiCs7ODX5JOkoUW4vSrTuMtFL2bCgAlnA0dbYNY5sChgZRh51GRRCGdm+cjk1ZgWobZ7KBklYhJoB2j/kjsnJ81BtNAIiHKHafm3Hwi8Roh2yxt9sLs+4JGXIMhAFt2gNTklA0p08sWgu1W4slzK/e8ei2iwg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=T3nIX6Vlzuoqr7JVq9ga5/c2G+5hwPG392dILmWa1R6uM1DhS0OGDMrTv1FIfohsn/8lal9HbJGnOqAns4B1gEjZohd2Tjywz06y+ZGTHYjCVjG6ICy2F0t5J7eGeb/ulyxhsdo8utMtIlQ0DsWi119AMV0HJIAQfYwEl+AObeo=
Received: by 10.141.90.17 with SMTP id s17mr403696rvl.241.1199886641955;
        Wed, 09 Jan 2008 05:50:41 -0800 (PST)
Received: by 10.141.151.4 with HTTP; Wed, 9 Jan 2008 05:50:41 -0800 (PST)
Message-ID: <bf1404350801090550u652bc691x4511e5201500e12d@mail.gmail.com>
Date: Wed, 9 Jan 2008 08:50:41 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Why is lucene so slow indexing in nfs file system ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34095_19244836.1199886641954"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34095_19244836.1199886641954
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:
I have seen the post in
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html and
I am implementing a similar application in a distributed enviroment, a
cluster of nodes only 5 nodes. The operating system I use is Linux(Centos)
so I am using nfs file system too to access the home directory where the
documents to be indexed reside and I would like to know how much time an
application spends to index a big amount of documents like 10 Gb ?
I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb in every
nodes, LAN: 1Gbits/s.

The problem I have is that my application spends a lot of time to index all
the documents, the delay to index 10 gb of pdf documents is about 2 days (to
convert pdf to text I am using pdfbox) that is of course a lot of time,
others applications based in lucene, for instance ibm omnifind only takes 5
hours to index the same amount of pdfs documents. I would like to find out
why my application has this big delay to index, any help is welcome.
Dou you know others distributed architecture application that uses lucene to
index big amounts of documents ? How long time it takes to index ?
I hope yo can help me
Greetings

------=_Part_34095_19244836.1199886641954--

From java-user-return-31865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 14:03:15 2008
Return-Path: <java-user-return-31865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48602 invoked from network); 9 Jan 2008 14:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 14:03:15 -0000
Received: (qmail 19269 invoked by uid 500); 9 Jan 2008 14:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19240 invoked by uid 500); 9 Jan 2008 14:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19229 invoked by uid 99); 9 Jan 2008 14:02:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 06:02:58 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 14:02:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JCbVu-0004hu-8z
	for java-user@lucene.apache.org; Wed, 09 Jan 2008 06:02:38 -0800
Message-ID: <14712313.post@talk.nabble.com>
Date: Wed, 9 Jan 2008 06:02:38 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic Named Entity Indexing
In-Reply-To: <e05f0fd10801081414i67e3a0cfr14a9b7e6bf613c2c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
References: <14291880.post@talk.nabble.com> <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net> <14691223.post@talk.nabble.com> <e05f0fd10801081251h292b4606nbf9d9b80cd4dd7c4@mail.gmail.com> <14699672.post@talk.nabble.com> <e05f0fd10801081414i67e3a0cfr14a9b7e6bf613c2c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


taking your example (text by John Bear, old.), the NGramAnalyzerWrapper
creates the following tokens:
text
text by
by
by John
John
John Bear,
Bear,
Bear, old.

I have managed to get rid of the error, but now it just doesn't add anything
to the index :s
I'm attaching the NGramAnalyzerWrapper and NGramFilter which I am referring
to, as well as my own NamedEntityAnalyzer/TokenFilter, which may help you
understand better.
http://www.nabble.com/file/p14712313/rem.rar rem.rar 

-- 
View this message in context: http://www.nabble.com/Basic-Named-Entity-Indexing-tp14291880p14712313.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 14:26:45 2008
Return-Path: <java-user-return-31866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55774 invoked from network); 9 Jan 2008 14:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 14:26:45 -0000
Received: (qmail 55164 invoked by uid 500); 9 Jan 2008 14:26:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55131 invoked by uid 500); 9 Jan 2008 14:26:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55120 invoked by uid 99); 9 Jan 2008 14:26:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 06:26:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 14:26:01 +0000
Received: by fk-out-0910.google.com with SMTP id z23so129172fkz.5
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 06:26:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=l2CFjw2cdxbYGH3xj36RaCPvl+Amp3/aTS8L7QhguTI=;
        b=rZdnh/ZxLkUNylWQXeTEO47xs0nBK/s6ZqeGejUQUQwif2GiAfJx5T0Ifv5GB4TIMA+qvn7D0AkOnVT0K8BSudR6KVgPWyp//L3/punPsiHWWrKnPnSvQRVC3QOemRe4qi15QyEtUiyGiX2Uli3cip/FjcVpLIVBKupd0rzjbXQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=xGEA2lYGIw6NjAFW/e5NPTxtgHJYkn+BRWbmwfRT65YLRQmk2kbIGX5TDtTZIR8frgRRMEOSeGKFfAyld8ZmPk5a6woSdlY5qxqbe7kKQjG+f2/JJQi9rEiBBh3DSXT6gJ4IKlZTPj1KECv5vbHYFtElJrCFQATTJsLHBqUCEDY=
Received: by 10.82.177.3 with SMTP id z3mr1170463bue.35.1199888764883;
        Wed, 09 Jan 2008 06:26:04 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 9 Jan 2008 06:26:04 -0800 (PST)
Message-ID: <359a92830801090626k7c4e884ft630ae63c8a30054d@mail.gmail.com>
Date: Wed, 9 Jan 2008 09:26:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
In-Reply-To: <bf1404350801090550u652bc691x4511e5201500e12d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47365_969847.1199888764863"
References: <bf1404350801090550u652bc691x4511e5201500e12d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47365_969847.1199888764863
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<<< would like to find out why my application has this big
delay to index>>>

Well, then you have to measure <G>. Tthe first thing I'd do
is pinpoint where the time was being spent. Until you have
that answered, you simply cannot take any meaningful action.

1> don't do any of the indexing. No new Documents, don't
add any fields, etc. This will just time the PDF parsing.
(I'd run this for set number of documents rather than the
whole 10G). This'll tell you whether the issue is indexing or
PDFBox.

2> Perhaps try the above with local files rather than files
on the nfs mount.

3> Put back some of the indexing and measure each
step. For instance, create the new documents but don't
add them to the index.

4>Then go ahead and add them to the index.

The numbers you get for these measurements will tell
you a lot. At that point, perhaps folks will have more useful
suggestions.

The reason I'm being so unhelpful is that without lots more
detail, there's really nothing we can help with since there
are so many variables that it's just impossible to say
which one is the problem. For instance, is it a single
10G document and you're swapping like crazy? Are you
CPU bound or IO bound? Have you tried profiling your
process at all to find the choke points?

Best
Erick


On Jan 9, 2008 8:50 AM, Ariel <isaacrc82@gmail.com> wrote:

> Hi:
> I have seen the post in
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.htmland
> I am implementing a similar application in a distributed enviroment, a
> cluster of nodes only 5 nodes. The operating system I use is Linux(Centos)
> so I am using nfs file system too to access the home directory where the
> documents to be indexed reside and I would like to know how much time an
> application spends to index a big amount of documents like 10 Gb ?
> I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb in
> every
> nodes, LAN: 1Gbits/s.
>
> The problem I have is that my application spends a lot of time to index
> all
> the documents, the delay to index 10 gb of pdf documents is about 2 days
> (to
> convert pdf to text I am using pdfbox) that is of course a lot of time,
> others applications based in lucene, for instance ibm omnifind only takes
> 5
> hours to index the same amount of pdfs documents. I would like to find out
> why my application has this big delay to index, any help is welcome.
> Dou you know others distributed architecture application that uses lucene
> to
> index big amounts of documents ? How long time it takes to index ?
> I hope yo can help me
> Greetings
>

------=_Part_47365_969847.1199888764863--

From java-user-return-31867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 14:53:41 2008
Return-Path: <java-user-return-31867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68252 invoked from network); 9 Jan 2008 14:53:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 14:53:41 -0000
Received: (qmail 89757 invoked by uid 500); 9 Jan 2008 14:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89725 invoked by uid 500); 9 Jan 2008 14:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89438 invoked by uid 99); 9 Jan 2008 14:53:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 06:53:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 14:52:57 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m09Eqn97013038
	for <java-user@lucene.apache.org>; Wed, 9 Jan 2008 15:52:50 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Query processing with Lucene
Date: Wed, 9 Jan 2008 15:49:16 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <4780C5EE.4070607@googlemail.com> <4783EA08.1040009@googlemail.com> <e05f0fd10801081349i2cf1c1e3kc25795e3a38ae99c@mail.gmail.com>
In-Reply-To: <e05f0fd10801081349i2cf1c1e3kc25795e3a38ae99c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801091549.16192.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 08 January 2008 22:49:18 Doron Cohen wrote:
> This is done by Lucene's scorers. You should however start
> in http://lucene.apache.org/java/docs/scoring.html, - scorers
> are described in the "Algorithm" section. "Offsets" are used
> by Phrase Scorers and by Span Scorer.

That is for the case that offsets were meant to be positions
within a document.

It is also possible that offsets were meant in the sense of using
skipTo(doc) instead of next() on a Scorer. This is done during
query search when at least one term is required.

Regards,
Paul Elschot


> 
> Doron
> 
> On Jan 8, 2008 11:24 PM, Marjan Celikik < celikik@gmail.com> wrote:
> 
> > Doron Cohen wrote:
> > > Hi Marjan,
> > >
> > > Lucene process the query in what can be called
> > > one-doc-at-a-time.
> > >
> > > For the example query - x y - (not the phrase query "x y") - all
> > > documents containing either x or y are considered a match.
> > >
> > > When processing the query - x y - the posting lists of these two
> > > index terms are traversed, and for each document met on the way,
> > > a score is computed (taking into account both terms), and "collected".
> > > At the end of the traversal, usually best N collected docs are returned
> > as
> > > search result. So, this is an exhaustive computation creating a union of
> > > the two posting. For the query - +x +y - in intersection rather than
> > > union is required, and the way Lucene does it is again to traverse
> > > the two posting lists, just that only documents seen in both lists
> > > are scored and collected. This allows to optimize the search,
> > > skipping large chunks of the posting lists, especially when
> > > one term is rarer than the other.
> > >
> > Thank you for your answer.
> >
> > I am having trouble finding the function which traverses the documents
> > such that they get scored. Can you
> > please tell me where the posting lists (for a +x +y query) get
> > intersected after they get read (by next() I guess)
> > from the index?
> >
> > In particular, I am interested in how does Lucene get the new positions
> > (offsets) of the documents seen
> > in both posting lists, i.e. positions (in a document) for the query word
> > x, and positions for the query word y.
> >
> > Thank you in advance!
> >
> > Marjan.
> >
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 15:50:55 2008
Return-Path: <java-user-return-31868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63594 invoked from network); 9 Jan 2008 15:50:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 15:50:55 -0000
Received: (qmail 86866 invoked by uid 500); 9 Jan 2008 15:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86835 invoked by uid 500); 9 Jan 2008 15:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86824 invoked by uid 99); 9 Jan 2008 15:50:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 07:50:37 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 15:50:26 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Why is lucene so slow indexing in nfs file system ?
Date: Wed, 9 Jan 2008 10:49:40 -0500
Message-ID: <9294E20AED46934EA459020706463F94664531@SUEXCL-02.ad.syr.edu>
In-Reply-To: <bf1404350801090550u652bc691x4511e5201500e12d@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Why is lucene so slow indexing in nfs file system ?
Thread-Index: AchSxrl72XGRhtcUSImJDJsKWTiuaQAEB5DA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ariel,

On 01/09/2008 at 8:50 AM, Ariel wrote:
> Dou you know others distributed architecture application that
> uses lucene to index big amounts of documents ?

Apache Solr is an open source enterprise search server based on the =
Lucene Java search library, with XML/HTTP and JSON APIs, hit =
highlighting, faceted search, caching, replication, and a web =
administration interface. It runs in a Java servlet container such as =
Tomcat.

http://lucene.apache.org/solr/

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 16:35:24 2008
Return-Path: <java-user-return-31869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81047 invoked from network); 9 Jan 2008 16:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 16:35:24 -0000
Received: (qmail 87811 invoked by uid 500); 9 Jan 2008 16:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87787 invoked by uid 500); 9 Jan 2008 16:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87776 invoked by uid 99); 9 Jan 2008 16:35:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 08:35:07 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 16:34:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JCdt9-0001y5-A2
	for java-user@lucene.apache.org; Wed, 09 Jan 2008 08:34:47 -0800
Message-ID: <14715727.post@talk.nabble.com>
Date: Wed, 9 Jan 2008 08:34:47 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Basic Named Entity Indexing
In-Reply-To: <14712313.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
References: <14291880.post@talk.nabble.com> <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net> <14691223.post@talk.nabble.com> <e05f0fd10801081251h292b4606nbf9d9b80cd4dd7c4@mail.gmail.com> <14699672.post@talk.nabble.com> <e05f0fd10801081414i67e3a0cfr14a9b7e6bf613c2c@mail.gmail.com> <14712313.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


solved it... i was using token.toString() instead of token.termText();
thanks for the help :)
-- 
View this message in context: http://www.nabble.com/Basic-Named-Entity-Indexing-tp14291880p14715727.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 16:55:00 2008
Return-Path: <java-user-return-31870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90067 invoked from network); 9 Jan 2008 16:55:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 16:55:00 -0000
Received: (qmail 30933 invoked by uid 500); 9 Jan 2008 16:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30898 invoked by uid 500); 9 Jan 2008 16:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30887 invoked by uid 99); 9 Jan 2008 16:54:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 08:54:42 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 16:54:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id AF80611E53
	for <java-user@lucene.apache.org>; Wed,  9 Jan 2008 08:54:20 -0800 (PST)
Message-Id: <28DC76BD-ABAB-485E-9EFB-0E65DA922E7C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <9294E20AED46934EA459020706463F94664531@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Why is lucene so slow indexing in nfs file system ?
Date: Wed, 9 Jan 2008 11:54:14 -0500
References: <9294E20AED46934EA459020706463F94664531@SUEXCL-02.ad.syr.edu>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

There's also Nutch.  However, 10GB isn't that big...  Perhaps you can  
index where the docs/index lives, then just make the index available  
via NFS?  Or, better yet, use rsync to replicate it like Solr does.

-Grant

On Jan 9, 2008, at 10:49 AM, Steven A Rowe wrote:

> Hi Ariel,
>
> On 01/09/2008 at 8:50 AM, Ariel wrote:
>> Dou you know others distributed architecture application that
>> uses lucene to index big amounts of documents ?
>
> Apache Solr is an open source enterprise search server based on the  
> Lucene Java search library, with XML/HTTP and JSON APIs, hit  
> highlighting, faceted search, caching, replication, and a web  
> administration interface. It runs in a Java servlet container such  
> as Tomcat.
>
> http://lucene.apache.org/solr/
>
> Steve
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 17:24:11 2008
Return-Path: <java-user-return-31871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3432 invoked from network); 9 Jan 2008 17:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 17:24:11 -0000
Received: (qmail 97254 invoked by uid 500); 9 Jan 2008 17:23:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96990 invoked by uid 500); 9 Jan 2008 17:23:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96979 invoked by uid 99); 9 Jan 2008 17:23:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 09:23:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 17:23:28 +0000
Received: by fg-out-1718.google.com with SMTP id d23so362116fga.27
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 09:23:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=k0ByfyFBYrNCxY5MOLxMEQ1AOufaKtlzUWvjN45vrvw=;
        b=jwzj9ONFzWt0m09AB02Rue63XePjWzpIB2UHUQE5N92S4w06FlEW0MpjGcUjBJ4aIQjIszfbPFfCvX79szQ+LzerJD3rKe0C70P8JGx3eQ06eEVy+UWhE1PhLg8kylLHTn8ZXoxyM2eJ8WCp/t5glgTtpCBujvgzvi7dzC0Zst8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=njm4SLk94Dty77eiyb7cNugG36Ws9qv2r+Vx1zYr2SGEjVQxeqdarhhPuAtCVoYyofgrMjLL5M9dnCWf2pbGBgqwHeyopHWLMpZqDsr9Z5XGCot1+e4YqqWXVsvkV53cJtprLtRce1opBf2stmxRglBbSsZ9hAOiCfPYcY/oaFQ=
Received: by 10.86.60.15 with SMTP id i15mr877780fga.9.1199899410629;
        Wed, 09 Jan 2008 09:23:30 -0800 (PST)
Received: by 10.86.52.4 with HTTP; Wed, 9 Jan 2008 09:23:30 -0800 (PST)
Message-ID: <8837fb770801090923y7038947ek403f05d9f8862dbe@mail.gmail.com>
Date: Wed, 9 Jan 2008 09:23:30 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: linkedin group for lucene interest group
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26111_8644460.1199899410604"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26111_8644460.1199899410604
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

To join:
http://www.linkedin.com/e/gis/49647/019FD71A8AEF

-John

------=_Part_26111_8644460.1199899410604--

From java-user-return-31872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 20:03:35 2008
Return-Path: <java-user-return-31872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83714 invoked from network); 9 Jan 2008 20:03:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 20:03:35 -0000
Received: (qmail 83011 invoked by uid 500); 9 Jan 2008 20:03:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82981 invoked by uid 500); 9 Jan 2008 20:03:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82969 invoked by uid 99); 9 Jan 2008 20:03:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 12:03:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sanjay.dahiya@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 20:02:52 +0000
Received: by wx-out-0506.google.com with SMTP id i28so218738wxd.20
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 12:02:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=KXRA/wiggBTXMtMoH1BmjPoruRuiQlY5ied4gl7YZ6c=;
        b=K4AT3WITRuAMPFVLw8Ns78XP9O9Agrsm6JAT97EJNRV+lD3iIsdgHARZX2XpDWVuCPkBH/sY8NGHOOVtWhq5IBND0FOLM6p8MXwbqF4hrGzmCn4Ct+Iju3X7NUyOVEA/oszAhb9fjHo57HbENj7jZEq5cDGxWRse9Jd2GxqMaHI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=IDYYFdSnJUwhN22ZsADjTGzTr2jobP54DqQ8AVzbv+eZTx19QFqHQmGR9nazuOj9lWGh32w32EGKAlAWyk0HAxWNFyhgDzydMmGSoKoEZqDDNTP3jxuk1zVyJeBaPJ7izZdpYFXq33yfVRI3+s+rh76NKlNPekdMce9+gTb/+Y0=
Received: by 10.142.12.14 with SMTP id 14mr545459wfl.152.1199908975645;
        Wed, 09 Jan 2008 12:02:55 -0800 (PST)
Received: by 10.142.179.19 with HTTP; Wed, 9 Jan 2008 12:02:55 -0800 (PST)
Message-ID: <7a83b2630801091202y3d465714nf1caa9dc117b8a78@mail.gmail.com>
Date: Thu, 10 Jan 2008 01:32:55 +0530
From: "Sanjay Dahiya" <sanjay.dahiya@gmail.com>
To: java-user@lucene.apache.org
Subject: Empty lucene-similarity jars on maven mirrors
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32084_32086090.1199908975621"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32084_32086090.1199908975621
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

lucene-similarity (2.1.0 and 2.2.0) jar files available on maven mirrors
don't contain any files.
http://mvnrepository.com/artifact/org.apache.lucene/lucene-similarity/2.2.0Seems
like a deployment config problem.

-- 
~sanjay

------=_Part_32084_32086090.1199908975621--

From java-user-return-31873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 20:14:27 2008
Return-Path: <java-user-return-31873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87779 invoked from network); 9 Jan 2008 20:14:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 20:14:27 -0000
Received: (qmail 12902 invoked by uid 500); 9 Jan 2008 20:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12619 invoked by uid 500); 9 Jan 2008 20:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12608 invoked by uid 99); 9 Jan 2008 20:14:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 12:14:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 20:13:46 +0000
Received: by fg-out-1718.google.com with SMTP id d23so412914fga.27
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 12:13:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        bh=Or+frf3SAQWR1tPK1j1x4QzukPoKNH8KSaWUWcA0sFM=;
        b=UpwzwD4Tn/6YC9Svoa95cdy67sN1Jzatwz1aO8IEe96khKLAXYM/T8DuGpbkRw2tt7JHZQL3veEjaUEIQxsKmQe5TsfQZ2/nh4KTkKmjoiic2BIueSEseg/6TjbzfbZpfy2nD1jZFiyU1IFjvm+EewR4/dvZzl0zhpl11wZDyW0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        b=ChyM5hRl3WIqV+Wdx4GcbuKOCLR25Ldv2CNB3ymdKdrn9cVacs9UV+0g3t4PJ+klpAWdW18f+FXtPoovpg7w5GCaq9Rm7mwHiEPzFWjLAQX1i8gX6w5ZW71LbInliJlDA4apwr2YyIpj/3Cotb1vlQBZttPLyzgSl7nIbLu0hGU=
Received: by 10.86.60.7 with SMTP id i7mr989995fga.67.1199909630339;
        Wed, 09 Jan 2008 12:13:50 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id 13sm1551478fks.8.2008.01.09.12.13.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 09 Jan 2008 12:13:48 -0800 (PST)
Message-ID: <47852AF3.3080209@googlemail.com>
Date: Wed, 09 Jan 2008 21:13:39 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Highlighting + phrase queries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dear all,

Let's assume I have a phrase query and a document which contain the 
phrase but also it contains separate
occurrences of each query term. How does the highlighter know that 
should only display fragments which
contain phrases and not fragments which contain only the query words 
(not as a phrase)?

Thank you in advance!

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 20:49:25 2008
Return-Path: <java-user-return-31874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5148 invoked from network); 9 Jan 2008 20:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 20:49:25 -0000
Received: (qmail 72494 invoked by uid 500); 9 Jan 2008 20:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72467 invoked by uid 500); 9 Jan 2008 20:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72456 invoked by uid 99); 9 Jan 2008 20:49:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 12:49:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.252.159 as permitted sender)
Received: from [72.14.252.159] (HELO po-out-1718.google.com) (72.14.252.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 20:48:44 +0000
Received: by po-out-1718.google.com with SMTP id c31so713523poi.0
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 12:48:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=bgW3sIpfmROn6gKrXCK8llnGN4jEBzbFIpmOrmWO0JY=;
        b=clQDC0G83u/a2IZfgwgnFFLFZoxf7Pw4UhsNK5btkxnXjcjU2mER3GdIlrb3bs95N/A+1tjTrx8VVvYa0DmnEuIZQ8RfoZPu1ke0Vtdb+4feJxTWkMGLPCITtm0QfYaKq5AiUmP0fVfo2I+S8r8BVClwikrfi/8nI/tjrlMMAtg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Y81f5eAWiQVQAvUa0EPsrXs2jG+SS5IR2+5CYMVv91sXkm1m038S06pDWq1WAYR6+a2HtpZVRoGVIr1AZUiH41V6DhTnvtNIAzh1pvjm4qzxsfdjFMNWQVuPFIMwY1czjkGPxpYOVyT0wbyU6MNc+Zhge1kVA+lwxkTasGDOSLk=
Received: by 10.140.179.25 with SMTP id b25mr702662rvf.152.1199911730326;
        Wed, 09 Jan 2008 12:48:50 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q19sm820451qbq.16.2008.01.09.12.48.49
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 09 Jan 2008 12:48:49 -0800 (PST)
Message-ID: <4785332B.8000808@gmail.com>
Date: Wed, 09 Jan 2008 15:48:43 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com>
In-Reply-To: <47852AF3.3080209@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The contrib Highlighter doesn't know and highlights them all.

Check out my patch here for position sensitive highlighting:
https://issues.apache.org/jira/browse/LUCENE-794

Marjan Celikik wrote:
> Dear all,
>
> Let's assume I have a phrase query and a document which contain the 
> phrase but also it contains separate
> occurrences of each query term. How does the highlighter know that 
> should only display fragments which
> contain phrases and not fragments which contain only the query words 
> (not as a phrase)?
>
> Thank you in advance!
>
> Marjan.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 21:27:35 2008
Return-Path: <java-user-return-31875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19436 invoked from network); 9 Jan 2008 21:27:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 21:27:34 -0000
Received: (qmail 34119 invoked by uid 500); 9 Jan 2008 21:27:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34090 invoked by uid 500); 9 Jan 2008 21:27:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34079 invoked by uid 99); 9 Jan 2008 21:27:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 13:27:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 21:26:53 +0000
Received: by fg-out-1718.google.com with SMTP id d23so434508fga.27
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 13:26:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=jhGCrBuvacSIOoJX1xryqemDPmpJVgfEMVV1Txh86/M=;
        b=R9u/qexo7IJIe0AcXRoI1SGkJ9jv4JacF388ekvhEpGrsA8tQZ3JDLU4i+yLhmobLFpKULw4LvGBnxvrZB18zG7zVLe2HhP8aFz56Vk9mbN2d/nAdew18l+/vIfvgqYnWKhbNRUQQTdlsCL3StkmNyMrZijHz/mSZYJyD48LPJI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=WhyX0cwySj7EgS2qlSmqJI8p3T7AdxKuRkx09IgGs0bi5nPhn3T84jE3HW1jwtAwNYvIWN6cxsRg8ccVRyAQlwYEaEYJVl3SSPb4psPcnWLTDppfr4jtDSNH25Q3+/YdyhWa1OfcFYUsTJ2/q/IXN/T/lVVKhLZoDBYlqXcLYCE=
Received: by 10.86.65.11 with SMTP id n11mr1089438fga.4.1199914016844;
        Wed, 09 Jan 2008 13:26:56 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id f19sm1629743fka.18.2008.01.09.13.26.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 09 Jan 2008 13:26:55 -0800 (PST)
Message-ID: <47853C0C.1060308@googlemail.com>
Date: Wed, 09 Jan 2008 22:26:36 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com>
In-Reply-To: <4785332B.8000808@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> The contrib Highlighter doesn't know and highlights them all.
>
> Check out my patch here for position sensitive highlighting:
> https://issues.apache.org/jira/browse/LUCENE-794
OK, before trying it out, I would like to know does the patch work for 
mixed queries, e.g. "a b" +c -d "f g" ?

Thanks!

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 21:35:11 2008
Return-Path: <java-user-return-31876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22176 invoked from network); 9 Jan 2008 21:35:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 21:35:11 -0000
Received: (qmail 52657 invoked by uid 500); 9 Jan 2008 21:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52627 invoked by uid 500); 9 Jan 2008 21:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52616 invoked by uid 99); 9 Jan 2008 21:34:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 13:34:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 21:34:30 +0000
Content-class: urn:content-classes:message
Subject: how do I get my own TopDocHitCollector?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 9 Jan 2008 16:34:33 -0500
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA563810E3@birexchange.BIRPLAZA.local>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how do I get my own TopDocHitCollector?
Thread-Index: AchTAR3ni43lNGFFTDm1vQZyXF632gAAoNIQ
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Question:

The documents that I index have two id's - a unique document id and a
record_id that can link multiple documents together that belong to a
common record.

I'd like to use something like TopDocs to return the first 1024 results
that have unique record_id's, but I will want to skip some of the
returned documents that have the same record_id. We're using the
ParallelMultiSearcher.=20

I read that I could use a HitCollector and throw an exception to get it
to stop, but is there a cleaner way?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 21:40:10 2008
Return-Path: <java-user-return-31877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24285 invoked from network); 9 Jan 2008 21:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 21:40:10 -0000
Received: (qmail 68851 invoked by uid 500); 9 Jan 2008 21:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68822 invoked by uid 500); 9 Jan 2008 21:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68811 invoked by uid 99); 9 Jan 2008 21:39:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 13:39:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 09 Jan 2008 21:39:28 +0000
Received: (qmail 8567 invoked by uid 0); 9 Jan 2008 21:39:32 -0000
Received: from 85.179.80.55 by www119.gmx.net with HTTP;
 Wed, 09 Jan 2008 22:39:32 +0100 (CET)
Content-Type: text/plain; charset="us-ascii"
Date: Wed, 09 Jan 2008 22:39:32 +0100
From: spring@gmx.eu
Message-ID: <20080109213932.229980@gmx.net>
MIME-Version: 1.0
Subject: Design questions
To: java-user@lucene.apache.org
X-Authenticated: #2635966
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX19Qc8AmA3FQ36wUctcBHCSGW3K/1YYYeIEHumpMB4
 z2zcBadwL9iRjzKlrJhk6NHGdV6ZDm7z/H/g== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: IwezduRqYmYBbYgPTXc3429CWkZTQVTC
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have to index (tokenized) documents which may have very much pages, up to 10.000.
I also have to know on which pages the search phrase occurs.
I have to update some stored index fields for my document.
The content is never changed.

Thus I think I have to add one lucene document with the index fields and one lucene document per page.

Mapping
=======

MyDocument
-ID
-Field 1-N
-Page 1-N


Lucene
-Lucene Document with ID, page number 0 and Field1 - N (stored fields)
-Lucene Document 1 with ID, page number 1 and tokenized content of Page 1
...
-Lucene Document N with ID, page number N and tokenized content of Page N

Delete of MyDocument -> IndexWriter#deleteDocuments(Term:ID=foo)

Update of stored index fields -> IndexWriter#updateDocument(Term: ID=foo, page number = 0)

Search with index and content.

Step 1: Search on stored index fields -> List of IDs
Step 2: Search on ID field (list from above OR'ed together) and content -> List of IDs and page numbers

Does this work?

What drawbacks has this approch?
Is there another way to achieve what I want?

Thank you.

P.S.

There are millions of documents with a page range from 1 to 10.000.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 21:43:43 2008
Return-Path: <java-user-return-31878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25550 invoked from network); 9 Jan 2008 21:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 21:43:42 -0000
Received: (qmail 76735 invoked by uid 500); 9 Jan 2008 21:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76710 invoked by uid 500); 9 Jan 2008 21:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76699 invoked by uid 99); 9 Jan 2008 21:43:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 13:43:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 21:43:01 +0000
Received: by py-out-1112.google.com with SMTP id a73so496976pye.9
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 13:43:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=NbfEnWJ+CCfFUDrk2EK1Q+4p0cnKxmnZENQ+dTa9RfY=;
        b=D6nvMNRUWCJLWRuv/XZH/pZzi9/0Ul8VHI3/v3DXERRTiaJ/WYH4Fu0baPzHp3h7wYiaMy43lN/RqGpcFXoQjb6anR6/hZRrENEeX26QTaVcldqtkGNdm+tnLPQt6dn+pve4e7l+AgPw7QE7ZLTJWoheGt52osmVr1DYG/diW44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=mnV+jxQVmtdMzOuxjG6RymyLZhvzorKk2erOUdE70/8PGr3PMx57ybVrMBVA902OZ4LTEMxYJLBxRTfYWRcTZgp8evkimFSHEoXKmHozqnkYNxGlLA5RWN4batyEHmVwJMRrqqvWZ/6AMO25IcPhs2YC5s8VhFD/c/K3jyDE9Js=
Received: by 10.64.196.9 with SMTP id t9mr2517982qbf.78.1199914986479;
        Wed, 09 Jan 2008 13:43:06 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e19sm839713qba.13.2008.01.09.13.43.05
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 09 Jan 2008 13:43:05 -0800 (PST)
Message-ID: <47853FE3.2030602@gmail.com>
Date: Wed, 09 Jan 2008 16:42:59 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47853C0C.1060308@googlemail.com>
In-Reply-To: <47853C0C.1060308@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It works exactly the same as the standard contrib Highlighter except 
that it tries not to highlight spurious results for a positional query. 
This is exact with Span queries, but more approximate for phrase 
queries. The approximation is pretty darn good, but let me know if you 
find a case that doesn't work. The Highlighter attempts to mimic the 
PhraseQeury with a SpanQuery.

Marjan Celikik wrote:
> Mark Miller wrote:
>> The contrib Highlighter doesn't know and highlights them all.
>>
>> Check out my patch here for position sensitive highlighting:
>> https://issues.apache.org/jira/browse/LUCENE-794
> OK, before trying it out, I would like to know does the patch work for 
> mixed queries, e.g. "a b" +c -d "f g" ?
>
> Thanks!
>
> Marjan.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 22:05:39 2008
Return-Path: <java-user-return-31879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42038 invoked from network); 9 Jan 2008 22:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 22:05:39 -0000
Received: (qmail 20047 invoked by uid 500); 9 Jan 2008 22:05:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19524 invoked by uid 500); 9 Jan 2008 22:05:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19512 invoked by uid 99); 9 Jan 2008 22:05:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 14:05:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 22:04:57 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m09M4s1H029089
	for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 00:04:54 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1a0445p; 10 Jan 2008 00:04:00 +0200
Message-ID: <478544F8.9070508@teamware.com>
Date: Thu, 10 Jan 2008 09:04:40 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
References: <bf1404350801090550u652bc691x4511e5201500e12d@mail.gmail.com>
In-Reply-To: <bf1404350801090550u652bc691x4511e5201500e12d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 10 Jan 2008 00:04:54 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Ariel wrote:

> The problem I have is that my application spends a lot of time to index all
> the documents, the delay to index 10 gb of pdf documents is about 2 days (to
> convert pdf to text I am using pdfbox) that is of course a lot of time,
> others applications based in lucene, for instance ibm omnifind only takes 5
> hours to index the same amount of pdfs documents. I would like to find out

If you are using log4j, make sure you have the pdfbox log4j categories set to 
info or higher, otherwise this really slows it down (factor of 10) or make sure 
you are using the non log4j version.  See 
http://sourceforge.net/forum/message.php?msg_id=3947448

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 22:49:46 2008
Return-Path: <java-user-return-31880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61712 invoked from network); 9 Jan 2008 22:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 22:49:45 -0000
Received: (qmail 92940 invoked by uid 500); 9 Jan 2008 22:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92912 invoked by uid 500); 9 Jan 2008 22:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92901 invoked by uid 99); 9 Jan 2008 22:49:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 14:49:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 22:49:04 +0000
Received: by fg-out-1718.google.com with SMTP id d23so458753fga.27
        for <java-user@lucene.apache.org>; Wed, 09 Jan 2008 14:49:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=HOomO4R+4cRfvrif/kVM0xfG7heyTnUYdBlwG6V8yJc=;
        b=J2ZjtmVGfdp0scsLWdr1zjezHi7VdPGx8p9AicYJh4a67RNamMR4k1ZtIdL6lknkQT017HYQg5m3yudzUCwYmNYUysljWfpcVOVcTUPXVIfq+GzFyoTV4/1uDeC+ld+5iifpkUc1Vj9IwveQ1jVzaY+uOnhOo6R37QFZKlsRdbg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uKME0T8JKoNZpxyHLMhZ72RmI5IFfv4lV6AmRCNblsPtf5NtfUSRL/JdRN1yTiCDP2KuEQLrCQoYMW4DHfxEEL7j/oh+9WJ0Y6VCeua3s+vlUxMTUSjBiQ41Rr4Q5Ica48QsKEyhgQFwSIESHicJoMZOWTaz1k8UiemZeZTORiA=
Received: by 10.82.107.15 with SMTP id f15mr2098661buc.0.1199918948220;
        Wed, 09 Jan 2008 14:49:08 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 9 Jan 2008 14:49:08 -0800 (PST)
Message-ID: <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
Date: Wed, 9 Jan 2008 17:49:08 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design questions
In-Reply-To: <20080109213932.229980@gmx.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49642_31954084.1199918948215"
References: <20080109213932.229980@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49642_31954084.1199918948215
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can do several things:

Rather than index one doc per page, you could index a special
token between pages. Say you index $$$$$$$$$ as the special
token. So your index looks like this:
last of page 1 $$$$$$$$ first of page 2.... last of page 2 $$$$$$$$ first of
page 3

and so on. Now, if you used SpanNearQuery with a slop of 0, you would never
match across pages.

Now, you can call SpanNear.getSpans() to get the offsets of all your
matches.
You can then correlate these to pages by using TermPositions (?) or similar
interface and determine what pages you matched on.

This is not as expensive as it sounds, since you're not reading the
document,
just the indexes.

This is a possibility, I'd think that it would be easier to keep track of if
there's
a 1-to-1 correspondence between your documents in the two indexes.

As an aside, note that you don't *require* two separate indexes. There's no
requirement that all documents in an index have the same fields. So you
could
index your meta-data with an ID of, say, "meta_doc_id" and your page text
with "text_id" where these are your unique (external to Lucene) IDs. Then
you could delete with a term delete on "meta_doc_id"........

So a meta-doc looks something like:
meta_doc_id:453
field1:
field2:
field3:

and the text doc (the one and only) would be
text_id:543
text: (all 10,000 pages with page delimiters, maybe (see below)).

You could even store all of the page offsets in your meta-data document
in a special field if you wanted, then lazy-load that field rather than
dynamically counting. You'd have to be careful that your offsets
corresponded to the data *after* it was analyzed, but that shouldn't
be too hard. You'd have to read this field before deleting the doc
and make sure it was stored with the replacement.....

One caution: Lucene by default only stores the first 10,000 tokens for
a field in a document. So be sure to bump this limit with
IndexWrite.setMaxFieldLength

If you stored all the offsets of page breaks, you wouldn't have to store the
special
token since you'd have no reason to have to count them later. Be aware that
you'd get a match for a phrase that spanned the last word of one page and
the first word of the next. Which may be good, but you'll have to decide
that. You
should be able to do this pretty easily with a custom Analyzer.

One more point: I once determined that the following two actions are
identical:
1> create one really big string with all the page data concatenated together
    and then add it to a document

and

2> just add successive fragments to the same document. That is,

Document doc;
doc.add(new Field("text", <all the text in all the pages>


is just like
Document doc;
while (more pages) {
    doc.add(new Field("text", <text for this page>
}

********I like this variant better********
And, since I'm getting random ideas anyway, here's another.
The PositionIncrementGap is the "distance" (measured in
terms) between two tokens. Let's claim that you have no
page with more than 10,000 (or whatever) tokens. Just
bump the positionincrementgap to the next 10,000 at the
start of each page. So, the first term on the first page
has an offset of 0. the first term on the second page
has an offset of 10,000. The first term on the third
page has an offset of 20,000.

Now, with the SpanNearQuery trick from above, your
term position modulo 10,000 is also your page. This would
also NOT match across pages. Hmmmm, I kind of like that
idea.


I guess my last question is "How often will a document change"?
The added complexity of keeping two documents per unique ID
may be unnecessary if your documents don't change all that often.....

Anyway, all FWIW
Best
Erick

On Jan 9, 2008 4:39 PM, <spring@gmx.eu> wrote:

> Hi,
>
> I have to index (tokenized) documents which may have very much pages, up
> to 10.000.
> I also have to know on which pages the search phrase occurs.
> I have to update some stored index fields for my document.
> The content is never changed.
>
> Thus I think I have to add one lucene document with the index fields and
> one lucene document per page.
>
> Mapping
> =======
>
> MyDocument
> -ID
> -Field 1-N
> -Page 1-N
>
>
> Lucene
> -Lucene Document with ID, page number 0 and Field1 - N (stored fields)
> -Lucene Document 1 with ID, page number 1 and tokenized content of Page 1
> ...
> -Lucene Document N with ID, page number N and tokenized content of Page N
>
> Delete of MyDocument -> IndexWriter#deleteDocuments(Term:ID=foo)
>
> Update of stored index fields -> IndexWriter#updateDocument(Term: ID=foo,
> page number = 0)
>
> Search with index and content.
>
> Step 1: Search on stored index fields -> List of IDs
> Step 2: Search on ID field (list from above OR'ed together) and content ->
> List of IDs and page numbers
>
> Does this work?
>
> What drawbacks has this approch?
> Is there another way to achieve what I want?
>
> Thank you.
>
> P.S.
>
> There are millions of documents with a page range from 1 to 10.000.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49642_31954084.1199918948215--

From java-user-return-31881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 09 23:31:10 2008
Return-Path: <java-user-return-31881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77993 invoked from network); 9 Jan 2008 23:31:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2008 23:31:10 -0000
Received: (qmail 70492 invoked by uid 500); 9 Jan 2008 23:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70468 invoked by uid 500); 9 Jan 2008 23:30:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70457 invoked by uid 99); 9 Jan 2008 23:30:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 15:30:50 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 23:30:26 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Empty lucene-similarity jars on maven mirrors
Date: Wed, 9 Jan 2008 18:29:53 -0500
Message-ID: <9294E20AED46934EA459020706463F94664555@SUEXCL-02.ad.syr.edu>
In-Reply-To: <7a83b2630801091202y3d465714nf1caa9dc117b8a78@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Empty lucene-similarity jars on maven mirrors
Thread-Index: AchS+rfzsrqIVNlbSUytoTyXlUQoogABS3CA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sanjay,

On 01/09/2008 at 3:02 PM, Sanjay Dahiya wrote:
> lucene-similarity (2.1.0 and 2.2.0) jar files available on maven =
mirrors
> don't contain any files.

That's because the o.a.l.search.similar package (the sole contents of =
the contrib/similarity/ directory) has been empty as of the 2.1.0 =
release.  The idea behind its continued existence in this state is for =
it to be a home for future contributions of custom similarity =
implementations.

>From Lucene's changelog (trunk/CHANGES.txt):

   ------
   =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D =
Release 2.1.0 2007-02-14 =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
   [...]
   Bug fixes
   [...]
   24. LUCENE-728: Removed duplicate/old MoreLikeThis and =
SimilarityQueries
       classes from contrib/similarity, as their new home is under
       contrib/queries.
       (Otis Gospodnetic)
   ------

Here's the issue that licensed/documented this change:

http://issues.apache.org/jira/browse/LUCENE-728

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 00:19:46 2008
Return-Path: <java-user-return-31882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2105 invoked from network); 10 Jan 2008 00:19:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 00:19:46 -0000
Received: (qmail 31215 invoked by uid 500); 10 Jan 2008 00:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31185 invoked by uid 500); 10 Jan 2008 00:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31171 invoked by uid 99); 10 Jan 2008 00:19:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 16:19:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 00:19:17 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0A0J4fq001628
	for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 02:19:04 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1a2i9at; 10 Jan 2008 02:18:00 +0200
Message-ID: <47856465.1090301@teamware.com>
Date: Thu, 10 Jan 2008 11:18:45 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how do I get my own TopDocHitCollector?
References: <CC2671C08F06704ABFD37ED1EA09AA563810E3@birexchange.BIRPLAZA.local>
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA563810E3@birexchange.BIRPLAZA.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 10 Jan 2008 02:19:04 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Beard, Brian wrote:
> Question:
> 
> The documents that I index have two id's - a unique document id and a
> record_id that can link multiple documents together that belong to a
> common record.
> 
> I'd like to use something like TopDocs to return the first 1024 results
> that have unique record_id's, but I will want to skip some of the
> returned documents that have the same record_id. We're using the
> ParallelMultiSearcher. 
> 
> I read that I could use a HitCollector and throw an exception to get it
> to stop, but is there a cleaner way?

I'm doing a similar thing.  I have external Ids (equivalent to yout record_id), 
which have one or more Lucene Documents associated with them.  I wrote a custom 
HitCollector that uses a Map to hold the so far collected external ids along 
with the collected document.

I had to write my own priority queue to know when an object was dropped of the 
bottom of the score sorted queue, but the latest PriorityQueue on the trunk now 
has insertWithOverflow(), which does the same thing.

Note that ResultDoc extends ScoreDoc, so that the external Id of the item 
dropped off the queue can be used to remove it from my Map.

Code snippet is somewhat as below (I am caching my external Ids, hence the cache 
usage)

    protected Map<OfficeId, ScoreDoc> results;

    public void collect(int doc, float score)
     {
         if (score > 0.0f)
         {
             totalHits++;
             if (pq.size() < numHits || score > minScore)
             {
                 OfficeId id = cache.get(doc);
                 ResultDoc rd = results.get(id);
                 //  No current result for this ID yet found
                 if (rd == null)
                 {
                     rd = new ResultDoc(id, doc, score);
                     ResultDoc added = pq.insert(rd);
                     if (added == null)
                     {
                         //  Nothing dropped of the bottom
                         results.put(id, rd);
                     }
                     else
                     {
                         //  Return value dropped of the bottom
                         results.remove(added.id);
                         results.put(id, rd);
                         remaining++;
                     }
                 }
                 //  Already found this ID, so replace high score if necessary
                 else
                 {
                     if (score > rd.score)
                     {
                         pq.remove(rd);
                         rd.score = score;
                         pq.insert(rd);
                     }
                 }
                 //  Readjust our minimum score again from the top entry
                 minScore = pq.peek().score;
             }
             else
                 remaining++;
         }
     }

HTH
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 04:09:25 2008
Return-Path: <java-user-return-31883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78645 invoked from network); 10 Jan 2008 04:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 04:09:25 -0000
Received: (qmail 11377 invoked by uid 500); 10 Jan 2008 04:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11346 invoked by uid 500); 10 Jan 2008 04:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11335 invoked by uid 99); 10 Jan 2008 04:09:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 20:09:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Jan 2008 04:08:53 +0000
Received: (qmail 33624 invoked by uid 60001); 10 Jan 2008 04:08:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=YJKFaoHXo3Pg0KzxLKd+HX6D1ZlrHUntRya6adlC+l0DJ8Uh2a8AYhOk/l50fPY/PtlP0Zm6/H+w1TrXMSh10BkZNlIeyz3RHnzvb+YCYmRZg9vJM2HOXyz5m1uvE+catPU/1u88Zb8bTohWWPnMZ9miQb4Ooo+/01OolTHJ/0w=;
X-YMail-OSG: BpI3EQMVM1k0LUetGWAyUxIMp2kV2WemPzRBEciTshan8aw0sbbhM2BvdbtZb07yQpx10OvP14CzjrMLPq173bpRVnrc.atSKvuGd2LNjeRWurlngjs-
Received: from [72.231.9.236] by web50310.mail.re2.yahoo.com via HTTP; Wed, 09 Jan 2008 20:08:44 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 9 Jan 2008 20:08:44 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Why is lucene so slow indexing in nfs file system ?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <938941.33236.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ariel,

I believe PDFBox is not the fastest thing and was built more to handle all possible PDFs than for speed (just my impression - Ben, PDFBox's author might still be on this list and might comment).  Pulling data from NFS to index seems like a bad idea.  I hope at least the indices are local and not on a remote NFS...

We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which one) and indexing overNFS was slooooooow.

Otis

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, January 9, 2008 2:50:41 PM
Subject: Why is lucene so slow indexing in nfs file system ?

Hi:
I have seen the post in
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
 and
I am implementing a similar application in a distributed enviroment, a
cluster of nodes only 5 nodes. The operating system I use is
 Linux(Centos)
so I am using nfs file system too to access the home directory where
 the
documents to be indexed reside and I would like to know how much time
 an
application spends to index a big amount of documents like 10 Gb ?
I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb in
 every
nodes, LAN: 1Gbits/s.

The problem I have is that my application spends a lot of time to index
 all
the documents, the delay to index 10 gb of pdf documents is about 2
 days (to
convert pdf to text I am using pdfbox) that is of course a lot of time,
others applications based in lucene, for instance ibm omnifind only
 takes 5
hours to index the same amount of pdfs documents. I would like to find
 out
why my application has this big delay to index, any help is welcome.
Dou you know others distributed architecture application that uses
 lucene to
index big amounts of documents ? How long time it takes to index ?
I hope yo can help me
Greetings




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 04:18:10 2008
Return-Path: <java-user-return-31884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81274 invoked from network); 10 Jan 2008 04:18:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 04:18:08 -0000
Received: (qmail 15355 invoked by uid 500); 10 Jan 2008 04:17:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15324 invoked by uid 500); 10 Jan 2008 04:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15313 invoked by uid 99); 10 Jan 2008 04:17:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jan 2008 20:17:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Jan 2008 04:17:36 +0000
Received: (qmail 37153 invoked by uid 60001); 10 Jan 2008 04:17:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=bsgVpj4LdqhBEMgrhrIzzG+dFOtqNfdDUw/kvJOAChx6Jl0mpI82i+zZYMK9rQgj7/jrDuJHa47Q8Eyfm4ZsOaiT8Jh3kCylWGoKX3mNDI12LQPOxD9w9N9hRV+IkE8A38rns1cHbBGlzhTZaZ7jDIxGXdWhYJf3rf6dhEvYgog=;
X-YMail-OSG: 0zDAcnsVM1ltg7alNZe7F28UM5O7cwJX31s1oQpn7RgeNd_QqAi5edpW7xiJS.pltr0gW24DyF94He6pHaDWYlsWXTCw3kcqOebVvyKINyIFjRN5f6Y6f7QN7reFC19Iz7eWwtdpywNKvgo-
Received: from [72.231.9.236] by web50310.mail.re2.yahoo.com via HTTP; Wed, 09 Jan 2008 20:17:28 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 9 Jan 2008 20:17:28 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: linkedin group for lucene interest group
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <735882.36026.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hm, propaganda! :)
There is also a Lucene group on Simpy with lots of Lucene/search/IR resources - http://www.simpy.com/group/363

You'll see some familiar names from the list on the right side of the screen.  Let me know if you want to join.

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, January 9, 2008 6:23:30 PM
Subject: linkedin group for lucene interest group

To join:
http://www.linkedin.com/e/gis/49647/019FD71A8AEF

-John




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 11:59:12 2008
Return-Path: <java-user-return-31885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74110 invoked from network); 10 Jan 2008 11:59:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 11:59:12 -0000
Received: (qmail 31210 invoked by uid 500); 10 Jan 2008 11:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31094 invoked by uid 500); 10 Jan 2008 11:58:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30567 invoked by uid 99); 10 Jan 2008 11:58:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 03:58:45 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [210.7.66.150] (HELO delhtca02.Infoedge.com) (210.7.66.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 11:58:32 +0000
Received: from DELHTCA01.Infoedge.com (172.16.3.234) by delhtca02.infoedge.com
 (172.16.3.245) with Microsoft SMTP Server (TLS) id 8.0.751.0; Thu, 10 Jan
 2008 17:24:58 +0530
Received: from [172.16.0.92] (220.225.240.5) by DELHTCA01.Infoedge.com
 (172.16.3.234) with Microsoft SMTP Server id 8.0.744.0; Thu, 10 Jan 2008
 17:24:58 +0530
Subject: Re: Self Join Query
From: sachin <sachin.singhal@naukri.com>
Reply-To: sachin.singhal@naukri.com
To: Developer Developer <devquestions@gmail.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <c01704c90801080643o16119692nf3cabc17d9ecc7ba@mail.gmail.com>
References: <1199794981.3156.79.camel@localhost.localdomain>
	 <c01704c90801080643o16119692nf3cabc17d9ecc7ba@mail.gmail.com>
Content-Type: text/plain
Organization: ieil
Date: Thu, 10 Jan 2008 17:28:44 +0530
Message-ID: <1199966324.4817.28.camel@localhost.localdomain>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 (2.10.1-4.fc7) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here are more details about my issue.

I have two tables in database. A row in table 1 can have multiple rows
associated with it in table 2. It is a one to many mapping. 
Let's say a row in table 1 is A and it has multiple rows B1, B2 and B3
associated with it in table 2. I need to search on both A and B types
and the result should have A and all the Bs associated with it. Also for
your information, A and Bs are long text in database. 

I could have two approaches for indexing/searching

First approach is to create the index in denormalized form. In this case
document would be like A, B1, B2, B3. The issue with this approach is
that any modification to any row would require me to re-index the
document again and fetch A and all Bs again from database. This is a
heavy process.

The other approach is to index A, B1, B2 and B3 in different documents
and after search merge the results. This makes my re-indexing lighter
but I need to put extra logic to merge the results. For this type of
index I would require self join kind of query from lucene. Query can be
written by using boolean query but merging of two type of documents is a
issue. If I go by this approach for indexing, what is the best way to
fetch the results?

I hope I have made myself clear. 

Thanks
Sachin



On Tue, 2008-01-08 at 20:13 +0530, Developer Developer wrote:
> Provide more details please.
> 
> Can you not use boolean query and filters if need be ?
> 
> 
> 
> On Jan 8, 2008 7:23 AM, sachin <sachin.singhal@naukri.com> wrote:
>         
>         I need to write lucene query something similar to SQL self
>         joins.
>         
>         My current implementation is very primitive. I fire first
>         query, get the
>         results, based on the result of first query I fire second
>         query and then
>         merge the results from both the queries. The whole processing
>         is very 
>         expensive. Doing this is very easy with SQL query as we need
>         to just
>         write self join query and database do the rest for you.
>         
>         What is the best way of implementing the above functionality
>         in lucene?
>         
>         Regards 
>         Sachin
>         
>         
>         ---------------------------------------------------------------------
>         To unsubscribe, e-mail:
>         java-user-unsubscribe@lucene.apache.org
>         For additional commands, e-mail:
>         java-user-help@lucene.apache.org
>         
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 12:11:51 2008
Return-Path: <java-user-return-31886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78807 invoked from network); 10 Jan 2008 12:11:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 12:11:51 -0000
Received: (qmail 46129 invoked by uid 500); 10 Jan 2008 12:11:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45776 invoked by uid 500); 10 Jan 2008 12:11:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45765 invoked by uid 99); 10 Jan 2008 12:11:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 04:11:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 12:11:09 +0000
Received: by fg-out-1718.google.com with SMTP id d23so729065fga.27
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 04:11:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=wMBRdSg4F485DOpvUQSLBc5c5CMKVQyCvsfAEgxapJk=;
        b=T3WjsB9n4IQKIGA9wpj/QLn4r1PpL9hWWxtAPkTMEIZgskFslE/6FhiJjhcxXlBnwJtmN1qzigSTJT7OBD9baFejNlCuIwxRP8AsgyoRI9vNFYxrjetAciqFxEwJHuX1rqV2xhKviWD3ivLcxFenLpMoo9omWROP0IPfmgIyErc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=grdISfZbo56XGW92YbZKjkqHhPnUmqNKZMa9ParKCSdjtNJMuUETD+T0ZHClCyzT3gPbxtbL18sIbY5wGxghZX3TVZnyne72lzUGZPbqUWhqhhWbVj5wEbdkmYAC5Oar/rYiaW1Hj1tpc3gei4nopL+aQ4kf2fsGyBm4TCuqwgU=
Received: by 10.86.77.5 with SMTP id z5mr1749810fga.41.1199967073549;
        Thu, 10 Jan 2008 04:11:13 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id b17sm2438085fka.4.2008.01.10.04.11.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 04:11:12 -0800 (PST)
Message-ID: <47860B5E.4010300@googlemail.com>
Date: Thu, 10 Jan 2008 13:11:10 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com>
In-Reply-To: <4785332B.8000808@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> The contrib Highlighter doesn't know and highlights them all.
>
> Check out my patch here for position sensitive highlighting:
> https://issues.apache.org/jira/browse/LUCENE-794
>
>
It seems that the patch does not work with Lucene 2.2 as I get some 
compile errors. Is this really the case?

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 13:10:41 2008
Return-Path: <java-user-return-31887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4009 invoked from network); 10 Jan 2008 13:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 13:10:40 -0000
Received: (qmail 57083 invoked by uid 500); 10 Jan 2008 13:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57044 invoked by uid 500); 10 Jan 2008 13:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57032 invoked by uid 99); 10 Jan 2008 13:10:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 05:10:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.252.158 as permitted sender)
Received: from [72.14.252.158] (HELO po-out-1718.google.com) (72.14.252.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 13:09:58 +0000
Received: by po-out-1718.google.com with SMTP id c31so1204268poi.0
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 05:10:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=xI96VoaQmkwcR3GMh+sq33q3hz5rDdYtc/KYRq1qGgE=;
        b=ghVtrY5OybkDUt0LMKeCf1Qh6hq4gO5xngILKh261oJKWo/5cFraUk82Bx/blkbMQZdUOq8thv4vmhEDXuKaE17fj7/hJ5zcW0bi7uSQbZhVNVTqI3kqL2EGvIjqE4FG3VZWhQzFVaA718fJwSWnijlhZEEzigoZ9jZW37amwyg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Y9iBZaiC1v4g5l/rSxSuIQfoPnQHJXeOKgsNkP/3vyPUoooA+Cj+jAkxY0MQHY/nW2R0zYc1aTEo0bK+LKvagODiV98r7Jc01IMW1M40/3tDyv7bIxbkEUHUE5JS9/mYNFygXJUWw7rlVlTUJ+Oy53cbJontFH+1Q2pfHOP5NB4=
Received: by 10.141.171.6 with SMTP id y6mr1175358rvo.143.1199970603076;
        Thu, 10 Jan 2008 05:10:03 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f12sm1251515qba.32.2008.01.10.05.10.02
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 05:10:02 -0800 (PST)
Message-ID: <47861921.1020904@gmail.com>
Date: Thu, 10 Jan 2008 08:09:53 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com>
In-Reply-To: <47860B5E.4010300@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It should work no problem with 2.2. What are the compile errors you are 
getting?

If you send me a note directly I will send you a jar.

- Mark

Marjan Celikik wrote:
> Mark Miller wrote:
>> The contrib Highlighter doesn't know and highlights them all.
>>
>> Check out my patch here for position sensitive highlighting:
>> https://issues.apache.org/jira/browse/LUCENE-794
>>
>>
> It seems that the patch does not work with Lucene 2.2 as I get some 
> compile errors. Is this really the case?
>
> Marjan.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 13:13:04 2008
Return-Path: <java-user-return-31888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4851 invoked from network); 10 Jan 2008 13:13:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 13:13:04 -0000
Received: (qmail 60707 invoked by uid 500); 10 Jan 2008 13:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60670 invoked by uid 500); 10 Jan 2008 13:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60659 invoked by uid 99); 10 Jan 2008 13:12:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 05:12:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 13:12:23 +0000
Received: by py-out-1112.google.com with SMTP id a73so830785pye.9
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 05:12:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=afTbWcAcS5ZZ7Zj8SUhamoFncx22UEOWNGyEz6B7K58=;
        b=tZQNBpuJLXkdOm0UoZf0q13H8a9NrVVlTTYQ4RbRq/sFqsJGK4bL1/XddK+eQWqg7HLXLGh22eAInGtig2jSI3hyqpm+7rOWxbFbKtgbZuMArZnYpF3rBnxrhkmHm234bz28Ge0W7cJ4/zBNbdwP2CLTJiLgZ48xMKl+tfFXIWE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=OT/teTtnShWLg3Z6/IjZ4o8Z3GbPooKIzTixl9lWYwcR/U7uJ4nsI/pAUU7gk809D3w/cqfCm9TZR3C42jlQSPBGC7Eg0WSi9hCegXS0zaGqz6CqxiBMm2/MWZg/jhNlMpoqfq/14lNz99CJQkX8V10M7DYNGNsau9FSHezvHnY=
Received: by 10.65.107.10 with SMTP id j10mr4230721qbm.56.1199970748330;
        Thu, 10 Jan 2008 05:12:28 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id p4sm1236562qba.15.2008.01.10.05.12.27
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 05:12:27 -0800 (PST)
Message-ID: <478619B3.80903@gmail.com>
Date: Thu, 10 Jan 2008 08:12:19 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com>
In-Reply-To: <47860B5E.4010300@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Oh yeah...something that you may not have seen is that this has a 
dependency on MemoryIndex from contrib. You need that jar as well.

- Mark

Marjan Celikik wrote:
> Mark Miller wrote:
>> The contrib Highlighter doesn't know and highlights them all.
>>
>> Check out my patch here for position sensitive highlighting:
>> https://issues.apache.org/jira/browse/LUCENE-794
>>
>>
> It seems that the patch does not work with Lucene 2.2 as I get some 
> compile errors. Is this really the case?
>
> Marjan.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 13:46:09 2008
Return-Path: <java-user-return-31889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19014 invoked from network); 10 Jan 2008 13:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 13:46:09 -0000
Received: (qmail 8751 invoked by uid 500); 10 Jan 2008 13:45:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8247 invoked by uid 500); 10 Jan 2008 13:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8236 invoked by uid 99); 10 Jan 2008 13:45:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 05:45:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 64.233.162.230 as permitted sender)
Received: from [64.233.162.230] (HELO nz-out-0506.google.com) (64.233.162.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 13:45:24 +0000
Received: by nz-out-0506.google.com with SMTP id i28so348292nzi.5
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 05:45:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=l/mDnkJ9Lv3DsmWfUjWfz0idnaJcASg0Qn7KJCN389I=;
        b=obX4nVOMt0GTFPbrjGdS97g/L698hlyaF9KFzc2D9QwTE8m0yGKmGn3gUGknnjLi7ddRORiDP84XbF8+4XSSaNEK11z1bq417sFG/eLSLnkycxSZkOOsbzrqh9USJGISVnii7OFzwZE5qEhlPF3rCjXf8wS0NfirdSMjaB+HzGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sgf6lwsvo7C1r2lCrQ8vTgkr2C9vK4pm4od1lMFV2o0rcZeHYuOFhAUTFPtVe0BtYOnd2lza8Kor9X2QgM93X0usPvvAy9PIf48Ji9pifAJdV2+Fjh33IHeug8cIJfCEpQiM/VcS18/r1X/1nrt33hsWwk0PevsjqPO2nFswrRE=
Received: by 10.141.37.8 with SMTP id p8mr1195100rvj.178.1199972729203;
        Thu, 10 Jan 2008 05:45:29 -0800 (PST)
Received: by 10.141.151.4 with HTTP; Thu, 10 Jan 2008 05:45:29 -0800 (PST)
Message-ID: <bf1404350801100545r7d133f75hf93dcddd67c81634@mail.gmail.com>
Date: Thu, 10 Jan 2008 08:45:29 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
In-Reply-To: <938941.33236.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37325_15191003.1199972729150"
References: <938941.33236.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37325_15191003.1199972729150
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks all you for yours answers, I going to change a few things in my
application and make tests.
One thing I haven't find another good pdfToText converter like pdfBox Do you
know any other faster ?
Greetings
Thanks for yours answers
Ariel

On Jan 9, 2008 11:08 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Ariel,
>
> I believe PDFBox is not the fastest thing and was built more to handle all
> possible PDFs than for speed (just my impression - Ben, PDFBox's author
> might still be on this list and might comment).  Pulling data from NFS to
> index seems like a bad idea.  I hope at least the indices are local and not
> on a remote NFS...
>
> We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which one)
> and indexing overNFS was slooooooow.
>
> Otis
>
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Ariel <isaacrc82@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, January 9, 2008 2:50:41 PM
> Subject: Why is lucene so slow indexing in nfs file system ?
>
> Hi:
> I have seen the post in
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
>  and
> I am implementing a similar application in a distributed enviroment, a
> cluster of nodes only 5 nodes. The operating system I use is
>  Linux(Centos)
> so I am using nfs file system too to access the home directory where
>  the
> documents to be indexed reside and I would like to know how much time
>  an
> application spends to index a big amount of documents like 10 Gb ?
> I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb in
>  every
> nodes, LAN: 1Gbits/s.
>
> The problem I have is that my application spends a lot of time to index
>  all
> the documents, the delay to index 10 gb of pdf documents is about 2
>  days (to
> convert pdf to text I am using pdfbox) that is of course a lot of time,
> others applications based in lucene, for instance ibm omnifind only
>  takes 5
> hours to index the same amount of pdfs documents. I would like to find
>  out
> why my application has this big delay to index, any help is welcome.
> Dou you know others distributed architecture application that uses
>  lucene to
> index big amounts of documents ? How long time it takes to index ?
> I hope yo can help me
> Greetings
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37325_15191003.1199972729150--

From java-user-return-31890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 14:10:09 2008
Return-Path: <java-user-return-31890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31707 invoked from network); 10 Jan 2008 14:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 14:10:08 -0000
Received: (qmail 65080 invoked by uid 500); 10 Jan 2008 14:09:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65046 invoked by uid 500); 10 Jan 2008 14:09:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65035 invoked by uid 99); 10 Jan 2008 14:09:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 06:09:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 14:09:27 +0000
Received: by fg-out-1718.google.com with SMTP id d23so768825fga.27
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 06:09:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=LaCRSiZ0JOTIXzXSiJidBTq0ylSKVolBK8eXIkcRNrQ=;
        b=wlBoDnZzp8RaZVHQgu4pZNOdP14ByJ38Ua9GBey4nbVXjENvnAyHd2i9cHhXlVhdMfQMnLG8Jo4VwYINPwAA/4p9UcYDwS5KJXlgYokr5DPLJTcCm3TrkJ/IC/A4/WfiJfJ+yl72g4+Up+uOqt4iHoceydW6q9AdPpPMEBfHYUw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=TalxguX7StHADoGBVIX34W/xK1dCa9xu/olIzH47zsr0TpOo/Vjm7xBAQkDsZ3uyuCvu1o0GD1S6E182ZpPzgNgf2618muqiYFHCURmuU9tIGrKRPXbB32ARINqRWJKAbTxL07eakwAUNxZJHNaNOCzOJ6B6XBbg+mQJ5qAv9V4=
Received: by 10.86.53.8 with SMTP id b8mr1833568fga.64.1199974171508;
        Thu, 10 Jan 2008 06:09:31 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id f31sm2592415fkf.15.2008.01.10.06.09.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 06:09:30 -0800 (PST)
Message-ID: <47862719.3000709@googlemail.com>
Date: Thu, 10 Jan 2008 15:09:29 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com> <478619B3.80903@gmail.com>
In-Reply-To: <478619B3.80903@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> Oh yeah...something that you may not have seen is that this has a 
> dependency on MemoryIndex from contrib. You need that jar as well.
>
> - Mark
Hm, I need the source code. How do I download the files from 
https://issues.apache.org/jira/browse/LUCENE-794 (all I see are some 
.patch files)?

What I really need is a how the highlighter works in a nutshell... I am 
working on a publication and I want to have a reference to Lucene and 
its highlighting...

Thanks again.

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 14:28:53 2008
Return-Path: <java-user-return-31891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41541 invoked from network); 10 Jan 2008 14:28:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 14:28:53 -0000
Received: (qmail 6092 invoked by uid 500); 10 Jan 2008 14:28:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5969 invoked by uid 500); 10 Jan 2008 14:28:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5958 invoked by uid 99); 10 Jan 2008 14:28:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 06:28:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 14:28:11 +0000
Received: by py-out-1112.google.com with SMTP id a73so858450pye.9
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 06:28:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=IQzxSKgpRQCTJnWf6d4dxJYBoy/qgbZwvf1eGkjGjhE=;
        b=SMeJeL+djS3WIoBZmMTx0gvWQTHhvp01+153Ozub9hxWMALYseIr/PXvfVOjuRBaoCbvT7y8eiEJfsnuq2q8rAktTxd7rLcw2sBzvIiLoXCobE5olxKI3jX1Ty0QmUx27r2FzygbjR1jtFTOROlEX9ccplh9cmLA8JGnV+eRiFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=r3yLMbmWcRLgef8pZ+hTPexgqiKP28B8Baon0g23MU0AKxTYg/+TCdrwjP5mR4AfVGF8Qx2nR4SSVz8447NlDgZz0IMUbHXV8DOxSKl9hCbxmZKY2M/QrjsayX9fcDzqtPbmxlC0FvIxzAbSyUVeBuq3Hbo3I/x2pG/dj8R40mE=
Received: by 10.64.241.3 with SMTP id o3mr4423832qbh.16.1199975292688;
        Thu, 10 Jan 2008 06:28:12 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q19sm1305047qbq.16.2008.01.10.06.28.11
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 06:28:12 -0800 (PST)
Message-ID: <47862B73.5030708@gmail.com>
Date: Thu, 10 Jan 2008 09:28:03 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com> <478619B3.80903@gmail.com> <47862719.3000709@googlemail.com>
In-Reply-To: <47862719.3000709@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The Highlighter works by comparing the TokenStream of the document with 
the Tokens in the query. The TokenStream can be rebuilt from the index 
if you use TermVectors with TokenSources or you can get it by 
reanalyzing the document.  Each Token from the TokenStream is checked 
against Tokens in the query, and if there is a match you have a 
Highlight. The original text is then reconstructed with the Highlights 
from info in the TokenStream about original offsets into the document 
for each Token. Also, there is a Fragment system that will break apart 
the Highlighted text into score sorted text Fragments.

That is why the original contrib does not work with PhraseQuery's. It 
simply matches Tokens from the query with those in the TokenStream. 
LUCENE-794 takes the TokenStream and shoves it into a MemoryIndex. Then, 
after converting the query to a SpanQuery approximation, getSpans is 
called on the index for the query. The Spans provide a bound on what 
positions should be Highlighted. Everything else is done exactly like 
the original Highlighter (This is a patch that fits into the original 
Highlighter framework that was developed, thereby retaining all of its 
richness :) ).

Marjan Celikik wrote:
> Mark Miller wrote:
>> Oh yeah...something that you may not have seen is that this has a 
>> dependency on MemoryIndex from contrib. You need that jar as well.
>>
>> - Mark
> Hm, I need the source code. How do I download the files from 
> https://issues.apache.org/jira/browse/LUCENE-794 (all I see are some 
> .patch files)?
>
> What I really need is a how the highlighter works in a nutshell... I 
> am working on a publication and I want to have a reference to Lucene 
> and its highlighting...
>
> Thanks again.
>
> Marjan.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 14:33:53 2008
Return-Path: <java-user-return-31892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44898 invoked from network); 10 Jan 2008 14:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 14:33:52 -0000
Received: (qmail 12759 invoked by uid 500); 10 Jan 2008 14:33:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12730 invoked by uid 500); 10 Jan 2008 14:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12719 invoked by uid 99); 10 Jan 2008 14:33:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 06:33:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 14:33:11 +0000
Received: by fg-out-1718.google.com with SMTP id d23so776436fga.27
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 06:33:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=0Do8q3g8fzcUDuxaDJCm+r7oYqUdPEZ9wZUZQ9J+nAM=;
        b=ElMt4MzLapPnfRA+TiQuP4kfPSm5g00eRMAQwER9FPfcL9eeDPBvbmn0gVoTp/DWdQWFf39q7HnPB8SOZTTyONx85+dXLSWWqX/rAhAMS+Hv3TRCQ/rhSuvbq8CyY5k7whXcgNnmnfolBLkjjvCf1FSwyY81ZNKyujTsCFOZs3M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=aaJY16FeutA83UkCbS8HZea6A5Z3X0cWENgL7M8+dTnHZGjuUIAlj6k5umJdNbwAW15MEsuZiktXZCDxZ5kBTqop9LaH23LItwTFFmSavwryyhZdXVx5Br4PPxnIipGsJliMaW6IoT3Y812BEsfHZIOHOwnIY5TkuYtMAi8Q/co=
Received: by 10.82.108.9 with SMTP id g9mr3245804buc.34.1199975595966;
        Thu, 10 Jan 2008 06:33:15 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id p38sm2653147fke.13.2008.01.10.06.33.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 06:33:15 -0800 (PST)
Message-ID: <47862CA9.30305@googlemail.com>
Date: Thu, 10 Jan 2008 15:33:13 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com> <478619B3.80903@gmail.com> <47862719.3000709@googlemail.com> <47862B73.5030708@gmail.com>
In-Reply-To: <47862B73.5030708@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> The Highlighter works by comparing the TokenStream of the document 
> with the Tokens in the query. The TokenStream can be rebuilt from the 
> index if you use TermVectors with TokenSources or you can get it by 
> reanalyzing the document.  Each Token from the TokenStream is checked 
> against Tokens in the query, and if there is a match you have a 
> Highlight. The original text is then reconstructed with the Highlights 
> from info in the TokenStream about original offsets into the document 
> for each Token. Also, there is a Fragment system that will break apart 
> the Highlighted text into score sorted text Fragments.
OK, this is what I already knew...
>
> That is why the original contrib does not work with PhraseQuery's. It 
> simply matches Tokens from the query with those in the TokenStream. 
> LUCENE-794 takes the TokenStream and shoves it into a MemoryIndex. 
> Then, after converting the query to a SpanQuery approximation, 
> getSpans is called on the index for the query. The Spans provide a 
> bound on what positions should be Highlighted. Everything else is done 
> exactly like the original Highlighter (This is a patch that fits into 
> the original Highlighter framework that was developed, thereby 
> retaining all of its richness :) ).
>
>
Thanks! This is what I needed. Still I don't know how to obtain the 
source code of your patch :(

Majan.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 14:57:22 2008
Return-Path: <java-user-return-31893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55853 invoked from network); 10 Jan 2008 14:57:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 14:57:22 -0000
Received: (qmail 48550 invoked by uid 500); 10 Jan 2008 14:56:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48522 invoked by uid 500); 10 Jan 2008 14:56:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48503 invoked by uid 99); 10 Jan 2008 14:56:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 06:56:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 14:56:18 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0AEuAKx015983
	for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 15:56:10 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Self Join Query
Date: Thu, 10 Jan 2008 15:56:15 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <1199794981.3156.79.camel@localhost.localdomain> <c01704c90801080643o16119692nf3cabc17d9ecc7ba@mail.gmail.com> <1199966324.4817.28.camel@localhost.localdomain>
In-Reply-To: <1199966324.4817.28.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801101556.16027.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Sachin,

As the merging of the results is the issue, I'll assume that you don't
have clear user requirements for that.

The simplest way out of that is to allow the users to search
the B's first, and once they have determined which B's they'd like
to use, use those B's to limit the results in of user searches in A.
That would normally be done by a filtering on B, much like RangeFilter.
Caching that filter allows for quick repeated searches in A.
Is that what the users want?

For each normalization a filter can be used to search across it.
One feature of filters is that the original score is lost.
Would you have user requirements related to this?

As the texts of A and B are the problem for reindexing, you
may want to index these separately: one index for Aid+Atext,
and one for Bid+Btext.

That leaves the A-B 1-n association: one more index for Aid+Bids.
In this last one you could also put a small text field of A.

Denormalizing the Btext into Aid+Bids as Aid+Bids+Btexts can make
it difficult for the users to explicitly select the B's. OTOH it makes it
easy to implicitly select the B's. What do the users want?

Each id field will have to be indexed to allow filtering, and stored to
allow retrieval for filtering in another index. Retrieving stored fields
is normally a performance bottleneck, so a FieldCache might be handy.

Regards,
Paul Elschot



On Thursday 10 January 2008 12:58:44 sachin wrote:
> Here are more details about my issue.
> 
> I have two tables in database. A row in table 1 can have multiple rows
> associated with it in table 2. It is a one to many mapping. 
> Let's say a row in table 1 is A and it has multiple rows B1, B2 and B3
> associated with it in table 2. I need to search on both A and B types
> and the result should have A and all the Bs associated with it. Also for
> your information, A and Bs are long text in database. 
> 
> I could have two approaches for indexing/searching
> 
> First approach is to create the index in denormalized form. In this case
> document would be like A, B1, B2, B3. The issue with this approach is
> that any modification to any row would require me to re-index the
> document again and fetch A and all Bs again from database. This is a
> heavy process.
> 
> The other approach is to index A, B1, B2 and B3 in different documents
> and after search merge the results. This makes my re-indexing lighter
> but I need to put extra logic to merge the results. For this type of
> index I would require self join kind of query from lucene. Query can be
> written by using boolean query but merging of two type of documents is a
> issue. If I go by this approach for indexing, what is the best way to
> fetch the results?
> 
> I hope I have made myself clear. 
> 
> Thanks
> Sachin
> 
> 
> 
> On Tue, 2008-01-08 at 20:13 +0530, Developer Developer wrote:
> > Provide more details please.
> > 
> > Can you not use boolean query and filters if need be ?
> > 
> > 
> > 
> > On Jan 8, 2008 7:23 AM, sachin <sachin.singhal@naukri.com> wrote:
> >         
> >         I need to write lucene query something similar to SQL self
> >         joins.
> >         
> >         My current implementation is very primitive. I fire first
> >         query, get the
> >         results, based on the result of first query I fire second
> >         query and then
> >         merge the results from both the queries. The whole processing
> >         is very 
> >         expensive. Doing this is very easy with SQL query as we need
> >         to just
> >         write self join query and database do the rest for you.
> >         
> >         What is the best way of implementing the above functionality
> >         in lucene?
> >         
> >         Regards 
> >         Sachin
> >         
> >         
> >         ---------------------------------------------------------------------
> >         To unsubscribe, e-mail:
> >         java-user-unsubscribe@lucene.apache.org
> >         For additional commands, e-mail:
> >         java-user-help@lucene.apache.org
> >         
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 15:06:08 2008
Return-Path: <java-user-return-31894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19122 invoked from network); 10 Jan 2008 15:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 15:06:08 -0000
Received: (qmail 76307 invoked by uid 500); 10 Jan 2008 15:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76271 invoked by uid 500); 10 Jan 2008 15:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76260 invoked by uid 99); 10 Jan 2008 15:05:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 07:05:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 15:05:24 +0000
Received: by rv-out-0910.google.com with SMTP id k20so703914rvb.5
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 07:05:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NHygcOVTz9940CKj2EzRx/p5/FRYXB7h85sMfnxI9Gw=;
        b=rOw5HSbr2PEXGiY6PY4K3g4hdNnQu++pIyjBqcbZBBLXdizZdMC/EL432IscBRs5y03CauRxI+E+CY375HA84GKpbfORH6rUS+zJ1pGiarHAu/f3f3EmnX/bYl7+I2YfaVpmCVdLPWLUmKRtceJ0ueqpZodPuEo1rX5VateqIk0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VOnr9lm9AL/ugBrnGHKw+o0eaejymVwNvBxCzz0CnhPTYRkmCOJI6NmJJZPPw1/TqHAk42EaSF29rXIDLJiltdXanCwe6pQe6eLYM37R0rNNcF3mrLfy/v+plerYcFU+Rt1+xm7URSuNTdaKEsGjDaWUGh3Y/H6Zt9Ti7TWm+Zk=
Received: by 10.141.196.13 with SMTP id y13mr1263706rvp.97.1199977528844;
        Thu, 10 Jan 2008 07:05:28 -0800 (PST)
Received: by 10.141.151.4 with HTTP; Thu, 10 Jan 2008 07:05:28 -0800 (PST)
Message-ID: <bf1404350801100705m23b0572aj4f15fc103467ea31@mail.gmail.com>
Date: Thu, 10 Jan 2008 10:05:28 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
In-Reply-To: <bf1404350801100545r7d133f75hf93dcddd67c81634@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37626_13343275.1199977528834"
References: <938941.33236.qm@web50310.mail.re2.yahoo.com>
	 <bf1404350801100545r7d133f75hf93dcddd67c81634@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37626_13343275.1199977528834
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In a distributed enviroment the application should make an exhaustive use of
the network and there is not another way to access to the documents in a
remote repository but accessing in nfs file system.
One thing I must clarify: I index the documents in memory, I use
RAMDirectory to do that, then when the RAMDirectory reach the limit(I have
put about 10 Mb) then I serialize to disk(nfs) the index to merge it with
the central index(the central index is in nfs file system), is that correct?
I hope you can help me.
I have take in consideration the suggestions you have make me before, I
going to do some things to test it.
Ariel


On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:

> Thanks all you for yours answers, I going to change a few things in my
> application and make tests.
> One thing I haven't find another good pdfToText converter like pdfBox Do
> you know any other faster ?
> Greetings
> Thanks for yours answers
> Ariel
>
>
> On Jan 9, 2008 11:08 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
>
> > Ariel,
> >
> > I believe PDFBox is not the fastest thing and was built more to handle
> > all possible PDFs than for speed (just my impression - Ben, PDFBox's author
> > might still be on this list and might comment).  Pulling data from NFS to
> > index seems like a bad idea.  I hope at least the indices are local and not
> > on a remote NFS...
> >
> > We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which one)
> > and indexing overNFS was slooooooow.
> >
> > Otis
> >
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> > ----- Original Message ----
> > From: Ariel <isaacrc82@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, January 9, 2008 2:50:41 PM
> > Subject: Why is lucene so slow indexing in nfs file system ?
> >
> > Hi:
> > I have seen the post in
> > http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> >  and
> > I am implementing a similar application in a distributed enviroment, a
> > cluster of nodes only 5 nodes. The operating system I use is
> >  Linux(Centos)
> > so I am using nfs file system too to access the home directory where
> >  the
> > documents to be indexed reside and I would like to know how much time
> >  an
> > application spends to index a big amount of documents like 10 Gb ?
> > I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb in
> >  every
> > nodes, LAN: 1Gbits/s.
> >
> > The problem I have is that my application spends a lot of time to index
> >  all
> > the documents, the delay to index 10 gb of pdf documents is about 2
> >  days (to
> > convert pdf to text I am using pdfbox) that is of course a lot of time,
> > others applications based in lucene, for instance ibm omnifind only
> >  takes 5
> > hours to index the same amount of pdfs documents. I would like to find
> >  out
> > why my application has this big delay to index, any help is welcome.
> > Dou you know others distributed architecture application that uses
> >  lucene to
> > index big amounts of documents ? How long time it takes to index ?
> > I hope yo can help me
> > Greetings
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_37626_13343275.1199977528834--

From java-user-return-31895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 15:08:13 2008
Return-Path: <java-user-return-31895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26889 invoked from network); 10 Jan 2008 15:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 15:08:13 -0000
Received: (qmail 81228 invoked by uid 500); 10 Jan 2008 15:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81196 invoked by uid 500); 10 Jan 2008 15:07:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81117 invoked by uid 99); 10 Jan 2008 15:07:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 07:07:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 15:07:42 +0000
Content-class: urn:content-classes:message
Subject: RE: how do I get my own TopDocHitCollector?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 10 Jan 2008 10:07:31 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5638113A@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how do I get my own TopDocHitCollector?
Thread-Index: AchTHoEcfMGqnMrpT7yffl/ifhlH4AAe/acA
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the post. So you're using the doc id as the key into the
cache to retrieve the external id. Then what mechanism fetches the
external id's from the searcher and places them in the cache?


-----Original Message-----
From: Antony Bowesman [mailto:adb@teamware.com]=20
Sent: Wednesday, January 09, 2008 7:19 PM
To: java-user@lucene.apache.org
Subject: Re: how do I get my own TopDocHitCollector?

Beard, Brian wrote:
> Question:
>=20
> The documents that I index have two id's - a unique document id and a
> record_id that can link multiple documents together that belong to a
> common record.
>=20
> I'd like to use something like TopDocs to return the first 1024
results
> that have unique record_id's, but I will want to skip some of the
> returned documents that have the same record_id. We're using the
> ParallelMultiSearcher.=20
>=20
> I read that I could use a HitCollector and throw an exception to get
it
> to stop, but is there a cleaner way?

I'm doing a similar thing.  I have external Ids (equivalent to yout
record_id),=20
which have one or more Lucene Documents associated with them.  I wrote a
custom=20
HitCollector that uses a Map to hold the so far collected external ids
along=20
with the collected document.

I had to write my own priority queue to know when an object was dropped
of the=20
bottom of the score sorted queue, but the latest PriorityQueue on the
trunk now=20
has insertWithOverflow(), which does the same thing.

Note that ResultDoc extends ScoreDoc, so that the external Id of the
item=20
dropped off the queue can be used to remove it from my Map.

Code snippet is somewhat as below (I am caching my external Ids, hence
the cache=20
usage)

    protected Map<OfficeId, ScoreDoc> results;

    public void collect(int doc, float score)
     {
         if (score > 0.0f)
         {
             totalHits++;
             if (pq.size() < numHits || score > minScore)
             {
                 OfficeId id =3D cache.get(doc);
                 ResultDoc rd =3D results.get(id);
                 //  No current result for this ID yet found
                 if (rd =3D=3D null)
                 {
                     rd =3D new ResultDoc(id, doc, score);
                     ResultDoc added =3D pq.insert(rd);
                     if (added =3D=3D null)
                     {
                         //  Nothing dropped of the bottom
                         results.put(id, rd);
                     }
                     else
                     {
                         //  Return value dropped of the bottom
                         results.remove(added.id);
                         results.put(id, rd);
                         remaining++;
                     }
                 }
                 //  Already found this ID, so replace high score if
necessary
                 else
                 {
                     if (score > rd.score)
                     {
                         pq.remove(rd);
                         rd.score =3D score;
                         pq.insert(rd);
                     }
                 }
                 //  Readjust our minimum score again from the top entry
                 minScore =3D pq.peek().score;
             }
             else
                 remaining++;
         }
     }

HTH
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 15:08:51 2008
Return-Path: <java-user-return-31896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26994 invoked from network); 10 Jan 2008 15:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 15:08:51 -0000
Received: (qmail 83459 invoked by uid 500); 10 Jan 2008 15:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83441 invoked by uid 500); 10 Jan 2008 15:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83429 invoked by uid 99); 10 Jan 2008 15:08:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 07:08:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 15:08:09 +0000
Received: by fg-out-1718.google.com with SMTP id d23so787664fga.27
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 07:08:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=+h9+yPxMJVGT4jgLL6EDFfmLFK6iiKTKa0/FVrGa6uw=;
        b=EOvUCOt5xrMG/J+sTCYdmPDlm22Kfkbne7DzNN2PffhABCNvVNTRydMKa9caC9p03u96PgddcSxya9K1ZKkMUmgtlymIwpY9vKpeZnQz/K0yLo6mboeONLGONxGfoVKyqwOashMHpIDwrRt9jnV7rFcCaTaDHPR7OqArh4pNCMk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=tt5Wk+46cv1j76ObS1kIJsrM9nSs5d7Pz08PqWhLbdau8EsRZPhb1m6gIiVqg5rQTlncqC++trdq8LijP+EoA3Nb2ZEQTvOkOPOFrWm+zGlE6LNshyVCQjtlhsyTlqloPt/lT06mzdFea41TCXlgZ+lJj4hQzQe0C8k4Kz0Qcl8=
Received: by 10.86.54.3 with SMTP id c3mr1921187fga.8.1199977693329;
        Thu, 10 Jan 2008 07:08:13 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id b17sm2745254fka.4.2008.01.10.07.08.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 07:08:12 -0800 (PST)
Message-ID: <478634DA.9060307@googlemail.com>
Date: Thu, 10 Jan 2008 16:08:10 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com> <478619B3.80903@gmail.com> <47862719.3000709@googlemail.com> <47862B73.5030708@gmail.com> <47862CA9.30305@googlemail.com>
In-Reply-To: <47862CA9.30305@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Marjan Celikik wrote:
> Mark Miller wrote:
>> The Highlighter works by comparing the TokenStream of the document 
>> with the Tokens in the query. The TokenStream can be rebuilt from the 
>> index if you use TermVectors with TokenSources or you can get it by 
>> reanalyzing the document.  Each Token from the TokenStream is checked 
>> against Tokens in the query, and if there is a match you have a 
>> Highlight. The original text is then reconstructed with the 
>> Highlights from info in the TokenStream about original offsets into 
>> the document for each Token. Also, there is a Fragment system that 
>> will break apart the Highlighted text into score sorted text Fragments.
> OK, this is what I already knew...
>>
>> That is why the original contrib does not work with PhraseQuery's. It 
>> simply matches Tokens from the query with those in the TokenStream. 
>> LUCENE-794 takes the TokenStream and shoves it into a MemoryIndex. 
>> Then, after converting the query to a SpanQuery approximation, 
>> getSpans is called on the index for the query. The Spans provide a 
>> bound on what positions should be Highlighted. Everything else is 
>> done exactly like the original Highlighter (This is a patch that fits 
>> into the original Highlighter framework that was developed, thereby 
>> retaining all of its richness :) ).
>>
>>
> Thanks! This is what I needed. Still I don't know how to obtain the 
> source code of your patch :(
ok, I will just apply the patch. Sorry.

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 15:22:16 2008
Return-Path: <java-user-return-31897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31375 invoked from network); 10 Jan 2008 15:22:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 15:22:15 -0000
Received: (qmail 9949 invoked by uid 500); 10 Jan 2008 15:21:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9927 invoked by uid 500); 10 Jan 2008 15:21:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9916 invoked by uid 99); 10 Jan 2008 15:21:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 07:21:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 15:21:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so792055fga.27
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 07:21:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=s7dC3TWmGqetEmsl0yxPxiBav1/PWj/Z42QHpu8A01k=;
        b=J7n3lB8K+2P4OtnrqDYguAVA8LR8bc3VdHJDafJFdW9QnIwhiaNrk6Gu+9gpbBvUT2JJL3BJA2iWKzH6rZBnA8fb8Nmt8ABGAxrqnqtHuG8lGOUJPiguyvdePOpCT7jd4iDy81CceoerETBuItA5aSzmOpjP61F4fT5VRtnDDYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kKSjCOG7ulOtnHGGORKEAunvlDU+5l62j6ZGaiZsOI+tFWISFNjWlobLOFkq120+iJmtyMSpEX/r7GK9W3OlUMd5vyMG00H3KRf7tHlHjqzEaO8nMdRU3ZOI53iXAbl9GeR4n6SYudotS7eZ4BDQ44X/+XWyIHf3Yc++uH+Ooj0=
Received: by 10.82.150.20 with SMTP id x20mr3329532bud.37.1199978495317;
        Thu, 10 Jan 2008 07:21:35 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 10 Jan 2008 07:21:35 -0800 (PST)
Message-ID: <359a92830801100721k43f1659eo491e2e58b844bead@mail.gmail.com>
Date: Thu, 10 Jan 2008 10:21:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
In-Reply-To: <bf1404350801100705m23b0572aj4f15fc103467ea31@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51837_16146941.1199978495305"
References: <938941.33236.qm@web50310.mail.re2.yahoo.com>
	 <bf1404350801100545r7d133f75hf93dcddd67c81634@mail.gmail.com>
	 <bf1404350801100705m23b0572aj4f15fc103467ea31@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51837_16146941.1199978495305
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This seems really clunky. Especially if your merge step also optimizes.

There's not much point in indexing into RAM then merging explicitly.
Just use an FSDirectory rather than a RAMDirectory. There is *already*
buffering built in to FSDirectory, and your merge factor etc. control
how much RAM is used before flushing to disk. There's considerable
discussion of this on the Wiki I believe, but in the mail archive for sure.
And I believe there's a RAM usage based flushing policy somewhere.

You're adding complexity where it's probably not necessary. Did you
adopt this scheme because you *thought* it would be faster or because
you were addressing a *known* problem? Don't *ever* write complex code
to support a theoretical case unless you have considerable certainty
that it really is a problem. "It would be faster" is a weak argument when
you don't know whether you're talking about saving 1% or 95%. The
added maintenance is just not worth it.

There's a famous quote about that from Donald Knuth
(paraphrasing Hoare) "We should forget about small efficiencies,
say about 97% of the time: premature optimization is the root of
all evil." It's true.

So the very *first* measurement I'd take is to get rid of the in-RAM
stuff and just write the index to local disk. I suspect you'll be *far*
better off doing this then just copying your index to the nfs mount.

Best
Erick

On Jan 10, 2008 10:05 AM, Ariel <isaacrc82@gmail.com> wrote:

> In a distributed enviroment the application should make an exhaustive use
> of
> the network and there is not another way to access to the documents in a
> remote repository but accessing in nfs file system.
> One thing I must clarify: I index the documents in memory, I use
> RAMDirectory to do that, then when the RAMDirectory reach the limit(I have
> put about 10 Mb) then I serialize to disk(nfs) the index to merge it with
> the central index(the central index is in nfs file system), is that
> correct?
> I hope you can help me.
> I have take in consideration the suggestions you have make me before, I
> going to do some things to test it.
> Ariel
>
>
> On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:
>
> > Thanks all you for yours answers, I going to change a few things in my
> > application and make tests.
> > One thing I haven't find another good pdfToText converter like pdfBox Do
> > you know any other faster ?
> > Greetings
> > Thanks for yours answers
> > Ariel
> >
> >
> > On Jan 9, 2008 11:08 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > wrote:
> >
> > > Ariel,
> > >
> > > I believe PDFBox is not the fastest thing and was built more to handle
> > > all possible PDFs than for speed (just my impression - Ben, PDFBox's
> author
> > > might still be on this list and might comment).  Pulling data from NFS
> to
> > > index seems like a bad idea.  I hope at least the indices are local
> and not
> > > on a remote NFS...
> > >
> > > We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which
> one)
> > > and indexing overNFS was slooooooow.
> > >
> > > Otis
> > >
> > > --
> > > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > >
> > > ----- Original Message ----
> > > From: Ariel <isaacrc82@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Wednesday, January 9, 2008 2:50:41 PM
> > > Subject: Why is lucene so slow indexing in nfs file system ?
> > >
> > > Hi:
> > > I have seen the post in
> > >
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> > >  and
> > > I am implementing a similar application in a distributed enviroment, a
> > > cluster of nodes only 5 nodes. The operating system I use is
> > >  Linux(Centos)
> > > so I am using nfs file system too to access the home directory where
> > >  the
> > > documents to be indexed reside and I would like to know how much time
> > >  an
> > > application spends to index a big amount of documents like 10 Gb ?
> > > I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb in
> > >  every
> > > nodes, LAN: 1Gbits/s.
> > >
> > > The problem I have is that my application spends a lot of time to
> index
> > >  all
> > > the documents, the delay to index 10 gb of pdf documents is about 2
> > >  days (to
> > > convert pdf to text I am using pdfbox) that is of course a lot of
> time,
> > > others applications based in lucene, for instance ibm omnifind only
> > >  takes 5
> > > hours to index the same amount of pdfs documents. I would like to find
> > >  out
> > > why my application has this big delay to index, any help is welcome.
> > > Dou you know others distributed architecture application that uses
> > >  lucene to
> > > index big amounts of documents ? How long time it takes to index ?
> > > I hope yo can help me
> > > Greetings
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_51837_16146941.1199978495305--

From java-user-return-31898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 15:30:40 2008
Return-Path: <java-user-return-31898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33628 invoked from network); 10 Jan 2008 15:30:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 15:30:40 -0000
Received: (qmail 26661 invoked by uid 500); 10 Jan 2008 15:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26627 invoked by uid 500); 10 Jan 2008 15:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26616 invoked by uid 99); 10 Jan 2008 15:30:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 07:30:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of celikik@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 15:29:58 +0000
Received: by ug-out-1314.google.com with SMTP id u40so256528ugc.29
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 07:30:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        bh=CtKkw9bCmwV1Sb5y8rXVO0v27i2iT/mW99Dq5ZTvsp0=;
        b=KLqSdPdpjmPdoMdjO0j0hlZFsmxiovGI6tjs2vObGJsqmBWtpOzZgFI6YtRfE17HK3XDf5yZiqXyK2UCRjkI91HQtD3gcTQMIDxxxTziGLc18Ku6nl991mFOt3160d3E0rud87G9nN09LBW7AQdBF+YvloP0F3uXOW6B3j3jp64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding:from;
        b=wyRgfU3GiWUitIkhguLG6leFcvcw53U30NNui2p35JibdRSV1AwzviYSa5yBsTZixmLQSLYsPgp8KEFZG24+rXmnO/OrTkNG6wk+CrMaw83BQeDfbyhdtUIUOKijC776UF1uPuKqu1b/Hn0TZsJLmlRzEKwfSCnIKNe4l+noh7c=
Received: by 10.67.115.19 with SMTP id s19mr3322375ugm.70.1199979002931;
        Thu, 10 Jan 2008 07:30:02 -0800 (PST)
Received: from ?139.19.14.30? ( [139.19.14.30])
        by mx.google.com with ESMTPS id p38sm2786520fke.13.2008.01.10.07.30.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 07:30:01 -0800 (PST)
Message-ID: <478639F8.60300@googlemail.com>
Date: Thu, 10 Jan 2008 16:30:00 +0100
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com> <478619B3.80903@gmail.com> <47862719.3000709@googlemail.com> <47862B73.5030708@gmail.com>
In-Reply-To: <47862B73.5030708@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: Marjan Celikik <celikik@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
>
> That is why the original contrib does not work with PhraseQuery's. It 
> simply matches Tokens from the query with those in the TokenStream. 
> LUCENE-794 takes the TokenStream and shoves it into a MemoryIndex. 
> Then, after converting the query to a SpanQuery approximation, 
> getSpans is called on the index for the query. The Spans provide a 
> bound on what positions should be Highlighted. Everything else is done 
> exactly like the original Highlighter (This is a patch that fits into 
> the original Highlighter framework that was developed, thereby 
> retaining all of its richness :) ).
>
>
Mark, thanks for your patience! I have one final (conceptual, 
high-level) question concerning the usage of the MemoryIndex index over 
the TokenStream. Is it a good idea to
store the procomputed MemoryIndex (conceptually speaking) as a field 
into each document at indexing time and then just load this precomputed 
index from
disk (as you do with TermVector) such that you save extra computation 
for the highlighting?

Marjan.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 16:18:52 2008
Return-Path: <java-user-return-31899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60797 invoked from network); 10 Jan 2008 16:18:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 16:18:52 -0000
Received: (qmail 17981 invoked by uid 500); 10 Jan 2008 16:18:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17958 invoked by uid 500); 10 Jan 2008 16:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17947 invoked by uid 99); 10 Jan 2008 16:18:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 08:18:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 16:18:10 +0000
Received: by py-out-1112.google.com with SMTP id a73so902199pye.9
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 08:18:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=BKn5wOHZd5AgbzWufVzf8otd8ffhJ0a5n8Jp3cqfZYQ=;
        b=on4KhqT6q3QNSDRam1ZHjLqzFGqEkO5iwSfvuIfYgrEO2FW/aCb099lOKx/83XPon+G2LCnxYCNXJVqE8kOkj9VHfiXnO85pFR686CZoKAajY3uxn9wGVA26EjHj0ZFXP6QEOSjoTFi3yQpmxTvJOjUQAwhGOFYa9JiKjF7EsPk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=w3wdy6FUOj5F1wxTC6brKydfQy8ZEzJQIDIKBLOByLobUj2t6hYOCmG8aVeoFJe+a8GFGmRRXClF8qk0RifopcaefmastHnBGkkldUeuHJtPIIvvwbXr6bMnFmoosjOVShqTJo3l9a4kbQS9gIu/T8/A8lsGRdD4h9bx21n/9HY=
Received: by 10.65.81.10 with SMTP id i10mr4589239qbl.75.1199981894374;
        Thu, 10 Jan 2008 08:18:14 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id d5sm1381722qbd.18.2008.01.10.08.18.13
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 10 Jan 2008 08:18:13 -0800 (PST)
Message-ID: <47864542.9030501@gmail.com>
Date: Thu, 10 Jan 2008 11:18:10 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlighting + phrase queries
References: <47852AF3.3080209@googlemail.com> <4785332B.8000808@gmail.com> <47860B5E.4010300@googlemail.com> <478619B3.80903@gmail.com> <47862719.3000709@googlemail.com> <47862B73.5030708@gmail.com> <478639F8.60300@googlemail.com>
In-Reply-To: <478639F8.60300@googlemail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think you would see much of gain. Shoving the TokenStream into 
the MemoryIndex is actually pretty fast and I wouldn't be surprised if 
it was much faster than reading from disk. Most of the computational 
time is spent in reconstructing the TokenStream, whether you use 
term-vectors or re-analyze. Also, if the Query does not have any 
position sensitive clauses, no MemoryIndex is created, so no worries there.

The great speed challenge of the current method (other than needing a 
TokenStream created) is that it runs over each Token and stitches the 
document together a piece at a time. This doesn't scale well on huge 
docs. There are ways to cut this down and to just analyze the pertinent 
Tokens as is done by a different patch. However, you'd need to have 
TermVectors stored, and the concept doesn't fit with the current 
Highlighter framework, which already has some significant functionality 
and robustness.

- Mark

Marjan Celikik wrote:
> Mark Miller wrote:
>>
>> That is why the original contrib does not work with PhraseQuery's. It 
>> simply matches Tokens from the query with those in the TokenStream. 
>> LUCENE-794 takes the TokenStream and shoves it into a MemoryIndex. 
>> Then, after converting the query to a SpanQuery approximation, 
>> getSpans is called on the index for the query. The Spans provide a 
>> bound on what positions should be Highlighted. Everything else is 
>> done exactly like the original Highlighter (This is a patch that fits 
>> into the original Highlighter framework that was developed, thereby 
>> retaining all of its richness :) ).
>>
>>
> Mark, thanks for your patience! I have one final (conceptual, 
> high-level) question concerning the usage of the MemoryIndex index 
> over the TokenStream. Is it a good idea to
> store the procomputed MemoryIndex (conceptually speaking) as a field 
> into each document at indexing time and then just load this 
> precomputed index from
> disk (as you do with TermVector) such that you save extra computation 
> for the highlighting?
>
> Marjan.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 16:30:06 2008
Return-Path: <java-user-return-31900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66004 invoked from network); 10 Jan 2008 16:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 16:30:06 -0000
Received: (qmail 42939 invoked by uid 500); 10 Jan 2008 16:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42905 invoked by uid 500); 10 Jan 2008 16:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42894 invoked by uid 99); 10 Jan 2008 16:29:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 08:29:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.242] (HELO hs-out-2122.google.com) (64.233.178.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 16:29:22 +0000
Received: by hs-out-2122.google.com with SMTP id 54so679573hsz.5
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 08:29:18 -0800 (PST)
Received: by 10.142.239.11 with SMTP id m11mr1085767wfh.183.1199982557193;
        Thu, 10 Jan 2008 08:29:17 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 67sm4089710wra.30.2008.01.10.08.29.15
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 10 Jan 2008 08:29:16 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <359a92830801100721k43f1659eo491e2e58b844bead@mail.gmail.com>
References: <938941.33236.qm@web50310.mail.re2.yahoo.com> <bf1404350801100545r7d133f75hf93dcddd67c81634@mail.gmail.com> <bf1404350801100705m23b0572aj4f15fc103467ea31@mail.gmail.com> <359a92830801100721k43f1659eo491e2e58b844bead@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9E539983-1335-4839-A776-967E0461179B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Why is lucene so slow indexing in nfs file system ?
Date: Thu, 10 Jan 2008 11:29:22 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


If possible you should also test the soon-to-be-released version 2.3,  
which has a number of speedups to indexing.

Also try the steps here:

   http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

You should also try an A/B test: A) writing your index to the NFS  
directory and then B) to a local IO system, to see how much NFS is  
really slowing you down.

Mike

Erick Erickson wrote:

> This seems really clunky. Especially if your merge step also  
> optimizes.
>
> There's not much point in indexing into RAM then merging explicitly.
> Just use an FSDirectory rather than a RAMDirectory. There is *already*
> buffering built in to FSDirectory, and your merge factor etc. control
> how much RAM is used before flushing to disk. There's considerable
> discussion of this on the Wiki I believe, but in the mail archive  
> for sure.
> And I believe there's a RAM usage based flushing policy somewhere.
>
> You're adding complexity where it's probably not necessary. Did you
> adopt this scheme because you *thought* it would be faster or because
> you were addressing a *known* problem? Don't *ever* write complex code
> to support a theoretical case unless you have considerable certainty
> that it really is a problem. "It would be faster" is a weak  
> argument when
> you don't know whether you're talking about saving 1% or 95%. The
> added maintenance is just not worth it.
>
> There's a famous quote about that from Donald Knuth
> (paraphrasing Hoare) "We should forget about small efficiencies,
> say about 97% of the time: premature optimization is the root of
> all evil." It's true.
>
> So the very *first* measurement I'd take is to get rid of the in-RAM
> stuff and just write the index to local disk. I suspect you'll be  
> *far*
> better off doing this then just copying your index to the nfs mount.
>
> Best
> Erick
>
> On Jan 10, 2008 10:05 AM, Ariel <isaacrc82@gmail.com> wrote:
>
>> In a distributed enviroment the application should make an  
>> exhaustive use
>> of
>> the network and there is not another way to access to the  
>> documents in a
>> remote repository but accessing in nfs file system.
>> One thing I must clarify: I index the documents in memory, I use
>> RAMDirectory to do that, then when the RAMDirectory reach the limit 
>> (I have
>> put about 10 Mb) then I serialize to disk(nfs) the index to merge  
>> it with
>> the central index(the central index is in nfs file system), is that
>> correct?
>> I hope you can help me.
>> I have take in consideration the suggestions you have make me  
>> before, I
>> going to do some things to test it.
>> Ariel
>>
>>
>> On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:
>>
>>> Thanks all you for yours answers, I going to change a few things  
>>> in my
>>> application and make tests.
>>> One thing I haven't find another good pdfToText converter like  
>>> pdfBox Do
>>> you know any other faster ?
>>> Greetings
>>> Thanks for yours answers
>>> Ariel
>>>
>>>
>>> On Jan 9, 2008 11:08 PM, Otis Gospodnetic  
>>> <otis_gospodnetic@yahoo.com>
>>> wrote:
>>>
>>>> Ariel,
>>>>
>>>> I believe PDFBox is not the fastest thing and was built more to  
>>>> handle
>>>> all possible PDFs than for speed (just my impression - Ben,  
>>>> PDFBox's
>> author
>>>> might still be on this list and might comment).  Pulling data  
>>>> from NFS
>> to
>>>> index seems like a bad idea.  I hope at least the indices are local
>> and not
>>>> on a remote NFS...
>>>>
>>>> We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which
>> one)
>>>> and indexing overNFS was slooooooow.
>>>>
>>>> Otis
>>>>
>>>> --
>>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>>
>>>> ----- Original Message ----
>>>> From: Ariel <isaacrc82@gmail.com>
>>>> To: java-user@lucene.apache.org
>>>> Sent: Wednesday, January 9, 2008 2:50:41 PM
>>>> Subject: Why is lucene so slow indexing in nfs file system ?
>>>>
>>>> Hi:
>>>> I have seen the post in
>>>>
>> http://www.mail-archive.com/lucene-user@jakarta.apache.org/ 
>> msg12700.html
>>>>  and
>>>> I am implementing a similar application in a distributed  
>>>> enviroment, a
>>>> cluster of nodes only 5 nodes. The operating system I use is
>>>>  Linux(Centos)
>>>> so I am using nfs file system too to access the home directory  
>>>> where
>>>>  the
>>>> documents to be indexed reside and I would like to know how much  
>>>> time
>>>>  an
>>>> application spends to index a big amount of documents like 10 Gb ?
>>>> I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512  
>>>> Mb in
>>>>  every
>>>> nodes, LAN: 1Gbits/s.
>>>>
>>>> The problem I have is that my application spends a lot of time to
>> index
>>>>  all
>>>> the documents, the delay to index 10 gb of pdf documents is about 2
>>>>  days (to
>>>> convert pdf to text I am using pdfbox) that is of course a lot of
>> time,
>>>> others applications based in lucene, for instance ibm omnifind only
>>>>  takes 5
>>>> hours to index the same amount of pdfs documents. I would like  
>>>> to find
>>>>  out
>>>> why my application has this big delay to index, any help is  
>>>> welcome.
>>>> Dou you know others distributed architecture application that uses
>>>>  lucene to
>>>> index big amounts of documents ? How long time it takes to index ?
>>>> I hope yo can help me
>>>> Greetings
>>>>
>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 16:39:23 2008
Return-Path: <java-user-return-31901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68980 invoked from network); 10 Jan 2008 16:39:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 16:39:23 -0000
Received: (qmail 66637 invoked by uid 500); 10 Jan 2008 16:39:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66470 invoked by uid 500); 10 Jan 2008 16:39:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66459 invoked by uid 99); 10 Jan 2008 16:39:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 08:39:05 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 16:38:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JD0QX-0003uZ-If
	for java-user@lucene.apache.org; Thu, 10 Jan 2008 08:38:45 -0800
Message-ID: <14737981.post@talk.nabble.com>
Date: Thu, 10 Jan 2008 08:38:45 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Retrieve number of terms
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm sure this has been asked a few times before, but i searched and searched
and found no answer (apart from using luke), but I would like to know if
there's a way of retrieving the number of terms in an index.
I tried cycling through a TermEnum, but i doesn't do anything :|
-- 
View this message in context: http://www.nabble.com/Retrieve-number-of-terms-tp14737981p14737981.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 17:02:32 2008
Return-Path: <java-user-return-31902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77699 invoked from network); 10 Jan 2008 17:02:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 17:02:31 -0000
Received: (qmail 23650 invoked by uid 500); 10 Jan 2008 17:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23351 invoked by uid 500); 10 Jan 2008 17:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23340 invoked by uid 99); 10 Jan 2008 17:02:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 09:02:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 17:02:03 +0000
Content-class: urn:content-classes:message
Subject: RE: how do I get my own TopDocHitCollector?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 10 Jan 2008 12:01:55 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5638116A@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how do I get my own TopDocHitCollector?
Thread-Index: AchTHoEcfMGqnMrpT7yffl/ifhlH4AAe/acAAAKKhhA=
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, I've been thinking about this some more. Is the cache mechanism
pulling from the cache if the external id already exists there and then
hitting the searcher if it's not already in the cache (maybe using a
FieldSelector for just retrieving the external id)?

-----Original Message-----
From: Beard, Brian [mailto:Brian.Beard@mybir.com]=20
Sent: Thursday, January 10, 2008 10:08 AM
To: java-user@lucene.apache.org
Subject: RE: how do I get my own TopDocHitCollector?

Thanks for the post. So you're using the doc id as the key into the
cache to retrieve the external id. Then what mechanism fetches the
external id's from the searcher and places them in the cache?


-----Original Message-----
From: Antony Bowesman [mailto:adb@teamware.com]=20
Sent: Wednesday, January 09, 2008 7:19 PM
To: java-user@lucene.apache.org
Subject: Re: how do I get my own TopDocHitCollector?

Beard, Brian wrote:
> Question:
>=20
> The documents that I index have two id's - a unique document id and a
> record_id that can link multiple documents together that belong to a
> common record.
>=20
> I'd like to use something like TopDocs to return the first 1024
results
> that have unique record_id's, but I will want to skip some of the
> returned documents that have the same record_id. We're using the
> ParallelMultiSearcher.=20
>=20
> I read that I could use a HitCollector and throw an exception to get
it
> to stop, but is there a cleaner way?

I'm doing a similar thing.  I have external Ids (equivalent to yout
record_id),=20
which have one or more Lucene Documents associated with them.  I wrote a
custom=20
HitCollector that uses a Map to hold the so far collected external ids
along=20
with the collected document.

I had to write my own priority queue to know when an object was dropped
of the=20
bottom of the score sorted queue, but the latest PriorityQueue on the
trunk now=20
has insertWithOverflow(), which does the same thing.

Note that ResultDoc extends ScoreDoc, so that the external Id of the
item=20
dropped off the queue can be used to remove it from my Map.

Code snippet is somewhat as below (I am caching my external Ids, hence
the cache=20
usage)

    protected Map<OfficeId, ScoreDoc> results;

    public void collect(int doc, float score)
     {
         if (score > 0.0f)
         {
             totalHits++;
             if (pq.size() < numHits || score > minScore)
             {
                 OfficeId id =3D cache.get(doc);
                 ResultDoc rd =3D results.get(id);
                 //  No current result for this ID yet found
                 if (rd =3D=3D null)
                 {
                     rd =3D new ResultDoc(id, doc, score);
                     ResultDoc added =3D pq.insert(rd);
                     if (added =3D=3D null)
                     {
                         //  Nothing dropped of the bottom
                         results.put(id, rd);
                     }
                     else
                     {
                         //  Return value dropped of the bottom
                         results.remove(added.id);
                         results.put(id, rd);
                         remaining++;
                     }
                 }
                 //  Already found this ID, so replace high score if
necessary
                 else
                 {
                     if (score > rd.score)
                     {
                         pq.remove(rd);
                         rd.score =3D score;
                         pq.insert(rd);
                     }
                 }
                 //  Readjust our minimum score again from the top entry
                 minScore =3D pq.peek().score;
             }
             else
                 remaining++;
         }
     }

HTH
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 17:06:46 2008
Return-Path: <java-user-return-31903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79072 invoked from network); 10 Jan 2008 17:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 17:06:46 -0000
Received: (qmail 32260 invoked by uid 500); 10 Jan 2008 17:06:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32235 invoked by uid 500); 10 Jan 2008 17:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32224 invoked by uid 99); 10 Jan 2008 17:06:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 09:06:28 -0800
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.81.148.13] (HELO bcn.isoco.net) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 17:06:00 +0000
Received: by bcn.isoco.net (Postfix, from userid 65534)
	id DBB3063D25; Thu, 10 Jan 2008 17:06:05 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on 
	kilimanjaro.bcn.isoco.net
X-Spam-Level: 
Received: from [172.18.3.214] (unknown [172.18.3.214])
	by bcn.isoco.net (Postfix) with ESMTP id 2191F63D21
	for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 17:06:05 +0100 (CET)
Message-ID: <4786507C.1020604@isoco.com>
Date: Thu, 10 Jan 2008 18:06:04 +0100
From: Luis Rodrigo <lrodrigo@isoco.com>
User-Agent: Thunderbird 2.0.0.0 (X11/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Retrieve number of terms
References: <14737981.post@talk.nabble.com>
In-Reply-To: <14737981.post@talk.nabble.com>
Content-Type: multipart/alternative;
 boundary="------------030109020200000209070702"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.3 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	EXCUSE_ES_06,HTML_MESSAGE,HTML_TITLE_EMPTY autolearn=ham version=3.1.7

--------------030109020200000209070702
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hi Chris,

by "number of terms", do you mean the number of different terms that 
compose the index, or the numers of total terms, including repetitions?


chris.b escribi:
> I'm sure this has been asked a few times before, but i searched and searched
> and found no answer (apart from using luke), but I would like to know if
> there's a way of retrieving the number of terms in an index.
> I tried cycling through a TermEnum, but i doesn't do anything :|
>   

-- 

*Luis Rodrigo Aguado*

Innovation and R&D

Research Manager

lrodrigo(at)isoco.com

#T  +34913349777

C/Pedro de Valdivia, 10

28006, Madrid, Spain

* *

*iSOCO** *

            intelligent software for the networked economy

            www.isoco.com <http://www.isoco.com/>

 

Este mensaje se dirige exclusivamente a su destinatario y puede contener 
informacin privilegiada o confidencial. Si no es vd. el destinatario 
indicado, queda notificado de que la utilizacin, divulgacin y/o copia 
sin autorizacin est prohibida en virtud de la legislacin vigente. Si 
ha recibido este mensaje por error, le rogamos que nos lo comunique 
inmediatamente por esta misma va y proceda a su destruccin.

 

This message is intended exclusively for its addressee and may contain 
information that is CONFIDENTIAL and protected by professional 
privilege. If you are not the intended recipient you are hereby notified 
that any dissemination, copy or disclosure of this communication is 
strictly prohibited by law. If this message has been received in error, 
please immediately notify us via e-mail and delete it.


--------------030109020200000209070702--

From java-user-return-31904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 17:07:21 2008
Return-Path: <java-user-return-31904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80544 invoked from network); 10 Jan 2008 17:07:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 17:07:21 -0000
Received: (qmail 34868 invoked by uid 500); 10 Jan 2008 17:07:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34829 invoked by uid 500); 10 Jan 2008 17:07:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34817 invoked by uid 99); 10 Jan 2008 17:07:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 09:07:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 17:06:35 +0000
Received: by nz-out-0506.google.com with SMTP id i28so403939nzi.5
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 09:06:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        bh=ODSdetuBH2zNcDDKgf2bvApH/lTiPI1DHc1UbhcxHic=;
        b=qDMksHrEtJskxF8bMDz31y64yme6WCq1L4TT2ZpSVEdJ0kUdfqNo8b2XZGmTz/4bhVQxdGih10E1Lfx+nb2StlFisDhq1BFaSpb09DQ/BLzin40cO+oXHooaJ6VKLIWb4pz/sEYU9ZvKH/L8aaYfv2pnMFGjmJb3EsLYE1bdBT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=n4puISJHNc4NeCA1ZSY/ac2tWFSJrPDaJ+rRke/BMoPb/R6R2HvpZ/7IlneUFvmsTvIsXVeTbKJJC8aY80dD2hqyIn2zESlaNCixfuzw3BkRCXYhjmLUtWU5C+x/t5MASztS7iVyBBbPo9E2i6JREvQZ0MdmQiMJrVEG+haQlsk=
Received: by 10.141.172.6 with SMTP id z6mr1341437rvo.136.1199984799785;
        Thu, 10 Jan 2008 09:06:39 -0800 (PST)
Received: by 10.141.151.4 with HTTP; Thu, 10 Jan 2008 09:06:39 -0800 (PST)
Message-ID: <bf1404350801100906t7b465ef1n75b0691e257fb589@mail.gmail.com>
Date: Thu, 10 Jan 2008 12:06:39 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
Cc: erickerickson@gmail.com
In-Reply-To: <359a92830801100721k43f1659eo491e2e58b844bead@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37943_2662320.1199984799785"
References: <938941.33236.qm@web50310.mail.re2.yahoo.com>
	 <bf1404350801100545r7d133f75hf93dcddd67c81634@mail.gmail.com>
	 <bf1404350801100705m23b0572aj4f15fc103467ea31@mail.gmail.com>
	 <359a92830801100721k43f1659eo491e2e58b844bead@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37943_2662320.1199984799785
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am indexing into RAM then merging explicitly because my application demand
it due to I have design it as a distributed enviroment so many threads or
workers are in different machines indexing into RAM serialize to disk an
another thread in another machine access the segment index to merge it with
the principal one, that is faster than if I had just one thread indexing the
documents, doesn' it ?
Yours suggestions are very useful.
I hope you can help me.
Greetings
Ariel

On Jan 10, 2008 10:21 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> This seems really clunky. Especially if your merge step also optimizes.
>
> There's not much point in indexing into RAM then merging explicitly.
> Just use an FSDirectory rather than a RAMDirectory. There is *already*
> buffering built in to FSDirectory, and your merge factor etc. control
> how much RAM is used before flushing to disk. There's considerable
> discussion of this on the Wiki I believe, but in the mail archive for
> sure.
> And I believe there's a RAM usage based flushing policy somewhere.
>
> You're adding complexity where it's probably not necessary. Did you
> adopt this scheme because you *thought* it would be faster or because
> you were addressing a *known* problem? Don't *ever* write complex code
> to support a theoretical case unless you have considerable certainty
> that it really is a problem. "It would be faster" is a weak argument when
> you don't know whether you're talking about saving 1% or 95%. The
> added maintenance is just not worth it.
>
> There's a famous quote about that from Donald Knuth
> (paraphrasing Hoare) "We should forget about small efficiencies,
> say about 97% of the time: premature optimization is the root of
> all evil." It's true.
>
> So the very *first* measurement I'd take is to get rid of the in-RAM
> stuff and just write the index to local disk. I suspect you'll be *far*
> better off doing this then just copying your index to the nfs mount.
>
> Best
> Erick
>
> On Jan 10, 2008 10:05 AM, Ariel <isaacrc82@gmail.com> wrote:
>
> > In a distributed enviroment the application should make an exhaustive
> use
> > of
> > the network and there is not another way to access to the documents in a
> > remote repository but accessing in nfs file system.
> > One thing I must clarify: I index the documents in memory, I use
> > RAMDirectory to do that, then when the RAMDirectory reach the limit(I
> have
> > put about 10 Mb) then I serialize to disk(nfs) the index to merge it
> with
> > the central index(the central index is in nfs file system), is that
> > correct?
> > I hope you can help me.
> > I have take in consideration the suggestions you have make me before, I
> > going to do some things to test it.
> > Ariel
> >
> >
> > On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:
> >
> > > Thanks all you for yours answers, I going to change a few things in my
> > > application and make tests.
> > > One thing I haven't find another good pdfToText converter like pdfBox
> Do
> > > you know any other faster ?
> > > Greetings
> > > Thanks for yours answers
> > > Ariel
> > >
> > >
> > > On Jan 9, 2008 11:08 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > > wrote:
> > >
> > > > Ariel,
> > > >
> > > > I believe PDFBox is not the fastest thing and was built more to
> handle
> > > > all possible PDFs than for speed (just my impression - Ben, PDFBox's
> > author
> > > > might still be on this list and might comment).  Pulling data from
> NFS
> > to
> > > > index seems like a bad idea.  I hope at least the indices are local
> > and not
> > > > on a remote NFS...
> > > >
> > > > We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which
> > one)
> > > > and indexing overNFS was slooooooow.
> > > >
> > > > Otis
> > > >
> > > > --
> > > > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > > >
> > > > ----- Original Message ----
> > > > From: Ariel <isaacrc82@gmail.com>
> > > > To: java-user@lucene.apache.org
> > > > Sent: Wednesday, January 9, 2008 2:50:41 PM
> > > > Subject: Why is lucene so slow indexing in nfs file system ?
> > > >
> > > > Hi:
> > > > I have seen the post in
> > > >
> > http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> > > >  and
> > > > I am implementing a similar application in a distributed enviroment,
> a
> > > > cluster of nodes only 5 nodes. The operating system I use is
> > > >  Linux(Centos)
> > > > so I am using nfs file system too to access the home directory where
> > > >  the
> > > > documents to be indexed reside and I would like to know how much
> time
> > > >  an
> > > > application spends to index a big amount of documents like 10 Gb ?
> > > > I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb
> in
> > > >  every
> > > > nodes, LAN: 1Gbits/s.
> > > >
> > > > The problem I have is that my application spends a lot of time to
> > index
> > > >  all
> > > > the documents, the delay to index 10 gb of pdf documents is about 2
> > > >  days (to
> > > > convert pdf to text I am using pdfbox) that is of course a lot of
> > time,
> > > > others applications based in lucene, for instance ibm omnifind only
> > > >  takes 5
> > > > hours to index the same amount of pdfs documents. I would like to
> find
> > > >  out
> > > > why my application has this big delay to index, any help is welcome.
> > > > Dou you know others distributed architecture application that uses
> > > >  lucene to
> > > > index big amounts of documents ? How long time it takes to index ?
> > > > I hope yo can help me
> > > > Greetings
> > > >
> > > >
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
>

------=_Part_37943_2662320.1199984799785--

From java-user-return-31905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 19:59:51 2008
Return-Path: <java-user-return-31905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73704 invoked from network); 10 Jan 2008 19:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 19:59:51 -0000
Received: (qmail 43027 invoked by uid 500); 10 Jan 2008 19:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42975 invoked by uid 500); 10 Jan 2008 19:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42964 invoked by uid 99); 10 Jan 2008 19:59:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 11:59:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Jan 2008 19:59:07 +0000
Received: (qmail 82654 invoked by uid 60001); 10 Jan 2008 19:59:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dCMkVbjgWUwYnYeqtg3jIYRk/IOGvOjjFdgE643nFolY9Iou+X3lzokt09e8SpZqd03aonuY52NN2xcguIJUR3V6FEX7g4DtvgUDCANZ8jOH+n4UKaMnlzfT23bQ5LT8+Y4QPyFxJ7FHheNGncv2d0RdoGQb6l2NObiLnYv/UoE=;
X-YMail-OSG: _CDWDSUVM1n152VBlRU7Kj2CWlrvQirDCZDdCM29pjqQHS0hOnT9ngkXaZNSNnlvmX8Py5MKPz1ECZ4sVX7uUmbPXB2JPrS59.675_qTKYi_KghVnlhVNgr45qJ9FiJ1rYIfcia4hWmtLCI-
Received: from [208.125.28.244] by web50306.mail.re2.yahoo.com via HTTP; Thu, 10 Jan 2008 11:59:11 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Thu, 10 Jan 2008 11:59:11 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Why is lucene so slow indexing in nfs file system ?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <552078.82561.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ariel,
 
Comments inline.


----- Original Message ----
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, January 10, 2008 10:05:28 AM
Subject: Re: Why is lucene so slow indexing in nfs file system ?

In a distributed enviroment the application should make an exhaustive
 use of
the network and there is not another way to access to the documents in
 a
remote repository but accessing in nfs file system.

OG: What about SAN connected over FC for example?

One thing I must clarify: I index the documents in memory, I use
RAMDirectory to do that, then when the RAMDirectory reach the limit(I
 have
put about 10 Mb) then I serialize to disk(nfs) the index to merge it
 with
the central index(the central index is in nfs file system), is that
 correct?

OG: Nah, don't bother with RAMDirectory, just use FSDirectory and it will do in-memory thing for you.  Make good use of your RAM and use 2.3 which gives you more control over RAM use during indexing.  Parallelizing indexing over multiple machines and merging at the end is faster, so that's a good approach.  Also, if your boxes have multiple CPUs write your code so that it has multiple worker threads that do indexing and feed docs to IndexWriter.addDocument(Document) to keep the CPUs fully utilized.

OG: Oh, something faster than PDFBox?  There is (can't remember the name now... itextstream or something like that?), though it may not be free like PDFBox.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:

> Thanks all you for yours answers, I going to change a few things in
 my
> application and make tests.
> One thing I haven't find another good pdfToText converter like pdfBox
 Do
> you know any other faster ?
> Greetings
> Thanks for yours answers
> Ariel
>
>
> On Jan 9, 2008 11:08 PM, Otis Gospodnetic
 <otis_gospodnetic@yahoo.com>
> wrote:
>
> > Ariel,
> >
> > I believe PDFBox is not the fastest thing and was built more to
 handle
> > all possible PDFs than for speed (just my impression - Ben,
 PDFBox's author
> > might still be on this list and might comment).  Pulling data from
 NFS to
> > index seems like a bad idea.  I hope at least the indices are local
 and not
> > on a remote NFS...
> >
> > We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which
 one)
> > and indexing overNFS was slooooooow.
> >
> > Otis
> >
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> > ----- Original Message ----
> > From: Ariel <isaacrc82@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, January 9, 2008 2:50:41 PM
> > Subject: Why is lucene so slow indexing in nfs file system ?
> >
> > Hi:
> > I have seen the post in
> >
 http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> >  and
> > I am implementing a similar application in a distributed
 enviroment, a
> > cluster of nodes only 5 nodes. The operating system I use is
> >  Linux(Centos)
> > so I am using nfs file system too to access the home directory
 where
> >  the
> > documents to be indexed reside and I would like to know how much
 time
> >  an
> > application spends to index a big amount of documents like 10 Gb ?
> > I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb
 in
> >  every
> > nodes, LAN: 1Gbits/s.
> >
> > The problem I have is that my application spends a lot of time to
 index
> >  all
> > the documents, the delay to index 10 gb of pdf documents is about 2
> >  days (to
> > convert pdf to text I am using pdfbox) that is of course a lot of
 time,
> > others applications based in lucene, for instance ibm omnifind only
> >  takes 5
> > hours to index the same amount of pdfs documents. I would like to
 find
> >  out
> > why my application has this big delay to index, any help is
 welcome.
> > Dou you know others distributed architecture application that uses
> >  lucene to
> > index big amounts of documents ? How long time it takes to index ?
> > I hope yo can help me
> > Greetings
> >
> >
> >
> >
> >
 ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 20:20:25 2008
Return-Path: <java-user-return-31906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82322 invoked from network); 10 Jan 2008 20:20:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 20:20:25 -0000
Received: (qmail 75876 invoked by uid 500); 10 Jan 2008 20:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75837 invoked by uid 500); 10 Jan 2008 20:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75826 invoked by uid 99); 10 Jan 2008 20:20:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 12:20:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 20:19:55 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0AKJebB004078
	for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 22:19:40 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1amjtf5; 10 Jan 2008 22:19:00 +0200
Message-ID: <47867DCF.1040001@teamware.com>
Date: Fri, 11 Jan 2008 07:19:27 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how do I get my own TopDocHitCollector?
References: <CC2671C08F06704ABFD37ED1EA09AA5638116A@birexchange.BIRPLAZA.local>
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5638116A@birexchange.BIRPLAZA.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 10 Jan 2008 22:19:40 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Beard, Brian wrote:
> Ok, I've been thinking about this some more. Is the cache mechanism
> pulling from the cache if the external id already exists there and then
> hitting the searcher if it's not already in the cache (maybe using a
> FieldSelector for just retrieving the external id)?

I am warming searchers in background and each search has one or more query 
related caches.  The external Id cache is normally preloaded by simply iterating 
terms, e.g.

         String field = fieldName.intern();
         final String[] retArray = new String[reader.maxDoc()];
         TermDocs termDocs = reader.termDocs();
         TermEnum termEnum = reader.terms (new Term (field, ""));
         try
         {
             do
             {
                 Term term = termEnum.term();
                 if (term == null || term.field() != field)
                     break;
                 String termval = term.text();
                 termDocs.seek(termEnum);
                 while (termDocs.next())
                 {
                     retArray[termDocs.doc()] = termval;
                 }
             }
             while (termEnum.next());
         }
         finally
         {
             termDocs.close();
             termEnum.close();
         }
         return retArray;

I do allow for a partial cache, in which case, as you suggest, the searcher uses 
a FieldSelector to get the external Id from the document which then is stored to 
cache.

Antony



> 
> -----Original Message-----
> From: Beard, Brian [mailto:Brian.Beard@mybir.com] 
> Sent: Thursday, January 10, 2008 10:08 AM
> To: java-user@lucene.apache.org
> Subject: RE: how do I get my own TopDocHitCollector?
> 
> Thanks for the post. So you're using the doc id as the key into the
> cache to retrieve the external id. Then what mechanism fetches the
> external id's from the searcher and places them in the cache?
> 
> 
> -----Original Message-----
> From: Antony Bowesman [mailto:adb@teamware.com] 
> Sent: Wednesday, January 09, 2008 7:19 PM
> To: java-user@lucene.apache.org
> Subject: Re: how do I get my own TopDocHitCollector?
> 
> Beard, Brian wrote:
>> Question:
>>
>> The documents that I index have two id's - a unique document id and a
>> record_id that can link multiple documents together that belong to a
>> common record.
>>
>> I'd like to use something like TopDocs to return the first 1024
> results
>> that have unique record_id's, but I will want to skip some of the
>> returned documents that have the same record_id. We're using the
>> ParallelMultiSearcher. 
>>
>> I read that I could use a HitCollector and throw an exception to get
> it
>> to stop, but is there a cleaner way?
> 
> I'm doing a similar thing.  I have external Ids (equivalent to yout
> record_id), 
> which have one or more Lucene Documents associated with them.  I wrote a
> custom 
> HitCollector that uses a Map to hold the so far collected external ids
> along 
> with the collected document.
> 
> I had to write my own priority queue to know when an object was dropped
> of the 
> bottom of the score sorted queue, but the latest PriorityQueue on the
> trunk now 
> has insertWithOverflow(), which does the same thing.
> 
> Note that ResultDoc extends ScoreDoc, so that the external Id of the
> item 
> dropped off the queue can be used to remove it from my Map.
> 
> Code snippet is somewhat as below (I am caching my external Ids, hence
> the cache 
> usage)
> 
>     protected Map<OfficeId, ScoreDoc> results;
> 
>     public void collect(int doc, float score)
>      {
>          if (score > 0.0f)
>          {
>              totalHits++;
>              if (pq.size() < numHits || score > minScore)
>              {
>                  OfficeId id = cache.get(doc);
>                  ResultDoc rd = results.get(id);
>                  //  No current result for this ID yet found
>                  if (rd == null)
>                  {
>                      rd = new ResultDoc(id, doc, score);
>                      ResultDoc added = pq.insert(rd);
>                      if (added == null)
>                      {
>                          //  Nothing dropped of the bottom
>                          results.put(id, rd);
>                      }
>                      else
>                      {
>                          //  Return value dropped of the bottom
>                          results.remove(added.id);
>                          results.put(id, rd);
>                          remaining++;
>                      }
>                  }
>                  //  Already found this ID, so replace high score if
> necessary
>                  else
>                  {
>                      if (score > rd.score)
>                      {
>                          pq.remove(rd);
>                          rd.score = score;
>                          pq.insert(rd);
>                      }
>                  }
>                  //  Readjust our minimum score again from the top entry
>                  minScore = pq.peek().score;
>              }
>              else
>                  remaining++;
>          }
>      }
> 
> HTH
> Antony
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 10 23:27:23 2008
Return-Path: <java-user-return-31907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55352 invoked from network); 10 Jan 2008 23:27:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2008 23:27:23 -0000
Received: (qmail 67918 invoked by uid 500); 10 Jan 2008 23:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67888 invoked by uid 500); 10 Jan 2008 23:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67874 invoked by uid 99); 10 Jan 2008 23:27:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 15:27:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 23:26:39 +0000
Received: by rv-out-0910.google.com with SMTP id k20so833873rvb.5
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 15:26:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=d8LJiKgqBZfbXLIFEjQLeHvxhhuxF/HATjPQYSpNZAo=;
        b=PVuda8BdPfUeLV8lTflxpErwzb3w812k+NB9cRwfc4YuEl73o5d4k+I67Z1pQC3ATK4oOkZTwcODiKGORA/tMk/3Cg+O9e6mwtfMrROKfaA4xJ+7QIoeLOlGAdOFx/9MUZXQddpMNLg8/YDPx85CNyN/PjxO+JB0JlAfsHVNg6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=x6y0zwDFMkeVhCoSC3l6mTqmzPYPMqyPSyR4BLZ2Lp3Kqz85yZUrcCgk7nrgGaGcrmCJUJlRaCSkZQecrtXLLPdO+x2bO0J37a45FoFJCfukZML1SxaPU7ZGc30xuaNrvrlE08LVtITKONN0McV2uXPm8TRGjUp9E8N4H4icN7o=
Received: by 10.141.129.14 with SMTP id g14mr1583708rvn.209.1200007604077;
        Thu, 10 Jan 2008 15:26:44 -0800 (PST)
Received: by 10.141.151.4 with HTTP; Thu, 10 Jan 2008 15:26:44 -0800 (PST)
Message-ID: <bf1404350801101526q2f204c89m13f0131aa187e0a6@mail.gmail.com>
Date: Thu, 10 Jan 2008 18:26:44 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
In-Reply-To: <552078.82561.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38855_31572745.1200007604067"
References: <552078.82561.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38855_31572745.1200007604067
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for yours suggestions.

I'm sorry I didn't know but I would want to know what Do you mean with "SAN"
and "FC"?

Another thing, I have visited the lucene home page and there is not released
the 2.3 version, could you tell me where is the download link ?

Thanks in advance.
Ariel

On Jan 10, 2008 2:59 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Ariel,
>
> Comments inline.
>
>
> ----- Original Message ----
> From: Ariel <isaacrc82@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, January 10, 2008 10:05:28 AM
> Subject: Re: Why is lucene so slow indexing in nfs file system ?
>
> In a distributed enviroment the application should make an exhaustive
>  use of
> the network and there is not another way to access to the documents in
>  a
> remote repository but accessing in nfs file system.
>
> OG: What about SAN connected over FC for example?
>
> One thing I must clarify: I index the documents in memory, I use
> RAMDirectory to do that, then when the RAMDirectory reach the limit(I
>  have
> put about 10 Mb) then I serialize to disk(nfs) the index to merge it
>  with
> the central index(the central index is in nfs file system), is that
>  correct?
>
> OG: Nah, don't bother with RAMDirectory, just use FSDirectory and it will
> do in-memory thing for you.  Make good use of your RAM and use 2.3 which
> gives you more control over RAM use during indexing.  Parallelizing indexing
> over multiple machines and merging at the end is faster, so that's a good
> approach.  Also, if your boxes have multiple CPUs write your code so that it
> has multiple worker threads that do indexing and feed docs to
> IndexWriter.addDocument(Document) to keep the CPUs fully utilized.
>
> OG: Oh, something faster than PDFBox?  There is (can't remember the name
> now... itextstream or something like that?), though it may not be free like
> PDFBox.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:
>
> > Thanks all you for yours answers, I going to change a few things in
>  my
> > application and make tests.
> > One thing I haven't find another good pdfToText converter like pdfBox
>  Do
> > you know any other faster ?
> > Greetings
> > Thanks for yours answers
> > Ariel
> >
> >
> > On Jan 9, 2008 11:08 PM, Otis Gospodnetic
>  <otis_gospodnetic@yahoo.com>
> > wrote:
> >
> > > Ariel,
> > >
> > > I believe PDFBox is not the fastest thing and was built more to
>  handle
> > > all possible PDFs than for speed (just my impression - Ben,
>  PDFBox's author
> > > might still be on this list and might comment).  Pulling data from
>  NFS to
> > > index seems like a bad idea.  I hope at least the indices are local
>  and not
> > > on a remote NFS...
> > >
> > > We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which
>  one)
> > > and indexing overNFS was slooooooow.
> > >
> > > Otis
> > >
> > > --
> > > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > >
> > > ----- Original Message ----
> > > From: Ariel <isaacrc82@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Wednesday, January 9, 2008 2:50:41 PM
> > > Subject: Why is lucene so slow indexing in nfs file system ?
> > >
> > > Hi:
> > > I have seen the post in
> > >
>  http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> > >  and
> > > I am implementing a similar application in a distributed
>  enviroment, a
> > > cluster of nodes only 5 nodes. The operating system I use is
> > >  Linux(Centos)
> > > so I am using nfs file system too to access the home directory
>  where
> > >  the
> > > documents to be indexed reside and I would like to know how much
>  time
> > >  an
> > > application spends to index a big amount of documents like 10 Gb ?
> > > I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb
>  in
> > >  every
> > > nodes, LAN: 1Gbits/s.
> > >
> > > The problem I have is that my application spends a lot of time to
>  index
> > >  all
> > > the documents, the delay to index 10 gb of pdf documents is about 2
> > >  days (to
> > > convert pdf to text I am using pdfbox) that is of course a lot of
>  time,
> > > others applications based in lucene, for instance ibm omnifind only
> > >  takes 5
> > > hours to index the same amount of pdfs documents. I would like to
>  find
> > >  out
> > > why my application has this big delay to index, any help is
>  welcome.
> > > Dou you know others distributed architecture application that uses
> > >  lucene to
> > > index big amounts of documents ? How long time it takes to index ?
> > > I hope yo can help me
> > > Greetings
> > >
> > >
> > >
> > >
> > >
>  ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38855_31572745.1200007604067--

From java-user-return-31908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 04:33:12 2008
Return-Path: <java-user-return-31908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53219 invoked from network); 11 Jan 2008 04:33:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 04:33:11 -0000
Received: (qmail 3651 invoked by uid 500); 11 Jan 2008 04:32:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3616 invoked by uid 500); 11 Jan 2008 04:32:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3605 invoked by uid 99); 11 Jan 2008 04:32:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 20:32:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 04:32:29 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1043620fga.27
        for <java-user@lucene.apache.org>; Thu, 10 Jan 2008 20:32:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=VaPvUDygemwf8dmUZDrwUEqwpov3pRRLUnmIo64Tqcc=;
        b=mrVhHiiGOWC+zDEEhRlnu4utwPVo1o0XN4W3bah1UZkVUwiy/9yHlWUkNxI/ZGMVegS6X6gqb8hEypXBIgSf8FbMOlAEf9XZVhCrKBzlW2ZJxVD1+/QOqpd6UnxknlF/xhDDcRDj31U0M8hJ856Hliq2BK2GB+aLYCOtH4/KWAE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rCIJY4wFj3SGrZdLBSpvVTiym4osQKXvalYMXZJTSaNrzwR1ntVc/M3wmFrMK6NYCKnDtsKRPpcEGN9WRB9Cjw+xN6lpuetfck3vBxBIiY/Gm9sX5PGerelr2E+YNcJnhgE1HoK3AEpGfhQxgsUASsy986uP4Yk38e0sVQ1yKXw=
Received: by 10.78.193.5 with SMTP id q5mr3299173huf.4.1200025950265;
        Thu, 10 Jan 2008 20:32:30 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Thu, 10 Jan 2008 20:32:30 -0800 (PST)
Message-ID: <6e3ae6310801102032s446967d3xd90bd172f9e346fc@mail.gmail.com>
Date: Thu, 10 Jan 2008 20:32:30 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why is lucene so slow indexing in nfs file system ?
In-Reply-To: <bf1404350801101526q2f204c89m13f0131aa187e0a6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <552078.82561.qm@web50306.mail.re2.yahoo.com>
	 <bf1404350801101526q2f204c89m13f0131aa187e0a6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SAN is Storage Area Network. FC is fiber channel.

I can confirm by one customer experience that using SAN does scale
pretty well, and pretty simple. Well, it costs some money.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Jan 10, 2008 3:26 PM, Ariel <isaacrc82@gmail.com> wrote:
> Thanks for yours suggestions.
>
> I'm sorry I didn't know but I would want to know what Do you mean with "SAN"
> and "FC"?
>
> Another thing, I have visited the lucene home page and there is not released
> the 2.3 version, could you tell me where is the download link ?
>
> Thanks in advance.
> Ariel
>
> On Jan 10, 2008 2:59 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>
> wrote:
>
> > Ariel,
> >
> > Comments inline.
> >
> >
> > ----- Original Message ----
> > From: Ariel <isaacrc82@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Thursday, January 10, 2008 10:05:28 AM
> > Subject: Re: Why is lucene so slow indexing in nfs file system ?
> >
> > In a distributed enviroment the application should make an exhaustive
> >  use of
> > the network and there is not another way to access to the documents in
> >  a
> > remote repository but accessing in nfs file system.
> >
> > OG: What about SAN connected over FC for example?
> >
> > One thing I must clarify: I index the documents in memory, I use
> > RAMDirectory to do that, then when the RAMDirectory reach the limit(I
> >  have
> > put about 10 Mb) then I serialize to disk(nfs) the index to merge it
> >  with
> > the central index(the central index is in nfs file system), is that
> >  correct?
> >
> > OG: Nah, don't bother with RAMDirectory, just use FSDirectory and it will
> > do in-memory thing for you.  Make good use of your RAM and use 2.3 which
> > gives you more control over RAM use during indexing.  Parallelizing indexing
> > over multiple machines and merging at the end is faster, so that's a good
> > approach.  Also, if your boxes have multiple CPUs write your code so that it
> > has multiple worker threads that do indexing and feed docs to
> > IndexWriter.addDocument(Document) to keep the CPUs fully utilized.
> >
> > OG: Oh, something faster than PDFBox?  There is (can't remember the name
> > now... itextstream or something like that?), though it may not be free like
> > PDFBox.
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> > On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:
> >
> > > Thanks all you for yours answers, I going to change a few things in
> >  my
> > > application and make tests.
> > > One thing I haven't find another good pdfToText converter like pdfBox
> >  Do
> > > you know any other faster ?
> > > Greetings
> > > Thanks for yours answers
> > > Ariel
> > >
> > >
> > > On Jan 9, 2008 11:08 PM, Otis Gospodnetic
> >  <otis_gospodnetic@yahoo.com>
> > > wrote:
> > >
> > > > Ariel,
> > > >
> > > > I believe PDFBox is not the fastest thing and was built more to
> >  handle
> > > > all possible PDFs than for speed (just my impression - Ben,
> >  PDFBox's author
> > > > might still be on this list and might comment).  Pulling data from
> >  NFS to
> > > > index seems like a bad idea.  I hope at least the indices are local
> >  and not
> > > > on a remote NFS...
> > > >
> > > > We benchmarked local disk vs. NFS vs. a FC SAN (don't recall which
> >  one)
> > > > and indexing overNFS was slooooooow.
> > > >
> > > > Otis
> > > >
> > > > --
> > > > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > > >
> > > > ----- Original Message ----
> > > > From: Ariel <isaacrc82@gmail.com>
> > > > To: java-user@lucene.apache.org
> > > > Sent: Wednesday, January 9, 2008 2:50:41 PM
> > > > Subject: Why is lucene so slow indexing in nfs file system ?
> > > >
> > > > Hi:
> > > > I have seen the post in
> > > >
> >  http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> > > >  and
> > > > I am implementing a similar application in a distributed
> >  enviroment, a
> > > > cluster of nodes only 5 nodes. The operating system I use is
> > > >  Linux(Centos)
> > > > so I am using nfs file system too to access the home directory
> >  where
> > > >  the
> > > > documents to be indexed reside and I would like to know how much
> >  time
> > > >  an
> > > > application spends to index a big amount of documents like 10 Gb ?
> > > > I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512 Mb
> >  in
> > > >  every
> > > > nodes, LAN: 1Gbits/s.
> > > >
> > > > The problem I have is that my application spends a lot of time to
> >  index
> > > >  all
> > > > the documents, the delay to index 10 gb of pdf documents is about 2
> > > >  days (to
> > > > convert pdf to text I am using pdfbox) that is of course a lot of
> >  time,
> > > > others applications based in lucene, for instance ibm omnifind only
> > > >  takes 5
> > > > hours to index the same amount of pdfs documents. I would like to
> >  find
> > > >  out
> > > > why my application has this big delay to index, any help is
> >  welcome.
> > > > Dou you know others distributed architecture application that uses
> > > >  lucene to
> > > > index big amounts of documents ? How long time it takes to index ?
> > > > I hope yo can help me
> > > > Greetings
> > > >
> > > >
> > > >
> > > >
> > > >
> >  ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 05:31:26 2008
Return-Path: <java-user-return-31909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70189 invoked from network); 11 Jan 2008 05:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 05:31:26 -0000
Received: (qmail 36185 invoked by uid 500); 11 Jan 2008 05:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36149 invoked by uid 500); 11 Jan 2008 05:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36138 invoked by uid 99); 11 Jan 2008 05:31:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jan 2008 21:31:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Jan 2008 05:30:43 +0000
Received: (qmail 94231 invoked by uid 60001); 11 Jan 2008 05:30:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=anj0zIqbbGlfatvzUsWoFkNa1iMcrquACjYl3WTjsjfWO0QhrKZM7RBf22PUmfahxMKCVKqVawrJ6HJkv4FcCsvkVdXC9/mSCa1aumvGFSe8nq6vnyYFHaUpCW879l7YAbKHKZ8Gp0T4R0idpPJDmzvxiy+FrJfRB1LBTQRWH/I=;
X-YMail-OSG: TPi0ipMVM1nauRRzkP3.TELzbsX0P8nY9_U_Oqt4GRGFdMVoSbaxBjphQkaEFKtUhBrc7C5E0thlPbQlLcz7YotEh_T.a5KjXqIiemhefE1CPdaYpQ--
Received: from [72.231.9.236] by web50303.mail.re2.yahoo.com via HTTP; Thu, 10 Jan 2008 21:30:47 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Thu, 10 Jan 2008 21:30:47 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Why is lucene so slow indexing in nfs file system ?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <940877.94041.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

2.3 is in the process of being released.  Give it another week to 10 days and it will be out.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, January 10, 2008 6:26:44 PM
Subject: Re: Why is lucene so slow indexing in nfs file system ?

Thanks for yours suggestions.

I'm sorry I didn't know but I would want to know what Do you mean with
 "SAN"
and "FC"?

Another thing, I have visited the lucene home page and there is not
 released
the 2.3 version, could you tell me where is the download link ?

Thanks in advance.
Ariel

On Jan 10, 2008 2:59 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Ariel,
>
> Comments inline.
>
>
> ----- Original Message ----
> From: Ariel <isaacrc82@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, January 10, 2008 10:05:28 AM
> Subject: Re: Why is lucene so slow indexing in nfs file system ?
>
> In a distributed enviroment the application should make an exhaustive
>  use of
> the network and there is not another way to access to the documents
 in
>  a
> remote repository but accessing in nfs file system.
>
> OG: What about SAN connected over FC for example?
>
> One thing I must clarify: I index the documents in memory, I use
> RAMDirectory to do that, then when the RAMDirectory reach the limit(I
>  have
> put about 10 Mb) then I serialize to disk(nfs) the index to merge it
>  with
> the central index(the central index is in nfs file system), is that
>  correct?
>
> OG: Nah, don't bother with RAMDirectory, just use FSDirectory and it
 will
> do in-memory thing for you.  Make good use of your RAM and use 2.3
 which
> gives you more control over RAM use during indexing.  Parallelizing
 indexing
> over multiple machines and merging at the end is faster, so that's a
 good
> approach.  Also, if your boxes have multiple CPUs write your code so
 that it
> has multiple worker threads that do indexing and feed docs to
> IndexWriter.addDocument(Document) to keep the CPUs fully utilized.
>
> OG: Oh, something faster than PDFBox?  There is (can't remember the
 name
> now... itextstream or something like that?), though it may not be
 free like
> PDFBox.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> On Jan 10, 2008 8:45 AM, Ariel <isaacrc82@gmail.com> wrote:
>
> > Thanks all you for yours answers, I going to change a few things in
>  my
> > application and make tests.
> > One thing I haven't find another good pdfToText converter like
 pdfBox
>  Do
> > you know any other faster ?
> > Greetings
> > Thanks for yours answers
> > Ariel
> >
> >
> > On Jan 9, 2008 11:08 PM, Otis Gospodnetic
>  <otis_gospodnetic@yahoo.com>
> > wrote:
> >
> > > Ariel,
> > >
> > > I believe PDFBox is not the fastest thing and was built more to
>  handle
> > > all possible PDFs than for speed (just my impression - Ben,
>  PDFBox's author
> > > might still be on this list and might comment).  Pulling data
 from
>  NFS to
> > > index seems like a bad idea.  I hope at least the indices are
 local
>  and not
> > > on a remote NFS...
> > >
> > > We benchmarked local disk vs. NFS vs. a FC SAN (don't recall
 which
>  one)
> > > and indexing overNFS was slooooooow.
> > >
> > > Otis
> > >
> > > --
> > > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > >
> > > ----- Original Message ----
> > > From: Ariel <isaacrc82@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Wednesday, January 9, 2008 2:50:41 PM
> > > Subject: Why is lucene so slow indexing in nfs file system ?
> > >
> > > Hi:
> > > I have seen the post in
> > >
>
  http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> > >  and
> > > I am implementing a similar application in a distributed
>  enviroment, a
> > > cluster of nodes only 5 nodes. The operating system I use is
> > >  Linux(Centos)
> > > so I am using nfs file system too to access the home directory
>  where
> > >  the
> > > documents to be indexed reside and I would like to know how much
>  time
> > >  an
> > > application spends to index a big amount of documents like 10 Gb
 ?
> > > I use lucene version 2.2.0, CPU processor xeon dual 2.4 Ghz 512
 Mb
>  in
> > >  every
> > > nodes, LAN: 1Gbits/s.
> > >
> > > The problem I have is that my application spends a lot of time to
>  index
> > >  all
> > > the documents, the delay to index 10 gb of pdf documents is about
 2
> > >  days (to
> > > convert pdf to text I am using pdfbox) that is of course a lot of
>  time,
> > > others applications based in lucene, for instance ibm omnifind
 only
> > >  takes 5
> > > hours to index the same amount of pdfs documents. I would like to
>  find
> > >  out
> > > why my application has this big delay to index, any help is
>  welcome.
> > > Dou you know others distributed architecture application that
 uses
> > >  lucene to
> > > index big amounts of documents ? How long time it takes to index
 ?
> > > I hope yo can help me
> > > Greetings
> > >
> > >
> > >
> > >
> > >
>
  ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 10:35:27 2008
Return-Path: <java-user-return-31910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38520 invoked from network); 11 Jan 2008 10:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 10:35:27 -0000
Received: (qmail 2168 invoked by uid 500); 11 Jan 2008 10:35:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2144 invoked by uid 500); 11 Jan 2008 10:35:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2133 invoked by uid 99); 11 Jan 2008 10:35:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 02:35:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 10:34:44 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JUH00I5L6Q06V@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Fri, 11 Jan 2008 11:34:48 +0100 (MET)
Date: Fri, 11 Jan 2008 11:34:48 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
In-reply-to: <477A9D2E.5010908@gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200047688.3575.58.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <200801011757.49297.lucene@nitwit.de>
 <CFFEE233-A28C-4346-9B38-ED40DC210818@apache.org>
 <200801012040.35900.lucene@nitwit.de> <477A9D2E.5010908@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-01-01 at 15:06 -0500, Mark Miller wrote:
> Perhaps, in some esoteric case, multiple readers is the right idea 
> (monster, monster, super IO system, static index?? maybe...)...but 
> unless you have run into this case and have some data to show it, I 
> would stick with what the community currently designates as best 
> practice. Otherwise, your really just getting ahead of yourself. Single 
> searcher has been scaled to some pretty huge sites. More than one 
> searcher is usually responsible for very slow performance.

I took the opportunity to make a small test. Our index is 37 GB with 10
million records. I tested on a dual-processor Xeon machine with 8 GB of
RAM. The test-material was logged queries from our production system.
I tried with shared searcher between threads and a searcher for each
thread.

As for shared searcher vs. individual searchers, there was just a slight
penalty for using individual searchers. However, all our queries are for
standard ranked searches - no sorting on title or similar, so I see no
reason to disbelieve that multiple searchers often results in poor
performance.

As for threading, I noticed something strange: On the dual-core machine,
two threads gave better performance than one, while 4 threads gave the
same performance as one. I tried it with standard harddisks (two 15.000
RPM in RAID 1) and with Flash drives (two 32GB Samsung in RAID 0) - in
both cases the picture was the same. I would have expected the
performance of four threads to be on par with two threads, or at least
to lie somewhere between one and two threads?


There's some graphs for my measurements at
http://wiki.statsbiblioteket.dk/summa/Hardware
should anyone be interested.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 12:42:59 2008
Return-Path: <java-user-return-31911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78016 invoked from network); 11 Jan 2008 12:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 12:42:59 -0000
Received: (qmail 48921 invoked by uid 500); 11 Jan 2008 12:42:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48892 invoked by uid 500); 11 Jan 2008 12:42:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48881 invoked by uid 99); 11 Jan 2008 12:42:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 04:42:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 12:42:18 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1021801rvb.5
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 04:42:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Nq/bf6iYD3FH2ael3uMRlXde2QAAtezJpgX8bIwD/W0=;
        b=igbx9ncicj6Wl9HM77NT68wIUc8q3bRKqYzaiZ3/QKGkHiqDOCrlgwlppCqf0vJqGuUrus1/NeF0C4Wv1rHjwSzzLrs1iAsikLQOPArOdbAJR+ktvQ9RggovVdCO6mTTARsaNm0mA7fPk0sRBZTZ3wMyEODzC2Ae0GiQkG3SEGs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=MIf13MAs0WTaeU6ikuPGFb999M74/D5RCDPSmC7kaqQVa4NV3xINMEdwqXNkoGgvgo4/TNaRmYIe5WxQaGzwKd7ap+wJz32PB49WssPz/o4U7mZNbad9amdSdbt4KVOdZTKQq5+YObex/K85D4dLszZI7r+sqVKHOTfeKU2+Do8=
Received: by 10.140.251.1 with SMTP id y1mr1965820rvh.149.1200055342670;
        Fri, 11 Jan 2008 04:42:22 -0800 (PST)
Received: by 10.141.154.21 with HTTP; Fri, 11 Jan 2008 04:42:22 -0800 (PST)
Message-ID: <786fde50801110442t4e206813td75e80d4351e1ba9@mail.gmail.com>
Date: Fri, 11 Jan 2008 14:42:22 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Retrieve the number of deleted documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_540_12709665.1200055342645"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_540_12709665.1200055342645
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

I didn't find a proper API on InderWriter or IndexReader to retrieve the
total number of deleted documents.
Will IndexReader.maxDocs() - IndexReader.numDocs() give the correct result?
or this is just a heuristic?

Thanks,

Shai

------=_Part_540_12709665.1200055342645--

From java-user-return-31912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 14:36:37 2008
Return-Path: <java-user-return-31912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11522 invoked from network); 11 Jan 2008 14:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 14:36:37 -0000
Received: (qmail 49940 invoked by uid 500); 11 Jan 2008 14:36:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49702 invoked by uid 500); 11 Jan 2008 14:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49691 invoked by uid 99); 11 Jan 2008 14:36:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 06:36:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Jan 2008 14:36:07 +0000
Received: (qmail invoked by alias); 11 Jan 2008 14:36:00 -0000
Received: from e178106019.adsl.alicedsl.de (EHLO msrvcn04) [85.178.106.19]
  by mail.gmx.net (mp033) with SMTP; 11 Jan 2008 15:36:00 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+BYkEj75CBpuTcQ8epfEJ4nyMYes20gdhZc6/Mfb
	pqTshaH166Xrjm
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
Subject: RE: Design questions
Date: Fri, 11 Jan 2008 15:36:00 +0100
Message-ID: <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
thread-index: AchTEeynn4BnPaurSe6Il6k8L54ZBgBTB5rA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, 


> You could even store all of the page offsets in your 
> meta-data document
> in a special field if you wanted, then lazy-load that field 
> rather than
> dynamically counting. 

How can I lazy load a field?

> You'd have to be careful that your offsets
> corresponded to the data *after* it was analyzed, but that shouldn't
> be too hard. 

The TermPosition is the position after analyzing?

> You'd have to read this field before deleting the doc
> and make sure it was stored with the replacement.....

Don't understand...

> And, since I'm getting random ideas anyway, here's another.
> The PositionIncrementGap is the "distance" (measured in
> terms) between two tokens. Let's claim that you have no
> page with more than 10,000 (or whatever) tokens. Just
> bump the positionincrementgap to the next 10,000 at the
> start of each page. So, the first term on the first page
> has an offset of 0. the first term on the second page
> has an offset of 10,000. The first term on the third
> page has an offset of 20,000.
> 
> Now, with the SpanNearQuery trick from above, your
> term position modulo 10,000 is also your page. This would
> also NOT match across pages. Hmmmm, I kind of like that
> idea.

But I have to know, how many tokens each page has!?

Thank you!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 14:57:25 2008
Return-Path: <java-user-return-31913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19976 invoked from network); 11 Jan 2008 14:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 14:57:25 -0000
Received: (qmail 90040 invoked by uid 500); 11 Jan 2008 14:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90006 invoked by uid 500); 11 Jan 2008 14:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89995 invoked by uid 99); 11 Jan 2008 14:57:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 06:57:08 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 14:56:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JDLJQ-0002Wv-Ln
	for java-user@lucene.apache.org; Fri, 11 Jan 2008 06:56:48 -0800
Message-ID: <14757377.post@talk.nabble.com>
Date: Fri, 11 Jan 2008 06:56:48 -0800 (PST)
From: thrgroovyboy <fabflix2000@yahoo.fr>
To: java-user@lucene.apache.org
Subject: Question about Search formula
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fabflix2000@yahoo.fr
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

When I am searching with lucene, the formula takes care of the number of
total words in the document.

For exemple, an indexed one power-point slide with the term "JAVA" is most
relevent than a 50 pages Word document on JAVA.

It is a problem for me, the Word document on Java should be most relevant
than the only one ppt slide... 

Is there something that I can do ?

Thanks a lot,

Fab
-- 
View this message in context: http://www.nabble.com/Question-about-Search-formula-tp14757377p14757377.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 15:16:45 2008
Return-Path: <java-user-return-31914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96301 invoked from network); 11 Jan 2008 15:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 15:16:45 -0000
Received: (qmail 34111 invoked by uid 500); 11 Jan 2008 15:16:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34068 invoked by uid 500); 11 Jan 2008 15:16:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34056 invoked by uid 99); 11 Jan 2008 15:16:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 07:16:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 15:16:04 +0000
Received: by fk-out-0910.google.com with SMTP id z23so848616fkz.5
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 07:16:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=51Dzzl51gmSqWPKz7CRIEqH8RVuyRemUib0Ja1XLBsA=;
        b=Gw/7SbbOIwJI2isFt/AzS39f8VVX3R6P80YKkHFwkZNCESD6Nso4bupJm5gl54qBKjGjYw5+fVyzYk42vaE3o3M6I9Smg2NG5byOn7c1Nvv7HMKPSllQhE6KSzmmaDOrSAJFeB1b2zee7pmk9K3TnIT0Z6fdPrjv1gvji8Axiy0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aXdI5L9W/qKQ+2RhVYz2xCVHfC7XOSJYKMhVb40QFG9dSHCppJEYbTwB6BQLIjE7dQM629ibzwvCeBrFRQIjydz8MsrObpuFKAopPn+4+mHZLyIbpiR93BcsXdsGn0heH08Ws0RdHhZxNnWDc77dHswxgqkS9Y6V3a/xDpWN984=
Received: by 10.82.138.6 with SMTP id l6mr5456041bud.13.1200064565684;
        Fri, 11 Jan 2008 07:16:05 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 11 Jan 2008 07:16:05 -0800 (PST)
Message-ID: <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com>
Date: Fri, 11 Jan 2008 10:16:05 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design questions
In-Reply-To: <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1796_14217471.1200064565678"
References: <20080109213932.229980@gmx.net>
	 <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
	 <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1796_14217471.1200064565678
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below

On Jan 11, 2008 9:36 AM, <spring@gmx.eu> wrote:

> Hi,
>
>
> > You could even store all of the page offsets in your
> > meta-data document
> > in a special field if you wanted, then lazy-load that field
> > rather than
> > dynamically counting.
>
> How can I lazy load a field?
>

See FieldSelector. Basically, it allows you to determine
which fields are loaded when you fetch a doc. You can still
load the other fields explicitly.


>
> > You'd have to be careful that your offsets
> > corresponded to the data *after* it was analyzed, but that shouldn't
> > be too hard.
>
> The TermPosition is the position after analyzing?
>

Yes. The PositionIncrementGap directly affects this by changing
the positions of two consecutive terms by something other than 1.

To see why it must be this way, consider stop words. Let's say a
stop word is "are". Then indexing "democrats are running for office"
must position "democrats" right next to running, because searching
for, say, span queries with a slop of 0 of "democrats running" and
"democrats are running" should both match. But they wouldn't
if the position of "democrats" was 1 and "running" was 3.


>
> > You'd have to read this field before deleting the doc
> > and make sure it was stored with the replacement.....
>
> Don't understand...
>

If you are deleting a document but NOT reindexing all the text,
you want to preserve any special fields you have stored with the
offsets (if this field is stored in the Lucene doc being replaced)
and put it back into the replacement. Unless you're willing to
re-tokenize all the text to recreate the field.


>
> > And, since I'm getting random ideas anyway, here's another.
> > The PositionIncrementGap is the "distance" (measured in
> > terms) between two tokens. Let's claim that you have no
> > page with more than 10,000 (or whatever) tokens. Just
> > bump the positionincrementgap to the next 10,000 at the
> > start of each page. So, the first term on the first page
> > has an offset of 0. the first term on the second page
> > has an offset of 10,000. The first term on the third
> > page has an offset of 20,000.
> >
> > Now, with the SpanNearQuery trick from above, your
> > term position modulo 10,000 is also your page. This would
> > also NOT match across pages. Hmmmm, I kind of like that
> > idea.
>
> But I have to know, how many tokens each page has!?


No, you only need to know the maximum number of tokens on any page
you're going to index.

Make (that number * some slop factor) * (page number - 1) be the starting
term of each page. I'm assuming here that parsing a number of pages
in your data set and counting will give you a reasonable upper limit.

I suspect that you'll find that the actual number of tokens on a page is
*very* much lower than 10,000. More in the 1,500 range at most. But
only examining your dataset will tell. But you must be sure that whatever
number you use times the most pages you'll index (10,000 in your example?)
is smaller than an int.

And, of course, build in something that'll tell you if this expectation is
violated
during actual indexing of the dataset.

But you could also vary this scheme by simply storing in your document
the offsets for the beginning of each page. You'd have to load the offsets
field whenever you wanted to correlate positions to pages, but this may be
acceptable for your problem space, I haven't a clue since I don't know the
characteristics of your app.

Hope this helps
Erick


>
> Thank you!
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1796_14217471.1200064565678--

From java-user-return-31915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 15:39:44 2008
Return-Path: <java-user-return-31915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12886 invoked from network); 11 Jan 2008 15:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 15:39:44 -0000
Received: (qmail 94806 invoked by uid 500); 11 Jan 2008 15:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94559 invoked by uid 500); 11 Jan 2008 15:39:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94548 invoked by uid 99); 11 Jan 2008 15:39:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 07:39:26 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 15:39:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 7BA46190E2D
	for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 07:39:03 -0800 (PST)
Message-Id: <71F8247C-99FE-4322-BD29-E72577FF0A7E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <14757377.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Question about Search formula
Date: Fri, 11 Jan 2008 10:39:01 -0500
References: <14757377.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the Similarity class and also the Scoring section of  
the website (Documentation-> Scoring on the left hand side)  This is a  
classic problem of dealing with TF/IDF and length normalization.   
Lucene makes general assumptions about what is best, but does allow  
you to tune as well (which can be an abyss one never returns from if  
one isn't careful).

-Grant

On Jan 11, 2008, at 9:56 AM, thrgroovyboy wrote:

>
> Hi,
>
> When I am searching with lucene, the formula takes care of the  
> number of
> total words in the document.
>
> For exemple, an indexed one power-point slide with the term "JAVA"  
> is most
> relevent than a 50 pages Word document on JAVA.
>
> It is a problem for me, the Word document on Java should be most  
> relevant
> than the only one ppt slide...
>
> Is there something that I can do ?
>
> Thanks a lot,
>
> Fab
> -- 
> View this message in context: http://www.nabble.com/Question-about-Search-formula-tp14757377p14757377.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 16:11:42 2008
Return-Path: <java-user-return-31916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31645 invoked from network); 11 Jan 2008 16:11:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 16:11:42 -0000
Received: (qmail 64767 invoked by uid 500); 11 Jan 2008 16:11:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64739 invoked by uid 500); 11 Jan 2008 16:11:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64724 invoked by uid 99); 11 Jan 2008 16:11:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 08:11:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tremerson@gmail.com designates 72.14.202.182 as permitted sender)
Received: from [72.14.202.182] (HELO ro-out-1112.google.com) (72.14.202.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 16:10:59 +0000
Received: by ro-out-1112.google.com with SMTP id k5so1577362rog.7
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 08:11:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=tug+MdjOffpeuuYMlZgddqViNVF0GbYXvGxRVzCjcL4=;
        b=gcbcpz86hI2h8JiblxeO6Az+FL2L9TDz/XnlrjyL/eOux+NVWzRQOJpAJCtvGXhPPNGn01mbu3ZN0AX9QtEQ1fvrd5BXv4PIcf2j6lg8s231kR9QHf/RmS6S6331VGYEVExBpMig9+cJIKCP8XwNIGooXSOeepCwMCbaQvmIl3A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cwIDOUg2jM5soDr4UIi8sr1BIXaNNoI+LT4WiXzOrbnwPz0Pc+v77z/5Xp5b+QCzP2mw3e/S8mvONwQg/3+FecOmKkq0mJf+Np0Rz5jS/cDlEEA3zw/THXlw+OTOVi/+QZ3YUMAPDm1dFlSLychLhvbLBtFIJYkr0nPcb/de5d4=
Received: by 10.114.95.1 with SMTP id s1mr103139wab.99.1200067862603;
        Fri, 11 Jan 2008 08:11:02 -0800 (PST)
Received: by 10.114.205.15 with HTTP; Fri, 11 Jan 2008 08:11:02 -0800 (PST)
Message-ID: <cefddd100801110811x7c6039dw6544ab0feec65a5a@mail.gmail.com>
Date: Fri, 11 Jan 2008 11:11:02 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents
In-Reply-To: <8856DF1FF75B2348A2D4033D1E8A7EE40222A0BC@CORPUSMX10C.corp.emc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2582_25842237.1200067862597"
References: <20071230123825.GA16137@dbruhn.de>
	 <8856DF1FF75B2348A2D4033D1E8A7EE40222A0BC@CORPUSMX10C.corp.emc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2582_25842237.1200067862597
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can utilize the CustomScoreQuery introduced in Lucene 2.2 to provide
this type of functionality. This is quite straight forward to do and works
really well. Since "recentness" is a function of the time the search was
made, we store the appropriate date in an index field and use a
CustomScoreQuery to effect changes to the score based on the current date.
Works like a champ.

    -tree


On Jan 3, 2008 2:33 PM, <Seneviratne_Yasoja@emc.com> wrote:

> IMHO it would be nice if Lucene's Similarity formula took the
> indexed-date of the document into account.  Ideally as an optional
> setting, where the user can provide a date field as well.
>
> Some of the other search engines do - for example Fast's Instream.  It
> makes sense that as documents age over time, they are less important
> than the new ones.
>
> Is JIRA the mechanism where you can add "feature requests" for Lucene?
>
>
> -----Original Message-----
> From: Dominik Bruhn [mailto:dominik@dbruhn.de]
> Sent: Sunday, December 30, 2007 4:38 AM
> To: java-user@lucene.apache.org
> Subject: Re: Prioiritze new documents
>
> Hy,
> a solution came into my mind:
> Every document gets boosted by a integer which I increment each time I
> add a new document to the index. So the newer documents should get a
> bigger boost than the older ones.
>
> I tried it out and ran into a problem:
> Although I set the Boost via doc.setBoost(value) for each document
> before writing it to the index it doesnt change anything. Even worse if
> I look at the index using Luke (Version 0.7.1) each document got a boost
> of 1 not of the value supplied.
>
> Who can help me?
>
> Thanks
> --
> Dominik Bruhn
> mailto: dominik@dbruhn.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree

------=_Part_2582_25842237.1200067862597--

From java-user-return-31917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 16:40:46 2008
Return-Path: <java-user-return-31917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43872 invoked from network); 11 Jan 2008 16:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 16:40:46 -0000
Received: (qmail 21137 invoked by uid 500); 11 Jan 2008 16:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21111 invoked by uid 500); 11 Jan 2008 16:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21100 invoked by uid 99); 11 Jan 2008 16:40:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 08:40:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.10.39.67] (HELO mail.sharedvision.com) (69.10.39.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 16:40:05 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C85470.A140C0FF"
Subject: Lucene sorting case-sensitive by default?
Date: Fri, 11 Jan 2008 11:40:08 -0500
Message-ID: <F700E5D18787514F8EFB5B5CE7423936BE02A2@soho.SVGINTERNET.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene sorting case-sensitive by default?
thread-index: AchUcKBfXktphkG2TCuHqoGX+xVcJA==
From: "Alex Wang" <AWang@sharedvision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C85470.A140C0FF
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

=20

I was searching my index with sorting on a field called "Label" which is
not tokenized, here is what came back:

=20

Extended Sites Catalog Asset Store

Extended Sites Catalog Asset Store SALES

Print Catalog 2

Print catalog test

Test Print Catalog

Test refresh catalog

print test  3

test catalog 1

=20

Looks like Lucene is separating upper case and lower case while sorting.
Can someone shed some light on this as to while this is happening and
how to fix it?

=20

Thanks in advance for your help!

=20

Alex

=20

=20


------_=_NextPart_001_01C85470.A140C0FF--

From java-user-return-31918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 16:52:02 2008
Return-Path: <java-user-return-31918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49730 invoked from network); 11 Jan 2008 16:52:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 16:52:02 -0000
Received: (qmail 34037 invoked by uid 500); 11 Jan 2008 16:51:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33963 invoked by uid 500); 11 Jan 2008 16:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33951 invoked by uid 99); 11 Jan 2008 16:51:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 08:51:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tremerson@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 16:51:20 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2129824wah.11
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 08:51:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=rvvg2SNVQHUt9bdRZLgA1P5Ud4Lk2dxMoZFHweYJ40g=;
        b=sS9KEB0RzKnZxcLPa65+A97VAPkQ2NKrf8ewa9U/M6Y1KJUQyHVkJ1ODJt0H7yWlYmAJSS9phnq5XEYAMMq8Q/mAzqsDHbeqlaFNdGTpJbTb0RSnWLa5Gfnf4gz9W42zI74k3u/rhxEs3XjUScQ8w9Eiuq32S3+ryx7iw9Gwh9A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y4se7IfosYkT6E5zl+mZC2eBv6t5PGPJxXNUpXJ5H2baPqaeWFefGptTNE449DMnQFPMcA+Fx31d1SS/DenbKoxSVoFgd7rvFhqp2URI2fFT5eLqxlgK0FkYMO/EXlRTxCiVm8hCjb/4zF7nHib/PUn5/ugm0cNLEDE8r/051oY=
Received: by 10.114.149.2 with SMTP id w2mr3918847wad.29.1200070285104;
        Fri, 11 Jan 2008 08:51:25 -0800 (PST)
Received: by 10.114.205.15 with HTTP; Fri, 11 Jan 2008 08:51:25 -0800 (PST)
Message-ID: <cefddd100801110851j66cb8cd6qe98f6345ec22450a@mail.gmail.com>
Date: Fri, 11 Jan 2008 11:51:25 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?
In-Reply-To: <F700E5D18787514F8EFB5B5CE7423936BE02A2@soho.SVGINTERNET.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2912_7721563.1200070285098"
References: <F700E5D18787514F8EFB5B5CE7423936BE02A2@soho.SVGINTERNET.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2912_7721563.1200070285098
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

String fields are sorted using natural (lexicographic) order. For characters
in ASCII range this means uppercase letters will sort before lowercase
letters (e.g., 'A' U+0041 sorts before 'a' U+0061). This behaviour is
documented on in the JavaDocs for org.apache.lucene.search.Sort.

    -tree


On Jan 11, 2008 11:40 AM, Alex Wang <AWang@sharedvision.com> wrote:

> Hi All,
>
>
>
> I was searching my index with sorting on a field called "Label" which is
> not tokenized, here is what came back:
>
>
>
> Extended Sites Catalog Asset Store
>
> Extended Sites Catalog Asset Store SALES
>
> Print Catalog 2
>
> Print catalog test
>
> Test Print Catalog
>
> Test refresh catalog
>
> print test  3
>
> test catalog 1
>
>
>
> Looks like Lucene is separating upper case and lower case while sorting.
> Can someone shed some light on this as to while this is happening and
> how to fix it?
>
>
>
> Thanks in advance for your help!
>
>
>
> Alex
>
>
>
>
>
>


-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree <http://www.dreamersrealm.net/%7Etree>

------=_Part_2912_7721563.1200070285098--

From java-user-return-31919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 17:14:01 2008
Return-Path: <java-user-return-31919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62802 invoked from network); 11 Jan 2008 17:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 17:14:01 -0000
Received: (qmail 71574 invoked by uid 500); 11 Jan 2008 17:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71538 invoked by uid 500); 11 Jan 2008 17:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71527 invoked by uid 99); 11 Jan 2008 17:13:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 09:13:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 17:13:19 +0000
Received: by an-out-0708.google.com with SMTP id c5so283052anc.49
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 09:13:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=qu6jB7aA0wOq4icn+WqCWVjwbqZIsWhdHPZM1aG9NLA=;
        b=sW5CCjjuNbSf1/BbIv9yCif4IAZm4uCZtW1maGAjJdR7z6B7DrAVRbpxpkG9clV7sXQIS7bjkZtcMMA+Rp03712k6fYdORlI6oXwYqtV/yUBj8THl7bn96SfIuPYBw4NM8axDAv4lyoOinS9i1zJw3YjPldjldGG7XkwKUAuOWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=i7mwKal9ORNo5mvKQ+9Tml3zTRWw8IGzoJlKTU1V/zOMtjZT2DfZgnkQ6X2GkfrQn4iDqcUaCch3cpRLXJlydRDY3ENqmDhWAableNuWzRvQHcCXc61o0U+lnANI9FdYeG+DcYjqSSFD7UuXoGknO5XsgSxtTuiQG4ByQgvwIBo=
Received: by 10.100.232.13 with SMTP id e13mr7254878anh.61.1200071604009;
        Fri, 11 Jan 2008 09:13:24 -0800 (PST)
Received: from ?9.30.38.162? ( [129.42.184.35])
        by mx.google.com with ESMTPS id c44sm3335431hsc.2.2008.01.11.09.13.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Jan 2008 09:13:22 -0800 (PST)
Message-ID: <4787A349.3060407@gmail.com>
Date: Fri, 11 Jan 2008 18:11:37 +0100
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 2.3 RC2 available for testing
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lucene Users,

good news: we are planning to release Lucene 2.3 in about ten days from
now! Lucene 2.3 will have significant performance improvements and
various other new features. (see
http://people.apache.org/~buschmi/staging_area/lucene_2_3/CHANGES.txt
for a full list of new features and API changes)

I uploaded a release candidate yesterday to
http://people.apache.org/~buschmi/staging_area/lucene_2_3/rc2/ which we
are currently testing extensively.

We would like to ask everyone to help testing the release candidate. Our
goal is it to make the final Lucene 2.3 release as stable as possible!

On behalf of the Lucene Team,
-Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 17:37:46 2008
Return-Path: <java-user-return-31920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78302 invoked from network); 11 Jan 2008 17:37:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 17:37:46 -0000
Received: (qmail 12209 invoked by uid 500); 11 Jan 2008 17:37:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11253 invoked by uid 500); 11 Jan 2008 17:37:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11242 invoked by uid 99); 11 Jan 2008 17:37:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 09:37:28 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 17:37:05 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Retrieve the number of deleted documents
Date: Fri, 11 Jan 2008 12:36:30 -0500
Message-ID: <9294E20AED46934EA459020706463F946645B4@SUEXCL-02.ad.syr.edu>
In-Reply-To: <786fde50801110442t4e206813td75e80d4351e1ba9@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Retrieve the number of deleted documents
Thread-Index: AchUT4GZ9+lsF5XrQpydbOAhOZ/rpgAKC5NA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shai,

On 01/11/2008 at 7:42 AM, Shai Erera wrote:
> Will IndexReader.maxDocs() - IndexReader.numDocs() give the
> correct result? or this is just a heuristic?

I think your expression gives the correct result - the abstract =
IndexReader.numDocs() method is implemented in SegmentReader as:

  public int numDocs() {
    // Don't call ensureOpen() here (it could affect performance)
    int n =3D maxDoc();
    if (deletedDocs !=3D null)
      n -=3D deletedDocs.count();
    return n;
  }

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 18:02:16 2008
Return-Path: <java-user-return-31921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93416 invoked from network); 11 Jan 2008 18:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 18:02:16 -0000
Received: (qmail 45451 invoked by uid 500); 11 Jan 2008 18:01:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45412 invoked by uid 500); 11 Jan 2008 18:01:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45401 invoked by uid 99); 11 Jan 2008 18:01:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 10:01:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 18:01:34 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1311109fga.27
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 10:01:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kgNHYLBPtb65JcCGSugV3WvwJpx+e/SgZ3yvg20Xm5k=;
        b=EVWa0jTqloKxPh+SCZlMhgMDKucIG5RDFzCU0RDbUAB+Z2vD7vvH+fJ62A/m036CR6kZRv6Dns27LP48SWvni8+XXSpzNRZqqgN6r2ju9aNnwKxGsqr4OsMsBYlVpJPw0BMI5WrK8GzKTI3yEC8s2BZ8PCnicfzm6ODzSwIpzjI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EPsW/aBjh1LUaOrrz8ab5NDh/Z3FA6yrH26BVmB1at+KSBWXnUMpb6lI/MqDMZNKCV4ZYXXjQzt/Xk8pExaensfOkIR1IvXRZgIDHhAdZzduqId8DlFpWqa/yrGQA8CE67QdnuqahvM4muPpCQY9ULHtoDpEPVIYuGVbY/rIklg=
Received: by 10.82.180.17 with SMTP id c17mr5737912buf.14.1200074498301;
        Fri, 11 Jan 2008 10:01:38 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 11 Jan 2008 10:01:38 -0800 (PST)
Message-ID: <359a92830801111001v562547a9wc88bf5aee06071c6@mail.gmail.com>
Date: Fri, 11 Jan 2008 13:01:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?
In-Reply-To: <F700E5D18787514F8EFB5B5CE7423936BE02A2@soho.SVGINTERNET.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2484_796599.1200074498293"
References: <F700E5D18787514F8EFB5B5CE7423936BE02A2@soho.SVGINTERNET.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2484_796599.1200074498293
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've often stored a special sort field that's lower-cased.


On Jan 11, 2008 11:40 AM, Alex Wang <AWang@sharedvision.com> wrote:

> Hi All,
>
>
>
> I was searching my index with sorting on a field called "Label" which is
> not tokenized, here is what came back:
>
>
>
> Extended Sites Catalog Asset Store
>
> Extended Sites Catalog Asset Store SALES
>
> Print Catalog 2
>
> Print catalog test
>
> Test Print Catalog
>
> Test refresh catalog
>
> print test  3
>
> test catalog 1
>
>
>
> Looks like Lucene is separating upper case and lower case while sorting.
> Can someone shed some light on this as to while this is happening and
> how to fix it?
>
>
>
> Thanks in advance for your help!
>
>
>
> Alex
>
>
>
>
>
>

------=_Part_2484_796599.1200074498293--

From java-user-return-31922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 19:18:41 2008
Return-Path: <java-user-return-31922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52065 invoked from network); 11 Jan 2008 19:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 19:18:40 -0000
Received: (qmail 47134 invoked by uid 500); 11 Jan 2008 19:18:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46942 invoked by uid 500); 11 Jan 2008 19:18:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46931 invoked by uid 99); 11 Jan 2008 19:18:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 11:18:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 72.14.202.178 as permitted sender)
Received: from [72.14.202.178] (HELO ro-out-1112.google.com) (72.14.202.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 19:17:59 +0000
Received: by ro-out-1112.google.com with SMTP id k5so1682021rog.7
        for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 11:18:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PMZihsSfKnEt5hJ9C8JaGWSE26/S5MTyVqStB0YMKQg=;
        b=R2xX07NIxVZc5TJnIBsDOTfwn1deAy9538uVhMXEUU4lNGowrpak5LarZHM3PFk6oYEHO8NRGS21vf6kd+Jo2eN20bpu/uoisRdfWe5OV7a8TOnK9hQBmnECjWJFh0taSu/6Iss1n3NjYbIaIEEKNFV5Nyt8xz8tDshRHwQktnE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DWvhX5X37Kbm65NS8kmoC84G+JLcUGaL4i95ZtR9DQ7BloNmNe6DzMGuhFvAKu7FYVStPTs3Z5jHqtNCNINDTCjiuKkmWQnIXektiFwZybu2uD7X1fA1sLxvdRnGE6vgrrVErrzu1dMLjyZJUrJ9rEz+3TTnkjF+r2nwB1oNx2Q=
Received: by 10.140.135.20 with SMTP id i20mr2236344rvd.146.1200079083445;
        Fri, 11 Jan 2008 11:18:03 -0800 (PST)
Received: by 10.141.154.21 with HTTP; Fri, 11 Jan 2008 11:18:03 -0800 (PST)
Message-ID: <786fde50801111118g6af56e99j1e078ed38908b670@mail.gmail.com>
Date: Fri, 11 Jan 2008 21:18:03 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieve the number of deleted documents
In-Reply-To: <9294E20AED46934EA459020706463F946645B4@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1021_9242983.1200079083423"
References: <786fde50801110442t4e206813td75e80d4351e1ba9@mail.gmail.com>
	 <9294E20AED46934EA459020706463F946645B4@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1021_9242983.1200079083423
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks
I guess I should have looked in the code before asking those silly questions
:-)
I wonder why there isn't a specific API for that though ...

On Jan 11, 2008 7:36 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Shai,
>
> On 01/11/2008 at 7:42 AM, Shai Erera wrote:
> > Will IndexReader.maxDocs() - IndexReader.numDocs() give the
> > correct result? or this is just a heuristic?
>
> I think your expression gives the correct result - the abstract
> IndexReader.numDocs() method is implemented in SegmentReader as:
>
>  public int numDocs() {
>    // Don't call ensureOpen() here (it could affect performance)
>    int n = maxDoc();
>    if (deletedDocs != null)
>      n -= deletedDocs.count();
>    return n;
>  }
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_1021_9242983.1200079083423--

From java-user-return-31923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 11 20:50:54 2008
Return-Path: <java-user-return-31923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12172 invoked from network); 11 Jan 2008 20:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2008 20:50:54 -0000
Received: (qmail 13591 invoked by uid 500); 11 Jan 2008 20:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12872 invoked by uid 500); 11 Jan 2008 20:50:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12861 invoked by uid 99); 11 Jan 2008 20:50:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 12:50:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 20:50:13 +0000
Content-class: urn:content-classes:message
Subject: RE: how do I get my own TopDocHitCollector?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 11 Jan 2008 15:50:15 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA563812D1@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how do I get my own TopDocHitCollector?
Thread-Index: AchTxjqGijMH/vO+RASm6cnv5D1I+gAxnjBw
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for all this. We're doing warmup searching also, but just for
some common date searches. The warmup would be a good place to add some
pre-caching capability. I'll plan for this eventually and start with the
partial cache for now.

Thanks,

Brian Beard

-----Original Message-----
From: Antony Bowesman [mailto:adb@teamware.com]=20
Sent: Thursday, January 10, 2008 3:19 PM
To: java-user@lucene.apache.org
Subject: Re: how do I get my own TopDocHitCollector?

Beard, Brian wrote:
> Ok, I've been thinking about this some more. Is the cache mechanism
> pulling from the cache if the external id already exists there and
then
> hitting the searcher if it's not already in the cache (maybe using a
> FieldSelector for just retrieving the external id)?

I am warming searchers in background and each search has one or more
query=20
related caches.  The external Id cache is normally preloaded by simply
iterating=20
terms, e.g.

         String field =3D fieldName.intern();
         final String[] retArray =3D new String[reader.maxDoc()];
         TermDocs termDocs =3D reader.termDocs();
         TermEnum termEnum =3D reader.terms (new Term (field, ""));
         try
         {
             do
             {
                 Term term =3D termEnum.term();
                 if (term =3D=3D null || term.field() !=3D field)
                     break;
                 String termval =3D term.text();
                 termDocs.seek(termEnum);
                 while (termDocs.next())
                 {
                     retArray[termDocs.doc()] =3D termval;
                 }
             }
             while (termEnum.next());
         }
         finally
         {
             termDocs.close();
             termEnum.close();
         }
         return retArray;

I do allow for a partial cache, in which case, as you suggest, the
searcher uses=20
a FieldSelector to get the external Id from the document which then is
stored to=20
cache.

Antony



>=20
> -----Original Message-----
> From: Beard, Brian [mailto:Brian.Beard@mybir.com]=20
> Sent: Thursday, January 10, 2008 10:08 AM
> To: java-user@lucene.apache.org
> Subject: RE: how do I get my own TopDocHitCollector?
>=20
> Thanks for the post. So you're using the doc id as the key into the
> cache to retrieve the external id. Then what mechanism fetches the
> external id's from the searcher and places them in the cache?
>=20
>=20
> -----Original Message-----
> From: Antony Bowesman [mailto:adb@teamware.com]=20
> Sent: Wednesday, January 09, 2008 7:19 PM
> To: java-user@lucene.apache.org
> Subject: Re: how do I get my own TopDocHitCollector?
>=20
> Beard, Brian wrote:
>> Question:
>>
>> The documents that I index have two id's - a unique document id and a
>> record_id that can link multiple documents together that belong to a
>> common record.
>>
>> I'd like to use something like TopDocs to return the first 1024
> results
>> that have unique record_id's, but I will want to skip some of the
>> returned documents that have the same record_id. We're using the
>> ParallelMultiSearcher.=20
>>
>> I read that I could use a HitCollector and throw an exception to get
> it
>> to stop, but is there a cleaner way?
>=20
> I'm doing a similar thing.  I have external Ids (equivalent to yout
> record_id),=20
> which have one or more Lucene Documents associated with them.  I wrote
a
> custom=20
> HitCollector that uses a Map to hold the so far collected external ids
> along=20
> with the collected document.
>=20
> I had to write my own priority queue to know when an object was
dropped
> of the=20
> bottom of the score sorted queue, but the latest PriorityQueue on the
> trunk now=20
> has insertWithOverflow(), which does the same thing.
>=20
> Note that ResultDoc extends ScoreDoc, so that the external Id of the
> item=20
> dropped off the queue can be used to remove it from my Map.
>=20
> Code snippet is somewhat as below (I am caching my external Ids, hence
> the cache=20
> usage)
>=20
>     protected Map<OfficeId, ScoreDoc> results;
>=20
>     public void collect(int doc, float score)
>      {
>          if (score > 0.0f)
>          {
>              totalHits++;
>              if (pq.size() < numHits || score > minScore)
>              {
>                  OfficeId id =3D cache.get(doc);
>                  ResultDoc rd =3D results.get(id);
>                  //  No current result for this ID yet found
>                  if (rd =3D=3D null)
>                  {
>                      rd =3D new ResultDoc(id, doc, score);
>                      ResultDoc added =3D pq.insert(rd);
>                      if (added =3D=3D null)
>                      {
>                          //  Nothing dropped of the bottom
>                          results.put(id, rd);
>                      }
>                      else
>                      {
>                          //  Return value dropped of the bottom
>                          results.remove(added.id);
>                          results.put(id, rd);
>                          remaining++;
>                      }
>                  }
>                  //  Already found this ID, so replace high score if
> necessary
>                  else
>                  {
>                      if (score > rd.score)
>                      {
>                          pq.remove(rd);
>                          rd.score =3D score;
>                          pq.insert(rd);
>                      }
>                  }
>                  //  Readjust our minimum score again from the top
entry
>                  minScore =3D pq.peek().score;
>              }
>              else
>                  remaining++;
>          }
>      }
>=20
> HTH
> Antony
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 00:57:54 2008
Return-Path: <java-user-return-31924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15978 invoked from network); 12 Jan 2008 00:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 00:57:54 -0000
Received: (qmail 36405 invoked by uid 500); 12 Jan 2008 00:57:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36374 invoked by uid 500); 12 Jan 2008 00:57:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36363 invoked by uid 99); 12 Jan 2008 00:57:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 16:57:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of roger.camargo@hotmail.com designates 65.54.246.238 as permitted sender)
Received: from [65.54.246.238] (HELO bay0-omc3-s38.bay0.hotmail.com) (65.54.246.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 00:57:24 +0000
Received: from BAY124-W52 ([207.46.11.215]) by bay0-omc3-s38.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 11 Jan 2008 16:57:16 -0800
Message-ID: <BAY124-W52154592F93440DE1DAA8BF8440@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_34c0abd0-d87d-4ae8-97f1-078533c8bba5_"
X-Originating-IP: [200.58.78.118]
From: Roger Camargo <roger.camargo@hotmail.com>
To: <java-user@lucene.apache.org>
CC: "roger.camargo@hotmail.com" <roger.camargo@hotmail.com>
Subject: How to model hierarchy info to be searched related to a document
Date: Fri, 11 Jan 2008 20:57:16 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Jan 2008 00:57:16.0263 (UTC) FILETIME=[132E1F70:01C854B6]
X-Virus-Checked: Checked by ClamAV on apache.org

--_34c0abd0-d87d-4ae8-97f1-078533c8bba5_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'm trying to index information related to Olap Cubes.
=20
Each cube I'm trying to model it like a document.
=20
The cube have the following information:
=20
ID - Unique identifier for the cube
Name - Name of the cube
Description - Description of the cube
=20
(There can be many dimensions per cube)
Dimension name - Name of the dimension of the cube=20
Dimension observations - Observations related to the dimension. (Optional)
Dimension type - Type of the dimension
=20
(Each dimension has at least one Level, but there can be many levels per di=
mension)
Level name - Name of the level
Level observations - Observations of the level (Optional)
=20
(There has to be at least one Fact per cube)
Fact name - Name of the fact
Fact aggregation - Aggregation of the fact
=20
(Also there can be custom properties added by the user, with the form Name,=
Value)
Custom property name - Name of the custom property
Custom property value - Value of the custom property
=20
Right now I'm just indexing the first 3 ID, Name and Description, but I wou=
ld also want the other information to be indexed and search the cube with t=
hat information.
=20
--------------------------------------------------------
Data sample:
=20
ID: 0
Name: Quarter sales per region
Descript=EDon: Description of the cube...
=20
Dimension name: Region
Dimension observations: The dimension only includes countries of south amer=
ica
Dimension type: Geographical
=20
  Level name: Country
  Level observations: Observations of the level....
=20
  Level name: City
  Level observations: Observations of the level....
=20
Dimension name: Time
Dimension observations: Has data only from the year 2000
Dimension type: Time
=20
  Level name: Year
  Level observations: No observations
=20
  Level name: Quarter
  Level observations: No observations
=20
Fact name: Sales
Fact Aggregation: Sum
=20
Fact name: % Quarter Growth
Fact Aggregation: AVG
=20
Custom property name: Frequency
Custom property value: Quarterly
=20
Custom property name: Last update
Custom property value: 2006-01-01
--------------------------------------------------------
=20
My problems would be the following.
=20
1. How to index "Dimension name" and "Dimension observations".
If there would be just Dimension names, I cound index it as a single Field =
with multiple values.=20
But with the addition of the observations, I need to know if the search ter=
m was founded within the observation, to wich dimension belongs the founded=
 observations.
And the same happens with the "Dimension type"
=20
2. There can be many of these Dimension name, observations, type. The same =
applies for the Level name, observation - Fact name,type - Custom property =
name, value.
=20
3. The levels. if the search term was founded in the level observation, I w=
ould need to know to which level name is related the level observation foun=
ded along with the dimension related, and finally the cube itserlf.
=20
Well... this was a bit long question to be my first one.
=20
Maybe what I want can't be done, maybe there could be some walkaround that =
someone knows it.
=20
I was thinking that if it can be posible to have a field, with additional i=
nfo attached to the value, that is not searchable, it just needed when the =
field value is retrieved it.
=20
For example a Multi-value field called DimObs.
=20
Value1: "Observations related to the first dimension of the cube"
Related info: "Dimension name1"
=20
Value2: "Observations related to the second dimension of the cube"
Related info: "Dimension name2"
=20
When the search is performed and is founded in the DimObs, for example "fir=
st".
Then the search found "first" int the DimObs, but I would need to retrieve =
the "Related info" to know to which Dimension belongs the observations foun=
ded.
=20
Thanks in advance for keeping with me till the end of this mail and for any=
 suggestions that could give me.
=20
Roger Camargo
UMSS "University"
Cochabamba - Bolivia
=20
_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE!
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/=

--_34c0abd0-d87d-4ae8-97f1-078533c8bba5_--

From java-user-return-31925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 01:07:29 2008
Return-Path: <java-user-return-31925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20524 invoked from network); 12 Jan 2008 01:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 01:07:28 -0000
Received: (qmail 43834 invoked by uid 500); 12 Jan 2008 01:07:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43660 invoked by uid 500); 12 Jan 2008 01:07:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43649 invoked by uid 99); 12 Jan 2008 01:07:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jan 2008 17:07:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 01:07:01 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 030D171C2AC; Fri, 11 Jan 2008 17:06:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id F2D6671C24E
	for <java-user@lucene.apache.org>; Fri, 11 Jan 2008 17:06:52 -0800 (PST)
Date: Fri, 11 Jan 2008 17:06:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Prioiritze new documents
In-Reply-To: <8856DF1FF75B2348A2D4033D1E8A7EE40222A0BC@CORPUSMX10C.corp.emc.com>
Message-ID: <Pine.LNX.4.62.0801111700280.32727@radix.cryptio.net>
References: <8856DF1FF75B2348A2D4033D1E8A7EE40222A0BC@CORPUSMX10C.corp.emc.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: IMHO it would be nice if Lucene's Similarity formula took the
: indexed-date of the document into account.  Ideally as an optional
: setting, where the user can provide a date field as well.

It really wouldn't make sense to incorporate this into the Similarity 
class.

: Some of the other search engines do - for example Fast's Instream.  It

"Lucene Java" is not a search engine, or even an application -- it is a 
library that can be used to develop applications -- there are lots of 
differnet ways people might want to prioritize documents by external 
factors unrelated to relevancy -- recentness is only one of them.  there 
are also several differnet ways recentness can be prioritized, each with 
differnet tradeoffs (in terms of indexing performance vs query 
performacne, etc...) ... the application developer is best suited to 
decide which approach to take for their use case.   

There really won't be much value add in embedding one particular approach 
in the core Lucene scoring code.

: Is JIRA the mechanism where you can add "feature requests" for Lucene?

Yes.  you can login, create a a new issue, and pick "new feature" as the 
issue type.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 10:28:32 2008
Return-Path: <java-user-return-31926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56487 invoked from network); 12 Jan 2008 10:28:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 10:28:32 -0000
Received: (qmail 84552 invoked by uid 500); 12 Jan 2008 10:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84521 invoked by uid 500); 12 Jan 2008 10:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84508 invoked by uid 99); 12 Jan 2008 10:28:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 02:28:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.240 as permitted sender)
Received: from [65.54.246.240] (HELO bay0-omc3-s40.bay0.hotmail.com) (65.54.246.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 10:27:49 +0000
Received: from BAY112-W13 ([64.4.26.113]) by bay0-omc3-s40.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sat, 12 Jan 2008 02:27:54 -0800
Message-ID: <BAY112-W13A60D1717DE8021849377F9440@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ca26d080-8e87-4889-b557-e3bbd339d5bb_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Matching symbols like #,$,@
Date: Sat, 12 Jan 2008 15:57:54 +0530
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Jan 2008 10:27:54.0428 (UTC) FILETIME=[CAB77FC0:01C85505]
X-Virus-Checked: Checked by ClamAV on apache.org

--_ca26d080-8e87-4889-b557-e3bbd339d5bb_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable





Hi all,

I want to match a string like "ABC#$" with "ABC#$@%@$^@$^@".=20

The query string generated by QueryParse is as follows:

title:ABC#$*

I
append the "*" so that it becomes a wild card search. It does not
return me any records. I did try escaping '#' and '$'. But that too
does not work.=20
I checked the list of special symbols that can be escaped and the above two=
 don't fall under it.

If modify the search to match "ABC" with querystring as title:ABC* then it =
does return me the result as "ABC#$@%@$^@$^@".

Am I missing something here? How do I tell Lucene to match symbols like '#'=
, '$', etc.

--Regards,
Rakesh S
_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D220=

--_ca26d080-8e87-4889-b557-e3bbd339d5bb_--

From java-user-return-31927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 11:35:01 2008
Return-Path: <java-user-return-31927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70266 invoked from network); 12 Jan 2008 11:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 11:35:00 -0000
Received: (qmail 20103 invoked by uid 500); 12 Jan 2008 11:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20072 invoked by uid 500); 12 Jan 2008 11:34:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20059 invoked by uid 99); 12 Jan 2008 11:34:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 03:34:44 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FH_HELO_EQ_D_D_D_D,HELO_DYNAMIC_IPADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.237.164.69] (HELO lvps80-237-164-69.dedicated.hosteurope.de) (80.237.164.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 11:34:19 +0000
Received: (qmail 4352 invoked from network); 12 Jan 2008 12:34:22 +0100
Received: from unknown (HELO YOLATENGO) (78.52.194.28)
  by lvps80-237-164-69.dedicated.hosteurope.de with SMTP; 12 Jan 2008 12:34:22 +0100
Message-ID: <011a01c8550f$1583f8e0$576cfea9@YOLATENGO>
From: "Hans-Peter Stricker" <stricker@serendi.de>
To: <java-user@lucene.apache.org>
Subject: Performance problem with IndexWriter
Date: Sat, 12 Jan 2008 12:34:24 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="Windows-1252";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have a strange problem: the very same call executes 10 times faster under 
Windows than under Linux: The line

writer.addDocument(doc)

takes (with the very same documents) < 1ms under Windows, but > 10ms under 
Linux. maxBufferedDocs = 10000, number of documents to index < 10000, 
flushing takes place only one time (after the last indexed doc), there is 
enough RAM. My Linux sys admin confirms that everybody seems normal on the 
Linux machine: process priority, RAM, ...

Has anybody encoutered this problem before?

Thanks for any hint.

Hans-Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 13:18:54 2008
Return-Path: <java-user-return-31928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 904 invoked from network); 12 Jan 2008 13:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 13:18:54 -0000
Received: (qmail 64309 invoked by uid 500); 12 Jan 2008 13:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64280 invoked by uid 500); 12 Jan 2008 13:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64267 invoked by uid 99); 12 Jan 2008 13:18:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 05:18:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 13:18:10 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1628446fga.27
        for <java-user@lucene.apache.org>; Sat, 12 Jan 2008 05:18:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=GwqkjNi1PZHE8ByG/LWEPLzWeYOL4GxO6PMelLEBjmM=;
        b=UtELQSOM3V5tP1IQSare1At6YgNe7B1H82AO4tecj2NjN6UatTOskqEjtUqaV9YloofspPpqNegRdgtLDixGsaqABwQvwdPthmy94V0fBakt6mv84rXnkLKx81JiCrgDAkGSjcp/5O22vsItU21sHx2eTo0PyFsMl3a54anPI8s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BDZ0rLwuiLGxAeXpF5R1zn5fsAA6tXK4YoYAE+Y/78iI0VQjOXqgRP/Fky9HDNDxx6TiocDm3C9sDvicRod4/FKcfMFHiHw3B7TBG2tifddA1zmDZ/8SQC2krQzSxTeFNW3IOZneq9LXDmf9MBw7Gw8pRUvuo6osPunwx1EMnxc=
Received: by 10.82.155.10 with SMTP id c10mr7332695bue.39.1200143894519;
        Sat, 12 Jan 2008 05:18:14 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sat, 12 Jan 2008 05:18:14 -0800 (PST)
Message-ID: <359a92830801120518l64b857e2gb970dc5b84080401@mail.gmail.com>
Date: Sat, 12 Jan 2008 08:18:14 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Matching symbols like #,$,@
In-Reply-To: <BAY112-W13A60D1717DE8021849377F9440@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4725_17419148.1200143894513"
References: <BAY112-W13A60D1717DE8021849377F9440@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4725_17419148.1200143894513
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What analyzer are you using to index? And is it a different analyzer
when indexing as opposed to searching?

Get a copy of Luke and look in your index to see what is
*actually* indexed. At that point, you can start worrying about
how the query is parsed. Until you know what's in your index,
you're flying blind.

Best
Erick

On Jan 12, 2008 5:27 AM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:

>
>
>
>
> Hi all,
>
> I want to match a string like "ABC#$" with "ABC#$@%@$^@$^@".
>
> The query string generated by QueryParse is as follows:
>
> title:ABC#$*
>
> I
> append the "*" so that it becomes a wild card search. It does not
> return me any records. I did try escaping '#' and '$'. But that too
> does not work.
> I checked the list of special symbols that can be escaped and the above
> two don't fall under it.
>
> If modify the search to match "ABC" with querystring as title:ABC* then it
> does return me the result as "ABC#$@%@$^@$^@".
>
> Am I missing something here? How do I tell Lucene to match symbols like
> '#', '$', etc.
>
> --Regards,
> Rakesh S
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=220

------=_Part_4725_17419148.1200143894513--

From java-user-return-31929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 13:21:07 2008
Return-Path: <java-user-return-31929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1236 invoked from network); 12 Jan 2008 13:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 13:21:07 -0000
Received: (qmail 66124 invoked by uid 500); 12 Jan 2008 13:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66095 invoked by uid 500); 12 Jan 2008 13:20:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66083 invoked by uid 99); 12 Jan 2008 13:20:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 05:20:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 13:20:39 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1629111fga.27
        for <java-user@lucene.apache.org>; Sat, 12 Jan 2008 05:20:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=VxXBOdbGGjX3zpMaB4ZC+nEHt3G3lAhPqLHG4E2ZjqU=;
        b=i5ihnp2o5rBc7xxyn8kgjgI7BFoA2bt8EUq1z4qduNncTgY+XVie+Ct+N+fVxP5rwiNLGYCsZNYORUzCHJUMpvAnlhyGH5l/zYwiZYGAGdJACGVSXtJ9CkH+ICgyrdpqDSofX0gqt+sJcqOG+AryvuQfPHS5U+E2TKElgxpAhvU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=p2e+jE0usBE0JgjcYmeDkZD4QrxJhbFj2geJ8wwaKJn/Z+9zOpFK0I/FvfdxQ7tEXS1rsSWbXRcUNkhnkYzunJ1AfEYE//s8Jrt8bcZqGtgMqwp4Nu86ev+VtTxmTKVe9L8/Iyv6VxT87v4YZboasDcbY1piAk+ClQUiaZ1Akl4=
Received: by 10.82.148.7 with SMTP id v7mr7380556bud.10.1200144031564;
        Sat, 12 Jan 2008 05:20:31 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sat, 12 Jan 2008 05:20:31 -0800 (PST)
Message-ID: <359a92830801120520u2867713mc741abe3e69f7609@mail.gmail.com>
Date: Sat, 12 Jan 2008 08:20:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance problem with IndexWriter
In-Reply-To: <011a01c8550f$1583f8e0$576cfea9@YOLATENGO>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4730_8446844.1200144031564"
References: <011a01c8550f$1583f8e0$576cfea9@YOLATENGO>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4730_8446844.1200144031564
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is this just the first document or is it an average? I can imagine that
initialization happens at different times under different machines...

Best
Erick

On Jan 12, 2008 6:34 AM, Hans-Peter Stricker <stricker@serendi.de> wrote:

> Hello,
>
> I have a strange problem: the very same call executes 10 times faster
> under
> Windows than under Linux: The line
>
> writer.addDocument(doc)
>
> takes (with the very same documents) < 1ms under Windows, but > 10ms under
> Linux. maxBufferedDocs = 10000, number of documents to index < 10000,
> flushing takes place only one time (after the last indexed doc), there is
> enough RAM. My Linux sys admin confirms that everybody seems normal on the
> Linux machine: process priority, RAM, ...
>
> Has anybody encoutered this problem before?
>
> Thanks for any hint.
>
> Hans-Peter
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4730_8446844.1200144031564--

From java-user-return-31930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 13:27:22 2008
Return-Path: <java-user-return-31930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2485 invoked from network); 12 Jan 2008 13:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 13:27:22 -0000
Received: (qmail 69727 invoked by uid 500); 12 Jan 2008 13:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69690 invoked by uid 500); 12 Jan 2008 13:27:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69679 invoked by uid 99); 12 Jan 2008 13:27:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 05:27:05 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FH_HELO_EQ_D_D_D_D,HELO_DYNAMIC_IPADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.237.164.69] (HELO lvps80-237-164-69.dedicated.hosteurope.de) (80.237.164.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 13:26:52 +0000
Received: (qmail 1056 invoked from network); 12 Jan 2008 14:26:45 +0100
Received: from unknown (HELO YOLATENGO) (78.52.194.28)
  by lvps80-237-164-69.dedicated.hosteurope.de with SMTP; 12 Jan 2008 14:26:45 +0100
Message-ID: <015101c8551e$c829c6a0$576cfea9@YOLATENGO>
From: "Hans-Peter Stricker" <stricker@serendi.de>
To: <java-user@lucene.apache.org>
References: <011a01c8550f$1583f8e0$576cfea9@YOLATENGO> <359a92830801120520u2867713mc741abe3e69f7609@mail.gmail.com>
Subject: Re: Performance problem with IndexWriter
Date: Sat, 12 Jan 2008 14:26:47 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Erick,

it's an average, definitely.

Best
Hans-Peter

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Saturday, January 12, 2008 2:20 PM
Subject: Re: Performance problem with IndexWriter


> Is this just the first document or is it an average? I can imagine that
> initialization happens at different times under different machines...
>
> Best
> Erick
>
> On Jan 12, 2008 6:34 AM, Hans-Peter Stricker <stricker@serendi.de> wrote:
>
>> Hello,
>>
>> I have a strange problem: the very same call executes 10 times faster
>> under
>> Windows than under Linux: The line
>>
>> writer.addDocument(doc)
>>
>> takes (with the very same documents) < 1ms under Windows, but > 10ms 
>> under
>> Linux. maxBufferedDocs = 10000, number of documents to index < 10000,
>> flushing takes place only one time (after the last indexed doc), there is
>> enough RAM. My Linux sys admin confirms that everybody seems normal on 
>> the
>> Linux machine: process priority, RAM, ...
>>
>> Has anybody encoutered this problem before?
>>
>> Thanks for any hint.
>>
>> Hans-Peter
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 12 13:28:03 2008
Return-Path: <java-user-return-31931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2622 invoked from network); 12 Jan 2008 13:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2008 13:28:02 -0000
Received: (qmail 71398 invoked by uid 500); 12 Jan 2008 13:27:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71366 invoked by uid 500); 12 Jan 2008 13:27:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71355 invoked by uid 99); 12 Jan 2008 13:27:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 05:27:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.27.42.36] (HELO smtp6-g19.free.fr) (212.27.42.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 13:27:32 +0000
Received: from smtp6-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp6-g19.free.fr (Postfix) with ESMTP id 54D915FE57
	for <java-user@lucene.apache.org>; Sat, 12 Jan 2008 14:27:25 +0100 (CET)
Received: from imp4-g19.free.fr (imp4-g19.free.fr [212.27.42.4])
	by smtp6-g19.free.fr (Postfix) with ESMTP id 4A22F5FE54
	for <java-user@lucene.apache.org>; Sat, 12 Jan 2008 14:27:25 +0100 (CET)
Received: by imp4-g19.free.fr (Postfix, from userid 33)
	id 3B81F12FE; Sat, 12 Jan 2008 14:27:25 +0100 (CET)
Received: from ip-100-21.latecoere.fr (ip-100-21.latecoere.fr [195.25.100.21]) 
	by imp.free.fr (IMP) with HTTP 
	for <linuxmasterjedi@212.27.42.71>; Sat, 12 Jan 2008 14:27:25 +0100
Message-ID: <1200144445.4788c03d0c67d@imp.free.fr>
Date: Sat, 12 Jan 2008 14:27:25 +0100
From: linuxmasterjedi@free.fr
To: java-user@lucene.apache.org
Subject: Cannot bind RMIMessenger exception:non-JRMP server at remote endpoint
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.8
X-Originating-IP: 195.25.100.21
X-Virus-Checked: Checked by ClamAV on apache.org

Hello everyone,

  I'm quite new in Lucene stuff and I have a problem. I can't get Lucene Java
working on one of my server. I've setup it on another server for Mediawiki and
it works fine.

 It's a GNU/Linux Ubuntu Edgy i686 with kernel 2.6.17-11-server running Apache
2.0 with PHP5 for Mediawiki, some others stuffs like Tomcat & Jboss. Got JAva
installed : j2re1.4, j2sdk1.4, java-common, libgcj-common, sun-java5-bin        
          , sun-java5-demo , sun-java5-jdk and sun-java5-jre

 I've followed this tutorial :
http://www.mediawiki.org/wiki/Extension:LuceneSearch#Incremental_updates
 In the case of the first server (fresh Ubuntu Gutsy 64bits with almost anything
running) it worked fine, I can use Lucene to search into my Wiki. In the case of
my second server, here is the error when I would like to start the engine :

www-data@myserver:/usr/local/search/ls2$ ./lsearchd
.
Trying config file at path /var/www/.lsearch.conf
Trying config file at path /usr/local/search/ls2/lsearch.conf
0    [main] INFO  org.wikimedia.lsearch.util.UnicodeDecomposer  - Loaded unicode
decomposer
java.rmi.ConnectIOException: non-JRMP server at remote endpoint
  at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:217)
  at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:171)
  at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:306)
  at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
  at
org.wikimedia.lsearch.interoperability.RMIServer.register(RMIServer.java:24)
  at
org.wikimedia.lsearch.interoperability.RMIServer.bindRMIObjects(RMIServer.java:60)
  at org.wikimedia.lsearch.config.StartupManager.main(StartupManager.java:52)
76   [main] WARN  org.wikimedia.lsearch.interoperability.RMIServer  - Cannot
bind RMIMessenger exception:non-JRMP server at remote endpoint


 But NOTHING use the port 8321. I've tried to use another port, it's the same
problem. Any ideas how to solve this problem please?


   Thanks, LMJ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 00:53:28 2008
Return-Path: <java-user-return-31932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36176 invoked from network); 13 Jan 2008 00:53:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 00:53:27 -0000
Received: (qmail 21541 invoked by uid 500); 13 Jan 2008 00:53:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21511 invoked by uid 500); 13 Jan 2008 00:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21470 invoked by uid 99); 13 Jan 2008 00:53:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 16:53:11 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tobiaslohr@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 00:52:58 +0000
Received: (qmail invoked by alias); 13 Jan 2008 00:52:50 -0000
Received: from dslb-088-072-112-159.pools.arcor-ip.net (EHLO [192.168.0.2]) [88.72.112.159]
  by mail.gmx.net (mp006) with SMTP; 13 Jan 2008 01:52:50 +0100
X-Authenticated: #1677435
X-Provags-ID: V01U2FsdGVkX1+lAPocqZ+lbKAfwATc6k61euuxybNtVruY+Kv9N7
	WyYzS+rqdL2U1G
Message-ID: <478960E1.5000607@gmx.de>
Date: Sun, 13 Jan 2008 01:52:49 +0100
From: Tobias Lohr <tobiaslohr@gmx.de>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Sorting by multiple fields (conditions influencing each other?!)
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

I'm sorting the search result using multiple fields. Some of them are 
"real" fields, within the index, but one is a "pseudo" field, a custom 
sort field, implemented by using a custom SortComparatorSource. I end up 
with the sorting conditions in exact this order:

1. Sort by score generate by custom SortComparatorSource 
(SortField.FLOAT, ascending, score is either 0.0 or 0.1), it's like a 
grouping
2. Sort by real index field (SortField.AUTO, descending, value ranges 
from 0 to 6)

Is it guaranteed, that the 2nd sorting condition, does not influence the 
1st one in any way, and that the results are everytime "grouped" by the 
1st condition?

It's like that high values of the real index field used in the 2nd 
condition are sometimes have an impact on the grouping of condition one.

Any suggestions?

Tobias

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 02:48:14 2008
Return-Path: <java-user-return-31933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70513 invoked from network); 13 Jan 2008 02:48:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 02:48:14 -0000
Received: (qmail 66875 invoked by uid 500); 13 Jan 2008 02:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66836 invoked by uid 500); 13 Jan 2008 02:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66825 invoked by uid 99); 13 Jan 2008 02:47:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jan 2008 18:47:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 02:47:42 +0000
Received: (qmail 56447 invoked by uid 60001); 13 Jan 2008 02:47:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=cRC4OTqebuDTIqdd96NnJMlP27Pa7fgAFWWtlhzkk3I3y3fcPFxLkj441kyH8GopLFopMF744mmWeluQOpqRx/+vaSGalGnv+aOrWsfbU5mGcffydCFKWyKhsdFVWLo7W7ViGlcuYo+5i2VkkGvpnurYcE1scxm5eKtu35XyfmQ=;
X-YMail-OSG: ZusyP_wVM1ltD_Sd7WFHkth9caQ3C2EccZs3npN6_.rwAZ98o1gW3RgZYaNe9wvFDxCWWVsdkWcG48vAV18JYns6kC4pq9GLqcEwY5t88hmBlUq8gfQ-
Received: from [72.231.9.236] by web50310.mail.re2.yahoo.com via HTTP; Sat, 12 Jan 2008 18:47:32 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 12 Jan 2008 18:47:32 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: CachingWrapperFilter: why cache per IndexReader?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <318806.55496.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I didn't follow this thread, but let me point out that certain critical pieces of code executed during search are synchronized (FileIndexInput or some such).  Thus, with a pile of search threads sharing the same IndexSearcher, this can cause a bottleneck.  In such cases I thin khaving multiple IndexSearchers will actually be beneficial, as it will reduce that contention.

On 1 thread vs. 2 vs. 4, I don't have the explanation.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: java-user@lucene.apache.org
Sent: Friday, January 11, 2008 5:34:48 AM
Subject: Re: CachingWrapperFilter: why cache per IndexReader?

On Tue, 2008-01-01 at 15:06 -0500, Mark Miller wrote:
> Perhaps, in some esoteric case, multiple readers is the right idea 
> (monster, monster, super IO system, static index?? maybe...)...but 
> unless you have run into this case and have some data to show it, I 
> would stick with what the community currently designates as best 
> practice. Otherwise, your really just getting ahead of yourself.
 Single 
> searcher has been scaled to some pretty huge sites. More than one 
> searcher is usually responsible for very slow performance.

I took the opportunity to make a small test. Our index is 37 GB with 10
million records. I tested on a dual-processor Xeon machine with 8 GB of
RAM. The test-material was logged queries from our production system.
I tried with shared searcher between threads and a searcher for each
thread.

As for shared searcher vs. individual searchers, there was just a
 slight
penalty for using individual searchers. However, all our queries are
 for
standard ranked searches - no sorting on title or similar, so I see no
reason to disbelieve that multiple searchers often results in poor
performance.

As for threading, I noticed something strange: On the dual-core
 machine,
two threads gave better performance than one, while 4 threads gave the
same performance as one. I tried it with standard harddisks (two 15.000
RPM in RAID 1) and with Flash drives (two 32GB Samsung in RAID 0) - in
both cases the picture was the same. I would have expected the
performance of four threads to be on par with two threads, or at least
to lie somewhere between one and two threads?


There's some graphs for my measurements at
http://wiki.statsbiblioteket.dk/summa/Hardware
should anyone be interested.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 16:50:07 2008
Return-Path: <java-user-return-31934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18387 invoked from network); 13 Jan 2008 16:50:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 16:50:07 -0000
Received: (qmail 35654 invoked by uid 500); 13 Jan 2008 16:49:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35618 invoked by uid 500); 13 Jan 2008 16:49:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35607 invoked by uid 99); 13 Jan 2008 16:49:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 08:49:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 16:49:25 +0000
Received: (qmail invoked by alias); 13 Jan 2008 16:49:28 -0000
Received: from e178125033.adsl.alicedsl.de (EHLO msrvcn04) [85.178.125.33]
  by mail.gmx.net (mp028) with SMTP; 13 Jan 2008 17:49:28 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19JpD9k181JjO1lYtdC4tah5CYXPHOFA4a2qAjGoA
	2wh/M+lRv0QP0i
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04> <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com>
Subject: RE: Design questions
Date: Sun, 13 Jan 2008 17:49:30 +0100
Message-ID: <B889512919AC4314BB240BBFA76C5568@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com>
thread-index: AchUZPjv2Wy7/eh4RBi/eOMYagtMuQBnvlEg
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

OK, thank you! I will try this out.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 16:53:24 2008
Return-Path: <java-user-return-31935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19758 invoked from network); 13 Jan 2008 16:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 16:53:24 -0000
Received: (qmail 38735 invoked by uid 500); 13 Jan 2008 16:53:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38703 invoked by uid 500); 13 Jan 2008 16:53:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38692 invoked by uid 99); 13 Jan 2008 16:53:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 08:53:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 16:52:55 +0000
Received: (qmail invoked by alias); 13 Jan 2008 16:52:47 -0000
Received: from e178125033.adsl.alicedsl.de (EHLO msrvcn04) [85.178.125.33]
  by mail.gmx.net (mp050) with SMTP; 13 Jan 2008 17:52:47 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18HPqF2in4HbgAQgqJBieuZ+9/MhFbJ9Z+qyCifnk
	Xs5l5udeNAmod5
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: IndexWriter minMergeDocs
Date: Sun, 13 Jan 2008 17:52:50 +0100
Message-ID: <2A03CB21236940F98FD5CB997DD49893@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
thread-index: AchWBKMUX7pli7i2Tniemnuyn/s2vQ==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

http://wiki.apache.org/lucene-java/PainlessIndexing says that I shall use
setMinMergeDocs.

But I cannot find this method in lucene 2.2.

What is wrong here?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 17:09:24 2008
Return-Path: <java-user-return-31936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25606 invoked from network); 13 Jan 2008 17:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 17:09:24 -0000
Received: (qmail 54217 invoked by uid 500); 13 Jan 2008 17:08:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54176 invoked by uid 500); 13 Jan 2008 17:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54146 invoked by uid 99); 13 Jan 2008 17:08:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 09:08:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 17:08:30 +0000
Received: (qmail invoked by alias); 13 Jan 2008 17:08:33 -0000
Received: from e178125033.adsl.alicedsl.de (EHLO msrvcn04) [85.178.125.33]
  by mail.gmx.net (mp011) with SMTP; 13 Jan 2008 18:08:33 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+qtnRjZNOqPmJoXHP7LXPrZ/Lo31s8F5wNll9zXl
	DLGSbrfanlsMMF
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: When to use which Analyzer
Date: Sun, 13 Jan 2008 18:08:35 +0100
Message-ID: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
thread-index: AchWBr7+PKNjkFD/QNqljDVyUdJ1aA==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have some doubts about Analyzer usage. I read that one shall always use
the same analyzer for searching and indexing.
Why? How does the Analyzer effect the search process? What is analyzed here
again?

I have tried this out. I used a SimpleAnalyzer for indexing with
Field.Store.YES and Field.Index.UN_TOKENIZED. I can see with Luke that the
field values are store unchanged, 1:1. OK.

Now I did a search with Luke and depending on the used analyzer the Query
returns results or not.

I can see that when I use the SimpleAnalyzer again, the values of my search
are all converted to lowercase and numbers are removed. 
This leads to wrong results, because my values are stored with
Field.Index.UN_TOKENIZED.

Why is my query changed this way?

I think it has to do with QueryParsing, which uses an analyzer. Right?

Can I create a query directly, without parsing?

Or in other words: 

How can I search for fields stored with Field.Index.UN_TOKENIZED?
Why do I need an analyzer for searching?

Thank you.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 17:10:04 2008
Return-Path: <java-user-return-31937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25928 invoked from network); 13 Jan 2008 17:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 17:10:04 -0000
Received: (qmail 58540 invoked by uid 500); 13 Jan 2008 17:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58382 invoked by uid 500); 13 Jan 2008 17:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58371 invoked by uid 99); 13 Jan 2008 17:09:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 09:09:46 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 17:09:21 +0000
Received: by an-out-0708.google.com with SMTP id c5so409692anc.49
        for <java-user@lucene.apache.org>; Sun, 13 Jan 2008 09:09:25 -0800 (PST)
Received: by 10.100.8.10 with SMTP id 10mr11979191anh.11.1200244165450;
        Sun, 13 Jan 2008 09:09:25 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id w43sm5827603hsa.9.2008.01.13.09.09.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 13 Jan 2008 09:09:24 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <2A03CB21236940F98FD5CB997DD49893@msrvcn04>
References: <2A03CB21236940F98FD5CB997DD49893@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3B3B674C-F80F-4454-8983-6B2876B0A1B2@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexWriter minMergeDocs
Date: Sun, 13 Jan 2008 12:09:35 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I think that method was renamed somewhere along the way to  
setMaxBufferedDocs.

However, in 2.3 (to be released in a few weeks), it's better to use  
setRAMBufferSizeMB instead.

For more ideas on speeding up indexing, look here:

     http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Mike

<spring@gmx.eu> wrote:

> Hi,
>
> http://wiki.apache.org/lucene-java/PainlessIndexing says that I  
> shall use
> setMinMergeDocs.
>
> But I cannot find this method in lucene 2.2.
>
> What is wrong here?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 17:12:54 2008
Return-Path: <java-user-return-31938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26251 invoked from network); 13 Jan 2008 17:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 17:12:52 -0000
Received: (qmail 60938 invoked by uid 500); 13 Jan 2008 17:12:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60911 invoked by uid 500); 13 Jan 2008 17:12:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60900 invoked by uid 99); 13 Jan 2008 17:12:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 09:12:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 17:12:10 +0000
Received: (qmail invoked by alias); 13 Jan 2008 17:10:32 -0000
Received: from e178125033.adsl.alicedsl.de (EHLO msrvcn04) [85.178.125.33]
  by mail.gmx.net (mp008) with SMTP; 13 Jan 2008 18:10:32 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18dDWsWh4sd+eX5vlPdsZ2nfvUQNlNTWWHVMFmXf2
	A6xQYhyRWeV6KN
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Index merging and optimizing
Date: Sun, 13 Jan 2008 18:10:32 +0100
Message-ID: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
thread-index: AchWBzLhKGHXjDj2Qf+wUF04pTpnFg==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

are there any ready to use tools out there which I can use for merging and
optimzing?

I have seen that Luke can optimize, but not merge?

Or do I have to write my own utility?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 17:18:12 2008
Return-Path: <java-user-return-31939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27589 invoked from network); 13 Jan 2008 17:18:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 17:18:08 -0000
Received: (qmail 63688 invoked by uid 500); 13 Jan 2008 17:17:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63653 invoked by uid 500); 13 Jan 2008 17:17:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63642 invoked by uid 99); 13 Jan 2008 17:17:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 09:17:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 17:17:27 +0000
Received: (qmail invoked by alias); 13 Jan 2008 17:17:31 -0000
Received: from e178125033.adsl.alicedsl.de (EHLO msrvcn04) [85.178.125.33]
  by mail.gmx.net (mp056) with SMTP; 13 Jan 2008 18:17:31 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/pmosPxmfpRnmfnvbWOGc0auAIGUgvjoMMV4uxqr
	waEEfjBl/jdS/f
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <2A03CB21236940F98FD5CB997DD49893@msrvcn04> <3B3B674C-F80F-4454-8983-6B2876B0A1B2@mikemccandless.com>
Subject: RE: IndexWriter minMergeDocs
Date: Sun, 13 Jan 2008 18:17:33 +0100
Message-ID: <DE47AA342D854CFABA197805DB51A5FC@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <3B3B674C-F80F-4454-8983-6B2876B0A1B2@mikemccandless.com>
thread-index: AchWByJIo5qYX4kWQQG6pXizlm+TCAAAHnyQ
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> I think that method was renamed somewhere along the way to  
> setMaxBufferedDocs.
> 
> However, in 2.3 (to be released in a few weeks), it's better to use  
> setRAMBufferSizeMB instead.
> 
> For more ideas on speeding up indexing, look here:
> 
>      http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

OK, thank you!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 17:40:58 2008
Return-Path: <java-user-return-31940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32400 invoked from network); 13 Jan 2008 17:40:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 17:40:58 -0000
Received: (qmail 80286 invoked by uid 500); 13 Jan 2008 17:40:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80245 invoked by uid 500); 13 Jan 2008 17:40:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80234 invoked by uid 99); 13 Jan 2008 17:40:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 09:40:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 17:40:29 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9A2F030EFC26; Sun, 13 Jan 2008 10:40:20 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-211-181.dyn.embarqhsd.net [71.53.211.181])
	by ehatchersolutions.com (Postfix) with ESMTP id 46F3930EFC22
	for <java-user@lucene.apache.org>; Sun, 13 Jan 2008 10:40:07 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04>
References: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A5BF460F-6617-4246-84E7-D3C1DA8D9220@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: When to use which Analyzer
Date: Sun, 13 Jan 2008 12:39:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 13, 2008, at 12:08 PM, <spring@gmx.eu> wrote:
> I have some doubts about Analyzer usage. I read that one shall  
> always use
> the same analyzer for searching and indexing.
> Why? How does the Analyzer effect the search process? What is  
> analyzed here
> again?

As you surmised, it is because QueryParser analyzes fragments of the  
query string in order to get the query to match the terms indexed.

> I can see that when I use the SimpleAnalyzer again, the values of  
> my search
> are all converted to lowercase and numbers are removed.
> This leads to wrong results, because my values are stored with
> Field.Index.UN_TOKENIZED.
>
> Why is my query changed this way?
>
> I think it has to do with QueryParsing, which uses an analyzer. Right?
>
> Can I create a query directly, without parsing?

Yes, there are many Query subclasses in Lucene that you can use  
directly.

>
> Or in other words:
>
> How can I search for fields stored with Field.Index.UN_TOKENIZED?

Use TermQuery.


> Why do I need an analyzer for searching?

Consider a full-text field that will be tokenized removing special  
characters and lowercased, and then a user querying for an uppercase  
word.   The main thing is that queries need to jive with how things  
got indexed, Analyzer in the mix or not.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 17:41:52 2008
Return-Path: <java-user-return-31941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32534 invoked from network); 13 Jan 2008 17:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 17:41:52 -0000
Received: (qmail 84191 invoked by uid 500); 13 Jan 2008 17:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83888 invoked by uid 500); 13 Jan 2008 17:41:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83877 invoked by uid 99); 13 Jan 2008 17:41:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 09:41:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 17:41:23 +0000
Received: (qmail invoked by alias); 13 Jan 2008 17:41:15 -0000
Received: from e178125033.adsl.alicedsl.de (EHLO msrvcn04) [85.178.125.33]
  by mail.gmx.net (mp042) with SMTP; 13 Jan 2008 18:41:15 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19Tht0AlhZTAlyCF3ow7h+we2bpf53po8C8WI+C1w
	+NVRz5MmIpLiVP
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Max size of index (FSDirectory )
Date: Sun, 13 Jan 2008 18:41:18 +0100
Message-ID: <2F3129FA3C4642CAA9B5419192AFA1A6@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
thread-index: AchWC34cIhgsK6OJTTiM7okvMt1FiA==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

is there any maximum size for an index?

Are there any recommendations for a useful max size?

I want to index in parallel. So I have to create multiple indexes.
Shall I merge them together or shall I let them as they are using
(Parallel)MultiSearcher?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 19:37:03 2008
Return-Path: <java-user-return-31942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59964 invoked from network); 13 Jan 2008 19:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 19:37:03 -0000
Received: (qmail 51742 invoked by uid 500); 13 Jan 2008 19:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51707 invoked by uid 500); 13 Jan 2008 19:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51696 invoked by uid 99); 13 Jan 2008 19:36:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 11:36:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 19:36:22 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2119537fga.27
        for <java-user@lucene.apache.org>; Sun, 13 Jan 2008 11:36:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IFgD0j/IOZfXP5aCFifSzEvPeDAy/UKwuGUa5uD5gP8=;
        b=aakk1hs6AuwANpF/h/VFiCjkNXtOeaUSVFDIVitKKT1bu/bI+MzaCQ5+kQcDSeLuHCne08SquFGwO1hWg5pgTtpo5Zt3vTzX4mHxGnc+3PFcj+j80ubn90r8aSvmWZdHu2KT22z40KPsJWWRFDJ3pbKnbpu0ODb5wU2R9AaPFR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q5+MAiyBFfabQG0zL9xGb32WqmEaeTFun1Sol/Wk7oT3VkMLUQea9SNo7miLJ0JMnHpqE8j4IP1nLVgvKPa0ekqU4YhF//aaLQkv9rJ49vCmfKthj2zMvFoKe8SFyi5SlxQ66v55npxYgld1CIOXn/0SaWusdTH8J/vzbMTPOFQ=
Received: by 10.82.183.19 with SMTP id g19mr9450962buf.12.1200252986475;
        Sun, 13 Jan 2008 11:36:26 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 13 Jan 2008 11:36:26 -0800 (PST)
Message-ID: <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com>
Date: Sun, 13 Jan 2008 14:36:26 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index merging and optimizing
In-Reply-To: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7150_18960634.1200252986461"
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7150_18960634.1200252986461
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See IndexWriter.AddIndexes.
See org.apache.lucene.misc.IndexMergeTool

Erick

On Jan 13, 2008 12:10 PM, <spring@gmx.eu> wrote:

> Hi,
>
> are there any ready to use tools out there which I can use for merging and
> optimzing?
>
> I have seen that Luke can optimize, but not merge?
>
> Or do I have to write my own utility?
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7150_18960634.1200252986461--

From java-user-return-31943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 20:05:16 2008
Return-Path: <java-user-return-31943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65805 invoked from network); 13 Jan 2008 20:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 20:05:16 -0000
Received: (qmail 68371 invoked by uid 500); 13 Jan 2008 20:04:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68332 invoked by uid 500); 13 Jan 2008 20:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68321 invoked by uid 99); 13 Jan 2008 20:04:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 12:04:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 20:04:33 +0000
Received: (qmail 34620 invoked by uid 60001); 13 Jan 2008 20:04:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=i7gRe9w0fkOFoGi9AAkF2pIopA3e6e9TdxDFHkiAnHib4KzNM99sW8XegHl/pEvymQ9I76VXEvmmXdEaUTiSZoL5aneKFXrgxLInYTBTPVDkm8kvd+Ay6R+GAHfuExP/YVwgPZW+4jzOZL/hqcVNonvcEJ2X7MwzosNoJxNA91I=;
X-YMail-OSG: D0nWGi8VM1m.uCd_YtNpCu4y_95jVfOJNms6vzfC0k6S9TcBBDKe8IvWfw4fMhnwWer5nJTZ36jKLzZJ_dARkYEs8fdGfSZeBS7OFr_DxfjJWbyv0JQ-
Received: from [72.231.9.236] by web50307.mail.re2.yahoo.com via HTTP; Sun, 13 Jan 2008 12:04:37 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sun, 13 Jan 2008 12:04:37 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Max size of index (FSDirectory )
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <771844.34007.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 
----- Original Message ----
From: "spring@gmx.eu" <spring@gmx.eu>
To: java-user@lucene.apache.org
Sent: Sunday, January 13, 2008 12:41:18 PM
Subject: Max size of index (FSDirectory )

Hi,

is there any maximum size for an index?

OG: There is: doc IDs are currently integers, so max int size dictates the max number of documents per index.  However, you are a lot more likely to be limited by hardware.

Are there any recommendations for a useful max size?

OG: it really depends on the size of documents, number of fields, hardware specs, the required query latency, and so on.

I want to index in parallel. So I have to create multiple indexes.
Shall I merge them together or shall I let them as they are using
(Parallel)MultiSearcher?

OG: again, it depends.  If the index you'd get by merging is of manageable size, then merge your indices.  Otherwise, use remote flavour of PMS and spread your indices over multiple search servers.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 20:08:18 2008
Return-Path: <java-user-return-31944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66510 invoked from network); 13 Jan 2008 20:08:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 20:08:18 -0000
Received: (qmail 70582 invoked by uid 500); 13 Jan 2008 20:08:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70546 invoked by uid 500); 13 Jan 2008 20:08:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70535 invoked by uid 99); 13 Jan 2008 20:08:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 12:08:02 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jan 2008 20:07:35 +0000
Received: (qmail 36948 invoked by uid 60001); 13 Jan 2008 20:07:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dWn8wpVhhpa6kuN4FZZNNX7dVQR/kzXPzjd7zfxp5DxYAGmN2no9n3V3wVgDWpRybDG/BKSHvqstOvgkot3iHXfjIWuHa9i23EQNJ3jEoIzSXPldKjJqJZOXdK0LFYTIdwfOaz62anmUlwLbZ0dxpHoHqIyOwiiUklcGR+r251c=;
X-YMail-OSG: yP7NjIgVM1l3avw3icrXJ7XPtAb69iA0_iNKGZmCpOBqf7NzfMSWJeWJnQOwwcrT0khrJ2QDkmjUXQA956jz7COyXNK3jHMYFYjBCgbRq5IQKwNdIW.gP4jHSwcWXt_de33cW8cKsA01OG0-
Received: from [72.231.9.236] by web50307.mail.re2.yahoo.com via HTTP; Sun, 13 Jan 2008 12:07:40 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sun, 13 Jan 2008 12:07:40 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Sorting by multiple fields (conditions influencing each other?!)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <960339.36215.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

As far as I know, the secondary sort really kicks in only when there is a tie caused by the primary sort, so the secondary sort should not be affecting the primary sort.

Otis 
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Tobias Lohr <tobiaslohr@gmx.de>
To: java-user@lucene.apache.org
Sent: Saturday, January 12, 2008 7:52:49 PM
Subject: Sorting by multiple fields (conditions influencing each other?!)

I'm sorting the search result using multiple fields. Some of them are 
"real" fields, within the index, but one is a "pseudo" field, a custom 
sort field, implemented by using a custom SortComparatorSource. I end
 up 
with the sorting conditions in exact this order:

1. Sort by score generate by custom SortComparatorSource 
(SortField.FLOAT, ascending, score is either 0.0 or 0.1), it's like a 
grouping
2. Sort by real index field (SortField.AUTO, descending, value ranges 
from 0 to 6)

Is it guaranteed, that the 2nd sorting condition, does not influence
 the 
1st one in any way, and that the results are everytime "grouped" by the
 
1st condition?

It's like that high values of the real index field used in the 2nd 
condition are sometimes have an impact on the grouping of condition
 one.

Any suggestions?

Tobias

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 20:11:00 2008
Return-Path: <java-user-return-31945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67890 invoked from network); 13 Jan 2008 20:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 20:11:00 -0000
Received: (qmail 72384 invoked by uid 500); 13 Jan 2008 20:10:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72349 invoked by uid 500); 13 Jan 2008 20:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72335 invoked by uid 99); 13 Jan 2008 20:10:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 12:10:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 20:10:19 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2129544fga.27
        for <java-user@lucene.apache.org>; Sun, 13 Jan 2008 12:10:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=A5DCEmN+rKjoLdK7N4arh0jzXNEgD/Sj3jru+3XZSeY=;
        b=UmMs1OIvHa6YjrF7QT+q+O428d7m4NXqLgX9CmWuJB+a+/5TP+u4iS191MjyKY0C9Q7t5rFAJoAs3G9HOdFSn77k13wONWyMPvcHNfuUu8ZvrSlhppyekllUV9nNq6tTSTRje2Fq7sCx4lqu/fea6pZoHYCwN8SVMVzCN+6rhi8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AfW2UFLtbU4/ICKl0erhOXp3tZ9PtzNHGZYSoBVz64HqeWPT5vl5HIaFTbhgvku3CU4EeKEEqH1rsQHdz8O3cmsOwiGLf76gmYxRxim6CRH/Hx4P7t2+ZU7tRABwerOpFMrhWIeuUIWEGyGfUJq95nnlWxKnwb2QiyVBJO1fggE=
Received: by 10.82.159.15 with SMTP id h15mr9464742bue.36.1200255022850;
        Sun, 13 Jan 2008 12:10:22 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 13 Jan 2008 12:10:22 -0800 (PST)
Message-ID: <359a92830801131210y1e1fcad2xc0ea58244cd3815b@mail.gmail.com>
Date: Sun, 13 Jan 2008 15:10:22 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: When to use which Analyzer
In-Reply-To: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7264_5579631.1200255022836"
References: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7264_5579631.1200255022836
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm pretty sure that UN_TOKENIZED really bypasses analysis
entirely. so yes, it's a little confusing that you can specify an
analyzer but then pass a flag that says, in effect, "ignore the
analyzer I *said* I wanted to use".

So, in your example, you *are* running your query through
SimpleAnalyzer, but your text is NOT getting run
through the analyzer when it's indexed.

Luke is invaluable for seeing the effect of different analyzers.

The caution to use the same analyzer at index and query time is,
in my experience, simply good advice to follow until you are
familiar enough with how Lucene uses analyzers to keep from
getting really, really, really confused. Once you understand
when analyzers are used and how they effect the token
stream, you can use different ones when analyzing as opposed
to searching. But I've rarely found that I *wanted* to do that....

Best
Erick

On Jan 13, 2008 12:08 PM, <spring@gmx.eu> wrote:

> Hi,
>
> I have some doubts about Analyzer usage. I read that one shall always use
> the same analyzer for searching and indexing.
> Why? How does the Analyzer effect the search process? What is analyzed
> here
> again?
>
> I have tried this out. I used a SimpleAnalyzer for indexing with
> Field.Store.YES and Field.Index.UN_TOKENIZED. I can see with Luke that the
> field values are store unchanged, 1:1. OK.
>
> Now I did a search with Luke and depending on the used analyzer the Query
> returns results or not.
>
> I can see that when I use the SimpleAnalyzer again, the values of my
> search
> are all converted to lowercase and numbers are removed.
> This leads to wrong results, because my values are stored with
> Field.Index.UN_TOKENIZED.
>
> Why is my query changed this way?
>
> I think it has to do with QueryParsing, which uses an analyzer. Right?
>
> Can I create a query directly, without parsing?
>
> Or in other words:
>
> How can I search for fields stored with Field.Index.UN_TOKENIZED?
> Why do I need an analyzer for searching?
>
> Thank you.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7264_5579631.1200255022836--

From java-user-return-31946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 13 22:08:30 2008
Return-Path: <java-user-return-31946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96683 invoked from network); 13 Jan 2008 22:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2008 22:08:30 -0000
Received: (qmail 51030 invoked by uid 500); 13 Jan 2008 22:08:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50997 invoked by uid 500); 13 Jan 2008 22:08:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50986 invoked by uid 99); 13 Jan 2008 22:08:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 14:08:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 22:07:48 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1023023wxd.20
        for <java-user@lucene.apache.org>; Sun, 13 Jan 2008 14:07:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        bh=KnRbJBPjmZUcF2AqWwSJ9tYh7qg8VjSB6JSnAi1zr/A=;
        b=WBntldtDDjU1StcMT+oFAYcDv6JunA0pEBt4RHeZgqAH8rCOep40gnuP2BqxlYUGhb+p22yrS7/rAeaKly68YI81thL3KR3evCzoyOrGwJOrrY2bwp7RiEwlWRG2r+oeRm9d0Fs8fed+p73nrsH4Wzw/VKkU/FPW5wwWxb/ZLIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=XavF0BsQS49bNUY0HUAVFFJ49BgMqhrxxScPiGT3Ack4AY9nyyzRhxvJA+ZL3ncwff33XDkh7lf1gUM71VB7cVkwkL/R6mbmg98F/swHFmeiTdqdpgoNBelY/ewtGO/9hRaRl7QcSCB2nwRW0q8NU45Qc7cDEQ6cAXTd9zIqxRM=
Received: by 10.150.203.8 with SMTP id a8mr2140893ybg.56.1200262072793;
        Sun, 13 Jan 2008 14:07:52 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Sun, 13 Jan 2008 14:07:52 -0800 (PST)
Message-ID: <c01704c90801131407t6fac87fcuccaf40a36c11ef34@mail.gmail.com>
Date: Sun, 13 Jan 2008 17:07:52 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to model hierarchy info to be searched related to a document
Cc: "roger.camargo@hotmail.com" <roger.camargo@hotmail.com>
In-Reply-To: <BAY124-W52154592F93440DE1DAA8BF8440@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3482_8542125.1200262072781"
References: <BAY124-W52154592F93440DE1DAA8BF8440@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3482_8542125.1200262072781
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Roger,

Why can;t you have one document  for every combination of dimension, level
? Add cube name , id and description too as a field to all documents , all
it would be reduntant information, but you can live with it i suppose?

I think you are developing an application to search a cube ?

what do you mean by observations of a dimension ? is there an example?

On Jan 11, 2008 7:57 PM, Roger Camargo <roger.camargo@hotmail.com> wrote:

> I'm trying to index information related to Olap Cubes.
>
> Each cube I'm trying to model it like a document.
>
> The cube have the following information:
>
> ID - Unique identifier for the cube
> Name - Name of the cube
> Description - Description of the cube
>
> (There can be many dimensions per cube)
> Dimension name - Name of the dimension of the cube
> Dimension observations - Observations related to the dimension. (Optional=
)
> Dimension type - Type of the dimension
>
> (Each dimension has at least one Level, but there can be many levels per
> dimension)
> Level name - Name of the level
> Level observations - Observations of the level (Optional)
>
> (There has to be at least one Fact per cube)
> Fact name - Name of the fact
> Fact aggregation - Aggregation of the fact
>
> (Also there can be custom properties added by the user, with the form
> Name,Value)
> Custom property name - Name of the custom property
> Custom property value - Value of the custom property
>
> Right now I'm just indexing the first 3 ID, Name and Description, but I
> would also want the other information to be indexed and search the cube w=
ith
> that information.
>
> --------------------------------------------------------
> Data sample:
>
> ID: 0
> Name: Quarter sales per region
> Descript=EDon: Description of the cube...
>
> Dimension name: Region
> Dimension observations: The dimension only includes countries of south
> america
> Dimension type: Geographical
>
>  Level name: Country
>  Level observations: Observations of the level....
>
>  Level name: City
>  Level observations: Observations of the level....
>
> Dimension name: Time
> Dimension observations: Has data only from the year 2000
> Dimension type: Time
>
>  Level name: Year
>  Level observations: No observations
>
>  Level name: Quarter
>  Level observations: No observations
>
> Fact name: Sales
> Fact Aggregation: Sum
>
> Fact name: % Quarter Growth
> Fact Aggregation: AVG
>
> Custom property name: Frequency
> Custom property value: Quarterly
>
> Custom property name: Last update
> Custom property value: 2006-01-01
> --------------------------------------------------------
>
> My problems would be the following.
>
> 1. How to index "Dimension name" and "Dimension observations".
> If there would be just Dimension names, I cound index it as a single Fiel=
d
> with multiple values.
> But with the addition of the observations, I need to know if the search
> term was founded within the observation, to wich dimension belongs the
> founded observations.
> And the same happens with the "Dimension type"
>
> 2. There can be many of these Dimension name, observations, type. The sam=
e
> applies for the Level name, observation - Fact name,type - Custom propert=
y
> name, value.
>
> 3. The levels. if the search term was founded in the level observation, I
> would need to know to which level name is related the level observation
> founded along with the dimension related, and finally the cube itserlf.
>
> Well... this was a bit long question to be my first one.
>
> Maybe what I want can't be done, maybe there could be some walkaround tha=
t
> someone knows it.
>
> I was thinking that if it can be posible to have a field, with additional
> info attached to the value, that is not searchable, it just needed when t=
he
> field value is retrieved it.
>
> For example a Multi-value field called DimObs.
>
> Value1: "Observations related to the first dimension of the cube"
> Related info: "Dimension name1"
>
> Value2: "Observations related to the second dimension of the cube"
> Related info: "Dimension name2"
>
> When the search is performed and is founded in the DimObs, for example
> "first".
> Then the search found "first" int the DimObs, but I would need to retriev=
e
> the "Related info" to know to which Dimension belongs the observations
> founded.
>
> Thanks in advance for keeping with me till the end of this mail and for
> any suggestions that could give me.
>
> Roger Camargo
> UMSS "University"
> Cochabamba - Bolivia
>
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today it's FREE!
> http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
>

------=_Part_3482_8542125.1200262072781--

From java-user-return-31947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 00:07:54 2008
Return-Path: <java-user-return-31947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39851 invoked from network); 14 Jan 2008 00:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 00:07:54 -0000
Received: (qmail 31412 invoked by uid 500); 14 Jan 2008 00:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31371 invoked by uid 500); 14 Jan 2008 00:07:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31356 invoked by uid 99); 14 Jan 2008 00:07:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jan 2008 16:07:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.200.237] (HELO smtp102.biz.mail.mud.yahoo.com) (68.142.200.237)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 00:07:11 +0000
Received: (qmail 78532 invoked from network); 14 Jan 2008 00:07:15 -0000
Received: from unknown (HELO apollo.hq.theatlantis.net) (aron@theatlantis.net@64.175.42.176 with plain)
  by smtp102.biz.mail.mud.yahoo.com with SMTP; 14 Jan 2008 00:07:14 -0000
X-YMail-OSG: .l_B9HIVM1nJI1xSbhdVEmTYeubA8u0xyUsR_5l9ddbrPTekdDwCY38Pq4QHix.eOcsYJ2tp_w--
Message-ID: <478AA7B0.8050803@theatlantis.net>
Date: Sun, 13 Jan 2008 16:07:12 -0800
From: Aron Sogor <aron@theatlantis.net>
User-Agent: Thunderbird 2.0.0.9 (Macintosh/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Sort does not work for me
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the document:

            MimeMessage mime = new MimeMessage(null, new 
FileInputStream(item
                    .getMailFile()));
            document.add(new Field(FIELD_MAILID, 
item.getMailId().toString(),
                    Field.Store.YES, Field.Index.UN_TOKENIZED));
            document.add(new Field(FIELD_SUBJECT, mime.getSubject(),
                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
            document.add(new Field(FIELD_FROM, 
getAddressLine(mime.getFrom()),
                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
            document.add(new Field(FIELD_BODY, getContentReader(mime
                    .getContent())));
            document.add(new Field(FIELD_RECEIVED, DateTools.timeToString(
                    System.currentTimeMillis(), 
DateTools.Resolution.SECOND),
                    Field.Store.NO, Field.Index.UN_TOKENIZED));
            document.add(new Field(FIELD_TAG, TAG_INBOX, Field.Store.YES,
                    Field.Index.TOKENIZED));
            return document;

here is the search:

    public static Hits createInboxQuery(IndexSearcher searcher)
            throws ParseException, IOException {
        Query query = new QueryParser(FIELD_TAG, new StandardAnalyzer())
                .parse(TAG_INBOX);
        Sort sort = new Sort(FIELD_RECEIVED,true);
        return searcher.search(query, sort);
    }

            IndexSearcher searcher = 
storage.getIndexSearcherForMailBox("junk");
            Hits hits = DocumentAndQueryFactory.createInboxQuery(searcher);
            for (int i = 0; i < hits.length(); i++) {
                Document hit = (Document) hits.doc(i);
                System.out.println(hit.getField("subject").stringValue());


No matter what I do when I lit the hits they come back (these are the 
subjects/ but essentially same timestamp):

Test MSGSun Jan 13 15:52:47 PST 2008
Test MSGSun Jan 13 15:52:54 PST 2008
Test MSGSun Jan 13 15:53:03 PST 2008
Test MSGSun Jan 13 15:53:12 PST 2008
Test MSGSun Jan 13 15:53:48 PST 2008

Setting the "revert" for the search Sort essentially has no effect. I 
perhaps very much missing something... but what?

Aron

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 08:13:57 2008
Return-Path: <java-user-return-31948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50841 invoked from network); 14 Jan 2008 08:13:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 08:13:57 -0000
Received: (qmail 11921 invoked by uid 500); 14 Jan 2008 08:13:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11883 invoked by uid 500); 14 Jan 2008 08:13:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11869 invoked by uid 99); 14 Jan 2008 08:13:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 00:13:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 08:13:29 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JUM0075LK69E9@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 14 Jan 2008 09:13:21 +0100 (MET)
Date: Mon, 14 Jan 2008 09:13:21 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Lucene sorting case-sensitive by default?
In-reply-to: <F700E5D18787514F8EFB5B5CE7423936BE02A2@soho.SVGINTERNET.COM>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200298401.9514.15.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <F700E5D18787514F8EFB5B5CE7423936BE02A2@soho.SVGINTERNET.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2008-01-11 at 11:40 -0500, Alex Wang wrote:
> Looks like Lucene is separating upper case and lower case while sorting.

As Tom points out, default sorting uses natural order. It's worth noting
that this implies that default sorting does not produce usable results
as soon as you use non-ASCII characters. Using a Collator works but does
take a fair amount of memory.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 11:13:37 2008
Return-Path: <java-user-return-31949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 973 invoked from network); 14 Jan 2008 11:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 11:13:37 -0000
Received: (qmail 78344 invoked by uid 500); 14 Jan 2008 11:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78315 invoked by uid 500); 14 Jan 2008 11:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78304 invoked by uid 99); 14 Jan 2008 11:13:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 03:13:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 11:12:54 +0000
Received: (qmail invoked by alias); 14 Jan 2008 11:12:58 -0000
Received: from e178114128.adsl.alicedsl.de (EHLO msrvcn04) [85.178.114.128]
  by mail.gmx.net (mp003) with SMTP; 14 Jan 2008 12:12:58 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18JsKkMYaIJlEjCplBRbw/E6oIeTkvRlBfTIS9hiH
	O66dxKKNc/HHkO
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04> <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com>
Subject: RE: Index merging and optimizing
Date: Mon, 14 Jan 2008 12:12:58 +0100
Message-ID: <5F58FC8D651B47929E2280861FB009A5@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com>
Thread-Index: AchWG63MG59WrmYSTaKiPfJamC79YAAghY1Q
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> See org.apache.lucene.misc.IndexMergeTool

Thank you. 

But this uses a hardcoded analyzer and deprecated API-Calls.

How does the used analyzer effect the merge process?
Is everything reindexed with this new analyzer again? Does this make sense?
What if the sources indexes had other analyzers used?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 11:19:47 2008
Return-Path: <java-user-return-31950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4593 invoked from network); 14 Jan 2008 11:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 11:19:47 -0000
Received: (qmail 96091 invoked by uid 500); 14 Jan 2008 11:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95480 invoked by uid 500); 14 Jan 2008 11:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95468 invoked by uid 99); 14 Jan 2008 11:19:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 03:19:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 11:19:04 +0000
Received: (qmail invoked by alias); 14 Jan 2008 11:19:08 -0000
Received: from e178114128.adsl.alicedsl.de (EHLO msrvcn04) [85.178.114.128]
  by mail.gmx.net (mp056) with SMTP; 14 Jan 2008 12:19:08 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/EvYUW+1/ESUnjPXrnG5XRFMRicn/gshzH7PLG4C
	tS4Ujbnkp2EhMY
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <771844.34007.qm@web50307.mail.re2.yahoo.com>
Subject: RE: Max size of index (FSDirectory )
Date: Mon, 14 Jan 2008 12:19:09 +0100
Message-ID: <5BA94CC77835454EAEA17687630AE38D@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <771844.34007.qm@web50307.mail.re2.yahoo.com>
Thread-Index: AchWH55OtE27R9FOQeu0wieh81H+UwAftSnA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> OG: again, it depends.  If the index you'd get by merging is 
> of manageable size, then merge your indices. 

OK, this is what I tought. 
A single index should be faster than multiple indexes with a MultiSearcher,
right?
But what about the ParallelMultiSearcher? As I understand the docs it
searches the indexes parallel (one thread per index?) and then returns the
merged search results?

> Otherwise, use remote flavour of PMS and spread your indices over multiple

> search servers.

What is PMS?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 11:24:25 2008
Return-Path: <java-user-return-31951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6577 invoked from network); 14 Jan 2008 11:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 11:24:23 -0000
Received: (qmail 5968 invoked by uid 500); 14 Jan 2008 11:24:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5935 invoked by uid 500); 14 Jan 2008 11:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5924 invoked by uid 99); 14 Jan 2008 11:24:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 03:24:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 11:23:54 +0000
Received: (qmail invoked by alias); 14 Jan 2008 11:23:47 -0000
Received: from e178114128.adsl.alicedsl.de (EHLO msrvcn04) [85.178.114.128]
  by mail.gmx.net (mp027) with SMTP; 14 Jan 2008 12:23:47 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/NmnIIPgnNUvtR96/T7YA2/pVv6oVGFymgMp2NgC
	E888RgBhXwCkfa
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04> <A5BF460F-6617-4246-84E7-D3C1DA8D9220@ehatchersolutions.com>
Subject: RE: When to use which Analyzer
Date: Mon, 14 Jan 2008 12:23:47 +0100
Message-ID: <44B877515ECB4C23906326B004773C2E@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <A5BF460F-6617-4246-84E7-D3C1DA8D9220@ehatchersolutions.com>
Thread-Index: AchWC3ZV/eJGbwQsQoSyXwBFAIEC8AAk63Yg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> > How can I search for fields stored with Field.Index.UN_TOKENIZED?
> 
> Use TermQuery.
> 
> > Why do I need an analyzer for searching?
> 
> Consider a full-text field that will be tokenized removing special  
> characters and lowercased, and then a user querying for an uppercase  
> word.   The main thing is that queries need to jive with how things  
> got indexed, Analyzer in the mix or not.

OK. 
So I have to use TermQuery when I want to search on UN_TOKENIZED fields.
And what Query-Class for TOKENIZED fields?
And then combine both into what Query?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 11:24:31 2008
Return-Path: <java-user-return-31952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6647 invoked from network); 14 Jan 2008 11:24:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 11:24:31 -0000
Received: (qmail 7003 invoked by uid 500); 14 Jan 2008 11:24:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6973 invoked by uid 500); 14 Jan 2008 11:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6926 invoked by uid 99); 14 Jan 2008 11:24:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 03:24:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 11:23:42 +0000
Received: (qmail invoked by alias); 14 Jan 2008 11:23:47 -0000
Received: from e178114128.adsl.alicedsl.de (EHLO msrvcn04) [85.178.114.128]
  by mail.gmx.net (mp027) with SMTP; 14 Jan 2008 12:23:47 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/NmnIIPgnNUvtR96/T7YA2/pVv6oVGFymgMp2NgC
	E888RgBhXwCkfa
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04> <359a92830801131210y1e1fcad2xc0ea58244cd3815b@mail.gmail.com>
Subject: RE: When to use which Analyzer
Date: Mon, 14 Jan 2008 12:23:47 +0100
Message-ID: <9BFAF2026A4B42229B1073859DF0067E@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801131210y1e1fcad2xc0ea58244cd3815b@mail.gmail.com>
Thread-Index: AchWIGj2p1iF1U2NQiiS/kM/AQVicQAf201g
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> The caution to use the same analyzer at index and query time is,
> in my experience, simply good advice to follow until you are
> familiar enough with how Lucene uses analyzers to keep from
> getting really, really, really confused. Once you understand
> when analyzers are used and how they effect the token
> stream, you can use different ones when analyzing as opposed
> to searching. But I've rarely found that I *wanted* to do that....

OK; thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 13:00:20 2008
Return-Path: <java-user-return-31953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49769 invoked from network); 14 Jan 2008 13:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 13:00:20 -0000
Received: (qmail 94834 invoked by uid 500); 14 Jan 2008 13:00:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94804 invoked by uid 500); 14 Jan 2008 13:00:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94793 invoked by uid 99); 14 Jan 2008 13:00:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 05:00:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of roger.camargo@hotmail.com designates 65.54.246.225 as permitted sender)
Received: from [65.54.246.225] (HELO bay0-omc3-s25.bay0.hotmail.com) (65.54.246.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 12:59:36 +0000
Received: from BAY124-W41 ([207.46.11.204]) by bay0-omc3-s25.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 14 Jan 2008 04:59:42 -0800
Message-ID: <BAY124-W411DB08262ABE309ED7862F8460@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_258f15f7-1d4c-4c11-a72e-59faf9c648b7_"
X-Originating-IP: [200.58.78.118]
From: Roger Camargo <roger.camargo@hotmail.com>
To: <java-user@lucene.apache.org>
CC: <devquestions@gmail.com>
Subject: RE: How to model hierarchy info to be searched related to a document
Date: Mon, 14 Jan 2008 08:59:42 -0400
Importance: Normal
In-Reply-To: <c01704c90801131407t6fac87fcuccaf40a36c11ef34@mail.gmail.com>
References: <BAY124-W52154592F93440DE1DAA8BF8440@phx.gbl>
 <c01704c90801131407t6fac87fcuccaf40a36c11ef34@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 14 Jan 2008 12:59:42.0410 (UTC) FILETIME=[5452C2A0:01C856AD]
X-Virus-Checked: Checked by ClamAV on apache.org

--_258f15f7-1d4c-4c11-a72e-59faf9c648b7_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Thanks for answering.
=20
It seems that there isn't any other way around, having every combination of=
 dimension and level.
=20
The example for the observations of the dimension, would be as follow, mayb=
e isn't such an important information to be stored, but type it is.
=20
Dimension name: RegionDimension observations: The dimension only includes c=
ountries of south america <--This would be the observations of the dimensio=
n.Dimension type: Geographical
=20
OK, now it seems that I have one document per combination of dimension and =
level (following the example I provided it would be something like this
doc 0: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of th=
e cube", dimension=3D"Region", level=3D"Country"doc 1: id=3D0, name=3D"Quar=
ter sales per region", desc=3D"Description of the cube", dimension=3D"Regio=
n", level=3D"City"
doc 2: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of th=
e cube", dimension=3D"Time", level=3D"Year"doc 3: id=3D0, name=3D"Quarter s=
ales per region", desc=3D"Description of the cube", dimension=3D"Time", lev=
el=3D"Quarter"
=20
OK and adding the Dimension type would end up like this:
=20
doc 0: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of th=
e cube", dimension=3D"Region", dimensiontype=3D"Geographycal" level=3D"Coun=
try"doc 1: id=3D0, name=3D"Quarter sales per region", desc=3D"Description o=
f the cube", dimension=3D"Region", dimensiontype=3D"Geographycal" level=3D"=
City"
doc 2: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of th=
e cube", dimension=3D"Time", dimensiontype=3D"Time" level=3D"Year"doc 3: id=
=3D0, name=3D"Quarter sales per region", desc=3D"Description of the cube", =
dimension=3D"Time", dimensiontype=3D"Time" level=3D"Quarter"
=20
Now what about the custom properties?
Custom property name: Update FrequencyCustom property value: Quarterly
Custom property name: Last update Custom property value: 2006-01-01
=20
I'm afraid that I would end up not using them for the search, they would ha=
ve each one a field, and because the user can create any number of these cu=
stom properties they would be hard to query them. Or is there any correct w=
ay to add them to the document model?
=20
Roger CamargoUMSS "University"Cochabamba - Bolivia


Date: Sun, 13 Jan 2008 17:07:52 -0500From: devquestions@gmail.comTo: java-u=
ser@lucene.apache.orgSubject: Re: How to model hierarchy info to be searche=
d related to a documentCC: roger.camargo@hotmail.comRoger,Why can;t you hav=
e one document  for every combination of dimension, level  ? Add cube name =
, id and description too as a field to all documents , all it would be redu=
ntant information, but you can live with it i suppose? I think you are deve=
loping an application to search a cube ? what do you mean by observations o=
f a dimension ? is there an example?
On Jan 11, 2008 7:57 PM, Roger Camargo < roger.camargo@hotmail.com> wrote:
I'm trying to index information related to Olap Cubes. Each cube I'm trying=
 to model it like a document.The cube have the following information:ID - U=
nique identifier for the cubeName - Name of the cubeDescription - Descripti=
on of the cube(There can be many dimensions per cube)Dimension name - Name =
of the dimension of the cubeDimension observations - Observations related t=
o the dimension. (Optional)Dimension type - Type of the dimension(Each dime=
nsion has at least one Level, but there can be many levels per dimension)Le=
vel name - Name of the levelLevel observations - Observations of the level =
(Optional)(There has to be at least one Fact per cube) Fact name - Name of =
the factFact aggregation - Aggregation of the fact(Also there can be custom=
 properties added by the user, with the form Name,Value)Custom property nam=
e - Name of the custom property Custom property value - Value of the custom=
 propertyRight now I'm just indexing the first 3 ID, Name and Description, =
but I would also want the other information to be indexed and search the cu=
be with that information. -------------------------------------------------=
-------Data sample:ID: 0Name: Quarter sales per regionDescript=EDon: Descri=
ption of the cube...Dimension name: RegionDimension observations: The dimen=
sion only includes countries of south america Dimension type: Geographical =
Level name: Country Level observations: Observations of the level.... Level=
 name: City Level observations: Observations of the level....Dimension name=
: Time Dimension observations: Has data only from the year 2000Dimension ty=
pe: Time Level name: Year Level observations: No observations Level name: Q=
uarter Level observations: No observations Fact name: SalesFact Aggregation=
: SumFact name: % Quarter GrowthFact Aggregation: AVGCustom property name: =
FrequencyCustom property value: QuarterlyCustom property name: Last update =
Custom property value: 2006-01-01------------------------------------------=
--------------My problems would be the following.1. How to index "Dimension=
 name" and "Dimension observations". If there would be just Dimension names=
, I cound index it as a single Field with multiple values.But with the addi=
tion of the observations, I need to know if the search term was founded wit=
hin the observation, to wich dimension belongs the founded observations. An=
d the same happens with the "Dimension type"2. There can be many of these D=
imension name, observations, type. The same applies for the Level name, obs=
ervation - Fact name,type - Custom property name, value. 3. The levels. if =
the search term was founded in the level observation, I would need to know =
to which level name is related the level observation founded along with the=
 dimension related, and finally the cube itserlf. Well... this was a bit lo=
ng question to be my first one.Maybe what I want can't be done, maybe there=
 could be some walkaround that someone knows it.I was thinking that if it c=
an be posible to have a field, with additional info attached to the value, =
that is not searchable, it just needed when the field value is retrieved it=
. For example a Multi-value field called DimObs.Value1: "Observations relat=
ed to the first dimension of the cube"Related info: "Dimension name1"Value2=
: "Observations related to the second dimension of the cube" Related info: =
"Dimension name2"When the search is performed and is founded in the DimObs,=
 for example "first".Then the search found "first" int the DimObs, but I wo=
uld need to retrieve the "Related info" to know to which Dimension belongs =
the observations founded. Thanks in advance for keeping with me till the en=
d of this mail and for any suggestions that could give me.Roger CamargoUMSS=
 "University"Cochabamba - Bolivia
_________________________________________________________________Express yo=
urself instantly with MSN Messenger! Download today it's FREE!http://messen=
ger.msn.click-url.com/go/onm00200471ave/direct/01/
_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE!
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/=

--_258f15f7-1d4c-4c11-a72e-59faf9c648b7_--

From java-user-return-31954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 14:57:14 2008
Return-Path: <java-user-return-31954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97900 invoked from network); 14 Jan 2008 14:57:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 14:57:14 -0000
Received: (qmail 58045 invoked by uid 500); 14 Jan 2008 14:56:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58011 invoked by uid 500); 14 Jan 2008 14:56:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58000 invoked by uid 99); 14 Jan 2008 14:56:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 06:56:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 14:56:32 +0000
Received: by wr-out-0506.google.com with SMTP id c46so515613wra.14
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 06:56:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=h8qffX9T3AmX4A/k/2ISMzCLp/MnJ9jVUYdya4Eqv00=;
        b=istJyO3YlMrK57cLiX0BkkbRMGWspJnGnFSQIFcmwj7lsCOSbsWcfgV3hyhwvYah5RIbvrAjcZDF4HJqYXb73chpVfhSje9bQcomjdb54Z810u1F+wX2Mzu5hu8cMffH0PD1Nb+pX33lssV5HG6tfyd4b+64Qqd3VHWLFmbE2G0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hbhEIe9/ThF25Gk6o39v9VUO/CdAYZgZcdw/kYSiOEX+a7CEzw+OsyyLkFe+7QpEyzhqWv5u8L/VU/JW/crZQIHgZYxTDC23FQ6Mzmy38VUZhUs5n5nNSu6Ep8IkrT1M9oDUB9xSvtCnhf7kGdoBrhrnP0h1Ff+pinNNIpMr7tQ=
Received: by 10.151.83.12 with SMTP id k12mr2463932ybl.7.1200322596134;
        Mon, 14 Jan 2008 06:56:36 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Mon, 14 Jan 2008 06:56:36 -0800 (PST)
Message-ID: <c01704c90801140656k2ab18576n529c75eca7f8ba5e@mail.gmail.com>
Date: Mon, 14 Jan 2008 09:56:36 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to model hierarchy info to be searched related to a document
In-Reply-To: <BAY124-W411DB08262ABE309ED7862F8460@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_897_345865.1200322596128"
References: <BAY124-W52154592F93440DE1DAA8BF8440@phx.gbl>
	 <c01704c90801131407t6fac87fcuccaf40a36c11ef34@mail.gmail.com>
	 <BAY124-W411DB08262ABE309ED7862F8460@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_897_345865.1200322596128
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I am not sure why you are afraid of adding more fields to the document.
Having 20-30 fields to a document is not a bad thing to do. Do you have any
constraints to limit the number of fields in the document?









On Jan 14, 2008 7:59 AM, Roger Camargo <roger.camargo@hotmail.com> wrote:

> Thanks for answering.
>
> It seems that there isn't any other way around, having every combination
> of dimension and level.
>
> The example for the observations of the dimension, would be as follow,
> maybe isn't such an important information to be stored, but type it is.
>
> Dimension name: Region
> Dimension observations: The dimension only includes countries of south
> america <--This would be the observations of the dimension.
> Dimension type: Geographical
>
> OK, now it seems that I have one document per combination of dimension an=
d
> level (following the example I provided it would be something like this
> doc 0: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Region", level=3D"Country"
> doc 1: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Region", level=3D"City"
> doc 2: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Time", level=3D"Year"
> doc 3: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Time", level=3D"Quarter"
>
> OK and adding the Dimension type would end up like this:
>
> doc 0: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Region", dimensiontype=3D"Geographycal" level=3D"Coun=
try"
> doc 1: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Region", dimensiontype=3D"Geographycal" level=3D"City=
"
> doc 2: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Time", dimensiontype=3D"Time" level=3D"Year"
> doc 3: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the
> cube", dimension=3D"Time", dimensiontype=3D"Time" level=3D"Quarter"
>
> Now what about the custom properties?
>
> Custom property name: Update Frequency
> Custom property value: Quarterly
> Custom property name: Last update
> Custom property value: 2006-01-01
>
> I'm afraid that I would end up not using them for the search, they would
> have each one a field, and because the user can create any number of thes=
e
> custom properties they would be hard to query them. Or is there any corre=
ct
> way to add them to the document model?
>
> Roger Camargo
> UMSS "University"
> Cochabamba - Bolivia
>
>  ------------------------------
> Date: Sun, 13 Jan 2008 17:07:52 -0500
> From: devquestions@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: How to model hierarchy info to be searched related to a
> document
> CC: roger.camargo@hotmail.com
>
>
> Roger,
>
> Why can;t you have one document  for every combination of dimension,
> level  ? Add cube name , id and description too as a field to all documen=
ts
> , all it would be reduntant information, but you can live with it i suppo=
se?
>
>
> I think you are developing an application to search a cube ?
>
> what do you mean by observations of a dimension ? is there an example?
>
> On Jan 11, 2008 7:57 PM, Roger Camargo < roger.camargo@hotmail.com> wrote=
:
>
> I'm trying to index information related to Olap Cubes.
>
> Each cube I'm trying to model it like a document.
>
> The cube have the following information:
>
> ID - Unique identifier for the cube
> Name - Name of the cube
> Description - Description of the cube
>
> (There can be many dimensions per cube)
> Dimension name - Name of the dimension of the cube
> Dimension observations - Observations related to the dimension. (Optional=
)
> Dimension type - Type of the dimension
>
> (Each dimension has at least one Level, but there can be many levels per
> dimension)
> Level name - Name of the level
> Level observations - Observations of the level (Optional)
>
> (There has to be at least one Fact per cube)
> Fact name - Name of the fact
> Fact aggregation - Aggregation of the fact
>
> (Also there can be custom properties added by the user, with the form
> Name,Value)
> Custom property name - Name of the custom property
> Custom property value - Value of the custom property
>
> Right now I'm just indexing the first 3 ID, Name and Description, but I
> would also want the other information to be indexed and search the cube w=
ith
> that information.
>
> --------------------------------------------------------
> Data sample:
>
> ID: 0
> Name: Quarter sales per region
> Descript=EDon: Description of the cube...
>
> Dimension name: Region
> Dimension observations: The dimension only includes countries of south
> america
> Dimension type: Geographical
>
>  Level name: Country
>  Level observations: Observations of the level....
>
>  Level name: City
>  Level observations: Observations of the level....
>
> Dimension name: Time
> Dimension observations: Has data only from the year 2000
> Dimension type: Time
>
>  Level name: Year
>  Level observations: No observations
>
>  Level name: Quarter
>  Level observations: No observations
>
> Fact name: Sales
> Fact Aggregation: Sum
>
> Fact name: % Quarter Growth
> Fact Aggregation: AVG
>
> Custom property name: Frequency
> Custom property value: Quarterly
>
> Custom property name: Last update
> Custom property value: 2006-01-01
> --------------------------------------------------------
>
> My problems would be the following.
>
> 1. How to index "Dimension name" and "Dimension observations".
> If there would be just Dimension names, I cound index it as a single Fiel=
d
> with multiple values.
> But with the addition of the observations, I need to know if the search
> term was founded within the observation, to wich dimension belongs the
> founded observations.
> And the same happens with the "Dimension type"
>
> 2. There can be many of these Dimension name, observations, type. The sam=
e
> applies for the Level name, observation - Fact name,type - Custom propert=
y
> name, value.
>
> 3. The levels. if the search term was founded in the level observation, I
> would need to know to which level name is related the level observation
> founded along with the dimension related, and finally the cube itserlf.
>
> Well... this was a bit long question to be my first one.
>
> Maybe what I want can't be done, maybe there could be some walkaround tha=
t
> someone knows it.
>
> I was thinking that if it can be posible to have a field, with additional
> info attached to the value, that is not searchable, it just needed when t=
he
> field value is retrieved it.
>
> For example a Multi-value field called DimObs.
>
> Value1: "Observations related to the first dimension of the cube"
> Related info: "Dimension name1"
>
> Value2: "Observations related to the second dimension of the cube"
> Related info: "Dimension name2"
>
> When the search is performed and is founded in the DimObs, for example
> "first".
> Then the search found "first" int the DimObs, but I would need to retriev=
e
> the "Related info" to know to which Dimension belongs the observations
> founded.
>
> Thanks in advance for keeping with me till the end of this mail and for
> any suggestions that could give me.
>
> Roger Camargo
> UMSS "University"
> Cochabamba - Bolivia
>
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today it's FREE!
> http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
>
>
>
> ------------------------------
> Express yourself instantly with MSN Messenger! MSN Messenger<http://clk.a=
tdmt.com/AVE/go/onm00200471ave/direct/01/>
>

------=_Part_897_345865.1200322596128--

From java-user-return-31955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:06:19 2008
Return-Path: <java-user-return-31955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64062 invoked from network); 14 Jan 2008 15:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:06:19 -0000
Received: (qmail 78467 invoked by uid 500); 14 Jan 2008 15:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78356 invoked by uid 500); 14 Jan 2008 15:06:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78340 invoked by uid 99); 14 Jan 2008 15:06:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:06:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 15:05:37 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1217353fkz.5
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 07:05:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NwMDYhkU3M59Hrpgr6hWwoVM9oVYMrylU/YJu6nyE+w=;
        b=RJe/BsN28H+ztkTDfcQNJ1829Sisnw9+IvyR1WVxlrujOTPudxGhECYlLhY8qbl7k1PuXqFE1ytzKuWimf+NtxfDcxX1z6YDK3+Twd0z3QN2VoKUUfA7TCE7jBgUNbUepCkpFE8ISNhfYuXPXIi9Rg7THpSkGlkoYJpyCGhYibg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RU3grmGRc4q+oZrPIVklUWUD4k/RpKuhwCBFLfRkM9JJV011J8PiUIb/2nmElFTg6urT/oIyPc6qEp0tYOLlV9G44JoQ805kgZTVzmj/t9exg/5nsagWPDx+KrGUuA5Ms5tdlhc5EJO86kK4ZVENipxv8VdcQUY2qnIX9YcymXA=
Received: by 10.82.106.14 with SMTP id e14mr11045894buc.38.1200323141831;
        Mon, 14 Jan 2008 07:05:41 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 14 Jan 2008 07:05:41 -0800 (PST)
Message-ID: <359a92830801140705v3ee9f6e9yc4abb3d2008e3ed9@mail.gmail.com>
Date: Mon, 14 Jan 2008 10:05:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index merging and optimizing
In-Reply-To: <5F58FC8D651B47929E2280861FB009A5@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9848_19935779.1200323141788"
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04>
	 <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com>
	 <5F58FC8D651B47929E2280861FB009A5@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9848_19935779.1200323141788
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I admit I've never used IndexMergeTool, I've always used
IndexWriter.AddIndexex and then execute
IndexWriter.optimize().

And I've seen no problems. That call takes no
analyzer.

Erick

On Jan 14, 2008 6:12 AM, <spring@gmx.eu> wrote:

> > See org.apache.lucene.misc.IndexMergeTool
>
> Thank you.
>
> But this uses a hardcoded analyzer and deprecated API-Calls.
>
> How does the used analyzer effect the merge process?
> Is everything reindexed with this new analyzer again? Does this make
> sense?
> What if the sources indexes had other analyzers used?
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9848_19935779.1200323141788--

From java-user-return-31956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:10:37 2008
Return-Path: <java-user-return-31956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71783 invoked from network); 14 Jan 2008 15:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:10:37 -0000
Received: (qmail 90437 invoked by uid 500); 14 Jan 2008 15:10:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90407 invoked by uid 500); 14 Jan 2008 15:10:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90396 invoked by uid 99); 14 Jan 2008 15:10:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:10:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 15:09:57 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2480838fga.27
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 07:10:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=W8ckhThNtNfEOZVJojRNpdvMqrs/+DZDCIpLpxlysYc=;
        b=v5zVFZhfT4SDrG+VwNvAOT7yb6Bp2ERtVRwQ8G04vH9jyx+nOJTn6C/zL2D+okJ1SqHBvhAzIyJo4OORUy6ZUSMrDIBMzTFTi5NFhBcxFZd4V3H5xx5owAW13EZhxPpM1TNrVy6amm1qmpqNLGBSP9Zd6t5U301xhjcnnHlGTIE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uUoZ4j1m7yHW/N5oM7DvvEfg36+hZ5KFMq3GUWQPJoPPDDSz/XUIgEUgi2ST+bkxUJLHEhS8O5WX3uVxtj6WNVMxuAnqDptG5HYCfC/dwuv+w1M6Zn7qHg5DPloXDrnVCnTUss3SDLOdzyTnrJ9SaHSXf9mnxbuiNK12Vobdrts=
Received: by 10.82.108.9 with SMTP id g9mr11074569buc.34.1200323401906;
        Mon, 14 Jan 2008 07:10:01 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 14 Jan 2008 07:10:01 -0800 (PST)
Message-ID: <359a92830801140710j1fd8a918m41f68cc33dfe474d@mail.gmail.com>
Date: Mon, 14 Jan 2008 10:10:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: When to use which Analyzer
In-Reply-To: <44B877515ECB4C23906326B004773C2E@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9883_12329406.1200323401861"
References: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04>
	 <A5BF460F-6617-4246-84E7-D3C1DA8D9220@ehatchersolutions.com>
	 <44B877515ECB4C23906326B004773C2E@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9883_12329406.1200323401861
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can answer an awful lot of this much faster than waiting for someone
to reply by getting a copy of Luke and look at the parse results using
various
analyzers.

And you can use query.toString() to see the parsed results as well.

Try KeywordAnalyzer for your query.

Combine queries programmaticaly with BooleanQuery.

Best
Erick

On Jan 14, 2008 6:23 AM, <spring@gmx.eu> wrote:

> > > How can I search for fields stored with Field.Index.UN_TOKENIZED?
> >
> > Use TermQuery.
> >
> > > Why do I need an analyzer for searching?
> >
> > Consider a full-text field that will be tokenized removing special
> > characters and lowercased, and then a user querying for an uppercase
> > word.   The main thing is that queries need to jive with how things
> > got indexed, Analyzer in the mix or not.
>
> OK.
> So I have to use TermQuery when I want to search on UN_TOKENIZED fields.
> And what Query-Class for TOKENIZED fields?
> And then combine both into what Query?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9883_12329406.1200323401861--

From java-user-return-31957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:17:54 2008
Return-Path: <java-user-return-31957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76924 invoked from network); 14 Jan 2008 15:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:17:54 -0000
Received: (qmail 5945 invoked by uid 500); 14 Jan 2008 15:17:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5910 invoked by uid 500); 14 Jan 2008 15:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5896 invoked by uid 99); 14 Jan 2008 15:17:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:17:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 15:17:12 +0000
Received: (qmail invoked by alias); 14 Jan 2008 15:17:17 -0000
Received: from e178114128.adsl.alicedsl.de (EHLO msrvcn04) [85.178.114.128]
  by mail.gmx.net (mp045) with SMTP; 14 Jan 2008 16:17:17 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/2c31ywFL2M4DNduvzu+/3ygxM5O7Zxvl2rBX1w7
	IojFTH4pSZ3Gfa
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04> <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com> <5F58FC8D651B47929E2280861FB009A5@msrvcn04> <359a92830801140705v3ee9f6e9yc4abb3d2008e3ed9@mail.gmail.com>
Subject: RE: Index merging and optimizing
Date: Mon, 14 Jan 2008 16:17:19 +0100
Message-ID: <616047D48C1F4685B8E7EF9057460B9B@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801140705v3ee9f6e9yc4abb3d2008e3ed9@mail.gmail.com>
Thread-Index: AchWvwMNJPIVlH4mTo+A6mitoCWCAgAAV8jQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> I admit I've never used IndexMergeTool, I've always used
> IndexWriter.AddIndexex and then execute
> IndexWriter.optimize().
> 
> And I've seen no problems. That call takes no
> analyzer.

So you take the first index an add a remaining indexes via addIndexes?
What happens if the indexes were created with different analyzers?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:22:28 2008
Return-Path: <java-user-return-31958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79862 invoked from network); 14 Jan 2008 15:22:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:22:28 -0000
Received: (qmail 24660 invoked by uid 500); 14 Jan 2008 15:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24631 invoked by uid 500); 14 Jan 2008 15:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24613 invoked by uid 99); 14 Jan 2008 15:22:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:22:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 15:21:45 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1223670fkz.5
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 07:21:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Co7ed2OXGieQ4eEl8Nxu1HnrQK5Mzz20xciA4LZDeH0=;
        b=E4/KIOxdf9xVMGKFYIw+FC1t4DfN97engg+SEfLOOC6NJxYrppjrhEA6NjDzyx63OtCum/c5i4HMSVdf2eC8cG0bbaFnOawviE3m8Nlqp6sKXvLdbHRQhqJAdpeYOKfKmuJLxPBkoKxIRhUHd11wPMVYyUNz8jKTYzNmaux4JrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bS5QoTxx4B5xDBNud1Zt2wothSB95wAwPDtNBTRTuIbF2a2CpVdPFag4+pvmB+1vj92FwBgkzXDdTMjtwhr8KA/ADt86WVWZAFFrY/RuV9SQCfGWb7k5odXUiKMmL1xA5lLC2oxW/Y8X43HS6+zrD4mSsV8q4Ju3iTVyYqzTSbo=
Received: by 10.82.183.19 with SMTP id g19mr80874buf.12.1200324110183;
        Mon, 14 Jan 2008 07:21:50 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 14 Jan 2008 07:21:50 -0800 (PST)
Message-ID: <359a92830801140721t49c42072j844693170d48de7c@mail.gmail.com>
Date: Mon, 14 Jan 2008 10:21:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index merging and optimizing
In-Reply-To: <616047D48C1F4685B8E7EF9057460B9B@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9942_6674627.1200324110164"
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04>
	 <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com>
	 <5F58FC8D651B47929E2280861FB009A5@msrvcn04>
	 <359a92830801140705v3ee9f6e9yc4abb3d2008e3ed9@mail.gmail.com>
	 <616047D48C1F4685B8E7EF9057460B9B@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9942_6674627.1200324110164
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Then why would you want to combine them?

I really think you need to explain what you're trying to accomplish
rather then obsess on the details.

Erick

On Jan 14, 2008 10:17 AM, <spring@gmx.eu> wrote:

> > I admit I've never used IndexMergeTool, I've always used
> > IndexWriter.AddIndexex and then execute
> > IndexWriter.optimize().
> >
> > And I've seen no problems. That call takes no
> > analyzer.
>
> So you take the first index an add a remaining indexes via addIndexes?
> What happens if the indexes were created with different analyzers?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9942_6674627.1200324110164--

From java-user-return-31959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:22:35 2008
Return-Path: <java-user-return-31959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79932 invoked from network); 14 Jan 2008 15:22:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:22:35 -0000
Received: (qmail 25869 invoked by uid 500); 14 Jan 2008 15:22:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25832 invoked by uid 500); 14 Jan 2008 15:22:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25799 invoked by uid 99); 14 Jan 2008 15:22:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:22:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 15:21:50 +0000
Received: (qmail invoked by alias); 14 Jan 2008 15:21:55 -0000
Received: from e178114128.adsl.alicedsl.de (EHLO msrvcn04) [85.178.114.128]
  by mail.gmx.net (mp048) with SMTP; 14 Jan 2008 16:21:55 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+BwA9ITj+BvKOyRyTxkZ9pSzKvNwyT1ukK2yizoc
	kF+Tuji2iCSCQq
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <E0269CF2CBD640CDA96279961F33A6FE@msrvcn04> <A5BF460F-6617-4246-84E7-D3C1DA8D9220@ehatchersolutions.com> <44B877515ECB4C23906326B004773C2E@msrvcn04> <359a92830801140710j1fd8a918m41f68cc33dfe474d@mail.gmail.com>
Subject: RE: When to use which Analyzer
Date: Mon, 14 Jan 2008 16:21:57 +0100
Message-ID: <9AFD37925D964E868F35B311430A0F0B@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801140710j1fd8a918m41f68cc33dfe474d@mail.gmail.com>
Thread-Index: AchWv51tAOqq4aoqRI+FJe6MHhkWwwAAWAOA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> You can answer an awful lot of this much faster than waiting 
> for someone
> to reply by getting a copy of Luke and look at the parse results using
> various
> analyzers.

Ah cool, you mean the "explain structure" button. 

> Try KeywordAnalyzer for your query.
> 
> Combine queries programmaticaly with BooleanQuery.

Yes, I see, thank you!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:34:11 2008
Return-Path: <java-user-return-31960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94706 invoked from network); 14 Jan 2008 15:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:34:11 -0000
Received: (qmail 55742 invoked by uid 500); 14 Jan 2008 15:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55698 invoked by uid 500); 14 Jan 2008 15:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55687 invoked by uid 99); 14 Jan 2008 15:33:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:33:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of roger.camargo@hotmail.com designates 65.54.246.203 as permitted sender)
Received: from [65.54.246.203] (HELO bay0-omc3-s3.bay0.hotmail.com) (65.54.246.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 15:33:39 +0000
Received: from BAY124-W58 ([207.46.11.221]) by bay0-omc3-s3.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 14 Jan 2008 07:33:31 -0800
Message-ID: <BAY124-W5808F7FA802547883085C2F8460@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_a532c332-453b-4489-bea5-d28cdbad49b4_"
X-Originating-IP: [200.58.78.118]
From: Roger Camargo <roger.camargo@hotmail.com>
To: <java-user@lucene.apache.org>
CC: <devquestions@gmail.com>
Subject: RE: How to model hierarchy info to be searched related to a document
Date: Mon, 14 Jan 2008 11:33:31 -0400
Importance: Normal
In-Reply-To: <c01704c90801140656k2ab18576n529c75eca7f8ba5e@mail.gmail.com>
References: <BAY124-W52154592F93440DE1DAA8BF8440@phx.gbl>
	 <c01704c90801131407t6fac87fcuccaf40a36c11ef34@mail.gmail.com>
 	 <BAY124-W411DB08262ABE309ED7862F8460@phx.gbl> 
 <c01704c90801140656k2ab18576n529c75eca7f8ba5e@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 14 Jan 2008 15:33:31.0183 (UTC) FILETIME=[D119C3F0:01C856C2]
X-Virus-Checked: Checked by ClamAV on apache.org

--_a532c332-453b-4489-bea5-d28cdbad49b4_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Why am I afraid?
Building the index wouldn't be a problem. I guess.
Querying it would be more difficult.
=20
Let's see.
=20
Custom properties... defined by the user, there is no restriction, in quant=
ity, and values.
> > Custom property name: Frequency> > Custom property value: Quarterly> >>=
 > Custom property name: Last update> > Custom property value: 2006-01-01
=20
Cube1 has Frequency, Last Update
Cube2 has Suggestion, Frequency
Cube3 has Time Range, Original Source
...
...
=20
In the index the document should have one field per CustomProperty
=20
docid=3D0, cubename=3Dcube1, Frequency=3DQuarterly, Last update=3D2006-01-0=
1
docid=3D1, cubename=3Dcube2, Suggestion=3D"This cube should be used by the =
Account manager", Frequency=3D"Monthly"
docid=3D2, cubename=3Dcube3, Time Range=3D"Since 1980 up to 2007", Original=
 Source=3D"Account subsystem"
....
....
=20
Each custom property should be a Field, there is no control over which fiel=
ds are created.
How the query should be constructed, at the query you specify which fields =
you should use. There is a way to query all the fields.
=20
Well it looks like it should work.
=20
Is this how I should do it?
=20
Add each Custom Property as a Field is the answer?
=20
For the hierarchy info modeling, the answer is generating every combination=
 of dimension and levels?
=20
Thanks for taggin me along with this.
=20
Roger CamargoUMSS "University"Cochabamba - Bolivia
=20
=20
> Date: Mon, 14 Jan 2008 09:56:36 -0500> From: devquestions@gmail.com> To: =
java-user@lucene.apache.org> Subject: Re: How to model hierarchy info to be=
 searched related to a document> > I am not sure why you are afraid of addi=
ng more fields to the document.> Having 20-30 fields to a document is not a=
 bad thing to do. Do you have any> constraints to limit the number of field=
s in the document?> > > > > > > > > > On Jan 14, 2008 7:59 AM, Roger Camarg=
o <roger.camargo@hotmail.com> wrote:> > > Thanks for answering.> >> > It se=
ems that there isn't any other way around, having every combination> > of d=
imension and level.> >> > The example for the observations of the dimension=
, would be as follow,> > maybe isn't such an important information to be st=
ored, but type it is.> >> > Dimension name: Region> > Dimension observation=
s: The dimension only includes countries of south> > america <--This would =
be the observations of the dimension.> > Dimension type: Geographical> >> >=
 OK, now it seems that I have one document per combination of dimension and=
> > level (following the example I provided it would be something like this=
> > doc 0: id=3D0, name=3D"Quarter sales per region", desc=3D"Description o=
f the> > cube", dimension=3D"Region", level=3D"Country"> > doc 1: id=3D0, n=
ame=3D"Quarter sales per region", desc=3D"Description of the> > cube", dime=
nsion=3D"Region", level=3D"City"> > doc 2: id=3D0, name=3D"Quarter sales pe=
r region", desc=3D"Description of the> > cube", dimension=3D"Time", level=
=3D"Year"> > doc 3: id=3D0, name=3D"Quarter sales per region", desc=3D"Desc=
ription of the> > cube", dimension=3D"Time", level=3D"Quarter"> >> > OK and=
 adding the Dimension type would end up like this:> >> > doc 0: id=3D0, nam=
e=3D"Quarter sales per region", desc=3D"Description of the> > cube", dimens=
ion=3D"Region", dimensiontype=3D"Geographycal" level=3D"Country"> > doc 1: =
id=3D0, name=3D"Quarter sales per region", desc=3D"Description of the> > cu=
be", dimension=3D"Region", dimensiontype=3D"Geographycal" level=3D"City"> >=
 doc 2: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of t=
he> > cube", dimension=3D"Time", dimensiontype=3D"Time" level=3D"Year"> > d=
oc 3: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of the=
> > cube", dimension=3D"Time", dimensiontype=3D"Time" level=3D"Quarter"> >>=
 > Now what about the custom properties?> >> > Custom property name: Update=
 Frequency> > Custom property value: Quarterly> > Custom property name: Las=
t update> > Custom property value: 2006-01-01> >> > I'm afraid that I would=
 end up not using them for the search, they would> > have each one a field,=
 and because the user can create any number of these> > custom properties t=
hey would be hard to query them. Or is there any correct> > way to add them=
 to the document model?> >> > Roger Camargo> > UMSS "University"> > Cochaba=
mba - Bolivia> >> > ------------------------------> > Date: Sun, 13 Jan 200=
8 17:07:52 -0500> > From: devquestions@gmail.com> > To: java-user@lucene.ap=
ache.org> > Subject: Re: How to model hierarchy info to be searched related=
 to a> > document> > CC: roger.camargo@hotmail.com> >> >> > Roger,> >> > Wh=
y can;t you have one document for every combination of dimension,> > level =
? Add cube name , id and description too as a field to all documents> > , a=
ll it would be reduntant information, but you can live with it i suppose?> =
>> >> > I think you are developing an application to search a cube ?> >> > =
what do you mean by observations of a dimension ? is there an example?> >> =
> On Jan 11, 2008 7:57 PM, Roger Camargo < roger.camargo@hotmail.com> wrote=
:> >> > I'm trying to index information related to Olap Cubes.> >> > Each c=
ube I'm trying to model it like a document.> >> > The cube have the followi=
ng information:> >> > ID - Unique identifier for the cube> > Name - Name of=
 the cube> > Description - Description of the cube> >> > (There can be many=
 dimensions per cube)> > Dimension name - Name of the dimension of the cube=
> > Dimension observations - Observations related to the dimension. (Option=
al)> > Dimension type - Type of the dimension> >> > (Each dimension has at =
least one Level, but there can be many levels per> > dimension)> > Level na=
me - Name of the level> > Level observations - Observations of the level (O=
ptional)> >> > (There has to be at least one Fact per cube)> > Fact name - =
Name of the fact> > Fact aggregation - Aggregation of the fact> >> > (Also =
there can be custom properties added by the user, with the form> > Name,Val=
ue)> > Custom property name - Name of the custom property> > Custom propert=
y value - Value of the custom property> >> > Right now I'm just indexing th=
e first 3 ID, Name and Description, but I> > would also want the other info=
rmation to be indexed and search the cube with> > that information.> >> > -=
-------------------------------------------------------> > Data sample:> >>=
 > ID: 0> > Name: Quarter sales per region> > Descript=EDon: Description of=
 the cube...> >> > Dimension name: Region> > Dimension observations: The di=
mension only includes countries of south> > america> > Dimension type: Geog=
raphical> >> > Level name: Country> > Level observations: Observations of t=
he level....> >> > Level name: City> > Level observations: Observations of =
the level....> >> > Dimension name: Time> > Dimension observations: Has dat=
a only from the year 2000> > Dimension type: Time> >> > Level name: Year> >=
 Level observations: No observations> >> > Level name: Quarter> > Level obs=
ervations: No observations> >> > Fact name: Sales> > Fact Aggregation: Sum>=
 >> > Fact name: % Quarter Growth> > Fact Aggregation: AVG> >> > Custom pro=
perty name: Frequency> > Custom property value: Quarterly> >> > Custom prop=
erty name: Last update> > Custom property value: 2006-01-01> > ------------=
--------------------------------------------> >> > My problems would be the=
 following.> >> > 1. How to index "Dimension name" and "Dimension observati=
ons".> > If there would be just Dimension names, I cound index it as a sing=
le Field> > with multiple values.> > But with the addition of the observati=
ons, I need to know if the search> > term was founded within the observatio=
n, to wich dimension belongs the> > founded observations.> > And the same h=
appens with the "Dimension type"> >> > 2. There can be many of these Dimens=
ion name, observations, type. The same> > applies for the Level name, obser=
vation - Fact name,type - Custom property> > name, value.> >> > 3. The leve=
ls. if the search term was founded in the level observation, I> > would nee=
d to know to which level name is related the level observation> > founded a=
long with the dimension related, and finally the cube itserlf.> >> > Well..=
. this was a bit long question to be my first one.> >> > Maybe what I want =
can't be done, maybe there could be some walkaround that> > someone knows i=
t.> >> > I was thinking that if it can be posible to have a field, with add=
itional> > info attached to the value, that is not searchable, it just need=
ed when the> > field value is retrieved it.> >> > For example a Multi-value=
 field called DimObs.> >> > Value1: "Observations related to the first dime=
nsion of the cube"> > Related info: "Dimension name1"> >> > Value2: "Observ=
ations related to the second dimension of the cube"> > Related info: "Dimen=
sion name2"> >> > When the search is performed and is founded in the DimObs=
, for example> > "first".> > Then the search found "first" int the DimObs, =
but I would need to retrieve> > the "Related info" to know to which Dimensi=
on belongs the observations> > founded.> >> > Thanks in advance for keeping=
 with me till the end of this mail and for> > any suggestions that could gi=
ve me.> >> > Roger Camargo> > UMSS "University"> > Cochabamba - Bolivia> >>=
 > _________________________________________________________________> > Exp=
ress yourself instantly with MSN Messenger! Download today it's FREE!> > ht=
tp://messenger.msn.click-url.com/go/onm00200471ave/direct/01/> >> >> >> > -=
-----------------------------> > Express yourself instantly with MSN Messen=
ger! MSN Messenger<http://clk.atdmt.com/AVE/go/onm00200471ave/direct/01/>> =
>
_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE!
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/=

--_a532c332-453b-4489-bea5-d28cdbad49b4_--

From java-user-return-31961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:36:00 2008
Return-Path: <java-user-return-31961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96473 invoked from network); 14 Jan 2008 15:36:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:36:00 -0000
Received: (qmail 68076 invoked by uid 500); 14 Jan 2008 15:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68041 invoked by uid 500); 14 Jan 2008 15:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68030 invoked by uid 99); 14 Jan 2008 15:35:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:35:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 14 Jan 2008 15:35:30 +0000
Received: (qmail invoked by alias); 14 Jan 2008 15:35:23 -0000
Received: from e178114128.adsl.alicedsl.de (EHLO msrvcn04) [85.178.114.128]
  by mail.gmx.net (mp051) with SMTP; 14 Jan 2008 16:35:23 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19cnYRmltpcSaWtrdNfPF3PoO9/WXOB+Q0CzKyHTz
	1BpXHLQ1cReV1R
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04> <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com> <5F58FC8D651B47929E2280861FB009A5@msrvcn04> <359a92830801140705v3ee9f6e9yc4abb3d2008e3ed9@mail.gmail.com> <616047D48C1F4685B8E7EF9057460B9B@msrvcn04> <359a92830801140721t49c42072j844693170d48de7c@mail.gmail.com>
Subject: RE: Index merging and optimizing
Date: Mon, 14 Jan 2008 16:35:25 +0100
Message-ID: <64E9BE19DDA94DBC9549FA0241CEB565@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801140721t49c42072j844693170d48de7c@mail.gmail.com>
Thread-Index: AchWwUSeIKKl/WilTn+6hI0GvQXQzwAAQNfw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Then why would you want to combine them?
> 
> I really think you need to explain what you're trying to accomplish
> rather then obsess on the details.

I have to create indexes in parallel because the amount of data is very
high.
Then I want to merge them into bigger indexes an move them to the search
server.

(See therad "Max size of index (FSDirectory )" too.)

My question now is, what will happen if one merges indexes which were
created with different analyzer (the customer can confige the analyzer
depending on the data which is indexed)?

I think this will produce unpredicted results when searching.
If so I have to document that only indexes created with the same analyzer
are allowed to merge.

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 15:59:25 2008
Return-Path: <java-user-return-31962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17814 invoked from network); 14 Jan 2008 15:59:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 15:59:25 -0000
Received: (qmail 31875 invoked by uid 500); 14 Jan 2008 15:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31846 invoked by uid 500); 14 Jan 2008 15:59:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31835 invoked by uid 99); 14 Jan 2008 15:59:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 07:59:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.10.39.67] (HELO mail.sharedvision.com) (69.10.39.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 15:58:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene sorting case-sensitive by default?
Date: Mon, 14 Jan 2008 10:58:45 -0500
Message-ID: <F700E5D18787514F8EFB5B5CE7423936BE04BA@soho.SVGINTERNET.COM>
In-Reply-To: <1200298401.9514.15.camel@PC990.sb.statsbiblioteket.dk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene sorting case-sensitive by default?
thread-index: AchWhWlewxusj8r8SxuLXFTYr3ee/gAPK7Ag
From: "Alex Wang" <AWang@sharedvision.com>
To: <java-user@lucene.apache.org>,
	<te@statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks everyone for your replies! Guess I did not fully understand the
meaning of "natural order" in the Lucene Java doc.

To add another all-lower-case field for each sortable field in my index
is a little too much, since the app requires sorting on pretty much all
fields (over 100).

Toke, you mentioned "Using a Collator works but does take a fair amount
of memory", can you please elaborate a little more on that. Thanks.

Alex

-----Original Message-----
From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]=20
Sent: Monday, January 14, 2008 3:13 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?

On Fri, 2008-01-11 at 11:40 -0500, Alex Wang wrote:
> Looks like Lucene is separating upper case and lower case while
sorting.

As Tom points out, default sorting uses natural order. It's worth noting
that this implies that default sorting does not produce usable results
as soon as you use non-ASCII characters. Using a Collator works but does
take a fair amount of memory.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 16:03:11 2008
Return-Path: <java-user-return-31963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22198 invoked from network); 14 Jan 2008 16:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 16:03:11 -0000
Received: (qmail 41923 invoked by uid 500); 14 Jan 2008 16:02:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41894 invoked by uid 500); 14 Jan 2008 16:02:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41883 invoked by uid 99); 14 Jan 2008 16:02:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 08:02:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0102.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 16:02:29 +0000
Received: by rn-out-0102.google.com with SMTP id v46so299245rnb.14
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 08:02:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=p2/axb6Pg98VojrCq74sOc/sgq/6SVNnunvu6tu8nho=;
        b=nOQ08XN1L5eY+td2BvKpnR+id3XUKkVzIvkX2bbmuzMFBkZAFNTSfLTp8LV32KgU2dPqMNdVZK1VUf/Cu3Fb77s0CobYD/P6cUyb5ooNieYS7itfhpcU19JKZRV5E2yFRAXhbpv3tPk8xl6WURWOm6jbyUm36OX0BD4IM3EVo+Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oNTdA9wmsHqso2CWeqWdg8rFZXP4Eic1V3ffcmR7R+8xwHiW2kXSUMVOMnRw3HXc/AUPy8IJpkcLceUwYea3YdpjjUVbYOB19ecodgLtpg5NLO1I0bUeBy9JJ2c9pa6QScf0T07kKJZoQySFwJPOtcnKYmfe/De/ZiRCvsxC9oA=
Received: by 10.150.200.8 with SMTP id x8mr2474117ybf.149.1200326553190;
        Mon, 14 Jan 2008 08:02:33 -0800 (PST)
Received: by 10.150.138.13 with HTTP; Mon, 14 Jan 2008 08:02:33 -0800 (PST)
Message-ID: <c01704c90801140802g4a3aed5fy8ce5dbe34c13b019@mail.gmail.com>
Date: Mon, 14 Jan 2008 11:02:33 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to model hierarchy info to be searched related to a document
In-Reply-To: <BAY124-W5808F7FA802547883085C2F8460@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1048_20861964.1200326553164"
References: <BAY124-W52154592F93440DE1DAA8BF8440@phx.gbl>
	 <c01704c90801131407t6fac87fcuccaf40a36c11ef34@mail.gmail.com>
	 <BAY124-W411DB08262ABE309ED7862F8460@phx.gbl>
	 <c01704c90801140656k2ab18576n529c75eca7f8ba5e@mail.gmail.com>
	 <BAY124-W5808F7FA802547883085C2F8460@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1048_20861964.1200326553164
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Yeah I think what u need is one Filed where you store a list of propertytag
and value combination and also be able to search on the filed
on values and identify that the value is for a particular propertytag.

something like

propertytag1, value
propertytag2,value
propertytag3,value etc

To be frank I do not know how to do it.  I suggest you post it as separate
question so that people do not have to follow your thread.

Here are some wild ideas

look into customer analyzer stuff. You may have to write a customer analyze=
r
to analyze such a filed. So, the idea is


Construct a filed and give it a set of  propertytag and value combinations
analyze it so that you donot parse the pairs i.e each pair is intact and
ready to search and retrieve it as a pair not as individual words.









On Jan 14, 2008 10:33 AM, Roger Camargo <roger.camargo@hotmail.com> wrote:

> Why am I afraid?
> Building the index wouldn't be a problem. I guess.
> Querying it would be more difficult.
>
> Let's see.
>
> Custom properties... defined by the user, there is no restriction, in
> quantity, and values.
> > > Custom property name: Frequency> > Custom property value: Quarterly>
> >> > Custom property name: Last update> > Custom property value: 2006-01-=
01
>
> Cube1 has Frequency, Last Update
> Cube2 has Suggestion, Frequency
> Cube3 has Time Range, Original Source
> ...
> ...
>
> In the index the document should have one field per CustomProperty
>
> docid=3D0, cubename=3Dcube1, Frequency=3DQuarterly, Last update=3D2006-01=
-01
> docid=3D1, cubename=3Dcube2, Suggestion=3D"This cube should be used by th=
e
> Account manager", Frequency=3D"Monthly"
> docid=3D2, cubename=3Dcube3, Time Range=3D"Since 1980 up to 2007", Origin=
al
> Source=3D"Account subsystem"
> ....
> ....
>
> Each custom property should be a Field, there is no control over which
> fields are created.
> How the query should be constructed, at the query you specify which field=
s
> you should use. There is a way to query all the fields.
>
> Well it looks like it should work.
>
> Is this how I should do it?
>
> Add each Custom Property as a Field is the answer?
>
> For the hierarchy info modeling, the answer is generating every
> combination of dimension and levels?
>
> Thanks for taggin me along with this.
>
> Roger CamargoUMSS "University"Cochabamba - Bolivia
>
>
> > Date: Mon, 14 Jan 2008 09:56:36 -0500> From: devquestions@gmail.com> To=
:
> java-user@lucene.apache.org> Subject: Re: How to model hierarchy info to
> be searched related to a document> > I am not sure why you are afraid of
> adding more fields to the document.> Having 20-30 fields to a document is
> not a bad thing to do. Do you have any> constraints to limit the number o=
f
> fields in the document?> > > > > > > > > > On Jan 14, 2008 7:59 AM, Roger
> Camargo <roger.camargo@hotmail.com> wrote:> > > Thanks for answering.> >>
> > It seems that there isn't any other way around, having every combinatio=
n>
> > of dimension and level.> >> > The example for the observations of the
> dimension, would be as follow,> > maybe isn't such an important informati=
on
> to be stored, but type it is.> >> > Dimension name: Region> > Dimension
> observations: The dimension only includes countries of south> > america
> <--This would be the observations of the dimension.> > Dimension type:
> Geographical> >> > OK, now it seems that I have one document per combinat=
ion
> of dimension and> > level (following the example I provided it would be
> something like this> > doc 0: id=3D0, name=3D"Quarter sales per region",
> desc=3D"Description of the> > cube", dimension=3D"Region", level=3D"Count=
ry"> >
> doc 1: id=3D0, name=3D"Quarter sales per region", desc=3D"Description of =
the> >
> cube", dimension=3D"Region", level=3D"City"> > doc 2: id=3D0, name=3D"Qua=
rter sales
> per region", desc=3D"Description of the> > cube", dimension=3D"Time",
> level=3D"Year"> > doc 3: id=3D0, name=3D"Quarter sales per region",
> desc=3D"Description of the> > cube", dimension=3D"Time", level=3D"Quarter=
"> >> >
> OK and adding the Dimension type would end up like this:> >> > doc 0: id=
=3D0,
> name=3D"Quarter sales per region", desc=3D"Description of the> > cube",
> dimension=3D"Region", dimensiontype=3D"Geographycal" level=3D"Country"> >=
 doc 1:
> id=3D0, name=3D"Quarter sales per region", desc=3D"Description of the> > =
cube",
> dimension=3D"Region", dimensiontype=3D"Geographycal" level=3D"City"> > do=
c 2:
> id=3D0, name=3D"Quarter sales per region", desc=3D"Description of the> > =
cube",
> dimension=3D"Time", dimensiontype=3D"Time" level=3D"Year"> > doc 3: id=3D=
0,
> name=3D"Quarter sales per region", desc=3D"Description of the> > cube",
> dimension=3D"Time", dimensiontype=3D"Time" level=3D"Quarter"> >> > Now wh=
at about
> the custom properties?> >> > Custom property name: Update Frequency> >
> Custom property value: Quarterly> > Custom property name: Last update> >
> Custom property value: 2006-01-01> >> > I'm afraid that I would end up no=
t
> using them for the search, they would> > have each one a field, and becau=
se
> the user can create any number of these> > custom properties they would b=
e
> hard to query them. Or is there any correct> > way to add them to the
> document model?> >> > Roger Camargo> > UMSS "University"> > Cochabamba -
> Bolivia> >> > ------------------------------> > Date: Sun, 13 Jan 2008
> 17:07:52 -0500> > From: devquestions@gmail.com> > To:
> java-user@lucene.apache.org> > Subject: Re: How to model hierarchy info t=
o
> be searched related to a> > document> > CC: roger.camargo@hotmail.com> >>
> >> > Roger,> >> > Why can;t you have one document for every combination o=
f
> dimension,> > level ? Add cube name , id and description too as a field t=
o
> all documents> > , all it would be reduntant information, but you can liv=
e
> with it i suppose?> >> >> > I think you are developing an application to
> search a cube ?> >> > what do you mean by observations of a dimension ? i=
s
> there an example?> >> > On Jan 11, 2008 7:57 PM, Roger Camargo <
> roger.camargo@hotmail.com> wrote:> >> > I'm trying to index information
> related to Olap Cubes.> >> > Each cube I'm trying to model it like a
> document.> >> > The cube have the following information:> >> > ID - Uniqu=
e
> identifier for the cube> > Name - Name of the cube> > Description -
> Description of the cube> >> > (There can be many dimensions per cube)> >
> Dimension name - Name of the dimension of the cube> > Dimension observati=
ons
> - Observations related to the dimension. (Optional)> > Dimension type - T=
ype
> of the dimension> >> > (Each dimension has at least one Level, but there =
can
> be many levels per> > dimension)> > Level name - Name of the level> > Lev=
el
> observations - Observations of the level (Optional)> >> > (There has to b=
e
> at least one Fact per cube)> > Fact name - Name of the fact> > Fact
> aggregation - Aggregation of the fact> >> > (Also there can be custom
> properties added by the user, with the form> > Name,Value)> > Custom
> property name - Name of the custom property> > Custom property value - Va=
lue
> of the custom property> >> > Right now I'm just indexing the first 3 ID,
> Name and Description, but I> > would also want the other information to b=
e
> indexed and search the cube with> > that information.> >> >
> --------------------------------------------------------> > Data sample:>=
 >>
> > ID: 0> > Name: Quarter sales per region> > Descript=EDon: Description o=
f the
> cube...> >> > Dimension name: Region> > Dimension observations: The
> dimension only includes countries of south> > america> > Dimension type:
> Geographical> >> > Level name: Country> > Level observations: Observation=
s
> of the level....> >> > Level name: City> > Level observations: Observatio=
ns
> of the level....> >> > Dimension name: Time> > Dimension observations: Ha=
s
> data only from the year 2000> > Dimension type: Time> >> > Level name: Ye=
ar>
> > Level observations: No observations> >> > Level name: Quarter> > Level
> observations: No observations> >> > Fact name: Sales> > Fact Aggregation:
> Sum> >> > Fact name: % Quarter Growth> > Fact Aggregation: AVG> >> > Cust=
om
> property name: Frequency> > Custom property value: Quarterly> >> > Custom
> property name: Last update> > Custom property value: 2006-01-01> >
> --------------------------------------------------------> >> > My problem=
s
> would be the following.> >> > 1. How to index "Dimension name" and
> "Dimension observations".> > If there would be just Dimension names, I co=
und
> index it as a single Field> > with multiple values.> > But with the addit=
ion
> of the observations, I need to know if the search> > term was founded wit=
hin
> the observation, to wich dimension belongs the> > founded observations.> =
>
> And the same happens with the "Dimension type"> >> > 2. There can be many=
 of
> these Dimension name, observations, type. The same> > applies for the Lev=
el
> name, observation - Fact name,type - Custom property> > name, value.> >> =
>
> 3. The levels. if the search term was founded in the level observation, I=
> >
> would need to know to which level name is related the level observation> =
>
> founded along with the dimension related, and finally the cube itserlf.> =
>>
> > Well... this was a bit long question to be my first one.> >> > Maybe wh=
at
> I want can't be done, maybe there could be some walkaround that> > someon=
e
> knows it.> >> > I was thinking that if it can be posible to have a field,
> with additional> > info attached to the value, that is not searchable, it
> just needed when the> > field value is retrieved it.> >> > For example a
> Multi-value field called DimObs.> >> > Value1: "Observations related to t=
he
> first dimension of the cube"> > Related info: "Dimension name1"> >> >
> Value2: "Observations related to the second dimension of the cube"> >
> Related info: "Dimension name2"> >> > When the search is performed and is
> founded in the DimObs, for example> > "first".> > Then the search found
> "first" int the DimObs, but I would need to retrieve> > the "Related info=
"
> to know to which Dimension belongs the observations> > founded.> >> > Tha=
nks
> in advance for keeping with me till the end of this mail and for> > any
> suggestions that could give me.> >> > Roger Camargo> > UMSS "University">=
 >
> Cochabamba - Bolivia> >> >
> _________________________________________________________________> > Expr=
ess
> yourself instantly with MSN Messenger! Download today it's FREE!> >
> http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/> >> >> >>
> > ------------------------------> > Express yourself instantly with MSN
> Messenger! MSN Messenger<
> http://clk.atdmt.com/AVE/go/onm00200471ave/direct/01/>> >
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today it's FREE!
> http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
>

------=_Part_1048_20861964.1200326553164--

From java-user-return-31964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 16:19:29 2008
Return-Path: <java-user-return-31964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34012 invoked from network); 14 Jan 2008 16:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 16:19:29 -0000
Received: (qmail 84656 invoked by uid 500); 14 Jan 2008 16:19:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84364 invoked by uid 500); 14 Jan 2008 16:19:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84353 invoked by uid 99); 14 Jan 2008 16:19:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 08:19:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 16:18:48 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1246593fkz.5
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 08:18:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=y41SjB16qfNIe5QquPyL+XheRXUok6AsqYZM9SxGxXo=;
        b=i2XfwKK9DwUPgBs5ujytIiq4Ap2q/yb1jA37SH8mhCUQ49O2wD6srUhPipLzRRq2c8ZG4eYDVOg7ZVWOVbG07IYRPhmXA9DKvh6aok9p8wWit9ztAMsNHl0tVRpguwR97u8XHKSh82uyGHrqX8eQkNGGJhLzpoDIUyXYVvDDM44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=O3jDGVYZaJSMYuibz7+YXcWWYx92XRmJja+MENlD+amqnKjcMgSuoRZONs7vhBVuIKGqprahbYYCwl0bTZv5HChx5GuD/A90ptoGs+NqPUYphYmcXjfMi1L7h875v91cHRflUqlnhgeblwQGSV9AYAWmDBM//n8HTkIW16XB1Js=
Received: by 10.82.150.20 with SMTP id x20mr11238163bud.5.1200327531668;
        Mon, 14 Jan 2008 08:18:51 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 14 Jan 2008 08:18:51 -0800 (PST)
Message-ID: <359a92830801140818x68fd3a25yb4d548a279abb975@mail.gmail.com>
Date: Mon, 14 Jan 2008 11:18:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index merging and optimizing
In-Reply-To: <64E9BE19DDA94DBC9549FA0241CEB565@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10160_21975591.1200327531655"
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04>
	 <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com>
	 <5F58FC8D651B47929E2280861FB009A5@msrvcn04>
	 <359a92830801140705v3ee9f6e9yc4abb3d2008e3ed9@mail.gmail.com>
	 <616047D48C1F4685B8E7EF9057460B9B@msrvcn04>
	 <359a92830801140721t49c42072j844693170d48de7c@mail.gmail.com>
	 <64E9BE19DDA94DBC9549FA0241CEB565@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10160_21975591.1200327531655
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I think I'm getting a better handle here. I can't imagine how
it would work to combine indexes that use *different* analyzers
on the *same* field. Regardless of what Lucene did, you
simply could NOT explain this to a user. To take a simple example,
index part of your data for field1 with KeywordAnalyzer and
part with WhiteSpaceAnalyzer. Now you index the same
data in two different documents, i.e. field1 has
"some data" in two docs.

Now one doc has the tokens "some" and "data", and the other
has "some data". Depending on the analyzer you use at
query time, searching for "some" would return one doc. Searching
for "some data" would return the other doc. Or would return the
first doc depending upon the query-time analyzer. And no
matter what analyzer you used, searching for "some" would never
return doc 2.

Even assuming Lucene allows this
how in the world could you explain what the "correct" results
were to a user? Even assuming that Lucene does something
reasonable, it'll still be wrong enough of the time to make the
system unusable.

And we're not even into stopwords, cases, different languages,
accent folding.

Not to mention how in the world you'd be able to explain what
query analyzer to use <G>....

That said, you *can* use *different* analyzers on *different* fields
in the same index. See PerFieldAnalyzerWrapper. And there's
no restriction that all documents have the *same* fields. So as
long as all your field names were disjoint, it could work. *But* I
have no real idea whether this is supported, so you'll have to
experiment if you still think it's a good thing.

But it also seems that the parallel/not parallel decision is
something you control on the back end, so I'm not sure the user
is involved in the merge question at all. In other words, you could
easily split the indexing task up amongst several machines and/or
processes and combine all the results after all the sub-indexes
were build, thus making your question basically irrelevant.

But you still haven't explained what the user is getting from all
this flexibility. I have a hard time understanding the use-case
you're trying to support. If you're trying to build a generic front-end
to allow parameterized Lucene index building, have you looked at
SOLR, which uses XML configuration files to drive the indexing
and searching process? (which I haven't used, but I'm tracking
the user's group list.....).

Best
Erick


On Jan 14, 2008 10:35 AM, <spring@gmx.eu> wrote:

> > Then why would you want to combine them?
> >
> > I really think you need to explain what you're trying to accomplish
> > rather then obsess on the details.
>
> I have to create indexes in parallel because the amount of data is very
> high.
> Then I want to merge them into bigger indexes an move them to the search
> server.
>
> (See therad "Max size of index (FSDirectory )" too.)
>
> My question now is, what will happen if one merges indexes which were
> created with different analyzer (the customer can confige the analyzer
> depending on the data which is indexed)?
>
> I think this will produce unpredicted results when searching.
> If so I have to document that only indexes created with the same analyzer
> are allowed to merge.
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10160_21975591.1200327531655--

From java-user-return-31965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 16:24:52 2008
Return-Path: <java-user-return-31965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38106 invoked from network); 14 Jan 2008 16:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 16:24:52 -0000
Received: (qmail 151 invoked by uid 500); 14 Jan 2008 16:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 119 invoked by uid 500); 14 Jan 2008 16:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 106 invoked by uid 99); 14 Jan 2008 16:24:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 08:24:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 16:24:16 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1248845fkz.5
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 08:24:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=196bWNkWkyyzD/0uZlzoFr4OE2oPr/X53SzV5llzz98=;
        b=kbJiEu6icVqO8FvKpC+8x4jAzzbUhNlTQr/lEfJRdU+kEr3EPzYzf2i1GjQELTiOLh4AXk5bzPLP6ay4RYP6tjwnUw3b+0CK/uiHV4aoPM5/Tck8oVL/ujL4Qd7v+oVC1ls77opjxM67VzKOiwMHSV70npL8sOE7r7IfXS2ol5M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZzHw3gZ5SNUXPAsSiI6Lbsw0dl51DwF3PsNTAsij1e8y8pBwnu3s+1ZNgRp3oB+MhD14UBtoqmEBmeJlstByUmJ6ae44kFPrD868to0HaydJ3Yyxm4CBsH86QyKyrZoxVXy47PHNDP0lGy8oSCBB59q73vmjrw6dKAMMrHCFSfw=
Received: by 10.82.124.10 with SMTP id w10mr11225397buc.33.1200327859454;
        Mon, 14 Jan 2008 08:24:19 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 14 Jan 2008 08:24:19 -0800 (PST)
Message-ID: <359a92830801140824w619b56bp914b2dee06d4a0a8@mail.gmail.com>
Date: Mon, 14 Jan 2008 11:24:19 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?
In-Reply-To: <F700E5D18787514F8EFB5B5CE7423936BE04BA@soho.SVGINTERNET.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10201_5909971.1200327859442"
References: <1200298401.9514.15.camel@PC990.sb.statsbiblioteket.dk>
	 <F700E5D18787514F8EFB5B5CE7423936BE04BA@soho.SVGINTERNET.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10201_5909971.1200327859442
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Several things:

1> do you need to display all the fields? Would just storing them
lower-case work? The only time I've needed to store fields case-
sensitive is when I'm showing them to the user. If the user is just
searching on them, I can store them any way I want and she'll never
know.

2> You might very well be surprised at how little extra it takes to
index (but not store) the lower-case version. How big is your index
anyway? And be warned that the size increase is not linear, so
just comparing the index sizes for, say, 10 document is misleading.
If your index is 10M, there's no reason at all not to store twice. If it's
10G........

3> You could store (but not index) the cased version. You could
index (but not store) the lower-case version. The total size of
your index is (I believe) about the same as indexing AND storing
the fields. That gives you a way to search caselessly and display
case-sensitively.

Best
Erick

On Jan 14, 2008 10:58 AM, Alex Wang <AWang@sharedvision.com> wrote:

> Thanks everyone for your replies! Guess I did not fully understand the
> meaning of "natural order" in the Lucene Java doc.
>
> To add another all-lower-case field for each sortable field in my index
> is a little too much, since the app requires sorting on pretty much all
> fields (over 100).
>
> Toke, you mentioned "Using a Collator works but does take a fair amount
> of memory", can you please elaborate a little more on that. Thanks.
>
> Alex
>
> -----Original Message-----
> From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
> Sent: Monday, January 14, 2008 3:13 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene sorting case-sensitive by default?
>
> On Fri, 2008-01-11 at 11:40 -0500, Alex Wang wrote:
> > Looks like Lucene is separating upper case and lower case while
> sorting.
>
> As Tom points out, default sorting uses natural order. It's worth noting
> that this implies that default sorting does not produce usable results
> as soon as you use non-ASCII characters. Using a Collator works but does
> take a fair amount of memory.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10201_5909971.1200327859442--

From java-user-return-31966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 16:48:58 2008
Return-Path: <java-user-return-31966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56348 invoked from network); 14 Jan 2008 16:48:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 16:48:57 -0000
Received: (qmail 50831 invoked by uid 500); 14 Jan 2008 16:48:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50805 invoked by uid 500); 14 Jan 2008 16:48:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50794 invoked by uid 99); 14 Jan 2008 16:48:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 08:48:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.10.39.67] (HELO mail.sharedvision.com) (69.10.39.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 16:48:28 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene sorting case-sensitive by default?
Date: Mon, 14 Jan 2008 11:48:18 -0500
Message-ID: <F700E5D18787514F8EFB5B5CE7423936BE04CC@soho.SVGINTERNET.COM>
In-Reply-To: <359a92830801140824w619b56bp914b2dee06d4a0a8@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene sorting case-sensitive by default?
thread-index: AchWygHYo8S0uRkmRy+RWY7rAIM0SwAAIW4g
From: "Alex Wang" <AWang@sharedvision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot Erik for the great tip! I do need to display all the fields
and allow the users to sort by each field as they wish. My index is
currently about 200 mb.

Your suggestion about storing (but not index) the cased version, and
indexing (but not store) the lower-case version is an excellent solution
for me.=20

Is it possible to do it in the same field or do I have to do it in 2
separate fields? If I do it in one field, what are the Lucene
class/methods I need to overwrite?

Thanks again for your help!

Alex
=20

This message may contain confidential and/or privileged information. If
you are not the addressee or authorized to receive this for the
addressee, you must not use, copy, disclose, or take any action based on
this message or any information herein. If you have received this
message in error, please advise the sender immediately by reply e-mail
and delete this message. Thank you for your cooperation.


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Monday, January 14, 2008 11:24 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?

Several things:

1> do you need to display all the fields? Would just storing them
lower-case work? The only time I've needed to store fields case-
sensitive is when I'm showing them to the user. If the user is just
searching on them, I can store them any way I want and she'll never
know.

2> You might very well be surprised at how little extra it takes to
index (but not store) the lower-case version. How big is your index
anyway? And be warned that the size increase is not linear, so
just comparing the index sizes for, say, 10 document is misleading.
If your index is 10M, there's no reason at all not to store twice. If
it's
10G........

3> You could store (but not index) the cased version. You could
index (but not store) the lower-case version. The total size of
your index is (I believe) about the same as indexing AND storing
the fields. That gives you a way to search caselessly and display
case-sensitively.

Best
Erick

On Jan 14, 2008 10:58 AM, Alex Wang <AWang@sharedvision.com> wrote:

> Thanks everyone for your replies! Guess I did not fully understand the
> meaning of "natural order" in the Lucene Java doc.
>
> To add another all-lower-case field for each sortable field in my
index
> is a little too much, since the app requires sorting on pretty much
all
> fields (over 100).
>
> Toke, you mentioned "Using a Collator works but does take a fair
amount
> of memory", can you please elaborate a little more on that. Thanks.
>
> Alex
>
> -----Original Message-----
> From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
> Sent: Monday, January 14, 2008 3:13 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene sorting case-sensitive by default?
>
> On Fri, 2008-01-11 at 11:40 -0500, Alex Wang wrote:
> > Looks like Lucene is separating upper case and lower case while
> sorting.
>
> As Tom points out, default sorting uses natural order. It's worth
noting
> that this implies that default sorting does not produce usable results
> as soon as you use non-ASCII characters. Using a Collator works but
does
> take a fair amount of memory.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 17:35:19 2008
Return-Path: <java-user-return-31967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95839 invoked from network); 14 Jan 2008 17:35:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 17:35:18 -0000
Received: (qmail 47288 invoked by uid 500); 14 Jan 2008 17:35:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47256 invoked by uid 500); 14 Jan 2008 17:35:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47245 invoked by uid 99); 14 Jan 2008 17:35:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 09:35:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 17:34:37 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2524891fga.27
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 09:34:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=pRUp9lrh96XTAwwsMYSqEYzR6jeB/Vkv/8ekxKubEPM=;
        b=iA6Bmu53AzxXnDnQr99BNaip5idIRy9kE3+Cmy4DAX9/PBpsxZuGdvy2Ex3CbmKXLnToZ8y0iwx5vbtgtXsMY/k8by2TUaC+SrQ9fu6AeIxtZpB3A19eLsENBBnez1e4ImbltA3mXNqsbyR5gmc4w6GICUT7hUEs5nGmL2WGVpg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eNj9GnAyx/eY9lJgwwSjxzN0ovc+G4tG7QTpKJnIoRnbl6an1RtG74iDUsWXIiFGDod5vbTUkjQ/fnjk+qU2zY9vYkPW8I+9/tQKnD8sUChvvSff3eSb79O2jihUjG/5IC4rmDy2svrR65oDGZRlZEdAiSPMo9Voyrq1m77jT2o=
Received: by 10.82.140.20 with SMTP id n20mr11363796bud.27.1200332080807;
        Mon, 14 Jan 2008 09:34:40 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 14 Jan 2008 09:34:40 -0800 (PST)
Message-ID: <359a92830801140934j7b8c2358x1527e0c0c7182d24@mail.gmail.com>
Date: Mon, 14 Jan 2008 12:34:40 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?
In-Reply-To: <F700E5D18787514F8EFB5B5CE7423936BE04CC@soho.SVGINTERNET.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10582_1682090.1200332080771"
References: <359a92830801140824w619b56bp914b2dee06d4a0a8@mail.gmail.com>
	 <F700E5D18787514F8EFB5B5CE7423936BE04CC@soho.SVGINTERNET.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10582_1682090.1200332080771
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry, I was confused about this for the longest time (and it shows!). You
don't actually have to store two separate fields. Field.Store.YES stores
the input exactly as is, without passing it through anything. So you
really only have to store your field. I still think of it conceptually as
two
entirely different things, but it's not.

This code:
   public static void main(String[] args) throws Exception
    {
        try {
            RAMDirectory dir = new RAMDirectory();
            IndexWriter iw = new IndexWriter(
                        dir,
                        new StandardAnalyzer(Collections.emptySet()),
                        true);

            Document doc = new Document();

            doc.add(
                    new Field(
                            "f",
                            "This is Some Mixed, case Junk($*%& With Ugly
SYmbols",
                            Field.Store.YES,
                            Field.Index.TOKENIZED));
            iw.addDocument(doc);
            iw.close();
            IndexReader ir =  IndexReader.open(dir);
            Document d = ir.document(0);
            System.out.println(d.get("f"));
        } catch (Exception e) {
            e.printStackTrace();
        }

        System.out.println("done");
    }

prints "This is Some Mixed, case Junk($*%& With Ugly SYmbols"
yet still finds the document with a search for "junk" using
StandardAnalyzer.

Sorry for the confusion!
Erick

On Jan 14, 2008 11:48 AM, Alex Wang <AWang@sharedvision.com> wrote:

> Thanks a lot Erik for the great tip! I do need to display all the fields
> and allow the users to sort by each field as they wish. My index is
> currently about 200 mb.
>
> Your suggestion about storing (but not index) the cased version, and
> indexing (but not store) the lower-case version is an excellent solution
> for me.
>
> Is it possible to do it in the same field or do I have to do it in 2
> separate fields? If I do it in one field, what are the Lucene
> class/methods I need to overwrite?
>
> Thanks again for your help!
>
> Alex
>
>
> This message may contain confidential and/or privileged information. If
> you are not the addressee or authorized to receive this for the
> addressee, you must not use, copy, disclose, or take any action based on
> this message or any information herein. If you have received this
> message in error, please advise the sender immediately by reply e-mail
> and delete this message. Thank you for your cooperation.
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, January 14, 2008 11:24 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene sorting case-sensitive by default?
>
> Several things:
>
> 1> do you need to display all the fields? Would just storing them
> lower-case work? The only time I've needed to store fields case-
> sensitive is when I'm showing them to the user. If the user is just
> searching on them, I can store them any way I want and she'll never
> know.
>
> 2> You might very well be surprised at how little extra it takes to
> index (but not store) the lower-case version. How big is your index
> anyway? And be warned that the size increase is not linear, so
> just comparing the index sizes for, say, 10 document is misleading.
> If your index is 10M, there's no reason at all not to store twice. If
> it's
> 10G........
>
> 3> You could store (but not index) the cased version. You could
> index (but not store) the lower-case version. The total size of
> your index is (I believe) about the same as indexing AND storing
> the fields. That gives you a way to search caselessly and display
> case-sensitively.
>
> Best
> Erick
>
> On Jan 14, 2008 10:58 AM, Alex Wang <AWang@sharedvision.com> wrote:
>
> > Thanks everyone for your replies! Guess I did not fully understand the
> > meaning of "natural order" in the Lucene Java doc.
> >
> > To add another all-lower-case field for each sortable field in my
> index
> > is a little too much, since the app requires sorting on pretty much
> all
> > fields (over 100).
> >
> > Toke, you mentioned "Using a Collator works but does take a fair
> amount
> > of memory", can you please elaborate a little more on that. Thanks.
> >
> > Alex
> >
> > -----Original Message-----
> > From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
> > Sent: Monday, January 14, 2008 3:13 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene sorting case-sensitive by default?
> >
> > On Fri, 2008-01-11 at 11:40 -0500, Alex Wang wrote:
> > > Looks like Lucene is separating upper case and lower case while
> > sorting.
> >
> > As Tom points out, default sorting uses natural order. It's worth
> noting
> > that this implies that default sorting does not produce usable results
> > as soon as you use non-ASCII characters. Using a Collator works but
> does
> > take a fair amount of memory.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10582_1682090.1200332080771--

From java-user-return-31968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 18:28:49 2008
Return-Path: <java-user-return-31968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35297 invoked from network); 14 Jan 2008 18:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 18:28:49 -0000
Received: (qmail 55959 invoked by uid 500); 14 Jan 2008 18:28:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55936 invoked by uid 500); 14 Jan 2008 18:28:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55924 invoked by uid 99); 14 Jan 2008 18:28:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 10:28:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.10.39.67] (HELO mail.sharedvision.com) (69.10.39.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 18:28:07 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene sorting case-sensitive by default?
Date: Mon, 14 Jan 2008 13:28:10 -0500
Message-ID: <F700E5D18787514F8EFB5B5CE7423936BE0506@soho.SVGINTERNET.COM>
In-Reply-To: <359a92830801140934j7b8c2358x1527e0c0c7182d24@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene sorting case-sensitive by default?
thread-index: AchW09T7NFYwl0AbRCqLB77SIh15MQAB1ULg
From: "Alex Wang" <AWang@sharedvision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

No problem Erick. Thanks for clarifying it.

Alex

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Monday, January 14, 2008 12:35 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?

Sorry, I was confused about this for the longest time (and it shows!).
You
don't actually have to store two separate fields. Field.Store.YES stores
the input exactly as is, without passing it through anything. So you
really only have to store your field. I still think of it conceptually
as
two
entirely different things, but it's not.

This code:
   public static void main(String[] args) throws Exception
    {
        try {
            RAMDirectory dir =3D new RAMDirectory();
            IndexWriter iw =3D new IndexWriter(
                        dir,
                        new StandardAnalyzer(Collections.emptySet()),
                        true);

            Document doc =3D new Document();

            doc.add(
                    new Field(
                            "f",
                            "This is Some Mixed, case Junk($*%& With
Ugly
SYmbols",
                            Field.Store.YES,
                            Field.Index.TOKENIZED));
            iw.addDocument(doc);
            iw.close();
            IndexReader ir =3D  IndexReader.open(dir);
            Document d =3D ir.document(0);
            System.out.println(d.get("f"));
        } catch (Exception e) {
            e.printStackTrace();
        }

        System.out.println("done");
    }

prints "This is Some Mixed, case Junk($*%& With Ugly SYmbols"
yet still finds the document with a search for "junk" using
StandardAnalyzer.

Sorry for the confusion!
Erick

On Jan 14, 2008 11:48 AM, Alex Wang <AWang@sharedvision.com> wrote:

> Thanks a lot Erik for the great tip! I do need to display all the
fields
> and allow the users to sort by each field as they wish. My index is
> currently about 200 mb.
>
> Your suggestion about storing (but not index) the cased version, and
> indexing (but not store) the lower-case version is an excellent
solution
> for me.
>
> Is it possible to do it in the same field or do I have to do it in 2
> separate fields? If I do it in one field, what are the Lucene
> class/methods I need to overwrite?
>
> Thanks again for your help!
>
> Alex
>
>
> This message may contain confidential and/or privileged information.
If
> you are not the addressee or authorized to receive this for the
> addressee, you must not use, copy, disclose, or take any action based
on
> this message or any information herein. If you have received this
> message in error, please advise the sender immediately by reply e-mail
> and delete this message. Thank you for your cooperation.
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Monday, January 14, 2008 11:24 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene sorting case-sensitive by default?
>
> Several things:
>
> 1> do you need to display all the fields? Would just storing them
> lower-case work? The only time I've needed to store fields case-
> sensitive is when I'm showing them to the user. If the user is just
> searching on them, I can store them any way I want and she'll never
> know.
>
> 2> You might very well be surprised at how little extra it takes to
> index (but not store) the lower-case version. How big is your index
> anyway? And be warned that the size increase is not linear, so
> just comparing the index sizes for, say, 10 document is misleading.
> If your index is 10M, there's no reason at all not to store twice. If
> it's
> 10G........
>
> 3> You could store (but not index) the cased version. You could
> index (but not store) the lower-case version. The total size of
> your index is (I believe) about the same as indexing AND storing
> the fields. That gives you a way to search caselessly and display
> case-sensitively.
>
> Best
> Erick
>
> On Jan 14, 2008 10:58 AM, Alex Wang <AWang@sharedvision.com> wrote:
>
> > Thanks everyone for your replies! Guess I did not fully understand
the
> > meaning of "natural order" in the Lucene Java doc.
> >
> > To add another all-lower-case field for each sortable field in my
> index
> > is a little too much, since the app requires sorting on pretty much
> all
> > fields (over 100).
> >
> > Toke, you mentioned "Using a Collator works but does take a fair
> amount
> > of memory", can you please elaborate a little more on that. Thanks.
> >
> > Alex
> >
> > -----Original Message-----
> > From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
> > Sent: Monday, January 14, 2008 3:13 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene sorting case-sensitive by default?
> >
> > On Fri, 2008-01-11 at 11:40 -0500, Alex Wang wrote:
> > > Looks like Lucene is separating upper case and lower case while
> > sorting.
> >
> > As Tom points out, default sorting uses natural order. It's worth
> noting
> > that this implies that default sorting does not produce usable
results
> > as soon as you use non-ASCII characters. Using a Collator works but
> does
> > take a fair amount of memory.
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 18:48:11 2008
Return-Path: <java-user-return-31969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47671 invoked from network); 14 Jan 2008 18:48:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 18:48:11 -0000
Received: (qmail 89801 invoked by uid 500); 14 Jan 2008 18:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89767 invoked by uid 500); 14 Jan 2008 18:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89756 invoked by uid 99); 14 Jan 2008 18:47:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 10:47:55 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 18:47:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JEULO-0002w2-9M
	for java-user@lucene.apache.org; Mon, 14 Jan 2008 10:47:34 -0800
Message-ID: <14809197.post@talk.nabble.com>
Date: Mon, 14 Jan 2008 10:47:34 -0800 (PST)
From: solr_user <kunaleddit@yahoo.com>
To: java-user@lucene.apache.org
Subject: spell checking for combined words
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kunaleddit@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Does Lucene spell checker have the ability to suggest splitting of combined
words.  So for e.g. if I have got the word "apple" and "computer" in my
index and if I type "applecomputer" then how can I make it suggest
"apple computer"
-- 
View this message in context: http://www.nabble.com/spell-checking-for-combined-words-tp14809197p14809197.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 19:17:03 2008
Return-Path: <java-user-return-31970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60558 invoked from network); 14 Jan 2008 19:17:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 19:17:03 -0000
Received: (qmail 34614 invoked by uid 500); 14 Jan 2008 19:16:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33928 invoked by uid 500); 14 Jan 2008 19:16:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33917 invoked by uid 99); 14 Jan 2008 19:16:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 11:16:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 19:16:20 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1957949rvb.5
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 11:16:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=ZChUHgN04KvcPGJs7dez6whN5+sPiJsGVLWzr1wDiy8=;
        b=VQ3Jt7/QqxrqPXvGyaC2Qyx1sdjQcN3P/WnzQmKqYuBTvm/ksjib+X+w3MF1GDC5JlYLGH67NBbJJyZq09f3yGPzZe7RL8I03GLs3wyFFgSYoyxuQMOASvwYvY91FqYGr4dlOVlngYZOBOCer48Dpn6LeCPN9js3vq65TOYDgDo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=k8vredGW/nvQw+KY5hCmIQzZG6qyJf4v7F/yGTThAwWPcCMeM9zrmcanQ++9QD/s0FlyjlFTfUb2Xt9v4WrZQjBZb9JRRwDBSVrASOCi2lsGvX+0EC1LWPo804fypTLqxkwAdQHRT9ewraLTimQHkmFx9vTojFDPuBXK+rnWAhM=
Received: by 10.141.141.3 with SMTP id t3mr4028838rvn.213.1200338186004;
        Mon, 14 Jan 2008 11:16:26 -0800 (PST)
Received: from ?9.30.38.162? ( [129.42.184.35])
        by mx.google.com with ESMTPS id i33sm8963241rng.3.2008.01.14.11.16.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 14 Jan 2008 11:16:24 -0800 (PST)
Message-ID: <478BB49F.5090107@gmail.com>
Date: Mon, 14 Jan 2008 20:14:39 +0100
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-dev@lucene.apache.org, java-user@lucene.apache.org
Subject: Lucene 2.3 RC3 available for testing
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I just uploaded Lucene 2.3 RC3 to:
http://people.apache.org/~buschmi/staging_area/lucene_2_3/

RC3 fixes a problem in the indexer that could cause it to hang after a
disk full exception occurred. (see
https://issues.apache.org/jira/browse/LUCENE-1130 for details).

Please switch to RC3 and keep testing!
-Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 22:06:09 2008
Return-Path: <java-user-return-31971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50129 invoked from network); 14 Jan 2008 22:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 22:06:09 -0000
Received: (qmail 5382 invoked by uid 500); 14 Jan 2008 22:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5353 invoked by uid 500); 14 Jan 2008 22:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5342 invoked by uid 99); 14 Jan 2008 22:05:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 14:05:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 22:05:27 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 6393AE24F7
	for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 14:05:31 -0800 (PST)
Message-Id: <951E69A3-FC79-413B-BA5C-533A855A9391@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: SimpleFragmenter docs
Date: Mon, 14 Jan 2008 17:05:27 -0500
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

I was looking at the SimpleFragmenter in contrib/Highlighter and was  
wondering about the fragmentSize value.  It says the value is the  
number of bytes, but looking at the code it's using the String offset,  
right?  So it should be the number of characters, right?

I can fix it, just wanted to confirm my understanding.

Thanks,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 22:34:41 2008
Return-Path: <java-user-return-31972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62845 invoked from network); 14 Jan 2008 22:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 22:34:40 -0000
Received: (qmail 48579 invoked by uid 500); 14 Jan 2008 22:34:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48554 invoked by uid 500); 14 Jan 2008 22:34:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48543 invoked by uid 99); 14 Jan 2008 22:34:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 14:34:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 22:33:58 +0000
Received: by py-out-1112.google.com with SMTP id a73so2720937pye.9
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 14:34:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=q7v67lP+8eEtH0OBHyLSrbXiA10yjZsBN8TlYq2q5jE=;
        b=jOTNXreyFqSA/2dKgTDZQKPbUttYitP+ukH8v3PEhs23PPIiidZc8BMLe0hcJX1ioxfQhy9HVNl2/R1TdiH7NIHmMVeW0f+jZ3cxvgQt1Sy0dz/21V7MvAphznMGj+3tlvlWdZKMomDunNEM0tIZETZXZu6TSlTVKTqHql+JzPw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=tFRlA3wgph375ufcvi+T1nTJ8mVq/0wydHrBXhAjizguZRndd7pEoYu1BxHlHwZ9f60bsYPE/TBJ9IfsgefDC7qgp7Es4KCAPFNbXuOs3c25F1BOGPDFYPSCnuy/Lg/2PJy6rWGqsV722HNETgAvFFZd4+BmmJkAXVCC1ZcVIU0=
Received: by 10.65.96.6 with SMTP id y6mr15698668qbl.24.1200350042171;
        Mon, 14 Jan 2008 14:34:02 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e15sm5293180qbe.2.2008.01.14.14.34.00
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 14 Jan 2008 14:34:00 -0800 (PST)
Message-ID: <478BE349.20008@gmail.com>
Date: Mon, 14 Jan 2008 17:33:45 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SimpleFragmenter docs
References: <951E69A3-FC79-413B-BA5C-533A855A9391@apache.org>
In-Reply-To: <951E69A3-FC79-413B-BA5C-533A855A9391@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think your right, and thats not the only place...the whole handling of 
maxDocBytesToAnalyze in the main Highlighter class shares this issue. I 
guess the idea is an ascii holdover one byte equals one char? I am sure 
Mark H can clear it up, but don't forgot the maxDocBytesToAnalyze part 
as well when its corrected.

- Mark

Grant Ingersoll wrote:
> I was looking at the SimpleFragmenter in contrib/Highlighter and was 
> wondering about the fragmentSize value.  It says the value is the 
> number of bytes, but looking at the code it's using the String offset, 
> right?  So it should be the number of characters, right?
>
> I can fix it, just wanted to confirm my understanding.
>
> Thanks,
> Grant
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 14 23:18:41 2008
Return-Path: <java-user-return-31973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85665 invoked from network); 14 Jan 2008 23:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2008 23:18:40 -0000
Received: (qmail 18437 invoked by uid 500); 14 Jan 2008 23:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18409 invoked by uid 500); 14 Jan 2008 23:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18398 invoked by uid 99); 14 Jan 2008 23:18:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 15:18:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 23:18:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 29B6971C1BB; Mon, 14 Jan 2008 15:18:02 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 25C1C71C1B5
	for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 15:18:02 -0800 (PST)
Date: Mon, 14 Jan 2008 15:18:02 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Cannot bind RMIMessenger exception:non-JRMP server at remote
 endpoint
In-Reply-To: <1200144445.4788c03d0c67d@imp.free.fr>
Message-ID: <Pine.LNX.4.62.0801141507420.8807@radix.cryptio.net>
References: <1200144445.4788c03d0c67d@imp.free.fr>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Trying config file at path /var/www/.lsearch.conf
: Trying config file at path /usr/local/search/ls2/lsearch.conf
: 0    [main] INFO  org.wikimedia.lsearch.util.UnicodeDecomposer  - Loaded unicode
: decomposer
: java.rmi.ConnectIOException: non-JRMP server at remote endpoint
:   at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:217)
...

I'm 99% certain this message isn't coming from anything in the "Apache 
Lucene Java" code base ... this looks like an erro from the "WikiMedia 
Lucene Search" plugin.  Unfortunately the docs for that plugin: 

 1) do a really shitty job of distinguishing/disambiguating "Apache Lucene 
    Java" from the "WikiMedia Lucene Search" code.  

 2) don't identify any channel/mechanism for seeking help or discussing 
    errors.

http://www.mediawiki.org/wiki/Lucene


...your best bet (assuming no one else on this list says "oh hey, i know 
all about the wikimedia code, i can help you.") is probably to post your 
question on the "discussion" tab of the plugin pages and hope someone 
replies.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 03:42:14 2008
Return-Path: <java-user-return-31974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6731 invoked from network); 15 Jan 2008 03:42:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 03:42:12 -0000
Received: (qmail 66210 invoked by uid 500); 15 Jan 2008 03:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66176 invoked by uid 500); 15 Jan 2008 03:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66165 invoked by uid 99); 15 Jan 2008 03:41:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 19:41:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.200.255] (HELO smtp107.biz.mail.mud.yahoo.com) (68.142.200.255)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 03:41:29 +0000
Received: (qmail 14745 invoked from network); 15 Jan 2008 03:41:33 -0000
Received: from unknown (HELO karra-sogors-imac-g5.local) (aron@theatlantis.net@64.175.42.176 with plain)
  by smtp107.biz.mail.mud.yahoo.com with SMTP; 15 Jan 2008 03:41:33 -0000
X-YMail-OSG: ogUu6PwVM1m_wEZT0WWzQhrU74rMQox0lgKMiqsOkMvGDndj295VXRJ0L2gxxKGd.j__7u5CFA--
Message-ID: <478C2B6C.5040506@theatlantis.net>
Date: Mon, 14 Jan 2008 19:41:32 -0800
From: Aron Sogor <aron@theatlantis.net>
User-Agent: Thunderbird 2.0.0.9 (Macintosh/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sort does not work for me
References: <478AA7B0.8050803@theatlantis.net>
In-Reply-To: <478AA7B0.8050803@theatlantis.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Let me qualify my question:

Sort is not working for a field that I stored :

           document.add(new Field(FIELD_RECEIVED, DateTools.timeToString(
                   System.currentTimeMillis(), 
DateTools.Resolution.SECOND),
                   Field.Store.NO, Field.Index.UN_TOKENIZED));

using the query bellow with sort:
Sort sort = new Sort(FIELD_RECEIVED,true);

even if I do reverse=false the order of the hits does not really change. 
The question is why would that be. The dates are numbers that even is 
sorted as strings should order the same, and reverse should work.

Aron



Aron Sogor wrote:
> Here is the document:
>
>            MimeMessage mime = new MimeMessage(null, new 
> FileInputStream(item
>                    .getMailFile()));
>            document.add(new Field(FIELD_MAILID, 
> item.getMailId().toString(),
>                    Field.Store.YES, Field.Index.UN_TOKENIZED));
>            document.add(new Field(FIELD_SUBJECT, mime.getSubject(),
>                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
>            document.add(new Field(FIELD_FROM, 
> getAddressLine(mime.getFrom()),
>                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
>            document.add(new Field(FIELD_BODY, getContentReader(mime
>                    .getContent())));
>            document.add(new Field(FIELD_RECEIVED, DateTools.timeToString(
>                    System.currentTimeMillis(), 
> DateTools.Resolution.SECOND),
>                    Field.Store.NO, Field.Index.UN_TOKENIZED));
>            document.add(new Field(FIELD_TAG, TAG_INBOX, Field.Store.YES,
>                    Field.Index.TOKENIZED));
>            return document;
>
> here is the search:
>
>    public static Hits createInboxQuery(IndexSearcher searcher)
>            throws ParseException, IOException {
>        Query query = new QueryParser(FIELD_TAG, new StandardAnalyzer())
>                .parse(TAG_INBOX);
>        Sort sort = new Sort(FIELD_RECEIVED,true);
>        return searcher.search(query, sort);
>    }
>
>            IndexSearcher searcher = 
> storage.getIndexSearcherForMailBox("junk");
>            Hits hits = 
> DocumentAndQueryFactory.createInboxQuery(searcher);
>            for (int i = 0; i < hits.length(); i++) {
>                Document hit = (Document) hits.doc(i);
>                System.out.println(hit.getField("subject").stringValue());
>
>
> No matter what I do when I lit the hits they come back (these are the 
> subjects/ but essentially same timestamp):
>
> Test MSGSun Jan 13 15:52:47 PST 2008
> Test MSGSun Jan 13 15:52:54 PST 2008
> Test MSGSun Jan 13 15:53:03 PST 2008
> Test MSGSun Jan 13 15:53:12 PST 2008
> Test MSGSun Jan 13 15:53:48 PST 2008
>
> Setting the "revert" for the search Sort essentially has no effect. I 
> perhaps very much missing something... but what?
>
> Aron
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 03:47:38 2008
Return-Path: <java-user-return-31975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9017 invoked from network); 15 Jan 2008 03:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 03:47:38 -0000
Received: (qmail 69215 invoked by uid 500); 15 Jan 2008 03:47:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69180 invoked by uid 500); 15 Jan 2008 03:47:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69168 invoked by uid 99); 15 Jan 2008 03:47:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 19:47:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of coolgeng410@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 03:46:55 +0000
Received: by an-out-0708.google.com with SMTP id c5so550749anc.49
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 19:47:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=3D2oGetcwQX8245hzVlJpLgfzqqaQwec3Fwvl+q4jOM=;
        b=V2QooCaM+Yaw7gl8z/VPDY/O2pkY6xMWa3JG+RdxM4VJexK28l1ZGcjY6zhXwenDeozqI92DEnbxVIxdDKP+2TM1S/g5/+vupOi78Bqu9OMAW+vGpAlbpkys1y6E3zsSyc+dOdGN0h0YBABZ/KF0x2+OXG1TTgFOfR3fVeg+TAs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=pJCA6/TouzqhOvEaECB5uTkGIFARWwYtgLWGAJ7+EksxEHnwAkLZxpYpTHg8VQmpR2qjAK1VBDLmVC0b3eUrYVyJQCsIu2uQkuV2YUovnCuQ5BcrIAu3vkX7eGPIinhI0K+wV2htnPBb79nwky/rbnlhE40xWsFCgOXt5G7Lb0I=
Received: by 10.100.248.9 with SMTP id v9mr15767751anh.19.1200368820341;
        Mon, 14 Jan 2008 19:47:00 -0800 (PST)
Received: by 10.100.44.7 with HTTP; Mon, 14 Jan 2008 19:47:00 -0800 (PST)
Message-ID: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com>
Date: Tue, 15 Jan 2008 11:47:00 +0800
From: "coolgeng coolgeng" <coolgeng410@gmail.com>
To: java-user@lucene.apache.org
Subject: How?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4628_29771376.1200368820337"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4628_29771376.1200368820337
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys,
     Some problems confuse me. When I would like to index some data from a
table in database. While I create the index on this table, the  searching
job keeps going . How can I work out it?
By the way, the number of data is around 1 hundred million.

-- 
Best Regards
Cooper Geng

------=_Part_4628_29771376.1200368820337--

From java-user-return-31976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 06:03:30 2008
Return-Path: <java-user-return-31976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96559 invoked from network); 15 Jan 2008 06:03:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 06:03:29 -0000
Received: (qmail 58517 invoked by uid 500); 15 Jan 2008 06:03:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58475 invoked by uid 500); 15 Jan 2008 06:03:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58464 invoked by uid 99); 15 Jan 2008 06:03:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 22:03:13 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 06:02:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JEesv-00069r-L3
	for java-user@lucene.apache.org; Mon, 14 Jan 2008 22:02:53 -0800
Message-ID: <14832559.post@talk.nabble.com>
Date: Mon, 14 Jan 2008 22:02:53 -0800 (PST)
From: rakeshxp <rakeshxp@gmail.com>
To: java-user@lucene.apache.org
Subject: Spell Check + Adding records
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: rakeshxp@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Everyone,

I have a query regarding Spell Checker. I created the spell index using the
following code
SpellChecker spellChecker = new SpellChecker(spellDir);
spellChecker.indexDictionary(dictionary);

This works perfectly. But is there any way in which I can dynamically add
records to the spell checker ? ( Reindexing everytime is a big overkill )

Thanks!
Rakesh
-- 
View this message in context: http://www.nabble.com/Spell-Check-%2B-Adding-records-tp14832559p14832559.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 06:54:20 2008
Return-Path: <java-user-return-31977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50830 invoked from network); 15 Jan 2008 06:54:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 06:54:20 -0000
Received: (qmail 80763 invoked by uid 500); 15 Jan 2008 06:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80443 invoked by uid 500); 15 Jan 2008 06:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80432 invoked by uid 99); 15 Jan 2008 06:54:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jan 2008 22:54:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 06:53:38 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2101919rvb.5
        for <java-user@lucene.apache.org>; Mon, 14 Jan 2008 22:53:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=kyTNsRDdK5Tcu4Xk6pLiXe3IJdYhY0Cxmx98Ka2KEK8=;
        b=dJmE8LfvT5kmPKELerP/QlldHd82/fxXs/09KsScDoH3W8i6QJEN+wyyOOr/CXCDNvzIPr5um2GPqFQYXvgVoTLGdBHSffSbXEvwb7ijpajPh+QGU+I7lZRCJBTuzaY7975jFQfzlTtZQXTsARS4TDYwL9oxZkJueMgXgCov6qU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=v+OflmM7tC2SV4Bb4O4cEfjcZn0TwxcJsarOGxVVcIZJIEWRO6JuxST4+TVmPQAisbUanDeH1f+Mp7+itH2UE1XGifVfYAlg/7AFCaEmPirBe4ciTpUok84ooPrkjJ81GzYJSpphx6q3cUoQLfwHCLonOkX8n7sbapTCywDS0FU=
Received: by 10.141.172.6 with SMTP id z6mr4397978rvo.80.1200380022705;
        Mon, 14 Jan 2008 22:53:42 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Mon, 14 Jan 2008 22:53:42 -0800 (PST)
Message-ID: <52c3ddca0801142253h11454704h2d262f077717240c@mail.gmail.com>
Date: Tue, 15 Jan 2008 07:53:42 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Nutch - Microsoft Search Server integration
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9302_19905270.1200380022694"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9302_19905270.1200380022694
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Is it possible to integrate Nutch into MS Search Server via OpenSearch API?
(MS Search Server support Open Search:
http://www.microsoft.com/enterprisesearch/serverproducts/searchserver/features.aspx
)

I think it should be possible to pass user query from MS server to Nutch and
integrate Nutch search result into MS server search result but I didn't have
a chance to try this out yet. Does anybody have any experience which can be
shared?

Thanks,
Lukas

-- 
http://blog.lukas-vlcek.com/

------=_Part_9302_19905270.1200380022694--

From java-user-return-31978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 08:31:09 2008
Return-Path: <java-user-return-31978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84071 invoked from network); 15 Jan 2008 08:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 08:31:05 -0000
Received: (qmail 67435 invoked by uid 500); 15 Jan 2008 08:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67039 invoked by uid 500); 15 Jan 2008 08:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67028 invoked by uid 99); 15 Jan 2008 08:30:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 00:30:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:30:34 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JUO00KPGFMPV5@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 15 Jan 2008 09:30:25 +0100 (MET)
Date: Tue, 15 Jan 2008 09:30:24 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: RE: Lucene sorting case-sensitive by default?
In-reply-to: <F700E5D18787514F8EFB5B5CE7423936BE04BA@soho.SVGINTERNET.COM>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200385824.9514.38.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <F700E5D18787514F8EFB5B5CE7423936BE04BA@soho.SVGINTERNET.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2008-01-14 at 10:58 -0500, Alex Wang wrote:
> Toke, you mentioned "Using a Collator works but does take a fair amount
> of memory", can you please elaborate a little more on that. Thanks.

We have an index with 10 million records that takes up 37GB. Practically
all records have a title, which can be used for sorting. The size of the
titles is about 450MB in total. Using a Collator the usual way means
that a CollatorKey is stored for all of those titles, among with the
titles themselves.

As for using a Collator, there's a neat tutorial at
http://wiki.epc.ub.uu.se/display/~ronnie/International+Sorting


Unfortunately for us, the memory requirements for this was too much for
our machine. Instead of using the build-in caching mechanism, we used
the fact that our index is currently static and calculated a single
integer for every document, stating its position relative to all other
documents in local sort order. That gives us fast sort with low memory
overhead. Of course we'll have to discard that idea when we move to a
non-static index.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 08:40:23 2008
Return-Path: <java-user-return-31979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88613 invoked from network); 15 Jan 2008 08:40:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 08:40:23 -0000
Received: (qmail 76199 invoked by uid 500); 15 Jan 2008 08:40:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76148 invoked by uid 500); 15 Jan 2008 08:40:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76137 invoked by uid 99); 15 Jan 2008 08:40:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 00:40:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of myangxq@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:39:42 +0000
Received: by ug-out-1314.google.com with SMTP id u40so47896ugc.29
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 00:39:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=OIB4nztRy5XitJnRV03amFgjpssBfSIKALIzrKlxloI=;
        b=BKTSKX9PbU/QSmSMXBRf1i/zkLv83djLF3Wcmq4MUmOnlPH2l1bhK+jkDUF5LZhR96nHqTK/KykzFCOxuVhdkmdMMK9JcXgk1uMlew6gCXvuIlGdymUS4XOM3UZBakolR1MjXP0V7Y4fhf5k93Gl0xNLjYE8CLVrTRsSoLU022k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=T4dx7UgtLE0InBf1Sbd+9d2jysv8KB15jNn0O7hu76AEn8Ku4unEqghUN1RVgxAyrNlDrLJY7Q0j3MGWB/vTFDJr1/Xe7qCn/lUbV8s7clN4ijRsHTDgAX5vsAyWl8fTfewx3oHiHRxJQQdcOTM4U/C3MD3i7qSUzVxdpmcyXvM=
Received: by 10.67.115.17 with SMTP id s17mr552536ugm.56.1200386387537;
        Tue, 15 Jan 2008 00:39:47 -0800 (PST)
Received: by 10.66.223.14 with HTTP; Tue, 15 Jan 2008 00:39:47 -0800 (PST)
Message-ID: <13dc01580801150039j99b0ecah2a955f0aad7dbb0@mail.gmail.com>
Date: Tue, 15 Jan 2008 16:39:47 +0800
From: "Terry Yang" <myangxq@gmail.com>
To: java-user@lucene.apache.org
Subject: A question about IndexerReader.termPositions()
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,ALL

Playing with an algorithm(Summarize/Highlight Based on Slide Windows),
i find that IndexerReader.termPositions(Term term) not support
wildcard term. Is it meaningful or not to write a patch to support
wildcard term?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 11:54:18 2008
Return-Path: <java-user-return-31980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61712 invoked from network); 15 Jan 2008 11:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 11:54:18 -0000
Received: (qmail 80951 invoked by uid 500); 15 Jan 2008 11:54:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80865 invoked by uid 500); 15 Jan 2008 11:54:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80854 invoked by uid 99); 15 Jan 2008 11:54:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 03:54:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 11:53:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 311FB7FAC
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 03:53:41 -0800 (PST)
Message-Id: <E9057741-CECB-4419-828F-7E8D727A76DA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <13dc01580801150039j99b0ecah2a955f0aad7dbb0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: A question about IndexerReader.termPositions()
Date: Tue, 15 Jan 2008 06:53:39 -0500
References: <13dc01580801150039j99b0ecah2a955f0aad7dbb0@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Wildcard "terms" get expanded by the rewrite() method on WildcardQuery  
to Term instances during processing.  Thus, you would have to TermEnum  
that the WildCardQuery uses in order to get the individual terms  
first, then you could get the term positions.

-Grant

On Jan 15, 2008, at 3:39 AM, Terry Yang wrote:

> Hi,ALL
>
> Playing with an algorithm(Summarize/Highlight Based on Slide Windows),
> i find that IndexerReader.termPositions(Term term) not support
> wildcard term. Is it meaningful or not to write a patch to support
> wildcard term?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 11:54:40 2008
Return-Path: <java-user-return-31981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61792 invoked from network); 15 Jan 2008 11:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 11:54:40 -0000
Received: (qmail 82605 invoked by uid 500); 15 Jan 2008 11:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82450 invoked by uid 500); 15 Jan 2008 11:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82439 invoked by uid 99); 15 Jan 2008 11:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 03:54:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.27.42.36] (HELO smtp6-g19.free.fr) (212.27.42.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 11:53:56 +0000
Received: from smtp6-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp6-g19.free.fr (Postfix) with ESMTP id 506AA5FE7A
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 12:54:01 +0100 (CET)
Received: from imp4-g19.free.fr (imp4-g19.free.fr [212.27.42.4])
	by smtp6-g19.free.fr (Postfix) with ESMTP id 456005FD80
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 12:54:01 +0100 (CET)
Received: by imp4-g19.free.fr (Postfix, from userid 33)
	id 33171112A; Tue, 15 Jan 2008 12:54:01 +0100 (CET)
Received: from ip-100-21.latecoere.fr (ip-100-21.latecoere.fr [195.25.100.21]) 
	by imp.free.fr (IMP) with HTTP 
	for <linuxmasterjedi@212.27.42.71>; Tue, 15 Jan 2008 12:54:00 +0100
Message-ID: <1200398040.478c9ed8ed2e9@imp.free.fr>
Date: Tue, 15 Jan 2008 12:54:00 +0100
From: linuxmasterjedi@free.fr
To: java-user@lucene.apache.org
Subject: Re: Cannot bind RMIMessenger exception:non-JRMP server at remote endpoint
References: <1200144445.4788c03d0c67d@imp.free.fr> <Pine.LNX.4.62.0801141507420.8807@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0801141507420.8807@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.8
X-Originating-IP: 195.25.100.21
X-Virus-Checked: Checked by ClamAV on apache.org

Selon Chris Hostetter <hossman_lucene@fucit.org>:
>
> : Trying config file at path /var/www/.lsearch.conf
> : Trying config file at path /usr/local/search/ls2/lsearch.conf
> : 0    [main] INFO  org.wikimedia.lsearch.util.UnicodeDecomposer  - Loaded
> unicode
> : decomposer
> : java.rmi.ConnectIOException: non-JRMP server at remote endpoint
> :   at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:217)
> ...
>
> I'm 99% certain this message isn't coming from anything in the "Apache
> Lucene Java" code base ... this looks like an error from the "WikiMedia
> Lucene Search" plugin.  Unfortunately the docs for that plugin:
>
>  1) do a really shitty job of distinguishing/disambiguating "Apache Lucene
>     Java" from the "WikiMedia Lucene Search" code.
>
>  2) don't identify any channel/mechanism for seeking help or discussing
>     errors.
>
> http://www.mediawiki.org/wiki/Lucene
>
>
> ...your best bet (assuming no one else on this list says "oh hey, i know
> all about the wikimedia code, i can help you.") is probably to post your
> question on the "discussion" tab of the plugin pages and hope someone
> replies.
>
>
> -Hoss
>

Dear Hoss,

  Thanks for your reply, I thought it was a Java issue. Gonna post in the
Discussion tab and pray :-/  If anyone got an idea, he's welcome to reply ;)

  CU

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 12:18:27 2008
Return-Path: <java-user-return-31982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67257 invoked from network); 15 Jan 2008 12:18:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 12:18:27 -0000
Received: (qmail 7008 invoked by uid 500); 15 Jan 2008 12:18:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5976 invoked by uid 500); 15 Jan 2008 12:18:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5965 invoked by uid 99); 15 Jan 2008 12:18:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 04:18:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 12:17:45 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2882659fga.27
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 04:17:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=kl0J9gmiHlSxzNYWrJoq0edrDCvlA0Oqv9AwevMBtsg=;
        b=rB5gf4bwZ7+J//qkYQ7cI4r5V8EKRmfjBXJglRpkwqfbx0LtUYY5VW9zT5kFuteuSbnGN8wyMRJec17liU4vCucupZ3wWbmxAde8dcZieS+LriCQcDa65bRtrWS6cuFEpyeybFBZnnuGq6Sv279uYSQ7iF2Cj7LykQ0ulL+hZhU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XV5eF5mrRtZa4ReNMx++YPttLDsdHXEr/ndTGKzR/mXeiU9AN9DUN8jfDcK2BVxjWL+brv0TIhzsKnLmdCN8uJ6OkNf6jEry4IsctbrO8AgNtv3N79dMaENDFw9fsgmfpxfCUck0a8wVfNZNoSCINoqMcpjfrYDMgVljv5VAZow=
Received: by 10.82.140.20 with SMTP id n20mr12995503bud.27.1200399469068;
        Tue, 15 Jan 2008 04:17:49 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 15 Jan 2008 04:17:49 -0800 (PST)
Message-ID: <1bcb7c7f0801150417o607b645frbfb4f927a5d8266a@mail.gmail.com>
Date: Tue, 15 Jan 2008 14:17:49 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene as a graph store
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13497_33466518.1200399469063"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13497_33466518.1200399469063
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello;

I like to use lucene as a graph store. The graph representation is a list of
edges. Consider the code below:

        final int commitCount = 16 * 1024;
        final int numObj =  1024 * 1024;

        Analyzer analyzer = new KeywordAnalyzer();
        FSDirectory directory = FSDirectory.getDirectory("c:\\LuceneAdd");
        IndexWriter writer = new IndexWriter(directory, analyzer, true);

        Document doc;
        long start = System.currentTimeMillis();

        Random r = new Random(System.currentTimeMillis());

        for(int i=0; i<numObj; i++) {
            doc = new Document();
            doc.add(new Field("srcKey", NumberTools.longToString(i),
Field.Store.YES, Field.Index.UN_TOKENIZED));
            doc.add(new Field("dstKey",
NumberTools.longToString(r.nextInt(numObj)),
Field.Store.YES, Field.Index.UN_TOKENIZED));
            doc.add(new Field("linkKey",
NumberTools.longToString(r.nextInt(16)),
Field.Store.YES, Field.Index.UN_TOKENIZED));
            doc.add(new Field("linkValue", NumberTools.longToString(
r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));

           writer.addDocument(doc);

            if(i%commitCount==0) {
                 long now = System.currentTimeMillis();
                 System.out.println(i + ":" + (now-start));
                 start = now;
            }

        }

        writer.optimize();
        writer.close();
        directory.close();


Basically I am adding a large number of documents from srcKey = i to dstKey
= random and two other string fields - linkKey and linkValue.

Compared to a normal database store, or an oodbms such as perst or db4o -
lucene takes longer to index.
However, it is much faster in searching, finding, retrieving records.

I can make 16384 random lookups over 1Million entries in 0.8 seconds. This
is excellent time. (I have been benchmarking for a long time)

Typically, when number of objects in BTree based structure in an oodbms for
example increase, the search and add times also increase.

Will lucene have the same problem and how can I overcome it if it does.
Looking at the above code - does anyone has any recomendations
to improve index performance. (also what can I do to improve search
performance)

While searching with an indexsearcher - does lucene do any caching? usually
MRU caches are used to accomplish this.

Any ideas,help,recomendations greatly appreciated.

Best,
-C.B.

------=_Part_13497_33466518.1200399469063--

From java-user-return-31983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 12:43:28 2008
Return-Path: <java-user-return-31983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81843 invoked from network); 15 Jan 2008 12:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 12:43:27 -0000
Received: (qmail 40758 invoked by uid 500); 15 Jan 2008 12:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40722 invoked by uid 500); 15 Jan 2008 12:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40711 invoked by uid 99); 15 Jan 2008 12:43:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 04:43:11 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.35 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 12:42:45 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0FCgn0x062440
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 13:42:49 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <5938737A-81A8-4561-8DFA-6D831C174313@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <14832559.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Spell Check + Adding records
Date: Tue, 15 Jan 2008 13:42:49 +0100
References: <14832559.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


15 jan 2008 kl. 07.02 skrev rakeshxp:

> Hello Everyone,

Hi Rakesh,

> is there any way in which I can dynamically add
> records to the spell checker ? ( Reindexing everytime is a big  
> overkill )

Start by getting the source code if you don't have it. It should not  
be a big deal, but it might take some refactoring or copy-paste of  
methods.

If I recall right, this is what you would do:

Open an index writer. Make sure your words already are not a part of  
the index. I'm not sure if the word is indexed or not, you have to  
check that out. Then for each word, use the document factory methods  
of the spell checker and and add the output to the index writer. Close  
the writer and freshen the searcher.

-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 12:48:48 2008
Return-Path: <java-user-return-31984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84843 invoked from network); 15 Jan 2008 12:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 12:48:48 -0000
Received: (qmail 55500 invoked by uid 500); 15 Jan 2008 12:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55463 invoked by uid 500); 15 Jan 2008 12:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55452 invoked by uid 99); 15 Jan 2008 12:48:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 04:48:31 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.22 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 12:48:19 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0FCmBoE021682
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 13:48:11 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <EDB8A989-CE59-4960-B876-2F1A876CEEA8@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0801150417o607b645frbfb4f927a5d8266a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: lucene as a graph store
Date: Tue, 15 Jan 2008 13:48:11 +0100
References: <1bcb7c7f0801150417o607b645frbfb4f927a5d8266a@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


15 jan 2008 kl. 13.17 skrev Cam Bazz:

>
> Typically, when number of objects in BTree based structure in an  
> oodbms for
> example increase, the search and add times also increase.
>
> Will lucene have the same problem and how can I overcome it if it  
> does.

There is a benchmark package in the contrib section:

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/benchmark/

Implement a DocMaker and simulate your desired system.

> Looking at the above code - does anyone has any recomendations
> to improve index performance. (also what can I do to improve search
> performance)

http://wiki.apache.org/lucene-java/ImproveSearchingSpeed

> While searching with an indexsearcher - does lucene do any caching?  
> usually
> MRU caches are used to accomplish this.

I have no idea, someone else have to help you out there. Perhaps the  
Solr wiki have something about that? Also try searching the forum  
archives, using Nabble for instance.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 12:49:58 2008
Return-Path: <java-user-return-31985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85310 invoked from network); 15 Jan 2008 12:49:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 12:49:58 -0000
Received: (qmail 59078 invoked by uid 500); 15 Jan 2008 12:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59055 invoked by uid 500); 15 Jan 2008 12:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59044 invoked by uid 99); 15 Jan 2008 12:49:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 04:49:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 12:49:28 +0000
Received: (qmail invoked by alias); 15 Jan 2008 12:49:21 -0000
Received: from e178124053.adsl.alicedsl.de (EHLO msrvcn04) [85.178.124.53]
  by mail.gmx.net (mp033) with SMTP; 15 Jan 2008 13:49:21 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+0sFB+pB608B02lwgSzSZ6qfA4nr0sclGF2N6AGs
	DJShikhQUnip8o
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <F334D4E9702642F48EAEE86A8E7344B6@msrvcn04> <359a92830801131136h259dd26ficafe8329c084c4ea@mail.gmail.com> <5F58FC8D651B47929E2280861FB009A5@msrvcn04> <359a92830801140705v3ee9f6e9yc4abb3d2008e3ed9@mail.gmail.com> <616047D48C1F4685B8E7EF9057460B9B@msrvcn04> <359a92830801140721t49c42072j844693170d48de7c@mail.gmail.com> <64E9BE19DDA94DBC9549FA0241CEB565@msrvcn04> <359a92830801140818x68fd3a25yb4d548a279abb975@mail.gmail.com>
Subject: RE: Index merging and optimizing
Date: Tue, 15 Jan 2008 13:49:31 +0100
Message-ID: <BE462538EC4245CC8437A001D5FDB777@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801140818x68fd3a25yb4d548a279abb975@mail.gmail.com>
Thread-Index: AchWyTxK2Idae3W/SumAJ31o1HEIewAIFG8w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> But it also seems that the parallel/not parallel decision is
> something you control on the back end, so I'm not sure the user
> is involved in the merge question at all. In other words, you could
> easily split the indexing task up amongst several machines and/or
> processes and combine all the results after all the sub-indexes
> were build, thus making your question basically irrelevant.

I'm just writing the tool. The customer (IT staff, not end user) uses it.
Now I have to find out the best stategy which allows fast indexing and
searching.

> But you still haven't explained what the user is getting from all
> this flexibility. 

I'm not asking about flexibility, only about indexing performance.
I know that I have to index in parallel (initial data is about 150 million
pages with more than 1 TByte).
Now I'm thinking about what I have to take into consideration when building
the merge tool.
Then I saw the code of IndexMergeTool I was astonished about the hardcoded
use of SimpleAnalyzer and why one uses an anylzer at all. Therefore my
questions.

> I have a hard time understanding the use-case
> you're trying to support. If you're trying to build a generic 
> front-end
> to allow parameterized Lucene index building, have you looked at
> SOLR, which uses XML configuration files to drive the indexing
> and searching process? (which I haven't used, but I'm tracking
> the user's group list.....).

No the frontend just provides a textbox where the user can type in a text
like "foo*".

The query is then executed against some un_tokenized fields (fixed
parameters for the current user like company etc.) and against this single
tokenized field.
I want to filter on these fixed fields too, to reduce the number of hits for
the fulltext query. I think this is the right approach to achieve a better
search performance. Isn't it?

Thank you!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 13:32:51 2008
Return-Path: <java-user-return-31986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98599 invoked from network); 15 Jan 2008 13:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 13:32:51 -0000
Received: (qmail 9991 invoked by uid 500); 15 Jan 2008 13:32:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9954 invoked by uid 500); 15 Jan 2008 13:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9943 invoked by uid 99); 15 Jan 2008 13:32:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 05:32:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 13:32:19 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id E274115D41A
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 05:32:06 -0800 (PST)
Message-Id: <4FFEB95F-8240-41E5-B3F3-E86F29510DDA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0801150417o607b645frbfb4f927a5d8266a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: lucene as a graph store
Date: Tue, 15 Jan 2008 08:31:57 -0500
References: <1bcb7c7f0801150417o607b645frbfb4f927a5d8266a@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

I guess the question comes down to what kind of things are you going  
to do w/ this graph?  How often are you updating links, etc?  I can't  
say Lucene was designed for this kind of thing, but I am constantly  
amazed at what people use Lucene for, so I won't say it can't be  
done.  I don't know how efficient it would be for doing things like  
PageRank or other graph algorithms, but I would be interesting in  
hearing more about what you have in mind.

Lucene doesn't do much caching at the document level, but that is  
fairly easy to implement, but it does bring some terms, etc. into  
memory, and you may have a look at the FieldCache.

-Grant

On Jan 15, 2008, at 7:17 AM, Cam Bazz wrote:

> Hello;
>
> I like to use lucene as a graph store. The graph representation is a  
> list of
> edges. Consider the code below:
>
>        final int commitCount = 16 * 1024;
>        final int numObj =  1024 * 1024;
>
>        Analyzer analyzer = new KeywordAnalyzer();
>        FSDirectory directory = FSDirectory.getDirectory("c:\ 
> \LuceneAdd");
>        IndexWriter writer = new IndexWriter(directory, analyzer,  
> true);
>
>        Document doc;
>        long start = System.currentTimeMillis();
>
>        Random r = new Random(System.currentTimeMillis());
>
>        for(int i=0; i<numObj; i++) {
>            doc = new Document();
>            doc.add(new Field("srcKey", NumberTools.longToString(i),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>            doc.add(new Field("dstKey",
> NumberTools.longToString(r.nextInt(numObj)),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>            doc.add(new Field("linkKey",
> NumberTools.longToString(r.nextInt(16)),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>            doc.add(new Field("linkValue", NumberTools.longToString(
> r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));
>
>           writer.addDocument(doc);
>
>            if(i%commitCount==0) {
>                 long now = System.currentTimeMillis();
>                 System.out.println(i + ":" + (now-start));
>                 start = now;
>            }
>
>        }
>
>        writer.optimize();
>        writer.close();
>        directory.close();
>
>
> Basically I am adding a large number of documents from srcKey = i to  
> dstKey
> = random and two other string fields - linkKey and linkValue.
>
> Compared to a normal database store, or an oodbms such as perst or  
> db4o -
> lucene takes longer to index.
> However, it is much faster in searching, finding, retrieving records.
>
> I can make 16384 random lookups over 1Million entries in 0.8  
> seconds. This
> is excellent time. (I have been benchmarking for a long time)
>
> Typically, when number of objects in BTree based structure in an  
> oodbms for
> example increase, the search and add times also increase.
>
> Will lucene have the same problem and how can I overcome it if it  
> does.
> Looking at the above code - does anyone has any recomendations
> to improve index performance. (also what can I do to improve search
> performance)
>
> While searching with an indexsearcher - does lucene do any caching?  
> usually
> MRU caches are used to accomplish this.
>
> Any ideas,help,recomendations greatly appreciated.
>
> Best,
> -C.B.

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 13:38:32 2008
Return-Path: <java-user-return-31987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99615 invoked from network); 15 Jan 2008 13:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 13:38:31 -0000
Received: (qmail 17325 invoked by uid 500); 15 Jan 2008 13:38:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17290 invoked by uid 500); 15 Jan 2008 13:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17279 invoked by uid 99); 15 Jan 2008 13:38:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 05:38:15 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [68.142.200.236] (HELO smtp101.biz.mail.mud.yahoo.com) (68.142.200.236)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 13:38:01 +0000
Received: (qmail 89026 invoked from network); 15 Jan 2008 13:37:52 -0000
Received: from unknown (HELO apollo.hq.theatlantis.net) (aron@theatlantis.net@64.175.42.176 with plain)
  by smtp101.biz.mail.mud.yahoo.com with SMTP; 15 Jan 2008 13:37:51 -0000
X-YMail-OSG: kw_l8ycVM1n0wPvOhK0qTe5ly6.kAGTNHpapo5iCFsjXPrk74Hby6J3QDsZM9gnnWc5qoO8nmbR7dwBnbhK5Zw3KT_vj7ZnwfH8hLpFGV5.B.q7T3flqSBxlJ_3Zkw--
Message-ID: <478CB72D.1030902@theatlantis.net>
Date: Tue, 15 Jan 2008 05:37:49 -0800
From: Aron Sogor <aron@theatlantis.net>
User-Agent: Thunderbird 2.0.0.9 (Macintosh/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sort does not work for me
References: <478AA7B0.8050803@theatlantis.net> <478C2B6C.5040506@theatlantis.net>
In-Reply-To: <478C2B6C.5040506@theatlantis.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Lucky guy who gets the same problem.

Found the issue:
http://issues.apache.org/jira/browse/LUCENE-463

Lucene see numbrs in the field and thinks it is an int... than overflows 
the int.
Force the sort field to be a SortField.String.
Aron Sogor wrote:
> Let me qualify my question:
>
> Sort is not working for a field that I stored :
>
>           document.add(new Field(FIELD_RECEIVED, DateTools.timeToString(
>                   System.currentTimeMillis(), 
> DateTools.Resolution.SECOND),
>                   Field.Store.NO, Field.Index.UN_TOKENIZED));
>
> using the query bellow with sort:
> Sort sort = new Sort(FIELD_RECEIVED,true);
>
> even if I do reverse=false the order of the hits does not really 
> change. The question is why would that be. The dates are numbers that 
> even is sorted as strings should order the same, and reverse should work.
>
> Aron
>
>
>
> Aron Sogor wrote:
>> Here is the document:
>>
>>            MimeMessage mime = new MimeMessage(null, new 
>> FileInputStream(item
>>                    .getMailFile()));
>>            document.add(new Field(FIELD_MAILID, 
>> item.getMailId().toString(),
>>                    Field.Store.YES, Field.Index.UN_TOKENIZED));
>>            document.add(new Field(FIELD_SUBJECT, mime.getSubject(),
>>                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
>>            document.add(new Field(FIELD_FROM, 
>> getAddressLine(mime.getFrom()),
>>                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
>>            document.add(new Field(FIELD_BODY, getContentReader(mime
>>                    .getContent())));
>>            document.add(new Field(FIELD_RECEIVED, 
>> DateTools.timeToString(
>>                    System.currentTimeMillis(), 
>> DateTools.Resolution.SECOND),
>>                    Field.Store.NO, Field.Index.UN_TOKENIZED));
>>            document.add(new Field(FIELD_TAG, TAG_INBOX, Field.Store.YES,
>>                    Field.Index.TOKENIZED));
>>            return document;
>>
>> here is the search:
>>
>>    public static Hits createInboxQuery(IndexSearcher searcher)
>>            throws ParseException, IOException {
>>        Query query = new QueryParser(FIELD_TAG, new StandardAnalyzer())
>>                .parse(TAG_INBOX);
>>        Sort sort = new Sort(FIELD_RECEIVED,true);
>>        return searcher.search(query, sort);
>>    }
>>
>>            IndexSearcher searcher = 
>> storage.getIndexSearcherForMailBox("junk");
>>            Hits hits = 
>> DocumentAndQueryFactory.createInboxQuery(searcher);
>>            for (int i = 0; i < hits.length(); i++) {
>>                Document hit = (Document) hits.doc(i);
>>                
>> System.out.println(hit.getField("subject").stringValue());
>>
>>
>> No matter what I do when I lit the hits they come back (these are the 
>> subjects/ but essentially same timestamp):
>>
>> Test MSGSun Jan 13 15:52:47 PST 2008
>> Test MSGSun Jan 13 15:52:54 PST 2008
>> Test MSGSun Jan 13 15:53:03 PST 2008
>> Test MSGSun Jan 13 15:53:12 PST 2008
>> Test MSGSun Jan 13 15:53:48 PST 2008
>>
>> Setting the "revert" for the search Sort essentially has no effect. I 
>> perhaps very much missing something... but what?
>>
>> Aron
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 13:41:21 2008
Return-Path: <java-user-return-31988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 245 invoked from network); 15 Jan 2008 13:41:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 13:41:21 -0000
Received: (qmail 20415 invoked by uid 500); 15 Jan 2008 13:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20387 invoked by uid 500); 15 Jan 2008 13:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20373 invoked by uid 99); 15 Jan 2008 13:41:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 05:41:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.22 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 13:40:40 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0FDejlp098765
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 14:40:45 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <8E3E394F-3139-4BFC-A68B-7F0C87CEF658@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <14809197.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: spell checking for combined words
Date: Tue, 15 Jan 2008 14:40:44 +0100
References: <14809197.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


14 jan 2008 kl. 19.47 skrev solr_user:

> Does Lucene spell checker have the ability to suggest splitting of  
> combined
> words.  So for e.g. if I have got the word "apple" and "computer" in  
> my
> index and if I type "applecomputer" then how can I make it suggest
> "apple computer"


It would probably be very expensive to analyze each query token and  
decompose it using some word list or index.

If "apple computer" is a phrase that is common in your query, then you  
can create a new field with chained tokens: "think diffrent apple  
computer" -> "thinkdiffrent diffrentapple applecomputer". This would  
at least allow you to search for such typos. You might want to set  
some threadholds like min/max token size and such in your TokenFilter.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 13:50:47 2008
Return-Path: <java-user-return-31989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4300 invoked from network); 15 Jan 2008 13:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 13:50:47 -0000
Received: (qmail 38582 invoked by uid 500); 15 Jan 2008 13:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38532 invoked by uid 500); 15 Jan 2008 13:50:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38520 invoked by uid 99); 15 Jan 2008 13:50:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 05:50:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.225 as permitted sender)
Received: from [72.14.214.225] (HELO hu-out-0506.google.com) (72.14.214.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 13:50:04 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1049008hub.15
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 05:50:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xE47BUD79ATQzjr/QjhY2O27psnd5UeJz/Q5YqmYZMs=;
        b=oCa62exGDT2WmuDmmJH0ENuDUxLsLPp8OV6l6I6Z/Oehph4dpvAOtmLjNDRlMUSp83ALPtloB3gpdiJaF5cdXjCoS6NCEqATKVjlPkermDS9rkV0Yejc9g3LfiDPaEEd5AVV9jaSiHZO50GC3vecFeK8kLwVlIEWHlUymtY/oPo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=X3nB/wY8khN0MKJmWB6qjy/pVbOB07/5HtTtxn/64ySNaP/LAS/2QEIe7TOtCNgOBNjW+bqa97yFAlDAkx0SQu70bEQ1G7IhRQSPeqLaqDYa3hheCHOaFAGiS1u5nwbkFQSjimeDuTI9/aZwgJ87xgVQ9rO8X2WB7xWqyW1VVZs=
Received: by 10.82.162.14 with SMTP id k14mr13119737bue.32.1200405007341;
        Tue, 15 Jan 2008 05:50:07 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 15 Jan 2008 05:50:07 -0800 (PST)
Message-ID: <1bcb7c7f0801150550s757b19b8q90f206df3af0c03@mail.gmail.com>
Date: Tue, 15 Jan 2008 15:50:07 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene as a graph store
In-Reply-To: <4FFEB95F-8240-41E5-B3F3-E86F29510DDA@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13822_22281326.1200405007328"
References: <1bcb7c7f0801150417o607b645frbfb4f927a5d8266a@mail.gmail.com>
	 <4FFEB95F-8240-41E5-B3F3-E86F29510DDA@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13822_22281326.1200405007328
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Usually for implementing things like page rank, or doing centrality metric
calculations or maybe dijkstras shortest term, this kind of (list of edges)
graph is not best at performance.
I like to use lucene for simple operations like neighboors of this node, or
2 degree neighboors of this node.

is updating an index costly operation in lucene? I dont think there will too
much updates, but rather deletes.

when I delete documents from an index what things should I be careful about.

Best.
-C.B.



On Jan 15, 2008 3:31 PM, Grant Ingersoll <gsingers@apache.org> wrote:

> I guess the question comes down to what kind of things are you going
> to do w/ this graph?  How often are you updating links, etc?  I can't
> say Lucene was designed for this kind of thing, but I am constantly
> amazed at what people use Lucene for, so I won't say it can't be
> done.  I don't know how efficient it would be for doing things like
> PageRank or other graph algorithms, but I would be interesting in
> hearing more about what you have in mind.
>
> Lucene doesn't do much caching at the document level, but that is
> fairly easy to implement, but it does bring some terms, etc. into
> memory, and you may have a look at the FieldCache.
>
> -Grant
>
> On Jan 15, 2008, at 7:17 AM, Cam Bazz wrote:
>
> > Hello;
> >
> > I like to use lucene as a graph store. The graph representation is a
> > list of
> > edges. Consider the code below:
> >
> >        final int commitCount = 16 * 1024;
> >        final int numObj =  1024 * 1024;
> >
> >        Analyzer analyzer = new KeywordAnalyzer();
> >        FSDirectory directory = FSDirectory.getDirectory("c:\
> > \LuceneAdd");
> >        IndexWriter writer = new IndexWriter(directory, analyzer,
> > true);
> >
> >        Document doc;
> >        long start = System.currentTimeMillis();
> >
> >        Random r = new Random(System.currentTimeMillis());
> >
> >        for(int i=0; i<numObj; i++) {
> >            doc = new Document();
> >            doc.add(new Field("srcKey", NumberTools.longToString(i),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> >            doc.add(new Field("dstKey",
> > NumberTools.longToString(r.nextInt(numObj)),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> >            doc.add(new Field("linkKey",
> > NumberTools.longToString(r.nextInt(16)),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> >            doc.add(new Field("linkValue", NumberTools.longToString(
> > r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));
> >
> >           writer.addDocument(doc);
> >
> >            if(i%commitCount==0) {
> >                 long now = System.currentTimeMillis();
> >                 System.out.println(i + ":" + (now-start));
> >                 start = now;
> >            }
> >
> >        }
> >
> >        writer.optimize();
> >        writer.close();
> >        directory.close();
> >
> >
> > Basically I am adding a large number of documents from srcKey = i to
> > dstKey
> > = random and two other string fields - linkKey and linkValue.
> >
> > Compared to a normal database store, or an oodbms such as perst or
> > db4o -
> > lucene takes longer to index.
> > However, it is much faster in searching, finding, retrieving records.
> >
> > I can make 16384 random lookups over 1Million entries in 0.8
> > seconds. This
> > is excellent time. (I have been benchmarking for a long time)
> >
> > Typically, when number of objects in BTree based structure in an
> > oodbms for
> > example increase, the search and add times also increase.
> >
> > Will lucene have the same problem and how can I overcome it if it
> > does.
> > Looking at the above code - does anyone has any recomendations
> > to improve index performance. (also what can I do to improve search
> > performance)
> >
> > While searching with an indexsearcher - does lucene do any caching?
> > usually
> > MRU caches are used to accomplish this.
> >
> > Any ideas,help,recomendations greatly appreciated.
> >
> > Best,
> > -C.B.
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13822_22281326.1200405007328--

From java-user-return-31990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 14:32:26 2008
Return-Path: <java-user-return-31990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24430 invoked from network); 15 Jan 2008 14:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 14:32:26 -0000
Received: (qmail 14744 invoked by uid 500); 15 Jan 2008 14:32:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14389 invoked by uid 500); 15 Jan 2008 14:32:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14190 invoked by uid 99); 15 Jan 2008 14:32:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 06:32:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cambazz@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 14:31:56 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2925076fga.27
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 06:31:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=T9RtR/NFR6X7e/MuUxBzkorVjzMZ3L6qg/3qYIvJErw=;
        b=wLvrhOO920kZ0oY9WrzqjIEEWRP5j+D66+GvGtuDFr/t2oZ1d/kuMh3noZerQmTM2KeUhvWWaQZ8EG6+OmHYL4cjdjXRmqkHPQWTgfjUixPCjiUZhoavd1x5TndzxBKCJU3Z7TDFHau3Z9miqUSj4QLFlgIpJwCiJJHI67RZFXY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=atafYbLrsQblTApywZME1v5JdwXssm8v5rqKUYlHH7+13oUjzZqnxWfCFtqSAqsCboAUYPyuQGVE5MewYZewSGK6jtKzo9HoKRQiHrlz47V/ae4mqCg4+gq1Ub77kuUe1piIQtiIAM7QGxf35Rf4eDvHxZ1RHSxLJ6R5bOEEvag=
Received: by 10.82.145.7 with SMTP id s7mr13250122bud.7.1200407508062;
        Tue, 15 Jan 2008 06:31:48 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 15 Jan 2008 06:31:48 -0800 (PST)
Message-ID: <1bcb7c7f0801150631g535decebtd8dac1ac833eb198@mail.gmail.com>
Date: Tue, 15 Jan 2008 16:31:48 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexWriter.DISABLE_AUTO_FLUSH
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13964_4640045.1200407508058"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13964_4640045.1200407508058
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello;

Has the IndexWriter.DISABLE_AUTO_FLUSH been depreceated?
I am using lucene core 2.2.0 and although it is in the documentation I can
not access IndexWriter.DISABLE_AUTO_FLUSH

Best,
C.B.

------=_Part_13964_4640045.1200407508058--

From java-user-return-31991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 14:47:52 2008
Return-Path: <java-user-return-31991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30235 invoked from network); 15 Jan 2008 14:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 14:47:52 -0000
Received: (qmail 44960 invoked by uid 500); 15 Jan 2008 14:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44929 invoked by uid 500); 15 Jan 2008 14:47:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44917 invoked by uid 99); 15 Jan 2008 14:47:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 06:47:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 14:47:10 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2930902fga.27
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 06:47:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=lzYjhkp2jbM3jCaeff1dEvyb5NsYMb9kYPuNh2vX/U4=;
        b=p1kDw9s6zP1Anpvlubh51VTgKZ+BlJiY0plbaCAiLrIbRiHMSxPzaoRrlN02MWtX1RULNwhQfgAZ1Nuv3G04Ziq4IwFuW6l2N+/hlTYNuyVlzhu+rwLi3AmGv0XgoFa2lrlXNFFGhWZYcTCDl5SKj87kqT3KYUDaOR2k81hY7LI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hPQKr9ARoUyM3x9GD8OYQMlt3QI6IsVfr4MMrlDFXfdF6Q0lyUU2CE3G6dr9++sJ9TmV9H6CtbXhLTVzXp+6f2bCukIs0wWWkAktFfL00Hx9TdGxam/MhOrKAeLRyZJffe/qhZCswaR3SVDb4vyCciJSVAHsu8hX/a6B3jhXRcY=
Received: by 10.82.145.7 with SMTP id s7mr13272271bud.6.1200408434749;
        Tue, 15 Jan 2008 06:47:14 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 15 Jan 2008 06:47:14 -0800 (PST)
Message-ID: <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com>
Date: Tue, 15 Jan 2008 09:47:14 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How?
In-Reply-To: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14273_30241567.1200408434737"
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14273_30241567.1200408434737
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You really have to tell us more about what you're trying to do
to get a meaningful reply.

What do you mean you create the index on a table? Are you
using some sort of embedded SQL to query the table then
creat a lucene index? How big is the index? What search
are you submitting? What does your search code look like?

Best
Erick

On Jan 14, 2008 10:47 PM, coolgeng coolgeng <coolgeng410@gmail.com> wrote:

> Hi guys,
>     Some problems confuse me. When I would like to index some data from a
> table in database. While I create the index on this table, the  searching
> job keeps going . How can I work out it?
> By the way, the number of data is around 1 hundred million.
>
> --
> Best Regards
> Cooper Geng
>

------=_Part_14273_30241567.1200408434737--

From java-user-return-31992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 14:58:04 2008
Return-Path: <java-user-return-31992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33638 invoked from network); 15 Jan 2008 14:58:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 14:58:04 -0000
Received: (qmail 67291 invoked by uid 500); 15 Jan 2008 14:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67255 invoked by uid 500); 15 Jan 2008 14:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67244 invoked by uid 99); 15 Jan 2008 14:57:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 06:57:48 -0800
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=SPF_PASS,TRACKER_ID
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ksmster@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 14:57:32 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2934481fga.27
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 06:57:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        bh=oSfjLjG4U68Sj/w3PUn7eVhzvXjpiUkJjRd2Ll7mIZg=;
        b=VwVD7WFJZoFgmCpK17ZP4Kb3pTN2dMjUUF0Wb4y8S3fknXOo8hkRoKZ4PGNURQyCE0m4vovy4QlQUG/PTOLnIazl0pCM1raOtK7vHbDcg/XF9Z5tqwK1bq6jQmeYRpX1rHL0r5INm4+K95Iz53lpOdF5e3yMzqZqidoJXR+CFfw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        b=nPTdDfi6IcWThzknrmS8pyd6ErsBkq35zMUoqc3bLs9ay2O6zJ+wCy7qnVlYrCRD++9udEmCsjPp71RvSbWahUlWU7YnuYWxQn2tSTt3Hqj+m3Wqu4bKfh1ritVF9t4v4Pw9XDsV3NJ+vCxUagC19r2eVAPh52qRjuK26t6rgpM=
Received: by 10.82.140.20 with SMTP id n20mr13260547bud.27.1200409044771;
        Tue, 15 Jan 2008 06:57:24 -0800 (PST)
Received: from sj-desktop ( [92.112.23.117])
        by mx.google.com with ESMTPS id j9sm25412848mue.6.2008.01.15.06.57.22
        (version=SSLv3 cipher=OTHER);
        Tue, 15 Jan 2008 06:57:24 -0800 (PST)
Date: Tue, 15 Jan 2008 16:57:17 +0200
To: "Lucene user list" <java-user@lucene.apache.org>
Subject: generate-maven-artifacts
From: "Sergey Kabashnyuk" <ksmster@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.t4y7trtpt27j83@sj-desktop>
User-Agent: Opera Mail/9.25 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.
I try to build mavan artifacts using from tags/lucene_2_2_0.
By calling "ant generate-maven-artifacts"

But BUILD FAILED
/java/src/lucene/svn/java/tags/lucene_2_2_0/build.xml:366: The following
error occurred while executing this line:
/java/src/lucene/svn/java/tags/lucene_2_2_0/common-build.xml:200:
localRepository doesn't support the "location" attribute

Can you help me?

Sergey Kabashnyuk.
-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 15:06:38 2008
Return-Path: <java-user-return-31993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99890 invoked from network); 15 Jan 2008 15:06:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 15:06:37 -0000
Received: (qmail 84814 invoked by uid 500); 15 Jan 2008 15:06:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84138 invoked by uid 500); 15 Jan 2008 15:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84118 invoked by uid 99); 15 Jan 2008 15:06:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 07:06:20 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.35] (HELO smtp5-g19.free.fr) (212.27.42.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 15:05:54 +0000
Received: from smtp5-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp5-g19.free.fr (Postfix) with ESMTP id AB3CC3F6153
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 16:05:56 +0100 (CET)
Received: from sophia (gra94-5-82-227-146-101.fbx.proxad.net [82.227.146.101])
	by smtp5-g19.free.fr (Postfix) with ESMTP id 4899E3F6194
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 16:05:56 +0100 (CET)
From: =?iso-8859-1?Q?Dominique_B=E9jean?= <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Subject: issue sorting results by string field
Date: Tue, 15 Jan 2008 16:05:52 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001A_01C85790.811A7100"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AchXiBxpotWOU9laToO7eWckV9WgaQ==
Message-Id: <20080115150556.4899E3F6194@smtp5-g19.free.fr>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001A_01C85790.811A7100
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I need to sort my search results by descending publication date.

=20

To do this, I added a field like this in all documents=20

=20

doc.add(new Field("pubdate", date, Field.Store.YES,
Field.Index.UN_TOKENIZED));

=20

Where date contains string formatted in this way =93yyyymmddhhmmss =93

=20

Searches are executed like this=20

=20

hits =3D searcher.search(booleanQuery, new Sort("pubdate", true));

=20

Here is a example of result output for the date field. We can see that =
the
result is not sorted neither ascending, neither descending.

=20

20080114190000

20080114225500

20080114232900

20080114235700

20080115102800

20080115100600

20080115124639

20080115124100

20080115131700

20080115131900

20080112000100

20080112001700

20080112001900

20080112074400

20080112080000

20080112082000

=20

=20

What can be the problem ? Where am I wrong ?

=20

Thank you by advance.

=20

dominique


------=_NextPart_000_001A_01C85790.811A7100--


From java-user-return-31994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 15:10:38 2008
Return-Path: <java-user-return-31994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6440 invoked from network); 15 Jan 2008 15:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 15:10:38 -0000
Received: (qmail 91708 invoked by uid 500); 15 Jan 2008 15:10:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91687 invoked by uid 500); 15 Jan 2008 15:10:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91676 invoked by uid 99); 15 Jan 2008 15:10:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 07:10:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 15:10:08 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1425984wxd.20
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 07:09:58 -0800 (PST)
Received: by 10.142.112.5 with SMTP id k5mr3140928wfc.57.1200409797994;
        Tue, 15 Jan 2008 07:09:57 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 43sm13268315wri.3.2008.01.15.07.09.57
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 15 Jan 2008 07:09:57 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801150631g535decebtd8dac1ac833eb198@mail.gmail.com>
References: <1bcb7c7f0801150631g535decebtd8dac1ac833eb198@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <90F5EB4D-4C0F-46B4-87B7-B1A26A22F166@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexWriter.DISABLE_AUTO_FLUSH
Date: Tue, 15 Jan 2008 10:10:11 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

This option is new in the soon-to-be-released 2.3 version of Lucene  
(not present in 2.2.0).

Mike

Cam Bazz wrote:

> Hello;
>
> Has the IndexWriter.DISABLE_AUTO_FLUSH been depreceated?
> I am using lucene core 2.2.0 and although it is in the  
> documentation I can
> not access IndexWriter.DISABLE_AUTO_FLUSH
>
> Best,
> C.B.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 15:56:13 2008
Return-Path: <java-user-return-31995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38409 invoked from network); 15 Jan 2008 15:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 15:56:13 -0000
Received: (qmail 99750 invoked by uid 500); 15 Jan 2008 15:55:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99720 invoked by uid 500); 15 Jan 2008 15:55:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99709 invoked by uid 99); 15 Jan 2008 15:55:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 07:55:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 15:55:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2952586fga.27
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 07:55:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=HC6Wh/XuNMP5/pHl+5gzdZ504jPtYjk5lBXzRwGr9W0=;
        b=u+wx+unvEky9Vv5ep9v6pWzU0RbOI3fQCk7yQYkPzWdOlhaEumRW24smJUtrU6lCJ9K2205Dn4SUuAPZhgXfzwl0uWxbB7yW9TYM6KFYnraUN21OGOMO17lZh6GOAcdFCEYuqtmwoqqqhU7AHvg74lQJJMm1TN05yXEVgYtsWFQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=V2AHWTgrDRdGHMR19sXVZSkjBUhndKmVQKaiG1ek7nKAi6xqYFQeCY+QPB95hE4cNEM92kkdF+ZT6YVZ7VjC8InPS0qqlp3piT9jIi6Bx7nU9/a6LzJi/MTwvRhGA0QcZYBCyCiQ1NVmb3buy5k2lAJ3UNzMu+dl2tv+VCDUUW8=
Received: by 10.82.138.6 with SMTP id l6mr13392673bud.13.1200412535911;
        Tue, 15 Jan 2008 07:55:35 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 15 Jan 2008 07:55:35 -0800 (PST)
Message-ID: <1bcb7c7f0801150755n64d49f0s74ac6834d06ade95@mail.gmail.com>
Date: Tue, 15 Jan 2008 17:55:35 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexWriter.optimize()
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14317_4308189.1200412535910"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14317_4308189.1200412535910
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,
I have been running some experiments on lucene. To speed up index time, I
have disabled autocommit,
and I flush the indexwriter each 512 objects. So far I have tried with
256,512,1024,and 2048 and I have seen a really incredible speed difference
indexing.

However, if I the time required to run optimize() at the end has increased
too. So I have been running some more experiments to optimize the index
every 512*4, 512*8, etc. but I have not been able to find a sweet spot.

Could someone give me some insight on the optimize. Should I run it
incrementally while indexing or should I run it  at the end. If I run it
incrementally, is it better to run it often or not?

Best,
-C.B.

------=_Part_14317_4308189.1200412535910--

From java-user-return-31996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:13:22 2008
Return-Path: <java-user-return-31996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51667 invoked from network); 15 Jan 2008 16:13:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:13:22 -0000
Received: (qmail 55860 invoked by uid 500); 15 Jan 2008 16:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55829 invoked by uid 500); 15 Jan 2008 16:13:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55818 invoked by uid 99); 15 Jan 2008 16:13:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:13:04 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 16:12:39 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: generate-maven-artifacts
Date: Tue, 15 Jan 2008 11:12:03 -0500
Message-ID: <9294E20AED46934EA459020706463F9466464F@SUEXCL-02.ad.syr.edu>
In-Reply-To: <op.t4y7trtpt27j83@sj-desktop>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: generate-maven-artifacts
Thread-Index: AchXhwsODkoWfV+OSRaGBn3E2InMCQAB7GjA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgU2VyZ2V5LA0KDQpPbiAwMS8xNS8yMDA4IGF0IDk6NTcgQU0sIFNlcmdleSBLYWJhc2hueXVr
IHdyb3RlOg0KPiBIaSBhbGwuDQo+IEkgdHJ5IHRvIGJ1aWxkIG1hdmFuIGFydGlmYWN0cyB1c2lu
ZyBmcm9tIHRhZ3MvbHVjZW5lXzJfMl8wLg0KPiBCeSBjYWxsaW5nICJhbnQgZ2VuZXJhdGUtbWF2
ZW4tYXJ0aWZhY3RzIg0KPiANCj4gQnV0IEJVSUxEIEZBSUxFRA0KPiAvamF2YS9zcmMvbHVjZW5l
L3N2bi9qYXZhL3RhZ3MvbHVjZW5lXzJfMl8wL2J1aWxkLnhtbDozNjY6IFRoZSBmb2xsb3dpbmcN
Cj4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZXhlY3V0aW5nIHRoaXMgbGluZToNCj4gL2phdmEvc3Jj
L2x1Y2VuZS9zdm4vamF2YS90YWdzL2x1Y2VuZV8yXzJfMC9jb21tb24tYnVpbGQueG1sOjIwMDoN
Cj4gbG9jYWxSZXBvc2l0b3J5IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgImxvY2F0aW9uIiBhdHRyaWJ1
dGUNCg0KTWF2ZW4gYXJ0aWZhY3QgYnVpbGRpbmcgaGFzIGNoYW5nZWQgc2luY2UgdGhlbiAtIHNl
ZToNCg0KPGh0dHA6Ly9pc3N1ZXMuYXBhY2hlLm9yZy9qaXJhL2Jyb3dzZS9MVUNFTkUtOTM1Pg0K
DQpJbiBwYXJ0LCB0aGlzIGludm9sdmVkIHN3aXRjaGluZyBmcm9tIGluc3RhbGxpbmcgdG8gdGhl
IGxvY2FsIHJlcG9zaXRvcnkgdG8gZGVwbG95aW5nIHRvIGEgcmVtb3RlIHJlcG9zaXRvcnk7IHNl
ZSB0aGlzIGNvbG9yZWQgZGlmZiBmb3IgdGhlIGNoYW5nZSAoc3RhcnRpbmcgb24gbGluZSAjMjU2
KToNCg0KPGh0dHA6Ly9zdm4uYXBhY2hlLm9yZy92aWV3dmMvbHVjZW5lL2phdmEvdHJ1bmsvY29t
bW9uLWJ1aWxkLnhtbD9kaWZmX2Zvcm1hdD1oJnZpZXc9ZGlmZiZyMT01NDgwMTMmcjI9NjEyMTQw
I2wyNTU+DQoNCkEgcG90ZW50aWFsIHdvcmthcm91bmQ6IHRoZSBmb2xsb3dpbmcgQW50IFRhc2tz
IGJ1ZyBzZWVtcyB0byBpbmRpY2F0ZSB0aGF0IGlmIHlvdSBjaGFuZ2UgdGhlIG5hbWUgb2YgdGhl
ICJsb2NhdGlvbiIgYXR0cmlidXRlIHRvICJwYXRoIiBvbiB0aGUgPGxvY2FsUmVwb3NpdG9yeT4g
dGFnIGluIHRoZSAibTItZGVwbG95IiBtYWNybyBpbiBjb21tb24tYnVpbGQueG1sLCB0aGUgdGFz
ayBtaWdodCB3b3JrOg0KDQo8aHR0cDovL2ppcmEuY29kZWhhdXMub3JnL2Jyb3dzZS9NQU5UVEFT
S1MtNDQ+DQoNCkkuZS4sIHRyeSBjaGFuZ2luZyB0aGUgbGluZSB0aGF0IHJlYWRzOg0KDQogICA8
bG9jYWxSZXBvc2l0b3J5IGxvY2F0aW9uPSIke21hdmVuLmRpc3QuZGlyfSIvPg0KDQp0bzoNCg0K
ICAgPGxvY2FsUmVwb3NpdG9yeSBwYXRoPSIke21hdmVuLmRpc3QuZGlyfSIvPg0KDQpTdGV2ZQ0K


From java-user-return-31997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:19:18 2008
Return-Path: <java-user-return-31997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54624 invoked from network); 15 Jan 2008 16:19:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:19:14 -0000
Received: (qmail 68500 invoked by uid 500); 15 Jan 2008 16:18:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68468 invoked by uid 500); 15 Jan 2008 16:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68457 invoked by uid 99); 15 Jan 2008 16:18:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:18:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:18:43 +0000
Received: (qmail 57672 invoked by uid 60001); 15 Jan 2008 16:18:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=6vPTqyGFw5LvzNVrdoRQPNoivdAQKRJfiDbvVoTLLOau2RSotMPPCu3ZnzP5WOL0iStQwda5T7bnsjy8NEtWr7yFjUB7zGv65PhOUh7Wg8IWmaMd72sSA4m8mmsBe+7fphd9EOsYkmoyKjbZmDtyIWz9EY+CwpbwwPXEtLsKMrk=;
X-YMail-OSG: .i5CYosVM1mKaLPA3EecykF1rZU7dRxvyBP7rs93nxW28yoM.rpGjMqvRsAgRtXuvKxTGiDnHlsjqKqNrJynvDDV9poByh6kI6t1bxLNdmjDjLWJp1Rpw9IOrEjCB6..T4sjfXN6zAqdCI8-
Received: from [208.125.28.244] by web50307.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 08:18:35 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 08:18:35 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: issue sorting results by string field
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <385383.56598.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dominique,=0AI don't have the javadoc/source in front of me, but souldn't t=
hat be new Sort(new SortField(.....)) ?  I'm not sure if the underlying sor=
t implementation is smart enough to avoid re-doing the same work when you c=
all these constructors for *every* every search.  If it's not smart enough,=
 initialize them on domand and keep the Sort object around for reuse.=0A=0A=
Otis=0A--=0ASematext -- http://sematext.com/ -- Lucene - Solr - Nutch=0A=0A=
----- Original Message ----=0AFrom: Dominique B=C3=A9jean <dominique.bejean=
@eolya.fr>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, January 15, 2=
008 10:05:52 AM=0ASubject: issue sorting results by string field=0A=0AHi,=
=0A=0A =0A=0AI need to sort my search results by descending publication dat=
e.=0A=0A =0A=0ATo do this, I added a field like this in all documents =0A=
=0A =0A=0Adoc.add(new Field("pubdate", date, Field.Store.YES,=0AField.Index=
.UN_TOKENIZED));=0A=0A =0A=0AWhere date contains string formatted in this w=
ay =E2=80=9Cyyyymmddhhmmss =E2=80=9C=0A=0A =0A=0ASearches are executed like=
 this =0A=0A =0A=0Ahits =3D searcher.search(booleanQuery, new Sort("pubdate=
", true));=0A=0A =0A=0AHere is a example of result output for the date fiel=
d. We can see that=0A the=0Aresult is not sorted neither ascending, neither=
 descending.=0A=0A =0A=0A20080114190000=0A=0A20080114225500=0A=0A2008011423=
2900=0A=0A20080114235700=0A=0A20080115102800=0A=0A20080115100600=0A=0A20080=
115124639=0A=0A20080115124100=0A=0A20080115131700=0A=0A20080115131900=0A=0A=
20080112000100=0A=0A20080112001700=0A=0A20080112001900=0A=0A20080112074400=
=0A=0A20080112080000=0A=0A20080112082000=0A=0A =0A=0A =0A=0AWhat can be the=
 problem ? Where am I wrong ?=0A=0A =0A=0AThank you by advance.=0A=0A =0A=
=0Adominique=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:22:49 2008
Return-Path: <java-user-return-31998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55760 invoked from network); 15 Jan 2008 16:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:22:48 -0000
Received: (qmail 74230 invoked by uid 500); 15 Jan 2008 16:22:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73704 invoked by uid 500); 15 Jan 2008 16:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73693 invoked by uid 99); 15 Jan 2008 16:22:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:22:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:22:04 +0000
Received: (qmail 21620 invoked by uid 60001); 15 Jan 2008 16:22:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=KXnddoqEYTPUpCuwHv0i4zjv5KUOv/gWjn4xVwSExI/VEwIU5C/esKxjENckRJwUQF8LHwARrEP1xXgpsIENBP5C1GM0Ku4ECUPZgR+Ey+zu37rALKtltrFSdtQfeYQuL/oGBbnHgFHCjEvAeQWWiH7FoJ8YtgjVXZtlHDBixqU=;
X-YMail-OSG: dKkM5ikVM1k0UFFAOePeii1iOB_B07X.UqOTjIU5hLcvblqa7SeczAjv3jfa9Lf5Qu2Zer8rNYSSVCmn_BVfoxm66RhZ_1SHqGRp4aZhbjJ7_ty.0xJxMC0oZQprhCA78gOpU.gsjstTZxY-
Received: from [208.125.28.244] by web50304.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 08:22:08 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 08:22:08 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene as a graph store
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <184360.20318.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 

----- Original Message ----
From: Cam Bazz <cambazz@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, January 15, 2008 8:50:07 AM
Subject: Re: lucene as a graph store

Usually for implementing things like page rank, or doing centrality
 metric
calculations or maybe dijkstras shortest term, this kind of (list of
 edges)
graph is not best at performance.
I like to use lucene for simple operations like neighboors of this
 node, or
2 degree neighboors of this node.

OG: Neighbours of a node?  Can you tell us more about what you use and how you use Lucene in this context?

is updating an index costly operation in lucene? I dont think there
 will too
much updates, but rather deletes.

when I delete documents from an index what things should I be careful
 about.

OG: Note that deletes are not removed from the index/disk immediately.  Rather, their doc IDs are stored and those docs are skipped during searches.  If you have a large number of deletes, you may want to optimize the index, so that this list of doc IDs to skip doesn't cost you.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



On Jan 15, 2008 3:31 PM, Grant Ingersoll <gsingers@apache.org> wrote:

> I guess the question comes down to what kind of things are you going
> to do w/ this graph?  How often are you updating links, etc?  I can't
> say Lucene was designed for this kind of thing, but I am constantly
> amazed at what people use Lucene for, so I won't say it can't be
> done.  I don't know how efficient it would be for doing things like
> PageRank or other graph algorithms, but I would be interesting in
> hearing more about what you have in mind.
>
> Lucene doesn't do much caching at the document level, but that is
> fairly easy to implement, but it does bring some terms, etc. into
> memory, and you may have a look at the FieldCache.
>
> -Grant
>
> On Jan 15, 2008, at 7:17 AM, Cam Bazz wrote:
>
> > Hello;
> >
> > I like to use lucene as a graph store. The graph representation is
 a
> > list of
> > edges. Consider the code below:
> >
> >        final int commitCount = 16 * 1024;
> >        final int numObj =  1024 * 1024;
> >
> >        Analyzer analyzer = new KeywordAnalyzer();
> >        FSDirectory directory = FSDirectory.getDirectory("c:\
> > \LuceneAdd");
> >        IndexWriter writer = new IndexWriter(directory, analyzer,
> > true);
> >
> >        Document doc;
> >        long start = System.currentTimeMillis();
> >
> >        Random r = new Random(System.currentTimeMillis());
> >
> >        for(int i=0; i<numObj; i++) {
> >            doc = new Document();
> >            doc.add(new Field("srcKey", NumberTools.longToString(i),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> >            doc.add(new Field("dstKey",
> > NumberTools.longToString(r.nextInt(numObj)),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> >            doc.add(new Field("linkKey",
> > NumberTools.longToString(r.nextInt(16)),
> > Field.Store.YES, Field.Index.UN_TOKENIZED));
> >            doc.add(new Field("linkValue", NumberTools.longToString(
> > r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));
> >
> >           writer.addDocument(doc);
> >
> >            if(i%commitCount==0) {
> >                 long now = System.currentTimeMillis();
> >                 System.out.println(i + ":" + (now-start));
> >                 start = now;
> >            }
> >
> >        }
> >
> >        writer.optimize();
> >        writer.close();
> >        directory.close();
> >
> >
> > Basically I am adding a large number of documents from srcKey = i
 to
> > dstKey
> > = random and two other string fields - linkKey and linkValue.
> >
> > Compared to a normal database store, or an oodbms such as perst or
> > db4o -
> > lucene takes longer to index.
> > However, it is much faster in searching, finding, retrieving
 records.
> >
> > I can make 16384 random lookups over 1Million entries in 0.8
> > seconds. This
> > is excellent time. (I have been benchmarking for a long time)
> >
> > Typically, when number of objects in BTree based structure in an
> > oodbms for
> > example increase, the search and add times also increase.
> >
> > Will lucene have the same problem and how can I overcome it if it
> > does.
> > Looking at the above code - does anyone has any recomendations
> > to improve index performance. (also what can I do to improve search
> > performance)
> >
> > While searching with an indexsearcher - does lucene do any caching?
> > usually
> > MRU caches are used to accomplish this.
> >
> > Any ideas,help,recomendations greatly appreciated.
> >
> > Best,
> > -C.B.
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:25:40 2008
Return-Path: <java-user-return-31999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56474 invoked from network); 15 Jan 2008 16:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:25:40 -0000
Received: (qmail 79459 invoked by uid 500); 15 Jan 2008 16:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79221 invoked by uid 500); 15 Jan 2008 16:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79210 invoked by uid 99); 15 Jan 2008 16:25:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:25:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:24:57 +0000
Received: (qmail 23621 invoked by uid 60001); 15 Jan 2008 16:25:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=kkkR6lXo4L88evdoTyPxsH3k7RiYohclVcs/aghDrUQrLmhJa0eMvUmk5EMY9AH7CDxqfN31tFGbHXq0kANlXad9eCuYt/OCqIOrAHFPnQ4Fynasm2pVjaV2AiYcjOsWa6kzaVM6jjmyLY8zy+0OgxNvcgg/d2YMPeifaUE1C4k=;
X-YMail-OSG: YvWZ1ucVM1ntnKMcjOX2254gH83gaPd1gJVQ162x50hDZomcDsGJPfwY9l14VSHqkkX5M0Rd4eWeV63neSnmAYPDP.LDUPVWaZw3VXVmuWjuXTwEcKwZZ3CKjO0XaDfEJUCBbZ13uXMiJZ0-
Received: from [208.125.28.244] by web50304.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 08:25:02 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 08:25:02 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: spell checking for combined words
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <384377.21133.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
If some mispellings are very common, you could also turn them into synonyms.  I have not tried finding any information about this, but I *think* Google may be doing that.  I run a social service called Simpy at simpy.com and have Google Alerts for "simpy", but those alerts often contain matches on "simply".  So Google must account for people often misspelling the word "simply" as "simpy" and using synonyms is one way to handle this.  Look at the synonym stuff in Lucene in Action or even Solr for for to implement this type of stuff.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, January 15, 2008 8:40:44 AM
Subject: Re: spell checking for combined words


14 jan 2008 kl. 19.47 skrev solr_user:

> Does Lucene spell checker have the ability to suggest splitting of  
> combined
> words.  So for e.g. if I have got the word "apple" and "computer" in
  
> my
> index and if I type "applecomputer" then how can I make it suggest
> "apple computer"


It would probably be very expensive to analyze each query token and  
decompose it using some word list or index.

If "apple computer" is a phrase that is common in your query, then you
  
can create a new field with chained tokens: "think diffrent apple  
computer" -> "thinkdiffrent diffrentapple applecomputer". This would  
at least allow you to search for such typos. You might want to set  
some threadholds like min/max token size and such in your TokenFilter.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:34:33 2008
Return-Path: <java-user-return-32000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65746 invoked from network); 15 Jan 2008 16:34:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:34:33 -0000
Received: (qmail 4674 invoked by uid 500); 15 Jan 2008 16:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4248 invoked by uid 500); 15 Jan 2008 16:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4237 invoked by uid 99); 15 Jan 2008 16:34:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:34:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of TobiasLohr@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:34:03 +0000
Received: (qmail 12001 invoked by uid 0); 15 Jan 2008 16:33:56 -0000
Received: from 217.7.220.55 by www166.gmx.net with HTTP;
 Tue, 15 Jan 2008 17:33:56 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Tue, 15 Jan 2008 17:33:56 +0100
From: "Tobias Lohr" <TobiasLohr@gmx.de>
Message-ID: <20080115163356.307880@gmx.net>
MIME-Version: 1.0
Subject: Integrating dynamic data into Lucene search/ranking
To: java-user@lucene.apache.org
X-Authenticated: #1677435
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX18YR3QR4wkYSy+dHES8mGoRjkX8/sl6LFdA1Pzmgg
 MpGFTrTgomJTRigsYkWoNUfbP/pBy5yby32A== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: FYn5dHBNODB6KBH5amRMzGY9Ji9SWtJI
X-Virus-Checked: Checked by ClamAV on apache.org

I have a more architectural question, which is maybe sort of off topic, but as I want to implement it using Java  and Lucene, it's the right forum however:

I'm thinking of an approach to design a system that integrates dynamic information into a search (and a ranking) functionality using Lucene. With dynamic data I mean, data which changes very often within the typical index rebuild cycle, i.e. transactional data.

A good example is the sorting of products in an online store by product availability.

Does anybody know good reading resources (approaches, whitepapers, books etc.) for integrating such dynamic information into a search/ranking functionality?

(I already searched at Google, but couldn't find anything useful though.)

Thanks in advance!
-- 
Psssst! Schon vom neuen GMX MultiMessenger gehrt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger?did=10

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:35:17 2008
Return-Path: <java-user-return-32001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66320 invoked from network); 15 Jan 2008 16:35:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:35:17 -0000
Received: (qmail 7343 invoked by uid 500); 15 Jan 2008 16:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7310 invoked by uid 500); 15 Jan 2008 16:35:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7295 invoked by uid 99); 15 Jan 2008 16:35:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:35:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.237 as permitted sender)
Received: from [72.14.214.237] (HELO hu-out-0506.google.com) (72.14.214.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 16:34:34 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1075193hub.15
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 08:34:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=pda3SfGFgr0cAg/i6kjrROWOnH8ODOMKeHrZD6KxnTs=;
        b=Mlkqr1VQDYRBbEAdJfExmy9TpVpWAbhfXokk82NtmMgOL2l+FAZehl8nG3a5108+2jah7h5AKIG3oUTKH9ueMzF82U6Xng1ixHsepWJ68GIX/CFWtad60Xd42/AorCx/+qsYv85zSvVF/f1Auy42WW+HoTp5+crVYEHaze53Mtw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=otogly2zN8TeFSO84Q2z/L2f4fknmuTKqx81yMK+C1sNna48lCEmc0SjnFBDL7QPEKnDu/85lcohlmgALyxSHTHxGcpSzLbBkplwVfEAykO/y0CjWdbyzZ4UOhclOj+21drpTRTH1/OWC25lshJG1v4rTJC7nAa/c5rFouqeXp4=
Received: by 10.82.184.2 with SMTP id h2mr13455635buf.22.1200414860356;
        Tue, 15 Jan 2008 08:34:20 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 15 Jan 2008 08:34:20 -0800 (PST)
Message-ID: <1bcb7c7f0801150834k3db7e4cejc51ead071e37450c@mail.gmail.com>
Date: Tue, 15 Jan 2008 18:34:20 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene as a graph store
In-Reply-To: <184360.20318.qm@web50304.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14428_29637918.1200414860352"
References: <184360.20318.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14428_29637918.1200414860352
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well lets say I have a list representation of a graph like

src:1 dst:2
src:2 dst:3
src:1 dst 3

outgoingEdgesOf(1) returns 2 and 3.
incomingEdgesOf(3) returns 1 and 2.

in a lucene index it does work out nice with term queries. I can search for
incoming outgoing or edgeExist with a boolean term query.

Best.


On Jan 15, 2008 6:22 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Hi,
>
>
> ----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 15, 2008 8:50:07 AM
> Subject: Re: lucene as a graph store
>
> Usually for implementing things like page rank, or doing centrality
>  metric
> calculations or maybe dijkstras shortest term, this kind of (list of
>  edges)
> graph is not best at performance.
> I like to use lucene for simple operations like neighboors of this
>  node, or
> 2 degree neighboors of this node.
>
> OG: Neighbours of a node?  Can you tell us more about what you use and how
> you use Lucene in this context?
>
> is updating an index costly operation in lucene? I dont think there
>  will too
> much updates, but rather deletes.
>
> when I delete documents from an index what things should I be careful
>  about.
>
> OG: Note that deletes are not removed from the index/disk immediately.
>  Rather, their doc IDs are stored and those docs are skipped during
> searches.  If you have a large number of deletes, you may want to optimize
> the index, so that this list of doc IDs to skip doesn't cost you.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> On Jan 15, 2008 3:31 PM, Grant Ingersoll <gsingers@apache.org> wrote:
>
> > I guess the question comes down to what kind of things are you going
> > to do w/ this graph?  How often are you updating links, etc?  I can't
> > say Lucene was designed for this kind of thing, but I am constantly
> > amazed at what people use Lucene for, so I won't say it can't be
> > done.  I don't know how efficient it would be for doing things like
> > PageRank or other graph algorithms, but I would be interesting in
> > hearing more about what you have in mind.
> >
> > Lucene doesn't do much caching at the document level, but that is
> > fairly easy to implement, but it does bring some terms, etc. into
> > memory, and you may have a look at the FieldCache.
> >
> > -Grant
> >
> > On Jan 15, 2008, at 7:17 AM, Cam Bazz wrote:
> >
> > > Hello;
> > >
> > > I like to use lucene as a graph store. The graph representation is
>  a
> > > list of
> > > edges. Consider the code below:
> > >
> > >        final int commitCount = 16 * 1024;
> > >        final int numObj =  1024 * 1024;
> > >
> > >        Analyzer analyzer = new KeywordAnalyzer();
> > >        FSDirectory directory = FSDirectory.getDirectory("c:\
> > > \LuceneAdd");
> > >        IndexWriter writer = new IndexWriter(directory, analyzer,
> > > true);
> > >
> > >        Document doc;
> > >        long start = System.currentTimeMillis();
> > >
> > >        Random r = new Random(System.currentTimeMillis());
> > >
> > >        for(int i=0; i<numObj; i++) {
> > >            doc = new Document();
> > >            doc.add(new Field("srcKey", NumberTools.longToString(i),
> > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >            doc.add(new Field("dstKey",
> > > NumberTools.longToString(r.nextInt(numObj)),
> > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >            doc.add(new Field("linkKey",
> > > NumberTools.longToString(r.nextInt(16)),
> > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >            doc.add(new Field("linkValue", NumberTools.longToString(
> > > r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >
> > >           writer.addDocument(doc);
> > >
> > >            if(i%commitCount==0) {
> > >                 long now = System.currentTimeMillis();
> > >                 System.out.println(i + ":" + (now-start));
> > >                 start = now;
> > >            }
> > >
> > >        }
> > >
> > >        writer.optimize();
> > >        writer.close();
> > >        directory.close();
> > >
> > >
> > > Basically I am adding a large number of documents from srcKey = i
>  to
> > > dstKey
> > > = random and two other string fields - linkKey and linkValue.
> > >
> > > Compared to a normal database store, or an oodbms such as perst or
> > > db4o -
> > > lucene takes longer to index.
> > > However, it is much faster in searching, finding, retrieving
>  records.
> > >
> > > I can make 16384 random lookups over 1Million entries in 0.8
> > > seconds. This
> > > is excellent time. (I have been benchmarking for a long time)
> > >
> > > Typically, when number of objects in BTree based structure in an
> > > oodbms for
> > > example increase, the search and add times also increase.
> > >
> > > Will lucene have the same problem and how can I overcome it if it
> > > does.
> > > Looking at the above code - does anyone has any recomendations
> > > to improve index performance. (also what can I do to improve search
> > > performance)
> > >
> > > While searching with an indexsearcher - does lucene do any caching?
> > > usually
> > > MRU caches are used to accomplish this.
> > >
> > > Any ideas,help,recomendations greatly appreciated.
> > >
> > > Best,
> > > -C.B.
> >
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> > http://www.lucenebootcamp.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14428_29637918.1200414860352--

From java-user-return-32002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:35:42 2008
Return-Path: <java-user-return-32002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66477 invoked from network); 15 Jan 2008 16:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:35:41 -0000
Received: (qmail 9045 invoked by uid 500); 15 Jan 2008 16:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9015 invoked by uid 500); 15 Jan 2008 16:35:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9004 invoked by uid 99); 15 Jan 2008 16:35:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:35:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:35:10 +0000
Received: (qmail 69961 invoked by uid 60001); 15 Jan 2008 16:35:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=SOer8iEGe5DD8QZkc5UZo5tT+Cddnrps4hDe2kGH3M/PW6ZW1GdSQ7bHQDU7WC3OeE8WVCCr/s+UZh+c4OW7B9CM68H59zdxftF8kS4sUenbKQdyp3jgkakbLVPOQMwZh1cWnt00dM54Dy4iTWEXlZmoawCHnJ3/3g/jzpNViic=;
X-YMail-OSG: LB0MGksVM1ldhoXFwwsTa4_sJuCAfQY5NzvDlXbUsp5hkx..i0ih0P3xopc08NNubuX5Rb5Sym09UFxaX9g17mdBUXqshoQYo.5rGGq5Zc3cpSvy0RGKLGSwezSguU9nf1W0POYggdXP_NU-
Received: from [208.125.28.244] by web50307.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 08:35:01 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 08:35:01 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Sort does not work for me
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <349893.69455.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Aron,
I believe we now have class ExtendedFieldCacheImpl extends FieldCacheImpl implements ExtendedFieldCache
And this should support sorting by longs.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Aron Sogor <aron@theatlantis.net>
To: java-user@lucene.apache.org
Sent: Tuesday, January 15, 2008 8:37:49 AM
Subject: Re: Sort does not work for me

Lucky guy who gets the same problem.

Found the issue:
http://issues.apache.org/jira/browse/LUCENE-463

Lucene see numbrs in the field and thinks it is an int... than
 overflows 
the int.
Force the sort field to be a SortField.String.
Aron Sogor wrote:
> Let me qualify my question:
>
> Sort is not working for a field that I stored :
>
>           document.add(new Field(FIELD_RECEIVED,
 DateTools.timeToString(
>                   System.currentTimeMillis(), 
> DateTools.Resolution.SECOND),
>                   Field.Store.NO, Field.Index.UN_TOKENIZED));
>
> using the query bellow with sort:
> Sort sort = new Sort(FIELD_RECEIVED,true);
>
> even if I do reverse=false the order of the hits does not really 
> change. The question is why would that be. The dates are numbers that
 
> even is sorted as strings should order the same, and reverse should
 work.
>
> Aron
>
>
>
> Aron Sogor wrote:
>> Here is the document:
>>
>>            MimeMessage mime = new MimeMessage(null, new 
>> FileInputStream(item
>>                    .getMailFile()));
>>            document.add(new Field(FIELD_MAILID, 
>> item.getMailId().toString(),
>>                    Field.Store.YES, Field.Index.UN_TOKENIZED));
>>            document.add(new Field(FIELD_SUBJECT, mime.getSubject(),
>>                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
>>            document.add(new Field(FIELD_FROM, 
>> getAddressLine(mime.getFrom()),
>>                    Field.Store.COMPRESS, Field.Index.TOKENIZED));
>>            document.add(new Field(FIELD_BODY, getContentReader(mime
>>                    .getContent())));
>>            document.add(new Field(FIELD_RECEIVED, 
>> DateTools.timeToString(
>>                    System.currentTimeMillis(), 
>> DateTools.Resolution.SECOND),
>>                    Field.Store.NO, Field.Index.UN_TOKENIZED));
>>            document.add(new Field(FIELD_TAG, TAG_INBOX,
 Field.Store.YES,
>>                    Field.Index.TOKENIZED));
>>            return document;
>>
>> here is the search:
>>
>>    public static Hits createInboxQuery(IndexSearcher searcher)
>>            throws ParseException, IOException {
>>        Query query = new QueryParser(FIELD_TAG, new
 StandardAnalyzer())
>>                .parse(TAG_INBOX);
>>        Sort sort = new Sort(FIELD_RECEIVED,true);
>>        return searcher.search(query, sort);
>>    }
>>
>>            IndexSearcher searcher = 
>> storage.getIndexSearcherForMailBox("junk");
>>            Hits hits = 
>> DocumentAndQueryFactory.createInboxQuery(searcher);
>>            for (int i = 0; i < hits.length(); i++) {
>>                Document hit = (Document) hits.doc(i);
>>                
>> System.out.println(hit.getField("subject").stringValue());
>>
>>
>> No matter what I do when I lit the hits they come back (these are
 the 
>> subjects/ but essentially same timestamp):
>>
>> Test MSGSun Jan 13 15:52:47 PST 2008
>> Test MSGSun Jan 13 15:52:54 PST 2008
>> Test MSGSun Jan 13 15:53:03 PST 2008
>> Test MSGSun Jan 13 15:53:12 PST 2008
>> Test MSGSun Jan 13 15:53:48 PST 2008
>>
>> Setting the "revert" for the search Sort essentially has no effect.
 I 
>> perhaps very much missing something... but what?
>>
>> Aron
>>
>>
 ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:51:34 2008
Return-Path: <java-user-return-32003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74575 invoked from network); 15 Jan 2008 16:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:51:34 -0000
Received: (qmail 46547 invoked by uid 500); 15 Jan 2008 16:51:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46146 invoked by uid 500); 15 Jan 2008 16:51:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46135 invoked by uid 99); 15 Jan 2008 16:51:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:51:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:51:02 +0000
Received: (qmail 23195 invoked by uid 60001); 15 Jan 2008 16:50:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=LGW4q7WKuaqGbPt0NGip1SStnNH5z5fyljioZ/YqNkhmKgc94gVjjNmeKTguhi2zDTXQNVodxPmY96AMko2tNIT2O4Ke8dong+NWUL4xeKs7/ZWSpgjV/elH8/mQ+MHBldOUqIE41ltue0qzzDydQevgr3JU+0pvxUU/R4iW7Po=;
X-YMail-OSG: PMH5smEVM1mApDkZai3qg27tlScB9D3UVyHG4tSEpkBnsL1_CMoIFRpKjPvPhjSMgWmsh03HeU.Rz_895SAalrhtD.6qsm6QoEcHq96Au4kNtiCm_Cpt1auWfsWwPDggxUL8psyrxVfpKcw-
Received: from [208.125.28.244] by web50310.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 08:50:54 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 08:50:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Integrating dynamic data into Lucene search/ranking
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <351236.21497.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Tobias,=0A=0AThe question is a little too open, I think.  Perhaps start by =
saying what you've tried, what doesn't work, what you think won't work, the=
 actual rate of change, the size of your index and, very importantly, how q=
uickly you need to see index changes (adds, deletes, updates).=0A=0AHow abo=
ut this for the boostrap question: just update (delete+add) the whole Docum=
ent and reopen the IndexSeearcher every N minutes.  Would that work for you=
?=0A=0ADoes only the stored data change or also searchable data?  If the fo=
rmer, you could choose to store that in the external data store (e.g. RDBMS=
, BDB...)=0A=0AOtis=0A--=0ASematext -- http://sematext.com/ -- Lucene - Sol=
r - Nutch=0A=0A----- Original Message ----=0AFrom: Tobias Lohr <TobiasLohr@=
gmx.de>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, January 15, 2008=
 11:33:56 AM=0ASubject: Integrating dynamic data into Lucene search/ranking=
=0A=0AI have a more architectural question, which is maybe sort of off topi=
c,=0A but as I want to implement it using Java  and Lucene, it's the right=
=0A forum however:=0A=0AI'm thinking of an approach to design a system that=
 integrates dynamic=0A information into a search (and a ranking) functional=
ity using Lucene.=0A With dynamic data I mean, data which changes very ofte=
n within the=0A typical index rebuild cycle, i.e. transactional data.=0A=0A=
A good example is the sorting of products in an online store by product=0A =
availability.=0A=0ADoes anybody know good reading resources (approaches, wh=
itepapers,=0A books etc.) for integrating such dynamic information into a s=
earch/ranking=0A functionality?=0A=0A(I already searched at Google, but cou=
ldn't find anything useful=0A though.)=0A=0AThanks in advance!=0A-- =0APsss=
st! Schon vom neuen GMX MultiMessenger geh=F6rt?=0ADer kann`s mit allen: ht=
tp://www.gmx.net/de/go/multimessenger?did=3D10=0A=0A-----------------------=
----------------------------------------------=0ATo unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: ja=
va-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 16:55:07 2008
Return-Path: <java-user-return-32004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76828 invoked from network); 15 Jan 2008 16:55:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 16:55:07 -0000
Received: (qmail 54676 invoked by uid 500); 15 Jan 2008 16:54:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54648 invoked by uid 500); 15 Jan 2008 16:54:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54637 invoked by uid 99); 15 Jan 2008 16:54:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 08:54:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:54:35 +0000
Received: (qmail 25508 invoked by uid 60001); 15 Jan 2008 16:54:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=csToN1BOLegODF0LbIWynybq03ipaSKdWTrmNcOi82R1kozLaesSv6fiHLPxd9Ke6sxxeFZoudo8a35rNRP1rZXb6SgOp/eP1gDTbAXCWwVWjhYL6KHyNoJZNzaAWOlyahgMo06IodCNOciVOBRYbStpML5h9882KHlK8Byl/H8=;
X-YMail-OSG: S0Rn78YVM1mnBXo0zLRzAFWgh7KtIGpesedvkT89AyvayQaizpah0Om0C8EASuupYZLoBfdGVTe7R2PpPjfmULQMoOb9yiCNWbgzZJ1KJpk4bHeuFSU-
Received: from [208.125.28.244] by web50310.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 08:54:27 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 08:54:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene as a graph store
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <887558.24754.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Aha, I see, a Document represents a node and all other nodes connected to it.  So you can really only find 2 nodes connected with an edge with a single query, but not, say, the number of edges (degrees?) between any 2 nodes?

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Cam Bazz <cambazz@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, January 15, 2008 11:34:20 AM
Subject: Re: lucene as a graph store

well lets say I have a list representation of a graph like

src:1 dst:2
src:2 dst:3
src:1 dst 3

outgoingEdgesOf(1) returns 2 and 3.
incomingEdgesOf(3) returns 1 and 2.

in a lucene index it does work out nice with term queries. I can search
 for
incoming outgoing or edgeExist with a boolean term query.

Best.


On Jan 15, 2008 6:22 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Hi,
>
>
> ----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 15, 2008 8:50:07 AM
> Subject: Re: lucene as a graph store
>
> Usually for implementing things like page rank, or doing centrality
>  metric
> calculations or maybe dijkstras shortest term, this kind of (list of
>  edges)
> graph is not best at performance.
> I like to use lucene for simple operations like neighboors of this
>  node, or
> 2 degree neighboors of this node.
>
> OG: Neighbours of a node?  Can you tell us more about what you use
 and how
> you use Lucene in this context?
>
> is updating an index costly operation in lucene? I dont think there
>  will too
> much updates, but rather deletes.
>
> when I delete documents from an index what things should I be careful
>  about.
>
> OG: Note that deletes are not removed from the index/disk
 immediately.
>  Rather, their doc IDs are stored and those docs are skipped during
> searches.  If you have a large number of deletes, you may want to
 optimize
> the index, so that this list of doc IDs to skip doesn't cost you.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> On Jan 15, 2008 3:31 PM, Grant Ingersoll <gsingers@apache.org> wrote:
>
> > I guess the question comes down to what kind of things are you
 going
> > to do w/ this graph?  How often are you updating links, etc?  I
 can't
> > say Lucene was designed for this kind of thing, but I am constantly
> > amazed at what people use Lucene for, so I won't say it can't be
> > done.  I don't know how efficient it would be for doing things like
> > PageRank or other graph algorithms, but I would be interesting in
> > hearing more about what you have in mind.
> >
> > Lucene doesn't do much caching at the document level, but that is
> > fairly easy to implement, but it does bring some terms, etc. into
> > memory, and you may have a look at the FieldCache.
> >
> > -Grant
> >
> > On Jan 15, 2008, at 7:17 AM, Cam Bazz wrote:
> >
> > > Hello;
> > >
> > > I like to use lucene as a graph store. The graph representation
 is
>  a
> > > list of
> > > edges. Consider the code below:
> > >
> > >        final int commitCount = 16 * 1024;
> > >        final int numObj =  1024 * 1024;
> > >
> > >        Analyzer analyzer = new KeywordAnalyzer();
> > >        FSDirectory directory = FSDirectory.getDirectory("c:\
> > > \LuceneAdd");
> > >        IndexWriter writer = new IndexWriter(directory, analyzer,
> > > true);
> > >
> > >        Document doc;
> > >        long start = System.currentTimeMillis();
> > >
> > >        Random r = new Random(System.currentTimeMillis());
> > >
> > >        for(int i=0; i<numObj; i++) {
> > >            doc = new Document();
> > >            doc.add(new Field("srcKey",
 NumberTools.longToString(i),
> > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >            doc.add(new Field("dstKey",
> > > NumberTools.longToString(r.nextInt(numObj)),
> > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >            doc.add(new Field("linkKey",
> > > NumberTools.longToString(r.nextInt(16)),
> > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >            doc.add(new Field("linkValue",
 NumberTools.longToString(
> > > r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));
> > >
> > >           writer.addDocument(doc);
> > >
> > >            if(i%commitCount==0) {
> > >                 long now = System.currentTimeMillis();
> > >                 System.out.println(i + ":" + (now-start));
> > >                 start = now;
> > >            }
> > >
> > >        }
> > >
> > >        writer.optimize();
> > >        writer.close();
> > >        directory.close();
> > >
> > >
> > > Basically I am adding a large number of documents from srcKey = i
>  to
> > > dstKey
> > > = random and two other string fields - linkKey and linkValue.
> > >
> > > Compared to a normal database store, or an oodbms such as perst
 or
> > > db4o -
> > > lucene takes longer to index.
> > > However, it is much faster in searching, finding, retrieving
>  records.
> > >
> > > I can make 16384 random lookups over 1Million entries in 0.8
> > > seconds. This
> > > is excellent time. (I have been benchmarking for a long time)
> > >
> > > Typically, when number of objects in BTree based structure in an
> > > oodbms for
> > > example increase, the search and add times also increase.
> > >
> > > Will lucene have the same problem and how can I overcome it if it
> > > does.
> > > Looking at the above code - does anyone has any recomendations
> > > to improve index performance. (also what can I do to improve
 search
> > > performance)
> > >
> > > While searching with an indexsearcher - does lucene do any
 caching?
> > > usually
> > > MRU caches are used to accomplish this.
> > >
> > > Any ideas,help,recomendations greatly appreciated.
> > >
> > > Best,
> > > -C.B.
> >
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> > http://www.lucenebootcamp.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> >
> >
> >
 ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 17:00:21 2008
Return-Path: <java-user-return-32005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79492 invoked from network); 15 Jan 2008 17:00:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 17:00:21 -0000
Received: (qmail 64664 invoked by uid 500); 15 Jan 2008 17:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64623 invoked by uid 500); 15 Jan 2008 17:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64611 invoked by uid 99); 15 Jan 2008 17:00:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 09:00:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 16:59:50 +0000
Received: (qmail 3237 invoked by uid 60001); 15 Jan 2008 16:59:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=1/ANeuYh1xukdRJPSHZIRL1UWAjUityCKrwVojrpY8jyCaUCAYYp2Y02vHjvi4ipIN1jEpgTIRBfIrbT2PcfaTUq4fJyEufAEiuwbGucg21hNbIEa0QWpxm2mliJN3xJHrbsL0Zuz6xfaY4aDXoCRnVbcnLgRG8v6fIWsoSsrmQ=;
X-YMail-OSG: QPzgA8wVM1m7uBp36lB6rLhVNaPJaL_0tI7oGCOd.CpDg1KfhyqN_Lf9c.iip4d7paJxNerduc8LH1KLrnmD8S09JuCpZ204XPlcGfvwlbZOH8b2TNyLIMYBa0O964pGvslFBh6rr9.ZKqI-
Received: from [208.125.28.244] by web50312.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 08:59:42 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 08:59:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene as a graph store
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <551698.56507.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Re indexing performance, you are not making use of various IndexWriter parameters.  My suggestion: wait another week, Lucene 2.3 will be out then.  Check IndexWriter javadocs for various knobs for improving indexing performance.  Actually, check the Wiki, there is a page about just that there.

Yes, the larger the index, the slower the search, of course, and your tests can show you when the speed becomes unacceptable for your type of index, hardware, search rate, etc.  What you do then is up to you.  You can spread the search load over multiple boxes, or you can split your index and do multiple searches in parallel over smaller indices sitting on multiple boxes.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Cam Bazz <cambazz@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, January 15, 2008 7:17:49 AM
Subject: lucene as a graph store

Hello;

I like to use lucene as a graph store. The graph representation is a
 list of
edges. Consider the code below:

        final int commitCount = 16 * 1024;
        final int numObj =  1024 * 1024;

        Analyzer analyzer = new KeywordAnalyzer();
        FSDirectory directory =
 FSDirectory.getDirectory("c:\\LuceneAdd");
        IndexWriter writer = new IndexWriter(directory, analyzer,
 true);

        Document doc;
        long start = System.currentTimeMillis();

        Random r = new Random(System.currentTimeMillis());

        for(int i=0; i<numObj; i++) {
            doc = new Document();
            doc.add(new Field("srcKey", NumberTools.longToString(i),
Field.Store.YES, Field.Index.UN_TOKENIZED));
            doc.add(new Field("dstKey",
NumberTools.longToString(r.nextInt(numObj)),
Field.Store.YES, Field.Index.UN_TOKENIZED));
            doc.add(new Field("linkKey",
NumberTools.longToString(r.nextInt(16)),
Field.Store.YES, Field.Index.UN_TOKENIZED));
            doc.add(new Field("linkValue", NumberTools.longToString(
r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));

           writer.addDocument(doc);

            if(i%commitCount==0) {
                 long now = System.currentTimeMillis();
                 System.out.println(i + ":" + (now-start));
                 start = now;
            }

        }

        writer.optimize();
        writer.close();
        directory.close();


Basically I am adding a large number of documents from srcKey = i to
 dstKey
= random and two other string fields - linkKey and linkValue.

Compared to a normal database store, or an oodbms such as perst or db4o
 -
lucene takes longer to index.
However, it is much faster in searching, finding, retrieving records.

I can make 16384 random lookups over 1Million entries in 0.8 seconds.
 This
is excellent time. (I have been benchmarking for a long time)

Typically, when number of objects in BTree based structure in an oodbms
 for
example increase, the search and add times also increase.

Will lucene have the same problem and how can I overcome it if it does.
Looking at the above code - does anyone has any recomendations
to improve index performance. (also what can I do to improve search
performance)

While searching with an indexsearcher - does lucene do any caching?
 usually
MRU caches are used to accomplish this.

Any ideas,help,recomendations greatly appreciated.

Best,
-C.B.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 17:05:45 2008
Return-Path: <java-user-return-32006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82079 invoked from network); 15 Jan 2008 17:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 17:05:44 -0000
Received: (qmail 72655 invoked by uid 500); 15 Jan 2008 17:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72623 invoked by uid 500); 15 Jan 2008 17:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72610 invoked by uid 99); 15 Jan 2008 17:05:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 09:05:28 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.27.42.35] (HELO smtp5-g19.free.fr) (212.27.42.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 17:05:14 +0000
Received: from smtp5-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp5-g19.free.fr (Postfix) with ESMTP id 2B13F3F61E9
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 18:05:07 +0100 (CET)
Received: from sophia (gra94-5-82-227-146-101.fbx.proxad.net [82.227.146.101])
	by smtp5-g19.free.fr (Postfix) with ESMTP id DEC373F61C5
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 18:05:06 +0100 (CET)
From: =?iso-8859-1?Q?Dominique_B=E9jean?= <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Subject: RE: [SOLVED] issue sorting results by string field 
Date: Tue, 15 Jan 2008 18:05:03 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <385383.56598.qm@web50307.mail.re2.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AchXkmRSt7A0P5PsSdq+34oVcwq7mAABdl6Q
Message-Id: <20080115170506.DEC373F61C5@smtp5-g19.free.fr>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, it works much better if you help Lucene to find the sort field type
with
new Sort(new SortField("pubdate", SortField.STRING, true))

Thank you

-----Message d'origine-----
De=A0: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Envoy=E9=A0: mardi 15 janvier 2008 17:19
=C0=A0: java-user@lucene.apache.org
Objet=A0: Re: issue sorting results by string field

Dominique,
I don't have the javadoc/source in front of me, but souldn't that be new
Sort(new SortField(.....)) ?  I'm not sure if the underlying sort
implementation is smart enough to avoid re-doing the same work when you =
call
these constructors for *every* every search.  If it's not smart enough,
initialize them on domand and keep the Sort object around for reuse.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Dominique B=E9jean <dominique.bejean@eolya.fr>
To: java-user@lucene.apache.org
Sent: Tuesday, January 15, 2008 10:05:52 AM
Subject: issue sorting results by string field

Hi,

=20

I need to sort my search results by descending publication date.

=20

To do this, I added a field like this in all documents=20

=20

doc.add(new Field("pubdate", date, Field.Store.YES,
Field.Index.UN_TOKENIZED));

=20

Where date contains string formatted in this way =93yyyymmddhhmmss =93

=20

Searches are executed like this=20

=20

hits =3D searcher.search(booleanQuery, new Sort("pubdate", true));

=20

Here is a example of result output for the date field. We can see that
 the
result is not sorted neither ascending, neither descending.

=20

20080114190000

20080114225500

20080114232900

20080114235700

20080115102800

20080115100600

20080115124639

20080115124100

20080115131700

20080115131900

20080112000100

20080112001700

20080112001900

20080112074400

20080112080000

20080112082000

=20

=20

What can be the problem ? Where am I wrong ?

=20

Thank you by advance.

=20

dominique





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 17:14:29 2008
Return-Path: <java-user-return-32007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85719 invoked from network); 15 Jan 2008 17:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 17:14:29 -0000
Received: (qmail 86890 invoked by uid 500); 15 Jan 2008 17:14:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86845 invoked by uid 500); 15 Jan 2008 17:14:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86834 invoked by uid 99); 15 Jan 2008 17:14:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 09:14:13 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.27.42.35] (HELO smtp5-g19.free.fr) (212.27.42.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 17:14:00 +0000
Received: from smtp5-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp5-g19.free.fr (Postfix) with ESMTP id A66AA3F625B
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 18:13:51 +0100 (CET)
Received: from sophia (gra94-5-82-227-146-101.fbx.proxad.net [82.227.146.101])
	by smtp5-g19.free.fr (Postfix) with ESMTP id CC7CD3F61A1
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 18:13:49 +0100 (CET)
From: =?iso-8859-1?Q?Dominique_B=E9jean?= <dominique.bejean@eolya.fr>
To: <java-user@lucene.apache.org>
Subject: Use Lucene in order to generate tag cloud
Date: Tue, 15 Jan 2008 18:13:46 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0037_01C857A2.5EC11610"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AchXmflMi1W3zZnLQmeytz6Ln65DdA==
Message-Id: <20080115171349.CC7CD3F61A1@smtp5-g19.free.fr>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0037_01C857A2.5EC11610
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

Does anybody know an implementation of Lucene in order to generate tag
clouds.

=20

The idea is to index some documents in a temporary index in order to =
find
most frequent 1-term, 2-terms and 3-terms sequences.

=20

Stop word list will eliminate common words.

Ideally, terms like =93driver=94, =93drivers=94 will generate only on =
term in the
cloud.=20

Snowball Analyzer may help, but how get back the best original term for =
a
stem ?

=20

Thank for your idea

=20

Dominique

=20

=20


------=_NextPart_000_0037_01C857A2.5EC11610--


From java-user-return-32008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 17:26:20 2008
Return-Path: <java-user-return-32008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92291 invoked from network); 15 Jan 2008 17:26:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 17:26:20 -0000
Received: (qmail 13337 invoked by uid 500); 15 Jan 2008 17:26:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13310 invoked by uid 500); 15 Jan 2008 17:26:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13299 invoked by uid 99); 15 Jan 2008 17:26:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 09:26:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 17:25:50 +0000
Received: (qmail 62172 invoked by uid 60001); 15 Jan 2008 17:25:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=2cVKE8SosygxXmfyNRJ93kIRgIEmLOXfrt4iqqxjUGdADx8rWnXqWfKwx66wO1/PuLi52wIRpK3UBQic0lt7t83tE88z44+2KJdWAMSwOx/cPs32b6E/SspqvVSdQfJDpLPLWanaE/Q+JfXxf0ZIFn7JUlElLtrTkEvfsvJO0xU=;
X-YMail-OSG: QCKwLn0VM1kkm7plQvV8fOgFpPY1AUB_1Av8jBhYVXZCrnf_Zv6QYxkQPtzk53xyqi0L.BPxCHFDtjadrUI69Ccvi8QxeqpNbVqaojfSpLJcjjUwu.zsXbYjUaHMVNYrhY9muANtQR_WMQw-
Received: from [208.125.28.244] by web50301.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 09:25:42 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 09:25:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Use Lucene in order to generate tag cloud
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <582420.61023.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Dominique, look at LUCENE-400 issue in JIRA, that will help.  It will be in=
 Lucene 2.4.=0A=0AOtis=0A--=0ASematext -- http://sematext.com/ -- Lucene - =
Solr - Nutch=0A=0A----- Original Message ----=0AFrom: Dominique B=C3=A9jean=
 <dominique.bejean@eolya.fr>=0ATo: java-user@lucene.apache.org=0ASent: Tues=
day, January 15, 2008 12:13:46 PM=0ASubject: Use Lucene in order to generat=
e tag cloud=0A=0AHi,=0A=0A =0A=0ADoes anybody know an implementation of Luc=
ene in order to generate tag=0Aclouds.=0A=0A =0A=0AThe idea is to index som=
e documents in a temporary index in order to=0A find=0Amost frequent 1-term=
, 2-terms and 3-terms sequences.=0A=0A =0A=0AStop word list will eliminate =
common words.=0A=0AIdeally, terms like =E2=80=9Cdriver=E2=80=9D, =E2=80=9Cd=
rivers=E2=80=9D will generate only on=0A term in the=0Acloud. =0A=0ASnowbal=
l Analyzer may help, but how get back the best original term for=0A a=0Aste=
m ?=0A=0A =0A=0AThank for your idea=0A=0A =0A=0ADominique=0A=0A =0A=0A =0A=
=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 18:14:43 2008
Return-Path: <java-user-return-32009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18364 invoked from network); 15 Jan 2008 18:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 18:14:43 -0000
Received: (qmail 92697 invoked by uid 500); 15 Jan 2008 18:14:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92314 invoked by uid 500); 15 Jan 2008 18:14:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92303 invoked by uid 99); 15 Jan 2008 18:14:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 10:14:26 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 18:14:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JEqIY-00030C-6H
	for java-user@lucene.apache.org; Tue, 15 Jan 2008 10:14:06 -0800
Message-ID: <14843700.post@talk.nabble.com>
Date: Tue, 15 Jan 2008 10:14:06 -0800 (PST)
From: solr_user <kunaleddit@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: spell checking for combined words
In-Reply-To: <8E3E394F-3139-4BFC-A68B-7F0C87CEF658@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kunaleddit@yahoo.com
References: <14809197.post@talk.nabble.com> <8E3E394F-3139-4BFC-A68B-7F0C87CEF658@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I don't have a list of common "combined word" queries.  Splitting of words
seem to be quite a standard thing, most search engines and spell checkers
have this ability.  It would be nice if Lucene provides this out of the box.


karl wettin-3 wrote:
> 
> 
> 14 jan 2008 kl. 19.47 skrev solr_user:
> 
>> Does Lucene spell checker have the ability to suggest splitting of  
>> combined
>> words.  So for e.g. if I have got the word "apple" and "computer" in  
>> my
>> index and if I type "applecomputer" then how can I make it suggest
>> "apple computer"
> 
> 
> It would probably be very expensive to analyze each query token and  
> decompose it using some word list or index.
> 
> If "apple computer" is a phrase that is common in your query, then you  
> can create a new field with chained tokens: "think diffrent apple  
> computer" -> "thinkdiffrent diffrentapple applecomputer". This would  
> at least allow you to search for such typos. You might want to set  
> some threadholds like min/max token size and such in your TokenFilter.
> 
> 
> -- 
> karl
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/spell-checking-for-combined-words-tp14809197p14843700.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 18:33:58 2008
Return-Path: <java-user-return-32010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33681 invoked from network); 15 Jan 2008 18:33:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 18:33:57 -0000
Received: (qmail 26805 invoked by uid 500); 15 Jan 2008 18:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26775 invoked by uid 500); 15 Jan 2008 18:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26724 invoked by uid 99); 15 Jan 2008 18:33:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 10:33:35 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jan 2008 18:33:21 +0000
Received: (qmail 15372 invoked by uid 60001); 15 Jan 2008 18:33:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=LB2Vc4/qnWeZerXAirsEUuRMnKbKfIYccU2ciTfM2SNfVDXita523H9WIYYe9gM0SJ/+M2iZSdrQrYSKdG/OOLWWrINYfhMyXvsmWes64gsUFaxyendUSrvF5u6ZEE9hL1ZH82+ZaRu92+DtREetJjrMKXit9LiR3/YN7A2XkM0=;
X-YMail-OSG: 2kdbsj8VM1n6u_QTFAerH_IWzJM0QnnjT0wRzQ4rN0RXUELMggFREsTEnm4OAlMnEb0kPWZENFT_CHxfUtwjC5ELtTh3mL._BL64iHFhVr74eDR4RuITl3rQEE805dSYOVmkf.Onh7yI1_4-
Received: from [208.125.28.244] by web50308.mail.re2.yahoo.com via HTTP; Tue, 15 Jan 2008 10:33:13 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Tue, 15 Jan 2008 10:33:13 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: spell checking for combined words
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <256998.7372.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried the Lucene spellchecker first?  I think it could be adapted to do want, esp with the help of LUCENE-400 to produce N-word shingles (which you can then index with the Spellchecker).  I'm quite sure this could be done, in fact, and would be a nice addition to Spellchecker in general.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: solr_user <kunaleddit@yahoo.com>
To: java-user@lucene.apache.org
Sent: Tuesday, January 15, 2008 1:14:06 PM
Subject: Re: spell checking for combined words


I don't have a list of common "combined word" queries.  Splitting of
 words
seem to be quite a standard thing, most search engines and spell
 checkers
have this ability.  It would be nice if Lucene provides this out of the
 box.


karl wettin-3 wrote:
> 
> 
> 14 jan 2008 kl. 19.47 skrev solr_user:
> 
>> Does Lucene spell checker have the ability to suggest splitting of  
>> combined
>> words.  So for e.g. if I have got the word "apple" and "computer" in
  
>> my
>> index and if I type "applecomputer" then how can I make it suggest
>> "apple computer"
> 
> 
> It would probably be very expensive to analyze each query token and  
> decompose it using some word list or index.
> 
> If "apple computer" is a phrase that is common in your query, then
 you  
> can create a new field with chained tokens: "think diffrent apple  
> computer" -> "thinkdiffrent diffrentapple applecomputer". This would
  
> at least allow you to search for such typos. You might want to set  
> some threadholds like min/max token size and such in your
 TokenFilter.
> 
> 
> -- 
> karl
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context:
 http://www.nabble.com/spell-checking-for-combined-words-tp14809197p14843700.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 19:32:03 2008
Return-Path: <java-user-return-32011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67414 invoked from network); 15 Jan 2008 19:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 19:32:01 -0000
Received: (qmail 45986 invoked by uid 500); 15 Jan 2008 19:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45954 invoked by uid 500); 15 Jan 2008 19:31:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45942 invoked by uid 99); 15 Jan 2008 19:31:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 11:31:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.67] (HELO smtpoutm.mac.com) (17.148.16.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 19:31:31 +0000
Received: from mac.com (asmtp005-s [10.150.69.68])
	by smtpoutm.mac.com (Xserve/smtpout004/MantshX 4.0) with ESMTP id m0FJVNHw029504
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 11:31:23 -0800 (PST)
Received: from [10.0.1.198] (va-71-53-213-206.dhcp.embarqhsd.net [71.53.213.206])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp005/MantshX 4.0) with ESMTP id m0FJVI7s020961
	for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 11:31:20 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <92F98030-DBC4-49EA-B167-529A0EF446D3@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Michael Prichard <michael_prichard@mac.com>
Subject: IndexWriter.deleteDocument()
Date: Tue, 15 Jan 2008 14:31:11 -0500
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

When I run through and delete a few documents from my index, is it  
wise to call .flush() afterwards?  Or is it better to close the index?

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 23:00:30 2008
Return-Path: <java-user-return-32012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24847 invoked from network); 15 Jan 2008 23:00:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 23:00:29 -0000
Received: (qmail 61760 invoked by uid 500); 15 Jan 2008 23:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61724 invoked by uid 500); 15 Jan 2008 23:00:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61713 invoked by uid 99); 15 Jan 2008 23:00:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 15:00:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 23:00:02 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0FMxiPc000361
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 00:59:44 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1g0nkjf; 16 Jan 2008 00:59:00 +0200
Message-ID: <478D3AC9.4090601@teamware.com>
Date: Wed, 16 Jan 2008 09:59:21 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene sorting case-sensitive by default?
References: <359a92830801140824w619b56bp914b2dee06d4a0a8@mail.gmail.com>	 <F700E5D18787514F8EFB5B5CE7423936BE04CC@soho.SVGINTERNET.COM> <359a92830801140934j7b8c2358x1527e0c0c7182d24@mail.gmail.com>
In-Reply-To: <359a92830801140934j7b8c2358x1527e0c0c7182d24@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 16 Jan 2008 00:59:44 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:

>             doc.add(
>                     new Field(
>                             "f",
>                             "This is Some Mixed, case Junk($*%& With Ugly
> SYmbols",
>                             Field.Store.YES,
>                             Field.Index.TOKENIZED));

<snip>

> prints "This is Some Mixed, case Junk($*%& With Ugly SYmbols"
> yet still finds the document with a search for "junk" using
> StandardAnalyzer.

Don't forget you can't sort on that as the field's tokenized, so although it's 
stored in the original and indexed as lower case into multiple tokens, you will 
get the RuntimeException from FieldCache.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 15 23:33:41 2008
Return-Path: <java-user-return-32013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44941 invoked from network); 15 Jan 2008 23:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2008 23:33:41 -0000
Received: (qmail 15699 invoked by uid 500); 15 Jan 2008 23:33:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15669 invoked by uid 500); 15 Jan 2008 23:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15658 invoked by uid 99); 15 Jan 2008 23:33:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 15:33:24 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 23:33:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JEvHC-00058A-1P
	for java-user@lucene.apache.org; Tue, 15 Jan 2008 15:33:02 -0800
Message-ID: <14853050.post@talk.nabble.com>
Date: Tue, 15 Jan 2008 15:33:02 -0800 (PST)
From: solr_user <kunaleddit@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: spell checking for combined words
In-Reply-To: <256998.7372.qm@web50308.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kunaleddit@yahoo.com
References: <14809197.post@talk.nabble.com> <256998.7372.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I did try the Lucene SpellChecker.  Currently the lucene SpellChecker does
not have the ability to suggest splitting of combined words.  Is there a
plan to add this capability to the Lucene SpellChecker any time soon?

I also did not quite understand your idea of producing N-word shingles and
then indexing them with the SpellChecker.  How will this help the
SpellChecker to suggest splitting of words?




Otis Gospodnetic wrote:
> 
> Have you tried the Lucene spellchecker first?  I think it could be adapted
> to do want, esp with the help of LUCENE-400 to produce N-word shingles
> (which you can then index with the Spellchecker).  I'm quite sure this
> could be done, in fact, and would be a nice addition to Spellchecker in
> general.
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> ----- Original Message ----
> From: solr_user <kunaleddit@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 15, 2008 1:14:06 PM
> Subject: Re: spell checking for combined words
> 
> 
> I don't have a list of common "combined word" queries.  Splitting of
>  words
> seem to be quite a standard thing, most search engines and spell
>  checkers
> have this ability.  It would be nice if Lucene provides this out of the
>  box.
> 
> 
> karl wettin-3 wrote:
>> 
>> 
>> 14 jan 2008 kl. 19.47 skrev solr_user:
>> 
>>> Does Lucene spell checker have the ability to suggest splitting of  
>>> combined
>>> words.  So for e.g. if I have got the word "apple" and "computer" in
>   
>>> my
>>> index and if I type "applecomputer" then how can I make it suggest
>>> "apple computer"
>> 
>> 
>> It would probably be very expensive to analyze each query token and  
>> decompose it using some word list or index.
>> 
>> If "apple computer" is a phrase that is common in your query, then
>  you  
>> can create a new field with chained tokens: "think diffrent apple  
>> computer" -> "thinkdiffrent diffrentapple applecomputer". This would
>   
>> at least allow you to search for such typos. You might want to set  
>> some threadholds like min/max token size and such in your
>  TokenFilter.
>> 
>> 
>> -- 
>> karl
>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> -- 
> View this message in context:
> 
> http://www.nabble.com/spell-checking-for-combined-words-tp14809197p14843700.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/spell-checking-for-combined-words-tp14809197p14853050.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 00:20:39 2008
Return-Path: <java-user-return-32014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77241 invoked from network); 16 Jan 2008 00:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 00:20:38 -0000
Received: (qmail 80425 invoked by uid 500); 16 Jan 2008 00:20:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80394 invoked by uid 500); 16 Jan 2008 00:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80383 invoked by uid 99); 16 Jan 2008 00:20:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 16:20:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 00:20:10 +0000
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1JEw0g-0003sc-Am
	for java-user@lucene.apache.org; Wed, 16 Jan 2008 00:20:02 +0000
Received: from tdev129-206.codetel.net.do ([200.88.129.206])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 00:20:02 +0000
Received: from adets by tdev129-206.codetel.net.do with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 00:20:02 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Alexei Dets <adets@idsk.com>
Subject:  Why there is no IndexWriter.deleteDocument(int docNum) method?
Date:  Tue, 15 Jan 2008 20:15:49 -0400
Organization:  InfoDesk S.A.
Lines: 22
Message-ID:  <fmjibm$98d$1@ger.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7Bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: tdev129-206.codetel.net.do
User-Agent: KNode/0.10.5
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!
I'm curious, is there any particular reason why Lucene offers
IndexReader.deleteDocument(int docNum) but not
IndexWriter.deleteDocument(int docNum)?

Rather typical (I think) potential use case:

for (int i = 0; i < indexReader.maxDoc(); ++i) {
  if (!indexReader.isDeleted(i)) {
    Document doc = indexReader.document(i);
    if (/* some criteria to delete document */) {
      indexWriter.deleteDocument(i);
    }
  }
}

One can say that it is possible to do the same currently using IndexReader
but it is not true if at the same time index is opened by IndexWriter (and
if index is frequently updated this is its normal state).

        Alexei



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 05:05:02 2008
Return-Path: <java-user-return-32015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27679 invoked from network); 16 Jan 2008 05:05:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 05:05:02 -0000
Received: (qmail 94134 invoked by uid 500); 16 Jan 2008 05:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94110 invoked by uid 500); 16 Jan 2008 05:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94099 invoked by uid 99); 16 Jan 2008 05:04:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 21:04:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 05:04:21 +0000
Received: by py-out-1112.google.com with SMTP id a73so155569pye.9
        for <java-user@lucene.apache.org>; Tue, 15 Jan 2008 21:04:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=MLpufMVZOEiLfnyrQbMGch/37/eX9ZobqvaSbnC72rQ=;
        b=bMOY1W9b5WcpX4VNsiq0P6dpUHcXDPRKrTBsdmmOL8voh0l/4Jjc5bBaE1JP1dBQVsFxKC2CK62QTpS5Q/y1nXYm0itX1z/eWnAUlyuC6foJ2ciO2fkCSatCTzA0Tk6Nvn++FfAUEXtO2Nv+COVIgob073nSHy3ZOeMz7PVzlvA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=tZ0ARsaEY3q0SGJXZU8E/soGUz+GPTSLAtBnBWavHpRd78lHdUG6cVLdCmekofpscDUw/wNcx91KEA/QKQm4GQGx8q2HGazAW0ucZ8xLmTVggzxYVPoG3Wg26p9TKuKYVApYCyIutV33yMU6KkCuEhIDb7GLck4ZdTf1t+/ROZA=
Received: by 10.142.212.19 with SMTP id k19mr141917wfg.200.1200459866063;
        Tue, 15 Jan 2008 21:04:26 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Tue, 15 Jan 2008 21:04:25 -0800 (PST)
Message-ID: <c68e39170801152104m22781538m554e2ecb5ef4f8b8@mail.gmail.com>
Date: Wed, 16 Jan 2008 00:04:25 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Why there is no IndexWriter.deleteDocument(int docNum) method?
In-Reply-To: <fmjibm$98d$1@ger.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fmjibm$98d$1@ger.gmane.org>
X-Google-Sender-Auth: cda76200aa0d8ca5
X-Virus-Checked: Checked by ClamAV on apache.org

On Jan 15, 2008 7:15 PM, Alexei Dets <adets@idsk.com> wrote:
> Hi!
> I'm curious, is there any particular reason why Lucene offers
> IndexReader.deleteDocument(int docNum) but not
> IndexWriter.deleteDocument(int docNum)?

Document ids are transient and can change.
To figure out which ids you want to delete, you normally need to
search (requiring a reader).
There has been movement toward adding equivalent functionality to
IndexWriter, and it probably requires exposing IndexReaders at some
point to allow users to do the search to produce the ids to delete.
So in short, it's not at all simple to have an
IndexWriter.deleteDocument() that makes sense.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 07:56:26 2008
Return-Path: <java-user-return-32016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70610 invoked from network); 16 Jan 2008 07:56:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 07:56:26 -0000
Received: (qmail 20830 invoked by uid 500); 16 Jan 2008 07:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20799 invoked by uid 500); 16 Jan 2008 07:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20788 invoked by uid 99); 16 Jan 2008 07:56:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jan 2008 23:56:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.26 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 07:55:43 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0G7tlJL030918
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 08:55:47 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <D44236BC-9B81-4540-A823-B9BDE0BBAFAB@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <14853050.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: spell checking for combined words
Date: Wed, 16 Jan 2008 08:55:47 +0100
References: <14809197.post@talk.nabble.com> <256998.7372.qm@web50308.mail.re2.yahoo.com> <14853050.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


16 jan 2008 kl. 00.33 skrev solr_user:

> I did try the Lucene SpellChecker.  Currently the lucene  
> SpellChecker does
> not have the ability to suggest splitting of combined words.  Is  
> there a
> plan to add this capability to the Lucene SpellChecker any time soon?

Very few plans in this project, but feel free to search the issue  
tracker for spell checker related patches.

> I also did not quite understand your idea of producing N-word  
> shingles and
> then indexing them with the SpellChecker.  How will this help the
> SpellChecker to suggest splitting of words?

Similar as I suggested that you can create shinles in an alternative  
field from your souce data token streams in order to search for the  
typos, you could instread add the shingles to your Lucene contrib  
spell checker dictionary.

Lets say the text you index is "a b c d". Your standard text analysis  
creates the tokens "a", "b", "c" and "d".  Create shingles: "ab", "bc"  
and "cd" and add these as words in the spellchecker suggesting the  
decomposed versions:  "ab" => "a b", "bc" => "b c" and "cd" => "c d".

Try to limit what shingles you add to the dictionary or you will  
probably end up with a huge dictionary.

Please report back with performace of such implementation if you get  
around to it. It could be a great contribution.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 08:06:16 2008
Return-Path: <java-user-return-32017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74983 invoked from network); 16 Jan 2008 08:06:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 08:06:16 -0000
Received: (qmail 27016 invoked by uid 500); 16 Jan 2008 08:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26991 invoked by uid 500); 16 Jan 2008 08:06:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26977 invoked by uid 99); 16 Jan 2008 08:06:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 00:06:00 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.29 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 08:05:47 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0G85dsg043023
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 09:05:40 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <3050C8C4-A6FB-4ECA-85A8-322156AAA2E4@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <92F98030-DBC4-49EA-B167-529A0EF446D3@mac.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: IndexWriter.deleteDocument()
Date: Wed, 16 Jan 2008 09:05:39 +0100
References: <92F98030-DBC4-49EA-B167-529A0EF446D3@mac.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


15 jan 2008 kl. 20.31 skrev Michael Prichard:

> When I run through and delete a few documents from my index, is it  
> wise to call .flush() afterwards?  Or is it better to close the index?

Close means flush, but also releasing the write lock. What to  
usereally  depends on how your service is implemented. Perhaps you  
create and close a new IndexWriter for each command, perhaps you keep  
a writer open at all time, perhaps you have some background thread  
flushing and closing after inactivity.

I hope this helps.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 08:07:12 2008
Return-Path: <java-user-return-32018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75687 invoked from network); 16 Jan 2008 08:07:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 08:07:11 -0000
Received: (qmail 29863 invoked by uid 500); 16 Jan 2008 08:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29835 invoked by uid 500); 16 Jan 2008 08:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29824 invoked by uid 99); 16 Jan 2008 08:06:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 00:06:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.239 as permitted sender)
Received: from [72.14.214.239] (HELO hu-out-0506.google.com) (72.14.214.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 08:06:28 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1181244hub.15
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 00:06:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kD1mUIWey4iuBkca0G6sZO8Szok4p8ZK+KrB9AIWKK8=;
        b=EQPYwW+tzD2ZmR5GfvFK7zP6qpLE/4GjrQdlQ8WrhqAWI6JX+iC4wSJ5BlR0LFEaR9EtsuXiMfTrEAu/JkoT+w+j3NQoBPsphjXpp2tAozrJ7kYGSagkfwMK6S+zqDHe61rb1jSyRurIwblcYsrUKtJw28guK8VWSyJGOq8iJqE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pWbXNgZ7v0Ea8Q8iKuzO9Ks1XaO5BTj5XM+nX6oRbvIl/1onEw94obKnHb4J+wdSQ2L6qgalJkERnYT8Hiy2ijeAOvfezNY44C4nX6Um40A+J+SZWAcAUoFMaofG2GVXkEyTlZH4/w3gw966aN1RS9Utxd2xMv/q3aFBD/X+8Vw=
Received: by 10.82.145.7 with SMTP id s7mr922003bud.7.1200470792537;
        Wed, 16 Jan 2008 00:06:32 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Wed, 16 Jan 2008 00:06:32 -0800 (PST)
Message-ID: <1bcb7c7f0801160006n2047a19dgc06c4ca48ca80d36@mail.gmail.com>
Date: Wed, 16 Jan 2008 10:06:32 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene as a graph store
In-Reply-To: <887558.24754.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17383_11242861.1200470792524"
References: <887558.24754.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17383_11242861.1200470792524
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Not exactly, a document represents an edge, having src and dst node its.
Nodes can be kept in another index or the same one. I can find number of
edges by running a boolean term query.
Currently I am looking for a way to distribute indexes, but in such a way
that when querying you know which data store to look at.

I am testing the % operator on edges.

Consider the following.

edge A: 001 to 002
edge B: 002 to 005

lets say I am using %2. (I have two indices)

edge A is stored in index 1 (001%2=1) as well as index 0 (002%2=0)
edge B is stored in index 0 and 1.

in this scheme, when we are looking for an edge by its source node, we know
which index to look at by %. (the data is replicated - pointless when using
2 indexes, but for 4 it would work nicely)

so instead of running the same query on all of the boxes, we know which
boxes to run by the characteristics of the node.

Any ideas?

Best,
-C.B.





On Jan 15, 2008 6:54 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Aha, I see, a Document represents a node and all other nodes connected to
> it.  So you can really only find 2 nodes connected with an edge with a
> single query, but not, say, the number of edges (degrees?) between any 2
> nodes?
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Cam Bazz <cambazz@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 15, 2008 11:34:20 AM
> Subject: Re: lucene as a graph store
>
> well lets say I have a list representation of a graph like
>
> src:1 dst:2
> src:2 dst:3
> src:1 dst 3
>
> outgoingEdgesOf(1) returns 2 and 3.
> incomingEdgesOf(3) returns 1 and 2.
>
> in a lucene index it does work out nice with term queries. I can search
>  for
> incoming outgoing or edgeExist with a boolean term query.
>
> Best.
>
>
> On Jan 15, 2008 6:22 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
>
> > Hi,
> >
> >
> > ----- Original Message ----
> > From: Cam Bazz <cambazz@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, January 15, 2008 8:50:07 AM
> > Subject: Re: lucene as a graph store
> >
> > Usually for implementing things like page rank, or doing centrality
> >  metric
> > calculations or maybe dijkstras shortest term, this kind of (list of
> >  edges)
> > graph is not best at performance.
> > I like to use lucene for simple operations like neighboors of this
> >  node, or
> > 2 degree neighboors of this node.
> >
> > OG: Neighbours of a node?  Can you tell us more about what you use
>  and how
> > you use Lucene in this context?
> >
> > is updating an index costly operation in lucene? I dont think there
> >  will too
> > much updates, but rather deletes.
> >
> > when I delete documents from an index what things should I be careful
> >  about.
> >
> > OG: Note that deletes are not removed from the index/disk
>  immediately.
> >  Rather, their doc IDs are stored and those docs are skipped during
> > searches.  If you have a large number of deletes, you may want to
>  optimize
> > the index, so that this list of doc IDs to skip doesn't cost you.
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > On Jan 15, 2008 3:31 PM, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> > > I guess the question comes down to what kind of things are you
>  going
> > > to do w/ this graph?  How often are you updating links, etc?  I
>  can't
> > > say Lucene was designed for this kind of thing, but I am constantly
> > > amazed at what people use Lucene for, so I won't say it can't be
> > > done.  I don't know how efficient it would be for doing things like
> > > PageRank or other graph algorithms, but I would be interesting in
> > > hearing more about what you have in mind.
> > >
> > > Lucene doesn't do much caching at the document level, but that is
> > > fairly easy to implement, but it does bring some terms, etc. into
> > > memory, and you may have a look at the FieldCache.
> > >
> > > -Grant
> > >
> > > On Jan 15, 2008, at 7:17 AM, Cam Bazz wrote:
> > >
> > > > Hello;
> > > >
> > > > I like to use lucene as a graph store. The graph representation
>  is
> >  a
> > > > list of
> > > > edges. Consider the code below:
> > > >
> > > >        final int commitCount = 16 * 1024;
> > > >        final int numObj =  1024 * 1024;
> > > >
> > > >        Analyzer analyzer = new KeywordAnalyzer();
> > > >        FSDirectory directory = FSDirectory.getDirectory("c:\
> > > > \LuceneAdd");
> > > >        IndexWriter writer = new IndexWriter(directory, analyzer,
> > > > true);
> > > >
> > > >        Document doc;
> > > >        long start = System.currentTimeMillis();
> > > >
> > > >        Random r = new Random(System.currentTimeMillis());
> > > >
> > > >        for(int i=0; i<numObj; i++) {
> > > >            doc = new Document();
> > > >            doc.add(new Field("srcKey",
>  NumberTools.longToString(i),
> > > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > > >            doc.add(new Field("dstKey",
> > > > NumberTools.longToString(r.nextInt(numObj)),
> > > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > > >            doc.add(new Field("linkKey",
> > > > NumberTools.longToString(r.nextInt(16)),
> > > > Field.Store.YES, Field.Index.UN_TOKENIZED));
> > > >            doc.add(new Field("linkValue",
>  NumberTools.longToString(
> > > > r.nextInt(256)), Field.Store.YES, Field.Index.UN_TOKENIZED));
> > > >
> > > >           writer.addDocument(doc);
> > > >
> > > >            if(i%commitCount==0) {
> > > >                 long now = System.currentTimeMillis();
> > > >                 System.out.println(i + ":" + (now-start));
> > > >                 start = now;
> > > >            }
> > > >
> > > >        }
> > > >
> > > >        writer.optimize();
> > > >        writer.close();
> > > >        directory.close();
> > > >
> > > >
> > > > Basically I am adding a large number of documents from srcKey = i
> >  to
> > > > dstKey
> > > > = random and two other string fields - linkKey and linkValue.
> > > >
> > > > Compared to a normal database store, or an oodbms such as perst
>  or
> > > > db4o -
> > > > lucene takes longer to index.
> > > > However, it is much faster in searching, finding, retrieving
> >  records.
> > > >
> > > > I can make 16384 random lookups over 1Million entries in 0.8
> > > > seconds. This
> > > > is excellent time. (I have been benchmarking for a long time)
> > > >
> > > > Typically, when number of objects in BTree based structure in an
> > > > oodbms for
> > > > example increase, the search and add times also increase.
> > > >
> > > > Will lucene have the same problem and how can I overcome it if it
> > > > does.
> > > > Looking at the above code - does anyone has any recomendations
> > > > to improve index performance. (also what can I do to improve
>  search
> > > > performance)
> > > >
> > > > While searching with an indexsearcher - does lucene do any
>  caching?
> > > > usually
> > > > MRU caches are used to accomplish this.
> > > >
> > > > Any ideas,help,recomendations greatly appreciated.
> > > >
> > > > Best,
> > > > -C.B.
> > >
> > > --------------------------
> > > Grant Ingersoll
> > > http://lucene.grantingersoll.com
> > > http://www.lucenebootcamp.com
> > >
> > > Lucene Helpful Hints:
> > > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > > http://wiki.apache.org/lucene-java/LuceneFAQ
> > >
> > >
> > >
> > >
> > >
> > >
>  ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17383_11242861.1200470792524--

From java-user-return-32019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 08:25:01 2008
Return-Path: <java-user-return-32019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85670 invoked from network); 16 Jan 2008 08:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 08:25:01 -0000
Received: (qmail 59496 invoked by uid 500); 16 Jan 2008 08:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59449 invoked by uid 500); 16 Jan 2008 08:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59438 invoked by uid 99); 16 Jan 2008 08:24:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 00:24:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of coolgeng410@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 08:24:20 +0000
Received: by an-out-0708.google.com with SMTP id c5so36784anc.49
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 00:24:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=y/hhzHj8JLZq8wOnuYwBBLHFlf28fEhbg8Yg7M/iDBI=;
        b=ucH3i3Ky0Jp5Qrawks6EpMFF2J1FQ3ufdeZmfglGvT9xxiTyLbbGIT9VrZaJrzYqNRKupIzIWO1pYiLRozC+3N0FWbdqusqd4oUohHqjFDQ7Txxs7hSPVeHMF2sOSELloW3foSz5mjZG0tCPxKJgbU0LKZOr3y8L/JO3etfVPrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=U6w3j17wv/heoLHAnUNt/V7Zo5UT9AJoXNGeYaADIQDQjlPIEQoHgTkQqbCzGg3o+PvDMsKhBaxv7SuyIslbLuEaISJQ9yyWgtcVlcFNbBLd6D1Sa8BK+WT94ACyZPSzlehWiyvkvIAhKQij0ESjx77mJ5OA0la1XmxHvpdQTDU=
Received: by 10.100.225.19 with SMTP id x19mr1133586ang.9.1200471864692;
        Wed, 16 Jan 2008 00:24:24 -0800 (PST)
Received: by 10.100.44.7 with HTTP; Wed, 16 Jan 2008 00:24:24 -0800 (PST)
Message-ID: <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com>
Date: Wed, 16 Jan 2008 16:24:24 +0800
From: "coolgeng coolgeng" <coolgeng410@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How?
In-Reply-To: <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6759_29790407.1200471864650"
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com>
	 <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6759_29790407.1200471864650
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

firstly, I submit the query like "select * from [tablename]". And in this
table, there are around  30th columns and  40,000 rows data. And I use the
standrandAnalyzer to generate the index. And as my experience, it cost 200M
disk to store the index.

for example, I will search the "Name" field in the index and it does work
perfectly. But when I create an index on the 100,000,000 data. It will cost
too much time to index creation. So is there some good solution to solve
this?
thanks


On Jan 15, 2008 10:47 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> You really have to tell us more about what you're trying to do
> to get a meaningful reply.
>
> What do you mean you create the index on a table? Are you
> using some sort of embedded SQL to query the table then
> creat a lucene index? How big is the index? What search
> are you submitting? What does your search code look like?
>
> Best
> Erick
>
> On Jan 14, 2008 10:47 PM, coolgeng coolgeng <coolgeng410@gmail.com> wrote:
>
> > Hi guys,
> >     Some problems confuse me. When I would like to index some data from
> a
> > table in database. While I create the index on this table, the
>  searching
> > job keeps going . How can I work out it?
> > By the way, the number of data is around 1 hundred million.
> >
> > --
> > Best Regards
> > Cooper Geng
> >
>



-- 
Best Regards
Cooper Geng

------=_Part_6759_29790407.1200471864650--

From java-user-return-32020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 09:23:38 2008
Return-Path: <java-user-return-32020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6795 invoked from network); 16 Jan 2008 09:23:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 09:23:37 -0000
Received: (qmail 43149 invoked by uid 500); 16 Jan 2008 09:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43121 invoked by uid 500); 16 Jan 2008 09:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43110 invoked by uid 99); 16 Jan 2008 09:23:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 01:23:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 09:22:56 +0000
Received: by mu-out-0910.google.com with SMTP id g7so182362muf.0
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 01:23:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=kOkCWcCS4YgXXkWy9RMO6olkFHKzoMadK7xMx/F6qX8=;
        b=XeIi0ntSMPBZ1eZtGs0fpYOfKG9yceyRHwaR3U/8xXQOfbNCXt8KrvKBUH9sA00DfPflLlw4KrWg1ITiekWVy2aNsUtQuJfJ35584vYJKqEx8MCB1khqlEETb/OyJ/9LLeTkrGo6AnfiEofnGVnBOx1QDACDoyO5AoRrE8iBPmM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WcWc5GQZitimtV2Tm0ItXeFp8Ncp6yFysc4o7Y6bU+Nse3+zBepmGdayg+dOnJ0HyO5vFNTqu+zYGcxpM8A6Lh9QI6Z97Ll1kSEkpbQzYhDdUeIhZ/icmsDD7VgMNRxuWzheA2UA2nFZTWQe+ZAubySpM8YCRrioHTxpQgXK7w8=
Received: by 10.78.161.4 with SMTP id j4mr392763hue.49.1200475379416;
        Wed, 16 Jan 2008 01:22:59 -0800 (PST)
Received: by 10.78.172.16 with HTTP; Wed, 16 Jan 2008 01:22:59 -0800 (PST)
Message-ID: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
Date: Wed, 16 Jan 2008 14:52:59 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: constructing query from string
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16257_20451095.1200475379411"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16257_20451095.1200475379411
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi ,
    I want to construct a query from string. how can I do it??  Actually i
saved a query(a boolean query) as string (using query.toString()).
Is there a way to reconstruct the query from the string i saved? How can i
add more clauses to the  reconstructed query?
Thanks in advance.

Prabin

------=_Part_16257_20451095.1200475379411--

From java-user-return-32021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 09:53:20 2008
Return-Path: <java-user-return-32021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18711 invoked from network); 16 Jan 2008 09:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 09:53:20 -0000
Received: (qmail 87716 invoked by uid 500); 16 Jan 2008 09:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87289 invoked by uid 500); 16 Jan 2008 09:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87278 invoked by uid 99); 16 Jan 2008 09:53:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 01:53:03 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of benjams@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 09:52:50 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id m0G9qgON477150
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 09:52:42 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m0G9qg3n2662474
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 10:52:42 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m0G9qfBv031451
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 10:52:41 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m0G9qfm3031446
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 10:52:41 +0100
In-Reply-To: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
Subject: Changing the Score of a Document.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF0AF3030A.62471322-ONC22573D2.0035CD95-C22573D2.0036083C@il.ibm.com>
From: Benjamin Sznajder <benjams@il.ibm.com>
Date: Wed, 16 Jan 2008 11:50:10 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 16/01/2008
 11:52:41
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I am sure that this topic has been once discusses on this forum, so, sorry
to ask again!

Let's suppose a Document d1 containing the five terms:
a
b
C
D


and a query (a AND b).

The document d1 is relevant and will be retrieved and typically, its score
will be a function tf*idf relative to the terms 'a' and 'b'.

I am interesting to score the document *not* according a and b, but
according the terms C and D.
How can we do that?

Thanks
Benjamin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 10:57:56 2008
Return-Path: <java-user-return-32022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58862 invoked from network); 16 Jan 2008 10:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 10:57:56 -0000
Received: (qmail 90199 invoked by uid 500); 16 Jan 2008 10:57:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90174 invoked by uid 500); 16 Jan 2008 10:57:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90163 invoked by uid 99); 16 Jan 2008 10:57:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 02:57:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jan 2008 10:57:14 +0000
Received: (qmail invoked by alias); 16 Jan 2008 10:57:18 -0000
Received: from e178089192.adsl.alicedsl.de (EHLO msrvcn04) [85.178.89.192]
  by mail.gmx.net (mp008) with SMTP; 16 Jan 2008 11:57:18 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/pAspWxfjpTiR4hOyiDh8oTwxQydOIQIruOQFVXT
	zt3eFVEFWW5MpG
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com> <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com> <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com>
Subject: RE: How?
Date: Wed, 16 Jan 2008 11:57:19 +0100
Message-ID: <9EB879983EBF4102BE52A5FEC308A193@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchYGUtABTpcM6BtS3KELd9epugUXAAFRJng
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> firstly, I submit the query like "select * from [tablename]". 
> And in this
> table, there are around  30th columns and  40,000 rows data. 
> And I use the
> standrandAnalyzer to generate the index. 

Why don't you use a database index?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 12:49:03 2008
Return-Path: <java-user-return-32023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28710 invoked from network); 16 Jan 2008 12:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 12:49:03 -0000
Received: (qmail 50213 invoked by uid 500); 16 Jan 2008 12:48:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50114 invoked by uid 500); 16 Jan 2008 12:48:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50103 invoked by uid 99); 16 Jan 2008 12:48:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 04:48:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jan 2008 12:48:33 +0000
Received: (qmail invoked by alias); 16 Jan 2008 12:48:26 -0000
Received: from e178089192.adsl.alicedsl.de (EHLO msrvcn04) [85.178.89.192]
  by mail.gmx.net (mp024) with SMTP; 16 Jan 2008 13:48:26 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/5OedqQTP5GfH1sKUN6XRKSCRIib45neiGQx1Axa
	jb2lj4u5AEBYCo
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: IndexWriter#addIndexes
Date: Wed, 16 Jan 2008 13:48:27 +0100
Message-ID: <1C489B53BBD940E0BFD405A76BAA3C82@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchYPb1oXSt0LSujSEayqCSXrWoiHA==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

looking into the code of IndexMergeTool I saw this:

IndexWriter writer = new IndexWriter(mergedIndex, new SimpleAnalyzer(),
true);

Then the indexes are added to this new index.

My question is:

How does the Analyzer of this IndexWriter instance effect the merge process?

It seems that is doesn't matter, right?

Thank you.


Complete source of IndexMergeTool:

	public static void main(String args[]) throws IOException {
		if (args.length < 3) {
			System.err.println("Usage: IndexMergeTool
<mergedIndex> <index1> <index2> [index3] ...");
			System.exit(1);
		}
		File mergedIndex = new File(args[0]);
		IndexWriter writer = new IndexWriter(mergedIndex, new
SimpleAnalyzer(), true);
		Directory indexes[] = new Directory[args.length - 1];
		for (int i = 1; i < args.length; i++)
			indexes[i - 1] = FSDirectory.getDirectory(args[i],
false);

		System.out.println("Merging...");
		writer.addIndexes(indexes);
		System.out.println("Optimizing...");
		writer.optimize();
		writer.close();
		System.out.println("Done.");
	}
}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 14:15:34 2008
Return-Path: <java-user-return-32024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68671 invoked from network); 16 Jan 2008 14:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 14:15:33 -0000
Received: (qmail 4261 invoked by uid 500); 16 Jan 2008 14:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4230 invoked by uid 500); 16 Jan 2008 14:15:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4219 invoked by uid 99); 16 Jan 2008 14:15:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 06:15:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 14:14:52 +0000
Received: by fk-out-0910.google.com with SMTP id z23so78606fkz.5
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 06:14:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Uo2RIHr9QwhnXir6yUOfLBuj2bpwYk4vcgKXvLOz8ho=;
        b=INsIPMzOWtZh2rwz8xTIXJ0XcXKGUQb0M1fcvPJqpZLy9oMkfmSzNcq+h+MITfnLycMu8VgYwT9mmK94XJHNoveVc5xMEBeJOmdnxXipZ61fMkuaydZqV52OcNMVQu4L8XtLJpwbTheyg34tid1zSmoMpVuGQcuPoAfSKllrydM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TVCv6MEYT0aQdMJ47uKNOAr4zqQ7C/rEnF9tqBZwcVdo7uD26dPFSFkyVeYAwGPg7cCCzI5CB3n9Md3Ps8cU/rOPUUMDlIND1LNbDQcQJVCCQq8tUpKFf8ySiD8H7b9N7TDxHVGWIDjyJM4Y6tu7Ka1NErvLS07xZz1C61ixci0=
Received: by 10.82.159.15 with SMTP id h15mr1457155bue.36.1200492895996;
        Wed, 16 Jan 2008 06:14:55 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 16 Jan 2008 06:14:55 -0800 (PST)
Message-ID: <359a92830801160614j2cf1e171vc8f1c54b58b6ec76@mail.gmail.com>
Date: Wed, 16 Jan 2008 09:14:55 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing query from string
In-Reply-To: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18273_28074200.1200492895987"
References: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18273_28074200.1200492895987
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As I remember from various threads, toString is more of
a debugging aid and you cannot completely rely on the
transformation from a parsed query -> tostring -> parsed query
to be reliable. But this is "something I remember", so take
it with a grain of salt (you might want to search the mail
archive to see if my memory is correct).

That said, use BooleanQuery to add as many clauses in
as many ways as you want.

Actually, I don't know how I'd go about storing a programmatically
constructed query, I'd sure like to know if there's a way. You could
certainly store the original query if you were taking user input and
parsing it...

Best
Erick

On Jan 16, 2008 4:22 AM, prabin meitei <prabin.meitei@gmail.com> wrote:

> Hi ,
>    I want to construct a query from string. how can I do it??  Actually i
> saved a query(a boolean query) as string (using query.toString()).
> Is there a way to reconstruct the query from the string i saved? How can i
> add more clauses to the  reconstructed query?
> Thanks in advance.
>
> Prabin
>

------=_Part_18273_28074200.1200492895987--

From java-user-return-32025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 14:23:22 2008
Return-Path: <java-user-return-32025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71769 invoked from network); 16 Jan 2008 14:23:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 14:23:22 -0000
Received: (qmail 15549 invoked by uid 500); 16 Jan 2008 14:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15511 invoked by uid 500); 16 Jan 2008 14:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15500 invoked by uid 99); 16 Jan 2008 14:23:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 06:23:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 14:22:41 +0000
Received: by fg-out-1718.google.com with SMTP id d23so322494fga.27
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 06:22:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=A2k3dadt+DOxJ3tNDXz6xgsoklzBRmHVlvmSXzEOVRg=;
        b=MPHvZn0YTsSdqxi2Ew7zAHrXhywkpKxGXG6fYFC1ZiXF0U1ey3OjMQNh7rl/EXVjc0OBhXrrgZg7HcuOLyd2UHGgB5FMDhNdRuQECsOImvR/pHF1ijyT+X+p3j6fcLERqkVAexD0pwyg1k4EG3BC5vlNBlOALngxaTXOHZgt5WM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=caVbQPOxNG2EjE2aLW70+shyNOTCSowxKwLYCeo/wlzjU3/G9CXOaGSpNEor7N4IQAQi6UjlnmFzda2z2jS9bZ4ssW3yCeXsFcN23g977ovCqN5dgyL5OS9DZ2e9aTZS6a6VTCy2SUffVZfeYmM6Is1qHLj1D1NPz/SCICSiHdU=
Received: by 10.82.187.2 with SMTP id k2mr1497931buf.19.1200493366464;
        Wed, 16 Jan 2008 06:22:46 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 16 Jan 2008 06:22:46 -0800 (PST)
Message-ID: <359a92830801160622v46add8f3hc8987e0452061f27@mail.gmail.com>
Date: Wed, 16 Jan 2008 09:22:46 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How?
In-Reply-To: <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18300_11257639.1200493366458"
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com>
	 <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com>
	 <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18300_11257639.1200493366458
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As I read your latest post, it's not *searching* that's taking too long, but
*indexing*.

Well, 100,000,000 rows is a lot. It'll never be just a few minutes. But I
also
have to ask whether the most time is being spent actually indexing or
fetching from the database? You could time this easily by just skipping the
indexing step and measuring say the time to fetch the first 1,000,000 rows
and comparing that against fetching *and* indexing.

The whole point of a search engine is to trade some up-front time
indexing for faster searching.

Otherwise, have you looked at this page?

http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Also, 200M for 40K rows seems like a lot of disk space. Are you
storing all the data in the index? And do you need to?

Best
Erick

On Jan 16, 2008 3:24 AM, coolgeng coolgeng <coolgeng410@gmail.com> wrote:

> firstly, I submit the query like "select * from [tablename]". And in this
> table, there are around  30th columns and  40,000 rows data. And I use the
> standrandAnalyzer to generate the index. And as my experience, it cost
> 200M
> disk to store the index.
>
> for example, I will search the "Name" field in the index and it does work
> perfectly. But when I create an index on the 100,000,000 data. It will
> cost
> too much time to index creation. So is there some good solution to solve
> this?
> thanks
>
>
> On Jan 15, 2008 10:47 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > You really have to tell us more about what you're trying to do
> > to get a meaningful reply.
> >
> > What do you mean you create the index on a table? Are you
> > using some sort of embedded SQL to query the table then
> > creat a lucene index? How big is the index? What search
> > are you submitting? What does your search code look like?
> >
> > Best
> > Erick
> >
> > On Jan 14, 2008 10:47 PM, coolgeng coolgeng <coolgeng410@gmail.com>
> wrote:
> >
> > > Hi guys,
> > >     Some problems confuse me. When I would like to index some data
> from
> > a
> > > table in database. While I create the index on this table, the
> >  searching
> > > job keeps going . How can I work out it?
> > > By the way, the number of data is around 1 hundred million.
> > >
> > > --
> > > Best Regards
> > > Cooper Geng
> > >
> >
>
>
>
> --
> Best Regards
> Cooper Geng
>

------=_Part_18300_11257639.1200493366458--

From java-user-return-32026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 15:13:49 2008
Return-Path: <java-user-return-32026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65424 invoked from network); 16 Jan 2008 15:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 15:13:49 -0000
Received: (qmail 971 invoked by uid 500); 16 Jan 2008 15:13:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 693 invoked by uid 500); 16 Jan 2008 15:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 682 invoked by uid 99); 16 Jan 2008 15:13:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 07:13:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of coolgeng410@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 15:13:08 +0000
Received: by an-out-0708.google.com with SMTP id c5so62008anc.49
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 07:13:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=QsjS8bPn1Wz3XlQVRvYn1pjvkw8qyYX6HfAGYHNzIa0=;
        b=aOE/rOySgmrbOkOcfiuF9i3bINb10qtMMr5AK4YthgGwm/Zur9aZ9FSjcuLtHGM1pC0vBEH8uLWrtT2Zhta+c91bDxmhF2ATm9z+enoFufhk+s6Uq02QHZib1k2CiVELkUZnbnZIqFB8nI1ZnhqdJxemHxqnSHqxmuYVR/Z2lVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GhuisJwJZxBo/W0QaZkM8I8LL1dzj5m13XzeLKa8+lZ7Eybbva9ajdwVZShDtmOxdCfv5vAuxgLpAS4z4/HQ2EULDciGlbWdROMqijdA9I2Oiz79HpZzGa+0SUnqrSaRT9ypWDlkhkbOLX9ZF0LhTe4wCXU0d7KSPTWHMc1HsQY=
Received: by 10.100.247.14 with SMTP id u14mr1841424anh.85.1200496393308;
        Wed, 16 Jan 2008 07:13:13 -0800 (PST)
Received: by 10.100.105.12 with HTTP; Wed, 16 Jan 2008 07:13:13 -0800 (PST)
Message-ID: <e7dd79a40801160713n3847f464y590e1829870a917b@mail.gmail.com>
Date: Wed, 16 Jan 2008 23:13:13 +0800
From: "coolgeng coolgeng" <coolgeng410@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How?
In-Reply-To: <9EB879983EBF4102BE52A5FEC308A193@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7315_13307209.1200496393300"
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com>
	 <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com>
	 <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com>
	 <9EB879983EBF4102BE52A5FEC308A193@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7315_13307209.1200496393300
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can use the cluster index on the table. But you can create only one
cluster index in a table. In this table , lots of data need to search, so I
choose the Lucene to do that.


On Jan 16, 2008 6:57 PM, <spring@gmx.eu> wrote:

> > firstly, I submit the query like "select * from [tablename]".
> > And in this
> > table, there are around  30th columns and  40,000 rows data.
> > And I use the
> > standrandAnalyzer to generate the index.
>
> Why don't you use a database index?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards
Cooper Geng

------=_Part_7315_13307209.1200496393300--

From java-user-return-32027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 15:38:21 2008
Return-Path: <java-user-return-32027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79744 invoked from network); 16 Jan 2008 15:38:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 15:38:21 -0000
Received: (qmail 62236 invoked by uid 500); 16 Jan 2008 15:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62195 invoked by uid 500); 16 Jan 2008 15:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62183 invoked by uid 99); 16 Jan 2008 15:38:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 07:38:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 15:37:40 +0000
Received: by fg-out-1718.google.com with SMTP id d23so344044fga.27
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 07:37:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=jRCaGzf7UofBB18EmYT7zuRop+w5y1uVNhC3DKne7Fs=;
        b=bNx6wS3rWkfftSotpXRgeSaJVNxtdb7cgY5efG43ketpidItyEUN8wpp/TSli2gnOaO2YuuW3t6cTqh1q2QUefdTBBPJQwDPdVEdjEWIkt34+X8pwgLWaaL38fFaX90BdrGAB4iOQNMjQy0cRht3vIZEQyC11Awez35/hrHY/2Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=cgX9uQRDEsy9WhY+GmZ9ZG77vNw7GpIm7cT/tREM0t7vy1MLzcKF3Sjgt8P1DDo3aqk442yvEfJ5vqSI4Nm99wJCjc+ge4MwMXbgNvRiQgnrOFLOkRl1/VBNwP/Q2q1ErEPRJvnovpD5gFBdznoHEjW3p11MZbHgKM48oD+hcDI=
Received: by 10.82.107.15 with SMTP id f15mr1680628buc.0.1200497864786;
        Wed, 16 Jan 2008 07:37:44 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Wed, 16 Jan 2008 07:37:44 -0800 (PST)
Message-ID: <1bcb7c7f0801160737s7507afep2e95657a9d34ebac@mail.gmail.com>
Date: Wed, 16 Jan 2008 17:37:44 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: NumberTools
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19066_2730965.1200497864781"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19066_2730965.1200497864781
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

When storing fields to serve as id's - is it better to use
NumberTools.longToString(id) or just store the id as a field?
I have noticed when using NumberTools to store number as a string, this
makes range queries easier, however - you end up storing a long string.
Considering millions of ids, would it be faster to store them just as a
string representing this number. (would take less space, since you store 1,2
instead of 00000000001, etc.)
Best Regards,
-C.B.

------=_Part_19066_2730965.1200497864781--

From java-user-return-32028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 15:44:37 2008
Return-Path: <java-user-return-32028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84425 invoked from network); 16 Jan 2008 15:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 15:44:36 -0000
Received: (qmail 77903 invoked by uid 500); 16 Jan 2008 15:44:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77875 invoked by uid 500); 16 Jan 2008 15:44:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77864 invoked by uid 99); 16 Jan 2008 15:44:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 07:44:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jan 2008 15:44:07 +0000
Received: (qmail invoked by alias); 16 Jan 2008 15:43:59 -0000
Received: from e178089192.adsl.alicedsl.de (EHLO msrvcn04) [85.178.89.192]
  by mail.gmx.net (mp028) with SMTP; 16 Jan 2008 16:43:59 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19eJ3guanZezxe2hmyYfl0OlII61V4f+6Rt45sY4U
	g95DJoS7X7X6y0
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com> <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com> <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com> <9EB879983EBF4102BE52A5FEC308A193@msrvcn04> <e7dd79a40801160713n3847f464y590e1829870a917b@mail.gmail.com>
Subject: RE: How?
Date: Wed, 16 Jan 2008 16:44:02 +0100
Message-ID: <8CDF41E72502445AB193A47A0F4F765F@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e7dd79a40801160713n3847f464y590e1829870a917b@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchYUmSxbnTD5oO+Sg+5lnifsZypngAAu6UA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> I can use the cluster index on the table. But you can create only one
> cluster index in a table. In this table , lots of data need 
> to search, so I
> choose the Lucene to do that.

Why do you need a clustered index in the database?
A non-clustered would do the job as well.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 16:43:21 2008
Return-Path: <java-user-return-32029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13134 invoked from network); 16 Jan 2008 16:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 16:43:21 -0000
Received: (qmail 89593 invoked by uid 500); 16 Jan 2008 16:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89563 invoked by uid 500); 16 Jan 2008 16:43:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89552 invoked by uid 99); 16 Jan 2008 16:43:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 08:43:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.214.32.226] (HELO smtp.cross-solution.de) (85.214.32.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 16:42:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp.cross-solution.de (Postfix) with ESMTP id 211A2D9808E
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 17:42:41 +0100 (CET)
Received: from smtp.cross-solution.de ([127.0.0.1])
	by localhost (smtp.cross-solution.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 24659-08 for <java-user@lucene.apache.org>;
	Wed, 16 Jan 2008 17:42:33 +0100 (CET)
Received: from smtp.cross-solution.de (localhost [127.0.0.1])
	by smtp.cross-solution.de (Postfix) with ESMTP id 7B820D98005
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 17:42:33 +0100 (CET)
Received: from 84.176.98.189
        (SquirrelMail authenticated user gurito)
        by smtp.cross-solution.de with HTTP;
        Wed, 16 Jan 2008 17:42:33 +0100 (CET)
Message-ID: <56856.84.176.98.189.1200501753.squirrel@smtp.cross-solution.de>
Date: Wed, 16 Jan 2008 17:42:33 +0100 (CET)
Subject: Lucene + Hadoop
From: "David Vazquez Landa" <vazquez@cross-solution.de>
To: java-user@lucene.apache.org
Reply-To: vazquez@cross-solution.de
User-Agent: SquirrelMail/1.4.8
MIME-Version: 1.0
Content-Type: text/plain;charset=utf-8
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Uhmm... A simple question:

I have a lucene index (the directory with the segment* files) in HDFS.
This index is created by Nutch (who acesses files in HDFS seamlessly). My
question is if there is a way of reading this Lucene Index without having
to copy it to the local filesystem first...

Thanks :D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 16:50:57 2008
Return-Path: <java-user-return-32030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16019 invoked from network); 16 Jan 2008 16:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 16:50:57 -0000
Received: (qmail 7182 invoked by uid 500); 16 Jan 2008 16:50:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7152 invoked by uid 500); 16 Jan 2008 16:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7141 invoked by uid 99); 16 Jan 2008 16:50:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 08:50:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 16:50:14 +0000
Received: from [192.168.1.100] (static-62-233-204-250.devs.futuro.pl [62.233.204.250])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m0GGoTh06869
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 10:50:29 -0600
Message-ID: <478E35C8.6020403@getopt.org>
Date: Wed, 16 Jan 2008 17:50:16 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene + Hadoop
References: <56856.84.176.98.189.1200501753.squirrel@smtp.cross-solution.de>
In-Reply-To: <56856.84.176.98.189.1200501753.squirrel@smtp.cross-solution.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

David Vazquez Landa wrote:
> Uhmm... A simple question:
> 
> I have a lucene index (the directory with the segment* files) in HDFS.
> This index is created by Nutch (who acesses files in HDFS seamlessly). My
> question is if there is a way of reading this Lucene Index without having
> to copy it to the local filesystem first...

Yes - see org.apache.nutch.indexer.FsDirectory. However, you will not 
like the performance, it's much slower than using the index locally.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 17:28:33 2008
Return-Path: <java-user-return-32031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52924 invoked from network); 16 Jan 2008 17:28:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 17:28:33 -0000
Received: (qmail 69395 invoked by uid 500); 16 Jan 2008 17:28:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69040 invoked by uid 500); 16 Jan 2008 17:28:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69028 invoked by uid 99); 16 Jan 2008 17:28:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 09:28:17 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.237.202.18] (HELO deframx18.softcom.dk) (80.237.202.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 17:28:04 +0000
Received: from xyz.ne.cision.com (195.149.155.20) by deframx18.softcom.dk (envelope-from <marcus.falk@cision.com>) with ESMTP. tag msg.1200504476.660730.10018
 (Processed in 0.104841 secs); 16 Jan 2008 17:27:56 -0000
X-SoftScan-Status: clean
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C85865.2162DDE1"
Subject: Inverted search / Search on profilenet
Date: Wed, 16 Jan 2008 18:27:54 +0100
Message-ID: <9AE28E104993A4438ED06F057176FD5801437F9B@STHMAIL01.emea2.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inverted search / Search on profilenet
Thread-Index: AchYZSD/rFjss8tcSUyhGNuATyR7Ww==
From: "Marcus Falk" <marcus.falk@cision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C85865.2162DDE1
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi again,=20

=20

Today we are hosting a 300 million large search index without any
problems in a lucene environment, with just some customization in the
lucene api for ranking etc...=20

=20

So we are really satisfied with lucene.=20

=20

We also have the demands to search with documents on profiles we are
currently using verity (autonomy) for this, where we store the profiles
in the index and are using the document as query.=20

The verity api we are using seems to have some internal threading
problems (race conditions) so we need to find another way to perform
those kind of searches.=20

=20

Does anybody have any ideas of any api that could do this for us? Any
ideas on how lucene could be modified to do this kind of searches?

=20

The volumes are around 300k full length articles distributed some what
evenly over a 24h period on a 50 k profilenet.

=20

=20

/Mvh

Marcus

=20

=20

=20


------_=_NextPart_001_01C85865.2162DDE1--


From java-user-return-32032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 18:09:14 2008
Return-Path: <java-user-return-32032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88360 invoked from network); 16 Jan 2008 18:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 18:09:14 -0000
Received: (qmail 43096 invoked by uid 500); 16 Jan 2008 18:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43067 invoked by uid 500); 16 Jan 2008 18:08:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43056 invoked by uid 99); 16 Jan 2008 18:08:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 10:08:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.88] (HELO web26014.mail.ukl.yahoo.com) (217.12.10.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jan 2008 18:08:31 +0000
Received: (qmail 39609 invoked by uid 60001); 16 Jan 2008 18:08:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=AiPzAMa1CW7ALN/jTmfY6ca8sT8zpBkIn4y2hzBs2h8sKw9nERpqe/qUaG+uqWdVBMuQEzBdnCO4IGA8F1kddeTqWQoknwykT2nPZFkyjshD1z1S6EvmPwisc4U5b+CVhT0pwc9CNZQxhbF/RT7lw9s6Vy6ai7/zErZbvoqbg0g=;
X-YMail-OSG: GO9p0zMVM1k.6SDubIAty1OBge66iGcaE7xu3kFS2UhxN2TkkR4e_cBjBRzWHgUZ.JyMtl.t1kcXi5.6RnHcNsRmsBiZSKBlAQ22V_TvvTR3pF4m9VAlyNiF0sQ-
Received: from [193.36.230.96] by web26014.mail.ukl.yahoo.com via HTTP; Wed, 16 Jan 2008 18:08:32 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Wed, 16 Jan 2008 18:08:32 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: NumberTools
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <744686.38902.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Interesting question. Does zero-padding make primary key lookups faster or =
slower in lucene?=0A=0AFrom my tests it would seem that non-padded keys are=
 quicker to lookup than zero-padded ones (tested doing random access on ind=
exes of varying sizes up to 5m unique keys).=0AHowever I imagine there coul=
d come a point where zero padding might perform better because the number o=
f binary chops required to find records in non-padded keys would be ineffic=
ient due to the lexicographic sort order. I'm sure there's a theoretical wa=
y of proving/disproving this notion but it might be quicker to just run up =
a test rig for the scale of index you need and benchmarking.=0A=0ACheers=0A=
Mark=0A=0A=0A----- Original Message ----=0AFrom: Cam Bazz <cambazz@gmail.co=
m>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, 16 January, 2008 3:=
37:44 PM=0ASubject: NumberTools=0A=0AHello,=0A=0AWhen storing fields to ser=
ve as id's - is it better to use=0ANumberTools.longToString(id) or just sto=
re the id as a field?=0AI have noticed when using NumberTools to store numb=
er as a string, this=0Amakes range queries easier, however - you end up sto=
ring a long string.=0AConsidering millions of ids, would it be faster to st=
ore them just as a=0Astring representing this number. (would take less spac=
e, since you=0A store 1,2=0Ainstead of 00000000001, etc.)=0ABest Regards,=
=0A-C.B.=0A=0A=0A=0A=0A=0A      ___________________________________________=
_______________=0ASent from Yahoo! Mail - a smarter inbox http://uk.mail.ya=
hoo.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 18:14:10 2008
Return-Path: <java-user-return-32033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91269 invoked from network); 16 Jan 2008 18:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 18:14:10 -0000
Received: (qmail 50995 invoked by uid 500); 16 Jan 2008 18:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50965 invoked by uid 500); 16 Jan 2008 18:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50954 invoked by uid 99); 16 Jan 2008 18:13:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 10:13:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 18:13:29 +0000
Received: by an-out-0708.google.com with SMTP id c5so78112anc.49
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 10:13:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NS2wM7MPVoppi9ah76lvyn3/+7nyjajB2yeffEst0LA=;
        b=JnDTM3F+6bsIqaGTL0aJ4fqI1Gv05eRo+qT3MScrFpQvCnjUUSu/DStdQdRzuxAfYcKtAMq9CA8DSDIMxuXC2MVQ5YEVj/FudQ4U8bPBya6uTGhxxHk905Apu6wWQ2RBhWEVJ02a03irckjlOibKBCIf3Iv5mZyxU9aL21nojSM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YzNUyVkhoOPsBZDIf2iT1Gn+ljkUOO/7AzWbeoZserC14DKzkHN/xGmCi70EnQuMPwxUSHwgyFFjnFEk4xS7JU0xdbsgqxZwgMIPaIYd3ifFxCraTHWJDUk6LWO72b+PIi5zJKb6lt54mR8L+S/jCkRnw8tnNvv2IMCqqd4nPTE=
Received: by 10.100.201.16 with SMTP id y16mr2252227anf.68.1200507213635;
        Wed, 16 Jan 2008 10:13:33 -0800 (PST)
Received: by 10.100.210.15 with HTTP; Wed, 16 Jan 2008 10:13:33 -0800 (PST)
Message-ID: <ab0709bf0801161013j5fed7468x712a0fcdb3304d15@mail.gmail.com>
Date: Wed, 16 Jan 2008 13:13:33 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inverted search / Search on profilenet
In-Reply-To: <9AE28E104993A4438ED06F057176FD5801437F9B@STHMAIL01.emea2.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9459_17092098.1200507213630"
References: <9AE28E104993A4438ED06F057176FD5801437F9B@STHMAIL01.emea2.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9459_17092098.1200507213630
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Don't have any info to add, but out of curiosity, what kind of setup are you
using to host the 300 mil archive? Is the index distributed? Single machine?
Solr?

Thanks,

Mark

On Jan 16, 2008 12:27 PM, Marcus Falk <marcus.falk@cision.com> wrote:

> Hi again,
>
>
>
> Today we are hosting a 300 million large search index without any
> problems in a lucene environment, with just some customization in the
> lucene api for ranking etc...
>
>
>
> So we are really satisfied with lucene.
>
>
>
> We also have the demands to search with documents on profiles we are
> currently using verity (autonomy) for this, where we store the profiles
> in the index and are using the document as query.
>
> The verity api we are using seems to have some internal threading
> problems (race conditions) so we need to find another way to perform
> those kind of searches.
>
>
>
> Does anybody have any ideas of any api that could do this for us? Any
> ideas on how lucene could be modified to do this kind of searches?
>
>
>
> The volumes are around 300k full length articles distributed some what
> evenly over a 24h period on a 50 k profilenet.
>
>
>
>
>
> /Mvh
>
> Marcus
>
>
>
>
>
>
>
>

------=_Part_9459_17092098.1200507213630--

From java-user-return-32034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 18:22:30 2008
Return-Path: <java-user-return-32034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 703 invoked from network); 16 Jan 2008 18:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 18:22:29 -0000
Received: (qmail 68475 invoked by uid 500); 16 Jan 2008 18:22:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67524 invoked by uid 500); 16 Jan 2008 18:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67513 invoked by uid 99); 16 Jan 2008 18:22:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 10:22:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 18:21:49 +0000
Received: by py-out-1112.google.com with SMTP id a73so432665pye.9
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 10:21:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=nl5oz9l6xQK4L/m9ykqLRkMTcqtXPLnWOE5h1uNgl6c=;
        b=nZN09nEM24g6ewiGqkRjNjeWvMeXg3ul+EaD9aAY0L9zN1ofJIPONS6TSArEQNbkVUOL1S648tEUzsZW5sBMUQHfLxL3ANJYeuhz95UDuiGSZfoCSFChBm6z5WfSJjIyUHc78Sq97j2HP9h7VzskmtQ7edOK/XCXs2XBQp9QPAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=r9M9JPRTbf8xO+ycw8CvS92cFLbduHzPLRAIgaoE0ZQ0OpWcKkypb1C2P9a/yyx25RqygaNFh5XlBzYjbLghMxXtzKzTG1oYLjv3imBNcfCUpq6/d5iKaHhVXqwHeh+Spxq7c7F2Sjlbv344Wh8shwvDV7Lyvj/CphD4y+7l4Vk=
Received: by 10.35.38.17 with SMTP id q17mr1198359pyj.47.1200507714317;
        Wed, 16 Jan 2008 10:21:54 -0800 (PST)
Received: by 10.35.121.12 with HTTP; Wed, 16 Jan 2008 10:21:54 -0800 (PST)
Message-ID: <afb14f380801161021q62a9c36fn933e6ad61a7bc86c@mail.gmail.com>
Date: Wed, 16 Jan 2008 23:21:54 +0500
From: "Liaqat Ali" <liaqatalimian@gmail.com>
To: java-user@lucene.apache.org
Subject: Open source Arabic stemmer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2390_22069356.1200507714304"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2390_22069356.1200507714304
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

Kindly tell me about some open source Arabic Stemmer which can be used with
Lucene.

Regards,
Liaqat Ali

------=_Part_2390_22069356.1200507714304--

From java-user-return-32035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 18:33:29 2008
Return-Path: <java-user-return-32035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5470 invoked from network); 16 Jan 2008 18:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 18:33:29 -0000
Received: (qmail 84763 invoked by uid 500); 16 Jan 2008 18:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84737 invoked by uid 500); 16 Jan 2008 18:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84726 invoked by uid 99); 16 Jan 2008 18:33:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 10:33:12 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.237.202.18] (HELO deframx18.softcom.dk) (80.237.202.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 18:32:58 +0000
Received: from xyz.ne.cision.com (195.149.155.20) by deframx18.softcom.dk (envelope-from <marcus.falk@cision.com>) with ESMTP. tag msg.1200508370.680428.11280
 (Processed in 0.069425 secs); 16 Jan 2008 18:32:50 -0000
X-SoftScan-Status: clean
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Inverted search / Search on profilenet
Date: Wed, 16 Jan 2008 19:32:48 +0100
Message-ID: <9AE28E104993A4438ED06F057176FD5801437FAF@STHMAIL01.emea2.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inverted search / Search on profilenet
Thread-Index: AchYa63o1LrbtRC8SnCn14SFHm6dFwAALXWQ
From: "Marcus Falk" <marcus.falk@cision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

The norms are modded so each norm value is stored as 4 byte instead of 1 =
byte, this modification is using more memory. But anyway the hw we are =
running on are
2x 8 cpu hp servers with 16 gig ram in each of them.=20

We are scaling the index on daterange (and the ranking is modified to =
sort by date)=20

Ex:
2007-01 - 2007-06  > ix 1
2007-07 - 2007-12 > ix 2

Each index is hosted in a separate hosting application and we have a =
layer infront of all indexes to merge the results. So it is our own =
"search engine" we tried solr but I didn't really liked it + we had to =
do some modifications to support the business.=20

Since we are running 32 bit OS (we are going to use 64 bit soon it will =
be interesting) on windows with pae each process can consume just =
2-2.5gb memory so we are having a lot of indexes on the same machine.=20

We did this some years ago and we run it 24/7 without any failure, =
indexing approx 200-300k new articles every day.=20


Any way... We really need to find a good api / some one that knows how =
to add inverted searching to lucene.=20

/Regards
Marcus






-----Ursprungligt meddelande-----
Fr=E5n: Mark Miller [mailto:markrmiller@gmail.com]=20
Skickat: den 16 januari 2008 19:14
Till: java-user@lucene.apache.org
=C4mne: Re: Inverted search / Search on profilenet

Don't have any info to add, but out of curiosity, what kind of setup are =
you
using to host the 300 mil archive? Is the index distributed? Single =
machine?
Solr?

Thanks,

Mark

On Jan 16, 2008 12:27 PM, Marcus Falk <marcus.falk@cision.com> wrote:

> Hi again,
>
>
>
> Today we are hosting a 300 million large search index without any
> problems in a lucene environment, with just some customization in the
> lucene api for ranking etc...
>
>
>
> So we are really satisfied with lucene.
>
>
>
> We also have the demands to search with documents on profiles we are
> currently using verity (autonomy) for this, where we store the =
profiles
> in the index and are using the document as query.
>
> The verity api we are using seems to have some internal threading
> problems (race conditions) so we need to find another way to perform
> those kind of searches.
>
>
>
> Does anybody have any ideas of any api that could do this for us? Any
> ideas on how lucene could be modified to do this kind of searches?
>
>
>
> The volumes are around 300k full length articles distributed some what
> evenly over a 24h period on a 50 k profilenet.
>
>
>
>
>
> /Mvh
>
> Marcus
>
>
>
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 19:14:33 2008
Return-Path: <java-user-return-32036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22220 invoked from network); 16 Jan 2008 19:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 19:14:33 -0000
Received: (qmail 52587 invoked by uid 500); 16 Jan 2008 19:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52561 invoked by uid 500); 16 Jan 2008 19:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52550 invoked by uid 99); 16 Jan 2008 19:14:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 11:14:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 19:13:50 +0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1JFDhx-0000RF-Gr
	for java-user@lucene.apache.org; Wed, 16 Jan 2008 19:13:53 +0000
Received: from tdev129-206.codetel.net.do ([200.88.129.206])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 19:13:53 +0000
Received: from adets by tdev129-206.codetel.net.do with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 19:13:53 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Alexei Dets <adets@idsk.com>
Subject:  Re: Why there is no IndexWriter.deleteDocument(int docNum) method?
Date:  Wed, 16 Jan 2008 15:13:41 -0400
Organization:  InfoDesk S.A.
Lines: 26
Message-ID:  <fmll16$6h5$1@ger.gmane.org>
References:  <fmjibm$98d$1@ger.gmane.org> <c68e39170801152104m22781538m554e2ecb5ef4f8b8@mail.gmail.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7Bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: tdev129-206.codetel.net.do
User-Agent: KNode/0.10.5
Sender: news <news@ger.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!
Yonik Seeley wrote:
> On Jan 15, 2008 7:15 PM, Alexei Dets <adets@idsk.com> wrote:
>> I'm curious, is there any particular reason why Lucene offers
>> IndexReader.deleteDocument(int docNum) but not
>> IndexWriter.deleteDocument(int docNum)?
> 
> Document ids are transient and can change.

I was under impression that document id can change _only_ after index merges
and optimizations, that id of the document definitely doesn't change if
index is not modified and doesn't change even after deletions or additions
of the new documents. Otherwise IndexReader.deleteDocument(int docNum) will
make no sense as well - all ids returned by the search will be invalidated
after first deleteDocument call?

> To figure out which ids you want to delete, you normally need to
> search (requiring a reader).

True. And to delete you normally need a writer because reader simply doesn't
have a write lock (and have no ability to obtain one if writer is always
opened) :-( Currently I'm using IndexWriter.deleteDocuments(Term term)
instead but it looks suboptimal as I already know the document id...

        Alexei



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 19:27:23 2008
Return-Path: <java-user-return-32037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26451 invoked from network); 16 Jan 2008 19:27:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 19:27:23 -0000
Received: (qmail 75640 invoked by uid 500); 16 Jan 2008 19:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75608 invoked by uid 500); 16 Jan 2008 19:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75597 invoked by uid 99); 16 Jan 2008 19:27:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 11:27:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.178.248 as permitted sender)
Received: from [64.233.178.248] (HELO hs-out-2122.google.com) (64.233.178.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 19:26:42 +0000
Received: by hs-out-2122.google.com with SMTP id 54so200032hsz.5
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 11:26:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=CbrEUaKn3d81G3wdY3Uxa1mzr/DOvIsmMLJhpkmUe44=;
        b=jwEiDppVx6qlUCOloPWu+Vc0JoL/BYE04bKYS0ORar3Ziz9j/rrBL/9Vf4QsbnUo0mBdcbLECUcXDPsZtWVhCs2swJTNsPWX3CeDr7y7Xzxdk0M96p/64qzBVa0ZfO2JNUcJ1o9IKKZGdam9YmYgTsY8XwRjKb8Z4+h+TR12pCs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=bcP1IzaFhjoJkb/1mJ7Vyry/phiwlQKxiPFW5TfyLvYodIV1/z0RWgQqyU2NhxCbfSe6vywynev+hqUuC5pLO0u0PuG0prgylFc+YsA9Ksevi/IMDfqXdILhUoazYLzKYLe/6gMh/0LXaUZJlNoMYExWwpPgaSAt3Dw1LQEBvTA=
Received: by 10.142.225.11 with SMTP id x11mr695402wfg.175.1200511604249;
        Wed, 16 Jan 2008 11:26:44 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Wed, 16 Jan 2008 11:26:44 -0800 (PST)
Message-ID: <c68e39170801161126g76d33f76vfbc3322c5ed078e5@mail.gmail.com>
Date: Wed, 16 Jan 2008 14:26:44 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Why there is no IndexWriter.deleteDocument(int docNum) method?
In-Reply-To: <fmll16$6h5$1@ger.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fmjibm$98d$1@ger.gmane.org>
	 <c68e39170801152104m22781538m554e2ecb5ef4f8b8@mail.gmail.com>
	 <fmll16$6h5$1@ger.gmane.org>
X-Google-Sender-Auth: 6214c89f001f46b7
X-Virus-Checked: Checked by ClamAV on apache.org

On Jan 16, 2008 2:13 PM, Alexei Dets <adets@idsk.com> wrote:
> Hi!
> Yonik Seeley wrote:
> > On Jan 15, 2008 7:15 PM, Alexei Dets <adets@idsk.com> wrote:
> >> I'm curious, is there any particular reason why Lucene offers
> >> IndexReader.deleteDocument(int docNum) but not
> >> IndexWriter.deleteDocument(int docNum)?
> >
> > Document ids are transient and can change.
>
> I was under impression that document id can change _only_ after index merges
> and optimizations, that id of the document definitely doesn't change if
> index is not modified and doesn't change even after deletions or additions
> of the new documents.

An addition of a document can trigger segment merges.

> Otherwise IndexReader.deleteDocument(int docNum) will
> make no sense as well - all ids returned by the search will be invalidated
> after first deleteDocument call?

IndexReader.deleteDocument grabs the write lock and is hence mutually
exclusive with an open IndexWriter.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 20:22:44 2008
Return-Path: <java-user-return-32038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47784 invoked from network); 16 Jan 2008 20:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 20:22:44 -0000
Received: (qmail 59639 invoked by uid 500); 16 Jan 2008 20:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59433 invoked by uid 500); 16 Jan 2008 20:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59414 invoked by uid 99); 16 Jan 2008 20:22:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 12:22:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 20:22:02 +0000
Received: by an-out-0708.google.com with SMTP id c5so88907anc.49
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 12:22:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=F4eAZV8aD6RagbhIJaRKEKh/MlRReR8ouKrY6EJz+nc=;
        b=BDWSmg81hl5FNyhLGxDlCHC/92HbS25aNNa1xZmJ7bZqV9iuLqkV86HG3CnIGahDZAPh0OCXUWkBtBt0MUoMW+m9vq2ZDGN85owniojds54dB5qkA1CfgvwlsFqG7PvOFnEKa5aPs7/bNPG+3mc0+1hEyGcPUW2zIqy9Xnni0rs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HY376M69RJWEGXOiWIMXRnQsKo6Ceddr1j5I3V5jrTNcFmi7g6hXxNKbO0cC8shqTLD5948FwF5cNQqCipmzFTQUYVoNDS5cjc+h7DE/PVBwHcOntvxnY9llc0lbpCiAjebI25JnXYTMeslNvRZbbTLtAmXXUt7wsdwcFXLBDb8=
Received: by 10.100.33.19 with SMTP id g19mr2479728ang.117.1200514926695;
        Wed, 16 Jan 2008 12:22:06 -0800 (PST)
Received: by 10.100.210.15 with HTTP; Wed, 16 Jan 2008 12:22:06 -0800 (PST)
Message-ID: <ab0709bf0801161222wfa66d4csfdab7f1c0f480b0@mail.gmail.com>
Date: Wed, 16 Jan 2008 15:22:06 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inverted search / Search on profilenet
In-Reply-To: <9AE28E104993A4438ED06F057176FD5801437FAF@STHMAIL01.emea2.ad.group>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10181_31510581.1200514926677"
References: <9AE28E104993A4438ED06F057176FD5801437FAF@STHMAIL01.emea2.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10181_31510581.1200514926677
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Couple ideas I guess...

Rather than use queries (being so much more difficult) just make an index
that contains documents that are just a list of keywords (representing a
profilenet 'query'). Use the MoreLikeThis class from contrib to search that
index using your source document. The hits you get back will have a score
and show which profiles "matched". Kind of simplistic and would prob requir=
e
some tweaking, but hey...

You might also try searching the Lucene mailing list for
classification/taxonomy and you'll find some good solutions for that (I
imagine better than the profilenet system).

In any case, it shouldnt be that difficult to rig something. Is the
profilenet system even that valuable? Sounds a bit hokey to me, but then im
just a kid that has never used it <g>

You might also try shoving the document in question into a MemoryIndex and
applying all of your profile queries against it, saving the score for each
search (does the weight system make these scores comparable?). Doubt thats
very scalable though... (*heavily* doubt it, but this would appear to be
most accurate in terms of an inverted search)

And finally, maybe this reply this will trigger some of these brilliant
dudes on the list to suggest something better....

- Mark



On Jan 16, 2008 1:32 PM, Marcus Falk <marcus.falk@cision.com> wrote:

> The norms are modded so each norm value is stored as 4 byte instead of 1
> byte, this modification is using more memory. But anyway the hw we are
> running on are
> 2x 8 cpu hp servers with 16 gig ram in each of them.
>
> We are scaling the index on daterange (and the ranking is modified to sor=
t
> by date)
>
> Ex:
> 2007-01 - 2007-06  > ix 1
> 2007-07 - 2007-12 > ix 2
>
> Each index is hosted in a separate hosting application and we have a laye=
r
> infront of all indexes to merge the results. So it is our own "search
> engine" we tried solr but I didn't really liked it + we had to do some
> modifications to support the business.
>
> Since we are running 32 bit OS (we are going to use 64 bit soon it will b=
e
> interesting) on windows with pae each process can consume just 2-2.5gbmem=
ory so we are having a lot of indexes on the same machine.
>
> We did this some years ago and we run it 24/7 without any failure,
> indexing approx 200-300k new articles every day.
>
>
> Any way... We really need to find a good api / some one that knows how to
> add inverted searching to lucene.
>
> /Regards
> Marcus
>
>
>
>
>
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Mark Miller [mailto:markrmiller@gmail.com]
> Skickat: den 16 januari 2008 19:14
> Till: java-user@lucene.apache.org
> =C4mne: Re: Inverted search / Search on profilenet
>
> Don't have any info to add, but out of curiosity, what kind of setup are
> you
> using to host the 300 mil archive? Is the index distributed? Single
> machine?
> Solr?
>
> Thanks,
>
> Mark
>
> On Jan 16, 2008 12:27 PM, Marcus Falk <marcus.falk@cision.com> wrote:
>
> > Hi again,
> >
> >
> >
> > Today we are hosting a 300 million large search index without any
> > problems in a lucene environment, with just some customization in the
> > lucene api for ranking etc...
> >
> >
> >
> > So we are really satisfied with lucene.
> >
> >
> >
> > We also have the demands to search with documents on profiles we are
> > currently using verity (autonomy) for this, where we store the profiles
> > in the index and are using the document as query.
> >
> > The verity api we are using seems to have some internal threading
> > problems (race conditions) so we need to find another way to perform
> > those kind of searches.
> >
> >
> >
> > Does anybody have any ideas of any api that could do this for us? Any
> > ideas on how lucene could be modified to do this kind of searches?
> >
> >
> >
> > The volumes are around 300k full length articles distributed some what
> > evenly over a 24h period on a 50 k profilenet.
> >
> >
> >
> >
> >
> > /Mvh
> >
> > Marcus
> >
> >
> >
> >
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10181_31510581.1200514926677--

From java-user-return-32039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 16 20:57:48 2008
Return-Path: <java-user-return-32039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65191 invoked from network); 16 Jan 2008 20:57:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2008 20:57:48 -0000
Received: (qmail 9806 invoked by uid 500); 16 Jan 2008 20:57:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9781 invoked by uid 500); 16 Jan 2008 20:57:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9770 invoked by uid 99); 16 Jan 2008 20:57:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 12:57:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tobiaslohr@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jan 2008 20:57:17 +0000
Received: (qmail invoked by alias); 16 Jan 2008 20:57:09 -0000
Received: from dslb-088-073-218-051.pools.arcor-ip.net (EHLO [192.168.2.152]) [88.73.218.51]
  by mail.gmx.net (mp005) with SMTP; 16 Jan 2008 21:57:09 +0100
X-Authenticated: #1677435
X-Provags-ID: V01U2FsdGVkX19HbHNEiENH3O5PzBCDtVpx5bQ/xAYnfQzqJdo4pH
	dW+qhLjAIDrrDI
Message-ID: <478E6FAA.2080506@gmx.de>
Date: Wed, 16 Jan 2008 21:57:14 +0100
From: Tobias Lohr <tobiaslohr@gmx.de>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Integrating dynamic data into Lucene search/ranking
References: <351236.21497.qm@web50310.mail.re2.yahoo.com>
In-Reply-To: <351236.21497.qm@web50310.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

The index contains about a several ten thousand documents, with a field 
count of about fifty. The index is going to be rebuild approx. every 
day, but varies, since the searchable content doesn't change very often. 
Now I face the challenge to work in more dynamic data into the index, 
and even make this searchable, or more using it to sort the documents in 
the search result. The change frequency of this data is very high, at 
minimum every minute, but can be every few seconds.

I know that it is impossible to have a real time up to date index and 
that there will be gap in time. But as long as this is not to large, 
this is ok. I've tried to do some incremental update every X seconds or 
minutes. This would eventually work for small indexes, with less data to 
be indexed for a single document, but I think that this is not the right 
approach here. It's also not the right way, because of collecting all 
the static, searchable data that didn't changed for a document, although 
only the dynamic information changed, you know?

I'm sorry, what exactly do you mean with "reopen the IndexSearcher every 
N minutes"?

You say, that I could also store the data in an external data store. Do 
you mean the dynamic data? If yes, I some how need this information 
within an index, in order to sort by it, right? Or do I overlook 
something here?

Thanks,
Tobias

Otis Gospodnetic schrieb:
> Tobias,
>
> The question is a little too open, I think.  Perhaps start by saying what you've tried, what doesn't work, what you think won't work, the actual rate of change, the size of your index and, very importantly, how quickly you need to see index changes (adds, deletes, updates).
>
> How about this for the boostrap question: just update (delete+add) the whole Document and reopen the IndexSeearcher every N minutes.  Would that work for you?
>
> Does only the stored data change or also searchable data?  If the former, you could choose to store that in the external data store (e.g. RDBMS, BDB...)
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Tobias Lohr <TobiasLohr@gmx.de>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 15, 2008 11:33:56 AM
> Subject: Integrating dynamic data into Lucene search/ranking
>
> I have a more architectural question, which is maybe sort of off topic,
>  but as I want to implement it using Java  and Lucene, it's the right
>  forum however:
>
> I'm thinking of an approach to design a system that integrates dynamic
>  information into a search (and a ranking) functionality using Lucene.
>  With dynamic data I mean, data which changes very often within the
>  typical index rebuild cycle, i.e. transactional data.
>
> A good example is the sorting of products in an online store by product
>  availability.
>
> Does anybody know good reading resources (approaches, whitepapers,
>  books etc.) for integrating such dynamic information into a search/ranking
>  functionality?
>
> (I already searched at Google, but couldn't find anything useful
>  though.)
>
> Thanks in advance!
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 01:58:16 2008
Return-Path: <java-user-return-32040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15228 invoked from network); 17 Jan 2008 01:58:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 01:58:16 -0000
Received: (qmail 4025 invoked by uid 500); 17 Jan 2008 01:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3829 invoked by uid 500); 17 Jan 2008 01:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3818 invoked by uid 99); 17 Jan 2008 01:57:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 17:57:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of coolgeng410@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 01:57:34 +0000
Received: by an-out-0708.google.com with SMTP id c5so115139anc.49
        for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 17:57:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=LZl7H1+ikGVrMkHN/eEpKyMYWYPrdpdl5pFHV15F0gE=;
        b=EnrSEayXNROipYI0ZwZsQ1ynERn/gXJEpsF5mW8Ed4BlkixXmK3RmjnjybvFoQLQQeuibCt8VyLWAnh6yk+43laiIQT0Ov1pMJRdfbhVn19E1Grg3yAR+MpfdSSVWK5rafxyTPFV4npbaFxANlD4bhyimKzgYYBkClhrdo0EIek=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ex/jKBmWjHE8EYZgm5FIOKhWCu5dn0oktzJdvSLVuUQ6gWl9CdHVwmZ6+POiOV0EMQPR5qS2cawoC9DXY/QZyPhyZCX6QWK1IfwWUoYjalSlCtNnpQGQ3ZjbxUDgehUbXGeKV+Z6D0OllHLBd5SNOT2ZbOxVbrco50pdXT5N0N0=
Received: by 10.100.107.7 with SMTP id f7mr3154786anc.35.1200535059915;
        Wed, 16 Jan 2008 17:57:39 -0800 (PST)
Received: by 10.100.105.12 with HTTP; Wed, 16 Jan 2008 17:57:39 -0800 (PST)
Message-ID: <e7dd79a40801161757u635233cfibcfd2136394f84c7@mail.gmail.com>
Date: Thu, 17 Jan 2008 09:57:39 +0800
From: "coolgeng coolgeng" <coolgeng410@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How?
In-Reply-To: <8CDF41E72502445AB193A47A0F4F765F@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7991_26725695.1200535059914"
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com>
	 <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com>
	 <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com>
	 <9EB879983EBF4102BE52A5FEC308A193@msrvcn04>
	 <e7dd79a40801160713n3847f464y590e1829870a917b@mail.gmail.com>
	 <8CDF41E72502445AB193A47A0F4F765F@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7991_26725695.1200535059914
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A non-clustered and clustered index has resovle the problem, but Lucene can
not do the same thing like that?

On Jan 16, 2008 11:44 PM, <spring@gmx.eu> wrote:

> > I can use the cluster index on the table. But you can create only one
> > cluster index in a table. In this table , lots of data need
> > to search, so I
> > choose the Lucene to do that.
>
> Why do you need a clustered index in the database?
> A non-clustered would do the job as well.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best Regards
Cooper Geng

------=_Part_7991_26725695.1200535059914--

From java-user-return-32041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 02:00:37 2008
Return-Path: <java-user-return-32041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17819 invoked from network); 17 Jan 2008 02:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 02:00:35 -0000
Received: (qmail 7031 invoked by uid 500); 17 Jan 2008 02:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7003 invoked by uid 500); 17 Jan 2008 02:00:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6992 invoked by uid 99); 17 Jan 2008 02:00:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 18:00:19 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 02:00:04 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 9AC6CB7ABC
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 17:59:56 -0800 (PST)
Message-Id: <CAEC0D2E-2E7D-4B70-A176-BB6CE6A9FF22@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <afb14f380801161021q62a9c36fn933e6ad61a7bc86c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Open source Arabic stemmer
Date: Wed, 16 Jan 2008 20:59:55 -0500
References: <afb14f380801161021q62a9c36fn933e6ad61a7bc86c@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Try searching this list for Arabic Stemmer.  I seem to recall one  
under a GPL license.  Also try Googling "arabic Lucene analyzer"

-Grant

On Jan 16, 2008, at 1:21 PM, Liaqat Ali wrote:

> Hi
>
> Kindly tell me about some open source Arabic Stemmer which can be  
> used with
> Lucene.
>
> Regards,
> Liaqat Ali

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 04:39:57 2008
Return-Path: <java-user-return-32042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79787 invoked from network); 17 Jan 2008 04:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 04:39:57 -0000
Received: (qmail 31709 invoked by uid 500); 17 Jan 2008 04:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31675 invoked by uid 500); 17 Jan 2008 04:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31664 invoked by uid 99); 17 Jan 2008 04:39:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 20:39:41 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.237.202.18] (HELO deframx18.softcom.dk) (80.237.202.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 04:39:25 +0000
Received: from xyz.ne.cision.com (195.149.155.20) by deframx18.softcom.dk (envelope-from <marcus.falk@cision.com>) with ESMTP. tag msg.1200544756.396736.1220
 (Processed in 0.104325 secs); 17 Jan 2008 04:39:16 -0000
X-SoftScan-Status: clean
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C858C2.EA8C2E6B"
Subject: SV: Integrating dynamic data into Lucene search/ranking
Date: Thu, 17 Jan 2008 05:35:13 +0100
Message-ID: <9AE28E104993A4438ED06F057176FD584E51B3@STHMAIL01.emea2.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Integrating dynamic data into Lucene search/ranking
Thread-Index: AchYgnMNwDHFgK+0Q7qVxkM/kleSRAAP+cR8
References: <351236.21497.qm@web50310.mail.re2.yahoo.com> <478E6FAA.2080506@gmx.de>
From: "Marcus Falk" <marcus.falk@cision.com>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C858C2.EA8C2E6B
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

We did this in our system, indexing a constant flow of news articles, by =
doing as Otis described (reopened the indexsearcher)..
=20
Every 3:d minute we are creating a new indexsearcher in the background =
after this searcher has been created we are fireing some warm up queries =
against it and after that we change the old searcher to point to the new =
one. Works fine for us and we got large indexes (several millions of =
articles)...=20
=20
/Regards
Marcus
=20
=20
=20

________________________________

Fr=E5n: Tobias Lohr [mailto:tobiaslohr@gmx.de]
Skickat: on 2008-01-16 21:57
Till: java-user@lucene.apache.org
=C4mne: Re: Integrating dynamic data into Lucene search/ranking



The index contains about a several ten thousand documents, with a field
count of about fifty. The index is going to be rebuild approx. every
day, but varies, since the searchable content doesn't change very often.
Now I face the challenge to work in more dynamic data into the index,
and even make this searchable, or more using it to sort the documents in
the search result. The change frequency of this data is very high, at
minimum every minute, but can be every few seconds.

I know that it is impossible to have a real time up to date index and
that there will be gap in time. But as long as this is not to large,
this is ok. I've tried to do some incremental update every X seconds or
minutes. This would eventually work for small indexes, with less data to
be indexed for a single document, but I think that this is not the right
approach here. It's also not the right way, because of collecting all
the static, searchable data that didn't changed for a document, although
only the dynamic information changed, you know?

I'm sorry, what exactly do you mean with "reopen the IndexSearcher every
N minutes"?

You say, that I could also store the data in an external data store. Do
you mean the dynamic data? If yes, I some how need this information
within an index, in order to sort by it, right? Or do I overlook
something here?

Thanks,
Tobias

Otis Gospodnetic schrieb:
> Tobias,
>
> The question is a little too open, I think.  Perhaps start by saying =
what you've tried, what doesn't work, what you think won't work, the =
actual rate of change, the size of your index and, very importantly, how =
quickly you need to see index changes (adds, deletes, updates).
>
> How about this for the boostrap question: just update (delete+add) the =
whole Document and reopen the IndexSeearcher every N minutes.  Would =
that work for you?
>
> Does only the stored data change or also searchable data?  If the =
former, you could choose to store that in the external data store (e.g. =
RDBMS, BDB...)
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Tobias Lohr <TobiasLohr@gmx.de>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 15, 2008 11:33:56 AM
> Subject: Integrating dynamic data into Lucene search/ranking
>
> I have a more architectural question, which is maybe sort of off =
topic,
>  but as I want to implement it using Java  and Lucene, it's the right
>  forum however:
>
> I'm thinking of an approach to design a system that integrates dynamic
>  information into a search (and a ranking) functionality using Lucene.
>  With dynamic data I mean, data which changes very often within the
>  typical index rebuild cycle, i.e. transactional data.
>
> A good example is the sorting of products in an online store by =
product
>  availability.
>
> Does anybody know good reading resources (approaches, whitepapers,
>  books etc.) for integrating such dynamic information into a =
search/ranking
>  functionality?
>
> (I already searched at Google, but couldn't find anything useful
>  though.)
>
> Thanks in advance!
> =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C858C2.EA8C2E6B--


From java-user-return-32043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 06:57:11 2008
Return-Path: <java-user-return-32043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98414 invoked from network); 17 Jan 2008 06:57:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 06:57:11 -0000
Received: (qmail 48374 invoked by uid 500); 17 Jan 2008 06:56:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48111 invoked by uid 500); 17 Jan 2008 06:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47939 invoked by uid 99); 17 Jan 2008 06:56:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 22:56:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 06:56:41 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 479AA71C2AE; Wed, 16 Jan 2008 22:56:34 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 75E3871C28F
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 22:56:32 -0800 (PST)
Date: Wed, 16 Jan 2008 22:56:32 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Nutch - Microsoft Search Server integration
In-Reply-To: <52c3ddca0801142253h11454704h2d262f077717240c@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0801162254210.31676@radix.cryptio.net>
References: <52c3ddca0801142253h11454704h2d262f077717240c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is it possible to integrate Nutch into MS Search Server via OpenSearch API?

you'll probably find someone who can answer this question on the 
nutch-user@lucene mailing list.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 07:02:28 2008
Return-Path: <java-user-return-32044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1157 invoked from network); 17 Jan 2008 07:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 07:02:28 -0000
Received: (qmail 55899 invoked by uid 500); 17 Jan 2008 07:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55723 invoked by uid 500); 17 Jan 2008 07:02:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55712 invoked by uid 99); 17 Jan 2008 07:02:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jan 2008 23:02:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:01:57 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id ED53171C317; Wed, 16 Jan 2008 23:01:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id F27B171C2BF
	for <java-user@lucene.apache.org>; Wed, 16 Jan 2008 23:01:48 -0800 (PST)
Date: Wed, 16 Jan 2008 23:01:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Changing the Score of a Document.
In-Reply-To: <OF0AF3030A.62471322-ONC22573D2.0035CD95-C22573D2.0036083C@il.ibm.com>
Message-ID: <Pine.LNX.4.62.0801162300480.31676@radix.cryptio.net>
References: <OF0AF3030A.62471322-ONC22573D2.0035CD95-C22573D2.0036083C@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: In-Reply-To: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
: Subject: Changing the Score of a Document.

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 08:13:08 2008
Return-Path: <java-user-return-32045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32006 invoked from network); 17 Jan 2008 08:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 08:13:08 -0000
Received: (qmail 31264 invoked by uid 500); 17 Jan 2008 08:12:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31235 invoked by uid 500); 17 Jan 2008 08:12:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31224 invoked by uid 99); 17 Jan 2008 08:12:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 00:12:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TobiasLohr@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Jan 2008 08:12:25 +0000
Received: (qmail 7285 invoked by uid 0); 17 Jan 2008 08:12:29 -0000
Received: from 217.7.220.55 by www028.gmx.net with HTTP;
 Thu, 17 Jan 2008 09:12:29 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Thu, 17 Jan 2008 09:12:29 +0100
From: "Tobias Lohr" <TobiasLohr@gmx.de>
In-Reply-To: <9AE28E104993A4438ED06F057176FD584E51B3@STHMAIL01.emea2.ad.group>
Message-ID: <20080117081229.106030@gmx.net>
MIME-Version: 1.0
References: <351236.21497.qm@web50310.mail.re2.yahoo.com>
 <478E6FAA.2080506@gmx.de>
 <9AE28E104993A4438ED06F057176FD584E51B3@STHMAIL01.emea2.ad.group>
Subject: Re: SV: Integrating dynamic data into Lucene search/ranking
To: java-user@lucene.apache.org
X-Authenticated: #1677435
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX18cjlcHcAwcmgaSZ4v6hqnEJLmtcMoPLpy+mEP/OK
 OVi26yLUc/OnQ3DVQoAxxYk8/Iw0cp2ZlgDg== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: 2T+4cAJQbGInOQLudGRnasxvcmZ1ZpwZ
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not really sure, if this approach is possible for working in changes every - let's say - 30 seconds!?

-------- Original-Nachricht --------
> Datum: Thu, 17 Jan 2008 05:35:13 +0100
> Von: "Marcus Falk" <marcus.falk@cision.com>
> An: java-user@lucene.apache.org, java-user@lucene.apache.org
> Betreff: SV: Integrating dynamic data into Lucene search/ranking

> We did this in our system, indexing a constant flow of news articles, by
> doing as Otis described (reopened the indexsearcher)..
>  
> Every 3:d minute we are creating a new indexsearcher in the background
> after this searcher has been created we are fireing some warm up queries
> against it and after that we change the old searcher to point to the new one.
> Works fine for us and we got large indexes (several millions of articles)... 
>  
> /Regards
> Marcus
>  
>  
>  
> 
> ________________________________
> 
> Frn: Tobias Lohr [mailto:tobiaslohr@gmx.de]
> Skickat: on 2008-01-16 21:57
> Till: java-user@lucene.apache.org
> mne: Re: Integrating dynamic data into Lucene search/ranking
> 
> 
> 
> The index contains about a several ten thousand documents, with a field
> count of about fifty. The index is going to be rebuild approx. every
> day, but varies, since the searchable content doesn't change very often.
> Now I face the challenge to work in more dynamic data into the index,
> and even make this searchable, or more using it to sort the documents in
> the search result. The change frequency of this data is very high, at
> minimum every minute, but can be every few seconds.
> 
> I know that it is impossible to have a real time up to date index and
> that there will be gap in time. But as long as this is not to large,
> this is ok. I've tried to do some incremental update every X seconds or
> minutes. This would eventually work for small indexes, with less data to
> be indexed for a single document, but I think that this is not the right
> approach here. It's also not the right way, because of collecting all
> the static, searchable data that didn't changed for a document, although
> only the dynamic information changed, you know?
> 
> I'm sorry, what exactly do you mean with "reopen the IndexSearcher every
> N minutes"?
> 
> You say, that I could also store the data in an external data store. Do
> you mean the dynamic data? If yes, I some how need this information
> within an index, in order to sort by it, right? Or do I overlook
> something here?
> 
> Thanks,
> Tobias
> 
> Otis Gospodnetic schrieb:
> > Tobias,
> >
> > The question is a little too open, I think.  Perhaps start by saying
> what you've tried, what doesn't work, what you think won't work, the actual
> rate of change, the size of your index and, very importantly, how quickly you
> need to see index changes (adds, deletes, updates).
> >
> > How about this for the boostrap question: just update (delete+add) the
> whole Document and reopen the IndexSeearcher every N minutes.  Would that
> work for you?
> >
> > Does only the stored data change or also searchable data?  If the
> former, you could choose to store that in the external data store (e.g. RDBMS,
> BDB...)
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> > ----- Original Message ----
> > From: Tobias Lohr <TobiasLohr@gmx.de>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, January 15, 2008 11:33:56 AM
> > Subject: Integrating dynamic data into Lucene search/ranking
> >
> > I have a more architectural question, which is maybe sort of off topic,
> >  but as I want to implement it using Java  and Lucene, it's the right
> >  forum however:
> >
> > I'm thinking of an approach to design a system that integrates dynamic
> >  information into a search (and a ranking) functionality using Lucene.
> >  With dynamic data I mean, data which changes very often within the
> >  typical index rebuild cycle, i.e. transactional data.
> >
> > A good example is the sorting of products in an online store by product
> >  availability.
> >
> > Does anybody know good reading resources (approaches, whitepapers,
> >  books etc.) for integrating such dynamic information into a
> search/ranking
> >  functionality?
> >
> > (I already searched at Google, but couldn't find anything useful
> >  though.)
> >
> > Thanks in advance!
> >  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
Psssst! Schon vom neuen GMX MultiMessenger gehrt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger?did=10

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 09:55:27 2008
Return-Path: <java-user-return-32046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72000 invoked from network); 17 Jan 2008 09:55:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 09:55:27 -0000
Received: (qmail 69407 invoked by uid 500); 17 Jan 2008 09:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69096 invoked by uid 500); 17 Jan 2008 09:55:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69085 invoked by uid 99); 17 Jan 2008 09:55:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 01:55:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 09:54:43 +0000
Received: from [192.168.1.100] (static-62-233-204-250.devs.futuro.pl [62.233.204.250])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m0H9spL10345
	for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 03:54:51 -0600
Message-ID: <478F25E6.5090303@getopt.org>
Date: Thu, 17 Jan 2008 10:54:46 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SV: Integrating dynamic data into Lucene search/ranking
References: <351236.21497.qm@web50310.mail.re2.yahoo.com> <478E6FAA.2080506@gmx.de> <9AE28E104993A4438ED06F057176FD584E51B3@STHMAIL01.emea2.ad.group> <20080117081229.106030@gmx.net>
In-Reply-To: <20080117081229.106030@gmx.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Tobias Lohr wrote:
> I'm not really sure, if this approach is possible for working in changes every - let's say - 30 seconds!?

The conventional wisdom is to use RAMDirectory in such scenarios. I.e. 
you commit frequent updates to a RAMDirectory and frequently reopen its 
Searcher (which should be fast). Periodically, merge the RAMDirectory 
index with your on-disk index - you need to open a new IndexSearcher in 
the background, warm it up with the latest N queries, and when it's 
ready you swap searchers, i.e. you close the old one, purge the 
RAMDirectory (since it was synced to the on-disk index), and start using 
the new IndexSearcher.

And again, start accumulating new docs in the RAMDirectory, etc, etc ...

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 10:18:36 2008
Return-Path: <java-user-return-32047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79457 invoked from network); 17 Jan 2008 10:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 10:18:35 -0000
Received: (qmail 99644 invoked by uid 500); 17 Jan 2008 10:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99608 invoked by uid 500); 17 Jan 2008 10:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99594 invoked by uid 99); 17 Jan 2008 10:18:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 02:18:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Jan 2008 10:17:54 +0000
Received: (qmail invoked by alias); 17 Jan 2008 10:17:58 -0000
Received: from e178064102.adsl.alicedsl.de (EHLO msrvcn04) [85.178.64.102]
  by mail.gmx.net (mp007) with SMTP; 17 Jan 2008 11:17:58 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18OSNgarfMOjA34kucqKieRRP9pOI4hFYMiPXFanX
	UC/81Na8looczq
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <e7dd79a40801141947s4e5e09ccwefe4d7a2fbe6857f@mail.gmail.com> <359a92830801150647y1f8bc1do79f234b38922003f@mail.gmail.com> <e7dd79a40801160024jec347aaqcc075173090da81e@mail.gmail.com> <9EB879983EBF4102BE52A5FEC308A193@msrvcn04> <e7dd79a40801160713n3847f464y590e1829870a917b@mail.gmail.com> <8CDF41E72502445AB193A47A0F4F765F@msrvcn04> <e7dd79a40801161757u635233cfibcfd2136394f84c7@mail.gmail.com>
Subject: RE: How?
Date: Thu, 17 Jan 2008 11:17:59 +0100
Message-ID: <33C7A66A547242B3A9EB1A52E469A6B1@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <e7dd79a40801161757u635233cfibcfd2136394f84c7@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchYrGwFcEVEQydbSJK010mMuAtCrgARWAiA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> A non-clustered and clustered index has resovle the problem, 
> but Lucene can
> not do the same thing like that?

Well, I bet the database solution is the best, as long as you do not search
in big text fields or you need special fulltext features like fuzzy search
etc.

Synchronizing a lucene index with such a big database is pure overkill, as
long as the database does the job.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 10:32:35 2008
Return-Path: <java-user-return-32048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83151 invoked from network); 17 Jan 2008 10:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 10:32:35 -0000
Received: (qmail 16732 invoked by uid 500); 17 Jan 2008 10:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16709 invoked by uid 500); 17 Jan 2008 10:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16698 invoked by uid 99); 17 Jan 2008 10:32:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 02:32:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 10:31:52 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JUS00DFKAL8HK@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Thu, 17 Jan 2008 11:31:56 +0100 (MET)
Date: Thu, 17 Jan 2008 11:31:56 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200565916.9514.116.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2008-01-11 at 11:34 +0100, Toke Eskildsen wrote:
> As for shared searcher vs. individual searchers, there was just a
> slight penalty for using individual searchers.

Whoops! Seems like I need better QA for my test-code. I didn't use
individual searchers for each thread when I thought I was. The slight
penalty wrongly observed must have been due to measurement variations.

With the corrected test, some interesting observations about our index
can be made, which will definitely affect our configuration. In the
following, the queries/second is an average over 350.000 queries.
For each query, a search is performed and the content of a specific
field is extracted for the first 20 hits.

== System-summary ==
Dual-core Intel Xeon 5148 2.3 GHz, 8 GB RAM, Linux, Lucene 2.1, 37 GB/10
million documents index, queries taken from production system logs.

== Conventional harddisks (2 * 15000 RPM in software RAID 1) ==
1 thread,  1 searcher:  109 queries/sec
2 threads, 1 searcher:  118 queries/sec
2 threads, 2 searchers: 157 queries/sec
3 threads, 1 searcher:  111 queries/sec
3 threads, 3 searchers: 177 queries/sec
4 threads, 1 searcher:  108 queries/sec
4 threads, 4 searchers: 169 queries/sec

== Solid State Drives (2 * 32 GB Samsung in software RAID 0) ==
1 thread,  1 searcher:  193 queries/sec
2 threads, 1 searcher:  295 queries/sec
2 threads, 2 searchers: 357 queries/sec
3 threads, 1 searcher:  197 queries/sec
3 threads, 3 searchers: 369 queries/sec
4 threads, 1 searcher:  192 queries/sec
4 threads, 4 searchers: 302 queries/sec

Graphs can be viewed at http://wiki.statsbiblioteket.dk/summa/Hardware

For our setup it seems that the usual avoid-multiple-searchers advice is
not valid, neither for conventional harddisks, nor Solid State Drives.
The optimal configuration for our dual-core test machine is three
threads with individual searchers. The obvious question is whether this
can be extended to other cases.

> As for threading, I noticed something strange: On the dual-core
> machine, two threads gave better performance than one, while 4 threads
> gave the same performance as one.

As can be seen above, this strange picture is consistent. 1, 3 and 4
threads with shared searcher performs the same, independent of which
storage the machine uses, while 2 threads performs markedly better.

I've started the same test-suite for Lucene 2.2 and 2.3RC2. It should
be finished in a day or two.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 10:33:38 2008
Return-Path: <java-user-return-32049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83453 invoked from network); 17 Jan 2008 10:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 10:33:38 -0000
Received: (qmail 18678 invoked by uid 500); 17 Jan 2008 10:33:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18613 invoked by uid 500); 17 Jan 2008 10:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18601 invoked by uid 99); 17 Jan 2008 10:33:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 02:33:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.113.200.5] (HELO spaceymail-a3.g.dreamhost.com) (208.113.200.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 10:32:55 +0000
Received: from diskbox.stolsvik.com (cm-84.215.32.37.getinternet.no [84.215.32.37])
	by spaceymail-a3.g.dreamhost.com (Postfix) with ESMTP id F29C9195413
	for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 02:32:57 -0800 (PST)
Received: from [10.10.10.10]
	by diskbox.stolsvik.com with esmtp (Exim 4.63)
	(envelope-from <Endre@Stolsvik.com>)
	id 1JFS3K-0004PJ-5j
	for java-user@lucene.apache.org; Thu, 17 Jan 2008 11:32:54 +0100
Message-ID: <478F2E46.1090506@Stolsvik.com>
Date: Thu, 17 Jan 2008 11:30:30 +0100
From: =?UTF-8?B?RW5kcmUgU3TDuGxzdmlr?= <Endre@stolsvik.com>
Organization: Picorg
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inverted search / Search on profilenet
References: <9AE28E104993A4438ED06F057176FD5801437FAF@STHMAIL01.emea2.ad.group> <ab0709bf0801161222wfa66d4csfdab7f1c0f480b0@mail.gmail.com>
In-Reply-To: <ab0709bf0801161222wfa66d4csfdab7f1c0f480b0@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:

> In any case, it shouldnt be that difficult to rig something. Is the
> profilenet system even that valuable? Sounds a bit hokey to me, but then im
> just a kid that has never used it <g>

May I ask: What IS a profilenet? I ask since this obviously is something 
that you two hit off on right away, while I haven't heard of..!

I was also instantly thinking "more like this"-like. "Inverted 
searching" - won't that in effect be searching with the entire 
"search-document"'s terms, search-weighted on that document's term 
weights? Which again, due to performance, will involve finding the 
search-documents most relevant words, and then do a search with that, 
again search-weighted on the document's term weights?

Thanks,
Endre.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 11:08:01 2008
Return-Path: <java-user-return-32050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93951 invoked from network); 17 Jan 2008 11:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 11:08:01 -0000
Received: (qmail 62366 invoked by uid 500); 17 Jan 2008 11:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61651 invoked by uid 500); 17 Jan 2008 11:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61640 invoked by uid 99); 17 Jan 2008 11:07:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 03:07:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 11:07:18 +0000
Received: by fg-out-1718.google.com with SMTP id d23so713119fga.27
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 03:07:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PyszDrKKYl5/R0G6ivB/TjMeUDMdzc0f5oH0NncFauQ=;
        b=asdtsH7HogxTabxxPVf6Wbliv0ktU9a4ZkfgHGXEZzvhCun8xZUyvRm6tkmPmCr4lTOv+6tlvbufBW+HWQxl9ZGp9ezAe26pC+JiRT9qqvVbkKbFLCHv5cVI0OS8CBvohLBPFTRuhxgLqaqWnX/BvcE+KcRrlW3aZZ9vBJvT9wE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h3hG53UNthvA4XquYGcvMzBGH9ZPGGVCH3AXElcy4nsW+tlZQZrkCVxJ+4IbMT8wfRwIumn8K03kkOr6Lewf5A45KdoB7ymLcFjr0PGnTazhybL0ar2k69fFxU/0pbefc37Vr7jVPUCy1SR/30EDSeW6BR0IIzFmvqY+aG+aQEo=
Received: by 10.78.133.2 with SMTP id g2mr2427571hud.26.1200568043369;
        Thu, 17 Jan 2008 03:07:23 -0800 (PST)
Received: by 10.78.172.16 with HTTP; Thu, 17 Jan 2008 03:07:23 -0800 (PST)
Message-ID: <295da8fe0801170307k5814578bo75977d3069ec4cb7@mail.gmail.com>
Date: Thu, 17 Jan 2008 16:37:23 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing query from string
In-Reply-To: <359a92830801160614j2cf1e171vc8f1c54b58b6ec76@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20318_18189535.1200568043365"
References: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
	 <359a92830801160614j2cf1e171vc8f1c54b58b6ec76@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20318_18189535.1200568043365
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,
   Thanks for your response. I have tried the folowing way and seems to be
working. Tell me if there is any problem with the approach.

String str = query.toString();
QueryParser parser = new QueryParser("", new StandardAnalyzer);
Query newQuery = parser.parse(str);

now use *newQuery* for making queries


I understand that in the constructor of QueryParser it takes default field
and a analyzer. If I put a blank field it seems to work. Putting null gives
a null pointer exception.

Regards,
Prabin



On Jan 16, 2008 7:44 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> As I remember from various threads, toString is more of
> a debugging aid and you cannot completely rely on the
> transformation from a parsed query -> tostring -> parsed query
> to be reliable. But this is "something I remember", so take
> it with a grain of salt (you might want to search the mail
> archive to see if my memory is correct).
>
> That said, use BooleanQuery to add as many clauses in
> as many ways as you want.
>
> Actually, I don't know how I'd go about storing a programmatically
> constructed query, I'd sure like to know if there's a way. You could
> certainly store the original query if you were taking user input and
> parsing it...
>
> Best
> Erick
>
> On Jan 16, 2008 4:22 AM, prabin meitei <prabin.meitei@gmail.com> wrote:
>
> > Hi ,
> >    I want to construct a query from string. how can I do it??  Actually
> i
> > saved a query(a boolean query) as string (using query.toString()).
> > Is there a way to reconstruct the query from the string i saved? How can
> i
> > add more clauses to the  reconstructed query?
> > Thanks in advance.
> >
> > Prabin
> >
>

------=_Part_20318_18189535.1200568043365--

From java-user-return-32051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 12:58:42 2008
Return-Path: <java-user-return-32051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28931 invoked from network); 17 Jan 2008 12:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 12:58:42 -0000
Received: (qmail 88888 invoked by uid 500); 17 Jan 2008 12:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88854 invoked by uid 500); 17 Jan 2008 12:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88837 invoked by uid 99); 17 Jan 2008 12:58:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 04:58:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 12:58:00 +0000
Received: by an-out-0708.google.com with SMTP id c5so145321anc.49
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 04:58:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=zFUcracsW2zZsWBs6nNXL1sXBYjQgJNz3F0vAcMQQkg=;
        b=cOC92m3ZZA6AxBkItkoEICbmShxziuPyy4wkKEwe8BKqtWu3SGImVBfjCrxckj+jS4BkeZ+w/MLZJbsqpIIVMgrW7BxL5djMJi5DIjYc1IzykfrL6aJJ5YnWebxUMZom+h61amlZab+MUz1XKmKvWxLOpxlWEykz/+SDgb6tHwU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=toQt3HzP+0fQdR1f6cXDWN+Iu4GIY7zRdMkiI42sEGLGBfNBf1T4iOLVifEtADsou2PbuGcYMBnTzGhkvJfelyOIHI3CJVrEJzbMgp5bbmuVWxnq2ilJqVfr52xys1k0+IAJES7QqSvxbxCpwDFAy1/3X0IJQWGW3BpndMEnnQM=
Received: by 10.101.68.19 with SMTP id v19mr4368256ank.4.1200574685287;
        Thu, 17 Jan 2008 04:58:05 -0800 (PST)
Received: from ?192.168.1.118? ( [216.66.119.110])
        by mx.google.com with ESMTPS id i27sm3348476elf.10.2008.01.17.04.58.04
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 17 Jan 2008 04:58:04 -0800 (PST)
Message-ID: <478F50C2.10608@gmail.com>
Date: Thu, 17 Jan 2008 07:57:38 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inverted search / Search on profilenet
References: <9AE28E104993A4438ED06F057176FD5801437FAF@STHMAIL01.emea2.ad.group> <ab0709bf0801161222wfa66d4csfdab7f1c0f480b0@mail.gmail.com> <478F2E46.1090506@Stolsvik.com>
In-Reply-To: <478F2E46.1090506@Stolsvik.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Verity, autonomy, whatever, has a what they call a reverse query system 
called profilenet. A profile is just a query (or I guess more than one 
query?) and you can setup a bunch of them. Then you supply the document 
and you will get the matching queries as well as a score. They say its 
the opposite of doing a search with a query and getting back docs. 
Instead you do a search with a doc and get back these queries. They 
claim it can be used for things like taxonomy/classification among other 
things. I don't know how true this is to a real reverse query system as 
that would seem to be kind of slow -- my guess is its a bit of an 
approximation.

- Mark

Endre Stlsvik wrote:
>
> May I ask: What IS a profilenet? I ask since this obviously is 
> something that you two hit off on right away, while I haven't heard of..!
>
>
> Thanks,
> Endre.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 13:27:33 2008
Return-Path: <java-user-return-32052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39208 invoked from network); 17 Jan 2008 13:27:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 13:27:32 -0000
Received: (qmail 36287 invoked by uid 500); 17 Jan 2008 13:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36250 invoked by uid 500); 17 Jan 2008 13:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36239 invoked by uid 99); 17 Jan 2008 13:27:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 05:27:16 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.192.15.188] (HELO dkcphmx24.softcom.dk) (194.192.15.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 13:27:02 +0000
Received: from xyz.ne.cision.com (195.149.155.20) by dkcphmx24.softcom.dk (envelope-from <marcus.falk@cision.com>) with ESMTP. tag msg.1200576414.598198.7705
 (Processed in 0.117906 secs); 17 Jan 2008 13:26:54 -0000
X-SoftScan-Status: clean
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: SV: Integrating dynamic data into Lucene search/ranking
Date: Thu, 17 Jan 2008 14:26:53 +0100
Message-ID: <9AE28E104993A4438ED06F057176FD580149653F@STHMAIL01.emea2.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SV: Integrating dynamic data into Lucene search/ranking
Thread-Index: AchY7xXVyX4FHZr2SeCBk2CaXixI8wAHSHbw
From: "Marcus Falk" <marcus.falk@cision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

In our solution we used a RAMDir for the newest incoming articles and a =
FSDir for older ones. Then we had a limit for the ramdir  like 10.000 =
documents when that limit were hit we used mergesegments to move the =
content from ramdir -> fsdir, actually we had to do some modification in =
the mergesegment method since it always seemed to do an optimize on the =
index after the merge, I have the code if u want it.

If you use RAMDir + FSDir you can use 2 indexserchers and one =
multisearcher on top. The indexsearcher that uses the small RAMDir can =
be rebinded quite often.=20

/
Regards
M


-----Ursprungligt meddelande-----
Fr=E5n: Andrzej Bialecki [mailto:ab@getopt.org]=20
Skickat: den 17 januari 2008 10:55
Till: java-user@lucene.apache.org
=C4mne: Re: SV: Integrating dynamic data into Lucene search/ranking

Tobias Lohr wrote:
> I'm not really sure, if this approach is possible for working in =
changes every - let's say - 30 seconds!?

The conventional wisdom is to use RAMDirectory in such scenarios. I.e.=20
you commit frequent updates to a RAMDirectory and frequently reopen its=20
Searcher (which should be fast). Periodically, merge the RAMDirectory=20
index with your on-disk index - you need to open a new IndexSearcher in=20
the background, warm it up with the latest N queries, and when it's=20
ready you swap searchers, i.e. you close the old one, purge the=20
RAMDirectory (since it was synced to the on-disk index), and start using =

the new IndexSearcher.

And again, start accumulating new docs in the RAMDirectory, etc, etc ...

--=20
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


> Datum: Thu, 17 Jan 2008 05:35:13 +0100
> Von: "Marcus Falk" <marcus.falk@cision.com>
> An: java-user@lucene.apache.org, java-user@lucene.apache.org
> Betreff: SV: Integrating dynamic data into Lucene search/ranking

> We did this in our system, indexing a constant flow of news articles,=20
> by doing as Otis described (reopened the indexsearcher)..
> =20
> Every 3:d minute we are creating a new indexsearcher in the background =

> after this searcher has been created we are fireing some warm up=20
> queries against it and after that we change the old searcher to point =
to the new one.
> Works fine for us and we got large indexes (several millions of =
articles)...=20
> =20
> /Regards
> Marcus
> =20
> =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 14:15:25 2008
Return-Path: <java-user-return-32053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58566 invoked from network); 17 Jan 2008 14:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 14:15:25 -0000
Received: (qmail 34225 invoked by uid 500); 17 Jan 2008 14:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34203 invoked by uid 500); 17 Jan 2008 14:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34192 invoked by uid 99); 17 Jan 2008 14:15:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 06:15:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TobiasLohr@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 17 Jan 2008 14:14:40 +0000
Received: (qmail 2406 invoked by uid 0); 17 Jan 2008 14:14:44 -0000
Received: from 217.7.220.55 by www167.gmx.net with HTTP;
 Thu, 17 Jan 2008 15:14:44 +0100 (CET)
Content-Type: text/plain; charset="iso-8859-1"
Date: Thu, 17 Jan 2008 15:14:44 +0100
From: "Tobias Lohr" <TobiasLohr@gmx.de>
In-Reply-To: <9AE28E104993A4438ED06F057176FD580149653F@STHMAIL01.emea2.ad.group>
Message-ID: <20080117141444.42480@gmx.net>
MIME-Version: 1.0
References: <9AE28E104993A4438ED06F057176FD580149653F@STHMAIL01.emea2.ad.group>
Subject: Re: SV: SV: Integrating dynamic data into Lucene search/ranking
To: java-user@lucene.apache.org
X-Authenticated: #1677435
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX198HRVCw7d8zUdfV1zJoLivy1PEPOlnKwWSoJ4u9D
 oIm/37OKXm4IiciO+mHxa9n+nk3n6mTDsbRw== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: sgbnCqNxbHIhVwmgIDQ0R3oiJihyahDy
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your hint. If its possible I would take a look into the code, but the approach is interesting.

What would you say to this approach I developed in my mind:

- Having an additional quite smaller index, were only the dynamic data resides and is incorporated every N seconds with incremental index updates.
- Documents of the additional index have the same semantical "id" field, to model a relation between them.
- A search is actually based on the index containing the searchable content, but the sorting/ranking is done using a SortComparatorSource, which "extracts" the information and calculates the score for the documents  of the content index.

What do you say?

-------- Original-Nachricht --------
> Datum: Thu, 17 Jan 2008 14:26:53 +0100
> Von: "Marcus Falk" <marcus.falk@cision.com>
> An: java-user@lucene.apache.org
> Betreff: SV: SV: Integrating dynamic data into Lucene search/ranking

> In our solution we used a RAMDir for the newest incoming articles and a
> FSDir for older ones. Then we had a limit for the ramdir  like 10.000
> documents when that limit were hit we used mergesegments to move the content from
> ramdir -> fsdir, actually we had to do some modification in the
> mergesegment method since it always seemed to do an optimize on the index after the
> merge, I have the code if u want it.
> 
> If you use RAMDir + FSDir you can use 2 indexserchers and one
> multisearcher on top. The indexsearcher that uses the small RAMDir can be rebinded
> quite often. 
> 
> /
> Regards
> M
> 
> 
> -----Ursprungligt meddelande-----
> Frn: Andrzej Bialecki [mailto:ab@getopt.org] 
> Skickat: den 17 januari 2008 10:55
> Till: java-user@lucene.apache.org
> mne: Re: SV: Integrating dynamic data into Lucene search/ranking
> 
> Tobias Lohr wrote:
> > I'm not really sure, if this approach is possible for working in changes
> every - let's say - 30 seconds!?
> 
> The conventional wisdom is to use RAMDirectory in such scenarios. I.e. 
> you commit frequent updates to a RAMDirectory and frequently reopen its 
> Searcher (which should be fast). Periodically, merge the RAMDirectory 
> index with your on-disk index - you need to open a new IndexSearcher in 
> the background, warm it up with the latest N queries, and when it's 
> ready you swap searchers, i.e. you close the old one, purge the 
> RAMDirectory (since it was synced to the on-disk index), and start using 
> the new IndexSearcher.
> 
> And again, start accumulating new docs in the RAMDirectory, etc, etc ...
> 
> -- 
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> > Datum: Thu, 17 Jan 2008 05:35:13 +0100
> > Von: "Marcus Falk" <marcus.falk@cision.com>
> > An: java-user@lucene.apache.org, java-user@lucene.apache.org
> > Betreff: SV: Integrating dynamic data into Lucene search/ranking
> 
> > We did this in our system, indexing a constant flow of news articles, 
> > by doing as Otis described (reopened the indexsearcher)..
> >  
> > Every 3:d minute we are creating a new indexsearcher in the background 
> > after this searcher has been created we are fireing some warm up 
> > queries against it and after that we change the old searcher to point to
> the new one.
> > Works fine for us and we got large indexes (several millions of
> articles)... 
> >  
> > /Regards
> > Marcus
> >  
> >  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal fr Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 15:25:23 2008
Return-Path: <java-user-return-32054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53956 invoked from network); 17 Jan 2008 15:25:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 15:25:23 -0000
Received: (qmail 55240 invoked by uid 500); 17 Jan 2008 15:25:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55205 invoked by uid 500); 17 Jan 2008 15:25:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55194 invoked by uid 99); 17 Jan 2008 15:25:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:25:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 15:24:40 +0000
Received: by fg-out-1718.google.com with SMTP id d23so787374fga.27
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 07:24:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=X+b/2FWng1HEpS0p47aUsXlrs3CNkoxETP2W2EfFvRw=;
        b=nv2g4mNP1gMAKznE0jH3m7mu9Ud1F0GIcx+rAzthjFinKm/3DcyTi8rgcoQavJvWog2Jvsgy/LxrQAuNU76MoPOvaY6h4CuQlMk6+2LuA4tVzWW/ZTuV2+7ihFJyfo6U3iFZlKwEO2Omnfl5+n7pvNYTcjyGuqj88mAxvAAbs7Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sHPoiFoj832v9lOkuFDM+28v1iqdVKIlj1YkUhXQX7heBXG9sohzrrPpVFPIMkMAGqBGRSgp4Qn3y8BCZddo6fPL9OzB76lhYfL7nxTJvKHherLzDJnOArcyt/OCe3qgi1rrMHOhOhdGKYNGsv2sUOJCwk6l/T1WwceNNs2vhy0=
Received: by 10.82.180.17 with SMTP id c17mr3864081buf.14.1200583484298;
        Thu, 17 Jan 2008 07:24:44 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 17 Jan 2008 07:24:44 -0800 (PST)
Message-ID: <359a92830801170724l5ed52b77ge860f36e6196179c@mail.gmail.com>
Date: Thu, 17 Jan 2008 10:24:44 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per IndexReader?)
In-Reply-To: <1200565916.9514.116.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1002_8988630.1200583484292"
References: <1200565916.9514.116.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1002_8988630.1200583484292
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There's a section on the Lucene Wiki for real world
experiences etc. After you are satisfied with your
tests, it'd be great if you could add your measurements
to the Wiki!

Best
Erick


On Jan 17, 2008 5:31 AM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:

> On Fri, 2008-01-11 at 11:34 +0100, Toke Eskildsen wrote:
> > As for shared searcher vs. individual searchers, there was just a
> > slight penalty for using individual searchers.
>
> Whoops! Seems like I need better QA for my test-code. I didn't use
> individual searchers for each thread when I thought I was. The slight
> penalty wrongly observed must have been due to measurement variations.
>
> With the corrected test, some interesting observations about our index
> can be made, which will definitely affect our configuration. In the
> following, the queries/second is an average over 350.000 queries.
> For each query, a search is performed and the content of a specific
> field is extracted for the first 20 hits.
>
> == System-summary ==
> Dual-core Intel Xeon 5148 2.3 GHz, 8 GB RAM, Linux, Lucene 2.1, 37 GB/10
> million documents index, queries taken from production system logs.
>
> == Conventional harddisks (2 * 15000 RPM in software RAID 1) ==
> 1 thread,  1 searcher:  109 queries/sec
> 2 threads, 1 searcher:  118 queries/sec
> 2 threads, 2 searchers: 157 queries/sec
> 3 threads, 1 searcher:  111 queries/sec
> 3 threads, 3 searchers: 177 queries/sec
> 4 threads, 1 searcher:  108 queries/sec
> 4 threads, 4 searchers: 169 queries/sec
>
> == Solid State Drives (2 * 32 GB Samsung in software RAID 0) ==
> 1 thread,  1 searcher:  193 queries/sec
> 2 threads, 1 searcher:  295 queries/sec
> 2 threads, 2 searchers: 357 queries/sec
> 3 threads, 1 searcher:  197 queries/sec
> 3 threads, 3 searchers: 369 queries/sec
> 4 threads, 1 searcher:  192 queries/sec
> 4 threads, 4 searchers: 302 queries/sec
>
> Graphs can be viewed at http://wiki.statsbiblioteket.dk/summa/Hardware
>
> For our setup it seems that the usual avoid-multiple-searchers advice is
> not valid, neither for conventional harddisks, nor Solid State Drives.
> The optimal configuration for our dual-core test machine is three
> threads with individual searchers. The obvious question is whether this
> can be extended to other cases.
>
> > As for threading, I noticed something strange: On the dual-core
> > machine, two threads gave better performance than one, while 4 threads
> > gave the same performance as one.
>
> As can be seen above, this strange picture is consistent. 1, 3 and 4
> threads with shared searcher performs the same, independent of which
> storage the machine uses, while 2 threads performs markedly better.
>
> I've started the same test-suite for Lucene 2.2 and 2.3RC2. It should
> be finished in a day or two.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1002_8988630.1200583484292--

From java-user-return-32055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 15:33:13 2008
Return-Path: <java-user-return-32055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58743 invoked from network); 17 Jan 2008 15:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 15:33:13 -0000
Received: (qmail 69388 invoked by uid 500); 17 Jan 2008 15:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69361 invoked by uid 500); 17 Jan 2008 15:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69343 invoked by uid 99); 17 Jan 2008 15:32:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:32:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 15:32:22 +0000
Received: by fk-out-0910.google.com with SMTP id z23so465578fkz.5
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 07:32:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yNLJxZYFH2+7a7dU15LchzakcBh1mpJe0BflllwKmMg=;
        b=nkYDegXgdEbLI5BEutd14yiKEcaDiHJuWK2B1rStefacYSdZgmX+loytcojcrVlOA+3qi6Q8ti8iJucuVdfa4gL5ctyUWAtB01b/8qN4pTsgZuCN+fIar3sDjbBlQ/B7jmPMqSdU+cjuYK53yokwHRp0E8QP2NEQU4YK7sfoh7w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L3ytb4ZkUE8yYfuW0cjBsFy+HAFMhDCzkcTky6+7+mARw16wP0sC9Z600w0xGkw4WTI2gcKx1pw1lOlO/CBIxbET7ArA15WhJs6n0706QtOfgI3y5aEhysLl+gQVK8ipoH828+SwLfjom80a6XkXet3KXAZayzbjL9epWyvqF2E=
Received: by 10.82.167.5 with SMTP id p5mr3900206bue.2.1200583946607;
        Thu, 17 Jan 2008 07:32:26 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 17 Jan 2008 07:32:26 -0800 (PST)
Message-ID: <359a92830801170732u3df0531fsaad724e286cc76ff@mail.gmail.com>
Date: Thu, 17 Jan 2008 10:32:26 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing query from string
In-Reply-To: <295da8fe0801170307k5814578bo75977d3069ec4cb7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1019_25184009.1200583946591"
References: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
	 <359a92830801160614j2cf1e171vc8f1c54b58b6ec76@mail.gmail.com>
	 <295da8fe0801170307k5814578bo75977d3069ec4cb7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1019_25184009.1200583946591
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I believe, but I'm not sure, that query and newQuery
are not guaranteed to be equivalent. So I'd be cautious
about this approach. But if it works for you....

I'm assuming that you're somehow programmatically
constructing the query and therefore can't just
store the original string. I'd *always* store the
original rather than a processed query if I could,
just on general principles.

What is it that you're trying to accomplish anyway?
Perhaps there's a better approach....

Erick

On Jan 17, 2008 6:07 AM, prabin meitei <prabin.meitei@gmail.com> wrote:

> Hi Erick,
>   Thanks for your response. I have tried the folowing way and seems to be
> working. Tell me if there is any problem with the approach.
>
> String str = query.toString();
> QueryParser parser = new QueryParser("", new StandardAnalyzer);
> Query newQuery = parser.parse(str);
>
> now use *newQuery* for making queries
>
>
> I understand that in the constructor of QueryParser it takes default field
> and a analyzer. If I put a blank field it seems to work. Putting null
> gives
> a null pointer exception.
>
> Regards,
> Prabin
>
>
>
> On Jan 16, 2008 7:44 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > As I remember from various threads, toString is more of
> > a debugging aid and you cannot completely rely on the
> > transformation from a parsed query -> tostring -> parsed query
> > to be reliable. But this is "something I remember", so take
> > it with a grain of salt (you might want to search the mail
> > archive to see if my memory is correct).
> >
> > That said, use BooleanQuery to add as many clauses in
> > as many ways as you want.
> >
> > Actually, I don't know how I'd go about storing a programmatically
> > constructed query, I'd sure like to know if there's a way. You could
> > certainly store the original query if you were taking user input and
> > parsing it...
> >
> > Best
> > Erick
> >
> > On Jan 16, 2008 4:22 AM, prabin meitei <prabin.meitei@gmail.com> wrote:
> >
> > > Hi ,
> > >    I want to construct a query from string. how can I do it??
>  Actually
> > i
> > > saved a query(a boolean query) as string (using query.toString()).
> > > Is there a way to reconstruct the query from the string i saved? How
> can
> > i
> > > add more clauses to the  reconstructed query?
> > > Thanks in advance.
> > >
> > > Prabin
> > >
> >
>

------=_Part_1019_25184009.1200583946591--

From java-user-return-32056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 15:34:45 2008
Return-Path: <java-user-return-32056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59559 invoked from network); 17 Jan 2008 15:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 15:34:44 -0000
Received: (qmail 76026 invoked by uid 500); 17 Jan 2008 15:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75993 invoked by uid 500); 17 Jan 2008 15:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75982 invoked by uid 99); 17 Jan 2008 15:34:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:34:27 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.192.15.188] (HELO dkcphmx24.softcom.dk) (194.192.15.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 15:33:59 +0000
Received: from xyz.ne.cision.com (195.149.155.20) by dkcphmx24.softcom.dk (envelope-from <marcus.falk@cision.com>) with ESMTP. tag msg.1200584043.113895.25501
 (Processed in 0.227653 secs); 17 Jan 2008 15:34:03 -0000
X-SoftScan-Status: clean
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: SV: SV: Integrating dynamic data into Lucene search/ranking
Date: Thu, 17 Jan 2008 16:34:02 +0100
Message-ID: <9AE28E104993A4438ED06F057176FD5801496847@STHMAIL01.emea2.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SV: SV: Integrating dynamic data into Lucene search/ranking
Thread-Index: AchZE2cAbNiv6OPrTTOe3u/mIVGK3wACaV7w
From: "Marcus Falk" <marcus.falk@cision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I think that would work. But I'm not 100% sure of what you are trying to =
achieve.=20

Just a notice:
Sorting on results has poor performance, if you have a large index, we =
ran into severe performance problems with just a coupe of million =
articles which lead us to modify the ranking instead.

Code for merge without optimize:

        public virtual void AddIndexesWithoutMerge(Directory dir)
		{
			lock (this)
			{		=09
				int start =3D segmentInfos.Count;
			=09
	=09
				SegmentInfos sis =3D new SegmentInfos(); // read infos from dir
				sis.Read(dir);
				for (int j =3D 0; j < sis.Count; j++)
				{
					segmentInfos.Add(sis.Info(j)); // add each info
			    }
			=09
			=09
				// merge newly added segments in log(n) passes
				while (segmentInfos.Count > start + mergeFactor)
				{
					for (int base_Renamed =3D start + 1; base_Renamed < =
segmentInfos.Count; base_Renamed++)
					{
						int end =3D System.Math.Min(segmentInfos.Count, base_Renamed + =
mergeFactor);
						if (end - base_Renamed > 1)
							MergeSegments(base_Renamed, end);
					}
				}

                MaybeMergeSegments();
			}
		}

(in indexwriter class (C# code as you notice, will probably look about =
the same in java))=20

There is a AddIndexes method in the original implementation of =
indexwriter, however that would cause a merge of files on disc my =
version causes the directory to be writed to a new file (so if you put =
in a RamDirectory containing 10.000 docs you will get a new file with =
10.000 docs on disk, which later will be merged by lucene when =
mergefactor is triggered on FS indexwriter).

/
Regards=20
Marcus













-----Ursprungligt meddelande-----
Fr=E5n: Tobias Lohr [mailto:TobiasLohr@gmx.de]=20
Skickat: den 17 januari 2008 15:15
Till: java-user@lucene.apache.org
=C4mne: Re: SV: SV: Integrating dynamic data into Lucene search/ranking

Thanks for your hint. If its possible I would take a look into the code, =
but the approach is interesting.

What would you say to this approach I developed in my mind:

- Having an additional quite smaller index, were only the dynamic data =
resides and is incorporated every N seconds with incremental index =
updates.
- Documents of the additional index have the same semantical "id" field, =
to model a relation between them.
- A search is actually based on the index containing the searchable =
content, but the sorting/ranking is done using a SortComparatorSource, =
which "extracts" the information and calculates the score for the =
documents  of the content index.

What do you say?

-------- Original-Nachricht --------
> Datum: Thu, 17 Jan 2008 14:26:53 +0100
> Von: "Marcus Falk" <marcus.falk@cision.com>
> An: java-user@lucene.apache.org
> Betreff: SV: SV: Integrating dynamic data into Lucene search/ranking

> In our solution we used a RAMDir for the newest incoming articles and =
a
> FSDir for older ones. Then we had a limit for the ramdir  like 10.000
> documents when that limit were hit we used mergesegments to move the =
content from
> ramdir -> fsdir, actually we had to do some modification in the
> mergesegment method since it always seemed to do an optimize on the =
index after the
> merge, I have the code if u want it.
>=20
> If you use RAMDir + FSDir you can use 2 indexserchers and one
> multisearcher on top. The indexsearcher that uses the small RAMDir can =
be rebinded
> quite often.=20
>=20
> /
> Regards
> M
>=20
>=20
> -----Ursprungligt meddelande-----
> Fr=E5n: Andrzej Bialecki [mailto:ab@getopt.org]=20
> Skickat: den 17 januari 2008 10:55
> Till: java-user@lucene.apache.org
> =C4mne: Re: SV: Integrating dynamic data into Lucene search/ranking
>=20
> Tobias Lohr wrote:
> > I'm not really sure, if this approach is possible for working in =
changes
> every - let's say - 30 seconds!?
>=20
> The conventional wisdom is to use RAMDirectory in such scenarios. I.e. =

> you commit frequent updates to a RAMDirectory and frequently reopen =
its=20
> Searcher (which should be fast). Periodically, merge the RAMDirectory=20
> index with your on-disk index - you need to open a new IndexSearcher =
in=20
> the background, warm it up with the latest N queries, and when it's=20
> ready you swap searchers, i.e. you close the old one, purge the=20
> RAMDirectory (since it was synced to the on-disk index), and start =
using=20
> the new IndexSearcher.
>=20
> And again, start accumulating new docs in the RAMDirectory, etc, etc =
...
>=20
> --=20
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> > Datum: Thu, 17 Jan 2008 05:35:13 +0100
> > Von: "Marcus Falk" <marcus.falk@cision.com>
> > An: java-user@lucene.apache.org, java-user@lucene.apache.org
> > Betreff: SV: Integrating dynamic data into Lucene search/ranking
>=20
> > We did this in our system, indexing a constant flow of news =
articles,=20
> > by doing as Otis described (reopened the indexsearcher)..
> > =20
> > Every 3:d minute we are creating a new indexsearcher in the =
background=20
> > after this searcher has been created we are fireing some warm up=20
> > queries against it and after that we change the old searcher to =
point to
> the new one.
> > Works fine for us and we got large indexes (several millions of
> articles)...=20
> > =20
> > /Regards
> > Marcus
> > =20
> > =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

--=20
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!=20
Ideal f=FCr Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 15:38:57 2008
Return-Path: <java-user-return-32057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62644 invoked from network); 17 Jan 2008 15:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 15:38:57 -0000
Received: (qmail 90746 invoked by uid 500); 17 Jan 2008 15:38:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90718 invoked by uid 500); 17 Jan 2008 15:38:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90707 invoked by uid 99); 17 Jan 2008 15:38:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:38:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 15:38:16 +0000
Received: by fg-out-1718.google.com with SMTP id d23so791417fga.27
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 07:38:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=80Y5HsRAJK3XfW4cdtcv6r70RV04I4QuyTfp9AwFEJQ=;
        b=mEQj7VhZYL8G2lAuWw0p+fr7vJHiETrgwotKqnLolYfhtvEKnEg2PhjvBSnuaBmQ0CCSglELI9Ot7fWGUONjMJF9M9qGuG0pmHh6i2HHdJqQKuhW/TZveh9bhDX/2xnCVQF4AFwgYMDhSqKfzKsWecaW7RsZ4alIeUSiS9inukk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aBYoU8ePginqyYFtwbuXlpdjEvUQnTKTazYtemjlhCZn3rqNDZZ8f1zvLfPd8r6P+cFAS53pw3d3yoYMfNOmI+LaKWEaUhQn5uM3lcRwlk8PEirLu3VPaBCg2RFDjVU8TBBqeaYxecFoQaQQm4u7P5/9EAOeePLEeD7VdR1VaRE=
Received: by 10.82.107.15 with SMTP id f15mr3915572buc.0.1200584300766;
        Thu, 17 Jan 2008 07:38:20 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 17 Jan 2008 07:38:20 -0800 (PST)
Message-ID: <359a92830801170738h6d8439b4r2d8f503ba519ce80@mail.gmail.com>
Date: Thu, 17 Jan 2008 10:38:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing query from string
In-Reply-To: <359a92830801170732u3df0531fsaad724e286cc76ff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1049_21315120.1200584300761"
References: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
	 <359a92830801160614j2cf1e171vc8f1c54b58b6ec76@mail.gmail.com>
	 <295da8fe0801170307k5814578bo75977d3069ec4cb7@mail.gmail.com>
	 <359a92830801170732u3df0531fsaad724e286cc76ff@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1049_21315120.1200584300761
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I just thought of an interesting test for whether
toString() is reasonable. You could log/flag
when the reloaded query differs. I.e.
String queryFromToString;  // your stored form
Query newQ = parser.parse(queryFromToString);
if (newQ.toString != queryFromToString) {
  log some stuff or throw an exception or....
}

That'd provide you a reality check...

Erick

On Jan 17, 2008 10:32 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> I believe, but I'm not sure, that query and newQuery
> are not guaranteed to be equivalent. So I'd be cautious
> about this approach. But if it works for you....
>
> I'm assuming that you're somehow programmatically
> constructing the query and therefore can't just
> store the original string. I'd *always* store the
> original rather than a processed query if I could,
> just on general principles.
>
> What is it that you're trying to accomplish anyway?
> Perhaps there's a better approach....
>
> Erick
>
>
> On Jan 17, 2008 6:07 AM, prabin meitei <prabin.meitei@gmail.com> wrote:
>
> > Hi Erick,
> >   Thanks for your response. I have tried the folowing way and seems to
> > be
> > working. Tell me if there is any problem with the approach.
> >
> > String str = query.toString();
> > QueryParser parser = new QueryParser("", new StandardAnalyzer);
> > Query newQuery = parser.parse(str);
> >
> > now use *newQuery* for making queries
> >
> >
> > I understand that in the constructor of QueryParser it takes default
> > field
> > and a analyzer. If I put a blank field it seems to work. Putting null
> > gives
> > a null pointer exception.
> >
> > Regards,
> > Prabin
> >
> >
> >
> > On Jan 16, 2008 7:44 PM, Erick Erickson < erickerickson@gmail.com>
> > wrote:
> >
> > > As I remember from various threads, toString is more of
> > > a debugging aid and you cannot completely rely on the
> > > transformation from a parsed query -> tostring -> parsed query
> > > to be reliable. But this is "something I remember", so take
> > > it with a grain of salt (you might want to search the mail
> > > archive to see if my memory is correct).
> > >
> > > That said, use BooleanQuery to add as many clauses in
> > > as many ways as you want.
> > >
> > > Actually, I don't know how I'd go about storing a programmatically
> > > constructed query, I'd sure like to know if there's a way. You could
> > > certainly store the original query if you were taking user input and
> > > parsing it...
> > >
> > > Best
> > > Erick
> > >
> > > On Jan 16, 2008 4:22 AM, prabin meitei <prabin.meitei@gmail.com>
> > wrote:
> > >
> > > > Hi ,
> > > >    I want to construct a query from string. how can I do it??
> >  Actually
> > > i
> > > > saved a query(a boolean query) as string (using query.toString()).
> > > > Is there a way to reconstruct the query from the string i saved? How
> > can
> > > i
> > > > add more clauses to the  reconstructed query?
> > > > Thanks in advance.
> > > >
> > > > Prabin
> > > >
> > >
> >
>
>

------=_Part_1049_21315120.1200584300761--

From java-user-return-32058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 15:43:36 2008
Return-Path: <java-user-return-32058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67267 invoked from network); 17 Jan 2008 15:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 15:43:36 -0000
Received: (qmail 1205 invoked by uid 500); 17 Jan 2008 15:43:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1168 invoked by uid 500); 17 Jan 2008 15:43:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1157 invoked by uid 99); 17 Jan 2008 15:43:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:43:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 15:42:54 +0000
Received: by fg-out-1718.google.com with SMTP id d23so792615fga.27
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 07:42:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=oDj0i2/gMVAVSTyxTe20UZcvmhjG7Z3Px37fMD+Nzik=;
        b=lnjUrzC7ay/XhH5WLyy7h1arkKiC/AmOYPeJohWjDdOAvLtOxdOGWhPVAwf00VqJOx864kamqInYuf2uE6CLzy7la7lviwoYStx2vH6FsG+vHHP9GZrnldy4ZaOg35jFyvaRhQQcrs6KAWZllfcs2jYu9p1zCKu/YAacZbZHmoA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=v+/HiVLq5oM5R599piKoiQz8nNbyiQjx/1XMXHYDPBOmkvGWSkyn8lhBSr3DUNcGFoTiMBZDeiCW8y1J92HBwnsyVA/7EQwRYO1W81KVmSHG73vxs1vtJi5aSDX/9bvvBFHJm0PTFJRmgjdX7eC5m+DHSM8Lb/2A1EksaWmh0I0=
Received: by 10.82.171.16 with SMTP id t16mr3904093bue.11.1200584577894;
        Thu, 17 Jan 2008 07:42:57 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Thu, 17 Jan 2008 07:42:57 -0800 (PST)
Message-ID: <1bcb7c7f0801170742v54d53083u3912d05f84202d5f@mail.gmail.com>
Date: Thu, 17 Jan 2008 17:42:57 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexSearcher and RAMDirectory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_838_23203312.1200584577884"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_838_23203312.1200584577884
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I understand after writing some documents in an index with an indexwriter,
the IndexSearcher object has to be reinstantiated for it to find newly
instantiated objects. And this reinstantiation of IndexSearcher is costly
from what I understand.
I am working on a caching scheme that will allow transparent operation - so
what one can do indexsearches while updating the index, based on a certain
key.

Does anyone have any ideas to overcome this limitation? I thought of adding
documents to a map and searching the map first and then the index, and
writing the map every once in a while to index, but this approach has its
limitations too.
Could it be possible to use a ramdirectory as a cache, and could it be
faster to reinstantiate the indexsearcher on this ram directory?

Any input greatly appreciated.

Best Regards,
-C.B.

------=_Part_838_23203312.1200584577884--

From java-user-return-32059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 15:59:09 2008
Return-Path: <java-user-return-32059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79064 invoked from network); 17 Jan 2008 15:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 15:59:09 -0000
Received: (qmail 38698 invoked by uid 500); 17 Jan 2008 15:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38658 invoked by uid 500); 17 Jan 2008 15:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38647 invoked by uid 99); 17 Jan 2008 15:58:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:58:53 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.192.15.188] (HELO dkcphmx24.softcom.dk) (194.192.15.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 15:58:40 +0000
Received: from xyz.ne.cision.com (195.149.155.20) by dkcphmx24.softcom.dk (envelope-from <marcus.falk@cision.com>) with ESMTP. tag msg.1200585511.682213.18364
 (Processed in 0.251057 secs); 17 Jan 2008 15:58:31 -0000
X-SoftScan-Status: clean
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: Inverted search / Search on profilenet
Date: Thu, 17 Jan 2008 16:58:30 +0100
Message-ID: <9AE28E104993A4438ED06F057176FD58014968C3@STHMAIL01.emea2.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inverted search / Search on profilenet
Thread-Index: AchZCLIe7LHeacU3Rt6+Ft17uXcxXwAFdr2w
From: "Marcus Falk" <marcus.falk@cision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes a profilenet is what Mark describes.

In our Verity profilenet we got ~50.000 profiles (queries) the =
performance is fine around 20-25 documents / second.=20

>From what we can tell the matches are accurate unfortunately I don't =
have any ideas on how verity does this under the hood so I don't know if =
there is any approximation involved. We do however get information about =
the each query that hits such as score and words (with their position =
within the document).

We need this kind of functionality since we are monitoring the incoming =
documents for our customers.

--- Answer to Marks first mail---
MoreLikeThis:
I get a feeling that it would be very hard to do this using this kind of =
query, how do I index the queries with operators such as NOT, NEAR and =
WildCard?

Taxonomy/Classification
I'm totally lost here ;) Any one that knows what to look for in this =
case?

MemoryIndex:
We have ran benchmarks using this technique it wasn't enough, if I =
recall we could run like 10.000 profiles with good performance. And as =
you say it doesn't scale well at all.



/
Regards
Marcus

 =20



-----Ursprungligt meddelande-----
Fr=E5n: Mark Miller [mailto:markrmiller@gmail.com]=20
Skickat: den 17 januari 2008 13:58
Till: java-user@lucene.apache.org
=C4mne: Re: Inverted search / Search on profilenet

Verity, autonomy, whatever, has a what they call a reverse query system=20
called profilenet. A profile is just a query (or I guess more than one=20
query?) and you can setup a bunch of them. Then you supply the document=20
and you will get the matching queries as well as a score. They say its=20
the opposite of doing a search with a query and getting back docs.=20
Instead you do a search with a doc and get back these queries. They=20
claim it can be used for things like taxonomy/classification among other =

things. I don't know how true this is to a real reverse query system as=20
that would seem to be kind of slow -- my guess is its a bit of an=20
approximation.

- Mark

Endre St=F8lsvik wrote:
>
> May I ask: What IS a profilenet? I ask since this obviously is=20
> something that you two hit off on right away, while I haven't heard =
of..!
>
>
> Thanks,
> Endre.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 16:00:01 2008
Return-Path: <java-user-return-32060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79400 invoked from network); 17 Jan 2008 16:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 16:00:00 -0000
Received: (qmail 41518 invoked by uid 500); 17 Jan 2008 15:59:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40940 invoked by uid 500); 17 Jan 2008 15:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40929 invoked by uid 99); 17 Jan 2008 15:59:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 07:59:43 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.192.15.188] (HELO dkcphmx24.softcom.dk) (194.192.15.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 15:59:16 +0000
Received: from xyz.ne.cision.com (195.149.155.20) by dkcphmx24.softcom.dk (envelope-from <marcus.falk@cision.com>) with ESMTP. tag msg.1200585560.302797.18365
 (Processed in 0.60233 secs); 17 Jan 2008 15:59:20 -0000
X-SoftScan-Status: clean
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SV: SV: SV: Integrating dynamic data into Lucene search/ranking
Date: Thu, 17 Jan 2008 16:59:19 +0100
Message-ID: <9AE28E104993A4438ED06F057176FD58014968CA@STHMAIL01.emea2.ad.group>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SV: SV: Integrating dynamic data into Lucene search/ranking
Thread-Index: AchZE2cAbNiv6OPrTTOe3u/mIVGK3wACaV7wAAEz4uA=
From: "Marcus Falk" <marcus.falk@cision.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I heard from a friend that this behavior (AddWithoutMerge) has been =
added into 2.1 or 2.2 of lucene.

/M

-----Ursprungligt meddelande-----
Fr=E5n: Marcus Falk [mailto:marcus.falk@cision.com]=20
Skickat: den 17 januari 2008 16:34
Till: java-user@lucene.apache.org
=C4mne: SV: SV: SV: Integrating dynamic data into Lucene search/ranking

I think that would work. But I'm not 100% sure of what you are trying to =
achieve.=20

Just a notice:
Sorting on results has poor performance, if you have a large index, we =
ran into severe performance problems with just a coupe of million =
articles which lead us to modify the ranking instead.

Code for merge without optimize:

        public virtual void AddIndexesWithoutMerge(Directory dir)
		{
			lock (this)
			{		=09
				int start =3D segmentInfos.Count;
			=09
	=09
				SegmentInfos sis =3D new SegmentInfos(); // read infos from dir
				sis.Read(dir);
				for (int j =3D 0; j < sis.Count; j++)
				{
					segmentInfos.Add(sis.Info(j)); // add each info
			    }
			=09
			=09
				// merge newly added segments in log(n) passes
				while (segmentInfos.Count > start + mergeFactor)
				{
					for (int base_Renamed =3D start + 1; base_Renamed < =
segmentInfos.Count; base_Renamed++)
					{
						int end =3D System.Math.Min(segmentInfos.Count, base_Renamed + =
mergeFactor);
						if (end - base_Renamed > 1)
							MergeSegments(base_Renamed, end);
					}
				}

                MaybeMergeSegments();
			}
		}

(in indexwriter class (C# code as you notice, will probably look about =
the same in java))=20

There is a AddIndexes method in the original implementation of =
indexwriter, however that would cause a merge of files on disc my =
version causes the directory to be writed to a new file (so if you put =
in a RamDirectory containing 10.000 docs you will get a new file with =
10.000 docs on disk, which later will be merged by lucene when =
mergefactor is triggered on FS indexwriter).

/
Regards=20
Marcus













-----Ursprungligt meddelande-----
Fr=E5n: Tobias Lohr [mailto:TobiasLohr@gmx.de]=20
Skickat: den 17 januari 2008 15:15
Till: java-user@lucene.apache.org
=C4mne: Re: SV: SV: Integrating dynamic data into Lucene search/ranking

Thanks for your hint. If its possible I would take a look into the code, =
but the approach is interesting.

What would you say to this approach I developed in my mind:

- Having an additional quite smaller index, were only the dynamic data =
resides and is incorporated every N seconds with incremental index =
updates.
- Documents of the additional index have the same semantical "id" field, =
to model a relation between them.
- A search is actually based on the index containing the searchable =
content, but the sorting/ranking is done using a SortComparatorSource, =
which "extracts" the information and calculates the score for the =
documents  of the content index.

What do you say?

-------- Original-Nachricht --------
> Datum: Thu, 17 Jan 2008 14:26:53 +0100
> Von: "Marcus Falk" <marcus.falk@cision.com>
> An: java-user@lucene.apache.org
> Betreff: SV: SV: Integrating dynamic data into Lucene search/ranking

> In our solution we used a RAMDir for the newest incoming articles and =
a
> FSDir for older ones. Then we had a limit for the ramdir  like 10.000
> documents when that limit were hit we used mergesegments to move the =
content from
> ramdir -> fsdir, actually we had to do some modification in the
> mergesegment method since it always seemed to do an optimize on the =
index after the
> merge, I have the code if u want it.
>=20
> If you use RAMDir + FSDir you can use 2 indexserchers and one
> multisearcher on top. The indexsearcher that uses the small RAMDir can =
be rebinded
> quite often.=20
>=20
> /
> Regards
> M
>=20
>=20
> -----Ursprungligt meddelande-----
> Fr=E5n: Andrzej Bialecki [mailto:ab@getopt.org]=20
> Skickat: den 17 januari 2008 10:55
> Till: java-user@lucene.apache.org
> =C4mne: Re: SV: Integrating dynamic data into Lucene search/ranking
>=20
> Tobias Lohr wrote:
> > I'm not really sure, if this approach is possible for working in =
changes
> every - let's say - 30 seconds!?
>=20
> The conventional wisdom is to use RAMDirectory in such scenarios. I.e. =

> you commit frequent updates to a RAMDirectory and frequently reopen =
its=20
> Searcher (which should be fast). Periodically, merge the RAMDirectory=20
> index with your on-disk index - you need to open a new IndexSearcher =
in=20
> the background, warm it up with the latest N queries, and when it's=20
> ready you swap searchers, i.e. you close the old one, purge the=20
> RAMDirectory (since it was synced to the on-disk index), and start =
using=20
> the new IndexSearcher.
>=20
> And again, start accumulating new docs in the RAMDirectory, etc, etc =
...
>=20
> --=20
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> > Datum: Thu, 17 Jan 2008 05:35:13 +0100
> > Von: "Marcus Falk" <marcus.falk@cision.com>
> > An: java-user@lucene.apache.org, java-user@lucene.apache.org
> > Betreff: SV: Integrating dynamic data into Lucene search/ranking
>=20
> > We did this in our system, indexing a constant flow of news =
articles,=20
> > by doing as Otis described (reopened the indexsearcher)..
> > =20
> > Every 3:d minute we are creating a new indexsearcher in the =
background=20
> > after this searcher has been created we are fireing some warm up=20
> > queries against it and after that we change the old searcher to =
point to
> the new one.
> > Works fine for us and we got large indexes (several millions of
> articles)...=20
> > =20
> > /Regards
> > Marcus
> > =20
> > =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

--=20
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen!=20
Ideal f=FCr Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 16:04:56 2008
Return-Path: <java-user-return-32061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81260 invoked from network); 17 Jan 2008 16:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 16:04:55 -0000
Received: (qmail 50659 invoked by uid 500); 17 Jan 2008 16:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50626 invoked by uid 500); 17 Jan 2008 16:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50610 invoked by uid 99); 17 Jan 2008 16:04:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 08:04:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 16:04:03 +0000
Received: by nf-out-0910.google.com with SMTP id d3so57515nfc.15
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 08:04:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=t2mFTYj9mx0SzFC3e9/sywzVicRA6ztgz7oFr8AVkhk=;
        b=vcjTtuoYD1jsxMh/U2l/iqPA5tJ46PhpdguJIrbBpXGNj+mcnZyovXhjf6QKlBT62A7CezPl4BYfAOocnp3/1sFsaPOdZ7+wiR4BZN5j+AklDlaEZPvjCHzASx6VAE5t5Tc+y+ABKtB3MFNlpf7vpWZrSaPRlEqqgyyzPvRenzA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l6cQC9bP3cXXpd1wHftotutGoMSCgrzD9pHvhHHe/LM1BnWbW9cTBpQ727UAzdos/7dr3MXlarCCtz9IRQteKSdZO4TwO9RS186+rO8wTnFSF1iAUmD05IYnVJ/huTRgwdhTjFO1ELzvL4iplYfcu/JCMnKq7F7PZ6hlx2IpLow=
Received: by 10.78.160.2 with SMTP id i2mr2959451hue.53.1200585847063;
        Thu, 17 Jan 2008 08:04:07 -0800 (PST)
Received: by 10.78.172.16 with HTTP; Thu, 17 Jan 2008 08:04:02 -0800 (PST)
Message-ID: <295da8fe0801170804r4549e0a9rc01b05349f52853c@mail.gmail.com>
Date: Thu, 17 Jan 2008 21:34:02 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: constructing query from string
In-Reply-To: <359a92830801170738h6d8439b4r2d8f503ba519ce80@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_632_22652934.1200585842041"
References: <295da8fe0801160122g2871504bh99b9b863e86393cc@mail.gmail.com>
	 <359a92830801160614j2cf1e171vc8f1c54b58b6ec76@mail.gmail.com>
	 <295da8fe0801170307k5814578bo75977d3069ec4cb7@mail.gmail.com>
	 <359a92830801170732u3df0531fsaad724e286cc76ff@mail.gmail.com>
	 <359a92830801170738h6d8439b4r2d8f503ba519ce80@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_632_22652934.1200585842041
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

For the query I am using *newQ.toString* equals *queryFrom.ToString

*well, what i am trying to accomplish is that I need to search an index
(quite often say interval of around 15 mins) and the query depends on other
activities done by the user till that point of a time. but i don't want the
query to be changed for a particular time period. (say 2 days)  i want to
store the query so that i can use it for my search without being affected by
current or immediate activities from user. once the query becomes 2 day old
then i'll reconstruct the query considering the activities happened during
the last two days.
  Is there a better approach?

On Jan 17, 2008 9:08 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> I just thought of an interesting test for whether
> toString() is reasonable. You could log/flag
> when the reloaded query differs. I.e.
> String queryFromToString;  // your stored form
> Query newQ = parser.parse(queryFromToString);
> if (newQ.toString != queryFromToString) {
>  log some stuff or throw an exception or....
> }
>
> That'd provide you a reality check...
>
> Erick
>
> On Jan 17, 2008 10:32 AM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > I believe, but I'm not sure, that query and newQuery
> > are not guaranteed to be equivalent. So I'd be cautious
> > about this approach. But if it works for you....
> >
> > I'm assuming that you're somehow programmatically
> > constructing the query and therefore can't just
> > store the original string. I'd *always* store the
> > original rather than a processed query if I could,
> > just on general principles.
> >
> > What is it that you're trying to accomplish anyway?
> > Perhaps there's a better approach....
> >
> > Erick
> >
> >
> > On Jan 17, 2008 6:07 AM, prabin meitei <prabin.meitei@gmail.com> wrote:
> >
> > > Hi Erick,
> > >   Thanks for your response. I have tried the folowing way and seems to
> > > be
> > > working. Tell me if there is any problem with the approach.
> > >
> > > String str = query.toString();
> > > QueryParser parser = new QueryParser("", new StandardAnalyzer);
> > > Query newQuery = parser.parse(str);
> > >
> > > now use *newQuery* for making queries
> > >
> > >
> > > I understand that in the constructor of QueryParser it takes default
> > > field
> > > and a analyzer. If I put a blank field it seems to work. Putting null
> > > gives
> > > a null pointer exception.
> > >
> > > Regards,
> > > Prabin
> > >
> > >
> > >
> > > On Jan 16, 2008 7:44 PM, Erick Erickson < erickerickson@gmail.com>
> > > wrote:
> > >
> > > > As I remember from various threads, toString is more of
> > > > a debugging aid and you cannot completely rely on the
> > > > transformation from a parsed query -> tostring -> parsed query
> > > > to be reliable. But this is "something I remember", so take
> > > > it with a grain of salt (you might want to search the mail
> > > > archive to see if my memory is correct).
> > > >
> > > > That said, use BooleanQuery to add as many clauses in
> > > > as many ways as you want.
> > > >
> > > > Actually, I don't know how I'd go about storing a programmatically
> > > > constructed query, I'd sure like to know if there's a way. You could
> > > > certainly store the original query if you were taking user input and
> > > > parsing it...
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On Jan 16, 2008 4:22 AM, prabin meitei <prabin.meitei@gmail.com>
> > > wrote:
> > > >
> > > > > Hi ,
> > > > >    I want to construct a query from string. how can I do it??
> > >  Actually
> > > > i
> > > > > saved a query(a boolean query) as string (using query.toString()).
> > > > > Is there a way to reconstruct the query from the string i saved?
> How
> > > can
> > > > i
> > > > > add more clauses to the  reconstructed query?
> > > > > Thanks in advance.
> > > > >
> > > > > Prabin
> > > > >
> > > >
> > >
> >
> >
>

------=_Part_632_22652934.1200585842041--

From java-user-return-32062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 19:00:05 2008
Return-Path: <java-user-return-32062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99292 invoked from network); 17 Jan 2008 19:00:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 19:00:05 -0000
Received: (qmail 44817 invoked by uid 500); 17 Jan 2008 18:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44695 invoked by uid 500); 17 Jan 2008 18:59:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44684 invoked by uid 99); 17 Jan 2008 18:59:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 10:59:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of durgadeep@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 18:59:25 +0000
Received: by rv-out-0910.google.com with SMTP id k20so570884rvb.5
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 10:59:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Wy4xo7vckku+PQ5P0Z2SXb7p80oHqlmh/roNixzunV8=;
        b=q9m1Kl0LFmkRGB0G0MisARvalWsxAV6xeUVgrkurD6C3m+hLEZ3cyR8pQYF38Xyypz5Ypf0c6nEAQQLkEi606DYXtXMBUGZDGqPfStNnFBNGqP096S/IKdsUZ+DSmMkA3QM5zOj/6z2hKSvbYq83pzHHmGl6uuk/Q70gSySJQrI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=SrZ/XTDhZC4nh/6c2ho5KSW3ev3HQIIhEhZbatnrYUsTyGucnutjLmyc7NrmI2jFQbmfDseD8PwnA+jvP2+AGxaSmzPdnYutS8kSy7nOl+MimWlxPAIE/su96H3dqOsTRcXVzsM3z0ZvQeD/Xdm4Zjmce2PJ7nofwIdGDnxTTIU=
Received: by 10.140.142.6 with SMTP id p6mr1688597rvd.224.1200596371254;
        Thu, 17 Jan 2008 10:59:31 -0800 (PST)
Received: by 10.141.44.2 with HTTP; Thu, 17 Jan 2008 10:59:31 -0800 (PST)
Message-ID: <21625f380801171059o4601261fu5f7dcff8cfc831d1@mail.gmail.com>
Date: Thu, 17 Jan 2008 10:59:31 -0800
From: "DURGA DEEP" <durgadeep@gmail.com>
To: java-user@lucene.apache.org
Subject: Unable to match strings with Underscore / . etc...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_909_6021690.1200596371260"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_909_6021690.1200596371260
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 HI folks,

         We are facing this problem with able to find the following strings.

For Example:

a.b.c
a_b_c

Are we doing some thing wrong ?. Seems like the ( . / Period Character )  (
_ / Underscore Character ) are being tossed away.

And if we are trying to search for a.b.c we are unable to find it. But we
are able to find abc.

Since we have lots of IP Addresses in our work, this is a severe limitation.
Can some one help ?


Thanks Much
_Durga

------=_Part_909_6021690.1200596371260--

From java-user-return-32063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 19:16:58 2008
Return-Path: <java-user-return-32063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9396 invoked from network); 17 Jan 2008 19:16:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 19:16:58 -0000
Received: (qmail 66826 invoked by uid 500); 17 Jan 2008 19:16:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66789 invoked by uid 500); 17 Jan 2008 19:16:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66778 invoked by uid 99); 17 Jan 2008 19:16:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 11:16:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 19:16:17 +0000
Received: by fg-out-1718.google.com with SMTP id d23so851576fga.27
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 11:16:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=fNoI60EIBP9fGYCms+Gg3SROuwmec0mxgX6+GBdrnIg=;
        b=Vivmg8h2hw4DdiQSUCUrNRI+bBoM3rmn4yEWuS7bjqcbl77zf2pA0gztt5IpzBISNqOb4uK1QE4MGC28fBh4iv1YXiWmcDw5t6KB3QpJS0xV8MMyw7Eox/50W/4qESaJrmGm49MOuk8/n4VIPk2ex7c49TpFrjND/7QDF470teo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cS4FCfCr1tyiP03TQsIgltuyzvo/z4vBylsCrKQGla42y1drdzZHK+ENtkPOpDTjZ0MZByHHA6UDReCfG3PUgXsnIiKdrpImOrFeXhqu5YIV8uulhTa8xh+zotpSNHEDeOuO8G+8xtdNk6I7+s9BHYOb+Ir6vhxW3u4asYw+TQo=
Received: by 10.82.107.15 with SMTP id f15mr4320498buc.0.1200597381123;
        Thu, 17 Jan 2008 11:16:21 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 17 Jan 2008 11:16:21 -0800 (PST)
Message-ID: <359a92830801171116h4081d161ncfb703e9495b13bf@mail.gmail.com>
Date: Thu, 17 Jan 2008 14:16:21 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unable to match strings with Underscore / . etc...
In-Reply-To: <21625f380801171059o4601261fu5f7dcff8cfc831d1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1960_18140314.1200597381116"
References: <21625f380801171059o4601261fu5f7dcff8cfc831d1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1960_18140314.1200597381116
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to look at your analyzers. StandardAnalyzer
tries to respect things like e-mail addresses. Various
other analyzers you could use do things like break
on punctuation.

I'd suggest you get a copy of Luke and examine what
your index actually holds and you can look at the
parsed form of a query. Note that in Luke, you can
choose various analyzers for these steps.

So, you'll probably have to write your own Analyzer
(see Lucene In Action for examples).

And be sure that you use the same analyzer for
both indexing and querying unless and until you
really understand them.

Finally, show us your indexing and query code
if you want more suggestions, but please pare
out any unnecessary parts.....

Best
Erick

On Jan 17, 2008 1:59 PM, DURGA DEEP <durgadeep@gmail.com> wrote:

>  HI folks,
>
>         We are facing this problem with able to find the following
> strings.
>
> For Example:
>
> a.b.c
> a_b_c
>
> Are we doing some thing wrong ?. Seems like the ( . / Period Character )
>  (
> _ / Underscore Character ) are being tossed away.
>
> And if we are trying to search for a.b.c we are unable to find it. But we
> are able to find abc.
>
> Since we have lots of IP Addresses in our work, this is a severe
> limitation.
> Can some one help ?
>
>
> Thanks Much
> _Durga
>

------=_Part_1960_18140314.1200597381116--

From java-user-return-32064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 17 21:30:54 2008
Return-Path: <java-user-return-32064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76156 invoked from network); 17 Jan 2008 21:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2008 21:30:54 -0000
Received: (qmail 67472 invoked by uid 500); 17 Jan 2008 21:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67410 invoked by uid 500); 17 Jan 2008 21:30:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67397 invoked by uid 99); 17 Jan 2008 21:30:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 13:30:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vieri.emiliani@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 21:30:08 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1488137wah.11
        for <java-user@lucene.apache.org>; Thu, 17 Jan 2008 13:30:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=C+WX8oJYYTPnxhnVc22rSrvDlNtRO1aXnfNarAKQV1I=;
        b=tPlaCycqGz4GUNNpJLZ2vyEtOwMrdz8bWpIPe8Ik5V9eBlub9OGeO3jyYdz2XMGk6IlGwe9dRzD0xgapubvv0bzeKpCEfjIW6oNGZIdoUAWoo+PsGb4W6JKqZeaYsc48Z1dCdLZqUwPwW4gFcU0+PhlBqDfHRb5PSTPvsFUiv00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IcId52ZWwLRU5fMJFVdgiJx1nrMt2TclqePF0a7nehXvdp3kWTbwMeC0WxmUfPrVYikHMqUTdl7QK6wNsn+zRDAKY5bjvnNeZjRGszGS3OaC/FRNdo+auv3THEoG6xMDiqxcyc4HKOfy39mOVjr6l2cl/sY36D4bPN5FEraZv1M=
Received: by 10.114.88.1 with SMTP id l1mr190022wab.79.1200605411647;
        Thu, 17 Jan 2008 13:30:11 -0800 (PST)
Received: by 10.115.107.3 with HTTP; Thu, 17 Jan 2008 13:30:11 -0800 (PST)
Message-ID: <ac2aefd40801171330h22ce77f8w6ba1046c56c7c0c4@mail.gmail.com>
Date: Thu, 17 Jan 2008 22:30:11 +0100
From: Vieri <vieri.emiliani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inverted search / Search on profilenet
In-Reply-To: <9AE28E104993A4438ED06F057176FD58014968C3@STHMAIL01.emea2.ad.group>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9AE28E104993A4438ED06F057176FD58014968C3@STHMAIL01.emea2.ad.group>
X-Virus-Checked: Checked by ClamAV on apache.org

I believe that a mixed 1+3 approach should mimic quite well what Verity doe=
s.

In fact, what I would do is to index "profile net" queries in a
dedicated index, using exclusively exact terms (i.e.: removing Boolean
operators and wildcards).
This gives you an approximate profile index you can use to select most
relevant profiles for a given document (eventually, use some kind of
threshold for profile cutoff).
Once you have reduced the problem space to candidates profile you can
apply the MemoryIndex model using the fully featured queries.

I am pretty confident that this approach will reduce the number of
candidates far below the 10K threshold you mentioned before, therefore
removing any performance issue.

For some details of how Verity works, you can give a look at their
"Evaluation of content of a data set using multiple and/or complex
queries" patent
(http://www.patentstorm.us/patents/5778364-fulltext.html).

(Final phrase of the abstract says: "First, one or more candidate
queries that may be satisfied by the data set are identified by
approximately evaluating each query. Second, each of the candidate
queries is fully evaluated to determine whether the candidate query is
satisfied by the data set.")

FYI, Autonomy used to implement features like user profile search and
agent search (i.e.: searching for user profiles that match a given
query) indexing profiles and agents as documents in dedicated IDOL
instances (but I don't know if they changed their model in the latest
versions of IDOL).

Hope this helps.
Regards,
Vieri

On 17/01/2008, Marcus Falk <marcus.falk@cision.com> wrote:
> Yes a profilenet is what Mark describes.
>
> In our Verity profilenet we got ~50.000 profiles (queries) the performanc=
e is fine around 20-25 documents / second.
>
> From what we can tell the matches are accurate unfortunately I don't have=
 any ideas on how verity does this under the hood so I don't know if there =
is any approximation involved. We do however get information about the each=
 query that hits such as score and words (with their position within the do=
cument).
>
> We need this kind of functionality since we are monitoring the incoming d=
ocuments for our customers.
>
> --- Answer to Marks first mail---
> MoreLikeThis:
> I get a feeling that it would be very hard to do this using this kind of =
query, how do I index the queries with operators such as NOT, NEAR and Wild=
Card?
>
> Taxonomy/Classification
> I'm totally lost here ;) Any one that knows what to look for in this case=
?
>
> MemoryIndex:
> We have ran benchmarks using this technique it wasn't enough, if I recall=
 we could run like 10.000 profiles with good performance. And as you say it=
 doesn't scale well at all.
>
>
>
> /
> Regards
> Marcus
>
>
>
>
>
> -----Ursprungligt meddelande-----
> Fr=E5n: Mark Miller [mailto:markrmiller@gmail.com]
> Skickat: den 17 januari 2008 13:58
> Till: java-user@lucene.apache.org
> =C4mne: Re: Inverted search / Search on profilenet
>
> Verity, autonomy, whatever, has a what they call a reverse query system
> called profilenet. A profile is just a query (or I guess more than one
> query?) and you can setup a bunch of them. Then you supply the document
> and you will get the matching queries as well as a score. They say its
> the opposite of doing a search with a query and getting back docs.
> Instead you do a search with a doc and get back these queries. They
> claim it can be used for things like taxonomy/classification among other
> things. I don't know how true this is to a real reverse query system as
> that would seem to be kind of slow -- my guess is its a bit of an
> approximation.
>
> - Mark
>
> Endre St=F8lsvik wrote:
> >
> > May I ask: What IS a profilenet? I ask since this obviously is
> > something that you two hit off on right away, while I haven't heard of.=
.!
> >
> >
> > Thanks,
> > Endre.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 00:15:19 2008
Return-Path: <java-user-return-32065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48378 invoked from network); 18 Jan 2008 00:15:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 00:15:19 -0000
Received: (qmail 92496 invoked by uid 500); 18 Jan 2008 00:15:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91878 invoked by uid 500); 18 Jan 2008 00:15:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91867 invoked by uid 99); 18 Jan 2008 00:15:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 16:15:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 00:14:50 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.214.134])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1JFeoY-0007Kb-R3
	for java-user@lucene.apache.org; Fri, 18 Jan 2008 00:11:03 +0000
Message-ID: <478FEF49.9080609@propylon.com>
Date: Thu, 17 Jan 2008 16:14:01 -0800
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Highlighting marked up documents
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi,

Has anyone found a way to use search term highlighting in a marked up 
document, such as HTML or .DOC? My problem is, the lucene highlighter 
works on plain text, the limitation being that you have to use the text 
you indexed for highlighitng, so your tags are gone by then. Although 
it's possible to use regluar expressions to highlight words in HTML or 
word-processor documents, it would mean effectively copying the 
functionality of lucene, including span queries etc.

I know there are products out there to do this; ISYS is one example. If 
you do a proximity search for 'cats' and 'dogs' within 3 spaces of each 
other, it will only highlight them where they occur within 3 spaces of 
each other; not elsewhere. The trick part is, it does this in a 
Microsoft Word document!

Does anyone know how?

Many thanks!
-John B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 00:17:26 2008
Return-Path: <java-user-return-32066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48799 invoked from network); 18 Jan 2008 00:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 00:17:26 -0000
Received: (qmail 94363 invoked by uid 500); 18 Jan 2008 00:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94333 invoked by uid 500); 18 Jan 2008 00:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94322 invoked by uid 99); 18 Jan 2008 00:17:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 16:17:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Jan 2008 00:16:44 +0000
Received: (qmail 81441 invoked from network); 17 Jan 2008 21:51:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=uowhAxMQaiQbYn1ZTHWStNoKss+J+ENxixULmrxfNNWc8HOqufVejXKW7pm/7+merqqr7Kp+Pi8nRBFR0F7+P850TuCycFOFrMQAdS8hXl9olj20P2s0RUu4JDCaklkhG0jLFO4T6QJwm+FcaAUVr5aairnY2AdxTLTibBeELxQ=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 17 Jan 2008 21:51:36 -0000
X-YMail-OSG: D5E223EVM1lJfju.o_Popb5nwYy.VUSOfL.xjJwpL7GpSpp5wN6Ib3V6EnGNPj9P42XtpM7c_A--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <478FCDE5.9070400@yahoo.co.uk>
Date: Thu, 17 Jan 2008 21:51:33 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inverted search / Search on profilenet
References: <9AE28E104993A4438ED06F057176FD58014968C3@STHMAIL01.emea2.ad.group> <ac2aefd40801171330h22ce77f8w6ba1046c56c7c0c4@mail.gmail.com>
In-Reply-To: <ac2aefd40801171330h22ce77f8w6ba1046c56c7c0c4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

There is a trick to indexing queries in this way... you need only index 
the rarest term in queries which have one or more mandatory terms.
As an example - for the phrase query "XYZ Group limited" you need only 
index the rarest term "XYZ" and thus avoid the selecting the query for 
execution with every document that happens to have the more common words 
"group" or "limited".

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 05:55:12 2008
Return-Path: <java-user-return-32067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88126 invoked from network); 18 Jan 2008 05:55:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 05:55:12 -0000
Received: (qmail 41927 invoked by uid 500); 18 Jan 2008 05:54:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41898 invoked by uid 500); 18 Jan 2008 05:54:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41887 invoked by uid 99); 18 Jan 2008 05:54:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jan 2008 21:54:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.22 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 05:54:30 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0I5sZ1s050054
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 06:54:35 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <0BF9C44E-E703-42CF-89DA-97AB59D25C6A@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0801170742v54d53083u3912d05f84202d5f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: IndexSearcher and RAMDirectory
Date: Fri, 18 Jan 2008 06:54:34 +0100
References: <1bcb7c7f0801170742v54d53083u3912d05f84202d5f@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


17 jan 2008 kl. 16.42 skrev Cam Bazz:

> Hello,

Hi,

> I understand after writing some documents in an index with an  
> indexwriter,
> the IndexSearcher object has to be reinstantiated for it to find newly
> instantiated objects.

that is correct, given you instantiate the new IndexSearcher(directory);

> And this reinstantiation of IndexSearcher is costly from what I  
> understand.

It is not so much the construction of the instance as it is the inital  
latency in response time for a query on this searcher.

Have you read this on the Wiki?
  <http://wiki.apache.org/lucene-java/ImproveSearchingSpeed>
> * '''Re-open the [http://lucene.apache.org/java/docs/api/org/apache/lucene/search/IndexSearcher.html 
>  IndexSearcher] only when necessary.'''
> You must re-open the [http://lucene.apache.org/java/docs/api/org/apache/lucene/search/IndexSearcher.html 
>  IndexSearcher] in order to make newly committed changes visible to  
> searching. However, re-opening the searcher has a certain overhead  
> (noticeable mostly with large indexes and with sorting turned on)  
> and should thus be minimized.
> Consider using a so called [http://wiki.apache.org/solr/SolrCaching  
> warming] technique which allows the searcher to warm up its caches  
> before the first query hits.
Basically you execute a bunch of queries on the new searcher before  
you make the switch with the old one.

Will this solve your performance issues?

If not, please explain what it is you try to cache (is it the search  
results?), how your writer/searcher code works and preferably with  
some performance benchmarks that show your problems.



-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 09:32:01 2008
Return-Path: <java-user-return-32068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35626 invoked from network); 18 Jan 2008 09:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 09:32:01 -0000
Received: (qmail 47067 invoked by uid 500); 18 Jan 2008 09:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47035 invoked by uid 500); 18 Jan 2008 09:31:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47024 invoked by uid 99); 18 Jan 2008 09:31:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 01:31:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 09:31:20 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1850706wah.11
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 01:31:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=bpAsunElm/9E9R95dCR34pgXQY1EmMgau3V7x4GNJHU=;
        b=aGv/lLm8dJG5KZtZLcGDV1SPpgfg2i0dsDB3Dq/xRpNdrQK+Uwp0JBnYFZkff6gxBo72gHguLcKpgs0LFdacyYoTUZaDJVV2A6k6T3gNhYF5g0dUg8NsKBK93tIrWGk7A3gUx+4t9s+Wy6Ufx7ae7omAJPrS2hZiExw10SAU8N8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=RyqSvXu1m077kiKPoQX59IP4hhEl5ytKFqXdaVn+t/LC+gybOAyhXRPn3+20IQDOW9IzXKlgTI+qzh8ruOZUBosuuvP3QZJ/jx7z9XqpGVADa3+L/sYtsRrSPcfHkn6+KXSGiPhrXIJnLuvnm6PgGsqbVwHCLJBHiRVeu3OpYOM=
Received: by 10.114.169.2 with SMTP id r2mr3659494wae.76.1200648686831;
        Fri, 18 Jan 2008 01:31:26 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Fri, 18 Jan 2008 01:31:26 -0800 (PST)
Message-ID: <a206fb7e0801180131n3e973c5cmb1783dc8bf235fca@mail.gmail.com>
Date: Fri, 18 Jan 2008 01:31:26 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Optimize for large index size
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

  We are using Lucene 2.2. We have an index of size 70G (within 3-4
days) and growing. We run optimize pretty frequently (once every hour
- due to large number of index updates every min - can be up to 100K
new documents every min). I have seen every now and then the optimize
takes 3-4 hours to complete and up to 8 G memory (our limit). This
makes the whole system slow. Few questions,

1) Is there any alternative to optimize? That is, can we do without
optimize and still have our search fast?
2) What's the best way to use optimize, i.e. how can we make the
optimize much faster and use lesser memory?
3) Is there a way to partition the indexes using Lucene? Let's say we
partition daily, so we have to optimize only the daily indexes and not
the whole thing.

Our mergefactor=200 and maxMergeDocs=99999

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 10:38:02 2008
Return-Path: <java-user-return-32069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77830 invoked from network); 18 Jan 2008 10:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 10:38:02 -0000
Received: (qmail 46990 invoked by uid 500); 18 Jan 2008 10:37:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46963 invoked by uid 500); 18 Jan 2008 10:37:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46952 invoked by uid 99); 18 Jan 2008 10:37:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 02:37:45 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 10:37:19 +0000
Received: by nz-out-0506.google.com with SMTP id i28so699091nzi.5
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 02:37:22 -0800 (PST)
Received: by 10.142.72.21 with SMTP id u21mr1881087wfa.82.1200652641998;
        Fri, 18 Jan 2008 02:37:21 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 34sm516599wra.23.2008.01.18.02.37.21
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 18 Jan 2008 02:37:21 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <a206fb7e0801180131n3e973c5cmb1783dc8bf235fca@mail.gmail.com>
References: <a206fb7e0801180131n3e973c5cmb1783dc8bf235fca@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9E448914-A8BB-4F0B-BDC8-A7DC4BF90CA7@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Optimize for large index size
Date: Fri, 18 Jan 2008 05:37:39 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


vivek sar wrote:

> Hi,
>
>   We are using Lucene 2.2. We have an index of size 70G (within 3-4
> days) and growing. We run optimize pretty frequently (once every hour
> - due to large number of index updates every min - can be up to 100K
> new documents every min). I have seen every now and then the optimize
> takes 3-4 hours to complete and up to 8 G memory (our limit). This
> makes the whole system slow. Few questions,
>
> 1) Is there any alternative to optimize? That is, can we do without
> optimize and still have our search fast?

In Lucene 2.3 (coming out shortly) there is a new "partial optimize"  
method that takes an int maxNumSegments.  It will optimize your index  
down to that many segments.  This let's you reduce cost of optimizing  
while still getting faster searching.  Maybe try that?

Also, Lucene 2.3 has sizable speedups to indexing, and uses RAM  
buffering more efficiently.  This will let you hold more documents in  
RAM before flushing a new segment, which in turn should reduce your  
merging cost.

> 2) What's the best way to use optimize, i.e. how can we make the
> optimize much faster and use lesser memory?

Fundamentally optimize is quite time consuming because it has to do  
massive segment merging (the final merge being the worst).

However, it is not supposed to be so memory consuming.  How are you  
measuring memory usage?   (Try using java -verbose:gc to see actual  
heap usage after full GC). What kind of documents are you creating?   
EG one known memory issue is if you have many diverse fields, all  
with norms enabled.  Norms are not stored sparsely, so, this will  
consume alot of RAM during optimize and during searching.

> 3) Is there a way to partition the indexes using Lucene? Let's say we
> partition daily, so we have to optimize only the daily indexes and not
> the whole thing.

Yes, you can do this, and run searches over these indices (use  
MultiSearcher).  You can then merge them into a single index, using  
addIndexesNoOptimize.  But, this is not really different from using  
optimize(int maxNumSegments).

> Our mergefactor=200 and maxMergeDocs=99999

In Lucene 2.3, segment merging is done in a background thread(s).   
Given that, I think you'd want to decrease mergeFactor so that  
merging is taking place while you are indexing.  (Test to be sure).   
That should make your optimize call less costly.

> Thanks,
> -vivek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 11:34:24 2008
Return-Path: <java-user-return-32070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 506 invoked from network); 18 Jan 2008 11:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 11:34:24 -0000
Received: (qmail 9465 invoked by uid 500); 18 Jan 2008 11:34:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9438 invoked by uid 500); 18 Jan 2008 11:34:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9427 invoked by uid 99); 18 Jan 2008 11:34:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 03:34:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kevin@gesichterparty.de designates 80.67.29.29 as permitted sender)
Received: from [80.67.29.29] (HELO smtprelay12.ispgateway.de) (80.67.29.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 11:33:42 +0000
Received: from [87.179.218.214] (helo=[192.168.2.104])
	by smtprelay12.ispgateway.de with esmtpa (Exim 4.68)
	(envelope-from <kevin@gesichterparty.de>)
	id 1JFpTj-0002tD-VO
	for java-user@lucene.apache.org; Fri, 18 Jan 2008 12:33:44 +0100
Message-Id: <D10A5669-3B0E-48BC-9984-977CBC2A24B4@gesichterparty.de>
From: Kevin Dewi <kevin@gesichterparty.de>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-6--989475807
Mime-Version: 1.0 (Apple Message framework v915)
Subject: index update problems with Linux
Date: Fri, 18 Jan 2008 12:33:43 +0100
X-Mailer: Apple Mail (2.915)
X-Df-Sender: 731895
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-6--989475807
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hello,

I have a problem with this code (updating a lucene index by delete and  
adding documents):


IndexReader reader = IndexReader.open(directory);
while (i.hasNext()) {
	reader.deleteDocuments(i.next());
}
reader.close();

...

IndexWriter writer = new IndexWriter(directory,
		new GermanAnalyzer(), create);
while (i2.hasNext()) {
	writer.addDocument(i2.next());
}

By creating the IndexWriter I became this exception on Linux (ubuntu  
dapper):
java.io.IOException: Lock obtain timed out: Lock@/home/picard/develop/ 
apache-tomcat-6.0.14/temp/lucene-1763c549e0e952256392217dac3f3bdb- 
write.lock
         at org.apache.lucene.store.Lock.obtain(Lock.java:56)
         at  
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:254)
         at  
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:244)
         at  
de.gesichterparty.DatabaseManager.processQueue(DatabaseManager.java:345)
         at de.gesichterparty.LuceneServlet.run(LuceneServlet.java:140)
         at java.lang.Thread.run(Thread.java:595)
java.io.FileNotFoundException: /home/picard/develop/apache- 
tomcat-6.0.14/webapps/Lucene/WEB-INF/databases/user/segments (No such  
file or directory)
         at java.io.RandomAccessFile.open(Native Method)
         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
         at org.apache.lucene.store.FSIndexInput 
$Descriptor.<init>(FSDirectory.java:430)
         at  
org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:439)
         at  
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:329)
         at  
org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:45)
         at org.apache.lucene.index.IndexReader 
$1.doBody(IndexReader.java:146)
         at org.apache.lucene.store.Lock$With.run(Lock.java:99)
         at org.apache.lucene.index.IndexReader.open(IndexReader.java: 
141)
         at org.apache.lucene.index.IndexReader.open(IndexReader.java: 
136)
         at  
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:47)
         at  
de.gesichterparty.DatabaseManager.processQueue(DatabaseManager.java:374)
         at de.gesichterparty.LuceneServlet.run(LuceneServlet.java:140)
         at java.lang.Thread.run(Thread.java:595)


On Mac OS X Leopard this code works fine.

Thanks
Kevin


--Apple-Mail-6--989475807--

From java-user-return-32071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 12:17:09 2008
Return-Path: <java-user-return-32071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21191 invoked from network); 18 Jan 2008 12:17:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 12:17:07 -0000
Received: (qmail 72530 invoked by uid 500); 18 Jan 2008 12:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72488 invoked by uid 500); 18 Jan 2008 12:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72477 invoked by uid 99); 18 Jan 2008 12:16:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 04:16:51 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 12:16:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JFq98-0003Bw-D9
	for java-user@lucene.apache.org; Fri, 18 Jan 2008 04:16:30 -0800
Message-ID: <14949157.post@talk.nabble.com>
Date: Fri, 18 Jan 2008 04:16:30 -0800 (PST)
From: thrgroovyboy <fabflix2000@yahoo.fr>
To: java-user@lucene.apache.org
Subject: Update of Lucene in Action ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fabflix2000@yahoo.fr
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Is the book "Lucene In Action" updated ?
Or is it the same version based on lucene 1.4 ?

Thanks a lot
-- 
View this message in context: http://www.nabble.com/Update-of-Lucene-in-Action---tp14949157p14949157.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 14:11:12 2008
Return-Path: <java-user-return-32072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72331 invoked from network); 18 Jan 2008 14:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 14:11:11 -0000
Received: (qmail 54383 invoked by uid 500); 18 Jan 2008 14:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54258 invoked by uid 500); 18 Jan 2008 14:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54222 invoked by uid 99); 18 Jan 2008 14:10:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 06:10:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 14:10:36 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B06CE30EFC24; Fri, 18 Jan 2008 07:10:25 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-211-181.dyn.embarqhsd.net [71.53.211.181])
	by ehatchersolutions.com (Postfix) with ESMTP id 5EEAB30EFC18
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 07:10:23 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <14949157.post@talk.nabble.com>
References: <14949157.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <262C1BCF-C00A-481E-A17E-DF4342C683D6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Update of Lucene in Action ?
Date: Fri, 18 Jan 2008 09:09:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 18, 2008, at 7:16 AM, thrgroovyboy wrote:
> Is the book "Lucene In Action" updated ?
> Or is it the same version based on lucene 1.4 ?

The first, and currently only, edition is based on Lucene 1.4.3, and  
all code works with Lucene 1.9 as well.  Lucene 2.0+ changed some  
API, but it is easy to convert the code to be compatible.

A second edition is in progress at the moment.  Expected completion  
date:  ??  (your guess is as good as mine! :) - but let's say early  
2009 just to be a bit safer than promising this year.  The second  
edition will be current with whatever release of Lucene is available  
at the time it is published - probably 3.0.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 14:23:29 2008
Return-Path: <java-user-return-32073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79058 invoked from network); 18 Jan 2008 14:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 14:23:29 -0000
Received: (qmail 80231 invoked by uid 500); 18 Jan 2008 14:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80202 invoked by uid 500); 18 Jan 2008 14:23:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80191 invoked by uid 99); 18 Jan 2008 14:23:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 06:23:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 14:22:47 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1214403fga.27
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 06:22:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=38S/RsCzdAFc2rPKeuuIwfkrWorTT3bQHMOZR9Atc2Y=;
        b=swXYcDddFWj18jOxRFOhzOOxB4yDHH6xhtWfs32u6+Y8OB1yuVhDKMyJ4OeOnczv4yd5ReTB0EW28iag/eIMWiOjwe36gqqXPQlADAorUa2Pfkadqzn8dO+oTSEqbtnI46+qtxll0i0cN9RIVdQeHsWs9dH1a0T/Ie3NMnSp1YY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=qQZ3U69tb8s0XpGDIgPFRU42S1drnn3uegG8tsOv9mC9sZ2BSKvlUqmyI9n7UsQUMKiDHMxiu+cN2bjuVnpFD5cBnJ6BQZyNbz2fVomDF/K4fpZ6PXncJudGaD5q/5xqRPeP8vLk29vEWeqo0Ryipu727875udJ00a0/1amr+Dg=
Received: by 10.82.116.15 with SMTP id o15mr6103301buc.3.1200666172238;
        Fri, 18 Jan 2008 06:22:52 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Fri, 18 Jan 2008 06:22:52 -0800 (PST)
Message-ID: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com>
Date: Fri, 18 Jan 2008 16:22:52 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: delete a document from indexwriter
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4933_19510279.1200666172229"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4933_19510279.1200666172229
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

How do I delete a specific document from an indexwriter? I understand there
is deleteDocuments(term) which deletes all the documents matching the term.
But what if I want to delete a document that has more then one term in
specific. I can search the document with a boolean query, and then get the
doc id.
I know that doc ids are temporary, but can I not use it for delete?

IndexReader has a delete by doc id method, but I am not sure how to use this
when using an indexwriter.

Best,
C.B.

------=_Part_4933_19510279.1200666172229--

From java-user-return-32074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 14:32:25 2008
Return-Path: <java-user-return-32074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82099 invoked from network); 18 Jan 2008 14:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 14:32:25 -0000
Received: (qmail 94190 invoked by uid 500); 18 Jan 2008 14:32:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94164 invoked by uid 500); 18 Jan 2008 14:32:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94153 invoked by uid 99); 18 Jan 2008 14:32:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 06:32:09 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 14:31:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JFsG5-0007nC-Vy
	for java-user@lucene.apache.org; Fri, 18 Jan 2008 06:31:49 -0800
Message-ID: <14949807.post@talk.nabble.com>
Date: Fri, 18 Jan 2008 06:31:49 -0800 (PST)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: log4j error
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Since I upgraded to Lucene 2.3, I started to see some error message coming
from log4j via Lucene. Has any one ever experienced this? Is this
classloading issue?

javax.ejb.EJBException: EJB Exception: : java.lang.IllegalStateException:
Current state = FLUSHED, new state = CODING
        at
java.nio.charset.CharsetEncoder.throwIllegalStateException(CharsetEncoder.java:941)
        at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:537)
        at
sun.nio.cs.StreamEncoder$CharsetSE.implWrite(StreamEncoder.java:384)
        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:136)
        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:146)
        at java.io.OutputStreamWriter.write(OutputStreamWriter.java:204)
        at java.io.Writer.write(Writer.java:126)
        at org.apache.log4j.helpers.QuietWriter.write(QuietWriter.java:47)
        at
org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
        at
org.apache.log4j.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:358)
        at org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
        at
org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
        at
org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
        at org.apache.log4j.Category.callAppenders(Category.java:203)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at
org.apache.commons.logging.impl.Log4JLogger.debug(Log4JLogger.java:171)
        at
org.springmodules.lucene.search.factory.SearcherFactoryUtils.doReleaseSearcher(SearcherFactoryUtils.java:118)
        at
org.springmodules.lucene.search.factory.SearcherFactoryUtils.releaseSearcher(SearcherFactoryUtils.java:98)
        at
org.springmodules.lucene.search.core.DefaultLuceneSearchTemplate.search(DefaultLuceneSearchTemplate.java:234)
-- 
View this message in context: http://www.nabble.com/log4j-error-tp14949807p14949807.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 15:29:03 2008
Return-Path: <java-user-return-32075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73745 invoked from network); 18 Jan 2008 15:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 15:29:02 -0000
Received: (qmail 86512 invoked by uid 500); 18 Jan 2008 15:28:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86214 invoked by uid 500); 18 Jan 2008 15:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86203 invoked by uid 99); 18 Jan 2008 15:28:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 07:28:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.82] (HELO smtpoutm.mac.com) (17.148.16.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 15:28:33 +0000
Received: from mac.com (asmtp010-s [10.150.69.73])
	by smtpoutm.mac.com (Xserve/smtpout019/MantshX 4.0) with ESMTP id m0IFSOG4025892
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 07:28:24 -0800 (PST)
Received: from [10.0.1.199] (va-71-53-214-81.dhcp.embarqhsd.net [71.53.214.81])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp010/MantshX 4.0) with ESMTP id m0IFSMPN021707
	for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 07:28:23 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <ED6C6252-118C-4EBC-8FAC-1DC5B460DB82@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Michael Prichard <michael_prichard@mac.com>
Subject: Highlighting with wildcards?
Date: Fri, 18 Jan 2008 10:28:19 -0500
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I have highlighter working out of the box but now I need to highlight  
wildcards (if they are there).  I would imagine someone has done this  
on this group :)  Any suggestions?

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 16:28:51 2008
Return-Path: <java-user-return-32076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96681 invoked from network); 18 Jan 2008 16:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 16:28:51 -0000
Received: (qmail 71255 invoked by uid 500); 18 Jan 2008 16:28:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71222 invoked by uid 500); 18 Jan 2008 16:28:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71210 invoked by uid 99); 18 Jan 2008 16:28:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 08:28:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [204.250.154.18] (HELO mail.g-wis.com) (204.250.154.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 16:28:20 +0000
X-Envelope-To: java-user@lucene.apache.org
thread-index: AchZ7x0VOILueyK+TOqiYADODSNYNw==
X-Received-From-Address: 72.11.86.230
X-Envelope-From: john.byrne@propylon.com
Received: from [192.168.100.134] ([72.11.86.230]) by mail.g-wis.com with Microsoft SMTPSVC(6.0.3790.3959); Fri, 18 Jan 2008 08:28:09 -0800
Message-ID: <4790D38B.1060902@propylon.com>
Date: Fri, 18 Jan 2008 08:27:55 -0800
From: "John Byrne" <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
Content-Class: urn:content-classes:message
Importance: normal
To: <java-user@lucene.apache.org>
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.3959
Subject: Re: Highlighting with wildcards?
References: <ED6C6252-118C-4EBC-8FAC-1DC5B460DB82@mac.com>
In-Reply-To: <ED6C6252-118C-4EBC-8FAC-1DC5B460DB82@mac.com>
Content-Type: text/plain;
	format=flowed;
	charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Jan 2008 16:28:09.0134 (UTC) FILETIME=[1C9064E0:01C859EF]
X-Virus-Checked: Checked by ClamAV on apache.org

I think the way to do this is to run the 'rewrite()' method on the 
wilcard query; this turns it into a boolean collection of term queries, 
with a term for each match for the wildcard. That way, you're just 
highlighting a normal term query. I think that would also work for fuzzy 
queries. Hope that helps.

Regards,
-John B.

Michael Prichard wrote:
> I have highlighter working out of the box but now I need to highlight 
> wildcards (if they are there).  I would imagine someone has done this 
> on this group :)  Any suggestions?
>
> Thanks!
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 18 16:53:05 2008
Return-Path: <java-user-return-32077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4180 invoked from network); 18 Jan 2008 16:53:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2008 16:53:05 -0000
Received: (qmail 3317 invoked by uid 500); 18 Jan 2008 16:52:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3285 invoked by uid 500); 18 Jan 2008 16:52:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3274 invoked by uid 99); 18 Jan 2008 16:52:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 08:52:48 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 16:52:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JFuSB-0004bh-Kq
	for java-user@lucene.apache.org; Fri, 18 Jan 2008 08:52:27 -0800
Message-ID: <14952958.post@talk.nabble.com>
Date: Fri, 18 Jan 2008 08:52:27 -0800 (PST)
From: Thibaut Britz <t.britz@netbreeze.ch>
To: java-user@lucene.apache.org
Subject: Lucene Performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: t.britz@netbreeze.ch
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

We have an index of about 9 gigabytes here at work, where a few queries take
a very long time to succeed.

What I noticed is, that we have a large of number of multiple value fields
(50). How does lucene scale with queries going over a large amount of
fields?
Is it better to use a keyword for each possible value in each field and
append those to the remaining field (like if I have a protocol field and one
field having the url, I would add _HTTP_ or _FTP_ to the url field and omit
the protocol field).
A better solution would probably to divide the index in multiple indexes to
of disjunct entries (in this case, divide the index in an index with all the
http urls, and one index with all the ftp urls, because I know that I never
need both protocol types together)

Another thing I noticed is that we append a lot of queries, so we have a lot
of duplicate phrases like (A and B or C) and ... and (A and B or C) (more
nested than that). Is lucene doing any internal query optimization (like
karnaugh maps) by removing the last (A and B or C), as it is not needed, or
do I have to do that myself?


Thanks for your help.
Thibaut

-- 
View this message in context: http://www.nabble.com/Lucene-Performance-tp14952958p14952958.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 02:05:15 2008
Return-Path: <java-user-return-32078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54913 invoked from network); 19 Jan 2008 02:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 02:05:15 -0000
Received: (qmail 83916 invoked by uid 500); 19 Jan 2008 02:04:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83889 invoked by uid 500); 19 Jan 2008 02:04:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83869 invoked by uid 99); 19 Jan 2008 02:04:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 18:04:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of supercooc@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 02:04:34 +0000
Received: by rv-out-0910.google.com with SMTP id k20so954548rvb.5
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 18:04:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=VzP6vo4AGva6UG4Zzjj5fG3CZUxZtDHzgYmvnnIcI1s=;
        b=Kp1G7dq5W18DLbK/IX8agnYuFnk9I5dktTdHnRf0u5vXJiDMJSnW4X7XudbYDZ77X3BxD7HdckoE9Qu+cvZdwG0L+2Wn+pnSx+KbS7WY2bbGInj0tyusP38l12Y5tX6col80bmL3RiGkGAAg1bXqv0a1e0ZvbiGRRY7pCW0HgKw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=v9+9iZlvJKX0oARnFeDqt2nehL5pwglrThmTwdZW6ab4CkRfu7eqBH2Pbn3gNUQaTXzqtTcL8nAs7pvnkYiqF8KC3vvEu2+E/hbzznSWz2H/7nF6pB4Jt/xkIsYFFjxtIEwUBfl68sw5T0UXXv6hHj4VAwtdzHnKSwuBzvZ8phE=
Received: by 10.140.179.25 with SMTP id b25mr2866937rvf.117.1200708278581;
        Fri, 18 Jan 2008 18:04:38 -0800 (PST)
Received: by 10.140.172.16 with HTTP; Fri, 18 Jan 2008 18:04:38 -0800 (PST)
Message-ID: <ee0c896c0801181804tfd0efe8v83fe2eded712f43f@mail.gmail.com>
Date: Sat, 19 Jan 2008 10:04:38 +0800
From: "=?GB2312?B?087TvrPYtcTT4w==?=" <supercooc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index update problems with Linux
In-Reply-To: <D10A5669-3B0E-48BC-9984-977CBC2A24B4@gesichterparty.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6169_22743090.1200708278570"
References: <D10A5669-3B0E-48BC-9984-977CBC2A24B4@gesichterparty.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6169_22743090.1200708278570
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

it seems that close reader not release write lock,  test lock release before
you add document

2008/1/18, Kevin Dewi <kevin@gesichterparty.de>:
>
> Hello,
>
> I have a problem with this code (updating a lucene index by delete and
> adding documents):
>
>
> IndexReader reader = IndexReader.open(directory);
> while (i.hasNext()) {
>        reader.deleteDocuments(i.next());
> }
> reader.close();
>
> ...
>
> IndexWriter writer = new IndexWriter(directory,
>                new GermanAnalyzer(), create);
> while (i2.hasNext()) {
>        writer.addDocument(i2.next());
> }
>
> By creating the IndexWriter I became this exception on Linux (ubuntu
> dapper):
> java.io.IOException: Lock obtain timed out: Lock@/home/picard/develop/
> apache-tomcat-6.0.14/temp/lucene-1763c549e0e952256392217dac3f3bdb-
> write.lock
>         at org.apache.lucene.store.Lock.obtain(Lock.java:56)
>         at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:254)
>         at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:244)
>         at
> de.gesichterparty.DatabaseManager.processQueue(DatabaseManager.java:345)
>         at de.gesichterparty.LuceneServlet.run(LuceneServlet.java:140)
>         at java.lang.Thread.run(Thread.java:595)
> java.io.FileNotFoundException: /home/picard/develop/apache-
> tomcat-6.0.14/webapps/Lucene/WEB-INF/databases/user/segments (No such
> file or directory)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>         at org.apache.lucene.store.FSIndexInput
> $Descriptor.<init>(FSDirectory.java:430)
>         at
> org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:439)
>         at
> org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:329)
>         at
> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:45)
>         at org.apache.lucene.index.IndexReader
> $1.doBody(IndexReader.java:146)
>         at org.apache.lucene.store.Lock$With.run(Lock.java:99)
>         at org.apache.lucene.index.IndexReader.open(IndexReader.java:
> 141)
>         at org.apache.lucene.index.IndexReader.open(IndexReader.java:
> 136)
>         at
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:47)
>         at
> de.gesichterparty.DatabaseManager.processQueue(DatabaseManager.java:374)
>         at de.gesichterparty.LuceneServlet.run(LuceneServlet.java:140)
>         at java.lang.Thread.run(Thread.java:595)
>
>
> On Mac OS X Leopard this code works fine.
>
> Thanks
> Kevin
>
>

------=_Part_6169_22743090.1200708278570--

From java-user-return-32079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 05:51:13 2008
Return-Path: <java-user-return-32079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43391 invoked from network); 19 Jan 2008 05:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 05:51:13 -0000
Received: (qmail 91871 invoked by uid 500); 19 Jan 2008 05:50:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91836 invoked by uid 500); 19 Jan 2008 05:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91825 invoked by uid 99); 19 Jan 2008 05:50:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jan 2008 21:50:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 05:50:31 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2457568wah.11
        for <java-user@lucene.apache.org>; Fri, 18 Jan 2008 21:50:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=I++wJfBa12D0FBTVGyZI8dzv6ehLfbQro+hna5qQzTc=;
        b=X3xjrYxupjnQt8uZyuvksjpFP/kACbRhHGa/x9YbiHCO8JJvT09axc81MlcalLFgISfJvq8bbpbaem/sJkoG5g03QrihaVmfPVwyqpKWH1oTAdCZ1ZtLRvDNIV+NhYTU6ziaJr9ohQpaWJbSKar0WALrzqiIjLgdD36QhcID5Uk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ufS3OnRth9H+N7+vxi+F9r2W2Dr0qBPbKT8P9l6fHQvez/7b0nhRe8xOGWZAkPZCmQiqI9reexmlg7ldGZiValrLRGDu/fzRfVm0oYholy37iFqoa77ef8pwDo3EGDJQEQaQLPRo3zw8TkgOHTDgE18Stp/iPg/Tm4n9ni93KWo=
Received: by 10.114.156.1 with SMTP id d1mr1310076wae.68.1200721837744;
        Fri, 18 Jan 2008 21:50:37 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Fri, 18 Jan 2008 21:50:37 -0800 (PST)
Message-ID: <a206fb7e0801182150t22eda0eeu105d09e86d376d65@mail.gmail.com>
Date: Fri, 18 Jan 2008 21:50:37 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Optimize for large index size
In-Reply-To: <9E448914-A8BB-4F0B-BDC8-A7DC4BF90CA7@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a206fb7e0801180131n3e973c5cmb1783dc8bf235fca@mail.gmail.com>
	 <9E448914-A8BB-4F0B-BDC8-A7DC4BF90CA7@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Michael for the feedback. Couple more questions,

1) Doesn't Lucene do some sort of optimization internally based on
mergefactor, i.e, if the number of segments grow over the mergefactor
number Lucene would automatically merge them into one segment - is
this different than optimization? Does optimize do more than this?
The reason we are keeping high merge factor (200) is so Lucene doesn't
do frequent optimization on its own.

2) Do you know any approximate release date for 2.3?


We do have around 30 fields in our index (over 10 are untokenized, can
I just make then NO_NORM?).

Thanks,
-vivek

On Jan 18, 2008 2:37 AM, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> vivek sar wrote:
>
> > Hi,
> >
> >   We are using Lucene 2.2. We have an index of size 70G (within 3-4
> > days) and growing. We run optimize pretty frequently (once every hour
> > - due to large number of index updates every min - can be up to 100K
> > new documents every min). I have seen every now and then the optimize
> > takes 3-4 hours to complete and up to 8 G memory (our limit). This
> > makes the whole system slow. Few questions,
> >
> > 1) Is there any alternative to optimize? That is, can we do without
> > optimize and still have our search fast?
>
> In Lucene 2.3 (coming out shortly) there is a new "partial optimize"
> method that takes an int maxNumSegments.  It will optimize your index
> down to that many segments.  This let's you reduce cost of optimizing
> while still getting faster searching.  Maybe try that?
>
> Also, Lucene 2.3 has sizable speedups to indexing, and uses RAM
> buffering more efficiently.  This will let you hold more documents in
> RAM before flushing a new segment, which in turn should reduce your
> merging cost.
>
> > 2) What's the best way to use optimize, i.e. how can we make the
> > optimize much faster and use lesser memory?
>
> Fundamentally optimize is quite time consuming because it has to do
> massive segment merging (the final merge being the worst).
>
> However, it is not supposed to be so memory consuming.  How are you
> measuring memory usage?   (Try using java -verbose:gc to see actual
> heap usage after full GC). What kind of documents are you creating?
> EG one known memory issue is if you have many diverse fields, all
> with norms enabled.  Norms are not stored sparsely, so, this will
> consume alot of RAM during optimize and during searching.
>
> > 3) Is there a way to partition the indexes using Lucene? Let's say we
> > partition daily, so we have to optimize only the daily indexes and not
> > the whole thing.
>
> Yes, you can do this, and run searches over these indices (use
> MultiSearcher).  You can then merge them into a single index, using
> addIndexesNoOptimize.  But, this is not really different from using
> optimize(int maxNumSegments).
>
> > Our mergefactor=200 and maxMergeDocs=99999
>
> In Lucene 2.3, segment merging is done in a background thread(s).
> Given that, I think you'd want to decrease mergeFactor so that
> merging is taking place while you are indexing.  (Test to be sure).
> That should make your optimize call less costly.
>
> > Thanks,
> > -vivek
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 11:07:28 2008
Return-Path: <java-user-return-32080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86413 invoked from network); 19 Jan 2008 11:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 11:07:27 -0000
Received: (qmail 89857 invoked by uid 500); 19 Jan 2008 11:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89810 invoked by uid 500); 19 Jan 2008 11:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89798 invoked by uid 99); 19 Jan 2008 11:07:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 03:07:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 11:06:41 +0000
Received: by an-out-0708.google.com with SMTP id c5so321509anc.49
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 03:06:45 -0800 (PST)
Received: by 10.100.123.4 with SMTP id v4mr9500861anc.14.1200740805251;
        Sat, 19 Jan 2008 03:06:45 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id s40sm4559815hsb.5.2008.01.19.03.06.44
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 19 Jan 2008 03:06:44 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com>
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: delete a document from indexwriter
Date: Sat, 19 Jan 2008 06:07:03 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Good question....

So far, this method has not been carried over to IndexWriter because  
in general it's not really safe, since there's no way to get an  
accurate docID from IndexWriter itself.

You can't really "know" when IndexWriter does merges that compacts  
deletes and thus changes docIDs.  So, if you open a reader on the  
side, get a docID you want to delete, and then go and ask IndexWriter  
to delete that docID, you may in fact delete the wrong document.  In  
2.3, where segment merges are now done with a background thread, it's  
even worse, because a merge could complete and be committed, thus  
changing docIDs, at any time...

See complex discussion here:

     http://markmail.org/message/wxqel3gd6cmavk5a

As of 2.3, the low level infrastructure was added to IndexWriter for  
deleting by document ID, but this is not exposed publicly (this was a  
side effect of LUCENE-1112).  It's only used, internally, to delete a  
document if an exception is hit while indexing it.  In theory, you  
could then subclass IndexWriter and tap into this infrastructure to  
delete by docID, but, you're entering dangerous territory!

Do you have a specific use case in mind here?  I think we'd like to  
make this option available someday in IndexWriter, but doing so now  
(when there is no way to get a "reliable" docID) seems too dangerous...

Mike

Cam Bazz wrote:

> Hello,
>
> How do I delete a specific document from an indexwriter? I  
> understand there
> is deleteDocuments(term) which deletes all the documents matching  
> the term.
> But what if I want to delete a document that has more then one term in
> specific. I can search the document with a boolean query, and then  
> get the
> doc id.
> I know that doc ids are temporary, but can I not use it for delete?
>
> IndexReader has a delete by doc id method, but I am not sure how to  
> use this
> when using an indexwriter.
>
> Best,
> C.B.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 11:25:33 2008
Return-Path: <java-user-return-32081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89156 invoked from network); 19 Jan 2008 11:25:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 11:25:31 -0000
Received: (qmail 5700 invoked by uid 500); 19 Jan 2008 11:25:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5665 invoked by uid 500); 19 Jan 2008 11:25:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5654 invoked by uid 99); 19 Jan 2008 11:25:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 03:25:15 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.247] (HELO hs-out-2122.google.com) (64.233.178.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 11:24:47 +0000
Received: by hs-out-2122.google.com with SMTP id 54so1105504hsz.5
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 03:24:50 -0800 (PST)
Received: by 10.150.155.1 with SMTP id c1mr1490917ybe.85.1200741890795;
        Sat, 19 Jan 2008 03:24:50 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 7sm6813136wrl.33.2008.01.19.03.24.50
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 19 Jan 2008 03:24:50 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <a206fb7e0801182150t22eda0eeu105d09e86d376d65@mail.gmail.com>
References: <a206fb7e0801180131n3e973c5cmb1783dc8bf235fca@mail.gmail.com> <9E448914-A8BB-4F0B-BDC8-A7DC4BF90CA7@mikemccandless.com> <a206fb7e0801182150t22eda0eeu105d09e86d376d65@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E042D52D-C1D8-423C-A055-2C7402135C45@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Optimize for large index size
Date: Sat, 19 Jan 2008 06:25:09 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


vivek sar wrote:

> Thanks Michael for the feedback. Couple more questions,
>
> 1) Doesn't Lucene do some sort of optimization internally based on
> mergefactor, i.e, if the number of segments grow over the mergefactor
> number Lucene would automatically merge them into one segment - is
> this different than optimization? Does optimize do more than this?
> The reason we are keeping high merge factor (200) is so Lucene doesn't
> do frequent optimization on its own.

Lucene does periodically merge segments, but this is in general a
lower cost operation than optimize.  With mergeFactor 10, after you
have flushed 10 segments (call these "level 0" segments), they will be
merged together into a level 1 segment.  Then 10 flushes later,
another level 1 segment, etc.... once you have 10 level 1 segments,
they are merged into a level 2 segment.  Etc.

So over time this results in a logarithmic segment structure, whereby
you have < 10 segments at each level and each level is 10X the
size of the previous one (unless you start doing deletes...).

The merges can cascade, which means at certain times this merging does
in fact equate to an optimize.  But that does not happen very often.

Whereas optimize() always forces merging down to a single segment,
which is extremely costly.

I'm guessing, with Lucene 2.3, you will win with a lower mergeFactor
because this allows background threads to merge as you go.  Then at
the end there will be fewer segments that optimize has to merge.

> 2) Do you know any approximate release date for 2.3?

Actually any day now ... the final vote to release 2.3 is underway
now!:

   http://markmail.org/message/x66w2c5b5psvhc54

> We do have around 30 fields in our index (over 10 are untokenized, can
> I just make then NO_NORM?).

Yes, definitely test this and see if it reduces memory usage.  You  
have to fully
rebuild your index because norms are "contagious" meaning if any  
document
has norms turned on, then, the segment holding that doc will have norms
allocated for all docs, and when that segment gets merged, all merged  
docs
then have norms allocated, etc.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 11:53:12 2008
Return-Path: <java-user-return-32082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93609 invoked from network); 19 Jan 2008 11:53:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 11:53:12 -0000
Received: (qmail 19514 invoked by uid 500); 19 Jan 2008 11:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19339 invoked by uid 500); 19 Jan 2008 11:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19328 invoked by uid 99); 19 Jan 2008 11:52:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 03:52:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpstotz@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Jan 2008 11:52:29 +0000
Received: (qmail invoked by alias); 19 Jan 2008 11:52:34 -0000
Received: from p4FC72394.dip0.t-ipconnect.de (EHLO [192.168.178.27]) [79.199.35.148]
  by mail.gmx.net (mp026) with SMTP; 19 Jan 2008 12:52:34 +0100
X-Authenticated: #352958
X-Provags-ID: V01U2FsdGVkX190tKE0yS90+GUjP1CX8AY6zRoN6nKC8zQsRMIRur
	mm994ZMMBrNgl/
Message-ID: <4791E482.60900@gmx.de>
Date: Sat, 19 Jan 2008 12:52:34 +0100
From: Jan Peter Stotz <jpstotz@gmx.de>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Creating an alias for a field name?
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I would like to provide multiple field-names that are all mapped to the 
same field in background (e.g. a long field-name and a short 
field-name). Is there any mechanism for creating such field-aliases, may 
be in the IndexWriter or an QueryParser?

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 13:32:56 2008
Return-Path: <java-user-return-32083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14365 invoked from network); 19 Jan 2008 13:32:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 13:32:56 -0000
Received: (qmail 61764 invoked by uid 500); 19 Jan 2008 13:32:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61730 invoked by uid 500); 19 Jan 2008 13:32:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61719 invoked by uid 99); 19 Jan 2008 13:32:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 05:32:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 13:32:15 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1507235fga.27
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 05:32:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=E5dl7r3yaSbhirRGxTv6DFvtpcSCLYXyAHdbue7Oh88=;
        b=dM6s4y9089VdF6HTqm7lGhxO4zs5n/9VUAXyKQ5xdJXwMsh2W9Xo93CLNngztDnAOjfzgSHmMbR2uSexOQK9F06T6wrxby0vGM9Seyc8vfBP3+hp9pXosjf4K4Uy1f4YfF9R9ae+SAsOaCzAWFJ5pupeUqTau8476HP/gSocZQo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eZDANlTuA3jf5p+uSapFcRsfh3k+a6salKzsH4WqYBvy71ep/PJ+ulW723iByvuao21QTpSIYop9NMt5962NXsL3mT6dkDOkiMYFEoo1wteioJ1BrYL5ORpBTU6rPvWXfDGx6gYrXlDAe4GGUVknBNto/7r1m6aQJY2W9pYdMtk=
Received: by 10.82.158.12 with SMTP id g12mr8237315bue.18.1200749540085;
        Sat, 19 Jan 2008 05:32:20 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sat, 19 Jan 2008 05:32:20 -0800 (PST)
Message-ID: <359a92830801190532q6d6c37e1w333d5414c1a33e49@mail.gmail.com>
Date: Sat, 19 Jan 2008 08:32:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating an alias for a field name?
In-Reply-To: <4791E482.60900@gmx.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7655_18466416.1200749540079"
References: <4791E482.60900@gmx.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7655_18466416.1200749540079
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Not that I know of. I presume that you want this to reduct typing
or some such. Your app could simply massage the query
that was typed, doing the appropriate substitutions before
parsing the query....

Erick

On Jan 19, 2008 6:52 AM, Jan Peter Stotz <jpstotz@gmx.de> wrote:

> Hi,
>
> I would like to provide multiple field-names that are all mapped to the
> same field in background (e.g. a long field-name and a short
> field-name). Is there any mechanism for creating such field-aliases, may
> be in the IndexWriter or an QueryParser?
>
> Jan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7655_18466416.1200749540079--

From java-user-return-32084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 18:10:31 2008
Return-Path: <java-user-return-32084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57564 invoked from network); 19 Jan 2008 18:10:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 18:10:29 -0000
Received: (qmail 22022 invoked by uid 500); 19 Jan 2008 18:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21985 invoked by uid 500); 19 Jan 2008 18:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21974 invoked by uid 99); 19 Jan 2008 18:10:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 10:10:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 18:10:00 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0JI9rAr095737
	for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 19:09:54 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene Performance
Date: Sat, 19 Jan 2008 19:09:58 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <14952958.post@talk.nabble.com>
In-Reply-To: <14952958.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801191909.59076.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 18 January 2008 17:52:27 Thibaut Britz wrote:
> 
> Hi,
> 
...
> 
> Another thing I noticed is that we append a lot of queries, so we have a lot
> of duplicate phrases like (A and B or C) and ... and (A and B or C) (more
> nested than that). Is lucene doing any internal query optimization (like
> karnaugh maps) by removing the last (A and B or C), as it is not needed, or
> do I have to do that myself?

Query optimization like karnaugh maps is not available in Lucene.
For each level of 'and' and 'or' in the (rewritten) query, as well as for all terms
in the query, a separate scorer will be used during query search.

The query rewrite could in principle do this, but it might affect the score values.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 19 18:55:01 2008
Return-Path: <java-user-return-32085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73322 invoked from network); 19 Jan 2008 18:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2008 18:55:01 -0000
Received: (qmail 52430 invoked by uid 500); 19 Jan 2008 18:54:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52398 invoked by uid 500); 19 Jan 2008 18:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52387 invoked by uid 99); 19 Jan 2008 18:54:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 10:54:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpstotz@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Jan 2008 18:54:19 +0000
Received: (qmail invoked by alias); 19 Jan 2008 18:54:23 -0000
Received: from p4FC72394.dip0.t-ipconnect.de (EHLO [192.168.178.27]) [79.199.35.148]
  by mail.gmx.net (mp006) with SMTP; 19 Jan 2008 19:54:23 +0100
X-Authenticated: #352958
X-Provags-ID: V01U2FsdGVkX189oxdYCmI9B20B7tf2iWTg6mILYAIs0GyNuVKYzQ
	XoO+TFBGDOh9Lr
Message-ID: <4792475A.10306@gmx.de>
Date: Sat, 19 Jan 2008 19:54:18 +0100
From: Jan Peter Stotz <jpstotz@gmx.de>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Creating an alias for a field name?
References: <4791E482.60900@gmx.de> <359a92830801190532q6d6c37e1w333d5414c1a33e49@mail.gmail.com>
In-Reply-To: <359a92830801190532q6d6c37e1w333d5414c1a33e49@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

thanks for your response.

> Not that I know of. I presume that you want this to reduct typing
> or some such. Your app could simply massage the query
> that was typed, doing the appropriate substitutions before
> parsing the query....

Well I found a much better solution which avoids "double parsing". I 
created my own QueryParser by extending the existing. Then I identified 
five methods to override:

getFieldQuery(String field,String queryText)
getFuzzyQuery(String field,String termStr, float minSimilarity)
getPrefixQuery(String field,String termStr)
getRangeQuery(String field,String part1, String part2, boolean inclusive)
getWildcardQuery(String field,String termStr)

In each of this methods I call my own method:
field = translateField(field);
before passing the values to it's super implementation.

And my translateField method uses a Hashtable for looking up field 
aliases. It it finds an alias it returns it, otherwise the field is 
returned without modification. Therefore I have my field aliases without 
having to implement an own parser - thanks to the good OO-design of the 
QueryParser class.

BTW: If someone wants to took onto the complete source just ask. I did 
not want to attach/include them because of its size (most of the code 
has been generated by Eclipse...)

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 01:07:03 2008
Return-Path: <java-user-return-32086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96958 invoked from network); 20 Jan 2008 01:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 01:07:02 -0000
Received: (qmail 19616 invoked by uid 500); 20 Jan 2008 01:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19590 invoked by uid 500); 20 Jan 2008 01:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19579 invoked by uid 99); 20 Jan 2008 01:06:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 17:06:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 01:06:19 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3014399wah.11
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 17:06:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=yrlhS2YZ83eJFm8Q7T3NX1rf2lTJL68zqdifMIEDXfo=;
        b=bKKzHWJUB4QYozvVyqDYMODkyaZGb2trcord6GMLbnCCQvxtikKUJfn8vqy+b4z7Wi3pOBw517+qAzATqsDQ/f38QZPsgvA3lOu70uRiFU7ibo5LsTmTOlkR3j9t2xjWx91TaqAo2Hl9ebmro5Jgqrr7earXDdKMADYLzMXJ9Ng=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=AtM6N4NFdJM43qVnEi+8pCDmn/1l6mCN4Zr7GC+DRIcxhLWuAAhzOprlthZSh5aEp6KVAjRcpRFftisqQtmL3dhOzCHM8v2QT7iKxGvCi+PnD7c5oSUaMDOM11XyJ0FLS49gWB+tEFSLbYBw7cFMoNHjni8JGXe4beR/qZ+adTs=
Received: by 10.114.125.2 with SMTP id x2mr2678906wac.119.1200791185703;
        Sat, 19 Jan 2008 17:06:25 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Sat, 19 Jan 2008 17:06:25 -0800 (PST)
Message-ID: <a206fb7e0801191706i232da08cl16ce56f3732eb2af@mail.gmail.com>
Date: Sat, 19 Jan 2008 17:06:25 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Using RangeFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

 I have a requirement to filter out documents by date range. I'm using
RangeFilter (in combination to FilteredQuery) to do this. I was under
the impression the filtering is done on documents, thus I'm just
storing the date values, but not indexing them. As every new document
would have a new date value indexing each date value field for every
new document would be very expensive. We index pretty much over 10K
new documents every minute, so I want to minimize the number of values
I need to index.

This is what I want to do,

  doc.add(new Field("optime", getDateStr(rs.getDate("optime")),
					Field.Store.YES, Field.Index.NO));

 When I do this I always get 0 hits, but if I turn on indexing for
date (Field.Index.NO_NORM) then I'm getting the right result. But,
turning indexing on date field doubles my index size.

 My date format: 20080200000000 (yyyyMMddhhmiss)

Is there any way I can filter on date value without indexing them?

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 03:21:18 2008
Return-Path: <java-user-return-32087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36765 invoked from network); 20 Jan 2008 03:21:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 03:21:17 -0000
Received: (qmail 84258 invoked by uid 500); 20 Jan 2008 03:21:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84216 invoked by uid 500); 20 Jan 2008 03:21:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84204 invoked by uid 99); 20 Jan 2008 03:21:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 19:21:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 03:20:47 +0000
Received: (qmail 38700 invoked by uid 60001); 20 Jan 2008 03:20:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=335S4nRNNOoxbevwiywdSE48Z5zfqOGW8nWecFmQAb3logdVBDY90ANyHXojlhZcyizydnJNYzGu20CbayCU1om6jIr9M6L17MMRmp9WQPAMxvGkn9+trrWn5zbsC9hTdaMM9Dmc/kpo2/ZMF1/4djVpcSGrs3ddmsT3FH4CmUQ=;
X-YMail-OSG: fsFEil4VM1mwaA6tzinM0WLywU.jL.FZVtGjAhMmk4jPxro9yk_xog77RlBi.TMNUBlb8AO3Uk3DxTeYPxHQly3sWKdlxhFnaUfh0x8Jr9mmDWcNWTA-
Received: from [72.231.9.236] by web50306.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 19:20:38 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 19:20:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using RangeFilter
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <21335.37522.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Do you really need to store those dates?  Why not just index them and not store them if index size is a concern?

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Sent: Saturday, January 19, 2008 8:06:25 PM
Subject: Using RangeFilter

Hi,

 I have a requirement to filter out documents by date range. I'm using
RangeFilter (in combination to FilteredQuery) to do this. I was under
the impression the filtering is done on documents, thus I'm just
storing the date values, but not indexing them. As every new document
would have a new date value indexing each date value field for every
new document would be very expensive. We index pretty much over 10K
new documents every minute, so I want to minimize the number of values
I need to index.

This is what I want to do,

  doc.add(new Field("optime", getDateStr(rs.getDate("optime")),
                    Field.Store.YES, Field.Index.NO));

 When I do this I always get 0 hits, but if I turn on indexing for
date (Field.Index.NO_NORM) then I'm getting the right result. But,
turning indexing on date field doubles my index size.

 My date format: 20080200000000 (yyyyMMddhhmiss)

Is there any way I can filter on date value without indexing them?

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 03:23:24 2008
Return-Path: <java-user-return-32088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37650 invoked from network); 20 Jan 2008 03:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 03:23:24 -0000
Received: (qmail 86560 invoked by uid 500); 20 Jan 2008 03:23:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86531 invoked by uid 500); 20 Jan 2008 03:23:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86520 invoked by uid 99); 20 Jan 2008 03:23:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 19:23:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 03:22:41 +0000
Received: (qmail 81570 invoked by uid 60001); 20 Jan 2008 03:22:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Dbt+TD4Eeta297Q5t2o5yf7JRRfsXeUeRqgNcJF7FauOoLZ8LWQaYYypY7h6rvqDlJnWOXNlMXCXKqeuyxpvLyGzgIXi1pcVkg1XeX4bs3ltqLxtQmg+LEh6QmT01IIzVddmps6wh/GgbZJUX/l4+/Bc0JCZ6Yo3q511toUAsxk=;
X-YMail-OSG: bwfF6EgVM1mTSlnF.lGEB_Jw2L54u9uxBXfMyR31XE3p_hmqK8wCJsW3jrtgOIx3QjsZvP788NOz_fXq.i_C1RtXWU2fQVz1TPyQra12Lct_d7mMPOxBIzLItW3g6jgOLruHUWBAE8DsejE-
Received: from [72.231.9.236] by web50303.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 19:22:44 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 19:22:44 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Creating an alias for a field name?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <81162.81463.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

A small comment.  You mentioned Hashtable.  As you are probably already creating a new QueryParser instance for every search, you most likely don't need a (synchronized) Hashtable and can use the unsynchronized HashMap.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Jan Peter Stotz <jpstotz@gmx.de>
To: java-user@lucene.apache.org
Sent: Saturday, January 19, 2008 1:54:18 PM
Subject: Re: Creating an alias for a field name?

Hi Erick,

thanks for your response.

> Not that I know of. I presume that you want this to reduct typing
> or some such. Your app could simply massage the query
> that was typed, doing the appropriate substitutions before
> parsing the query....

Well I found a much better solution which avoids "double parsing". I 
created my own QueryParser by extending the existing. Then I identified
 
five methods to override:

getFieldQuery(String field,String queryText)
getFuzzyQuery(String field,String termStr, float minSimilarity)
getPrefixQuery(String field,String termStr)
getRangeQuery(String field,String part1, String part2, boolean
 inclusive)
getWildcardQuery(String field,String termStr)

In each of this methods I call my own method:
field = translateField(field);
before passing the values to it's super implementation.

And my translateField method uses a Hashtable for looking up field 
aliases. It it finds an alias it returns it, otherwise the field is 
returned without modification. Therefore I have my field aliases
 without 
having to implement an own parser - thanks to the good OO-design of the
 
QueryParser class.

BTW: If someone wants to took onto the complete source just ask. I did 
not want to attach/include them because of its size (most of the code 
has been generated by Eclipse...)

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 03:31:26 2008
Return-Path: <java-user-return-32089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39807 invoked from network); 20 Jan 2008 03:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 03:31:26 -0000
Received: (qmail 89171 invoked by uid 500); 20 Jan 2008 03:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89139 invoked by uid 500); 20 Jan 2008 03:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89128 invoked by uid 99); 20 Jan 2008 03:31:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 19:31:10 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 03:30:54 +0000
Received: (qmail 4256 invoked by uid 60001); 20 Jan 2008 03:30:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=mq8Jt7UC/qdlQDRLznw+QsVJPS2TOCX1pc3qcCmn470qCm2KsbF4XxwfEYYXUfoqihKIDDw+g9RDVdKBFOK9ONMARC+v+PA+njEQbXb5fWgVRk/89F2AEMJYwaxXnCmabNyz/exJ5+z6mDN6BO8kn1JKgXEVgKzaBE0+zxGob8I=;
X-YMail-OSG: CVGh2mYVM1kV8NT47wZQcr4KsazgzWof.GyMNxNIaLTwU.IokZCbGMPqqW4Zdi_aBhpRuwtg8.JBEXl6CZ5xvjHP9TI44k.3ZPoBvrhHxws1oHY09ImRDw--
Received: from [72.231.9.236] by web50311.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 19:30:46 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 19:30:46 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: log4j error
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <560659.2461.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I can't think of a reason why this would happen.  Sounds like a question for the Spring people.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Sent: Friday, January 18, 2008 9:31:49 AM
Subject: log4j error


Since I upgraded to Lucene 2.3, I started to see some error message
 coming
from log4j via Lucene. Has any one ever experienced this? Is this
classloading issue?

javax.ejb.EJBException: EJB Exception: :
 java.lang.IllegalStateException:
Current state = FLUSHED, new state = CODING
        at
java.nio.charset.CharsetEncoder.throwIllegalStateException(CharsetEncoder.java:941)
        at
 java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:537)
        at
sun.nio.cs.StreamEncoder$CharsetSE.implWrite(StreamEncoder.java:384)
        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:136)
        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:146)
        at
 java.io.OutputStreamWriter.write(OutputStreamWriter.java:204)
        at java.io.Writer.write(Writer.java:126)
        at
 org.apache.log4j.helpers.QuietWriter.write(QuietWriter.java:47)
        at
org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:301)
        at
org.apache.log4j.DailyRollingFileAppender.subAppend(DailyRollingFileAppender.java:358)
        at
 org.apache.log4j.WriterAppender.append(WriterAppender.java:159)
        at
org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:230)
        at
org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:65)
        at org.apache.log4j.Category.callAppenders(Category.java:203)
        at org.apache.log4j.Category.forcedLog(Category.java:388)
        at org.apache.log4j.Category.log(Category.java:853)
        at
org.apache.commons.logging.impl.Log4JLogger.debug(Log4JLogger.java:171)
        at
org.springmodules.lucene.search.factory.SearcherFactoryUtils.doReleaseSearcher(SearcherFactoryUtils.java:118)
        at
org.springmodules.lucene.search.factory.SearcherFactoryUtils.releaseSearcher(SearcherFactoryUtils.java:98)
        at
org.springmodules.lucene.search.core.DefaultLuceneSearchTemplate.search(DefaultLuceneSearchTemplate.java:234)
-- 
View this message in context:
 http://www.nabble.com/log4j-error-tp14949807p14949807.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 04:51:46 2008
Return-Path: <java-user-return-32090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60478 invoked from network); 20 Jan 2008 04:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 04:51:44 -0000
Received: (qmail 22433 invoked by uid 500); 20 Jan 2008 04:51:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22398 invoked by uid 500); 20 Jan 2008 04:51:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22387 invoked by uid 99); 20 Jan 2008 04:51:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 20:51:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 04:51:00 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3131570wah.11
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 20:51:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=mj887hxyJA8p6bUIKF8rdcyc8yDaObBdqYQpb2WDZYU=;
        b=mDnu0V/c9uwlvz2ayYgW9BJz8XNxbrYJPKRPl4amppxJEbBESG5eIAt79r/SK7clC9hBb/hcjshzpzKud2Y+KNPbvet8WQkPfBzZUoWXxEhxX1vf0Q1lW6pgKDVXaB0iatRu9BatcRX5Yr2QPOkWzQxhDgg5J5UsAQnefmWf1JA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=m8b8Y09aUqtPmDuHISOc2EunmJVwW1cylquxJYnIpqYWxbHEKVZXZULJqyQT30V6ecShPYv/y6GjjSLtex0OKc4kbZiWshDQhIb1FTrQjy5noMM5z07bLz175cRrJvaGvy+NvZL+WzK1mYTLxsGgdRmgKJbAPFcelI/SUqC0BWc=
Received: by 10.114.194.1 with SMTP id r1mr3360164waf.40.1200804666427;
        Sat, 19 Jan 2008 20:51:06 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Sat, 19 Jan 2008 20:51:06 -0800 (PST)
Message-ID: <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
Date: Sat, 19 Jan 2008 20:51:06 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using RangeFilter
In-Reply-To: <21335.37522.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21335.37522.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I need to be able to sort on optime as well, thus need to store it .
Isn't there any way to filter without indexing? Not sure why do I need
to index some field I need to filter on. I thought we could get all
the documents from an index and then filter out the documents from it
for a field within a given range - isn't this possible?

Just a side question, what takes more space - indexing a field value
or storing a field value?

Thanks,
-vivek

On Jan 19, 2008 7:20 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi,
>
> Do you really need to store those dates?  Why not just index them and not store them if index size is a concern?
>
> Otis
>
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
> From: vivek sar <vivextra@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, January 19, 2008 8:06:25 PM
> Subject: Using RangeFilter
>
> Hi,
>
>  I have a requirement to filter out documents by date range. I'm using
> RangeFilter (in combination to FilteredQuery) to do this. I was under
> the impression the filtering is done on documents, thus I'm just
> storing the date values, but not indexing them. As every new document
> would have a new date value indexing each date value field for every
> new document would be very expensive. We index pretty much over 10K
> new documents every minute, so I want to minimize the number of values
> I need to index.
>
> This is what I want to do,
>
>   doc.add(new Field("optime", getDateStr(rs.getDate("optime")),
>                     Field.Store.YES, Field.Index.NO));
>
>  When I do this I always get 0 hits, but if I turn on indexing for
> date (Field.Index.NO_NORM) then I'm getting the right result. But,
> turning indexing on date field doubles my index size.
>
>  My date format: 20080200000000 (yyyyMMddhhmiss)
>
> Is there any way I can filter on date value without indexing them?
>
> Thanks,
> -vivek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 06:27:31 2008
Return-Path: <java-user-return-32091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51973 invoked from network); 20 Jan 2008 06:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 06:27:30 -0000
Received: (qmail 49982 invoked by uid 500); 20 Jan 2008 06:27:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49946 invoked by uid 500); 20 Jan 2008 06:27:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49935 invoked by uid 99); 20 Jan 2008 06:27:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 22:27:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 72.14.252.159 as permitted sender)
Received: from [72.14.252.159] (HELO po-out-1718.google.com) (72.14.252.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 06:26:46 +0000
Received: by po-out-1718.google.com with SMTP id y22so1163645pof.0
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 22:26:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=s3H5vhOxvMKMJ/xvcVjOxUvkcyMtzNz3+5aObRPsf7U=;
        b=qixpVtc/dmrBYlACaPmNuTSegSz0OrWqFgqNDB6kSn7UOumKq5t+vBUTZLbBAu4T1PlcAxxG0entyHuiduK850A5Xmf/cLAXu6/qnVK8o5xU8weuLZ8Y12mmasLO/tJj92du643vzLeS9TOIi+F+HfdOQa7fkCYY+5KddjJAumU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=voYgCOPsLTgdE22E/ZvOD4cKqDPDnBwBOiSpyIg4u6CkKWkgoawmHeuGTPBJmzWaweCVJGJZjhJGrQT1t0sloiS7DrpVSrJQShFyu+6PYoZj0KiHG0GQKSXcNrTEF0CT0tAXncEKPWW4HORZGHoa/lV0Psa2nmT/bK+HD7HdGiI=
Received: by 10.141.164.10 with SMTP id r10mr217907rvo.223.1200810412260;
        Sat, 19 Jan 2008 22:26:52 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Sat, 19 Jan 2008 22:26:25 -0800 (PST)
Message-ID: <786fde50801192226p648de893n81764e43b031ea9f@mail.gmail.com>
Date: Sun, 20 Jan 2008 08:26:25 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using RangeFilter
In-Reply-To: <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4226_5643988.1200810385280"
References: <21335.37522.qm@web50306.mail.re2.yahoo.com>
	 <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4226_5643988.1200810385280
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can try to write your own HitCollector and on its collect(int doc, float
score) method read the doc's date value and decide if it passes the filter
or not.
That is an approach I use for similar tasks.

On Jan 20, 2008 6:51 AM, vivek sar <vivextra@gmail.com> wrote:

> I need to be able to sort on optime as well, thus need to store it .
> Isn't there any way to filter without indexing? Not sure why do I need
> to index some field I need to filter on. I thought we could get all
> the documents from an index and then filter out the documents from it
> for a field within a given range - isn't this possible?
>
> Just a side question, what takes more space - indexing a field value
> or storing a field value?
>
> Thanks,
> -vivek
>
> On Jan 19, 2008 7:20 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
> > Hi,
> >
> > Do you really need to store those dates?  Why not just index them and
> not store them if index size is a concern?
> >
> > Otis
> >
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> > ----- Original Message ----
> > From: vivek sar <vivextra@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Saturday, January 19, 2008 8:06:25 PM
> > Subject: Using RangeFilter
> >
> > Hi,
> >
> >  I have a requirement to filter out documents by date range. I'm using
> > RangeFilter (in combination to FilteredQuery) to do this. I was under
> > the impression the filtering is done on documents, thus I'm just
> > storing the date values, but not indexing them. As every new document
> > would have a new date value indexing each date value field for every
> > new document would be very expensive. We index pretty much over 10K
> > new documents every minute, so I want to minimize the number of values
> > I need to index.
> >
> > This is what I want to do,
> >
> >   doc.add(new Field("optime", getDateStr(rs.getDate("optime")),
> >                     Field.Store.YES, Field.Index.NO));
> >
> >  When I do this I always get 0 hits, but if I turn on indexing for
> > date (Field.Index.NO_NORM) then I'm getting the right result. But,
> > turning indexing on date field doubles my index size.
> >
> >  My date format: 20080200000000 (yyyyMMddhhmiss)
> >
> > Is there any way I can filter on date value without indexing them?
> >
> > Thanks,
> > -vivek
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_4226_5643988.1200810385280--

From java-user-return-32092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 06:27:41 2008
Return-Path: <java-user-return-32092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52021 invoked from network); 20 Jan 2008 06:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 06:27:39 -0000
Received: (qmail 51523 invoked by uid 500); 20 Jan 2008 06:27:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51485 invoked by uid 500); 20 Jan 2008 06:27:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51469 invoked by uid 99); 20 Jan 2008 06:27:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 22:27:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 72.14.252.155 as permitted sender)
Received: from [72.14.252.155] (HELO po-out-1718.google.com) (72.14.252.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 06:27:02 +0000
Received: by po-out-1718.google.com with SMTP id y22so1163658pof.0
        for <java-user@lucene.apache.org>; Sat, 19 Jan 2008 22:26:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=s3H5vhOxvMKMJ/xvcVjOxUvkcyMtzNz3+5aObRPsf7U=;
        b=lOWvx1xAM3mva/8bLspR10ioCB/u5fa71Z0Km23zNLRbEwhMPwKY88Dq+b2QIQhuXU+uoDjI+wEgb++xhzBWcGAJZdpDlVftoqmUKVhe559QTEUjj5HNMx3WIkySnY2TdSsnmDjeiiMOHAvSohKnDIS8OZXe/LLOXsSC/BTo7sE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=voYgCOPsLTgdE22E/ZvOD4cKqDPDnBwBOiSpyIg4u6CkKWkgoawmHeuGTPBJmzWaweCVJGJZjhJGrQT1t0sloiS7DrpVSrJQShFyu+6PYoZj0KiHG0GQKSXcNrTEF0CT0tAXncEKPWW4HORZGHoa/lV0Psa2nmT/bK+HD7HdGiI=
Received: by 10.141.74.17 with SMTP id b17mr3594705rvl.144.1200810385286;
        Sat, 19 Jan 2008 22:26:25 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Sat, 19 Jan 2008 22:26:25 -0800 (PST)
Message-ID: <786fde50801192226p648de893n81764e43b031ea9f@mail.gmail.com>
Date: Sun, 20 Jan 2008 08:26:25 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using RangeFilter
In-Reply-To: <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4226_5643988.1200810385280"
References: <21335.37522.qm@web50306.mail.re2.yahoo.com>
	 <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4226_5643988.1200810385280
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can try to write your own HitCollector and on its collect(int doc, float
score) method read the doc's date value and decide if it passes the filter
or not.
That is an approach I use for similar tasks.

On Jan 20, 2008 6:51 AM, vivek sar <vivextra@gmail.com> wrote:

> I need to be able to sort on optime as well, thus need to store it .
> Isn't there any way to filter without indexing? Not sure why do I need
> to index some field I need to filter on. I thought we could get all
> the documents from an index and then filter out the documents from it
> for a field within a given range - isn't this possible?
>
> Just a side question, what takes more space - indexing a field value
> or storing a field value?
>
> Thanks,
> -vivek
>
> On Jan 19, 2008 7:20 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
> > Hi,
> >
> > Do you really need to store those dates?  Why not just index them and
> not store them if index size is a concern?
> >
> > Otis
> >
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> > ----- Original Message ----
> > From: vivek sar <vivextra@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Saturday, January 19, 2008 8:06:25 PM
> > Subject: Using RangeFilter
> >
> > Hi,
> >
> >  I have a requirement to filter out documents by date range. I'm using
> > RangeFilter (in combination to FilteredQuery) to do this. I was under
> > the impression the filtering is done on documents, thus I'm just
> > storing the date values, but not indexing them. As every new document
> > would have a new date value indexing each date value field for every
> > new document would be very expensive. We index pretty much over 10K
> > new documents every minute, so I want to minimize the number of values
> > I need to index.
> >
> > This is what I want to do,
> >
> >   doc.add(new Field("optime", getDateStr(rs.getDate("optime")),
> >                     Field.Store.YES, Field.Index.NO));
> >
> >  When I do this I always get 0 hits, but if I turn on indexing for
> > date (Field.Index.NO_NORM) then I'm getting the right result. But,
> > turning indexing on date field doubles my index size.
> >
> >  My date format: 20080200000000 (yyyyMMddhhmiss)
> >
> > Is there any way I can filter on date value without indexing them?
> >
> > Thanks,
> > -vivek
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_4226_5643988.1200810385280--

From java-user-return-32093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 06:28:03 2008
Return-Path: <java-user-return-32093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52101 invoked from network); 20 Jan 2008 06:28:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 06:28:03 -0000
Received: (qmail 53352 invoked by uid 500); 20 Jan 2008 06:27:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53062 invoked by uid 500); 20 Jan 2008 06:27:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53051 invoked by uid 99); 20 Jan 2008 06:27:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 22:27:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 06:27:19 +0000
Received: (qmail 22123 invoked by uid 60001); 20 Jan 2008 06:27:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=YL1YfUsfGXos3rhEdHsP9aEnhyGZsuGzjI0ZyD4a6vKDmJlmNGfSXu2Jx1DgHAgRDwkdwY2L7PrASg9oVLHvXO0gyfr8JdfD6M4mPzW27iObxBYc1q4W1iCBAL2DU5iJr6nFElO5SZ0IVqVMcEKaTebDwBhNex/f2XEu9xecUy8=;
X-YMail-OSG: .fKORV4VM1n7s.diF8w6DLRdsmwDAykf9Nt3U_WXuj5XL2fHSnimafMxYo_pDOayurKuoEQJzhjbFkLQ7YAJ8WIO3YQV.Dwz0jPtafJOgiIYh6UZ0dmbTrKbMN08L_xlJgk37mjod35yWsA-
Received: from [72.231.9.236] by web50311.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 22:27:24 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 22:27:24 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: index update problems with Linux
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <574214.20871.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Kevin,

I don't see writer.close() in your code snippet.

Otis 
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Kevin Dewi <kevin@gesichterparty.de>
To: java-user@lucene.apache.org
Sent: Friday, January 18, 2008 6:33:43 AM
Subject: index update problems with Linux

Hello,

I have a problem with this code (updating a lucene index by delete and
  
adding documents):


IndexReader reader = IndexReader.open(directory);
while (i.hasNext()) {
    reader.deleteDocuments(i.next());
}
reader.close();

...

IndexWriter writer = new IndexWriter(directory,
        new GermanAnalyzer(), create);
while (i2.hasNext()) {
    writer.addDocument(i2.next());
}

By creating the IndexWriter I became this exception on Linux (ubuntu  
dapper):
java.io.IOException: Lock obtain timed out: Lock@/home/picard/develop/ 
apache-tomcat-6.0.14/temp/lucene-1763c549e0e952256392217dac3f3bdb- 
write.lock
         at org.apache.lucene.store.Lock.obtain(Lock.java:56)
         at  
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:254)
         at  
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:244)
         at  
de.gesichterparty.DatabaseManager.processQueue(DatabaseManager.java:345)
         at de.gesichterparty.LuceneServlet.run(LuceneServlet.java:140)
         at java.lang.Thread.run(Thread.java:595)
java.io.FileNotFoundException: /home/picard/develop/apache- 
tomcat-6.0.14/webapps/Lucene/WEB-INF/databases/user/segments (No such  
file or directory)
         at java.io.RandomAccessFile.open(Native Method)
         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
         at org.apache.lucene.store.FSIndexInput 
$Descriptor.<init>(FSDirectory.java:430)
         at  
org.apache.lucene.store.FSIndexInput.<init>(FSDirectory.java:439)
         at  
org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:329)
         at  
org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:45)
         at org.apache.lucene.index.IndexReader 
$1.doBody(IndexReader.java:146)
         at org.apache.lucene.store.Lock$With.run(Lock.java:99)
         at org.apache.lucene.index.IndexReader.open(IndexReader.java: 
141)
         at org.apache.lucene.index.IndexReader.open(IndexReader.java: 
136)
         at  
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:47)
         at  
de.gesichterparty.DatabaseManager.processQueue(DatabaseManager.java:374)
         at de.gesichterparty.LuceneServlet.run(LuceneServlet.java:140)
         at java.lang.Thread.run(Thread.java:595)


On Mac OS X Leopard this code works fine.

Thanks
Kevin





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 06:30:53 2008
Return-Path: <java-user-return-32094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53584 invoked from network); 20 Jan 2008 06:30:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 06:30:53 -0000
Received: (qmail 55773 invoked by uid 500); 20 Jan 2008 06:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55735 invoked by uid 500); 20 Jan 2008 06:30:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55724 invoked by uid 99); 20 Jan 2008 06:30:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 22:30:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 06:30:09 +0000
Received: (qmail 53828 invoked by uid 60001); 20 Jan 2008 06:30:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=H2lwWeQ5smxG5WLWVG/In2p1ItzpIQREOExhXjCjQcpKK9bQoqP/41QfTnFSPQJpRCjjiHl/2Z/wYcJueFzdGG8S9ddbL39VR6smiMlu5nHJDm4ZbfsDJPgRycYkzgqlXqQSThWp9bOgaUeP7d69sNFoEGm5tIPmWlsduMuFmlE=;
X-YMail-OSG: vVqLtj8VM1mpzQXid33Wts6LyjFjY9.Wm2gxKGYMKQD6T7gEqt3V5bhk_Y5DIrAosw--
Received: from [72.231.9.236] by web50309.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 22:30:14 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 22:30:14 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Optimize for large index size
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <919348.51422.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

In addition to what Mike already said:

maxMergeDocs=99999 -- do you really mean maxMergeDocs and not maxBufferedDocs?

Larg(er) maxBufferedDocs will speed up indexing.

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Sent: Friday, January 18, 2008 4:31:26 AM
Subject: Optimize for large index size

Hi,

  We are using Lucene 2.2. We have an index of size 70G (within 3-4
days) and growing. We run optimize pretty frequently (once every hour
- due to large number of index updates every min - can be up to 100K
new documents every min). I have seen every now and then the optimize
takes 3-4 hours to complete and up to 8 G memory (our limit). This
makes the whole system slow. Few questions,

1) Is there any alternative to optimize? That is, can we do without
optimize and still have our search fast?
2) What's the best way to use optimize, i.e. how can we make the
optimize much faster and use lesser memory?
3) Is there a way to partition the indexes using Lucene? Let's say we
partition daily, so we have to optimize only the daily indexes and not
the whole thing.

Our mergefactor=200 and maxMergeDocs=99999

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 06:38:41 2008
Return-Path: <java-user-return-32095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54241 invoked from network); 20 Jan 2008 06:38:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 06:38:41 -0000
Received: (qmail 58550 invoked by uid 500); 20 Jan 2008 06:38:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58511 invoked by uid 500); 20 Jan 2008 06:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58500 invoked by uid 99); 20 Jan 2008 06:38:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 22:38:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 06:37:59 +0000
Received: (qmail 591 invoked by uid 60001); 20 Jan 2008 06:38:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=L2+qIs3bxSh9UX+uWgPF5hex/Vrj2sbS8q5Fxb2NCJPEU9+J1iVWPdtwkxJ4gkXVcZ8dFbRhWiy4A5n28LmusBAFkty6eC81qFraXQVlg6NOJ28ctx4tzzVLd4rAwhO+Wc1yImw4hTuzABn3ZpUDPLyqkr+jEI0ug20lsJjIJc4=;
X-YMail-OSG: effE.tsVM1mZSht5.lZrahbUJX_D.WLlFqolzb0Tk62KjiGEfj3_XVdzsglKDNBjRLpz_kYrFJE2UQK5RwBcqN8TL1IcIMeBhRNALFkIl48G4rdUtr8-
Received: from [72.231.9.236] by web50301.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 22:38:03 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 22:38:03 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Inverted search / Search on profilenet
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <47161.99362.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

That's what the MemoryIndex in Lucene's contrib/ does.  I tested it with a =
very fast incoming document stream (live blog posts from around the planet)=
 and it held up well in my limited testing.=0A=0AOtis=0A--=0ASematext -- ht=
tp://sematext.com/ -- Lucene - Solr - Nutch=0A=0A----- Original Message ---=
-=0AFrom: Mark Miller <markrmiller@gmail.com>=0ATo: java-user@lucene.apache=
.org=0ASent: Thursday, January 17, 2008 7:57:38 AM=0ASubject: Re: Inverted =
search / Search on profilenet=0A=0AVerity, autonomy, whatever, has a what t=
hey call a reverse query system=0A =0Acalled profilenet. A profile is just =
a query (or I guess more than one =0Aquery?) and you can setup a bunch of t=
hem. Then you supply the document=0A =0Aand you will get the matching queri=
es as well as a score. They say its =0Athe opposite of doing a search with =
a query and getting back docs. =0AInstead you do a search with a doc and ge=
t back these queries. They =0Aclaim it can be used for things like taxonomy=
/classification among=0A other =0Athings. I don't know how true this is to =
a real reverse query system as=0A =0Athat would seem to be kind of slow -- =
my guess is its a bit of an =0Aapproximation.=0A=0A- Mark=0A=0AEndre St=F8l=
svik wrote:=0A>=0A> May I ask: What IS a profilenet? I ask since this obvio=
usly is =0A> something that you two hit off on right away, while I haven't =
heard=0A of..!=0A>=0A>=0A> Thanks,=0A> Endre.=0A>=0A> ---------------------=
------------------------------------------------=0A> To unsubscribe, e-mail=
: java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-ma=
il: java-user-help@lucene.apache.org=0A>=0A>=0A=0A-------------------------=
--------------------------------------------=0ATo unsubscribe, e-mail: java=
-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java=
-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 06:42:30 2008
Return-Path: <java-user-return-32096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54617 invoked from network); 20 Jan 2008 06:42:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 06:42:30 -0000
Received: (qmail 60426 invoked by uid 500); 20 Jan 2008 06:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60382 invoked by uid 500); 20 Jan 2008 06:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60371 invoked by uid 99); 20 Jan 2008 06:42:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 22:42:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 06:41:46 +0000
Received: (qmail 76369 invoked by uid 60001); 20 Jan 2008 06:41:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=b/S3eXX3xSaygpYzqlxc9lkhNz7xAtOVDyaiBimRarfJCQ88n18tz1GFtdsfwvFfoN7rj9VoPOpcCzJquY+Sz6FU3OMOMpaGhBHR/P87d/oCL3LVZP4miR1U27PgYMsnAVIIPl/03FXdVm0KxLBWia+wtdtiRdgKG+25yD2M07Y=;
X-YMail-OSG: _cnu83IVM1kvSavSc.wJHsVyIuc_XMo.Lg3H9Xz3X6KSE4EPBle7GT6Ja9VNxT7EIJDLbSitgOSMmrMesBFPivGF1dPB9uxlAJDVkmFSYoxT8o49PFMkD2ZEOspSEN2QtMzUKulbjrE.xcA-
Received: from [72.231.9.236] by web50310.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 22:41:51 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 22:41:51 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Open source Arabic stemmer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <554948.74878.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The name is AraMorph.  I believe that's the only free Arabic (morphological) analyzer and it is indeed GPL.
I've used it on a few occasions and it seems to work well.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Sent: Wednesday, January 16, 2008 8:59:55 PM
Subject: Re: Open source Arabic stemmer

Try searching this list for Arabic Stemmer.  I seem to recall one  
under a GPL license.  Also try Googling "arabic Lucene analyzer"

-Grant

On Jan 16, 2008, at 1:21 PM, Liaqat Ali wrote:

> Hi
>
> Kindly tell me about some open source Arabic Stemmer which can be  
> used with
> Lucene.
>
> Regards,
> Liaqat Ali

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 06:48:00 2008
Return-Path: <java-user-return-32097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55672 invoked from network); 20 Jan 2008 06:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 06:47:59 -0000
Received: (qmail 64698 invoked by uid 500); 20 Jan 2008 06:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64654 invoked by uid 500); 20 Jan 2008 06:47:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64643 invoked by uid 99); 20 Jan 2008 06:47:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 22:47:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 06:47:16 +0000
Received: (qmail 16003 invoked by uid 60001); 20 Jan 2008 06:47:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=bU2E2RyxBd6yW5P7J2icqmUGfenbbOZoPa6VpFU6gofZnsFDV0H0hVm9uj8/gZavQ0MsiA25Aw1Nj1L16hkd0EVfOWjS0dYX1CDXGAYC74tHnHGHzFVpS7+HC1z01XwPhdaPtVgtQRorjqF+y+kC9Sph5ZtSUE3JaA5SbHaci6o=;
X-YMail-OSG: LQEwoPgVM1m5wMj4UHWApwDWNy1Eq_gj3GkI99MljwiPn2xXqhdmIsBjNdop0dOhsSg6Je_GUQPTrn.h5yPQn_0mAKA250j1arhl33V7e3ojjsH._WopNw--
Received: from [72.231.9.236] by web50303.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 22:47:20 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 22:47:20 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexWriter#addIndexes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <57846.14302.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Genau!  Indices are simply merged on disk, their content is not re-analyzed.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: "spring@gmx.eu" <spring@gmx.eu>
To: java-user@lucene.apache.org
Sent: Wednesday, January 16, 2008 7:48:27 AM
Subject: IndexWriter#addIndexes

Hi,

looking into the code of IndexMergeTool I saw this:

IndexWriter writer = new IndexWriter(mergedIndex, new SimpleAnalyzer(),
true);

Then the indexes are added to this new index.

My question is:

How does the Analyzer of this IndexWriter instance effect the merge
 process?

It seems that is doesn't matter, right?

Thank you.


Complete source of IndexMergeTool:

    public static void main(String args[]) throws IOException {
        if (args.length < 3) {
            System.err.println("Usage: IndexMergeTool
<mergedIndex> <index1> <index2> [index3] ...");
            System.exit(1);
        }
        File mergedIndex = new File(args[0]);
        IndexWriter writer = new IndexWriter(mergedIndex, new
SimpleAnalyzer(), true);
        Directory indexes[] = new Directory[args.length - 1];
        for (int i = 1; i < args.length; i++)
            indexes[i - 1] = FSDirectory.getDirectory(args[i],
false);

        System.out.println("Merging...");
        writer.addIndexes(indexes);
        System.out.println("Optimizing...");
        writer.optimize();
        writer.close();
        System.out.println("Done.");
    }
}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 07:05:36 2008
Return-Path: <java-user-return-32098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59841 invoked from network); 20 Jan 2008 07:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 07:05:36 -0000
Received: (qmail 73742 invoked by uid 500); 20 Jan 2008 07:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73477 invoked by uid 500); 20 Jan 2008 07:05:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73466 invoked by uid 99); 20 Jan 2008 07:05:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jan 2008 23:05:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 20 Jan 2008 07:05:05 +0000
Received: (qmail 18747 invoked by uid 60001); 20 Jan 2008 07:04:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dBEOAkK++cYEWNovaiotEB1C6VDQbk0rvbm2C8PzaXPby5kXXGyc1szwsVwGkIDxoCNHN61/W+MOmcCo6LTBjnzA72UagKuzHS9lkfnVhu5gjR4EkLsoCL2ubA59hBJ55bGjGlaxuNGKm2YmQ+qHzpIXshDRZkkJz1zUjHmOq9w=;
X-YMail-OSG: ZWBP4ycVM1mgMOVhh2I3U2OzzQJjlyAi.qrACf1mRLAKGpuv0ol7qe9Ym06IA33miciIrM0CJ5kDKT2Hed4bu9zqgvsWF.8eyuhEznIGXomMy9_pstFMWZ6YL8xhfnLtusFsqOzZwskbu.I-
Received: from [72.231.9.236] by web50301.mail.re2.yahoo.com via HTTP; Sat, 19 Jan 2008 23:04:56 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Sat, 19 Jan 2008 23:04:56 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per IndexReader?)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <332767.18403.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

This is great and valuable information, Toke(n)!
Just the other day we recommended this multi-IndexSearcher to somebody concerned with low QPS rates their benchmarks revealed.  They were hitting their index with a good number of threads and hitting synchronized blocks in Lucene.  Multiple searchers is one way around that.  Also, your sweet spot of 3 makes sense - keeps all of your cores fully busy.

You are our main SSD info supplier -- keep it coming! :)  And let us know what numbers you get for 2.2 and 2.3, please.

Thanks,
Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Toke Eskildsen <te@statsbiblioteket.dk>
To: java-user@lucene.apache.org
Sent: Thursday, January 17, 2008 5:31:56 AM
Subject: Multiple searchers (Was: CachingWrapperFilter: why cache per IndexReader?)

On Fri, 2008-01-11 at 11:34 +0100, Toke Eskildsen wrote:
> As for shared searcher vs. individual searchers, there was just a
> slight penalty for using individual searchers.

Whoops! Seems like I need better QA for my test-code. I didn't use
individual searchers for each thread when I thought I was. The slight
penalty wrongly observed must have been due to measurement variations.

With the corrected test, some interesting observations about our index
can be made, which will definitely affect our configuration. In the
following, the queries/second is an average over 350.000 queries.
For each query, a search is performed and the content of a specific
field is extracted for the first 20 hits.

== System-summary ==
Dual-core Intel Xeon 5148 2.3 GHz, 8 GB RAM, Linux, Lucene 2.1, 37
 GB/10
million documents index, queries taken from production system logs.

== Conventional harddisks (2 * 15000 RPM in software RAID 1) ==
1 thread,  1 searcher:  109 queries/sec
2 threads, 1 searcher:  118 queries/sec
2 threads, 2 searchers: 157 queries/sec
3 threads, 1 searcher:  111 queries/sec
3 threads, 3 searchers: 177 queries/sec
4 threads, 1 searcher:  108 queries/sec
4 threads, 4 searchers: 169 queries/sec

== Solid State Drives (2 * 32 GB Samsung in software RAID 0) ==
1 thread,  1 searcher:  193 queries/sec
2 threads, 1 searcher:  295 queries/sec
2 threads, 2 searchers: 357 queries/sec
3 threads, 1 searcher:  197 queries/sec
3 threads, 3 searchers: 369 queries/sec
4 threads, 1 searcher:  192 queries/sec
4 threads, 4 searchers: 302 queries/sec

Graphs can be viewed at http://wiki.statsbiblioteket.dk/summa/Hardware

For our setup it seems that the usual avoid-multiple-searchers advice
 is
not valid, neither for conventional harddisks, nor Solid State Drives.
The optimal configuration for our dual-core test machine is three
threads with individual searchers. The obvious question is whether this
can be extended to other cases.

> As for threading, I noticed something strange: On the dual-core
> machine, two threads gave better performance than one, while 4
 threads
> gave the same performance as one.

As can be seen above, this strange picture is consistent. 1, 3 and 4
threads with shared searcher performs the same, independent of which
storage the machine uses, while 2 threads performs markedly better.

I've started the same test-suite for Lucene 2.2 and 2.3RC2. It should
be finished in a day or two.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 10:44:50 2008
Return-Path: <java-user-return-32099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10811 invoked from network); 20 Jan 2008 10:44:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 10:44:49 -0000
Received: (qmail 63645 invoked by uid 500); 20 Jan 2008 10:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63616 invoked by uid 500); 20 Jan 2008 10:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63605 invoked by uid 99); 20 Jan 2008 10:44:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 02:44:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.244] (HELO ag-out-0708.google.com) (72.14.246.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 10:44:05 +0000
Received: by ag-out-0708.google.com with SMTP id 5so1036141agb.11
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 02:44:08 -0800 (PST)
Received: by 10.100.202.9 with SMTP id z9mr11859629anf.80.1200825848625;
        Sun, 20 Jan 2008 02:44:08 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 29sm9559680wrl.18.2008.01.20.02.44.08
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 20 Jan 2008 02:44:08 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <332767.18403.qm@web50301.mail.re2.yahoo.com>
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per IndexReader?)
Date: Sun, 20 Jan 2008 05:44:28 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


These results are very interesting.  With 3 threads on SSD your  
searches run 87% faster if you use 3 IndexSearchers instead of  
sharing a single one.

This means, for your test, there are some crazy synchronization  
bottlenecks when searching, which I think we should ferret out and fix.

Have you done any profiling to understand where the threads are  
waiting when you share one IndexSearcher?  EG YourKit can tell you  
where the threads are waiting...

I know there is synchronization used when reading bytes from the  
underlying file descriptor.  We've investigated options to remove  
that (https://issues.apache.org/jira/browse/LUCENE-753) but those  
options seemed to hurt single threaded performance.  I wonder if the  
patch on that issue closes some of this 87% performance loss?

Does anyone know of other synchronization bottlenecks in searching?

Mike

Otis Gospodnetic wrote:

> This is great and valuable information, Toke(n)!
> Just the other day we recommended this multi-IndexSearcher to  
> somebody concerned with low QPS rates their benchmarks revealed.   
> They were hitting their index with a good number of threads and  
> hitting synchronized blocks in Lucene.  Multiple searchers is one  
> way around that.  Also, your sweet spot of 3 makes sense - keeps  
> all of your cores fully busy.
>
> You are our main SSD info supplier -- keep it coming! :)  And let  
> us know what numbers you get for 2.2 and 2.3, please.
>
> Thanks,
> Otis
>
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Toke Eskildsen <te@statsbiblioteket.dk>
> To: java-user@lucene.apache.org
> Sent: Thursday, January 17, 2008 5:31:56 AM
> Subject: Multiple searchers (Was: CachingWrapperFilter: why cache  
> per IndexReader?)
>
> On Fri, 2008-01-11 at 11:34 +0100, Toke Eskildsen wrote:
>> As for shared searcher vs. individual searchers, there was just a
>> slight penalty for using individual searchers.
>
> Whoops! Seems like I need better QA for my test-code. I didn't use
> individual searchers for each thread when I thought I was. The slight
> penalty wrongly observed must have been due to measurement variations.
>
> With the corrected test, some interesting observations about our index
> can be made, which will definitely affect our configuration. In the
> following, the queries/second is an average over 350.000 queries.
> For each query, a search is performed and the content of a specific
> field is extracted for the first 20 hits.
>
> == System-summary ==
> Dual-core Intel Xeon 5148 2.3 GHz, 8 GB RAM, Linux, Lucene 2.1, 37
>  GB/10
> million documents index, queries taken from production system logs.
>
> == Conventional harddisks (2 * 15000 RPM in software RAID 1) ==
> 1 thread,  1 searcher:  109 queries/sec
> 2 threads, 1 searcher:  118 queries/sec
> 2 threads, 2 searchers: 157 queries/sec
> 3 threads, 1 searcher:  111 queries/sec
> 3 threads, 3 searchers: 177 queries/sec
> 4 threads, 1 searcher:  108 queries/sec
> 4 threads, 4 searchers: 169 queries/sec
>
> == Solid State Drives (2 * 32 GB Samsung in software RAID 0) ==
> 1 thread,  1 searcher:  193 queries/sec
> 2 threads, 1 searcher:  295 queries/sec
> 2 threads, 2 searchers: 357 queries/sec
> 3 threads, 1 searcher:  197 queries/sec
> 3 threads, 3 searchers: 369 queries/sec
> 4 threads, 1 searcher:  192 queries/sec
> 4 threads, 4 searchers: 302 queries/sec
>
> Graphs can be viewed at http://wiki.statsbiblioteket.dk/summa/Hardware
>
> For our setup it seems that the usual avoid-multiple-searchers advice
>  is
> not valid, neither for conventional harddisks, nor Solid State Drives.
> The optimal configuration for our dual-core test machine is three
> threads with individual searchers. The obvious question is whether  
> this
> can be extended to other cases.
>
>> As for threading, I noticed something strange: On the dual-core
>> machine, two threads gave better performance than one, while 4
>  threads
>> gave the same performance as one.
>
> As can be seen above, this strange picture is consistent. 1, 3 and 4
> threads with shared searcher performs the same, independent of which
> storage the machine uses, while 2 threads performs markedly better.
>
> I've started the same test-suite for Lucene 2.2 and 2.3RC2. It should
> be finished in a day or two.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 11:43:33 2008
Return-Path: <java-user-return-32100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21351 invoked from network); 20 Jan 2008 11:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 11:43:33 -0000
Received: (qmail 94912 invoked by uid 500); 20 Jan 2008 11:43:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94584 invoked by uid 500); 20 Jan 2008 11:43:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94573 invoked by uid 99); 20 Jan 2008 11:43:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 03:43:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 11:42:50 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3341738wah.11
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 03:42:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=sXK/xhg+u4StHXJE/ADOB63KKh2rgSzbQrXwoTzQLvg=;
        b=PtfU9oo2o35pMypT2x5gNs5zSkZFXWytF08gW+lmV9FCXToiHunbjvzODsZmlB0OL4n6Z3LAjPRJOL2rExQa81CxqBDs2lz34E/jzpKydFNE25QcUJNWWYoMHHRoLnzvn1utpzRGN7ZfItyFIS77jSIjJXqCGzcPYygzZYsJXfo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VS8wv6vMyup3zkQBOLuP7SGq+/GUobQVqZVUIOkWQEUUq5km8ZUobdZHpC38lry8304Dj+CTOXwu986s4XhWpVBmxDok/dytFoT+0GM4kEBv2lsEd9kS3Cyxl7mEDNfvqdxInkBSWYTc1RyH1RtKVDT8cZGY9f7ZULVEQNZV+2g=
Received: by 10.114.60.19 with SMTP id i19mr3594045waa.142.1200829376160;
        Sun, 20 Jan 2008 03:42:56 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Sun, 20 Jan 2008 03:42:56 -0800 (PST)
Message-ID: <a206fb7e0801200342o616f1a75g7d7a99a59009a641@mail.gmail.com>
Date: Sun, 20 Jan 2008 03:42:56 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Optimize for large index size
In-Reply-To: <919348.51422.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <919348.51422.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

my maxBufferedDocs  is 1000, do you recommend bigger than that? What's
a good number for this for a very high indexing rate (10K new
documents every min).


On Jan 19, 2008 10:30 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> In addition to what Mike already said:
>
> maxMergeDocs=99999 -- do you really mean maxMergeDocs and not maxBufferedDocs?
>
> Larg(er) maxBufferedDocs will speed up indexing.
>
> Otis
>
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: vivek sar <vivextra@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, January 18, 2008 4:31:26 AM
> Subject: Optimize for large index size
>
> Hi,
>
>   We are using Lucene 2.2. We have an index of size 70G (within 3-4
> days) and growing. We run optimize pretty frequently (once every hour
> - due to large number of index updates every min - can be up to 100K
> new documents every min). I have seen every now and then the optimize
> takes 3-4 hours to complete and up to 8 G memory (our limit). This
> makes the whole system slow. Few questions,
>
> 1) Is there any alternative to optimize? That is, can we do without
> optimize and still have our search fast?
> 2) What's the best way to use optimize, i.e. how can we make the
> optimize much faster and use lesser memory?
> 3) Is there a way to partition the indexes using Lucene? Let's say we
> partition daily, so we have to optimize only the daily indexes and not
> the whole thing.
>
> Our mergefactor=200 and maxMergeDocs=99999
>
> Thanks,
> -vivek
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 12:53:30 2008
Return-Path: <java-user-return-32101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36097 invoked from network); 20 Jan 2008 12:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 12:53:30 -0000
Received: (qmail 27508 invoked by uid 500); 20 Jan 2008 12:53:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27487 invoked by uid 500); 20 Jan 2008 12:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27476 invoked by uid 99); 20 Jan 2008 12:53:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 04:53:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.242] (HELO ag-out-0708.google.com) (72.14.246.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 12:52:46 +0000
Received: by ag-out-0708.google.com with SMTP id 5so1051212agb.11
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 04:52:50 -0800 (PST)
Received: by 10.150.156.9 with SMTP id d9mr1822608ybe.116.1200833569649;
        Sun, 20 Jan 2008 04:52:49 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 29sm9746396wrl.18.2008.01.20.04.52.48
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 20 Jan 2008 04:52:49 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <a206fb7e0801200342o616f1a75g7d7a99a59009a641@mail.gmail.com>
References: <919348.51422.qm@web50309.mail.re2.yahoo.com> <a206fb7e0801200342o616f1a75g7d7a99a59009a641@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5D7706BF-266E-4EE4-882F-3CDEBDAAE42C@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Optimize for large index size
Date: Sun, 20 Jan 2008 07:53:08 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


On upgrading to 2.3, it's best to flush by RAM  
(writer.setRAMBufferSizeMB) instead of document count.

Generally, the more RAM the better, to a point. Though you should  
also be sure not to use so much RAM that your JVM must GC too often  
or hits OOM error, or your machine starts swapping.

Mike

vivek sar wrote:

> my maxBufferedDocs  is 1000, do you recommend bigger than that? What's
> a good number for this for a very high indexing rate (10K new
> documents every min).
>
>
> On Jan 19, 2008 10:30 PM, Otis Gospodnetic  
> <otis_gospodnetic@yahoo.com> wrote:
>> In addition to what Mike already said:
>>
>> maxMergeDocs=99999 -- do you really mean maxMergeDocs and not  
>> maxBufferedDocs?
>>
>> Larg(er) maxBufferedDocs will speed up indexing.
>>
>> Otis
>>
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: vivek sar <vivextra@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Friday, January 18, 2008 4:31:26 AM
>> Subject: Optimize for large index size
>>
>> Hi,
>>
>>   We are using Lucene 2.2. We have an index of size 70G (within 3-4
>> days) and growing. We run optimize pretty frequently (once every hour
>> - due to large number of index updates every min - can be up to 100K
>> new documents every min). I have seen every now and then the optimize
>> takes 3-4 hours to complete and up to 8 G memory (our limit). This
>> makes the whole system slow. Few questions,
>>
>> 1) Is there any alternative to optimize? That is, can we do without
>> optimize and still have our search fast?
>> 2) What's the best way to use optimize, i.e. how can we make the
>> optimize much faster and use lesser memory?
>> 3) Is there a way to partition the indexes using Lucene? Let's say we
>> partition daily, so we have to optimize only the daily indexes and  
>> not
>> the whole thing.
>>
>> Our mergefactor=200 and maxMergeDocs=99999
>>
>> Thanks,
>> -vivek
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 14:47:15 2008
Return-Path: <java-user-return-32102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62327 invoked from network); 20 Jan 2008 14:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 14:47:15 -0000
Received: (qmail 94993 invoked by uid 500); 20 Jan 2008 14:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94963 invoked by uid 500); 20 Jan 2008 14:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94952 invoked by uid 99); 20 Jan 2008 14:46:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 06:46:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 14:46:31 +0000
Received: by py-out-1112.google.com with SMTP id a73so2046229pye.9
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 06:46:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=GZzUPNRIsUjL7RPYhb3sxtezZEIdmrUBhuK5N81o4ew=;
        b=dWUX/aS3FqMHrBZyxvqhIkU9m4PT8muEfdKAL8GuGO/U6Msei9AGkPgCzQLoFAFDxA/wU524VWHJ7m98jole3kkO7O4S2fiJ/eZTnc10o+gQX1jGuvsCYct8Rx2HC5wM9gflV3pUAoA8er41Zcjl1H7dzHSPX17RsDhFJNtAlE0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=UxqJz6zNaRn2fi7HqT6DyYeaEjSfa+p2GunWrrQg9GCQdHhUDfIQPknDVUjtYBYUXExMncxqB0J/BBZ7wuhF3bNJUKxgl65Eio7JOhqAcEvejOLJ1XLIX57Id3PrY9T+M19bWbbwkQ35v6R7jmfILpM1GW/jFSSvMhKMnuHwu0M=
Received: by 10.64.249.20 with SMTP id w20mr12307392qbh.44.1200840394386;
        Sun, 20 Jan 2008 06:46:34 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f13sm4536463qba.20.2008.01.20.06.46.32
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 20 Jan 2008 06:46:32 -0800 (PST)
Message-ID: <47935EC1.3040707@gmail.com>
Date: Sun, 20 Jan 2008 09:46:25 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
 IndexReader?)
References: <332767.18403.qm@web50301.mail.re2.yahoo.com> <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
In-Reply-To: <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Anyone tried using this on Lucene yet? 
http://www.alphaworks.ibm.com/tech/jla

Michael McCandless wrote:
>
> These results are very interesting.  With 3 threads on SSD your 
> searches run 87% faster if you use 3 IndexSearchers instead of sharing 
> a single one.
>
> This means, for your test, there are some crazy synchronization 
> bottlenecks when searching, which I think we should ferret out and fix.
>
> Have you done any profiling to understand where the threads are 
> waiting when you share one IndexSearcher?  EG YourKit can tell you 
> where the threads are waiting...
>
> I know there is synchronization used when reading bytes from the 
> underlying file descriptor.  We've investigated options to remove that 
> (https://issues.apache.org/jira/browse/LUCENE-753) but those options 
> seemed to hurt single threaded performance.  I wonder if the patch on 
> that issue closes some of this 87% performance loss?
>
> Does anyone know of other synchronization bottlenecks in searching?
>
> Mike
>
> Otis Gospodnetic wrote:
>
>> This is great and valuable information, Toke(n)!
>> Just the other day we recommended this multi-IndexSearcher to 
>> somebody concerned with low QPS rates their benchmarks revealed.  
>> They were hitting their index with a good number of threads and 
>> hitting synchronized blocks in Lucene.  Multiple searchers is one way 
>> around that.  Also, your sweet spot of 3 makes sense - keeps all of 
>> your cores fully busy.
>>
>> You are our main SSD info supplier -- keep it coming! :)  And let us 
>> know what numbers you get for 2.2 and 2.3, please.
>>
>> Thanks,
>> Otis
>>
>> -- 
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>> ----- Original Message ----
>> From: Toke Eskildsen <te@statsbiblioteket.dk>
>> To: java-user@lucene.apache.org
>> Sent: Thursday, January 17, 2008 5:31:56 AM
>> Subject: Multiple searchers (Was: CachingWrapperFilter: why cache per 
>> IndexReader?)
>>
>> On Fri, 2008-01-11 at 11:34 +0100, Toke Eskildsen wrote:
>>> As for shared searcher vs. individual searchers, there was just a
>>> slight penalty for using individual searchers.
>>
>> Whoops! Seems like I need better QA for my test-code. I didn't use
>> individual searchers for each thread when I thought I was. The slight
>> penalty wrongly observed must have been due to measurement variations.
>>
>> With the corrected test, some interesting observations about our index
>> can be made, which will definitely affect our configuration. In the
>> following, the queries/second is an average over 350.000 queries.
>> For each query, a search is performed and the content of a specific
>> field is extracted for the first 20 hits.
>>
>> == System-summary ==
>> Dual-core Intel Xeon 5148 2.3 GHz, 8 GB RAM, Linux, Lucene 2.1, 37
>>  GB/10
>> million documents index, queries taken from production system logs.
>>
>> == Conventional harddisks (2 * 15000 RPM in software RAID 1) ==
>> 1 thread,  1 searcher:  109 queries/sec
>> 2 threads, 1 searcher:  118 queries/sec
>> 2 threads, 2 searchers: 157 queries/sec
>> 3 threads, 1 searcher:  111 queries/sec
>> 3 threads, 3 searchers: 177 queries/sec
>> 4 threads, 1 searcher:  108 queries/sec
>> 4 threads, 4 searchers: 169 queries/sec
>>
>> == Solid State Drives (2 * 32 GB Samsung in software RAID 0) ==
>> 1 thread,  1 searcher:  193 queries/sec
>> 2 threads, 1 searcher:  295 queries/sec
>> 2 threads, 2 searchers: 357 queries/sec
>> 3 threads, 1 searcher:  197 queries/sec
>> 3 threads, 3 searchers: 369 queries/sec
>> 4 threads, 1 searcher:  192 queries/sec
>> 4 threads, 4 searchers: 302 queries/sec
>>
>> Graphs can be viewed at http://wiki.statsbiblioteket.dk/summa/Hardware
>>
>> For our setup it seems that the usual avoid-multiple-searchers advice
>>  is
>> not valid, neither for conventional harddisks, nor Solid State Drives.
>> The optimal configuration for our dual-core test machine is three
>> threads with individual searchers. The obvious question is whether this
>> can be extended to other cases.
>>
>>> As for threading, I noticed something strange: On the dual-core
>>> machine, two threads gave better performance than one, while 4
>>  threads
>>> gave the same performance as one.
>>
>> As can be seen above, this strange picture is consistent. 1, 3 and 4
>> threads with shared searcher performs the same, independent of which
>> storage the machine uses, while 2 threads performs markedly better.
>>
>> I've started the same test-suite for Lucene 2.2 and 2.3RC2. It should
>> be finished in a day or two.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 14:49:31 2008
Return-Path: <java-user-return-32103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62957 invoked from network); 20 Jan 2008 14:49:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 14:49:31 -0000
Received: (qmail 97235 invoked by uid 500); 20 Jan 2008 14:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97205 invoked by uid 500); 20 Jan 2008 14:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97194 invoked by uid 99); 20 Jan 2008 14:49:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 06:49:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 14:48:49 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1818065fga.27
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 06:48:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=DE4Mfg9M2eDK9M6e7H8jbbmN8R1CsXiZMlsSZP1+Dag=;
        b=d4ABh4SiW+jOmNlQ9yua2C+2mp1/i9HnElSTvJCIFblx4pW2ePhqy75tBu4blE/AI2q5e6O1FEnzdaoXvTHX6TmUUheVNrrg3zr3wFuQkVxvlNONoOaq59VNWG//zZyWTIRgw+mg3qj9rw2RHMc28qryT1aW4nv2yS4+aAFxCaA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=g0VCGZDA8iHRbvPiVHUBz0JBLl1/Ihr5ECb45C+vShlN4P1w3EEoaX8yAWFt+VO/PA0/HWT9zboR6iVWAiGwYdz3Csvh5ZngU6AOVq4MX8BT8vbb9eY/Xllo5HPhEIGMDtS+L19QduZnVui3QtlsbssKqcPiLQMR0ratHBhFdpE=
Received: by 10.82.145.7 with SMTP id s7mr10331015bud.6.1200840534208;
        Sun, 20 Jan 2008 06:48:54 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 20 Jan 2008 06:48:54 -0800 (PST)
Message-ID: <359a92830801200648o1f6f5831j6b7f54cd9b5ad824@mail.gmail.com>
Date: Sun, 20 Jan 2008 09:48:54 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Flush by RAM size question...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9056_27105780.1200840534202"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9056_27105780.1200840534202
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

About flush by RAM

I was playing around with something similar on the 2.1 codebase
(roll-my-own)
and had the quirk of a possible *very* large incoming document. As in 250M.
So I had to put some logic in to try say, in effect, "if the incoming doc is
completely ridiculous, flush now". I should say that I was impressed that
we could even index the bloody thing at all!

Is this something that still needs to be guarded against in 2.3? In other
words, should the flush size be chosen so that (current RAM size + the
increment caused by the biggest doc possible in your data set) be < the
threshold?

You see the problem here. In the silliest case, where I have one HUGE
document
that barely fit in memory, I'd have to set the threshold very low, flushing
early
and often unless there was a "flush now" bit of logic for silly docs.

If you must know, the huge doc was the 23 volume "encyclopedia of Michigan
Civil War Volunteers". Yeah, yeah, sure. I could have done other things than
index it as a single doc, but since indexing speed wasn't really an issue
and
the PM wanted it that way and all it meant was that indexing took 6 hours
rather than, perhaps, 4 on a static data set, I didn't care enough to do
more work.

Don't get me wrong, having a flush by RAM size is sweet. And for any
reasonable
corpus, especially one with relatively constant input docs, it should be
very nice
indeed. I'm wondering about the outlier cases since I seem to run into them,
siiiggghh.
But "that's why they pay me the big bucks" <G>.

Thanks
Erick

------=_Part_9056_27105780.1200840534202--

From java-user-return-32104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 20 16:59:24 2008
Return-Path: <java-user-return-32104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65616 invoked from network); 20 Jan 2008 16:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2008 16:59:23 -0000
Received: (qmail 66521 invoked by uid 500); 20 Jan 2008 16:59:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66236 invoked by uid 500); 20 Jan 2008 16:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66224 invoked by uid 99); 20 Jan 2008 16:59:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 08:59:06 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 16:58:39 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1388649rvb.5
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 08:58:43 -0800 (PST)
Received: by 10.141.133.14 with SMTP id k14mr3863541rvn.127.1200848323537;
        Sun, 20 Jan 2008 08:58:43 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 38sm10181092wrl.14.2008.01.20.08.58.43
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 20 Jan 2008 08:58:43 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <359a92830801200648o1f6f5831j6b7f54cd9b5ad824@mail.gmail.com>
References: <359a92830801200648o1f6f5831j6b7f54cd9b5ad824@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <638F3AD9-3832-4B4D-B4E7-4A71FB7283C3@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Flush by RAM size question...
Date: Sun, 20 Jan 2008 11:59:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,

Yes, you do still need to guard against this case in 2.3.  IndexWriter
checks the RAM usage after each doc is processed and flushes when
that's over the limit.

However, the memory consumed by a very large doc should be quite a bit
less than before, because in 2.3 IndexWriter makes more more efficient
use of RAM.

Mike

Erick Erickson wrote:

> About flush by RAM
>
> I was playing around with something similar on the 2.1 codebase
> (roll-my-own)
> and had the quirk of a possible *very* large incoming document. As  
> in 250M.
> So I had to put some logic in to try say, in effect, "if the  
> incoming doc is
> completely ridiculous, flush now". I should say that I was  
> impressed that
> we could even index the bloody thing at all!
>
> Is this something that still needs to be guarded against in 2.3? In  
> other
> words, should the flush size be chosen so that (current RAM size + the
> increment caused by the biggest doc possible in your data set) be <  
> the
> threshold?
>
> You see the problem here. In the silliest case, where I have one HUGE
> document
> that barely fit in memory, I'd have to set the threshold very low,  
> flushing
> early
> and often unless there was a "flush now" bit of logic for silly docs.
>
> If you must know, the huge doc was the 23 volume "encyclopedia of  
> Michigan
> Civil War Volunteers". Yeah, yeah, sure. I could have done other  
> things than
> index it as a single doc, but since indexing speed wasn't really an  
> issue
> and
> the PM wanted it that way and all it meant was that indexing took 6  
> hours
> rather than, perhaps, 4 on a static data set, I didn't care enough  
> to do
> more work.
>
> Don't get me wrong, having a flush by RAM size is sweet. And for any
> reasonable
> corpus, especially one with relatively constant input docs, it  
> should be
> very nice
> indeed. I'm wondering about the outlier cases since I seem to run  
> into them,
> siiiggghh.
> But "that's why they pay me the big bucks" <G>.
>
> Thanks
> Erick


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 00:37:17 2008
Return-Path: <java-user-return-32105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64848 invoked from network); 21 Jan 2008 00:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 00:37:17 -0000
Received: (qmail 55626 invoked by uid 500); 21 Jan 2008 00:37:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55591 invoked by uid 500); 21 Jan 2008 00:37:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55580 invoked by uid 99); 21 Jan 2008 00:37:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 16:37:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 00:36:36 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1189815fkz.5
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 16:36:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oaLDJlrzwit5j6YTirIRdvgrmFNjA78Hg/rvctFj/1U=;
        b=xojm2Sp4HqmVWFrN5ZuTfFecq1ARhYBvDlQyvOkk6bs/2+AzNxEKgXxQo/a7Pc1z/mMba9Hy6uuawj1dU88POjIV6AjZ2nzQYSHeQevfVVueJLR/PJTnIMG6MGaAVpFI/YGnIUaDMWbirDFkiotWZtjz/6pYMp2HsiQda0I5GV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K3f3CiICU20zWHM6vutTDxJJ9fNVjQAT49s+g3IGLg3dF8e5bF9NybAySV7GcEA1TTkMGlKX5Mm8hd5ddycvRIu3flqugWWVlNX8y1JHZZ5mVCrqWV6q+Dv08nwOnEZcn35T0U3ZXVxSaPCga+BjEwV8ZGv2I1pmPGyskmwCAtY=
Received: by 10.82.105.13 with SMTP id d13mr11203043buc.30.1200875801772;
        Sun, 20 Jan 2008 16:36:41 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 20 Jan 2008 16:36:41 -0800 (PST)
Message-ID: <359a92830801201636s98f5f6bm1365a8c4c854b11d@mail.gmail.com>
Date: Sun, 20 Jan 2008 19:36:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Flush by RAM size question...
In-Reply-To: <638F3AD9-3832-4B4D-B4E7-4A71FB7283C3@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10086_6086071.1200875801768"
References: <359a92830801200648o1f6f5831j6b7f54cd9b5ad824@mail.gmail.com>
	 <638F3AD9-3832-4B4D-B4E7-4A71FB7283C3@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10086_6086071.1200875801768
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Michael:

Thanks, that's what I figured, but it's nice to have confirmed.

Erick

On Jan 20, 2008 11:59 AM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Hi Erick,
>
> Yes, you do still need to guard against this case in 2.3.  IndexWriter
> checks the RAM usage after each doc is processed and flushes when
> that's over the limit.
>
> However, the memory consumed by a very large doc should be quite a bit
> less than before, because in 2.3 IndexWriter makes more more efficient
> use of RAM.
>
> Mike
>
> Erick Erickson wrote:
>
> > About flush by RAM
> >
> > I was playing around with something similar on the 2.1 codebase
> > (roll-my-own)
> > and had the quirk of a possible *very* large incoming document. As
> > in 250M.
> > So I had to put some logic in to try say, in effect, "if the
> > incoming doc is
> > completely ridiculous, flush now". I should say that I was
> > impressed that
> > we could even index the bloody thing at all!
> >
> > Is this something that still needs to be guarded against in 2.3? In
> > other
> > words, should the flush size be chosen so that (current RAM size + the
> > increment caused by the biggest doc possible in your data set) be <
> > the
> > threshold?
> >
> > You see the problem here. In the silliest case, where I have one HUGE
> > document
> > that barely fit in memory, I'd have to set the threshold very low,
> > flushing
> > early
> > and often unless there was a "flush now" bit of logic for silly docs.
> >
> > If you must know, the huge doc was the 23 volume "encyclopedia of
> > Michigan
> > Civil War Volunteers". Yeah, yeah, sure. I could have done other
> > things than
> > index it as a single doc, but since indexing speed wasn't really an
> > issue
> > and
> > the PM wanted it that way and all it meant was that indexing took 6
> > hours
> > rather than, perhaps, 4 on a static data set, I didn't care enough
> > to do
> > more work.
> >
> > Don't get me wrong, having a flush by RAM size is sweet. And for any
> > reasonable
> > corpus, especially one with relatively constant input docs, it
> > should be
> > very nice
> > indeed. I'm wondering about the outlier cases since I seem to run
> > into them,
> > siiiggghh.
> > But "that's why they pay me the big bucks" <G>.
> >
> > Thanks
> > Erick
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10086_6086071.1200875801768--

From java-user-return-32106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 01:12:55 2008
Return-Path: <java-user-return-32106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74394 invoked from network); 21 Jan 2008 01:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 01:12:54 -0000
Received: (qmail 81085 invoked by uid 500); 21 Jan 2008 01:12:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80132 invoked by uid 500); 21 Jan 2008 01:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80120 invoked by uid 99); 21 Jan 2008 01:12:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 17:12:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of angelica@cnptia.embrapa.br designates 200.0.70.9 as permitted sender)
Received: from [200.0.70.9] (HELO plutao.cnptia.embrapa.br) (200.0.70.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 01:12:26 +0000
Received: from localhost (localhost.cnptia.embrapa.br [127.0.0.1])
	by plutao.cnptia.embrapa.br (Postfix) with ESMTP id 0FFC684611
	for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 23:13:29 -0200 (BRST)
X-Virus-Scanned: amavisd-new at cnptia.embrapa.br
Received: from plutao.cnptia.embrapa.br ([127.0.0.1])
	by localhost (plutao.cnptia.embrapa.br [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id PInHW1XnTKeL for <java-user@lucene.apache.org>;
	Sun, 20 Jan 2008 23:13:27 -0200 (BRST)
Received: from www.cnptia.embrapa.br (unknown [10.129.254.9])
	by plutao.cnptia.embrapa.br (Postfix) with ESMTP id B24C3845F4
	for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 23:13:27 -0200 (BRST)
Received: from 201.82.9.116
        (SquirrelMail authenticated user angelica)
        by www.cnptia.embrapa.br with HTTP;
        Sun, 20 Jan 2008 23:13:27 -0200 (BRST)
Message-ID: <3848.201.82.9.116.1200878007.squirrel@www.cnptia.embrapa.br>
Date: Sun, 20 Jan 2008 23:13:27 -0200 (BRST)
Subject: Boosting a query
From: angelica@cnptia.embrapa.br
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.13
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

I am trying to submit a query to Lucene with just one term trying to
understand how the boost of a term influences the final document score: for
 example "computer" and "computer^5" (using query.setBoost()). Lucene
returns the same documents with the same document score values for both
queries. When I look at searcher.explain() the explanation is the same for
both queries for each document.

In Similarity class I saw that the score function  score(q,d) has a
multiplying factor  t.getBoost() and then I thought that boosting a query
term would modify the final document score for the query. But it does not.
If the boost does not change the final document score what is it utility? I
think I am missing something.

Thanks,  Angelica.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 01:32:05 2008
Return-Path: <java-user-return-32107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81004 invoked from network); 21 Jan 2008 01:32:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 01:32:04 -0000
Received: (qmail 84524 invoked by uid 500); 21 Jan 2008 01:31:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84491 invoked by uid 500); 21 Jan 2008 01:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84480 invoked by uid 99); 21 Jan 2008 01:31:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jan 2008 17:31:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 01:31:24 +0000
Received: by py-out-1112.google.com with SMTP id a73so2250520pye.9
        for <java-user@lucene.apache.org>; Sun, 20 Jan 2008 17:31:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=7DmdtE0l59NTN+VjrTGwOlbJIyCSHgujLyKRpAIbWb0=;
        b=YWFskpXzVg7zGNGgm1dfGpJK7MXy8CD0M4OR5PzlTDbVoOi0/qtP93pomaW/pKzW8h9E8ZfuYGEQtXOrZR0zrkUDOoKQGOMjcolSO7rWKb8zLcNToQSGq7HqY/HtI5jKOu+WzVObLe/CUFqz3zHM79bkf7Ui/27gQwjhorEQa5Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=wIkTdxzm3zVYbpMeo0u21+J0iQF81MTEKLIP/DEQ0oYb1BigN7lISQ1FSrIRYIcIGgjOBiittQZaxoL84dAqKkRxj4SA5ixs1yrLZwuY8kfkJ5efOCSCfbY0/l4VKqXYc7ohW1Y15zZ4keX+9XzfFiWFA/YggYiHi7Z1TursvlE=
Received: by 10.142.106.18 with SMTP id e18mr2926922wfc.111.1200879088479;
        Sun, 20 Jan 2008 17:31:28 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Sun, 20 Jan 2008 17:31:28 -0800 (PST)
Message-ID: <c68e39170801201731s2e9bff50n8e5dcebec11d45cd@mail.gmail.com>
Date: Sun, 20 Jan 2008 20:31:28 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Boosting a query
In-Reply-To: <3848.201.82.9.116.1200878007.squirrel@www.cnptia.embrapa.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3848.201.82.9.116.1200878007.squirrel@www.cnptia.embrapa.br>
X-Google-Sender-Auth: ffbbe87486adf78e
X-Virus-Checked: Checked by ClamAV on apache.org

Boosts on query clauses are relative to other clauses.  To see
boosting really work try looking at
foo bar
  vs
foo bar^10

-Yonik

On Jan 20, 2008 8:13 PM,  <angelica@cnptia.embrapa.br> wrote:
> I am trying to submit a query to Lucene with just one term trying to
> understand how the boost of a term influences the final document score: for
>  example "computer" and "computer^5" (using query.setBoost()). Lucene
> returns the same documents with the same document score values for both
> queries. When I look at searcher.explain() the explanation is the same for
> both queries for each document.
>
> In Similarity class I saw that the score function  score(q,d) has a
> multiplying factor  t.getBoost() and then I thought that boosting a query
> term would modify the final document score for the query. But it does not.
> If the boost does not change the final document score what is it utility? I
> think I am missing something.
>
> Thanks,  Angelica.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 08:01:17 2008
Return-Path: <java-user-return-32108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79556 invoked from network); 21 Jan 2008 08:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 08:01:17 -0000
Received: (qmail 19107 invoked by uid 500); 21 Jan 2008 08:00:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19069 invoked by uid 500); 21 Jan 2008 08:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19058 invoked by uid 99); 21 Jan 2008 08:00:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 00:00:59 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 08:00:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JGra9-0000gt-K1
	for java-user@lucene.apache.org; Mon, 21 Jan 2008 00:00:37 -0800
Message-ID: <14992681.post@talk.nabble.com>
Date: Mon, 21 Jan 2008 00:00:37 -0800 (PST)
From: Fabrice Robini <fro@octo.com>
To: java-user@lucene.apache.org
Subject: Re: a "fair" similarity
In-Reply-To: <200608150220.26216@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fro@octo.com
References: <200608150220.26216@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I've tried this "fair" similarity with lucene 2.2 but it does not seems to
work.

I've attached the custom "MyFair" similarity to bith IndexWriter and
IndexSearcher.

Do you have any idea ?

Thanks a lot,

Fabrice


Daniel Naber-5 wrote:
> 
> Hi,
> 
> as some of you may have noticed, Lucene prefers shorter documents over 
> longer ones, i.e. shorter documents get a higher ranking, even if the 
> ratio "matched terms / total terms in document" is the same.
> 
> For example, take these two artificial documents:
> 
> doc1: x 2 3 4 5 6 7 8 9 10
> doc2: x x 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
> 
> When searching for "x" doc1 will get a higher ranking, even though "x" 
> makes up 1/10 of the terms in both documents.
> 
> Using this similarity implementation seems to "fix" that:
> 
> class MySim extends DefaultSimilarity {
>  
>   public float lengthNorm(String fieldName, int numTerms) {
>     return (float)(1.0 / numTerms);
>   }
>   
>   public float tf(float freq) {
>     return (float)freq;
>   }
> 
> }
> 
> It's basically just the default implementation with Math.sqrt() removed.
> Is 
> this the correct approach? Are there any problems to expect? I just tested 
> it with the documents cited above.
> 
> The use case is that I want to boost fields, e.g. "body:foo^2 title:blah". 
> This could lead to strange results if title is already preferred just 
> because it's shorter.
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/a-%22fair%22-similarity-tp5806739p14992681.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 09:20:39 2008
Return-Path: <java-user-return-32109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7738 invoked from network); 21 Jan 2008 09:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 09:20:39 -0000
Received: (qmail 26260 invoked by uid 500); 21 Jan 2008 09:20:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26231 invoked by uid 500); 21 Jan 2008 09:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26219 invoked by uid 99); 21 Jan 2008 09:20:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 01:20:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 09:19:57 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JUZ0059LLXE3L@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 21 Jan 2008 10:20:02 +0100 (MET)
Date: Mon, 21 Jan 2008 10:20:02 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
In-reply-to: <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, 2008-01-20 at 05:44 -0500, Michael McCandless wrote:
> These results are very interesting.  With 3 threads on SSD your  
> searches run 87% faster if you use 3 IndexSearchers instead of  
> sharing a single one.

That is my observation, yes. Please note that this is with Lucene 2.1.
I've tried with Lucene 2.3pr2 with the old index though. The relative
results are the same, although overall performance is quite a bit lower.

== Lucene 2.1 - Harddisks (2 * 15000 RPM in software RAID 1) ==
1 thread,  1 searcher:  109 queries/sec
2 threads, 1 searcher:  118 queries/sec
2 threads, 2 searchers: 157 queries/sec
3 threads, 1 searcher:  111 queries/sec
3 threads, 3 searchers: 177 queries/sec
4 threads, 1 searcher:  108 queries/sec
4 threads, 4 searchers: 169 queries/sec

== Lucene 2.1 - SSD (2 * 32 GB Samsung in software RAID 0) ==
1 thread,  1 searcher:  193 queries/sec
2 threads, 1 searcher:  295 queries/sec
2 threads, 2 searchers: 357 queries/sec
3 threads, 1 searcher:  197 queries/sec
3 threads, 3 searchers: 369 queries/sec
4 threads, 1 searcher:  192 queries/sec
4 threads, 4 searchers: 302 queries/sec

== Lucene 2.3pr2 - Harddisks (2 * 15000 RPM in software RAID 1) ==
1 thread,  1 searcher:   93 queries/sec
2 threads, 1 searcher:  112 queries/sec
2 threads, 2 searchers: 135 queries/sec
3 threads, 1 searcher:   96 queries/sec
3 threads, 3 searchers: 153 queries/sec
4 threads, 1 searcher:   98 queries/sec
4 threads, 4 searchers: 150 queries/sec

== Lucene 2.3pr2 - SSD (2 * 32 GB Samsung in software RAID 0) ==
1 thread,  1 searcher:  171 queries/sec
2 threads, 1 searcher:  261 queries/sec
2 threads, 2 searchers: 325 queries/sec
3 threads, 1 searcher:  185 queries/sec
3 threads, 3 searchers: 336 queries/sec
4 threads, 1 searcher:  182 queries/sec
4 threads, 4 searchers: 280 queries/sec

I don't know if the lower performance is because I'm using the old index
instead of generating a new one with Lucene 2.3pr2?

> Have you done any profiling to understand where the threads are  
> waiting when you share one IndexSearcher?

Not at all. The whole threads/searchers-thing in Lucene is quite new to
me - in our production system we use synchronized access to the searcher
with only one search at a time.

>  EG YourKit can tell you where the threads are waiting...

I'll be happy to investigate further. It'll have to wait until friday
though, if it involves more than a trivial amount of time. I'll also put
the (very simple) code online for review. Unfortunately I can't provide
neither the index, nor the queries as I'm not allowed to do so.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 13:32:44 2008
Return-Path: <java-user-return-32110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 121 invoked from network); 21 Jan 2008 13:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 13:32:43 -0000
Received: (qmail 26701 invoked by uid 500); 21 Jan 2008 13:32:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26556 invoked by uid 500); 21 Jan 2008 13:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26438 invoked by uid 99); 21 Jan 2008 13:32:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 05:32:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 13:32:04 +0000
Received: by nz-out-0506.google.com with SMTP id i28so981766nzi.5
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 05:32:08 -0800 (PST)
Received: by 10.142.109.16 with SMTP id h16mr3145661wfc.38.1200922327708;
        Mon, 21 Jan 2008 05:32:07 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id g5sm10715369wra.36.2008.01.21.05.32.07
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 21 Jan 2008 05:32:07 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
References: <332767.18403.qm@web50301.mail.re2.yahoo.com> <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com> <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per IndexReader?)
Date: Mon, 21 Jan 2008 08:32:28 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Toke Eskildsen wrote:

> On Sun, 2008-01-20 at 05:44 -0500, Michael McCandless wrote:
>> These results are very interesting.  With 3 threads on SSD your
>> searches run 87% faster if you use 3 IndexSearchers instead of
>> sharing a single one.
>
> That is my observation, yes. Please note that this is with Lucene 2.1.
> I've tried with Lucene 2.3pr2 with the old index though. The relative
> results are the same, although overall performance is quite a bit  
> lower.

Well that is not good news!!  From your results below, it looks like  
2.3 searching is 13.6% slower with hard disks and 8.9% slower with SSD.

We focused heavily on speeding up indexing in 2.3, but did not expect  
searching to slow down.

Please post the code you're using, and any details about the test.   
It seems like your test is a very long running test?

> == Lucene 2.1 - Harddisks (2 * 15000 RPM in software RAID 1) ==
> 1 thread,  1 searcher:  109 queries/sec
> 2 threads, 1 searcher:  118 queries/sec
> 2 threads, 2 searchers: 157 queries/sec
> 3 threads, 1 searcher:  111 queries/sec
> 3 threads, 3 searchers: 177 queries/sec
> 4 threads, 1 searcher:  108 queries/sec
> 4 threads, 4 searchers: 169 queries/sec
>
> == Lucene 2.1 - SSD (2 * 32 GB Samsung in software RAID 0) ==
> 1 thread,  1 searcher:  193 queries/sec
> 2 threads, 1 searcher:  295 queries/sec
> 2 threads, 2 searchers: 357 queries/sec
> 3 threads, 1 searcher:  197 queries/sec
> 3 threads, 3 searchers: 369 queries/sec
> 4 threads, 1 searcher:  192 queries/sec
> 4 threads, 4 searchers: 302 queries/sec
>
> == Lucene 2.3pr2 - Harddisks (2 * 15000 RPM in software RAID 1) ==
> 1 thread,  1 searcher:   93 queries/sec
> 2 threads, 1 searcher:  112 queries/sec
> 2 threads, 2 searchers: 135 queries/sec
> 3 threads, 1 searcher:   96 queries/sec
> 3 threads, 3 searchers: 153 queries/sec
> 4 threads, 1 searcher:   98 queries/sec
> 4 threads, 4 searchers: 150 queries/sec
>
> == Lucene 2.3pr2 - SSD (2 * 32 GB Samsung in software RAID 0) ==
> 1 thread,  1 searcher:  171 queries/sec
> 2 threads, 1 searcher:  261 queries/sec
> 2 threads, 2 searchers: 325 queries/sec
> 3 threads, 1 searcher:  185 queries/sec
> 3 threads, 3 searchers: 336 queries/sec
> 4 threads, 1 searcher:  182 queries/sec
> 4 threads, 4 searchers: 280 queries/sec
>
> I don't know if the lower performance is because I'm using the old  
> index
> instead of generating a new one with Lucene 2.3pr2?

I don't think that should cause the slowdown.  Though this was a good  
test of backwards compatibility on the index format!

>> Have you done any profiling to understand where the threads are
>> waiting when you share one IndexSearcher?
>
> Not at all. The whole threads/searchers-thing in Lucene is quite  
> new to
> me - in our production system we use synchronized access to the  
> searcher
> with only one search at a time.

OK

>>  EG YourKit can tell you where the threads are waiting...
>
> I'll be happy to investigate further. It'll have to wait until friday
> though, if it involves more than a trivial amount of time. I'll  
> also put
> the (very simple) code online for review. Unfortunately I can't  
> provide
> neither the index, nor the queries as I'm not allowed to do so.

OK

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 13:55:13 2008
Return-Path: <java-user-return-32111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10073 invoked from network); 21 Jan 2008 13:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 13:55:13 -0000
Received: (qmail 71295 invoked by uid 500); 21 Jan 2008 13:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71270 invoked by uid 500); 21 Jan 2008 13:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71259 invoked by uid 99); 21 Jan 2008 13:54:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 05:54:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 13:54:28 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1365819fkz.5
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 05:54:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=JmwDXFD5zi7ZYx2ff9OHT0hlBpzfJwXpLPT2gvV07Ds=;
        b=bpPVbP0FJpnY+X5pcW6u6BXJZyyBmZ/T/bFMnaC7cQLw2stCI6CRa2zF5KaxhIQCNZOUlFXcMcj0HWm2blPKrXDZ4BPSFiGOcIrP6PC+raRg2CwC6R6DKwxgwwb3GuHlFDVG49SpoB4W9nD4YZhK/MqP4ijPusQuC/f064/hfJI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yd8OHwn8AQMeFngjZWt0CY3kcFTzuEGQ8gJPuclXLgWj4hkOV7ZyH7ckedcPfnaGiHBlFZwcUCj31bnino1z978NiUq8iKS3wtUjtlwe5x6vnoTStegZKLpsIgDA5NDLQwNmxhxEbHMPVE+Elwnb5+YBpyyYK18J+Qj+g7cJ/3o=
Received: by 10.82.187.2 with SMTP id k2mr12358115buf.16.1200923672559;
        Mon, 21 Jan 2008 05:54:32 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Mon, 21 Jan 2008 05:54:32 -0800 (PST)
Message-ID: <1bcb7c7f0801210554g1cece510kf269c9ec1d3e2ab0@mail.gmail.com>
Date: Mon, 21 Jan 2008 15:54:32 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: delete a document from indexwriter
In-Reply-To: <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13442_1781403.1200923672555"
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com>
	 <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13442_1781403.1200923672555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Mike;

How about deleting by a compount term?

for example if I have a document with two fields srcId and dstId
and I want to delete the document where srcId=1 and dstId=2

right now there exists a IndexWriter.deleteDocuments(Term t) but with that I
can only delete lets say where srcId=something.

I am sure there is a workaround but I could not find it.

Best,

On Jan 19, 2008 1:07 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Good question....
>
> So far, this method has not been carried over to IndexWriter because
> in general it's not really safe, since there's no way to get an
> accurate docID from IndexWriter itself.
>
> You can't really "know" when IndexWriter does merges that compacts
> deletes and thus changes docIDs.  So, if you open a reader on the
> side, get a docID you want to delete, and then go and ask IndexWriter
> to delete that docID, you may in fact delete the wrong document.  In
> 2.3, where segment merges are now done with a background thread, it's
> even worse, because a merge could complete and be committed, thus
> changing docIDs, at any time...
>
> See complex discussion here:
>
>     http://markmail.org/message/wxqel3gd6cmavk5a
>
> As of 2.3, the low level infrastructure was added to IndexWriter for
> deleting by document ID, but this is not exposed publicly (this was a
> side effect of LUCENE-1112).  It's only used, internally, to delete a
> document if an exception is hit while indexing it.  In theory, you
> could then subclass IndexWriter and tap into this infrastructure to
> delete by docID, but, you're entering dangerous territory!
>
> Do you have a specific use case in mind here?  I think we'd like to
> make this option available someday in IndexWriter, but doing so now
> (when there is no way to get a "reliable" docID) seems too dangerous...
>
> Mike
>
> Cam Bazz wrote:
>
> > Hello,
> >
> > How do I delete a specific document from an indexwriter? I
> > understand there
> > is deleteDocuments(term) which deletes all the documents matching
> > the term.
> > But what if I want to delete a document that has more then one term in
> > specific. I can search the document with a boolean query, and then
> > get the
> > doc id.
> > I know that doc ids are temporary, but can I not use it for delete?
> >
> > IndexReader has a delete by doc id method, but I am not sure how to
> > use this
> > when using an indexwriter.
> >
> > Best,
> > C.B.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13442_1781403.1200923672555--

From java-user-return-32112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 14:28:46 2008
Return-Path: <java-user-return-32112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25749 invoked from network); 21 Jan 2008 14:28:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 14:28:45 -0000
Received: (qmail 13003 invoked by uid 500); 21 Jan 2008 14:28:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12532 invoked by uid 500); 21 Jan 2008 14:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12520 invoked by uid 99); 21 Jan 2008 14:28:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 06:28:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:28:01 +0000
Received: by nz-out-0506.google.com with SMTP id i28so996400nzi.5
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 06:28:05 -0800 (PST)
Received: by 10.143.8.10 with SMTP id l10mr3165200wfi.181.1200925685210;
        Mon, 21 Jan 2008 06:28:05 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id m6sm12229356wrm.1.2008.01.21.06.28.04
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 21 Jan 2008 06:28:04 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801210554g1cece510kf269c9ec1d3e2ab0@mail.gmail.com>
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com> <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com> <1bcb7c7f0801210554g1cece510kf269c9ec1d3e2ab0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A5BAB26F-2404-44B9-843F-B5B41B9E92C9@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: delete a document from indexwriter
Date: Mon, 21 Jan 2008 09:28:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


For this case, too, you will need to use an IndexReader, or use  
IndexSearcher to run that particular search and then delete the  
docIDs returned using the IndexReader.

Though, be sure to first iterate through all hits, gathering all  
docIDs.  And then in 2nd pass, do the deletions.  Otherwise you'll  
hit this issue:

     https://issues.apache.org/jira/browse/LUCENE-1096

(Unless you're using 2.3).

You can also use Solr, which provides "delete by query".

Mike

Cam Bazz wrote:

> Hello Mike;
>
> How about deleting by a compount term?
>
> for example if I have a document with two fields srcId and dstId
> and I want to delete the document where srcId=1 and dstId=2
>
> right now there exists a IndexWriter.deleteDocuments(Term t) but  
> with that I
> can only delete lets say where srcId=something.
>
> I am sure there is a workaround but I could not find it.
>
> Best,
>
> On Jan 19, 2008 1:07 PM, Michael McCandless  
> <lucene@mikemccandless.com>
> wrote:
>
>>
>> Good question....
>>
>> So far, this method has not been carried over to IndexWriter because
>> in general it's not really safe, since there's no way to get an
>> accurate docID from IndexWriter itself.
>>
>> You can't really "know" when IndexWriter does merges that compacts
>> deletes and thus changes docIDs.  So, if you open a reader on the
>> side, get a docID you want to delete, and then go and ask IndexWriter
>> to delete that docID, you may in fact delete the wrong document.  In
>> 2.3, where segment merges are now done with a background thread, it's
>> even worse, because a merge could complete and be committed, thus
>> changing docIDs, at any time...
>>
>> See complex discussion here:
>>
>>     http://markmail.org/message/wxqel3gd6cmavk5a
>>
>> As of 2.3, the low level infrastructure was added to IndexWriter for
>> deleting by document ID, but this is not exposed publicly (this was a
>> side effect of LUCENE-1112).  It's only used, internally, to delete a
>> document if an exception is hit while indexing it.  In theory, you
>> could then subclass IndexWriter and tap into this infrastructure to
>> delete by docID, but, you're entering dangerous territory!
>>
>> Do you have a specific use case in mind here?  I think we'd like to
>> make this option available someday in IndexWriter, but doing so now
>> (when there is no way to get a "reliable" docID) seems too  
>> dangerous...
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Hello,
>>>
>>> How do I delete a specific document from an indexwriter? I
>>> understand there
>>> is deleteDocuments(term) which deletes all the documents matching
>>> the term.
>>> But what if I want to delete a document that has more then one  
>>> term in
>>> specific. I can search the document with a boolean query, and then
>>> get the
>>> doc id.
>>> I know that doc ids are temporary, but can I not use it for delete?
>>>
>>> IndexReader has a delete by doc id method, but I am not sure how to
>>> use this
>>> when using an indexwriter.
>>>
>>> Best,
>>> C.B.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 14:31:18 2008
Return-Path: <java-user-return-32113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28031 invoked from network); 21 Jan 2008 14:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 14:31:18 -0000
Received: (qmail 19377 invoked by uid 500); 21 Jan 2008 14:31:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19177 invoked by uid 500); 21 Jan 2008 14:31:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19166 invoked by uid 99); 21 Jan 2008 14:31:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 06:31:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:30:36 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2020946fga.27
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 06:30:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=TRsU/xRljj5UgMIIf9IEy5zkQ70DvHaD5bhHEemiPA8=;
        b=iHNTwcTGvLAYQcfI8qUTr1s8dyxdshOEk7p2OfIFruHEqMdsKOMiIj1xhr8pdRGRzeCLgKbZxUJC6AuUvDTxeJENCrw1Kxrb0LTrZ38PqnccFNqgVaFPzMQMCb1LDMYRSq09dn5sT9t3I2Ffm/IPn5nONgB1qvDReLMPwkh8lBc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=g+7b6I45PqLHTg4lZlhMGtWVEhDTdF9UCHPqY7VviICwScoHgGqWTr2sJ6YORrRNzZ9uq3tEmGSkzmC2D6itskfrPSC2K4k5irSn6jZ2ycQEt0Os721/41TmeSEcYTtR28QcaRY6xQZPLqzj4mlg61PY0CgCGL3LED98okVz4Qg=
Received: by 10.82.112.3 with SMTP id k3mr12411015buc.31.1200925841510;
        Mon, 21 Jan 2008 06:30:41 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Mon, 21 Jan 2008 06:30:41 -0800 (PST)
Message-ID: <1bcb7c7f0801210630t159a4a73yfb00510bcfa2367d@mail.gmail.com>
Date: Mon, 21 Jan 2008 16:30:41 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Clarification about IndexWriter.deleteDocuments and flush.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13598_13282761.1200925841496"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13598_13282761.1200925841496
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

When we delete documents from index - will it autoflush when count of
deleted documents reach a certain value. I am controlling my own flush
operation, and I have disabled autoflush by:

writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);


But I have taken a peek at the IndexWriter and the DocumentWriter source
codes and from what I understand delete will flush the index when it reaches
a certain threshold.
But I am not sure if that will happen when the autoflush is disabled.

Also when deleted documents trigger a flush, that will be a cumulative flush
that flushes all the addDocs as well? is this correct?

Best,

-C.B.

------=_Part_13598_13282761.1200925841496--

From java-user-return-32114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 14:48:19 2008
Return-Path: <java-user-return-32114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39073 invoked from network); 21 Jan 2008 14:48:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 14:48:19 -0000
Received: (qmail 42214 invoked by uid 500); 21 Jan 2008 14:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42182 invoked by uid 500); 21 Jan 2008 14:48:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42171 invoked by uid 99); 21 Jan 2008 14:48:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 06:48:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:47:36 +0000
Received: by wr-out-0506.google.com with SMTP id c46so546740wra.14
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 06:47:40 -0800 (PST)
Received: by 10.142.89.9 with SMTP id m9mr3214572wfb.35.1200926859588;
        Mon, 21 Jan 2008 06:47:39 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h17sm26578001wxd.24.2008.01.21.06.47.37
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 21 Jan 2008 06:47:39 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801210630t159a4a73yfb00510bcfa2367d@mail.gmail.com>
References: <1bcb7c7f0801210630t159a4a73yfb00510bcfa2367d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A156E822-F1D0-4A49-8C3E-4409BECF258B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Clarification about IndexWriter.deleteDocuments and flush.
Date: Mon, 21 Jan 2008 09:47:56 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Cam Bazz wrote:

> Hello,
>
> When we delete documents from index - will it autoflush when count of
> deleted documents reach a certain value. I am controlling my own flush
> operation, and I have disabled autoflush by:
>
> writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);

By default (in 2.3) the writer only flushes when RAM usage hit 16  
MB.  It should not flush due to # buffered docs nor # buffered delete  
terms, and, that method call shouldn't be necessary since it's  
already the default.

>
> But I have taken a peek at the IndexWriter and the DocumentWriter  
> source
> codes and from what I understand delete will flush the index when  
> it reaches
> a certain threshold.
> But I am not sure if that will happen when the autoflush is disabled.

Right, if you disable it (as above), it won't flush by count but  
rather by RAM.

> Also when deleted documents trigger a flush, that will be a  
> cumulative flush
> that flushes all the addDocs as well? is this correct?

Yes whenever a flush occurs (due to any trigger) both buffered docs  
and buffered deletes are flushed.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 14:52:00 2008
Return-Path: <java-user-return-32115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41654 invoked from network); 21 Jan 2008 14:51:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 14:51:59 -0000
Received: (qmail 47627 invoked by uid 500); 21 Jan 2008 14:51:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47595 invoked by uid 500); 21 Jan 2008 14:51:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47584 invoked by uid 99); 21 Jan 2008 14:51:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 06:51:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:51:14 +0000
Received: by hu-out-0506.google.com with SMTP id 27so897331hub.15
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 06:51:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=zntxcXsHJ2401YQ5nToxTPR2PNKByzltbN/COjVVFu0=;
        b=oMYYMMP/lw9IRR7b15Cwf3Yxf7e6X8csiRlJkMOcrM5Kxjo9J9QgrfGIhh7aJPcRwE8KsLrl9V9z8DWNqNRkVxrXrFLrEt0bn2GiRjp753ukwvQ6EXc2HXB30LHJuSlIWSzlsAa4sr0OMUqW29dIZje6TsUdVGhP068RVoWgKlE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AsWCAZAk6fTQ1merqnRSVBQr6fqsHIPyhpMTDHc0k01/z8Goftt25BiNP4Yu1kjwOOp8rx4oRf/xAid7rqmUKXVtJcPgNxgiEwwXvVE7scDT/zc6n0tmkNxxkSt09380vrOlcUAPdMSc7sR7cvTvaSX0W0XJ7o09bsHOapuYges=
Received: by 10.82.155.10 with SMTP id c10mr12440810bue.39.1200927078403;
        Mon, 21 Jan 2008 06:51:18 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Mon, 21 Jan 2008 06:51:08 -0800 (PST)
Message-ID: <1bcb7c7f0801210651s64ccfb3n11b4327b5096f00a@mail.gmail.com>
Date: Mon, 21 Jan 2008 16:51:08 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: delete a document from indexwriter
In-Reply-To: <A5BAB26F-2404-44B9-843F-B5B41B9E92C9@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13655_32768685.1200927068393"
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com>
	 <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com>
	 <1bcb7c7f0801210554g1cece510kf269c9ec1d3e2ab0@mail.gmail.com>
	 <A5BAB26F-2404-44B9-843F-B5B41B9E92C9@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13655_32768685.1200927068393
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Michael;

how can I construct a chain where both reader and writer at the same state?
You can call getIndexReader method of the IndexSearcher. But when I delete
documents through the reader, how will this interact with the writer?
I am have disabled autoflush and using my own logic to do flushes, since I
have very small document sizes. However I am little confused about how to
use
IndexWriter and IndexReader and IndexSearcher at the same logic. Basically
currently I have a IndexWriter and IndexSearcher, I write documents, and
flush() my own. In this scenario
how can I access a reader so that my logic still works.

Best.
-C.B.





On Jan 21, 2008 4:28 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> For this case, too, you will need to use an IndexReader, or use
> IndexSearcher to run that particular search and then delete the
> docIDs returned using the IndexReader.
>
> Though, be sure to first iterate through all hits, gathering all
> docIDs.  And then in 2nd pass, do the deletions.  Otherwise you'll
> hit this issue:
>
>     https://issues.apache.org/jira/browse/LUCENE-1096
>
> (Unless you're using 2.3).
>
> You can also use Solr, which provides "delete by query".
>
> Mike
>
> Cam Bazz wrote:
>
> > Hello Mike;
> >
> > How about deleting by a compount term?
> >
> > for example if I have a document with two fields srcId and dstId
> > and I want to delete the document where srcId=1 and dstId=2
> >
> > right now there exists a IndexWriter.deleteDocuments(Term t) but
> > with that I
> > can only delete lets say where srcId=something.
> >
> > I am sure there is a workaround but I could not find it.
> >
> > Best,
> >
> > On Jan 19, 2008 1:07 PM, Michael McCandless
> > <lucene@mikemccandless.com>
> > wrote:
> >
> >>
> >> Good question....
> >>
> >> So far, this method has not been carried over to IndexWriter because
> >> in general it's not really safe, since there's no way to get an
> >> accurate docID from IndexWriter itself.
> >>
> >> You can't really "know" when IndexWriter does merges that compacts
> >> deletes and thus changes docIDs.  So, if you open a reader on the
> >> side, get a docID you want to delete, and then go and ask IndexWriter
> >> to delete that docID, you may in fact delete the wrong document.  In
> >> 2.3, where segment merges are now done with a background thread, it's
> >> even worse, because a merge could complete and be committed, thus
> >> changing docIDs, at any time...
> >>
> >> See complex discussion here:
> >>
> >>     http://markmail.org/message/wxqel3gd6cmavk5a
> >>
> >> As of 2.3, the low level infrastructure was added to IndexWriter for
> >> deleting by document ID, but this is not exposed publicly (this was a
> >> side effect of LUCENE-1112).  It's only used, internally, to delete a
> >> document if an exception is hit while indexing it.  In theory, you
> >> could then subclass IndexWriter and tap into this infrastructure to
> >> delete by docID, but, you're entering dangerous territory!
> >>
> >> Do you have a specific use case in mind here?  I think we'd like to
> >> make this option available someday in IndexWriter, but doing so now
> >> (when there is no way to get a "reliable" docID) seems too
> >> dangerous...
> >>
> >> Mike
> >>
> >> Cam Bazz wrote:
> >>
> >>> Hello,
> >>>
> >>> How do I delete a specific document from an indexwriter? I
> >>> understand there
> >>> is deleteDocuments(term) which deletes all the documents matching
> >>> the term.
> >>> But what if I want to delete a document that has more then one
> >>> term in
> >>> specific. I can search the document with a boolean query, and then
> >>> get the
> >>> doc id.
> >>> I know that doc ids are temporary, but can I not use it for delete?
> >>>
> >>> IndexReader has a delete by doc id method, but I am not sure how to
> >>> use this
> >>> when using an indexwriter.
> >>>
> >>> Best,
> >>> C.B.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13655_32768685.1200927068393--

From java-user-return-32116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 14:55:29 2008
Return-Path: <java-user-return-32116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44437 invoked from network); 21 Jan 2008 14:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 14:55:29 -0000
Received: (qmail 52215 invoked by uid 500); 21 Jan 2008 14:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51669 invoked by uid 500); 21 Jan 2008 14:55:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51656 invoked by uid 99); 21 Jan 2008 14:55:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 06:55:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:54:45 +0000
Received: by wr-out-0506.google.com with SMTP id c46so549250wra.14
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 06:54:49 -0800 (PST)
Received: by 10.142.115.10 with SMTP id n10mr3226159wfc.19.1200927288504;
        Mon, 21 Jan 2008 06:54:48 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h11sm14092039wxd.5.2008.01.21.06.54.47
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 21 Jan 2008 06:54:48 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801210651s64ccfb3n11b4327b5096f00a@mail.gmail.com>
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com> <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com> <1bcb7c7f0801210554g1cece510kf269c9ec1d3e2ab0@mail.gmail.com> <A5BAB26F-2404-44B9-843F-B5B41B9E92C9@mikemccandless.com> <1bcb7c7f0801210651s64ccfb3n11b4327b5096f00a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2760E7BF-85D5-493D-8471-69833B7A4F0D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: delete a document from indexwriter
Date: Mon, 21 Jan 2008 09:55:08 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


You will have to close the IndexWriter.

Only one "writer" may be open at once on an index, where "writer"  
includes an IndexReader that has done some deletes (the first time  
you delete a document using a reader, it will acquire the write.lock,  
which will fail if you have another writer open on that index).

Mike

Cam Bazz wrote:

> Hello Michael;
>
> how can I construct a chain where both reader and writer at the  
> same state?
> You can call getIndexReader method of the IndexSearcher. But when I  
> delete
> documents through the reader, how will this interact with the writer?
> I am have disabled autoflush and using my own logic to do flushes,  
> since I
> have very small document sizes. However I am little confused about  
> how to
> use
> IndexWriter and IndexReader and IndexSearcher at the same logic.  
> Basically
> currently I have a IndexWriter and IndexSearcher, I write  
> documents, and
> flush() my own. In this scenario
> how can I access a reader so that my logic still works.
>
> Best.
> -C.B.
>
>
>
>
>
> On Jan 21, 2008 4:28 PM, Michael McCandless  
> <lucene@mikemccandless.com>
> wrote:
>
>>
>> For this case, too, you will need to use an IndexReader, or use
>> IndexSearcher to run that particular search and then delete the
>> docIDs returned using the IndexReader.
>>
>> Though, be sure to first iterate through all hits, gathering all
>> docIDs.  And then in 2nd pass, do the deletions.  Otherwise you'll
>> hit this issue:
>>
>>     https://issues.apache.org/jira/browse/LUCENE-1096
>>
>> (Unless you're using 2.3).
>>
>> You can also use Solr, which provides "delete by query".
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Hello Mike;
>>>
>>> How about deleting by a compount term?
>>>
>>> for example if I have a document with two fields srcId and dstId
>>> and I want to delete the document where srcId=1 and dstId=2
>>>
>>> right now there exists a IndexWriter.deleteDocuments(Term t) but
>>> with that I
>>> can only delete lets say where srcId=something.
>>>
>>> I am sure there is a workaround but I could not find it.
>>>
>>> Best,
>>>
>>> On Jan 19, 2008 1:07 PM, Michael McCandless
>>> <lucene@mikemccandless.com>
>>> wrote:
>>>
>>>>
>>>> Good question....
>>>>
>>>> So far, this method has not been carried over to IndexWriter  
>>>> because
>>>> in general it's not really safe, since there's no way to get an
>>>> accurate docID from IndexWriter itself.
>>>>
>>>> You can't really "know" when IndexWriter does merges that compacts
>>>> deletes and thus changes docIDs.  So, if you open a reader on the
>>>> side, get a docID you want to delete, and then go and ask  
>>>> IndexWriter
>>>> to delete that docID, you may in fact delete the wrong  
>>>> document.  In
>>>> 2.3, where segment merges are now done with a background thread,  
>>>> it's
>>>> even worse, because a merge could complete and be committed, thus
>>>> changing docIDs, at any time...
>>>>
>>>> See complex discussion here:
>>>>
>>>>     http://markmail.org/message/wxqel3gd6cmavk5a
>>>>
>>>> As of 2.3, the low level infrastructure was added to IndexWriter  
>>>> for
>>>> deleting by document ID, but this is not exposed publicly (this  
>>>> was a
>>>> side effect of LUCENE-1112).  It's only used, internally, to  
>>>> delete a
>>>> document if an exception is hit while indexing it.  In theory, you
>>>> could then subclass IndexWriter and tap into this infrastructure to
>>>> delete by docID, but, you're entering dangerous territory!
>>>>
>>>> Do you have a specific use case in mind here?  I think we'd like to
>>>> make this option available someday in IndexWriter, but doing so now
>>>> (when there is no way to get a "reliable" docID) seems too
>>>> dangerous...
>>>>
>>>> Mike
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> How do I delete a specific document from an indexwriter? I
>>>>> understand there
>>>>> is deleteDocuments(term) which deletes all the documents matching
>>>>> the term.
>>>>> But what if I want to delete a document that has more then one
>>>>> term in
>>>>> specific. I can search the document with a boolean query, and then
>>>>> get the
>>>>> doc id.
>>>>> I know that doc ids are temporary, but can I not use it for  
>>>>> delete?
>>>>>
>>>>> IndexReader has a delete by doc id method, but I am not sure  
>>>>> how to
>>>>> use this
>>>>> when using an indexwriter.
>>>>>
>>>>> Best,
>>>>> C.B.
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 15:00:57 2008
Return-Path: <java-user-return-32117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54727 invoked from network); 21 Jan 2008 15:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 15:00:57 -0000
Received: (qmail 65192 invoked by uid 500); 21 Jan 2008 15:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65165 invoked by uid 500); 21 Jan 2008 15:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65153 invoked by uid 99); 21 Jan 2008 15:00:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 07:00:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.237 as permitted sender)
Received: from [72.14.214.237] (HELO hu-out-0506.google.com) (72.14.214.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 15:00:11 +0000
Received: by hu-out-0506.google.com with SMTP id 27so898878hub.15
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 07:00:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=m9z10OCsqvtcp+pbfndGjQiVFwYik4HohFn1PXGucZk=;
        b=IZlAija9DbHtn3HfeRkPFu75Rc2cDPEKR+/CWg+bCg6P3GmmyAdaQya6I2anZx7syiz7uSMN9OT4/jV5Bsm5iVWMAmUdrjI2+/m+MQM/s7p8Cc1k18Tcin/dqNbM6lKyTCSBfl5NV19o0eKT2hP2ZCpU9R4L8vwv+aLjeQhgrIM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TNVL7fJcocz3C5vqmCq+Hv7GuOinuSaBT48gJm11tOKah/aKl8L0JjE2KRifFjPru0lb0DxIP1K3m5K7t6u8+yztdpF8RSOrEA0IZ4icOd4fug91/2AWJ64DECIAErHjSnZgFNUb5SjMocSyUTMUcNONogNNemsKdLYsVt5OUcI=
Received: by 10.82.112.3 with SMTP id k3mr12501576buc.15.1200927615933;
        Mon, 21 Jan 2008 07:00:15 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Mon, 21 Jan 2008 07:00:15 -0800 (PST)
Message-ID: <1bcb7c7f0801210700je1203f4nb7b84674e8e181b8@mail.gmail.com>
Date: Mon, 21 Jan 2008 17:00:15 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Clarification about IndexWriter.deleteDocuments and flush.
In-Reply-To: <A156E822-F1D0-4A49-8C3E-4409BECF258B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13668_14927976.1200927615929"
References: <1bcb7c7f0801210630t159a4a73yfb00510bcfa2367d@mail.gmail.com>
	 <A156E822-F1D0-4A49-8C3E-4409BECF258B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13668_14927976.1200927615929
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Michael,

> Right, if you disable it (as above), it won't flush by count but
> rather by RAM.

I had made a test case monitoring ram usage and never flushing manually -
(with disabled autoflush)
and I think it wont flush itself when it reaches a certain buffered ram.

Having read the source to lucene made makes me think of extensions. Nice
code.

Best,


On Jan 21, 2008 4:47 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Cam Bazz wrote:
>
> > Hello,
> >
> > When we delete documents from index - will it autoflush when count of
> > deleted documents reach a certain value. I am controlling my own flush
> > operation, and I have disabled autoflush by:
> >
> > writer.setMaxBufferedDocs(IndexWriter.DISABLE_AUTO_FLUSH);
>
> By default (in 2.3) the writer only flushes when RAM usage hit 16
> MB.  It should not flush due to # buffered docs nor # buffered delete
> terms, and, that method call shouldn't be necessary since it's
> already the default.
>
> >
> > But I have taken a peek at the IndexWriter and the DocumentWriter
> > source
> > codes and from what I understand delete will flush the index when
> > it reaches
> > a certain threshold.
> > But I am not sure if that will happen when the autoflush is disabled.
>
> Right, if you disable it (as above), it won't flush by count but
> rather by RAM.
>
> > Also when deleted documents trigger a flush, that will be a
> > cumulative flush
> > that flushes all the addDocs as well? is this correct?
>
> Yes whenever a flush occurs (due to any trigger) both buffered docs
> and buffered deletes are flushed.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13668_14927976.1200927615929--

From java-user-return-32118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 15:11:24 2008
Return-Path: <java-user-return-32118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26288 invoked from network); 21 Jan 2008 15:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 15:11:24 -0000
Received: (qmail 89487 invoked by uid 500); 21 Jan 2008 15:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89460 invoked by uid 500); 21 Jan 2008 15:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89447 invoked by uid 99); 21 Jan 2008 15:11:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 07:11:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.235 as permitted sender)
Received: from [72.14.214.235] (HELO hu-out-0506.google.com) (72.14.214.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 15:10:32 +0000
Received: by hu-out-0506.google.com with SMTP id 27so900829hub.15
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 07:10:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=RHBaJ57IbC0hCllsi9tO/vdpcFkbcaupZ1EJ6earJT4=;
        b=BRRKCb7dALNCnKst/TQoSiKe2LCl9/jWph1nDeqemrUKlENGMcCsDqQY44Uyw01MnkgWydgNFe9sW0rgy20pZE99ze9cY0Z93m/gEFv4g9C1fhUoaezu9S3pFc1JLbhbI4eOHzxQWqyDSZA7kqXwb7awcyfA60uPQtQNYt5kBKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YdIrvMtkC1yd2yteOrmYDIQxuIPRAUnq073VpkUozTcIi5zg6ol/lfRQxe1iNb0c0/LiPMzuPjixXRIHmnmy9h6r/s9SHa+wukxPN0znCDGalx6lnX339hoUvbFKYzxfCPuT1HtVAVE+p3Zk7UUYZhbhg6iyPd17sucymyNLr1A=
Received: by 10.82.182.1 with SMTP id e1mr7728380buf.27.1200928236259;
        Mon, 21 Jan 2008 07:10:36 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Mon, 21 Jan 2008 07:10:36 -0800 (PST)
Message-ID: <1bcb7c7f0801210710m58cee38er4ebb50772b08d884@mail.gmail.com>
Date: Mon, 21 Jan 2008 17:10:36 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: delete a document from indexwriter
In-Reply-To: <2760E7BF-85D5-493D-8471-69833B7A4F0D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13702_13843534.1200928236250"
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com>
	 <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com>
	 <1bcb7c7f0801210554g1cece510kf269c9ec1d3e2ab0@mail.gmail.com>
	 <A5BAB26F-2404-44B9-843F-B5B41B9E92C9@mikemccandless.com>
	 <1bcb7c7f0801210651s64ccfb3n11b4327b5096f00a@mail.gmail.com>
	 <2760E7BF-85D5-493D-8471-69833B7A4F0D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13702_13843534.1200928236250
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, I noticed
http://www.archivum.info/java-dev@lucene.apache.org/2006-09/msg00065.html

Somehow I gotta do my delete within the same writer. I could use another
field that combines both src and dst field, and use this field without
storing but still a waste of resources.

I wonder if IndexWriter can be modified to accept a boolean query with termA
and termB - instead of single term?
I read the code until the part where deleted the term is added to a hashmap,
but could not follow on after that.

Best,
-C.B.



  synchronized private void addDeleteTerm(Term term, int docCount) {
    Num num = (Num) bufferedDeleteTerms.get(term);
    if (num == null) {
      bufferedDeleteTerms.put(term, new Num(docCount));
      // This is coarse approximation of actual bytes used:
      numBytesUsed += (term.field().length() + term.text().length()) *
BYTES_PER_CHAR
          + 4 + 5 * OBJECT_HEADER_BYTES + 5 * OBJECT_POINTER_BYTES;
      if (ramBufferSize != IndexWriter.DISABLE_AUTO_FLUSH
          && numBytesUsed > ramBufferSize) {
        bufferIsFull = true;
      }
    } else {
      num.setNum(docCount);
    }
    numBufferedDeleteTerms++;
  }




Best Regards,


On Jan 21, 2008 4:55 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> You will have to close the IndexWriter.
>
> Only one "writer" may be open at once on an index, where "writer"
> includes an IndexReader that has done some deletes (the first time
> you delete a document using a reader, it will acquire the write.lock,
> which will fail if you have another writer open on that index).
>
> Mike
>
> Cam Bazz wrote:
>
> > Hello Michael;
> >
> > how can I construct a chain where both reader and writer at the
> > same state?
> > You can call getIndexReader method of the IndexSearcher. But when I
> > delete
> > documents through the reader, how will this interact with the writer?
> > I am have disabled autoflush and using my own logic to do flushes,
> > since I
> > have very small document sizes. However I am little confused about
> > how to
> > use
> > IndexWriter and IndexReader and IndexSearcher at the same logic.
> > Basically
> > currently I have a IndexWriter and IndexSearcher, I write
> > documents, and
> > flush() my own. In this scenario
> > how can I access a reader so that my logic still works.
> >
> > Best.
> > -C.B.
> >
> >
> >
> >
> >
> > On Jan 21, 2008 4:28 PM, Michael McCandless
> > <lucene@mikemccandless.com>
> > wrote:
> >
> >>
> >> For this case, too, you will need to use an IndexReader, or use
> >> IndexSearcher to run that particular search and then delete the
> >> docIDs returned using the IndexReader.
> >>
> >> Though, be sure to first iterate through all hits, gathering all
> >> docIDs.  And then in 2nd pass, do the deletions.  Otherwise you'll
> >> hit this issue:
> >>
> >>     https://issues.apache.org/jira/browse/LUCENE-1096
> >>
> >> (Unless you're using 2.3).
> >>
> >> You can also use Solr, which provides "delete by query".
> >>
> >> Mike
> >>
> >> Cam Bazz wrote:
> >>
> >>> Hello Mike;
> >>>
> >>> How about deleting by a compount term?
> >>>
> >>> for example if I have a document with two fields srcId and dstId
> >>> and I want to delete the document where srcId=1 and dstId=2
> >>>
> >>> right now there exists a IndexWriter.deleteDocuments(Term t) but
> >>> with that I
> >>> can only delete lets say where srcId=something.
> >>>
> >>> I am sure there is a workaround but I could not find it.
> >>>
> >>> Best,
> >>>
> >>> On Jan 19, 2008 1:07 PM, Michael McCandless
> >>> <lucene@mikemccandless.com>
> >>> wrote:
> >>>
> >>>>
> >>>> Good question....
> >>>>
> >>>> So far, this method has not been carried over to IndexWriter
> >>>> because
> >>>> in general it's not really safe, since there's no way to get an
> >>>> accurate docID from IndexWriter itself.
> >>>>
> >>>> You can't really "know" when IndexWriter does merges that compacts
> >>>> deletes and thus changes docIDs.  So, if you open a reader on the
> >>>> side, get a docID you want to delete, and then go and ask
> >>>> IndexWriter
> >>>> to delete that docID, you may in fact delete the wrong
> >>>> document.  In
> >>>> 2.3, where segment merges are now done with a background thread,
> >>>> it's
> >>>> even worse, because a merge could complete and be committed, thus
> >>>> changing docIDs, at any time...
> >>>>
> >>>> See complex discussion here:
> >>>>
> >>>>     http://markmail.org/message/wxqel3gd6cmavk5a
> >>>>
> >>>> As of 2.3, the low level infrastructure was added to IndexWriter
> >>>> for
> >>>> deleting by document ID, but this is not exposed publicly (this
> >>>> was a
> >>>> side effect of LUCENE-1112).  It's only used, internally, to
> >>>> delete a
> >>>> document if an exception is hit while indexing it.  In theory, you
> >>>> could then subclass IndexWriter and tap into this infrastructure to
> >>>> delete by docID, but, you're entering dangerous territory!
> >>>>
> >>>> Do you have a specific use case in mind here?  I think we'd like to
> >>>> make this option available someday in IndexWriter, but doing so now
> >>>> (when there is no way to get a "reliable" docID) seems too
> >>>> dangerous...
> >>>>
> >>>> Mike
> >>>>
> >>>> Cam Bazz wrote:
> >>>>
> >>>>> Hello,
> >>>>>
> >>>>> How do I delete a specific document from an indexwriter? I
> >>>>> understand there
> >>>>> is deleteDocuments(term) which deletes all the documents matching
> >>>>> the term.
> >>>>> But what if I want to delete a document that has more then one
> >>>>> term in
> >>>>> specific. I can search the document with a boolean query, and then
> >>>>> get the
> >>>>> doc id.
> >>>>> I know that doc ids are temporary, but can I not use it for
> >>>>> delete?
> >>>>>
> >>>>> IndexReader has a delete by doc id method, but I am not sure
> >>>>> how to
> >>>>> use this
> >>>>> when using an indexwriter.
> >>>>>
> >>>>> Best,
> >>>>> C.B.
> >>>>
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13702_13843534.1200928236250--

From java-user-return-32119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 15:33:13 2008
Return-Path: <java-user-return-32119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37481 invoked from network); 21 Jan 2008 15:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 15:33:12 -0000
Received: (qmail 24105 invoked by uid 500); 21 Jan 2008 15:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23734 invoked by uid 500); 21 Jan 2008 15:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23723 invoked by uid 99); 21 Jan 2008 15:32:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 07:32:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 15:32:28 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JV000AZK3690X@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 21 Jan 2008 16:32:33 +0100 (MET)
Date: Mon, 21 Jan 2008 16:32:33 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
In-reply-to: <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
 <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
 <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2008-01-21 at 08:32 -0500, Michael McCandless wrote:
> Well that is not good news!!  From your results below, it looks like  
> 2.3 searching is 13.6% slower with hard disks and 8.9% slower with SSD.

As can be seen, it depends on the configuration. But the overall picture
is very consistent.

> We focused heavily on speeding up indexing in 2.3, but did not expect  
> searching to slow down.
> 
> Please post the code you're using, and any details about the test.   
> It seems like your test is a very long running test?

It takes a day or so to go through the combinations for a given Lucene
version, but the machine I use is dedicated to testing our search-
implementation, so it's not a problem to run lengthy tests. If somebody
comes up with a test that can help clarify the issue, I'll be happy to
run it on the hardware.

One could say that the test is fairly unrealistic, as we don't even
begin to approach the 340.000 queries before our index is rotated. If we
only look at the forst 50.000 queries, the difference in speed for
Lucene versions using harddisks is negligible. For SSDs it's quite
visible:

(sorry about the rough dump below, I'm running out of time)

i37 is index size
tx is the number of threads
txu means one searcher/thread

"only" 50.000 queries average response time:

metis_15000_RAID1_8GB_i37_t2_l21.log - 55.9 q/sec
metis_15000_RAID1_8GB_i37_t2_l22.log - 51.8 q/sec
metis_15000_RAID1_8GB_i37_t2_l23.log - 56.3 q/sec
metis_15000_RAID1_8GB_i37_t3_l21.log - 54.7 q/sec
metis_15000_RAID1_8GB_i37_t3_l22.log - 54.1 q/sec
metis_15000_RAID1_8GB_i37_t3_l23.log - 52.9 q/sec
metis_15000_RAID1_8GB_i37_t3u_l21.log - 70.0 q/sec
metis_15000_RAID1_8GB_i37_t3u_l22.log - 70.1 q/sec
metis_15000_RAID1_8GB_i37_t3u_l23.log - 70.3 q/sec

metis_flash_RAID0_8GB_i37_t2_l21.log - 279.6 q/sec
metis_flash_RAID0_8GB_i37_t2_l22.log - 266.1 q/sec
metis_flash_RAID0_8GB_i37_t2_l23.log - 202.3 q/sec
metis_flash_RAID0_8GB_i37_t3_l21.log - 138.9 q/sec
metis_flash_RAID0_8GB_i37_t3_l22.log - 129.6 q/sec
metis_flash_RAID0_8GB_i37_t3_l23.log - 131.9 q/sec
metis_flash_RAID0_8GB_i37_t3u_l21.log - 273.0 q/sec
metis_flash_RAID0_8GB_i37_t3u_l22.log - 254.0 q/sec
metis_flash_RAID0_8GB_i37_t3u_l23.log - 251.8 q/sec

The code I'm using relies on a non-trivial amount of classes in order to
parse the queries, which I can't provide directly due to legal issues.
I've packaged the core files, which can be downloaded at
http://wiki.statsbiblioteket.dk/summa/Hardware?action=AttachFile&do=get&target=SBLucenePerformance0.1.zip

The getSearcher and getNewSearcher methods differ by reusing the
previously created searcher and making a new searcher. The reader for
the searcher uses IndexReader.open(indexPath). I'll see if I can find
the time to make a self-contained test on friday, but no promises.

Toke:
> > I don't know if the lower performance is because I'm using the old  
> > index instead of generating a new one with Lucene 2.3pr2?
> 
> I don't think that should cause the slowdown.  Though this was a good  
> test of backwards compatibility on the index format!

The compatibility-part worked great. It was just a matter of changing
the classpath. I'll see if I can steal our production-server for a day
and create a 2.3 index to rule out the possibility that the slowdown is
due to the index-version.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 15:38:39 2008
Return-Path: <java-user-return-32120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38952 invoked from network); 21 Jan 2008 15:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 15:38:39 -0000
Received: (qmail 30927 invoked by uid 500); 21 Jan 2008 15:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30894 invoked by uid 500); 21 Jan 2008 15:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30883 invoked by uid 99); 21 Jan 2008 15:38:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 07:38:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.133.51.241] (HELO mail.hippo.nl) (213.133.51.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 15:38:05 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Reusing indexed and analyzed documents
Date: Mon, 21 Jan 2008 16:37:54 +0100
Message-ID: <F8E386B54CE3E6408F3A32ABB9A7908A7E6957@hai02.hippointern.lan>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reusing indexed and analyzed documents
Thread-Index: AchcQ5a6I2VTISZdQr+kxiWjlj8ucQ==
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,=20

is there a way to reuse a Lucene document which was indexed and analyzed
before, but only one single Field has changed? The use case (Jackrabbit
indexing) is when a *lot* of documents have a common field which
changes, and the rest of the document is unchanged . I would guess that
there is a more efficient way then reindexing and analyzing all fields
(it is present in the index already). I understand that I need to append
a new Lucene Document, so the old one needs to be deleted, but I hoped I
can somehow reuse the already analyzed unchanged fields. Does anybody
know if this is possible?=20

Do I understand correctly that the per-document payload feature will
give me this possibility in the future? Can I also query on payload
values (might be dumb question but I just learned about the Payload
feature :-) )?

thanks for any pointers,

Regards Ard

--=20

Hippo
Oosteinde 11
1017WT Amsterdam
The Netherlands
Tel  +31 (0)20 5224466
-------------------------------------------------------------
a.schrijvers@hippo.nl / ard@apache.org / http://www.hippo.nl
--------------------------------------------------------------=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 16:37:42 2008
Return-Path: <java-user-return-32121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69133 invoked from network); 21 Jan 2008 16:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 16:37:41 -0000
Received: (qmail 34566 invoked by uid 500); 21 Jan 2008 16:37:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34290 invoked by uid 500); 21 Jan 2008 16:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34279 invoked by uid 99); 21 Jan 2008 16:37:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 08:37:25 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 16:37:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JGzdw-00037P-Pk
	for java-user@lucene.apache.org; Mon, 21 Jan 2008 08:37:04 -0800
Message-ID: <15001250.post@talk.nabble.com>
Date: Mon, 21 Jan 2008 08:37:04 -0800 (PST)
From: Fabrice Robini <fro@octo.com>
To: java-user@lucene.apache.org
Subject: Is Fair Similarity working with lucene 2.2 ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fro@octo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I've tried the "fair" similarity described here
(http://www.nabble.com/a-%22fair%22-similarity-to5806739.html#a5806739) with
lucene 2.2 but it does not seems to work.

I've attached the custom "MyFair" similarity to both IndexWriter and
IndexSearcher.

Do you have any idea ?

Thanks a lot,

Fabrice

-- 
View this message in context: http://www.nabble.com/Is-Fair-Similarity-working-with-lucene-2.2---tp15001250p15001250.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 19:07:06 2008
Return-Path: <java-user-return-32122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44096 invoked from network); 21 Jan 2008 19:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 19:07:06 -0000
Received: (qmail 30934 invoked by uid 500); 21 Jan 2008 19:06:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30807 invoked by uid 500); 21 Jan 2008 19:06:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30796 invoked by uid 99); 21 Jan 2008 19:06:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 11:06:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Jan 2008 19:06:23 +0000
Received: (qmail invoked by alias); 21 Jan 2008 19:06:27 -0000
Received: from unknown (EHLO msrvcn04) [78.52.69.5]
  by mail.gmx.net (mp024) with SMTP; 21 Jan 2008 20:06:27 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19oowsy7lBo86eRsOR01rv7yMrj2KBrWwIZtUdSE3
	RGWD05ksTUbrQL
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <57846.14302.qm@web50303.mail.re2.yahoo.com>
Subject: RE: IndexWriter#addIndexes
Date: Mon, 21 Jan 2008 20:06:28 +0100
Message-ID: <CD7A2F5780004F68B373E4EB95F035E9@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <57846.14302.qm@web50303.mail.re2.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchbMGRW5Y/BRmXnQ6CMMlvIcmJYNgBMDgYA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Genau!  Indices are simply merged on disk, their content is 
> not re-analyzed.


Thank you!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 19:09:24 2008
Return-Path: <java-user-return-32123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45217 invoked from network); 21 Jan 2008 19:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 19:09:24 -0000
Received: (qmail 34816 invoked by uid 500); 21 Jan 2008 19:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34787 invoked by uid 500); 21 Jan 2008 19:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34776 invoked by uid 99); 21 Jan 2008 19:09:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 11:09:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Jan 2008 19:08:41 +0000
Received: (qmail invoked by alias); 21 Jan 2008 19:08:44 -0000
Received: from unknown (EHLO msrvcn04) [78.52.69.5]
  by mail.gmx.net (mp003) with SMTP; 21 Jan 2008 20:08:44 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+ysg9ky02ytkWSDMY65Ryi0IARI+aroY62/mDvs6
	l0zkwut9KUtL1C
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Compass
Date: Mon, 21 Jan 2008 20:08:45 +0100
Message-ID: <F13DFF606AF7430791D37321C7DED803@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchcYPBUet4JaH76SUyEITizvTLJWA==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

compass (http://www.opensymphony.com/compass/content/lucene.html) promisses
many nice things in my opinion.
Has anybody production experiences with it?

Especially Jdbc Directory and Updates?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 19:12:43 2008
Return-Path: <java-user-return-32124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46518 invoked from network); 21 Jan 2008 19:12:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 19:12:42 -0000
Received: (qmail 38532 invoked by uid 500); 21 Jan 2008 19:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38494 invoked by uid 500); 21 Jan 2008 19:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38483 invoked by uid 99); 21 Jan 2008 19:12:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 11:12:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 19:12:01 +0000
Received: by wr-out-0506.google.com with SMTP id c46so673101wra.14
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 11:12:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=4IQjSNYNhImT1eXhIRwGDUwW6aoh/e2h2bPFBzvVDDQ=;
        b=pEXGXSFIUeREIqye6F5wp4xxmuNanMUTROVmb8ZeXaXAj2YQyyjk1Wx1JC9Qi5RhKEV4i26MGiaZskEzbOjui3UcT0vRH7zmJwBA+9ikG9QOpYXkb/kSj0Z1T3ZPfW33uHCSXsumrS/0PIapuLVPbxrYFv2cWOcDVlyf7vh0HqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=bow45G+tGXH0nqdjgxibaUYwXAZzt8YN5ioUYsQC25Mac54aSdskbKduF36dd0OTrbVtsKO0gGMFJ3dSufrI18pzh/cTZDxrp8DbQliYNV7L9GDbNE0qz8hR3gTy5sBN/UQJztUD4FPO9ulYBHdKx8+uYOF99G/QizDmaKOkaQ8=
Received: by 10.142.240.9 with SMTP id n9mr3467851wfh.6.1200942725784;
        Mon, 21 Jan 2008 11:12:05 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Mon, 21 Jan 2008 11:12:05 -0800 (PST)
Message-ID: <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com>
Date: Mon, 21 Jan 2008 14:12:05 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per IndexReader?)
In-Reply-To: <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
	 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
	 <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
	 <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
	 <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk>
X-Google-Sender-Auth: 9babf3c4301a6689
X-Virus-Checked: Checked by ClamAV on apache.org

On Jan 21, 2008 10:32 AM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:
> If we
> only look at the forst 50.000 queries, the difference in speed for
> Lucene versions using harddisks is negligible. For SSDs it's quite
> visible:

Hmmm, I have a hard time thinking what could have slowed down
searching.... perhaps support for multi-level skip lists (w/o those
skip lists actually being present because it's an old index)?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 19:42:34 2008
Return-Path: <java-user-return-32125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53362 invoked from network); 21 Jan 2008 19:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 19:42:34 -0000
Received: (qmail 70055 invoked by uid 500); 21 Jan 2008 19:42:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70024 invoked by uid 500); 21 Jan 2008 19:42:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70013 invoked by uid 99); 21 Jan 2008 19:42:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 11:42:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 19:41:52 +0000
Received: by an-out-0708.google.com with SMTP id c5so518446anc.49
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 11:41:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=b1LtHDFjgbMGJ4UmFgDd6ECfAwmXqrZiYs5QqhsnebQ=;
        b=wYtlJm5YEOgHBAsELAuMUC7GdkiT3iKzHGc/zPmHbTkfiw3bnFrrMTt5G+UCRwMWX/t9HeqXoe4aCp16ZcTjJ/jFmMnKSR5XKDqzG53irBU6M0Oh/MX8VdRIfW77hbDfn3+LZAghKVEgFXK66Debq4BNyHI3V4KNiR862RWEXag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZmKgob+lxCVhPF2xuWV1kElS1r2MKhxe3d5IdMnjLRxIVsWsBwRPB/JtwK2doYGsw5RDhZ27cBvQACvn6xYJokGtZcUu5RmgEkHwnDUSq29ggs3UlhPPduQGC+FPK06FiLXexma2NKQkOd8K7FZQpguZsPdHDakMQN9juTxRDgs=
Received: by 10.100.215.5 with SMTP id n5mr15546191ang.20.1200944517212;
        Mon, 21 Jan 2008 11:41:57 -0800 (PST)
Received: from ?9.30.38.162? ( [129.42.184.35])
        by mx.google.com with ESMTPS id 39sm6935842hse.7.2008.01.21.11.41.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 21 Jan 2008 11:41:55 -0800 (PST)
Message-ID: <4794F518.80804@gmail.com>
Date: Mon, 21 Jan 2008 11:40:08 -0800
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
 IndexReader?)
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>	 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>	 <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>	 <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>	 <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk> <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com>
In-Reply-To: <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Toke,

what kind of queries are you using for your tests? (num query terms,
booleans clauses, phrases, wildcards?)

-Michael


Yonik Seeley wrote:
> On Jan 21, 2008 10:32 AM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:
>> If we
>> only look at the forst 50.000 queries, the difference in speed for
>> Lucene versions using harddisks is negligible. For SSDs it's quite
>> visible:
> 
> Hmmm, I have a hard time thinking what could have slowed down
> searching.... perhaps support for multi-level skip lists (w/o those
> skip lists actually being present because it's an old index)?
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 20:00:29 2008
Return-Path: <java-user-return-32126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61089 invoked from network); 21 Jan 2008 20:00:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 20:00:29 -0000
Received: (qmail 99711 invoked by uid 500); 21 Jan 2008 20:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99691 invoked by uid 500); 21 Jan 2008 20:00:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99680 invoked by uid 99); 21 Jan 2008 20:00:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 12:00:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.104.30] (HELO sa15.bezeqint.net) (192.115.104.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 19:59:43 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by sa15.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP id 40C8C28326
	for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 21:59:43 +0200 (IST)
X-Virus-Scanned: amavisd-new at bezeqint.net
Received: from sa15.bezeqint.net ([127.0.0.1])
	by localhost (sa15.bezeqint.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LraGyTqygjjT for <java-user@lucene.apache.org>;
	Mon, 21 Jan 2008 21:59:39 +0200 (IST)
Received: from m6.bezeqint.net (m6.bezeqint.net [192.115.104.86])
	by sa15.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP
	for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 21:59:39 +0200 (IST)
Received: from your0548c161e1 ([82.102.182.79])
	by m6.bezeqint.net (MOS 3.8.5-GA)
	with ESMTP id BBH81537 (AUTH sf_ita_s);
	Mon, 21 Jan 2008 21:59:35 +0200 (IST)
X-FEAS-DEEPHEADER-FortiMail-2000-partnergsm.co.il:  No untrusted public ip! 
Message-Id: <20080121195319.1846@partnergsm.co.il>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: Lucene, HTML and Hebrew
Date: Mon, 21 Jan 2008 21:59:27 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AchbMGRW5Y/BRmXnQ6CMMlvIcmJYNgBMDgYAAAArS/A=
In-Reply-To: <CD7A2F5780004F68B373E4EB95F035E9@msrvcn04>
X-Junkmail-Status: score=10/50, host=m6.bezeqint.net
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A090206.4794F9AA.0179,ss=1,fgs=0,
	ip=82.102.182.79,
	so=2007-07-31 18:51:00,
	dmn=5.4.3/2007-11-16
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I'm starting in the process of creating Hebrew support for Lucene.
Specifically I'm using Clucene (which is an awesome and strong port), but
that shouldn't matter for my questions. Please, if you know of any info or
similar project let me know, it can save me loads of time and headaches. As
far as I could tell, such a thing is not in existance. Since I'm using
Clucene, the following questions reffer to Lucene < 2.0, should it make any
difference.

In my project I'm indexing HTML files which are either in English or Hebrew,
but may have words of the other language, and I need to enable searches for
both.
So in my application I load the HTML files one by one, taking text snippets
paragraph by paragraph (<p> tag). For each paragraph I strip it from HTML
tags and resolve HTML entities and then create a tokenized and indexed, not
stored, field. The HTML files are articles with main header, a few
sub-headers, quotes, normal text, and footnotes. I want to index all text as
normal, except for terms from headers which I want to boost (h1 the highest
boost, h2 less and so on). Footnotes should get negative boost (less than
normal text, which is neutral), quotes being indexed as field "quote" to
allow for quotes searches but are considered as normal on queries.
Due to the structure of the HTML files I have, calls to add new fields to a
document while parsing the HTML will be made in this order (psuedo code):

	Doc->add(new Field("h1", "Article Name / Adam Smith",
Field::STORE_NO | Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some introduction text",
Field::STORE_NO | Field::INDEX_TOKENIZED);
	Doc->add(new Field("h2", "sub-header 1", Field::STORE_NO |
Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph1", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph2", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph3", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph4", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("h2", "sub-header 2", Field::STORE_NO |
Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph1", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph2", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph3", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph4", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("h2", "sub-header 3", Field::STORE_NO |
Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph1", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph2", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph3", Field::STORE_NO
| Field::INDEX_TOKENIZED);
	Doc->add(new Field("normal", "some text paragrph4", Field::STORE_NO
| Field::INDEX_TOKENIZED);

Based on the above info:

1) How would Lucene treat the "normal" paragraph when they are added that
way? Would proximity and frequency data be computed between paragraph1 and
paragraph2 (last word of former with first word of latter)? What about
proximity data between "h2" paragraph and the "normal" before or after it?

2) How would I set the boosts for the headers and footnotes? I'd rather have
it stored within the index file than have to append it to each and every
query I will execute, but I'm open to suggestions. I'm more interested in
performance and flexibility.

3) When executing a query against the above-mentioned index, how would I
execute a set of words as a query (boolean quey using list of inflated
words) without repeating this set of words for each and every field? Any
support for something like *:word1 OR word2 OR word3 (instead of
normal:(word1 OR word2 OR word3) AND quote:(word1 OR word2 OR word3) AND
h1:(word1 OR word2 OR word3) etc...)?

4) Writing a Hebrew analyzer, I'm considering using a StandardAnalyzer and
just ammend it so when it recognizes a Hebrew word it will call some
function that will parse it correctly (there are some differences, such as
quotes in the middle of a word are legitmate, also remove Niqqud). If it's a
non-Hebrew word it will just continue as usual with its default behavior and
functions.
Also, this means I will index ALL words (Hebrew AND English) into the same
index. The thinking behind this is to allow for searches with both Hebrew
and English words to be performed successfully, taking into account there
shouldn't be any downsides for indexing two languages within one index. I'm
aware of the way Lucene stores words (not the whole word, but only the part
that is different from the previous), but I really don't see how bad that's
gonna be...

5) Where should a stemmer be used? As far as I see it, it should only be
used for query inflation, am I right?

I know that might be quite heavy on you guys, but I will appreciate detailed
answers. Thanks in advance!

Itamar.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 20:07:25 2008
Return-Path: <java-user-return-32127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65117 invoked from network); 21 Jan 2008 20:07:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 20:07:25 -0000
Received: (qmail 10853 invoked by uid 500); 21 Jan 2008 20:07:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10807 invoked by uid 500); 21 Jan 2008 20:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10796 invoked by uid 99); 21 Jan 2008 20:07:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 12:07:09 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 20:06:44 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4315920wah.11
        for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 12:06:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=AD0yEBTMboy5zo9/2O6/+n9NUnYH/tt2gIbGOEVV3/U=;
        b=kenSMJELBQDkdPMJupCnM4s2obx4L82gPvRjJTUFU+AX8qoV4pfoH10Xka2DSKH0wLIs0LQnOUWbjUY/4u0bUspIAkOMe1GfjyvwQxRRLbbwwgDavGd6A46rEPAfX4I83l+KTqYYsDgW7UpPuEM41+pYXzJqFKshVp5w7jy+v/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=RzR2v+6VrqaKivfDA2ouM30qaWj7N7YpI25fiBGQDB7BbzOcNjpufqXi6PjjlfsZNoudaBMBjuWCgfo8RSgAn7undCLFMjApwAOU86yKO0k8HH7iLb9+3aUrzKN/rLDJiJRM9IbaPXfN3vinzYmGWfcox/x7yEg7Kqb9H48Z2Oo=
Received: by 10.114.150.1 with SMTP id x1mr5850540wad.145.1200946010761;
        Mon, 21 Jan 2008 12:06:50 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Mon, 21 Jan 2008 12:06:50 -0800 (PST)
Message-ID: <a206fb7e0801211206g3b8cd93bg94fd4d68049ca501@mail.gmail.com>
Date: Mon, 21 Jan 2008 12:06:50 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Archiving Index using partitions
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

 As a requirement I need to be able to archive any indexes older than
2 weeks (due to space and performance reasons). That means I would
need to maintain weekly indexes. Here are my questions,

1) What's the best way to partition indexes using Lucene?
2) Is there a way I can partition documents, but not indexes? I don't
want each partitioned index to be a full index, as that would be waste
of space. We collect over 10K new documents per min (with each
document around 250 bytes).
3) Is ParallelMultiSearcher the way to go for partitioned indexes? Do
I ever have to merge these partitioned indexes?
4) I'm hoping I can reload the archived indexes in future if needed.

Not sure if there is a standard way to archive the indexes using Lucene.

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 20:38:54 2008
Return-Path: <java-user-return-32128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82187 invoked from network); 21 Jan 2008 20:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 20:38:54 -0000
Received: (qmail 83480 invoked by uid 500); 21 Jan 2008 20:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83459 invoked by uid 500); 21 Jan 2008 20:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83448 invoked by uid 99); 21 Jan 2008 20:38:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 12:38:37 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.65] (HELO smtpoutm.mac.com) (17.148.16.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 20:38:24 +0000
Received: from webmail021 (webmail021-s [10.13.128.21])
	by smtpoutm.mac.com (Xserve/smtpout002/MantshX 4.0) with ESMTP id m0LKcE71024501
	for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 12:38:14 -0800 (PST)
Date: Mon, 21 Jan 2008 12:38:14 -0800
From: Michael Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Message-ID: <A54EBA9D-0117-1000-821C-C0CF0465B221-Webmail-10009@mac.com>
Subject: Matching w/in X% ?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: 38.106.143.252
Received: from [38.106.143.252] from webmail.mac.com with HTTP; Mon, 21 Jan 2008 12:38:14 -0800
X-Virus-Checked: Checked by ClamAV on apache.org

Say I have a field of To addresses from an email archive.  I do a search and I get 10 To addresses for a single hit.  Then I want to find similar email with the To addresses containing roughly 75% of those email addresses as well.  How would I do this?

In other words:
I get a result with:
To:  foo@bar.com, foo2@bar.com, foo3@bar.com, foo4@bar.com, foo5@bar.com, foo6@bar.com

Now I want to find similar emails with 75% of this addresses in the To field.....

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 20:45:27 2008
Return-Path: <java-user-return-32129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86353 invoked from network); 21 Jan 2008 20:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 20:45:27 -0000
Received: (qmail 97655 invoked by uid 500); 21 Jan 2008 20:45:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97418 invoked by uid 500); 21 Jan 2008 20:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97407 invoked by uid 99); 21 Jan 2008 20:45:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 12:45:11 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.24 as permitted sender)
Received: from [80.67.29.24] (HELO smtprelay10.ispgateway.de) (80.67.29.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 20:44:57 +0000
Received: from [84.191.223.93] (helo=p54bfdf5d.dip.t-dialin.net)
	by smtprelay10.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JH3Vg-0003dm-FA
	for java-user@lucene.apache.org; Mon, 21 Jan 2008 21:44:48 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
Date: Mon, 21 Jan 2008 21:47:43 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <15001250.post@talk.nabble.com>
In-Reply-To: <15001250.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801212147.43414@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Montag, 21. Januar 2008, Fabrice Robini wrote:

> I've tried the "fair" similarity described here
> (http://www.nabble.com/a-%22fair%22-similarity-to5806739.html#a5806739)
> with lucene 2.2 but it does not seems to work.

What exactly doesn't work, don't you see an effect? At least the scores 
should change if you try with an artificial small document. Maybe you can 
strip down your code to a small self-contained example and post it.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 20:49:01 2008
Return-Path: <java-user-return-32130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87465 invoked from network); 21 Jan 2008 20:49:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 20:49:01 -0000
Received: (qmail 3517 invoked by uid 500); 21 Jan 2008 20:48:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3486 invoked by uid 500); 21 Jan 2008 20:48:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3472 invoked by uid 99); 21 Jan 2008 20:48:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 12:48:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 20:48:20 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0LKmEDQ001864
	for <java-user@lucene.apache.org>; Mon, 21 Jan 2008 22:48:14 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1lmbh6h; 21 Jan 2008 22:47:00 +0200
Message-ID: <479504FA.2080304@teamware.com>
Date: Tue, 22 Jan 2008 07:47:54 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using RangeFilter
References: <21335.37522.qm@web50306.mail.re2.yahoo.com> <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
In-Reply-To: <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Mon, 21 Jan 2008 22:48:14 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

vivek sar wrote:
> I need to be able to sort on optime as well, thus need to store it .

Lucene's default sorting does not need the field to be stored, only indexed as 
untokenized.
Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 22:12:55 2008
Return-Path: <java-user-return-32131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31547 invoked from network); 21 Jan 2008 22:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 22:12:54 -0000
Received: (qmail 27293 invoked by uid 500); 21 Jan 2008 22:12:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27263 invoked by uid 500); 21 Jan 2008 22:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27252 invoked by uid 99); 21 Jan 2008 22:12:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:12:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Jan 2008 22:12:09 +0000
Received: (qmail 15358 invoked by uid 60001); 21 Jan 2008 22:12:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Pr1CtunQnNLPDCQeUu2d9uiFB3inyimKXJZbxtF2iLfXMZOmJ9kknLU6LQxKBcaEaUkfqd+UmtpuG3+4sMsRsA9eANJPkBOp5aqOy22GWLKZSwjvI3nxWpUW888cbxI4gvRmqHu69MHfOHoncbCC5o2dqNDpRGyWRwLt4hs7CBw=;
X-YMail-OSG: cwqKv4EVM1kPJWCtY_I2Z90C0QPE70o3TUsUzytwMuXBSBj43Ky3ZfKpTveSulB9yxRvht.bQUZxoVCWwxLDAv56llB9PIAG91I3hDJUS3Co5zNqXUU-
Received: from [70.107.136.213] by web50302.mail.re2.yahoo.com via HTTP; Mon, 21 Jan 2008 14:12:14 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Mon, 21 Jan 2008 14:12:14 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Matching w/in X% ?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <944828.12384.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think you'll have to go with MoreLikeThis (assuming your emails as tokenized suitably) and go through matches yourself to check for the % match.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Michael Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Sent: Monday, January 21, 2008 3:38:14 PM
Subject: Matching w/in X% ?

Say I have a field of To addresses from an email archive.  I do a
 search and I get 10 To addresses for a single hit.  Then I want to find
 similar email with the To addresses containing roughly 75% of those email
 addresses as well.  How would I do this?

In other words:
I get a result with:
To:  foo@bar.com, foo2@bar.com, foo3@bar.com, foo4@bar.com,
 foo5@bar.com, foo6@bar.com

Now I want to find similar emails with 75% of this addresses in the To
 field.....

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 22:15:51 2008
Return-Path: <java-user-return-32132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32469 invoked from network); 21 Jan 2008 22:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 22:15:51 -0000
Received: (qmail 30969 invoked by uid 500); 21 Jan 2008 22:15:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30941 invoked by uid 500); 21 Jan 2008 22:15:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30930 invoked by uid 99); 21 Jan 2008 22:15:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:15:35 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Jan 2008 22:15:07 +0000
Received: (qmail 62166 invoked by uid 60001); 21 Jan 2008 22:15:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=28Qf3a65YgFUo2SM28iK4xfHxbMqCHZQplgF8upcmvM6MNHm3G610cC3cosvRjf1SrFaSp89FopPnl5lBUdbZd8mgKOifrx8nitAIOY5/uEsz5WvHtBbXpfXoNN8mL2k0AaJ6wKPvjX4b5gOQGrOI/4w65xYKW5mf1anLY0Sy58=;
X-YMail-OSG: arDRvAsVM1mrSuC2k62P0BmD7_QD5kLhA2AsJNFk.1duszbVddVlbi0aVpa6mTjO4gs9NJ3YjRD52YmjESw5pWKJSHYKxRpMcq4Jcr1QH1w2Z.jXsQ--
Received: from [70.107.136.213] by web50303.mail.re2.yahoo.com via HTTP; Mon, 21 Jan 2008 14:15:12 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Mon, 21 Jan 2008 14:15:12 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Archiving Index using partitions
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <86437.61224.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Why not just design your system to roll over to a new index on a weekly a basis (new IndexWriter on a new index dir, roughly speaking)?  You can't partition a single Document, if that is what you are asking.  But you can create multiple smaller (e.g. weekly indices) instead one large one, and then every 2 weeks archive the one > 2 weeks old.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, January 21, 2008 3:06:50 PM
Subject: Archiving Index using partitions

Hi,

 As a requirement I need to be able to archive any indexes older than
2 weeks (due to space and performance reasons). That means I would
need to maintain weekly indexes. Here are my questions,

1) What's the best way to partition indexes using Lucene?
2) Is there a way I can partition documents, but not indexes? I don't
want each partitioned index to be a full index, as that would be waste
of space. We collect over 10K new documents per min (with each
document around 250 bytes).
3) Is ParallelMultiSearcher the way to go for partitioned indexes? Do
I ever have to merge these partitioned indexes?
4) I'm hoping I can reload the archived indexes in future if needed.

Not sure if there is a standard way to archive the indexes using
 Lucene.

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 21 22:32:43 2008
Return-Path: <java-user-return-32133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37438 invoked from network); 21 Jan 2008 22:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2008 22:32:43 -0000
Received: (qmail 47009 invoked by uid 500); 21 Jan 2008 22:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46981 invoked by uid 500); 21 Jan 2008 22:32:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46970 invoked by uid 99); 21 Jan 2008 22:32:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 14:32:26 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Jan 2008 22:31:59 +0000
Received: (qmail 59947 invoked by uid 60001); 21 Jan 2008 22:32:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=1N0C/4AEP09V0OzYnEZqlcMf6NbM5w4N2M05DHXCqAqWnnRYdtDRP48AwKmD6ouHg+nE78UI2L6SS2KosxFTqkwAa9BVjgkFVRG6+TfrXM9TrirDwqy3vaJblU98Ks1VXfvWq0KswNIsLeQjGmnNLl7BL7ntNxABEPUsViUKEeI=;
X-YMail-OSG: i_IFkJIVM1l2lCU3GjI_YroLm1mYKHDSNTuFfOihfdyFXJ78KUNogiy1yrE6BIVWSMCazcEaWE6r67f4LEi8.q69WYnQ4BO2leA6LmIg56HK7YffTvVp1SeMar5xfX2EpxK8q0bbNYkhVqg-
Received: from [70.107.147.23] by web50310.mail.re2.yahoo.com via HTTP; Mon, 21 Jan 2008 14:32:03 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Mon, 21 Jan 2008 14:32:03 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Archiving Index using partitions
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <435702.59677.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Why not just design your system to roll over to a new index on a weekly a basis (new IndexWriter on a new index dir, roughly speaking)?  You can't partition a single Document, if that is what you are asking.  But you can create multiple smaller (e.g. weekly indices) instead one large one, and then every 2 weeks archive the one > 2 weeks old.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, January 21, 2008 3:06:50 PM
Subject: Archiving Index using partitions

Hi,

 As a requirement I need to be able to archive any indexes older than
2 weeks (due to space and performance reasons). That means I would
need to maintain weekly indexes. Here are my questions,

1) What's the best way to partition indexes using Lucene?
2) Is there a way I can partition documents, but not indexes? I don't
want each partitioned index to be a full index, as that would be waste
of space. We collect over 10K new documents per min (with each
document around 250 bytes).
3) Is ParallelMultiSearcher the way to go for partitioned indexes? Do
I ever have to merge these partitioned indexes?
4) I'm hoping I can reload the archived indexes in future if needed.

Not sure if there is a standard way to archive the indexes using
 Lucene.

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 01:24:41 2008
Return-Path: <java-user-return-32134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93109 invoked from network); 22 Jan 2008 01:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 01:24:41 -0000
Received: (qmail 66855 invoked by uid 500); 22 Jan 2008 01:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66815 invoked by uid 500); 22 Jan 2008 01:24:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66804 invoked by uid 99); 22 Jan 2008 01:24:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 17:24:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 Jan 2008 01:23:59 +0000
Received: (qmail 78730 invoked from network); 21 Jan 2008 23:02:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=RKB47H+asQre5UleA+5bZqGQuEm3egITgEj4u8f+6N0WHDSpHICXiAUKq5zKN4fxIWcyforjW//M24vRIjUxh5KgIun5bZBQGlr0y9R6N4xiYiN4ofi8HF6vpcky1p0I2lAYO8KFDjG+2T3trE4ONTAyt+9MdrwubWbHoobF0hw=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 21 Jan 2008 23:02:28 -0000
X-YMail-OSG: xZjmy4kVM1nc91haCulRBuEz8L9xkMpMMJW1YCrfh31bJwDLKSblBzpsfyJdqWuKW27wDn7c_Q--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4795247D.7010000@yahoo.co.uk>
Date: Mon, 21 Jan 2008 23:02:21 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Matching w/in X% ?
References: <944828.12384.qm@web50302.mail.re2.yahoo.com>
In-Reply-To: <944828.12384.qm@web50302.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

See BooleanQuery.setMinimumNumberShouldMatch.
Add the addresses as "SHOULD" termQuery clauses and set 
minumumNumberShouldMatch to the required value.

Cheers
Mark
> ----- Original Message ----
> From: Michael Prichard <michael_prichard@mac.com>
> To: java-user@lucene.apache.org
> Sent: Monday, January 21, 2008 3:38:14 PM
> Subject: Matching w/in X% ?
>
> Say I have a field of To addresses from an email archive.  I do a
>  search and I get 10 To addresses for a single hit.  Then I want to find
>  similar email with the To addresses containing roughly 75% of those email
>  addresses as well.  How would I do this?
>
> In other words:
> I get a result with:
> To:  foo@bar.com, foo2@bar.com, foo3@bar.com, foo4@bar.com,
>  foo5@bar.com, foo6@bar.com
>
> Now I want to find similar emails with 75% of this addresses in the To
>  field.....
>
> Thanks!
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 07:05:15 2008
Return-Path: <java-user-return-32135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75444 invoked from network); 22 Jan 2008 07:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 07:05:14 -0000
Received: (qmail 66843 invoked by uid 500); 22 Jan 2008 07:04:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66812 invoked by uid 500); 22 Jan 2008 07:04:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66801 invoked by uid 99); 22 Jan 2008 07:04:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 23:04:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.28 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 07:04:32 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0M74ahV096727
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 08:04:36 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <38641EDB-3D8F-4FEE-B8AF-34443F2901E2@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <F8E386B54CE3E6408F3A32ABB9A7908A7E6957@hai02.hippointern.lan>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Reusing indexed and analyzed documents
Date: Tue, 22 Jan 2008 08:04:36 +0100
References: <F8E386B54CE3E6408F3A32ABB9A7908A7E6957@hai02.hippointern.lan>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


21 jan 2008 kl. 16.37 skrev Ard Schrijvers:

> is there a way to reuse a Lucene document which was indexed and  
> analyzed
> before, but only one single Field has changed?

I don't think you can reuse document instances like that, you could  
however pre-tokenize them fields that will stay the same and reuse the  
tokens in all documens (fields), perhaps using a CachingTokenFilter.

http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/document/Field.html#Field(java.lang.String,%20org.apache.lucene.analysis.TokenStream)


-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 07:12:05 2008
Return-Path: <java-user-return-32136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78412 invoked from network); 22 Jan 2008 07:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 07:12:04 -0000
Received: (qmail 81238 invoked by uid 500); 22 Jan 2008 07:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81196 invoked by uid 500); 22 Jan 2008 07:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81185 invoked by uid 99); 22 Jan 2008 07:11:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 23:11:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.21 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 07:11:35 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0M7BSoX045987
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 08:11:28 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <D97FFE30-2E92-42B4-A134-7CF82BD9EC90@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <38641EDB-3D8F-4FEE-B8AF-34443F2901E2@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Reusing indexed and analyzed documents
Date: Tue, 22 Jan 2008 08:11:27 +0100
References: <F8E386B54CE3E6408F3A32ABB9A7908A7E6957@hai02.hippointern.lan> <38641EDB-3D8F-4FEE-B8AF-34443F2901E2@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Forget all I said! I managed to answer a question that was not there! :)

If you have the term vectors stored it is fairly quick to re-assemble  
a token stream from the document using a TermVectorMapper. Otherwise  
it will be really slow.


-- 
karl

22 jan 2008 kl. 08.04 skrev Karl Wettin:

>
> 21 jan 2008 kl. 16.37 skrev Ard Schrijvers:
>
>> is there a way to reuse a Lucene document which was indexed and  
>> analyzed
>> before, but only one single Field has changed?
>
> I don't think you can reuse document instances like that, you could  
> however pre-tokenize them fields that will stay the same and reuse  
> the tokens in all documens (fields), perhaps using a  
> CachingTokenFilter.
>
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/document/Field.html#Field(java.lang.String,%20org.apache.lucene.analysis.TokenStream)
>
>
> -- 
> karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 07:15:10 2008
Return-Path: <java-user-return-32137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79463 invoked from network); 22 Jan 2008 07:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 07:15:10 -0000
Received: (qmail 89213 invoked by uid 500); 22 Jan 2008 07:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88984 invoked by uid 500); 22 Jan 2008 07:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88917 invoked by uid 99); 22 Jan 2008 07:14:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jan 2008 23:14:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.133.51.241] (HELO mail.hippo.nl) (213.133.51.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 07:14:45 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Reusing indexed and analyzed documents
Date: Tue, 22 Jan 2008 08:14:37 +0100
Message-ID: <F8E386B54CE3E6408F3A32ABB9A7908A7E6980@hai02.hippointern.lan>
In-Reply-To: <38641EDB-3D8F-4FEE-B8AF-34443F2901E2@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reusing indexed and analyzed documents
Thread-Index: AchcxSMkA2pcAwjTRQ6a3g+cqT5tiwAAC/CQ
References: <F8E386B54CE3E6408F3A32ABB9A7908A7E6957@hai02.hippointern.lan> <38641EDB-3D8F-4FEE-B8AF-34443F2901E2@gmail.com>
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

> 21 jan 2008 kl. 16.37 skrev Ard Schrijvers:
>=20
> > is there a way to reuse a Lucene document which was indexed and=20
> > analyzed before, but only one single Field has changed?

> Karl Wetting wrote:
> I don't think you can reuse document instances like that, you=20
> could however pre-tokenize them fields that will stay the=20
> same and reuse the tokens in all documens (fields), perhaps=20
> using a CachingTokenFilter.

I was already afraid I could not reuse document instances. Caching
pre-tokenized fields won't be a solution to our issue: for Jackrabbit
NGP (next generation persistence) we are thinking about storing path
info (a hierarchical data structure) of nodes (node+props =3D lucene
document) in the lucene index.=20

Now, to be able to still have a reasonal acceptable performance in
moving nodes (and thus possibly changing a large subtree of nodes) we
would only like to reindex the changed path of all the subnodes, thus a
single Lucene Field. The other fields stay the same, so re-indexing and
analyzing all the content would really be inefficient (impossible).=20

Aaah, I just see your next mail arriving while typing :-) I think that
exactly covers my issue,

thanks a lot Karl for your pointers!

Regards Ard

>=20
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/
javadoc/org/apache/lucene/document/Field.html#Field(java.lang.String,%20
org.apache.lucene.analysis.TokenStream)
>=20
>=20
> --
> karl
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 08:04:34 2008
Return-Path: <java-user-return-32138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93460 invoked from network); 22 Jan 2008 08:04:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 08:04:34 -0000
Received: (qmail 32545 invoked by uid 500); 22 Jan 2008 08:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32511 invoked by uid 500); 22 Jan 2008 08:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32500 invoked by uid 99); 22 Jan 2008 08:04:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 00:04:18 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 08:03:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JHE6u-0000oh-Ol
	for java-user@lucene.apache.org; Tue, 22 Jan 2008 00:03:56 -0800
Message-ID: <15014224.post@talk.nabble.com>
Date: Tue, 22 Jan 2008 00:03:56 -0800 (PST)
From: Fabrice Robini <fro@octo.com>
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
In-Reply-To: <200801212147.43414@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fro@octo.com
References: <15001250.post@talk.nabble.com> <200801212147.43414@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, I do not see an effect...

Here is my unit test that test it:

    public void testFairSimilarity() throws CorruptIndexException,
IOException, ParseException
    {
        Directory theDirectory = new RAMDirectory();
        Analyzer theAnalyzer = new FrenchAnalyzer();
        
        IndexWriter theIndexWriter = new IndexWriter(theDirectory,
theAnalyzer);
        theIndexWriter.setSimilarity(new FairSimilarity());
        
        Document doc1 = new Document();
        Field name1 = new Field(" NAME", "SHORT_SUITE", Field.Store.YES,
Field.Index.UN_TOKENIZED);
        Field content1 = new Field("CONTENT", "x 2 3 4 5 6 7 8 9 10",
Field.Store.NO, Field.Index.TOKENIZED);
        doc1.add(name1);
        doc1.add(content1);        
        theIndexWriter.addDocument(doc1);
        
        Document doc2 = new Document();
        Field name2 = new Field(" NAME", "BIG_SUITE", Field.Store.YES,
Field.Index.UN_TOKENIZED);
        Field content2 = new Field("CONTENT", "x x 3 4 5 6 7 8 9 10 11 12 13
14 15 16 17 18 19 20", Field.Store.NO, Field.Index.TOKENIZED);
        doc1.add(name2);
        doc1.add(content2);        
        theIndexWriter.addDocument(doc2);
        
        Searcher searcher = new IndexSearcher(theDirectory);
        searcher.setSimilarity(new FairSimilarity());

        QueryParser queryParser = new QueryParser("CONTENT", theAnalyzer);

        Hits hits = searcher.search(queryParser.parse("x"));

        assertEquals(2, hits.length());
        assertEquals("BIG_SUITE", hits.doc(0).get("NAME"));
        assertEquals("SHORT_SUITE", hits.doc(1).get("NAME"));
    }

Is there anything wrong ?
Thanks a lot,

Fabrice


Daniel Naber-10 wrote:
> 
> On Montag, 21. Januar 2008, Fabrice Robini wrote:
> 
>> I've tried the "fair" similarity described here
>> (http://www.nabble.com/a-%22fair%22-similarity-to5806739.html#a5806739)
>> with lucene 2.2 but it does not seems to work.
> 
> What exactly doesn't work, don't you see an effect? At least the scores 
> should change if you try with an artificial small document. Maybe you can 
> strip down your code to a small self-contained example and post it.
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Is-Fair-Similarity-working-with-lucene-2.2---tp15001250p15014224.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 08:42:30 2008
Return-Path: <java-user-return-32139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8612 invoked from network); 22 Jan 2008 08:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 08:42:29 -0000
Received: (qmail 65524 invoked by uid 500); 22 Jan 2008 08:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65488 invoked by uid 500); 22 Jan 2008 08:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65477 invoked by uid 99); 22 Jan 2008 08:42:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 00:42:13 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FUZZY_CREDIT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 08:41:48 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JV100JA1ETS0Y@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 22 Jan 2008 09:41:52 +0100 (MET)
Date: Tue, 22 Jan 2008 09:41:52 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
In-reply-to: <4794F518.80804@gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: 8BIT
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
 <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
 <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
 <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk>
 <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com>
 <4794F518.80804@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2008-01-21 at 11:40 -0800, Michael Busch wrote:
> what kind of queries are you using for your tests? (num query terms,
> booleans clauses, phrases, wildcards?)

No numbers (at least not parsed as numbers), no ranges, some wildcards,
some phrases. The only non-trivial part of the queries is that we use
group expansion so that searches for title:something gets expanded to
(title_type1:something or title_type2:something ...).

The query-parsing takes about 20-40 seconds in total for 470.000
queries. The average number of hits/search is around 5000 with the
classic long tail of a few searches giving millions of hits and a lot of
searches giving hundreds of hits.

Some of the queries are listed below. The majority of queries are simple
with two or three words. Without any qualifiers, the query parser
expands the entered strings to a search in 7 fields.

kreditaftale*
brns relationer  lma_long:"bog" su_dk:"undersgelser"
detecting information content of corparate announcements using vaiance
increases
Three sisters
author_normalised:"Kittelsen, Theodor"
Cherry garden
kultur fortllinger
Salinger lma_long:"bog" llang:"eng"
hornsleth kristian 
templars
templars
borgerskabet
Civillproces
uddannelse
brn dd su_dk:"sorg" su_dk:"ddsfald" su_dk:"erindringer"
turen gr til 
biblioteker integration 
plutarch fjender
Danske prster og biskopper om kirkelige vielser af homoseksuelle 
pendul* author_normalised:"poe edgar allan"
(china economy ) lma_long:"ebog"
(foucault NOT pendul) lma_long:"tryktbog"



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 09:43:48 2008
Return-Path: <java-user-return-32140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37731 invoked from network); 22 Jan 2008 09:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 09:43:48 -0000
Received: (qmail 17586 invoked by uid 500); 22 Jan 2008 09:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17546 invoked by uid 500); 22 Jan 2008 09:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17535 invoked by uid 99); 22 Jan 2008 09:43:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 01:43:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 09:43:04 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1050696hub.15
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 01:43:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=uHqVcDklmFByBLOWZ60Dq06is2RG8kLYFqG7fv3KBTU=;
        b=qIrLQiQ7xx1XZpouiu3QxtbI44X55Czb8tAVsjcsIdryM4bjNnUPB6xXzRlH2KUlWVPYEGg0ML/Tg3jvnCuXYP3vfzD2f4cQbbpvCQiSuMjoT3HDxZSFlqYCzNfFegcUor9WU3N66qqqfdzzjekASlXAsp1N0UzOYYjcNxM6UAI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IC8oDy9s7fG40Aiq4Bs3uthaw50M1jpkxzajSatPJZH9Cdz7WzqBYDCXhzcQDp1jmSPaxT9xVUbH9tZ4PLLe69CHfqr28c2SID7dWfzcRDLxmsHa51k9aN/gDd1yJBpgjbC2vq+Ns1m7BHsZzSgD9/+8bfoU5fcAQ7c++oPZc88=
Received: by 10.82.146.14 with SMTP id t14mr14369831bud.9.1200994989108;
        Tue, 22 Jan 2008 01:43:09 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 22 Jan 2008 01:43:09 -0800 (PST)
Message-ID: <1bcb7c7f0801220143y6befdf0an3c9065be0d3efa80@mail.gmail.com>
Date: Tue, 22 Jan 2008 11:43:09 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org, lucene@mikemccandless.com
Subject: Re: delete a document from indexwriter
In-Reply-To: <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17584_28748054.1200994989103"
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com>
	 <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17584_28748054.1200994989103
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am looking at the IndexWriter source code - and I could not find a method
(private) to delete by doc id.
Where is it hiding?

Best,
-C.B.

On Jan 19, 2008 1:07 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Good question....
>
> So far, this method has not been carried over to IndexWriter because
> in general it's not really safe, since there's no way to get an
> accurate docID from IndexWriter itself.
>
> You can't really "know" when IndexWriter does merges that compacts
> deletes and thus changes docIDs.  So, if you open a reader on the
> side, get a docID you want to delete, and then go and ask IndexWriter
> to delete that docID, you may in fact delete the wrong document.  In
> 2.3, where segment merges are now done with a background thread, it's
> even worse, because a merge could complete and be committed, thus
> changing docIDs, at any time...
>
> See complex discussion here:
>
>     http://markmail.org/message/wxqel3gd6cmavk5a
>
> As of 2.3, the low level infrastructure was added to IndexWriter for
> deleting by document ID, but this is not exposed publicly (this was a
> side effect of LUCENE-1112).  It's only used, internally, to delete a
> document if an exception is hit while indexing it.  In theory, you
> could then subclass IndexWriter and tap into this infrastructure to
> delete by docID, but, you're entering dangerous territory!
>
> Do you have a specific use case in mind here?  I think we'd like to
> make this option available someday in IndexWriter, but doing so now
> (when there is no way to get a "reliable" docID) seems too dangerous...
>
> Mike
>
> Cam Bazz wrote:
>
> > Hello,
> >
> > How do I delete a specific document from an indexwriter? I
> > understand there
> > is deleteDocuments(term) which deletes all the documents matching
> > the term.
> > But what if I want to delete a document that has more then one term in
> > specific. I can search the document with a boolean query, and then
> > get the
> > doc id.
> > I know that doc ids are temporary, but can I not use it for delete?
> >
> > IndexReader has a delete by doc id method, but I am not sure how to
> > use this
> > when using an indexwriter.
> >
> > Best,
> > C.B.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17584_28748054.1200994989103--

From java-user-return-32141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 10:06:09 2008
Return-Path: <java-user-return-32141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45073 invoked from network); 22 Jan 2008 10:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 10:06:09 -0000
Received: (qmail 40961 invoked by uid 500); 22 Jan 2008 10:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40777 invoked by uid 500); 22 Jan 2008 10:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40766 invoked by uid 99); 22 Jan 2008 10:05:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 02:05:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.242] (HELO hs-out-2122.google.com) (64.233.178.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 10:05:23 +0000
Received: by hs-out-2122.google.com with SMTP id 54so2080047hsz.5
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 02:05:28 -0800 (PST)
Received: by 10.142.48.14 with SMTP id v14mr3781346wfv.14.1200996327370;
        Tue, 22 Jan 2008 02:05:27 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 18sm13944503wry.17.2008.01.22.02.05.26
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 22 Jan 2008 02:05:27 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801210710m58cee38er4ebb50772b08d884@mail.gmail.com>
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com> <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com> <1bcb7c7f0801210554g1cece510kf269c9ec1d3e2ab0@mail.gmail.com> <A5BAB26F-2404-44B9-843F-B5B41B9E92C9@mikemccandless.com> <1bcb7c7f0801210651s64ccfb3n11b4327b5096f00a@mail.gmail.com> <2760E7BF-85D5-493D-8471-69833B7A4F0D@mikemccandless.com> <1bcb7c7f0801210710m58cee38er4ebb50772b08d884@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EBFF2D7A-A0FD-4F98-A34E-F454F70FE890@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: delete a document from indexwriter
Date: Tue, 22 Jan 2008 05:05:49 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Cam Bazz wrote:

> Yes, I noticed
> http://www.archivum.info/java-dev@lucene.apache.org/2006-09/ 
> msg00065.html
>
> Somehow I gotta do my delete within the same writer. I could use  
> another
> field that combines both src and dst field, and use this field without
> storing but still a waste of resources.
>
> I wonder if IndexWriter can be modified to accept a boolean query  
> with termA
> and termB - instead of single term?

If we go this route, we should add deleteByQuery to IndexWriter,  
which I think is a good idea, but just hasn't been done yet....

It was discussed before, in the context of LUCENE-565, but never  
actually added to IndexWriter.  I think the approach would be similar  
to how IndexWriter now deletes by Term.

> I read the code until the part where deleted the term is added to a  
> hashmap,
> but could not follow on after that.

Basically, the terms are buffered into a HashMap.  Then when a flush  
happens, a SegmentReader is opened one by one on all segments, and  
the delete is applied to each segment.  Special logic is used to  
apply the delete to the just-flushed segment since you have to take  
care to only delete docIDs up until the point when the delete by term  
was called.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 10:07:28 2008
Return-Path: <java-user-return-32142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45669 invoked from network); 22 Jan 2008 10:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 10:07:27 -0000
Received: (qmail 43703 invoked by uid 500); 22 Jan 2008 10:07:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43029 invoked by uid 500); 22 Jan 2008 10:07:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43018 invoked by uid 99); 22 Jan 2008 10:07:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 02:07:11 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.236] (HELO qb-out-0506.google.com) (72.14.204.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 10:06:43 +0000
Received: by qb-out-0506.google.com with SMTP id o21so305684qba.9
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 02:06:48 -0800 (PST)
Received: by 10.142.225.11 with SMTP id x11mr3820544wfg.115.1200996407308;
        Tue, 22 Jan 2008 02:06:47 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id g9sm13922750wra.6.2008.01.22.02.06.46
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 22 Jan 2008 02:06:46 -0800 (PST)
In-Reply-To: <1bcb7c7f0801220205h22402480h920eacefca7ed17@mail.gmail.com>
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com> <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com> <1bcb7c7f0801220143y6befdf0an3c9065be0d3efa80@mail.gmail.com> <29857CEC-5C45-4488-AB5A-56C82EB0A51C@mikemccandless.com> <1bcb7c7f0801220205h22402480h920eacefca7ed17@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: multipart/alternative; boundary=Apple-Mail-2--649069997
Message-Id: <080FB191-8B02-46D0-B211-6AFF62ACA568@mikemccandless.com>
Cc: java-user@lucene.apache.org
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: delete a document from indexwriter
Date: Tue, 22 Jan 2008 05:07:09 -0500
To: "Cam Bazz" <cambazz@gmail.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-2--649069997
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


Exactly, that is the method...

Mike

Cam Bazz wrote:

> Hello,
>
> Did you mean the
>
>  synchronized private void addDeleteDocID(int docId) {
>     bufferedDeleteDocIDs.add(new Integer(docId));
>     numBytesUsed += OBJECT_HEADER_BYTES + BYTES_PER_INT +  
> OBJECT_POINTER_BYTES;
>  }
>
>
> this however does not delete document but rather marks it in  
> bufferedDeleteDocIDs right?
>
> On Jan 22, 2008 11:51 AM, Michael McCandless <  
> lucene@mikemccandless.com> wrote:
>
> Woops, sorry, it's hiding in DocumentsWriter: the addDeleteDocID
> method.
>
> And, it's private.  So you will actually have to modify the Lucene
> core sources (not just subclass IndexWriter) to experiment with
> deleting by docID in IndexWriter.  If you find a clean way to safely
> expose this functionality, please post back with your results!
>
> Mike
>
> Cam Bazz wrote:
>
>> I am looking at the IndexWriter source code - and I could not find  
>> a method (private) to delete by doc id.
>> Where is it hiding?
>>
>> Best,
>> - C.B.
>>
>> On Jan 19, 2008 1:07 PM, Michael McCandless <  
>> lucene@mikemccandless.com> wrote:
>>
>> Good question....
>>
>> So far, this method has not been carried over to IndexWriter because
>> in general it's not really safe, since there's no way to get an
>> accurate docID from IndexWriter itself.
>>
>> You can't really "know" when IndexWriter does merges that compacts
>> deletes and thus changes docIDs.  So, if you open a reader on the
>> side, get a docID you want to delete, and then go and ask IndexWriter
>> to delete that docID, you may in fact delete the wrong document.  In
>> 2.3 , where segment merges are now done with a background thread,  
>> it's
>> even worse, because a merge could complete and be committed, thus
>> changing docIDs, at any time...
>>
>> See complex discussion here:
>>
>>     http://markmail.org/message/wxqel3gd6cmavk5a
>>
>> As of 2.3, the low level infrastructure was added to IndexWriter for
>> deleting by document ID, but this is not exposed publicly (this was a
>> side effect of LUCENE-1112).  It's only used, internally, to delete a
>> document if an exception is hit while indexing it.  In theory, you
>> could then subclass IndexWriter and tap into this infrastructure to
>> delete by docID, but, you're entering dangerous territory!
>>
>> Do you have a specific use case in mind here?  I think we'd like to
>> make this option available someday in IndexWriter, but doing so now
>> (when there is no way to get a "reliable" docID) seems too  
>> dangerous...
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>> > Hello,
>> >
>> > How do I delete a specific document from an indexwriter? I
>> > understand there
>> > is deleteDocuments(term) which deletes all the documents matching
>> > the term.
>> > But what if I want to delete a document that has more then one  
>> term in
>> > specific. I can search the document with a boolean query, and then
>> > get the
>> > doc id.
>> > I know that doc ids are temporary, but can I not use it for delete?
>> >
>> > IndexReader has a delete by doc id method, but I am not sure how to
>> > use this
>> > when using an indexwriter.
>> >
>> > Best,
>> > C.B.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>


--Apple-Mail-2--649069997--

From java-user-return-32143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 10:08:55 2008
Return-Path: <java-user-return-32143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46310 invoked from network); 22 Jan 2008 10:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 10:08:55 -0000
Received: (qmail 46683 invoked by uid 500); 22 Jan 2008 10:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46659 invoked by uid 500); 22 Jan 2008 10:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46648 invoked by uid 99); 22 Jan 2008 10:08:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 02:08:38 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 10:08:11 +0000
Received: by py-out-1112.google.com with SMTP id a73so2931716pye.9
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 02:08:15 -0800 (PST)
Received: by 10.110.14.12 with SMTP id 12mr3341793tin.1.1200996493614;
        Tue, 22 Jan 2008 02:08:13 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h18sm31327396wxd.18.2008.01.22.02.08.12
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 22 Jan 2008 02:08:13 -0800 (PST)
In-Reply-To: <1bcb7c7f0801220201n4c379f3cnd3a1e233e3fa24f0@mail.gmail.com>
References: <1bcb7c7f0801180622o4892e31ewface3dc14b63ac92@mail.gmail.com> <EF1C7341-7557-490B-93F6-DECECBF8BF8B@mikemccandless.com> <1bcb7c7f0801220143y6befdf0an3c9065be0d3efa80@mail.gmail.com> <29857CEC-5C45-4488-AB5A-56C82EB0A51C@mikemccandless.com> <1bcb7c7f0801220201n4c379f3cnd3a1e233e3fa24f0@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: multipart/alternative; boundary=Apple-Mail-3--648984932
Message-Id: <11F8893D-33A5-41EC-AF5A-BDD2FCA7E6E3@mikemccandless.com>
Cc: java-user@lucene.apache.org
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: delete a document from indexwriter
Date: Tue, 22 Jan 2008 05:08:34 -0500
To: Cam Bazz <cambazz@gmail.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3--648984932
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


Well, docIDs are used all over the place in the index.  Sometimes  
they key into an index file "linearly", like for stored fields and  
term vectors index files, but other times they are encoded eg in the  
posting lists.

Mike

Cam Bazz wrote:

> Yes, I have found. however it is not for reqular indexing. I am  
> using lucene as a graph database. So I add edges. An edge is a  
> document with srcId and dstId field.
> However I am using a caching scheme which employs a LRU a  
> weakHashMap and a two link lists for keeping track of reads and  
> writes. (It is not working yet, but I will tell you when it does)
>
> About doc ids being transparent. are the doc ids point to places in  
> diskspace?
>
> Best Regards,
> C.A.
>
>
>
> On Jan 22, 2008 11:51 AM, Michael McCandless <  
> lucene@mikemccandless.com> wrote:
>
> Woops, sorry, it's hiding in DocumentsWriter: the addDeleteDocID
> method.
>
> And, it's private.  So you will actually have to modify the Lucene
> core sources (not just subclass IndexWriter) to experiment with
> deleting by docID in IndexWriter.  If you find a clean way to safely
> expose this functionality, please post back with your results!
>
> Mike
>
> Cam Bazz wrote:
>
>> I am looking at the IndexWriter source code - and I could not find  
>> a method (private) to delete by doc id.
>> Where is it hiding?
>>
>> Best,
>> - C.B.
>>
>> On Jan 19, 2008 1:07 PM, Michael McCandless <  
>> lucene@mikemccandless.com> wrote:
>>
>> Good question....
>>
>> So far, this method has not been carried over to IndexWriter because
>> in general it's not really safe, since there's no way to get an
>> accurate docID from IndexWriter itself.
>>
>> You can't really "know" when IndexWriter does merges that compacts
>> deletes and thus changes docIDs.  So, if you open a reader on the
>> side, get a docID you want to delete, and then go and ask IndexWriter
>> to delete that docID, you may in fact delete the wrong document.  In
>> 2.3 , where segment merges are now done with a background thread,  
>> it's
>> even worse, because a merge could complete and be committed, thus
>> changing docIDs, at any time...
>>
>> See complex discussion here:
>>
>>     http://markmail.org/message/wxqel3gd6cmavk5a
>>
>> As of 2.3, the low level infrastructure was added to IndexWriter for
>> deleting by document ID, but this is not exposed publicly (this was a
>> side effect of LUCENE-1112).  It's only used, internally, to delete a
>> document if an exception is hit while indexing it.  In theory, you
>> could then subclass IndexWriter and tap into this infrastructure to
>> delete by docID, but, you're entering dangerous territory!
>>
>> Do you have a specific use case in mind here?  I think we'd like to
>> make this option available someday in IndexWriter, but doing so now
>> (when there is no way to get a "reliable" docID) seems too  
>> dangerous...
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>> > Hello,
>> >
>> > How do I delete a specific document from an indexwriter? I
>> > understand there
>> > is deleteDocuments(term) which deletes all the documents matching
>> > the term.
>> > But what if I want to delete a document that has more then one  
>> term in
>> > specific. I can search the document with a boolean query, and then
>> > get the
>> > doc id.
>> > I know that doc ids are temporary, but can I not use it for delete?
>> >
>> > IndexReader has a delete by doc id method, but I am not sure how to
>> > use this
>> > when using an indexwriter.
>> >
>> > Best,
>> > C.B.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>


--Apple-Mail-3--648984932--

From java-user-return-32144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 10:24:46 2008
Return-Path: <java-user-return-32144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51864 invoked from network); 22 Jan 2008 10:24:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 10:24:46 -0000
Received: (qmail 78028 invoked by uid 500); 22 Jan 2008 10:24:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77998 invoked by uid 500); 22 Jan 2008 10:24:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77987 invoked by uid 99); 22 Jan 2008 10:24:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 02:24:29 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FUZZY_CREDIT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 10:24:02 +0000
Received: by an-out-0708.google.com with SMTP id c5so572619anc.49
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 02:24:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=6vvAsG0nXA1vdk/S881nIBij0NpIaTsoTwaK0aCiSP8=;
        b=O1j1ysyG0he8o7armV5DIv8IP+jtqBzbMrOQCoE8KzfrMM8YFDfJ+bHD6L7Q80MRTO9JmTc2boMInF6QVXZBA2Tk2UDVmZ0+Qh4uo/+wS2zNv7xZFo15PoaYVC8HfKtqkgEJd4Pa/86ZrBu8EGQMOH2QNaraVGrZQ86oHah83BE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YwpI2OlK7EZOmFvEXvZt4Avu3EWNLjA10tv0E4K5jgVEf+gNH8CdgjhapRSNCl6QFCBx4GLOIU/DQ4x3V+T/XZjLMJYFBNrOBl3ckv9AQdE5eVaXV9yT6t2cr+BLlHst3tH/e320mdZ3W6Vdx54B+auJTzMOP3imZfaMgUbSJvk=
Received: by 10.100.171.10 with SMTP id t10mr17108044ane.58.1200997448046;
        Tue, 22 Jan 2008 02:24:08 -0800 (PST)
Received: from ?192.168.1.102? ( [70.137.143.100])
        by mx.google.com with ESMTPS id z26sm12714248ele.12.2008.01.22.02.24.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 22 Jan 2008 02:24:07 -0800 (PST)
Message-ID: <4795C3DC.5000101@gmail.com>
Date: Tue, 22 Jan 2008 02:22:20 -0800
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
 IndexReader?)
References: <332767.18403.qm@web50301.mail.re2.yahoo.com> <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com> <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk> <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com> <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk> <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com> <4794F518.80804@gmail.com> <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk>
In-Reply-To: <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your detailed answer, Toke! Is your default operator AND or OR?

Toke Eskildsen wrote:
> On Mon, 2008-01-21 at 11:40 -0800, Michael Busch wrote:
>> what kind of queries are you using for your tests? (num query terms,
>> booleans clauses, phrases, wildcards?)
> 
> No numbers (at least not parsed as numbers), no ranges, some wildcards,
> some phrases. The only non-trivial part of the queries is that we use
> group expansion so that searches for title:something gets expanded to
> (title_type1:something or title_type2:something ...).
> 
> The query-parsing takes about 20-40 seconds in total for 470.000
> queries. The average number of hits/search is around 5000 with the
> classic long tail of a few searches giving millions of hits and a lot of
> searches giving hundreds of hits.
> 
> Some of the queries are listed below. The majority of queries are simple
> with two or three words. Without any qualifiers, the query parser
> expands the entered strings to a search in 7 fields.
> 
> kreditaftale*
> brns relationer  lma_long:"bog" su_dk:"undersgelser"
> detecting information content of corparate announcements using vaiance
> increases
> Three sisters
> author_normalised:"Kittelsen, Theodor"
> Cherry garden
> kultur fortllinger
> Salinger lma_long:"bog" llang:"eng"
> hornsleth kristian 
> templars
> templars
> borgerskabet
> Civillproces
> uddannelse
> brn dd su_dk:"sorg" su_dk:"ddsfald" su_dk:"erindringer"
> turen gr til 
> biblioteker integration 
> plutarch fjender
> Danske prster og biskopper om kirkelige vielser af homoseksuelle 
> pendul* author_normalised:"poe edgar allan"
> (china economy ) lma_long:"ebog"
> (foucault NOT pendul) lma_long:"tryktbog"
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 10:31:27 2008
Return-Path: <java-user-return-32145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54424 invoked from network); 22 Jan 2008 10:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 10:31:27 -0000
Received: (qmail 87802 invoked by uid 500); 22 Jan 2008 10:31:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87764 invoked by uid 500); 22 Jan 2008 10:31:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87753 invoked by uid 99); 22 Jan 2008 10:31:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 02:31:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 10:30:59 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JV100JI3JVG0Y@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 22 Jan 2008 11:30:52 +0100 (MET)
Date: Tue, 22 Jan 2008 11:30:52 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
In-reply-to: <4795C3DC.5000101@gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1200997852.9514.226.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
 <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
 <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
 <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk>
 <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com>
 <4794F518.80804@gmail.com>
 <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk>
 <4795C3DC.5000101@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-01-22 at 02:22 -0800, Michael Busch wrote:
>  Is your default operator AND or OR?

AND


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 11:10:44 2008
Return-Path: <java-user-return-32146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67457 invoked from network); 22 Jan 2008 11:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 11:10:44 -0000
Received: (qmail 37000 invoked by uid 500); 22 Jan 2008 11:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36968 invoked by uid 500); 22 Jan 2008 11:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36957 invoked by uid 99); 22 Jan 2008 11:10:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 03:10:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 11:10:00 +0000
Received: by an-out-0708.google.com with SMTP id c5so575341anc.49
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 03:10:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=2yGSA+n3Yk1fAwJ4uYFogz6EtBDMSOGSRzo4lDhhGLM=;
        b=sbIHFnXnu6hJcIsmh/2xZOMYSW5X9nzSPog9MPzs7AHLKWBpsGSR0Fs/BlIXgZ59IYbv6n6kaxX8lJbPOQI2FpNB1wlG4TYeHy+zF6VXgpJoCRTlQz4FRv7iPS7uyPGhxaPd20ERAwjUa+FWM+G+D79DSuKzwpG4ZIWw29cvy0Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Y+ufyLkp+WvSsaYHRvH7Vjs5pTtMUaO6X2q1isEpSLjtcBRDXMggbjSv8qxTViGp29FoUrpkFMuBC4fKF/2I3WP7vLzy7d3W0LTIUpsUFYJ9r7AXcpsl7lNypWr6XHOtqYG9wGMC85dy6tuB80LURKwZ40DlCbCwHom5W1OIROA=
Received: by 10.100.206.11 with SMTP id d11mr17160934ang.98.1201000207020;
        Tue, 22 Jan 2008 03:10:07 -0800 (PST)
Received: from ?192.168.1.102? ( [70.137.143.100])
        by mx.google.com with ESMTPS id r28sm12800830ele.0.2008.01.22.03.10.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 22 Jan 2008 03:10:05 -0800 (PST)
Message-ID: <4795CEA3.9030703@gmail.com>
Date: Tue, 22 Jan 2008 03:08:19 -0800
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
 IndexReader?)
References: <332767.18403.qm@web50301.mail.re2.yahoo.com> <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com> <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk> <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com> <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk> <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com> <4794F518.80804@gmail.com> <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk> <4795C3DC.5000101@gmail.com> <1200997852.9514.226.camel@PC990.sb.statsbiblioteket.dk>
In-Reply-To: <1200997852.9514.226.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

OK, then Yonik might be right about the multi-level skiplists code which
is new in 2.2. I'd love to see the performance numbers of the same index
built with 2.3, if possible? You could simply migrate it to 2.3 by using
IndexWriter.addIndexes().

In my performance tests (LUCENE-866) I measured an average performance
gain of 20% for AND queries. Of course, if you run 2.3 against an index
built with 2.1, then the more complex multi-level skiplist code gets
executed on the simpler 2.1 data structures. However, I don't think the
slowdown should be that big (13%). I'll look into the code tomorrow
(have to go to bed now, it's 3am), maybe I can find something out.

Toke Eskildsen wrote:
> On Tue, 2008-01-22 at 02:22 -0800, Michael Busch wrote:
>>  Is your default operator AND or OR?
> 
> AND
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 14:52:52 2008
Return-Path: <java-user-return-32147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55528 invoked from network); 22 Jan 2008 14:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 14:52:52 -0000
Received: (qmail 38668 invoked by uid 500); 22 Jan 2008 14:52:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38591 invoked by uid 500); 22 Jan 2008 14:52:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38534 invoked by uid 99); 22 Jan 2008 14:52:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 06:52:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of abhinavmail02@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 14:52:01 +0000
Received: by wr-out-0506.google.com with SMTP id c46so819909wra.14
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 06:52:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=piJJcFzWR/CISujaMowzTLYNVCkPMsQxzbPoqqfhxp4=;
        b=P+urLlogD0jn+mlUBqvzWBrPMje/asyOZ6X2oYlm8fRGs7vxhad5K+4bAbrXsJE+kvbPzNVpZP2biIIQRjod5RVRXFPZoGlzQ/SsZTAV0930Qt0GXupViosYfyOi920+9HiCkVa5MUgfJDTE+KCkMsjLlwAq7c9oc81dhx9zcmM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=jXRewAF+BmidIEiS66s8JJBFK3nsjwEILQPmjJW7L0DpwUgd3xK5adgMLPgzgF1PfiaxOaJTR0UrfjboaxPWNqgiFqUgwNgLe9/elrrK9ngTr4tP/IXZj16L5f4nBDSf04iV1bBInkLb3kqTjNOT75qxl702Gn9dtKZbKuCgGUI=
Received: by 10.142.158.17 with SMTP id g17mr4062014wfe.106.1201013526131;
        Tue, 22 Jan 2008 06:52:06 -0800 (PST)
Received: by 10.142.200.10 with HTTP; Tue, 22 Jan 2008 06:52:06 -0800 (PST)
Message-ID: <5df7f3ab0801220652v7556b00fgfc77e98a624c1159@mail.gmail.com>
Date: Tue, 22 Jan 2008 20:22:06 +0530
From: "abhinav pandey" <abhinavmail02@gmail.com>
To: java-user@lucene.apache.org
Subject: svnversion not found...help!!!
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6646_1856392.1201013526118"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6646_1856392.1201013526118
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hey i m encountering this error...while compiling lucene 2.2.0

Buildfile: build.xml
javacc-uptodate-check:
javacc-notice:
init:
clover.setup:
clover.info:
     [echo]
     [echo]       Clover not found. Code coverage reports disabled.
     [echo]
clover:
common.compile-core:
    [mkdir] Created dir: /home/gen/lucene/lucene-2.2.0/build/classes/java
    [javac] Compiling 234 source files to /home/gen/lucene/lucene-2.2.0
/build/classes/java
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
compile-core:
     [rmic] RMI Compiling 1 class to /home/gen/lucene/lucene-2.2.0
/build/classes/java
jar-core:
     [exec] Execute failed: java.io.IOException: Cannot run program
"svnversion": java.io.IOException: error=2, No such file or directory
      [jar] Building jar: /home/gen/lucene/lucene-2.2.0/build/lucene-
core-2.2.0.jar
default:
BUILD SUCCESSFUL
Total time: 6 seconds

and my jar files are not created...wt to do?

------=_Part_6646_1856392.1201013526118--

From java-user-return-32148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 16:17:41 2008
Return-Path: <java-user-return-32148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61726 invoked from network); 22 Jan 2008 16:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 16:17:41 -0000
Received: (qmail 85938 invoked by uid 500); 22 Jan 2008 16:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85918 invoked by uid 500); 22 Jan 2008 16:17:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85907 invoked by uid 99); 22 Jan 2008 16:17:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 08:17:24 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sriks6711@bluebottle.com designates 206.188.25.14 as permitted sender)
Received: from [206.188.25.14] (HELO mi1.bluebottle.com) (206.188.25.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 16:17:08 +0000
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by mi1.bluebottle.com (8.13.1/8.13.1) with ESMTP id m0MGGxv6012643
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 08:16:59 -0800
DomainKey-Signature: a=rsa-sha1; s=mail; d=bluebottle.com; c=nofws; q=dns;
	h=received:date:from:reply-to:organization:user-agent:
	mime-version:to:subject:references:in-reply-to:content-type:
	content-transfer-encoding:x-trusted-delivery;
	b=f277XeAzfiZVoXj80AwsGtU/Rcji2zpc+KRipB7Biuw7fnkVbbMYoD8Pch/z6c2My
	+0SY9Zh7xEExhulg9PaaG2gw0/bTMG4IU9JcluyYmfUrculD1MHJAISgR+lPIKL
Message-Id: <200801221616.m0MGGxv6012643@mi1.bluebottle.com>
Received: from [59.93.118.151] ([59.93.118.151])
	(authenticated bits=0)
	by fe1.bluebottle.com (8.13.1/8.13.1) with ESMTP id m0MGGpQJ003663
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Tue, 22 Jan 2008 08:16:58 -0800
Date: Tue, 22 Jan 2008 21:46:38 +0530
From: Srikant Jakilinki <sriks6711@bluebottle.com>
Reply-To: sriks6711@gmail.com
Organization: JVS Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
References: <15001250.post@talk.nabble.com> <200801212147.43414@danielnaber.de> <15014224.post@talk.nabble.com>
In-Reply-To: <15014224.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Trusted-Delivery: <c9f8d858075afd17d50354fbec428e28>
X-Virus-Checked: Checked by ClamAV on apache.org

Well, I cant seem to even get past the assertions of this code.

The first assertion is failing in that I get 0 hits. I am using 
SimpleAnalyzer since I do not have a FrenchAnalyzer.

Any thoughts?
Srikant

Fabrice Robini wrote:
> Yes, I do not see an effect...
>
> Here is my unit test that test it:
>

----------------------------------------------------------------------
Get a free email account with anti spam protection.
http://www.bluebottle.com/tag/2


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 17:02:49 2008
Return-Path: <java-user-return-32149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95994 invoked from network); 22 Jan 2008 17:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 17:02:49 -0000
Received: (qmail 89137 invoked by uid 500); 22 Jan 2008 17:02:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89095 invoked by uid 500); 22 Jan 2008 17:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89084 invoked by uid 99); 22 Jan 2008 17:02:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 09:02:32 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 17:02:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JHMVm-0003tK-I8
	for java-user@lucene.apache.org; Tue, 22 Jan 2008 09:02:10 -0800
Message-ID: <15023062.post@talk.nabble.com>
Date: Tue, 22 Jan 2008 09:02:10 -0800 (PST)
From: Fabrice Robini <fro@octo.com>
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
In-Reply-To: <200801221616.m0MGGxv6012643@mi1.bluebottle.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fro@octo.com
References: <15001250.post@talk.nabble.com> <200801212147.43414@danielnaber.de> <15014224.post@talk.nabble.com> <200801221616.m0MGGxv6012643@mi1.bluebottle.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Oooops sorry, bad cut/paste...

Here is the right one :-)

    public void testFairSimilarity() throws CorruptIndexException,
IOException, ParseException
    {
        Directory theDirectory = new RAMDirectory();
        Analyzer theAnalyzer = new StandardAnalyzer();
        
        IndexWriter theIndexWriter = new IndexWriter(theDirectory,
theAnalyzer);
        theIndexWriter.setSimilarity(new FairSimilarity());
        
        Document doc1 = new Document();
        Field name1 = new Field("NAME", "SHORT_SUITE", Field.Store.YES,
Field.Index.UN_TOKENIZED);
        Field content1 = new Field("CONTENT", "x 2 3 4 5 6 7 8 9 10",
Field.Store.NO, Field.Index.TOKENIZED);
        doc1.add(name1);
        doc1.add(content1);        
        theIndexWriter.addDocument(doc1);
        
        Document doc2 = new Document();
        Field name2 = new Field("NAME", "BIG_SUITE", Field.Store.YES,
Field.Index.UN_TOKENIZED);
        Field content2 = new Field("CONTENT", "x x 3 4 5 6 7 8 9 10 11 12 13
14 15 16 17 18 19 20", Field.Store.NO, Field.Index.TOKENIZED);
        doc2.add(name2);
        doc2.add(content2);        
        theIndexWriter.addDocument(doc2);
        
        theIndexWriter.close();
        
        Searcher searcher = new IndexSearcher(theDirectory);
        searcher.setSimilarity(new FairSimilarity());

        QueryParser queryParser = new QueryParser("CONTENT", theAnalyzer);

        Hits hits = searcher.search(queryParser.parse("x"));

        assertEquals(2, hits.length());
        assertEquals("BIG_SUITE", hits.doc(0).get("NAME"));
        assertEquals("SHORT_SUITE", hits.doc(1).get("NAME"));
    }
    



Srikant Jakilinki-3 wrote:
> 
> Well, I cant seem to even get past the assertions of this code.
> 
> The first assertion is failing in that I get 0 hits. I am using 
> SimpleAnalyzer since I do not have a FrenchAnalyzer.
> 
> Any thoughts?
> Srikant
> 
> Fabrice Robini wrote:
>> Yes, I do not see an effect...
>>
>> Here is my unit test that test it:
>>
> 
> ----------------------------------------------------------------------
> Get a free email account with anti spam protection.
> http://www.bluebottle.com/tag/2
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Is-Fair-Similarity-working-with-lucene-2.2---tp15001250p15023062.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 17:37:38 2008
Return-Path: <java-user-return-32150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10642 invoked from network); 22 Jan 2008 17:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 17:37:37 -0000
Received: (qmail 73848 invoked by uid 500); 22 Jan 2008 17:37:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73809 invoked by uid 500); 22 Jan 2008 17:37:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73794 invoked by uid 99); 22 Jan 2008 17:37:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 09:37:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 17:36:56 +0000
Received: by mu-out-0910.google.com with SMTP id g7so2043696muf.0
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 09:37:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=PuPhWng4CGoZysWNP+ddiUoOdmtBigwJdmK0N4mun7g=;
        b=wYN4umok3D80Yp9GRbQAlHby5mjsGqwBj0WOsRMMDup4pGLTKTDvX/Pikzjn/CigfrSuEAvzX34WKmezVF/6VOaPaFoft9jAP32q69AtPGrs8XheFJ6OcnpYae5DOlZ2ZUIM+9prsPJ+o6K8eOf0mbQ1MZ82MVGxBvHz62w5oZA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=fn6dm0d3B4vLRYCP28H1KPAGkngC7qs4QxJQyVO8P3778XgDmUqxmkFtFyqWefFyK0LSp+D1fFYODK5UtUMVvF6+VVm11coonrhCF50zSNozBOeuDvryKuTeV9hHMo6BXRQjQY6q3UJFjgXukPIP+AihHpY3C+KNva4w1S9C3yg=
Received: by 10.82.124.10 with SMTP id w10mr15214310buc.33.1201023420827;
        Tue, 22 Jan 2008 09:37:00 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Tue, 22 Jan 2008 09:37:00 -0800 (PST)
Message-ID: <1bcb7c7f0801220937m222598cdp95b22cc517950e30@mail.gmail.com>
Date: Tue, 22 Jan 2008 19:37:00 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: HitCollector
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19337_10913609.1201023420820"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19337_10913609.1201023420820
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Could someone show me a concrete example of how to use HitCollector?
I have documents which have a field category. When I run a query, I need to
sort results by category as well as count how many hits are there for a
given category.

I understand:

searcher.search(Query, new HitCollector() {
   public void collect(int docnum, float score) {
     bitSet.add(docNum);
  }
}
);


So we now have a bitset that contains docnums.

How do we do sorting and filtering over this, and why is it more efficient
to do it from hits?

Best Regards,
-C.B.

------=_Part_19337_10913609.1201023420820--

From java-user-return-32151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 18:32:48 2008
Return-Path: <java-user-return-32151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58732 invoked from network); 22 Jan 2008 18:32:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 18:32:48 -0000
Received: (qmail 10265 invoked by uid 500); 22 Jan 2008 18:32:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10240 invoked by uid 500); 22 Jan 2008 18:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10229 invoked by uid 99); 22 Jan 2008 18:32:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 10:32:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 18:32:06 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1825807fkz.5
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 10:32:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=mhJFwWEGY82sGFi9u6jY14izkJDvpLrnnKK453llTPE=;
        b=kzInhAAWRWq8oTiDOGFFpwHIyZ7FAyaXtltSmzpWCQgB5txnitJMfPPDj8IzZ0HYylDYtEv0l9LNNj1inVDF+KbZfoOru8dV+V6i/foRo7CtkakgJDrcov4JFQgaF+jy7BD1LGbSwAH70Qh9F4PefXISDBkKmJnX/q4SK4ldoZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dpth6YfIOrA+0h5v37XmupOdllEoYpL3x2X+uM2qh2X1U6Kz/N/3HP+uEAFJqPz/t3m0nHKoX+8GOgrM89NzW1GaSgRKSKXD+gVPBwoAu6xvwNdizZTC8tQNxNTPdht7Nm2yMKk7dzyLjag34W6YL5yTOeCL1PaChFWCDEXLoMY=
Received: by 10.82.158.12 with SMTP id g12mr15350489bue.18.1201026730678;
        Tue, 22 Jan 2008 10:32:10 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 22 Jan 2008 10:32:10 -0800 (PST)
Message-ID: <359a92830801221032l5f60bc01le5bb54dc0657a3c6@mail.gmail.com>
Date: Tue, 22 Jan 2008 13:32:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HitCollector
In-Reply-To: <1bcb7c7f0801220937m222598cdp95b22cc517950e30@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16278_8950728.1201026730670"
References: <1bcb7c7f0801220937m222598cdp95b22cc517950e30@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16278_8950728.1201026730670
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The bitset thing is just an example of a trivial operation in a
HitCollector. You'll want to do something like use TermDocs/TermEnum
to see what category your document is in and add it to some counts
you use rather than just add something to a bitset. Or see the idea
at the end of this mail.

That said, I wouldn't do any sorting here. Just use a Sort object in your
original search. You can even do primary and secondary sorts based
upon different fields. Say category first and relevance second etc.

Also, look at TopDocs.

Hits objects are optimized for getting the top 100 or so documents.
Every time you cross a boundary, you re-execute the
query for the next chunk. So, for instance, you'd re-execute
the query when you asked for doc 101, 201, 301, 401 etc. (although
I think there's been some work on the chunk size recently).

So, if you don't ever expect very many documents or if your searches
are *very* cheap, go ahead and use a Hits object. Otherwise you have
to do some extra work for efficiency if speed issues arise.

Be aware that loading the document in a HitCollector is expensive, but
you can do the lazy loading trick and/or just go directly to your indexed
Category data via TermDocs/TermEnum.

And here's a way to just use the bitset thing, depending. You could
create a filter (or a bitset) for each category for *all* your documents
and cache them. I.e. a b1 for category1, b2 for category 2 etc.
You could do this by using the TermDocs/TermEnum
classes. Then, to count how many of your current search hits
were in each category, AND the bitset from HitCollector you included in your
e-mail with each of your category bitsets and ask for the cardinality of the
result.

Best
Erick

On Jan 22, 2008 12:37 PM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello,
>
> Could someone show me a concrete example of how to use HitCollector?
> I have documents which have a field category. When I run a query, I need
> to
> sort results by category as well as count how many hits are there for a
> given category.
>
> I understand:
>
> searcher.search(Query, new HitCollector() {
>   public void collect(int docnum, float score) {
>     bitSet.add(docNum);
>  }
> }
> );
>
>
> So we now have a bitset that contains docnums.
>
> How do we do sorting and filtering over this, and why is it more efficient
> to do it from hits?
>
> Best Regards,
> -C.B.
>

------=_Part_16278_8950728.1201026730670--

From java-user-return-32152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 19:04:51 2008
Return-Path: <java-user-return-32152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71334 invoked from network); 22 Jan 2008 19:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 19:04:51 -0000
Received: (qmail 48984 invoked by uid 500); 22 Jan 2008 19:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48946 invoked by uid 500); 22 Jan 2008 19:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48935 invoked by uid 99); 22 Jan 2008 19:04:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 11:04:34 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sriks6711@bluebottle.com designates 206.188.25.15 as permitted sender)
Received: from [206.188.25.15] (HELO mi0.bluebottle.com) (206.188.25.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 19:04:20 +0000
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by mi0.bluebottle.com (8.13.1/8.13.1) with ESMTP id m0MJ837I008832
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 11:08:03 -0800
DomainKey-Signature: a=rsa-sha1; s=mail; d=bluebottle.com; c=nofws; q=dns;
	h=received:date:from:reply-to:organization:user-agent:
	mime-version:to:subject:references:in-reply-to:content-type:
	content-transfer-encoding:x-trusted-delivery;
	b=rx/0wAfP/JroC6GRgxHpyLvHrRjAkvJ2wTJSO2N84k8lnd07XtC0qbaKk8pkt3BrZ
	odAfp6hDIY6JVI7DNMix27ua8fmAYkN5vVEbFkb2OkG9hior20/L2V+3eEpBsbQ
Message-Id: <200801221908.m0MJ837I008832@mi0.bluebottle.com>
Received: from [59.93.118.151] ([59.93.118.151])
	(authenticated bits=0)
	by fe0.bluebottle.com (8.13.1/8.13.1) with ESMTP id m0MJ47Sn016834
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Tue, 22 Jan 2008 11:04:10 -0800
Date: Wed, 23 Jan 2008 00:33:54 +0530
From: Srikant Jakilinki <sriks6711@bluebottle.com>
Reply-To: sriks6711@gmail.com
Organization: JVS Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
References: <15001250.post@talk.nabble.com> <200801212147.43414@danielnaber.de> <15014224.post@talk.nabble.com> <200801221616.m0MGGxv6012643@mi1.bluebottle.com> <15023062.post@talk.nabble.com>
In-Reply-To: <15023062.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Trusted-Delivery: <1dbaeae4c39fc5c40f2d87e8642f5d4c>
X-Virus-Checked: Checked by ClamAV on apache.org

OK, got it to work. Thanks.

By a quick scoring comparision, I got the same scores for both hits. 
Maybe there is a loss of precision somewhere. Or when scores are equal, 
Lucene is doing something unintended/overlooked and thus putting shorter 
documents higher as the experiment is a special case where the TF of a 
queried term (for both suites, the TF of x = 10%) is equal which is very 
rarely. Or maybe the IDF factor is kicking in in some strange way 
although it shouldnt. There are a number of varied reasons, but for the 
naked eye, there isnt much.

However, that said, length normalization is not a science but an art and 
the simple scheme we have here in the FairSimilarity will not perform 
always as expected in real world scenarios. Maybe I am missing something 
or have forgot my basics but that is not to say your observation is trivial.

Rather, the contrary. Hope there will be more activity on this topic 
because it is an issue of computing relevance which is the core of search.

Cheers,
Srikant

Fabrice Robini wrote:
> Oooops sorry, bad cut/paste...
>
> Here is the right one :-)
>
>     public void testFairSimilarity() throws CorruptIndexException,
> IOException, ParseException
>     {
>         Directory theDirectory = new RAMDirectory();
>         Analyzer theAnalyzer = new StandardAnalyzer();
>         
>         IndexWriter theIndexWriter = new IndexWriter(theDirectory,
> theAnalyzer);
>         theIndexWriter.setSimilarity(new FairSimilarity());
>         
>         Document doc1 = new Document();
>         Field name1 = new Field("NAME", "SHORT_SUITE", Field.Store.YES,
> Field.Index.UN_TOKENIZED);
>         Field content1 = new Field("CONTENT", "x 2 3 4 5 6 7 8 9 10",
> Field.Store.NO, Field.Index.TOKENIZED);
>         doc1.add(name1);
>         doc1.add(content1);        
>         theIndexWriter.addDocument(doc1);
>         
>         Document doc2 = new Document();
>         Field name2 = new Field("NAME", "BIG_SUITE", Field.Store.YES,
> Field.Index.UN_TOKENIZED);
>         Field content2 = new Field("CONTENT", "x x 3 4 5 6 7 8 9 10 11 12 13
> 14 15 16 17 18 19 20", Field.Store.NO, Field.Index.TOKENIZED);
>         doc2.add(name2);
>         doc2.add(content2);        
>         theIndexWriter.addDocument(doc2);
>         
>         theIndexWriter.close();
>         
>         Searcher searcher = new IndexSearcher(theDirectory);
>         searcher.setSimilarity(new FairSimilarity());
>
>         QueryParser queryParser = new QueryParser("CONTENT", theAnalyzer);
>
>         Hits hits = searcher.search(queryParser.parse("x"));
>
>         assertEquals(2, hits.length());
>         assertEquals("BIG_SUITE", hits.doc(0).get("NAME"));
>         assertEquals("SHORT_SUITE", hits.doc(1).get("NAME"));
>     }
>     
>
>
>
> Srikant Jakilinki-3 wrote:
>   
>> Well, I cant seem to even get past the assertions of this code.
>>
>> The first assertion is failing in that I get 0 hits. I am using 
>> SimpleAnalyzer since I do not have a FrenchAnalyzer.
>>
>> Any thoughts?
>> Srikant
>>

----------------------------------------------------------------------
Free pop3 email with a spam filter.
http://www.bluebottle.com/tag/5


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 19:25:30 2008
Return-Path: <java-user-return-32153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79947 invoked from network); 22 Jan 2008 19:25:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 19:25:29 -0000
Received: (qmail 73946 invoked by uid 500); 22 Jan 2008 19:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73904 invoked by uid 500); 22 Jan 2008 19:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73893 invoked by uid 99); 22 Jan 2008 19:25:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 11:25:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 19:24:47 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id CA702245C26
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 21:24:51 +0200 (EET)
Message-ID: <47964303.1010307@sirma.bg>
Date: Tue, 22 Jan 2008 21:24:51 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Question about Lucene 2.3. file formats?
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lucene Guys,

As I see in the Lucene web site in file formats page the version 2.3 
will have some changes in file formats that are very important for us. 
First I will say what we do and then will ask my questions.

We distribute the index on some machines. The implementation is made so 
that we copy some segments to one machine and for them we create the 
segments_N metadata file according to the rules described in Lucene web 
site. Which exactly segments we will move to other machine we calculate 
based on the available disk spaces and the size in bytes of the 
segments. Now as I see you will use data sharing so that some segments 
will store documents of some other segments. This rise some questions in 
us regarding how to support our clusterization for Lucene 2.3.

   1. Is this sharing temporary or it is constant? I mean is sharing
      will take place only in the process of adding documents to index
      and after that, may be when optimization or some other process is
      run the shared documents are distributed among the segments that
      use them? Or it is possible that shared documents on a segment
      will remain shared after optimizing?
   2. Is there way to unshare documents  I mean when transferring a
      segment to some other machine can I transfer its documents from
      the other segment that holds them to it?
   3. As I see in the source code in SVN of Lucene 2.3. there is class
      LogByteSizeMergePolicy that allows controlling the maximal size of
      segment that could be merged. Here I have two questions:

3.1. Can I control not only the max size of segments that will be 
merged, but also the max size (or approximate max size) of segments that 
would occur after merging?

3.2.Can I somehow control the maximal size of segment at all (or may be 
its approximate maximal size  I mean to stop adding documents to a 
segment after it reaches some size)?

3.3.Can I somehow control the maximal size of a segment and all other 
segments which documents are shared in it?

Best Regards,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 19:27:48 2008
Return-Path: <java-user-return-32154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81636 invoked from network); 22 Jan 2008 19:27:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 19:27:48 -0000
Received: (qmail 82215 invoked by uid 500); 22 Jan 2008 19:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82176 invoked by uid 500); 22 Jan 2008 19:27:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82146 invoked by uid 99); 22 Jan 2008 19:27:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 11:27:30 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 19:27:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JHOm4-00019k-MW
	for java-user@lucene.apache.org; Tue, 22 Jan 2008 11:27:08 -0800
Message-ID: <15026214.post@talk.nabble.com>
Date: Tue, 22 Jan 2008 11:27:08 -0800 (PST)
From: Fabrice Robini <fro@octo.com>
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
In-Reply-To: <200801221908.m0MJ837I008832@mi0.bluebottle.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fro@octo.com
References: <15001250.post@talk.nabble.com> <200801212147.43414@danielnaber.de> <15014224.post@talk.nabble.com> <200801221616.m0MGGxv6012643@mi1.bluebottle.com> <15023062.post@talk.nabble.com> <200801221908.m0MJ837I008832@mi0.bluebottle.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Srikant,

I really thank you for your reply, it's very interesting.
I have to say I am confused with that now... 
I do not know what I can to for passing this Unit test...

I agree with you, it may be an issue of computing relevance.

Fabrice


Srikant Jakilinki-3 wrote:
> 
> OK, got it to work. Thanks.
> 
> By a quick scoring comparision, I got the same scores for both hits. 
> Maybe there is a loss of precision somewhere. Or when scores are equal, 
> Lucene is doing something unintended/overlooked and thus putting shorter 
> documents higher as the experiment is a special case where the TF of a 
> queried term (for both suites, the TF of x = 10%) is equal which is very 
> rarely. Or maybe the IDF factor is kicking in in some strange way 
> although it shouldnt. There are a number of varied reasons, but for the 
> naked eye, there isnt much.
> 
> However, that said, length normalization is not a science but an art and 
> the simple scheme we have here in the FairSimilarity will not perform 
> always as expected in real world scenarios. Maybe I am missing something 
> or have forgot my basics but that is not to say your observation is
> trivial.
> 
> Rather, the contrary. Hope there will be more activity on this topic 
> because it is an issue of computing relevance which is the core of search.
> 
> Cheers,
> Srikant
> 
> Fabrice Robini wrote:
>> Oooops sorry, bad cut/paste...
>>
>> Here is the right one :-)
>>
>>     public void testFairSimilarity() throws CorruptIndexException,
>> IOException, ParseException
>>     {
>>         Directory theDirectory = new RAMDirectory();
>>         Analyzer theAnalyzer = new StandardAnalyzer();
>>         
>>         IndexWriter theIndexWriter = new IndexWriter(theDirectory,
>> theAnalyzer);
>>         theIndexWriter.setSimilarity(new FairSimilarity());
>>         
>>         Document doc1 = new Document();
>>         Field name1 = new Field("NAME", "SHORT_SUITE", Field.Store.YES,
>> Field.Index.UN_TOKENIZED);
>>         Field content1 = new Field("CONTENT", "x 2 3 4 5 6 7 8 9 10",
>> Field.Store.NO, Field.Index.TOKENIZED);
>>         doc1.add(name1);
>>         doc1.add(content1);        
>>         theIndexWriter.addDocument(doc1);
>>         
>>         Document doc2 = new Document();
>>         Field name2 = new Field("NAME", "BIG_SUITE", Field.Store.YES,
>> Field.Index.UN_TOKENIZED);
>>         Field content2 = new Field("CONTENT", "x x 3 4 5 6 7 8 9 10 11 12
>> 13
>> 14 15 16 17 18 19 20", Field.Store.NO, Field.Index.TOKENIZED);
>>         doc2.add(name2);
>>         doc2.add(content2);        
>>         theIndexWriter.addDocument(doc2);
>>         
>>         theIndexWriter.close();
>>         
>>         Searcher searcher = new IndexSearcher(theDirectory);
>>         searcher.setSimilarity(new FairSimilarity());
>>
>>         QueryParser queryParser = new QueryParser("CONTENT",
>> theAnalyzer);
>>
>>         Hits hits = searcher.search(queryParser.parse("x"));
>>
>>         assertEquals(2, hits.length());
>>         assertEquals("BIG_SUITE", hits.doc(0).get("NAME"));
>>         assertEquals("SHORT_SUITE", hits.doc(1).get("NAME"));
>>     }
>>     
>>
>>
>>
>> Srikant Jakilinki-3 wrote:
>>   
>>> Well, I cant seem to even get past the assertions of this code.
>>>
>>> The first assertion is failing in that I get 0 hits. I am using 
>>> SimpleAnalyzer since I do not have a FrenchAnalyzer.
>>>
>>> Any thoughts?
>>> Srikant
>>>
> 
> ----------------------------------------------------------------------
> Free pop3 email with a spam filter.
> http://www.bluebottle.com/tag/5
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Is-Fair-Similarity-working-with-lucene-2.2---tp15001250p15026214.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 19:42:08 2008
Return-Path: <java-user-return-32155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91342 invoked from network); 22 Jan 2008 19:42:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 19:42:08 -0000
Received: (qmail 8618 invoked by uid 500); 22 Jan 2008 19:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8577 invoked by uid 500); 22 Jan 2008 19:41:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8566 invoked by uid 99); 22 Jan 2008 19:41:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 11:41:51 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=SPF_PASS,TVD_SPACE_RATIO
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gayo.diallo@imag.fr designates 129.88.30.1 as permitted sender)
Received: from [129.88.30.1] (HELO imag.imag.fr) (129.88.30.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 19:41:24 +0000
Received: from trottinette.imag.fr (trottinette.imag.fr [129.88.34.202])
	by imag.imag.fr (8.13.8/8.13.8) with ESMTP id m0MJeqAu000463
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 20:40:53 +0100 (CET)
Received: from trottinette.imag.fr (localhost.localdomain [127.0.0.1])
	by trottinette.imag.fr (8.13.8/8.13.8) with ESMTP id m0MJg6T5004186
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 20:42:06 +0100
Received: (from apache@localhost)
	by trottinette.imag.fr (8.13.8/8.13.8/Submit) id m0MJg6qG004185
	for java-user@lucene.apache.org; Tue, 22 Jan 2008 20:42:06 +0100
X-Authentication-Warning: trottinette.imag.fr: apache set sender to gayo.diallo@imag.fr using -f
Received: from soipc26.city.ac.uk (soipc26.city.ac.uk [138.40.168.9]) by
	webmail.imag.fr (Horde MIME library) with HTTP; Tue, 22 Jan 2008 20:42:06
	+0100
Message-ID: <20080122204206.ml101ugu1w0kgswg@webmail.imag.fr>
Date: Tue, 22 Jan 2008 20:42:06 +0100
From: Gayo Diallo <gayo.diallo@imag.fr>
To: java-user@lucene.apache.org
Subject: unsuscribe
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-MI2S-Agent: webmail 2
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-3.0 (imag.imag.fr [129.88.30.1]); Tue, 22 Jan 2008 20:40:53 +0100 (CET)
X-IMAG-MailScanner-Information: Please contact MI2S MIM for more information
X-IMAG-MailScanner: Found to be clean
X-IMAG-MailScanner-SpamCheck: 
X-IMAG-MailScanner-From: gayo.diallo@imag.fr
X-Virus-Checked: Checked by ClamAV on apache.org

unsuscribe

java-user@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 20:08:16 2008
Return-Path: <java-user-return-32156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5236 invoked from network); 22 Jan 2008 20:08:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 20:08:16 -0000
Received: (qmail 45038 invoked by uid 500); 22 Jan 2008 20:08:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44840 invoked by uid 500); 22 Jan 2008 20:07:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44829 invoked by uid 99); 22 Jan 2008 20:07:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 12:07:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 20:07:33 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1523054wxd.20
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 12:07:38 -0800 (PST)
Received: by 10.142.147.15 with SMTP id u15mr4383192wfd.149.1201032457137;
        Tue, 22 Jan 2008 12:07:37 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 38sm1668008wrl.37.2008.01.22.12.07.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 22 Jan 2008 12:07:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47964303.1010307@sirma.bg>
References: <47964303.1010307@sirma.bg>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <C5F32A74-A2E3-4085-B089-73495D1E3B47@mikemccandless.com>
Content-Transfer-Encoding: quoted-printable
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Question about Lucene 2.3. file formats?
Date: Tue, 22 Jan 2008 15:07:58 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Ivan Vasilev wrote:

> Hi Lucene Guys,
>
> As I see in the Lucene web site in file formats page the version =20
> 2.3 will have some changes in file formats that are very important =20
> for us. First I will say what we do and then will ask my questions.
>
> We distribute the index on some machines. The implementation is =20
> made so that we copy some segments to one machine and for them we =20
> create the segments_N metadata file according to the rules =20
> described in Lucene web site. Which exactly segments we will move =20
> to other machine we calculate based on the available disk spaces =20
> and the size in bytes of the segments. Now as I see you will use =20
> data sharing so that some segments will store documents of some =20
> other segments. This rise some questions in us regarding how to =20
> support our clusterization for Lucene 2.3.

Are you referring to sharing of the docStore files (term vectors & =20
stored fields), when autoCommit=3Dfalse?  Assuming so....

>   1. Is this sharing temporary or it is constant? I mean is sharing
>      will take place only in the process of adding documents to index
>      and after that, may be when optimization or some other process is
>      run the shared documents are distributed among the segments that
>      use them? Or it is possible that shared documents on a segment
>      will remain shared after optimizing?

Only documents added in a single IndexWriter session are shared.  If =20
you run optimize, assuming the index was not already optimized, the =20
sharing is removed since there's only one segment at the end.

Also, if you open with autoCommit=3Dtrue then there is no sharing.

>   2. Is there way to unshare documents =96 I mean when transferring a
>      segment to some other machine can I transfer its documents from
>      the other segment that holds them to it?

Use writer.addIndexesNoOptimize (in general, that is the safest way =20
to merge indices, instead of trying to build your own segments_N file).

>   3. As I see in the source code in SVN of Lucene 2.3. there is class
>      LogByteSizeMergePolicy that allows controlling the maximal =20
> size of
>      segment that could be merged. Here I have two questions:
>
> 3.1. Can I control not only the max size of segments that will be =20
> merged, but also the max size (or approximate max size) of segments =20=

> that would occur after merging?

Not really since it's hard to predict the size the segment will be =20
after merging.  It only limits the max size of a segment that may be =20
merged.  You could roughly guess the final size of the segments (say =20
sum of all byte sizes, proportionally reduced based on pending =20
deletes) and put that into your own MergePolicy?

> 3.2.Can I somehow control the maximal size of segment at all (or =20
> may be its approximate maximal size =96 I mean to stop adding =20
> documents to a segment after it reaches some size)?

Lucene never adds docs to a segment, except by merging.  So by =20
preventing a segment > size X from being merged (using =20
LogByteSizeMergePolicy), I think that's the best you can do.

> 3.3.Can I somehow control the maximal size of a segment and all =20
> other segments which documents are shared in it?

Not really, but your own merge policy could roughly guess...

Mike=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 21:09:34 2008
Return-Path: <java-user-return-32157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47969 invoked from network); 22 Jan 2008 21:09:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 21:09:34 -0000
Received: (qmail 29092 invoked by uid 500); 22 Jan 2008 21:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29058 invoked by uid 500); 22 Jan 2008 21:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29047 invoked by uid 99); 22 Jan 2008 21:09:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 13:09:17 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.104.29] (HELO sa14.bezeqint.net) (192.115.104.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 21:08:49 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by sa14.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP id 02DCA2813D
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 23:08:52 +0200 (IST)
X-Virus-Scanned: amavisd-new at bezeqint.net
Received: from sa14.bezeqint.net ([127.0.0.1])
	by localhost (sa14.bezeqint.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dMC4csIt7z3M for <java-user@lucene.apache.org>;
	Tue, 22 Jan 2008 23:08:48 +0200 (IST)
Received: from m6.bezeqint.net (m6.bezeqint.net [192.115.104.86])
	by sa14.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 23:08:48 +0200 (IST)
Received: from your0548c161e1 ([82.102.183.157])
	by m6.bezeqint.net (MOS 3.8.5-GA)
	with ESMTP id BBQ62148 (AUTH sf_ita_s);
	Tue, 22 Jan 2008 23:08:45 +0200 (IST)
X-FEAS-DEEPHEADER-FortiMail-2000-partnergsm.co.il:  No untrusted public ip! 
Message-Id: <20080122210221.30436@partnergsm.co.il>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: Lucene help?
Date: Tue, 22 Jan 2008 23:08:37 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00D7_01C85D4B.B98F8460"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AchdOvSSdxSFgI7CQjS9H8qgLEhMTw==
X-Junkmail-Status: score=10/50, host=m6.bezeqint.net
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A090203.47965B5F.0185,ss=1,fgs=0,
	ip=82.102.183.157,
	so=2007-07-31 18:51:00,
	dmn=5.4.3/2007-11-16
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00D7_01C85D4B.B98F8460
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,
 
Yesterday I sent an email to this group querying about some very important
(to me...) features of Lucene. I'm giving it another chance before it goes
unnoticed or forgotten. If it was too long please let me know and I will
email a shorter list of questions....
 
The original post can be found here:
http://www.gossamer-threads.com/lists/lucene/java-user/57365?#57365.
 
Thanks in advance,
 
Itamar.

------=_NextPart_000_00D7_01C85D4B.B98F8460--


From java-user-return-32158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 21:11:12 2008
Return-Path: <java-user-return-32158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48973 invoked from network); 22 Jan 2008 21:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 21:11:12 -0000
Received: (qmail 34901 invoked by uid 500); 22 Jan 2008 21:10:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34872 invoked by uid 500); 22 Jan 2008 21:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34861 invoked by uid 99); 22 Jan 2008 21:10:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 13:10:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 21:10:24 +0000
Received: from [84.191.195.176] (helo=p54bfc3b0.dip.t-dialin.net)
	by smtprelay05.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JHQO4-0002kr-5b
	for java-user@lucene.apache.org; Tue, 22 Jan 2008 22:10:28 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
Date: Tue, 22 Jan 2008 22:13:30 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <15001250.post@talk.nabble.com> <200801221616.m0MGGxv6012643@mi1.bluebottle.com> <15023062.post@talk.nabble.com>
In-Reply-To: <15023062.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801222213.31193@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 22. Januar 2008, Fabrice Robini wrote:

> Oooops sorry, bad cut/paste...
>
> Here is the right one :-)

The score is the same, so documents with a lower id (inserted earlier) will 
be returned first. So everything looks okay to me, or am I missing 
something?

regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 22 23:07:45 2008
Return-Path: <java-user-return-32159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5965 invoked from network); 22 Jan 2008 23:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2008 23:07:45 -0000
Received: (qmail 93362 invoked by uid 500); 22 Jan 2008 23:07:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92401 invoked by uid 500); 22 Jan 2008 23:07:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92390 invoked by uid 99); 22 Jan 2008 23:07:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 15:07:29 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 23:07:04 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene, HTML and Hebrew
Date: Tue, 22 Jan 2008 18:06:24 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB423@SUEXCL-02.ad.syr.edu>
In-Reply-To: <20080121195319.1846@partnergsm.co.il>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene, HTML and Hebrew
Thread-Index: AchbMGRW5Y/BRmXnQ6CMMlvIcmJYNgBMDgYAAAArS/AANqEt8A==
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Itamar,

In another thread, you wrote:

> Yesterday I sent an email to this group querying about some
> very important (to me...) features of Lucene. I'm giving it
> another chance before it goes unnoticed or forgotten. If it
> was too long please let me know and I will email a shorter
> list of questions....

I think I have something like a 30-second rule for posts on this list: =
if I can't figure out what the question is within 30 seconds, I move on. =
 Your post was so verbose that I gave up before I asked myself whether I =
could help.  (D=E9j=E0 vu - upon re-reading this paragraph, it sounds =
very much like something Hoss has said on this list...)

Although I answer your original post below, please don't take this as =
affirmation of your "reminder" approach.  In my experience, this =
strategy is interpreted as badgering, and tends to affect response rate =
in the opposite direction to that intended.

Short, focused questions will maximize the response rate here (and =
elsewhere, I suspect).  Also, it helps if there is some indication that =
the questioner has attempted to answer the question for themselves using =
readily available resources, but failed.

On 01/21/2008 at 2:59 PM, Itamar Syn-Hershko wrote:
> 1) How would Lucene treat the "normal" paragraph when they
> are added that way? Would proximity and frequency data be
> computed between paragraph1 and paragraph2 (last word of
> former with first word of latter)? What about proximity
> data between "h2" paragraph and the "normal" before or
> after it?

Lucene does not store proximity relations between data in different =
fields, only within individual fields.  Similarly, term frequencies are =
stored per-field, not per-document.

> 2) How would I set the boosts for the headers and footnotes?
> I'd rather have it stored within the index file than have to
> append it to each and every query I will execute, but I'm
> open to suggestions. I'm more interested in performance and
> flexibility.

AFAIK, there is no way currently in Lucene to set index-time per-field =
boosts - only per-document boosts are supported.

One very coarse-grained boosting trick you could use is to repeat the =
text of headers, etc., that you want to boost, e.g.:

	Doc->add(new Field("h2", "sub-header 1 $$$ sub-header 1", =
Field::STORE_NO |
Field::INDEX_TOKENIZED);

I included "$$$" as an example of how to break proximity between the =
first and last terms in the "sub-header 1" text - note, however, that =
this particular string may not serve this function properly, depending =
on the analyzer you choose.=20

Note also that this is an issue elsewhere for you, since each addition =
of field information is understood by Lucene as contiguous.  That is, =
unless you do something to inhibit it, proximity matches will occur =
between the last term from one <h2> tag and the first term from the next =
<h2> tag in the same doc.

> 3) When executing a query against the above-mentioned index,
> how would I execute a set of words as a query (boolean quey
> using list of inflated words) without repeating this set of
> words for each and every field? Any support for something
> like *:word1 OR word2 OR word3 (instead of normal:(word1 OR
> word2 OR word3) AND quote:(word1 OR word2 OR word3) AND
> h1:(word1 OR word2 OR word3) etc...)?

MultiFieldQueryParser may do something like what you want:

<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/queryParser/Mu=
ltiFieldQueryParser.html>

> 4) Writing a Hebrew analyzer, I'm considering using a
> StandardAnalyzer and just ammend it so when it recognizes a
> Hebrew word it will call some function that will parse it
> correctly (there are some differences, such as quotes in
> the middle of a word are legitmate, also remove Niqqud).
> If it's a non-Hebrew word it will just continue as usual
> with its default behavior and functions.
> Also, this means I will index ALL words (Hebrew AND English)
> into the same index. The thinking behind this is to allow
> for searches with both Hebrew and English words to be
> performed successfully, taking into account there shouldn't
> be any downsides for indexing two languages within one
> index. I'm aware of the way Lucene stores words (not the
> whole word, but only the part that is different from the
> previous), but I really don't see how bad that's gonna
> be...

Not sure what the question is here - if you mean to ask "What are the =
impacts of including terms from two languages in a single index?" then =
my answer is "it depends"...=20

For languages that share orthographies (e.g. Spanish and French, to a =
great extent), cognates (i.e. the same term meaning completely different =
things in the two languages) could cause degraded precision.  AFAIK, =
this is not an issue for Hebrew and English. =20

The only other issue I can think of is that you will be taking symbols =
(words) from two completely different meaning-systems and merging them =
into the same index space.  For similar contexts ("should I have =
separate fields for each unit of information?"), the advice generally =
given on this list is to put everything into a single field.  In short: =
try the simplest thing first, test, and if the performance is not good =
enough, then increase the complexity of your solution, test, and iterate =
until it is.  But you probably already knew that :).

> 5) Where should a stemmer be used? As far as I see it, it
> should only be used for query inflation, am I right?

Generally, stemming increases recall (proportion of matching relevant =
docs among relevant docs in the entire corpus), and decreases precision =
(proportion of relevant docs among matching docs).

The standard advice is to use the same analysis pipeline at both =
index-time and query-time; in the context of your question, that would =
mean stemming in both places.

However, adding stems to a query, especially if you boosted them lower =
than the original terms, is probably a good strategy to maximize both =
precision and recall.  The cost of this approach is two-fold: a larger =
index than if you had performed index-time stemming; and increased =
query-time processing, hence lower query throughput.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 01:49:37 2008
Return-Path: <java-user-return-32160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93642 invoked from network); 23 Jan 2008 01:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 01:49:37 -0000
Received: (qmail 78922 invoked by uid 500); 23 Jan 2008 01:49:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78893 invoked by uid 500); 23 Jan 2008 01:49:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78882 invoked by uid 99); 23 Jan 2008 01:49:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 17:49:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 01:49:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 15BD8B7682
	for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 17:49:02 -0800 (PST)
Message-Id: <D1F70DC5-E8D7-4622-B071-01D90363DE9B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <9294E20AED46934EA459020706463F947EB423@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Lucene, HTML and Hebrew
Date: Tue, 22 Jan 2008 20:49:00 -0500
References: <9294E20AED46934EA459020706463F947EB423@SUEXCL-02.ad.syr.edu>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 22, 2008, at 6:06 PM, Steven A Rowe wrote:
>
>> 2) How would I set the boosts for the headers and footnotes?
>> I'd rather have it stored within the index file than have to
>> append it to each and every query I will execute, but I'm
>> open to suggestions. I'm more interested in performance and
>> flexibility.
>
> AFAIK, there is no way currently in Lucene to set index-time per- 
> field boosts - only per-document boosts are supported.
>


I'm not following this part.  Is this different from Field.setBoost()? 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 02:44:34 2008
Return-Path: <java-user-return-32161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15334 invoked from network); 23 Jan 2008 02:44:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 02:44:34 -0000
Received: (qmail 41252 invoked by uid 500); 23 Jan 2008 02:44:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41215 invoked by uid 500); 23 Jan 2008 02:44:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41204 invoked by uid 99); 23 Jan 2008 02:44:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 18:44:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 02:44:06 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0N2hqfw025025
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2008 04:43:52 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1n478ep; 23 Jan 2008 04:43:00 +0200
Message-ID: <4796A9E0.8060205@teamware.com>
Date: Wed, 23 Jan 2008 13:43:44 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: DateTools UTC/GMT mismatch
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 23 Jan 2008 04:43:52 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I just noticed that although the Javadocs for Lucene 2.2 state that the dates 
for DateTools use UTC as a timezone, they are actually using GMT.

Should either the Javadocs be corrected or the code corrected to use UTC instead.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 06:37:42 2008
Return-Path: <java-user-return-32162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59834 invoked from network); 23 Jan 2008 06:37:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 06:37:42 -0000
Received: (qmail 70585 invoked by uid 500); 23 Jan 2008 06:37:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70560 invoked by uid 500); 23 Jan 2008 06:37:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70549 invoked by uid 99); 23 Jan 2008 06:37:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 22:37:26 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 06:37:14 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene, HTML and Hebrew
Date: Wed, 23 Jan 2008 01:36:23 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB432@SUEXCL-02.ad.syr.edu>
In-Reply-To: <D1F70DC5-E8D7-4622-B071-01D90363DE9B@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene, HTML and Hebrew
Thread-Index: AchdYjdbAQyImm4ISnm7YpkDAyavXAAFDpqg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 01/22/2008 at 8:49 PM, Grant Ingersoll wrote:
> On Jan 22, 2008, at 6:06 PM, Steven A Rowe wrote:
> > On 01/21/2008 at 2:59 PM, Itamar Syn-Hershko wrote:
> > > 2) How would I set the boosts for the headers and footnotes?
> > > I'd rather have it stored within the index file than have to
> > > append it to each and every query I will execute, but I'm
> > > open to suggestions. I'm more interested in performance and
> > > flexibility.
> >=20
> > AFAIK, there is no way currently in Lucene to set index-time per-
> > field boosts - only per-document boosts are supported.
>=20
> I'm not following this part.  Is this different from Field.setBoost()?

Thanks, Grant, you're absolutely right.

I stand corrected: Lucene does, in fact, store per-field boosts at =
index-time[1], and then uses them at query-time to score documents.  As =
Grant indicates, the Field.setBoost() method is how to set them.

(It would be nice if Lucene had a facility to set a global field boost =
for all the documents in an index.)

Itamar, the details of how field boosts are used are worth checking out =
(the link below is to the 1.4.3 version):

<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/document/Field=
.html#setBoost(float)>

In particular, this part is less than obvious:

    If a document has multiple fields with the same
    name, all such values are multiplied together.

So if you were to add multiple Field instances with the same name to a =
document, as you do in your example, the field boost for the document is =
the *product* of the boosts set on each Field instance added to the =
document.  One way to get around this problem is to call setBoost() just =
once on each document for each of the different field names.  This works =
because the default boost assigned to the other instances is 1.

Steve

[1] It's worth noting, as the above-linked documentation for =
Field.setBoost() does, that field boosts are not stored independently of =
other normalization factors in the index.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 07:23:29 2008
Return-Path: <java-user-return-32163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69791 invoked from network); 23 Jan 2008 07:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 07:23:29 -0000
Received: (qmail 8017 invoked by uid 500); 23 Jan 2008 07:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7993 invoked by uid 500); 23 Jan 2008 07:23:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7982 invoked by uid 99); 23 Jan 2008 07:23:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jan 2008 23:23:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 07:22:57 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2273767rvb.5
        for <java-user@lucene.apache.org>; Tue, 22 Jan 2008 23:22:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=csTOmzgLYVFEMxvicoFK5e1ZZXwGMQrRakOINd77SzA=;
        b=AqdWiubBkT5E6AV3sLRY6hmkemVlFvtViV9iJK7x36f9b3fiinvnTYeOGiSG7+z/zHlGEkS18H/MGlfcsx9JFwlC0kpGFlbwtgpgJr+B3XqXao4NZnWVk7Mv5F3Tj+yusMUFxFFfJgU68WTHH/2/yFMDs+cJP7FFJOZQeqQvKbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ws2SWr2q4Q+TICydbyu7xXqtz2m5qJX0Em27UckxMf+fFJHi8VsDQ3KVoukRAfgg1M9f78R4D+JshRXw+L4Vd2XDfaB9iUCTg7G6CqtT1I1mR3Ri6mKrYO0O26BZVlOxQ/+ZOHiXeTe/2Abvd99Ts+IUmFD72FKfuiDUCrnO960=
Received: by 10.140.173.15 with SMTP id v15mr6081560rve.218.1201072968982;
        Tue, 22 Jan 2008 23:22:48 -0800 (PST)
Received: by 10.140.203.3 with HTTP; Tue, 22 Jan 2008 23:22:48 -0800 (PST)
Message-ID: <52c3ddca0801222322l763f0193t561b8c2eca4cf8ad@mail.gmail.com>
Date: Wed, 23 Jan 2008 08:22:48 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Compass
In-Reply-To: <F13DFF606AF7430791D37321C7DED803@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13215_5392471.1201072968889"
References: <F13DFF606AF7430791D37321C7DED803@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13215_5392471.1201072968889
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am using Compass with Spring and JPA. It works pretty nice. I don't store
index into database, I use traditional file system based Lucene index.
Updates work very well but you have to be careful about proper mapping of
your objects into search engine (specially parent-child mappings).

Regards,
Lukas

On Jan 21, 2008 8:08 PM, <spring@gmx.eu> wrote:

> Hi,
>
> compass (http://www.opensymphony.com/compass/content/lucene.html)
> promisses
> many nice things in my opinion.
> Has anybody production experiences with it?
>
> Especially Jdbc Directory and Updates?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://blog.lukas-vlcek.com/

------=_Part_13215_5392471.1201072968889--

From java-user-return-32164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 14:25:55 2008
Return-Path: <java-user-return-32164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56085 invoked from network); 23 Jan 2008 14:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 14:25:55 -0000
Received: (qmail 11822 invoked by uid 500); 23 Jan 2008 14:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11787 invoked by uid 500); 23 Jan 2008 14:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11776 invoked by uid 99); 23 Jan 2008 14:25:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 06:25:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 14:25:23 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id A3301245C68
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2008 16:25:15 +0200 (EET)
Message-ID: <47974E4B.8040508@sirma.bg>
Date: Wed, 23 Jan 2008 16:25:15 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question about Lucene 2.3. file formats?
References: <47964303.1010307@sirma.bg> <C5F32A74-A2E3-4085-B089-73495D1E3B47@mikemccandless.com>
In-Reply-To: <C5F32A74-A2E3-4085-B089-73495D1E3B47@mikemccandless.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Michael for your answer :)

Actually writer.addIndexesNoOptimize method can not help us because our 
aim is to split indexes rather than to merge them. But you information 
about setting autoCommit=true is very helpful for us because so we will 
avoid sharing of stored fields and will be able to use our tools for 
splitting index. The only thing  that we will have to do is to add (-1) 
in position of DocStoreOffset in segments_N file.

Thanks,
Ivan

Michael McCandless wrote:
> Ivan Vasilev wrote:
>
>> Hi Lucene Guys,
>>
>> As I see in the Lucene web site in file formats page the version 2.3 
>> will have some changes in file formats that are very important for 
>> us. First I will say what we do and then will ask my questions.
>>
>> We distribute the index on some machines. The implementation is made 
>> so that we copy some segments to one machine and for them we create 
>> the segments_N metadata file according to the rules described in 
>> Lucene web site. Which exactly segments we will move to other machine 
>> we calculate based on the available disk spaces and the size in bytes 
>> of the segments. Now as I see you will use data sharing so that some 
>> segments will store documents of some other segments. This rise some 
>> questions in us regarding how to support our clusterization for 
>> Lucene 2.3.
>
> Are you referring to sharing of the docStore files (term vectors & 
> stored fields), when autoCommit=false?  Assuming so....
>
>>   1. Is this sharing temporary or it is constant? I mean is sharing
>>      will take place only in the process of adding documents to index
>>      and after that, may be when optimization or some other process is
>>      run the shared documents are distributed among the segments that
>>      use them? Or it is possible that shared documents on a segment
>>      will remain shared after optimizing?
>
> Only documents added in a single IndexWriter session are shared.  If 
> you run optimize, assuming the index was not already optimized, the 
> sharing is removed since there's only one segment at the end.
>
> Also, if you open with autoCommit=true then there is no sharing.
>
>>   2. Is there way to unshare documents  I mean when transferring a
>>      segment to some other machine can I transfer its documents from
>>      the other segment that holds them to it?
>
> Use writer.addIndexesNoOptimize (in general, that is the safest way to 
> merge indices, instead of trying to build your own segments_N file).
>
>>   3. As I see in the source code in SVN of Lucene 2.3. there is class
>>      LogByteSizeMergePolicy that allows controlling the maximal size of
>>      segment that could be merged. Here I have two questions:
>>
>> 3.1. Can I control not only the max size of segments that will be 
>> merged, but also the max size (or approximate max size) of segments 
>> that would occur after merging?
>
> Not really since it's hard to predict the size the segment will be 
> after merging.  It only limits the max size of a segment that may be 
> merged.  You could roughly guess the final size of the segments (say 
> sum of all byte sizes, proportionally reduced based on pending 
> deletes) and put that into your own MergePolicy?
>
>> 3.2.Can I somehow control the maximal size of segment at all (or may 
>> be its approximate maximal size  I mean to stop adding documents to 
>> a segment after it reaches some size)?
>
> Lucene never adds docs to a segment, except by merging.  So by 
> preventing a segment > size X from being merged (using 
> LogByteSizeMergePolicy), I think that's the best you can do.
>
>> 3.3.Can I somehow control the maximal size of a segment and all other 
>> segments which documents are shared in it?
>
> Not really, but your own merge policy could roughly guess...
>
> Mike
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> __________ NOD32 2815 (20080122) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 14:48:24 2008
Return-Path: <java-user-return-32165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66131 invoked from network); 23 Jan 2008 14:48:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 14:48:24 -0000
Received: (qmail 48959 invoked by uid 500); 23 Jan 2008 14:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48929 invoked by uid 500); 23 Jan 2008 14:48:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48918 invoked by uid 99); 23 Jan 2008 14:48:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 06:48:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 14:47:54 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JV300A5DQFN5S@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 23 Jan 2008 15:47:47 +0100 (MET)
Date: Wed, 23 Jan 2008 15:47:47 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
In-reply-to: <4795CEA3.9030703@gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1201099667.9514.282.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
 <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
 <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
 <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk>
 <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com>
 <4794F518.80804@gmail.com>
 <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk>
 <4795C3DC.5000101@gmail.com>
 <1200997852.9514.226.camel@PC990.sb.statsbiblioteket.dk>
 <4795CEA3.9030703@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-01-22 at 03:08 -0800, Michael Busch wrote:
> OK, then Yonik might be right about the multi-level skiplists code which
> is new in 2.2. I'd love to see the performance numbers of the same index
> built with 2.3, if possible? You could simply migrate it to 2.3 by using
> IndexWriter.addIndexes().

Ah, yes. Just use addIndexes... Silly me.

A quick migrate and new tests paints a whole other picture. I don't have
time for a proper analysis now, but here's some numbers:

(lx is lucene version, v23 is index-version 23, tx is x threads with
shared searcher, txu is x threads with separate searchers)

== Average over the first 50.000 queries ==
metis_15000_RAID1_8GB_i37_t2_l21.log - 55.9 q/sec
metis_15000_RAID1_8GB_i37_t2_l23.log - 56.3 q/sec
metis_15000_RAID1_8GB_i37_v23_t2_l23.log - 57.1 q/sec

metis_15000_RAID1_8GB_i37_t3_l21.log - 54.7 q/sec
metis_15000_RAID1_8GB_i37_t3_l23.log - 52.9 q/sec
metis_15000_RAID1_8GB_i37_v23_t3_l23.log - 54.4 q/sec

metis_15000_RAID1_8GB_i37_t3u_l21.log - 70.0 q/sec
metis_15000_RAID1_8GB_i37_t3u_l23.log - 70.3 q/sec
metis_15000_RAID1_8GB_i37_v23_t3u_l23.log - 70.4 q/sec
---
metis_flash_RAID0_8GB_i37_t2_l21.log - 279.6 q/sec
metis_flash_RAID0_8GB_i37_t2_l23.log - 202.3 q/sec
metis_flash_RAID0_8GB_i37_v23_t2_l23.log - 195.9 q/sec

metis_flash_RAID0_8GB_i37_t3_l21.log - 138.9 q/sec
metis_flash_RAID0_8GB_i37_t3_l23.log - 131.9 q/sec
metis_flash_RAID0_8GB_i37_v23_t3_l23.log - 159.1 q/sec

metis_flash_RAID0_8GB_i37_t3u_l21.log - 273.0 q/sec
metis_flash_RAID0_8GB_i37_t3u_l23.log - 251.8 q/sec
metis_flash_RAID0_8GB_i37_v23_t3u_l23.log - 278.3 q/sec


== Average over the first 340.000 queries ==
metis_15000_RAID1_8GB_i37_t2_l21.log - 109.2 q/sec
metis_15000_RAID1_8GB_i37_t2_l23.log - 111.7 q/sec
metis_15000_RAID1_8GB_i37_v23_t2_l23.log - 118.2 q/sec

metis_15000_RAID1_8GB_i37_t3_l21.log - 103.7 q/sec
metis_15000_RAID1_8GB_i37_t3_l23.log - 95.7 q/sec
metis_15000_RAID1_8GB_i37_v23_t3_l23.log - 108.3 q/sec

metis_15000_RAID1_8GB_i37_t3u_l21.log - 156.8 q/sec
metis_15000_RAID1_8GB_i37_t3u_l23.log - 153.4 q/sec
metis_15000_RAID1_8GB_i37_v23_t3u_l23.log - 188.3 q/sec
---
metis_flash_RAID0_8GB_i37_t2_l21.log - 305.3 q/sec
metis_flash_RAID0_8GB_i37_t2_l23.log - 260.5 q/sec
metis_flash_RAID0_8GB_i37_v23_t2_l23.log - 294.1 q/sec

metis_flash_RAID0_8GB_i37_t3_l21.log - 198.3 q/sec
metis_flash_RAID0_8GB_i37_t3_l23.log - 185.3 q/sec
metis_flash_RAID0_8GB_i37_v23_t3_l23.log - 238.0 q/sec

metis_flash_RAID0_8GB_i37_t3u_l21.log - 378.5 q/sec
metis_flash_RAID0_8GB_i37_t3u_l23.log - 336.1 q/sec
metis_flash_RAID0_8GB_i37_v23_t3u_l23.log - 433.3 q/sec


> In my performance tests (LUCENE-866) I measured an average performance
> gain of 20% for AND queries.

The 20% seems to fit the case with 3 threads and large test, both for
harddisks and SSDs. I'm happy that there was an explanation for the
apparent slowdown for the higher versions and that Lucene 2.3 is
markedly faster than 2.1 on our system.

> Of course, if you run 2.3 against an index built with 2.1, then the more
> complex multi-level skiplist code gets executed on the simpler 2.1 data
> structures. However, I don't think the slowdown should be that big (13%).

If you need me to run tests or generate graphs, just let me know. If
not, I'll stop experimenting with Lucene 2.1 vs. 2.3 and concentrate on
Lucene 2.3: There 's still the matter of how the number of threads and
the number of searchers affects performance. Next step is to tweak the
amount of RAM to get an idea of RAM/index size/speed trade-offs.

(and yes, I'll also try and find the time to put the results on the
Lucene wiki)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 18:26:02 2008
Return-Path: <java-user-return-32166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43873 invoked from network); 23 Jan 2008 18:26:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 18:26:02 -0000
Received: (qmail 2227 invoked by uid 500); 23 Jan 2008 18:25:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2201 invoked by uid 500); 23 Jan 2008 18:25:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2190 invoked by uid 99); 23 Jan 2008 18:25:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 10:25:46 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 18:25:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JHkHu-0000d5-CM
	for java-user@lucene.apache.org; Wed, 23 Jan 2008 10:25:26 -0800
Message-ID: <15048591.post@talk.nabble.com>
Date: Wed, 23 Jan 2008 10:25:26 -0800 (PST)
From: mika03 <someone29_7@yahoo.de>
To: java-user@lucene.apache.org
Subject: Problem with tokenStreamValue() method in Field class
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: someone29_7@yahoo.de
X-Virus-Checked: Checked by ClamAV on apache.org



Hi, 

I am slightly confused.
The following code generates the output below.

Document doc = hits.doc(i);
System.out.println(doc.getFields());
Field f = doc.getField("Text");
System.out.println(f);
TokenStream ts = f.tokenStreamValue();
System.out.println(ts);
while (true){
	Token token = ts.next();
	if (token==null) break;
	System.out.print(token+" ");
}
System.out.println();


[stored/uncompressed,indexed,tokenized<Title:Infrared Data Association>,
stored/uncompressed,indexed,tokenized<Type:Text>,
stored/uncompressed,indexed,tokenized<Text:This is a test>]
stored/uncompressed,indexed,tokenized<Text:This is a test>
null
java.lang.NullPointerException
at ... (IndexQuerier.java:86)
...

So I am accessing a field which is displayed as "tokenized", but I still
can't access its "tokenStreamValue()"? Why is that? Is there some way to get
to tokens? Or did I do something wrong during indexing?


Regards,
Mika 
-- 
View this message in context: http://www.nabble.com/Problem-with-tokenStreamValue%28%29-method-in-Field-class-tp15048591p15048591.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 19:38:17 2008
Return-Path: <java-user-return-32167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80435 invoked from network); 23 Jan 2008 19:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 19:38:17 -0000
Received: (qmail 29196 invoked by uid 500); 23 Jan 2008 19:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29172 invoked by uid 500); 23 Jan 2008 19:38:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29161 invoked by uid 99); 23 Jan 2008 19:38:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 11:38:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mike.klaas@gmail.com designates 72.14.202.178 as permitted sender)
Received: from [72.14.202.178] (HELO ro-out-1112.google.com) (72.14.202.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 19:37:47 +0000
Received: by ro-out-1112.google.com with SMTP id p4so3173678roc.5
        for <java-user@lucene.apache.org>; Wed, 23 Jan 2008 11:37:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=KypppWp47mEdS66IwFJDlqg4vjrCK17QUi78tqth/PA=;
        b=wHDvxpOurH6hN1HBF3dIq5NLI9092QhdOq6SlVUfjXXC1RA4xCzT/6wLsk7Yle5hUxsuZegfBe5BYEDzx4GTebblXp5xcgUkPmb2FeaZq25JsXX/Vy1Aofu+JrotV+Isn0dvX8Tj/OpXYp8O2aVTkhnToWxO3UhRCttvAsziMLw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=W3S/lp5SdoCACo6EoNwxKi/0E4Mf7dhtWgk12ZapgXYILWOT+GWG8X/fF80EEvMRg49XSDgHIQbV4IwB+zioImAmy3Wevr9oqauD7RfcxM/FUYAPjgJoORZQmaYbM3sUt3ZVd1BjP7mAZoi8q9qnWhZbospQKGleZ9Tu5C+bazo=
Received: by 10.114.110.12 with SMTP id i12mr3249428wac.73.1201117058990;
        Wed, 23 Jan 2008 11:37:38 -0800 (PST)
Received: from ?192.168.1.101? ( [24.82.155.191])
        by mx.google.com with ESMTPS id n22sm16533288pof.1.2008.01.23.11.37.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 23 Jan 2008 11:37:38 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <478BE349.20008@gmail.com>
References: <951E69A3-FC79-413B-BA5C-533A855A9391@apache.org> <478BE349.20008@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E760711B-9024-4378-BC6E-02C00B7EAEEE@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: SimpleFragmenter docs
Date: Wed, 23 Jan 2008 11:37:28 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Indeed--this is why the associated parameter is called  
maxAnalyzedChars in Solr.

-Mike

On 14-Jan-08, at 2:33 PM, Mark Miller wrote:

> I think your right, and thats not the only place...the whole  
> handling of maxDocBytesToAnalyze in the main Highlighter class  
> shares this issue. I guess the idea is an ascii holdover one byte  
> equals one char? I am sure Mark H can clear it up, but don't forgot  
> the maxDocBytesToAnalyze part as well when its corrected.
>
> - Mark
>
> Grant Ingersoll wrote:
>> I was looking at the SimpleFragmenter in contrib/Highlighter and  
>> was wondering about the fragmentSize value.  It says the value is  
>> the number of bytes, but looking at the code it's using the String  
>> offset, right?  So it should be the number of characters, right?
>>
>> I can fix it, just wanted to confirm my understanding.
>>
>> Thanks,
>> Grant
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 23 21:19:31 2008
Return-Path: <java-user-return-32168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28185 invoked from network); 23 Jan 2008 21:19:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2008 21:19:31 -0000
Received: (qmail 62818 invoked by uid 500); 23 Jan 2008 21:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62781 invoked by uid 500); 23 Jan 2008 21:19:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62769 invoked by uid 99); 23 Jan 2008 21:19:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 13:19:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 21:18:49 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0NLIk1l001322
	for <java-user@lucene.apache.org>; Wed, 23 Jan 2008 23:18:46 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1nnixmn; 23 Jan 2008 23:18:00 +0200
Message-ID: <4797AF2A.5040807@teamware.com>
Date: Thu, 24 Jan 2008 08:18:34 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
 IndexReader?)
References: <332767.18403.qm@web50301.mail.re2.yahoo.com> <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com> <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk> <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com> <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk> <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com> <4794F518.80804@gmail.com> <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk> <4795C3DC.5000101@gmail.com> <1200997852.9514.226.camel@PC990.sb.statsbiblioteket.dk> <4795CEA3.9030703@gmail.com> <1201099667.9514.282.camel@PC990.sb.statsbiblioteket.dk>
In-Reply-To: <1201099667.9514.282.camel@PC990.sb.statsbiblioteket.dk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 23 Jan 2008 23:18:46 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Toke Eskildsen wrote:
> 
> == Average over the first 50.000 queries ==
> metis_flash_RAID0_8GB_i37_t2_l21.log - 279.6 q/sec
> metis_flash_RAID0_8GB_i37_t2_l23.log - 202.3 q/sec
> metis_flash_RAID0_8GB_i37_v23_t2_l23.log - 195.9 q/sec

> == Average over the first 340.000 queries ==
> metis_flash_RAID0_8GB_i37_t2_l21.log - 305.3 q/sec
> metis_flash_RAID0_8GB_i37_t2_l23.log - 260.5 q/sec
> metis_flash_RAID0_8GB_i37_v23_t2_l23.log - 294.1 q/sec

These are odd.  The last case in both of the above shows a slowdown compared to 
2.1 index and version and in the first 50K queries, the 2.3 index and version is 
even slower than 2.3 with 2.1 index.  It catches up in the longer result set.

Any ideas why that might be.  The shared searcher multiple threads is probably 
quite a common use case.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 01:25:54 2008
Return-Path: <java-user-return-32169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46170 invoked from network); 24 Jan 2008 01:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 01:25:54 -0000
Received: (qmail 23107 invoked by uid 500); 24 Jan 2008 01:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23063 invoked by uid 500); 24 Jan 2008 01:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23052 invoked by uid 99); 24 Jan 2008 01:25:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jan 2008 17:25:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 01:25:13 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 7EEE74A8136
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 12:24:03 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: field:* query type, and prefix queries
Date: Thu, 24 Jan 2008 12:23:33 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801241223.33482.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all...

Just out of interest, why does field:* go via getWildcardQuery instead of 
getPrefixQuery?  It seems to me that it should be treated as a prefix of "", 
but am I missing something important?

Also, I've noticed that although RangeQuery was optimised in a recent version 
of Lucene, PrefixQuery is still quite slow even though any prefix query and 
range query both walk through a list of adjacent terms.  I would expect them 
to take about the same amount of time to run if covering the same terms.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 08:02:15 2008
Return-Path: <java-user-return-32170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62132 invoked from network); 24 Jan 2008 08:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 08:02:15 -0000
Received: (qmail 28399 invoked by uid 500); 24 Jan 2008 08:02:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27999 invoked by uid 500); 24 Jan 2008 08:01:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27988 invoked by uid 99); 24 Jan 2008 08:01:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 00:01:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 08:01:33 +0000
Received: by wa-out-1112.google.com with SMTP id j40so258538wah.11
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 00:01:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=4sJCpLr4VHEPVawJj6ocwpkKjwj0YMpOUM13f38A0xE=;
        b=LKWEOBzMD25piYsUi2ty350j5PgH33A1a9MEZE5qF3kFS2szd5QygWQwGYhoUWfYvjns8mnHxH+KX0s2+duuc3QRmvW5eOl7dYTUA66hydySnFjZu0mkplVgXv3Pu01v+LFqCgyclwZMiAy2KXxbJTO/khyCy1fj1HhannRE3Tc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aCvE03VoB5MfYGzgQxsxibuaBJ3z6j2Z0eT4x5wxrMKovMc4LRxSrjvcvY8xrN/1Q922m/wF8Fob8eervRZ/mTokY5juU/yl/UQ0bnyxxLHyf9RPyRktisgBFVwHdFdmGP0kLlqzoNZkMNelqMEvtlLDvkUskzNdmaDFTwK4Jus=
Received: by 10.115.111.1 with SMTP id o1mr437728wam.87.1201161699386;
        Thu, 24 Jan 2008 00:01:39 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Thu, 24 Jan 2008 00:01:39 -0800 (PST)
Message-ID: <a206fb7e0801240001j1f67f186n25378878c01b5603@mail.gmail.com>
Date: Thu, 24 Jan 2008 00:01:39 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using RangeFilter
In-Reply-To: <479504FA.2080304@teamware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21335.37522.qm@web50306.mail.re2.yahoo.com>
	 <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>
	 <479504FA.2080304@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I've a field as NO_NORM, does it has to be untokenized to be able to
sort on it?


On Jan 21, 2008 12:47 PM, Antony Bowesman <adb@teamware.com> wrote:
> vivek sar wrote:
> > I need to be able to sort on optime as well, thus need to store it .
>
> Lucene's default sorting does not need the field to be stored, only indexed as
> untokenized.
> Antony
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 08:45:00 2008
Return-Path: <java-user-return-32171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73739 invoked from network); 24 Jan 2008 08:45:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 08:45:00 -0000
Received: (qmail 71048 invoked by uid 500); 24 Jan 2008 08:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71020 invoked by uid 500); 24 Jan 2008 08:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71009 invoked by uid 99); 24 Jan 2008 08:44:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 00:44:44 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 08:44:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JHxh6-0004ck-VE
	for java-user@lucene.apache.org; Thu, 24 Jan 2008 00:44:20 -0800
Message-ID: <15060757.post@talk.nabble.com>
Date: Thu, 24 Jan 2008 00:44:20 -0800 (PST)
From: Fabrice Robini <fro@octo.com>
To: java-user@lucene.apache.org
Subject: Re: Is Fair Similarity working with lucene 2.2 ?
In-Reply-To: <15026214.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fro@octo.com
References: <15001250.post@talk.nabble.com> <200801212147.43414@danielnaber.de> <15014224.post@talk.nabble.com> <200801221616.m0MGGxv6012643@mi1.bluebottle.com> <15023062.post@talk.nabble.com> <200801221908.m0MJ837I008832@mi0.bluebottle.com> <15026214.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Is there anything I can do to pass my Unit-Test ? 
Or it is impossible ?

Thanks a lot,

Fabrice



Fabrice Robini wrote:
> 
> Hi Srikant,
> 
> I really thank you for your reply, it's very interesting.
> I have to say I am confused with that now... 
> I do not know what I can to for passing this Unit test...
> 
> I agree with you, it may be an issue of computing relevance.
> 
> Fabrice
> 
> 
> Srikant Jakilinki-3 wrote:
>> 
>> OK, got it to work. Thanks.
>> 
>> By a quick scoring comparision, I got the same scores for both hits. 
>> Maybe there is a loss of precision somewhere. Or when scores are equal, 
>> Lucene is doing something unintended/overlooked and thus putting shorter 
>> documents higher as the experiment is a special case where the TF of a 
>> queried term (for both suites, the TF of x = 10%) is equal which is very 
>> rarely. Or maybe the IDF factor is kicking in in some strange way 
>> although it shouldnt. There are a number of varied reasons, but for the 
>> naked eye, there isnt much.
>> 
>> However, that said, length normalization is not a science but an art and 
>> the simple scheme we have here in the FairSimilarity will not perform 
>> always as expected in real world scenarios. Maybe I am missing something 
>> or have forgot my basics but that is not to say your observation is
>> trivial.
>> 
>> Rather, the contrary. Hope there will be more activity on this topic 
>> because it is an issue of computing relevance which is the core of
>> search.
>> 
>> Cheers,
>> Srikant
>> 
>> Fabrice Robini wrote:
>>> Oooops sorry, bad cut/paste...
>>>
>>> Here is the right one :-)
>>>
>>>     public void testFairSimilarity() throws CorruptIndexException,
>>> IOException, ParseException
>>>     {
>>>         Directory theDirectory = new RAMDirectory();
>>>         Analyzer theAnalyzer = new StandardAnalyzer();
>>>         
>>>         IndexWriter theIndexWriter = new IndexWriter(theDirectory,
>>> theAnalyzer);
>>>         theIndexWriter.setSimilarity(new FairSimilarity());
>>>         
>>>         Document doc1 = new Document();
>>>         Field name1 = new Field("NAME", "SHORT_SUITE", Field.Store.YES,
>>> Field.Index.UN_TOKENIZED);
>>>         Field content1 = new Field("CONTENT", "x 2 3 4 5 6 7 8 9 10",
>>> Field.Store.NO, Field.Index.TOKENIZED);
>>>         doc1.add(name1);
>>>         doc1.add(content1);        
>>>         theIndexWriter.addDocument(doc1);
>>>         
>>>         Document doc2 = new Document();
>>>         Field name2 = new Field("NAME", "BIG_SUITE", Field.Store.YES,
>>> Field.Index.UN_TOKENIZED);
>>>         Field content2 = new Field("CONTENT", "x x 3 4 5 6 7 8 9 10 11
>>> 12 13
>>> 14 15 16 17 18 19 20", Field.Store.NO, Field.Index.TOKENIZED);
>>>         doc2.add(name2);
>>>         doc2.add(content2);        
>>>         theIndexWriter.addDocument(doc2);
>>>         
>>>         theIndexWriter.close();
>>>         
>>>         Searcher searcher = new IndexSearcher(theDirectory);
>>>         searcher.setSimilarity(new FairSimilarity());
>>>
>>>         QueryParser queryParser = new QueryParser("CONTENT",
>>> theAnalyzer);
>>>
>>>         Hits hits = searcher.search(queryParser.parse("x"));
>>>
>>>         assertEquals(2, hits.length());
>>>         assertEquals("BIG_SUITE", hits.doc(0).get("NAME"));
>>>         assertEquals("SHORT_SUITE", hits.doc(1).get("NAME"));
>>>     }
>>>     
>>>
>>>
>>>
>>> Srikant Jakilinki-3 wrote:
>>>   
>>>> Well, I cant seem to even get past the assertions of this code.
>>>>
>>>> The first assertion is failing in that I get 0 hits. I am using 
>>>> SimpleAnalyzer since I do not have a FrenchAnalyzer.
>>>>
>>>> Any thoughts?
>>>> Srikant
>>>>
>> 
>> ----------------------------------------------------------------------
>> Free pop3 email with a spam filter.
>> http://www.bluebottle.com/tag/5
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Is-Fair-Similarity-working-with-lucene-2.2---tp15001250p15060757.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 09:21:45 2008
Return-Path: <java-user-return-32172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88451 invoked from network); 24 Jan 2008 09:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 09:21:45 -0000
Received: (qmail 17082 invoked by uid 500); 24 Jan 2008 09:21:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17041 invoked by uid 500); 24 Jan 2008 09:21:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17029 invoked by uid 99); 24 Jan 2008 09:21:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 01:21:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 09:21:02 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JV5007BM5Z793@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Thu, 24 Jan 2008 10:21:07 +0100 (MET)
Date: Thu, 24 Jan 2008 10:21:07 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
In-reply-to: <4797AF2A.5040807@teamware.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1201166467.9514.319.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <332767.18403.qm@web50301.mail.re2.yahoo.com>
 <66C73061-46B3-4817-B806-838EDA1BD8E8@mikemccandless.com>
 <1200907202.9514.149.camel@PC990.sb.statsbiblioteket.dk>
 <CFB4BA9D-6B55-40D8-A936-531AA57F5BED@mikemccandless.com>
 <1200929553.9514.189.camel@PC990.sb.statsbiblioteket.dk>
 <c68e39170801211112p7af59650pb678beb41be016ee@mail.gmail.com>
 <4794F518.80804@gmail.com>
 <1200991312.9514.209.camel@PC990.sb.statsbiblioteket.dk>
 <4795C3DC.5000101@gmail.com>
 <1200997852.9514.226.camel@PC990.sb.statsbiblioteket.dk>
 <4795CEA3.9030703@gmail.com>
 <1201099667.9514.282.camel@PC990.sb.statsbiblioteket.dk>
 <4797AF2A.5040807@teamware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-01-24 at 08:18 +1100, Antony Bowesman wrote:
> These are odd.  The last case in both of the above shows a slowdown compared to 
> 2.1 index and version and in the first 50K queries, the 2.3 index and version is 
> even slower than 2.3 with 2.1 index.  It catches up in the longer result set.
> 
> Any ideas why that might be.

Looking at the graphs I can see that the 2 threads / shared searcher is
suspiciously fast at getting up to full speed. It could be because the
disk-read-cache wasn't properly flushed. I'll rerun the test.

I've performed an inspection of graphs for my other published
measurements and they looked as expected. I'll spend some more time on
it tomorrow.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 09:31:29 2008
Return-Path: <java-user-return-32173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94226 invoked from network); 24 Jan 2008 09:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 09:31:29 -0000
Received: (qmail 31567 invoked by uid 500); 24 Jan 2008 09:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31530 invoked by uid 500); 24 Jan 2008 09:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31511 invoked by uid 99); 24 Jan 2008 09:31:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 01:31:11 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 09:30:45 +0000
Received: by nz-out-0506.google.com with SMTP id i28so106260nzi.5
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 01:30:50 -0800 (PST)
Received: by 10.142.103.6 with SMTP id a6mr160891wfc.109.1201167049294;
        Thu, 24 Jan 2008 01:30:49 -0800 (PST)
Received: by 10.142.172.11 with HTTP; Thu, 24 Jan 2008 01:30:49 -0800 (PST)
Message-ID: <7dc0578d0801240130u5200ad4ej762f5c705953ebf7@mail.gmail.com>
Date: Thu, 24 Jan 2008 15:00:49 +0530
From: "Prathiba Paka" <prathiba.p@easywaytech.com>
To: java-user@lucene.apache.org
Subject: Lucene search strings two
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27549_1168912.1201167049261"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27549_1168912.1201167049261
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all.
I need to check two conditions in search
first i need to find out bank name next
in those i need to find documents consisting particular city
finally i need the documents which satisfy both conditions
i.e., documents with bank+city
please can anyone help me

Thanks,
prathiba.P

------=_Part_27549_1168912.1201167049261--

From java-user-return-32174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 10:58:31 2008
Return-Path: <java-user-return-32174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32357 invoked from network); 24 Jan 2008 10:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 10:58:31 -0000
Received: (qmail 58671 invoked by uid 500); 24 Jan 2008 10:58:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58643 invoked by uid 500); 24 Jan 2008 10:58:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58632 invoked by uid 99); 24 Jan 2008 10:58:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 02:58:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 10:57:47 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m0OAvfBf010716
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 12:57:41 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id m1oclwiu; 24 Jan 2008 12:57:00 +0200
Message-ID: <47986F1A.6010706@teamware.com>
Date: Thu, 24 Jan 2008 21:57:30 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using RangeFilter
References: <21335.37522.qm@web50306.mail.re2.yahoo.com>	 <a206fb7e0801192051x3ba2fa5dq83d8259ed091b799@mail.gmail.com>	 <479504FA.2080304@teamware.com> <a206fb7e0801240001j1f67f186n25378878c01b5603@mail.gmail.com>
In-Reply-To: <a206fb7e0801240001j1f67f186n25378878c01b5603@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 24 Jan 2008 12:57:41 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

vivek sar wrote:
> I've a field as NO_NORM, does it has to be untokenized to be able to
> sort on it?

NO_NORMS is the same as UNTOKENIZED + omitNorms, so you can sort on that.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 12:42:56 2008
Return-Path: <java-user-return-32175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75266 invoked from network); 24 Jan 2008 12:42:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 12:42:56 -0000
Received: (qmail 76685 invoked by uid 500); 24 Jan 2008 12:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76489 invoked by uid 500); 24 Jan 2008 12:42:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76478 invoked by uid 99); 24 Jan 2008 12:42:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 04:42:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [147.202.48.11] (HELO server3.xennexinc.com) (147.202.48.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 12:42:26 +0000
Received: from xennex by server3.xennexinc.com with local (Exim 4.68)
	(envelope-from <yarong@xennexinc.com>)
	id 1JI1PN-00015y-5f
	for java-user@lucene.apache.org; Thu, 24 Jan 2008 06:42:17 -0600
Received: from 132.77.4.129 ([132.77.4.129])
        (SquirrelMail authenticated user yarong@xennexinc.com)
        by mail.xennexinc.com with HTTP;
        Thu, 24 Jan 2008 06:42:17 -0600 (CST)
Message-ID: <9784.132.77.4.129.1201178537.squirrel@mail.xennexinc.com>
Date: Thu, 24 Jan 2008 06:42:17 -0600 (CST)
Subject: Full Text Searching a Relational Model
From: yarong@xennexinc.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.9a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - server3.xennexinc.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32004 501] / [47 12]
X-AntiAbuse: Sender Address Domain - xennexinc.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

(Warning, not for the weak-hearted)

I'm currently working on a project where we have a large and complex data
model, related to Genomics. We are trying to build a search engine that
provides "full text" and "field-based text" searches for our customer base
(mostly academic research), and are evaluating different tools for this
purpose.

As a starting point, we have, as an example, a set of objects (stored in
tables as a relational model):
Gene [ID, Symbol, Description]
Article - M:M with Gene [ID, Title]
Disease - M:M with Gene [ID, Name]
Author - M:M with Article [ID, Name]
(Note: M:M tables exist, just link IDs)

An example model would be (hierarchical, relations dealt with as
duplications)

  Gene [ID=1, Symbol=EGFR, Description=epidermal growth factor receptor]
    Article [ID=1, Title=EGFR mutations in lung cancer: correlation with
clinical response to gefitinib therapy]
      Author [ID=1, Name=H. Michaelson]
      Author [ID=2, Name=J. Watson]
    Article [ID=2, Title=Proteomics analysis of epidermal protein kinases
by target class-selective prefractionation and tandem mass
spectrometry]
      Author [ID=1, Name=H. Michaelson]
      Author [ID=3, Name=M. Roberts]
    Disease [ID=1, Name=Epidermal sluffing]

  Gene [ID=2, Symbol=AHCY, Description=S-adenosylhomocysteine hydrolase]
    Article [ID=3, Title=Limited proteolysis of S-adenosylhomocysteine
hydrolase: implications for the three-dimensional structure]
      Author [ID=4, Name=B. Cohen]
      Author [ID=5, Name=L. Alexander]
    Article [ID=2, Title=Proteomics analysis of epidermal protein kinases
by target class-selective prefractionation and tandem mass
spectrometry]
      Author [ID=1, Name=H. Michaelson]
      Author [ID=3, Name=M. Roberts]

Note IDs in the objects above, as they relay the relations in the
hierarchical model.

In our Full-Text search, we would like to allow users to search ANY
textual field for any string. For instance, the term "epidermal", and
display the list of genes which have any data associated with them with
that term (ranked, of course).
Our list of results would be something like:

EGFR
  Found in Description (epidermal growth factor receptor)
  Found in Article ID#2, in Title (proteomics analysis of epidermal
protein kinases by target class-selective prefractionation and tandem
mass spectrometry)
  Found in Disease ID#1, in Name (Epidermal sluffing)

AHCY
  Found in Article ID#2, in Title (proteomics analysis of epidermal
protein kinases by target class-selective prefractionation and tandem
mass spectrometry)

Note that the results retain a hierarchial view of our Genes (us being
Gene-Centric, we're pretty much framing the question "find this term
related in information related to those genes"). Also note that Article ID
#2 has an M:M with Gene ID2 (AHCY) and Gene ID1 (EGFR), and only due to
that fact, AHCY is considered a gene that has "epidermal" in its
annotations.

Obviously, we'd like to rank fields by location in hierarchy (A term in a
gene name is scored higher than the name of the author of an article
related to a gene) and by number of hits (number of times a term is found
related to that gene, 3 in the case of EGFR above).

Ideas for how to take on this challenge? Implementation? Tools?

Thanks!
Yaron Golan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 13:33:22 2008
Return-Path: <java-user-return-32176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96930 invoked from network); 24 Jan 2008 13:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 13:33:22 -0000
Received: (qmail 47016 invoked by uid 500); 24 Jan 2008 13:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46979 invoked by uid 500); 24 Jan 2008 13:33:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46968 invoked by uid 99); 24 Jan 2008 13:33:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 05:33:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:32:52 +0000
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 1E7E841926
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 22:32:44 +0900 (JST)
Message-ID: <47989354.2080103@r.email.ne.jp>
Date: Thu, 24 Jan 2008 22:32:04 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: LogMergePolicy
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'm curious, why is LogMergePolicy named *Log*MergePolicy?
(Why not ExpMergePolicy? :-)

Thank you,

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 13:47:11 2008
Return-Path: <java-user-return-32177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2914 invoked from network); 24 Jan 2008 13:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 13:47:11 -0000
Received: (qmail 68772 invoked by uid 500); 24 Jan 2008 13:46:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68509 invoked by uid 500); 24 Jan 2008 13:46:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68498 invoked by uid 99); 24 Jan 2008 13:46:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 05:46:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:46:42 +0000
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 8C141AD121D
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 05:41:44 -0800 (PST)
X-Quarantine-ID: <LaxZKtrhot+2>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LaxZKtrhot+2 for <java-user@lucene.apache.org>;
	Thu, 24 Jan 2008 05:41:41 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 6A0AAAD0E52
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 05:41:25 -0800 (PST)
Subject: RE: LogMergePolicy
Date: Thu, 24 Jan 2008 05:40:57 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <392521EA2692A2418DF48C331E61E3250E7765@professorville.windows.esseff.org>
Content-class: urn:content-classes:message
In-Reply-To: <47989354.2080103@r.email.ne.jp>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: LogMergePolicy
Thread-Index: AchejWYzTGf7MbVUQLiavTT6x2FDDgAANBhQ
References: <47989354.2080103@r.email.ne.jp>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

	I'm curious, why is LogMergePolicy named *Log*MergePolicy?
	(Why not ExpMergePolicy? :-)

Well, I guess it's a matter of perspective. When you look at the way the
algorithm works, the merge decisions are based on a concept of level and
levels are assigned based on the log of the number of documents in a
segment (going back to Ning's equation). When one is in the code, it's
very natural to think/talk about "log-base-merge-factor".

This does result in the number of documents in segments being
order-of-magnitude/exponentially related so that might have made more
sense to users, so perhaps it wasn't the best decision ...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 14:00:26 2008
Return-Path: <java-user-return-32178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10404 invoked from network); 24 Jan 2008 14:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 14:00:25 -0000
Received: (qmail 96465 invoked by uid 500); 24 Jan 2008 14:00:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96159 invoked by uid 500); 24 Jan 2008 14:00:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96148 invoked by uid 99); 24 Jan 2008 14:00:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 06:00:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:59:57 +0000
Received: by wx-out-0506.google.com with SMTP id i28so147603wxd.20
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 05:59:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=MKAo0jSVvO8YfMT98k9NxleaRNJNfnQmo1umQK0QwSY=;
        b=Vc+MeZvsNwMBoT9bTgeEgNNlzlaQkby8ZTJ/gs82JVWep6e2jpHaPs1GpV4U1plYRxff0tR5V1UuBpMpWWL4SHqde2lMztuMplWQkN3fLly77PU690ljX1Pu2GLBY2NkdnSoDV9SJOGmHaCmZDkLJRfJhOsa7EfZpI4fMLlltAU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=DZYSxOn5wLZeB0SoozGgS1/JrWHb768HSqEfZropZSmNEK8XsHCqjtI1TA0Zu7XMWVWrbslhwOea/kb8EdLUOaH5KnJaNLUADZGkgOv4xxos2lOpOpKgl9JDcbbbkNWGB98wmhmw5sVVKofuoN/igZf0J3HvmzdtbG2rLdysWeU=
Received: by 10.142.14.20 with SMTP id 20mr347812wfn.2.1201183188701;
        Thu, 24 Jan 2008 05:59:48 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Thu, 24 Jan 2008 05:59:48 -0800 (PST)
Message-ID: <c68e39170801240559ge9ccbc6if9433e15ad8d17bf@mail.gmail.com>
Date: Thu, 24 Jan 2008 08:59:48 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: LogMergePolicy
In-Reply-To: <392521EA2692A2418DF48C331E61E3250E7765@professorville.windows.esseff.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <47989354.2080103@r.email.ne.jp>
	 <392521EA2692A2418DF48C331E61E3250E7765@professorville.windows.esseff.org>
X-Google-Sender-Auth: 376f6181c023fde5
X-Virus-Checked: Checked by ClamAV on apache.org

On Jan 24, 2008 8:40 AM, Steven Parkes <steven_parkes@esseff.org> wrote:
>         I'm curious, why is LogMergePolicy named *Log*MergePolicy?
>         (Why not ExpMergePolicy? :-)
>
> Well, I guess it's a matter of perspective. When you look at the way the
> algorithm works, the merge decisions are based on a concept of level and
> levels are assigned based on the log of the number of documents in a
> segment (going back to Ning's equation). When one is in the code, it's
> very natural to think/talk about "log-base-merge-factor".
>
> This does result in the number of documents in segments being
> order-of-magnitude/exponentially related so that might have made more
> sense to users, so perhaps it wasn't the best decision ...

I could be accurately described either way, but there is precedent for
"log" too... log-normal, for example is normal after one takes the log
(it could have been called exponential-normal).  I also tend to think
of our number system as logarithmic in nature rather than exponential.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 14:10:11 2008
Return-Path: <java-user-return-32179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16005 invoked from network); 24 Jan 2008 14:10:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 14:10:11 -0000
Received: (qmail 17400 invoked by uid 500); 24 Jan 2008 14:09:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17371 invoked by uid 500); 24 Jan 2008 14:09:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17360 invoked by uid 99); 24 Jan 2008 14:09:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 06:09:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 14:09:41 +0000
Received: from [192.168.1.4] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 4B84B36E0F
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 23:09:33 +0900 (JST)
Message-ID: <47989BF4.4080303@r.email.ne.jp>
Date: Thu, 24 Jan 2008 23:08:52 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: LogMergePolicy
References: <47989354.2080103@r.email.ne.jp> <392521EA2692A2418DF48C331E61E3250E7765@professorville.windows.esseff.org>
In-Reply-To: <392521EA2692A2418DF48C331E61E3250E7765@professorville.windows.esseff.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you Steven and Yonik,

I think I got it. And I can find LogMergePolicy uses
Math.log() to find merges. :-)

Thank you again,

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 14:27:10 2008
Return-Path: <java-user-return-32180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23246 invoked from network); 24 Jan 2008 14:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 14:27:10 -0000
Received: (qmail 45229 invoked by uid 500); 24 Jan 2008 14:26:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45170 invoked by uid 500); 24 Jan 2008 14:26:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45124 invoked by uid 99); 24 Jan 2008 14:26:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 06:26:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.214.224 as permitted sender)
Received: from [72.14.214.224] (HELO hu-out-0506.google.com) (72.14.214.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 14:26:24 +0000
Received: by hu-out-0506.google.com with SMTP id 27so167217hub.15
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 06:26:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=/TAKyjHjdklq2a9JjaDQaS6IvhHh5pnXF3cKyKhnkDg=;
        b=tsfTfUqmtUuyKyBcBt38yVssAk/GUaZleqsXoooos/UOwkexOci1WmUWHQ7LKEuxNVVr4ePLHrOzJ72jXq4AwDf2X28JvzfA2y9wbEEbrWEUuxldH8CJjVeo1VqZCqmVg4MyB9WEkagBK309f8XZLjF47Eg/JMq6GC6MT3QRqAA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=wAHCndcU0xU/oRdEHicKkSqhNeC+R18kwZ57wdSBlnmgpDAWGNwTRTnOAlE9NQ18T2g+t5/KKgy81H+xGHNohzP3fALuAC/WEyccEuGuOgCRaq0gv2DNVxdog6NoSFSszks+pXhh5XEd91lCrfj2iKfiC0GkMztuBaIde59+fwQ=
Received: by 10.78.193.19 with SMTP id q19mr875576huf.69.1201184788860;
        Thu, 24 Jan 2008 06:26:28 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Thu, 24 Jan 2008 06:26:28 -0800 (PST)
Message-ID: <6e3ae6310801240626v7e17c69byd2246d74cc650d9a@mail.gmail.com>
Date: Thu, 24 Jan 2008 07:26:28 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Full Text Searching a Relational Model
In-Reply-To: <9784.132.77.4.129.1201178537.squirrel@mail.xennexinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <9784.132.77.4.129.1201178537.squirrel@mail.xennexinc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

In general, you just need to denorm the data and create a list of
Genes, and add each Genes' related information by SQLs. Ranking can be
easily adjusted via each field's weight, not a big deal.

Seems an ideal case for using DBSight. It can also do incremental
indexing, which you may also need.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Jan 24, 2008 5:42 AM,  <yarong@xennexinc.com> wrote:
> Hi,
>
> (Warning, not for the weak-hearted)
>
> I'm currently working on a project where we have a large and complex data
> model, related to Genomics. We are trying to build a search engine that
> provides "full text" and "field-based text" searches for our customer base
> (mostly academic research), and are evaluating different tools for this
> purpose.
>
> As a starting point, we have, as an example, a set of objects (stored in
> tables as a relational model):
> Gene [ID, Symbol, Description]
> Article - M:M with Gene [ID, Title]
> Disease - M:M with Gene [ID, Name]
> Author - M:M with Article [ID, Name]
> (Note: M:M tables exist, just link IDs)
>
> An example model would be (hierarchical, relations dealt with as
> duplications)
>
>   Gene [ID=1, Symbol=EGFR, Description=epidermal growth factor receptor]
>     Article [ID=1, Title=EGFR mutations in lung cancer: correlation with
> clinical response to gefitinib therapy]
>       Author [ID=1, Name=H. Michaelson]
>       Author [ID=2, Name=J. Watson]
>     Article [ID=2, Title=Proteomics analysis of epidermal protein kinases
> by target class-selective prefractionation and tandem mass
> spectrometry]
>       Author [ID=1, Name=H. Michaelson]
>       Author [ID=3, Name=M. Roberts]
>     Disease [ID=1, Name=Epidermal sluffing]
>
>   Gene [ID=2, Symbol=AHCY, Description=S-adenosylhomocysteine hydrolase]
>     Article [ID=3, Title=Limited proteolysis of S-adenosylhomocysteine
> hydrolase: implications for the three-dimensional structure]
>       Author [ID=4, Name=B. Cohen]
>       Author [ID=5, Name=L. Alexander]
>     Article [ID=2, Title=Proteomics analysis of epidermal protein kinases
> by target class-selective prefractionation and tandem mass
> spectrometry]
>       Author [ID=1, Name=H. Michaelson]
>       Author [ID=3, Name=M. Roberts]
>
> Note IDs in the objects above, as they relay the relations in the
> hierarchical model.
>
> In our Full-Text search, we would like to allow users to search ANY
> textual field for any string. For instance, the term "epidermal", and
> display the list of genes which have any data associated with them with
> that term (ranked, of course).
> Our list of results would be something like:
>
> EGFR
>   Found in Description (epidermal growth factor receptor)
>   Found in Article ID#2, in Title (proteomics analysis of epidermal
> protein kinases by target class-selective prefractionation and tandem
> mass spectrometry)
>   Found in Disease ID#1, in Name (Epidermal sluffing)
>
> AHCY
>   Found in Article ID#2, in Title (proteomics analysis of epidermal
> protein kinases by target class-selective prefractionation and tandem
> mass spectrometry)
>
> Note that the results retain a hierarchial view of our Genes (us being
> Gene-Centric, we're pretty much framing the question "find this term
> related in information related to those genes"). Also note that Article ID
> #2 has an M:M with Gene ID2 (AHCY) and Gene ID1 (EGFR), and only due to
> that fact, AHCY is considered a gene that has "epidermal" in its
> annotations.
>
> Obviously, we'd like to rank fields by location in hierarchy (A term in a
> gene name is scored higher than the name of the author of an article
> related to a gene) and by number of hits (number of times a term is found
> related to that gene, 3 in the case of EGFR above).
>
> Ideas for how to take on this challenge? Implementation? Tools?
>
> Thanks!
> Yaron Golan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 18:18:38 2008
Return-Path: <java-user-return-32181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91034 invoked from network); 24 Jan 2008 18:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 18:18:36 -0000
Received: (qmail 25934 invoked by uid 500); 24 Jan 2008 18:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25898 invoked by uid 500); 24 Jan 2008 18:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25887 invoked by uid 99); 24 Jan 2008 18:18:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 10:18:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Jan 2008 18:17:53 +0000
Received: (qmail invoked by alias); 24 Jan 2008 18:17:57 -0000
Received: from e178077018.adsl.alicedsl.de (EHLO msrvcn04) [85.178.77.18]
  by mail.gmx.net (mp007) with SMTP; 24 Jan 2008 19:17:57 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/7FvkB+B37qmrlOJS+EGOxzAr3oGxfowXlOsHDjI
	CIkV5gcTQbT0Th
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Creating search query
Date: Thu, 24 Jan 2008 19:18:00 +0100
Message-ID: <E544BF4FDCC14418A67407DB1DC85519@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchetXDjn/rIiRC2S9Sitrw3NL8uEA==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have an index with some fields which are indexed and un_tokenized
(keywords) and one field which is indexed and tokenized (content).

Now I want to create a Query-Object:

	TermQuery k1 = new TermQuery(new Term("foo", "some foo"));
	TermQuery k2 = new TermQuery(new Term("bar", "some bar"));
	QueryParser p = new QueryParser("content", new
SomeAnalyzer());//same analyzer is used for indexing
	Query c =p.parse("text we are looking for");
		
	BooleanQuery q = new BooleanQuery();
	q.add(k1, Occur.MUST);
	q.add(k2, Occur.MUST);
	q.add(c, Occur.MUST); 

Is this the best way?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 18:21:16 2008
Return-Path: <java-user-return-32182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97993 invoked from network); 24 Jan 2008 18:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 18:21:16 -0000
Received: (qmail 29143 invoked by uid 500); 24 Jan 2008 18:21:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29110 invoked by uid 500); 24 Jan 2008 18:21:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29099 invoked by uid 99); 24 Jan 2008 18:21:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 10:21:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Jan 2008 18:20:33 +0000
Received: (qmail invoked by alias); 24 Jan 2008 18:20:37 -0000
Received: from e178077018.adsl.alicedsl.de (EHLO msrvcn04) [85.178.77.18]
  by mail.gmx.net (mp009) with SMTP; 24 Jan 2008 19:20:37 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+RlQ9BGA+R+cNcD9FEpih3cG994l9MDpqQT32xD6
	v4hUADLB1TZUws
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <F13DFF606AF7430791D37321C7DED803@msrvcn04> <52c3ddca0801222322l763f0193t561b8c2eca4cf8ad@mail.gmail.com>
Subject: RE: Compass
Date: Thu, 24 Jan 2008 19:20:40 +0100
Message-ID: <705A78E2D4A540F1AF79495F31E99B35@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <52c3ddca0801222322l763f0193t561b8c2eca4cf8ad@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchdkNknR+M3awWuQyS27sqbGfYZPgBJPEVA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you. 

> -----Original Message-----
> From: Lukas Vlcek [mailto:lukas.vlcek@gmail.com] 
> Sent: Mittwoch, 23. Januar 2008 08:23
> To: java-user@lucene.apache.org
> Subject: Re: Compass
> 
> Hi,
> 
> I am using Compass with Spring and JPA. It works pretty nice. 
> I don't store
> index into database, I use traditional file system based Lucene index.
> Updates work very well but you have to be careful about 
> proper mapping of
> your objects into search engine (specially parent-child mappings).
> 
> Regards,
> Lukas
> 
> On Jan 21, 2008 8:08 PM, <spring@gmx.eu> wrote:
> 
> > Hi,
> >
> > compass (http://www.opensymphony.com/compass/content/lucene.html)
> > promisses
> > many nice things in my opinion.
> > Has anybody production experiences with it?
> >
> > Especially Jdbc Directory and Updates?
> >
> > Thank you.
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> -- 
> http://blog.lukas-vlcek.com/
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 18:49:34 2008
Return-Path: <java-user-return-32183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10779 invoked from network); 24 Jan 2008 18:49:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 18:49:34 -0000
Received: (qmail 83407 invoked by uid 500); 24 Jan 2008 18:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82778 invoked by uid 500); 24 Jan 2008 18:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82767 invoked by uid 99); 24 Jan 2008 18:49:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 10:49:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 18:48:51 +0000
Received: by fg-out-1718.google.com with SMTP id d23so358211fga.27
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 10:48:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yQnoqT05GWb+16T8oDWh7Mt+OWv2xc6xyieOPb96XgM=;
        b=cgebwcpOTso5IsLM3XH9VoGeDDNUD8OplrBYyhXPjsSrAjUvK7gimCCZz3CZbKlx1gRfJdvOwvqa7OZEzW8+0d076IMy2QrMc6fgTnW43a7Wxp4U5cjqJj6jHwTeU0t0DmcBnEQ/9dKy/PbGoicZc5QP4TQisjonPO4ZWWHQRvc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qf/ZRB8uG2eZXqkzi6Utypr42L76+eCtBX5uHEt4vzfiK9R40dY2U8oTPotK/THid4AvvddOG+/5t8Z8LOttsES3GVbA6NKufcYqQn827SAG2AZn9jXRW7IN1xHx5/Z6wMb31W/jiYEiLYHpS7w/0lXPv0DtpElDgGm0ZPdjVFI=
Received: by 10.82.145.7 with SMTP id s7mr1871559bud.7.1201200536101;
        Thu, 24 Jan 2008 10:48:56 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 24 Jan 2008 10:48:56 -0800 (PST)
Message-ID: <359a92830801241048r3956b73dwdab18de5d7f2b228@mail.gmail.com>
Date: Thu, 24 Jan 2008 13:48:56 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating search query
In-Reply-To: <E544BF4FDCC14418A67407DB1DC85519@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25047_20164557.1201200536091"
References: <E544BF4FDCC14418A67407DB1DC85519@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25047_20164557.1201200536091
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That should work fine, assuming that foo and bar are the untokenized
fields and content is the tokenized content.

Erick

On Jan 24, 2008 1:18 PM, <spring@gmx.eu> wrote:

> Hi,
>
> I have an index with some fields which are indexed and un_tokenized
> (keywords) and one field which is indexed and tokenized (content).
>
> Now I want to create a Query-Object:
>
>        TermQuery k1 = new TermQuery(new Term("foo", "some foo"));
>        TermQuery k2 = new TermQuery(new Term("bar", "some bar"));
>        QueryParser p = new QueryParser("content", new
> SomeAnalyzer());//same analyzer is used for indexing
>        Query c =p.parse("text we are looking for");
>
>        BooleanQuery q = new BooleanQuery();
>        q.add(k1, Occur.MUST);
>        q.add(k2, Occur.MUST);
>        q.add(c, Occur.MUST);
>
> Is this the best way?
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25047_20164557.1201200536091--

From java-user-return-32184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 18:51:47 2008
Return-Path: <java-user-return-32184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11880 invoked from network); 24 Jan 2008 18:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 18:51:47 -0000
Received: (qmail 89292 invoked by uid 500); 24 Jan 2008 18:51:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89253 invoked by uid 500); 24 Jan 2008 18:51:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89242 invoked by uid 99); 24 Jan 2008 18:51:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 10:51:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Jan 2008 18:51:16 +0000
Received: (qmail invoked by alias); 24 Jan 2008 18:51:08 -0000
Received: from e178077018.adsl.alicedsl.de (EHLO msrvcn04) [85.178.77.18]
  by mail.gmx.net (mp012) with SMTP; 24 Jan 2008 19:51:08 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/hkLNWq8Hh/Mw6QsOHz1BQYmBjeEUiVx37eiU4A4
	ihuJnaNigdmnRO
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <E544BF4FDCC14418A67407DB1DC85519@msrvcn04> <359a92830801241048r3956b73dwdab18de5d7f2b228@mail.gmail.com>
Subject: RE: Creating search query
Date: Thu, 24 Jan 2008 19:51:01 +0100
Message-ID: <46D2A3C8EC6C4C07BF7F1C2EA8BAD130@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801241048r3956b73dwdab18de5d7f2b228@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: Acheud0DbcX1voueSQ2Zul89xWJdtgAACYcw
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, sorry, that's the case.

Thank you! 

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Donnerstag, 24. Januar 2008 19:49
> To: java-user@lucene.apache.org
> Subject: Re: Creating search query
> 
> That should work fine, assuming that foo and bar are the untokenized
> fields and content is the tokenized content.
> 
> Erick
> 
> On Jan 24, 2008 1:18 PM, <spring@gmx.eu> wrote:
> 
> > Hi,
> >
> > I have an index with some fields which are indexed and un_tokenized
> > (keywords) and one field which is indexed and tokenized (content).
> >
> > Now I want to create a Query-Object:
> >
> >        TermQuery k1 = new TermQuery(new Term("foo", "some foo"));
> >        TermQuery k2 = new TermQuery(new Term("bar", "some bar"));
> >        QueryParser p = new QueryParser("content", new
> > SomeAnalyzer());//same analyzer is used for indexing
> >        Query c =p.parse("text we are looking for");
> >
> >        BooleanQuery q = new BooleanQuery();
> >        q.add(k1, Occur.MUST);
> >        q.add(k2, Occur.MUST);
> >        q.add(c, Occur.MUST);
> >
> > Is this the best way?
> >
> > Thank you
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 19:33:44 2008
Return-Path: <java-user-return-32185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29997 invoked from network); 24 Jan 2008 19:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 19:33:44 -0000
Received: (qmail 68464 invoked by uid 500); 24 Jan 2008 19:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67647 invoked by uid 500); 24 Jan 2008 19:33:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67636 invoked by uid 99); 24 Jan 2008 19:33:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 11:33:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Jan 2008 19:33:01 +0000
Received: (qmail invoked by alias); 24 Jan 2008 19:33:06 -0000
Received: from e178077018.adsl.alicedsl.de (EHLO msrvcn04) [85.178.77.18]
  by mail.gmx.net (mp003) with SMTP; 24 Jan 2008 20:33:06 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+f+SAf+d2f0TD2Xgsm73jJIzMnwOpWfk/aYMER9o
	n1Fc0HYC3uw2mq
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04> <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com>
Subject: RE: Design questions
Date: Thu, 24 Jan 2008 20:33:09 +0100
Message-ID: <95834DE2092F457CBE7B6D188C52C2FD@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchUZPjv2Wy7/eh4RBi/eOMYagtMuQKWnYcw
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Freitag, 11. Januar 2008 16:16
> To: java-user@lucene.apache.org
> Subject: Re: Design questions

> But you could also vary this scheme by simply storing in your document
> the offsets for the beginning of each page.

Well, this is the best for my app I think, but...

How do I find out these offsets?

I'm adding the content field with:

IndexWriter#add(new Field("content", myContentReader));

I have no clue how find out the offsets in this reader. Must be something
with an analyzer and a TokenStream?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 19:56:10 2008
Return-Path: <java-user-return-32186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36708 invoked from network); 24 Jan 2008 19:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 19:56:10 -0000
Received: (qmail 11669 invoked by uid 500); 24 Jan 2008 19:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11636 invoked by uid 500); 24 Jan 2008 19:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11624 invoked by uid 99); 24 Jan 2008 19:55:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 11:55:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 19:55:28 +0000
Received: by fk-out-0910.google.com with SMTP id z23so342137fkz.5
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 11:55:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=7bvcrx7cGJDy9vhZBZeP8CJfX9uCvDUKgEy/BtMckGc=;
        b=vC0uqkpS42WV+VPNp8GxMz3vpEd8FqLwWqOnHCqi99R17vAFIxJbD5pdUPIg0bf9ou7Ga5V38WOyoRTfQraAW9AC6SDxqidGcWsfbfHPrZjdbWfJ/fQ4rRKZSDpFFEFDvCiskoBmjl2qWZ/RgLWchWZ8AJTbvn1yu/Eb+VlsCBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FITdr2djJsi7uxnFxsQhSJ82B8Iu9FiQXmq29iSHHnUGPuFZdb4qumF7M/GSH5YrwsIQWe83MuUXchzcbxOWMKEXpXyJJdy9yd+ZgM3zh5Yqk59vMmXDfzbU5cOyjhpyTGRh8KjKaCkE+E648YCZsZiytF9DyVwz8CW5UNgAYPc=
Received: by 10.82.184.2 with SMTP id h2mr1971243buf.22.1201204533299;
        Thu, 24 Jan 2008 11:55:33 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 24 Jan 2008 11:55:33 -0800 (PST)
Message-ID: <359a92830801241155k5af0e52dw9b58827f0a5a21ca@mail.gmail.com>
Date: Thu, 24 Jan 2008 14:55:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design questions
In-Reply-To: <95834DE2092F457CBE7B6D188C52C2FD@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25328_15589559.1201204533295"
References: <20080109213932.229980@gmx.net>
	 <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
	 <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04>
	 <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com>
	 <95834DE2092F457CBE7B6D188C52C2FD@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25328_15589559.1201204533295
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you'll have to implement your own Analyzer and count.
That is, every call to next() that returns a token will have to
also increment some counter by 1.

To use this, you must have some way of knowing when a page
ends, and at that point you call your instance of your custom
analyzer to see what the count is. Or your analyzer maintains
the list and you can call for it after you've added all the pages.

Analyzer.getPositionIncrementGap is called every time you
call document.add("field".....

So, you have something like this
while (more pages for doc) {
   string pagedata = getPageText();
   doc.add("text", pagedata);
}

Under the covers, your custom analyzer adds the current offset
(which you've kept track of) to, say, an ArrayList. And after the
last page is added, you get this arraylist and add it to your
document.

Or, you could just do things twice. That is, send your text through
a TokenStream, then call next() and count. Then send it all
through doc.add().

There are probably cleverer ways, but that should do for a start.

Best
Erick

On Jan 24, 2008 2:33 PM, <spring@gmx.eu> wrote:

> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Freitag, 11. Januar 2008 16:16
> > To: java-user@lucene.apache.org
> > Subject: Re: Design questions
>
> > But you could also vary this scheme by simply storing in your document
> > the offsets for the beginning of each page.
>
> Well, this is the best for my app I think, but...
>
> How do I find out these offsets?
>
> I'm adding the content field with:
>
> IndexWriter#add(new Field("content", myContentReader));
>
> I have no clue how find out the offsets in this reader. Must be something
> with an analyzer and a TokenStream?
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25328_15589559.1201204533295--

From java-user-return-32187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 19:56:34 2008
Return-Path: <java-user-return-32187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36898 invoked from network); 24 Jan 2008 19:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 19:56:34 -0000
Received: (qmail 13974 invoked by uid 500); 24 Jan 2008 19:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13935 invoked by uid 500); 24 Jan 2008 19:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13924 invoked by uid 99); 24 Jan 2008 19:56:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 11:56:18 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.115.104.19] (HELO sa5.bezeqint.net) (192.115.104.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 19:56:02 +0000
Received: from localhost (sa5 [127.0.0.1])
	by sa5.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP id 55FA6300E0
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 21:55:53 +0200 (IST)
X-Virus-Scanned: amavisd-new at bezeqint.net
Received: from sa5.bezeqint.net ([127.0.0.1])
	by localhost (sa5.bezeqint.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id VZWJdCr8JkrB for <java-user@lucene.apache.org>;
	Thu, 24 Jan 2008 21:55:48 +0200 (IST)
Received: from m6.bezeqint.net (m6.bezeqint.net [192.115.104.86])
	by sa5.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 21:55:48 +0200 (IST)
Received: from your0548c161e1 ([82.102.177.2])
	by m6.bezeqint.net (MOS 3.8.5-GA)
	with ESMTP id BCL64498 (AUTH sf_ita_s);
	Thu, 24 Jan 2008 21:55:42 +0200 (IST)
X-FEAS-DEEPHEADER-FortiMail-2000-partnergsm.co.il:  No untrusted public ip! 
Message-Id: <20080124195544.6875@partnergsm.co.il>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene, HTML and Hebrew
Date: Thu, 24 Jan 2008 21:55:23 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AchbMGRW5Y/BRmXnQ6CMMlvIcmJYNgBMDgYAAAArS/AANqEt8ABgKkwg
In-Reply-To: <9294E20AED46934EA459020706463F947EB423@SUEXCL-02.ad.syr.edu>
X-Junkmail-Status: score=10/50, host=m6.bezeqint.net
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A090209.4798ED44.004A,ss=1,fgs=0,
	ip=82.102.177.2,
	so=2007-07-31 18:51:00,
	dmn=5.4.3/2007-11-16
X-Virus-Checked: Checked by ClamAV on apache.org

Steve and all,

I didn't know whether to send a detailed description of my case to aid =
with
seeing the whole picture, or to send a list of short questions which =
will
require loads of follow-up. I guess I know what is better now, =
thanks....

>> Lucene does not store proximity relations between data in different
fields, only within individual fields

So are 2 calls for doc->add with the same field but different texts are
considered as 1 field (latter call being internally appended into the
former, merged into one field), or as two instances of the same field =
which
do not share proximity and frequency data?
As it seems from what you wrote later in your response, it seems the =
case is
the former. How can I inhibit this appending -- are there any more
approaches than appending an invalid string like "$$$"?

I've been thinking about this a bit, and I think I'd go with one big =
field
for all the content, and I'd want to incorporate the headers into it as
well. How would I boost those specific words - so the content field can
contain both all words and all headers in their original order (for
proximity and frequency data to be valid), yet keep the terms which were
originally in a header or a sub-header boosted? This can be a good =
practice
for boosting bolded or italic text in the normal paragrphs as well (only
with a lower boost).

>> Generally, stemming increases recall (proportion of matching relevant
docs among relevant docs in the entire corpus), and decreases precision
(proportion of relevant docs among matching docs).

That=92s a great definition, thanks.

I'm trying to think this through, since Hebrew is not a regular case. If =
you
will google for Hebrew and Stemming you will get pages which talk about =
how
complicated is Hebrew compared to English and other European languages.

[ Warning: technical data, questions follow after this paragraph -- to
comply with the 30-seconds rule :) ]
This is extremely difficult since unique features Hebrew has like
Niqqud-less spelling (which causes many words to have several spelling
options, only one legal but the others too-common to ignore) and
three-letter stems which have many deriviations. Furthermore, English =
words
like and, that, of, to etc. in Hebrew are represented as one letter =
appended
to the beginning of the word, forming a whole new word than the =
original.
Discarding them while indexing is not a smart move since one would try =
and
look for specific term *with* this initial and would not expect results
without. Furthermore, some words which uses these initials have another
meaning when pronounced differently (like KLBI - could be read as =
Ke-libi
["as my heart"] where I can omit the leading K, and also as Kalbi ["My =
dog"]
where I cannot.

So, to overcome the challenges above, I was thinking about the query
inflation approach, having a negative boost for the inflated terms as =
you
suggested. I will appreciate any different takes on this one, as this is
going to be the first public Lucene Hebrew analyzer... Using this =
approach I
only need to make sure I do not inflate those too much (1024 is the =
standard
limit, right?).

Also, how can I check whether a word I inflated exists in the index =
BEFORE
executing the query? Is that recommended at all? -- I'm looking for the =
most
efficient way so search speed will still be measured in few m/s, as it =
is
now. The idea is to prevent, or minimize, the use of a dictionary, and
keeping the stemmer as simple as possible (and by that produce invalid =
words
and eliminate them before executing the search).

>> It's worth noting, as the above-linked documentation for =
Field.setBoost()
does, that field boosts are not stored independently of other =
normalization
factors in the index.

Does this mean I should stick with boosting fields in the query phase =
only?

Itamar.

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: Wednesday, January 23, 2008 1:06 AM
To: java-user@lucene.apache.org
Subject: RE: Lucene, HTML and Hebrew

Hi Itamar,

In another thread, you wrote:

> Yesterday I sent an email to this group querying about some very=20
> important (to me...) features of Lucene. I'm giving it another chance=20
> before it goes unnoticed or forgotten. If it was too long please let=20
> me know and I will email a shorter list of questions....

I think I have something like a 30-second rule for posts on this list: =
if I
can't figure out what the question is within 30 seconds, I move on.  =
Your
post was so verbose that I gave up before I asked myself whether I could
help.  (D=E9j=E0 vu - upon re-reading this paragraph, it sounds very =
much like
something Hoss has said on this list...)

Although I answer your original post below, please don't take this as
affirmation of your "reminder" approach.  In my experience, this =
strategy is
interpreted as badgering, and tends to affect response rate in the =
opposite
direction to that intended.

Short, focused questions will maximize the response rate here (and
elsewhere, I suspect).  Also, it helps if there is some indication that =
the
questioner has attempted to answer the question for themselves using =
readily
available resources, but failed.

On 01/21/2008 at 2:59 PM, Itamar Syn-Hershko wrote:
> 1) How would Lucene treat the "normal" paragraph when they are added=20
> that way? Would proximity and frequency data be computed between=20
> paragraph1 and paragraph2 (last word of former with first word of=20
> latter)? What about proximity data between "h2" paragraph and the=20
> "normal" before or after it?

Lucene does not store proximity relations between data in different =
fields,
only within individual fields.  Similarly, term frequencies are stored
per-field, not per-document.

> 2) How would I set the boosts for the headers and footnotes?
> I'd rather have it stored within the index file than have to append it =

> to each and every query I will execute, but I'm open to suggestions.=20
> I'm more interested in performance and flexibility.

AFAIK, there is no way currently in Lucene to set index-time per-field
boosts - only per-document boosts are supported.

One very coarse-grained boosting trick you could use is to repeat the =
text
of headers, etc., that you want to boost, e.g.:

	Doc->add(new Field("h2", "sub-header 1 $$$ sub-header 1",
Field::STORE_NO | Field::INDEX_TOKENIZED);

I included "$$$" as an example of how to break proximity between the =
first
and last terms in the "sub-header 1" text - note, however, that this
particular string may not serve this function properly, depending on the
analyzer you choose.=20

Note also that this is an issue elsewhere for you, since each addition =
of
field information is understood by Lucene as contiguous.  That is, =
unless
you do something to inhibit it, proximity matches will occur between the
last term from one <h2> tag and the first term from the next <h2> tag in =
the
same doc.

> 3) When executing a query against the above-mentioned index, how would =

> I execute a set of words as a query (boolean quey using list of=20
> inflated words) without repeating this set of words for each and every =

> field? Any support for something like *:word1 OR word2 OR word3=20
> (instead of normal:(word1 OR
> word2 OR word3) AND quote:(word1 OR word2 OR word3) AND
> h1:(word1 OR word2 OR word3) etc...)?

MultiFieldQueryParser may do something like what you want:

<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/queryParser/Mu=
lti
FieldQueryParser.html>

> 4) Writing a Hebrew analyzer, I'm considering using a StandardAnalyzer =

> and just ammend it so when it recognizes a Hebrew word it will call=20
> some function that will parse it correctly (there are some=20
> differences, such as quotes in the middle of a word are legitmate,=20
> also remove Niqqud).
> If it's a non-Hebrew word it will just continue as usual with its=20
> default behavior and functions.
> Also, this means I will index ALL words (Hebrew AND English) into the=20
> same index. The thinking behind this is to allow for searches with=20
> both Hebrew and English words to be performed successfully, taking=20
> into account there shouldn't be any downsides for indexing two=20
> languages within one index. I'm aware of the way Lucene stores words=20
> (not the whole word, but only the part that is different from the=20
> previous), but I really don't see how bad that's gonna be...

Not sure what the question is here - if you mean to ask "What are the
impacts of including terms from two languages in a single index?" then =
my
answer is "it depends"...=20

For languages that share orthographies (e.g. Spanish and French, to a =
great
extent), cognates (i.e. the same term meaning completely different =
things in
the two languages) could cause degraded precision.  AFAIK, this is not =
an
issue for Hebrew and English. =20

The only other issue I can think of is that you will be taking symbols
(words) from two completely different meaning-systems and merging them =
into
the same index space.  For similar contexts ("should I have separate =
fields
for each unit of information?"), the advice generally given on this list =
is
to put everything into a single field.  In short: try the simplest thing
first, test, and if the performance is not good enough, then increase =
the
complexity of your solution, test, and iterate until it is.  But you
probably already knew that :).

> 5) Where should a stemmer be used? As far as I see it, it should only=20
> be used for query inflation, am I right?

Generally, stemming increases recall (proportion of matching relevant =
docs
among relevant docs in the entire corpus), and decreases precision
(proportion of relevant docs among matching docs).

The standard advice is to use the same analysis pipeline at both =
index-time
and query-time; in the context of your question, that would mean =
stemming in
both places.

However, adding stems to a query, especially if you boosted them lower =
than
the original terms, is probably a good strategy to maximize both =
precision
and recall.  The cost of this approach is two-fold: a larger index than =
if
you had performed index-time stemming; and increased query-time =
processing,
hence lower query throughput.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 21:03:04 2008
Return-Path: <java-user-return-32188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62303 invoked from network); 24 Jan 2008 21:03:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 21:03:04 -0000
Received: (qmail 57947 invoked by uid 500); 24 Jan 2008 21:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57903 invoked by uid 500); 24 Jan 2008 21:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57892 invoked by uid 99); 24 Jan 2008 21:02:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:02:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 21:02:19 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m0OL2d416141
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 15:02:39 -0600
Message-ID: <4798FCDD.4040304@getopt.org>
Date: Thu, 24 Jan 2008 22:02:21 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: FYI: parallel corpus in 22 languages
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Just FYI, perhaps this is old news for you ... This large corpus is 
freely available and it is pairwise sentence-aligned for all language 
combinations. This looks like a good resource for linguistic 
information, such as frequent words and phrases, n-gram profiles, etc.

http://wt.jrc.it/lt/Acquis/


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 21:11:11 2008
Return-Path: <java-user-return-32189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65179 invoked from network); 24 Jan 2008 21:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 21:11:11 -0000
Received: (qmail 71875 invoked by uid 500); 24 Jan 2008 21:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71848 invoked by uid 500); 24 Jan 2008 21:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71837 invoked by uid 99); 24 Jan 2008 21:10:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:10:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Jan 2008 21:10:29 +0000
Received: (qmail invoked by alias); 24 Jan 2008 21:10:34 -0000
Received: from e178077018.adsl.alicedsl.de (EHLO msrvcn04) [85.178.77.18]
  by mail.gmx.net (mp001) with SMTP; 24 Jan 2008 22:10:34 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/u2SpAsaTuCZXfZT8Y1JXSUu7QE5clqXGR9+e1Fl
	dT/tjPKuDBQvJj
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04> <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com> <95834DE2092F457CBE7B6D188C52C2FD@msrvcn04> <359a92830801241155k5af0e52dw9b58827f0a5a21ca@mail.gmail.com>
Subject: RE: Design questions
Date: Thu, 24 Jan 2008 22:10:39 +0100
Message-ID: <D7ADD06670ED4CD397836FD078B154D3@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801241155k5af0e52dw9b58827f0a5a21ca@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: Achewymfy0zBkmiUR8Ols6QXDctwuwACfzUg
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

OK, I will give this a try.

Now I have the problem that I do not know how to get the offsets (or
positions? What is the difference?) back from the searched document...

There is a IndexReader#termPositions (Term t) - but this returns the
positions for the whole index, not a single document.



> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Donnerstag, 24. Januar 2008 20:56
> To: java-user@lucene.apache.org
> Subject: Re: Design questions
> 
> I think you'll have to implement your own Analyzer and count.
> That is, every call to next() that returns a token will have to
> also increment some counter by 1.
> 
> To use this, you must have some way of knowing when a page
> ends, and at that point you call your instance of your custom
> analyzer to see what the count is. Or your analyzer maintains
> the list and you can call for it after you've added all the pages.
> 
> Analyzer.getPositionIncrementGap is called every time you
> call document.add("field".....
> 
> So, you have something like this
> while (more pages for doc) {
>    string pagedata = getPageText();
>    doc.add("text", pagedata);
> }
> 
> Under the covers, your custom analyzer adds the current offset
> (which you've kept track of) to, say, an ArrayList. And after the
> last page is added, you get this arraylist and add it to your
> document.
> 
> Or, you could just do things twice. That is, send your text through
> a TokenStream, then call next() and count. Then send it all
> through doc.add().
> 
> There are probably cleverer ways, but that should do for a start.
> 
> Best
> Erick
> 
> On Jan 24, 2008 2:33 PM, <spring@gmx.eu> wrote:
> 
> > > -----Original Message-----
> > > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Sent: Freitag, 11. Januar 2008 16:16
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Design questions
> >
> > > But you could also vary this scheme by simply storing in 
> your document
> > > the offsets for the beginning of each page.
> >
> > Well, this is the best for my app I think, but...
> >
> > How do I find out these offsets?
> >
> > I'm adding the content field with:
> >
> > IndexWriter#add(new Field("content", myContentReader));
> >
> > I have no clue how find out the offsets in this reader. 
> Must be something
> > with an analyzer and a TokenStream?
> >
> > Thank you
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 21:42:35 2008
Return-Path: <java-user-return-32190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82142 invoked from network); 24 Jan 2008 21:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 21:42:35 -0000
Received: (qmail 36773 invoked by uid 500); 24 Jan 2008 21:42:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36487 invoked by uid 500); 24 Jan 2008 21:42:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36476 invoked by uid 99); 24 Jan 2008 21:42:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:42:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 21:41:53 +0000
Received: by fk-out-0910.google.com with SMTP id z23so386099fkz.5
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 13:41:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=8Y8fNJZSgN68t4srg3b4jP/UyGnhzZ6TA84FTskBLY8=;
        b=JavKEKFsnqKHnaJRle6Hpz4BhlQPNSv/tgBiFtUfeIsVU/jdIfudwTmJZBCZ/Fk8iIdCgPxvhACOOKhd8/rTy/JLbZBzvKPce0kD7N0jEp0VVisUpJacU5Z6vrBwSB4Kk42LPdbIP9Nsy/LgW6suNs4+vkcOm1QcHXBMSlpLHL4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hPsDuwgtnOLR/9hGl7AVLBcQT6h/eV+pa1fMlLXxIiYqjGXCm5o/iRDov3ekfWBdNleriB8giPOfB24+uSri/GokHJ4PvgDixKKPvZruPcKcSJT1heg3paWNjkqVuWVxXTCPvtIP/HQC6EjZ3beUm+PefMUB89JqzYjbX1tbaSc=
Received: by 10.82.161.19 with SMTP id j19mr2151583bue.25.1201210918394;
        Thu, 24 Jan 2008 13:41:58 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Thu, 24 Jan 2008 13:41:58 -0800 (PST)
Message-ID: <1bcb7c7f0801241341w50b43540v5e7045ab7c1d92de@mail.gmail.com>
Date: Thu, 24 Jan 2008 23:41:58 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: stange exception while indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31467_1599434.1201210918390"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31467_1599434.1201210918390
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Does anyone have any idea about the error I got while indexing?

Best Regards,
-C.B.

Exception in thread "main" java.io.IOException: background merge hit
exception: _kq:C962870 _kr:C2591 into _ks [optimize]
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1749)
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1689)
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:1669)

------=_Part_31467_1599434.1201210918390--

From java-user-return-32191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 21:44:04 2008
Return-Path: <java-user-return-32191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83232 invoked from network); 24 Jan 2008 21:44:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 21:44:04 -0000
Received: (qmail 39788 invoked by uid 500); 24 Jan 2008 21:43:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39756 invoked by uid 500); 24 Jan 2008 21:43:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39745 invoked by uid 99); 24 Jan 2008 21:43:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:43:48 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 21:43:22 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene, HTML and Hebrew
Date: Thu, 24 Jan 2008 16:42:44 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB4D1@SUEXCL-02.ad.syr.edu>
In-Reply-To: <20080124195544.6875@partnergsm.co.il>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene, HTML and Hebrew
Thread-Index: AchbMGRW5Y/BRmXnQ6CMMlvIcmJYNgBMDgYAAAArS/AANqEt8ABgKkwgAAJtvfA=
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Itamar,

On 01/24/2008 at 2:55 PM, Itamar Syn-Hershko wrote:
> > Lucene does not store proximity relations between data in different
> > fields, only within individual fields
>=20
> So are 2 calls for doc->add with the same field but different
> texts are considered as 1 field (latter call being internally
> appended into the former, merged into one field), or as two
> instances of the same field which do not share proximity and
> frequency data? As it seems from what you wrote later in your
> response, it seems the case is the former.

Yes.  From =
<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/document/Docum=
ent.html#add(org.apache.lucene.document.Field)>:

    Adds a field to a document. Several fields may be
    added with the same name. In this case, if the
    fields are indexed, their text is treated as though
    appended for the purposes of search.

> How can I inhibit this appending -- are there any more approaches than
> appending an invalid string like "$$$"?

Here's an idea, though it is entirely untested and may be completely =
false :) :

Lucene's Tokenizers are fed a Reader (in Java - I don't know about =
CLucene's setup, but I assume the interface is similar) and emit Tokens. =
 Assuming that each field value from same-named fields gets its own =
Reader, then you could create a custom Tokenizer that, for the first =
Token it emits, sets a position increment greater than one - in so =
doing, phrase matching across same-named field values should be =
inhibited:

<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/analysis/Token=
.html#setPositionIncrement(int)>

> I've been thinking about this a bit, and I think I'd go with
> one big field for all the content, and I'd want to incorporate
> the headers into it as well. How would I boost those specific
> words - so the content field can contain both all words and
> all headers in their original order (for proximity and
> frequency data to be valid), yet keep the terms which were
> originally in a header or a sub-header boosted?

Like I wrote in a previous response:

> > One very coarse-grained boosting trick you could use is to
> > repeat the text of headers, etc., that you want to boost.

This trick adjusts the term frequency of important terms.

I don't know of any other approaches besides this trick, except using =
field boosting, which would require you to have separate fields.

> So, to overcome the challenges above, I was thinking about the query
> inflation approach, having a negative boost for the inflated
> terms as you suggested.

Actually, I was referring to a reduced, but non-negative, boost - like =
0.5 instead of 1.0.  AFAIK, Lucene does not support negative boosts.

> I will appreciate any different takes on this one, as this is
> going to be the first public Lucene Hebrew analyzer...

One thought - for ambiguous terms, your stemming component could emit =
all of the alternatives at the same position.

> Using this approach I only need to make sure I do not inflate those =
too
> much (1024 is the standard limit, right?).

1024 is the default maximum number of BooleanClause children, but you =
can set this higher (or lower) should you desire:

<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/search/Boolean=
Query.html#setMaxClauseCount(int)>

> Also, how can I check whether a word I inflated exists in the
> index BEFORE executing the query? Is that recommended at all?

See IndexReader.terms():

<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/index/IndexRea=
der.html#terms()>

If, as an offline process, you were to trim your query expansion map so =
that it included only terms known to be in the index, the resulting =
simpler queries should impact positively on performance.

> > It's worth noting, as the above-linked documentation for
> > Field.setBoost() does, that field boosts are not stored
> > independently of other normalization factors in the index.
>=20
> Does this mean I should stick with boosting fields in the
> query phase only?

No - I mentioned this only to alert you to the fact that field boosts =
are stored in the index only as part of the field "norm", which is an =
amalgam including a couple of other factors.

Index-time field boosting could potentially do good things for you - =
it's worth trying out.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 21:52:33 2008
Return-Path: <java-user-return-32192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87833 invoked from network); 24 Jan 2008 21:52:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 21:52:32 -0000
Received: (qmail 57220 invoked by uid 500); 24 Jan 2008 21:52:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57184 invoked by uid 500); 24 Jan 2008 21:52:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57173 invoked by uid 99); 24 Jan 2008 21:52:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 13:52:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 21:51:50 +0000
Received: by wr-out-0506.google.com with SMTP id c46so265934wra.14
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 13:51:54 -0800 (PST)
Received: by 10.142.194.1 with SMTP id r1mr790179wff.123.1201211513518;
        Thu, 24 Jan 2008 13:51:53 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 14sm1915765wrl.14.2008.01.24.13.51.52
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 24 Jan 2008 13:51:53 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801241341w50b43540v5e7045ab7c1d92de@mail.gmail.com>
References: <1bcb7c7f0801241341w50b43540v5e7045ab7c1d92de@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2785A16A-0FFD-4BEE-A0D8-F674CE1F631D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: stange exception while indexing
Date: Thu, 24 Jan 2008 16:52:14 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


That means that one of the merges, which run in the background by  
default with 2.3, hit an unhandled exception.

Did you see another exception logged / printed to stderr before this  
one?

Mike

Cam Bazz wrote:

> Does anyone have any idea about the error I got while indexing?
>
> Best Regards,
> -C.B.
>
> Exception in thread "main" java.io.IOException: background merge hit
> exception: _kq:C962870 _kr:C2591 into _ks [optimize]
>     at org.apache.lucene.index.IndexWriter.optimize 
> (IndexWriter.java:1749)
>     at org.apache.lucene.index.IndexWriter.optimize 
> (IndexWriter.java:1689)
>     at org.apache.lucene.index.IndexWriter.optimize 
> (IndexWriter.java:1669)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 22:33:08 2008
Return-Path: <java-user-return-32193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11659 invoked from network); 24 Jan 2008 22:33:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 22:33:07 -0000
Received: (qmail 31066 invoked by uid 500); 24 Jan 2008 22:32:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31031 invoked by uid 500); 24 Jan 2008 22:32:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31020 invoked by uid 99); 24 Jan 2008 22:32:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 14:32:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.233 as permitted sender)
Received: from [72.14.214.233] (HELO hu-out-0506.google.com) (72.14.214.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 22:32:26 +0000
Received: by hu-out-0506.google.com with SMTP id 27so280832hub.15
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 14:32:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NxhRM5uxS1lBVih92NueGlUR/0iUBBFhvLHxT1cH/x4=;
        b=rcSbFXnYxEM5MdPtX7WVs8jI7KKohgL7WvApmPsqx1gqFcboXgOJDo+fnFFfF5BNHvzIwip5TxSdtR9tMwcMjSmts/VF/Kb5AkVapyRraiaMrFL05R/qZycEO6Dz0uUAjExJotXVK08iy0qslGst5szn0uYOLyhJPEUJVarjwlc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E+L4egMcjW+mD4/Lz3IHUmrYAWSln3X7ZPkOgk22Y8Wj7ik0g1Danxg3HFEYwe2wNjibt9cCCBpTQoBebXid1IJuTQ/EMkb+Nt9u33IbvBcMFUYSHh/mGC44APr9YWokuPWvKKMBqt2lZHl3KOuL+SxjnZeAsetZ7E1N4cEyc6E=
Received: by 10.82.116.15 with SMTP id o15mr2277551buc.3.1201213951933;
        Thu, 24 Jan 2008 14:32:31 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Thu, 24 Jan 2008 14:32:31 -0800 (PST)
Message-ID: <1bcb7c7f0801241432q1dc4c2c6h167331828f2b52f@mail.gmail.com>
Date: Fri, 25 Jan 2008 00:32:31 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: stange exception while indexing
In-Reply-To: <2785A16A-0FFD-4BEE-A0D8-F674CE1F631D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31760_1075112.1201213951926"
References: <1bcb7c7f0801241341w50b43540v5e7045ab7c1d92de@mail.gmail.com>
	 <2785A16A-0FFD-4BEE-A0D8-F674CE1F631D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31760_1075112.1201213951926
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

no. only after that there was a gc error.
I am also not using the compound index file format in order to increase
indexing speed. could it be because of that?
I will run the test case again tomorrow. What can I do to increase logging?

Best,
-C.B.

On Jan 24, 2008 11:52 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> That means that one of the merges, which run in the background by
> default with 2.3, hit an unhandled exception.
>
> Did you see another exception logged / printed to stderr before this
> one?
>
> Mike
>
> Cam Bazz wrote:
>
> > Does anyone have any idea about the error I got while indexing?
> >
> > Best Regards,
> > -C.B.
> >
> > Exception in thread "main" java.io.IOException: background merge hit
> > exception: _kq:C962870 _kr:C2591 into _ks [optimize]
> >     at org.apache.lucene.index.IndexWriter.optimize
> > (IndexWriter.java:1749)
> >     at org.apache.lucene.index.IndexWriter.optimize
> > (IndexWriter.java:1689)
> >     at org.apache.lucene.index.IndexWriter.optimize
> > (IndexWriter.java:1669)
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31760_1075112.1201213951926--

From java-user-return-32194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 23:03:02 2008
Return-Path: <java-user-return-32194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32611 invoked from network); 24 Jan 2008 23:03:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 23:03:02 -0000
Received: (qmail 72722 invoked by uid 500); 24 Jan 2008 23:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72690 invoked by uid 500); 24 Jan 2008 23:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72679 invoked by uid 99); 24 Jan 2008 23:02:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 15:02:45 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 23:02:18 +0000
Received: by an-out-0708.google.com with SMTP id c5so104030anc.49
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 15:02:22 -0800 (PST)
Received: by 10.100.249.9 with SMTP id w9mr2618756anh.67.1201215738948;
        Thu, 24 Jan 2008 15:02:18 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id o61sm1115603hsc.10.2008.01.24.15.02.17
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 24 Jan 2008 15:02:18 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801241432q1dc4c2c6h167331828f2b52f@mail.gmail.com>
References: <1bcb7c7f0801241341w50b43540v5e7045ab7c1d92de@mail.gmail.com> <2785A16A-0FFD-4BEE-A0D8-F674CE1F631D@mikemccandless.com> <1bcb7c7f0801241432q1dc4c2c6h167331828f2b52f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <84A07365-786F-4744-92C1-7EB0CC5F9EFC@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: stange exception while indexing
Date: Thu, 24 Jan 2008 18:02:35 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Hmm, you should have seen an exception before that one from optimize.

Can you post the GC error?  Was it an OutOfMemoryError situation?

Mike

On Jan 24, 2008, at 5:32 PM, Cam Bazz wrote:

> no. only after that there was a gc error.
> I am also not using the compound index file format in order to  
> increase
> indexing speed. could it be because of that?
> I will run the test case again tomorrow. What can I do to increase  
> logging?
>
> Best,
> -C.B.
>
> On Jan 24, 2008 11:52 PM, Michael McCandless  
> <lucene@mikemccandless.com>
> wrote:
>
>>
>> That means that one of the merges, which run in the background by
>> default with 2.3, hit an unhandled exception.
>>
>> Did you see another exception logged / printed to stderr before this
>> one?
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Does anyone have any idea about the error I got while indexing?
>>>
>>> Best Regards,
>>> -C.B.
>>>
>>> Exception in thread "main" java.io.IOException: background merge hit
>>> exception: _kq:C962870 _kr:C2591 into _ks [optimize]
>>>     at org.apache.lucene.index.IndexWriter.optimize
>>> (IndexWriter.java:1749)
>>>     at org.apache.lucene.index.IndexWriter.optimize
>>> (IndexWriter.java:1689)
>>>     at org.apache.lucene.index.IndexWriter.optimize
>>> (IndexWriter.java:1669)
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 23:20:01 2008
Return-Path: <java-user-return-32195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36154 invoked from network); 24 Jan 2008 23:20:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 23:20:01 -0000
Received: (qmail 88238 invoked by uid 500); 24 Jan 2008 23:19:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88206 invoked by uid 500); 24 Jan 2008 23:19:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88195 invoked by uid 99); 24 Jan 2008 23:19:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 15:19:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.251] (HELO hs-out-2122.google.com) (64.233.178.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 23:19:18 +0000
Received: by hs-out-2122.google.com with SMTP id 54so382993hsz.5
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 15:19:23 -0800 (PST)
Received: by 10.142.90.8 with SMTP id n8mr859901wfb.84.1201216762508;
        Thu, 24 Jan 2008 15:19:22 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id g5sm1910220wra.36.2008.01.24.15.19.21
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 24 Jan 2008 15:19:22 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801241432q1dc4c2c6h167331828f2b52f@mail.gmail.com>
References: <1bcb7c7f0801241341w50b43540v5e7045ab7c1d92de@mail.gmail.com> <2785A16A-0FFD-4BEE-A0D8-F674CE1F631D@mikemccandless.com> <1bcb7c7f0801241432q1dc4c2c6h167331828f2b52f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DCCDE15C-0002-42B5-82B1-2E9415A718BE@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: stange exception while indexing
Date: Thu, 24 Jan 2008 18:19:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Oh, also, I don't think not using CFS would lead to this, unless it's  
somehow triggering too many file descriptors...

Mike

Cam Bazz wrote:

> no. only after that there was a gc error.
> I am also not using the compound index file format in order to  
> increase
> indexing speed. could it be because of that?
> I will run the test case again tomorrow. What can I do to increase  
> logging?
>
> Best,
> -C.B.
>
> On Jan 24, 2008 11:52 PM, Michael McCandless  
> <lucene@mikemccandless.com>
> wrote:
>
>>
>> That means that one of the merges, which run in the background by
>> default with 2.3, hit an unhandled exception.
>>
>> Did you see another exception logged / printed to stderr before this
>> one?
>>
>> Mike
>>
>> Cam Bazz wrote:
>>
>>> Does anyone have any idea about the error I got while indexing?
>>>
>>> Best Regards,
>>> -C.B.
>>>
>>> Exception in thread "main" java.io.IOException: background merge hit
>>> exception: _kq:C962870 _kr:C2591 into _ks [optimize]
>>>     at org.apache.lucene.index.IndexWriter.optimize
>>> (IndexWriter.java:1749)
>>>     at org.apache.lucene.index.IndexWriter.optimize
>>> (IndexWriter.java:1689)
>>>     at org.apache.lucene.index.IndexWriter.optimize
>>> (IndexWriter.java:1669)
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 24 23:27:22 2008
Return-Path: <java-user-return-32196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39051 invoked from network); 24 Jan 2008 23:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2008 23:27:22 -0000
Received: (qmail 258 invoked by uid 500); 24 Jan 2008 23:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99712 invoked by uid 500); 24 Jan 2008 23:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99701 invoked by uid 99); 24 Jan 2008 23:27:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 15:27:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 24 Jan 2008 23:26:39 +0000
Received: (qmail invoked by alias); 24 Jan 2008 23:26:44 -0000
Received: from e178077018.adsl.alicedsl.de (EHLO msrvcn04) [85.178.77.18]
  by mail.gmx.net (mp033) with SMTP; 25 Jan 2008 00:26:44 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+3JlBsIw23tjRyfl4vR5+UFEBYA7vTlfvnRoeO7d
	VUDM+bWvlXXKjj
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> <9C60B40A49E540F8B4689BB2D3B5DDF7@msrvcn04> <359a92830801110716hadfe043kaf9718e0aad545fd@mail.gmail.com> <95834DE2092F457CBE7B6D188C52C2FD@msrvcn04> <359a92830801241155k5af0e52dw9b58827f0a5a21ca@mail.gmail.com>
Subject: RE: Design questions
Date: Fri, 25 Jan 2008 00:26:49 +0100
Message-ID: <2A13B1294D71492F89CB6A9D1BD820E8@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801241155k5af0e52dw9b58827f0a5a21ca@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: Achewymfy0zBkmiUR8Ols6QXDctwuwAHPBzg
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Or, you could just do things twice. That is, send your text through
> a TokenStream, then call next() and count. Then send it all
> through doc.add().

Hm.

This means read the content twice, doesn't matter using an own analyzer oder
overriding/wrapping the main analyzer.

Is there anywhere a hook where I can grap the last token when I call
Document#add?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 01:43:52 2008
Return-Path: <java-user-return-32197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82848 invoked from network); 25 Jan 2008 01:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 01:43:52 -0000
Received: (qmail 10386 invoked by uid 500); 25 Jan 2008 01:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10363 invoked by uid 500); 25 Jan 2008 01:43:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10352 invoked by uid 99); 25 Jan 2008 01:43:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 17:43:36 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 01:43:09 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id m0P1hBoe007083
	for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 17:43:14 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: Lucene to index OCR text
Date: Thu, 24 Jan 2008 17:43:06 -0800
Message-ID: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0053_01C85EB0.96FD3210"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: Ache86HsKwF2U5mgQ12W9e7oVihVpw==
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0053_01C85EB0.96FD3210
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

I've been poking around the list archives and didn't really come up against
anything interesting. Anyone using Lucene to index OCR text? Any
strategies/algorithms/packages you recommend?
 
I have a large collection (10^7 docs) that's mostly the result of OCR. We
index/search/etc. with Lucene without any trouble, but OCR errors are a
problem, when doing exact phrase matches in particular. I'm looking for
ideas on how to deal with this thorny problem.
 
--
Renaud Waldura
Applications Group Manager
Library and Center for Knowledge Management
University of California, San Francisco
(415) 502-6660

 

------=_NextPart_000_0053_01C85EB0.96FD3210--



From java-user-return-32198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 01:53:48 2008
Return-Path: <java-user-return-32198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85715 invoked from network); 25 Jan 2008 01:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 01:53:48 -0000
Received: (qmail 16525 invoked by uid 500); 25 Jan 2008 01:53:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16497 invoked by uid 500); 25 Jan 2008 01:53:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16486 invoked by uid 99); 25 Jan 2008 01:53:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 17:53:32 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.163.179.115] (HELO web35406.mail.mud.yahoo.com) (66.163.179.115)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 Jan 2008 01:53:18 +0000
Received: (qmail 65413 invoked by uid 60001); 25 Jan 2008 01:53:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=5epwOjEEHFqA0LRHKvNeCX6nbpPPRYXIC9qe5qOyo7Egr2ogsg7p0CgdR0+5fKwhtHetOAJEMIwNJ6vP50EA7IrOMCoigsh/b6k+KaB2xrSz46QH6OPAh02CzK2ymfjBxX7xVxz/0r9mWrYWDZfJWgPm+PoAOuNx2B8rAkB4gco=;
X-YMail-OSG: MP1W20EVM1mgLFnW3SAIE_xXOfsEvZ2YJngJ3Pfc.5Z80n9gufgV1jc6sskPpxGCdRc0y6B.S7r8GV5OL.fvpo2wW22HD2QqCINvJHPkXYCQn52Z_vs-
Received: from [147.21.16.3] by web35406.mail.mud.yahoo.com via HTTP; Thu, 24 Jan 2008 17:53:10 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.160
Date: Thu, 24 Jan 2008 17:53:10 -0800 (PST)
From: roger dimitri <rogerdimitri@yahoo.com>
Subject: MapReduce usage with Lucene Indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1658287473-1201225990=:64018"
Message-ID: <359883.64018.qm@web35406.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1658287473-1201225990=:64018
Content-Type: text/plain; charset=us-ascii

Hi,
   I am very new to Lucene & Hadoop, and I have a project where I need to
use Lucene to index some input given either as a a huge collection of
Java objects or one huge java object. 
  I read about Hadoop's MapReduce utilities and I want to leverage that feature in my case described above. 
 
Can some one please tell me how I can approach the problem described
above. Because all the Hadoop's MapReduce examples out there show only
File based input and don't explicitly deal with data coming in as a
huge Java object or so to speak.

Any help is greatly appreciated.

Thanks,
Roger



      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
--0-1658287473-1201225990=:64018--

From java-user-return-32199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 02:23:06 2008
Return-Path: <java-user-return-32199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96925 invoked from network); 25 Jan 2008 02:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 02:23:06 -0000
Received: (qmail 33109 invoked by uid 500); 25 Jan 2008 02:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33071 invoked by uid 500); 25 Jan 2008 02:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33060 invoked by uid 99); 25 Jan 2008 02:22:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 18:22:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 02:22:24 +0000
Received: by fg-out-1718.google.com with SMTP id d23so495461fga.27
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 18:22:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oky1Y06GPC+cCW7hPPzfQTTN+zgihCGQOZ+6gv7QFy8=;
        b=PDk2Z/4d9MAhNiQKoll9cxq4u/5QWLwnDyC/MNdh1scoxtzGXSseyY1wrHdAlN66lGhh7HQNgTxkXPSjWSmyWz9xKTdr6xfoYU4LIntw0BV5KOnccpoQBRPgjf7OZ3TeebkPhvsbaNYQ43XK2AhOEpAlBNo1J3d1aoal6H7Nhhc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OthLz9lfskcIj8aDepJCfzkMhJqosrYmeWeQzm3HnmPMIrdDhZyXeo0UGicgdZyFcgEDXPJoePyhCSEj5kpCs9Kydkp/HNxOEys/UMa3bBDkQCzU1ZRKc8qRtHncUhdIJMZjb/J0MLQ1KGPlyRaFCjRnISqPVvAcxEZBmHIC7XA=
Received: by 10.82.159.15 with SMTP id h15mr2566392bue.36.1201227749220;
        Thu, 24 Jan 2008 18:22:29 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 24 Jan 2008 18:22:29 -0800 (PST)
Message-ID: <359a92830801241822r1bebdf67n98a628098ffac365@mail.gmail.com>
Date: Thu, 24 Jan 2008 21:22:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text
In-Reply-To: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26520_3226869.1201227749214"
References: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26520_3226869.1201227749214
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lots of luck to you, because I haven't a clue. My company deals with
OCR data and we haven't had a single workable idea. Of course, our
data sets are minuscule compared to what you're talking about, so we
haven't tried to heuristically clean up the data.

But given that Google is scanning the entire U of Mich library, there has
to be an answer out there, but I wonder if it's applicable to already OCRd
data or whether it's the scanning itself.

There are, as you well know, two issues. First, are the words
recognizable. As in actual English words. Which is easily checkable via
a dictionary. Which doesn't help much since I've seen OCR that consists
of English words that are total nonsense. Assuming you're scanning
English texts. Assuming it's modern English......

Second, particularly in our case, we have a very significant number of names
to deal with. So a dictionary check is pretty useless.

We've squirmed out of the problem by having the tables of contents keyed
in by hand and then providing our users with links to the OCR image of the
scanned data. Since this is genealogy research, it at least gives them a way
to verify what our searches return. But inevitably there are false hits as
well
as false misses.

I've considered creating a dictionary of non-English words on the assumption
that
there will be a finite number of mis-spellings. But this is OCR data, so the
set of
misspelled words could very well be bigger than the total number of words in
the
English language, depending on the condition of your source and how well the
OCR
data is done. But, again, our situation is that the projects aren't large
enough
to make significant investments in even exploring this.

I suppose that one could think about asking a Dictionary program for
suggestions,
but I haven't a clue how useful that would be. Especially for names or
technical
data.

The LDS church (The Church of Jesus Christ of Latter-day Saints) is doing
something interesting that has the flavor of *@home. They're getting
volunteers to
key in pages. Two different volunteers key in each page. Then a comparison
is
done and the differences are arbitrated.

As you can tell, I have nothing really useful to suggest on the scale you're
talking
about. 10^7 is a LOT of documents.

But I'd also be very interested in anything you come across. Especially in
the way
of cleaning existing OCRd data. Mostly, I'm expressing sympathy for the size
and complexity of the task you're undertaking <G>..

Best
Erick


On Jan 24, 2008 8:43 PM, Renaud Waldura <renaud.waldura@library.ucsf.edu>
wrote:

> I've been poking around the list archives and didn't really come up
> against
> anything interesting. Anyone using Lucene to index OCR text? Any
> strategies/algorithms/packages you recommend?
>
> I have a large collection (10^7 docs) that's mostly the result of OCR. We
> index/search/etc. with Lucene without any trouble, but OCR errors are a
> problem, when doing exact phrase matches in particular. I'm looking for
> ideas on how to deal with this thorny problem.
>
> --
> Renaud Waldura
> Applications Group Manager
> Library and Center for Knowledge Management
> University of California, San Francisco
> (415) 502-6660
>
>
>

------=_Part_26520_3226869.1201227749214--

From java-user-return-32200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 02:47:03 2008
Return-Path: <java-user-return-32200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3370 invoked from network); 25 Jan 2008 02:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 02:47:03 -0000
Received: (qmail 47478 invoked by uid 500); 25 Jan 2008 02:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47446 invoked by uid 500); 25 Jan 2008 02:46:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47435 invoked by uid 99); 25 Jan 2008 02:46:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 18:46:48 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.2.161] (HELO exprod7og104.obsmtp.com) (64.18.2.161)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 Jan 2008 02:46:19 +0000
Received: from source ([64.233.162.231]) by exprod7ob104.postini.com ([64.18.6.12]) with SMTP;
	Thu, 24 Jan 2008 18:46:11 PST
Received: by nz-out-0506.google.com with SMTP id i1so387107nzh.39
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 18:46:24 -0800 (PST)
Received: by 10.142.148.7 with SMTP id v7mr925168wfd.218.1201229183541;
        Thu, 24 Jan 2008 18:46:23 -0800 (PST)
Received: by 10.143.157.2 with HTTP; Thu, 24 Jan 2008 18:46:23 -0800 (PST)
Message-ID: <47699a8d0801241846i406b1256i62b9b81a87ea5534@mail.gmail.com>
Date: Thu, 24 Jan 2008 18:46:23 -0800
From: "Kyle Maxwell" <kyle@casttv.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text
In-Reply-To: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

> I've been poking around the list archives and didn't really come up against
> anything interesting. Anyone using Lucene to index OCR text? Any
> strategies/algorithms/packages you recommend?
>
> I have a large collection (10^7 docs) that's mostly the result of OCR. We
> index/search/etc. with Lucene without any trouble, but OCR errors are a
> problem, when doing exact phrase matches in particular. I'm looking for
> ideas on how to deal with this thorny problem.

How about Letter-by-letter ngrams coupled with SpanQueries (or more
likely, a custom query utilizing the TermPositions iterator)?

-- 
Kyle Maxwell
Software Engineer
CastTV, Inc
http://www.casttv.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 03:14:10 2008
Return-Path: <java-user-return-32201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12046 invoked from network); 25 Jan 2008 03:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 03:14:09 -0000
Received: (qmail 58649 invoked by uid 500); 25 Jan 2008 03:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58619 invoked by uid 500); 25 Jan 2008 03:13:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58608 invoked by uid 99); 25 Jan 2008 03:13:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 19:13:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 03:13:25 +0000
Received: by an-out-0708.google.com with SMTP id c5so121722anc.49
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 19:13:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=/aXeszjhu3hqTw3S0LPncl6j1Besi22MmSUclv5xzMY=;
        b=bn1W/X3N9kjuy3swulIcZDvKnyVN8O8ZEb7ffNnTyhFfpaCjdjGyYiqxL9Vwvcy2IJWqySPLNsTbR5/gUj+0sJw6/Jb5n/ApQ8nhom45nBLPKryvQFqnoseJmPfM843s1p4Hq4XRcwRokDkGAPd3HM/yy2XLCtf/+GYBIqpPZ6c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=qWHuBstokgAAj5EkvkMB+ZGN6soP4XPAqv8J+NtDjoSBMBIxYKGsVjX00yAvvDVMRVMJxKVZ+5jUklw3Dbz7s/M9pFqxMokHNF/Q4NaHu/+J/bbL7EPqSqR75yHyH4/5jSNnroFGX/4naDIA1bCbaKfZSaOW7zZFETQYQWWEREU=
Received: by 10.100.228.17 with SMTP id a17mr3120460anh.17.1201230811039;
        Thu, 24 Jan 2008 19:13:31 -0800 (PST)
Received: from ?9.30.38.162? ( [129.42.184.35])
        by mx.google.com with ESMTPS id k77sm2576152rnb.5.2008.01.24.19.13.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 24 Jan 2008 19:13:29 -0800 (PST)
Message-ID: <4799536D.1070607@gmail.com>
Date: Thu, 24 Jan 2008 19:11:41 -0800
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: [ANNOUNCE] Lucene Java 2.3.0 release available
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Release 2.3.0 of Lucene Java is now available!

Many new features, optimizations, and bug fixes have been added since
2.2, including:

  * significantly improved indexing performance
  * segment merging in background threads
  * refreshable IndexReaders
  * faster StandardAnalyzer and improved Token API
  * TermVectorMapper to customize how term vectors are loaded
  * live backups (without pausing indexing) with SnapshotDeletionPolicy
  * CheckIndex tool to test & recover a corrupt index
  * pluggable MergePolicy & MergeScheduler
  * "partial" optimize(int maxNumSegments) method
  * New contrib module for working with Wikipedia content

The detailed change log is at:
http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_3_0/CHANGES.txt

Lucene 2.3 includes index format changes that are not readable by older
versions of Lucene.  Lucene 2.3 can both read and update older Lucene
indexes.  Adding to an index with an older format will cause it to be
converted to the newer format.

Binary and source distributions are available at
http://www.apache.org/dyn/closer.cgi/lucene/java/

Lucene artifacts are also available in the Maven2 repository at
http://repo1.maven.org/maven2/org/apache/lucene/

-Michael (on behalf of the Lucene team)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 03:42:43 2008
Return-Path: <java-user-return-32202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22018 invoked from network); 25 Jan 2008 03:42:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 03:42:43 -0000
Received: (qmail 70811 invoked by uid 500); 25 Jan 2008 03:42:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70502 invoked by uid 500); 25 Jan 2008 03:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70491 invoked by uid 99); 25 Jan 2008 03:42:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 19:42:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 03:42:02 +0000
Received: by fg-out-1718.google.com with SMTP id d23so523064fga.27
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 19:42:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=VqYqzreREvclyMRA3c9IU57bmKJOYF9JG7OxXVXm5DM=;
        b=JNt5YyUsrwoxeLc0KqrHIJni2tl3JaIUV4t8OqaQEJz7Ude6Ll4l4b59EyVowadT1YSWhE6rNJyouSV9zBWVWsrAN0Gydr4lNSGyXIbLiR6ziNcoXEodHqGDVAxy9TRV4EkEtnb3SS6zV154orw4N5cMqnJZG7zBJMFsGQ/bPjo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WozNQc3Rd8iTA3fnovh9wKSfOgnyt5URX5M9gpgQ8atwtqE5pUqcsZPPAUqoQfyv1ZCkXSxSTeWpn47m88qYFZL6/EVYhkzbGdzU7aQ97F4ft7vuftabkMFGGwRMEx2u/2HojwI4dbdE9xKE5Sh6faRxR0xHEFs74k748AdGicc=
Received: by 10.82.112.3 with SMTP id k3mr2705962buc.15.1201232527406;
        Thu, 24 Jan 2008 19:42:07 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Thu, 24 Jan 2008 19:42:07 -0800 (PST)
Message-ID: <652776090801241942r3fb1ff12i3761e664d293d42d@mail.gmail.com>
Date: Thu, 24 Jan 2008 19:42:07 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Threads blocking on isDeleted when swapping indices for a very long time...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9441_18596128.1201232527404"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9441_18596128.1201232527404
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I've been tracking down a problem happening in our production environment.
When we switch an index after doing deletes & adds, running some searches,
and finally changing the pointer
from old index to new all the threads start stacking up all waiting on
isDeleted(). The threads seem to finish, they just get really slow taking up
to 30 - 60 seconds.

The problem has been discussed here before in 2005:
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3C88c6a6720510111623m3e09dbb2y4605c6c4a7485bf3@mail.gmail.com%3E


Does anyone have any suggestions on how to work around this?

-M

------=_Part_9441_18596128.1201232527404--

From java-user-return-32203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 04:21:44 2008
Return-Path: <java-user-return-32203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33756 invoked from network); 25 Jan 2008 04:21:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 04:21:43 -0000
Received: (qmail 91653 invoked by uid 500); 25 Jan 2008 04:21:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91624 invoked by uid 500); 25 Jan 2008 04:21:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91613 invoked by uid 99); 25 Jan 2008 04:21:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jan 2008 20:21:28 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 04:21:01 +0000
Received: by wa-out-1112.google.com with SMTP id j40so873005wah.11
        for <java-user@lucene.apache.org>; Thu, 24 Jan 2008 20:21:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=f/tsZUD0ORyrY5GxgN/MqHKEZpYSMc0dhSKsXBd6Uco=;
        b=rBvPsdHfpU8qyw8jFXS/s3qLZF79aqi/g1bzvsbm8oc14TVIh6qw49OJDFDMZaCjkIulTfCm0A21af7Wn+UGHRz8EJRojmPAkFLr2+Y5EHJaMZGOK/Vc14G1O+t7SVdIF6GQnLWzuiGwH4FeY01jkGfHc1rQLNg4zGvWUJmvdcw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ZBh8rlX488NXBVAsJmcZuF5MKPTzp2BsatxEg0QwyeHL4oiK78A1pYtEnCMSmPjFwzJu8+BjcwWwzg+IgENnAP0SBg5JYS0NaRjmpaoOPeS0cSneCbtC93/cDGrWccv35tDlw3QA0NIzzTFAcikDORNMG9u/GiPwj8VQ5iCfRuA=
Received: by 10.114.154.1 with SMTP id b1mr1736591wae.118.1201234868050;
        Thu, 24 Jan 2008 20:21:08 -0800 (PST)
Received: by 10.114.14.11 with HTTP; Thu, 24 Jan 2008 20:21:08 -0800 (PST)
Message-ID: <a206fb7e0801242021r71327de2h61077a25fc76ca31@mail.gmail.com>
Date: Thu, 24 Jan 2008 20:21:08 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Archiving Index using partitions
In-Reply-To: <435702.59677.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <435702.59677.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Otis for your response. I've few more questions,

1) Is it recommended to do index partitioning for large indexes?
       - We index around 35 fields (storing only two of them - simple ids)
       - Each document is around 200 bytes
       - Our index grows to around 50G a week

2) The reason I could think for partitioning would be,
      - optimization would be faster on smaller indexes
      - search would be faster if I have to search only on specific partition
      - I would be able to archive old partitions
      - Even if a partition gets corrupt I wouldn't lose all data

    Is this correct? Are there any other reasons?

Thanks,
-vivek



On Jan 21, 2008 2:32 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Why not just design your system to roll over to a new index on a weekly a basis (new IndexWriter on a new index dir, roughly speaking)?  You can't partition a single Document, if that is what you are asking.  But you can create multiple smaller (e.g. weekly indices) instead one large one, and then every 2 weeks archive the one > 2 weeks old.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: vivek sar <vivextra@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, January 21, 2008 3:06:50 PM
> Subject: Archiving Index using partitions
>
> Hi,
>
>  As a requirement I need to be able to archive any indexes older than
> 2 weeks (due to space and performance reasons). That means I would
> need to maintain weekly indexes. Here are my questions,
>
> 1) What's the best way to partition indexes using Lucene?
> 2) Is there a way I can partition documents, but not indexes? I don't
> want each partitioned index to be a full index, as that would be waste
> of space. We collect over 10K new documents per min (with each
> document around 250 bytes).
> 3) Is ParallelMultiSearcher the way to go for partitioned indexes? Do
> I ever have to merge these partitioned indexes?
> 4) I'm hoping I can reload the archived indexes in future if needed.
>
> Not sure if there is a standard way to archive the indexes using
>  Lucene.
>
> Thanks,
> -vivek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 08:05:41 2008
Return-Path: <java-user-return-32204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55781 invoked from network); 25 Jan 2008 08:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 08:05:41 -0000
Received: (qmail 47102 invoked by uid 500); 25 Jan 2008 08:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47070 invoked by uid 500); 25 Jan 2008 08:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47059 invoked by uid 99); 25 Jan 2008 08:05:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 00:05:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 08:05:00 +0000
Received: by wx-out-0506.google.com with SMTP id i28so448786wxd.20
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 00:05:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=/JbPmkM05V3C5Ty+Q2a0nchkZrKWhqmf2IFdm4wnYHs=;
        b=KRThWX5YytEIRP91FYneLOF2KWjBcFkL1Ynrfmnq5GVyyi/08VFsB0QiCqvPipkGUxzaO0u4kCikhXzDtNYecKe5JM+YvOcKA9jRjEjQE4KM3nV0L1zM36SHGdyU2sX9FgRAAdC0zskw+hVvtB7VkFvH1HgG/38l/s0le6jJsno=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=sUWWZLbm0mulOMlPgG0eSw2YrKJawhWGzjE7FA1BvbES37nVxeu66skrRlfN8kjWJpBrMYxVIvylj4pOi6Q4/v97/Z9SZiFOvg9RPWEI6MUcqHZZY04euVtplGfqq9GLuu5nVVWnJ1Cz8JzZe2Hth5hD2pAlXzYiO+iHUxRkhB8=
Received: by 10.142.106.18 with SMTP id e18mr964221wfc.111.1201248306419;
        Fri, 25 Jan 2008 00:05:06 -0800 (PST)
Received: by 10.142.191.17 with HTTP; Fri, 25 Jan 2008 00:05:06 -0800 (PST)
Message-ID: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
Date: Fri, 25 Jan 2008 13:35:06 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Retain the index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17052_9029048.1201248306380"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17052_9029048.1201248306380
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I want to retain the older index.
I dont want to delete the older index.
Please help me.
Does the recent release has the option to update the indexes without
deleting it.
I am ruuning the indexer on my sun application server.
and its thorwing  exceptions  like cannot delete indexex.
now every time i add new docs..i need to create a new index directory
andmake my program point to thenew index directory.
Please provide me..info about how can i handle the same..
And also i would like to know abt the latest version..where it has fetures
to update indexes without deleting it..


Thanks and regards
anjana

------=_Part_17052_9029048.1201248306380--

From java-user-return-32205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 08:27:21 2008
Return-Path: <java-user-return-32205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62097 invoked from network); 25 Jan 2008 08:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 08:27:21 -0000
Received: (qmail 80428 invoked by uid 500); 25 Jan 2008 08:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80390 invoked by uid 500); 25 Jan 2008 08:27:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80379 invoked by uid 99); 25 Jan 2008 08:27:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 00:27:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 08:26:51 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0P8Qifi063262
	for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 09:26:44 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text
Date: Fri, 25 Jan 2008 09:26:44 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu> <47699a8d0801241846i406b1256i62b9b81a87ea5534@mail.gmail.com>
In-Reply-To: <47699a8d0801241846i406b1256i62b9b81a87ea5534@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801250926.44456.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Friday 25 January 2008 03:46:23 schreef Kyle Maxwell:
> > I've been poking around the list archives and didn't really come up against
> > anything interesting. Anyone using Lucene to index OCR text? Any
> > strategies/algorithms/packages you recommend?
> >
> > I have a large collection (10^7 docs) that's mostly the result of OCR. We
> > index/search/etc. with Lucene without any trouble, but OCR errors are a
> > problem, when doing exact phrase matches in particular. I'm looking for
> > ideas on how to deal with this thorny problem.
> 
> How about Letter-by-letter ngrams coupled with SpanQueries (or more
> likely, a custom query utilizing the TermPositions iterator)?
> 

There is no way to do exact phrase matching on OCR data, because no correction
of OCR data will be perfect. Otherwise the OCR would have made the correction...

What you'll need is something like a fuzzy query as the leafs of a phrase query.
Also, there may be missing word boundaries, and in that case you'll have to use
a truncation query instead of a phrase query.

The more fuzzyness introduced in the query, the higher the chance of false
matches, so there really is no single answer to this. It depends on how many
false matches the users will accept and on how many OCR errors there are.

One could start by adding some fuzzy term matching to phrase query, and
see what the users think of that. They will lose some performance, and that
is another factor in the fuzzyness tradeoff.

SpanQueries could be used too, for these a fuzzy term match would need
to be added, as well as a query parser. When adding fuzzy term matching
to a phrase query looks to be a bit daunting, have a look at the surround query
parser in the contrib area. It has truncation and proximity based on span queries,
but no fuzzy term matching, so it could also be a start for investigating.

It all depends on how good the OCR was, but in some cases (think old paper)
it's just not possible to do good OCR. 

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 09:05:54 2008
Return-Path: <java-user-return-32206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74046 invoked from network); 25 Jan 2008 09:05:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 09:05:53 -0000
Received: (qmail 44242 invoked by uid 500); 25 Jan 2008 09:05:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44208 invoked by uid 500); 25 Jan 2008 09:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44197 invoked by uid 99); 25 Jan 2008 09:05:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 01:05:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.115.104.24] (HELO sa10.bezeqint.net) (192.115.104.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 09:05:22 +0000
Received: from localhost (unknown [127.0.0.1])
	by sa10.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP id 2C82E106AA8
	for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 11:02:24 +0200 (IST)
Received: from sa10.bezeqint.net ([127.0.0.1])
 by localhost (sa10.bezeqint.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 12007-03 for <java-user@lucene.apache.org>;
 Fri, 25 Jan 2008 11:02:20 +0200 (IST)
Received: from m7.bezeqint.net (unknown [192.115.104.87])
	by sa10.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP
	for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 11:02:20 +0200 (IST)
Received: from your0548c161e1 ([82.102.178.107])
	by m7.bezeqint.net (MOS 3.8.5-GA)
	with ESMTP id BGW36008 (AUTH sf_ita_s);
	Fri, 25 Jan 2008 11:05:05 +0200 (IST)
X-FEAS-DEEPHEADER-FortiMail-2000-partnergsm.co.il:  No untrusted public ip! 
Message-Id: <20080125090507.29830@partnergsm.co.il>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene to index OCR text
Date: Fri, 25 Jan 2008 11:04:55 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Thread-Index: AchfK3t7gqiF8kQJQ8ingS4WwHRaywABSlRw
In-Reply-To: <200801250926.44456.paul.elschot@xs4all.nl>
X-Junkmail-Status: score=10/50, host=m7.bezeqint.net
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A09020B.4799A643.0117,ss=1,fgs=0,
	ip=82.102.178.107,
	so=2007-07-31 18:51:00,
	dmn=5.4.3/2007-11-16
X-Virus-Scanned: amavisd-new at bezeqint.net
X-Virus-Checked: Checked by ClamAV on apache.org

In our (very) small project (several thousands of pages), we scan what we
can scan (and type what is not scannable), and then take someone to
read-proof the OCRd material. Precision matters in our case, and this seemed
to be the only way. One thought I had on your case - maybe there's an OCR
library better than what you're using, which could yield better results?
Better yet, can you execute several libraries on your scanned pages, and
then compare results, using a dictionary to decide if each returned
different possibility, and mark the word for human review if differences are
too big?

Itamar.

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl] 
Sent: Friday, January 25, 2008 10:27 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text

Op Friday 25 January 2008 03:46:23 schreef Kyle Maxwell:
> > I've been poking around the list archives and didn't really come up 
> > against anything interesting. Anyone using Lucene to index OCR text? 
> > Any strategies/algorithms/packages you recommend?
> >
> > I have a large collection (10^7 docs) that's mostly the result of 
> > OCR. We index/search/etc. with Lucene without any trouble, but OCR 
> > errors are a problem, when doing exact phrase matches in particular. 
> > I'm looking for ideas on how to deal with this thorny problem.
> 
> How about Letter-by-letter ngrams coupled with SpanQueries (or more 
> likely, a custom query utilizing the TermPositions iterator)?
> 

There is no way to do exact phrase matching on OCR data, because no
correction of OCR data will be perfect. Otherwise the OCR would have made
the correction...

What you'll need is something like a fuzzy query as the leafs of a phrase
query.
Also, there may be missing word boundaries, and in that case you'll have to
use a truncation query instead of a phrase query.

The more fuzzyness introduced in the query, the higher the chance of false
matches, so there really is no single answer to this. It depends on how many
false matches the users will accept and on how many OCR errors there are.

One could start by adding some fuzzy term matching to phrase query, and see
what the users think of that. They will lose some performance, and that is
another factor in the fuzzyness tradeoff.

SpanQueries could be used too, for these a fuzzy term match would need to be
added, as well as a query parser. When adding fuzzy term matching to a
phrase query looks to be a bit daunting, have a look at the surround query
parser in the contrib area. It has truncation and proximity based on span
queries, but no fuzzy term matching, so it could also be a start for
investigating.

It all depends on how good the OCR was, but in some cases (think old paper)
it's just not possible to do good OCR. 

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 10:01:54 2008
Return-Path: <java-user-return-32207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94795 invoked from network); 25 Jan 2008 10:01:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 10:01:53 -0000
Received: (qmail 32637 invoked by uid 500); 25 Jan 2008 10:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32595 invoked by uid 500); 25 Jan 2008 10:01:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32584 invoked by uid 99); 25 Jan 2008 10:01:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 02:01:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 10:01:12 +0000
Received: by fg-out-1718.google.com with SMTP id d23so659434fga.27
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 02:01:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XglH3T07tEEIWwmPM5XgVU31cHvOIXY2uTIwCc53txo=;
        b=tq07Pl4pljW9sfbkUWmzdj15HIFoemNFMZwhWtaE2mtgOa1rdrHQjRNj+zTbN6rn3MTAW/la3cvFfu8v2NNBFqFtkVmdvUhJpCbvu8Qkf96VNu5E4XKrZ9TczofimB5BSF/qRtMQ5T+Kgbw04dJizYfyn/rORZ8y9hJ9hWPI9Vo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B2XMRV7qKBBDxVj5wke39JXiCIGXBk1tauE6jYimymK2/NQ1n01d/Vgnt7KJFD8ckcw4mzPlOmZc4xCF26on/SSCrmPUmoFf7qrtQ5p4nCV4uF5hoB2XB4mYpUyrCMowgr4+Me0otePPypA7tIdk9VNmSfAWc8CZPOP5CX7xLHY=
Received: by 10.82.177.3 with SMTP id z3mr3202550bue.35.1201255277690;
        Fri, 25 Jan 2008 02:01:17 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Fri, 25 Jan 2008 02:01:17 -0800 (PST)
Message-ID: <652776090801250201q5ec88e5s423a3b4d42220775@mail.gmail.com>
Date: Fri, 25 Jan 2008 02:01:17 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Threads blocking on isDeleted when swapping indices for a very long time...
In-Reply-To: <652776090801241942r3fb1ff12i3761e664d293d42d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10302_4091389.1201255277686"
References: <652776090801241942r3fb1ff12i3761e664d293d42d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10302_4091389.1201255277686
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

BTW, I'm using Lucene 2.2.0.

-M

p.s. Congrats on the 2.3.0 release!

On Jan 24, 2008 7:42 PM, Michael Stoppelman <stopman@gmail.com> wrote:

> Hi all,
>
> I've been tracking down a problem happening in our production environment.
> When we switch an index after doing deletes & adds, running some searches,
> and finally changing the pointer
> from old index to new all the threads start stacking up all waiting on
> isDeleted(). The threads seem to finish, they just get really slow taking up
> to 30 - 60 seconds.
>
> The problem has been discussed here before in 2005:
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3C88c6a6720510111623m3e09dbb2y4605c6c4a7485bf3@mail.gmail.com%3E
>
>
> Does anyone have any suggestions on how to work around this?
>
> -M
>
>

------=_Part_10302_4091389.1201255277686--

From java-user-return-32208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 11:13:36 2008
Return-Path: <java-user-return-32208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23450 invoked from network); 25 Jan 2008 11:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 11:13:34 -0000
Received: (qmail 44945 invoked by uid 500); 25 Jan 2008 11:13:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44803 invoked by uid 500); 25 Jan 2008 11:13:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44761 invoked by uid 99); 25 Jan 2008 11:13:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 03:13:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.104] (HELO web26015.mail.ukl.yahoo.com) (217.12.10.104)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 25 Jan 2008 11:13:00 +0000
Received: (qmail 88908 invoked by uid 60001); 25 Jan 2008 11:12:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=NvhQPr7pX8OYtm3pzkw8jeYLlXMAVVx814LdTaPAgHg+o1jhLnzos8rQo/GS1InJdwiomjUWzocIGLeHDlqPfqXKuJ/fr19huTT91kKUGdYA6qAfLXuZg4YqoosnMkZzTFLYMrQut47lmjQV6s9+u9OvpqqShbmvIWxYZT4xoFA=;
X-YMail-OSG: ecGISqAVM1kgctj6kwJeB7JJcljkqXoBhMoNtnvJRPSW3lWqlgCvNFCJvGwK8CWzv5hmCGre_MVIIZDZ.v.gW8wZVAw.GGYCA1628s4w7Aos1y6B
Received: from [193.36.230.96] by web26015.mail.ukl.yahoo.com via HTTP; Fri, 25 Jan 2008 11:12:51 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Fri, 25 Jan 2008 11:12:51 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Lucene to index OCR text
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <460574.88638.qm@web26015.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Probably not a practical solution for you to set up but I love this idea:  =
http://blog.wired.com/monkeybites/2007/05/recaptcha_fight.html=0A=0A----- O=
riginal Message ----=0AFrom: Renaud Waldura <renaud.waldura@library.ucsf.ed=
u>=0ATo: java-user@lucene.apache.org=0ASent: Friday, 25 January, 2008 1:43:=
06 AM=0ASubject: Lucene to index OCR text=0A=0AI've =0Abeen =0Apoking =0Aar=
ound =0Athe =0Alist =0Aarchives =0Aand =0Adidn't =0Areally =0Acome =0Aup =
=0Aagainst=0Aanything =0Ainteresting. =0AAnyone =0Ausing =0ALucene =0Ato =
=0Aindex =0AOCR =0Atext? =0AAny=0Astrategies/algorithms/packages =0Ayou =0A=
recommend?=0A =0AI =0Ahave =0Aa =0Alarge =0Acollection =0A(10^7 =0Adocs) =
=0Athat's =0Amostly =0Athe =0Aresult =0Aof =0AOCR. =0AWe=0Aindex/search/etc=
. =0Awith =0ALucene =0Awithout =0Aany =0Atrouble, =0Abut =0AOCR =0Aerrors =
=0Aare =0Aa=0Aproblem, =0Awhen =0Adoing =0Aexact =0Aphrase =0Amatches =0Ain=
 =0Aparticular. =0AI'm =0Alooking =0Afor=0Aideas =0Aon =0Ahow =0Ato =0Adeal=
 =0Awith =0Athis =0Athorny =0Aproblem.=0A =0A--=0ARenaud =0AWaldura=0AAppli=
cations =0AGroup =0AManager=0ALibrary =0Aand =0ACenter =0Afor =0AKnowledge =
=0AManagement=0AUniversity =0Aof =0ACalifornia, =0ASan =0AFrancisco=0A(415)=
 =0A502-6660=0A=0A =0A=0A=0A=0A=0A=0A      ________________________________=
___________________________=0AYahoo! Answers - Got a question? Someone out =
there knows the answer. Try it=0Anow.=0Ahttp://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 12:26:13 2008
Return-Path: <java-user-return-32209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50282 invoked from network); 25 Jan 2008 12:26:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 12:26:13 -0000
Received: (qmail 34585 invoked by uid 500); 25 Jan 2008 12:25:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34393 invoked by uid 500); 25 Jan 2008 12:25:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34336 invoked by uid 99); 25 Jan 2008 12:25:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 04:25:49 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 12:25:22 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id F05163B9F6;
	Fri, 25 Jan 2008 04:25:23 -0800 (PST)
Message-Id: <E8E5CDF3-5597-4143-B176-CE3DF202DA98@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org, general@lucene.apache.org,
	nutch-user@lucene.apache.org, hadoop-user@lucene.apache.org,
	announce@apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Mahout Machine Learning Project Launches
Date: Fri, 25 Jan 2008 07:25:24 -0500
Cc: mahout-user@lucene.apache.org
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

(Apologies for cross-posting)

The Lucene PMC is pleased to announce the creation of the Mahout  
Machine Learning project, located at http://lucene.apache.org/mahout.   
Mahout's goal is to create a suite of practical, scalable machine  
learning libraries.  Our initial plan is to utilize Hadoop (http://hadoop.apache.org 
) to implement a variety of algorithms including naive bayes, neural  
networks, support vector machines and k-Means, among others.  While  
our initial focus is on these algorithms, we welcome other machine  
learning ideas as well.

Naturally, we are looking for volunteers to help grow the community  
and make the project successful.  So, if machine learning is your  
thing, come on over and lend a hand!

Cheers,
Grant Ingersoll

http://lucene.apache.org/mahout

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 13:59:46 2008
Return-Path: <java-user-return-32210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80037 invoked from network); 25 Jan 2008 13:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 13:59:46 -0000
Received: (qmail 82255 invoked by uid 500); 25 Jan 2008 13:59:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82220 invoked by uid 500); 25 Jan 2008 13:59:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82209 invoked by uid 99); 25 Jan 2008 13:59:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 05:59:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 13:59:03 +0000
Received: by fg-out-1718.google.com with SMTP id d23so736045fga.27
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 05:59:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=qMpFOGRphIH8tX0mAetuMRO/n0JXXUwGAdkZVM8uaus=;
        b=SjIR7OtTOW8afVj2OmeZtYDiJnUaeXOmFahre2dGHZaU7zNXIuowiAvcgFM+sQbdFl7/vBn9jKB4BXfq8n+Ok631+odabWuN4LWLZtBuRIHPjMjzC+WbtJ03QxWNZGTgbbj1qB+198hYYjmtE2fOckBZKJ+wDtxF2vqHUL3vppk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UqrGVesaiMcMhKghEtEvb64oc1CfLh1dTzIfSfgi60VTvHuYUYQVUqVkHRRyv/z7YRUHojlAB8ASDOXSnb5mYOn2H3iVNIadO3dCNYDgPavw3DbKhX4or6CNCWa6ckz3duDz4fwbwHcSh6i3nQSlMgJOwMvMXsiUZY7bhgbC1K8=
Received: by 10.82.150.20 with SMTP id x20mr3639578bud.5.1201269547027;
        Fri, 25 Jan 2008 05:59:07 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 25 Jan 2008 05:59:06 -0800 (PST)
Message-ID: <359a92830801250559i7c779705lc332157ead1c3149@mail.gmail.com>
Date: Fri, 25 Jan 2008 08:59:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28105_10037996.1201269546994"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28105_10037996.1201269546994
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This should not be happening. I've got to assume that you have
more than one IndexWriter open at the same time.

There's no problem at all with updating an existing index that
I've ever seen, any similar errors on my part have been coding
errors on my part.

So first make absolutely sure that your IndxWriters are closing
properly. If you're convinced that's the case, can you post some of
your code?

Best
Erick

On Jan 25, 2008 3:05 AM, anjana m <anjana.mprasad@gmail.com> wrote:

> I want to retain the older index.
> I dont want to delete the older index.
> Please help me.
> Does the recent release has the option to update the indexes without
> deleting it.
> I am ruuning the indexer on my sun application server.
> and its thorwing  exceptions  like cannot delete indexex.
> now every time i add new docs..i need to create a new index directory
> andmake my program point to thenew index directory.
> Please provide me..info about how can i handle the same..
> And also i would like to know abt the latest version..where it has fetures
> to update indexes without deleting it..
>
>
> Thanks and regards
> anjana
>

------=_Part_28105_10037996.1201269546994--

From java-user-return-32211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 14:03:15 2008
Return-Path: <java-user-return-32211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81290 invoked from network); 25 Jan 2008 14:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 14:03:15 -0000
Received: (qmail 87404 invoked by uid 500); 25 Jan 2008 14:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87371 invoked by uid 500); 25 Jan 2008 14:02:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87357 invoked by uid 99); 25 Jan 2008 14:02:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 06:02:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 14:02:30 +0000
Received: by fg-out-1718.google.com with SMTP id d23so737252fga.27
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 06:02:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xRvpAVJcRsWx5nxmJb9s8jCqnQICHf+AXjQb7jo9ZWc=;
        b=r5vbNMwGtWCDrp+bfLlhH/jalZgkKdGJ3J2oN6d3n+Emn/8UB8yG56J8dwshy3SmogQBk/OIG0w7vpb5FF5fJyl6l9Qvsa3V1ieBQoP43lxkR9KVE131IFc3HdAPhzn7ti13NPD7Ao1qDw1wR6SAjXUGRIehINCwa5Q2Di6fy8U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A7H/wIG//tJCJwUTmW+4SF865Y29Mqp+DXBEommpVl157ag3R+NgBmmkfBoBYXLRyzdq/JI0F6NGZ2CzAeYuGVyyL8E2B/2t+kABb69DyZJVwwK0aVUOiEgEZo0IkINXavAUmkHTWx9Yu5LeK+TcBhlDmg2NsOB/1pcLUdETFaI=
Received: by 10.82.174.20 with SMTP id w20mr3611142bue.28.1201269755469;
        Fri, 25 Jan 2008 06:02:35 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 25 Jan 2008 06:02:35 -0800 (PST)
Message-ID: <359a92830801250602q5671c5cdl35dccc29282ee40@mail.gmail.com>
Date: Fri, 25 Jan 2008 09:02:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text
In-Reply-To: <460574.88638.qm@web26015.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28120_23512403.1201269755461"
References: <460574.88638.qm@web26015.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28120_23512403.1201269755461
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That is brilliant!

On Jan 25, 2008 6:12 AM, mark harwood <markharw00d@yahoo.co.uk> wrote:

> Probably not a practical solution for you to set up but I love this idea:
>  http://blog.wired.com/monkeybites/2007/05/recaptcha_fight.html
>
> ----- Original Message ----
> From: Renaud Waldura <renaud.waldura@library.ucsf.edu>
> To: java-user@lucene.apache.org
> Sent: Friday, 25 January, 2008 1:43:06 AM
> Subject: Lucene to index OCR text
>
> I've
> been
> poking
> around
> the
> list
> archives
> and
> didn't
> really
> come
> up
> against
> anything
> interesting.
> Anyone
> using
> Lucene
> to
> index
> OCR
> text?
> Any
> strategies/algorithms/packages
> you
> recommend?
>
> I
> have
> a
> large
> collection
> (10^7
> docs)
> that's
> mostly
> the
> result
> of
> OCR.
> We
> index/search/etc.
> with
> Lucene
> without
> any
> trouble,
> but
> OCR
> errors
> are
> a
> problem,
> when
> doing
> exact
> phrase
> matches
> in
> particular.
> I'm
> looking
> for
> ideas
> on
> how
> to
> deal
> with
> this
> thorny
> problem.
>
> --
> Renaud
> Waldura
> Applications
> Group
> Manager
> Library
> and
> Center
> for
> Knowledge
> Management
> University
> of
> California,
> San
> Francisco
> (415)
> 502-6660
>
>
>
>
>
>
>
>      ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try
> it
> now.
> http://uk.answers.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28120_23512403.1201269755461--

From java-user-return-32212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 15:25:02 2008
Return-Path: <java-user-return-32212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77306 invoked from network); 25 Jan 2008 15:25:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 15:25:02 -0000
Received: (qmail 22061 invoked by uid 500); 25 Jan 2008 15:24:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22030 invoked by uid 500); 25 Jan 2008 15:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22018 invoked by uid 99); 25 Jan 2008 15:24:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 07:24:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 15:24:20 +0000
Received: by fg-out-1718.google.com with SMTP id d23so761720fga.27
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 07:24:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=i3WWHgLHSX5YkkX/eV7J+/boDRhK4jatP3o9bAUXU0Q=;
        b=rBnJp4Ay+vZTuDm9/uVee0mHuXtUc+yN99OmGTPjcSO6OfFfYp2IChX3jzKTigNpKX1fEoY0NT6erZqBZBP0LA2h2G/Gy7CqFUnbTPoYqITlS0YO0Ig8LPdYFABgz0c2SslPv+zrp0AlD+mfceUdWNAH2Rwnwhy1HzPvhQu47II=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tFWWj9rDOAmMFLera6xUgJj8FCY8FW06JrPt0745Y8Od839VKikSz7zg7b4tAiw0HMAJO09yexX1eqHVTHsQQGJGZ47DewK6SGHtmIehgVYRwJOTXUomYf8oMJEH52czm/Y0xapgg/gt7ECzKsMSVcNaeyyxBogj6vxaQ8FgzXA=
Received: by 10.82.174.20 with SMTP id w20mr3766814bue.28.1201274665172;
        Fri, 25 Jan 2008 07:24:25 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Fri, 25 Jan 2008 07:24:24 -0800 (PST)
Message-ID: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com>
Date: Fri, 25 Jan 2008 17:24:24 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: TermEnum trick
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_247_3963703.1201274664870"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_247_3963703.1201274664870
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

How do we get the TermEnum trick? I could not figure it out. basically, I
have a field called category, and I like to learn what different values the
category field takes. (sort of like unique in sql)

Best Regards,
-C.B.

------=_Part_247_3963703.1201274664870--

From java-user-return-32213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 15:32:10 2008
Return-Path: <java-user-return-32213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81391 invoked from network); 25 Jan 2008 15:32:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 15:32:10 -0000
Received: (qmail 35998 invoked by uid 500); 25 Jan 2008 15:31:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35970 invoked by uid 500); 25 Jan 2008 15:31:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35959 invoked by uid 99); 25 Jan 2008 15:31:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 07:31:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0102.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 15:31:28 +0000
Received: by rn-out-0102.google.com with SMTP id v46so20705rnb.14
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 07:31:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=wlBffNYxSAF5MdGUBBwNJJRxv8nXjyt+nQ46gfhuD0Y=;
        b=wdObd81EDudA9benYyltZ7U/FAa/R4d39vY40j9w8b5WOt2Lcg0Oa7HbvcluiZM+n1Klqj76M8bgipjc4eiapWGUtLBgdAHEoU1N6jG4w0Yr7+uo4DnENCbE8AS6yv/UyWwfDXrrJCtK+BTXZp1SO3ghrgwbZc73J8dW1/Jx9ug=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AFeYZPllsgT1l1YBgQuqGCd4rJibw3hvrP4jGi8yiO/VlrLaMOmjB7cRqovoIb+7tsZC4D3i/6KRUymaf34GwELP/sy8ZHBNhPD3dXo2f/6kYc1OG5TD41D7HnL5bC8xk1OpONUfjheU/Pn7Q58nPOSXmdxLsgzNoRG8615JrZM=
Received: by 10.150.192.7 with SMTP id p7mr954532ybf.90.1201275093713;
        Fri, 25 Jan 2008 07:31:33 -0800 (PST)
Received: by 10.150.139.1 with HTTP; Fri, 25 Jan 2008 07:31:33 -0800 (PST)
Message-ID: <359a92830801250731h670c794eh56b4e7dc4e1fccb8@mail.gmail.com>
Date: Fri, 25 Jan 2008 10:31:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum trick
In-Reply-To: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_535_31201944.1201275093718"
References: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_535_31201944.1201275093718
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try this, where ir is an IndexReader. The trick is that starting with ""
gives
you the entire list......

Note that you'll go off the end of the field sometime.....

        TermEnum theTerms = ir.terms(new Term("field", ""));

        Term term = null;
        do {
            term = theTerms.term();

            if ((term == null) || ! term.field().equals("field")) {
                return;
            }
            list.add(term.text());
       } while (theTerms.next());


On Jan 25, 2008 10:24 AM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello,
>
> How do we get the TermEnum trick? I could not figure it out. basically, I
> have a field called category, and I like to learn what different values
> the
> category field takes. (sort of like unique in sql)
>
> Best Regards,
> -C.B.
>

------=_Part_535_31201944.1201275093718--

From java-user-return-32214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 15:41:05 2008
Return-Path: <java-user-return-32214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85433 invoked from network); 25 Jan 2008 15:41:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 15:41:05 -0000
Received: (qmail 53959 invoked by uid 500); 25 Jan 2008 15:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53928 invoked by uid 500); 25 Jan 2008 15:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 34821 invoked by uid 99); 25 Jan 2008 15:31:31 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Message-ID: <2033.71.198.73.110.1201275068.squirrel@www.ckm.ucsf.edu>
In-Reply-To: <359a92830801250602q5671c5cdl35dccc29282ee40@mail.gmail.com>
References: <460574.88638.qm@web26015.mail.ukl.yahoo.com>
    <359a92830801250602q5671c5cdl35dccc29282ee40@mail.gmail.com>
Date: Fri, 25 Jan 2008 07:31:08 -0800 (PST)
Subject: Re: Lucene to index OCR text
From: waldura@library.ucsf.edu
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.10a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks everyone for their ideas and suggestions! Some had occurred to us
but were discarded because we feel our solution needs to be automated --
45 million pages are a lot of thrust on any human-driven effort.

I like Itamar's idea of doing "competing" OCR, and keeping the best
result. Unfortunately OCR software is far from cheap, and the cost of 2
different product licenses may be too high for the project.

I've also looked into the Tesseract/OCRopus, but while the ideas are good
it ain't there yet.


> On Jan 25, 2008 6:12 AM, mark harwood <markharw00d@yahoo.co.uk> wrote:
>
>> Probably not a practical solution for you to set up but I love this
>> idea:
>>  http://blog.wired.com/monkeybites/2007/05/recaptcha_fight.html
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 15:50:14 2008
Return-Path: <java-user-return-32215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89927 invoked from network); 25 Jan 2008 15:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 15:50:13 -0000
Received: (qmail 73053 invoked by uid 500); 25 Jan 2008 15:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73020 invoked by uid 500); 25 Jan 2008 15:49:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73009 invoked by uid 99); 25 Jan 2008 15:49:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 07:49:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 15:49:30 +0000
Received: by fg-out-1718.google.com with SMTP id d23so769245fga.27
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 07:49:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=JhoET46AFueUZQDwhSMQuwjBRNC7ZMIjdThB8TFhE2k=;
        b=NKr1KmU0konRwKXDuoZwdQAZPZUl1DGMJOF4AuWxhxZNATCVGNN68bGNZJdCp3flb92/Sd3JDHR1b9lhWYIurVIyn8rv47xkJ5PI2eye3nb6GOvbF31hXEBEevFtN9YpJ0tegI3/LZAQzHKNwfk9ofCMc1sLJjbRRU6QfP/dGNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tLozVTL03ZGy0ArskiNX6iKNSD9G5K505gm3uxGfU8RS4Js9Pl6Pawk00GtcCbCebfKf1g06TojV0eZBW1pKOfEtvjBmRE+21g56LSyUmH0odICdjg3/WssGSG5uomwoOmb83meZpF5zOgjYP2iu1Z8Ve2Vf68UZvhh11GAS4bo=
Received: by 10.82.150.20 with SMTP id x20mr3796093bud.37.1201276175385;
        Fri, 25 Jan 2008 07:49:35 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Fri, 25 Jan 2008 07:49:35 -0800 (PST)
Message-ID: <1bcb7c7f0801250749p78a710f2x74a875d371851016@mail.gmail.com>
Date: Fri, 25 Jan 2008 17:49:35 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum trick
In-Reply-To: <359a92830801250731h670c794eh56b4e7dc4e1fccb8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_374_29921398.1201276175372"
References: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com>
	 <359a92830801250731h670c794eh56b4e7dc4e1fccb8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_374_29921398.1201276175372
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

How about getting which documents have the that term as a bitset?

In other words, now that I have field=a, field=b do I use regular query
logic to get the bitsets with hitcollector, or do can I do it with
TermDocs() - (I could not figure it out with termdocs);

Best, and thanks a lot for your help.

-C.B.

On Jan 25, 2008 5:31 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> Try this, where ir is an IndexReader. The trick is that starting with ""
> gives
> you the entire list......
>
> Note that you'll go off the end of the field sometime.....
>
>        TermEnum theTerms = ir.terms(new Term("field", ""));
>
>        Term term = null;
>        do {
>            term = theTerms.term();
>
>            if ((term == null) || ! term.field().equals("field")) {
>                return;
>            }
>            list.add(term.text());
>       } while (theTerms.next());
>
>
> On Jan 25, 2008 10:24 AM, Cam Bazz <cambazz@gmail.com> wrote:
>
> > Hello,
> >
> > How do we get the TermEnum trick? I could not figure it out. basically,
> I
> > have a field called category, and I like to learn what different values
> > the
> > category field takes. (sort of like unique in sql)
> >
> > Best Regards,
> > -C.B.
> >
>

------=_Part_374_29921398.1201276175372--

From java-user-return-32216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 16:06:30 2008
Return-Path: <java-user-return-32216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97113 invoked from network); 25 Jan 2008 16:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 16:06:30 -0000
Received: (qmail 1229 invoked by uid 500); 25 Jan 2008 16:06:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 413 invoked by uid 500); 25 Jan 2008 16:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 401 invoked by uid 99); 25 Jan 2008 16:06:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 08:06:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0102.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 16:06:01 +0000
Received: by rn-out-0102.google.com with SMTP id v46so31451rnb.14
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 08:05:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=khD6HoFAydCBwTK9oKzhow771JbDHu+/WKh3nNy/544=;
        b=Pf7MNkAnI+gXdweuIMACCO4VutfQcPbxaAxz904oCs09IE9XI0tlpei4OsLfbZ7hiiMgefQSs+tusdqdD2ddnzN/RHciuMfw2O3hOoPaTXIbylH4VbB8StkcxuQ0A98OuVi/LVYI7Vz6RkNKxoivily85VRmUcb2Bh1qoBhlgQk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nRHXOYXsg8ECuSRhL1xyivq6k6Uut+rkpIbFF+3//zLfOzNIH9q1LsOD+ivHvKycM7TBrPVwE3nEUYl8/PXxwnFcnCF3mRSP/9oTUgwWUEPU823y/uIOmZUZkOssB1zVqVcTN8wtUb1m/OMjZMDpE85ydAxRIokppvD9AzrR3PE=
Received: by 10.150.121.2 with SMTP id t2mr964083ybc.130.1201277153556;
        Fri, 25 Jan 2008 08:05:53 -0800 (PST)
Received: by 10.150.139.1 with HTTP; Fri, 25 Jan 2008 08:05:53 -0800 (PST)
Message-ID: <359a92830801250805qa0de721ge986467036eb13c2@mail.gmail.com>
Date: Fri, 25 Jan 2008 11:05:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum trick
In-Reply-To: <1bcb7c7f0801250749p78a710f2x74a875d371851016@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_728_8395058.1201277153567"
References: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com>
	 <359a92830801250731h670c794eh56b4e7dc4e1fccb8@mail.gmail.com>
	 <1bcb7c7f0801250749p78a710f2x74a875d371851016@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_728_8395058.1201277153567
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Can you show us what you've tried?

Erick

On Jan 25, 2008 10:49 AM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello,
>
> How about getting which documents have the that term as a bitset?
>
> In other words, now that I have field=a, field=b do I use regular query
> logic to get the bitsets with hitcollector, or do can I do it with
> TermDocs() - (I could not figure it out with termdocs);
>
> Best, and thanks a lot for your help.
>
> -C.B.
>
> On Jan 25, 2008 5:31 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > Try this, where ir is an IndexReader. The trick is that starting with ""
> > gives
> > you the entire list......
> >
> > Note that you'll go off the end of the field sometime.....
> >
> >        TermEnum theTerms = ir.terms(new Term("field", ""));
> >
> >        Term term = null;
> >        do {
> >            term = theTerms.term();
> >
> >            if ((term == null) || ! term.field().equals("field")) {
> >                return;
> >            }
> >            list.add(term.text());
> >       } while (theTerms.next());
> >
> >
> > On Jan 25, 2008 10:24 AM, Cam Bazz <cambazz@gmail.com> wrote:
> >
> > > Hello,
> > >
> > > How do we get the TermEnum trick? I could not figure it out.
> basically,
> > I
> > > have a field called category, and I like to learn what different
> values
> > > the
> > > category field takes. (sort of like unique in sql)
> > >
> > > Best Regards,
> > > -C.B.
> > >
> >
>

------=_Part_728_8395058.1201277153567--

From java-user-return-32217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 16:16:37 2008
Return-Path: <java-user-return-32217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1648 invoked from network); 25 Jan 2008 16:16:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 16:16:36 -0000
Received: (qmail 25365 invoked by uid 500); 25 Jan 2008 16:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25330 invoked by uid 500); 25 Jan 2008 16:16:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25316 invoked by uid 99); 25 Jan 2008 16:16:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 08:16:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 16:15:54 +0000
Received: by fk-out-0910.google.com with SMTP id z23so653703fkz.5
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 08:15:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Pfkv7qXHWrY+2btVAnsFmwyzbu0Xvj1c/azLpXa2iEU=;
        b=NKFYEgYJRPQNC8paBTIyPQBAe//rSttd4FC3E6m1hHm0HEONcpWyGLDiE+L97k/eEfmJr+GhvkAP3pOQT4MckrOGkKBPnrZGcxnLkU2Adnf6YAGXN399o4r00Mou8bxA7MZ6p+DMXkabzWP7zoVXeWivknRx9hiTutMe4AJkolo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZY6DIlLy9Gbc61sVBuL4q8dv4THPmvZ/N/hvV8nqcJwtAlzBrFXAAK8glQgZWA9L3Gp/HjsGqGLwT1uWmEybB1e8zjpEeUxioFoH9E43jbKOBYxT6oSmPnGJt9arA9dBTEtOWZNUF2swCiiQzIrOcdAy3oBRMxoxgPIKlMd+N1Q=
Received: by 10.82.161.19 with SMTP id j19mr3867574bue.25.1201277759133;
        Fri, 25 Jan 2008 08:15:59 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Fri, 25 Jan 2008 08:15:59 -0800 (PST)
Message-ID: <1bcb7c7f0801250815qfba5d4ep4632aa831f92093a@mail.gmail.com>
Date: Fri, 25 Jan 2008 18:15:59 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum trick
In-Reply-To: <359a92830801250805qa0de721ge986467036eb13c2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_561_19138052.1201277759125"
References: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com>
	 <359a92830801250731h670c794eh56b4e7dc4e1fccb8@mail.gmail.com>
	 <1bcb7c7f0801250749p78a710f2x74a875d371851016@mail.gmail.com>
	 <359a92830801250805qa0de721ge986467036eb13c2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_561_19138052.1201277759125
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Currently I am doing:

      do {
         term = te.term();
         if ((term == null) || ! term.field().equals("cat")) { return; }

         final BitSet bits = new BitSet(reader.maxDoc());
         searcher.search(new TermQuery(new Term("cat", term.text())), new
HitCollector() {
            public void collect(int docId, float v) {
               bits.set(docId);
            }
         });

         cats.put(term.text(), bits);

      } while (te.next());


I want to replace the search by a termDocs statement that returns me a
bitset.

Best.

On Jan 25, 2008 6:05 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> Can you show us what you've tried?
>
> Erick
>
> On Jan 25, 2008 10:49 AM, Cam Bazz <cambazz@gmail.com> wrote:
>
> > Hello,
> >
> > How about getting which documents have the that term as a bitset?
> >
> > In other words, now that I have field=a, field=b do I use regular query
> > logic to get the bitsets with hitcollector, or do can I do it with
> > TermDocs() - (I could not figure it out with termdocs);
> >
> > Best, and thanks a lot for your help.
> >
> > -C.B.
> >
> > On Jan 25, 2008 5:31 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > > Try this, where ir is an IndexReader. The trick is that starting with
> ""
> > > gives
> > > you the entire list......
> > >
> > > Note that you'll go off the end of the field sometime.....
> > >
> > >        TermEnum theTerms = ir.terms(new Term("field", ""));
> > >
> > >        Term term = null;
> > >        do {
> > >            term = theTerms.term();
> > >
> > >            if ((term == null) || ! term.field().equals("field")) {
> > >                return;
> > >            }
> > >            list.add(term.text());
> > >       } while (theTerms.next());
> > >
> > >
> > > On Jan 25, 2008 10:24 AM, Cam Bazz <cambazz@gmail.com> wrote:
> > >
> > > > Hello,
> > > >
> > > > How do we get the TermEnum trick? I could not figure it out.
> > basically,
> > > I
> > > > have a field called category, and I like to learn what different
> > values
> > > > the
> > > > category field takes. (sort of like unique in sql)
> > > >
> > > > Best Regards,
> > > > -C.B.
> > > >
> > >
> >
>

------=_Part_561_19138052.1201277759125--

From java-user-return-32218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 17:13:11 2008
Return-Path: <java-user-return-32218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24505 invoked from network); 25 Jan 2008 17:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 17:13:11 -0000
Received: (qmail 14269 invoked by uid 500); 25 Jan 2008 17:12:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14232 invoked by uid 500); 25 Jan 2008 17:12:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14214 invoked by uid 99); 25 Jan 2008 17:12:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 09:12:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.162.179 as permitted sender)
Received: from [209.85.162.179] (HELO el-out-1112.google.com) (209.85.162.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 17:12:28 +0000
Received: by el-out-1112.google.com with SMTP id m34so128635ele.11
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 09:12:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=JLW0kQeCKraYvn96VMt+z51LertaGon4+Oa+uGLdqcc=;
        b=I0rlxU5EJSMwAXYh3wwIEtZDuSTGDFU6Dep+KE8ih7QyPe90jwdib0c8VHnGun0oBfj3OXBRFgChEZg+MhWcB8IFGjJtHv2QUk9BKcxAqedo3KObKOapddyF/4N32m8rEmmhMdB+S4bsnP48Rfe6KA1hyvPn1lYpvlbxbhFt8T8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ni2XwQm4L5I5nrQCFGJRcRKBG66vdsWSZ0sRmiHUYtFiM4LKKgT7300Vcv8TkXgrvLGH6Qqtik30GBCIoZDdh0aEk+1dMQoJzZFbgQfFIJbupqJ36p+i/eHmFjrNvicvTUZNbRc1XNcVOhNzeycssfA3BTdnRBdxJX2VMQy5Gaw=
Received: by 10.151.13.7 with SMTP id q7mr1013510ybi.13.1201281151486;
        Fri, 25 Jan 2008 09:12:31 -0800 (PST)
Received: by 10.150.139.1 with HTTP; Fri, 25 Jan 2008 09:12:31 -0800 (PST)
Message-ID: <359a92830801250912l55775b25tfc2eafae9b398542@mail.gmail.com>
Date: Fri, 25 Jan 2008 12:12:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TermEnum trick
In-Reply-To: <1bcb7c7f0801250815qfba5d4ep4632aa831f92093a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_881_12181552.1201281151437"
References: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com>
	 <359a92830801250731h670c794eh56b4e7dc4e1fccb8@mail.gmail.com>
	 <1bcb7c7f0801250749p78a710f2x74a875d371851016@mail.gmail.com>
	 <359a92830801250805qa0de721ge986467036eb13c2@mail.gmail.com>
	 <1bcb7c7f0801250815qfba5d4ep4632aa831f92093a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_881_12181552.1201281151437
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Several things.....

1> you're allocating a new bitset each time around. Do it outside the loop.
2> You want to use TermDocs.

Something like (but I haven't tried it in this form)

           Term     term = new Term(blah blah blah);
            TermDocs td = ir.termDocs(term);
            BitSet bits = new BitSet(reader.maxDoc());
            while (td.next()) {
                bits.set(td.doc());
            }


On Jan 25, 2008 11:15 AM, Cam Bazz <cambazz@gmail.com> wrote:

> Currently I am doing:
>
>      do {
>         term = te.term();
>         if ((term == null) || ! term.field().equals("cat")) { return; }
>
>         final BitSet bits = new BitSet(reader.maxDoc());
>         searcher.search(new TermQuery(new Term("cat", term.text())), new
> HitCollector() {
>            public void collect(int docId, float v) {
>               bits.set(docId);
>            }
>         });
>
>         cats.put(term.text(), bits);
>
>      } while (te.next());
>
>
> I want to replace the search by a termDocs statement that returns me a
> bitset.
>
> Best.
>
> On Jan 25, 2008 6:05 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > Can you show us what you've tried?
> >
> > Erick
> >
> > On Jan 25, 2008 10:49 AM, Cam Bazz <cambazz@gmail.com> wrote:
> >
> > > Hello,
> > >
> > > How about getting which documents have the that term as a bitset?
> > >
> > > In other words, now that I have field=a, field=b do I use regular
> query
> > > logic to get the bitsets with hitcollector, or do can I do it with
> > > TermDocs() - (I could not figure it out with termdocs);
> > >
> > > Best, and thanks a lot for your help.
> > >
> > > -C.B.
> > >
> > > On Jan 25, 2008 5:31 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
> > >
> > > > Try this, where ir is an IndexReader. The trick is that starting
> with
> > ""
> > > > gives
> > > > you the entire list......
> > > >
> > > > Note that you'll go off the end of the field sometime.....
> > > >
> > > >        TermEnum theTerms = ir.terms(new Term("field", ""));
> > > >
> > > >        Term term = null;
> > > >        do {
> > > >            term = theTerms.term();
> > > >
> > > >            if ((term == null) || ! term.field().equals("field")) {
> > > >                return;
> > > >            }
> > > >            list.add(term.text());
> > > >       } while (theTerms.next());
> > > >
> > > >
> > > > On Jan 25, 2008 10:24 AM, Cam Bazz <cambazz@gmail.com> wrote:
> > > >
> > > > > Hello,
> > > > >
> > > > > How do we get the TermEnum trick? I could not figure it out.
> > > basically,
> > > > I
> > > > > have a field called category, and I like to learn what different
> > > values
> > > > > the
> > > > > category field takes. (sort of like unique in sql)
> > > > >
> > > > > Best Regards,
> > > > > -C.B.
> > > > >
> > > >
> > >
> >
>

------=_Part_881_12181552.1201281151437--

From java-user-return-32219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 20:16:48 2008
Return-Path: <java-user-return-32219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7820 invoked from network); 25 Jan 2008 20:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 20:16:47 -0000
Received: (qmail 61978 invoked by uid 500); 25 Jan 2008 20:16:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61951 invoked by uid 500); 25 Jan 2008 20:16:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61940 invoked by uid 99); 25 Jan 2008 20:16:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 12:16:31 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 20:16:13 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id m0PKG2Cm025906
	for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 12:16:04 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene to index OCR text
Date: Fri, 25 Jan 2008 12:15:56 -0800
Message-ID: <004e01c85f8f$1b479fe0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <2033.71.198.73.110.1201275068.squirrel@www.ckm.ucsf.edu>
Thread-Index: AchfaLIjnXL28xEvRh+ut7jAnU+/+gAHyj+A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

The author of the presentation I linked to earlier pointed me to this:

http://wiki.apache.org/jakarta-lucene/SpellChecker

Which is implemented by:

http://www.marine-geo.org/services/oai/docs/javadoc/org/apache/lucene/spell/
NGramSpeller.html


 

-----Original Message-----
From: waldura@library.ucsf.edu [mailto:waldura@library.ucsf.edu] 
Sent: Friday, January 25, 2008 7:31 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text

Thanks everyone for their ideas and suggestions! Some had occurred to us but
were discarded because we feel our solution needs to be automated --
45 million pages are a lot of thrust on any human-driven effort.

I like Itamar's idea of doing "competing" OCR, and keeping the best result.
Unfortunately OCR software is far from cheap, and the cost of 2 different
product licenses may be too high for the project.

I've also looked into the Tesseract/OCRopus, but while the ideas are good it
ain't there yet.


> On Jan 25, 2008 6:12 AM, mark harwood <markharw00d@yahoo.co.uk> wrote:
>
>> Probably not a practical solution for you to set up but I love this
>> idea:
>>  http://blog.wired.com/monkeybites/2007/05/recaptcha_fight.html
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 21:20:16 2008
Return-Path: <java-user-return-32220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29956 invoked from network); 25 Jan 2008 21:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 21:20:15 -0000
Received: (qmail 52407 invoked by uid 500); 25 Jan 2008 21:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52374 invoked by uid 500); 25 Jan 2008 21:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52362 invoked by uid 99); 25 Jan 2008 21:20:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 13:20:00 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 21:19:45 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 0795BB890D
	for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 13:19:36 -0800 (PST)
Message-Id: <6CB27F2F-FF7E-4489-AF21-444E24BC97A6@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0801250749p78a710f2x74a875d371851016@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: TermEnum trick
Date: Fri, 25 Jan 2008 16:19:35 -0500
References: <1bcb7c7f0801250724u3f6c79efhb651941568cd14ba@mail.gmail.com> <359a92830801250731h670c794eh56b4e7dc4e1fccb8@mail.gmail.com> <1bcb7c7f0801250749p78a710f2x74a875d371851016@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

How about a QueryWrapperFilter.bits(IndexReader)?

-Grant

On Jan 25, 2008, at 10:49 AM, Cam Bazz wrote:

> Hello,
>
> How about getting which documents have the that term as a bitset?
>
> In other words, now that I have field=a, field=b do I use regular  
> query
> logic to get the bitsets with hitcollector, or do can I do it with
> TermDocs() - (I could not figure it out with termdocs);
>
> Best, and thanks a lot for your help.
>
> -C.B.
>
> On Jan 25, 2008 5:31 PM, Erick Erickson <erickerickson@gmail.com>  
> wrote:
>
>> Try this, where ir is an IndexReader. The trick is that starting  
>> with ""
>> gives
>> you the entire list......
>>
>> Note that you'll go off the end of the field sometime.....
>>
>>       TermEnum theTerms = ir.terms(new Term("field", ""));
>>
>>       Term term = null;
>>       do {
>>           term = theTerms.term();
>>
>>           if ((term == null) || ! term.field().equals("field")) {
>>               return;
>>           }
>>           list.add(term.text());
>>      } while (theTerms.next());
>>
>>
>> On Jan 25, 2008 10:24 AM, Cam Bazz <cambazz@gmail.com> wrote:
>>
>>> Hello,
>>>
>>> How do we get the TermEnum trick? I could not figure it out.  
>>> basically,
>> I
>>> have a field called category, and I like to learn what different  
>>> values
>>> the
>>> category field takes. (sort of like unique in sql)
>>>
>>> Best Regards,
>>> -C.B.
>>>
>>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 21:48:42 2008
Return-Path: <java-user-return-32221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40966 invoked from network); 25 Jan 2008 21:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 21:48:42 -0000
Received: (qmail 91194 invoked by uid 500); 25 Jan 2008 21:48:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91171 invoked by uid 500); 25 Jan 2008 21:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91158 invoked by uid 99); 25 Jan 2008 21:48:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 13:48:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 21:47:51 +0000
Received: by wr-out-0506.google.com with SMTP id c46so590552wra.14
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 13:47:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=GMSE4BupMvQuGX9PAVkF42wy4tjJ2eQ/HFjs/m5i49s=;
        b=SMYHDWgsj0ui7qDZr1oXSRyHXAr19stweHvRL4Lo8+yrp/6lnDrlV93EgHfXTybRwqWr0JPCEwnSzVDaaJmWElmwFAy8j/3IJ5PYmUnRuWtP4ECXjl63YZ6HoqGGHQ3H5kPWg1ELl6MLVV5looAJqB2Q5/kKpdEyUWc2eji9bH8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uJzPiCVrRPg4FEBIje9Uyn8xs08K8w/nmvYS14iVPNxwwcfXz44nQ5D8L6EXVkB4YLNnh4HbF9V9rPPeWVllO/MCD8HAmy5YFm3c29fl8khDSREbufv9y9dEwg4SFS9+PEbZOxOcBZwhyuPJid8ZLX/qqIrFBlJvtqjcOmdVyHI=
Received: by 10.151.11.17 with SMTP id o17mr1120365ybi.120.1201297676492;
        Fri, 25 Jan 2008 13:47:56 -0800 (PST)
Received: by 10.150.156.16 with HTTP; Fri, 25 Jan 2008 13:47:56 -0800 (PST)
Message-ID: <c01704c90801251347v73a9aff9v69b982cfd91464c4@mail.gmail.com>
Date: Fri, 25 Jan 2008 16:47:56 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <359a92830801250559i7c779705lc332157ead1c3149@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1440_33428341.1201297676512"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <359a92830801250559i7c779705lc332157ead1c3149@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1440_33428341.1201297676512
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Check if there are any lock files in your index directory after the process
is completed. There should be no lock files if the index was correctly
closed .


On Jan 25, 2008 8:59 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> This should not be happening. I've got to assume that you have
> more than one IndexWriter open at the same time.
>
> There's no problem at all with updating an existing index that
> I've ever seen, any similar errors on my part have been coding
> errors on my part.
>
> So first make absolutely sure that your IndxWriters are closing
> properly. If you're convinced that's the case, can you post some of
> your code?
>
> Best
> Erick
>
> On Jan 25, 2008 3:05 AM, anjana m <anjana.mprasad@gmail.com> wrote:
>
> > I want to retain the older index.
> > I dont want to delete the older index.
> > Please help me.
> > Does the recent release has the option to update the indexes without
> > deleting it.
> > I am ruuning the indexer on my sun application server.
> > and its thorwing  exceptions  like cannot delete indexex.
> > now every time i add new docs..i need to create a new index directory
> > andmake my program point to thenew index directory.
> > Please provide me..info about how can i handle the same..
> > And also i would like to know abt the latest version..where it has
> fetures
> > to update indexes without deleting it..
> >
> >
> > Thanks and regards
> > anjana
> >
>

------=_Part_1440_33428341.1201297676512--

From java-user-return-32222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 25 22:00:04 2008
Return-Path: <java-user-return-32222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45770 invoked from network); 25 Jan 2008 22:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2008 22:00:04 -0000
Received: (qmail 9950 invoked by uid 500); 25 Jan 2008 21:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9462 invoked by uid 500); 25 Jan 2008 21:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9451 invoked by uid 99); 25 Jan 2008 21:59:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 13:59:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 64.233.178.247 as permitted sender)
Received: from [64.233.178.247] (HELO hs-out-2122.google.com) (64.233.178.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 21:59:22 +0000
Received: by hs-out-2122.google.com with SMTP id 54so731976hsz.5
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 13:59:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=35X+ZG6CY0awyR257kRu4U8r9vtftacFavgu6PhiByQ=;
        b=gR0iIye1VQP2Eyl5RsFIyXVeTrPoTh3EKD430JpB7gvpD72pNSX9IFvsZrFPBxiGTs0ZTVCdfncVQdPIxAHXHdP8suYkByKvgMIkKaPuRZobwCiOB6tusVqsrTe/h+Lh9uOK2IybbYYi4bOitvVUIHGbeU1Zkv1429j7If1ygBk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mq2jyFOlGaaNIEcws6d+fgznthBXAViNV5Jijigglhw5oYJdPgRqvigNNLFQ4EX2V8ilobtZQpE3umlZjeyVWBKZSAPRpq/mO1m+z0CZJFDg4TX9okWsO7OY1iTLU02+Ny0m0KGgf9SRj0M1cHYpLVRHf5QyoXRwAua5P+SfKXc=
Received: by 10.142.78.10 with SMTP id a10mr1636898wfb.37.1201298366608;
        Fri, 25 Jan 2008 13:59:26 -0800 (PST)
Received: by 10.142.161.8 with HTTP; Fri, 25 Jan 2008 13:59:26 -0800 (PST)
Message-ID: <f071061b0801251359j41abdc3v76c1c9d59f9dc5f3@mail.gmail.com>
Date: Fri, 25 Jan 2008 22:59:26 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError on small search in large, simple index
In-Reply-To: <1199786213.31652.48.camel@pc977>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <403937.47197.qm@web50301.mail.re2.yahoo.com>
	 <1199786213.31652.48.camel@pc977>
X-Virus-Checked: Checked by ClamAV on apache.org

I am very interested indeed, do I understand correctly that the tweak
you made reduces the memory when searching if you have many docs in
the index?? I am omitting norms too.

If that is the case, can someone point me to what is hte required
change that should be done? I understand from Yoniks comment that this
could not make it to the core no?

thanks
javier

On Jan 8, 2008 10:56 AM, Lars Clausen <lc@statsbiblioteket.dk> wrote:
>
> On Mon, 2008-01-07 at 14:20 -0800, Otis Gospodnetic wrote:
> > Please post your results, Lars!
>
> Tried the patch, and it failed to compile (plain Lucene compiled fine).
> In the process, I looked at TermQuery and found that it'd be easier to
> copy that code and just hardcode 1.0f for all norms.  Did that and ran
> our test index of 50 million entries.  Instead of the 50-60MB it used
> before, it is now down to 8-9MB.   For Yonik: This is measured using
> jconsole.  Do you have a better tool?
>
>  I'll do a few more tests to see how it scales, but this is definitely
> the way out for us.  Thanks for the cluons!
>
>
> -Lars
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 26 01:09:09 2008
Return-Path: <java-user-return-32223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21090 invoked from network); 26 Jan 2008 01:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2008 01:09:09 -0000
Received: (qmail 87086 invoked by uid 500); 26 Jan 2008 01:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87048 invoked by uid 500); 26 Jan 2008 01:08:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87037 invoked by uid 99); 26 Jan 2008 01:08:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 17:08:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 01:08:27 +0000
Received: by fg-out-1718.google.com with SMTP id d23so934457fga.27
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 17:08:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=F7coWiLLlzppBoPdCJ0SzxOirFOCDoLqj3Sips7gN/8=;
        b=Et3puS+JtKOfpAqhrW68iBHP5PkI29AnZLYv/tg1ODxJQMLPyL+zPFv406qCOBtw96y6pB6kZ69M8uBOM3Z1E3k/7dboD3tbFx1IdIlljYJJA0CfhVWCe7V9UgZO14TKKU+kH0qW/XlbfKl/lueq0en1wLzWkF56JDushkBuCIc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oA4WpTNbcrItbLvYoWy2l53GOiMC6R1cXruXoVJX26i8IMmCS2eF0pmljfLya0FBIZ5Oag6EC8xVvpGSgTMXalh5EwiVcBMDW/XQgLikXx6mBkTR0XUimRTI9p0Z5KIRt4Pc7APUxQzFzw4AurBO3PenKgXTwsmv7QeT2si58jY=
Received: by 10.82.121.15 with SMTP id t15mr4782838buc.26.1201309712120;
        Fri, 25 Jan 2008 17:08:32 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Fri, 25 Jan 2008 17:08:32 -0800 (PST)
Message-ID: <652776090801251708ra2bc3dfs2911fd6ca67c2e9e@mail.gmail.com>
Date: Fri, 25 Jan 2008 17:08:32 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Threads blocking on isDeleted when swapping indices for a very long time...
In-Reply-To: <652776090801250201q5ec88e5s423a3b4d42220775@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2326_15066561.1201309712111"
References: <652776090801241942r3fb1ff12i3761e664d293d42d@mail.gmail.com>
	 <652776090801250201q5ec88e5s423a3b4d42220775@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2326_15066561.1201309712111
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

For anyone interested I did work around this. The problem was that I wasn't
warming the index enough. When I ran full queries against the new index
being
switched to everything runs smoothly when the indices are swapped now. There
must be some lower level caches that need to be filled that I'm not aware
of. The thread that I pointed at in the first post seems to suggest it's the
caches in the Sort object.

One can recreate this by starting up a non-warmed lucene index and firing 20
- 30 concurrent queries at it. Mostly likely lucene will freeze on all the
threads.
Maybe all the threads at the start are building the same cache multiple
times?

-M

On Jan 25, 2008 2:01 AM, Michael Stoppelman <stopman@gmail.com> wrote:

> BTW, I'm using Lucene 2.2.0.
>
> -M
>
> p.s. Congrats on the 2.3.0 release!
>
>
> On Jan 24, 2008 7:42 PM, Michael Stoppelman <stopman@gmail.com > wrote:
>
> > Hi all,
> >
> > I've been tracking down a problem happening in our production
> > environment. When we switch an index after doing deletes & adds, running
> > some searches, and finally changing the pointer
> > from old index to new all the threads start stacking up all waiting on
> > isDeleted(). The threads seem to finish, they just get really slow taking up
> > to 30 - 60 seconds.
> >
> > The problem has been discussed here before in 2005:
> > http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3C88c6a6720510111623m3e09dbb2y4605c6c4a7485bf3@mail.gmail.com%3E
> >
> >
> > Does anyone have any suggestions on how to work around this?
> >
> > -M
> >
> >
>

------=_Part_2326_15066561.1201309712111--

From java-user-return-32224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 26 01:18:05 2008
Return-Path: <java-user-return-32224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23707 invoked from network); 26 Jan 2008 01:18:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2008 01:18:04 -0000
Received: (qmail 94861 invoked by uid 500); 26 Jan 2008 01:17:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93990 invoked by uid 500); 26 Jan 2008 01:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93979 invoked by uid 99); 26 Jan 2008 01:17:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jan 2008 17:17:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jayallenhill@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 01:17:23 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1516085wah.11
        for <java-user@lucene.apache.org>; Fri, 25 Jan 2008 17:17:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=LDfAZzTGSPLPg/JCej2O2DZTW5F3uf2PxLa3Un90W3A=;
        b=KpoK7M6LpEPkC4MoLfxcXgCtOZl9bfhM81F5hggX2AygBalGeBzIeEWc7utgg0J1f4fh+D+6dR5JV098x0ilB4mVm4cU+iUxOpddHzZtefWvZ82VjOSqzwPmyhX2+sJIojGzspGYOQB+qztUO08GDitxK5k20Ms4hwxC06GLlk4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WLiQNPdjm1a4DkD1UzS2+hxVinCbOi3QRXQfC6v0tf0QYwBb3reUoT9oF5UWUbnuEHkHnT5Epfeyy+DJUEJlRtuUa7KKg6XOioKBynlCXGLIdg8hgTgELmQC9ef5ExRaJTRy6+URafKwIQ+2o6V3bUSB/6kC/j1ZPZzBvbIOItk=
Received: by 10.115.75.1 with SMTP id c1mr147903wal.84.1201310249727;
        Fri, 25 Jan 2008 17:17:29 -0800 (PST)
Received: by 10.114.125.4 with HTTP; Fri, 25 Jan 2008 17:17:29 -0800 (PST)
Message-ID: <d0e6561a0801251717g2097f09ay9b037735b15d6592@mail.gmail.com>
Date: Fri, 25 Jan 2008 17:17:29 -0800
From: "Jay Hill" <jayallenhill@gmail.com>
To: java-user@lucene.apache.org
Subject: Stemmers remove part of a query when using QueryParser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1798_29578469.1201310249721"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1798_29578469.1201310249721
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have added stemming Analyzer to my indexing and searching. I've tried both
Porter and KStem, have gotten very good results with both with KStem being
the best. The only problem is that, when analyzing on the search end using
QueryParser part of my query is being removed by QueryParser:

+pub:game +__type:pub +pubType:1
becomes
+pub:game +__type:pub

It seems to be the number "1" causing the problem. "+pub:game +__type:pub
+pubType:foo" will work fine.

I've tried escaping the "1" like this: "+pub:game +__type:pub +pubType:\1",
but still get the same result.

Is there a way that I can avoid having QueryParser remove that part of my
query?

Thanks,
-Jay

------=_Part_1798_29578469.1201310249721--

From java-user-return-32225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 26 11:03:48 2008
Return-Path: <java-user-return-32225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53120 invoked from network); 26 Jan 2008 11:03:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2008 11:03:48 -0000
Received: (qmail 8591 invoked by uid 500); 26 Jan 2008 11:03:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8544 invoked by uid 500); 26 Jan 2008 11:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8533 invoked by uid 99); 26 Jan 2008 11:03:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 03:03:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.24 as permitted sender)
Received: from [80.67.29.24] (HELO smtprelay10.ispgateway.de) (80.67.29.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 11:03:16 +0000
Received: from [84.191.240.106] (helo=p54bff06a.dip.t-dialin.net)
	by smtprelay10.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JIioX-00071w-2E
	for java-user@lucene.apache.org; Sat, 26 Jan 2008 12:03:09 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Stemmers remove part of a query when using QueryParser
Date: Sat, 26 Jan 2008 11:55:33 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <d0e6561a0801251717g2097f09ay9b037735b15d6592@mail.gmail.com>
In-Reply-To: <d0e6561a0801251717g2097f09ay9b037735b15d6592@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801261155.34155@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Samstag, 26. Januar 2008, Jay Hill wrote:

> I have added stemming Analyzer to my indexing and searching. I've tried
> both Porter and KStem, have gotten very good results with both with
> KStem being the best. The only problem is that, when analyzing on the
> search end using QueryParser part of my query is being removed by
> QueryParser:

It's not the QueryParser, it's the analyzer, i.e. one of its filters. It 
seems to remove numbers (or short strings?) from both the content to be 
indexed and the query. So you need to modify/remove the filter in your 
analyzer that does this.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 04:37:53 2008
Return-Path: <java-user-return-32226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1917 invoked from network); 27 Jan 2008 04:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 04:37:53 -0000
Received: (qmail 26532 invoked by uid 500); 27 Jan 2008 04:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25533 invoked by uid 500); 27 Jan 2008 04:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25521 invoked by uid 99); 27 Jan 2008 04:37:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 20:37:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 27 Jan 2008 04:37:08 +0000
Received: (qmail 31392 invoked by uid 60001); 27 Jan 2008 04:37:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=C4c7sJzQVvSl2yVsoJO9rll8X8m3/inmRBhHzo4ai+xNPq+RADLSER+uMi2kVMR2XIuZy7JgGiwIitWf4BeQz+1lqMc6oGNKxbEY2cxxv3Uh4Zy5gwc3H3GF2BG/wdykaKaXBCpO5VoV/aro5SdzqUCLfTBuV07AjFPOEeSZEWw=;
X-YMail-OSG: YC5rJOAVM1ke.S7SpF_ijSYzqWROmk5dixDgPemHTcRlqVaiwHqkQMjEc7p37Uvsyzr0Fk996EtOdhSSmuNixmD3emrsWD9Bd6DX0Nt4dfR5pqz.tWQ-
Received: from [72.231.9.236] by web50308.mail.re2.yahoo.com via HTTP; Sat, 26 Jan 2008 20:37:14 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Sat, 26 Jan 2008 20:37:14 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Threads blocking on isDeleted when swapping indices for a very long time...
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <381786.30537.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Can you kill -QUIT <your java PID> right after you fire those 20-30 concurrent queries?  This could tell you/us where those threads are blocking, if they are blocking, or what they are all doing.

Thanks,
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Michael Stoppelman <stopman@gmail.com>
To: java-user@lucene.apache.org
Sent: Friday, January 25, 2008 8:08:32 PM
Subject: Re: Threads blocking on isDeleted when swapping indices for a very long time...

For 
anyone 
interested 
I 
did 
work 
around 
this. 
The 
problem 
was 
that 
I 
wasn't
warming 
the 
index 
enough. 
When 
I 
ran 
full 
queries 
against 
the 
new 
index
being
switched 
to 
everything 
runs 
smoothly 
when 
the 
indices 
are 
swapped 
now. 
There
must 
be 
some 
lower 
level 
caches 
that 
need 
to 
be 
filled 
that 
I'm 
not 
aware
of. 
The 
thread 
that 
I 
pointed 
at 
in 
the 
first 
post 
seems 
to 
suggest 
it's 
the
caches 
in 
the 
Sort 
object.

One 
can 
recreate 
this 
by 
starting 
up 
a 
non-warmed 
lucene 
index 
and 
firing 
20
- 
30 
concurrent 
queries 
at 
it. 
Mostly 
likely 
lucene 
will 
freeze 
on 
all 
the
threads.
Maybe 
all 
the 
threads 
at 
the 
start 
are 
building 
the 
same 
cache 
multiple
times?

-M

On 
Jan 
25, 
2008 
2:01 
AM, 
Michael 
Stoppelman 
<stopman@gmail.com> 
wrote:

> 
BTW, 
I'm 
using 
Lucene 
2.2.0.
>
> 
-M
>
> 
p.s. 
Congrats 
on 
the 
2.3.0 
release!
>
>
> 
On 
Jan 
24, 
2008 
7:42 
PM, 
Michael 
Stoppelman 
<stopman@gmail.com 
> 
wrote:
>
> 
> 
Hi 
all,
> 
>
> 
> 
I've 
been 
tracking 
down 
a 
problem 
happening 
in 
our 
production
> 
> 
environment. 
When 
we 
switch 
an 
index 
after 
doing 
deletes 
& 
adds, 
running
> 
> 
some 
searches, 
and 
finally 
changing 
the 
pointer
> 
> 
from 
old 
index 
to 
new 
all 
the 
threads 
start 
stacking 
up 
all 
waiting 
on
> 
> 
isDeleted(). 
The 
threads 
seem 
to 
finish, 
they 
just 
get 
really 
slow 
taking 
up
> 
> 
to 
30 
- 
60 
seconds.
> 
>
> 
> 
The 
problem 
has 
been 
discussed 
here 
before 
in 
2005:
> 
> 
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3C88c6a6720510111623m3e09dbb2y4605c6c4a7485bf3@mail.gmail.com%3E
> 
>
> 
>
> 
> 
Does 
anyone 
have 
any 
suggestions 
on 
how 
to 
work 
around 
this?
> 
>
> 
> 
-M
> 
>
> 
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 05:49:32 2008
Return-Path: <java-user-return-32227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12363 invoked from network); 27 Jan 2008 05:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 05:49:32 -0000
Received: (qmail 45976 invoked by uid 500); 27 Jan 2008 05:49:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45939 invoked by uid 500); 27 Jan 2008 05:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45928 invoked by uid 99); 27 Jan 2008 05:49:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 21:49:17 -0800
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 27 Jan 2008 05:49:01 +0000
Received: (qmail 49995 invoked by uid 60001); 27 Jan 2008 05:48:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=4ujkW/t+7vW49JeqraPkJ/TMNhpXsf5Q4fZJNiXr5mlqkgdMPF4xkM000o0vXg/b5epdTPrn2H0PKGBE+M7+9Z7eLdVR2cZVepenktI3p6MgfIIm9Qy5sz85goPIKT5AfjjRbhLFgbxaWR+yxPpAJHuPuAIfRTCgc1oE/FTjUBk=;
X-YMail-OSG: SmvjSKEVM1kCN1En7bEjBnOMj3rZpGCjQKKgO49EPjW3JdxcLsn3Sp4kSp8QZ6X7hcmRKwDiNbIXC5S522fdkuW4S937yZWYUwja1fFQjM2Z.UtZa619j6eCHn8x6skY3M.1KWosVSWv0eQ-
Received: from [72.231.9.236] by web50310.mail.re2.yahoo.com via HTTP; Sat, 26 Jan 2008 21:48:53 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Sat, 26 Jan 2008 21:48:53 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Archiving Index using partitions
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <872702.48909.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Vivek - exactly, all of those are good reasons for index partitioning.  In addition, think about how much of a huge index will be able to fit in RAM/FS buffers of a single server?  At some point you'll have to spread your index over N servers.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: vivek sar <vivextra@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, January 24, 2008 11:21:08 PM
Subject: Re: Archiving Index using partitions

Thanks 
Otis 
for 
your 
response. 
I've 
few 
more 
questions,

1) 
Is 
it 
recommended 
to 
do 
index 
partitioning 
for 
large 
indexes?
  
  
  
 
- 
We 
index 
around 
35 
fields 
(storing 
only 
two 
of 
them 
- 
simple 
ids)
  
  
  
 
- 
Each 
document 
is 
around 
200 
bytes
  
  
  
 
- 
Our 
index 
grows 
to 
around 
50G 
a 
week

2) 
The 
reason 
I 
could 
think 
for 
partitioning 
would 
be,
  
  
  
- 
optimization 
would 
be 
faster 
on 
smaller 
indexes
  
  
  
- 
search 
would 
be 
faster 
if 
I 
have 
to 
search 
only 
on 
specific 
partition
  
  
  
- 
I 
would 
be 
able 
to 
archive 
old 
partitions
  
  
  
- 
Even 
if 
a 
partition 
gets 
corrupt 
I 
wouldn't 
lose 
all 
data

  
  
Is 
this 
correct? 
Are 
there 
any 
other 
reasons?

Thanks,
-vivek



On 
Jan 
21, 
2008 
2:32 
PM, 
Otis 
Gospodnetic 
<otis_gospodnetic@yahoo.com> 
wrote:
>
> 
Why 
not 
just 
design 
your 
system 
to 
roll 
over 
to 
a 
new 
index 
on 
a 
weekly 
a 
basis 
(new 
IndexWriter 
on 
a 
new 
index 
dir, 
roughly 
speaking)?  
You 
can't 
partition 
a 
single 
Document, 
if 
that 
is 
what 
you 
are 
asking.  
But 
you 
can 
create 
multiple 
smaller 
(e.g. 
weekly 
indices) 
instead 
one 
large 
one, 
and 
then 
every 
2 
weeks 
archive 
the 
one 
> 
2 
weeks 
old.
>
> 
Otis
> 
--
> 
Sematext 
-- 
http://sematext.com/ 
-- 
Lucene 
- 
Solr 
- 
Nutch
>
> 
----- 
Original 
Message 
----
> 
From: 
vivek 
sar 
<vivextra@gmail.com>
> 
To: 
java-user@lucene.apache.org
> 
Sent: 
Monday, 
January 
21, 
2008 
3:06:50 
PM
> 
Subject: 
Archiving 
Index 
using 
partitions
>
> 
Hi,
>
>  
As 
a 
requirement 
I 
need 
to 
be 
able 
to 
archive 
any 
indexes 
older 
than
> 
2 
weeks 
(due 
to 
space 
and 
performance 
reasons). 
That 
means 
I 
would
> 
need 
to 
maintain 
weekly 
indexes. 
Here 
are 
my 
questions,
>
> 
1) 
What's 
the 
best 
way 
to 
partition 
indexes 
using 
Lucene?
> 
2) 
Is 
there 
a 
way 
I 
can 
partition 
documents, 
but 
not 
indexes? 
I 
don't
> 
want 
each 
partitioned 
index 
to 
be 
a 
full 
index, 
as 
that 
would 
be 
waste
> 
of 
space. 
We 
collect 
over 
10K 
new 
documents 
per 
min 
(with 
each
> 
document 
around 
250 
bytes).
> 
3) 
Is 
ParallelMultiSearcher 
the 
way 
to 
go 
for 
partitioned 
indexes? 
Do
> 
I 
ever 
have 
to 
merge 
these 
partitioned 
indexes?
> 
4) 
I'm 
hoping 
I 
can 
reload 
the 
archived 
indexes 
in 
future 
if 
needed.
>
> 
Not 
sure 
if 
there 
is 
a 
standard 
way 
to 
archive 
the 
indexes 
using
>  
Lucene.
>
> 
Thanks,
> 
-vivek
>
> 
---------------------------------------------------------------------
> 
To 
unsubscribe, 
e-mail: 
java-user-unsubscribe@lucene.apache.org
> 
For 
additional 
commands, 
e-mail: 
java-user-help@lucene.apache.org
>
>
>
>
>
> 
---------------------------------------------------------------------
> 
To 
unsubscribe, 
e-mail: 
java-user-unsubscribe@lucene.apache.org
> 
For 
additional 
commands, 
e-mail: 
java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To 
unsubscribe, 
e-mail: 
java-user-unsubscribe@lucene.apache.org
For 
additional 
commands, 
e-mail: 
java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 05:56:30 2008
Return-Path: <java-user-return-32228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13294 invoked from network); 27 Jan 2008 05:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 05:56:29 -0000
Received: (qmail 49480 invoked by uid 500); 27 Jan 2008 05:56:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49440 invoked by uid 500); 27 Jan 2008 05:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49429 invoked by uid 99); 27 Jan 2008 05:56:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 21:56:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 05:55:48 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1080382rvb.5
        for <java-user@lucene.apache.org>; Sat, 26 Jan 2008 21:55:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NTEqDWg7h56ezFOW0+ioxLM0xZ/89Wy2QtcobiKTjO0=;
        b=rvlS4HTDYgoRqiwAc8qc775n0OZBDrD9mvga5Hc7w3KYKcfss/W6Pnzaz4HkXMGme8KZFnI98HBL53/bwJ4q4unvJYCg5DAkR2UxRie2fUbCoQ1mxFnCK8HBye943Akt9s5hjHC7hixjp1qEJFAD80Q/dywIdui/kLbJ2sQ74GU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZsuqEHz6jwlJYt7zLwvVNKqb1I+0Q5bODvQ1Pxd7WWqDCL8oK73vmg33TJnE47OP4WHucL1LWaZDNu5y3KWjVA5Ukq7j+QEA+nHRoJ8ablVyKkWX3UkbFD5lYuC6ftYhnRdEgRvVEo3yS387wPTUeR2WoSso44kPDQA+bz6XqUA=
Received: by 10.142.162.5 with SMTP id k5mr1884772wfe.53.1201413353205;
        Sat, 26 Jan 2008 21:55:53 -0800 (PST)
Received: by 10.142.191.17 with HTTP; Sat, 26 Jan 2008 21:55:53 -0800 (PST)
Message-ID: <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
Date: Sun, 27 Jan 2008 11:25:53 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4340_7179705.1201413353187"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4340_7179705.1201413353187
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My Indexing Code
-------------------------------
public  void index(File indexDir, File dataDir) throws IOException
     {
           if (!dataDir.exists() || !dataDir.isDirectory()) {
            throw new IOException(dataDir + " does not exist or is not a
directory");
        }
        IndexWriter writer = new IndexWriter(indexDir, new
StandardAnalyzer(), true);
        indexDirectory(writer, dataDir);
        writer.close();
    }
      public  void indexDirectory(IndexWriter writer, File dir) throws
IOException {
        File[] files = dir.listFiles();
    System.out.println("TOTAL NUMBER OF FILES :"+files.length);
        for (int i=0; i < files.length; i++)
        {

             File f = files[i];
            if (f.isDirectory()) {
                indexDirectory(writer, f);  // recurse
            } else if (f.getName().endsWith(".txt") ||
f.getName().endsWith(".doc"))
{
                indexFile(writer, f);
            }
        }
    }
      public  void indexFile(IndexWriter writer, File f) throws IOException
       {

        System.out.println("Indexing " + f.getName()); /*Print the Indexed
File Names*/
        Document doc = new Document();
        doc.add(Field.Text("contents", new FileReader(f)));
        doc.add(Field.Keyword("filename", f.getCanonicalPath()));
        writer.addDocument(doc);
    }

--------------------------------------------------------------------
My Searching code...public  Vector search(File indexDir, String q)  throws
Exception
      {
      Vector vecname=new Vector();
    Directory fsDir = FSDirectory.getDirectory(indexDir, false);
    IndexSearcher is = new IndexSearcher(fsDir);
    Query query = QueryParser.parse(q, "contents", new StandardAnalyzer());
    Hits hits = is.search(query);
    System.out.println("Found " + hits.length() + " document(s) that matched
query '" + q + "':");
    for (int i = 0; i < hits.length(); i++)
    {
        Document doc = hits.doc(i);
        vecname.add(doc.get("filename"));
        //System.out.println(doc.get("filename"));
        //System.out.println(hits.length());
    }
    /** Creates a new instance of ContentSearcher */
    return vecname;
}
------------------------------------------------------------------


On Jan 25, 2008 1:35 PM, anjana m <anjana.mprasad@gmail.com> wrote:

> I want to retain the older index.
> I dont want to delete the older index.
> Please help me.
> Does the recent release has the option to update the indexes without
> deleting it.
> I am ruuning the indexer on my sun application server.
> and its thorwing  exceptions  like cannot delete indexex.
> now every time i add new docs..i need to create a new index directory
> andmake my program point to thenew index directory.
> Please provide me..info about how can i handle the same..
> And also i would like to know abt the latest version..where it has fetures
> to update indexes without deleting it..
>
>
> Thanks and regards
> anjana
>

------=_Part_4340_7179705.1201413353187--

From java-user-return-32229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 06:11:46 2008
Return-Path: <java-user-return-32229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82849 invoked from network); 27 Jan 2008 06:11:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 06:11:46 -0000
Received: (qmail 55053 invoked by uid 500); 27 Jan 2008 06:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55030 invoked by uid 500); 27 Jan 2008 06:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55019 invoked by uid 99); 27 Jan 2008 06:11:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jan 2008 22:11:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 27 Jan 2008 06:11:16 +0000
Received: (qmail 77511 invoked by uid 60001); 27 Jan 2008 06:11:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=CL+QpymC1/4UTFZZGOKcg0OYj0By8kVin5DKayRGx5XTX82yFveJ8bPFVje69qMrNEwEVLy7xcnpQq7pXwiNzkVYldNXoPlK6jdwQAqIzPVLWa35dNZcQzn7ab+lCe9Q0jbF73yuYVKJNEeZkLh0Neb61uyuDlMw2AZ7hTqe2uc=;
X-YMail-OSG: DpfIuSkVM1n6xDKndmwarCll9gr_Tovarcvpv19BXZae9dta0EKAYMjFvCSs4p3bfg--
Received: from [72.231.9.236] by web50307.mail.re2.yahoo.com via HTTP; Sat, 26 Jan 2008 22:11:07 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Sat, 26 Jan 2008 22:11:07 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene search strings two
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <36101.76720.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
This sounds like a straight-forward AND query and I bet you can copy/paste example code for that from some online Lucene tutorials of even from the freely downloadable code that comes with Lucene in Action.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Prathiba Paka <prathiba.p@easywaytech.com>
To: java-user@lucene.apache.org
Sent: Thursday, January 24, 2008 4:30:49 AM
Subject: Lucene search strings two

Hi 
all.
I 
need 
to 
check 
two 
conditions 
in 
search
first 
i 
need 
to 
find 
out 
bank 
name 
next
in 
those 
i 
need 
to 
find 
documents 
consisting 
particular 
city
finally 
i 
need 
the 
documents 
which 
satisfy 
both 
conditions
i.e., 
documents 
with 
bank+city
please 
can 
anyone 
help 
me

Thanks,
prathiba.P




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 09:39:49 2008
Return-Path: <java-user-return-32230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26123 invoked from network); 27 Jan 2008 09:39:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 09:39:48 -0000
Received: (qmail 18986 invoked by uid 500); 27 Jan 2008 09:39:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18962 invoked by uid 500); 27 Jan 2008 09:39:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18951 invoked by uid 99); 27 Jan 2008 09:39:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 01:39:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.28 as permitted sender)
Received: from [80.67.29.28] (HELO smtprelay11.ispgateway.de) (80.67.29.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 09:39:18 +0000
Received: from [84.191.229.104] (helo=p54bfe568.dip.t-dialin.net)
	by smtprelay11.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JJ3yp-0005VE-BG
	for java-user@lucene.apache.org; Sun, 27 Jan 2008 10:39:11 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
Date: Sun, 27 Jan 2008 10:37:43 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com> <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
In-Reply-To: <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200801271037.43451@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 27. Januar 2008, anjana m wrote:

> =C2=A0 =C2=A0 =C2=A0 =C2=A0 IndexWriter writer =3D new IndexWriter(indexD=
ir, new
> StandardAnalyzer(), true);

The true parameter means that the old index will be deleted, is that your=20
problem?

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 10:12:31 2008
Return-Path: <java-user-return-32231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32067 invoked from network); 27 Jan 2008 10:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 10:12:31 -0000
Received: (qmail 30272 invoked by uid 500); 27 Jan 2008 10:12:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30237 invoked by uid 500); 27 Jan 2008 10:12:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30226 invoked by uid 99); 27 Jan 2008 10:12:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 02:12:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 10:11:46 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2500193wah.11
        for <java-user@lucene.apache.org>; Sun, 27 Jan 2008 02:11:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=v6AQV9J8HOLepohv3qa+9pV9N6PkQqj98YQ3gpT18so=;
        b=sePjkvRNn+vDyhI0SE3i76WqL+kAcbWIS6gMmFSL3nioZP2Seqk0YSaGd+7mYzvEFUZtI0C7OTBTAYwGE6iZdcpfDxvx5BoL0o052Y8Hc/4jHds7Z6n6YM4CvqFJtXTj8ADNsvHdoTLymwryiPn/UV6x1cEmzhK1Nj3da70lNWM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=h36QFJIUikyuF9iyhghZu/KktiPdG6h3A58hhSDMY5wG/DTC7LTxp/WYDEJ+QhNtqZiskSV4l60mE5vfnMEYucCS0L9Ich0wYv7OKfltjq/UyMX+HkQxBgT5h25w7YEbHtwcdLFP0QQ8ZXXZh3T0vDEdoKbOO9j9D/I1iPSrdMs=
Received: by 10.142.252.11 with SMTP id z11mr1901915wfh.50.1201428713491;
        Sun, 27 Jan 2008 02:11:53 -0800 (PST)
Received: by 10.142.191.17 with HTTP; Sun, 27 Jan 2008 02:11:53 -0800 (PST)
Message-ID: <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
Date: Sun, 27 Jan 2008 15:41:53 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <200801271037.43451@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4595_7537047.1201428713456"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4595_7537047.1201428713456
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes i dont want the old index to be deletd since its running on my app
server..
any suggestion..?

On Jan 27, 2008 3:07 PM, Daniel Naber <lucenelist2007@danielnaber.de> wrote:

> On Sonntag, 27. Januar 2008, anjana m wrote:
>
> >         IndexWriter writer = new IndexWriter(indexDir, new
> > StandardAnalyzer(), true);
>
> The true parameter means that the old index will be deleted, is that your
> problem?
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4595_7537047.1201428713456--

From java-user-return-32232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 19:25:30 2008
Return-Path: <java-user-return-32232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59151 invoked from network); 27 Jan 2008 19:25:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 19:25:29 -0000
Received: (qmail 17286 invoked by uid 500); 27 Jan 2008 19:25:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17245 invoked by uid 500); 27 Jan 2008 19:25:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17234 invoked by uid 99); 27 Jan 2008 19:25:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 11:25:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.227 as permitted sender)
Received: from [72.14.214.227] (HELO hu-out-0506.google.com) (72.14.214.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 19:24:47 +0000
Received: by hu-out-0506.google.com with SMTP id 27so915546hub.15
        for <java-user@lucene.apache.org>; Sun, 27 Jan 2008 11:24:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=C+PKsUxXh1OB23p9ObA2iX05kaRSxfC1cwun2R4k61o=;
        b=vw/sLN+b52KNoKoIbfhCkbZOJKFaFL/NLYPM/oRjEUR/BN2HWDQqQVq5Uv5P+e/iePGDjqbvYnPzExowdoDVYTrmjvoOxRUEGdxTPCwbNCJza4rRNXzz7bjlsbTeUtxqgm1UB8NvOxNi9summV+wPWnwe3A5A0s1JrkGgWD7wro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mZskvAH2GYFomRVgOSiUseYGGBobAjDw9ZUdWygrHUHiJInWi2LRLPD3aqlABbC2NVG+U8i9mNgxeDkR80bfJd31kO9XYTl+cqk7y8cHKlDtodaZaP3ZfJHqDmJEA5YqHIRJ24szr94eMjkM3DDI7zETJAktMG8pBX5lO5rCRIQ=
Received: by 10.82.158.12 with SMTP id g12mr8294508bue.18.1201461891344;
        Sun, 27 Jan 2008 11:24:51 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Sun, 27 Jan 2008 11:24:51 -0800 (PST)
Message-ID: <652776090801271124x25f13923rf0f149992876a0c8@mail.gmail.com>
Date: Sun, 27 Jan 2008 11:24:51 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Threads blocking on isDeleted when swapping indices for a very long time...
In-Reply-To: <381786.30537.qm@web50308.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5569_30060781.1201461891243"
References: <381786.30537.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5569_30060781.1201461891243
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Otis,

Thanks for the response.

All the threads are blocked in the same place. Here's the typical
stacktrace, I've remove the stuff outside of the lucene
libraries. I have about 100 threads blocked in the same place.

btpool0-5 [BLOCKED; waiting to lock
org.apache.lucene.index.SegmentReader@45d1c3cd]
org.apache.lucene.index.SegmentReader.isDeleted(SegmentReader.java)
org.apache.lucene.index.MultiReader.isDeleted(MultiReader.java:114)
org.apache.lucene.search.MatchAllDocsQuery$MatchAllScorer.next(
MatchAllDocsQuery.java:67)
org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:56)
org.apache.lucene.search.ReqExclScorer.next(ReqExclScorer.java:55)
org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
org.apache.lucene.search.Searcher.search(Searcher.java:118)
org.apache.lucene.search.Searcher.search(Searcher.java:97)
org.apache.lucene.search.QueryWrapperFilter.bits(QueryWrapperFilter.java:50)
org.apache.lucene.search.CachingWrapperFilter.bits(CachingWrapperFilter.java
:58)
org.apache.lucene.misc.ChainedFilter.doChain(ChainedFilter.java:249)
org.apache.lucene.misc.ChainedFilter.bits(ChainedFilter.java:187)
org.apache.lucene.misc.ChainedFilter.bits(ChainedFilter.java:152)
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:133)
org.apache.lucene.search.Searcher.search(Searcher.java:118)

-M

On Jan 26, 2008 8:37 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
wrote:

> Can you kill -QUIT <your java PID> right after you fire those 20-30
> concurrent queries?  This could tell you/us where those threads are
> blocking, if they are blocking, or what they are all doing.
>
> Thanks,
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
> ----- Original Message ----
> From: Michael Stoppelman <stopman@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, January 25, 2008 8:08:32 PM
> Subject: Re: Threads blocking on isDeleted when swapping indices for a
> very long time...
>
> For
> anyone
> interested
> I
> did
> work
> around
> this.
> The
> problem
> was
> that
> I
> wasn't
> warming
> the
> index
> enough.
> When
> I
> ran
> full
> queries
> against
> the
> new
> index
> being
> switched
> to
> everything
> runs
> smoothly
> when
> the
> indices
> are
> swapped
> now.
> There
> must
> be
> some
> lower
> level
> caches
> that
> need
> to
> be
> filled
> that
> I'm
> not
> aware
> of.
> The
> thread
> that
> I
> pointed
> at
> in
> the
> first
> post
> seems
> to
> suggest
> it's
> the
> caches
> in
> the
> Sort
> object.
>
> One
> can
> recreate
> this
> by
> starting
> up
> a
> non-warmed
> lucene
> index
> and
> firing
> 20
> -
> 30
> concurrent
> queries
> at
> it.
> Mostly
> likely
> lucene
> will
> freeze
> on
> all
> the
> threads.
> Maybe
> all
> the
> threads
> at
> the
> start
> are
> building
> the
> same
> cache
> multiple
> times?
>
> -M
>
> On
> Jan
> 25,
> 2008
> 2:01
> AM,
> Michael
> Stoppelman
> <stopman@gmail.com>
> wrote:
>
> >
> BTW,
> I'm
> using
> Lucene
> 2.2.0.
> >
> >
> -M
> >
> >
> p.s.
> Congrats
> on
> the
> 2.3.0
> release!
> >
> >
> >
> On
> Jan
> 24,
> 2008
> 7:42
> PM,
> Michael
> Stoppelman
> <stopman@gmail.com
> >
> wrote:
> >
> >
> >
> Hi
> all,
> >
> >
> >
> >
> I've
> been
> tracking
> down
> a
> problem
> happening
> in
> our
> production
> >
> >
> environment.
> When
> we
> switch
> an
> index
> after
> doing
> deletes
> &
> adds,
> running
> >
> >
> some
> searches,
> and
> finally
> changing
> the
> pointer
> >
> >
> from
> old
> index
> to
> new
> all
> the
> threads
> start
> stacking
> up
> all
> waiting
> on
> >
> >
> isDeleted().
> The
> threads
> seem
> to
> finish,
> they
> just
> get
> really
> slow
> taking
> up
> >
> >
> to
> 30
> -
> 60
> seconds.
> >
> >
> >
> >
> The
> problem
> has
> been
> discussed
> here
> before
> in
> 2005:
> >
> >
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3C88c6a6720510111623m3e09dbb2y4605c6c4a7485bf3@mail.gmail.com%3E
> >
> >
> >
> >
> >
> >
> Does
> anyone
> have
> any
> suggestions
> on
> how
> to
> work
> around
> this?
> >
> >
> >
> >
> -M
> >
> >
> >
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5569_30060781.1201461891243--

From java-user-return-32233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 20:44:30 2008
Return-Path: <java-user-return-32233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76285 invoked from network); 27 Jan 2008 20:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 20:44:30 -0000
Received: (qmail 47019 invoked by uid 500); 27 Jan 2008 20:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46978 invoked by uid 500); 27 Jan 2008 20:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46967 invoked by uid 99); 27 Jan 2008 20:44:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 12:44:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 20:43:47 +0000
Received: by wx-out-0506.google.com with SMTP id i28so985492wxd.20
        for <java-user@lucene.apache.org>; Sun, 27 Jan 2008 12:43:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=C4FzDwq+rRJDBhsJ5e2xNuIWi/Yl8GzpFL6OozdmQEI=;
        b=hYerPlpCstOnSCuoVKcKdD16X6DJy3LdsE2ETp2zV9N2+717ZLDXONbFN/G4RHS894EVarWaXkZJ7w80njRj7SzLwcInMTIg32cbHJvT4Wmfnv6s+exIJTWYYzFkFeOjaYWvqLkozWZzauUcMzAKaOJm2niWA+BESSm430WMzlY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=MUoKE0kIRc46oWopxDtoKR1LmH+gNlkTynu78dJEqP6wnhIO4316MnxSa1jV6ZC6dBFWO6XfBtzuVTY4u6K2RRrbPXy2sGzKxWUcMhwoYZ+MuqRKWT/32Gf+3HRwnyeHbFll5y4efL5HMFv08GL5VK47CXfvyCrASxaBirBsW2A=
Received: by 10.142.230.11 with SMTP id c11mr2028599wfh.25.1201466632605;
        Sun, 27 Jan 2008 12:43:52 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Sun, 27 Jan 2008 12:43:52 -0800 (PST)
Message-ID: <c68e39170801271243h2d90a7ffk2cebc09990cf4e11@mail.gmail.com>
Date: Sun, 27 Jan 2008 15:43:52 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Threads blocking on isDeleted when swapping indices for a very long time...
In-Reply-To: <652776090801271124x25f13923rf0f149992876a0c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <381786.30537.qm@web50308.mail.re2.yahoo.com>
	 <652776090801271124x25f13923rf0f149992876a0c8@mail.gmail.com>
X-Google-Sender-Auth: 9af95416219134e0
X-Virus-Checked: Checked by ClamAV on apache.org

I've seen this before.
When you have a ton of threads, any synchronization point can become a
bottleneck, regardless of how small the synchronized code is.  If it
wasn't isDeleted, it would be something else.
The better strategy from an app standpoint is to throttle the number of threads.

-Yonik

On Jan 27, 2008 2:24 PM, Michael Stoppelman <stopman@gmail.com> wrote:
> Otis,
>
> Thanks for the response.
>
> All the threads are blocked in the same place. Here's the typical
> stacktrace, I've remove the stuff outside of the lucene
> libraries. I have about 100 threads blocked in the same place.
>
> btpool0-5 [BLOCKED; waiting to lock
> org.apache.lucene.index.SegmentReader@45d1c3cd]
> org.apache.lucene.index.SegmentReader.isDeleted(SegmentReader.java)
> org.apache.lucene.index.MultiReader.isDeleted(MultiReader.java:114)
> org.apache.lucene.search.MatchAllDocsQuery$MatchAllScorer.next(
> MatchAllDocsQuery.java:67)
> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:56)
> org.apache.lucene.search.ReqExclScorer.next(ReqExclScorer.java:55)
> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
> org.apache.lucene.search.Searcher.search(Searcher.java:118)
> org.apache.lucene.search.Searcher.search(Searcher.java:97)
> org.apache.lucene.search.QueryWrapperFilter.bits(QueryWrapperFilter.java:50)
> org.apache.lucene.search.CachingWrapperFilter.bits(CachingWrapperFilter.java
> :58)
> org.apache.lucene.misc.ChainedFilter.doChain(ChainedFilter.java:249)
> org.apache.lucene.misc.ChainedFilter.bits(ChainedFilter.java:187)
> org.apache.lucene.misc.ChainedFilter.bits(ChainedFilter.java:152)
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:133)
> org.apache.lucene.search.Searcher.search(Searcher.java:118)
>
> -M
>
> On Jan 26, 2008 8:37 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> wrote:
>
>
> > Can you kill -QUIT <your java PID> right after you fire those 20-30
> > concurrent queries?  This could tell you/us where those threads are
> > blocking, if they are blocking, or what they are all doing.
> >
> > Thanks,
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> > ----- Original Message ----
> > From: Michael Stoppelman <stopman@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Friday, January 25, 2008 8:08:32 PM
> > Subject: Re: Threads blocking on isDeleted when swapping indices for a
> > very long time...
> >
> > For
> > anyone
> > interested
> > I
> > did
> > work
> > around
> > this.
> > The
> > problem
> > was
> > that
> > I
> > wasn't
> > warming
> > the
> > index
> > enough.
> > When
> > I
> > ran
> > full
> > queries
> > against
> > the
> > new
> > index
> > being
> > switched
> > to
> > everything
> > runs
> > smoothly
> > when
> > the
> > indices
> > are
> > swapped
> > now.
> > There
> > must
> > be
> > some
> > lower
> > level
> > caches
> > that
> > need
> > to
> > be
> > filled
> > that
> > I'm
> > not
> > aware
> > of.
> > The
> > thread
> > that
> > I
> > pointed
> > at
> > in
> > the
> > first
> > post
> > seems
> > to
> > suggest
> > it's
> > the
> > caches
> > in
> > the
> > Sort
> > object.
> >
> > One
> > can
> > recreate
> > this
> > by
> > starting
> > up
> > a
> > non-warmed
> > lucene
> > index
> > and
> > firing
> > 20
> > -
> > 30
> > concurrent
> > queries
> > at
> > it.
> > Mostly
> > likely
> > lucene
> > will
> > freeze
> > on
> > all
> > the
> > threads.
> > Maybe
> > all
> > the
> > threads
> > at
> > the
> > start
> > are
> > building
> > the
> > same
> > cache
> > multiple
> > times?
> >
> > -M
> >
> > On
> > Jan
> > 25,
> > 2008
> > 2:01
> > AM,
> > Michael
> > Stoppelman
> > <stopman@gmail.com>
> > wrote:
> >
> > >
> > BTW,
> > I'm
> > using
> > Lucene
> > 2.2.0.
> > >
> > >
> > -M
> > >
> > >
> > p.s.
> > Congrats
> > on
> > the
> > 2.3.0
> > release!
> > >
> > >
> > >
> > On
> > Jan
> > 24,
> > 2008
> > 7:42
> > PM,
> > Michael
> > Stoppelman
> > <stopman@gmail.com
> > >
> > wrote:
> > >
> > >
> > >
> > Hi
> > all,
> > >
> > >
> > >
> > >
> > I've
> > been
> > tracking
> > down
> > a
> > problem
> > happening
> > in
> > our
> > production
> > >
> > >
> > environment.
> > When
> > we
> > switch
> > an
> > index
> > after
> > doing
> > deletes
> > &
> > adds,
> > running
> > >
> > >
> > some
> > searches,
> > and
> > finally
> > changing
> > the
> > pointer
> > >
> > >
> > from
> > old
> > index
> > to
> > new
> > all
> > the
> > threads
> > start
> > stacking
> > up
> > all
> > waiting
> > on
> > >
> > >
> > isDeleted().
> > The
> > threads
> > seem
> > to
> > finish,
> > they
> > just
> > get
> > really
> > slow
> > taking
> > up
> > >
> > >
> > to
> > 30
> > -
> > 60
> > seconds.
> > >
> > >
> > >
> > >
> > The
> > problem
> > has
> > been
> > discussed
> > here
> > before
> > in
> > 2005:
> > >
> > >
> >
> > http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3C88c6a6720510111623m3e09dbb2y4605c6c4a7485bf3@mail.gmail.com%3E
> > >
> > >
> > >
> > >
> > >
> > >
> > Does
> > anyone
> > have
> > any
> > suggestions
> > on
> > how
> > to
> > work
> > around
> > this?
> > >
> > >
> > >
> > >
> > -M
> > >
> > >
> > >
> > >
> > >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 27 21:52:53 2008
Return-Path: <java-user-return-32234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93849 invoked from network); 27 Jan 2008 21:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2008 21:52:52 -0000
Received: (qmail 83224 invoked by uid 500); 27 Jan 2008 21:52:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83191 invoked by uid 500); 27 Jan 2008 21:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83180 invoked by uid 99); 27 Jan 2008 21:52:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 13:52:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jan 2008 21:52:10 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1621247fga.27
        for <java-user@lucene.apache.org>; Sun, 27 Jan 2008 13:52:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=RX0pKu/S4EzX+zG+n/K7Ugk7zhEBevF5JvYQUIKhqtM=;
        b=mzcCcRCUrBar4zgVUDcItkzwNBaDx2Nxjwal3wrLz94EmKlVHLl524/D9XPCMOMwu0CjmzC/+Jt7mmCIh7kBeEKPfWHd0bM/Y2yS4OOdDTCi1ivpb3k2+58BktNyXW7tZHffB8VBVzQKvnj6n8vf6VRsVuDxMM/tTD2handLXb8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=inf3oRKlv9ovDmvQztVCgU4/Jpt7x6CdXY17BUwMBY1oMsvMJCjFikKKL8u8n69raWAq3SVOmT+HuNfQKOmu3mU6WXPLEOGSsrLG9zKz+nnPRRYyDB55sltWMuPWcRQ2QUPjVT4ubvGHWUYTovCzN4klo8IFSwUb+mH1LcyMplw=
Received: by 10.82.107.15 with SMTP id f15mr8545574buc.0.1201470735288;
        Sun, 27 Jan 2008 13:52:15 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 27 Jan 2008 13:52:15 -0800 (PST)
Message-ID: <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
Date: Sun, 27 Jan 2008 16:52:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5613_13693485.1201470735285"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
	 <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5613_13693485.1201470735285
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Set the parameter to false as per the documentation....

Erick

On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:

> yes i dont want the old index to be deletd since its running on my app
> server..
> any suggestion..?
>
> On Jan 27, 2008 3:07 PM, Daniel Naber <lucenelist2007@danielnaber.de>
> wrote:
>
> > On Sonntag, 27. Januar 2008, anjana m wrote:
> >
> > >         IndexWriter writer = new IndexWriter(indexDir, new
> > > StandardAnalyzer(), true);
> >
> > The true parameter means that the old index will be deleted, is that
> your
> > problem?
> >
> > Regards
> >  Daniel
> >
> > --
> > http://www.danielnaber.de
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_5613_13693485.1201470735285--

From java-user-return-32235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 08:05:07 2008
Return-Path: <java-user-return-32235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73804 invoked from network); 28 Jan 2008 08:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 08:05:06 -0000
Received: (qmail 82796 invoked by uid 500); 28 Jan 2008 08:04:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82757 invoked by uid 500); 28 Jan 2008 08:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82746 invoked by uid 99); 28 Jan 2008 08:04:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 00:04:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 08:04:23 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1789125fga.27
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 00:04:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=r80SflaSeZB8N9sDaJEhbVRBp0FfuHYecTGG/WZ2ahQ=;
        b=wXh8dPGFVyVXtBU3WO2C9DiMuFc9dMg4bAYxBuW2Ya/6oWGjbTaFxdxSkTD0HqIhDALRPOdWKBSW8O56EkXzIZRPW99UCWAFnXTR6Zn0q0ftHgTUuTghenTnzszJcbArsfvkoeDCOU40ipx/Lf+ym93gWqMIeGcgZXyNJ3pETJE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=I3HrCh7xv+psXArXiIj++Mnmtv086Q5gv4pm5UhrtpcchTZPuFZHLEf8ZxzHLjSWgat5TOja9A/acFVxTzFS3UUxW4za2bvENzZM3j7KB9hm3WHAZl088lft79LeRuWMAPg2uo8GAeFecbaupckHnR1RtH6ARNd7wg+YAF9CyeA=
Received: by 10.82.152.16 with SMTP id z16mr9250048bud.17.1201507468627;
        Mon, 28 Jan 2008 00:04:28 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Mon, 28 Jan 2008 00:04:28 -0800 (PST)
Message-ID: <1bcb7c7f0801280004y572d8a9fs568d165c39e849eb@mail.gmail.com>
Date: Mon, 28 Jan 2008 10:04:28 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexSearcher and Multiple Threads
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8816_33220932.1201507468613"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8816_33220932.1201507468613
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Is IndexSearcher ThreadSafe? I made a simple httpserver using grizzly as
described in
http://jlorenzen.blogspot.com/2007/06/using-grizzly-to-create-simple-http.html
which submit queries to a single instance of indexsearcher and I get some
errors (when I query with more then one threads) such as:

Jan 28, 2008 9:52:56 AM com.sun.grizzly.http.DefaultProcessorTaskinvokeAdapter
SEVERE: processorTask.serviceError
java.lang.NullPointerException
    at org.apache.lucene.queryParser.QueryParser.jj_scan_token(
QueryParser.java:1427)
    at org.apache.lucene.queryParser.QueryParser.jj_3R_3(QueryParser.java
:1319)
    at org.apache.lucene.queryParser.QueryParser.jj_3_1(QueryParser.java
:1313)
    at org.apache.lucene.queryParser.QueryParser.jj_2_1(QueryParser.java
:1297)
    at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java
:991)
    at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:948)
    at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(
QueryParser.java:937)
    at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:147)
    at sys.GGSearcher.searchQuery(GGSearcher.java:70)
    at sys.EmbeddedServer.service(EmbeddedServer.java:52)
    at com.sun.grizzly.http.DefaultProcessorTask.invokeAdapter(
DefaultProcessorTask.java:599)
    at com.sun.grizzly.http.DefaultProcessorTask.doProcess(
DefaultProcessorTask.java:530)
    at com.sun.grizzly.http.DefaultProcessorTask.process(
DefaultProcessorTask.java:774)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(
DefaultProtocolFilter.java:130)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(
DefaultProtocolChain.java:102)
    at com.sun.grizzly.DefaultProtocolChain.execute(
DefaultProtocolChain.java:78)
    at com.sun.grizzly.http.SelectorThread$1.execute(SelectorThread.java
:637)
    at com.sun.grizzly.ProtocolChainContextTask.call(
ProtocolChainContextTask.java:61)
    at com.sun.grizzly.util.WorkerThreadImpl.run(WorkerThreadImpl.java:179)
Jan 28, 2008 9:52:56 AM com.sun.grizzly.http.DefaultProcessorTaskinvokeAdapter
SEVERE: processorTask.serviceError
org.apache.lucene.queryParser.ParseException: Cannot parse 'test':
Encountered "<EOF>" at line 1, column 0.
Was expecting one of:
    <NOT> ...
    "+" ...
    "-" ...
    "(" ...
    "*" ...
    <QUOTED> ...
    <TERM> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...


This error does not happen if I do searches one at a time.

Best Regards,
-C.B.

------=_Part_8816_33220932.1201507468613--

From java-user-return-32236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 09:37:10 2008
Return-Path: <java-user-return-32236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15992 invoked from network); 28 Jan 2008 09:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 09:37:10 -0000
Received: (qmail 76675 invoked by uid 500); 28 Jan 2008 09:36:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76649 invoked by uid 500); 28 Jan 2008 09:36:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76634 invoked by uid 99); 28 Jan 2008 09:36:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 01:36:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 09:36:25 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1819160fga.27
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 01:36:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=b8V5FmN6nMbPSwHKx+xv1IPvpUzcBOh1rphwib7Nh74=;
        b=wmQr8UvoOkakniHekE2Z3GpgLZuO+1u+2x82zfL3wZi574RqRMcIZF7028eBNx5/yUHwhSBbM5+LFFZxJqwKQAr/imLg8PnpePpHI/sB0NfZcEMIlDCHBvTvUinwA6oBfAbn+B1LmSLf4lmvRnqP4lVoXQcJZeiecmdbRJdzCrA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=vnmPCMaWE9LcQ1myFIzu57mZRT2HrfL7iEdFEXDr9/xivcOlYn2mgM67SJKxdk1iVqsNXvF11+eocNjtF4pJyLM5W9PEmkpVt4kTuvRJnwUqv8ag8lyt6729X5itisJsnni+Exl7bpphpZ2mbekPTYxw44zKdnnAlYfwZQacWU8=
Received: by 10.82.186.5 with SMTP id j5mr9403259buf.12.1201512991139;
        Mon, 28 Jan 2008 01:36:31 -0800 (PST)
Received: by 10.82.173.16 with HTTP; Mon, 28 Jan 2008 01:36:31 -0800 (PST)
Message-ID: <1bcb7c7f0801280136vdb49381yf4a35ae080c3e193@mail.gmail.com>
Date: Mon, 28 Jan 2008 11:36:31 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: hitcollector and sort
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8983_15305139.1201512991135"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8983_15305139.1201512991135
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

How can I use a hit collector and sort object in query? I looked at the API
and sort is only usable with hits. Is it even possible? since hitcollector
returns a bitset - how do we do the ordering?

Best,
-C.B.

------=_Part_8983_15305139.1201512991135--

From java-user-return-32237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 10:13:13 2008
Return-Path: <java-user-return-32237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33867 invoked from network); 28 Jan 2008 10:13:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 10:13:12 -0000
Received: (qmail 21999 invoked by uid 500); 28 Jan 2008 10:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21965 invoked by uid 500); 28 Jan 2008 10:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21954 invoked by uid 99); 28 Jan 2008 10:12:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 02:12:57 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 10:12:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JJQyi-0000bs-9j
	for java-user@lucene.apache.org; Mon, 28 Jan 2008 02:12:36 -0800
Message-ID: <15132031.post@talk.nabble.com>
Date: Mon, 28 Jan 2008 02:12:36 -0800 (PST)
From: Thibaut Britz <t.britz@netbreeze.ch>
To: java-user@lucene.apache.org
Subject: Re: Lucene Performance
In-Reply-To: <200801191909.59076.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: t.britz@netbreeze.ch
References: <14952958.post@talk.nabble.com> <200801191909.59076.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your answer,
I will look into this in more detail.



Paul Elschot wrote:
> 
> On Friday 18 January 2008 17:52:27 Thibaut Britz wrote:
>> 
>> Hi,
>> 
> ...
>> 
>> Another thing I noticed is that we append a lot of queries, so we have a
>> lot
>> of duplicate phrases like (A and B or C) and ... and (A and B or C) (more
>> nested than that). Is lucene doing any internal query optimization (like
>> karnaugh maps) by removing the last (A and B or C), as it is not needed,
>> or
>> do I have to do that myself?
> 
> Query optimization like karnaugh maps is not available in Lucene.
> For each level of 'and' and 'or' in the (rewritten) query, as well as for
> all terms
> in the query, a separate scorer will be used during query search.
> 
> The query rewrite could in principle do this, but it might affect the
> score values.
> 
> Regards,
> Paul Elschot
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-Performance-tp14952958p15132031.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 14:28:19 2008
Return-Path: <java-user-return-32238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34986 invoked from network); 28 Jan 2008 14:28:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 14:28:19 -0000
Received: (qmail 24411 invoked by uid 500); 28 Jan 2008 14:28:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24385 invoked by uid 500); 28 Jan 2008 14:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24374 invoked by uid 99); 28 Jan 2008 14:28:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 06:28:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 28 Jan 2008 14:27:49 +0000
Received: (qmail invoked by alias); 28 Jan 2008 14:27:41 -0000
Received: from e178086113.adsl.alicedsl.de (EHLO msrvcn04) [85.178.86.113]
  by mail.gmx.net (mp044) with SMTP; 28 Jan 2008 15:27:41 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX189NpQ1oFM9Orxm76j2MLUOhA5sHGuKlvLMjnbKUQ
	/X0AfxfHwwqE6q
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: TermVector
Date: Mon, 28 Jan 2008 15:27:44 +0100
Message-ID: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
thread-index: AchhucwAocc2Mh2lRHeaX1P+6adqSA==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

how do I get the TermVector from a document which I have gotten from an
IndexSearcher via IndexSearcher#search(Query q).

Luke can do it, but I do not know how...

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 14:42:40 2008
Return-Path: <java-user-return-32239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40750 invoked from network); 28 Jan 2008 14:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 14:42:40 -0000
Received: (qmail 59783 invoked by uid 500); 28 Jan 2008 14:42:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59756 invoked by uid 500); 28 Jan 2008 14:42:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59745 invoked by uid 99); 28 Jan 2008 14:42:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 06:42:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 14:41:57 +0000
Received: by py-out-1112.google.com with SMTP id a73so1972751pye.9
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 06:42:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=V1a7im972rmdwEEMTmDQP0VsjpTh7mnWR52z/Wn1op8=;
        b=qnoM+vSY5fyP+mMGac83x0ht/N2bGId4yqXrvSI0+kiWE/aoeERZD7lkqMDid/vZ2URRorgusyJ34+X+SA8YrZ+3eVdNuW/nfAirNZRgLvybj1UoR5QJ5+NUUGuQcXeayrbqNFjLwZt2VJsESCpNbuDCIhO0qkDdy09G/6K9fY0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=L9FC3AlHVsUuUjWuRdyNPXcmGG66kzrdbuFT4S+bmQSxPH0DnU675LL6FRfnhyIrJn3Lc+SZne7qZQBaOta48ThdjxM2PTrt47xenp0QmOklJzA/QjJAoJt4JvHY3dT8M9sAIvaOsVgDxFE39bdoyN2oagAnQuyza+9rp3OmXZg=
Received: by 10.64.142.10 with SMTP id p10mr11491292qbd.94.1201531322060;
        Mon, 28 Jan 2008 06:42:02 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e11sm4761011qbc.5.2008.01.28.06.41.59
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 28 Jan 2008 06:41:59 -0800 (PST)
Message-ID: <479DE9AB.9000902@gmail.com>
Date: Mon, 28 Jan 2008 09:41:47 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: hitcollector and sort
References: <1bcb7c7f0801280136vdb49381yf4a35ae080c3e193@mail.gmail.com>
In-Reply-To: <1bcb7c7f0801280136vdb49381yf4a35ae080c3e193@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at org.apache.lucene.search.TopFieldDocCollector : 
http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/TopFieldDocCollector.html

Cam Bazz wrote:
> Hello,
>
> How can I use a hit collector and sort object in query? I looked at the API
> and sort is only usable with hits. Is it even possible? since hitcollector
> returns a bitset - how do we do the ordering?
>
> Best,
> -C.B.
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 15:26:45 2008
Return-Path: <java-user-return-32240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28571 invoked from network); 28 Jan 2008 15:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 15:26:45 -0000
Received: (qmail 44129 invoked by uid 500); 28 Jan 2008 15:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44105 invoked by uid 500); 28 Jan 2008 15:26:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44094 invoked by uid 99); 28 Jan 2008 15:26:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 07:26:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 28 Jan 2008 15:26:15 +0000
Received: (qmail invoked by alias); 28 Jan 2008 15:26:07 -0000
Received: from e178086113.adsl.alicedsl.de (EHLO msrvcn04) [85.178.86.113]
  by mail.gmx.net (mp014) with SMTP; 28 Jan 2008 16:26:07 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18/0H8Tero/9K4ThfsRiKGaRr9GjvQmInCfiNbHHY
	Fw0l+Z48TPsuHI
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04>
Subject: RE: TermVector
Date: Mon, 28 Jan 2008 16:26:09 +0100
Message-ID: <B9F8F955D3714390AA27995D98D8A938@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04>
thread-index: AchhucwAocc2Mh2lRHeaX1P+6adqSAAB3lsg
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, this was a bit nonsense ;)

I store a document with a content field like this:

Document#add(new Field("content", someReader, TermVector.WITH_OFFSETS));

Later I search this document with an IndexSearcher and want the
TermPositions from this single document.

There is a IndexReader#termPositions(Term t) - but this returns the
positions for the whole index, not a single document.

> -----Original Message-----
> From: spring@gmx.eu [mailto:spring@gmx.eu] 
> Sent: Montag, 28. Januar 2008 15:28
> To: java-user@lucene.apache.org
> Subject: TermVector
> 
> Hi,
> 
> how do I get the TermVector from a document which I have 
> gotten from an
> IndexSearcher via IndexSearcher#search(Query q).
> 
> Luke can do it, but I do not know how...
> 
> Thank you.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 15:56:56 2008
Return-Path: <java-user-return-32241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40013 invoked from network); 28 Jan 2008 15:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 15:56:55 -0000
Received: (qmail 4574 invoked by uid 500); 28 Jan 2008 15:56:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4545 invoked by uid 500); 28 Jan 2008 15:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4534 invoked by uid 99); 28 Jan 2008 15:56:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 07:56:40 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 15:56:23 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 3493175030
	for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 07:56:14 -0800 (PST)
Message-Id: <D6DF4EC2-C06C-44B3-A5F4-3934572A0EA8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <B9F8F955D3714390AA27995D98D8A938@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: TermVector
Date: Mon, 28 Jan 2008 10:56:13 -0500
References: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04> <B9F8F955D3714390AA27995D98D8A938@msrvcn04>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

See IndexReader.getTermFreqVector() and various versions of that.

Also, search the archives for Term Vector, as you will find discussion  
of it there.  You may also, eventually, be interested in the new  
TermVectorMapper capabilities in 2.3 which should help speed up the  
processing of term vectors by providing a callback mechanism to allow  
you to load them into data structures that make sense for your  
application.

-Grant

On Jan 28, 2008, at 10:26 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:

> Sorry, this was a bit nonsense ;)
>
> I store a document with a content field like this:
>
> Document#add(new Field("content", someReader,  
> TermVector.WITH_OFFSETS));
>
> Later I search this document with an IndexSearcher and want the
> TermPositions from this single document.
>
> There is a IndexReader#termPositions(Term t) - but this returns the
> positions for the whole index, not a single document.
>
>> -----Original Message-----
>> From: spring@gmx.eu [mailto:spring@gmx.eu]
>> Sent: Montag, 28. Januar 2008 15:28
>> To: java-user@lucene.apache.org
>> Subject: TermVector
>>
>> Hi,
>>
>> how do I get the TermVector from a document which I have
>> gotten from an
>> IndexSearcher via IndexSearcher#search(Query q).
>>
>> Luke can do it, but I do not know how...
>>
>> Thank you.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 17:29:29 2008
Return-Path: <java-user-return-32242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81185 invoked from network); 28 Jan 2008 17:29:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 17:29:29 -0000
Received: (qmail 69577 invoked by uid 500); 28 Jan 2008 17:29:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69540 invoked by uid 500); 28 Jan 2008 17:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69529 invoked by uid 99); 28 Jan 2008 17:29:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 09:29:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 17:28:46 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1960281fga.27
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 09:28:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yCrX/c9yeVT0OhyK97aqwcdhYvmzW94SuA32czSjcd4=;
        b=cKz6SuIZ7nBfj3x/edAVMPZ6u48AFWu9jpKGp2ARlOwwajCGfniCkV8rW5mNRV6tgGlhk+MUtvssMqQLTrmCrPn9ibDhepl/r9VsLsikf8M9KhGjYXZ0NTVdvQBQOfOaG/wi8KBLyM8PxVon4Ucpj1judHkrcyrDZUiZhD3ZVXA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uNBWRTMgofEhtiYRUpyInl35DoZyU+rPxnSkWE2cOF6RXMsTylBx/44M0oEUQh3ylC46MnmGzavDieKZ8TRQ2g51pa4w8F95v8HZh66b1DU82oHJbb/vUgrHTKEKe5NiUlD4sFMQt0jh/20N28IVP/34bQjF7Hk0A6RHUDp3e20=
Received: by 10.82.171.16 with SMTP id t16mr10238251bue.11.1201541331793;
        Mon, 28 Jan 2008 09:28:51 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 28 Jan 2008 09:28:51 -0800 (PST)
Message-ID: <359a92830801280928l6585d4ads9c277e6ae8b1387a@mail.gmail.com>
Date: Mon, 28 Jan 2008 12:28:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and Multiple Threads
In-Reply-To: <1bcb7c7f0801280004y572d8a9fs568d165c39e849eb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8376_9713616.1201541331778"
References: <1bcb7c7f0801280004y572d8a9fs568d165c39e849eb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8376_9713616.1201541331778
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The IndexSearcher is thread-safe. The QueryParser is *not*. From the
JavaDocs for QueryParser....

Note that QueryParser is *not* thread-safe.

So I'd guess you're using a single QueryParser across multiple
threads. Just use a new one each time, they're not expensive...

Best
Erick


On Jan 28, 2008 3:04 AM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello,
>
> Is IndexSearcher ThreadSafe? I made a simple httpserver using grizzly as
> described in
>
> http://jlorenzen.blogspot.com/2007/06/using-grizzly-to-create-simple-http.html
> which submit queries to a single instance of indexsearcher and I get some
> errors (when I query with more then one threads) such as:
>
> Jan 28, 2008 9:52:56 AM
> com.sun.grizzly.http.DefaultProcessorTaskinvokeAdapter
> SEVERE: processorTask.serviceError
> java.lang.NullPointerException
>    at org.apache.lucene.queryParser.QueryParser.jj_scan_token(
> QueryParser.java:1427)
>    at org.apache.lucene.queryParser.QueryParser.jj_3R_3(QueryParser.java
> :1319)
>    at org.apache.lucene.queryParser.QueryParser.jj_3_1(QueryParser.java
> :1313)
>    at org.apache.lucene.queryParser.QueryParser.jj_2_1(QueryParser.java
> :1297)
>    at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java
> :991)
>    at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java
> :948)
>    at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(
> QueryParser.java:937)
>    at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java
> :147)
>    at sys.GGSearcher.searchQuery(GGSearcher.java:70)
>    at sys.EmbeddedServer.service(EmbeddedServer.java:52)
>    at com.sun.grizzly.http.DefaultProcessorTask.invokeAdapter(
> DefaultProcessorTask.java:599)
>    at com.sun.grizzly.http.DefaultProcessorTask.doProcess(
> DefaultProcessorTask.java:530)
>    at com.sun.grizzly.http.DefaultProcessorTask.process(
> DefaultProcessorTask.java:774)
>    at com.sun.grizzly.http.DefaultProtocolFilter.execute(
> DefaultProtocolFilter.java:130)
>    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(
> DefaultProtocolChain.java:102)
>    at com.sun.grizzly.DefaultProtocolChain.execute(
> DefaultProtocolChain.java:78)
>    at com.sun.grizzly.http.SelectorThread$1.execute(SelectorThread.java
> :637)
>    at com.sun.grizzly.ProtocolChainContextTask.call(
> ProtocolChainContextTask.java:61)
>    at com.sun.grizzly.util.WorkerThreadImpl.run(WorkerThreadImpl.java:179)
> Jan 28, 2008 9:52:56 AM
> com.sun.grizzly.http.DefaultProcessorTaskinvokeAdapter
> SEVERE: processorTask.serviceError
> org.apache.lucene.queryParser.ParseException: Cannot parse 'test':
> Encountered "<EOF>" at line 1, column 0.
> Was expecting one of:
>    <NOT> ...
>    "+" ...
>    "-" ...
>    "(" ...
>    "*" ...
>    <QUOTED> ...
>    <TERM> ...
>    <PREFIXTERM> ...
>    <WILDTERM> ...
>    "[" ...
>    "{" ...
>    <NUMBER> ...
>
>
> This error does not happen if I do searches one at a time.
>
> Best Regards,
> -C.B.
>

------=_Part_8376_9713616.1201541331778--

From java-user-return-32243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 17:34:39 2008
Return-Path: <java-user-return-32243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85036 invoked from network); 28 Jan 2008 17:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 17:34:39 -0000
Received: (qmail 79910 invoked by uid 500); 28 Jan 2008 17:34:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79782 invoked by uid 500); 28 Jan 2008 17:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79771 invoked by uid 99); 28 Jan 2008 17:34:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 09:34:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 17:33:57 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1273354wxd.20
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 09:34:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=2L3bvuMjCTOrYSCn66648QZIq9HaKbH9mCnDBpnK1mM=;
        b=q+Dybmg4A+zVmsAyWPK6zPWCb9FpTTq4hq7Gucz1mhQxldOiqMEeMLkBq2A4shu+G9iYguD93JAdEMcbApGD3o9+ZtStupiNeqjsX9yPMhGBX24y2Mo0h0wmxz7eQURZiHCTb3VNzrmsQFK5ftv3pXfNkH+sIzvPvXiTCJEawe0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KmU7Td7T9LuzL2NT6ItcEFzMhGpVFby7TX+DYHKXDgUu452pO/EDcTxpoiPOiCYBZV+itrRP7MjjmKkmz39rLyyouoOi6um3ZenFcp3j8oSlA7+LNOYhQeBBVcE0sgqckJemC4lM+sXoiHoLVenJ/PUuqj3yGFZUdgPUDj8qF1I=
Received: by 10.141.141.3 with SMTP id t3mr3619200rvn.52.1201541642386;
        Mon, 28 Jan 2008 09:34:02 -0800 (PST)
Received: by 10.141.116.14 with HTTP; Mon, 28 Jan 2008 09:34:02 -0800 (PST)
Message-ID: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
Date: Mon, 28 Jan 2008 12:34:02 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: CustomScoreQuery Not Returning Value in Index
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I am trying to 'muck' with document scores from Lucene.  I have
certain business rules where I have a field named 'domainScore' within
my index.  The 'domainScore' value is a float.  What I want to do is
add this value to the document sub query score from the Lucene search.
 I have implemented a CustomScoreQuery that receives an instance of a
FieldScoreQuery which defines the fieldName 'domainScore' and the
value being type float:

//helper method that creates my query
final Query query = createQuery("content", criteria);

//create a new instance of my custom score query
CustomScoreQuery customScoreQuery = new  DomainCustomScoreQuery(query,
                new FieldScoreQuery("domainScore", FieldScoreQuery.Type.FLOAT));


//this extends CustomScoreQuery
public DomainCustomScoreQuery(final Query query, final
ValueSourceQuery valueSourceQuery) {
  super(query, valueSourceQuery);
}

 @Override
public float customScore(final int doc, final float subQueryScore,
final float valSrcScore) {

  final float totalScore;

  //shouldn't the valSrcScore be my 'domainScore' value?

   //don't worry about the calculateScore, that is where I do some
calculations based on the lucene document score and my domainScore
  totalScore = calculateScore(subQueryScore, valSrcScore);

  return totalScore;
}


So, that seems easy enough.  The issue I have is the valSrcScore is
not the value of the 'domainScore' I have in the index.  For instance,
my 'domainScore' field value for the document returned is '15.83'  but
the 'valSrcScore' passed to the customScore method is '8.614598'.
What am I missing?  The examples seem easy enough.

Thanks for your time,

Briggs.


-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 17:56:00 2008
Return-Path: <java-user-return-32244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97564 invoked from network); 28 Jan 2008 17:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 17:55:59 -0000
Received: (qmail 17157 invoked by uid 500); 28 Jan 2008 17:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17133 invoked by uid 500); 28 Jan 2008 17:55:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17122 invoked by uid 99); 28 Jan 2008 17:55:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 09:55:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 17:55:17 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1538113rvb.5
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 09:55:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=7/lQfZYmX6yWyHwn7YdgnpculKKfUwGZ5tItUs5b5sI=;
        b=HBoqWvSK62weHDd7aONB+4aE3een/joDdJmRRGRoeSwduM5GFHKX1Ng6/TLjomJykWk8Y9w0qh1o42EfLGKBL7R0aZe+kXD7P3hKCN3wAl0kdR2jBAvlVS3CtSoCMZ5/3fV3+giKVkOA1xEV+UlPzCIP+JdcQQhwMh83lvsvxgg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ff7/W1jMUK7QFg8J9DgPCYDhhaUcH6Vfu3iU7KgPaWJTomQW7XalII44BGK3/wuU5GwK1H9pOVWt7UHhkyIg2OXyyi4ZVXFkWFPxRxkOPaJ/OpVQeax+b/tVgvnjXBXrKiywk5WqjLmVudQC5Rc+BSxCNkwfZMN5H4BzR6nIK/M=
Received: by 10.141.88.3 with SMTP id q3mr3641661rvl.46.1201542922921;
        Mon, 28 Jan 2008 09:55:22 -0800 (PST)
Received: by 10.141.116.14 with HTTP; Mon, 28 Jan 2008 09:55:22 -0800 (PST)
Message-ID: <1c0e93080801280955n3e60ecdbnc0a1f9d74b6d97c@mail.gmail.com>
Date: Mon, 28 Jan 2008 12:55:22 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CustomScoreQuery Not Returning Value in Index
In-Reply-To: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

One correction, my valSrcScore was '0.7002756' not ''8.614598'.  But,
again, it's not what I expected.

On Jan 28, 2008 12:34 PM, Briggs <acidbriggs@gmail.com> wrote:
> I am trying to 'muck' with document scores from Lucene.  I have
> certain business rules where I have a field named 'domainScore' within
> my index.  The 'domainScore' value is a float.  What I want to do is
> add this value to the document sub query score from the Lucene search.
>  I have implemented a CustomScoreQuery that receives an instance of a
> FieldScoreQuery which defines the fieldName 'domainScore' and the
> value being type float:
>
> //helper method that creates my query
> final Query query = createQuery("content", criteria);
>
> //create a new instance of my custom score query
> CustomScoreQuery customScoreQuery = new  DomainCustomScoreQuery(query,
>                 new FieldScoreQuery("domainScore", FieldScoreQuery.Type.FLOAT));
>
>
> //this extends CustomScoreQuery
> public DomainCustomScoreQuery(final Query query, final
> ValueSourceQuery valueSourceQuery) {
>   super(query, valueSourceQuery);
> }
>
>  @Override
> public float customScore(final int doc, final float subQueryScore,
> final float valSrcScore) {
>
>   final float totalScore;
>
>   //shouldn't the valSrcScore be my 'domainScore' value?
>
>    //don't worry about the calculateScore, that is where I do some
> calculations based on the lucene document score and my domainScore
>   totalScore = calculateScore(subQueryScore, valSrcScore);
>
>   return totalScore;
> }
>
>
> So, that seems easy enough.  The issue I have is the valSrcScore is
> not the value of the 'domainScore' I have in the index.  For instance,
> my 'domainScore' field value for the document returned is '15.83'  but
> the 'valSrcScore' passed to the customScore method is '8.614598'.
> What am I missing?  The examples seem easy enough.
>
> Thanks for your time,
>
> Briggs.
>
>
> --
> "Conscious decisions by conscious minds are what make reality real"
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 19:35:48 2008
Return-Path: <java-user-return-32245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27903 invoked from network); 28 Jan 2008 19:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 19:35:48 -0000
Received: (qmail 32987 invoked by uid 500); 28 Jan 2008 19:35:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32961 invoked by uid 500); 28 Jan 2008 19:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32943 invoked by uid 99); 28 Jan 2008 19:35:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 11:35:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tremerson@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 19:35:16 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1318949wxd.20
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 11:35:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=8rjVQ2BlT1HEW/zVEk+UGb307rqagY9pA1e4E1bd8Ig=;
        b=py3AHDDIjACRIt1ZEHW0CsK2Zr4vkD2rRZnURB8Eun2F2d3XM0uEicCSs3UXns906KV/o3Yw5vI4d5W7xOmLvKIwaAmk5hKdyq2ORnTdZipyfdDrc/b4Nc/aOoM3fT52B8Xc07vui7zOgB1pPGZQNbLq/lJdkuP+K+Q3n7f1BWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ldI2kfgHWT3v/ZrmF0XujHubeo7bwzSlK66bPZVRW+pZn3dNOetNDZvH529zV60Bl9HYAsf7kfTkpzprZo/ub1VnJusCyrNb4cBSzs3cS0WcaHeDZuyk0/EK726UA2vS3wiwtG5+XWFsK9rz1J4xWhjQPJRpL179GPRbacckK9I=
Received: by 10.114.73.1 with SMTP id v1mr3957957waa.16.1201548908273;
        Mon, 28 Jan 2008 11:35:08 -0800 (PST)
Received: by 10.114.205.15 with HTTP; Mon, 28 Jan 2008 11:35:08 -0800 (PST)
Message-ID: <cefddd100801281135x1e0964ebw6fecb1bbe76efe05@mail.gmail.com>
Date: Mon, 28 Jan 2008 14:35:08 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CustomScoreQuery Not Returning Value in Index
In-Reply-To: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15186_18865307.1201548908271"
References: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15186_18865307.1201548908271
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

In the constructor for your DomainCustomScoreQuery try calling

setStrict(true);

after invoking the superclass ctor. I think that will fix the problem you're
seeing.


On Jan 28, 2008 12:34 PM, Briggs <acidbriggs@gmail.com> wrote:

> I am trying to 'muck' with document scores from Lucene.  I have
> certain business rules where I have a field named 'domainScore' within
> my index.  The 'domainScore' value is a float.  What I want to do is
> add this value to the document sub query score from the Lucene search.
>  I have implemented a CustomScoreQuery that receives an instance of a
> FieldScoreQuery which defines the fieldName 'domainScore' and the
> value being type float:
>
> //helper method that creates my query
> final Query query = createQuery("content", criteria);
>
> //create a new instance of my custom score query
> CustomScoreQuery customScoreQuery = new  DomainCustomScoreQuery(query,
>                new FieldScoreQuery("domainScore",
> FieldScoreQuery.Type.FLOAT));
>
>
> //this extends CustomScoreQuery
> public DomainCustomScoreQuery(final Query query, final
> ValueSourceQuery valueSourceQuery) {
>  super(query, valueSourceQuery);
> }
>
>  @Override
> public float customScore(final int doc, final float subQueryScore,
> final float valSrcScore) {
>
>  final float totalScore;
>
>  //shouldn't the valSrcScore be my 'domainScore' value?
>
>   //don't worry about the calculateScore, that is where I do some
> calculations based on the lucene document score and my domainScore
>  totalScore = calculateScore(subQueryScore, valSrcScore);
>
>  return totalScore;
> }
>
>
> So, that seems easy enough.  The issue I have is the valSrcScore is
> not the value of the 'domainScore' I have in the index.  For instance,
> my 'domainScore' field value for the document returned is '15.83'  but
> the 'valSrcScore' passed to the customScore method is '8.614598'.
> What am I missing?  The examples seem easy enough.
>
> Thanks for your time,
>
> Briggs.
>
>
> --
> "Conscious decisions by conscious minds are what make reality real"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree

------=_Part_15186_18865307.1201548908271--

From java-user-return-32246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 19:59:56 2008
Return-Path: <java-user-return-32246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16440 invoked from network); 28 Jan 2008 19:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 19:59:55 -0000
Received: (qmail 78588 invoked by uid 500); 28 Jan 2008 19:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78259 invoked by uid 500); 28 Jan 2008 19:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78248 invoked by uid 99); 28 Jan 2008 19:59:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 11:59:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 19:59:12 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1572499rvb.5
        for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 11:59:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=W7a5NrBggXM3vCbm9QOT55AOt64C76ylPMMb3N1SPWw=;
        b=bWMXjExPXkE/D5fVj5jFh4BtckcxHfOfkj7iZOM8cdeMl3g1uU3LlQj458XoC1HbnFSE8LOydRgThXLlVXyIkCvvFW7BsO6wM0CkPaxzTjxJlhO4eI0Zric4YVEfbThhxdVUNKiv2OFJi80FFQRDjPBhfqLSiuUrcx1UFu/qsEQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nPK6i4q1amgUaYGh8fgViUcJbhVq3Uah+IbHTZv6KK6G4iZgpRD9K+BMPDGIbyQlUnQicTtoEtHM+QGhINPHP29+jUG2aBppFtQUfLeuPdWfhCE9HhLuvyWqtboYWm7vnvb89nq/zJNHJvKo045JvmF6B+jBOS9zCVodj3ioGkc=
Received: by 10.140.171.4 with SMTP id t4mr3721069rve.187.1201550357087;
        Mon, 28 Jan 2008 11:59:17 -0800 (PST)
Received: by 10.141.116.14 with HTTP; Mon, 28 Jan 2008 11:59:16 -0800 (PST)
Message-ID: <1c0e93080801281159h3972526ctdf34b16502ce0cb1@mail.gmail.com>
Date: Mon, 28 Jan 2008 14:59:16 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CustomScoreQuery Not Returning Value in Index
In-Reply-To: <cefddd100801281135x1e0964ebw6fecb1bbe76efe05@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
	 <cefddd100801281135x1e0964ebw6fecb1bbe76efe05@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Cool, that worked, sort of.

The customScore method that is overridden from CustomScoreQuery has a
signature of:

public float customScore(final int doc, final float subQueryScore,
final float valSrcScore);

The javadoc states that the valSrcScore is the value from the field of
my ValueSourceQuery. But, the subQueryScore is actually my domainScore
(6.83) and the valSrcScore (0.06762122)seems to be the the lucene
subQueryScore.

Odd. Though, I know these classe are experimental.  I must have
something odd in there, but can't find it.




On Jan 28, 2008 2:35 PM, Tom Emerson <tremerson@gmail.com> wrote:
> Hi,
>
> In the constructor for your DomainCustomScoreQuery try calling
>
> setStrict(true);
>
> after invoking the superclass ctor. I think that will fix the problem you're
> seeing.
>
>
> On Jan 28, 2008 12:34 PM, Briggs <acidbriggs@gmail.com> wrote:
>
>
> > I am trying to 'muck' with document scores from Lucene.  I have
> > certain business rules where I have a field named 'domainScore' within
> > my index.  The 'domainScore' value is a float.  What I want to do is
> > add this value to the document sub query score from the Lucene search.
> >  I have implemented a CustomScoreQuery that receives an instance of a
> > FieldScoreQuery which defines the fieldName 'domainScore' and the
> > value being type float:
> >
> > //helper method that creates my query
> > final Query query = createQuery("content", criteria);
> >
> > //create a new instance of my custom score query
> > CustomScoreQuery customScoreQuery = new  DomainCustomScoreQuery(query,
> >                new FieldScoreQuery("domainScore",
> > FieldScoreQuery.Type.FLOAT));
> >
> >
> > //this extends CustomScoreQuery
> > public DomainCustomScoreQuery(final Query query, final
> > ValueSourceQuery valueSourceQuery) {
> >  super(query, valueSourceQuery);
> > }
> >
> >  @Override
> > public float customScore(final int doc, final float subQueryScore,
> > final float valSrcScore) {
> >
> >  final float totalScore;
> >
> >  //shouldn't the valSrcScore be my 'domainScore' value?
> >
> >   //don't worry about the calculateScore, that is where I do some
> > calculations based on the lucene document score and my domainScore
> >  totalScore = calculateScore(subQueryScore, valSrcScore);
> >
> >  return totalScore;
> > }
> >
> >
> > So, that seems easy enough.  The issue I have is the valSrcScore is
> > not the value of the 'domainScore' I have in the index.  For instance,
> > my 'domainScore' field value for the document returned is '15.83'  but
> > the 'valSrcScore' passed to the customScore method is '8.614598'.
> > What am I missing?  The examples seem easy enough.
> >
> > Thanks for your time,
> >
> > Briggs.
> >
> >
> > --
> > "Conscious decisions by conscious minds are what make reality real"
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Tom Emerson
> tremerson@gmail.com
> http://www.dreamersrealm.net/~tree
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 21:04:47 2008
Return-Path: <java-user-return-32247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76682 invoked from network); 28 Jan 2008 21:04:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 21:04:47 -0000
Received: (qmail 73861 invoked by uid 500); 28 Jan 2008 21:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73821 invoked by uid 500); 28 Jan 2008 21:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73810 invoked by uid 99); 28 Jan 2008 21:04:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 13:04:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 28 Jan 2008 21:04:16 +0000
Received: (qmail invoked by alias); 28 Jan 2008 21:04:09 -0000
Received: from e178106030.adsl.alicedsl.de (EHLO msrvcn04) [85.178.106.30]
  by mail.gmx.net (mp035) with SMTP; 28 Jan 2008 22:04:09 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/4xZklfFb43aq1+Pu5KR61S9jgy9l5MO36eBchuC
	3Hk95HdA5kzT+G
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04> <B9F8F955D3714390AA27995D98D8A938@msrvcn04> <D6DF4EC2-C06C-44B3-A5F4-3934572A0EA8@apache.org>
Subject: RE: TermVector
Date: Mon, 28 Jan 2008 22:04:11 +0100
Message-ID: <14894225E5964CB6877A1DF03E4F702F@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <D6DF4EC2-C06C-44B3-A5F4-3934572A0EA8@apache.org>
thread-index: AchhxmcHxOhNl8yPRyqPMS+bJKgSWQAKIKVA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Also, search the archives for Term Vector, as you will find 
> discussion  
> of it there.  

Ah I see, I need to cast it to TermPositionVector. OK.

> You may also, eventually, be interested in the new  
> TermVectorMapper capabilities in 2.3 which should help speed up the  
> processing of term vectors by providing a callback mechanism 
> to allow  
> you to load them into data structures that make sense for your  
> application.

Hm.

What I need is are startOffsets of a special term.

I use TermPositionVector#getOffsets(TermPositionVector.indexOf("foo")).

Can TermVectorMapper speed this up?


And how can I find the offsets of something like "foo bar"? I think this
will get tokenized into 2 terms and thus I have no chance to find it, right?


Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 21:39:57 2008
Return-Path: <java-user-return-32248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99466 invoked from network); 28 Jan 2008 21:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 21:39:56 -0000
Received: (qmail 41628 invoked by uid 500); 28 Jan 2008 21:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41604 invoked by uid 500); 28 Jan 2008 21:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41592 invoked by uid 99); 28 Jan 2008 21:39:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 13:39:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 21:39:14 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id AA3BC71C118; Mon, 28 Jan 2008 13:39:20 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9A9AD71C0B4
	for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 13:39:20 -0800 (PST)
Date: Mon, 28 Jan 2008 13:39:20 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: svnversion not found...help!!!
In-Reply-To: <5df7f3ab0801220652v7556b00fgfc77e98a624c1159@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0801281337260.11217@radix.cryptio.net>
References: <5df7f3ab0801220652v7556b00fgfc77e98a624c1159@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: jar-core:
:      [exec] Execute failed: java.io.IOException: Cannot run program
: "svnversion": java.io.IOException: error=2, No such file or directory
:       [jar] Building jar: /home/gen/lucene/lucene-2.2.0/build/lucene-
: core-2.2.0.jar
: default:
: BUILD SUCCESSFUL
: Total time: 6 seconds
: 
: and my jar files are not created...wt to do?

it's an informative message that execing svnversion failed because it 
wasn't found ... but the build itself was successful (ie: the jar file 
should have been created) ... are you certin it didn't work at all

(NOTE: it looks like grant opened LUCENE-1159 to try and make the message 
more clear)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 28 22:07:03 2008
Return-Path: <java-user-return-32249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16294 invoked from network); 28 Jan 2008 22:07:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2008 22:07:03 -0000
Received: (qmail 82991 invoked by uid 500); 28 Jan 2008 22:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82953 invoked by uid 500); 28 Jan 2008 22:06:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82942 invoked by uid 99); 28 Jan 2008 22:06:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 14:06:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 22:06:21 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7AD4671C1E8; Mon, 28 Jan 2008 14:06:28 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7708D71C15B
	for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 14:06:28 -0800 (PST)
Date: Mon, 28 Jan 2008 14:06:28 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and Multiple Threads
In-Reply-To: <1bcb7c7f0801280004y572d8a9fs568d165c39e849eb@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0801281403370.14363@radix.cryptio.net>
References: <1bcb7c7f0801280004y572d8a9fs568d165c39e849eb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is IndexSearcher ThreadSafe? I made a simple httpserver using grizzly as
	...
: java.lang.NullPointerException
:     at org.apache.lucene.queryParser.QueryParser.jj_scan_token(
	...
: This error does not happen if I do searches one at a time.

IndedSearcher is thread safe, QueryParser is not.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 01:46:25 2008
Return-Path: <java-user-return-32250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10408 invoked from network); 29 Jan 2008 01:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 01:46:24 -0000
Received: (qmail 24228 invoked by uid 500); 29 Jan 2008 01:46:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24190 invoked by uid 500); 29 Jan 2008 01:46:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24179 invoked by uid 99); 29 Jan 2008 01:46:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 17:46:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 01:45:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id 8E0AE10B035
	for <java-user@lucene.apache.org>; Mon, 28 Jan 2008 17:45:46 -0800 (PST)
Message-Id: <49C9DBAA-FA11-48EC-88C9-FADEA3827238@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <14894225E5964CB6877A1DF03E4F702F@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: TermVector
Date: Mon, 28 Jan 2008 20:45:45 -0500
References: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04> <B9F8F955D3714390AA27995D98D8A938@msrvcn04> <D6DF4EC2-C06C-44B3-A5F4-3934572A0EA8@apache.org> <14894225E5964CB6877A1DF03E4F702F@msrvcn04>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 28, 2008, at 4:04 PM, <spring@gmx.eu> <spring@gmx.eu> wrote:

>> Also, search the archives for Term Vector, as you will find
>> discussion
>> of it there.
>
> Ah I see, I need to cast it to TermPositionVector. OK.

yep

>
>
>> You may also, eventually, be interested in the new
>> TermVectorMapper capabilities in 2.3 which should help speed up the
>> processing of term vectors by providing a callback mechanism
>> to allow
>> you to load them into data structures that make sense for your
>> application.
>
> Hm.
>
> What I need is are startOffsets of a special term.
>
> I use  
> TermPositionVector#getOffsets(TermPositionVector.indexOf("foo")).
>
> Can TermVectorMapper speed this up?
>
>
> And how can I find the offsets of something like "foo bar"? I think  
> this
> will get tokenized into 2 terms and thus I have no chance to find  
> it, right?

I wouldn't say no chance...  TermVectorMapper would be good for this,  
as you can watch the terms as they are being loaded.  Just keep track  
of your last term and see if it is "foo", when you hit "bar"

What kind of special term are you looking for?  There may be other  
ways of solving your problem...

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 02:34:47 2008
Return-Path: <java-user-return-32251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30237 invoked from network); 29 Jan 2008 02:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 02:34:47 -0000
Received: (qmail 54651 invoked by uid 500); 29 Jan 2008 02:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54611 invoked by uid 500); 29 Jan 2008 02:34:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54600 invoked by uid 99); 29 Jan 2008 02:34:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 18:34:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 02:34:05 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 0DE784A8136
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 13:33:02 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text
Date: Tue, 29 Jan 2008 13:32:08 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu> <47699a8d0801241846i406b1256i62b9b81a87ea5534@mail.gmail.com> <200801250926.44456.paul.elschot@xs4all.nl>
In-Reply-To: <200801250926.44456.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801291332.08316.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 25 January 2008 19:26:44 Paul Elschot wrote:
> There is no way to do exact phrase matching on OCR data, because no
> correction of OCR data will be perfect. Otherwise the OCR would have made
> the correction...
> <snip suggestion to use fuzzy query>

The problem I see with a fuzzy query is that if you have the fuzziness set to 
1, then "fat" will match "mat".  But in reality, "f" and "m" don't get 
confused with OCR.

What you really want is for a given term to expand to a boolean query of all 
possible misidentified alternatives.  For that you would first need to figure 
out which characters are often misidentified as others, which can probably be 
achieved by going over a certain number of documents and manually checking 
which letters are wrong.

This should provide slightly more comprehensive matching without matching 
terms which are obviously different to the naked eye.

What would be ideal is if an analyser could do this job (a "looks like" 
analyser, like how SoundEx is a "sounds like" analyser.)  But I get the 
feeling that this would be very difficult.  Shame the OCR software can't 
store this information, e.g. "80% odds that this character is a t but 20% 
odds that it's an f."  If you had that for every character it would be very 
useful...

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 07:24:05 2008
Return-Path: <java-user-return-32252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74059 invoked from network); 29 Jan 2008 07:24:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 07:24:04 -0000
Received: (qmail 15761 invoked by uid 500); 29 Jan 2008 07:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15730 invoked by uid 500); 29 Jan 2008 07:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15719 invoked by uid 99); 29 Jan 2008 07:23:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jan 2008 23:23:49 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 07:23:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JJkoZ-0004ih-NT
	for java-user@lucene.apache.org; Mon, 28 Jan 2008 23:23:27 -0800
Message-ID: <15153692.post@talk.nabble.com>
Date: Mon, 28 Jan 2008 23:23:27 -0800 (PST)
From: Sure <suresh.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Some Help needed in search.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: suresh.lucene@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
We are having an index with the fields, HEADING and WRITER.
HEADING is having the high boost factor and WRITER is having a low boost.

Let the data is as follows:

HEADING                                          WRITER

Sachin Tendulkar scored century           XYZ
Australia won the series                      Sachin Tendulkar

Here if we search for "Sachin Tendulkar" in the index, as HEADING is having
high boost, that will be displayed first. But here we want to display the
document with WRITER as "Sachin Tendulkar", if it exact match. If we search
for the word "Sachin", what is working now should remain.

How can we do this?

Regards,
Suresh N.
-- 
View this message in context: http://www.nabble.com/Some-Help-needed-in-search.-tp15153692p15153692.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 08:01:34 2008
Return-Path: <java-user-return-32253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85655 invoked from network); 29 Jan 2008 08:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 08:01:34 -0000
Received: (qmail 52429 invoked by uid 500); 29 Jan 2008 08:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52402 invoked by uid 500); 29 Jan 2008 08:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52391 invoked by uid 99); 29 Jan 2008 08:01:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 00:01:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 08:00:51 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0T80udl092965
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 09:00:56 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene to index OCR text
Date: Tue, 29 Jan 2008 09:00:56 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <005201c85ef3$a5207210$970fda80@libraria.ucsf.edu> <200801250926.44456.paul.elschot@xs4all.nl> <200801291332.08316.daniel@nuix.com>
In-Reply-To: <200801291332.08316.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801290900.56415.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Tuesday 29 January 2008 03:32:08 schreef Daniel Noll:
> On Friday 25 January 2008 19:26:44 Paul Elschot wrote:
> > There is no way to do exact phrase matching on OCR data, because no
> > correction of OCR data will be perfect. Otherwise the OCR would have made
> > the correction...
> > <snip suggestion to use fuzzy query>
> 
> The problem I see with a fuzzy query is that if you have the fuzziness set to 
> 1, then "fat" will match "mat".  But in reality, "f" and "m" don't get 
> confused with OCR.
> 
> What you really want is for a given term to expand to a boolean query of all 
> possible misidentified alternatives.  For that you would first need to figure 
> out which characters are often misidentified as others, which can probably be 
> achieved by going over a certain number of documents and manually checking 
> which letters are wrong.
> 
> This should provide slightly more comprehensive matching without matching 
> terms which are obviously different to the naked eye.

It's also possible to select the fuzzy terms by their document frequency, and
reject all that have a ((quite) a bit) higher doc frequency than the given term.

Combined with a query proximity to another similarly queried term this can
work reasonably well. For query search performance selecting only low
frequency terms is nice, as it avoids searching for high frequency terms.

Btw, this use of a worse spelling is more or less the opposite of suggesting
a better spelling from terms with a higher doc frequency.

> 
> What would be ideal is if an analyser could do this job (a "looks like" 
> analyser, like how SoundEx is a "sounds like" analyser.)  But I get the 
> feeling that this would be very difficult.  Shame the OCR software can't 
> store this information, e.g. "80% odds that this character is a t but 20% 
> odds that it's an f."  If you had that for every character it would be very 
> useful...

Ah yes, the ideal world. Is there OCR software that provides such details?

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 09:51:00 2008
Return-Path: <java-user-return-32254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22969 invoked from network); 29 Jan 2008 09:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 09:51:00 -0000
Received: (qmail 82474 invoked by uid 500); 29 Jan 2008 09:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82437 invoked by uid 500); 29 Jan 2008 09:50:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82426 invoked by uid 99); 29 Jan 2008 09:50:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 01:50:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.221] (HELO web26010.mail.ukl.yahoo.com) (217.12.10.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Jan 2008 09:50:30 +0000
Received: (qmail 55326 invoked by uid 60001); 29 Jan 2008 09:50:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Eqat12GkYNzzMRTcafAeFYNhANdwVLUT2BWiSAjklhmztSWx8UX4YdlmP6UH6XV9JLm0LuzJpMUPyXpbe0SxSIp67HTsfzU1Oa7qreJVPtSa79IBF0/7DJuMi/eyfVt7akoejkAafRz2dIBlIp8Yg4IfLMPwreHBgIGpY+KQ3GM=;
X-YMail-OSG: Kq8U3JEVM1mpKL4WfLJ0v8tLaV6BSBEm9eJLr6dGIBwNIZ5grdfINtqjZaXEGQaNKw--
Received: from [193.36.230.96] by web26010.mail.ukl.yahoo.com via HTTP; Tue, 29 Jan 2008 09:50:20 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Tue, 29 Jan 2008 09:50:20 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Lucene to index OCR text
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <964143.54302.qm@web26010.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You could take try take a  large corpus of the text (say Wikipedia) and use=
 it to inform the likelihood of word sequences. Take the OCR output and pro=
duce fuzzy spelling variations for each word in a window of text (say 5 or =
6 words) and then examine the likelihood of the different permutations usin=
g the corpus. That's a lot of combinations, edit distance calculations and =
a lot of SpanQueries so performance will suffer but accuracy is likely to b=
e better than anything based on single word analysis. As mentioned before, =
if a "confidence level" was available from the OCR software then that would=
 avoid a lot of unnecessary lookups or potential replacement of correctly O=
CRed words with alternative words deemed to be statistically more likely.=
=0A=0ACheers=0AMark=0A=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: Pa=
ul Elschot <paul.elschot@xs4all.nl>=0ATo: java-user@lucene.apache.org=0ASen=
t: Tuesday, 29 January, 2008 8:00:56 AM=0ASubject: Re: Lucene to index OCR =
text=0A=0AOp =0ATuesday =0A29 =0AJanuary =0A2008 =0A03:32:08 =0Aschreef =0A=
Daniel =0ANoll:=0A> =0AOn =0AFriday =0A25 =0AJanuary =0A2008 =0A19:26:44 =
=0APaul =0AElschot =0Awrote:=0A> =0A> =0AThere =0Ais =0Ano =0Away =0Ato =0A=
do =0Aexact =0Aphrase =0Amatching =0Aon =0AOCR =0Adata, =0Abecause =0Ano=0A=
> =0A> =0Acorrection =0Aof =0AOCR =0Adata =0Awill =0Abe =0Aperfect. =0AOthe=
rwise =0Athe =0AOCR =0Awould =0Ahave =0Amade=0A> =0A> =0Athe =0Acorrection.=
..=0A> =0A> =0A<snip =0Asuggestion =0Ato =0Ause =0Afuzzy =0Aquery>=0A> =0A>=
 =0AThe =0Aproblem =0AI =0Asee =0Awith =0Aa =0Afuzzy =0Aquery =0Ais =0Athat=
 =0Aif =0Ayou =0Ahave =0Athe =0Afuzziness =0Aset =0Ato =0A> =0A1, =0Athen =
=0A"fat" =0Awill =0Amatch =0A"mat".  =0ABut =0Ain =0Areality, =0A"f" =0Aand=
 =0A"m" =0Adon't =0Aget =0A> =0Aconfused =0Awith =0AOCR.=0A> =0A> =0AWhat =
=0Ayou =0Areally =0Awant =0Ais =0Afor =0Aa =0Agiven =0Aterm =0Ato =0Aexpand=
 =0Ato =0Aa =0Aboolean =0Aquery =0Aof =0Aall =0A> =0Apossible =0Amisidentif=
ied =0Aalternatives.  =0AFor =0Athat =0Ayou =0Awould =0Afirst =0Aneed =0Ato=
 =0Afigure =0A> =0Aout =0Awhich =0Acharacters =0Aare =0Aoften =0Amisidentif=
ied =0Aas =0Aothers, =0Awhich =0Acan =0Aprobably =0Abe =0A> =0Aachieved =0A=
by =0Agoing =0Aover =0Aa =0Acertain =0Anumber =0Aof =0Adocuments =0Aand =0A=
manually =0Achecking =0A> =0Awhich =0Aletters =0Aare =0Awrong.=0A> =0A> =0A=
This =0Ashould =0Aprovide =0Aslightly =0Amore =0Acomprehensive =0Amatching =
=0Awithout =0Amatching =0A> =0Aterms =0Awhich =0Aare =0Aobviously =0Adiffer=
ent =0Ato =0Athe =0Anaked =0Aeye.=0A=0AIt's =0Aalso =0Apossible =0Ato =0Ase=
lect =0Athe =0Afuzzy =0Aterms =0Aby =0Atheir =0Adocument =0Afrequency, =0Aa=
nd=0Areject =0Aall =0Athat =0Ahave =0Aa =0A((quite) =0Aa =0Abit) =0Ahigher =
=0Adoc =0Afrequency =0Athan =0Athe =0Agiven =0Aterm.=0A=0ACombined =0Awith =
=0Aa =0Aquery =0Aproximity =0Ato =0Aanother =0Asimilarly =0Aqueried =0Aterm=
 =0Athis =0Acan=0Awork =0Areasonably =0Awell. =0AFor =0Aquery =0Asearch =0A=
performance =0Aselecting =0Aonly =0Alow=0Afrequency =0Aterms =0Ais =0Anice,=
 =0Aas =0Ait =0Aavoids =0Asearching =0Afor =0Ahigh =0Afrequency =0Aterms.=
=0A=0ABtw, =0Athis =0Ause =0Aof =0Aa =0Aworse =0Aspelling =0Ais =0Amore =0A=
or =0Aless =0Athe =0Aopposite =0Aof =0Asuggesting=0Aa =0Abetter =0Aspelling=
 =0Afrom =0Aterms =0Awith =0Aa =0Ahigher =0Adoc =0Afrequency.=0A=0A> =0A> =
=0AWhat =0Awould =0Abe =0Aideal =0Ais =0Aif =0Aan =0Aanalyser =0Acould =0Ad=
o =0Athis =0Ajob =0A(a =0A"looks =0Alike" =0A> =0Aanalyser, =0Alike =0Ahow =
=0ASoundEx =0Ais =0Aa =0A"sounds =0Alike" =0Aanalyser.)  =0ABut =0AI =0Aget=
 =0Athe =0A> =0Afeeling =0Athat =0Athis =0Awould =0Abe =0Avery =0Adifficult=
.  =0AShame =0Athe =0AOCR =0Asoftware =0Acan't =0A> =0Astore =0Athis =0Ainf=
ormation, =0Ae.g. =0A"80% =0Aodds =0Athat =0Athis =0Acharacter =0Ais =0Aa =
=0At =0Abut =0A20% =0A> =0Aodds =0Athat =0Ait's =0Aan =0Af."  =0AIf =0Ayou =
=0Ahad =0Athat =0Afor =0Aevery =0Acharacter =0Ait =0Awould =0Abe =0Avery =
=0A> =0Auseful...=0A=0AAh =0Ayes, =0Athe =0Aideal =0Aworld. =0AIs =0Athere =
=0AOCR =0Asoftware =0Athat =0Aprovides =0Asuch =0Adetails?=0A=0ARegards,=0A=
Paul =0AElschot=0A=0A------------------------------------------------------=
---------------=0ATo =0Aunsubscribe, =0Ae-mail: =0Ajava-user-unsubscribe@lu=
cene.apache.org=0AFor =0Aadditional =0Acommands, =0Ae-mail: =0Ajava-user-he=
lp@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      ____________________________=
______________________________=0ASent from Yahoo! Mail - a smarter inbox ht=
tp://uk.mail.yahoo.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 10:43:34 2008
Return-Path: <java-user-return-32255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47526 invoked from network); 29 Jan 2008 10:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 10:43:34 -0000
Received: (qmail 78638 invoked by uid 500); 29 Jan 2008 10:43:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78599 invoked by uid 500); 29 Jan 2008 10:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78584 invoked by uid 99); 29 Jan 2008 10:43:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 02:43:18 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 10:42:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JJnvd-0003Hx-21
	for java-user@lucene.apache.org; Tue, 29 Jan 2008 02:42:57 -0800
Message-ID: <15156768.post@talk.nabble.com>
Date: Tue, 29 Jan 2008 02:42:57 -0800 (PST)
From: christophe blin <cblin@tennaxia.com>
To: java-user@lucene.apache.org
Subject: Apostrophe filtering in StandardFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cblin@tennaxia.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I see a lots of thread about apostrophe not being considered a separator and
I see lots of french people complaining about that (I also complain since I
am french ;) ).

My question is "what is the status of http://tinyurl.com/ynskw3 ?"

I think the patch given in this thread will work for english and french
without disturbing the filtering of english words such as O'Reilly since it
only cares about "m', t', s', n', l', d'" as the first letters which I think
is not going to happen in any english construction.

so what is planned :
 1. having a FrenchStandardFilter and an EnglishStandardFilter and removing
StandardFilter
 2. include that in the StandardFilter
 3. having a EuropeanStandardFilter (with the most common rules of english,
french, german, spanish, italian, ...)
 3. doing nothing

Personnaly, I'd like a EuropeanStandardFilter (i.e the 3rd point) which will
handle most of the cases as I often find myself indexing french and english
documents (as well as some spanish and italian) and I do not care losing
some terms (for example, if the document was english but a word as been lost
because of a very common italian rule).

Thanks for the time you will spend answering my question

chris
-- 
View this message in context: http://www.nabble.com/Apostrophe-filtering-in-StandardFilter-tp15156768p15156768.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 12:17:54 2008
Return-Path: <java-user-return-32256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77867 invoked from network); 29 Jan 2008 12:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 12:17:54 -0000
Received: (qmail 98575 invoked by uid 500); 29 Jan 2008 12:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98547 invoked by uid 500); 29 Jan 2008 12:17:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98536 invoked by uid 99); 29 Jan 2008 12:17:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 04:17:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Jan 2008 12:17:09 +0000
Received: (qmail invoked by alias); 29 Jan 2008 12:17:14 -0000
Received: from e178104069.adsl.alicedsl.de (EHLO msrvcn04) [85.178.104.69]
  by mail.gmx.net (mp056) with SMTP; 29 Jan 2008 13:17:14 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX181nugaMWE1epwzg6u5P8WjsOs1AvS+Qf8wNcHbhL
	wlVCe5+EDc+A+B
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04> <B9F8F955D3714390AA27995D98D8A938@msrvcn04> <D6DF4EC2-C06C-44B3-A5F4-3934572A0EA8@apache.org> <14894225E5964CB6877A1DF03E4F702F@msrvcn04> <49C9DBAA-FA11-48EC-88C9-FADEA3827238@apache.org>
Subject: RE: TermVector
Date: Tue, 29 Jan 2008 13:17:15 +0100
Message-ID: <6E1207EDDE434A50A189034171DA57E5@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <49C9DBAA-FA11-48EC-88C9-FADEA3827238@apache.org>
thread-index: AchiGMCYrjI2LSJVRBuuJseg9069hAAV5tsw
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> > And how can I find the offsets of something like "foo bar"? 
> I think  
> > this
> > will get tokenized into 2 terms and thus I have no chance to find  
> > it, right?
> 
> I wouldn't say no chance...  TermVectorMapper would be good 
> for this,  
> as you can watch the terms as they are being loaded.  Just 
> keep track  
> of your last term and see if it is "foo", when you hit "bar"
> 
> What kind of special term are you looking for?  There may be other  
> ways of solving your problem...

Well. I do not only want to find documents with a certain phrase but the
positions of these phrases (e.g. "foo bar") in the document too.
It must be possible I think because a highlighter can do it? 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 12:45:26 2008
Return-Path: <java-user-return-32257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92535 invoked from network); 29 Jan 2008 12:45:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 12:45:26 -0000
Received: (qmail 47680 invoked by uid 500); 29 Jan 2008 12:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47641 invoked by uid 500); 29 Jan 2008 12:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47630 invoked by uid 99); 29 Jan 2008 12:45:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 04:45:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 12:44:56 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id EA25215D4F6
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 04:44:47 -0800 (PST)
Message-Id: <0EF065B3-9803-451D-A671-60DE1F5510C1@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <6E1207EDDE434A50A189034171DA57E5@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: TermVector
Date: Tue, 29 Jan 2008 07:44:46 -0500
References: <6C5BD8C084334AF1A9480E90BBEE80D2@msrvcn04> <B9F8F955D3714390AA27995D98D8A938@msrvcn04> <D6DF4EC2-C06C-44B3-A5F4-3934572A0EA8@apache.org> <14894225E5964CB6877A1DF03E4F702F@msrvcn04> <49C9DBAA-FA11-48EC-88C9-FADEA3827238@apache.org> <6E1207EDDE434A50A189034171DA57E5@msrvcn04>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the SpanQuery, specifically the SpanNearQuery.  The  
getSpans() method will return a Spans object, which you can use to  
access the positions.

-Grant

On Jan 29, 2008, at 7:17 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:

>>> And how can I find the offsets of something like "foo bar"?
>> I think
>>> this
>>> will get tokenized into 2 terms and thus I have no chance to find
>>> it, right?
>>
>> I wouldn't say no chance...  TermVectorMapper would be good
>> for this,
>> as you can watch the terms as they are being loaded.  Just
>> keep track
>> of your last term and see if it is "foo", when you hit "bar"
>>
>> What kind of special term are you looking for?  There may be other
>> ways of solving your problem...
>
> Well. I do not only want to find documents with a certain phrase but  
> the
> positions of these phrases (e.g. "foo bar") in the document too.
> It must be possible I think because a highlighter can do it?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 13:21:38 2008
Return-Path: <java-user-return-32258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4876 invoked from network); 29 Jan 2008 13:21:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 13:21:38 -0000
Received: (qmail 99438 invoked by uid 500); 29 Jan 2008 13:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98900 invoked by uid 500); 29 Jan 2008 13:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98889 invoked by uid 99); 29 Jan 2008 13:21:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 05:21:22 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 13:21:07 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Apostrophe filtering in StandardFilter
Date: Tue, 29 Jan 2008 08:20:15 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB60B@SUEXCL-02.ad.syr.edu>
In-Reply-To: <15156768.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Apostrophe filtering in StandardFilter
Thread-Index: AchiY82JiIhuMZgfQAGQQnve6FbQIgAE6N3A
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,

Looks like the ElisionFilter handles the French problems you mentioned:

<http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/analysis/fr/El=
isionFilter.html>

See the code for the list of /X'/ constructions it handles:

<http://svn.apache.org/viewvc/lucene/java/trunk/contrib/analyzers/src/jav=
a/org/apache/lucene/analysis/fr/ElisionFilter.java?revision=3D552111&view=
=3Dmarkup>

You may also be interested in the French stopword list in the =
FrenchAnalyzer in the same contrib package: o.a.l.analysis.fr .

On 01/29/2008 at 5:42 AM, christophe blin wrote:
>  3. having a EuropeanStandardFilter (with the most common
> rules of english, french, german, spanish, italian, ...)

This sounds really ambitious, but interesting - have you considered =
doing this?

You asked about "what is planned" -- I'm afraid the plan is something =
like "enlightened self interest": if you want it to happen, you do the =
work yourself, or you find a way to encourage others to do so (e.g., =
give them money :) ).  But that's not really so bad - in the end, what =
gets done are the ideas that people care enough about to turn them into =
reality.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 14:02:13 2008
Return-Path: <java-user-return-32259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22961 invoked from network); 29 Jan 2008 14:02:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 14:02:13 -0000
Received: (qmail 76911 invoked by uid 500); 29 Jan 2008 14:01:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76887 invoked by uid 500); 29 Jan 2008 14:01:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76876 invoked by uid 99); 29 Jan 2008 14:01:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 06:01:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 14:01:29 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1865870rvb.5
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 06:01:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=tSoKo1/wGH1PJFxlfQ0ROQbDqkEOqwHzhv0vMeACMac=;
        b=kJrk1ErJncFRsl75HTKHqeCtjZoQK6fF0nwCZGI3E3X+RthUxgc9AE0cirHstme5xS4PVEtluLNlYrsIqk0n9CfRrjoEewpR5RGFti+wWhY2rH+xyTG6V5aZprQMgfWz8fl0GzB3OChpwZqg9lkr9pAfo7fEYJ5JxAkbYWMkJTI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QVSHD6O5mxWIKYh2ZhoFKLqJYo9dzSPSKKnJAWRpt8SRzKNV5KGhxylRztRUkZNoETrngYCO+O+hW8kacFntj+qDYuaDOAS+4rpfr2o76PEQmHhy9hcFLAb7+VOFIzcxegHheLlh4dho3OOBtTbmH6tqwZEM6uh7CqdRhy3wPxU=
Received: by 10.141.22.1 with SMTP id z1mr4401887rvi.67.1201615295890;
        Tue, 29 Jan 2008 06:01:35 -0800 (PST)
Received: by 10.141.116.14 with HTTP; Tue, 29 Jan 2008 06:01:36 -0800 (PST)
Message-ID: <1c0e93080801290601v6d107b79k655ef8e3be12065@mail.gmail.com>
Date: Tue, 29 Jan 2008 09:01:36 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CustomScoreQuery Not Returning Value in Index
In-Reply-To: <1c0e93080801281159h3972526ctdf34b16502ce0cb1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
	 <cefddd100801281135x1e0964ebw6fecb1bbe76efe05@mail.gmail.com>
	 <1c0e93080801281159h3972526ctdf34b16502ce0cb1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

BTW, just wanted to say thanks again. It's working now.  I still don't
know how the values were reversed.  I believe I must have had a bug in
the code, but it wasn't visible to me.  I think netbeans did an
'install' with maven and put some bad code in the respository
directory and the test case was reading from there.

Anyway, thanks!  Now on to figuring out these "Explanation" classes.

On Jan 28, 2008 2:59 PM, Briggs <acidbriggs@gmail.com> wrote:
> Cool, that worked, sort of.
>
> The customScore method that is overridden from CustomScoreQuery has a
> signature of:
>
> public float customScore(final int doc, final float subQueryScore,
> final float valSrcScore);
>
> The javadoc states that the valSrcScore is the value from the field of
> my ValueSourceQuery. But, the subQueryScore is actually my domainScore
> (6.83) and the valSrcScore (0.06762122)seems to be the the lucene
> subQueryScore.
>
> Odd. Though, I know these classe are experimental.  I must have
> something odd in there, but can't find it.
>
>
>
>
>
> On Jan 28, 2008 2:35 PM, Tom Emerson <tremerson@gmail.com> wrote:
> > Hi,
> >
> > In the constructor for your DomainCustomScoreQuery try calling
> >
> > setStrict(true);
> >
> > after invoking the superclass ctor. I think that will fix the problem you're
> > seeing.
> >
> >
> > On Jan 28, 2008 12:34 PM, Briggs <acidbriggs@gmail.com> wrote:
> >
> >
> > > I am trying to 'muck' with document scores from Lucene.  I have
> > > certain business rules where I have a field named 'domainScore' within
> > > my index.  The 'domainScore' value is a float.  What I want to do is
> > > add this value to the document sub query score from the Lucene search.
> > >  I have implemented a CustomScoreQuery that receives an instance of a
> > > FieldScoreQuery which defines the fieldName 'domainScore' and the
> > > value being type float:
> > >
> > > //helper method that creates my query
> > > final Query query = createQuery("content", criteria);
> > >
> > > //create a new instance of my custom score query
> > > CustomScoreQuery customScoreQuery = new  DomainCustomScoreQuery(query,
> > >                new FieldScoreQuery("domainScore",
> > > FieldScoreQuery.Type.FLOAT));
> > >
> > >
> > > //this extends CustomScoreQuery
> > > public DomainCustomScoreQuery(final Query query, final
> > > ValueSourceQuery valueSourceQuery) {
> > >  super(query, valueSourceQuery);
> > > }
> > >
> > >  @Override
> > > public float customScore(final int doc, final float subQueryScore,
> > > final float valSrcScore) {
> > >
> > >  final float totalScore;
> > >
> > >  //shouldn't the valSrcScore be my 'domainScore' value?
> > >
> > >   //don't worry about the calculateScore, that is where I do some
> > > calculations based on the lucene document score and my domainScore
> > >  totalScore = calculateScore(subQueryScore, valSrcScore);
> > >
> > >  return totalScore;
> > > }
> > >
> > >
> > > So, that seems easy enough.  The issue I have is the valSrcScore is
> > > not the value of the 'domainScore' I have in the index.  For instance,
> > > my 'domainScore' field value for the document returned is '15.83'  but
> > > the 'valSrcScore' passed to the customScore method is '8.614598'.
> > > What am I missing?  The examples seem easy enough.
> > >
> > > Thanks for your time,
> > >
> > > Briggs.
> > >
> > >
> > > --
> > > "Conscious decisions by conscious minds are what make reality real"
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Tom Emerson
> > tremerson@gmail.com
> > http://www.dreamersrealm.net/~tree
> >
>
>
>
> --
>
> "Conscious decisions by conscious minds are what make reality real"
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 14:02:43 2008
Return-Path: <java-user-return-32260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23185 invoked from network); 29 Jan 2008 14:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 14:02:43 -0000
Received: (qmail 79304 invoked by uid 500); 29 Jan 2008 14:02:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79276 invoked by uid 500); 29 Jan 2008 14:02:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79265 invoked by uid 99); 29 Jan 2008 14:02:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 06:02:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 14:02:13 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1865983rvb.5
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 06:02:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=7MJbtue5lZ9fNz2SCdFEEGwV6ENVzTrOeCHnRH2izhA=;
        b=A2YE5UScvFFyKehQ4nn7J2hKl8uO8nyPgKbTx/MA/HdQwBV/txeEgDZIF5tIfaDJv7nk6blPGevzkupbQk8YfaMmvY2aOc45+UCZkkiUrUz8PGrpc13XEuA+C0jmnu5tMeJHQJcZEbN7BgnWZ9z5/7IbFOgTkoqZrxX7SZxy+dk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=haOQ8/n/io1WFlwK54nskcH0a9C9dylnHws54SnVqc4Il7Mx1TIa3t0XOZrJzl8VazvzfaGZcleBJJdgOToZcTIm31oSy4qWYWQ3RPyeiz+zMFXs6DD51wtmS07xeLMbV28amhorDy5Y7Vc/bI8dVUB4gM+F5mAitaRwxf6/jVo=
Received: by 10.140.125.21 with SMTP id x21mr4387086rvc.234.1201615323390;
        Tue, 29 Jan 2008 06:02:03 -0800 (PST)
Received: by 10.141.116.14 with HTTP; Tue, 29 Jan 2008 06:02:03 -0800 (PST)
Message-ID: <1c0e93080801290602k41edb65dt63fc1f55924ae9f5@mail.gmail.com>
Date: Tue, 29 Jan 2008 09:02:03 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: CustomScoreQuery Not Returning Value in Index
In-Reply-To: <1c0e93080801290601v6d107b79k655ef8e3be12065@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1c0e93080801280934k209fb8f8p946e811ef4188d7e@mail.gmail.com>
	 <cefddd100801281135x1e0964ebw6fecb1bbe76efe05@mail.gmail.com>
	 <1c0e93080801281159h3972526ctdf34b16502ce0cb1@mail.gmail.com>
	 <1c0e93080801290601v6d107b79k655ef8e3be12065@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Repository.  Heh.

On Jan 29, 2008 9:01 AM, Briggs <acidbriggs@gmail.com> wrote:
> BTW, just wanted to say thanks again. It's working now.  I still don't
> know how the values were reversed.  I believe I must have had a bug in
> the code, but it wasn't visible to me.  I think netbeans did an
> 'install' with maven and put some bad code in the respository
> directory and the test case was reading from there.
>
> Anyway, thanks!  Now on to figuring out these "Explanation" classes.
>
>
> On Jan 28, 2008 2:59 PM, Briggs <acidbriggs@gmail.com> wrote:
> > Cool, that worked, sort of.
> >
> > The customScore method that is overridden from CustomScoreQuery has a
> > signature of:
> >
> > public float customScore(final int doc, final float subQueryScore,
> > final float valSrcScore);
> >
> > The javadoc states that the valSrcScore is the value from the field of
> > my ValueSourceQuery. But, the subQueryScore is actually my domainScore
> > (6.83) and the valSrcScore (0.06762122)seems to be the the lucene
> > subQueryScore.
> >
> > Odd. Though, I know these classe are experimental.  I must have
> > something odd in there, but can't find it.
> >
> >
> >
> >
> >
> > On Jan 28, 2008 2:35 PM, Tom Emerson <tremerson@gmail.com> wrote:
> > > Hi,
> > >
> > > In the constructor for your DomainCustomScoreQuery try calling
> > >
> > > setStrict(true);
> > >
> > > after invoking the superclass ctor. I think that will fix the problem you're
> > > seeing.
> > >
> > >
> > > On Jan 28, 2008 12:34 PM, Briggs <acidbriggs@gmail.com> wrote:
> > >
> > >
> > > > I am trying to 'muck' with document scores from Lucene.  I have
> > > > certain business rules where I have a field named 'domainScore' within
> > > > my index.  The 'domainScore' value is a float.  What I want to do is
> > > > add this value to the document sub query score from the Lucene search.
> > > >  I have implemented a CustomScoreQuery that receives an instance of a
> > > > FieldScoreQuery which defines the fieldName 'domainScore' and the
> > > > value being type float:
> > > >
> > > > //helper method that creates my query
> > > > final Query query = createQuery("content", criteria);
> > > >
> > > > //create a new instance of my custom score query
> > > > CustomScoreQuery customScoreQuery = new  DomainCustomScoreQuery(query,
> > > >                new FieldScoreQuery("domainScore",
> > > > FieldScoreQuery.Type.FLOAT));
> > > >
> > > >
> > > > //this extends CustomScoreQuery
> > > > public DomainCustomScoreQuery(final Query query, final
> > > > ValueSourceQuery valueSourceQuery) {
> > > >  super(query, valueSourceQuery);
> > > > }
> > > >
> > > >  @Override
> > > > public float customScore(final int doc, final float subQueryScore,
> > > > final float valSrcScore) {
> > > >
> > > >  final float totalScore;
> > > >
> > > >  //shouldn't the valSrcScore be my 'domainScore' value?
> > > >
> > > >   //don't worry about the calculateScore, that is where I do some
> > > > calculations based on the lucene document score and my domainScore
> > > >  totalScore = calculateScore(subQueryScore, valSrcScore);
> > > >
> > > >  return totalScore;
> > > > }
> > > >
> > > >
> > > > So, that seems easy enough.  The issue I have is the valSrcScore is
> > > > not the value of the 'domainScore' I have in the index.  For instance,
> > > > my 'domainScore' field value for the document returned is '15.83'  but
> > > > the 'valSrcScore' passed to the customScore method is '8.614598'.
> > > > What am I missing?  The examples seem easy enough.
> > > >
> > > > Thanks for your time,
> > > >
> > > > Briggs.
> > > >
> > > >
> > > > --
> > > > "Conscious decisions by conscious minds are what make reality real"
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Tom Emerson
> > > tremerson@gmail.com
> > > http://www.dreamersrealm.net/~tree
> > >
> >
> >
> >
> > --
> >
> > "Conscious decisions by conscious minds are what make reality real"
> >
>
>
>
> --
>
> "Conscious decisions by conscious minds are what make reality real"
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 14:30:19 2008
Return-Path: <java-user-return-32261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33110 invoked from network); 29 Jan 2008 14:30:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 14:30:18 -0000
Received: (qmail 38495 invoked by uid 500); 29 Jan 2008 14:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38456 invoked by uid 500); 29 Jan 2008 14:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38445 invoked by uid 99); 29 Jan 2008 14:30:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 06:30:03 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 14:29:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JJrT4-0003HO-BX
	for java-user@lucene.apache.org; Tue, 29 Jan 2008 06:29:42 -0800
Message-ID: <15160200.post@talk.nabble.com>
Date: Tue, 29 Jan 2008 06:29:42 -0800 (PST)
From: christophe blin <cblin@tennaxia.com>
To: java-user@lucene.apache.org
Subject: RE: Apostrophe filtering in StandardFilter
In-Reply-To: <9294E20AED46934EA459020706463F947EB60B@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cblin@tennaxia.com
References: <15156768.post@talk.nabble.com> <9294E20AED46934EA459020706463F947EB60B@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

thanks for the pointer to the ellision filter, but I am currently stuck with
lucene-core-2.2.0 found in maven2 central repository (do not contain this
class). I'll watch for an upgrade to 2.3 in the future.

BTW, I think there is an error in the current javadoc because the sentence
"Note that StandardTokenizer sees " ' " as a space, and cuts it out." is
wrong (the standard tokenizer keeps the apostrophe as part of the word, and
so it does not cut it out, as far as I can tell).

Concerning the fact to do an EuropeanStandardFilter, I am afraid I can only
do this for french and english (that is the implementation of
http://tinyurl.com/ynskw3 in fact).
I have think about doing it but as 90% of my documents are french I mainly
concentrate on it at the moment.

Thaks for the quick and accurate answer


Steven A Rowe wrote:
> 
> Hi Chris,
> 
> Looks like the ElisionFilter handles the French problems you mentioned
> 
> This sounds really ambitious [to have a EuropeanStandardFilter, but
> interesting - have you considered doing this?
> 
> Steve
> 

-- 
View this message in context: http://www.nabble.com/Apostrophe-filtering-in-StandardFilter-tp15156768p15160200.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 15:06:02 2008
Return-Path: <java-user-return-32262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4055 invoked from network); 29 Jan 2008 15:06:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 15:06:02 -0000
Received: (qmail 18523 invoked by uid 500); 29 Jan 2008 15:05:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18494 invoked by uid 500); 29 Jan 2008 15:05:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18483 invoked by uid 99); 29 Jan 2008 15:05:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 07:05:45 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 15:05:31 +0000
Received: from [192.168.3.108] (unknown [78.115.188.154])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 96C8445090
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 16:05:53 +0100 (CET)
Message-ID: <479F40B2.8030207@garambrogne.net>
Date: Tue, 29 Jan 2008 16:05:22 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.9 (X11/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Apostrophe filtering in StandardFilter
References: <15156768.post@talk.nabble.com> <9294E20AED46934EA459020706463F947EB60B@SUEXCL-02.ad.syr.edu> <15160200.post@talk.nabble.com>
In-Reply-To: <15160200.post@talk.nabble.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

christophe blin a crit :
> Hi,
>
> thanks for the pointer to the ellision filter, but I am currently stuck with
> lucene-core-2.2.0 found in maven2 central repository (do not contain this
> class). I'll watch for an upgrade to 2.3 in the future.
>   
you can backport it easily with copy-paste.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 15:06:19 2008
Return-Path: <java-user-return-32263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5810 invoked from network); 29 Jan 2008 15:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 15:06:18 -0000
Received: (qmail 21686 invoked by uid 500); 29 Jan 2008 15:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21659 invoked by uid 500); 29 Jan 2008 15:06:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21643 invoked by uid 99); 29 Jan 2008 15:06:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 07:06:00 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 15:05:31 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 11D5C7CFFA
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 07:05:34 -0800 (PST)
Message-Id: <BA9F07A8-7C3C-4DE1-963A-287C4F55F879@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15160200.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Apostrophe filtering in StandardFilter
Date: Tue, 29 Jan 2008 10:05:33 -0500
References: <15156768.post@talk.nabble.com> <9294E20AED46934EA459020706463F947EB60B@SUEXCL-02.ad.syr.edu> <15160200.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jan 29, 2008, at 9:29 AM, christophe blin wrote:

>
> Hi,
>
> thanks for the pointer to the ellision filter, but I am currently  
> stuck with
> lucene-core-2.2.0 found in maven2 central repository (do not contain  
> this
> class). I'll watch for an upgrade to 2.3 in the future.

2.3 should be available in the repository:  http://repo1.maven.org/maven2/org/apache/lucene/lucene-core/2.3.0/

>
>
> BTW, I think there is an error in the current javadoc because the  
> sentence
> "Note that StandardTokenizer sees " ' " as a space, and cuts it  
> out." is
> wrong (the standard tokenizer keeps the apostrophe as part of the  
> word, and
> so it does not cut it out, as far as I can tell).

I believe this is correct, but then the StandardFilter then removes it.

>
>
> Concerning the fact to do an EuropeanStandardFilter, I am afraid I  
> can only
> do this for french and english (that is the implementation of
> http://tinyurl.com/ynskw3 in fact).

Please don't use Tiny URL.  We like to know where a link is going  
before we click it.  :-)

>
> I have think about doing it but as 90% of my documents are french I  
> mainly
> concentrate on it at the moment.
>
> Thaks for the quick and accurate answer
>
>
> Steven A Rowe wrote:
>>
>> Hi Chris,
>>
>> Looks like the ElisionFilter handles the French problems you  
>> mentioned
>>
>> This sounds really ambitious [to have a EuropeanStandardFilter, but
>> interesting - have you considered doing this?
>>
>> Steve
>>
>
> -- 
> View this message in context: http://www.nabble.com/Apostrophe-filtering-in-StandardFilter-tp15156768p15160200.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 16:11:52 2008
Return-Path: <java-user-return-32264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54354 invoked from network); 29 Jan 2008 16:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 16:11:52 -0000
Received: (qmail 62903 invoked by uid 500); 29 Jan 2008 16:11:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62792 invoked by uid 500); 29 Jan 2008 16:11:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62781 invoked by uid 99); 29 Jan 2008 16:11:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 08:11:35 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 16:11:21 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Apostrophe filtering in StandardFilter
Date: Tue, 29 Jan 2008 11:10:29 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB62E@SUEXCL-02.ad.syr.edu>
In-Reply-To: <BA9F07A8-7C3C-4DE1-963A-287C4F55F879@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Apostrophe filtering in StandardFilter
Thread-Index: AchiiIHRk3jfdBQzRhiIaN6tYY1IcwACK0cA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 01/29/2008 at 10:05 AM, Grant Ingersoll wrote:
> On Jan 29, 2008, at 9:29 AM, christophe blin wrote:
> > thanks for the pointer to the ellision filter, but I am currently =
stuck
> > with lucene-core-2.2.0 found in maven2 central repository (do not
> > contain this class). I'll watch for an upgrade to 2.3 in the future.
>=20
> 2.3 should be available in the repository:
> http://repo1.maven.org/maven2/org/apache/lucene/lucene-core/2.3.0/

The ElisionFilter is actually in the lucene-analyzers jar, not =
lucene-core:

<http://repo1.maven.org/maven2/org/apache/lucene/lucene-analyzers/2.3.0/>=


Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 17:25:11 2008
Return-Path: <java-user-return-32265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93374 invoked from network); 29 Jan 2008 17:25:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 17:25:11 -0000
Received: (qmail 33287 invoked by uid 500); 29 Jan 2008 17:24:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33253 invoked by uid 500); 29 Jan 2008 17:24:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33242 invoked by uid 99); 29 Jan 2008 17:24:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 09:24:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of durgadeep@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 17:24:29 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1774988wxd.20
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 09:24:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=jfLEpnHcKE6oDEF+h/Ddjkba6+7TQ3D8E1PnTJQmNzQ=;
        b=lHFs7NFiftD7Ebr1s3Pd1y7bBvZu5c7rvPSmR+bmbquVVqrlYuEyBBZ+LVUHdknVwAtgg4wYtYfAbXUv7zwiUNmPeAi2IVISiZ6C9kvh+3tJBysDUuX2yO4mW1zsDmY3PUbBTd2NQpdR5hY2k4LFWPzTcJ0nEwAS8m9Pa7W9vO8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=MRMuAbNrtfhD5SZN7EY2CjeAG6MD5VhGNNP32eWAvWeami2hhWouM/qEY2Xe+Jx3s+rtoEqxX6gTbg4PAFOxtlJ+yuQ0Hp1heUk6RCXoS3oPxHFJYy7PkMk7j48BheHwkEuFdkMM5QPFfVfXkNmsmqQsEFjxLgUa0YPIl+tchKI=
Received: by 10.140.164.1 with SMTP id m1mr561157rve.69.1201627474451;
        Tue, 29 Jan 2008 09:24:34 -0800 (PST)
Received: by 10.141.44.2 with HTTP; Tue, 29 Jan 2008 09:24:34 -0800 (PST)
Message-ID: <21625f380801290924i17665ae9gab0d1977edf618a2@mail.gmail.com>
Date: Tue, 29 Jan 2008 09:24:34 -0800
From: "DURGA DEEP" <durgadeep@gmail.com>
To: java-user@lucene.apache.org
Subject: Word / Pharse match shown in a context
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12721_21178829.1201627474414"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12721_21178829.1201627474414
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear All,

         I've been scouring through the Lucene classes. Are there any
classes which can help me acheive the following ?.

         1)  We are an e-mail service provider. We wanted to provide a seach
capability of e-mail messages via Lucene. So far we are able to index/ parse
the e-mail. create the appopriate indexes etc..

              Now The customer wants us to have a google like search
capability i.e when they search for a particular word, the word should be
highlighted as well as the surrounding
              text i.e the context in which this word occurs should also be
shown.

              Example : when searching for the word thread.

              ...crawler is a classic example of Thread in an poolExecutor
code
               an poolExecutor code...

Any help greatly appreciated
+ddt

------=_Part_12721_21178829.1201627474414--

From java-user-return-32266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 18:27:11 2008
Return-Path: <java-user-return-32266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23769 invoked from network); 29 Jan 2008 18:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 18:27:11 -0000
Received: (qmail 44148 invoked by uid 500); 29 Jan 2008 18:26:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44120 invoked by uid 500); 29 Jan 2008 18:26:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44109 invoked by uid 99); 29 Jan 2008 18:26:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 10:26:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 18:26:27 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1796693wxd.20
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 10:26:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=V+a3xMmzDxtwyojA1+6jeQXLFrhUew4SroX9aCSvPWI=;
        b=Nc6iVM3bH7T/jvp5QlJRzkvra5VzS+C5u95Owo5C/sIfF65eTHIQruGAXrL+e/ZinifWPhm3437svEJ/ORrZ1TnSQrh+NywtBBP+maLyDJJzm6X8mfwa1wyjzIU0QXRF4YUlAhIy8yC3az/VMH13SsWAxyzh4ejt1iAyMy8Lcxk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ej3HBsfcm8TZuDsGz81EheQ8B95wa9q39J+3IulgCvUmv7qNPpQgtLRlLCV7oLbRjYraiHJeUspkykE2LurGDZa4gZ9D9tsCZlO29auT9DiEU/4ofXdqOCuyN0lI/yuHVNov5HnJqAfqVI98EAjpGexYCyLL2HfShtTXaPON344=
Received: by 10.141.145.11 with SMTP id x11mr4629295rvn.23.1201631192856;
        Tue, 29 Jan 2008 10:26:32 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e14sm6159306qba.28.2008.01.29.10.26.30
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 29 Jan 2008 10:26:31 -0800 (PST)
Message-ID: <479F6FC5.7040405@gmail.com>
Date: Tue, 29 Jan 2008 13:26:13 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Word / Pharse match shown in a context
References: <21625f380801290924i17665ae9gab0d1977edf618a2@mail.gmail.com>
In-Reply-To: <21625f380801290924i17665ae9gab0d1977edf618a2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Look at the Highlighter in contrib. It creates fragments (context) and 
highlights search terms in them (keywords).

If you want to highlight Phrase's correctly, check out this issue which 
adds support for Spans and PhraseQuerys:

https://issues.apache.org/jira/browse/LUCENE-794

Mark


DURGA DEEP wrote:
> Dear All,
>
>          I've been scouring through the Lucene classes. Are there any
> classes which can help me acheive the following ?.
>
>          1)  We are an e-mail service provider. We wanted to provide a seach
> capability of e-mail messages via Lucene. So far we are able to index/ parse
> the e-mail. create the appopriate indexes etc..
>
>               Now The customer wants us to have a google like search
> capability i.e when they search for a particular word, the word should be
> highlighted as well as the surrounding
>               text i.e the context in which this word occurs should also be
> shown.
>
>               Example : when searching for the word thread.
>
>               ...crawler is a classic example of Thread in an poolExecutor
> code
>                an poolExecutor code...
>
> Any help greatly appreciated
> +ddt
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 19:24:54 2008
Return-Path: <java-user-return-32267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52785 invoked from network); 29 Jan 2008 19:24:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 19:24:54 -0000
Received: (qmail 60324 invoked by uid 500); 29 Jan 2008 19:24:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60292 invoked by uid 500); 29 Jan 2008 19:24:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60281 invoked by uid 99); 29 Jan 2008 19:24:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 11:24:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 19:24:11 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2457849fga.27
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 11:24:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Wup5iT8+bEEOU/pb3LCZp2aH5NHRMTt+lCbA7BNud2U=;
        b=KnJRAYoc5QbM0gW0qhuWuvt+taWnpWV5KlUITRHmuePlzIgRejkZZJxlL5ecCSEsJsKGKzGcCv/E9O00Gg16rr5nrjVQPbqBfjtQIcJyEhzbB2+C1iJ12+rqlJ4lODd0wfmiE3WY+CQCa8AbApXPRYsfy77DOiTh3v8NA8oHltc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XjxtYFt9n9dkskRdHzTM22NX2RTLbTP7BMPlsJF3uEIS2Ro4Ya6ggs7QIpgoVlXTPnvKDE577UfvsylYBt22uzLWcTTEu7vlrAOx4bHrqjuuIhwRkqxR3+QXBYP/clVDfotBIetT+Nuebg0O9lXEMoK3S15X8UeSQvL7a4SVjhY=
Received: by 10.86.98.18 with SMTP id v18mr6771900fgb.43.1201634655551;
        Tue, 29 Jan 2008 11:24:15 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 29 Jan 2008 11:24:15 -0800 (PST)
Message-ID: <e05f0fd10801291124y2fce6772qdb6f2eadb91df54e@mail.gmail.com>
Date: Tue, 29 Jan 2008 21:24:15 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Some Help needed in search.
In-Reply-To: <15153692.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30131_22837690.1201634655534"
References: <15153692.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30131_22837690.1201634655534
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can add phrase on the writer field.

I.e. with high boost of 3 and low boost of 2,
writing 'h' for 'heading' and 'w' for 'writer',
try this query:

h:sachin^3  d:tendulkar^3  w:sachin^2  w:tendulkar^2  w:"h:Sachin
Tendulkar"^6

On Jan 29, 2008 9:23 AM, Sure <suresh.lucene@gmail.com> wrote:

>
> Hi All,
> We are having an index with the fields, HEADING and WRITER.
> HEADING is having the high boost factor and WRITER is having a low boost.
>
> Let the data is as follows:
>
> HEADING                                          WRITER
>
> Sachin Tendulkar scored century           XYZ
> Australia won the series                      Sachin Tendulkar
>
> Here if we search for "Sachin Tendulkar" in the index, as HEADING is
> having
> high boost, that will be displayed first. But here we want to display the
> document with WRITER as "Sachin Tendulkar", if it exact match. If we
> search
> for the word "Sachin", what is working now should remain.
>
> How can we do this?
>
> Regards,
> Suresh N.
> --
> View this message in context:
> http://www.nabble.com/Some-Help-needed-in-search.-tp15153692p15153692.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30131_22837690.1201634655534--

From java-user-return-32268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 23:25:36 2008
Return-Path: <java-user-return-32268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61214 invoked from network); 29 Jan 2008 23:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 23:25:36 -0000
Received: (qmail 59286 invoked by uid 500); 29 Jan 2008 23:25:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58309 invoked by uid 500); 29 Jan 2008 23:25:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58298 invoked by uid 99); 29 Jan 2008 23:25:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 15:25:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 23:24:53 +0000
Received: by wa-out-1112.google.com with SMTP id j40so15518wah.11
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 15:25:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=3wYVIHyOkl3F7yD4yeGA/PtYSe8CyE1VA75oBAiPEdk=;
        b=NVAfV5lAdAFfBo+DSA637zdC0lokKBKC9pbwuSn4tAJDoeO5UhTqFoXcpm/eDLymIDfvgWa4XNeF9YncCpJrvlGn6P+XcdBG9lu29TjOYaGQsxiGYK59jpBJi5xkY9ZUJjTpImDMbo1biGSCGv1Q/wiwJAoreZsv82EVD48V46M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=x88CZQ4Ctnjj/VlOOCqVeXFdfzT//d9L1OIg86wGOhmW/FncqZLWYkDGtRCIOQ5wmPLEo4trX3PNeJ3si/aSTTmGVu6PRE5+2DhCbcMo+PL5rZBIg6elikORps5/1r14hhIUMcGpp/y/Y3maoOujLNSvgObgy7xtnmMb1zFW5mo=
Received: by 10.115.15.1 with SMTP id s1mr54732wai.0.1201649100538;
        Tue, 29 Jan 2008 15:25:00 -0800 (PST)
Received: by 10.114.14.3 with HTTP; Tue, 29 Jan 2008 15:25:00 -0800 (PST)
Message-ID: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
Date: Tue, 29 Jan 2008 15:25:00 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Luke for Lucene 2.3?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

 Has anyone tried Luke v0.7.1 with the latest Lucene build, v2.3? I'm
getting "Unknown format version: -4" error when opening Lucene 2.3
index with Luke 0.7.1. Is there any upgraded version of Luke anywhere?

I also read something about web-based Luke, but can't find it in the
contrib in 2.3, is it part of Lucene 2.3? How do I use it?

Thanks,
-vivek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 23:56:01 2008
Return-Path: <java-user-return-32269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71454 invoked from network); 29 Jan 2008 23:56:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 23:56:01 -0000
Received: (qmail 4697 invoked by uid 500); 29 Jan 2008 23:55:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4674 invoked by uid 500); 29 Jan 2008 23:55:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4663 invoked by uid 99); 29 Jan 2008 23:55:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 15:55:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 23:55:18 +0000
Received: by py-out-1112.google.com with SMTP id a73so20474pye.9
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 15:55:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=aBBA4XnNaSrmMrUPVzvHzhlfE6OqbqQeqfE3p9cdrb0=;
        b=uQF501QwASbrSGb+q8ALLGsRil4zxuykgFmiorjirISFbK6/c9aN6Uskn8rpqMYzs1O9c6KqsbI68rwsdyDmFbH+REcrQKgn5OoAdPZ15zh1nAaXcSL9tNNHIp6v+ljoFqW+KCjYszGvqHfqAEEjEF0u4hAH45sSrGvGLLl0kdM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=TkYCwtFFVVNWAsTMx+aud917gx8QH1bYqNoy22QlCIWnDKgVD53Xg0beq0LqZ1uZkUMuln39BAY6AHeKirNGnp4NuojI3MIVD3IamT1quHUeYlhzo9l+n+QQfH44mM0mMQVU6tT+m1bSFQykitkzdkFXUB+kCNONlv0ZhSxnYW0=
Received: by 10.65.107.10 with SMTP id j10mr89303qbm.56.1201650923726;
        Tue, 29 Jan 2008 15:55:23 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e17sm4129038qba.1.2008.01.29.15.55.22
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 29 Jan 2008 15:55:22 -0800 (PST)
Message-ID: <479FBCD8.9070605@gmail.com>
Date: Tue, 29 Jan 2008 18:55:04 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke for Lucene 2.3?
References: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
In-Reply-To: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Go to the luke home page (google lucene luke) and it will show you how 
to start it up using the latest jar. You just launch the main class with 
the lucene jar of your choice and the luke jar on the class path.

vivek sar wrote:
> Hi,
>
>  Has anyone tried Luke v0.7.1 with the latest Lucene build, v2.3? I'm
> getting "Unknown format version: -4" error when opening Lucene 2.3
> index with Luke 0.7.1. Is there any upgraded version of Luke anywhere?
>
> I also read something about web-based Luke, but can't find it in the
> contrib in 2.3, is it part of Lucene 2.3? How do I use it?
>
> Thanks,
> -vivek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 29 23:56:59 2008
Return-Path: <java-user-return-32270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71569 invoked from network); 29 Jan 2008 23:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2008 23:56:59 -0000
Received: (qmail 6438 invoked by uid 500); 29 Jan 2008 23:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6406 invoked by uid 500); 29 Jan 2008 23:56:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6395 invoked by uid 99); 29 Jan 2008 23:56:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 15:56:44 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.2.161] (HELO exprod7og104.obsmtp.com) (64.18.2.161)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Jan 2008 23:56:14 +0000
Received: from source ([66.249.82.233]) by exprod7ob104.postini.com ([64.18.6.12]) with SMTP;
	Tue, 29 Jan 2008 15:56:01 PST
Received: by wx-out-0506.google.com with SMTP id h27so20984wxd.15
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 15:56:18 -0800 (PST)
Received: by 10.143.34.11 with SMTP id m11mr13087wfj.222.1201650977727;
        Tue, 29 Jan 2008 15:56:17 -0800 (PST)
Received: by 10.143.157.2 with HTTP; Tue, 29 Jan 2008 15:56:17 -0800 (PST)
Message-ID: <47699a8d0801291556u2d3c827dja230975428f762f9@mail.gmail.com>
Date: Tue, 29 Jan 2008 15:56:17 -0800
From: "Kyle Maxwell" <kyle@casttv.com>
To: java-user@lucene.apache.org
Subject: Re: Luke for Lucene 2.3?
In-Reply-To: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/29/08, vivek sar <vivextra@gmail.com> wrote:
> Hi,
>
>  Has anyone tried Luke v0.7.1 with the latest Lucene build, v2.3? I'm
> getting "Unknown format version: -4" error when opening Lucene 2.3
> index with Luke 0.7.1. Is there any upgraded version of Luke anywhere?
>
> I also read something about web-based Luke, but can't find it in the
> contrib in 2.3, is it part of Lucene 2.3? How do I use it?
>
> Thanks,
> -vivek

I hacked luke for compatibility a few months ago.  I just uploaded the
source to http://drop.io/customluke.  I don't have time to properly
create a project, etc, but I release my additions to the public
domain, and disclaim all warranty.

-- 
Kyle Maxwell
Software Engineer
CastTV, Inc
http://www.casttv.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 00:14:07 2008
Return-Path: <java-user-return-32271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76592 invoked from network); 30 Jan 2008 00:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 00:14:07 -0000
Received: (qmail 24835 invoked by uid 500); 30 Jan 2008 00:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24483 invoked by uid 500); 30 Jan 2008 00:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24472 invoked by uid 99); 30 Jan 2008 00:13:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 16:13:52 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.2.169] (HELO exprod7og108.obsmtp.com) (64.18.2.169)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Jan 2008 00:13:22 +0000
Received: from source ([64.233.178.250]) by exprod7ob108.postini.com ([64.18.6.12]) with SMTP;
	Tue, 29 Jan 2008 16:13:28 PST
Received: by hs-out-2122.google.com with SMTP id 54so25627hsz.1
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 16:13:28 -0800 (PST)
Received: by 10.142.230.11 with SMTP id c11mr27929wfh.145.1201652006991;
        Tue, 29 Jan 2008 16:13:26 -0800 (PST)
Received: by 10.143.157.2 with HTTP; Tue, 29 Jan 2008 16:13:26 -0800 (PST)
Message-ID: <47699a8d0801291613p4c261a13t52cdf3a167d43348@mail.gmail.com>
Date: Tue, 29 Jan 2008 16:13:26 -0800
From: "Kyle Maxwell" <kyle@casttv.com>
To: java-user@lucene.apache.org
Subject: Re: Luke for Lucene 2.3?
In-Reply-To: <479FBCD8.9070605@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
	 <479FBCD8.9070605@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> Go to the luke home page (google lucene luke) and it will show you how
> to start it up using the latest jar. You just launch the main class with
> the lucene jar of your choice and the luke jar on the class path.

IME, there were a couple additional (trivial) bugs due to internal api
changes, such that running luke like this was not possible.

-- 
Kyle Maxwell
Software Engineer
CastTV, Inc
http://www.casttv.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 03:18:35 2008
Return-Path: <java-user-return-32272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75638 invoked from network); 30 Jan 2008 03:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 03:18:35 -0000
Received: (qmail 30969 invoked by uid 500); 30 Jan 2008 03:18:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29934 invoked by uid 500); 30 Jan 2008 03:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29923 invoked by uid 99); 30 Jan 2008 03:18:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 19:18:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shore.cloud@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 03:17:53 +0000
Received: by rv-out-0910.google.com with SMTP id k20so62873rvb.5
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 19:17:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=9HRRGL7XTtP5lpE7gPMAGTeEOTWmIZqFYAnhmj03oBU=;
        b=MpVj7AoIc7Z8GZMMZt5psqOzjC3LUEZPJTA/tEJUXVqRzBhamt+pr8s1jDgFS8KzzwurZForUGgk9fFzj69BtvyuwwO1CXIb4kjg4kwvX9JAJJD4W3iNARgtxcQgL2zSdEDwDWMWlmynbBaZThDzkd8XsOKdnzVfUjAXPW5aCG8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=aUgqWTm2vKFo7cf2vQYSCj59N0afP42uqMu+qFGMCdpSkOc2+KRgABIGkn16dFiIEV6RbiZkD+okB2u6PzzHHLMEcUXOZZT39v6ZDEi32Fb94ZVbMnlREmt9szQF5oAix20owwRLx+1XZWBT0aKgruQR0FS3BIgaeSBqx1VPAJs=
Received: by 10.140.134.15 with SMTP id h15mr172564rvd.51.1201663078734;
        Tue, 29 Jan 2008 19:17:58 -0800 (PST)
Received: by 10.141.155.3 with HTTP; Tue, 29 Jan 2008 19:17:58 -0800 (PST)
Message-ID: <ae7ef6650801291917i24a8394eh73d487d78dc8f1e8@mail.gmail.com>
Date: Wed, 30 Jan 2008 11:17:58 +0800
From: "Mr Shore" <shore.cloud@gmail.com>
To: java-user@lucene.apache.org
Subject: is lucene fit for doing this?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17099_32793180.1201663078754"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17099_32793180.1201663078754
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi all
I'm now looking for a search engine capable of
processing,say 300 gigabytes of files
is lucene fit for this job?
in fact I'm using python,and just find Pylucene and Lupy which is opensource
and written by
python.
if the answer is not,any recommendation is greatly apreciated

------=_Part_17099_32793180.1201663078754--

From java-user-return-32273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 04:13:39 2008
Return-Path: <java-user-return-32273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94459 invoked from network); 30 Jan 2008 04:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 04:13:38 -0000
Received: (qmail 65256 invoked by uid 500); 30 Jan 2008 04:13:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65222 invoked by uid 500); 30 Jan 2008 04:13:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65209 invoked by uid 99); 30 Jan 2008 04:13:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 20:13:24 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 04:12:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JK4Jq-0000LI-Vu
	for java-user@lucene.apache.org; Tue, 29 Jan 2008 20:13:02 -0800
Message-ID: <15175141.post@talk.nabble.com>
Date: Tue, 29 Jan 2008 20:13:02 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Query in Lucene 2.3.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.

Lucene latest version - 2.3.0 says that the default behaviour of flushing
from memory to file-system based index is based upon RAM usage - with 16 MB
being the default value. Fine. Works for me, as long as I am using a single
thread to write into the index.

However, I have been trying to use multiple threads (say 'n'), to write into
their corresponding individual indexes, all based into the file-system. Now,
occasionally and randomly, I am getting "OutOfMemoryException - Java Memory
Heap", while it works other times. I know, that there may be issues with my
environment, but I haven't been able to figure out, why it works sometimes,
and it does not.

So, I will be obliged if the following doubts are cleared :

a) Let's say there are 'n' threads, writing into 'n' indexes. Each thread
has a unique individual indexer; this is implemented by passing the
corresponding reference to the thread, which is then used in it's run()
method. Now, as we know, 16 MB is the default size, before the docs are
flushed to the file-system based index. Thus, my question is : 

         does this hold for each thread indexer. In other words, do we need
to have at least '16n'MB 
         of memory at our disposal, before we are sure that there will be no
"outOfMemoryException" ? If 
         that is the case, does that also mean that if we are working with a
single main thread only, and 
         providing anything less than 16MB of memory to the JVM, then the
exception would always occur ?

-- 
View this message in context: http://www.nabble.com/Query-in-Lucene-2.3.0-tp15175141p15175141.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 04:36:06 2008
Return-Path: <java-user-return-32274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99728 invoked from network); 30 Jan 2008 04:36:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 04:36:06 -0000
Received: (qmail 78402 invoked by uid 500); 30 Jan 2008 04:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77375 invoked by uid 500); 30 Jan 2008 04:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77364 invoked by uid 99); 30 Jan 2008 04:35:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 20:35:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.72] (HELO smtpoutm.mac.com) (17.148.16.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 04:35:37 +0000
Received: from mac.com (asmtp001-s [10.150.69.64])
	by smtpoutm.mac.com (Xserve/smtpout009/MantshX 4.0) with ESMTP id m0U4ZTbN012042
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 20:35:29 -0800 (PST)
Received: from [10.0.1.199] (va-71-53-214-81.dhcp.embarqhsd.net [71.53.214.81])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp001/MantshX 4.0) with ESMTP id m0U4ZRHj007712
	for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 20:35:28 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <ae7ef6650801291917i24a8394eh73d487d78dc8f1e8@mail.gmail.com>
References: <ae7ef6650801291917i24a8394eh73d487d78dc8f1e8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <06BE91FC-130F-43D0-B865-5EDC6FA62A4C@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Prichard <michael_prichard@mac.com>
Subject: Re: is lucene fit for doing this?
Date: Tue, 29 Jan 2008 23:35:21 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I would say Lucene is a capable of helping you do this.   Remember  
that it is a set of libraries and you have to build the functionality  
you need with that.  BUT with a little planning and elbow grease you  
will be able to use it to create a great search engine.

Good luck.

On Jan 29, 2008, at 10:17 PM, Mr Shore wrote:

> hi all
> I'm now looking for a search engine capable of
> processing,say 300 gigabytes of files
> is lucene fit for this job?
> in fact I'm using python,and just find Pylucene and Lupy which is  
> opensource
> and written by
> python.
> if the answer is not,any recommendation is greatly apreciated


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 06:10:04 2008
Return-Path: <java-user-return-32275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95709 invoked from network); 30 Jan 2008 06:10:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 06:10:03 -0000
Received: (qmail 34901 invoked by uid 500); 30 Jan 2008 06:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34864 invoked by uid 500); 30 Jan 2008 06:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34853 invoked by uid 99); 30 Jan 2008 06:09:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jan 2008 22:09:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shore.cloud@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 06:09:21 +0000
Received: by rv-out-0910.google.com with SMTP id k20so101750rvb.5
        for <java-user@lucene.apache.org>; Tue, 29 Jan 2008 22:09:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=AOwydfaJMm+CtnnBBm3xdhgqddf2Fx7vATycW24Cpng=;
        b=RQpSrbMiIpIDbOIycVn9qbt31N2ZCLHsiGwxhbDzqwHUa0IPc4xNI9zuk5dF4c315/+PAXFbS9gsx7S9FFjAZbBBBSm/qCDD/jHeOyIm6mDkyutKwdXbq692EsvBTm4djMPIi5IeB6U3htG8O27EfSD5a/8G8A/6J0n0iiz6GPI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=M+AXvRh3OwB0aHurNAapG7DKMShTKyVBdOaKEGKXHMbVSbG26Bz8GM6SPYoP/eebzuGhjxM/sacAgIDMdOT/Ti30Mm5ljMo6I9BTtJPDSBT/nTzCAh89hUFuXHVQ6wyGVoExZDjX/Mab0unvso9jLAyo5yIuXfDuBYVvW2NGG7g=
Received: by 10.140.125.4 with SMTP id x4mr251962rvc.229.1201673367468;
        Tue, 29 Jan 2008 22:09:27 -0800 (PST)
Received: by 10.141.155.3 with HTTP; Tue, 29 Jan 2008 22:09:27 -0800 (PST)
Message-ID: <ae7ef6650801292209r20520c55rc3cbe4a9c0334ef9@mail.gmail.com>
Date: Wed, 30 Jan 2008 14:09:27 +0800
From: "Mr Shore" <shore.cloud@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: is lucene fit for doing this?
In-Reply-To: <06BE91FC-130F-43D0-B865-5EDC6FA62A4C@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17774_12434800.1201673367459"
References: <ae7ef6650801291917i24a8394eh73d487d78dc8f1e8@mail.gmail.com>
	 <06BE91FC-130F-43D0-B865-5EDC6FA62A4C@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17774_12434800.1201673367459
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi Michael
thanks for your advice
I think I'll have a try
Mr Shore

2008/1/30, Michael Prichard <michael_prichard@mac.com>:
>
> I would say Lucene is a capable of helping you do this.   Remember
> that it is a set of libraries and you have to build the functionality
> you need with that.  BUT with a little planning and elbow grease you
> will be able to use it to create a great search engine.
>
> Good luck.
>
> On Jan 29, 2008, at 10:17 PM, Mr Shore wrote:
>
> > hi all
> > I'm now looking for a search engine capable of
> > processing,say 300 gigabytes of files
> > is lucene fit for this job?
> > in fact I'm using python,and just find Pylucene and Lupy which is
> > opensource
> > and written by
> > python.
> > if the answer is not,any recommendation is greatly apreciated
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17774_12434800.1201673367459--

From java-user-return-32276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 08:41:47 2008
Return-Path: <java-user-return-32276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63140 invoked from network); 30 Jan 2008 08:41:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 08:41:46 -0000
Received: (qmail 92354 invoked by uid 500); 30 Jan 2008 08:41:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92317 invoked by uid 500); 30 Jan 2008 08:41:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92306 invoked by uid 99); 30 Jan 2008 08:41:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 00:41:31 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.251] (HELO hs-out-2122.google.com) (64.233.178.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 08:41:01 +0000
Received: by hs-out-2122.google.com with SMTP id 54so151557hsz.5
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 00:41:05 -0800 (PST)
Received: by 10.142.125.5 with SMTP id x5mr185328wfc.40.1201682463462;
        Wed, 30 Jan 2008 00:41:03 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h17sm1634165wxd.24.2008.01.30.00.41.02
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 30 Jan 2008 00:41:02 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <15175141.post@talk.nabble.com>
References: <15175141.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Query in Lucene 2.3.0
Date: Wed, 30 Jan 2008 03:41:34 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


If you have a single IndexWriter, then the buffer is flushed @ 16 MB  
regardless of how many threads are adding to that buffer.

If you are using multiple IndexWriters, writing to separate  
directories and then merging at the end, then each one uses 16 MB.   
But this isn't recommended for a single computer -- using multiple  
threads with one IndexWriter should get you better performance.

Note that this does not mean you can limit your JVM's heap to 16 MB  
(for the single writer case): other things require memory, eg  
merging, pulling documents from some source,  etc. Furthermore, it's  
generally best not to cut the heap size so close to your actual  
memory usage that GC is forced to run excessively since that'll hurt  
performance.

Mike

ajay_garg wrote:

>
> Hi all.
>
> Lucene latest version - 2.3.0 says that the default behaviour of  
> flushing
> from memory to file-system based index is based upon RAM usage -  
> with 16 MB
> being the default value. Fine. Works for me, as long as I am using  
> a single
> thread to write into the index.
>
> However, I have been trying to use multiple threads (say 'n'), to  
> write into
> their corresponding individual indexes, all based into the file- 
> system. Now,
> occasionally and randomly, I am getting "OutOfMemoryException -  
> Java Memory
> Heap", while it works other times. I know, that there may be issues  
> with my
> environment, but I haven't been able to figure out, why it works  
> sometimes,
> and it does not.
>
> So, I will be obliged if the following doubts are cleared :
>
> a) Let's say there are 'n' threads, writing into 'n' indexes. Each  
> thread
> has a unique individual indexer; this is implemented by passing the
> corresponding reference to the thread, which is then used in it's  
> run()
> method. Now, as we know, 16 MB is the default size, before the docs  
> are
> flushed to the file-system based index. Thus, my question is :
>
>          does this hold for each thread indexer. In other words, do  
> we need
> to have at least '16n'MB
>          of memory at our disposal, before we are sure that there  
> will be no
> "outOfMemoryException" ? If
>          that is the case, does that also mean that if we are  
> working with a
> single main thread only, and
>          providing anything less than 16MB of memory to the JVM,  
> then the
> exception would always occur ?
>
> -- 
> View this message in context: http://www.nabble.com/Query-in- 
> Lucene-2.3.0-tp15175141p15175141.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 12:28:55 2008
Return-Path: <java-user-return-32277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52666 invoked from network); 30 Jan 2008 12:28:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 12:28:55 -0000
Received: (qmail 99179 invoked by uid 500); 30 Jan 2008 12:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98564 invoked by uid 500); 30 Jan 2008 12:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98553 invoked by uid 99); 30 Jan 2008 12:28:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 04:28:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Jan 2008 12:28:22 +0000
Received: (qmail 39338 invoked from network); 30 Jan 2008 08:18:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=CJ2hb0m1OYztk1iqCCUWVPONj0EG6mw7SE0tpzD+Uc+uHlqsp8/XuqIed7dl7m4x+elrLbEVrmiEmOLqMtHDMYeuKd0yvaTbRzTFoc/sjPaVLd5ewNx4kO77sSpVRt+u25+A2g72brhcdr2qjVdnJ87iCTdrysGL0YY9TUoAqIg=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 30 Jan 2008 08:18:24 -0000
X-YMail-OSG: H.p_uMIVM1mPWktz6DVI0ImfIyXrUBrzb2qYSzKLr5vaCQ3aTr.lpQ5l2OZqQ9ZzSjFx4vd_2AmbCWiLSfd3ZCE9zOer6IMjy1t0M6uictvdM6ZW
X-Yahoo-Newman-Property: ymail-3
Message-ID: <47A032C7.90105@yahoo.co.uk>
Date: Wed, 30 Jan 2008 08:18:15 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke for Lucene 2.3?
References: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
In-Reply-To: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> I also read something about web-based Luke, but can't find it in the
> contrib in 2.3, is it part of Lucene 2.3? How do I use it?
>   

See here:
http://www.mail-archive.com/java-dev@lucene.apache.org/msg13287.html

I think we decided to hold off until after the Lucene 2.3 release before 
adding to contrib so it should appear there soon.

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 16:34:59 2008
Return-Path: <java-user-return-32278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25780 invoked from network); 30 Jan 2008 16:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 16:34:59 -0000
Received: (qmail 23016 invoked by uid 500); 30 Jan 2008 16:34:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22989 invoked by uid 500); 30 Jan 2008 16:34:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22978 invoked by uid 99); 30 Jan 2008 16:34:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 08:34:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 16:34:30 +0000
Content-class: urn:content-classes:message
Subject: Spell checking street names
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8635D.F7504244"
Date: Wed, 30 Jan 2008 11:34:20 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B123819BC@sbsrv.AALabs.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Spell checking street names
Thread-Index: AchjXfa78JqwX+ULRUmyDJBpNHHj9A==
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8635D.F7504244
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm using Lucene to spell check street names.  Right now, I'm using
Double Metaphone on the street name (we have a sophisticated regex to
parse out the NAME as opposed to the unit, number, street type, or
suffix).  I think that Double Metaphone is probably overkill/wrong, and
a spell checking approach (n-gram based) would be better.  Part of the
reason is if we look at some common mistakes:

=20

For Commonwealth:

Communwealth

Comonwealth

Common wealth

=20

Double metaphone will get the first two, but not the last.  Spell check
(I think) would get all 3.  The last is much more common than in typical
generic text search (Fairoaks vs. Fair Oaks, New Market vs. Newmarket,
etc).  However, spell check will only get the third if the n-gram input
is untokenized (right?).

=20

 Conceptually, I feel like people will most often misspell or mistype
rather than completely omitting words from the street name.  So running
the n-gram on the untokenized street name seems like a good thing.
Problem is I can't see how I do this, SpellChecker seems to always want
to tokenize things, and I'm a bit confused on how to give it an analyzer
that doesn't tokenize.

=20

I feel like this might be a newbie question, so apologies if so.  But,
1) does an untokenized n-gram spell checker seem like a good thing for
this app? 2) Which analyzer can I use for no tokenization at all?

=20

--Max


------_=_NextPart_001_01C8635D.F7504244--

From java-user-return-32279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 18:47:57 2008
Return-Path: <java-user-return-32279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86592 invoked from network); 30 Jan 2008 18:47:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 18:47:57 -0000
Received: (qmail 55167 invoked by uid 500); 30 Jan 2008 18:47:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55028 invoked by uid 500); 30 Jan 2008 18:47:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55017 invoked by uid 99); 30 Jan 2008 18:47:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 10:47:41 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 18:47:15 +0000
Received: by wr-out-0506.google.com with SMTP id c55so318072wra.11
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 10:47:20 -0800 (PST)
Received: by 10.78.190.10 with SMTP id n10mr1666450huf.37.1201718837292;
        Wed, 30 Jan 2008 10:47:17 -0800 (PST)
Received: by 10.78.133.8 with HTTP; Wed, 30 Jan 2008 10:47:17 -0800 (PST)
Message-ID: <af9ce6c90801301047q244087b7pd816ed748a54ea5b@mail.gmail.com>
Date: Wed, 30 Jan 2008 10:47:17 -0800
From: "Mike Grafton" <mike@pivotallabs.com>
Sender: mike@pivotalsf.com
To: java-user@lucene.apache.org
Subject: document boost
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19720_8023180.1201718837293"
X-Google-Sender-Auth: cb5e0b4dd82da1ed
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19720_8023180.1201718837293
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello folks,

We're trying to use Lucene's scoring to do a fairly basic thing: give a
document (in this case, we index "articles") a boost based on an integer
value that we know at index-time.  We want the  document boost to affect the
final document score linearly.

We thought that assigning a document boost based on this value would do the
trick, but the behavior we're seeing doesn't match what we expect given the
online documentation.  In fact, we see that a linear increase in document
boost yields an exponential increase in the 'fieldNorm' component of the
score for each term of the query that matched the document.    Here's a
small table of values that relate the document boost we pass in to the
fieldNorm contribution returned by Lucene:

boost  fieldNorm
1.0    0.3125    =  (5/16, 2^-1.678)
2.0    20.0      =  (2^4.3219, 2^1 * 10)
3.0    256.0     =  (2^8)
4.0    1280.0    =  (2^10.3219, 2^7 * 10)
5.0    5120.0    =  (2^12.3219, 2^9 * 10)
6.0    16384.0   =  (2^14.0)
7.0    40960.0   =  (2^15.3219, 2^12 * 10)
8.0    81920.0   =  (2^16.3219, 2^13 * 10)
10.0   327680.0  =  (2^18.3219, 2^15 * 10)

This example is using a query with two terms against a document that
contains those terms and a few others, in one searchable field.

Is this the way document boost is supposed to work?  Or have we
misconfigured something? If we cannot use document boost to affect scoring
linearly, is there some other technique we can use?

By the way, we're using SOLR to access Lucene.  We can give more information
if necessary, such as our SOLR schema.xml, if folks think that would help
explain things.  Let us know what other information we can provide.

Thanks,
Mike

------=_Part_19720_8023180.1201718837293--

From java-user-return-32280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 19:44:37 2008
Return-Path: <java-user-return-32280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7836 invoked from network); 30 Jan 2008 19:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 19:44:37 -0000
Received: (qmail 44999 invoked by uid 500); 30 Jan 2008 19:44:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44970 invoked by uid 500); 30 Jan 2008 19:44:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44959 invoked by uid 99); 30 Jan 2008 19:44:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 11:44:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 19:43:54 +0000
Received: by py-out-1112.google.com with SMTP id a73so435136pye.9
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 11:43:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Ibt/mST9H2eBJnzJKH0a8eYTGBQI56Q4X5NhHDilzd4=;
        b=xxrqFUUD7/FZHFg46JRRIycmCTdtsJhLOb81M3lCaXo052OsUlq/kMAo+jnxrP2GWxM9MdWVTRiOziQNC0eQuxvrZ6LA4Nmw+04s3dAwLIXvxndvWL62eUVuI/cz8mOyM3FbGRJmPMUSg9WZHQMQHHmCcCjUGidyzheqR0/NgPY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=kdDW4lef+J1ZoJMumt1fmJNCG2TrYV1mTsseeMRPh01D/XEzi1Jw7cFFUMTZunx7tQSPZfH/+451GxkRWtjI+euQAYphazqafLVW3MQSFsuaeT+jjgs8bdW1jfYGhzJMXpXSsi4zOGm9qr4QFm4WF9USt344pH/4fiYF7t7cPpI=
Received: by 10.65.212.3 with SMTP id o3mr2467101qbq.30.1201722239268;
        Wed, 30 Jan 2008 11:43:59 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id d2sm904360qbc.36.2008.01.30.11.43.58
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 30 Jan 2008 11:43:58 -0800 (PST)
Message-ID: <47A0D36A.9090704@gmail.com>
Date: Wed, 30 Jan 2008 14:43:38 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: document boost
References: <af9ce6c90801301047q244087b7pd816ed748a54ea5b@mail.gmail.com>
In-Reply-To: <af9ce6c90801301047q244087b7pd816ed748a54ea5b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would say you def misconfigured something. Doubling your doc boost 
will double your fieldNorm approximately (I think the precision isn't 
perfect).

I don't know what your doing wrong in such a small test, but your 
fieldNorm should *not* be exploding like that.

Can you post some code?

- Mark

Mike Grafton wrote:
> Hello folks,
>
> We're trying to use Lucene's scoring to do a fairly basic thing: give a
> document (in this case, we index "articles") a boost based on an integer
> value that we know at index-time.  We want the  document boost to affect the
> final document score linearly.
>
> We thought that assigning a document boost based on this value would do the
> trick, but the behavior we're seeing doesn't match what we expect given the
> online documentation.  In fact, we see that a linear increase in document
> boost yields an exponential increase in the 'fieldNorm' component of the
> score for each term of the query that matched the document.    Here's a
> small table of values that relate the document boost we pass in to the
> fieldNorm contribution returned by Lucene:
>
> boost  fieldNorm
> 1.0    0.3125    =  (5/16, 2^-1.678)
> 2.0    20.0      =  (2^4.3219, 2^1 * 10)
> 3.0    256.0     =  (2^8)
> 4.0    1280.0    =  (2^10.3219, 2^7 * 10)
> 5.0    5120.0    =  (2^12.3219, 2^9 * 10)
> 6.0    16384.0   =  (2^14.0)
> 7.0    40960.0   =  (2^15.3219, 2^12 * 10)
> 8.0    81920.0   =  (2^16.3219, 2^13 * 10)
> 10.0   327680.0  =  (2^18.3219, 2^15 * 10)
>
> This example is using a query with two terms against a document that
> contains those terms and a few others, in one searchable field.
>
> Is this the way document boost is supposed to work?  Or have we
> misconfigured something? If we cannot use document boost to affect scoring
> linearly, is there some other technique we can use?
>
> By the way, we're using SOLR to access Lucene.  We can give more information
> if necessary, such as our SOLR schema.xml, if folks think that would help
> explain things.  Let us know what other information we can provide.
>
> Thanks,
> Mike
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 20:06:00 2008
Return-Path: <java-user-return-32281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22391 invoked from network); 30 Jan 2008 20:06:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 20:06:00 -0000
Received: (qmail 70477 invoked by uid 500); 30 Jan 2008 20:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70445 invoked by uid 500); 30 Jan 2008 20:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70434 invoked by uid 99); 30 Jan 2008 20:05:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 12:05:42 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 20:05:15 +0000
Received: by nf-out-0910.google.com with SMTP id d3so56466nfc.15
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 12:05:20 -0800 (PST)
Received: by 10.78.201.2 with SMTP id y2mr1812809huf.56.1201723519081;
        Wed, 30 Jan 2008 12:05:19 -0800 (PST)
Received: by 10.78.133.8 with HTTP; Wed, 30 Jan 2008 12:05:18 -0800 (PST)
Message-ID: <af9ce6c90801301205g3ba98467p7bfe7eea4cd87120@mail.gmail.com>
Date: Wed, 30 Jan 2008 12:05:18 -0800
From: "Mike Grafton" <mike@pivotallabs.com>
Sender: mike@pivotalsf.com
To: java-user@lucene.apache.org
Subject: Re: document boost
In-Reply-To: <47A0D36A.9090704@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_20188_19149020.1201723519065"
References: <af9ce6c90801301047q244087b7pd816ed748a54ea5b@mail.gmail.com>
	 <47A0D36A.9090704@gmail.com>
X-Google-Sender-Auth: 2cc33dbfb7b78a7b
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20188_19149020.1201723519065
Content-Type: multipart/alternative; 
	boundary="----=_Part_20189_9167505.1201723519066"

------=_Part_20189_9167505.1201723519066
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for your help, Mark.

We can start by posting our SOLR config files, although I'm not sure if that
will be helpful (we don't see much in there regarding boosts).  See
attached.  How SOLR actually configures and interfaces with Lucene is a bit
of an unknown to us, so I'm not sure we can get down to the raw Lucene
configuration and interaction.

That being said, in addition to the SOLR config files, see our attached XML
which we post to SOLR to add the document to the index.

How do you know that boost should affect fieldNorm linearly? Is there some
code you can point us to?  We looked through the Lucene source for a while,
but it was kind of hard to track this down.

One note: we're on an old version of Lucene - a nightly build between 2.0.0and
2.1.0.

Mike

On 1/30/08, Mark Miller <markrmiller@gmail.com> wrote:
>
> I would say you def misconfigured something. Doubling your doc boost
> will double your fieldNorm approximately (I think the precision isn't
> perfect).
>
> I don't know what your doing wrong in such a small test, but your
> fieldNorm should *not* be exploding like that.
>
> Can you post some code?
>
> - Mark
>
> Mike Grafton wrote:
> > Hello folks,
> >
> > We're trying to use Lucene's scoring to do a fairly basic thing: give a
> > document (in this case, we index "articles") a boost based on an integer
> > value that we know at index-time.  We want the  document boost to affect
> the
> > final document score linearly.
> >
> > We thought that assigning a document boost based on this value would do
> the
> > trick, but the behavior we're seeing doesn't match what we expect given
> the
> > online documentation.  In fact, we see that a linear increase in
> document
> > boost yields an exponential increase in the 'fieldNorm' component of the
> > score for each term of the query that matched the document.    Here's a
> > small table of values that relate the document boost we pass in to the
> > fieldNorm contribution returned by Lucene:
> >
> > boost  fieldNorm
> > 1.0    0.3125    =  (5/16, 2^-1.678)
> > 2.0    20.0      =  (2^4.3219, 2^1 * 10)
> > 3.0    256.0     =  (2^8)
> > 4.0    1280.0    =  (2^10.3219, 2^7 * 10)
> > 5.0    5120.0    =  (2^12.3219, 2^9 * 10)
> > 6.0    16384.0   =  (2^14.0)
> > 7.0    40960.0   =  (2^15.3219, 2^12 * 10)
> > 8.0    81920.0   =  (2^16.3219, 2^13 * 10)
> > 10.0   327680.0  =  (2^18.3219, 2^15 * 10)
> >
> > This example is using a query with two terms against a document that
> > contains those terms and a few others, in one searchable field.
> >
> > Is this the way document boost is supposed to work?  Or have we
> > misconfigured something? If we cannot use document boost to affect
> scoring
> > linearly, is there some other technique we can use?
> >
> > By the way, we're using SOLR to access Lucene.  We can give more
> information
> > if necessary, such as our SOLR schema.xml, if folks think that would
> help
> > explain things.  Let us know what other information we can provide.
> >
> > Thanks,
> > Mike
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20189_9167505.1201723519066
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for your help, Mark.&nbsp; <br><br>We can start by posting our SOLR config files, although I&#39;m not sure if that will be helpful (we don&#39;t see much in there regarding boosts).&nbsp; See attached.&nbsp; How SOLR actually configures and interfaces with Lucene is a bit of an unknown to us, so I&#39;m not sure we can get down to the raw Lucene configuration and interaction.<br>
<br>That being said, in addition to the SOLR config files, see our attached XML which we post to SOLR to add the document to the index.<br><br>How do you know that boost should affect fieldNorm linearly? Is there some code you can point us to?&nbsp; We looked through the Lucene source for a while, but it was kind of hard to track this down.<br>
<br>One note: we&#39;re on an old version of Lucene - a nightly build between 2.0.0 and 2.1.0.<br><br>Mike<br><br><div><span class="gmail_quote">On 1/30/08, <b class="gmail_sendername">Mark Miller</b> &lt;<a href="mailto:markrmiller@gmail.com">markrmiller@gmail.com</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
I would say you def misconfigured something. Doubling your doc boost<br>will double your fieldNorm approximately (I think the precision isn&#39;t<br>perfect).<br><br>I don&#39;t know what your doing wrong in such a small test, but your<br>
fieldNorm should *not* be exploding like that.<br><br>Can you post some code?<br><br>- Mark<br><br>Mike Grafton wrote:<br>&gt; Hello folks,<br>&gt;<br>&gt; We&#39;re trying to use Lucene&#39;s scoring to do a fairly basic thing: give a<br>
&gt; document (in this case, we index &quot;articles&quot;) a boost based on an integer<br>&gt; value that we know at index-time.&nbsp;&nbsp;We want the&nbsp;&nbsp;document boost to affect the<br>&gt; final document score linearly.<br>&gt;<br>
&gt; We thought that assigning a document boost based on this value would do the<br>&gt; trick, but the behavior we&#39;re seeing doesn&#39;t match what we expect given the<br>&gt; online documentation.&nbsp;&nbsp;In fact, we see that a linear increase in document<br>
&gt; boost yields an exponential increase in the &#39;fieldNorm&#39; component of the<br>&gt; score for each term of the query that matched the document.&nbsp;&nbsp;&nbsp;&nbsp;Here&#39;s a<br>&gt; small table of values that relate the document boost we pass in to the<br>
&gt; fieldNorm contribution returned by Lucene:<br>&gt;<br>&gt; boost&nbsp;&nbsp;fieldNorm<br>&gt; 1.0&nbsp;&nbsp;&nbsp;&nbsp;0.3125&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;(5/16, 2^-1.678)<br>&gt; 2.0&nbsp;&nbsp;&nbsp;&nbsp;20.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;(2^4.3219, 2^1 * 10)<br>&gt; 3.0&nbsp;&nbsp;&nbsp;&nbsp;256.0&nbsp;&nbsp;&nbsp;&nbsp; =&nbsp;&nbsp;(2^8)<br>&gt; 4.0&nbsp;&nbsp;&nbsp;&nbsp;1280.0&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;(2^10.3219, 2^7 * 10)<br>
&gt; 5.0&nbsp;&nbsp;&nbsp;&nbsp;5120.0&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;(2^12.3219, 2^9 * 10)<br>&gt; 6.0&nbsp;&nbsp;&nbsp;&nbsp;16384.0&nbsp;&nbsp; =&nbsp;&nbsp;(2^14.0)<br>&gt; 7.0&nbsp;&nbsp;&nbsp;&nbsp;40960.0&nbsp;&nbsp; =&nbsp;&nbsp;(2^15.3219, 2^12 * 10)<br>&gt; 8.0&nbsp;&nbsp;&nbsp;&nbsp;81920.0&nbsp;&nbsp; =&nbsp;&nbsp;(2^16.3219, 2^13 * 10)<br>&gt; 10.0&nbsp;&nbsp; 327680.0&nbsp;&nbsp;=&nbsp;&nbsp;(2^18.3219, 2^15 * 10)<br>
&gt;<br>&gt; This example is using a query with two terms against a document that<br>&gt; contains those terms and a few others, in one searchable field.<br>&gt;<br>&gt; Is this the way document boost is supposed to work?&nbsp;&nbsp;Or have we<br>
&gt; misconfigured something? If we cannot use document boost to affect scoring<br>&gt; linearly, is there some other technique we can use?<br>&gt;<br>&gt; By the way, we&#39;re using SOLR to access Lucene.&nbsp;&nbsp;We can give more information<br>
&gt; if necessary, such as our SOLR schema.xml, if folks think that would help<br>&gt; explain things.&nbsp;&nbsp;Let us know what other information we can provide.<br>&gt;<br>&gt; Thanks,<br>&gt; Mike<br>&gt;<br>&gt;<br><br>---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a><br>For additional commands, e-mail: <a href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a><br>
<br></blockquote></div><br>

------=_Part_20189_9167505.1201723519066--

------=_Part_20188_19149020.1201723519065
Content-Type: text/xml; name=schema.xml
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fc2axp09
Content-Disposition: attachment; filename=schema.xml

PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8IS0tIFRoZSBTb2xyIHNjaGVtYSBmaWxlLiBUaGlzIGZp
bGUgc2hvdWxkIGJlIG5hbWVkICJzY2hlbWEueG1sIiBhbmQKIHNob3VsZCBiZSBpbiB0aGUgY29u
ZiBkaXJlY3RvcnkgdW5kZXIgdGhlIHNvbHIgaG9tZQogKGkuZS4gLi9zb2xyL2NvbmYvc2NoZW1h
LnhtbCBieSBkZWZhdWx0KQogb3IgbG9jYXRlZCB3aGVyZSB0aGUgY2xhc3Nsb2FkZXIgZm9yIHRo
ZSBTb2xyIHdlYmFwcCBjYW4gZmluZCBpdC4KCiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgb24gaG93
IHRvIGN1c3RvbWl6ZSB0aGlzIGZpbGUsIHBsZWFzZSBzZWUuLi4KIGh0dHA6Ly93aWtpLmFwYWNo
ZS5vcmcvc29sci9TY2hlbWFYbWwKLS0+Cgo8c2NoZW1hIG5hbWU9ImV4YW1wbGUiIHZlcnNpb249
IjEuMSI+CiAgPHR5cGVzPgogICAgPCEtLSBmaWVsZCB0eXBlIGRlZmluaXRpb25zLiBUaGUgIm5h
bWUiIGF0dHJpYnV0ZSBpcwogICAgICAgICBqdXN0IGEgbGFiZWwgdG8gYmUgdXNlZCBieSBmaWVs
ZCBkZWZpbml0aW9ucy4gIFRoZSAiY2xhc3MiCiAgICAgICAgIGF0dHJpYnV0ZSBhbmQgYW55IG90
aGVyIGF0dHJpYnV0ZXMgZGV0ZXJtaW5lIHRoZSByZWFsCiAgICAgICAgIGJlaGF2aW9yIG9mIHRo
ZSBmaWVsZHR5cGUuICAtLT4KCiAgICA8IS0tIFRoZSBTdHJpbmdGaWVsZCB0eXBlIGlzIG5vdCBh
bmFseXplZCwgYnV0IGluZGV4ZWQvc3RvcmVkIHZlcmJhdGltICAtLT4KICAgIDxmaWVsZHR5cGUg
bmFtZT0ic3RyaW5nIiBjbGFzcz0ic29sci5TdHJGaWVsZCIgc29ydE1pc3NpbmdMYXN0PSJ0cnVl
Ii8+CgogICAgPCEtLSBib29sZWFuIHR5cGU6ICJ0cnVlIiBvciAiZmFsc2UiIC0tPgogICAgPGZp
ZWxkdHlwZSBuYW1lPSJib29sZWFuIiBjbGFzcz0ic29sci5Cb29sRmllbGQiIHNvcnRNaXNzaW5n
TGFzdD0idHJ1ZSIvPgoKICAgIDwhLS0gVGhlIG9wdGlvbmFsIHNvcnRNaXNzaW5nTGFzdCBhbmQg
c29ydE1pc3NpbmdGaXJzdCBhdHRyaWJ1dGVzIGFyZQogICAgICAgICBjdXJyZW50bHkgc3VwcG9y
dGVkIG9uIHR5cGVzIHRoYXQgYXJlIHNvcnRlZCBpbnRlcm5hbGx5IGFzIGEgc3RyaW5ncy4KICAg
ICAgIC0gSWYgc29ydE1pc3NpbmdMYXN0PSJ0cnVlIiB0aGVuIGEgc29ydCBvbiB0aGlzIGZpZWxk
IHdpbGwgY2F1c2UgZG9jdW1lbnRzCiAgICAgICB3aXRob3V0IHRoZSBmaWVsZCB0byBjb21lIGFm
dGVyIGRvY3VtZW50cyB3aXRoIHRoZSBmaWVsZCwKICAgICAgIHJlZ2FyZGxlc3Mgb2YgdGhlIHJl
cXVlc3RlZCBzb3J0IG9yZGVyIChhc2Mgb3IgZGVzYykuCiAgICAgICAtIElmIHNvcnRNaXNzaW5n
Rmlyc3Q9InRydWUiIHRoZW4gYSBzb3J0IG9uIHRoaXMgZmllbGQgd2lsbCBjYXVzZSBkb2N1bWVu
dHMKICAgICAgIHdpdGhvdXQgdGhlIGZpZWxkIHRvIGNvbWUgYmVmb3JlIGRvY3VtZW50cyB3aXRo
IHRoZSBmaWVsZCwKICAgICAgIHJlZ2FyZGxlc3Mgb2YgdGhlIHJlcXVlc3RlZCBzb3J0IG9yZGVy
LgogICAgICAgLSBJZiBzb3J0TWlzc2luZ0xhc3Q9ImZhbHNlIiBhbmQgc29ydE1pc3NpbmdGaXJz
dD0iZmFsc2UiICh0aGUgZGVmYXVsdCksCiAgICAgICB0aGVuIGRlZmF1bHQgbHVjZW5lIHNvcnRp
bmcgd2lsbCBiZSB1c2VkIHdoaWNoIHBsYWNlcyBkb2NzIHdpdGhvdXQgdGhlIGZpZWxkCiAgICAg
ICBmaXJzdCBpbiBhbiBhc2NlbmRpbmcgc29ydCBhbmQgbGFzdCBpbiBhIGRlc2NlbmRpbmcgc29y
dC4KICAgIC0tPgoKCiAgICA8IS0tIG51bWVyaWMgZmllbGQgdHlwZXMgdGhhdCBzdG9yZSBhbmQg
aW5kZXggdGhlIHRleHQKICAgICAgICAgdmFsdWUgdmVyYmF0aW0gKGFuZCBoZW5jZSBkb24ndCBz
dXBwb3J0IHJhbmdlIHF1ZXJpZXMgc2luY2UgdGhlCiAgICAgICAgIGxleGljb2dyYXBoaWMgb3Jk
ZXJpbmcgaXNuJ3QgZXF1YWwgdG8gdGhlIG51bWVyaWMgb3JkZXJpbmcpIC0tPgogICAgPGZpZWxk
dHlwZSBuYW1lPSJpbnRlZ2VyIiBjbGFzcz0ic29sci5JbnRGaWVsZCIvPgogICAgPGZpZWxkdHlw
ZSBuYW1lPSJsb25nIiBjbGFzcz0ic29sci5Mb25nRmllbGQiLz4KICAgIDxmaWVsZHR5cGUgbmFt
ZT0iZmxvYXQiIGNsYXNzPSJzb2xyLkZsb2F0RmllbGQiLz4KICAgIDxmaWVsZHR5cGUgbmFtZT0i
ZG91YmxlIiBjbGFzcz0ic29sci5Eb3VibGVGaWVsZCIvPgoKCiAgICA8IS0tIE51bWVyaWMgZmll
bGQgdHlwZXMgdGhhdCBtYW5pcHVsYXRlIHRoZSB2YWx1ZSBpbnRvCiAgICAgICAgIGEgc3RyaW5n
IHZhbHVlIHRoYXQgaXNuJ3QgaHVtYW4gcmVhZGFibGUgaW4gaXQncyBpbnRlcm5hbCBmb3JtLAog
ICAgICAgICBidXQgd2l0aCBhIGxleGljb2dyYXBoaWMgb3JkZXJpbmcgdGhlIHNhbWUgYXMgdGhl
IG51bWVyaWMgb3JkZXJpbmcKICAgICAgICAgc28gdGhhdCByYW5nZSBxdWVyaWVzIGNvcnJlY3Rs
eSB3b3JrLiAtLT4KICAgIDxmaWVsZHR5cGUgbmFtZT0ic2ludCIgY2xhc3M9InNvbHIuU29ydGFi
bGVJbnRGaWVsZCIgc29ydE1pc3NpbmdMYXN0PSJ0cnVlIi8+CiAgICA8ZmllbGR0eXBlIG5hbWU9
InNsb25nIiBjbGFzcz0ic29sci5Tb3J0YWJsZUxvbmdGaWVsZCIgc29ydE1pc3NpbmdMYXN0PSJ0
cnVlIi8+CiAgICA8ZmllbGR0eXBlIG5hbWU9InNmbG9hdCIgY2xhc3M9InNvbHIuU29ydGFibGVG
bG9hdEZpZWxkIiBzb3J0TWlzc2luZ0xhc3Q9InRydWUiLz4KICAgIDxmaWVsZHR5cGUgbmFtZT0i
c2RvdWJsZSIgY2xhc3M9InNvbHIuU29ydGFibGVEb3VibGVGaWVsZCIgc29ydE1pc3NpbmdMYXN0
PSJ0cnVlIi8+CgoKICAgIDwhLS0gVGhlIGZvcm1hdCBmb3IgdGhpcyBkYXRlIGZpZWxkIGlzIG9m
IHRoZSBmb3JtIDE5OTUtMTItMzFUMjM6NTk6NTlaLCBhbmQKICAgICAgICAgaXMgYSBtb3JlIHJl
c3RyaWN0ZWQgZm9ybSBvZiB0aGUgY2Fub25pY2FsIHJlcHJlc2VudGF0aW9uIG9mIGRhdGVUaW1l
CiAgICAgICAgIGh0dHA6Ly93d3cudzMub3JnL1RSL3htbHNjaGVtYS0yLyNkYXRlVGltZQogICAg
ICAgICBUaGUgdHJhaWxpbmcgIloiIGRlc2lnbmF0ZXMgVVRDIHRpbWUgYW5kIGlzIG1hbmRhdG9y
eS4KICAgICAgICAgT3B0aW9uYWwgZnJhY3Rpb25hbCBzZWNvbmRzIGFyZSBhbGxvd2VkOiAxOTk1
LTEyLTMxVDIzOjU5OjU5Ljk5OVoKICAgICAgICAgQWxsIG90aGVyIGNvbXBvbmVudHMgYXJlIG1h
bmRhdG9yeS4gLS0+CiAgICA8ZmllbGR0eXBlIG5hbWU9ImRhdGUiIGNsYXNzPSJzb2xyLkRhdGVG
aWVsZCIgc29ydE1pc3NpbmdMYXN0PSJ0cnVlIi8+CgogICAgPCEtLSBzb2xyLlRleHRGaWVsZCBh
bGxvd3MgdGhlIHNwZWNpZmljYXRpb24gb2YgY3VzdG9tIHRleHQgYW5hbHl6ZXJzCiAgICAgICAg
IHNwZWNpZmllZCBhcyBhIHRva2VuaXplciBhbmQgYSBsaXN0IG9mIHRva2VuIGZpbHRlcnMuIERp
ZmZlcmVudAogICAgICAgICBhbmFseXplcnMgbWF5IGJlIHNwZWNpZmllZCBmb3IgaW5kZXhpbmcg
YW5kIHF1ZXJ5aW5nLgoKICAgICAgICAgVGhlIG9wdGlvbmFsIHBvc2l0aW9uSW5jcmVtZW50R2Fw
IHB1dHMgc3BhY2UgYmV0d2VlbiBtdWx0aXBsZSBmaWVsZHMgb2YKICAgICAgICAgdGhpcyB0eXBl
IG9uIHRoZSBzYW1lIGRvY3VtZW50LCB3aXRoIHRoZSBwdXJwb3NlIG9mIHByZXZlbnRpbmcgZmFs
c2UgcGhyYXNlCiAgICAgICAgIG1hdGNoaW5nIGFjcm9zcyBmaWVsZHMuCgogICAgICAgICBGb3Ig
bW9yZSBpbmZvIG9uIGN1c3RvbWl6aW5nIHlvdXIgYW5hbHl6ZXIgY2hhaW4sIHBsZWFzZSBzZWUu
Li4KCSAgaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9zb2xyL0FuYWx5emVyc1Rva2VuaXplcnNUb2tl
bkZpbHRlcnMKCiAgICAgLS0+CgogICAgIDwhLS0gU3RhbmRhcmQgYW5hbHl6ZXIgY29tbW9ubHkg
dXNlZCBieSBMdWNlbmUgZGV2ZWxvcGVycwogICAgIC0tPgogICAgPCEtLSBTdGFuZGFyZCBhbmFs
eXplciBjb21tb25seSB1c2VkIGJ5IEx1Y2VuZSBkZXZlbG9wZXJzIC0tPgogICAgPGZpZWxkdHlw
ZSBuYW1lPSJ0ZXh0X2x1IiBjbGFzcz0ic29sci5UZXh0RmllbGQiIHBvc2l0aW9uSW5jcmVtZW50
R2FwPSIxMDAiPgogICAgICA8YW5hbHl6ZXI+CiAgICAgICAgPHRva2VuaXplciBjbGFzcz0ic29s
ci5TdGFuZGFyZFRva2VuaXplckZhY3RvcnkiLz4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xy
LlN0YW5kYXJkRmlsdGVyRmFjdG9yeSIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuTG93
ZXJDYXNlRmlsdGVyRmFjdG9yeSIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuU3RvcEZp
bHRlckZhY3RvcnkiLz4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLkVuZ2xpc2hQb3J0ZXJG
aWx0ZXJGYWN0b3J5Ii8+CiAgICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5SZW1vdmVEdXBsaWNh
dGVzVG9rZW5GaWx0ZXJGYWN0b3J5Ii8+CiAgICAgIDwvYW5hbHl6ZXI+CiAgICA8L2ZpZWxkdHlw
ZT4KICAgIDwhLS0gT25lIGNvdWxkIGFsc28gc3BlY2lmeSBhbiBleGlzdGluZyBBbmFseXplciBp
bXBsZW1lbnRhdGlvbiBpbiBKYXZhCiAgICAgICAgIHZpYSB0aGUgY2xhc3MgYXR0cmlidXRlIG9u
IHRoZSBhbmFseXplciBlbGVtZW50OgogICAgPGZpZWxkdHlwZSBuYW1lPSJ0ZXh0X2x1IiBjbGFz
cz0ic29sci5UZXh0RmllbGQiPgogICAgICA8YW5hbHl6ZXIgY2xhc3M9Im9yZy5hcGFjaGUubHVj
ZW5lLmFuYWx5c2lzLnNub3diYWxsLlNub3diYWxsQW5hbHl6ZXIiLz4KICAgIDwvZmllbGRUeXBl
PgogICAgLS0+CgogICAgPCEtLSBBIHRleHQgZmllbGQgdGhhdCBvbmx5IHNwbGl0cyBvbiB3aGl0
ZXNwYWNlIGZvciBtb3JlIGV4YWN0IG1hdGNoaW5nIC0tPgogICAgPGZpZWxkdHlwZSBuYW1lPSJ0
ZXh0X3dzIiBjbGFzcz0ic29sci5UZXh0RmllbGQiIHBvc2l0aW9uSW5jcmVtZW50R2FwPSIxMDAi
PgogICAgICA8YW5hbHl6ZXI+CiAgICAgICAgPHRva2VuaXplciBjbGFzcz0ic29sci5XaGl0ZXNw
YWNlVG9rZW5pemVyRmFjdG9yeSIvPgogICAgICA8L2FuYWx5emVyPgogICAgPC9maWVsZHR5cGU+
CgogICAgPCEtLSBBIHRleHQgZmllbGQgdGhhdCB1c2VzIFdvcmREZWxpbWl0ZXJGaWx0ZXIgdG8g
ZW5hYmxlIHNwbGl0dGluZyBhbmQgbWF0Y2hpbmcgb2YKICAgICAgICB3b3JkcyBvbiBjYXNlLWNo
YW5nZSwgYWxwaGEgbnVtZXJpYyBib3VuZGFyaWVzLCBhbmQgbm9uLWFscGhhbnVtZXJpYyBjaGFy
cwogICAgICAgIHNvIHRoYXQgYSBxdWVyeSBvZiAid2lmaSIgb3IgIndpIGZpIiBjb3VsZCBtYXRj
aCBhIGRvY3VtZW50IGNvbnRhaW5pbmcgIldpLUZpIi4KICAgICAgICBTeW5vbnltcyBhbmQgc3Rv
cHdvcmRzIGFyZSBjdXN0b21pemVkIGJ5IGV4dGVybmFsIGZpbGVzLCBhbmQgc3RlbW1pbmcgaXMg
ZW5hYmxlZAogICAgICAgIER1cGxpY2F0ZSB0b2tlbnMgYXQgdGhlIHNhbWUgcG9zaXRpb24gKHdo
aWNoIG1heSByZXN1bHQgZnJvbSBTdGVtbWVkIFN5bm9ueW1zIG9yCiAgICAgICAgV29yZERlbGlt
IHBhcnRzKSBhcmUgcmVtb3ZlZC4KICAgICAgICAtLT4KICAgIDxmaWVsZHR5cGUgbmFtZT0idGV4
dCIgY2xhc3M9InNvbHIuVGV4dEZpZWxkIiBwb3NpdGlvbkluY3JlbWVudEdhcD0iMTAwIj4KICAg
ICAgPGFuYWx5emVyIHR5cGU9ImluZGV4Ij4KICAgICAgICAgIDx0b2tlbml6ZXIgY2xhc3M9InNv
bHIuV2hpdGVzcGFjZVRva2VuaXplckZhY3RvcnkiLz4KICAgICAgICAgIDwhLS0gaW4gdGhpcyBl
eGFtcGxlLCB3ZSB3aWxsIG9ubHkgdXNlIHN5bm9ueW1zIGF0IHF1ZXJ5IHRpbWUKICAgICAgICAg
IDxmaWx0ZXIgY2xhc3M9InNvbHIuU3lub255bUZpbHRlckZhY3RvcnkiIHN5bm9ueW1zPSJpbmRl
eF9zeW5vbnltcy50eHQiIGlnbm9yZUNhc2U9InRydWUiIGV4cGFuZD0iZmFsc2UiLz4KICAgICAg
ICAgIC0tPgogICAgICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5TdG9wRmlsdGVyRmFjdG9yeSIg
aWdub3JlQ2FzZT0idHJ1ZSIvPgogICAgICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5Xb3JkRGVs
aW1pdGVyRmlsdGVyRmFjdG9yeSIgZ2VuZXJhdGVXb3JkUGFydHM9IjEiIGdlbmVyYXRlTnVtYmVy
UGFydHM9IjEiIGNhdGVuYXRlV29yZHM9IjEiIGNhdGVuYXRlTnVtYmVycz0iMSIgY2F0ZW5hdGVB
bGw9IjAiLz4KICAgICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuTG93ZXJDYXNlRmlsdGVyRmFj
dG9yeSIvPgogICAgICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5FbmdsaXNoUG9ydGVyRmlsdGVy
RmFjdG9yeSIgcHJvdGVjdGVkPSJwcm90d29yZHMudHh0Ii8+CiAgICAgICAgICA8ZmlsdGVyIGNs
YXNzPSJzb2xyLlJlbW92ZUR1cGxpY2F0ZXNUb2tlbkZpbHRlckZhY3RvcnkiLz4KICAgICAgPC9h
bmFseXplcj4KICAgICAgPGFuYWx5emVyIHR5cGU9InF1ZXJ5Ij4KICAgICAgICAgIDx0b2tlbml6
ZXIgY2xhc3M9InNvbHIuV2hpdGVzcGFjZVRva2VuaXplckZhY3RvcnkiLz4KICAgICAgICAgIDxm
aWx0ZXIgY2xhc3M9InNvbHIuU3lub255bUZpbHRlckZhY3RvcnkiIHN5bm9ueW1zPSJzeW5vbnlt
cy50eHQiIGlnbm9yZUNhc2U9InRydWUiIGV4cGFuZD0idHJ1ZSIvPgogICAgICAgICAgPGZpbHRl
ciBjbGFzcz0ic29sci5TdG9wRmlsdGVyRmFjdG9yeSIgaWdub3JlQ2FzZT0idHJ1ZSIvPgogICAg
ICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5Xb3JkRGVsaW1pdGVyRmlsdGVyRmFjdG9yeSIgZ2Vu
ZXJhdGVXb3JkUGFydHM9IjEiIGdlbmVyYXRlTnVtYmVyUGFydHM9IjEiIGNhdGVuYXRlV29yZHM9
IjAiIGNhdGVuYXRlTnVtYmVycz0iMCIgY2F0ZW5hdGVBbGw9IjAiLz4KICAgICAgICAgIDxmaWx0
ZXIgY2xhc3M9InNvbHIuTG93ZXJDYXNlRmlsdGVyRmFjdG9yeSIvPgogICAgICAgICAgPGZpbHRl
ciBjbGFzcz0ic29sci5FbmdsaXNoUG9ydGVyRmlsdGVyRmFjdG9yeSIgcHJvdGVjdGVkPSJwcm90
d29yZHMudHh0Ii8+CiAgICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLlJlbW92ZUR1cGxpY2F0
ZXNUb2tlbkZpbHRlckZhY3RvcnkiLz4KICAgICAgPC9hbmFseXplcj4KICAgIDwvZmllbGR0eXBl
PgoKCiAgICA8IS0tIExlc3MgZmxleGlibGUgbWF0Y2hpbmcsIGJ1dCBsZXNzIGZhbHNlIG1hdGNo
ZXMuICBQcm9iYWJseSBub3QgaWRlYWwgZm9yIHByb2R1Y3QgbmFtZXMKICAgICAgICAgYnV0IG1h
eSBiZSBnb29kIGZvciBTS1VzLiAgQ2FuIGluc2VydCBkYXNoZXMgaW4gdGhlIHdyb25nIHBsYWNl
IGFuZCBzdGlsbCBtYXRjaC4gLS0+CiAgICA8ZmllbGR0eXBlIG5hbWU9InRleHRUaWdodCIgY2xh
c3M9InNvbHIuVGV4dEZpZWxkIiBwb3NpdGlvbkluY3JlbWVudEdhcD0iMTAwIiA+CiAgICAgIDxh
bmFseXplcj4KICAgICAgICA8dG9rZW5pemVyIGNsYXNzPSJzb2xyLldoaXRlc3BhY2VUb2tlbml6
ZXJGYWN0b3J5Ii8+CiAgICAgICAgPGZpbHRlciBjbGFzcz0ic29sci5TeW5vbnltRmlsdGVyRmFj
dG9yeSIgc3lub255bXM9InN5bm9ueW1zLnR4dCIgaWdub3JlQ2FzZT0idHJ1ZSIgZXhwYW5kPSJm
YWxzZSIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuU3RvcEZpbHRlckZhY3RvcnkiIGln
bm9yZUNhc2U9InRydWUiLz4KICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLldvcmREZWxpbWl0
ZXJGaWx0ZXJGYWN0b3J5IiBnZW5lcmF0ZVdvcmRQYXJ0cz0iMCIgZ2VuZXJhdGVOdW1iZXJQYXJ0
cz0iMCIgY2F0ZW5hdGVXb3Jkcz0iMSIgY2F0ZW5hdGVOdW1iZXJzPSIxIiBjYXRlbmF0ZUFsbD0i
MCIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuTG93ZXJDYXNlRmlsdGVyRmFjdG9yeSIv
PgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuRW5nbGlzaFBvcnRlckZpbHRlckZhY3Rvcnki
IHByb3RlY3RlZD0icHJvdHdvcmRzLnR4dCIvPgogICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIu
UmVtb3ZlRHVwbGljYXRlc1Rva2VuRmlsdGVyRmFjdG9yeSIvPgogICAgICA8L2FuYWx5emVyPgog
ICAgPC9maWVsZHR5cGU+CgogPC90eXBlcz4KCgogPGZpZWxkcz4KICAgPCEtLSBWYWxpZCBhdHRy
aWJ1dGVzIGZvciBmaWVsZHM6CiAgICAgICBuYW1lOiBtYW5kYXRvcnkgLSB0aGUgbmFtZSBmb3Ig
dGhlIGZpZWxkCiAgICAgICB0eXBlOiBtYW5kYXRvcnkgLSB0aGUgbmFtZSBvZiBhIHByZXZpb3Vz
bHkgZGVmaW5lZCB0eXBlIGZyb20gdGhlIDx0eXBlcz4gc2VjdGlvbgogICAgICAgaW5kZXhlZDog
dHJ1ZSBpZiB0aGlzIGZpZWxkIHNob3VsZCBiZSBpbmRleGVkIChzZWFyY2hhYmxlKQogICAgICAg
c3RvcmVkOiB0cnVlIGlmIHRoaXMgZmllbGQgc2hvdWxkIGJlIHJldHJpZXZhYmxlCiAgICAgICBt
dWx0aVZhbHVlZDogdHJ1ZSBpZiB0aGlzIGZpZWxkIG1heSBjb250YWluIG11bHRpcGxlIHZhbHVl
cyBwZXIgZG9jdW1lbnQKICAgICAgIG9taXROb3JtczogKGV4cGVydCkgc2V0IHRvIHRydWUgdG8g
b21pdCB0aGUgbm9ybXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZmllbGQKICAgICAgICAgICAgICAg
ICAgKHRoaXMgZGlzYWJsZXMgbGVuZ3RoIG5vcm1hbGl6YXRpb24gYW5kIGluZGV4LXRpbWUgYm9v
c3RpbmcgZm9yIHRoZSBmaWVsZCkKICAgLS0+CgogICA8ZmllbGQgbmFtZT0iaWQiIHR5cGU9InN0
cmluZyIgaW5kZXhlZD0iZmFsc2UiIHN0b3JlZD0idHJ1ZSIvPgogICA8ZmllbGQgbmFtZT0iY2xh
c3MiIHR5cGU9InRleHQiIGluZGV4ZWQ9InRydWUiIHN0b3JlZD0idHJ1ZSIvPgogICA8ZmllbGQg
bmFtZT0idW5pcXVlX2lkIiB0eXBlPSJzdHJpbmciIGluZGV4ZWQ9InRydWUiIHN0b3JlZD0idHJ1
ZSIvPgoKICAgPGZpZWxkIG5hbWU9ImJvZHkiIHR5cGU9InRleHQiIGluZGV4ZWQ9InRydWUiIHN0
b3JlZD0iZmFsc2UiLz4KICAgPGZpZWxkIG5hbWU9InRpdGxlIiB0eXBlPSJ0ZXh0IiBpbmRleGVk
PSJ0cnVlIiBzdG9yZWQ9ImZhbHNlIi8+CiAgIDxmaWVsZCBuYW1lPSJtZXNzYWdlc19zdHJpbmci
IHR5cGU9InRleHQiIGluZGV4ZWQ9InRydWUiIHN0b3JlZD0iZmFsc2UiLz4KICAgPGZpZWxkIG5h
bWU9InBhcnRpY2lwYW50c19zdHJpbmciIHR5cGU9InRleHQiIGluZGV4ZWQ9InRydWUiIHN0b3Jl
ZD0iZmFsc2UiLz4KICAgPGZpZWxkIG5hbWU9InRhZ3Nfc3RyaW5nIiB0eXBlPSJ0ZXh0IiBpbmRl
eGVkPSJ0cnVlIiBzdG9yZWQ9ImZhbHNlIi8+CiAgIDxmaWVsZCBuYW1lPSJzaXRlX2lkIiB0eXBl
PSJpbnRlZ2VyIiBpbmRleGVkPSJ0cnVlIiBzdG9yZWQ9ImZhbHNlIi8+CiAgIDxmaWVsZCBuYW1l
PSJzaXRlX2dyb3VwX2lkIiB0eXBlPSJpbnRlZ2VyIiBpbmRleGVkPSJ0cnVlIiBzdG9yZWQ9ImZh
bHNlIi8+CgogICA8IS0tIGNhdGNoYWxsIGZpZWxkLCBjb250YWluaW5nIGFsbCBvdGhlciBzZWFy
Y2hhYmxlIHRleHQgZmllbGRzIChpbXBsZW1lbnRlZAogICAgICAgIHZpYSBjb3B5RmllbGQgZnVy
dGhlciBvbiBpbiB0aGlzIHNjaGVtYSAgLS0+CiAgIDxmaWVsZCBuYW1lPSJ0ZXh0IiB0eXBlPSJ0
ZXh0IiBpbmRleGVkPSJ0cnVlIiBzdG9yZWQ9ImZhbHNlIiBtdWx0aVZhbHVlZD0idHJ1ZSIvPgoK
ICAgPCEtLSBub24tdG9rZW5pemVkIHZlcnNpb24gb2YgbWFudWZhY3R1cmVyIHRvIG1ha2UgaXQg
ZWFzaWVyIHRvIHNvcnQgb3IgZ3JvdXAKICAgICAgICByZXN1bHRzIGJ5IG5hbWUuICBjb3BpZWQg
ZnJvbSAibmFtZSIgdmlhIGNvcHlGaWVsZCAtLT4KCiAgIDwhLS0gRHluYW1pYyBmaWVsZCBkZWZp
bml0aW9ucy4gIElmIGEgZmllbGQgbmFtZSBpcyBub3QgZm91bmQsIGR5bmFtaWNGaWVsZHMKICAg
ICAgICB3aWxsIGJlIHVzZWQgaWYgdGhlIG5hbWUgbWF0Y2hlcyBhbnkgb2YgdGhlIHBhdHRlcm5z
LgogICAgICAgIFJFU1RSSUNUSU9OOiB0aGUgZ2xvYi1saWtlIHBhdHRlcm4gaW4gdGhlIG5hbWUg
YXR0cmlidXRlIG11c3QgaGF2ZQogICAgICAgIGEgIioiIG9ubHkgYXQgdGhlIHN0YXJ0IG9yIHRo
ZSBlbmQuCiAgICAgICAgRVhBTVBMRTogIG5hbWU9IipfaSIgd2lsbCBtYXRjaCBhbnkgZmllbGQg
ZW5kaW5nIGluIF9pIChsaWtlIG15aWRfaSwgel9pKQogICAgICAgIExvbmdlciBwYXR0ZXJucyB3
aWxsIGJlIG1hdGNoZWQgZmlyc3QuICBpZiBlcXVhbCBzaXplIHBhdHRlcm5zCiAgICAgICAgYm90
aCBtYXRjaCwgdGhlIGZpcnN0IGFwcGVhcmluZyBpbiB0aGUgc2NoZW1hIHdpbGwgYmUgdXNlZC4g
IC0tPgogICA8ZHluYW1pY0ZpZWxkIG5hbWU9IipfaSIgIHR5cGU9InNpbnQiICAgIGluZGV4ZWQ9
InRydWUiICBzdG9yZWQ9InRydWUiLz4KICAgPGR5bmFtaWNGaWVsZCBuYW1lPSIqX3MiICB0eXBl
PSJzdHJpbmciICBpbmRleGVkPSJ0cnVlIiAgc3RvcmVkPSJ0cnVlIi8+CiAgIDxkeW5hbWljRmll
bGQgbmFtZT0iKl9sIiAgdHlwZT0ic2xvbmciICAgaW5kZXhlZD0idHJ1ZSIgIHN0b3JlZD0idHJ1
ZSIvPgogICA8ZHluYW1pY0ZpZWxkIG5hbWU9IipfdCIgIHR5cGU9InRleHQiICAgIGluZGV4ZWQ9
InRydWUiICBzdG9yZWQ9InRydWUiLz4KICAgPGR5bmFtaWNGaWVsZCBuYW1lPSIqX2IiICB0eXBl
PSJib29sZWFuIiBpbmRleGVkPSJ0cnVlIiAgc3RvcmVkPSJ0cnVlIi8+CiAgIDxkeW5hbWljRmll
bGQgbmFtZT0iKl9mIiAgdHlwZT0ic2Zsb2F0IiAgaW5kZXhlZD0idHJ1ZSIgIHN0b3JlZD0idHJ1
ZSIvPgogICA8ZHluYW1pY0ZpZWxkIG5hbWU9IipfZCIgIHR5cGU9InNkb3VibGUiIGluZGV4ZWQ9
InRydWUiICBzdG9yZWQ9InRydWUiLz4KICAgPGR5bmFtaWNGaWVsZCBuYW1lPSIqX2R0IiB0eXBl
PSJkYXRlIiAgICBpbmRleGVkPSJ0cnVlIiAgc3RvcmVkPSJ0cnVlIi8+CiA8L2ZpZWxkcz4KCiA8
IS0tIGZpZWxkIHRvIHVzZSB0byBkZXRlcm1pbmUgYW5kIGVuZm9yY2UgZG9jdW1lbnQgdW5pcXVl
bmVzcy4gLS0+CiA8dW5pcXVlS2V5PnVuaXF1ZV9pZDwvdW5pcXVlS2V5PgoKIDwhLS0gZmllbGQg
Zm9yIHRoZSBRdWVyeVBhcnNlciB0byB1c2Ugd2hlbiBhbiBleHBsaWNpdCBmaWVsZG5hbWUgaXMg
YWJzZW50IC0tPgogPGRlZmF1bHRTZWFyY2hGaWVsZD50ZXh0PC9kZWZhdWx0U2VhcmNoRmllbGQ+
CgogPCEtLSBTb2xyUXVlcnlQYXJzZXIgY29uZmlndXJhdGlvbjoKICAgICAgICBkZWZhdWx0T3Bl
cmF0b3I9IkFORHxPUiIKIC0tPgogPHNvbHJRdWVyeVBhcnNlciBkZWZhdWx0T3BlcmF0b3I9Ik9S
Ii8+CgogIDwhLS0gY29weUZpZWxkIGNvbW1hbmRzIGNvcHkgb25lIGZpZWxkIHRvIGFub3RoZXIg
YXQgdGhlIHRpbWUgYSBkb2N1bWVudAogICAgICAgIGlzIGFkZGVkIHRvIHRoZSBpbmRleC4gIEl0
J3MgdXNlZCBlaXRoZXIgdG8gaW5kZXggdGhlIHNhbWUgZmllbGQgZGlmZmVyZW50CiAgICAgICAg
d2F5cywgb3IgdG8gYWRkIG11bHRpcGxlIGZpZWxkcyB0byB0aGUgc2FtZSBmaWVsZCBmb3IgZWFz
aWVyL2Zhc3RlciBzZWFyY2hpbmcuICAtLT4KCiAgIDwhLS08Y29weUZpZWxkIHNvdXJjZT0iY2F0
IiBkZXN0PSJ0ZXh0Ii8+LS0+CiAgIDxjb3B5RmllbGQgc291cmNlPSJib2R5IiBkZXN0PSJ0ZXh0
Ii8+CiAgIDxjb3B5RmllbGQgc291cmNlPSJ0aXRsZSIgZGVzdD0idGV4dCIvPgogICA8Y29weUZp
ZWxkIHNvdXJjZT0ibWVzc2FnZXNfc3RyaW5nIiBkZXN0PSJ0ZXh0Ii8+CiAgIDxjb3B5RmllbGQg
c291cmNlPSJwYXJ0aWNpcGFudHNfc3RyaW5nIiBkZXN0PSJ0ZXh0Ii8+CiAgIDxjb3B5RmllbGQg
c291cmNlPSJ0YWdzX3N0cmluZyIgZGVzdD0idGV4dCIvPgoKIDwhLS0gU2ltaWxhcml0eSBpcyB0
aGUgc2NvcmluZyByb3V0aW5lIGZvciBlYWNoIGRvY3VtZW50IHZzIGEgcXVlcnkuCiAgICAgIEEg
Y3VzdG9tIHNpbWlsYXJpdHkgbWF5IGJlIHNwZWNpZmllZCBoZXJlLCBidXQgdGhlIGRlZmF1bHQg
aXMgZmluZQogICAgICBmb3IgbW9zdCBhcHBsaWNhdGlvbnMuICAtLT4KIDwhLS0gPHNpbWlsYXJp
dHkgY2xhc3M9Im9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5EZWZhdWx0U2ltaWxhcml0eSIvPiAt
LT4KCjwvc2NoZW1hPgoK
------=_Part_20188_19149020.1201723519065
Content-Type: text/xml; name=solrconfig.xml
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fc2b0m8h
Content-Disposition: attachment; filename=solrconfig.xml

PD94bWwgdmVyc2lvbj0iMS4wIiA/PgoKPGNvbmZpZz4KCiAgPCEtLSBVc2VkIHRvIHNwZWNpZnkg
YW4gYWx0ZXJuYXRlIGRpcmVjdG9yeSB0byBob2xkIGFsbCBpbmRleCBkYXRhCiAgICAgICBvdGhl
ciB0aGFuIHRoZSBkZWZhdWx0IC4vZGF0YSB1bmRlciB0aGUgU29sciBob21lLgogICAgICAgSWYg
cmVwbGljYXRpb24gaXMgaW4gdXNlLCB0aGlzIHNob3VsZCBtYXRjaCB0aGUgcmVwbGljYXRpb24g
Y29uZmlndXJhdGlvbi4gLS0+CgogIDxkYXRhRGlyPi4uLy4uLy4uL3NvbHJkYXRhL2RldmVsb3Bt
ZW50PC9kYXRhRGlyPgoKCiAgPGluZGV4RGVmYXVsdHM+CiAgIDwhLS0gVmFsdWVzIGhlcmUgYWZm
ZWN0IGFsbCBpbmRleCB3cml0ZXJzIGFuZCBhY3QgYXMgYSBkZWZhdWx0IHVubGVzcyBvdmVycmlk
ZGVuLiAtLT4KICAgIDx1c2VDb21wb3VuZEZpbGU+ZmFsc2U8L3VzZUNvbXBvdW5kRmlsZT4KICAg
IDxtZXJnZUZhY3Rvcj4xMDwvbWVyZ2VGYWN0b3I+CiAgICA8bWF4QnVmZmVyZWREb2NzPjEwMDA8
L21heEJ1ZmZlcmVkRG9jcz4KICAgIDxtYXhNZXJnZURvY3M+MjE0NzQ4MzY0NzwvbWF4TWVyZ2VE
b2NzPgogICAgPG1heEZpZWxkTGVuZ3RoPjEwMDAwPC9tYXhGaWVsZExlbmd0aD4KICAgIDx3cml0
ZUxvY2tUaW1lb3V0PjEwMDA8L3dyaXRlTG9ja1RpbWVvdXQ+CiAgICA8Y29tbWl0TG9ja1RpbWVv
dXQ+MTAwMDA8L2NvbW1pdExvY2tUaW1lb3V0PgogIDwvaW5kZXhEZWZhdWx0cz4KCiAgPG1haW5J
bmRleD4KICAgIDwhLS0gb3B0aW9ucyBzcGVjaWZpYyB0byB0aGUgbWFpbiBvbi1kaXNrIGx1Y2Vu
ZSBpbmRleCAtLT4KICAgIDx1c2VDb21wb3VuZEZpbGU+ZmFsc2U8L3VzZUNvbXBvdW5kRmlsZT4K
ICAgIDxtZXJnZUZhY3Rvcj4xMDwvbWVyZ2VGYWN0b3I+CiAgICA8bWF4QnVmZmVyZWREb2NzPjEw
MDA8L21heEJ1ZmZlcmVkRG9jcz4KICAgIDxtYXhNZXJnZURvY3M+MjE0NzQ4MzY0NzwvbWF4TWVy
Z2VEb2NzPgogICAgPG1heEZpZWxkTGVuZ3RoPjEwMDAwPC9tYXhGaWVsZExlbmd0aD4KCiAgICA8
IS0tIElmIHRydWUsIHVubG9jayBhbnkgaGVsZCB3cml0ZSBvciBjb21taXQgbG9ja3Mgb24gc3Rh
cnR1cC4KICAgICAgICAgVGhpcyBkZWZlYXRzIHRoZSBsb2NraW5nIG1lY2hhbmlzbSB0aGF0IGFs
bG93cyBtdWx0aXBsZQogICAgICAgICBwcm9jZXNzZXMgdG8gc2FmZWx5IGFjY2VzcyBhIGx1Y2Vu
ZSBpbmRleCwgYW5kIHNob3VsZCBiZQogICAgICAgICB1c2VkIHdpdGggY2FyZS4gLS0+CiAgICA8
dW5sb2NrT25TdGFydHVwPmZhbHNlPC91bmxvY2tPblN0YXJ0dXA+CiAgPC9tYWluSW5kZXg+Cgog
IDwhLS0gdGhlIGRlZmF1bHQgaGlnaC1wZXJmb3JtYW5jZSB1cGRhdGUgaGFuZGxlciAtLT4KICA8
dXBkYXRlSGFuZGxlciBjbGFzcz0ic29sci5EaXJlY3RVcGRhdGVIYW5kbGVyMiI+CgogICAgPCEt
LSBUaGUgUnVuRXhlY3V0YWJsZUxpc3RlbmVyIGV4ZWN1dGVzIGFuIGV4dGVybmFsIGNvbW1hbmQu
CiAgICAgICAgIGV4ZSAtIHRoZSBuYW1lIG9mIHRoZSBleGVjdXRhYmxlIHRvIHJ1bgogICAgICAg
ICBkaXIgLSBkaXIgdG8gdXNlIGFzIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5LiBkZWZh
dWx0PSIuIgogICAgICAgICB3YWl0IC0gdGhlIGNhbGxpbmcgdGhyZWFkIHdhaXRzIHVudGlsIHRo
ZSBleGVjdXRhYmxlIHJldHVybnMuIGRlZmF1bHQ9InRydWUiCiAgICAgICAgIGFyZ3MgLSB0aGUg
YXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHByb2dyYW0uICBkZWZhdWx0PW5vdGhpbmcKICAgICAg
ICAgZW52IC0gZW52aXJvbm1lbnQgdmFyaWFibGVzIHRvIHNldC4gIGRlZmF1bHQ9bm90aGluZwog
ICAgICAtLT4KICAgIDwhLS0gQSBwb3N0Q29tbWl0IGV2ZW50IGlzIGZpcmVkIGFmdGVyIGV2ZXJ5
IGNvbW1pdCBvciBvcHRpbWl6ZSBjb21tYW5kCiAgICA8bGlzdGVuZXIgZXZlbnQ9InBvc3RDb21t
aXQiIGNsYXNzPSJzb2xyLlJ1bkV4ZWN1dGFibGVMaXN0ZW5lciI+CiAgICAgIDxzdHIgbmFtZT0i
ZXhlIj5zbmFwc2hvb3Rlcjwvc3RyPgogICAgICA8c3RyIG5hbWU9ImRpciI+c29sci9iaW48L3N0
cj4KICAgICAgPGJvb2wgbmFtZT0id2FpdCI+dHJ1ZTwvYm9vbD4KICAgICAgPGFyciBuYW1lPSJh
cmdzIj4gPHN0cj5hcmcxPC9zdHI+IDxzdHI+YXJnMjwvc3RyPiA8L2Fycj4KICAgICAgPGFyciBu
YW1lPSJlbnYiPiA8c3RyPk1ZVkFSPXZhbDE8L3N0cj4gPC9hcnI+CiAgICA8L2xpc3RlbmVyPgog
ICAgLS0+CiAgICA8IS0tIEEgcG9zdE9wdGltaXplIGV2ZW50IGlzIGZpcmVkIG9ubHkgYWZ0ZXIg
ZXZlcnkgb3B0aW1pemUgY29tbWFuZCwgdXNlZnVsCiAgICAgICAgIGluIGNvbmp1bmN0aW9uIHdp
dGggaW5kZXggZGlzdHJpYnV0aW9uIHRvIG9ubHkgZGlzdHJpYnV0ZSBvcHRpbWl6ZWQgaW5kaWNp
ZXMKICAgIDxsaXN0ZW5lciBldmVudD0icG9zdE9wdGltaXplIiBjbGFzcz0ic29sci5SdW5FeGVj
dXRhYmxlTGlzdGVuZXIiPgogICAgICA8c3RyIG5hbWU9ImV4ZSI+c25hcHNob290ZXI8L3N0cj4K
ICAgICAgPHN0ciBuYW1lPSJkaXIiPnNvbHIvYmluPC9zdHI+CiAgICAgIDxib29sIG5hbWU9Indh
aXQiPnRydWU8L2Jvb2w+CiAgICA8L2xpc3RlbmVyPgogICAgLS0+CgogIDwvdXBkYXRlSGFuZGxl
cj4KCgogIDxxdWVyeT4KICAgIDwhLS0gTWF4aW11bSBudW1iZXIgb2YgY2xhdXNlcyBpbiBhIGJv
b2xlYW4gcXVlcnkuLi4gY2FuIGFmZmVjdAogICAgICAgIHJhbmdlIG9yIHByZWZpeCBxdWVyaWVz
IHRoYXQgZXhwYW5kIHRvIGJpZyBib29sZWFuCiAgICAgICAgcXVlcmllcy4gIEFuIGV4Y2VwdGlv
biBpcyB0aHJvd24gaWYgZXhjZWVkZWQuICAtLT4KICAgIDxtYXhCb29sZWFuQ2xhdXNlcz4xMDI0
PC9tYXhCb29sZWFuQ2xhdXNlcz4KCgogICAgPCEtLSBDYWNoZSB1c2VkIGJ5IFNvbHJJbmRleFNl
YXJjaGVyIGZvciBmaWx0ZXJzIChEb2NTZXRzKSwKICAgICAgICAgdW5vcmRlcmVkIHNldHMgb2Yg
KmFsbCogZG9jdW1lbnRzIHRoYXQgbWF0Y2ggYSBxdWVyeS4KICAgICAgICAgV2hlbiBhIG5ldyBz
ZWFyY2hlciBpcyBvcGVuZWQsIGl0cyBjYWNoZXMgbWF5IGJlIHByZXBvcHVsYXRlZAogICAgICAg
ICBvciAiYXV0b3dhcm1lZCIgdXNpbmcgZGF0YSBmcm9tIGNhY2hlcyBpbiB0aGUgb2xkIHNlYXJj
aGVyLgogICAgICAgICBhdXRvd2FybUNvdW50IGlzIHRoZSBudW1iZXIgb2YgaXRlbXMgdG8gcHJl
cG9wdWxhdGUuICBGb3IgTFJVQ2FjaGUsCiAgICAgICAgIHRoZSBhdXRvd2FybWVkIGl0ZW1zIHdp
bGwgYmUgdGhlIG1vc3QgcmVjZW50bHkgYWNjZXNzZWQgaXRlbXMuCiAgICAgICBQYXJhbWV0ZXJz
OgogICAgICAgICBjbGFzcyAtIHRoZSBTb2xyQ2FjaGUgaW1wbGVtZW50YXRpb24gKGN1cnJlbnRs
eSBvbmx5IExSVUNhY2hlKQogICAgICAgICBzaXplIC0gdGhlIG1heGltdW0gbnVtYmVyIG9mIGVu
dHJpZXMgaW4gdGhlIGNhY2hlCiAgICAgICAgIGluaXRpYWxTaXplIC0gdGhlIGluaXRpYWwgY2Fw
YWNpdHkgKG51bWJlciBvZiBlbnRyaWVzKSBvZgogICAgICAgICAgIHRoZSBjYWNoZS4gIChzZWVs
IGphdmEudXRpbC5IYXNoTWFwKQogICAgICAgICBhdXRvd2FybUNvdW50IC0gdGhlIG51bWJlciBv
ZiBlbnRyaWVzIHRvIHByZXBvcHVsYXRlIGZyb20KICAgICAgICAgICBhbmQgb2xkIGNhY2hlLgog
ICAgICAgICAtLT4KICAgIDxmaWx0ZXJDYWNoZQogICAgICBjbGFzcz0ic29sci5MUlVDYWNoZSIK
ICAgICAgc2l6ZT0iNTEyIgogICAgICBpbml0aWFsU2l6ZT0iNTEyIgogICAgICBhdXRvd2FybUNv
dW50PSIyNTYiLz4KCiAgIDwhLS0gcXVlcnlSZXN1bHRDYWNoZSBjYWNoZXMgcmVzdWx0cyBvZiBz
ZWFyY2hlcyAtIG9yZGVyZWQgbGlzdHMgb2YKICAgICAgICAgZG9jdW1lbnQgaWRzIChEb2NMaXN0
KSBiYXNlZCBvbiBhIHF1ZXJ5LCBhIHNvcnQsIGFuZCB0aGUgcmFuZ2UKICAgICAgICAgb2YgZG9j
dW1lbnRzIHJlcXVlc3RlZC4gIC0tPgogICAgPHF1ZXJ5UmVzdWx0Q2FjaGUKICAgICAgY2xhc3M9
InNvbHIuTFJVQ2FjaGUiCiAgICAgIHNpemU9IjUxMiIKICAgICAgaW5pdGlhbFNpemU9IjUxMiIK
ICAgICAgYXV0b3dhcm1Db3VudD0iMjU2Ii8+CgogIDwhLS0gZG9jdW1lbnRDYWNoZSBjYWNoZXMg
THVjZW5lIERvY3VtZW50IG9iamVjdHMgKHRoZSBzdG9yZWQgZmllbGRzIGZvciBlYWNoIGRvY3Vt
ZW50KS4KICAgICAgIFNpbmNlIEx1Y2VuZSBpbnRlcm5hbCBkb2N1bWVudCBpZHMgYXJlIHRyYW5z
aWVudCwgdGhpcyBjYWNoZSB3aWxsIG5vdCBiZSBhdXRvd2FybWVkLiAgLS0+CiAgICA8ZG9jdW1l
bnRDYWNoZQogICAgICBjbGFzcz0ic29sci5MUlVDYWNoZSIKICAgICAgc2l6ZT0iNTEyIgogICAg
ICBpbml0aWFsU2l6ZT0iNTEyIgogICAgICBhdXRvd2FybUNvdW50PSIwIi8+CgogICAgPCEtLSBF
eGFtcGxlIG9mIGEgZ2VuZXJpYyBjYWNoZS4gIFRoZXNlIGNhY2hlcyBtYXkgYmUgYWNjZXNzZWQg
YnkgbmFtZQogICAgICAgICB0aHJvdWdoIFNvbHJJbmRleFNlYXJjaGVyLmdldENhY2hlKCksY2Fj
aGVMb29rdXAoKSwgYW5kIGNhY2hlSW5zZXJ0KCkuCiAgICAgICAgIFRoZSBwdXJwb3NlIGlzIHRv
IGVuYWJsZSBlYXN5IGNhY2hpbmcgb2YgdXNlci9hcHBsaWNhdGlvbiBsZXZlbCBkYXRhLgogICAg
ICAgICBUaGUgcmVnZW5lcmF0b3IgYXJndW1lbnQgc2hvdWxkIGJlIHNwZWNpZmllZCBhcyBhbiBp
bXBsZW1lbnRhdGlvbgogICAgICAgICBvZiBzb2xyLnNlYXJjaC5DYWNoZVJlZ2VuZXJhdG9yIGlm
IGF1dG93YXJtaW5nIGlzIGRlc2lyZWQuICAtLT4KICAgIDwhLS0KICAgIDxjYWNoZSBuYW1lPSJt
eVVzZXJDYWNoZSIKICAgICAgY2xhc3M9InNvbHIuTFJVQ2FjaGUiCiAgICAgIHNpemU9IjQwOTYi
CiAgICAgIGluaXRpYWxTaXplPSIxMDI0IgogICAgICBhdXRvd2FybUNvdW50PSIxMDI0IgogICAg
ICByZWdlbmVyYXRvcj0ib3JnLm15Y29tcGFueS5teXBhY2thZ2UuTXlSZWdlbmVyYXRvciIKICAg
ICAgLz4KICAgIC0tPgoKICAgPCEtLSBBbiBvcHRpbWl6YXRpb24gdGhhdCBhdHRlbXB0cyB0byB1
c2UgYSBmaWx0ZXIgdG8gc2F0aXNmeSBhIHNlYXJjaC4KICAgICAgICAgSWYgdGhlIHJlcXVlc3Rl
ZCBzb3J0IGRvZXMgbm90IGluY2x1ZGUgc2NvcmUsIHRoZW4gdGhlIGZpbHRlckNhY2hlCiAgICAg
ICAgIHdpbGwgYmUgY2hlY2tlZCBmb3IgYSBmaWx0ZXIgbWF0Y2hpbmcgdGhlIHF1ZXJ5LiBJZiBm
b3VuZCwgdGhlIGZpbHRlcgogICAgICAgICB3aWxsIGJlIHVzZWQgYXMgdGhlIHNvdXJjZSBvZiBk
b2N1bWVudCBpZHMsIGFuZCB0aGVuIHRoZSBzb3J0IHdpbGwgYmUKICAgICAgICAgYXBwbGllZCB0
byB0aGF0LiAgLS0+CiAgICA8dXNlRmlsdGVyRm9yU29ydGVkUXVlcnk+dHJ1ZTwvdXNlRmlsdGVy
Rm9yU29ydGVkUXVlcnk+CgogICA8IS0tIEFuIG9wdGltaXphdGlvbiBmb3IgdXNlIHdpdGggdGhl
IHF1ZXJ5UmVzdWx0Q2FjaGUuICBXaGVuIGEgc2VhcmNoCiAgICAgICAgIGlzIHJlcXVlc3RlZCwg
YSBzdXBlcnNldCBvZiB0aGUgcmVxdWVzdGVkIG51bWJlciBvZiBkb2N1bWVudCBpZHMKICAgICAg
ICAgYXJlIGNvbGxlY3RlZC4gIEZvciBleGFtcGxlLCBpZiBhIHNlYXJjaCBmb3IgYSBwYXJ0aWN1
bGFyIHF1ZXJ5CiAgICAgICAgIHJlcXVlc3RzIG1hdGNoaW5nIGRvY3VtZW50cyAxMCB0aHJvdWdo
IDE5LCBhbmQgcXVlcnlXaW5kb3dTaXplIGlzIDUwLAogICAgICAgICB0aGVuIGRvY3VtZW50cyAw
IHRocm91Z2ggNTAgd2lsbCBiZSBjb2xsZWN0ZWQgYW5kIGNhY2hlZC4gIEFueSBmdXJ0aGVyCiAg
ICAgICAgIHJlcXVlc3RzIGluIHRoYXQgcmFuZ2UgY2FuIGJlIHNhdGlzZmllZCB2aWEgdGhlIGNh
Y2hlLiAgLS0+CiAgICA8cXVlcnlSZXN1bHRXaW5kb3dTaXplPjEwPC9xdWVyeVJlc3VsdFdpbmRv
d1NpemU+CgogICAgPCEtLSBUaGlzIGVudHJ5IGVuYWJsZXMgYW4gaW50IGhhc2ggcmVwcmVzZW50
YXRpb24gZm9yIGZpbHRlcnMgKERvY1NldHMpCiAgICAgICAgIHdoZW4gdGhlIG51bWJlciBvZiBp
dGVtcyBpbiB0aGUgc2V0IGlzIGxlc3MgdGhhbiBtYXhTaXplLiAgRm9yIHNtYWxsZXIKICAgICAg
ICAgc2V0cywgdGhpcyByZXByZXNlbnRhdGlvbiBpcyBtb3JlIG1lbW9yeSBlZmZpY2llbnQsIG1v
cmUgZWZmaWNpZW50IHRvCiAgICAgICAgIGl0ZXJhdGUgb3ZlciwgYW5kIGZhc3RlciB0byB0YWtl
IGludGVyc2VjdGlvbnMuICAtLT4KICAgIDxIYXNoRG9jU2V0IG1heFNpemU9IjMwMDAiIGxvYWRG
YWN0b3I9IjAuNzUiLz4KCgogICAgPCEtLSBib29sVG9GaWx0ZXJPcHRpbWl6ZXIgY29udmVydHMg
Ym9vbGVhbiBjbGF1c2VzIHdpdGggemVybyBib29zdAogICAgICAgICBpbnRvIGNhY2hlZCBmaWx0
ZXJzIGlmIHRoZSBudW1iZXIgb2YgZG9jcyBzZWxlY3RlZCBieSB0aGUgY2xhdXNlIGV4Y2VlZHMK
ICAgICAgICAgdGhlIHRocmVzaG9sZCAocmVwcmVzZW50ZWQgYXMgYSBmcmFjdGlvbiBvZiB0aGUg
dG90YWwgaW5kZXgpIC0tPgogICAgPGJvb2xUb2ZpbHRlck9wdGltaXplciBlbmFibGVkPSJ0cnVl
IiBjYWNoZVNpemU9IjMyIiB0aHJlc2hvbGQ9Ii4wNSIvPgoKCiAgICA8IS0tIGEgbmV3U2VhcmNo
ZXIgZXZlbnQgaXMgZmlyZWQgd2hlbmV2ZXIgYSBuZXcgc2VhcmNoZXIgaXMgYmVpbmcgcHJlcGFy
ZWQKICAgICAgICAgYW5kIHRoZXJlIGlzIGEgY3VycmVudCBzZWFyY2hlciBoYW5kbGluZyByZXF1
ZXN0cyAoYWthIHJlZ2lzdGVyZWQpLiAtLT4KICAgIDwhLS0gUXVlcnlTZW5kZXJMaXN0ZW5lciB0
YWtlcyBhbiBhcnJheSBvZiBOYW1lZExpc3QgYW5kIGV4ZWN1dGVzIGEKICAgICAgICAgbG9jYWwg
cXVlcnkgcmVxdWVzdCBmb3IgZWFjaCBOYW1lZExpc3QgaW4gc2VxdWVuY2UuIC0tPgogICAgPCEt
LQogICAgPGxpc3RlbmVyIGV2ZW50PSJuZXdTZWFyY2hlciIgY2xhc3M9InNvbHIuUXVlcnlTZW5k
ZXJMaXN0ZW5lciI+CiAgICAgIDxhcnIgbmFtZT0icXVlcmllcyI+CiAgICAgICAgPGxzdD4gPHN0
ciBuYW1lPSJxIj5zb2xyPC9zdHI+IDxzdHIgbmFtZT0ic3RhcnQiPjA8L3N0cj4gPHN0ciBuYW1l
PSJyb3dzIj4xMDwvc3RyPiA8L2xzdD4KICAgICAgICA8bHN0PiA8c3RyIG5hbWU9InEiPnJvY2tz
PC9zdHI+IDxzdHIgbmFtZT0ic3RhcnQiPjA8L3N0cj4gPHN0ciBuYW1lPSJyb3dzIj4xMDwvc3Ry
PiA8L2xzdD4KICAgICAgPC9hcnI+CiAgICA8L2xpc3RlbmVyPgogICAgLS0+CgogICAgPCEtLSBh
IGZpcnN0U2VhcmNoZXIgZXZlbnQgaXMgZmlyZWQgd2hlbmV2ZXIgYSBuZXcgc2VhcmNoZXIgaXMg
YmVpbmcKICAgICAgICAgcHJlcGFyZWQgYnV0IHRoZXJlIGlzIG5vIGN1cnJlbnQgcmVnaXN0ZXJl
ZCBzZWFyY2hlciB0byBoYW5kbGUKICAgICAgICAgcmVxdWVzdHMgb3IgdG8gZ2FpbiBhdXRvd2Fy
bWluZyBkYXRhIGZyb20uIC0tPgogICAgPCEtLQogICAgPGxpc3RlbmVyIGV2ZW50PSJmaXJzdFNl
YXJjaGVyIiBjbGFzcz0ic29sci5RdWVyeVNlbmRlckxpc3RlbmVyIj4KICAgICAgPGFyciBuYW1l
PSJxdWVyaWVzIj4KICAgICAgICA8bHN0PiA8c3RyIG5hbWU9InEiPmZhc3Rfd2FybTwvc3RyPiA8
c3RyIG5hbWU9InN0YXJ0Ij4wPC9zdHI+IDxzdHIgbmFtZT0icm93cyI+MTA8L3N0cj4gPC9sc3Q+
CiAgICAgIDwvYXJyPgogICAgPC9saXN0ZW5lcj4KICAgIC0tPgoKICA8L3F1ZXJ5PgoKCiAgPCEt
LSByZXF1ZXN0SGFuZGxlciBwbHVnaW5zLi4uIGluY29taW5nIHF1ZXJpZXMgd2lsbCBiZSBkaXNw
YXRjaGVkIHRvIHRoZQogICAgIGNvcnJlY3QgaGFuZGxlciBiYXNlZCBvbiB0aGUgcXQgKHF1ZXJ5
IHR5cGUpIHBhcmFtIG1hdGNoaW5nIHRoZQogICAgIG5hbWUgb2YgcmVnaXN0ZXJlZCBoYW5kbGVy
cy4KICAgICBUaGUgInN0YW5kYXJkIiByZXF1ZXN0IGhhbmRsZXIgaXMgdGhlIGRlZmF1bHQgYW5k
IHdpbGwgYmUgdXNlZCBpZiBxdAogICAgIGlzIG5vdCBzcGVjaWZpZWQgaW4gdGhlIHJlcXVlc3Qu
CiAgLS0+CiAgPHJlcXVlc3RIYW5kbGVyIG5hbWU9InN0YW5kYXJkIiBjbGFzcz0ic29sci5TdGFu
ZGFyZFJlcXVlc3RIYW5kbGVyIj4KICAgIDwhLS0gZGVmYXVsdCB2YWx1ZXMgZm9yIHF1ZXJ5IHBh
cmFtZXRlcnMgbWF5IG9wdGlvbmFsbHkgYmUgZGVmaW5lZCBoZXJlCiAgICAgPGxzdCBuYW1lPSJk
ZWZhdWx0cyI+CiAgICAgICA8aW50IG5hbWU9InJvd3MiPjEwPC9pbnQ+CiAgICAgICA8c3RyIG5h
bWU9ImZsIj4qPC9zdHI+CiAgICAgICA8c3RyIG5hbWU9InZlcnNpb24iPjIuMTwvc3RyPgogICAg
IDxsc3Q+CiAgICAtLT4KICA8L3JlcXVlc3RIYW5kbGVyPgoKICA8IS0tIERpc01heFJlcXVlc3RI
YW5kbGVyIGlzIGFuIGV4YW1wbGUgb2YgYSByZXF1ZXN0IGhhbmRsZXIgdGhhdAogICAgICAgc3Vw
cG9ydHMgb3B0aW9uYWwgcGFyYW1ldGVycyB3aGljaCBhcmUgcGFzc2VkIHRvCiAgICAgICBpdHMg
aW5pdCgpIG1ldGhvZC4KICAgLS0+CiAgPHJlcXVlc3RIYW5kbGVyIG5hbWU9ImRpc21heCIgY2xh
c3M9InNvbHIuRGlzTWF4UmVxdWVzdEhhbmRsZXIiID4KICAgIDxsc3QgbmFtZT0iZGVmYXVsdHMi
PgogICAgIDxmbG9hdCBuYW1lPSJ0aWUiPjAuMDE8L2Zsb2F0PgogICAgIDxzdHIgbmFtZT0icWYi
PgogICAgICAgIHRleHReMC41IGZlYXR1cmVzXjEuMCBuYW1lXjEuMiBza3VeMS41IGlkXjEwLjAg
bWFudV4xLjEgY2F0XjEuNAogICAgIDwvc3RyPgogICAgIDxzdHIgbmFtZT0icGYiPgogICAgICAg
IHRleHReMC4yIGZlYXR1cmVzXjEuMSBuYW1lXjEuNSBtYW51XjEuNCBtYW51X2V4YWN0XjEuOQog
ICAgIDwvc3RyPgogICAgIDxzdHIgbmFtZT0iYmYiPgogICAgICAgIG9yZChwb3BsYXJpdHkpXjAu
NSByZWNpcChyb3JkKHByaWNlKSwxLDEwMDAsMTAwMCleMC4zCiAgICAgPC9zdHI+CiAgICAgPHN0
ciBuYW1lPSJmbCI+CiAgICAgICAgaWQsbmFtZSxwcmljZSxzY29yZQogICAgIDwvc3RyPgogICAg
IDxzdHIgbmFtZT0ibW0iPgogICAgICAgIDImbHQ7LTEgNSZsdDstMiA2Jmx0OzkwJQogICAgIDwv
c3RyPgogICAgIDxpbnQgbmFtZT0icHMiPjEwMDwvaW50PgogICAgPC9sc3Q+CiAgPC9yZXF1ZXN0
SGFuZGxlcj4KICA8IS0tIE5vdGUgaG93IHlvdSBjYW4gcmVnaXN0ZXIgdGhlIHNhbWUgaGFuZGxl
ciBtdWx0aXBsZSB0aW1lcyB3aXRoCiAgICAgICBkaWZmZXJlbnQgbmFtZXMgKGFuZCBkaWZmZXJl
bnQgaW5pdCBwYXJhbWV0ZXJzKQogICAgLS0+CiAgPHJlcXVlc3RIYW5kbGVyIG5hbWU9InBhcnRp
dGlvbmVkIiBjbGFzcz0ic29sci5EaXNNYXhSZXF1ZXN0SGFuZGxlciIgPgogICAgPGxzdCBuYW1l
PSJkZWZhdWx0cyI+CiAgICAgPHN0ciBuYW1lPSJxZiI+dGV4dF4wLjUgZmVhdHVyZXNeMS4wIG5h
bWVeMS4yIHNrdV4xLjUgaWReMTAuMDwvc3RyPgogICAgIDxzdHIgbmFtZT0ibW0iPjImbHQ7LTEg
NSZsdDstMiA2Jmx0OzkwJTwvc3RyPgogICAgPC9sc3Q+CiAgICA8IS0tIEluIGFkZGl0aW9uIHRv
IGRlZmF1bHRzLCAiYXBwZW5kcyIgcGFyYW1zIGNhbiBiZSBzcGVjaWZpZWQKICAgICAgICAgdG8g
aWRlbnRpZnkgdmFsdWVzIHdoaWNoIHNob3VsZCBiZSBhcHBlbmRlZCB0byB0aGUgbGlzdCBvZgog
ICAgICAgICBtdWx0aS12YWwgcGFyYW1zIGZyb20gdGhlIHF1ZXJ5IChvciB0aGUgZXhpc3Rpbmcg
ImRlZmF1bHRzIikuCgogICAgICAgICBJbiB0aGlzIGV4YW1wbGUsIHRoZSBwYXJhbSAiZnE9aW5z
dG9jazp0cnVlIiB3aWxsIGJlIGFwcGVuZGVkIHRvCiAgICAgICAgIGFueSBxdWVyeSB0aW1lIGZx
IHBhcmFtcyB0aGUgdXNlciBtYXkgc3BlY2lmeSwgYXMgYSBtZWNoYW5pc20gZm9yCiAgICAgICAg
IHBhcnRpdGlvbmluZyB0aGUgaW5kZXgsIGluZGVwZW5kZW50IG9mIGFueSB1c2VyIHNlbGVjdGVk
IGZpbHRlcmluZwogICAgICAgICB0aGF0IG1heSBhbHNvIGJlIGRlc2lyZWQgKHBlcmhhcHMgYXMg
YSByZXN1bHQgb2YgZmFjZXRlZCBzZWFyY2hpbmcpLgoKICAgICAgICAgTk9URTogdGhlcmUgaXMg
KmFic29sdXRlbHkqIG5vdGhpbmcgYSBjbGllbnQgY2FuIGRvIHRvIHByZXZlbnQgdGhlc2UKICAg
ICAgICAgImFwcGVuZHMiIHZhbHVlcyBmcm9tIGJlaW5nIHVzZWQsIHNvIGRvbid0IHVzZSB0aGlz
IG1lY2hhbmlzbQogICAgICAgICB1bmxlc3MgeW91IGFyZSBzdXJlIHlvdSBhbHdheXMgd2FudCBp
dC4KICAgICAgLS0+CiAgICA8bHN0IG5hbWU9ImFwcGVuZHMiPgogICAgICA8c3RyIG5hbWU9ImZx
Ij5pblN0b2NrOnRydWU8L3N0cj4KICAgIDwvbHN0PgogICAgPCEtLSAiaW52YXJpYW50cyIgYXJl
IGEgd2F5IG9mIGxldHRpbmcgdGhlIFNvbHIgbWFpbnRhaW5lciBsb2NrIGRvd24KICAgICAgICAg
dGhlIG9wdGlvbnMgYXZhaWxhYmxlIHRvIFNvbHIgY2xpZW50cy4gIEFueSBwYXJhbXMgdmFsdWVz
CiAgICAgICAgIHNwZWNpZmllZCBoZXJlIGFyZSB1c2VkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCB2YWx1
ZXMgbWF5IGJlIHNwZWNpZmllZAogICAgICAgICBpbiBlaXRoZXIgdGhlIHF1ZXJ5LCB0aGUgImRl
ZmF1bHRzIiwgb3IgdGhlICJhcHBlbmRzIiBwYXJhbXMuCgogICAgICAgICBJbiB0aGlzIGV4YW1w
bGUsIHRoZSBmYWNldC5maWVsZCBhbmQgZmFjZXQucXVlcnkgcGFyYW1zIGFyZSBmaXhlZCwKICAg
ICAgICAgbGltaXRpbmcgdGhlIGZhY2V0cyBjbGllbnRzIGNhbiB1c2UuICBGYWNldGluZyBpcyBu
b3QgdHVybmVkIG9uIGJ5CiAgICAgICAgIGRlZmF1bHQgLSBidXQgaWYgdGhlIGNsaWVudCBkb2Vz
IHNwZWNpZnkgZmFjZXQ9dHJ1ZSBpbiB0aGUgcmVxdWVzdCwKICAgICAgICAgdGhlc2UgYXJlIHRo
ZSBvbmx5IGZhY2V0cyB0aGV5IHdpbGwgYmUgYWJsZSB0byBzZWUgY291bnRzIGZvcjsKICAgICAg
ICAgcmVnYXJkbGVzcyBvZiB3aGF0IG90aGVyIGZhY2V0LmZpZWxkIG9yIGZhY2V0LnF1ZXJ5IHBh
cmFtcyB0aGV5CiAgICAgICAgIG1heSBzcGVjaWZ5LgoKICAgICAgICAgTk9URTogdGhlcmUgaXMg
KmFic29sdXRlbHkqIG5vdGhpbmcgYSBjbGllbnQgY2FuIGRvIHRvIHByZXZlbnQgdGhlc2UKICAg
ICAgICAgImludmFyaWFudHMiIHZhbHVlcyBmcm9tIGJlaW5nIHVzZWQsIHNvIGRvbid0IHVzZSB0
aGlzIG1lY2hhbmlzbQogICAgICAgICB1bmxlc3MgeW91IGFyZSBzdXJlIHlvdSBhbHdheXMgd2Fu
dCBpdC4KICAgICAgLS0+CiAgICA8bHN0IG5hbWU9ImludmFyaWFudHMiPgogICAgICA8c3RyIG5h
bWU9ImZhY2V0LmZpZWxkIj5jYXQ8L3N0cj4KICAgICAgPHN0ciBuYW1lPSJmYWNldC5maWVsZCI+
bWFudV9leGFjdDwvc3RyPgogICAgICA8c3RyIG5hbWU9ImZhY2V0LnF1ZXJ5Ij5wcmljZTpbKiBU
TyA1MDBdPC9zdHI+CiAgICAgIDxzdHIgbmFtZT0iZmFjZXQucXVlcnkiPnByaWNlOls1MDAgVE8g
Kl08L3N0cj4KICAgIDwvbHN0PgogIDwvcmVxdWVzdEhhbmRsZXI+CgogIDxyZXF1ZXN0SGFuZGxl
ciBuYW1lPSJpbnN0b2NrIiBjbGFzcz0ic29sci5EaXNNYXhSZXF1ZXN0SGFuZGxlciIgPgogICAg
PCEtLSBmb3IgbGVnYWN5IHJlYXNvbnMsIERpc01heFJlcXVlc3RIYW5kbGVyIHdpbGwgYXNzdW1l
IGFsbCBpbml0CiAgICAgICAgIHBhcmFtcyBhcmUgImRlZmF1bHRzIiBpZiB5b3UgZG9uJ3QgZXhw
bGljaXRseSBzcGVjaWZ5IGFueSBkZWZhdWx0cy4KICAgICAgLS0+CiAgICAgPHN0ciBuYW1lPSJm
cSI+CiAgICAgICAgaW5TdG9jazp0cnVlCiAgICAgPC9zdHI+CiAgICAgPHN0ciBuYW1lPSJxZiI+
CiAgICAgICAgdGV4dF4wLjUgZmVhdHVyZXNeMS4wIG5hbWVeMS4yIHNrdV4xLjUgaWReMTAuMCBt
YW51XjEuMSBjYXReMS40CiAgICAgPC9zdHI+CiAgICAgPHN0ciBuYW1lPSJtbSI+CiAgICAgICAg
MiZsdDstMSA1Jmx0Oy0yIDYmbHQ7OTAlCiAgICAgPC9zdHI+CiAgPC9yZXF1ZXN0SGFuZGxlcj4K
CiAgPCEtLSBxdWVyeVJlc3BvbnNlV3JpdGVyIHBsdWdpbnMuLi4gcXVlcnkgcmVzcG9uc2VzIHdp
bGwgYmUgd3JpdHRlbiB1c2luZyB0aGUKICAgIHdyaXRlciBzcGVjaWZpZWQgYnkgdGhlICd3dCcg
cmVxdWVzdCBwYXJhbWV0ZXIgbWF0Y2hpbmcgdGhlIG5hbWUgb2YgYSByZWdpc3RlcmVkCiAgICB3
cml0ZXIuCiAgICBUaGUgInN0YW5kYXJkIiB3cml0ZXIgaXMgdGhlIGRlZmF1bHQgYW5kIHdpbGwg
YmUgdXNlZCBpZiAnd3QnIGlzIG5vdCBzcGVjaWZpZWQKICAgIGluIHRoZSByZXF1ZXN0LiBYTUxS
ZXNwb25zZVdyaXRlciB3aWxsIGJlIHVzZWQgaWYgbm90aGluZyBpcyBzcGVjaWZpZWQgaGVyZS4K
ICAgIFRoZSBqc29uLCBweXRob24sIGFuZCBydWJ5IHdyaXRlcnMgYXJlIGFsc28gYXZhaWxhYmxl
IGJ5IGRlZmF1bHQuCgogICAgPHF1ZXJ5UmVzcG9uc2VXcml0ZXIgbmFtZT0ic3RhbmRhcmQiIGNs
YXNzPSJvcmcuYXBhY2hlLnNvbHIucmVxdWVzdC5YTUxSZXNwb25zZVdyaXRlciIvPgogICAgPHF1
ZXJ5UmVzcG9uc2VXcml0ZXIgbmFtZT0ianNvbiIgY2xhc3M9Im9yZy5hcGFjaGUuc29sci5yZXF1
ZXN0LkpTT05SZXNwb25zZVdyaXRlciIvPgogICAgPHF1ZXJ5UmVzcG9uc2VXcml0ZXIgbmFtZT0i
cHl0aG9uIiBjbGFzcz0ib3JnLmFwYWNoZS5zb2xyLnJlcXVlc3QuUHl0aG9uUmVzcG9uc2VXcml0
ZXIiLz4KICAgIDxxdWVyeVJlc3BvbnNlV3JpdGVyIG5hbWU9InJ1YnkiIGNsYXNzPSJvcmcuYXBh
Y2hlLnNvbHIucmVxdWVzdC5SdWJ5UmVzcG9uc2VXcml0ZXIiLz4KCiAgICA8cXVlcnlSZXNwb25z
ZVdyaXRlciBuYW1lPSJjdXN0b20iIGNsYXNzPSJjb20uZXhhbXBsZS5NeVJlc3BvbnNlV3JpdGVy
Ii8+CiAgLS0+Cgo8IS0tCiAgICBYU0xUIHJlc3BvbnNlIHdyaXRlciAoU09MUi00OSkKICAgIENo
YW5nZXMgdG8gWFNMVCB0cmFuc2Zvcm1zIGFyZSB0YWtlbiBpbnRvIGFjY291bnQgZXZlcnkgeHNs
dENhY2hlTGlmZXRpbWVTZWNvbmRzIGF0IG1vc3QuCiAgIC0tPgogIDxxdWVyeVJlc3BvbnNlV3Jp
dGVyCiAgICBuYW1lPSJ4c2x0IgogICAgY2xhc3M9Im9yZy5hcGFjaGUuc29sci5yZXF1ZXN0LlhT
TFRSZXNwb25zZVdyaXRlciIKICAgPgogICAgIDxpbnQgbmFtZT0ieHNsdENhY2hlTGlmZXRpbWVT
ZWNvbmRzIj41PC9pbnQ+CiAgIDwvcXVlcnlSZXNwb25zZVdyaXRlcj4KCiAgPCEtLSBjb25maWcg
Zm9yIHRoZSBhZG1pbiBpbnRlcmZhY2UgLS0+CiAgPGFkbWluPgogICAgPGRlZmF1bHRRdWVyeT5z
b2xyPC9kZWZhdWx0UXVlcnk+CiAgICA8Z2V0dGFibGVGaWxlcz5zb2xyY29uZmlnLnhtbCBzY2hl
bWEueG1sIGFkbWluLWV4dHJhLmh0bWw8L2dldHRhYmxlRmlsZXM+CiAgICA8cGluZ1F1ZXJ5PnE9
aWQ6MCZhbXA7c3RhcnQ9MCZhbXA7cm93cz0wPC9waW5nUXVlcnk+CgogICAgPCEtLSBjb25maWd1
cmUgYSBoZWFsdGhjaGVjayBmaWxlIGZvciBzZXJ2ZXJzIGJlaGluZCBhIGxvYWRiYWxhbmNlcgog
ICAgPGhlYWx0aGNoZWNrIHR5cGU9ImZpbGUiPnNlcnZlci1lbmFibGVkPC9oZWFsdGhjaGVjaz4K
ICAgIC0tPgogIDwvYWRtaW4+Cgo8L2NvbmZpZz4K
------=_Part_20188_19149020.1201723519065
Content-Type: text/xml; name=solr_post.xml
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fc2b4hj5
Content-Disposition: attachment; filename=solr_post.xml

PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPGFkZD4KPGRvYyBib29zdD0i
MS41Ij4KICA8ZmllbGQgbmFtZT0iaWQiPjc2MDU3PC9maWVsZD4KICA8ZmllbGQgbmFtZT0idW5p
cXVlX2lkIj5BcnRpY2xlXzc2MDU3PC9maWVsZD4KICA8ZmllbGQgbmFtZT0iYm9keSI+YXJ0aWNs
ZSBib2R5PC9maWVsZD4KICA8ZmllbGQgbmFtZT0idGl0bGUiPmFydGljbGUgdGl0bGU8L2ZpZWxk
PgogIDxmaWVsZCBuYW1lPSJzaXRlX2lkIj40ODk8L2ZpZWxkPgo8L2RvYz4KPC9hZGQ+Cg==

------=_Part_20188_19149020.1201723519065
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_20188_19149020.1201723519065--

From java-user-return-32282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 20:10:50 2008
Return-Path: <java-user-return-32282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26086 invoked from network); 30 Jan 2008 20:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 20:10:50 -0000
Received: (qmail 80637 invoked by uid 500); 30 Jan 2008 20:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80605 invoked by uid 500); 30 Jan 2008 20:10:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80594 invoked by uid 99); 30 Jan 2008 20:10:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 12:10:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.104.17] (HELO sa3.bezeqint.net) (192.115.104.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 20:10:06 +0000
Received: from localhost (sa3 [127.0.0.1])
	by sa3.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP id 01DA030362
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 22:10:08 +0200 (IST)
X-Virus-Scanned: amavisd-new at bezeqint.net
Received: from sa3.bezeqint.net ([127.0.0.1])
	by localhost (sa3.bezeqint.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IlseFeD6fIOa for <java-user@lucene.apache.org>;
	Wed, 30 Jan 2008 22:10:04 +0200 (IST)
Received: from m6.bezeqint.net (m6.bezeqint.net [192.115.104.86])
	by sa3.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 22:10:03 +0200 (IST)
Received: from your0548c161e1 ([82.102.180.111])
	by m6.bezeqint.net (MOS 3.8.5-GA)
	with ESMTP id BDT65873 (AUTH sf_ita_s);
	Wed, 30 Jan 2008 22:09:56 +0200 (IST)
X-FEAS-DEEPHEADER-FortiMail-2000-partnergsm.co.il:  No untrusted public ip! 
Message-Id: <20080130200246.10727@partnergsm.co.il>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene, HTML and Hebrew
Date: Wed, 30 Jan 2008 22:09:47 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <9294E20AED46934EA459020706463F947EB432@SUEXCL-02.ad.syr.edu>
thread-index: AchdYjdbAQyImm4ISnm7YpkDAyavXAAFDpqgAYCLImA=
X-Junkmail-Status: score=10/50, host=m6.bezeqint.net
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A090204.47A0D99B.0096,ss=1,fgs=0,
	ip=82.102.180.111,
	so=2007-07-31 18:51:00,
	dmn=5.4.3/2007-11-16
X-Virus-Checked: Checked by ClamAV on apache.org


OK, I've been processing things for a while. I came up with an idea that I
want your advice on -- is there a way I could stem the Hebrew words in my
analyzer yet keep a note of some sort of the original term which was
assembled by this stem, WITHOUT affecting frequency/proximity data? This is
I guess you can say a "must" for Hebrew words searches if one wants to make
them quick efficient and precise, but can be very useful for stem-based
indexing in other languages.

Here are some more details:

Since stemming in Hebrew is ugly - loads of abiguities, and a final stem
resulting in a 3 letters word (which can be constructed in many other forms
later -- and that's in the good case where the stemmer is decided on the
correct stem), I've been looking for some alternative. So it was either
stemming differently (finding a way to stem to larger, more descriptive
stems), or not stemming at all and using query inflation (which should yield
much better, more relevant hits, but have perfomance impact, plus can grow
to more than a few hundreds terms per word).

I'm still brainstorming on the best way to achieve top-notch Hebrew indexing
and searching with Lucene. While doing so, I've had an idea -- assuming the
following is a the IndexReader workflow (more or less):
1. Access Index terms list, find the reference to the records for each word
in Terms
2. Access the Term record in the Index, load all occurences of it (Doc ID,
Field ID along with Freq and Prox data) and do the math and scoring
according to the Query logic.

Is it possible so that for every occurrence of a word in that array
mentioned above (you probably have a name for it...) I would store the
original word used to form that stem of which this hit referrs to? So for
example if I look for "got" it becomes "get" when passed through a stemmer
and then can be found by using any of the words built from the stem "get" --
"gotten", "got", "gets" and whatever. Now, looking at that array of
occurrences I know the stem "get" was found in a specific document, but if I
wanted to score the original word higher than its sibling words built from
the same stem, having the original word stored along with the occurrence
data will certainly help (not only for scoring though - also for specific
searches where I will require the exact word to be found only).

As I said, for Hebrew this will greatly help.

Is it possible using Lucene as it is? If not, I guess this will require file
format change? And if so, can this be done using some sort of deriviation of
existing classes, or it needs to be hacked in the existing code?

If you have any idea on how to achieve similar results in more convinient
ways, please with all means do let me know...

Itamar.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 20:18:53 2008
Return-Path: <java-user-return-32283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35472 invoked from network); 30 Jan 2008 20:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 20:18:53 -0000
Received: (qmail 4670 invoked by uid 500); 30 Jan 2008 20:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4645 invoked by uid 500); 30 Jan 2008 20:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4634 invoked by uid 99); 30 Jan 2008 20:18:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 12:18:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.246.245 as permitted sender)
Received: from [72.14.246.245] (HELO ag-out-0708.google.com) (72.14.246.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 20:18:08 +0000
Received: by ag-out-0708.google.com with SMTP id 5so331100agb.11
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 12:18:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=lEk4X6vNiYHYtbbi5nS3W5ZnWM0MHY58ltNXX/x9114=;
        b=bT3SaWgCpzItPBIdNIi1WtY2I74jcu8iUDk9IGop8U0SY2XwFSHv9oaMbqUhIO8Dj6i3InkJvbreevFTpKPKbAkuAywr/KO2Phkdrb7qcAkuSXk7g5RYnSN25dFHHN/KiIoERFoCWC4H+/34/3vKul7tu48G/tgzBEu9ZkA12qg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=kICBUPolH6ZgGr1uZcXmWPXkm9Btdnfc5p9MMFK7NTEb0P0OlxMp131HD4o+UJ3KBhLlqGcd0qOH3oLIgBd2pWNSZcu4asuUqEBR/v2/DrQa0by6wMdyh5OvjZdrQLoQxasQWs7I8DpGnHQZ7eLgrmDlMp4fZcY2UdriYEV7O84=
Received: by 10.151.13.7 with SMTP id q7mr282013ybi.13.1201724293619;
        Wed, 30 Jan 2008 12:18:13 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q14sm913961qbq.33.2008.01.30.12.18.12
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 30 Jan 2008 12:18:12 -0800 (PST)
Message-ID: <47A0DB70.9090305@gmail.com>
Date: Wed, 30 Jan 2008 15:17:52 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: document boost
References: <af9ce6c90801301047q244087b7pd816ed748a54ea5b@mail.gmail.com>	 <47A0D36A.9090704@gmail.com> <af9ce6c90801301205g3ba98467p7bfe7eea4cd87120@mail.gmail.com>
In-Reply-To: <af9ce6c90801301205g3ba98467p7bfe7eea4cd87120@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you look at DocumentsWriter at line 715 you will see the docBoost get 
set to the docBoost you specified. At 1376 you will see boost get 
assigned docBoost. Then at 1509 you see how the doc boost is multiplied 
by the field boost: *  boost *= field.getBoost();
*
So now you have the default field boost of 1 * the docBoost you passed. 
Still just the docBoost. Then at 690 you see where the norm is saved in 
the index:    float norm = fp.boost * 
writer.getSimilarity().lengthNorm(fp.fieldInfo.name, fp.length);

As you can see, its just the boost * the lengthNorm. Still no way to be 
exponential.

Now the norm is read from different scorers, but for example, in 
TermScorer at line 126 you see:   return raw * 
Similarity.decodeNorm(norms[doc]); // normalize for field

Again just a multiplication. No way for exponential involving that norm.

And finally, i have watched Lucene in action and observed the proper 
increase. For a similar setup as you describe I can put in a field boost 
of 60 and still get a norm of only 20. It just doesnt explode. When I 
double the boost, the field norm is doubled. Which follows from the code.

Maybe the issue is Solr?

- Mark



Mike Grafton wrote:
> Thanks for your help, Mark. 
>
> We can start by posting our SOLR config files, although I'm not sure 
> if that will be helpful (we don't see much in there regarding 
> boosts).  See attached.  How SOLR actually configures and interfaces 
> with Lucene is a bit of an unknown to us, so I'm not sure we can get 
> down to the raw Lucene configuration and interaction.
>
> That being said, in addition to the SOLR config files, see our 
> attached XML which we post to SOLR to add the document to the index.
>
> How do you know that boost should affect fieldNorm linearly? Is there 
> some code you can point us to?  We looked through the Lucene source 
> for a while, but it was kind of hard to track this down.
>
> One note: we're on an old version of Lucene - a nightly build between 
> 2.0.0 and 2.1.0.
>
> Mike
>
> On 1/30/08, *Mark Miller* <markrmiller@gmail.com 
> <mailto:markrmiller@gmail.com>> wrote:
>
>     I would say you def misconfigured something. Doubling your doc boost
>     will double your fieldNorm approximately (I think the precision isn't
>     perfect).
>
>     I don't know what your doing wrong in such a small test, but your
>     fieldNorm should *not* be exploding like that.
>
>     Can you post some code?
>
>     - Mark
>
>     Mike Grafton wrote:
>     > Hello folks,
>     >
>     > We're trying to use Lucene's scoring to do a fairly basic thing:
>     give a
>     > document (in this case, we index "articles") a boost based on an
>     integer
>     > value that we know at index-time.  We want the  document boost
>     to affect the
>     > final document score linearly.
>     >
>     > We thought that assigning a document boost based on this value
>     would do the
>     > trick, but the behavior we're seeing doesn't match what we
>     expect given the
>     > online documentation.  In fact, we see that a linear increase in
>     document
>     > boost yields an exponential increase in the 'fieldNorm'
>     component of the
>     > score for each term of the query that matched the
>     document.    Here's a
>     > small table of values that relate the document boost we pass in
>     to the
>     > fieldNorm contribution returned by Lucene:
>     >
>     > boost  fieldNorm
>     > 1.0    0.3125    =  (5/16, 2^-1.678)
>     > 2.0    20.0      =  (2^4.3219, 2^1 * 10)
>     > 3.0    256.0     =  (2^8)
>     > 4.0    1280.0    =  (2^10.3219, 2^7 * 10)
>     > 5.0    5120.0    =  (2^12.3219, 2^9 * 10)
>     > 6.0    16384.0   =  (2^14.0)
>     > 7.0    40960.0   =  (2^15.3219, 2^12 * 10)
>     > 8.0    81920.0   =  (2^16.3219, 2^13 * 10)
>     > 10.0   327680.0  =  (2^18.3219, 2^15 * 10)
>     >
>     > This example is using a query with two terms against a document that
>     > contains those terms and a few others, in one searchable field.
>     >
>     > Is this the way document boost is supposed to work?  Or have we
>     > misconfigured something? If we cannot use document boost to
>     affect scoring
>     > linearly, is there some other technique we can use?
>     >
>     > By the way, we're using SOLR to access Lucene.  We can give more
>     information
>     > if necessary, such as our SOLR schema.xml, if folks think that
>     would help
>     > explain things.  Let us know what other information we can provide.
>     >
>     > Thanks,
>     > Mike
>     >
>     >
>
>     ---------------------------------------------------------------------
>     To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>     <mailto:java-user-unsubscribe@lucene.apache.org>
>     For additional commands, e-mail: java-user-help@lucene.apache.org
>     <mailto:java-user-help@lucene.apache.org>
>
>
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 20:49:30 2008
Return-Path: <java-user-return-32284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48870 invoked from network); 30 Jan 2008 20:49:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 20:49:30 -0000
Received: (qmail 41260 invoked by uid 500); 30 Jan 2008 20:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41222 invoked by uid 500); 30 Jan 2008 20:49:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41203 invoked by uid 99); 30 Jan 2008 20:49:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 12:49:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 20:48:47 +0000
Received: by wa-out-1112.google.com with SMTP id j40so604131wah.11
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 12:48:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=Tr88bHpBbNZL26J+dYbNTCudR3mH0bZOelD98vVZkgM=;
        b=ADPmYECw1eM/ta5TswFk/6ImAOrORfrZRE9525n3z+pIK3wgPdrMDQW2ynPcV82bbPH9XkdutIYlfhWCdU8oUz0JzJhafOjoXvMTAnagl4OmebfA3xgx8uEYQ6+sDomUOaGbr0UJE6ihtX2Pp/aWPV70s6ydoW4CnqiOXj54lq4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=WqUst+uTgwFKHYCYc7Y5s4IE72Ma4I2ZVK0UyEvjXwmbf2xRXRGDHOc8lks4+d9szlzkDxBNeljIu2IybQUgH6Pa5Lol/88ZxSUDn44rJTXF/GF+T+nfWiqiUOF4qM5tiX7/dcCdmA/7anwBSjfIXr1+9FNZ1KVSHNs35s0Crbg=
Received: by 10.114.78.1 with SMTP id a1mr1419248wab.14.1201726133743;
        Wed, 30 Jan 2008 12:48:53 -0800 (PST)
Received: by 10.114.75.4 with HTTP; Wed, 30 Jan 2008 12:48:53 -0800 (PST)
Message-ID: <c68e39170801301248y5ef6486eof94f5f8230c9e4bd@mail.gmail.com>
Date: Wed, 30 Jan 2008 15:48:53 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: document boost
In-Reply-To: <af9ce6c90801301205g3ba98467p7bfe7eea4cd87120@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <af9ce6c90801301047q244087b7pd816ed748a54ea5b@mail.gmail.com>
	 <47A0D36A.9090704@gmail.com>
	 <af9ce6c90801301205g3ba98467p7bfe7eea4cd87120@mail.gmail.com>
X-Google-Sender-Auth: a80f2798ca772be6
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike, I think this issue probably belongs in the Solr lists since
it looks like you're indexing through it.
I did a really quick test re-adding a Solr example document but adding
a document boost of 10...
the fieldNorm increased by a factor of 10 as expected (explain below).

 <str name="id=SOLR1000-1,internal_docid=26">
5.651948 = (MATCH) fieldWeight(text:solr in 26), product of:
  1.4142135 = tf(termFreq(text:solr)=2)
  3.1972246 = idf(docFreq=2, numDocs=27)
  1.25 = fieldNorm(field=text, doc=26)
</str>
  <str name="id=SOLR1000,internal_docid=12">
0.5651948 = (MATCH) fieldWeight(text:solr in 12), product of:
  1.4142135 = tf(termFreq(text:solr)=2)
  3.1972246 = idf(docFreq=2, numDocs=27)
  0.125 = fieldNorm(field=text, doc=12)
</str>

Could you try with the latest version of Solr, and if there is still
an issue, post a bug to Solr's JIRA?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 21:07:11 2008
Return-Path: <java-user-return-32285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57091 invoked from network); 30 Jan 2008 21:07:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 21:07:10 -0000
Received: (qmail 68208 invoked by uid 500); 30 Jan 2008 21:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67922 invoked by uid 500); 30 Jan 2008 21:06:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67911 invoked by uid 99); 30 Jan 2008 21:06:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 13:06:55 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jhui@us.ibm.com designates 32.97.182.142 as permitted sender)
Received: from [32.97.182.142] (HELO e2.ny.us.ibm.com) (32.97.182.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 21:06:39 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e2.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m0UL6VuE020892
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 16:06:31 -0500
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m0UL6VKI238282
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 16:06:31 -0500
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m0UL6Vg7002524
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 16:06:31 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m0UL6Ucf002516
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 16:06:30 -0500
Subject: Escape character and Special character
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFFE62C160.1C814A67-ON882573E0.00738ABF-882573E0.0073F156@us.ibm.com>
From: Joshua W Hui <jhui@us.ibm.com>
Date: Wed, 30 Jan 2008 13:06:24 -0800
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 01/30/2008
 16:06:30
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

When I tried to do a lucene search using escape character with other
special character like the following:

SUBJECT:Yahoo\!~0.5
SUBJECT:Yahoo\!*

It seems the parser totally ignores the escape character, and becomes

SUBJECT:Yahoo!~0.5
SUBJECT:Yahoo!*

which gives me syntax exception.

Any reason why?

I am using Lucene 2.2.

Thanks.

Joshua


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 22:07:51 2008
Return-Path: <java-user-return-32286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80838 invoked from network); 30 Jan 2008 22:07:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 22:07:51 -0000
Received: (qmail 46782 invoked by uid 500); 30 Jan 2008 22:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46753 invoked by uid 500); 30 Jan 2008 22:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46742 invoked by uid 99); 30 Jan 2008 22:07:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 14:07:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 22:07:20 +0000
Received: from [84.191.247.225] (helo=p54bff7e1.dip.t-dialin.net)
	by smtprelay08.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JKL5N-00006M-14
	for java-user@lucene.apache.org; Wed, 30 Jan 2008 23:07:13 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Escape character and Special character
Date: Wed, 30 Jan 2008 23:04:16 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <OFFE62C160.1C814A67-ON882573E0.00738ABF-882573E0.0073F156@us.ibm.com>
In-Reply-To: <OFFE62C160.1C814A67-ON882573E0.00738ABF-882573E0.0073F156@us.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801302304.16371@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Mittwoch, 30. Januar 2008, Joshua W Hui wrote:

> When I tried to do a lucene search using escape character with other
> special character like the following:
>
> SUBJECT:Yahoo\!~0.5
> SUBJECT:Yahoo\!*
>
> It seems the parser totally ignores the escape character, and becomes

It's a known bug, see http://issues.apache.org/jira/browse/LUCENE-588

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 22:21:28 2008
Return-Path: <java-user-return-32287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86639 invoked from network); 30 Jan 2008 22:21:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 22:21:28 -0000
Received: (qmail 62608 invoked by uid 500); 30 Jan 2008 22:21:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62582 invoked by uid 500); 30 Jan 2008 22:21:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62566 invoked by uid 99); 30 Jan 2008 22:21:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 14:21:12 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jhui@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 22:20:56 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m0UMKlvJ032314
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 17:20:47 -0500
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m0UMKlvE116608
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 17:20:47 -0500
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m0UMKl5I027583
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 17:20:47 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m0UMKlH6027576
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 17:20:47 -0500
In-Reply-To: <200801302304.16371@danielnaber.de>
Subject: Re: Escape character and Special character
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF19571F8.209DCC50-ON882573E0.007A6A1A-882573E0.007ABF91@us.ibm.com>
From: Joshua W Hui <jhui@us.ibm.com>
Date: Wed, 30 Jan 2008 14:20:44 -0800
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 01/30/2008
 17:20:46
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the information. Does it also apply to fuzzy search?

Also, a simple question... how can I find out which release the fix will go
in? Currently, it only has a patch.

Joshua



                                                                           
             Daniel Naber                                                  
             <lucenelist2007@d                                             
             anielnaber.de>                                             To 
                                       java-user@lucene.apache.org         
             01/30/2008 02:04                                           cc 
             PM                                                            
                                                                   Subject 
                                       Re: Escape character and Special    
             Please respond to         character                           
             java-user@lucene.                                             
                apache.org                                                 
                                                                           
                                                                           
                                                                           
                                                                           




On Mittwoch, 30. Januar 2008, Joshua W Hui wrote:

> When I tried to do a lucene search using escape character with other
> special character like the following:
>
> SUBJECT:Yahoo\!~0.5
> SUBJECT:Yahoo\!*
>
> It seems the parser totally ignores the escape character, and becomes

It's a known bug, see http://issues.apache.org/jira/browse/LUCENE-588

Regards
 Daniel

--
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 22:31:37 2008
Return-Path: <java-user-return-32288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90228 invoked from network); 30 Jan 2008 22:31:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 22:31:37 -0000
Received: (qmail 74042 invoked by uid 500); 30 Jan 2008 22:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74013 invoked by uid 500); 30 Jan 2008 22:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74002 invoked by uid 99); 30 Jan 2008 22:31:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 14:31:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 22:30:54 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 4F906B8792
	for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 14:31:03 -0800 (PST)
Message-Id: <95E8CDC6-08DD-4D77-8779-A2D487C23DD0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: contrib/benchmark Quality
Date: Wed, 30 Jan 2008 17:31:00 -0500
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone thought about integrating the contrib/benchmark Quality  
stuff into the "algorithm" framework that's used for timings, etc.?   
For instance, I would like to write an algorithm file where my rounds  
consist of doing various runs with different similarities all on the  
same index.

It would probably need a new Task for setting the similarity (and the  
ability to modify the index using the setNorms functionality).  Anyone  
else (Doron :-)  ) have any thoughts on going about this?

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 30 23:20:54 2008
Return-Path: <java-user-return-32289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12044 invoked from network); 30 Jan 2008 23:20:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2008 23:20:54 -0000
Received: (qmail 48791 invoked by uid 500); 30 Jan 2008 23:20:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48763 invoked by uid 500); 30 Jan 2008 23:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48752 invoked by uid 99); 30 Jan 2008 23:20:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 15:20:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 23:20:09 +0000
Received: from [84.191.222.155] (helo=p54bfde9b.dip.t-dialin.net)
	by smtprelay05.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JKME1-0004h9-Dv
	for java-user@lucene.apache.org; Thu, 31 Jan 2008 00:20:13 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Escape character and Special character
Date: Thu, 31 Jan 2008 00:17:17 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <OFF19571F8.209DCC50-ON882573E0.007A6A1A-882573E0.007ABF91@us.ibm.com>
In-Reply-To: <OFF19571F8.209DCC50-ON882573E0.007A6A1A-882573E0.007ABF91@us.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200801310017.17331@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Mittwoch, 30. Januar 2008, Joshua W Hui wrote:

> Thanks for the information. Does it also apply to fuzzy search?

I think so.

> Also, a simple question... how can I find out which release the fix will
> go in? Currently, it only has a patch.

It's not yet assigned to any version (it says "Fix Version/s: None"), so 
it's unclear when it will be in a release.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 00:43:30 2008
Return-Path: <java-user-return-32290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52860 invoked from network); 31 Jan 2008 00:43:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 00:43:30 -0000
Received: (qmail 41404 invoked by uid 500); 31 Jan 2008 00:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41378 invoked by uid 500); 31 Jan 2008 00:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41367 invoked by uid 99); 31 Jan 2008 00:43:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 16:43:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 00:42:48 +0000
Received: by fg-out-1718.google.com with SMTP id d23so479022fga.27
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 16:42:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=oHe6m5mnvFtCSpihKkK28TNWgGN4tCmlWIp7js5SJuE=;
        b=nTxCC11CjaqYSM8UFSmRoQcz6F04LlV8V/faIoI6+OGWEgFW2csJqTMTI9dY9CORKAlYJJs4RN80i2wmLv3bpF780XF6FEM1x9YZoB/e4ITLPm9MqJxe3IiJ+WNjmD987MJJPYXWVMCfKNWf1geEeRaLKJx4eOzHRlc7P/ReiVc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=D1faLHI/EtnVTKcrJE1T8gaX2Lss+BqbrmWeHSMdr0WhCzIwze/1mS+IN+ntn04sOdMx9j4tRpIMt8YdtcYJlJx9d86BzzyK2M0H2XgRN50CEjpE3/cMHMvIiLvWgDF/PRXiITk4rb576bcBsPfUdfESNn9GNkE6h5pgDRWBJ2s=
Received: by 10.86.80.5 with SMTP id d5mr1279057fgb.57.1201740171167;
        Wed, 30 Jan 2008 16:42:51 -0800 (PST)
Received: by 10.86.31.3 with HTTP; Wed, 30 Jan 2008 16:42:51 -0800 (PST)
Message-ID: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
Date: Wed, 30 Jan 2008 16:42:51 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: appending field to an existing index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16767_29520119.1201740171165"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16767_29520119.1201740171165
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:

    We have a large index and it is difficult to reindex.

    We want to add another field to the index without reindexing, e.g. just
create a new inverted index, dictionary files etc.

    How feasible is it to add this to lucene?


Thanks

-John

------=_Part_16767_29520119.1201740171165--

From java-user-return-32291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 03:59:51 2008
Return-Path: <java-user-return-32291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32937 invoked from network); 31 Jan 2008 03:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 03:59:51 -0000
Received: (qmail 91955 invoked by uid 500); 31 Jan 2008 03:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91149 invoked by uid 500); 31 Jan 2008 03:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91138 invoked by uid 99); 31 Jan 2008 03:59:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 19:59:36 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 03:59:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JKQa1-0007tk-MV
	for java-user@lucene.apache.org; Wed, 30 Jan 2008 19:59:13 -0800
Message-ID: <15197794.post@talk.nabble.com>
Date: Wed, 30 Jan 2008 19:59:13 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in Lucene 2.3.0
In-Reply-To: <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15175141.post@talk.nabble.com> <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mike for your directions.

Yes, I am in fact using a single computer for my application, and your
saying that in this case, multiple threads with a single IndexWriter wll
give a better performance. Hmmm. I just wonder that since each IndexWriter
has a single write.lock, this means that sitting on the CPU, we observe that
at a particular instant, only a single thread is using the CPU, while others
are kept waiting (obviously, there is no busy-waiting, just waiting. So, in
this case, won't using a single-thread-using-one-IndexWriter be a better
choice than multiple-threads-using-one-IndexWriter, since that would save
the context-switching times ... (Just my two cents .. )

Your comments are eagerly awaited.

Thanks
Ajay Garg



Michael McCandless-2 wrote:
> 
> 
> If you have a single IndexWriter, then the buffer is flushed @ 16 MB  
> regardless of how many threads are adding to that buffer.
> 
> If you are using multiple IndexWriters, writing to separate  
> directories and then merging at the end, then each one uses 16 MB.   
> But this isn't recommended for a single computer -- using multiple  
> threads with one IndexWriter should get you better performance.
> 
> Note that this does not mean you can limit your JVM's heap to 16 MB  
> (for the single writer case): other things require memory, eg  
> merging, pulling documents from some source,  etc. Furthermore, it's  
> generally best not to cut the heap size so close to your actual  
> memory usage that GC is forced to run excessively since that'll hurt  
> performance.
> 
> Mike
> 
> ajay_garg wrote:
> 
>>
>> Hi all.
>>
>> Lucene latest version - 2.3.0 says that the default behaviour of  
>> flushing
>> from memory to file-system based index is based upon RAM usage -  
>> with 16 MB
>> being the default value. Fine. Works for me, as long as I am using  
>> a single
>> thread to write into the index.
>>
>> However, I have been trying to use multiple threads (say 'n'), to  
>> write into
>> their corresponding individual indexes, all based into the file- 
>> system. Now,
>> occasionally and randomly, I am getting "OutOfMemoryException -  
>> Java Memory
>> Heap", while it works other times. I know, that there may be issues  
>> with my
>> environment, but I haven't been able to figure out, why it works  
>> sometimes,
>> and it does not.
>>
>> So, I will be obliged if the following doubts are cleared :
>>
>> a) Let's say there are 'n' threads, writing into 'n' indexes. Each  
>> thread
>> has a unique individual indexer; this is implemented by passing the
>> corresponding reference to the thread, which is then used in it's  
>> run()
>> method. Now, as we know, 16 MB is the default size, before the docs  
>> are
>> flushed to the file-system based index. Thus, my question is :
>>
>>          does this hold for each thread indexer. In other words, do  
>> we need
>> to have at least '16n'MB
>>          of memory at our disposal, before we are sure that there  
>> will be no
>> "outOfMemoryException" ? If
>>          that is the case, does that also mean that if we are  
>> working with a
>> single main thread only, and
>>          providing anything less than 16MB of memory to the JVM,  
>> then the
>> exception would always occur ?
>>
>> -- 
>> View this message in context: http://www.nabble.com/Query-in- 
>> Lucene-2.3.0-tp15175141p15175141.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-Lucene-2.3.0-tp15175141p15197794.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 04:57:08 2008
Return-Path: <java-user-return-32292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48055 invoked from network); 31 Jan 2008 04:57:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 04:57:08 -0000
Received: (qmail 31336 invoked by uid 500); 31 Jan 2008 04:56:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31304 invoked by uid 500); 31 Jan 2008 04:56:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31293 invoked by uid 99); 31 Jan 2008 04:56:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 20:56:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 04:56:26 +0000
Received: by rv-out-0910.google.com with SMTP id k20so416917rvb.5
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 20:56:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=AOATq1hkbahQ1f/DQbbVO7mq/y1CET315lDf+Y12mQE=;
        b=Kpyg3jToHfkl79xQNLq3UC7UEpruaWtFTxTsCsN9PWNlohQkfzJjpSQyReHsNNIJJm4LunFPwcmpa3fP18p6XYNlyxhMVY6KTQ2X3bESBaCPQ7fphWWF2DF31bYbOXb72LtHkPXn5dDzpU3gluW6j3SM4exagBdm1SaORH/i0PA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=T9I8rBDIIDg0IqqGQIrAUSkH7/QMbNxuhzeDzrN0ssxr9oBN2hrlZZ4VocFPoGwrGpt5ryB/W7CScvPa1KRLjO5S/WBo9CPqAW+yqAa7M6k/O8lmDkZ8K3itkS7Qf4k7fHMJ0TboTyajF0PUcGFg2/UWDmBVXLC6ObraWru+c30=
Received: by 10.142.179.12 with SMTP id b12mr889384wff.88.1201755391788;
        Wed, 30 Jan 2008 20:56:31 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Wed, 30 Jan 2008 20:56:31 -0800 (PST)
Message-ID: <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com>
Date: Wed, 30 Jan 2008 23:56:31 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Query in Lucene 2.3.0
In-Reply-To: <15197794.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15175141.post@talk.nabble.com>
	 <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com>
	 <15197794.post@talk.nabble.com>
X-Google-Sender-Auth: 148fffd5ff6a5508
X-Virus-Checked: Checked by ClamAV on apache.org

On Jan 30, 2008 10:59 PM, ajay_garg
<garg.jeena.isi.ka.naam.hai@gmail.com> wrote:
>
> Thanks Mike for your directions.
>
> Yes, I am in fact using a single computer for my application, and your
> saying that in this case, multiple threads with a single IndexWriter wll
> give a better performance. Hmmm. I just wonder that since each IndexWriter
> has a single write.lock, this means that sitting on the CPU, we observe that
> at a particular instant, only a single thread is using the CPU,

The write.lock is to protect against other IndexWriter instances,
*not* against other threads.
Using multiple threads on a single IndexWriter should utilize multiple CPUs.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 05:03:07 2008
Return-Path: <java-user-return-32293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49351 invoked from network); 31 Jan 2008 05:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 05:03:06 -0000
Received: (qmail 36202 invoked by uid 500); 31 Jan 2008 05:02:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36178 invoked by uid 500); 31 Jan 2008 05:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36165 invoked by uid 99); 31 Jan 2008 05:02:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 21:02:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 Jan 2008 05:02:22 +0000
Received: (qmail 56782 invoked by uid 60001); 31 Jan 2008 05:02:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Jp8wQhzvbcHEaX4NqC6/+whk1g5u1zypwRDfH6jx3b7GS387bGcM/Ztr9wPZe6W2t4UY4+i5Bmfey2ZIFbPM1sbDP47pY9UMmXF1ZTJrdvcOgjvNSU5ap0leAN3OSPXI7sPUolNIbYCI3pKy6XUZaE4QXIWBwHogM+AXUvLK/Kg=;
X-YMail-OSG: 1RHob_0VM1n5nlPS.Ycozltxfyy_f1Ozb5.1.6cURQkt08R447shjeL4tSRVb2Fw4i8ATskzDI3u_Oap9t4R3Phbpv2f6R2AcDubkSB3tv_FgRS3Y68-
Received: from [72.231.9.236] by web50309.mail.re2.yahoo.com via HTTP; Wed, 30 Jan 2008 21:02:28 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Wed, 30 Jan 2008 21:02:28 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Spell checking street names
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <184087.53531.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm, "untokenized 
n-gram 
spell 
checker"... does that really make sense?
lucene as 2-gram: lu uc ce en ne..... but all as a single token?  No, I don't think that will work with the Lucene spellchecker.

As for non-tokenizing Analyzer - KeywordAnalyzer.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Max Metral <max@artsalliancelabs.com>
To: java-user@lucene.apache.org
Sent: Wednesday, January 30, 2008 11:34:20 AM
Subject: Spell checking street names

I'm 
using 
Lucene 
to 
spell 
check 
street 
names.  
Right 
now, 
I'm 
using
Double 
Metaphone 
on 
the 
street 
name 
(we 
have 
a 
sophisticated 
regex 
to
parse 
out 
the 
NAME 
as 
opposed 
to 
the 
unit, 
number, 
street 
type, 
or
suffix).  
I 
think 
that 
Double 
Metaphone 
is 
probably 
overkill/wrong, 
and
a 
spell 
checking 
approach 
(n-gram 
based) 
would 
be 
better.  
Part 
of 
the
reason 
is 
if 
we 
look 
at 
some 
common 
mistakes:

 

For 
Commonwealth:

Communwealth

Comonwealth

Common 
wealth

 

Double 
metaphone 
will 
get 
the 
first 
two, 
but 
not 
the 
last.  
Spell 
check
(I 
think) 
would 
get 
all 
3.  
The 
last 
is 
much 
more 
common 
than 
in 
typical
generic 
text 
search 
(Fairoaks 
vs. 
Fair 
Oaks, 
New 
Market 
vs. 
Newmarket,
etc).  
However, 
spell 
check 
will 
only 
get 
the 
third 
if 
the 
n-gram 
input
is 
untokenized 
(right?).

 

 
Conceptually, 
I 
feel 
like 
people 
will 
most 
often 
misspell 
or 
mistype
rather 
than 
completely 
omitting 
words 
from 
the 
street 
name.  
So 
running
the 
n-gram 
on 
the 
untokenized 
street 
name 
seems 
like 
a 
good 
thing.
Problem 
is 
I 
can't 
see 
how 
I 
do 
this, 
SpellChecker 
seems 
to 
always 
want
to 
tokenize 
things, 
and 
I'm 
a 
bit 
confused 
on 
how 
to 
give 
it 
an 
analyzer
that 
doesn't 
tokenize.

 

I 
feel 
like 
this 
might 
be 
a 
newbie 
question, 
so 
apologies 
if 
so.  
But,
1) 
does 
an 
untokenized 
n-gram 
spell 
checker 
seem 
like 
a 
good 
thing 
for
this 
app? 
2) 
Which 
analyzer 
can 
I 
use 
for 
no 
tokenization 
at 
all?

 

--Max





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 05:40:16 2008
Return-Path: <java-user-return-32294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56466 invoked from network); 31 Jan 2008 05:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 05:40:16 -0000
Received: (qmail 65881 invoked by uid 500); 31 Jan 2008 05:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65845 invoked by uid 500); 31 Jan 2008 05:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65834 invoked by uid 99); 31 Jan 2008 05:40:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 21:40:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 Jan 2008 05:39:30 +0000
Received: (qmail 68852 invoked by uid 60001); 31 Jan 2008 05:39:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=t6KUIQJ6Tbsy1sSHdLbF5G+pNQkh1Z6Uvk+O1m4QZfx5HAmDfp9n8IGohmg4MDA90PUoeFmfzFGRfFuDth0w4vkuag7p1TXWp8sxDNIbW/OCwmqTqt4ChI4e4Oam+eM2RfvRi8qk59vvWSCcrJ0tr1PUoBcO1dbDF/3enRilSy0=;
Received: from [72.231.9.236] by web50311.mail.re2.yahoo.com via HTTP; Wed, 30 Jan 2008 21:39:36 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Wed, 30 Jan 2008 21:39:36 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per IndexReader?)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <398275.68302.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Not me, but it looks useful and something I could actually use (exactly to =
look at synchronization bottlenecks in situations where many threads are sh=
aring a single IndexSearcher).  Unfortunately, it looks like it works only =
with IBM's JVM: "Any platform running an IBM=C2=AE-supplied Java=E2=84=A2 S=
DK or JRE, Version 5.0 or above." :(=0A=0AOtis =0A=0A--=0ASematext -- http:=
//sematext.com/ -- Lucene - Solr - Nutch=0A=0A----- Original Message ----=
=0AFrom: Mark Miller <markrmiller@gmail.com>=0ATo: java-user@lucene.apache.=
org=0ASent: Sunday, January 20, 2008 9:46:25 AM=0ASubject: Re: Multiple sea=
rchers (Was: CachingWrapperFilter: why cache per IndexReader?)=0A=0AAnyone =
=0Atried =0Ausing =0Athis =0Aon =0ALucene =0Ayet? =0Ahttp://www.alphaworks.=
ibm.com/tech/jla=0A=0AMichael =0AMcCandless =0Awrote:=0A>=0A> =0AThese =0Ar=
esults =0Aare =0Avery =0Ainteresting.  =0AWith =0A3 =0Athreads =0Aon =0ASSD=
 =0Ayour =0A> =0Asearches =0Arun =0A87% =0Afaster =0Aif =0Ayou =0Ause =0A3 =
=0AIndexSearchers =0Ainstead =0Aof =0Asharing =0A> =0Aa =0Asingle =0Aone.=
=0A>=0A> =0AThis =0Ameans, =0Afor =0Ayour =0Atest, =0Athere =0Aare =0Asome =
=0Acrazy =0Asynchronization =0A> =0Abottlenecks =0Awhen =0Asearching, =0Awh=
ich =0AI =0Athink =0Awe =0Ashould =0Aferret =0Aout =0Aand =0Afix.=0A>=0A> =
=0AHave =0Ayou =0Adone =0Aany =0Aprofiling =0Ato =0Aunderstand =0Awhere =0A=
the =0Athreads =0Aare =0A> =0Awaiting =0Awhen =0Ayou =0Ashare =0Aone =0AInd=
exSearcher?  =0AEG =0AYourKit =0Acan =0Atell =0Ayou =0A> =0Awhere =0Athe =
=0Athreads =0Aare =0Awaiting...=0A>=0A> =0AI =0Aknow =0Athere =0Ais =0Async=
hronization =0Aused =0Awhen =0Areading =0Abytes =0Afrom =0Athe =0A> =0Aunde=
rlying =0Afile =0Adescriptor.  =0AWe've =0Ainvestigated =0Aoptions =0Ato =
=0Aremove =0Athat =0A> =0A(https://issues.apache.org/jira/browse/LUCENE-753=
) =0Abut =0Athose =0Aoptions =0A> =0Aseemed =0Ato =0Ahurt =0Asingle =0Athre=
aded =0Aperformance.  =0AI =0Awonder =0Aif =0Athe =0Apatch =0Aon =0A> =0Ath=
at =0Aissue =0Acloses =0Asome =0Aof =0Athis =0A87% =0Aperformance =0Aloss?=
=0A>=0A> =0ADoes =0Aanyone =0Aknow =0Aof =0Aother =0Asynchronization =0Abot=
tlenecks =0Ain =0Asearching?=0A>=0A> =0AMike=0A>=0A> =0AOtis =0AGospodnetic=
 =0Awrote:=0A>=0A>> =0AThis =0Ais =0Agreat =0Aand =0Avaluable =0Ainformatio=
n, =0AToke(n)!=0A>> =0AJust =0Athe =0Aother =0Aday =0Awe =0Arecommended =0A=
this =0Amulti-IndexSearcher =0Ato =0A>> =0Asomebody =0Aconcerned =0Awith =
=0Alow =0AQPS =0Arates =0Atheir =0Abenchmarks =0Arevealed.  =0A>> =0AThey =
=0Awere =0Ahitting =0Atheir =0Aindex =0Awith =0Aa =0Agood =0Anumber =0Aof =
=0Athreads =0Aand =0A>> =0Ahitting =0Asynchronized =0Ablocks =0Ain =0ALucen=
e.  =0AMultiple =0Asearchers =0Ais =0Aone =0Away =0A>> =0Aaround =0Athat.  =
=0AAlso, =0Ayour =0Asweet =0Aspot =0Aof =0A3 =0Amakes =0Asense =0A- =0Akeep=
s =0Aall =0Aof =0A>> =0Ayour =0Acores =0Afully =0Abusy.=0A>>=0A>> =0AYou =
=0Aare =0Aour =0Amain =0ASSD =0Ainfo =0Asupplier =0A-- =0Akeep =0Ait =0Acom=
ing! =0A:)  =0AAnd =0Alet =0Aus =0A>> =0Aknow =0Awhat =0Anumbers =0Ayou =0A=
get =0Afor =0A2.2 =0Aand =0A2.3, =0Aplease.=0A>>=0A>> =0AThanks,=0A>> =0AOt=
is=0A>>=0A>> =0A-- =0A>> =0ASematext =0A-- =0Ahttp://sematext.com/ =0A-- =
=0ALucene =0A- =0ASolr =0A- =0ANutch=0A>>=0A>> =0A----- =0AOriginal =0AMess=
age =0A----=0A>> =0AFrom: =0AToke =0AEskildsen =0A<te@statsbiblioteket.dk>=
=0A>> =0ATo: =0Ajava-user@lucene.apache.org=0A>> =0ASent: =0AThursday, =0AJ=
anuary =0A17, =0A2008 =0A5:31:56 =0AAM=0A>> =0ASubject: =0AMultiple =0Asear=
chers =0A(Was: =0ACachingWrapperFilter: =0Awhy =0Acache =0Aper =0A>> =0AInd=
exReader?)=0A>>=0A>> =0AOn =0AFri, =0A2008-01-11 =0Aat =0A11:34 =0A+0100, =
=0AToke =0AEskildsen =0Awrote:=0A>>> =0AAs =0Afor =0Ashared =0Asearcher =0A=
vs. =0Aindividual =0Asearchers, =0Athere =0Awas =0Ajust =0Aa=0A>>> =0Asligh=
t =0Apenalty =0Afor =0Ausing =0Aindividual =0Asearchers.=0A>>=0A>> =0AWhoop=
s! =0ASeems =0Alike =0AI =0Aneed =0Abetter =0AQA =0Afor =0Amy =0Atest-code.=
 =0AI =0Adidn't =0Ause=0A>> =0Aindividual =0Asearchers =0Afor =0Aeach =0Ath=
read =0Awhen =0AI =0Athought =0AI =0Awas. =0AThe =0Aslight=0A>> =0Apenalty =
=0Awrongly =0Aobserved =0Amust =0Ahave =0Abeen =0Adue =0Ato =0Ameasurement =
=0Avariations.=0A>>=0A>> =0AWith =0Athe =0Acorrected =0Atest, =0Asome =0Ain=
teresting =0Aobservations =0Aabout =0Aour =0Aindex=0A>> =0Acan =0Abe =0Amad=
e, =0Awhich =0Awill =0Adefinitely =0Aaffect =0Aour =0Aconfiguration. =0AIn =
=0Athe=0A>> =0Afollowing, =0Athe =0Aqueries/second =0Ais =0Aan =0Aaverage =
=0Aover =0A350.000 =0Aqueries.=0A>> =0AFor =0Aeach =0Aquery, =0Aa =0Asearch=
 =0Ais =0Aperformed =0Aand =0Athe =0Acontent =0Aof =0Aa =0Aspecific=0A>> =
=0Afield =0Ais =0Aextracted =0Afor =0Athe =0Afirst =0A20 =0Ahits.=0A>>=0A>>=
 =0A=3D=3D =0ASystem-summary =0A=3D=3D=0A>> =0ADual-core =0AIntel =0AXeon =
=0A5148 =0A2.3 =0AGHz, =0A8 =0AGB =0ARAM, =0ALinux, =0ALucene =0A2.1, =0A37=
=0A>>  =0AGB/10=0A>> =0Amillion =0Adocuments =0Aindex, =0Aqueries =0Ataken =
=0Afrom =0Aproduction =0Asystem =0Alogs.=0A>>=0A>> =0A=3D=3D =0AConventiona=
l =0Aharddisks =0A(2 =0A* =0A15000 =0ARPM =0Ain =0Asoftware =0ARAID =0A1) =
=0A=3D=3D=0A>> =0A1 =0Athread,  =0A1 =0Asearcher:  =0A109 =0Aqueries/sec=0A=
>> =0A2 =0Athreads, =0A1 =0Asearcher:  =0A118 =0Aqueries/sec=0A>> =0A2 =0At=
hreads, =0A2 =0Asearchers: =0A157 =0Aqueries/sec=0A>> =0A3 =0Athreads, =0A1=
 =0Asearcher:  =0A111 =0Aqueries/sec=0A>> =0A3 =0Athreads, =0A3 =0Asearcher=
s: =0A177 =0Aqueries/sec=0A>> =0A4 =0Athreads, =0A1 =0Asearcher:  =0A108 =
=0Aqueries/sec=0A>> =0A4 =0Athreads, =0A4 =0Asearchers: =0A169 =0Aqueries/s=
ec=0A>>=0A>> =0A=3D=3D =0ASolid =0AState =0ADrives =0A(2 =0A* =0A32 =0AGB =
=0ASamsung =0Ain =0Asoftware =0ARAID =0A0) =0A=3D=3D=0A>> =0A1 =0Athread,  =
=0A1 =0Asearcher:  =0A193 =0Aqueries/sec=0A>> =0A2 =0Athreads, =0A1 =0Asear=
cher:  =0A295 =0Aqueries/sec=0A>> =0A2 =0Athreads, =0A2 =0Asearchers: =0A35=
7 =0Aqueries/sec=0A>> =0A3 =0Athreads, =0A1 =0Asearcher:  =0A197 =0Aqueries=
/sec=0A>> =0A3 =0Athreads, =0A3 =0Asearchers: =0A369 =0Aqueries/sec=0A>> =
=0A4 =0Athreads, =0A1 =0Asearcher:  =0A192 =0Aqueries/sec=0A>> =0A4 =0Athre=
ads, =0A4 =0Asearchers: =0A302 =0Aqueries/sec=0A>>=0A>> =0AGraphs =0Acan =
=0Abe =0Aviewed =0Aat =0Ahttp://wiki.statsbiblioteket.dk/summa/Hardware=0A>=
>=0A>> =0AFor =0Aour =0Asetup =0Ait =0Aseems =0Athat =0Athe =0Ausual =0Aavo=
id-multiple-searchers =0Aadvice=0A>>  =0Ais=0A>> =0Anot =0Avalid, =0Aneithe=
r =0Afor =0Aconventional =0Aharddisks, =0Anor =0ASolid =0AState =0ADrives.=
=0A>> =0AThe =0Aoptimal =0Aconfiguration =0Afor =0Aour =0Adual-core =0Atest=
 =0Amachine =0Ais =0Athree=0A>> =0Athreads =0Awith =0Aindividual =0Asearche=
rs. =0AThe =0Aobvious =0Aquestion =0Ais =0Awhether =0Athis=0A>> =0Acan =0Ab=
e =0Aextended =0Ato =0Aother =0Acases.=0A>>=0A>>> =0AAs =0Afor =0Athreading=
, =0AI =0Anoticed =0Asomething =0Astrange: =0AOn =0Athe =0Adual-core=0A>>> =
=0Amachine, =0Atwo =0Athreads =0Agave =0Abetter =0Aperformance =0Athan =0Ao=
ne, =0Awhile =0A4=0A>>  =0Athreads=0A>>> =0Agave =0Athe =0Asame =0Aperforma=
nce =0Aas =0Aone.=0A>>=0A>> =0AAs =0Acan =0Abe =0Aseen =0Aabove, =0Athis =
=0Astrange =0Apicture =0Ais =0Aconsistent. =0A1, =0A3 =0Aand =0A4=0A>> =0At=
hreads =0Awith =0Ashared =0Asearcher =0Aperforms =0Athe =0Asame, =0Aindepen=
dent =0Aof =0Awhich=0A>> =0Astorage =0Athe =0Amachine =0Auses, =0Awhile =0A=
2 =0Athreads =0Aperforms =0Amarkedly =0Abetter.=0A>>=0A>> =0AI've =0Astarte=
d =0Athe =0Asame =0Atest-suite =0Afor =0ALucene =0A2.2 =0Aand =0A2.3RC2. =
=0AIt =0Ashould=0A>> =0Abe =0Afinished =0Ain =0Aa =0Aday =0Aor =0Atwo.=0A>>=
=0A>>=0A>> =0A-------------------------------------------------------------=
--------=0A>> =0ATo =0Aunsubscribe, =0Ae-mail: =0Ajava-user-unsubscribe@luc=
ene.apache.org=0A>> =0AFor =0Aadditional =0Acommands, =0Ae-mail: =0Ajava-us=
er-help@lucene.apache.org=0A>>=0A>>=0A>>=0A>>=0A>>=0A>> =0A----------------=
-----------------------------------------------------=0A>> =0ATo =0Aunsubsc=
ribe, =0Ae-mail: =0Ajava-user-unsubscribe@lucene.apache.org=0A>> =0AFor =0A=
additional =0Acommands, =0Ae-mail: =0Ajava-user-help@lucene.apache.org=0A>>=
=0A>=0A>=0A> =0A-----------------------------------------------------------=
----------=0A> =0ATo =0Aunsubscribe, =0Ae-mail: =0Ajava-user-unsubscribe@lu=
cene.apache.org=0A> =0AFor =0Aadditional =0Acommands, =0Ae-mail: =0Ajava-us=
er-help@lucene.apache.org=0A>=0A>=0A=0A------------------------------------=
---------------------------------=0ATo =0Aunsubscribe, =0Ae-mail: =0Ajava-u=
ser-unsubscribe@lucene.apache.org=0AFor =0Aadditional =0Acommands, =0Ae-mai=
l: =0Ajava-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 06:03:26 2008
Return-Path: <java-user-return-32295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92594 invoked from network); 31 Jan 2008 06:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 06:03:26 -0000
Received: (qmail 84220 invoked by uid 500); 31 Jan 2008 06:03:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84178 invoked by uid 500); 31 Jan 2008 06:03:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84167 invoked by uid 99); 31 Jan 2008 06:03:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 22:03:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 06:02:43 +0000
Received: by fg-out-1718.google.com with SMTP id d23so569864fga.27
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 22:02:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=wbaEaMujO+YgnFc4XWjCvbqvb+w2rptZ04oymy1okjw=;
        b=KE/83siwttjRivwYJDK0DWLKSHoolP410uRcL7EwGBHQafhOrG1Yb8HxdB1+daj66dirrwlbmYlUduoupUSX7w0y01wqKchdJ6LcC1WHnIlTVPMV315WrGX0ZHRAXO7zlPPkcDlUBOIdR8iNyc1Oi0iY+C6gtwmASHSEdrCBLEs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L5TfHyPh4uZMRnip1viquAOA6tIPgoeK95DHDSjk9GYGLfbtP4/3VcZfYe+bYUEhed0Fi0c6XLEPyGyu3uaD/zcpJQLMpdlkKMNx/n7t5IilgDM7qUSclcil4HHgnihjckspqcwO7jlLgYZ2P+rZ5waUuvSLhUlMZ+YqDM8n8HE=
Received: by 10.86.86.12 with SMTP id j12mr1515710fgb.68.1201759369810;
        Wed, 30 Jan 2008 22:02:49 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Wed, 30 Jan 2008 22:02:49 -0800 (PST)
Message-ID: <e05f0fd10801302202g7abb21c7re10fabc613cf9a1f@mail.gmail.com>
Date: Thu, 31 Jan 2008 08:02:49 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: contrib/benchmark Quality
In-Reply-To: <95E8CDC6-08DD-4D77-8779-A2D487C23DD0@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1679_9037206.1201759369811"
References: <95E8CDC6-08DD-4D77-8779-A2D487C23DD0@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1679_9037206.1201759369811
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant, I initially thought of doing so, but after working on the Million
Queries Track where running the 10,000 queries could take more than a day
(depending on the settings) and where indexing was done once and took few
days I felt that a more tight control is needed than that provided by the
benchmark layer. Maybe I should rephrase this as - I thought that the time
it would take to stabilize this functionality is not worth to invest because
the run itself can take so long and I wouldn't like to have to repeat all
this just because of a mistake in the benchmark settings. But then the same
may be a reason to have a framework that protects you from errors... :-)
I'll take a second look at this!

For setting the similarities and what have you the SetProp task can be used
to set the class names and then your similarity of choice can be loaded
byName - will restrict to a no args constructor, but this is not too bad...?
We need a new QualityRunTask for sure, but this is  quite straightforward.

Cheers,
Doron


On Thu, Jan 31, 2008 at 12:31 AM, Grant Ingersoll <gsingers@apache.org>
wrote:

> Has anyone thought about integrating the contrib/benchmark Quality
> stuff into the "algorithm" framework that's used for timings, etc.?
> For instance, I would like to write an algorithm file where my rounds
> consist of doing various runs with different similarities all on the
> same index.
>
> It would probably need a new Task for setting the similarity (and the
> ability to modify the index using the setNorms functionality).  Anyone
> else (Doron :-)  ) have any thoughts on going about this?
>
> -Grant
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1679_9037206.1201759369811--

From java-user-return-32296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 06:10:08 2008
Return-Path: <java-user-return-32296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31330 invoked from network); 31 Jan 2008 06:10:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 06:10:07 -0000
Received: (qmail 88927 invoked by uid 500); 31 Jan 2008 06:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88900 invoked by uid 500); 31 Jan 2008 06:09:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88889 invoked by uid 99); 31 Jan 2008 06:09:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 22:09:53 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 06:09:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JKSc7-00037y-7s
	for java-user@lucene.apache.org; Wed, 30 Jan 2008 22:09:31 -0800
Message-ID: <15198783.post@talk.nabble.com>
Date: Wed, 30 Jan 2008 22:09:31 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in Lucene 2.3.0
In-Reply-To: <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15175141.post@talk.nabble.com> <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com> <15197794.post@talk.nabble.com> <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


@Yonik

So you mean to say, that if two threads have the same instance of an
IndexWriter passed to both of them, and both these threads run on two
different CPUs, then they can write to the index at the same time ?



Yonik Seeley wrote:
> 
> On Jan 30, 2008 10:59 PM, ajay_garg
> <garg.jeena.isi.ka.naam.hai@gmail.com> wrote:
>>
>> Thanks Mike for your directions.
>>
>> Yes, I am in fact using a single computer for my application, and your
>> saying that in this case, multiple threads with a single IndexWriter wll
>> give a better performance. Hmmm. I just wonder that since each
>> IndexWriter
>> has a single write.lock, this means that sitting on the CPU, we observe
>> that
>> at a particular instant, only a single thread is using the CPU,
> 
> The write.lock is to protect against other IndexWriter instances,
> *not* against other threads.
> Using multiple threads on a single IndexWriter should utilize multiple
> CPUs.
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-Lucene-2.3.0-tp15175141p15198783.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 06:13:03 2008
Return-Path: <java-user-return-32297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32012 invoked from network); 31 Jan 2008 06:13:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 06:13:03 -0000
Received: (qmail 93410 invoked by uid 500); 31 Jan 2008 06:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93377 invoked by uid 500); 31 Jan 2008 06:12:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93366 invoked by uid 99); 31 Jan 2008 06:12:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 22:12:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 06:12:19 +0000
Received: by py-out-1112.google.com with SMTP id a73so649366pye.9
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 22:12:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=4r7dUHNqSgjNszF+TCK07cpv41KBl9dIUXnxAAfyh/I=;
        b=wChJ5w1GAMDZau9wF7sZESmkgrjF/LB7Ilg6UzqDXQ3KfoL9Jh6KVsD4AHwV+l5VpCh8d2J/1y+aEbc5HQPHD+8j6fDs/lAlDPMxNMJR9NMyC+Esas/ritBr2a/F6MGZP9qiWxJI69et8Za+lGioq3idVdBX2djYFesKzSThCaI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bEWdct8KJljOerx5fSiSY/vi8FJ7GqH4QX893j861gPxVKqG4pZtAY/A+t99Jn57vrGdXONSUCXCSodax1IFEyHSzVJpGOCFaALCvfEPGLAmANjtjYLwdZZ5oij43nsw3MLvYEMQz9pO0WLzeThFa25cJsXr88DKrnubnaJfgbc=
Received: by 10.142.158.17 with SMTP id g17mr884884wfe.157.1201759945413;
        Wed, 30 Jan 2008 22:12:25 -0800 (PST)
Received: by 10.142.178.19 with HTTP; Wed, 30 Jan 2008 22:12:25 -0800 (PST)
Message-ID: <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
Date: Thu, 31 Jan 2008 11:42:25 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5346_4060619.1201759945417"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
	 <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
	 <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5346_4060619.1201759945417
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

with true:
i finding a serious problem when i need new index please help..
but how can ikeep chnaging the true flase option..
:(
please help me...:(
Exception in thread "main" java.io.IOException: Cannot delete _17.cfs
        at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
        at org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
        at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java
:102)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)


False
Exception in thread "main" java.io.IOException: Lock obtain timed out:
Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
        at org.apache.lucene.store.Lock.obtain(Lock.java:58)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:223)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)
        at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
        at com.cecilia.wim.process.Indexer.main(Indexer.java:60)


On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> Set the parameter to false as per the documentation....
>
> Erick
>
> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
>
> > yes i dont want the old index to be deletd since its running on my app
> > server..
> > any suggestion..?
> >
> > On Jan 27, 2008 3:07 PM, Daniel Naber <lucenelist2007@danielnaber.de>
> > wrote:
> >
> > > On Sonntag, 27. Januar 2008, anjana m wrote:
> > >
> > > >         IndexWriter writer = new IndexWriter(indexDir, new
> > > > StandardAnalyzer(), true);
> > >
> > > The true parameter means that the old index will be deleted, is that
> > your
> > > problem?
> > >
> > > Regards
> > >  Daniel
> > >
> > > --
> > > http://www.danielnaber.de
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_5346_4060619.1201759945417--

From java-user-return-32298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 06:40:59 2008
Return-Path: <java-user-return-32298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44878 invoked from network); 31 Jan 2008 06:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 06:40:59 -0000
Received: (qmail 21091 invoked by uid 500); 31 Jan 2008 06:40:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21061 invoked by uid 500); 31 Jan 2008 06:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21050 invoked by uid 99); 31 Jan 2008 06:40:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 22:40:44 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 06:40:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JKT5y-0003u1-R1
	for java-user@lucene.apache.org; Wed, 30 Jan 2008 22:40:22 -0800
Message-ID: <15199037.post@talk.nabble.com>
Date: Wed, 30 Jan 2008 22:40:22 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: A small doubt related to write.lock
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.

I will be obliged, if someone could elaborate as to what is the difference
between IndexReader.unlock() and IndexWriter.finalize() methods.

Thanks
Ajay Garg
-- 
View this message in context: http://www.nabble.com/A-small-doubt-related-to-write.lock-tp15199037p15199037.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 07:08:38 2008
Return-Path: <java-user-return-32299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54227 invoked from network); 31 Jan 2008 07:08:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 07:08:38 -0000
Received: (qmail 55572 invoked by uid 500); 31 Jan 2008 07:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55547 invoked by uid 500); 31 Jan 2008 07:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55536 invoked by uid 99); 31 Jan 2008 07:08:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jan 2008 23:08:23 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 07:07:55 +0000
Received: by fg-out-1718.google.com with SMTP id d23so589758fga.27
        for <java-user@lucene.apache.org>; Wed, 30 Jan 2008 23:08:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=nAzaZ3VJubemR0SZUzmJBpPahiaAA2iGrlRzmVEc0gw=;
        b=e04d6/+mNmbiSEAruG6BPsugz2Gt0u//V7zCZinmrLA23pqymKXdI5+a4fJAa+hb/0Oq6VEi5lV00MdkvdMhv7aOYkn7s9lWBfZHK9MGxfxPsLf72OCsedB1PSNgnNRa8f4TVOh+jW307Pisl76UcFq7VvvCtPQyNkynCFY6yJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=izC4ukilKCPIFX+UAECPcKJ3WHgwtW/F3GMQ/njpMHjS7Ql1Oz3vBsG50AQDUK0hN8oJ9aXRZvlGkeB0SiCmgDgoqtwyVLFDQgBxEKZHOX8gvovk5zTiPvJUSt7SSHRgQit3wZ615SMlq+3QhA6P9e73N9cUNxOS78fFhnYC2c4=
Received: by 10.86.59.2 with SMTP id h2mr1561008fga.78.1201763280769;
        Wed, 30 Jan 2008 23:08:00 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Wed, 30 Jan 2008 23:08:00 -0800 (PST)
Message-ID: <e05f0fd10801302308x457e65d0ye262a1101e2ca31d@mail.gmail.com>
Date: Thu, 31 Jan 2008 09:08:00 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: A small doubt related to write.lock
In-Reply-To: <15199037.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1849_15593995.1201763280768"
References: <15199037.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1849_15593995.1201763280768
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ajay,

IndexReader.unlock() is a brute force call to be used by applications/users
knowing that a lock can be safely removed.

finalize() on the other hand is a method that Java will call when garbage
collecting a no-more-referenced object. So it is often a place for cleanup
code. However the problem with finalize is that it is not guaranteed when it
will be called, and in fact it is not guaranteed that it will be called at
all (even as the JVM shutsdown). Therefore it is not recommended to have
logic dependency in finalize(), and Lucene in fact does not have such, as
write locks are released elsewhere.

HTH,
Doron

On Thu, Jan 31, 2008 at 8:40 AM, ajay_garg <
garg.jeena.isi.ka.naam.hai@gmail.com> wrote:

>
> Hi all.
>
> I will be obliged, if someone could elaborate as to what is the difference
> between IndexReader.unlock() and IndexWriter.finalize() methods.
>
> Thanks
> Ajay Garg
> --
> View this message in context:
> http://www.nabble.com/A-small-doubt-related-to-write.lock-tp15199037p15199037.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1849_15593995.1201763280768--

From java-user-return-32300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 08:43:25 2008
Return-Path: <java-user-return-32300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83741 invoked from network); 31 Jan 2008 08:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 08:43:25 -0000
Received: (qmail 36568 invoked by uid 500); 31 Jan 2008 08:43:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36536 invoked by uid 500); 31 Jan 2008 08:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36525 invoked by uid 99); 31 Jan 2008 08:43:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 00:43:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 08:42:43 +0000
Received: by wa-out-1112.google.com with SMTP id j40so955293wah.11
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 00:42:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=rGiY7ghQl/fz9Us2t4a5Q/v9si1uusDORsaViMC69iY=;
        b=gzHa1TblUcp1SAqK7WXSx/Cjg2j7EGK7uBmDtRDuxdurJXQfwu8+T/a7c/JHRNu22iaQozxtFRf2Wth4G9yh07GxgglUZZ3SkwL0MptxzubrZnlpUMknD3jP/IayZpc45J9MP1J7AGxOGcB/xorIziHWALyVNTfGBoLJAfk4w0Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=SbpCayruSmsMBrjMUEG2ReDE5YUE9MXbc0GZ1mFiEWWSOVAVlZLxkoiQUHJ0CT6O1MrMSt5h3t1o125nmysXBJpBdi9Z2D2fP5dqpxKzlSBoewIE8EdooczsEQGSaYaoXLTmeju1Tir//xGHilw+l94O32B/2rbrh/q+9kNDtsI=
Received: by 10.114.160.1 with SMTP id i1mr2109304wae.49.1201768969743;
        Thu, 31 Jan 2008 00:42:49 -0800 (PST)
Received: by 10.114.156.18 with HTTP; Thu, 31 Jan 2008 00:42:49 -0800 (PST)
Message-ID: <839ba01c0801310042r7597c790w34a52f701e46b9b@mail.gmail.com>
Date: Thu, 31 Jan 2008 16:42:49 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Distributed Lucene Directory
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I am wondering if there exist any implemenation of
org.apache.lucene.store.Directory which can be distributed across
multiple machines with comparable performance to a local FSDirectory
index, or is such an idea feasible in the first place.

By comparable performance I mean a 100G index distributed in 10
machines should achieve the same performance as a 10G index on a local
FSDirectory.

I know that optimization would be a problem for such a big index, but
would the partial optimization introduced in Lucene 2.3 help?

Any thoughts?

Regards,
Cedric Ho

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 08:51:41 2008
Return-Path: <java-user-return-32301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86888 invoked from network); 31 Jan 2008 08:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 08:51:41 -0000
Received: (qmail 45232 invoked by uid 500); 31 Jan 2008 08:51:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45203 invoked by uid 500); 31 Jan 2008 08:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45192 invoked by uid 99); 31 Jan 2008 08:51:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 00:51:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.190.56.23] (HELO n4.bullet.mail.re4.yahoo.com) (206.190.56.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 Jan 2008 08:50:56 +0000
Received: from [68.142.237.88] by n4.bullet.re4.yahoo.com with NNFMP; 31 Jan 2008 08:51:01 -0000
Received: from [66.196.97.146] by t4.bullet.re3.yahoo.com with NNFMP; 31 Jan 2008 08:51:01 -0000
Received: from [127.0.0.1] by omp204.mail.re3.yahoo.com with NNFMP; 31 Jan 2008 08:51:01 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 705317.79867.bm@omp204.mail.re3.yahoo.com
Received: (qmail 63192 invoked by uid 60001); 31 Jan 2008 08:51:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=fZupxRG1kIcuhQttzAbPO/pOpComeLtw3r0mIF75xsy/QjnYvsbLN/mlwNxRw5tjGGUbpnLlMWPBx1n/dR2ggfqAiyyLpA7i5MvOqrJozEk1oQzUtpUOA7KCBZzlny71fPDU6P5PNdcl4W3WEDWQ3ntc7BDKiecJtMko8m3QfGg=;
X-YMail-OSG: jQIIXHwVM1keWl4xOguhkZmVV4P2S3tbPTEl8Kej4K5WI6I04uCqeC7329855ZmWt.w1LZQLlFSoaf9o_1AFEm3i4yjAK0Y79fBtQaN9ScK_EhNF9jSO.vghCLs-
Received: from [84.131.224.71] by web23015.mail.ird.yahoo.com via HTTP; Thu, 31 Jan 2008 08:51:00 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.162
Date: Thu, 31 Jan 2008 08:51:00 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Spell checking street names
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <508597.61749.qm@web23015.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Otis, =0AI think it was proposed to have spell checker that works on multip=
le tokens / Document:=0A=0Awhere field to be searched with SpellChecker" lo=
oks like  "lucene search library" does not get tokenized and then fed to th=
e SpellChecker, rather having this as a  "single token" that gets chopped i=
nto n-Grams.=0A=0A"lucene search library"->"lu =0Auc =0Ace =0Aen =0Ane se e=
a ar".... =0A=0Aso far so good, that would work, but re-scoring part of the=
 SpellChecker would be far for optimal for these cases, plain edit distance=
 does not support gaps (some sort of Needleman Wunsch would work nice). =0A=
=0AThink of this as having N-Gram index of Documents, rather than tokens. T=
his approach absolutely makes sense for short "documents" like Address.=0A=
=0AAnd to come back to the Question, yes, you can make separate Field from =
your address and index it as a keyword, than you can just feed this field t=
o the SpellChecker. It will not be perfect.... but will do solid job. Your =
case will be covered ok.=0A=0ACommonwealth:=0ACommunwealth=0AComonwealth=0A=
Common wealth =0A=0A=0A----- Original Message ----=0AFrom: Otis Gospodnetic=
 <otis_gospodnetic@yahoo.com>=0ATo: java-user@lucene.apache.org=0ASent: Thu=
rsday, 31 January, 2008 6:02:28 AM=0ASubject: Re: Spell checking street nam=
es=0A=0AHmmm, =0A"untokenized =0An-gram =0Aspell =0Achecker"... =0Adoes =0A=
that =0Areally =0Amake =0Asense?=0Alucene =0Aas =0A2-gram: =0Alu =0Auc =0Ac=
e =0Aen =0Ane..... =0Abut =0Aall =0Aas =0Aa =0Asingle =0Atoken?  =0ANo, =0A=
I =0Adon't =0Athink =0Athat =0Awill =0Awork =0Awith =0Athe =0ALucene =0Aspe=
llchecker.=0A=0AAs =0Afor =0Anon-tokenizing =0AAnalyzer =0A- =0AKeywordAnal=
yzer.=0A=0AOtis=0A--=0ASematext =0A-- =0Ahttp://sematext.com/ =0A-- =0ALuce=
ne =0A- =0ASolr =0A- =0ANutch=0A=0A----- =0AOriginal =0AMessage =0A----=0AF=
rom: =0AMax =0AMetral =0A<max@artsalliancelabs.com>=0ATo: =0Ajava-user@luce=
ne.apache.org=0ASent: =0AWednesday, =0AJanuary =0A30, =0A2008 =0A11:34:20 =
=0AAM=0ASubject: =0ASpell =0Achecking =0Astreet =0Anames=0A=0AI'm =0Ausing =
=0ALucene =0Ato =0Aspell =0Acheck =0Astreet =0Anames.  =0ARight =0Anow, =0A=
I'm =0Ausing=0ADouble =0AMetaphone =0Aon =0Athe =0Astreet =0Aname =0A(we =
=0Ahave =0Aa =0Asophisticated =0Aregex =0Ato=0Aparse =0Aout =0Athe =0ANAME =
=0Aas =0Aopposed =0Ato =0Athe =0Aunit, =0Anumber, =0Astreet =0Atype, =0Aor=
=0Asuffix).  =0AI =0Athink =0Athat =0ADouble =0AMetaphone =0Ais =0Aprobably=
 =0Aoverkill/wrong, =0Aand=0Aa =0Aspell =0Achecking =0Aapproach =0A(n-gram =
=0Abased) =0Awould =0Abe =0Abetter.  =0APart =0Aof =0Athe=0Areason =0Ais =
=0Aif =0Awe =0Alook =0Aat =0Asome =0Acommon =0Amistakes:=0A=0A =0A=0AFor =
=0ACommonwealth:=0A=0ACommunwealth=0A=0AComonwealth=0A=0ACommon =0Awealth=
=0A=0A =0A=0ADouble =0Ametaphone =0Awill =0Aget =0Athe =0Afirst =0Atwo, =0A=
but =0Anot =0Athe =0Alast.  =0ASpell =0Acheck=0A(I =0Athink) =0Awould =0Age=
t =0Aall =0A3.  =0AThe =0Alast =0Ais =0Amuch =0Amore =0Acommon =0Athan =0Ai=
n =0Atypical=0Ageneric =0Atext =0Asearch =0A(Fairoaks =0Avs. =0AFair =0AOak=
s, =0ANew =0AMarket =0Avs. =0ANewmarket,=0Aetc).  =0AHowever, =0Aspell =0Ac=
heck =0Awill =0Aonly =0Aget =0Athe =0Athird =0Aif =0Athe =0An-gram =0Ainput=
=0Ais =0Auntokenized =0A(right?).=0A=0A =0A=0A =0AConceptually, =0AI =0Afee=
l =0Alike =0Apeople =0Awill =0Amost =0Aoften =0Amisspell =0Aor =0Amistype=
=0Arather =0Athan =0Acompletely =0Aomitting =0Awords =0Afrom =0Athe =0Astre=
et =0Aname.  =0ASo =0Arunning=0Athe =0An-gram =0Aon =0Athe =0Auntokenized =
=0Astreet =0Aname =0Aseems =0Alike =0Aa =0Agood =0Athing.=0AProblem =0Ais =
=0AI =0Acan't =0Asee =0Ahow =0AI =0Ado =0Athis, =0ASpellChecker =0Aseems =
=0Ato =0Aalways =0Awant=0Ato =0Atokenize =0Athings, =0Aand =0AI'm =0Aa =0Ab=
it =0Aconfused =0Aon =0Ahow =0Ato =0Agive =0Ait =0Aan =0Aanalyzer=0Athat =
=0Adoesn't =0Atokenize.=0A=0A =0A=0AI =0Afeel =0Alike =0Athis =0Amight =0Ab=
e =0Aa =0Anewbie =0Aquestion, =0Aso =0Aapologies =0Aif =0Aso.  =0ABut,=0A1)=
 =0Adoes =0Aan =0Auntokenized =0An-gram =0Aspell =0Achecker =0Aseem =0Alike=
 =0Aa =0Agood =0Athing =0Afor=0Athis =0Aapp? =0A2) =0AWhich =0Aanalyzer =0A=
can =0AI =0Ause =0Afor =0Ano =0Atokenization =0Aat =0Aall?=0A=0A =0A=0A--Ma=
x=0A=0A=0A=0A=0A=0A--------------------------------------------------------=
-------------=0ATo =0Aunsubscribe, =0Ae-mail: =0Ajava-user-unsubscribe@luce=
ne.apache.org=0AFor =0Aadditional =0Acommands, =0Ae-mail: =0Ajava-user-help=
@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      ______________________________=
____________________________=0ASent from Yahoo! Mail - a smarter inbox http=
://uk.mail.yahoo.com=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 09:19:17 2008
Return-Path: <java-user-return-32302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1523 invoked from network); 31 Jan 2008 09:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 09:19:17 -0000
Received: (qmail 75963 invoked by uid 500); 31 Jan 2008 09:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75940 invoked by uid 500); 31 Jan 2008 09:19:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75929 invoked by uid 99); 31 Jan 2008 09:19:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 01:19:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.249] (HELO hs-out-2122.google.com) (64.233.178.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:18:33 +0000
Received: by hs-out-2122.google.com with SMTP id 54so537541hsz.5
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 01:18:37 -0800 (PST)
Received: by 10.151.10.7 with SMTP id n7mr584495ybi.75.1201771117074;
        Thu, 31 Jan 2008 01:18:37 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 15sm3065819wrl.11.2008.01.31.01.18.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 31 Jan 2008 01:18:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com> <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com> <200801271037.43451@danielnaber.de> <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com> <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com> <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Retain the index
Date: Thu, 31 Jan 2008 04:19:09 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


It looks like you are passing "true" to FSDirectory.getDirectory,  
which you shouldn't do.  Always pass "false" to that.  (Newer  
versions of Lucene have deprecated the create flag to FSDirectory,  
leaving it entirely to IndexWriter).

On the lock obtain timed out, probably that's a left over lock file,  
so you should just remove it if you're sure it is.

Mike

anjana m wrote:

> with true:
> i finding a serious problem when i need new index please help..
> but how can ikeep chnaging the true flase option..
> :(
> please help me...:(
> Exception in thread "main" java.io.IOException: Cannot delete _17.cfs
>         at org.apache.lucene.store.FSDirectory.create 
> (FSDirectory.java:144)
>         at org.apache.lucene.store.FSDirectory.<init> 
> (FSDirectory.java:128)
>         at org.apache.lucene.store.FSDirectory.getDirectory 
> (FSDirectory.java
> :102)
>         at org.apache.lucene.index.IndexWriter.<init> 
> (IndexWriter.java:193)
>
>
> False
> Exception in thread "main" java.io.IOException: Lock obtain timed out:
> Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
> 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
>         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
>         at org.apache.lucene.index.IndexWriter.<init> 
> (IndexWriter.java:223)
>         at org.apache.lucene.index.IndexWriter.<init> 
> (IndexWriter.java:193)
>         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
>         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
>
>
> On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>  
> wrote:
>
>> Set the parameter to false as per the documentation....
>>
>> Erick
>>
>> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
>>
>>> yes i dont want the old index to be deletd since its running on  
>>> my app
>>> server..
>>> any suggestion..?
>>>
>>> On Jan 27, 2008 3:07 PM, Daniel Naber  
>>> <lucenelist2007@danielnaber.de>
>>> wrote:
>>>
>>>> On Sonntag, 27. Januar 2008, anjana m wrote:
>>>>
>>>>>         IndexWriter writer = new IndexWriter(indexDir, new
>>>>> StandardAnalyzer(), true);
>>>>
>>>> The true parameter means that the old index will be deleted, is  
>>>> that
>>> your
>>>> problem?
>>>>
>>>> Regards
>>>>  Daniel
>>>>
>>>> --
>>>> http://www.danielnaber.de
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 09:24:04 2008
Return-Path: <java-user-return-32303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3370 invoked from network); 31 Jan 2008 09:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 09:24:03 -0000
Received: (qmail 88304 invoked by uid 500); 31 Jan 2008 09:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88149 invoked by uid 500); 31 Jan 2008 09:23:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88137 invoked by uid 99); 31 Jan 2008 09:23:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 01:23:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cdoronc@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:23:33 +0000
Received: by fg-out-1718.google.com with SMTP id d23so632458fga.27
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 01:23:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=FgBtV+OAHL0WE5CZ+BN8a0Knw3SZCIovtXggKGYV1eA=;
        b=tUDpt9F+dPJYtUsfq8Dz8dFpSAHpjZIsy+bWCrcwwsrfz+4+bJuV/3Q8Lahts9gE2gWDISOQsBVvDYa+5KWj4aS1ilrNJ9TyomFf20MJO+RRsskngAE/PdlB1qjhzZBUwcWMvXAjdLBQUe5T4LWELq4Sx4K8StOEENwZZG3vOLE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gLJFF7Cm5Ofy4ZyhJ1GDOtLvPKqRTItEuai1dWoPN4V0eNmZy6kN3WfCwMp+k8si+aA73LsAnAt3+O6U8aV5+NT6Av8wwkmFn6gPrLiO9+CK+4tmwbMSKOrt8ZFy7vNf/lQUHuM2lXVU/B5H1IGRsrvH84FHC7Lw36nKvASlxpo=
Received: by 10.86.53.8 with SMTP id b8mr1689386fga.32.1201771406935;
        Thu, 31 Jan 2008 01:23:26 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Thu, 31 Jan 2008 01:23:26 -0800 (PST)
Message-ID: <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
Date: Thu, 31 Jan 2008 11:23:26 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
In-Reply-To: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2265_7429884.1201771406917"
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2265_7429884.1201771406917
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This may help:
http://www.nabble.com/Updating-Lucene-Index-with-Unstored-fields-tt15188818.html#a15188818

Doron

On Thu, Jan 31, 2008 at 2:42 AM, John Wang <john.wang@gmail.com> wrote:

> Hi all:
>
>    We have a large index and it is difficult to reindex.
>
>    We want to add another field to the index without reindexing, e.g. just
> create a new inverted index, dictionary files etc.
>
>    How feasible is it to add this to lucene?
>
>
> Thanks
>
> -John
>

------=_Part_2265_7429884.1201771406917--

From java-user-return-32304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 09:25:17 2008
Return-Path: <java-user-return-32304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3961 invoked from network); 31 Jan 2008 09:25:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 09:25:16 -0000
Received: (qmail 91619 invoked by uid 500); 31 Jan 2008 09:25:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91248 invoked by uid 500); 31 Jan 2008 09:25:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91237 invoked by uid 99); 31 Jan 2008 09:25:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 01:25:01 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.243] (HELO ag-out-0708.google.com) (72.14.246.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:24:32 +0000
Received: by ag-out-0708.google.com with SMTP id 5so525107agb.11
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 01:24:37 -0800 (PST)
Received: by 10.70.43.10 with SMTP id q10mr1168527wxq.74.1201771477093;
        Thu, 31 Jan 2008 01:24:37 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h9sm1293958wxd.35.2008.01.31.01.24.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 31 Jan 2008 01:24:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <15198783.post@talk.nabble.com>
References: <15175141.post@talk.nabble.com> <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com> <15197794.post@talk.nabble.com> <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com> <15198783.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <96AD48A6-1B37-475D-8D0B-50610240AEBF@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Query in Lucene 2.3.0
Date: Thu, 31 Jan 2008 04:25:09 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


That's right.

Each thread can enter IndexWriter.add/update/deleteDocument(s) in  
parallel.  There are some parts inside IndexWriter that are  
synchronized but they are kept to a minimum to keep good thread  
concurrency.  As you add threads it's best to increase the RAM buffer  
at the same time to get better performance.

Mike

ajay_garg wrote:

>
> @Yonik
>
> So you mean to say, that if two threads have the same instance of an
> IndexWriter passed to both of them, and both these threads run on two
> different CPUs, then they can write to the index at the same time ?
>
>
>
> Yonik Seeley wrote:
>>
>> On Jan 30, 2008 10:59 PM, ajay_garg
>> <garg.jeena.isi.ka.naam.hai@gmail.com> wrote:
>>>
>>> Thanks Mike for your directions.
>>>
>>> Yes, I am in fact using a single computer for my application, and  
>>> your
>>> saying that in this case, multiple threads with a single  
>>> IndexWriter wll
>>> give a better performance. Hmmm. I just wonder that since each
>>> IndexWriter
>>> has a single write.lock, this means that sitting on the CPU, we  
>>> observe
>>> that
>>> at a particular instant, only a single thread is using the CPU,
>>
>> The write.lock is to protect against other IndexWriter instances,
>> *not* against other threads.
>> Using multiple threads on a single IndexWriter should utilize  
>> multiple
>> CPUs.
>>
>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Query-in- 
> Lucene-2.3.0-tp15175141p15198783.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 09:25:36 2008
Return-Path: <java-user-return-32305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4070 invoked from network); 31 Jan 2008 09:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 09:25:36 -0000
Received: (qmail 92834 invoked by uid 500); 31 Jan 2008 09:25:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92808 invoked by uid 500); 31 Jan 2008 09:25:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92797 invoked by uid 99); 31 Jan 2008 09:25:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 01:25:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.204.235 as permitted sender)
Received: from [72.14.204.235] (HELO qb-out-0506.google.com) (72.14.204.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:24:52 +0000
Received: by qb-out-0506.google.com with SMTP id o21so600057qba.9
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 01:24:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=bRWEJ4FW8L8tyXXkRhPeL3sNZftJpY0zSncOCWEMSXc=;
        b=idKn9xhRH6/8ti1Nosike3kNAnr4DGYbnhBpdFOXnAF/17IOKt/2pDJ22J4UTH+79tm+Aet9kdq7/DpVFj+lIkIyx6DoZHLQ4fNigXzRBsXb3vVASLQjUWxrLF03sB4A0uTpRELOJSNbIaGZ0aLJoMnwPPuNNIInUDlzgN47EZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HsL55+JKu18Y9/eTAQ1wajEHtlT/nULRTI4tMJiovZ3D85jmLdPvIqLAh3NTjdyOV3+v5053s56JokAZ2Oq258gRuBqxDz3v6c/GGrueQd1C0mh4GEfuZDzfSbdNj3Vvnnbx3oHGN+OaUXtAbxpqYV899MsdPFWUfElErDGNDqY=
Received: by 10.143.159.11 with SMTP id l11mr943339wfo.15.1201771498090;
        Thu, 31 Jan 2008 01:24:58 -0800 (PST)
Received: by 10.142.178.19 with HTTP; Thu, 31 Jan 2008 01:24:58 -0800 (PST)
Message-ID: <3126751e0801310124o71b67f9asfc4a6a0093c8a046@mail.gmail.com>
Date: Thu, 31 Jan 2008 14:54:58 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5707_15661314.1201771498084"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
	 <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
	 <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
	 <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
	 <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5707_15661314.1201771498084
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On false..
i get this error...
wht do you suggest me to do further....
i am using lucene 1.4 final..
plsease help

Exception in thread "main" java.io.IOException: Lock obtain timed out:
Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
26fee40bb91b3504c3589207f2d7efa3-write.lock
        at org.apache.lucene.store.Lock.obtain(Lock.java:58)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:223)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)
        at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
        at com.cecilia.wim.process.Indexer.main(Indexer.java:63)
Java Result: 1


On Jan 31, 2008 2:49 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> It looks like you are passing "true" to FSDirectory.getDirectory,
> which you shouldn't do.  Always pass "false" to that.  (Newer
> versions of Lucene have deprecated the create flag to FSDirectory,
> leaving it entirely to IndexWriter).
>
> On the lock obtain timed out, probably that's a left over lock file,
> so you should just remove it if you're sure it is.
>
> Mike
>
> anjana m wrote:
>
> > with true:
> > i finding a serious problem when i need new index please help..
> > but how can ikeep chnaging the true flase option..
> > :(
> > please help me...:(
> > Exception in thread "main" java.io.IOException: Cannot delete _17.cfs
> >         at org.apache.lucene.store.FSDirectory.create
> > (FSDirectory.java:144)
> >         at org.apache.lucene.store.FSDirectory.<init>
> > (FSDirectory.java:128)
> >         at org.apache.lucene.store.FSDirectory.getDirectory
> > (FSDirectory.java
> > :102)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:193)
> >
> >
> > False
> > Exception in thread "main" java.io.IOException: Lock obtain timed out:
> > Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
> > 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
> >         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:223)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:193)
> >         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
> >         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
> >
> >
> > On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>
> > wrote:
> >
> >> Set the parameter to false as per the documentation....
> >>
> >> Erick
> >>
> >> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
> >>
> >>> yes i dont want the old index to be deletd since its running on
> >>> my app
> >>> server..
> >>> any suggestion..?
> >>>
> >>> On Jan 27, 2008 3:07 PM, Daniel Naber
> >>> <lucenelist2007@danielnaber.de>
> >>> wrote:
> >>>
> >>>> On Sonntag, 27. Januar 2008, anjana m wrote:
> >>>>
> >>>>>         IndexWriter writer = new IndexWriter(indexDir, new
> >>>>> StandardAnalyzer(), true);
> >>>>
> >>>> The true parameter means that the old index will be deleted, is
> >>>> that
> >>> your
> >>>> problem?
> >>>>
> >>>> Regards
> >>>>  Daniel
> >>>>
> >>>> --
> >>>> http://www.danielnaber.de
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5707_15661314.1201771498084--

From java-user-return-32306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 09:27:25 2008
Return-Path: <java-user-return-32306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4775 invoked from network); 31 Jan 2008 09:27:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 09:27:24 -0000
Received: (qmail 96399 invoked by uid 500); 31 Jan 2008 09:27:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95799 invoked by uid 500); 31 Jan 2008 09:27:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95779 invoked by uid 99); 31 Jan 2008 09:27:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 01:27:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.204.237 as permitted sender)
Received: from [72.14.204.237] (HELO qb-out-0506.google.com) (72.14.204.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:26:41 +0000
Received: by qb-out-0506.google.com with SMTP id o21so600527qba.9
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 01:26:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=WGqQVtVaS5uL1Zvl+YE7yzCcJ3q3SeUZvs6OX9hPCxo=;
        b=hOfQyzOscp2Hz2pTnhN/Rq3JcY53nEKypcyzWwlLo9z43M1TdfiIq+Xm+a0LRb827XkcfqqDheghWJziLEPYgVjE6GUa/iNho0luHSdYUtAZRYBna/v22ZBba8pouvAZoubUmlXKZdv0luYbg6IykEgOyFqRv2Mo+u4v3hPBf00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Uv6a38dpW8NHObU/H/Kz/kSH4VcLsNKdYjThSuymqEmn0yjSbP2WAJDWTz00HHh6TONe46Lrpg4BiKsr8lhoI/4LVD8ZIano+31TIgQrJ0OhCw3Rb1zGE83CbCkZCW9iTlnWEhzt4/+bL/wl/gSKXxaTzeCXqPu3GqDqV4eLKEk=
Received: by 10.142.73.8 with SMTP id v8mr933801wfa.68.1201771606185;
        Thu, 31 Jan 2008 01:26:46 -0800 (PST)
Received: by 10.142.178.19 with HTTP; Thu, 31 Jan 2008 01:26:46 -0800 (PST)
Message-ID: <3126751e0801310126h4deb5363i3e3ad7566be55ca3@mail.gmail.com>
Date: Thu, 31 Jan 2008 14:56:46 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5724_29057953.1201771606174"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
	 <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
	 <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
	 <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
	 <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5724_29057953.1201771606174
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How do i remove the locks..?



On Jan 31, 2008 2:49 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> It looks like you are passing "true" to FSDirectory.getDirectory,
> which you shouldn't do.  Always pass "false" to that.  (Newer
> versions of Lucene have deprecated the create flag to FSDirectory,
> leaving it entirely to IndexWriter).
>
> On the lock obtain timed out, probably that's a left over lock file,
> so you should just remove it if you're sure it is.
>
> Mike
>
> anjana m wrote:
>
> > with true:
> > i finding a serious problem when i need new index please help..
> > but how can ikeep chnaging the true flase option..
> > :(
> > please help me...:(
> > Exception in thread "main" java.io.IOException: Cannot delete _17.cfs
> >         at org.apache.lucene.store.FSDirectory.create
> > (FSDirectory.java:144)
> >         at org.apache.lucene.store.FSDirectory.<init>
> > (FSDirectory.java:128)
> >         at org.apache.lucene.store.FSDirectory.getDirectory
> > (FSDirectory.java
> > :102)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:193)
> >
> >
> > False
> > Exception in thread "main" java.io.IOException: Lock obtain timed out:
> > Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
> > 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
> >         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:223)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:193)
> >         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
> >         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
> >
> >
> > On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>
> > wrote:
> >
> >> Set the parameter to false as per the documentation....
> >>
> >> Erick
> >>
> >> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
> >>
> >>> yes i dont want the old index to be deletd since its running on
> >>> my app
> >>> server..
> >>> any suggestion..?
> >>>
> >>> On Jan 27, 2008 3:07 PM, Daniel Naber
> >>> <lucenelist2007@danielnaber.de>
> >>> wrote:
> >>>
> >>>> On Sonntag, 27. Januar 2008, anjana m wrote:
> >>>>
> >>>>>         IndexWriter writer = new IndexWriter(indexDir, new
> >>>>> StandardAnalyzer(), true);
> >>>>
> >>>> The true parameter means that the old index will be deleted, is
> >>>> that
> >>> your
> >>>> problem?
> >>>>
> >>>> Regards
> >>>>  Daniel
> >>>>
> >>>> --
> >>>> http://www.danielnaber.de
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5724_29057953.1201771606174--

From java-user-return-32307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 09:30:57 2008
Return-Path: <java-user-return-32307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7021 invoked from network); 31 Jan 2008 09:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 09:30:57 -0000
Received: (qmail 4428 invoked by uid 500); 31 Jan 2008 09:30:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3539 invoked by uid 500); 31 Jan 2008 09:30:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3528 invoked by uid 99); 31 Jan 2008 09:30:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 01:30:42 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.251] (HELO hs-out-2122.google.com) (64.233.178.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:30:12 +0000
Received: by hs-out-2122.google.com with SMTP id 54so540894hsz.5
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 01:30:14 -0800 (PST)
Received: by 10.142.105.14 with SMTP id d14mr935851wfc.67.1201771813414;
        Thu, 31 Jan 2008 01:30:13 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id i38sm1950794wxd.16.2008.01.31.01.30.12
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 31 Jan 2008 01:30:12 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com> <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: appending field to an existing index
Date: Thu, 31 Jan 2008 04:30:45 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Just beware, though, that with ParallelReader you must ensure that  
the internal docIDs of both indices remain "aligned" over time.

If you never do deletions, then that happens for free.

If you do deletions, then, you must change IndexWriter to buffer by  
doc count (same doc count for all writhers), and, you must change the  
merge policy to LogDocMergePolicy.  You also might need to switch to  
SerialMergeScheduler if you ever allow readers to refresh against the  
indices while a writer is still open.  If you don't do that (ie  
reader can only re-open after a writer is closed) then it's safe to  
stick with ConcurrentMergeScheduler.

Mike

On Jan 31, 2008, at 4:23 AM, Doron Cohen wrote:

> This may help:
> http://www.nabble.com/Updating-Lucene-Index-with-Unstored-fields- 
> tt15188818.html#a15188818
>
> Doron
>
> On Thu, Jan 31, 2008 at 2:42 AM, John Wang <john.wang@gmail.com>  
> wrote:
>
>> Hi all:
>>
>>    We have a large index and it is difficult to reindex.
>>
>>    We want to add another field to the index without reindexing,  
>> e.g. just
>> create a new inverted index, dictionary files etc.
>>
>>    How feasible is it to add this to lucene?
>>
>>
>> Thanks
>>
>> -John
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 09:32:14 2008
Return-Path: <java-user-return-32308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7892 invoked from network); 31 Jan 2008 09:32:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 09:32:13 -0000
Received: (qmail 6307 invoked by uid 500); 31 Jan 2008 09:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6274 invoked by uid 500); 31 Jan 2008 09:31:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6263 invoked by uid 99); 31 Jan 2008 09:31:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 01:31:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:31:43 +0000
Received: by ag-out-0708.google.com with SMTP id 5so526057agb.11
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 01:31:31 -0800 (PST)
Received: by 10.150.199.21 with SMTP id w21mr589218ybf.60.1201771891305;
        Thu, 31 Jan 2008 01:31:31 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 45sm2372628wri.25.2008.01.31.01.31.30
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 31 Jan 2008 01:31:30 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <3126751e0801310126h4deb5363i3e3ad7566be55ca3@mail.gmail.com>
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com> <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com> <200801271037.43451@danielnaber.de> <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com> <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com> <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com> <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com> <3126751e0801310126h4deb5363i3e3ad7566be55ca3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E1ADC528-042B-4CA9-A967-5A7CDBC2D063@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Retain the index
Date: Thu, 31 Jan 2008 04:32:03 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Physically delete the file, or, use IndexReader.unlock static method.

Mike

On Jan 31, 2008, at 4:26 AM, anjana m wrote:

> How do i remove the locks..?
>
>
>
> On Jan 31, 2008 2:49 PM, Michael McCandless  
> <lucene@mikemccandless.com>
> wrote:
>
>>
>> It looks like you are passing "true" to FSDirectory.getDirectory,
>> which you shouldn't do.  Always pass "false" to that.  (Newer
>> versions of Lucene have deprecated the create flag to FSDirectory,
>> leaving it entirely to IndexWriter).
>>
>> On the lock obtain timed out, probably that's a left over lock file,
>> so you should just remove it if you're sure it is.
>>
>> Mike
>>
>> anjana m wrote:
>>
>>> with true:
>>> i finding a serious problem when i need new index please help..
>>> but how can ikeep chnaging the true flase option..
>>> :(
>>> please help me...:(
>>> Exception in thread "main" java.io.IOException: Cannot delete  
>>> _17.cfs
>>>         at org.apache.lucene.store.FSDirectory.create
>>> (FSDirectory.java:144)
>>>         at org.apache.lucene.store.FSDirectory.<init>
>>> (FSDirectory.java:128)
>>>         at org.apache.lucene.store.FSDirectory.getDirectory
>>> (FSDirectory.java
>>> :102)
>>>         at org.apache.lucene.index.IndexWriter.<init>
>>> (IndexWriter.java:193)
>>>
>>>
>>> False
>>> Exception in thread "main" java.io.IOException: Lock obtain timed  
>>> out:
>>> Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
>>> 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
>>>         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
>>>         at org.apache.lucene.index.IndexWriter.<init>
>>> (IndexWriter.java:223)
>>>         at org.apache.lucene.index.IndexWriter.<init>
>>> (IndexWriter.java:193)
>>>         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
>>>         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
>>>
>>>
>>> On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>
>>> wrote:
>>>
>>>> Set the parameter to false as per the documentation....
>>>>
>>>> Erick
>>>>
>>>> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
>>>>
>>>>> yes i dont want the old index to be deletd since its running on
>>>>> my app
>>>>> server..
>>>>> any suggestion..?
>>>>>
>>>>> On Jan 27, 2008 3:07 PM, Daniel Naber
>>>>> <lucenelist2007@danielnaber.de>
>>>>> wrote:
>>>>>
>>>>>> On Sonntag, 27. Januar 2008, anjana m wrote:
>>>>>>
>>>>>>>         IndexWriter writer = new IndexWriter(indexDir, new
>>>>>>> StandardAnalyzer(), true);
>>>>>>
>>>>>> The true parameter means that the old index will be deleted, is
>>>>>> that
>>>>> your
>>>>>> problem?
>>>>>>
>>>>>> Regards
>>>>>>  Daniel
>>>>>>
>>>>>> --
>>>>>> http://www.danielnaber.de
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> --
>>>>>> --
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 10:59:56 2008
Return-Path: <java-user-return-32309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41993 invoked from network); 31 Jan 2008 10:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 10:59:56 -0000
Received: (qmail 6519 invoked by uid 500); 31 Jan 2008 10:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6486 invoked by uid 500); 31 Jan 2008 10:59:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6475 invoked by uid 99); 31 Jan 2008 10:59:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 02:59:41 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.36 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 10:59:13 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0VAxI6Y031071
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 11:59:19 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <9685323D-F2EC-4AD9-B6FB-865BD8EA3277@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <839ba01c0801310042r7597c790w34a52f701e46b9b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Distributed Lucene Directory
Date: Thu, 31 Jan 2008 11:59:18 +0100
References: <839ba01c0801310042r7597c790w34a52f701e46b9b@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

31 jan 2008 kl. 09.42 skrev Cedric Ho:

> I am wondering if there exist any implemenation of
> org.apache.lucene.store.Directory which can be distributed across
> multiple machines with comparable performance to a local FSDirectory
> index, or is such an idea feasible in the first place.
>
> By comparable performance I mean a 100G index distributed in 10
> machines should achieve the same performance as a 10G index on a local
> FSDirectory.

I never used these things and don't know about their caveats, but  
perhaps a combination of

<http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/RemoteSearchable.html 
 >

and

<http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/ParallelMultiSearcher.html 
 >

can help you?


   karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 11:12:42 2008
Return-Path: <java-user-return-32310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47367 invoked from network); 31 Jan 2008 11:12:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 11:12:42 -0000
Received: (qmail 31673 invoked by uid 500); 31 Jan 2008 11:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31611 invoked by uid 500); 31 Jan 2008 11:12:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31600 invoked by uid 99); 31 Jan 2008 11:12:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 03:12:25 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.21 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 11:12:10 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id m0VBC3pC028447
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 12:12:03 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <5D1883EC-FF2A-45F6-B14A-A6E6FB3C189D@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <E9DD5BE59E84CA4E87AE0E5E6F1B8B123819BC@sbsrv.AALabs.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Spell checking street names
Date: Thu, 31 Jan 2008 12:12:02 +0100
References: <E9DD5BE59E84CA4E87AE0E5E6F1B8B123819BC@sbsrv.AALabs.local>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


30 jan 2008 kl. 17.34 skrev Max Metral:

> Part of the reason is if we look at some common mistakes:
>
>
> For Commonwealth:
>
> Communwealth
>
> Comonwealth
>
> Common wealth

If they are common misstakes you can pick them up using reinforcement  
learning.

<http://issues.apache.org/jira/browse/LUCENE-626> might help you.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 13:31:44 2008
Return-Path: <java-user-return-32311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87596 invoked from network); 31 Jan 2008 13:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 13:31:44 -0000
Received: (qmail 85384 invoked by uid 500); 31 Jan 2008 13:31:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85005 invoked by uid 500); 31 Jan 2008 13:31:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84994 invoked by uid 99); 31 Jan 2008 13:31:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 05:31:28 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=SPF_PASS,WHOIS_DMNBYPROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paleotek@gmail.com designates 64.233.178.249 as permitted sender)
Received: from [64.233.178.249] (HELO hs-out-2122.google.com) (64.233.178.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 13:30:58 +0000
Received: by hs-out-2122.google.com with SMTP id 54so606720hsz.5
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 05:31:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=C2dSTFcadOKqi3y6DQyZi2oR4e/zQFU6CArOTE0rs+w=;
        b=ECz/LYWwh8xenLBOZkYEz2mcMb1Dswim4tCTrjKQD2oIA8um6NO4XT+qXnjYkLhAIOsxWmEsNDCQTrVDUNNZaDGUAN3emWPCE7wzQCmeOSV0oKkJ2J+BbG1kiBh5VwLgPvt8c0weMPBUK2mxay++q4+C6F7O+ci11MAYJrhuFos=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VlBKOKewAuaNaC0n7YnzXKz0RCff9aNL+5VWW+idtBUqixiNkDYKipW7k5mJGWqbcGAxpgDzJK4MFlTmCIh5JtVUBthfBNeDY7pmyTTFe6M+atYP1Etgn09caG4tUVbstmLeEZp0BiX29fXkDs8BXOOFdVkNlg2abrz3bv9bY0c=
Received: by 10.142.212.19 with SMTP id k19mr1101769wfg.224.1201786263044;
        Thu, 31 Jan 2008 05:31:03 -0800 (PST)
Received: from ?10.0.0.141? ( [68.115.164.106])
        by mx.google.com with ESMTPS id l43sm2697252wrl.26.2008.01.31.05.31.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 31 Jan 2008 05:31:02 -0800 (PST)
Message-ID: <47A1CD23.6060806@gmail.com>
Date: Thu, 31 Jan 2008 08:29:07 -0500
From: Paleo Tek <paleotek@gmail.com>
User-Agent: Thunderbird 1.5.0.13 (X11/20070824)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Luke for Lucene 2.3?
References: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
In-Reply-To: <a206fb7e0801291525m121845e3s81759d8748da7ba9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

vivek sar wrote:
> Hi,
>
>  ...
>
> I also read something about web-based Luke, but can't find it in the
> contrib in 2.3, is it part of Lucene 2.3? How do I use it?
>
> Thanks,
> -vivek
>                             
I'm using Julien Nioche's tool, LIMO, which is probably what you mean by 
a web-based Luke.  To use it with 2.3, you need to replace the older 
Lucene jar files with the newer versions (directions below).  You can 
find LIMO at http://limo.sf.net/  It's a fine tool for seeing what's 
happing inside your index when X-Windows isn't an option.

              -Jim H.

PS:  The same technique can be used to drop Lucene 2.3 into solr.  I 
haven't identified any problems with either, but YMMV.


// Download and unpack the compiled source

cd /tmp

wget 
http://government-grants.org/mirrors/apache.org/lucene/java/lucene-2.3.0.tar.gz

gzip -d lucene-2.3.0.tar.gz

tar xvf lucene-2.3.0.tar


// Replace the existing limo.war file with one that includes the new 
lucene libraries


mkdir limo

cp <my limo.war path>/limo.war limo

cd limo

jar xvf limo.war

rm -f WEB-INF/lib/lucene*

cp ../lucene-2.3.0/lucene-core-2.3.0.jar WEB-INF/lib

cp ../lucene-2.3.0/contrib/analyzers/lucene-analyzers-2.3.0.jar WEB-INF/lib

cp ../lucene-2.3.0/contrib/highlighter/lucene-highlighter-2.3.0.jar 
WEB-INF/lib

cp ../lucene-2.3.0/contrib/spellchecker/lucene-spellchecker-2.3.0.jar 
WEB-INF/lib

cp ../lucene-2.3.0/contrib/snowball/lucene-snowball-2.3.0.jar WEB-INF/lib

rm limo.war

jar cvf limo.war *

cp limo.war <my limo.war path>


Enjoy the crunchy goodness of Lucene 2.3!





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 14:46:50 2008
Return-Path: <java-user-return-32312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14604 invoked from network); 31 Jan 2008 14:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 14:46:49 -0000
Received: (qmail 88128 invoked by uid 500); 31 Jan 2008 14:46:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88094 invoked by uid 500); 31 Jan 2008 14:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88083 invoked by uid 99); 31 Jan 2008 14:46:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 06:46:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 14:46:04 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id A016AB8936
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 06:46:08 -0800 (PST)
Message-Id: <B6FA39BB-1707-45F0-8E78-FE3AB1E98C23@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <e05f0fd10801302202g7abb21c7re10fabc613cf9a1f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: contrib/benchmark Quality
Date: Thu, 31 Jan 2008 09:46:08 -0500
References: <95E8CDC6-08DD-4D77-8779-A2D487C23DD0@apache.org> <e05f0fd10801302202g7abb21c7re10fabc613cf9a1f@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I was thinking of smaller collections/query logs.  The Million  
Queries Track is certainly interesting.

It would also be good to be able to spit out reports as files.  Sigh.   
Need about 5 more hours in the day and the energy to access them.

-Grant

On Jan 31, 2008, at 1:02 AM, Doron Cohen wrote:

> Hi Grant, I initially thought of doing so, but after working on the  
> Million
> Queries Track where running the 10,000 queries could take more than  
> a day
> (depending on the settings) and where indexing was done once and  
> took few
> days I felt that a more tight control is needed than that provided  
> by the
> benchmark layer. Maybe I should rephrase this as - I thought that  
> the time
> it would take to stabilize this functionality is not worth to invest  
> because
> the run itself can take so long and I wouldn't like to have to  
> repeat all
> this just because of a mistake in the benchmark settings. But then  
> the same
> may be a reason to have a framework that protects you from  
> errors... :-)
> I'll take a second look at this!
>
> For setting the similarities and what have you the SetProp task can  
> be used
> to set the class names and then your similarity of choice can be  
> loaded
> byName - will restrict to a no args constructor, but this is not too  
> bad...?
> We need a new QualityRunTask for sure, but this is  quite  
> straightforward.
>
> Cheers,
> Doron
>
>
> On Thu, Jan 31, 2008 at 12:31 AM, Grant Ingersoll  
> <gsingers@apache.org>
> wrote:
>
>> Has anyone thought about integrating the contrib/benchmark Quality
>> stuff into the "algorithm" framework that's used for timings, etc.?
>> For instance, I would like to write an algorithm file where my rounds
>> consist of doing various runs with different similarities all on the
>> same index.
>>
>> It would probably need a new Task for setting the similarity (and the
>> ability to modify the index using the setNorms functionality).   
>> Anyone
>> else (Doron :-)  ) have any thoughts on going about this?
>>
>> -Grant
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 15:44:45 2008
Return-Path: <java-user-return-32313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1928 invoked from network); 31 Jan 2008 15:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 15:44:45 -0000
Received: (qmail 1409 invoked by uid 500); 31 Jan 2008 15:44:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1379 invoked by uid 500); 31 Jan 2008 15:44:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1366 invoked by uid 99); 31 Jan 2008 15:44:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 07:44:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cambazz@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 15:44:10 +0000
Received: by fg-out-1718.google.com with SMTP id d23so748667fga.27
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 07:43:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Dq1kL0LG8a32oewCjTpmoJhKM5DamvTqzeNUbEs+EbA=;
        b=duncbqNeAG9txOXuxNGUcblXpATyq/Af1ibOhY7clzPefoudvBjPELN7HZVcUG6IrrdD6hWd27LX6LM7qFg9hJ1xp+wbPX4vweLru5EJUmWANZXWgMDVpNjBG8s0Qd8cfcnW/Wrplz6nErG0D7n5tZANGjzcBwfMSTfBoWaQ98k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WLCG7vmYR5OcTpv/E47p0jhjZI6IvY8YJ0h7MjExxKfccNGFfDYpkgt1aNH070KZ/DfVV1MQ9ILBp3d1iRZKiXPe1Z+/AjYtLCLid0xBTogXoRQ4LyJaSM6qbxXg2Z6DPTkZ9uTt5K7afdxHD28csx/Amkhi3l157iSLAtmq+/k=
Received: by 10.82.187.2 with SMTP id k2mr4022192buf.16.1201794233329;
        Thu, 31 Jan 2008 07:43:53 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Thu, 31 Jan 2008 07:43:53 -0800 (PST)
Message-ID: <1bcb7c7f0801310743u6a151186jf5e3199f62a27a75@mail.gmail.com>
Date: Thu, 31 Jan 2008 17:43:53 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: document Id question, again
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23086_28902574.1201794233260"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23086_28902574.1201794233260
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello;

If no document is ever deleted nor updated from an index, will the document
id change? under which circumstances will the document ids change, apart
from delete?

Best Regards,
-C.B.

------=_Part_23086_28902574.1201794233260--

From java-user-return-32314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 16:30:57 2008
Return-Path: <java-user-return-32314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16818 invoked from network); 31 Jan 2008 16:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 16:30:57 -0000
Received: (qmail 88294 invoked by uid 500); 31 Jan 2008 16:30:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88268 invoked by uid 500); 31 Jan 2008 16:30:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88257 invoked by uid 99); 31 Jan 2008 16:30:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 08:30:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 16:30:28 +0000
Content-class: urn:content-classes:message
Subject: RE: Spell checking street names
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 31 Jan 2008 11:30:19 -0500
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B123819D6@sbsrv.AALabs.local>
X-MimeOLE: Produced By Microsoft Exchange V6.5
In-Reply-To: <5D1883EC-FF2A-45F6-B14A-A6E6FB3C189D@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Spell checking street names
Thread-Index: Achj+jHvNyT8vdK/RVOcy5pc2X4O+QAK6Phg
References: <E9DD5BE59E84CA4E87AE0E5E6F1B8B123819BC@sbsrv.AALabs.local> <5D1883EC-FF2A-45F6-B14A-A6E6FB3C189D@gmail.com>
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks all.  I've got it working now using a KeywordAnalyzer.  The edit
distance metric I'm using is purely "edit" based, i.e. when I input
"Bennett", I get "Jennett", "Gannett", "Kenneth" and THEN "Bennet".
While I see the logic, it's obviously not the best metric.  Is there an
appropriate edit distance metric that takes phonetics into account?

-----Original Message-----
From: Karl Wettin [mailto:karl.wettin@gmail.com]=20
Sent: Thursday, January 31, 2008 6:12 AM
To: java-user@lucene.apache.org
Subject: Re: Spell checking street names


30 jan 2008 kl. 17.34 skrev Max Metral:

> Part of the reason is if we look at some common mistakes:
>
>
> For Commonwealth:
>
> Communwealth
>
> Comonwealth
>
> Common wealth

If they are common misstakes you can pick them up using reinforcement =20
learning.

<http://issues.apache.org/jira/browse/LUCENE-626> might help you.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 17:29:02 2008
Return-Path: <java-user-return-32315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43777 invoked from network); 31 Jan 2008 17:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 17:29:02 -0000
Received: (qmail 89202 invoked by uid 500); 31 Jan 2008 17:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88665 invoked by uid 500); 31 Jan 2008 17:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88654 invoked by uid 99); 31 Jan 2008 17:28:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:28:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.238 as permitted sender)
Received: from [72.14.214.238] (HELO hu-out-0506.google.com) (72.14.214.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 17:28:18 +0000
Received: by hu-out-0506.google.com with SMTP id 27so483446hub.15
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 09:28:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=7Oasir3f/pxgE3+ME/doRGzLQ0CyQ3uWsadm9slMTTg=;
        b=r1FIp8CK1G6gdBfg1WKDBkBAEdaG/OJLp6pGXhAYAtmYzINTrqES6pfFaAZ+6JrsH2ouxbsQDz1SvyiR1pLVVmh3FZue1E/AilM+KWAmvYRRi7wyQmpTvabmgoqX+f/zoxPlZf5Fdx3epQViLAUrf4DPm1hh0aj+xuO/d99sXjY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nWNuNspDqPBhS5AGkjWYRlRepjvReJCfmle8ERodF1SgJvQXEpwPpLguf+AmFgxunS6R30yV1+WpouKk877XIScBXV34sIhDYhjSH2F4vJoyl779ar6jRCI/U2YxLoEnqizB/zy+jGcZv3+uzAYuXYQuJg4uq6e/q3gl0arWwCM=
Received: by 10.86.74.15 with SMTP id w15mr2121700fga.46.1201800501421;
        Thu, 31 Jan 2008 09:28:21 -0800 (PST)
Received: by 10.86.31.3 with HTTP; Thu, 31 Jan 2008 09:28:21 -0800 (PST)
Message-ID: <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
Date: Thu, 31 Jan 2008 09:28:21 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
In-Reply-To: <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19269_6822425.1201800501396"
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
	 <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
	 <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19269_6822425.1201800501396
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have to keep one index though. Is there a way to reproduce an index from
an indexReader?

-John

On Jan 31, 2008 1:30 AM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Just beware, though, that with ParallelReader you must ensure that
> the internal docIDs of both indices remain "aligned" over time.
>
> If you never do deletions, then that happens for free.
>
> If you do deletions, then, you must change IndexWriter to buffer by
> doc count (same doc count for all writhers), and, you must change the
> merge policy to LogDocMergePolicy.  You also might need to switch to
> SerialMergeScheduler if you ever allow readers to refresh against the
> indices while a writer is still open.  If you don't do that (ie
> reader can only re-open after a writer is closed) then it's safe to
> stick with ConcurrentMergeScheduler.
>
> Mike
>
> On Jan 31, 2008, at 4:23 AM, Doron Cohen wrote:
>
> > This may help:
> > http://www.nabble.com/Updating-Lucene-Index-with-Unstored-fields-
> > tt15188818.html#a15188818
> >
> > Doron
> >
> > On Thu, Jan 31, 2008 at 2:42 AM, John Wang <john.wang@gmail.com>
> > wrote:
> >
> >> Hi all:
> >>
> >>    We have a large index and it is difficult to reindex.
> >>
> >>    We want to add another field to the index without reindexing,
> >> e.g. just
> >> create a new inverted index, dictionary files etc.
> >>
> >>    How feasible is it to add this to lucene?
> >>
> >>
> >> Thanks
> >>
> >> -John
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19269_6822425.1201800501396--

From java-user-return-32316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 17:32:07 2008
Return-Path: <java-user-return-32316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45030 invoked from network); 31 Jan 2008 17:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 17:32:07 -0000
Received: (qmail 99632 invoked by uid 500); 31 Jan 2008 17:31:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99436 invoked by uid 500); 31 Jan 2008 17:31:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99425 invoked by uid 99); 31 Jan 2008 17:31:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:31:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 17:31:37 +0000
Received: by an-out-0708.google.com with SMTP id c5so186339anc.49
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 09:31:27 -0800 (PST)
Received: by 10.100.210.9 with SMTP id i9mr4865676ang.96.1201800687643;
        Thu, 31 Jan 2008 09:31:27 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 23sm8615216hsd.16.2008.01.31.09.31.27
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 31 Jan 2008 09:31:27 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1bcb7c7f0801310743u6a151186jf5e3199f62a27a75@mail.gmail.com>
References: <1bcb7c7f0801310743u6a151186jf5e3199f62a27a75@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E9B37EFA-5F1B-40FE-9EAF-DA60D48B4A29@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: document Id question, again
Date: Thu, 31 Jan 2008 12:31:58 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


DocIDs change whenever segments that had deletes pending, get merged.

So if you have no deletions, docIDs won't ever change.

Mike

Cam Bazz wrote:

> Hello;
>
> If no document is ever deleted nor updated from an index, will the  
> document
> id change? under which circumstances will the document ids change,  
> apart
> from delete?
>
> Best Regards,
> -C.B.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 17:36:56 2008
Return-Path: <java-user-return-32317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46044 invoked from network); 31 Jan 2008 17:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 17:36:56 -0000
Received: (qmail 7959 invoked by uid 500); 31 Jan 2008 17:36:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7916 invoked by uid 500); 31 Jan 2008 17:36:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7905 invoked by uid 99); 31 Jan 2008 17:36:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:36:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 17:36:13 +0000
Received: by fk-out-0910.google.com with SMTP id z23so676330fkz.5
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 09:36:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XIc7zFsAO24qACvbhZGgsEUcHKAj5bRJVSuAKIKmOyQ=;
        b=IZk77S8MYJifeuCRaxTY3m8cXBN0a2EktZm4FlZ2XcJJoyInB4PqVG4cRSNen0w7h2XeYPl8Li8XAJkW1XDPwCbV3E3/31HGuN/N3meGjvLR/mODEoYi87AMelT4bYI8hJsDJzyH0j1mJHs4cbHwCRd4Fc5JPhgyLMyw1hTKbvY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b8p3+C5iZaULYkG7fD7d5y+aIQQDY090wHE0UDIMcfrAl2DqcJZj6m5PokkyasK5p5vWVpfOiBKbF20T470O7LLABJRxwm8GGbmM4KSRHs0CMEROAuVKKSPYefEkId/Njs+H5A39/hpZhe7+CFyiWj7ozH86FDXWLLf+PJpOPEo=
Received: by 10.82.161.19 with SMTP id j19mr4268035bue.20.1201800979119;
        Thu, 31 Jan 2008 09:36:19 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 31 Jan 2008 09:36:19 -0800 (PST)
Message-ID: <359a92830801310936l4355ab96k23c6c475387a19aa@mail.gmail.com>
Date: Thu, 31 Jan 2008 12:36:19 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
In-Reply-To: <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21409_23597634.1201800979112"
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
	 <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
	 <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
	 <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21409_23597634.1201800979112
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As always, "it depends". You can try to reconstruct the doc from an index,
see Luke. But depending upon you you indexed things, it may be more
or less lossy. I remember this was discussed recently, you might have
some luck if you search the archive.

But it may be very, very expensive to reconstruct all the docs from an
index, see how long Luke takes to do this on your index.....

If you stored all the fields in addition to indexing them, then there's
no problem since the stored fields *are* what you indexed.

How did you create your original index?

Erick

On Jan 31, 2008 12:28 PM, John Wang <john.wang@gmail.com> wrote:

> I have to keep one index though. Is there a way to reproduce an index from
> an indexReader?
>
> -John
>
> On Jan 31, 2008 1:30 AM, Michael McCandless <lucene@mikemccandless.com>
> wrote:
>
> >
> > Just beware, though, that with ParallelReader you must ensure that
> > the internal docIDs of both indices remain "aligned" over time.
> >
> > If you never do deletions, then that happens for free.
> >
> > If you do deletions, then, you must change IndexWriter to buffer by
> > doc count (same doc count for all writhers), and, you must change the
> > merge policy to LogDocMergePolicy.  You also might need to switch to
> > SerialMergeScheduler if you ever allow readers to refresh against the
> > indices while a writer is still open.  If you don't do that (ie
> > reader can only re-open after a writer is closed) then it's safe to
> > stick with ConcurrentMergeScheduler.
> >
> > Mike
> >
> > On Jan 31, 2008, at 4:23 AM, Doron Cohen wrote:
> >
> > > This may help:
> > > http://www.nabble.com/Updating-Lucene-Index-with-Unstored-fields-
> > > tt15188818.html#a15188818
> > >
> > > Doron
> > >
> > > On Thu, Jan 31, 2008 at 2:42 AM, John Wang <john.wang@gmail.com>
> > > wrote:
> > >
> > >> Hi all:
> > >>
> > >>    We have a large index and it is difficult to reindex.
> > >>
> > >>    We want to add another field to the index without reindexing,
> > >> e.g. just
> > >> create a new inverted index, dictionary files etc.
> > >>
> > >>    How feasible is it to add this to lucene?
> > >>
> > >>
> > >> Thanks
> > >>
> > >> -John
> > >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_21409_23597634.1201800979112--

From java-user-return-32318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 17:50:12 2008
Return-Path: <java-user-return-32318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48372 invoked from network); 31 Jan 2008 17:50:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 17:50:12 -0000
Received: (qmail 26839 invoked by uid 500); 31 Jan 2008 17:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26801 invoked by uid 500); 31 Jan 2008 17:49:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26790 invoked by uid 99); 31 Jan 2008 17:49:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 09:49:56 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 17:49:29 +0000
Received: by ug-out-1314.google.com with SMTP id u40so563537ugc.29
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 09:49:35 -0800 (PST)
Received: by 10.78.201.10 with SMTP id y10mr3904474huf.11.1201801774428;
        Thu, 31 Jan 2008 09:49:34 -0800 (PST)
Received: by 10.78.133.8 with HTTP; Thu, 31 Jan 2008 09:49:34 -0800 (PST)
Message-ID: <af9ce6c90801310949n103dacdel22d6459a549fb761@mail.gmail.com>
Date: Thu, 31 Jan 2008 09:49:34 -0800
From: "Mike Grafton" <mike@pivotallabs.com>
Sender: mike@pivotalsf.com
To: java-user@lucene.apache.org
Subject: Re: document boost
In-Reply-To: <c68e39170801301248y5ef6486eof94f5f8230c9e4bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24495_20793666.1201801774208"
References: <af9ce6c90801301047q244087b7pd816ed748a54ea5b@mail.gmail.com>
	 <47A0D36A.9090704@gmail.com>
	 <af9ce6c90801301205g3ba98467p7bfe7eea4cd87120@mail.gmail.com>
	 <c68e39170801301248y5ef6486eof94f5f8230c9e4bd@mail.gmail.com>
X-Google-Sender-Auth: aaf0c57d3a0aca82
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24495_20793666.1201801774208
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So we upgraded to SOLR 1.2, which uses Lucene 2.1 or so, and the problem
went away.  Thanks all the help, folks!

Mike

On 1/30/08, Yonik Seeley <yonik@apache.org> wrote:
>
> Hi Mike, I think this issue probably belongs in the Solr lists since
> it looks like you're indexing through it.
> I did a really quick test re-adding a Solr example document but adding
> a document boost of 10...
> the fieldNorm increased by a factor of 10 as expected (explain below).
>
> <str name="id=SOLR1000-1,internal_docid=26">
> 5.651948 = (MATCH) fieldWeight(text:solr in 26), product of:
>   1.4142135 = tf(termFreq(text:solr)=2)
>   3.1972246 = idf(docFreq=2, numDocs=27)
>   1.25 = fieldNorm(field=text, doc=26)
> </str>
>   <str name="id=SOLR1000,internal_docid=12">
> 0.5651948 = (MATCH) fieldWeight(text:solr in 12), product of:
>   1.4142135 = tf(termFreq(text:solr)=2)
>   3.1972246 = idf(docFreq=2, numDocs=27)
>   0.125 = fieldNorm(field=text, doc=12)
> </str>
>
> Could you try with the latest version of Solr, and if there is still
> an issue, post a bug to Solr's JIRA?
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24495_20793666.1201801774208--

From java-user-return-32319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 18:18:07 2008
Return-Path: <java-user-return-32319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56786 invoked from network); 31 Jan 2008 18:18:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 18:18:06 -0000
Received: (qmail 66913 invoked by uid 500); 31 Jan 2008 18:17:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66890 invoked by uid 500); 31 Jan 2008 18:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66879 invoked by uid 99); 31 Jan 2008 18:17:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 10:17:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.227 as permitted sender)
Received: from [72.14.214.227] (HELO hu-out-0506.google.com) (72.14.214.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 18:17:22 +0000
Received: by hu-out-0506.google.com with SMTP id 27so509228hub.15
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 10:17:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=EimGU1Fh03HkLnH/8+z+Vfdnwo5SeI1qq9QaJaR+ytc=;
        b=Ht21Rl3YjEOG8005igGqzLgxltoevOkhFw0OTXGXLb+W+DXFNsyEElD9GJnLgyz7LmniZuBkmJHGdIDZRIXCLmv2AtFnEc5CtX07e6tczxLA3GM08DOuWgzpn9LlHt+43+i96XCLQyO3m/Tx/PyvbINCCvyVlkiwnCcSJcrgChY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=weB4uc8RM7Xo+UGWMb3Zmc5Zy3F5BhnuZCy28zKakW36MO6oudySIp6SXAzsFy6QlM+eMGasYWNMIEFvh5zKuvQZuZUdYm1GiNaQAzQtx3SNRHHftFyX8NYfLa9ZuyOt5VvQCZVpnCDlVA60HTAHoCxTPY9Gm/2INXCP/myCOSs=
Received: by 10.86.72.15 with SMTP id u15mr2198587fga.11.1201803441037;
        Thu, 31 Jan 2008 10:17:21 -0800 (PST)
Received: by 10.86.31.3 with HTTP; Thu, 31 Jan 2008 10:17:20 -0800 (PST)
Message-ID: <8837fb770801311017i371db17p96b5ca8fc6693ce6@mail.gmail.com>
Date: Thu, 31 Jan 2008 10:17:20 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
In-Reply-To: <359a92830801310936l4355ab96k23c6c475387a19aa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19449_16986591.1201803441011"
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
	 <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
	 <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
	 <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
	 <359a92830801310936l4355ab96k23c6c475387a19aa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19449_16986591.1201803441011
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I was actually thinking of creating a separate index with only the extra
field and them modify the other index (change some files etc.)

Sounds hacky. Dunno if its possible.

Thanks

-john

On Jan 31, 2008 9:36 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> As always, "it depends". You can try to reconstruct the doc from an index,
> see Luke. But depending upon you you indexed things, it may be more
> or less lossy. I remember this was discussed recently, you might have
> some luck if you search the archive.
>
> But it may be very, very expensive to reconstruct all the docs from an
> index, see how long Luke takes to do this on your index.....
>
> If you stored all the fields in addition to indexing them, then there's
> no problem since the stored fields *are* what you indexed.
>
> How did you create your original index?
>
> Erick
>
> On Jan 31, 2008 12:28 PM, John Wang <john.wang@gmail.com> wrote:
>
> > I have to keep one index though. Is there a way to reproduce an index
> from
> > an indexReader?
> >
> > -John
> >
> > On Jan 31, 2008 1:30 AM, Michael McCandless <lucene@mikemccandless.com>
> > wrote:
> >
> > >
> > > Just beware, though, that with ParallelReader you must ensure that
> > > the internal docIDs of both indices remain "aligned" over time.
> > >
> > > If you never do deletions, then that happens for free.
> > >
> > > If you do deletions, then, you must change IndexWriter to buffer by
> > > doc count (same doc count for all writhers), and, you must change the
> > > merge policy to LogDocMergePolicy.  You also might need to switch to
> > > SerialMergeScheduler if you ever allow readers to refresh against the
> > > indices while a writer is still open.  If you don't do that (ie
> > > reader can only re-open after a writer is closed) then it's safe to
> > > stick with ConcurrentMergeScheduler.
> > >
> > > Mike
> > >
> > > On Jan 31, 2008, at 4:23 AM, Doron Cohen wrote:
> > >
> > > > This may help:
> > > > http://www.nabble.com/Updating-Lucene-Index-with-Unstored-fields-
> > > > tt15188818.html#a15188818
> > > >
> > > > Doron
> > > >
> > > > On Thu, Jan 31, 2008 at 2:42 AM, John Wang <john.wang@gmail.com>
> > > > wrote:
> > > >
> > > >> Hi all:
> > > >>
> > > >>    We have a large index and it is difficult to reindex.
> > > >>
> > > >>    We want to add another field to the index without reindexing,
> > > >> e.g. just
> > > >> create a new inverted index, dictionary files etc.
> > > >>
> > > >>    How feasible is it to add this to lucene?
> > > >>
> > > >>
> > > >> Thanks
> > > >>
> > > >> -John
> > > >>
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_19449_16986591.1201803441011--

From java-user-return-32320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 18:50:47 2008
Return-Path: <java-user-return-32320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76295 invoked from network); 31 Jan 2008 18:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 18:50:47 -0000
Received: (qmail 29543 invoked by uid 500); 31 Jan 2008 18:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29505 invoked by uid 500); 31 Jan 2008 18:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29494 invoked by uid 99); 31 Jan 2008 18:50:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 10:50:32 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.2.169] (HELO exprod7og108.obsmtp.com) (64.18.2.169)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 Jan 2008 18:50:02 +0000
Received: from source ([64.233.170.189]) by exprod7ob108.postini.com ([64.18.6.12]) with SMTP;
	Thu, 31 Jan 2008 10:49:37 PST
Received: by rn-out-0910.google.com with SMTP id e5so408756rng.3
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 10:50:08 -0800 (PST)
Received: by 10.150.178.6 with SMTP id a6mr851270ybf.91.1201805408207;
        Thu, 31 Jan 2008 10:50:08 -0800 (PST)
Received: by 10.150.230.19 with HTTP; Thu, 31 Jan 2008 10:50:08 -0800 (PST)
Message-ID: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com>
Date: Thu, 31 Jan 2008 10:50:08 -0800
From: "Kyle Maxwell" <kyle@casttv.com>
To: java-user@lucene.apache.org
Subject: Performance guarantees and index format
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I'd like to be able to guarantee that a search will finish in
(approximately?) N seconds.  This seems like a generally applicable
goal for the project.  It would be nice to not have to worry about
malicious or naive users DOSing a search instance.  In some cases,
precision can be sacrificed, to see results returned more speedily.

This can presently be accomplished by modifying Scorers, such that the
skipTo method is aware of how long the query has been underway.  One
can simply return the best results found after a predetermined amount
of time.

It is unfortunate, however, that iteration is performed from oldest to
newest.  In most cases, the newest content is the most relevant.  In
the scenario described above, the newest (and therefore best) content
would not be found.

As I understand it, documents are stored in singly linked lists.
Therefore, reverse iteration is impossible.  What do people think
about modifying Lucene, such that iteration is performed in reverse?

-- 
Kyle Maxwell
Software Engineer
CastTV, Inc
http://www.casttv.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 18:57:16 2008
Return-Path: <java-user-return-32321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77861 invoked from network); 31 Jan 2008 18:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 18:57:16 -0000
Received: (qmail 41391 invoked by uid 500); 31 Jan 2008 18:57:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40874 invoked by uid 500); 31 Jan 2008 18:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40863 invoked by uid 99); 31 Jan 2008 18:57:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 10:57:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 18:56:33 +0000
Received: by nf-out-0910.google.com with SMTP id d3so151257nfc.15
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 10:56:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=6By2zkvtK9HGlBVfThhoa/mc/jmczDrwcuFnDZSUaak=;
        b=FdBAsZWoB4+HNpfeyM2Nx8gu/5Fvu9Bw6dD/DQcm1USrVgQwOlm+K0eJYBEqfB69kj/yqVZfNzeDRGQE4wdKU66rhwFUQXRUFk8QDRDW0yZhRLc0wAKD5WOxuarzl2mGmqMm8DDVypJkqtRH8LpYECXMizLsVskfSJ7Ac68TN90=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=eP+3Ci3iAxZBf23CX5VhZVB7s7O6z3f1HX8kBnCNvSr3M3Y0Z9S7s9tTNlA6jCBz1dYOgr0X2qtj3yW4Whueepxd2J1ZQP5wpCh6bGsdZ6+YaAajaGKCfysnKluiNEIdvueDx4BfL3506zG+fAV1CbK2rlVvGcxZeXAKjz3rJvc=
Received: by 10.78.165.16 with SMTP id n16mr4014837hue.63.1201805798774;
        Thu, 31 Jan 2008 10:56:38 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id 8sm850314hug.52.2008.01.31.10.56.36
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 31 Jan 2008 10:56:37 -0800 (PST)
Message-ID: <47A219C4.3060005@gmail.com>
Date: Thu, 31 Jan 2008 13:56:04 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance guarantees and index format
References: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com>
In-Reply-To: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

https://issues.apache.org/jira/browse/LUCENE-997

- Mark



Kyle Maxwell wrote:
> I'd like to be able to guarantee that a search will finish in
> (approximately?) N seconds.  This seems like a generally applicable
> goal for the project.  It would be nice to not have to worry about
> malicious or naive users DOSing a search instance.  In some cases,
> precision can be sacrificed, to see results returned more speedily.
>
> This can presently be accomplished by modifying Scorers, such that the
> skipTo method is aware of how long the query has been underway.  One
> can simply return the best results found after a predetermined amount
> of time.
>
> It is unfortunate, however, that iteration is performed from oldest to
> newest.  In most cases, the newest content is the most relevant.  In
> the scenario described above, the newest (and therefore best) content
> would not be found.
>
> As I understand it, documents are stored in singly linked lists.
> Therefore, reverse iteration is impossible.  What do people think
> about modifying Lucene, such that iteration is performed in reverse?
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 19:30:13 2008
Return-Path: <java-user-return-32322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86039 invoked from network); 31 Jan 2008 19:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 19:30:12 -0000
Received: (qmail 83704 invoked by uid 500); 31 Jan 2008 19:29:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83674 invoked by uid 500); 31 Jan 2008 19:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83648 invoked by uid 99); 31 Jan 2008 19:29:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 11:29:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 19:29:28 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m0VJTkD05467
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 13:29:47 -0600
Message-ID: <47A22193.40906@getopt.org>
Date: Thu, 31 Jan 2008 20:29:23 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance guarantees and index format
References: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com> <47A219C4.3060005@gmail.com>
In-Reply-To: <47A219C4.3060005@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> https://issues.apache.org/jira/browse/LUCENE-997

What this issue doesn't discuss is what to do with partial results 
obtained when a timeout occurred. As the original poster points out, 
document lists are traversed in the order they were added and not the 
order of their importance, which introduces a bias to partial results in 
that they reflect results from a random sample (which is likely not the 
most relevant, i.e. there could have been more relevant results later in 
the traversal order).

The answer to this issue is org.apache.nutch.indexer.IndexSorter, which 
rearranges posting lists in an already existing index, according to an 
arbitrary measure of document importance, so that documents with smaller 
id are more "important". Then the partial hit lists obtained as a result 
of early termination will have a better chance of being more relevant.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 19:50:14 2008
Return-Path: <java-user-return-32323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95839 invoked from network); 31 Jan 2008 19:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 19:50:14 -0000
Received: (qmail 24867 invoked by uid 500); 31 Jan 2008 19:49:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24841 invoked by uid 500); 31 Jan 2008 19:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24826 invoked by uid 99); 31 Jan 2008 19:49:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 11:49:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 19:49:29 +0000
Received: by nf-out-0910.google.com with SMTP id d3so167085nfc.15
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 11:49:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=3t1GNQPaoa3qNoBsQCe7qJWmReUp38HDRd86DcmqJII=;
        b=neJa8eEpkNoTc3r8/bK3UwSKBgT+JJy7T9mEQwY2WxE+LcdbMDQwN/zL6iEIVPMc6qkER1O7LmrE08OlMmExgMHeRKBK+fIROgRb2+mxZq391jk+dOi5NDp8RoaiM3s1tv3U5aZ4PdYW9YYdPgeeso2t8oWWkbBV95JxDtIdDYM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=PEX2PosGZMXOaGRg98CSqo6w2X9eCaXoEebAP2Tvf4iLb+1c+65gv7L9lCuG10ApJfhGQrzs9nbxHIB3iMq8zzjCOL3at9d8Rx+pQV5vuGybateZ4akSvCYa6wdp0eDJB0vma/8XU7JmQDiIX+sR/9PeUiDleCgB6IA1bOgtbr8=
Received: by 10.78.171.20 with SMTP id t20mr4178639hue.41.1201808968813;
        Thu, 31 Jan 2008 11:49:28 -0800 (PST)
Received: by 10.78.172.17 with HTTP; Thu, 31 Jan 2008 11:49:28 -0800 (PST)
Message-ID: <295da8fe0801311149p23bfdfa4vcf87d5cfcfd44ba@mail.gmail.com>
Date: Fri, 1 Feb 2008 01:19:28 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Different levels of negative boosting
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22727_28233509.1201808968805"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22727_28233509.1201808968805
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,  I want to give different levels of negative boost (reduce the score) to
documents for different matching queries. How it can be done?? Googling I
found out this link
http://wiki.apache.org/jakarta-lucene/CommunityContributions  but  it just
gives the option of giving single level negative boost.
is there any way of having multiple matching queries and give them different
negative boosts???


Regards,
Prabin

------=_Part_22727_28233509.1201808968805--

From java-user-return-32324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 21:39:15 2008
Return-Path: <java-user-return-32324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42280 invoked from network); 31 Jan 2008 21:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 21:39:15 -0000
Received: (qmail 3566 invoked by uid 500); 31 Jan 2008 21:39:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3544 invoked by uid 500); 31 Jan 2008 21:39:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3533 invoked by uid 99); 31 Jan 2008 21:39:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 13:39:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of durgadeep@gmail.com designates 72.14.252.158 as permitted sender)
Received: from [72.14.252.158] (HELO po-out-1718.google.com) (72.14.252.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 21:38:32 +0000
Received: by po-out-1718.google.com with SMTP id c31so1457238poi.0
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 13:38:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Dssrwa+4brlxQ0Gr6KRIAC0yBpATWCfYBeYY4JWW/zM=;
        b=E+ZVMNowPu8/w5hv0jcMXRgrH84/aN7ZAyTgBJnkgn+KdIFDVXxhlgryvPx6IcWlENg/L6IvXqksRzAcKl3J0PD8TcCwDAv6+sJhoBq2GB2Egdj0yX2nPKOdtMvKaON+QkpyMn0XHed7PkvsAksWz7ou0WeI4VfOdwLN8Fc+2jI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RfDhfTbhm6rYQkPgFB9Y0Zj3PWFdiJqmshDQurTBO4LgHRui54lQPCgxeAGikDN6DlT2Xe6hkylCY5xLBRsXiFApZ+MN2BWIak3oMJFSzQub+DPvSTInA+lOjtzNwwE3Di1OBK2nErwk6pajSzsWtX4uAUAtkh3DPdGhwJmc0Us=
Received: by 10.140.177.15 with SMTP id z15mr1903917rve.70.1201815519911;
        Thu, 31 Jan 2008 13:38:39 -0800 (PST)
Received: by 10.141.44.2 with HTTP; Thu, 31 Jan 2008 13:38:39 -0800 (PST)
Message-ID: <21625f380801311338m243e2eadj28f82a5cd07de2b9@mail.gmail.com>
Date: Thu, 31 Jan 2008 13:38:39 -0800
From: "DURGA DEEP" <durgadeep@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Word / Pharse match shown in a context
In-Reply-To: <479F6FC5.7040405@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22147_18230272.1201815519931"
References: <21625f380801290924i17665ae9gab0d1977edf618a2@mail.gmail.com>
	 <479F6FC5.7040405@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22147_18230272.1201815519931
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have a follow up question. Seems like if I want to use highlighting, we
should store the content of the entire document that has to be indexed.

         d.add( new Field( FIELD_NAME, "some text", Field.Store.YES,
Field.Index.TOKENIZED) );

Are there better ways of acheiving this ?. Since we have huge data that
needs to be indexed.

  Thanks Much
_ddt

On 1/29/08, Mark Miller <markrmiller@gmail.com> wrote:
>
> Look at the Highlighter in contrib. It creates fragments (context) and
> highlights search terms in them (keywords).
>
> If you want to highlight Phrase's correctly, check out this issue which
> adds support for Spans and PhraseQuerys:
>
> https://issues.apache.org/jira/browse/LUCENE-794
>
> Mark
>
>
> DURGA DEEP wrote:
> > Dear All,
> >
> >          I've been scouring through the Lucene classes. Are there any
> > classes which can help me acheive the following ?.
> >
> >          1)  We are an e-mail service provider. We wanted to provide a
> seach
> > capability of e-mail messages via Lucene. So far we are able to index/
> parse
> > the e-mail. create the appopriate indexes etc..
> >
> >               Now The customer wants us to have a google like search
> > capability i.e when they search for a particular word, the word should
> be
> > highlighted as well as the surrounding
> >               text i.e the context in which this word occurs should also
> be
> > shown.
> >
> >               Example : when searching for the word thread.
> >
> >               ...crawler is a classic example of Thread in an
> poolExecutor
> > code
> >                an poolExecutor code...
> >
> > Any help greatly appreciated
> > +ddt
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22147_18230272.1201815519931--

From java-user-return-32325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 22:02:55 2008
Return-Path: <java-user-return-32325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51385 invoked from network); 31 Jan 2008 22:02:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 22:02:54 -0000
Received: (qmail 44077 invoked by uid 500); 31 Jan 2008 22:02:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44043 invoked by uid 500); 31 Jan 2008 22:02:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44032 invoked by uid 99); 31 Jan 2008 22:02:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 14:02:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 22:02:26 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id E845D71C319; Thu, 31 Jan 2008 14:02:17 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id E518F71C258
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 14:02:17 -0800 (PST)
Date: Thu, 31 Jan 2008 14:02:17 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
In-Reply-To: <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net>
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com> 
 <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com> 
 <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
 <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have to keep one index though. Is there a way to reproduce an index from
: an indexReader?

asuming you have indexes that work in conjunction with eachther they 
way you want when using ParallelReader, you should (in theory) be able to 
use...

   ParallelReader r = ...;
   IndexWriter w = new IndexWRiter(...);
   w.addIndexes(new IndexReader[] { r });
   w.close();

...to "combine" those indexes into a single physical index.  but i've 
never personally tried it.  there may be quirks about ParallelReader that 
prevent this from working.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 22:58:36 2008
Return-Path: <java-user-return-32326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72067 invoked from network); 31 Jan 2008 22:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 22:58:36 -0000
Received: (qmail 36387 invoked by uid 500); 31 Jan 2008 22:58:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36363 invoked by uid 500); 31 Jan 2008 22:58:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36352 invoked by uid 99); 31 Jan 2008 22:58:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 14:58:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 22:57:52 +0000
Received: by nf-out-0910.google.com with SMTP id d3so219240nfc.15
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 14:57:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=iNXlLvaySzSws25tLZqvbSPb/oaTq5/s5qPE8BXmIWc=;
        b=hpyrOxk7BzN0H4mgVjcytOJiEZdKxXHcfZr/zLXYULfxC9TCbxP/M0IQ0XJGV1XKQzElPSmrxeSSZa2FsShNrkw+3VYFo2fN7QIhSpYS9GDmWZfepaHDJjt89YXIRBH8VxgRvK/dyfiVlTtA/HhuaDSokY6jreB9XB81XuJ9Zg4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=oiXP1oOG2eNyzZvipJva8ja7BtYWRW9HMSNfa6GocFS65lAjW1gOJ/Au6gv1mU6VIQDngE5hcFWNHwXcik/eVjCpTbcXKAyLkXdarxXsYSGpGG54oTS+aTpuCO+P0qMheRi6wwPzgHQtuTchjwAW/knBNHQ9aiNTlbox4IjGTzY=
Received: by 10.78.136.9 with SMTP id j9mr4594234hud.46.1201820276563;
        Thu, 31 Jan 2008 14:57:56 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id 37sm1828448hub.4.2008.01.31.14.57.54
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 31 Jan 2008 14:57:55 -0800 (PST)
Message-ID: <47A25250.9030808@gmail.com>
Date: Thu, 31 Jan 2008 17:57:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Word / Pharse match shown in a context
References: <21625f380801290924i17665ae9gab0d1977edf618a2@mail.gmail.com>	 <479F6FC5.7040405@gmail.com> <21625f380801311338m243e2eadj28f82a5cd07de2b9@mail.gmail.com>
In-Reply-To: <21625f380801311338m243e2eadj28f82a5cd07de2b9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You don't necessarily need to store the data in Lucene, but yes it does 
need to be stored somewhere. Otherwise, where would the context come 
from? If you are not stripping stopwords or stemming or lowercasing or 
anything, I suppose you could rebuild it from the index...

To keep from having to retokenize you can check out the TokenSources 
class which allows you to use TermVectors to rebuild the 
TokenStream....you still need the original text to fragment and 
highlight though. Weather you pull that text from a database, the 
filesystem, or Lucene, does not matter to the highlighter.

- Mark

DURGA DEEP wrote:
> I have a follow up question. Seems like if I want to use highlighting, we
> should store the content of the entire document that has to be indexed.
>
>          d.add( new Field( FIELD_NAME, "some text", Field.Store.YES,
> Field.Index.TOKENIZED) );
>
> Are there better ways of acheiving this ?. Since we have huge data that
> needs to be indexed.
>
>   Thanks Much
> _ddt
>
> On 1/29/08, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> Look at the Highlighter in contrib. It creates fragments (context) and
>> highlights search terms in them (keywords).
>>
>> If you want to highlight Phrase's correctly, check out this issue which
>> adds support for Spans and PhraseQuerys:
>>
>> https://issues.apache.org/jira/browse/LUCENE-794
>>
>> Mark
>>
>>
>> DURGA DEEP wrote:
>>     
>>> Dear All,
>>>
>>>          I've been scouring through the Lucene classes. Are there any
>>> classes which can help me acheive the following ?.
>>>
>>>          1)  We are an e-mail service provider. We wanted to provide a
>>>       
>> seach
>>     
>>> capability of e-mail messages via Lucene. So far we are able to index/
>>>       
>> parse
>>     
>>> the e-mail. create the appopriate indexes etc..
>>>
>>>               Now The customer wants us to have a google like search
>>> capability i.e when they search for a particular word, the word should
>>>       
>> be
>>     
>>> highlighted as well as the surrounding
>>>               text i.e the context in which this word occurs should also
>>>       
>> be
>>     
>>> shown.
>>>
>>>               Example : when searching for the word thread.
>>>
>>>               ...crawler is a classic example of Thread in an
>>>       
>> poolExecutor
>>     
>>> code
>>>                an poolExecutor code...
>>>
>>> Any help greatly appreciated
>>> +ddt
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 23:29:01 2008
Return-Path: <java-user-return-32327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81945 invoked from network); 31 Jan 2008 23:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 23:29:01 -0000
Received: (qmail 85304 invoked by uid 500); 31 Jan 2008 23:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85268 invoked by uid 500); 31 Jan 2008 23:28:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85257 invoked by uid 99); 31 Jan 2008 23:28:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 15:28:45 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.104.22] (HELO sa8.bezeqint.net) (192.115.104.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 23:28:16 +0000
Received: from localhost (unknown [127.0.0.1])
	by sa8.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP id AC56F342C6
	for <java-user@lucene.apache.org>; Fri,  1 Feb 2008 01:25:04 +0200 (IST)
Received: from sa8.bezeqint.net ([127.0.0.1])
 by localhost (sa8.bezeqint.net [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 09046-03 for <java-user@lucene.apache.org>;
 Fri,  1 Feb 2008 01:25:02 +0200 (IST)
Received: from m7.bezeqint.net (unknown [192.115.104.87])
	by sa8.bezeqint.net (Bezeq International SMTP out Mail Server) with ESMTP
	for <java-user@lucene.apache.org>; Fri,  1 Feb 2008 01:25:02 +0200 (IST)
Received: from your0548c161e1 ([82.102.179.19])
	by m7.bezeqint.net (MOS 3.8.5-GA)
	with ESMTP id BIM34947 (AUTH sf_ita_s);
	Fri, 1 Feb 2008 01:28:13 +0200 (IST)
X-FEAS-DEEPHEADER-FortiMail-2000-partnergsm.co.il:  No untrusted public ip! 
Message-Id: <20080131232815.16792@partnergsm.co.il>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: Having 2 fields, each using different analyzers?
Date: Fri, 1 Feb 2008 01:28:04 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <47A25250.9030808@gmail.com>
thread-index: AchkXM2lA+YWRbf7ToWlM1dVOH8K3AAAzHOA
X-Junkmail-Status: score=10/50, host=m7.bezeqint.net
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A090209.47A25990.008D,ss=1,fgs=0,
	ip=82.102.179.19,
	so=2007-07-31 18:51:00,
	dmn=5.4.3/2007-11-16
X-Virus-Scanned: amavisd-new at bezeqint.net
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Since Analyzer is set per IndexWriter, which is being added a Document,
which has several fields, I was wondering how would I store 2 different
fields in a Document, each being passed through a different Analyzer? The
idea is to have 2 fields of the same content, one stemmed and one is not,
both are tokenized and not stored. The rationale is Hebrew indexing (yes,
again :) ).

Itamar.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 23:52:56 2008
Return-Path: <java-user-return-32328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92811 invoked from network); 31 Jan 2008 23:52:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 23:52:56 -0000
Received: (qmail 16638 invoked by uid 500); 31 Jan 2008 23:52:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15662 invoked by uid 500); 31 Jan 2008 23:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15651 invoked by uid 99); 31 Jan 2008 23:52:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 15:52:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [87.194.172.100] (HELO knox.decisionsoft.com) (87.194.172.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 23:52:26 +0000
Received: from tugela.dsl.local ([10.0.0.91])
	by knox.decisionsoft.com with esmtp (Exim 4.63)
	(envelope-from <ejj@decisionsoft.com>)
	id 1JKjCc-00043T-8Q
	for java-user@lucene.apache.org; Thu, 31 Jan 2008 23:52:18 +0000
Received: from ejj (helo=localhost)
	by tugela.dsl.local with local-esmtp (Exim 4.63)
	(envelope-from <ejj@tugela.dsl.local>)
	id 1JKjCb-0005SQ-E5
	for java-user@lucene.apache.org; Thu, 31 Jan 2008 23:52:17 +0000
Date: Thu, 31 Jan 2008 23:52:16 +0000 (GMT)
From: Eleanor Joslin <ejj@decisionsoft.com>
X-X-Sender: ejj@tugela.dsl.local
To: java-user@lucene.apache.org
Subject: Using a QueryParser with an untokenized field?
Message-ID: <alpine.DEB.1.00.0801312335490.16858@tugela.dsl.local>
User-Agent: Alpine 1.00 (DEB 882 2007-12-20)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; format=flowed; charset=US-ASCII
X-SA-Exim-Connect-IP: 10.0.0.91
X-SA-Exim-Mail-From: ejj@decisionsoft.com
X-SA-Exim-Scanned: No (on knox.decisionsoft.com); SAEximRunCond expanded to false
X-SystemFilter-new-T: not expanding
X-SystemFilter-new-S:  not expanding
X-SystemFilter-new-F:  not expanding
X-Virus-Checked: Checked by ClamAV on apache.org

In my Lucene index there's a field that contains the local names of XML 
elements, one name per document.  Users can enter arbitrary queries for 
this field, so I'm using a QueryParser.

>From reading around it looks as if the field needs to be tokenized, but 
since the field's content is always a single term, is this really 
necessary?  What difference does it make?  I know that the QueryParser has 
to use a token stream, but for this field, tokenizing ought to be a no-op. 
Or am I missing something?

Thanks,

Eleanor Joslin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 31 23:53:52 2008
Return-Path: <java-user-return-32329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93397 invoked from network); 31 Jan 2008 23:53:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2008 23:53:52 -0000
Received: (qmail 18095 invoked by uid 500); 31 Jan 2008 23:53:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17582 invoked by uid 500); 31 Jan 2008 23:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17571 invoked by uid 99); 31 Jan 2008 23:53:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 15:53:38 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 23:53:11 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Having 2 fields, each using different analyzers?
Date: Thu, 31 Jan 2008 18:52:32 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB71B@SUEXCL-02.ad.syr.edu>
In-Reply-To: <20080131232815.16792@partnergsm.co.il>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Having 2 fields, each using different analyzers?
Thread-Index: AchkXM2lA+YWRbf7ToWlM1dVOH8K3AAAzHOAAAEOINA=
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Itamar,

On 01/31/2008 at 6:28 PM, Itamar Syn-Hershko wrote:
> Since Analyzer is set per IndexWriter, which is being added a =
Document,
> which has several fields, I was wondering how would I store 2 =
different
> fields in a Document, each being passed through a different Analyzer?
> The idea is to have 2 fields of the same content, one stemmed and one =
is
> not, both are tokenized and not stored. The rationale is Hebrew =
indexing
> (yes, again :) ).

Take a look at PerFieldAnalyzerWrapper:

<http://lucene.apache.org/java/1_4_3/api/org/apache/lucene/analysis/PerFi=
eldAnalyzerWrapper.html>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


