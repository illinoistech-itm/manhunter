From java-user-return-34278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 06:02:43 2008
Return-Path: <java-user-return-34278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84471 invoked from network); 1 Jun 2008 06:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 06:02:43 -0000
Received: (qmail 29604 invoked by uid 500); 1 Jun 2008 06:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29572 invoked by uid 500); 1 Jun 2008 06:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29559 invoked by uid 99); 1 Jun 2008 06:02:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 May 2008 23:02:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 06:01:42 +0000
Received: from [192.168.236.156] (helo=isper.nabble.com)
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K2gdn-00042Q-WC
	for java-user@lucene.apache.org; Sat, 31 May 2008 23:02:04 -0700
Message-ID: <17582678.post@talk.nabble.com>
Date: Sat, 31 May 2008 23:01:10 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Fellow Java and Lucene developers:

I am trying to display my results from doing a search of an xml document
(some quotes from shakespeare's "Hamlet") using a WildCard and Fuzzy search,
and then I'm trying to highlight the keyword(s) in the results, but
unfortunately I am having problems.  In the code that I have listed below, I
am null as my out put for any potential hits I should get, however, the
search term I am using (?rr*) should match the word "arrows" that appears in
the xml document.  Can you see what I am doing wrong?  I get the feeling
that the problem is with the Analyzer object, but not sure how to highlight
my results without it.  With a QueryParser constructor, it requires an
Analyzer object, but not the WildCard nor Fuzzy constructors.  Does anyone
have a solution?

Thanks in advance to all those who reply.
Sincerely;
Fayyaz

public List wildSearch(File indexDir) throws Exception {
    	
        List searchResult = new ArrayList();
        Directory fsDir=FSDirectory.getDirectory(indexDir);
        IndexSearcher is=new IndexSearcher(fsDir);
        
        Analyzer analyser = new StandardAnalyzer();
        Query parser=new WildcardQuery(new Term("LINES", "?rr*"));  
        long start=new Date().getTime();
        Hits hits=is.search(parser);
        long end=new Date().getTime();
        QueryScorer scorer = new QueryScorer(parser);
        	Highlighter highlighter = new Highlighter(scorer);
    	Highlighter high = new Highlighter(scorer);
    	Fragmenter fragmenter = new NullFragmenter();
    	Fragmenter fragment = new SimpleFragmenter(250);
    	highlighter.setTextFragmenter(fragmenter);
    	high.setTextFragmenter(fragment);
    	
        for(int i=0; i<hits.length(); i++){
        	Document doc=hits.doc(i);
        	String lns = doc.get("LINES");
            TokenStream lines = analyser.tokenStream("LINES", new
StringReader(lns));
            CachingTokenFilter filter = new CachingTokenFilter(lines);
            String highlightedLines = highlighter.getBestFragment(filter,
lns);
         filter.reset();
         String highlight = high.getBestFragment(filter, lns);
        	SearchResult resultBean = new SearchResult();
        	resultBean.setNarrator(hits.doc(i).get("SPEAKER"));
        	resultBean.setHitResult(highlight);
        	resultBean.setQuote(highlightedLines);
        	searchResult.add(resultBean);
        	System.out.println(resultBean.getNarrator());
         System.out.println(resultBean.getHitResult());
         	System.out.println("");
        	System.out.println(resultBean.getQuote());
        	System.out.println("");
        }
        
        System.err.println("Found " + hits.length() + " document(s)(in " +
(end-start) + " milliseconds) that matched query '" + "':"); 
        
        return searchResult;
    }
 
The xml document that I am searching through is listed below:

<PLAY>
<TITLE>The Tragedy of Hamlet, Prince of Denmark</TITLE>
<SPEECH>
<SPEAKER>LORD POLONIUS</SPEAKER>
<LINES>Yet here, Laertes! aboard, aboard, for shame!
The wind sits in the shoulder of your sail,
And you are stay'd for. There; my blessing with thee!
And these few precepts in thy memory
See thou character. Give thy thoughts no tongue,
Nor any unproportioned thought his act.
Be thou familiar, but by no means vulgar.
Those friends thou hast, and their adoption tried,
Grapple them to thy soul with hoops of steel;
But do not dull thy palm with entertainment
Of each new-hatch'd, unfledged comrade. Beware
Of entrance to a quarrel, but being in,
Bear't that the opposed may beware of thee.
Give every man thy ear, but few thy voice;
Take each man's censure, but reserve thy judgment.
Costly thy habit as thy purse can buy,
But not express'd in fancy; rich, not gaudy;
For the apparel oft proclaims the man,
And they in France of the best rank and station
Are of a most select and generous chief in that.
Neither a borrower nor a lender be;
For loan oft loses both itself and friend,
And borrowing dulls the edge of husbandry.
This above all: to thine ownself be true,
And it must follow, as the night the day,
Thou canst not then be false to any man.
Farewell: my blessing season this in thee!</LINES>
</SPEECH>
<SPEECH>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
<SPEECH>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
<SPEECH>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
</PLAY>
-- 
View this message in context: http://www.nabble.com/Displaying-and-highlighting-results-from-a-Wild-Card-and-Fuzzy-search-using-Lucene-in-Java-tp17582678p17582678.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 13:30:54 2008
Return-Path: <java-user-return-34279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73932 invoked from network); 1 Jun 2008 13:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 13:30:54 -0000
Received: (qmail 32535 invoked by uid 500); 1 Jun 2008 13:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32503 invoked by uid 500); 1 Jun 2008 13:30:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32492 invoked by uid 99); 1 Jun 2008 13:30:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 06:30:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 13:29:56 +0000
Received: by rv-out-0506.google.com with SMTP id f6so632760rvb.5
        for <java-user@lucene.apache.org>; Sun, 01 Jun 2008 06:30:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=RuCJ7gmLb/+ns8LJSF5nUfJFzfM486VmODvCHR2jjF4=;
        b=OFWz4O9yQ6mn+VlpGx+KBKN8rlELDJU4Vs8RLtVIbrQ/YdEuszo2Lbjbg9TZ58wN1cwuoY6KoAIJksyJ1KTs0CN+f9I9SApXNnw3pcLmkWGqao3wtHtRkBnkBb2tTBIdvqEkOF3PqZp9RW16TAACWLymaVJYL6a4fIMqYNLKgw8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rh7VxiHoEJdD/2zv1pdWea4J0pNuG9EDlH4DjgT1z3uhPzlQ/ayzHWCd0fgXFVv/39pfLDHfQ4tQwyYFNBzYk9QTcoNsZSYETHvyrJs8doCRcrQhXBzD8YfKd2tGyHWO0oCD8cNDEDWe31a/VbgAGui3nTmc9zBDh4c+QjPfJUo=
Received: by 10.143.30.10 with SMTP id h10mr1150176wfj.7.1212327012583;
        Sun, 01 Jun 2008 06:30:12 -0700 (PDT)
Received: by 10.142.230.2 with HTTP; Sun, 1 Jun 2008 06:30:12 -0700 (PDT)
Message-ID: <e05f0fd10806010630x107fb7eja5cf034e77789dcf@mail.gmail.com>
Date: Sun, 1 Jun 2008 16:30:12 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.reopen memory leak
In-Reply-To: <483FE020.9080001@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17012_14700017.1212327012587"
References: <8837fb770805272325r168211e3i23ae0314a07fe8d3@mail.gmail.com>
	 <483DD50C.3080908@gmail.com> <483DE95C.9030501@gmail.com>
	 <8837fb770805282125w5f3d7101i4b42b0c55edd3a5a@mail.gmail.com>
	 <483E5CD9.8080005@gmail.com>
	 <8837fb770805290941p3ae6dff1g1be9f2222cc49bbf@mail.gmail.com>
	 <483EE805.3090500@gmail.com>
	 <8837fb770805292039o661e15bfs860d6fca550619f5@mail.gmail.com>
	 <483FE020.9080001@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17012_14700017.1212327012587
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi John,

IndexReader newInner=in.reopen();
>      if (in!=newInner)
>      {
>        in.close();
>        this.in=newInner;
>
>        // code to clean up my data
>        _cache.clear();
>        _indexData.load(this, true);
>        init(_fieldConfig);
>      }
>

Just to be sure on this, could you confirm the two appearances above:
- in
- this.in
refer to exactly the same variable?

Assuming they are, could you provide some more code:
- entire method containing the above code
- method reopen() of your FilteredIndexReader.
- method newReader()
- constructor of FilteredIndexReader if it is invoked from newReader()

Regards,
Doron

------=_Part_17012_14700017.1212327012587--

From java-user-return-34280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 14:07:46 2008
Return-Path: <java-user-return-34280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79929 invoked from network); 1 Jun 2008 14:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 14:07:46 -0000
Received: (qmail 61251 invoked by uid 500); 1 Jun 2008 14:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61211 invoked by uid 500); 1 Jun 2008 14:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61200 invoked by uid 99); 1 Jun 2008 14:07:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 07:07:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 14:06:53 +0000
Received: by an-out-0708.google.com with SMTP id c37so191149anc.49
        for <java-user@lucene.apache.org>; Sun, 01 Jun 2008 07:07:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=+sc7stU4fS5cdjGpoazqoKU2BwmBlav3KQAzOu3hufM=;
        b=ltr589CsgPUTdD8lOTrebTWgGK1r4KSyoQXyl8EriZckXeDVy2XL+9PTCQalZhMN8lpozNQDyqIrdUfLUe/vsSZcq6fUbyaKhrwefBQknwos7GNtiGxUpTZGxY7dIR3+Ov6pKj6adPUyCTC5yJkCDFlOOKm2UcDH6meDhKSyYYU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZgTsmwmH+bk4Fr2lMMFb8hAD+wMrwwIY4KSi68JvXhnc8VmimAqWuw9PE3A9KK2Az1+apm8NTmQq6/x3RFDxU7zaCU+T7v3FzFJ51LCVKcBUkSkVo0WsFBtfz9mXoXL/8JTeTvQRTm1Eya8IScB3Nr6UQDeTUZ8vB/spJ5QK14w=
Received: by 10.100.163.8 with SMTP id l8mr12001664ane.121.1212329230234;
        Sun, 01 Jun 2008 07:07:10 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id z21sm2105904qbc.27.2008.06.01.07.07.08
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 01 Jun 2008 07:07:09 -0700 (PDT)
Message-ID: <4842AD0B.7040608@gmail.com>
Date: Sun, 01 Jun 2008 10:07:07 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexReader.reopen memory leak
References: <8837fb770805272325r168211e3i23ae0314a07fe8d3@mail.gmail.com>	 <483DD50C.3080908@gmail.com> <483DE95C.9030501@gmail.com>	 <8837fb770805282125w5f3d7101i4b42b0c55edd3a5a@mail.gmail.com>	 <483E5CD9.8080005@gmail.com>	 <8837fb770805290941p3ae6dff1g1be9f2222cc49bbf@mail.gmail.com>	 <483EE805.3090500@gmail.com> <8837fb770805292039o661e15bfs860d6fca550619f5@mail.gmail.com> <483FE020.9080001@gmail.com>
In-Reply-To: <483FE020.9080001@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>>  
> Yes...I constantly index with 8 threads on one writer while searching 
> with many more threads. Then I let it run for like an hour and watch. 
> The index is tiny to start and then grows to a moderate size...nothing 
> crazy.
>
> I am also reopening a lot on a real index of 3.5 million +  docs 
> though...and I see no leak evidence there either.
A couple interesting limitations with these results:

In the reopen test I was only using one field. I'll try a lot more.

On the 3.5+ million index there are loads of fields, but field norms are 
off.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 17:10:51 2008
Return-Path: <java-user-return-34281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43420 invoked from network); 1 Jun 2008 17:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 17:10:50 -0000
Received: (qmail 56457 invoked by uid 500); 1 Jun 2008 17:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56428 invoked by uid 500); 1 Jun 2008 17:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56417 invoked by uid 99); 1 Jun 2008 17:10:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 10:10:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 17:09:54 +0000
Received: by yw-out-2324.google.com with SMTP id 3so260098ywj.5
        for <java-user@lucene.apache.org>; Sun, 01 Jun 2008 10:10:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=y6F2UiUrtRJyK8c90rWtgNLulWCsCyJoImXG0T388TU=;
        b=bIyolgIUdGhJh2pN41zUSGd9R3bN0Wo/0lM1ceBMPc/RsuLN72CN/6a5DuSpidCdVeLKo/t3QtTz7rksTfwiqOPoWzISFDovn4+5Raokqu8OGn6fflhVZNyi/jEbiuILp/hpY+zHO7+tCYiX6TywIxHuOQOKmSCKOxBqlYqmuo4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OM4G8nJjFT0V17mbo1Lus2cgNJa0226Qif/dw3IvJkKe8KMSA0pRFL5SYARik8TUom44nj/B7nBSWqXeFZ+0Pe3Xq6dpRKMDQBdotiL4aVIgBTgoRTleLq/H77rR2kmiu6qN8FWj3GdtMxsdZjxqljEu3w832tRJ0gEVWnVKT+M=
Received: by 10.150.78.41 with SMTP id a41mr8788420ybb.181.1212340210540;
        Sun, 01 Jun 2008 10:10:10 -0700 (PDT)
Received: by 10.151.99.7 with HTTP; Sun, 1 Jun 2008 10:10:10 -0700 (PDT)
Message-ID: <126142c0806011010j68dbae82t344f86ea7e223e38@mail.gmail.com>
Date: Sun, 1 Jun 2008 14:10:10 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: ANN: New release Lucene-Oracle integration
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All:
  I am just releasing a new binary distribution of Oracle-Lucene
integration by using Lucene-OJVM Data Catridge.
  Here the change log:
* Compiled against Lucene 2.3.2 production release
* Used latest API for merging based on RAM usage
* Use Writer for deleting during Sync
* Confirm 4x improvement during indexing reported by Lucene dev. group
* Fix workaround which changes order of the rowids in ODCRIDList
* Added an Spanish WikiPedia Analyzer for testing
* Reports IOException instead of RunTimeException to signal EOF or
File Not Found
* Decouple Flush functionality from TableIndexer
  I would like to say thanks a lot to Michael McCandless for helping
to solve nice glitch with Oracle JIT compiler which causes that
DocumentsWriter class do not work on 11.1.0.6 release.
  11g binary version have a workaround for this problem.
  Oracle OJVM dev. team told me that this problems its not
reproducible on 11.2 and 11.1.0.7 versions.
  Latest binary dist. can be downloaded at:
http://sourceforge.net/project/showfiles.php?group_id=56183&package_id=255524&release_id=603580
  Also I have posted a new entry at my blog with some performance
experience against Wikipedia Spanish dump uploaded to XMLDB:
http://marceloochoa.blogspot.com/2008/06/new-binary-release-of-lucene-oracle.html
  Latest documentation is at:
http://docs.google.com/Doc?id=ddgw7sjp_54fgj9kg
  Best regards, Marcelo.

-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 17:16:21 2008
Return-Path: <java-user-return-34282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44099 invoked from network); 1 Jun 2008 17:16:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 17:16:21 -0000
Received: (qmail 62120 invoked by uid 500); 1 Jun 2008 17:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62083 invoked by uid 500); 1 Jun 2008 17:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62072 invoked by uid 99); 1 Jun 2008 17:16:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 10:16:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.24 as permitted sender)
Received: from [80.67.29.24] (HELO smtprelay10.ispgateway.de) (80.67.29.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 17:15:21 +0000
Received: from [91.37.196.202] (helo=p5b25c4ca.dip.t-dialin.net)
	by smtprelay10.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1K2r9k-0004eS-03
	for java-user@lucene.apache.org; Sun, 01 Jun 2008 19:15:44 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy search using Lucene in Java
Date: Sun, 1 Jun 2008 19:15:38 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <17582678.post@talk.nabble.com>
In-Reply-To: <17582678.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806011915.38616@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 1. Juni 2008, syedfa wrote:

> I am trying to display my results from doing a search of an xml document
> (some quotes from shakespeare's "Hamlet") using a WildCard and Fuzzy
> search, and then I'm trying to highlight the keyword(s) in the results,
> but unfortunately I am having problems.

Please see
http://wiki.apache.org/lucene-java/LuceneFAQ#head-75566820ee94a425c7e2950ac61d24e405fbd914

regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 19:16:48 2008
Return-Path: <java-user-return-34283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76410 invoked from network); 1 Jun 2008 19:16:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 19:16:48 -0000
Received: (qmail 19030 invoked by uid 500); 1 Jun 2008 19:16:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18992 invoked by uid 500); 1 Jun 2008 19:16:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18981 invoked by uid 99); 1 Jun 2008 19:16:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 12:16:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 19:15:48 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7EFC071C0BE; Sun,  1 Jun 2008 12:16:10 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7BE5471C07A;
	Sun,  1 Jun 2008 12:16:10 -0700 (PDT)
Date: Sun, 1 Jun 2008 12:16:10 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
cc: Daniel Freudenberger <d.freudenberger@trade-a-game.de>
Subject: RE: how to unsubscribe?
In-Reply-To: <000001c8c24a$88ae1e60$9a0a5b20$@freudenberger@trade-a-game.de>
Message-ID: <Pine.LNX.4.62.0806011212010.11468@radix.cryptio.net>
References: <001b01c8c245$d2ab1ae0$780150a0$@freudenberger@trade-a-game.de>
 <635DD931-06FC-42E6-A21D-E6F5895615C7@apache.org>
 <000001c8c24a$88ae1e60$9a0a5b20$@freudenberger@trade-a-game.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.LNX.4.62.0806011213091.11468@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


: I've already tried this but the subject line is fixed and I wrote a roman to
: convince the mail daemon that I'm not interested in spamming.. but it didn't
: care :)

Silly question, but you were sending your email to 
"java-user-unsubscribe@lucene.a..." and not "java-user@..." correct?

Are you still having a problem, or were you able to unsubscribe?

If it is still a problem, my suggestion is to file an "INFRA" bug in 
Jira using the "Mailing List" component, and attach copies of the email 
you sent (with full headers) and the response you got (with full 
headers)...

	https://issues.apache.org/jira/browse/INFRA


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 19:24:36 2008
Return-Path: <java-user-return-34284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77330 invoked from network); 1 Jun 2008 19:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 19:24:35 -0000
Received: (qmail 25678 invoked by uid 500); 1 Jun 2008 19:24:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25642 invoked by uid 500); 1 Jun 2008 19:24:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25631 invoked by uid 99); 1 Jun 2008 19:24:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 12:24:32 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 19:23:42 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9DCF871C39D; Sun,  1 Jun 2008 12:23:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9A27771C393
	for <java-user@lucene.apache.org>; Sun,  1 Jun 2008 12:23:59 -0700 (PDT)
Date: Sun, 1 Jun 2008 12:23:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Opening an index directory inside a jar
In-Reply-To: <17526678.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0806011217210.11468@radix.cryptio.net>
References: <17526678.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The crux of the issue seems to be that lucene cannot open segments file that
: is inside the jar (under luceneFiles/index directory)

i'm not entirely sure why it would have problems finding the segments 
file, but a larger problem is that Lucene needs random access which (last 
time i checked) isn't available when accessing files in jars...

http://www.nabble.com/Accessing-Lucene-Index-stored-in-a-jar-file-to3009604.html

...you cn always include the index in a jar, and then extract it before 
using it.

: unit/integration/functional tests depend on index files to be created. The
: manual step of creating the index files breaks the automated CI builds or
: some reliance on building the index in some tmp directory. Unfortunately
: that approach has issues if we run tests concurrently. Also, building the
: index takes a couple of minutes, so generating them on the fly for tests is
: expensive and increases the build time.

there's no inherent reason why concurrent tests need to collide if you use 
temp directories -- just have each test create it's own private tmp 
directory and copy the index (or exactract the index from the jar) to 
that private directory in the "setUp" method.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 19:43:49 2008
Return-Path: <java-user-return-34285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81750 invoked from network); 1 Jun 2008 19:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 19:43:49 -0000
Received: (qmail 34321 invoked by uid 500); 1 Jun 2008 19:43:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34287 invoked by uid 500); 1 Jun 2008 19:43:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34276 invoked by uid 99); 1 Jun 2008 19:43:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 12:43:44 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 19:42:49 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 28D5571C346; Sun,  1 Jun 2008 12:43:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 24CDF71C331;
	Sun,  1 Jun 2008 12:43:11 -0700 (PDT)
Date: Sun, 1 Jun 2008 12:43:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, spamsucks@rhoderunner.com
Subject: Re: =?UTF-8?Q?date=20filter=20filtering=20out=20non-dated=20items=3F?=
In-Reply-To: <52191.192.168.1.35.1212089487.webmail@192.168.1.35>
Message-ID: <Pine.LNX.4.62.0806011233100.11468@radix.cryptio.net>
References: <52191.192.168.1.35.1212089487.webmail@192.168.1.35>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: While I could add a future date to these documents, this kind of feels 
: hackish and I would be interested in other ideas on how to filter out 
: expired documents.

this just came up on the solr list, the answer is equally applicable 
but note that you'll need to combine it with some other query class 
(MatchAllDocs perhaps)...

>> you have to invert your logic.  docs that "have not yet expired, or will 
>> never expire" match the negacted query for "docs expired in the past" 

http://www.nabble.com/expression-in-an-fq-parameter-fails-to17353677.html#a17375261




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 20:17:27 2008
Return-Path: <java-user-return-34286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86530 invoked from network); 1 Jun 2008 20:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 20:17:27 -0000
Received: (qmail 50636 invoked by uid 500); 1 Jun 2008 20:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50596 invoked by uid 500); 1 Jun 2008 20:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50585 invoked by uid 99); 1 Jun 2008 20:17:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 13:17:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 20:16:32 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 648757FAA
	for <java-user@lucene.apache.org>; Sun,  1 Jun 2008 13:16:48 -0700 (PDT)
Message-Id: <D175B66E-3958-4244-A6DF-216AEC9F8F0B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <BC783A6B-077F-4EF8-8C16-2BE3CCED447D@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Lucene search time in real production use?
Date: Sun, 1 Jun 2008 16:16:46 -0400
References: <cec089090805310525o27be2eb2r53f729aff5bf1087@mail.gmail.com> <BC783A6B-077F-4EF8-8C16-2BE3CCED447D@gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Those benchmarks are pretty old, I think.

-Grant

On May 31, 2008, at 12:28 PM, Karl Wettin wrote:

>
> 31 maj 2008 kl. 14.25 skrev lucene user:
>> What are some average search and retrieval times for Lucene queries  
>> in real
>> production use? Would people include relevant stuff like the number  
>> of
>> documents in your index, etc.?
>>
>> Thanks for your help!
>
> http://lucene.apache.org/java/docs/benchmarks.html
>
> How well it works depends on many factors. What your corpus looks  
> like, load on index, what sort of queries are executed, hardware, et  
> c. You can estimate how your application will work by using and  
> extending the benchmarker contrib tool.
>
>
>         karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 20:30:17 2008
Return-Path: <java-user-return-34287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90894 invoked from network); 1 Jun 2008 20:30:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 20:30:17 -0000
Received: (qmail 58927 invoked by uid 500); 1 Jun 2008 20:30:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58888 invoked by uid 500); 1 Jun 2008 20:30:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58877 invoked by uid 99); 1 Jun 2008 20:30:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 13:30:14 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 20:29:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 20B487FAA
	for <java-user@lucene.apache.org>; Sun,  1 Jun 2008 13:29:31 -0700 (PDT)
Message-Id: <6F6FBAA3-D5E5-4D12-9C43-8D95CAECC374@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4FA0A45B21AD65488AFF8D679CF0E09A02FFC244@aplesnation.dom1.jhuapl.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Frequencies sorted by frequencies
Date: Sun, 1 Jun 2008 16:29:29 -0400
References: <4FA0A45B21AD65488AFF8D679CF0E09A014FE6BD@aplesnation.dom1.jhuapl.edu> <3974D529-828C-45A4-88E9-A23D0F048915@apache.org> <4FA0A45B21AD65488AFF8D679CF0E09A02FFC244@aplesnation.dom1.jhuapl.edu>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know of a way, sorry.  Most of the Similarity methods do not  
take a field name.


On May 29, 2008, at 9:20 AM, Hider, Sandy wrote:

> Thanks for taking the time to answer.  I see what you mean.  The thing
> is I also plan on using the standard score.  Would there be a way to  
> use
> the both the standard score and the TF-only Score in a single index?
>
> Sandy
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Wednesday, May 28, 2008 2:34 PM
> To: java-user@lucene.apache.org
> Subject: Re: Frequencies sorted by frequencies
>
> I think you could override all the Similarity factors except tf() with
> 1, such that the term frequency is the only factor in the scoring.
> Then you just submit the term as a query.  Note, I think you will need
> to override the similarity during indexing, too, so that norm length  
> is
> turned off, too.  Note, I haven't tried it :-).  Use the explain()
> functionality to double check.  At any rate, it should be quick to  
> test.
>
> See
> http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/Similar
> ity.html
>
> -Grant
>
>
> On May 28, 2008, at 10:48 AM, Hider, Sandy wrote:
>
>> Hi All,
>> I am trying to figure out a quick way to find the top N documents
>> sorted by frequency of a term.
>>
>> I found:
>>
>> IndexRead.termDocs()
>>
>> which provides an enumeration of doc() and freq() but it returns an
>> enumeration sorted by doc number.   Is there a way to get the results
>> sorted by freq?  Or is there another query I can run the find these
>> results?
>>
>> Thanks in advance,
>>
>> Sandy
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 01 20:45:14 2008
Return-Path: <java-user-return-34288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94113 invoked from network); 1 Jun 2008 20:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jun 2008 20:45:14 -0000
Received: (qmail 66094 invoked by uid 500); 1 Jun 2008 20:45:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66054 invoked by uid 500); 1 Jun 2008 20:45:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66043 invoked by uid 99); 1 Jun 2008 20:45:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 13:45:09 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.174] (HELO moutng.kundenserver.de) (212.227.126.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 20:44:20 +0000
Received: from DanielPC (p4FC75F16.dip.t-dialin.net [79.199.95.22])
	by mrelayeu.kundenserver.de (node=mrelayeu5) with ESMTP (Nemesis)
	id 0ML25U-1K2uPo1QRB-0007Ip; Sun, 01 Jun 2008 22:44:33 +0200
From: "Daniel Freudenberger" <d.freudenberger@trade-a-game.de>
To: "'Chris Hostetter'" <hossman_lucene@fucit.org>,
	"'Lucene Users'" <java-user@lucene.apache.org>
References: <001b01c8c245$d2ab1ae0$780150a0$@freudenberger@trade-a-game.de> <635DD931-06FC-42E6-A21D-E6F5895615C7@apache.org> <000001c8c24a$88ae1e60$9a0a5b20$@freudenberger@trade-a-game.de> <Pine.LNX.4.62.0806011212010.11468@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0806011212010.11468@radix.cryptio.net>
Subject: RE: how to unsubscribe?
Date: Sun, 1 Jun 2008 22:44:30 +0200
Message-ID: <000001c8c428$4b3b90f0$e1b2b2d0$@freudenberger@trade-a-game.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcjEG/vvX+t4jfNwSii+rPAlEWbuygAC/p7g
Content-Language: de
X-Provags-ID: V01U2FsdGVkX18NRnYTQtqg9jMGm/V+7tldHdQTCosVoxwaIwd
 r/ZEhmPqIPNIcCUWFpYO62r19bd4hk8PDfZxYrvSY1DHxZje8J
 91Q/OsAz/s2JmKTdxojwQYmQS9HnQLQP9z58jog8KjgEmLwEZ3
 kfg==
X-Virus-Checked: Checked by ClamAV on apache.org

As you can see I'm still part of this list.

I'll submit a bug report.

Thanks in advance,
Daniel

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: Sunday, June 01, 2008 9:16 PM
To: Lucene Users
Cc: Daniel Freudenberger
Subject: RE: how to unsubscribe?


: I've already tried this but the subject line is fixed and I wrote a roman
to
: convince the mail daemon that I'm not interested in spamming.. but it
didn't
: care :)

Silly question, but you were sending your email to 
"java-user-unsubscribe@lucene.a..." and not "java-user@..." correct?

Are you still having a problem, or were you able to unsubscribe?

If it is still a problem, my suggestion is to file an "INFRA" bug in 
Jira using the "Mailing List" component, and attach copies of the email 
you sent (with full headers) and the response you got (with full 
headers)...

	https://issues.apache.org/jira/browse/INFRA


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 04:37:09 2008
Return-Path: <java-user-return-34289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78649 invoked from network); 2 Jun 2008 04:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 04:37:07 -0000
Received: (qmail 31722 invoked by uid 500); 2 Jun 2008 04:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31692 invoked by uid 500); 2 Jun 2008 04:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31678 invoked by uid 99); 2 Jun 2008 04:37:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 21:37:02 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 04:36:13 +0000
Received: by wf-out-1314.google.com with SMTP id 28so726937wfc.20
        for <java-user@lucene.apache.org>; Sun, 01 Jun 2008 21:36:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=vT9w1tvpVpT3hua0apQ4pXvEQJe55UiCTsdNn5Mjf/8=;
        b=pWwl8Y7dEN8wh9+G7CfQquJ+y7LPz+NKBjZSa42IAS5fA3feek0KY2xVZo4fmJqWLjE3ubSA7/bLa81S8ynt6eBsY1fsFW0I2AFqOM/L+y7jzghLv47haewmr1ZFJetoYBWd/tS1aa5HgY3QY/cIoi1eq15uIOHQuqqdZXZpLdE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kNVQLnVkeDwZJwmd0AkLfgxkaVP6lWT4gcw4zxztTQFi0+qovG0V8nEfKFaQEF2HnXOy9Y5h4pj4ahMr3pNgojGAY+5eA1rjbNAJhfLERBqrvgDv1nS11JmamSbW1KSMXV7UL9V5EQZnr7lS+kSfk1HpL1Z6AVRpw9ETw9RUbn4=
Received: by 10.142.203.13 with SMTP id a13mr3359054wfg.224.1212381390129;
        Sun, 01 Jun 2008 21:36:30 -0700 (PDT)
Received: by 10.142.230.2 with HTTP; Sun, 1 Jun 2008 21:36:29 -0700 (PDT)
Message-ID: <e05f0fd10806012136j78dd59beja2292bd140f57f5c@mail.gmail.com>
Date: Mon, 2 Jun 2008 07:36:29 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Opening an index directory inside a jar
In-Reply-To: <Pine.LNX.4.62.0806011217210.11468@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18552_30817861.1212381390121"
References: <17526678.post@talk.nabble.com>
	 <Pine.LNX.4.62.0806011217210.11468@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18552_30817861.1212381390121
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> : The crux of the issue seems to be that lucene cannot open segments file
> that
> : is inside the jar (under luceneFiles/index directory)
>
> i'm not entirely sure why it would have problems finding the segments
> file, but a larger problem is that Lucene needs random access which (last
> time i checked) isn't available when accessing files in jars...
>
>
> http://www.nabble.com/Accessing-Lucene-Index-stored-in-a-jar-file-to3009604.html
>

I bumped into (though never used)
http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs/provider/jar/JarFileSystem.html
There, FileContent has this method
getRandomAccessContent(org.apache.commons.vfs.util.RandomAccessMode)
so it seems worth exploring.

HTH,
Doron

------=_Part_18552_30817861.1212381390121--

From java-user-return-34290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 05:20:20 2008
Return-Path: <java-user-return-34290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86720 invoked from network); 2 Jun 2008 05:20:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 05:20:20 -0000
Received: (qmail 47719 invoked by uid 500); 2 Jun 2008 05:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47691 invoked by uid 500); 2 Jun 2008 05:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47680 invoked by uid 99); 2 Jun 2008 05:20:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 22:20:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 05:19:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so921170rvb.5
        for <java-user@lucene.apache.org>; Sun, 01 Jun 2008 22:19:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=cODnMXYlBEkxPJBcUiKUIKP59fId1m5X2tOLdgHEbIw=;
        b=Kq+xWtUn1mYsGFI8Q7fV7+Xxz9u+TkGwAZpTY+7FcnAjoe+AbdlJOgcHbnmWP00kfpHeE1aiHLGvclbtKbTY3jYOi6NP17ZHWq3Xpgsa5mfbSXOsQ/5RiVJYovuuFZ52KdbbgQdy5LfrKaVMslTd80O0nNev3ST7m/lS+0znYZs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CZXWt3XQXlPoUXZEWXwG4sH8UFWUlxxHzVG6g81LbdW7LaxfsPOHDOfGe+9Mtw1tbkiQmM6l/jlxWvJjPN9dXWYfCKsOEvLfDvp4RnBrFQR7+Bq+mMor6DrWdBA4z5b02gLPM29jP21GtxzHH1Bu8Jxv28UromSOigw87ypords=
Received: by 10.141.211.13 with SMTP id n13mr4677048rvq.184.1212383984964;
        Sun, 01 Jun 2008 22:19:44 -0700 (PDT)
Received: by 10.141.179.14 with HTTP; Sun, 1 Jun 2008 22:19:44 -0700 (PDT)
Message-ID: <d5b3ea330806012219w18b4c98v9a81ba9daf2b1f2e@mail.gmail.com>
Date: Mon, 2 Jun 2008 10:49:44 +0530
From: "Sonu Sudhakar" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boolean Query Issue
In-Reply-To: <d5b3ea330805290319sa68fc9dtf5197ad839a87ecc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11430_31902300.1212383984898"
References: <d5b3ea330805280444s313e0e86n5948ac73081263c0@mail.gmail.com>
	 <359a92830805280639t947f608o6bf280d131e8b7a9@mail.gmail.com>
	 <d5b3ea330805290319sa68fc9dtf5197ad839a87ecc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11430_31902300.1212383984898
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have done some more analysis on this issue. I think it is related to
lucene's default operator.
I am getting excat results, when I sets the default operator as 'OR', but
facing problem when setting the default operator as 'AND'.

The following are the lucene QueryParser outputs for both cases.

Query :* TTL:store AND TTL:data OR TTL:variable

*1. When lucene default operator is '*OR'

*QueryParser output  using toString method: *
+TTL:store +TTL:data TTL:variable


*2. When lucene default operator is '*AND'

*QueryParser output  using toString method:
*+TTL:store TTL:data TTL:variable

*The output of second case is confusing me.

Could anybody please give me an explanation for this behavior?

Thanks,
Sonu

On Thu, May 29, 2008 at 3:49 PM, Sonu Sudhakar <sonusr@gmail.com> wrote:

> Erick,
>
> Thanks for your reply.
>
> I am working with approximately 1 million documents. They are indexed in 4
> servers. Each document has multiple fields. I am using ParallelMultiSearcher
> for searching purpose.
>
> I tried a few queries in the title(TTL) field.
>
> i started with a simple query without boolean operators.
>
> *1. TTL:data => 3733 results (all matches had "data" in title)*
>
> Then I tried a second one with AND operator.
>
> *2. TTL:data AND TTL:store => 19 results*
>
> I analyzed the results. the results had both "data" and "store" in the
> title.
>
> *I then tried OR operator*
>
> *3. TTL:data AND TTL:store OR TTL:variable*
>
> I got 3,733 results., same as the query TTL:data.
>
> I even tried giving a meaningless query
>
> TTL:data AND TTL:storettttt OR TTL:variablettttt => 3,733 results (The
> results were same as that of TTL:data.)
>
> TTL:data AND TTL:computer OR TTL:device => 3,733 results (this also showed
> the same results as above)
>
> The same thing repeats for other cases too. The queries below also behaved
> the same way.
> i.e. -
>
> 1. TTL:store AND TTL:data OR TTL:variable => 76 results
> 2. TTL:store AND TTL:datatttt OR TTL:variabletttt => 76 results
> 3. TTL:store AND TTL:computer OR TTL:device => 76 results
>
>
> 1. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
> 2. TTL:variable AND TTL:datatttt OR  TTL:storetttt => 1,496 results
> 3. TTL:variable AND TTL:computer OR  TTL:device => 1,496 results
>
> I hope you have a clearer picture of my issue now.
>
> Thanks,
> Sonu
>
>
> On Wed, May 28, 2008 at 7:09 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>
>> It's unclear what you *should* expect. How is your data
>> distributed?
>>
>> In other words, how many documents do you have? In this example,
>> for instance,
>> 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
>> it considered the TTL:data part only.
>>
>> it's perfecily reasonable if every document that had "variable" in the
>> field *also* has "data" and "store" in the field. So your numbers
>> don't give us much to work with.....
>>
>> Remember, though, that Lucene syntax isn't a pure boolean syntax. See
>>
>> http://wiki.apache.org/lucene-java/BooleanQuerySyntax
>>
>> And when in doubt parenthesize <G>...
>>
>> Best
>> Erick
>>
>> On Wed, May 28, 2008 at 7:44 AM, Sonu Sudhakar <sonusr@gmail.com> wrote:
>>
>> > Hi,
>> >
>> > I have some issue with boolean queries.
>> >
>> > I am using Lucene-core-2.3.1.
>> >
>> > I have done test on boolean query with 3 terms (data, store, variable)
>> in
>> > my
>> > TTL field. The TTL field is indexed and searched using StandardAnalyzer.
>> >
>> > The three terms when searched individually gave the following result
>> >
>> > 1. TTL:data  => 3,733 results
>> > 2. TTL:store  => 76 results
>> > 3. TTL:variable  => 1,496 results
>> >
>> > But found issue when combining these terms with boolean operators.
>> >
>> > e.g.
>> > 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
>> > it considered the TTL:data part only.
>> >
>> > 2. TTL:store AND TTL:data OR TTL:variable => 76 results
>> > it considered  the TTL:store part only.
>> >
>> > 3. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
>> > it considered  the TTL:variable part only.
>> >
>> > But I am getting correct result when combining terms with 'AND'
>> operator. I
>> > think the issue is with 'OR' operator.
>> >
>> >
>> > Could anybody give an explanation for this behavior of lucene?
>> > Could you give suggestions to rectify this?
>> >
>> > Thanks,
>> > Sonu
>> >
>>
>
>

------=_Part_11430_31902300.1212383984898--

From java-user-return-34291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 05:24:44 2008
Return-Path: <java-user-return-34291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87296 invoked from network); 2 Jun 2008 05:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 05:24:44 -0000
Received: (qmail 50488 invoked by uid 500); 2 Jun 2008 05:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50444 invoked by uid 500); 2 Jun 2008 05:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50433 invoked by uid 99); 2 Jun 2008 05:24:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Jun 2008 22:24:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 05:23:52 +0000
Received: by wf-out-1314.google.com with SMTP id 28so739449wfc.20
        for <java-user@lucene.apache.org>; Sun, 01 Jun 2008 22:24:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Eosqr+hbLM7sHuIE2bn/PSDYDTns/vv1F3Oamti8BV8=;
        b=YQlqaoFgNqd5mTAhdfycF7VLqLeMSC109QGrXsRx5pM7ZFXdGzpvY1r5Zm/W+LLtfaiPWENvD0CoJYsNKfvfRgMSRCZ/K2K9Lv5D910JM1UKfGCAabmJ1aTq6kJ5UxscLsCbPZNilIPpQ0Tc3zdTO8lLapX0NJDs/o4EJyhi8Gk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BTf80hR2zlLJJY78UeX4sqVOqYAj1oW+Me+ade6moyBnFbjHEhqhaEtTljOiLvexs23E3CVLyYypM1M4r0R6O2iDO4ef3A8QurAts8i+pY3IV7T8tuO3ig457TDnvDYD00qZrFyNKUwcjVvYSEpwPBfDu+36fYfy70dLmE5wkeg=
Received: by 10.142.188.4 with SMTP id l4mr154860wff.183.1212384248749;
        Sun, 01 Jun 2008 22:24:08 -0700 (PDT)
Received: by 10.142.230.2 with HTTP; Sun, 1 Jun 2008 22:24:08 -0700 (PDT)
Message-ID: <e05f0fd10806012224p4656ceb5r415394d87a962e29@mail.gmail.com>
Date: Mon, 2 Jun 2008 08:24:08 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to add PageRank score with lucene's relevant score in sorting
In-Reply-To: <11e088b10805280302q933d019k2a7baad10d43e04f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18608_3757963.1212384248735"
References: <11e088b10805280302q933d019k2a7baad10d43e04f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18608_3757963.1212384248735
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Jarvis,


>     I have a problem that how to "combine" two score to sort the search
> result documents.
>     for example I  have 10 million pages in lucene index , and i know their
> pagerank scores. i give a query to it , every docs returned have a
> lucene-score, mark it as R (relevant score), and  i  also  have its
> pagerank score, mark it as P,  what i need is i want to sort the search
> result base on the value "P+R".  You know if i store the pagerank score in
> index and get it every search time , then compute P+R , then sort it , this
> way is too slow. in my system , when the search hits 500000 result , the
> sort may cost about 20s.
>

Check CustomScoreQuery in
http://lucene.apache.org/java/2_3_2/api/core/org/apache/lucene/search/function/package-summary.html

Probably something like this:
- implement ValueSource on top of the pagerank values,
- create a valueSourceQuery on top of it,
- create a customScoreQuery on top of the original query and the
valueSourceQuery.
Note that by default, customScoreQuery multiplies the scores, but you can
override this.

Doron

------=_Part_18608_3757963.1212384248735--

From java-user-return-34292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 12:50:14 2008
Return-Path: <java-user-return-34292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28316 invoked from network); 2 Jun 2008 12:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 12:50:14 -0000
Received: (qmail 46342 invoked by uid 500); 2 Jun 2008 12:50:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46320 invoked by uid 500); 2 Jun 2008 12:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46304 invoked by uid 99); 2 Jun 2008 12:50:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 05:50:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 12:49:20 +0000
Received: by fg-out-1718.google.com with SMTP id l27so906555fgb.27
        for <java-user@lucene.apache.org>; Mon, 02 Jun 2008 05:49:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=AuqghmB7nwyOCJ/8INCY+OMUsX1O4Co8VBiMc3bwFyQ=;
        b=vGh+2kizWLp2eI2qKYE8rgFPSDXjaljFxZgELxhOk7NwhDYJZ33Cs302Hz8jQkHHybYUNB3xpNI3oVknDWGTx6oscFkKG7eBX90oYMpM49yXqFIaj5Q1FNR+k8SpOOXVUKatd6kw/PiojqDVc49UsFq0stedINbJXBP1FtKZgZ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FoMS6hbr/gbPa0A9dge0n9UFPSHxD5qyvkU6OhF1NPAv1GErjPZ1/JiFuGN+UoxMGx63sVgI9wn4LNRwcPAMpj7FnssyhpP7Ug6YUhCoryfkTXhds6boMximsttkrpg6LXrTwM6K1/U5BKhPgOnm240quYCwih7riPKRgXDIi5Y=
Received: by 10.86.98.10 with SMTP id v10mr6316123fgb.39.1212410976135;
        Mon, 02 Jun 2008 05:49:36 -0700 (PDT)
Received: by 10.86.63.2 with HTTP; Mon, 2 Jun 2008 05:49:36 -0700 (PDT)
Message-ID: <359a92830806020549v9a82a98sbe30dd1a2e8d5154@mail.gmail.com>
Date: Mon, 2 Jun 2008 08:49:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boolean Query Issue
In-Reply-To: <d5b3ea330806012219w18b4c98v9a81ba9daf2b1f2e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8517_12106446.1212410976143"
References: <d5b3ea330805280444s313e0e86n5948ac73081263c0@mail.gmail.com>
	 <359a92830805280639t947f608o6bf280d131e8b7a9@mail.gmail.com>
	 <d5b3ea330805290319sa68fc9dtf5197ad839a87ecc@mail.gmail.com>
	 <d5b3ea330806012219w18b4c98v9a81ba9daf2b1f2e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8517_12106446.1212410976143
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You need to include your code I think. This makes no sense on a quick
look, so unless we see some code it'll be hard to know whether
we're looking at anything relevant.

Best
Erick

On Mon, Jun 2, 2008 at 1:19 AM, Sonu Sudhakar <sonusr@gmail.com> wrote:

> Hi,
>
> I have done some more analysis on this issue. I think it is related to
> lucene's default operator.
> I am getting excat results, when I sets the default operator as 'OR', but
> facing problem when setting the default operator as 'AND'.
>
> The following are the lucene QueryParser outputs for both cases.
>
> Query :* TTL:store AND TTL:data OR TTL:variable
>
> *1. When lucene default operator is '*OR'
>
> *QueryParser output  using toString method: *
> +TTL:store +TTL:data TTL:variable
>
>
> *2. When lucene default operator is '*AND'
>
> *QueryParser output  using toString method:
> *+TTL:store TTL:data TTL:variable
>
> *The output of second case is confusing me.
>
> Could anybody please give me an explanation for this behavior?
>
> Thanks,
> Sonu
>
> On Thu, May 29, 2008 at 3:49 PM, Sonu Sudhakar <sonusr@gmail.com> wrote:
>
> > Erick,
> >
> > Thanks for your reply.
> >
> > I am working with approximately 1 million documents. They are indexed in
> 4
> > servers. Each document has multiple fields. I am using
> ParallelMultiSearcher
> > for searching purpose.
> >
> > I tried a few queries in the title(TTL) field.
> >
> > i started with a simple query without boolean operators.
> >
> > *1. TTL:data => 3733 results (all matches had "data" in title)*
> >
> > Then I tried a second one with AND operator.
> >
> > *2. TTL:data AND TTL:store => 19 results*
> >
> > I analyzed the results. the results had both "data" and "store" in the
> > title.
> >
> > *I then tried OR operator*
> >
> > *3. TTL:data AND TTL:store OR TTL:variable*
> >
> > I got 3,733 results., same as the query TTL:data.
> >
> > I even tried giving a meaningless query
> >
> > TTL:data AND TTL:storettttt OR TTL:variablettttt => 3,733 results (The
> > results were same as that of TTL:data.)
> >
> > TTL:data AND TTL:computer OR TTL:device => 3,733 results (this also
> showed
> > the same results as above)
> >
> > The same thing repeats for other cases too. The queries below also
> behaved
> > the same way.
> > i.e. -
> >
> > 1. TTL:store AND TTL:data OR TTL:variable => 76 results
> > 2. TTL:store AND TTL:datatttt OR TTL:variabletttt => 76 results
> > 3. TTL:store AND TTL:computer OR TTL:device => 76 results
> >
> >
> > 1. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
> > 2. TTL:variable AND TTL:datatttt OR  TTL:storetttt => 1,496 results
> > 3. TTL:variable AND TTL:computer OR  TTL:device => 1,496 results
> >
> > I hope you have a clearer picture of my issue now.
> >
> > Thanks,
> > Sonu
> >
> >
> > On Wed, May 28, 2008 at 7:09 PM, Erick Erickson <erickerickson@gmail.com
> >
> > wrote:
> >
> >> It's unclear what you *should* expect. How is your data
> >> distributed?
> >>
> >> In other words, how many documents do you have? In this example,
> >> for instance,
> >> 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
> >> it considered the TTL:data part only.
> >>
> >> it's perfecily reasonable if every document that had "variable" in the
> >> field *also* has "data" and "store" in the field. So your numbers
> >> don't give us much to work with.....
> >>
> >> Remember, though, that Lucene syntax isn't a pure boolean syntax. See
> >>
> >> http://wiki.apache.org/lucene-java/BooleanQuerySyntax
> >>
> >> And when in doubt parenthesize <G>...
> >>
> >> Best
> >> Erick
> >>
> >> On Wed, May 28, 2008 at 7:44 AM, Sonu Sudhakar <sonusr@gmail.com>
> wrote:
> >>
> >> > Hi,
> >> >
> >> > I have some issue with boolean queries.
> >> >
> >> > I am using Lucene-core-2.3.1.
> >> >
> >> > I have done test on boolean query with 3 terms (data, store, variable)
> >> in
> >> > my
> >> > TTL field. The TTL field is indexed and searched using
> StandardAnalyzer.
> >> >
> >> > The three terms when searched individually gave the following result
> >> >
> >> > 1. TTL:data  => 3,733 results
> >> > 2. TTL:store  => 76 results
> >> > 3. TTL:variable  => 1,496 results
> >> >
> >> > But found issue when combining these terms with boolean operators.
> >> >
> >> > e.g.
> >> > 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
> >> > it considered the TTL:data part only.
> >> >
> >> > 2. TTL:store AND TTL:data OR TTL:variable => 76 results
> >> > it considered  the TTL:store part only.
> >> >
> >> > 3. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
> >> > it considered  the TTL:variable part only.
> >> >
> >> > But I am getting correct result when combining terms with 'AND'
> >> operator. I
> >> > think the issue is with 'OR' operator.
> >> >
> >> >
> >> > Could anybody give an explanation for this behavior of lucene?
> >> > Could you give suggestions to rectify this?
> >> >
> >> > Thanks,
> >> > Sonu
> >> >
> >>
> >
> >
>

------=_Part_8517_12106446.1212410976143--

From java-user-return-34293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 13:22:52 2008
Return-Path: <java-user-return-34293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43416 invoked from network); 2 Jun 2008 13:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 13:22:49 -0000
Received: (qmail 14422 invoked by uid 500); 2 Jun 2008 13:22:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13787 invoked by uid 500); 2 Jun 2008 13:22:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13776 invoked by uid 99); 2 Jun 2008 13:22:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 06:22:44 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.212.71.225] (HELO prw2k3mm03.dmz.weather.com) (65.212.71.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 13:21:49 +0000
Received: from ATLMAIL01.corp.weather.com (Not Verified[10.31.24.101]) by prw2k3mm03.dmz.weather.com with MailMarshal (v6,2,1,3252)
	id <B4843f61b0001>; Mon, 02 Jun 2008 09:31:07 -0400
Received: from 10.50.89.93 ([10.50.89.93]) by ATLMAIL01.corp.weather.com ([10.31.24.121]) via Exchange Front-End Server exchange.weather.com ([65.212.71.81]) with Microsoft Exchange Server HTTP-DAV ;
 Mon,  2 Jun 2008 13:22:09 +0000
User-Agent: Microsoft-Entourage/12.10.0.080409
Date: Mon, 02 Jun 2008 09:22:08 -0400
Subject: Re: Query works in Luke but not in code...
From: Casey Dement <cdement@weather.com>
To: <java-user@lucene.apache.org>
Message-ID: <C4696C40.5E37%cdement@weather.com>
Thread-Topic: Query works in Luke but not in code...
Thread-Index: AcjBB0xa17iOlM3EvU2M0LzNmqRNVgDrFvU3
In-Reply-To: <C4634297.5D48%cdement@weather.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Okay, I figured out my issue (well, actually a coworker spotted it - I was
just too close).  A word of warning:

Token "termBuffer" character arrays are fixed size, not sized to the number
of characters!

Yep, I was dropping the term buffer into a String without start and length,
thereby adding unseen characters to the end of the String that just monkey
up everything :)  This is of course mentioned in the documentation - I just
overlooked that little detail...


On 5/28/08 5:10 PM, "Casey Dement" <cdement@weather.com> wrote:

> LOL - I sure wish it was! :)
> 
> Sadly, that was a typo (Luke, for all its beauties, does not seem to grasp
> the concept of a clipboard so the sample was a manual transcription).
> 
> A few more details - don't know if this will help or not.
> 
> Same query as before, when I do a rewrite of the query in Luke I get back a
> set of 44 matching tokens for the given "Austell" ranging between a boost of
> 0.1429 for "turrel" up to 1.0 for "austell".  That the token "austell" gets
> a 1.0 is rather obvious since it's a perfect match...
> 
> BUT - when I rewrite the query in my local code, I get 2 matches, austell
> (at 0.14285707) and (austerlitz at 0.20000005).  This is disturbing on two
> fronts - first of all where are the other 42?  And secondly - why is the
> exact match evaluating to such a low boost?
> 
> Does that point at all to where I'm going astray?
> 
> Thanks!
> 
>  Casey 
> 
> 
> On 5/23/08 5:00 AM, "Ian Lea" <ian.lea@gmail.com> wrote:
> 
>>> ...
>>> And expect to match document 156297 (search_text=="Austell GA", type==1).
>>> ...
>>>  System.out.println(searcher.explain(query, 156296));
>> 
>> 156297 != 156296
>> 
>> Could that be it?
>> 
>> 
>> --
>> Ian.
>> 
>> 
>> On Thu, May 22, 2008 at 11:21 PM, Casey Dement <cdement@weather.com> wrote:
>>> Hi - trying to execute a search in Lucene and getting results I don't
>>> understand :(
>>> 
>>> The index contains fields search_text and type - both indexed tokenized.
>>> I'm attempting to execute the query:
>>> 
>>>  +(search_text:austell~0.9 search_text:ga~0.9) +(type:1 type:4)
>>> 
>>> And expect to match document 156297 (search_text=="Austell GA", type==1).
>>> 
>>> I am executing this query both directly in code and via the tool Luke - but
>>> getting WILDLY different answers.  In Luke, the expected document is found
>>> no problem, but in my own code I find no results.  Obviously I suspect my
>>> code of being crap ;)
>>> 
>>> Oh, FYI, in both my local code and Luke I am using a StandardAnalyzer and
>>> the default column is "search_text".
>>> 
>>> Here's what I'm doing:
>>> 
>>>  /******************************************************************/
>>>  File location = new File("/the/correct/path");
>>>  IndexReader index = IndexReader.open(location);
>>>  Searcher searcher = new IndexSearcher(index);
>>>  QueryParser parser = new QueryParser("search_text", new
>>> StandardAnalyzer());
>>>  Query query = parser.parse("+(search_text:austell~0.9 search_text:ga~0.9)
>>> +(type:1 type:4)");
>>>  System.out.println(searcher.explain(query, 156296));
>>>  /******************************************************************/
>>> 
>>> When I run this, I get:
>>> |  0.0000 = (NON-MATCH) Failure to meet condition(s) of required/prohibited
>>> clause(s)
>>> |    0.0000 = no match on required clause (() ())
>>> |      0.0000 = (NON-MATCH) product of:
>>> |        0.0000 = (NON-MATCH) sum of:
>>> |        0.0000 = coord(0/2)
>>> |    0.2133 = (MATCH) product of:
>>> |      0.4267 = (MATCH) sum of:
>>> |        0.4267 = (MATCH) weight(type:1 in 156296), product of:
>>> |          0.3672 = queryWeight(type:1), product of:
>>> |            1.1618 = idf(docFreq=315734, numDocs=371197)
>>> |            0.3161 = queryNorm
>>> |          1.1618 = (MATCH) fieldWeight(type:1 in 156296), product of:
>>> |            1.0000 = tf(termFreq(type:1)=1)
>>> |            1.1618 = idf(docFreq=315734, numDocs=371197)
>>> |            1.0000 = fieldNorm(field=type, doc=156296)
>>> |      0.5000 = coord(1/2)
>>> 
>>> So obviously I'm loading the index (since it did match the "type") - but it
>>> seems to be COMPLETELY ignoring the criteria on "search_text".
>>> 
>>> When I run this exact same string in Luke, I get:
>>> |  8.0079 = (MATCH) sum of:
>>> |    7.9578 = (MATCH) sum of:
>>> |      5.4904 = (MATCH) weight(search_text:austell in 156297), product of:
>>> |        0.8074 = queryWeight(search_text:austell), product of:
>>> |          10.8800 = idf(docFreq=18, numDocs=371197)
>>> |          0.0742 = queryNorm
>>> |        6.8000 = (MATCH) fieldWeight(search_text:austell in 156297),
>>> product of:
>>> |          1.0000 = tf(termFreq(search_text:austell)=1)
>>> |          10.8800 = idf(docFreq=18, numDocs=371197)
>>> |          0.6250 = fieldNorm(field=search_text, doc=156297)
>>> |      2.4673 = (MATCH) weight(search_text:ga in 156297), product of:
>>> |        0.5413 = queryWeight(search_text:ga), product of:
>>> |          7.2936 = idf(docFreq=685, numDocs=371197)
>>> |          0.0742 = queryNorm
>>> |        4.5585 = (MATCH) fieldWeight(search_text:ga in 156297), product of:
>>> |          1.0000 = tf(termFreq(search_text:ga)=1)
>>> |          7.2936 = idf(docFreq=685, numDocs=371197)
>>> |          0.6250 = fieldNorm(field=search_text, doc=156297)
>>> |    0.0501 = (MATCH) product of:
>>> |      0.1002 = (MATCH) sum of:
>>> |        0.1002 = (MATCH) weight(type:1 in 156296), product of:
>>> |          0.0862 = queryWeight(type:1), product of:
>>> |            1.1618 = idf(docFreq=315734, numDocs=371197)
>>> |            0.0742 = queryNorm
>>> |          1.1618 = (MATCH) fieldWeight(type:1 in 156296), product of:
>>> |            1.0000 = tf(termFreq(type:1)=1)
>>> |            1.1618 = idf(docFreq=315734, numDocs=371197)
>>> |            1.0000 = fieldNorm(field=type, doc=156296)
>>> |      0.5000 = coord(1/2)
>>> 
>>> Which while clearly looking at the same document ID in the same index is
>>> conversely working perfectly!
>>> 
>>> Does anybody have any idea where I am screwing up?  Thanks!
>>> 
>>> Casey
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 15:34:34 2008
Return-Path: <java-user-return-34294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53797 invoked from network); 2 Jun 2008 15:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 15:34:34 -0000
Received: (qmail 76175 invoked by uid 500); 2 Jun 2008 15:34:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75226 invoked by uid 500); 2 Jun 2008 15:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75215 invoked by uid 99); 2 Jun 2008 15:34:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 08:34:29 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.35] (HELO psmtp.com) (64.18.3.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Jun 2008 15:33:39 +0000
Received: from source ([193.201.197.58]) by exprod8ob118.postini.com ([64.18.7.12]) with SMTP;
	Mon, 02 Jun 2008 08:33:36 PDT
Content-Transfer-Encoding: 7bit
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8C4C6.04C00208"
Subject: BooleanQuery Example
Date: Mon, 2 Jun 2008 16:33:29 +0100
Message-ID: <39F273ED33612448863A19BBC1FBCFA002D10819@ms2.lsc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery Example
Thread-Index: AcjExgH0cSUTEiHrTq+ESm6vwNertQ==
From: <Aamir.Yaseen@globaldatapoint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8C4C6.04C00208
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I am new to Lucene, so asking some basic question.

Is there any example/reference implementation available of Lucene Usage
using BooleanQuery using API instead of QueryParser?

=20

=20

=20

Cheers

Aamir Yaseen=20

=20


=20
This e-mail is confidential and should not be used by anyone who is not =
the original intended recipient. Global DataPoint Limited does not =
accept liability for any statements made which are clearly the sender's =
own and not expressly made on behalf of Global DataPoint Limited. No =
contracts may be concluded on behalf of Global DataPoint Limited by =
means of e-mail communication. Global DataPoint Limited Registered in =
England and Wales with registered number 3739752 Registered Office =
Middlesex House, 34-42 Cleveland Street, London W1T 4LB


------_=_NextPart_001_01C8C4C6.04C00208--

From java-user-return-34295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 15:44:49 2008
Return-Path: <java-user-return-34295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58321 invoked from network); 2 Jun 2008 15:44:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 15:44:49 -0000
Received: (qmail 358 invoked by uid 500); 2 Jun 2008 15:44:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99990 invoked by uid 500); 2 Jun 2008 15:44:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99978 invoked by uid 99); 2 Jun 2008 15:44:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 08:44:45 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 15:43:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K3CCh-0005d3-F1
	for java-user@lucene.apache.org; Mon, 02 Jun 2008 08:44:11 -0700
Message-ID: <17604363.post@talk.nabble.com>
Date: Mon, 2 Jun 2008 08:44:11 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: HitCollector and sorting
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all 

Currently I'm using the search method returning the Hits object. According
to http://wiki.apache.org/lucene-java/ImproveSearchingSpeed one should use a
HitCollector-oriented search method instead. 
But I need another aspect of the "Hits search(...)" method: it's sorting
ability.

Now my code looks like :

    def hits = multiSearcher.search( query, Methods.activeFilter, sort )
    def iter = hits.iterator()
        
    def results = []
    int counter = 0
    
    for( hit in iter ){
      if( range.contains( counter ) && hit.document ){
        results << Methods.bind( hit.document, lucenizedClasses )
      }else if( counter >= upper ) break
      counter++
    }

So, how can I get the same results using the HitCollector? Also it would be
really nice, if you could point me to some examples of using it...

Thanx in advance,
Konstantyn
-- 
View this message in context: http://www.nabble.com/HitCollector-and-sorting-tp17604363p17604363.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 15:47:31 2008
Return-Path: <java-user-return-34296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59157 invoked from network); 2 Jun 2008 15:47:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 15:47:31 -0000
Received: (qmail 6065 invoked by uid 500); 2 Jun 2008 15:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6019 invoked by uid 500); 2 Jun 2008 15:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5986 invoked by uid 99); 2 Jun 2008 15:47:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 08:47:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryan.catambing@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 15:46:38 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1832818tic.11
        for <java-user@lucene.apache.org>; Mon, 02 Jun 2008 08:46:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=kerJEuZ8FFDRo1v4FYV1SYxUEh4HTYQ9pWUGDXgQV/k=;
        b=x98Knq9j94SJkr3HEqHLv9gXYKbXkk9OEI35qav8dPMxBOOHMDnFtcGPEk4p+JuaAfbgHWQVPaeROJA0o6kMQled9tltfMK/Tti9LNCl9LE5KQMdZQQYhdgQPeWH4sg3OzOCSLxx/bfU6Ovv+551KTVPcBhJr0lo0TvWVvC0NI8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Q2kPgVI3cPLPrYCLQfqn3JY6FnVHcYdUPgIfefYLr9tktLNBzg7NrAjLW4S9Vidqhoe9Uf0QViVxrn0PVGWL/0S54ExUG7sDgOrxC4dEQ/X9WjTXE4dnVbNZjFRARXT/h4oMwU5yQrFpuyIPd3yPTdp0psfHnm+S1bz0DmwWwCQ=
Received: by 10.110.33.15 with SMTP id g15mr1422141tig.54.1212421614584;
        Mon, 02 Jun 2008 08:46:54 -0700 (PDT)
Received: by 10.110.5.6 with HTTP; Mon, 2 Jun 2008 08:46:54 -0700 (PDT)
Message-ID: <d1a5acf90806020846g14b99389r5f4bb65a0170b1be@mail.gmail.com>
Date: Mon, 2 Jun 2008 23:46:54 +0800
From: "ryan catambing" <ryan.catambing@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene ignoring query to a field containing single character values
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7297_20781189.1212421614576"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7297_20781189.1212421614576
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,


I am using Lucene-core-2.3.2.

One of the fields that I have indexed with Lucene contains a single
character value which stands for a code.  When I make queries using a
StandardAnalyzer lucene is ignoring queries against the said field when
using the required operator (+), however when trying out the reverse of the
condition using the prohibit operator (-) it works ok.

Below is a sample of the lucene query:

//This does not work. It just ignores the industrial codes and shows
documents with the term toys
+industrialCode:a +businessName:toys

//Trying out the opposite -- this works shows documents not having the
industrial code "a"
-industrialCode:a +businessName:toys

Any enlightenment would be appreciated.

Thanks,

Ryan

------=_Part_7297_20781189.1212421614576--

From java-user-return-34297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 15:59:14 2008
Return-Path: <java-user-return-34297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65183 invoked from network); 2 Jun 2008 15:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 15:59:14 -0000
Received: (qmail 37296 invoked by uid 500); 2 Jun 2008 15:59:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37274 invoked by uid 500); 2 Jun 2008 15:59:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37263 invoked by uid 99); 2 Jun 2008 15:59:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 08:59:10 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [84.17.190.207] (HELO pmx7.bertelsmann.de) (84.17.190.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 15:58:13 +0000
Received: from trustmail_pmx7.bertelsmann.de (localhost [127.0.0.1])
	by pmx7.bertelsmann.de (Postfix) with SMTP id 590EA75034
	for <java-user@lucene.apache.org>; Mon,  2 Jun 2008 17:58:35 +0200 (CEST)
Received: from debmu466.server.arvato-systems.de ([84.17.190.201])
          by trustmail_pmx7.bertelsmann.de (Totemo SMTP Server) with SMTP ID 397
          for <java-user@lucene.apache.org>;
          Mon, 2 Jun 2008 17:58:35 +0200 (CEST)
Received: from pmx1.bertelsmann.de (localhost [127.0.0.1])
	by localhost.bertelsmann.de (Postfix) with ESMTP id 3E9D434DE6
	for <java-user@lucene.apache.org>; Mon,  2 Jun 2008 17:58:35 +0200 (CEST)
Received: from mmx3.bertelsmann.de (unknown [145.228.237.32])
	by pmx1.bertelsmann.de (Postfix) with ESMTP id 3269C34DE1
	for <java-user@lucene.apache.org>; Mon,  2 Jun 2008 17:58:35 +0200 (CEST)
Received: from GTLBMLEXS0016.bagmail.net ([145.228.237.79]) by mmx3.bertelsmann.de with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 2 Jun 2008 17:58:35 +0200
Received: from gtlbmlexs0039.bagmail.net ([145.228.237.87]) by GTLBMLEXS0016.bagmail.net with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 2 Jun 2008 17:58:35 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Lucene ignoring query to a field containing single character values
Date: Mon, 2 Jun 2008 17:58:34 +0200
Message-ID: <05C1595EEB50F64D8E8ED4DAEAD98C4501CB1558@gtlbmlexs0039.bagmail.net>
In-Reply-To: <d1a5acf90806020846g14b99389r5f4bb65a0170b1be@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene ignoring query to a field containing single character values
Thread-Index: AcjEx/iWl71D4E3ARISrHWh7JLiMkwAAEVwA
References: <d1a5acf90806020846g14b99389r5f4bb65a0170b1be@mail.gmail.com>
From: <Stephan.Huth@arvato-mobile.de>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Jun 2008 15:58:35.0136 (UTC) FILETIME=[835BC800:01C8C4C9]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi ryan,

I guess you use the StandardAnalyzer with standard constructor. The =
standard analyzer uses a list of stopwords. And "a" is within this list. =
So if the StandardAnalyzer sees the token "a" he ignores it.

I think a possible Solution would be to use a PerFieldAnalyzerWrapper to =
use a KeywordAnalyzer/SimpleAnalyzer for this field.

Using the standardanalyzer with second query will result in the same =
query like above. Just businessName:toys is used for searching. So the =
result must be the same.

I hope this helps you.

Greetings Stephan

-----Urspr=FCngliche Nachricht-----
Von: ryan catambing [mailto:ryan.catambing@gmail.com]=20
Gesendet: Montag, 2. Juni 2008 17:47
An: java-user@lucene.apache.org
Betreff: Lucene ignoring query to a field containing single character =
values

Hi All,


I am using Lucene-core-2.3.2.

One of the fields that I have indexed with Lucene contains a single
character value which stands for a code.  When I make queries using a
StandardAnalyzer lucene is ignoring queries against the said field when
using the required operator (+), however when trying out the reverse of =
the
condition using the prohibit operator (-) it works ok.

Below is a sample of the lucene query:

//This does not work. It just ignores the industrial codes and shows
documents with the term toys
+industrialCode:a +businessName:toys

//Trying out the opposite -- this works shows documents not having the
industrial code "a"
-industrialCode:a +businessName:toys

Any enlightenment would be appreciated.

Thanks,

Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 02 21:01:08 2008
Return-Path: <java-user-return-34298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15999 invoked from network); 2 Jun 2008 21:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jun 2008 21:01:08 -0000
Received: (qmail 47593 invoked by uid 500); 2 Jun 2008 21:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47570 invoked by uid 500); 2 Jun 2008 21:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47559 invoked by uid 99); 2 Jun 2008 21:01:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 14:01:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 21:00:14 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 4DC5388110
	for <java-user@lucene.apache.org>; Mon,  2 Jun 2008 14:00:30 -0700 (PDT)
Message-Id: <06A66AA3-ADC8-4A22-ADB5-13DBFD5EB212@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <17530428.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: "No tvx file" error
Date: Mon, 2 Jun 2008 17:00:29 -0400
References: <17530428.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

It can be safely ignored (in fact the warning has been removed in  
later versions) so I suspect your other issues are unrelated.

It sounds like you are somehow not properly indexing term vectors, but  
would have to see some code to know for sure.

Big question, what requirement is forcing you to use 1.4.3?


-Grant

On May 29, 2008, at 4:56 AM, Pablo B. wrote:

>
> Hello,
>
> I am writing a code to convert all text files in subdirectories from  
> a given
> path to Arff file for weka. To do so, I am using lucene-1.4.3.jar.  
> The call
> to method writer.add(doc) outputs (only for some text files) the error
> message "No tvx file", were writer is type IndexWriter and doc is type
> Document.
> If I change the name of the files that trigger this message, the  
> error does
> not occur on them but it is output for other files with which it  
> worked
> correctly. i am going crazy!
>
> In some forums I have read it is only a warning message, but I  
> cannot ignore
> it because it does not index those files, so later, in my own code,  
> when I
> call termFreqVector.getTerms() for the failing file, it returns a null
> pointer exception, which does not make sense because the file has  
> text in
> it!
>
> Any one can help?
> Thank you in advanced,
> Pablo.
>
> -- 
> View this message in context: http://www.nabble.com/%22No-tvx-file%22-error-tp17530428p17530428.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 04:46:25 2008
Return-Path: <java-user-return-34299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84803 invoked from network); 3 Jun 2008 04:46:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 04:46:24 -0000
Received: (qmail 29026 invoked by uid 500); 3 Jun 2008 04:46:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28987 invoked by uid 500); 3 Jun 2008 04:46:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28974 invoked by uid 99); 3 Jun 2008 04:46:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 21:46:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 04:45:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1459774rvb.5
        for <java-user@lucene.apache.org>; Mon, 02 Jun 2008 21:45:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=D9tistJcfa/bqYdpOCXwPZ+mgvCh0alMWYNuYPEPm5s=;
        b=dn79HnGzHgRSnHuZQAIjrrSQguTb/Y7asYaTPYHYmTEnrp+Rox8bWN0hzjJ8Q37PI8UttUvHtkMNo2xOJSr7tPs0NMgR4u2RDcaNZCM8kYrLnGYmnUvLl3ZqboP0v7isRCkfw/N37qylv3cApaSvQwA2UiSdiOj8njSlZNUKBZY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=n8k8x9v0s+SZjWDECAiN7YPRxkQCK6IlZ43tLIis8S5tw8+FG9QjRYLMDqAfk+EbYqc6XjspTZV3MvCiaukMb4nbAzSq0yhBwbCTybJMYAZ6+sFEajd4d1ogFp4Xf08lrZU1KYAF/K7Ze+NUc3Ed5qY0WXCLKdOXlBJ4wXkebmY=
Received: by 10.141.141.3 with SMTP id t3mr5482599rvn.52.1212468345471;
        Mon, 02 Jun 2008 21:45:45 -0700 (PDT)
Received: by 10.141.163.6 with HTTP; Mon, 2 Jun 2008 21:45:45 -0700 (PDT)
Message-ID: <52c3ddca0806022145x640b3b4du255aa4de150ac283@mail.gmail.com>
Date: Tue, 3 Jun 2008 06:45:45 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: distributed lucene progress
In-Reply-To: <35384698-7DB7-438C-BD00-D1D3508CA429@theronge.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19331_28457056.1212468345470"
References: <479722.35659.qm@web50312.mail.re2.yahoo.com>
	 <35384698-7DB7-438C-BD00-D1D3508CA429@theronge.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19331_28457056.1212468345470
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

FYI: The Ning's code seems to be part of Hadoop contrib package now.

On Sat, May 31, 2008 at 5:35 AM, Matt Ronge <mronge@theronge.com> wrote:

>
> On May 21, 2008, at 3:19 PM, Otis Gospodnetic wrote:
>
>  No, that's a separate project on SF, IIRC.
>>
>
> I am also interested in distributed lucene. I took a look on Hadoop's wiki
> and found this:
> http://wiki.apache.org/hadoop/DistributedLucene?highlight=%28distributed%29
>
> which leads to many different projects:
>
> - Baily project: http://sourceforge.net/projects/bailey
> - Katta project: http://sourceforge.net/projects/katta
> - Mark Butler's patch: https://issues.apache.org/jira/browse/HADOOP-3394
> - Ning Li's distributed indexing patch:
> https://issues.apache.org/jira/browse/HADOOP-2951
>
> and it seems there is some support in Nutch for distributed searching as
> well.
>
> Does anyone know if these efforts are being consolidated right now? I'd
> like to use and work on distributed lucene, but with so many different
> fronts I'm not sure where to begin.
>
> Any pointers? Where is most working being done? Has anyone used any of this
> code?
> --
> Matt
>
>
>
>>
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>>
>> ----- Original Message ----
>>
>>> From: John Wang <john.wang@gmail.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Wednesday, May 21, 2008 11:46:02 AM
>>> Subject: Re: distributed lucene progress
>>>
>>> I see. So is it then the bailey project?
>>> -John
>>>
>>> On Tue, May 20, 2008 at 9:04 PM, Otis Gospodnetic <
>>> otis_gospodnetic@yahoo.com> wrote:
>>>
>>>  Oh, it very much did.  Check Hadoop Wiki's "Recent Changes", it's there.
>>>>
>>>>
>>>> Otis
>>>> --
>>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>>
>>>>
>>>> ----- Original Message ----
>>>>
>>>>> From: Chris Hostetter
>>>>> To: java-user@lucene.apache.org
>>>>> Sent: Tuesday, May 20, 2008 5:58:08 PM
>>>>> Subject: Re: distributed lucene progress
>>>>>
>>>>> :    What is the current status on the distributed lucene project
>>>>>
>>>> proposed at:
>>>>
>>>>> :
>>>>> : http://www.mail-archive.com/general@lucene.apache.org/msg00338.html
>>>>>
>>>>> I don't think it ever got passed the initial idea stage ... or, if it
>>>>>
>>>> did:
>>>>
>>>>> I haven't heard about it.
>>>>>
>>>>>
>>>>> -Hoss
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://blog.lukas-vlcek.com/

------=_Part_19331_28457056.1212468345470--

From java-user-return-34300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 05:04:39 2008
Return-Path: <java-user-return-34300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89846 invoked from network); 3 Jun 2008 05:04:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 05:04:39 -0000
Received: (qmail 36679 invoked by uid 500); 3 Jun 2008 05:04:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36644 invoked by uid 500); 3 Jun 2008 05:04:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36625 invoked by uid 99); 3 Jun 2008 05:04:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 22:04:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 05:03:47 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1464403rvb.5
        for <java-user@lucene.apache.org>; Mon, 02 Jun 2008 22:04:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Pl0llbcjuTw87v2/IjC6/Z0q77FceNky79LYGuqqEvA=;
        b=NRmSF1fkmK6ludV1rflEGxg3T0otscbtG4ufxLVhyL3O/oQf/TXPMK8qdsdE00QjcHzQNwNiVAlYIHva5/rA5WdwASse4VQkefUse3qSPnXQuaQ+LI3QDt6rXXNw0tz3ckV4Da6RL2vb0dB0ZYYm644yGeJ9L/FsPXcSgjIsffI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=omQVBCeLj6YjkFeoHLUJns1owH1JOnEjy1pFgGoEF/Dtc+RU+LsjOn/shL7cdhiT68jmPmBPNwNdMxG8p1FTqdWLZkbZCXov3EcFhbS6dJfTJFMwmLJZtN+wVLAe7AxVQBGSOZkTHA24EFzafQ2gNizThXB/vbLCTGCjK3MgW24=
Received: by 10.141.96.21 with SMTP id y21mr5483313rvl.132.1212469443752;
        Mon, 02 Jun 2008 22:04:03 -0700 (PDT)
Received: by 10.141.179.14 with HTTP; Mon, 2 Jun 2008 22:04:03 -0700 (PDT)
Message-ID: <d5b3ea330806022204o41467d5ai57ff588e90afc21c@mail.gmail.com>
Date: Tue, 3 Jun 2008 10:34:03 +0530
From: "Sonu Sudhakar" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boolean Query Issue
In-Reply-To: <359a92830806020549v9a82a98sbe30dd1a2e8d5154@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14191_7686963.1212469443753"
References: <d5b3ea330805280444s313e0e86n5948ac73081263c0@mail.gmail.com>
	 <359a92830805280639t947f608o6bf280d131e8b7a9@mail.gmail.com>
	 <d5b3ea330805290319sa68fc9dtf5197ad839a87ecc@mail.gmail.com>
	 <d5b3ea330806012219w18b4c98v9a81ba9daf2b1f2e@mail.gmail.com>
	 <359a92830806020549v9a82a98sbe30dd1a2e8d5154@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14191_7686963.1212469443753
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

This is the code I am using for search.

public void doSearch(String userQuery, int stemFlag, int sortFlag, String[]
sortFileds) throws Exception {

            PerFieldAnalyzerWrapper analyzer;
            if (stemFlag == 1) {
                analyzer = new PerFieldAnalyzerWrapper(new
StemmingAnalyzer());
            } else {
                analyzer = new PerFieldAnalyzerWrapper(new
StandardAnalyzer());
            }

            //Stemming is not applied on country and state fields
            analyzer.addAnalyzer("IS", new StandardAnalyzer());
            analyzer.addAnalyzer("AS", new StandardAnalyzer());
            analyzer.addAnalyzer("IC", new StandardAnalyzer());
            analyzer.addAnalyzer("AC", new StandardAnalyzer());

            this.userQuery = userQuery;

            // Looking for remote indexes
            RemoteLookup rLookup = new RemoteLookup();

            // this will create Searchables object array
            Searchable[] srbl = rLookup.getSearchables();

            pmsearcher = new ParallelMultiSearcher(srbl);

            QueryParser qp = null;
            qp = new QueryParser("SPEC", analyzer);

            query = qp.parse(userQuery);
            //System.out.println(query.toString());

            //creates the sort fields
            sort = new SDFSort().getSort(sortFlag, sortFileds);

            // Search over multiple indexes
            hits = pmsearcher.search(query, sort);

    }

This is not exactly as  my code. But added almost all searching parts.

Thanks,
Sonu

On Mon, Jun 2, 2008 at 6:19 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> You need to include your code I think. This makes no sense on a quick
> look, so unless we see some code it'll be hard to know whether
> we're looking at anything relevant.
>
> Best
> Erick
>
> On Mon, Jun 2, 2008 at 1:19 AM, Sonu Sudhakar <sonusr@gmail.com> wrote:
>
> > Hi,
> >
> > I have done some more analysis on this issue. I think it is related to
> > lucene's default operator.
> > I am getting excat results, when I sets the default operator as 'OR', but
> > facing problem when setting the default operator as 'AND'.
> >
> > The following are the lucene QueryParser outputs for both cases.
> >
> > Query :* TTL:store AND TTL:data OR TTL:variable
> >
> > *1. When lucene default operator is '*OR'
> >
> > *QueryParser output  using toString method: *
> > +TTL:store +TTL:data TTL:variable
> >
> >
> > *2. When lucene default operator is '*AND'
> >
> > *QueryParser output  using toString method:
> > *+TTL:store TTL:data TTL:variable
> >
> > *The output of second case is confusing me.
> >
> > Could anybody please give me an explanation for this behavior?
> >
> > Thanks,
> > Sonu
> >
> > On Thu, May 29, 2008 at 3:49 PM, Sonu Sudhakar <sonusr@gmail.com> wrote:
> >
> > > Erick,
> > >
> > > Thanks for your reply.
> > >
> > > I am working with approximately 1 million documents. They are indexed
> in
> > 4
> > > servers. Each document has multiple fields. I am using
> > ParallelMultiSearcher
> > > for searching purpose.
> > >
> > > I tried a few queries in the title(TTL) field.
> > >
> > > i started with a simple query without boolean operators.
> > >
> > > *1. TTL:data => 3733 results (all matches had "data" in title)*
> > >
> > > Then I tried a second one with AND operator.
> > >
> > > *2. TTL:data AND TTL:store => 19 results*
> > >
> > > I analyzed the results. the results had both "data" and "store" in the
> > > title.
> > >
> > > *I then tried OR operator*
> > >
> > > *3. TTL:data AND TTL:store OR TTL:variable*
> > >
> > > I got 3,733 results., same as the query TTL:data.
> > >
> > > I even tried giving a meaningless query
> > >
> > > TTL:data AND TTL:storettttt OR TTL:variablettttt => 3,733 results (The
> > > results were same as that of TTL:data.)
> > >
> > > TTL:data AND TTL:computer OR TTL:device => 3,733 results (this also
> > showed
> > > the same results as above)
> > >
> > > The same thing repeats for other cases too. The queries below also
> > behaved
> > > the same way.
> > > i.e. -
> > >
> > > 1. TTL:store AND TTL:data OR TTL:variable => 76 results
> > > 2. TTL:store AND TTL:datatttt OR TTL:variabletttt => 76 results
> > > 3. TTL:store AND TTL:computer OR TTL:device => 76 results
> > >
> > >
> > > 1. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
> > > 2. TTL:variable AND TTL:datatttt OR  TTL:storetttt => 1,496 results
> > > 3. TTL:variable AND TTL:computer OR  TTL:device => 1,496 results
> > >
> > > I hope you have a clearer picture of my issue now.
> > >
> > > Thanks,
> > > Sonu
> > >
> > >
> > > On Wed, May 28, 2008 at 7:09 PM, Erick Erickson <
> erickerickson@gmail.com
> > >
> > > wrote:
> > >
> > >> It's unclear what you *should* expect. How is your data
> > >> distributed?
> > >>
> > >> In other words, how many documents do you have? In this example,
> > >> for instance,
> > >> 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
> > >> it considered the TTL:data part only.
> > >>
> > >> it's perfecily reasonable if every document that had "variable" in the
> > >> field *also* has "data" and "store" in the field. So your numbers
> > >> don't give us much to work with.....
> > >>
> > >> Remember, though, that Lucene syntax isn't a pure boolean syntax. See
> > >>
> > >> http://wiki.apache.org/lucene-java/BooleanQuerySyntax
> > >>
> > >> And when in doubt parenthesize <G>...
> > >>
> > >> Best
> > >> Erick
> > >>
> > >> On Wed, May 28, 2008 at 7:44 AM, Sonu Sudhakar <sonusr@gmail.com>
> > wrote:
> > >>
> > >> > Hi,
> > >> >
> > >> > I have some issue with boolean queries.
> > >> >
> > >> > I am using Lucene-core-2.3.1.
> > >> >
> > >> > I have done test on boolean query with 3 terms (data, store,
> variable)
> > >> in
> > >> > my
> > >> > TTL field. The TTL field is indexed and searched using
> > StandardAnalyzer.
> > >> >
> > >> > The three terms when searched individually gave the following result
> > >> >
> > >> > 1. TTL:data  => 3,733 results
> > >> > 2. TTL:store  => 76 results
> > >> > 3. TTL:variable  => 1,496 results
> > >> >
> > >> > But found issue when combining these terms with boolean operators.
> > >> >
> > >> > e.g.
> > >> > 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
> > >> > it considered the TTL:data part only.
> > >> >
> > >> > 2. TTL:store AND TTL:data OR TTL:variable => 76 results
> > >> > it considered  the TTL:store part only.
> > >> >
> > >> > 3. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
> > >> > it considered  the TTL:variable part only.
> > >> >
> > >> > But I am getting correct result when combining terms with 'AND'
> > >> operator. I
> > >> > think the issue is with 'OR' operator.
> > >> >
> > >> >
> > >> > Could anybody give an explanation for this behavior of lucene?
> > >> > Could you give suggestions to rectify this?
> > >> >
> > >> > Thanks,
> > >> > Sonu
> > >> >
> > >>
> > >
> > >
> >
>

------=_Part_14191_7686963.1212469443753--

From java-user-return-34301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 05:31:19 2008
Return-Path: <java-user-return-34301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 440 invoked from network); 3 Jun 2008 05:31:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 05:31:19 -0000
Received: (qmail 49846 invoked by uid 500); 3 Jun 2008 05:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49812 invoked by uid 500); 3 Jun 2008 05:31:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49788 invoked by uid 99); 3 Jun 2008 05:31:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 22:31:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 05:30:24 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1472420rvb.5
        for <java-user@lucene.apache.org>; Mon, 02 Jun 2008 22:30:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=59p/rMz6qsmHtGjv56GLIXw27oeSk8e7PQWI0ipi+dw=;
        b=qs9Exhg7fdzUkK5pfFyLEtz5N4dlQwPMaJDpegbvgwB1hWFuSLdGFIDBtVpAB3+FOuR9kEvr8R33AGYnk8b4lKw//JuYe1KhM85soVY/S7H9ra+WG6L+Y1RSNrbtpiwTtzPEmb4fXab/k95bPnqCet1pgrhreJfCINPOMQIUsO4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UJlp5DVx1/7RanR8Ok/la3mJrLmzBYqhYUNp7bK6pnqXWjDjjCcX4JxBQqQd0yZeLxlxmK8YuDMtML07Ln5vVI9XF5/j9t+USTpiZ6rCTgEanoc+t4GWAT/TPh9wju1FnaVXReQC2+ojGYuW29EGYf2IWOUxxX0WdTGbnHBc3mE=
Received: by 10.140.191.14 with SMTP id o14mr5504622rvf.130.1212471041630;
        Mon, 02 Jun 2008 22:30:41 -0700 (PDT)
Received: by 10.141.179.14 with HTTP; Mon, 2 Jun 2008 22:30:41 -0700 (PDT)
Message-ID: <d5b3ea330806022230ncc26eedwa2dc918ddbb52ca0@mail.gmail.com>
Date: Tue, 3 Jun 2008 11:00:41 +0530
From: "Sonu Sudhakar" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boolean Query Issue
In-Reply-To: <d5b3ea330806022204o41467d5ai57ff588e90afc21c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14222_20795998.1212471041604"
References: <d5b3ea330805280444s313e0e86n5948ac73081263c0@mail.gmail.com>
	 <359a92830805280639t947f608o6bf280d131e8b7a9@mail.gmail.com>
	 <d5b3ea330805290319sa68fc9dtf5197ad839a87ecc@mail.gmail.com>
	 <d5b3ea330806012219w18b4c98v9a81ba9daf2b1f2e@mail.gmail.com>
	 <359a92830806020549v9a82a98sbe30dd1a2e8d5154@mail.gmail.com>
	 <d5b3ea330806022204o41467d5ai57ff588e90afc21c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14222_20795998.1212471041604
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry, The first mail I forgot to add the line for setting default
QueryParser operator. I have Included that too.


> This is the code I am using for search.
>
> public void doSearch(String userQuery, int stemFlag, int sortFlag, String[]
> sortFileds) throws Exception {
>
>             PerFieldAnalyzerWrapper analyzer;
>             if (stemFlag == 1) {
>                 analyzer = new PerFieldAnalyzerWrapper(new
> StemmingAnalyzer());
>             } else {
>                 analyzer = new PerFieldAnalyzerWrapper(new
> StandardAnalyzer());
>             }
>
>             //Stemming is not applied on country and state fields
>             analyzer.addAnalyzer("IS", new StandardAnalyzer());
>             analyzer.addAnalyzer("AS", new StandardAnalyzer());
>             analyzer.addAnalyzer("IC", new StandardAnalyzer());
>             analyzer.addAnalyzer("AC", new StandardAnalyzer());
>
>             this.userQuery = userQuery;
>
>             // Looking for remote indexes
>             RemoteLookup rLookup = new RemoteLookup();
>
>             // this will create Searchables object array
>             Searchable[] srbl = rLookup.getSearchables();
>
>             pmsearcher = new ParallelMultiSearcher(srbl);
>
>             QueryParser qp = null;
>             qp = new QueryParser("SPEC", analyzer);
>             qp.setDefaultOperator(AND_OPERATOR);



>
>             query = qp.parse(userQuery);
>             //System.out.println(query.toString());
>
>             //creates the sort fields
>             sort = new SDFSort().getSort(sortFlag, sortFileds);
>
>             // Search over multiple indexes
>             hits = pmsearcher.search(query, sort);
>
>     }
>
> This is not exactly as  my code. But added almost all searching parts.
>
> Thanks,
> Sonu
>
>
> On Mon, Jun 2, 2008 at 6:19 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>
>> You need to include your code I think. This makes no sense on a quick
>> look, so unless we see some code it'll be hard to know whether
>> we're looking at anything relevant.
>>
>> Best
>> Erick
>>
>> On Mon, Jun 2, 2008 at 1:19 AM, Sonu Sudhakar <sonusr@gmail.com> wrote:
>>
>> > Hi,
>> >
>> > I have done some more analysis on this issue. I think it is related to
>> > lucene's default operator.
>> > I am getting excat results, when I sets the default operator as 'OR',
>> but
>> > facing problem when setting the default operator as 'AND'.
>> >
>> > The following are the lucene QueryParser outputs for both cases.
>> >
>> > Query :* TTL:store AND TTL:data OR TTL:variable
>> >
>> > *1. When lucene default operator is '*OR'
>> >
>> > *QueryParser output  using toString method: *
>> > +TTL:store +TTL:data TTL:variable
>> >
>> >
>> > *2. When lucene default operator is '*AND'
>> >
>> > *QueryParser output  using toString method:
>> > *+TTL:store TTL:data TTL:variable
>> >
>> > *The output of second case is confusing me.
>> >
>> > Could anybody please give me an explanation for this behavior?
>> >
>> > Thanks,
>> > Sonu
>> >
>> > On Thu, May 29, 2008 at 3:49 PM, Sonu Sudhakar <sonusr@gmail.com>
>> wrote:
>> >
>> > > Erick,
>> > >
>> > > Thanks for your reply.
>> > >
>> > > I am working with approximately 1 million documents. They are indexed
>> in
>> > 4
>> > > servers. Each document has multiple fields. I am using
>> > ParallelMultiSearcher
>> > > for searching purpose.
>> > >
>> > > I tried a few queries in the title(TTL) field.
>> > >
>> > > i started with a simple query without boolean operators.
>> > >
>> > > *1. TTL:data => 3733 results (all matches had "data" in title)*
>> > >
>> > > Then I tried a second one with AND operator.
>> > >
>> > > *2. TTL:data AND TTL:store => 19 results*
>> > >
>> > > I analyzed the results. the results had both "data" and "store" in the
>> > > title.
>> > >
>> > > *I then tried OR operator*
>> > >
>> > > *3. TTL:data AND TTL:store OR TTL:variable*
>> > >
>> > > I got 3,733 results., same as the query TTL:data.
>> > >
>> > > I even tried giving a meaningless query
>> > >
>> > > TTL:data AND TTL:storettttt OR TTL:variablettttt => 3,733 results (The
>> > > results were same as that of TTL:data.)
>> > >
>> > > TTL:data AND TTL:computer OR TTL:device => 3,733 results (this also
>> > showed
>> > > the same results as above)
>> > >
>> > > The same thing repeats for other cases too. The queries below also
>> > behaved
>> > > the same way.
>> > > i.e. -
>> > >
>> > > 1. TTL:store AND TTL:data OR TTL:variable => 76 results
>> > > 2. TTL:store AND TTL:datatttt OR TTL:variabletttt => 76 results
>> > > 3. TTL:store AND TTL:computer OR TTL:device => 76 results
>> > >
>> > >
>> > > 1. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
>> > > 2. TTL:variable AND TTL:datatttt OR  TTL:storetttt => 1,496 results
>> > > 3. TTL:variable AND TTL:computer OR  TTL:device => 1,496 results
>> > >
>> > > I hope you have a clearer picture of my issue now.
>> > >
>> > > Thanks,
>> > > Sonu
>> > >
>> > >
>> > > On Wed, May 28, 2008 at 7:09 PM, Erick Erickson <
>> erickerickson@gmail.com
>> > >
>> > > wrote:
>> > >
>> > >> It's unclear what you *should* expect. How is your data
>> > >> distributed?
>> > >>
>> > >> In other words, how many documents do you have? In this example,
>> > >> for instance,
>> > >> 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
>> > >> it considered the TTL:data part only.
>> > >>
>> > >> it's perfecily reasonable if every document that had "variable" in
>> the
>> > >> field *also* has "data" and "store" in the field. So your numbers
>> > >> don't give us much to work with.....
>> > >>
>> > >> Remember, though, that Lucene syntax isn't a pure boolean syntax. See
>> > >>
>> > >> http://wiki.apache.org/lucene-java/BooleanQuerySyntax
>> > >>
>> > >> And when in doubt parenthesize <G>...
>> > >>
>> > >> Best
>> > >> Erick
>> > >>
>> > >> On Wed, May 28, 2008 at 7:44 AM, Sonu Sudhakar <sonusr@gmail.com>
>> > wrote:
>> > >>
>> > >> > Hi,
>> > >> >
>> > >> > I have some issue with boolean queries.
>> > >> >
>> > >> > I am using Lucene-core-2.3.1.
>> > >> >
>> > >> > I have done test on boolean query with 3 terms (data, store,
>> variable)
>> > >> in
>> > >> > my
>> > >> > TTL field. The TTL field is indexed and searched using
>> > StandardAnalyzer.
>> > >> >
>> > >> > The three terms when searched individually gave the following
>> result
>> > >> >
>> > >> > 1. TTL:data  => 3,733 results
>> > >> > 2. TTL:store  => 76 results
>> > >> > 3. TTL:variable  => 1,496 results
>> > >> >
>> > >> > But found issue when combining these terms with boolean operators.
>> > >> >
>> > >> > e.g.
>> > >> > 1. TTL:data AND TTL:store OR TTL:variable => 3,733 results
>> > >> > it considered the TTL:data part only.
>> > >> >
>> > >> > 2. TTL:store AND TTL:data OR TTL:variable => 76 results
>> > >> > it considered  the TTL:store part only.
>> > >> >
>> > >> > 3. TTL:variable AND TTL:data OR  TTL:store => 1,496 results
>> > >> > it considered  the TTL:variable part only.
>> > >> >
>> > >> > But I am getting correct result when combining terms with 'AND'
>> > >> operator. I
>> > >> > think the issue is with 'OR' operator.
>> > >> >
>> > >> >
>> > >> > Could anybody give an explanation for this behavior of lucene?
>> > >> > Could you give suggestions to rectify this?
>> > >> >
>> > >> > Thanks,
>> > >> > Sonu
>> > >> >
>> > >>
>> > >
>> > >
>> >
>>
>
>

------=_Part_14222_20795998.1212471041604--

From java-user-return-34302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 05:48:50 2008
Return-Path: <java-user-return-34302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6970 invoked from network); 3 Jun 2008 05:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 05:48:49 -0000
Received: (qmail 62941 invoked by uid 500); 3 Jun 2008 05:48:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62911 invoked by uid 500); 3 Jun 2008 05:48:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62900 invoked by uid 99); 3 Jun 2008 05:48:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Jun 2008 22:48:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 05:47:47 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 7B7F671C276; Mon,  2 Jun 2008 22:48:09 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6AF7B71C267
	for <java-user@lucene.apache.org>; Mon,  2 Jun 2008 22:48:09 -0700 (PDT)
Date: Mon, 2 Jun 2008 22:48:09 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Lucene Web Service - Client Program
In-Reply-To: <17565662.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0806022243000.6117@radix.cryptio.net>
References: <17565662.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: We are hosting Lucene as a web service (following the instructions provided
: at www.lucene-ws.net) where I have provided the information regarding the
: index directory and stuff and started lucene.war as a webservice.

: However, there is not enough information available on their website for a
: newbie like me to be able to figure this out.
: 
: Any pointers will be very helpful.

Have you considered contacting the dicussion group for lucene-ws.net as 
mentioned on their "About" page?

http://www.lucene-ws.net/about.html
http://groups.google.ca/group/lucene-ws/



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 07:29:08 2008
Return-Path: <java-user-return-34303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42281 invoked from network); 3 Jun 2008 07:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 07:29:08 -0000
Received: (qmail 42216 invoked by uid 500); 3 Jun 2008 07:29:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42182 invoked by uid 500); 3 Jun 2008 07:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42171 invoked by uid 99); 3 Jun 2008 07:29:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 00:29:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryan.catambing@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 07:28:14 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1997403tic.11
        for <java-user@lucene.apache.org>; Tue, 03 Jun 2008 00:28:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=WoFsC+2dOe78e9IG9OYRxXZ3kxfvC/US9azhCIlDZZg=;
        b=foERXxZfS1VRRCrZFNTRZhqndLTK8T44XNDu0TAhCTVigiOTCaUQJ9tjCjby++zMK+zX/O/zsS7q8OzlJmRBXtYB0roLRchRsoUn0NJU4TvD6owx9/uHgkFQTdcOuILBzk+YUcFqiWmqkMcKo5VmVYvMrxbPmBT+NrOZDoq/NWk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dAqVOC01+6UJyoLffMbA29chtDNG5Q5kS4s/CDIU4AX5ss1nf9oEQMIXyS63GQqXAoUKz+tSS8nbeEw/t9Nen+pxTXudojEJsAzXOgXNdfaZ934HM42OJETKzAGymg5adeETxrzup9KnKXdv2BcuZ1mm727z9eG+uQDvx4rvn9Q=
Received: by 10.110.15.19 with SMTP id 19mr1595505tio.42.1212478110680;
        Tue, 03 Jun 2008 00:28:30 -0700 (PDT)
Received: by 10.110.5.6 with HTTP; Tue, 3 Jun 2008 00:28:30 -0700 (PDT)
Message-ID: <d1a5acf90806030028mcb77a55y49578b8ccdb2ac9c@mail.gmail.com>
Date: Tue, 3 Jun 2008 15:28:30 +0800
From: "ryan catambing" <ryan.catambing@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene ignoring query to a field containing single character values
In-Reply-To: <05C1595EEB50F64D8E8ED4DAEAD98C4501CB1558@gtlbmlexs0039.bagmail.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_149_16972138.1212478110694"
References: <d1a5acf90806020846g14b99389r5f4bb65a0170b1be@mail.gmail.com>
	 <05C1595EEB50F64D8E8ED4DAEAD98C4501CB1558@gtlbmlexs0039.bagmail.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_149_16972138.1212478110694
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Stephan,

Thank you for the feedback.  I followed your suggestion and it did the job.

Thanks,

Ryan


On Mon, Jun 2, 2008 at 11:58 PM, <Stephan.Huth@arvato-mobile.de> wrote:

> Hi ryan,
>
> I guess you use the StandardAnalyzer with standard constructor. The
> standard analyzer uses a list of stopwords. And "a" is within this list. =
So
> if the StandardAnalyzer sees the token "a" he ignores it.
>
> I think a possible Solution would be to use a PerFieldAnalyzerWrapper to
> use a KeywordAnalyzer/SimpleAnalyzer for this field.
>
> Using the standardanalyzer with second query will result in the same quer=
y
> like above. Just businessName:toys is used for searching. So the result m=
ust
> be the same.
>
> I hope this helps you.
>
> Greetings Stephan
>
> -----Urspr=FCngliche Nachricht-----
> Von: ryan catambing [mailto:ryan.catambing@gmail.com]
> Gesendet: Montag, 2. Juni 2008 17:47
> An: java-user@lucene.apache.org
> Betreff: Lucene ignoring query to a field containing single character
> values
>
> Hi All,
>
>
> I am using Lucene-core-2.3.2.
>
> One of the fields that I have indexed with Lucene contains a single
> character value which stands for a code.  When I make queries using a
> StandardAnalyzer lucene is ignoring queries against the said field when
> using the required operator (+), however when trying out the reverse of t=
he
> condition using the prohibit operator (-) it works ok.
>
> Below is a sample of the lucene query:
>
> //This does not work. It just ignores the industrial codes and shows
> documents with the term toys
> +industrialCode:a +businessName:toys
>
> //Trying out the opposite -- this works shows documents not having the
> industrial code "a"
> -industrialCode:a +businessName:toys
>
> Any enlightenment would be appreciated.
>
> Thanks,
>
> Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_149_16972138.1212478110694--

From java-user-return-34304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 09:07:37 2008
Return-Path: <java-user-return-34304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82368 invoked from network); 3 Jun 2008 09:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 09:07:36 -0000
Received: (qmail 80718 invoked by uid 500); 3 Jun 2008 09:07:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80690 invoked by uid 500); 3 Jun 2008 09:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 48851 invoked by uid 99); 2 Jun 2008 23:41:24 -0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Date: Tue, 3 Jun 2008 00:40:52 +0100
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Typical Indexing performance
Message-ID: <20080602234052.GB50904@thegestalt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.16 (2007-06-09)
Sender: Simon Wistow <simon@bacchus.thegestalt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I know this is one of those "How long is a piece of string?" questions 
but I'm curious as to the order of magnitude of indexing performance.

http://lucene.apache.org/java/docs/benchmarks.html

seems to indicate about 100-120 docs/s is pretty good for average sized 
documents (say, an email or something) or is that ludicrously out of 
date for 2.3.x ?

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 09:23:55 2008
Return-Path: <java-user-return-34305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87177 invoked from network); 3 Jun 2008 09:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 09:23:52 -0000
Received: (qmail 4885 invoked by uid 500); 3 Jun 2008 09:23:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4798 invoked by uid 500); 3 Jun 2008 09:23:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4787 invoked by uid 99); 3 Jun 2008 09:23:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 02:23:48 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.35] (HELO psmtp.com) (64.18.3.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Jun 2008 09:22:52 +0000
Received: from source ([193.201.197.58]) by exprod8ob118.postini.com ([64.18.7.12]) with SMTP;
	Tue, 03 Jun 2008 02:23:10 PDT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BooleanQuery Example
Date: Tue, 3 Jun 2008 10:23:05 +0100
Message-ID: <39F273ED33612448863A19BBC1FBCFA002D1085A@ms2.lsc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery Example
Thread-Index: AcjExgH0cSUTEiHrTq+ESm6vwNertQAlM2wg
References: <39F273ED33612448863A19BBC1FBCFA002D10819@ms2.lsc.net>
From: <Aamir.Yaseen@globaldatapoint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,
Sorry for bothering again,

I am referring Lucene Documentation at
http://lucene.apache.org/java/docs/queryparsersyntax.html=20
that suggests=20
>> If you are programmatically generating a query string and then
parsing it with the query parser then you >>should seriously consider
building your queries directly with the query API. In other words, the
query parser >>is designed for human-entered text, not for
program-generated text.

Is there any sample implementation of Lucene Implementation of
BooleanQuery using API instead of QueryParser?



Cheers
Aamir Yaseen



-----Original Message-----
From: Aamir.Yaseen@globaldatapoint.com
[mailto:Aamir.Yaseen@globaldatapoint.com]=20
Sent: 02 June 2008 04:33 PM
To: java-user@lucene.apache.org
Subject: BooleanQuery Example

Hi,

I am new to Lucene, so asking some basic question.

Is there any example/reference implementation available of Lucene Usage
using BooleanQuery using API instead of QueryParser?

=20

=20

=20

Cheers

Aamir Yaseen=20

=20


=20
This e-mail is confidential and should not be used by anyone who is not
the original intended recipient. Global DataPoint Limited does not
accept liability for any statements made which are clearly the sender's
own and not expressly made on behalf of Global DataPoint Limited. No
contracts may be concluded on behalf of Global DataPoint Limited by
means of e-mail communication. Global DataPoint Limited Registered in
England and Wales with registered number 3739752 Registered Office
Middlesex House, 34-42 Cleveland Street, London W1T 4LB


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 10:04:55 2008
Return-Path: <java-user-return-34306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 516 invoked from network); 3 Jun 2008 10:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 10:04:55 -0000
Received: (qmail 63560 invoked by uid 500); 3 Jun 2008 10:04:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63173 invoked by uid 500); 3 Jun 2008 10:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63161 invoked by uid 99); 3 Jun 2008 10:04:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 03:04:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 10:04:01 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1580772rvb.5
        for <java-user@lucene.apache.org>; Tue, 03 Jun 2008 03:04:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=6wKWBj9mxum8jGxfMueg0Z5obq9xcKBpOf0/jIldJps=;
        b=IN+ka+ehWb9iOv1CB4su+uKjSNMZYyr2tEY6JNzATZ4GeQluFZjeIlfW0wQwUgbIu13Q04VxnaysRGMTbk+NJNhwxYZ40ixSM0TJBn/uIdA9REHQ1I0Jia22VMTc7X/5dQO6rGXWMsR6KmK7rQoroURGZ4jSzJmw0DwiixxMmhI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oFxjGplejnferoFPxs3ElsCP8t9pNcEbDo4hFHtiO3YuVfbsS1Ic1Huc3Hr1oNFe4P/M5wa+93cZ6JVmYfHOBcYftNMgk8JKLwfsUiiWykrDeO39snuXNDTG+w9ZESo2tvm+Xq80A9uxIUYfYw7faep4Q86IeKxbdS+cEtuUF74=
Received: by 10.141.129.14 with SMTP id g14mr4763950rvn.50.1212487457971;
        Tue, 03 Jun 2008 03:04:17 -0700 (PDT)
Received: by 10.141.115.19 with HTTP; Tue, 3 Jun 2008 03:04:17 -0700 (PDT)
Message-ID: <8c4e68610806030304k16e632dev9436292101542b6@mail.gmail.com>
Date: Tue, 3 Jun 2008 11:04:17 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery Example
In-Reply-To: <39F273ED33612448863A19BBC1FBCFA002D1085A@ms2.lsc.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <39F273ED33612448863A19BBC1FBCFA002D10819@ms2.lsc.net>
	 <39F273ED33612448863A19BBC1FBCFA002D1085A@ms2.lsc.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


It's pretty straightforward.  Create a BooleanQuery and add other
queries to it e.g.

BooleanQuery bq = new BooleanQuery();
TermQuery tq = new TermQuery(new Term(k, v));
RangeQuery rq = new RangeQuery(new Term(k1, v0),
			       new Term(k1, v1),
			       true);
...
bq.add(tq, BooleanClause.Occur.MUST);
bq.add(rq, BooleanClause.Occur.SHOULD);
...
searcher.search(bq, ...);


You can probably find other examples via Google or in the lucene unit
tests, or best of all, Lucene In Action section 3.4.


--
Ian.


On Tue, Jun 3, 2008 at 10:23 AM,  <Aamir.Yaseen@globaldatapoint.com> wrote:
> Hi all,
> Sorry for bothering again,
>
> I am referring Lucene Documentation at
> http://lucene.apache.org/java/docs/queryparsersyntax.html
> that suggests
>>> If you are programmatically generating a query string and then
> parsing it with the query parser then you >>should seriously consider
> building your queries directly with the query API. In other words, the
> query parser >>is designed for human-entered text, not for
> program-generated text.
>
> Is there any sample implementation of Lucene Implementation of
> BooleanQuery using API instead of QueryParser?
>
>
>
> Cheers
> Aamir Yaseen
>
>
>
> -----Original Message-----
> From: Aamir.Yaseen@globaldatapoint.com
> [mailto:Aamir.Yaseen@globaldatapoint.com]
> Sent: 02 June 2008 04:33 PM
> To: java-user@lucene.apache.org
> Subject: BooleanQuery Example
>
> Hi,
>
> I am new to Lucene, so asking some basic question.
>
> Is there any example/reference implementation available of Lucene Usage
> using BooleanQuery using API instead of QueryParser?
>
>
>
>
>
>
>
> Cheers
>
> Aamir Yaseen

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 12:28:27 2008
Return-Path: <java-user-return-34307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52754 invoked from network); 3 Jun 2008 12:28:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 12:28:26 -0000
Received: (qmail 48502 invoked by uid 500); 3 Jun 2008 12:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48469 invoked by uid 500); 3 Jun 2008 12:28:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48458 invoked by uid 99); 3 Jun 2008 12:28:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 05:28:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 12:27:23 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id F1C1EB6AED
	for <java-user@lucene.apache.org>; Tue,  3 Jun 2008 05:27:43 -0700 (PDT)
Message-Id: <C9BE8C35-38AB-483C-8256-2D7152BB4060@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20080602234052.GB50904@thegestalt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Typical Indexing performance
Date: Tue, 3 Jun 2008 08:27:42 -0400
References: <20080602234052.GB50904@thegestalt.org>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Of course it depends on analysis, etc., but my experience has been at  
least 2x faster, if not up to 4-5 times depending on the docs, etc.   
You can use the contrib/benchmark package to try for yourself, of  
course!

On Jun 2, 2008, at 7:40 PM, Simon Wistow wrote:

> I know this is one of those "How long is a piece of string?" questions
> but I'm curious as to the order of magnitude of indexing performance.
>
> http://lucene.apache.org/java/docs/benchmarks.html
>
> seems to indicate about 100-120 docs/s is pretty good for average  
> sized
> documents (say, an email or something) or is that ludicrously out of
> date for 2.3.x ?
>
> Simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 19:42:50 2008
Return-Path: <java-user-return-34308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35117 invoked from network); 3 Jun 2008 19:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 19:42:50 -0000
Received: (qmail 80870 invoked by uid 500); 3 Jun 2008 19:42:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80835 invoked by uid 500); 3 Jun 2008 19:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80824 invoked by uid 99); 3 Jun 2008 19:42:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 12:42:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Jun 2008 19:41:54 +0000
Received: (qmail 57630 invoked by uid 60001); 3 Jun 2008 19:42:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=SmMhmf9qXDAzL7QrFNfOEeLdfA+Cc4Ei1IZW/LRW2oJjdXavYzFFmOd8OJnB/QHAcoYdnYupfXi1+6mk5mQ8W7p17cxald7MMdaS1wEWEJmmnDOK5xn4EMFG2aDvvsDKxP0OLTDLpw8si2ImXNXGhsOFDNS8k0pOFYmDbfw5wD4=;
Received: from [72.231.9.236] by web50302.mail.re2.yahoo.com via HTTP; Tue, 03 Jun 2008 12:42:09 PDT
X-Mailer: YahooMailRC/975.42 YahooMailWebService/0.7.199
Date: Tue, 3 Jun 2008 12:42:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Typical Indexing performance
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <411438.57046.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There i really no "typical".  I'm playing with Hadoop (HDFS) and Solr at the moment, for example, and I'm seeing indexing rate of cca 70 docs/second.  However, the bottleneck there is not indexing, it is reading data from HDFS (over the network).


I've also seen 500+ docs/second.

It depends on many factors:
how fast reading your data source is, how complex your analysis is, the size of documents and number of fields, whether fields are stored or only indexed, the IndexWriter settings for segment merging and memory usage, of course, there is hardware, etc.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Simon Wistow <simon@thegestalt.org>
> To: Lucene <java-user@lucene.apache.org>
> Sent: Monday, June 2, 2008 7:40:52 PM
> Subject: Typical Indexing performance
> 
> I know this is one of those "How long is a piece of string?" questions 
> but I'm curious as to the order of magnitude of indexing performance.
> 
> http://lucene.apache.org/java/docs/benchmarks.html
> 
> seems to indicate about 100-120 docs/s is pretty good for average sized 
> documents (say, an email or something) or is that ludicrously out of 
> date for 2.3.x ?
> 
> Simon
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 19:51:47 2008
Return-Path: <java-user-return-34309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37801 invoked from network); 3 Jun 2008 19:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 19:51:46 -0000
Received: (qmail 94069 invoked by uid 500); 3 Jun 2008 19:51:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94037 invoked by uid 500); 3 Jun 2008 19:51:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94026 invoked by uid 99); 3 Jun 2008 19:51:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 12:51:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 19:50:55 +0000
Received: by wa-out-1112.google.com with SMTP id l24so7348229waf.11
        for <java-user@lucene.apache.org>; Tue, 03 Jun 2008 12:51:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=9qoam+uEbEUQW6UVzBj9d9/V6frWX2TNAGkDzlhP3tE=;
        b=j1qrVQyR6xT8n5n7TVyvv0RLsvPIakVfFa3ttITUpob4GzkrQA4aMZUOadqRj9e6laNtwfkSgb3fu8rKU/tWeXYOPL8eFWxHaAI6LDCM+5K0YtB2SIbA2jkqiMjXVa5u4jlobhkmMAnqCk95IMvyMcbPoaswqwz8ZPM1ywVp8hA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=AjbTfMvkyA10R0PM/X3XHvfG0k5qkmyTmc7k5DqBFYEfxj3f4uF2Y2XEp+mAlhZ0qUxk6K23NCdHke+ge99u1c9Cb87IIXgRuKcnJY3M2Bw0CMjTIhe3iM6Y2T5H6sCRuzFASACBQvlGjOK/eTO8HJYMItVqdsPD6KpZCprZWec=
Received: by 10.115.77.3 with SMTP id e3mr6666188wal.43.1212522672380;
        Tue, 03 Jun 2008 12:51:12 -0700 (PDT)
Received: by 10.115.95.8 with HTTP; Tue, 3 Jun 2008 12:51:12 -0700 (PDT)
Message-ID: <9d2777b60806031251h8f6e20fn15f2adab1e02abea@mail.gmail.com>
Date: Tue, 3 Jun 2008 16:51:12 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Question about indexing (BrazilianAnalyzer)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4341_30378097.1212522672384"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4341_30378097.1212522672384
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello there! I'm indexing documents using the BrazilianAnalyzer, and I've
noticed that many words are not being indexed. I store and index the entire
doc (I'm doing this in order to present the fragments on the results, don't
know if its the best way, mostly on large docs, any ideas?). Well using luk=
e
to check the index I open the stored doc, and its contents contains 17
occurrences of the word "heran=E7a" for instance. But, there's no term for
this word or it stemm version: "heranc", so searching for this word would
not return a result for this document.

I'm pretty sure I'm missing something on the indexing process:


try {
            doc.add(new
Field("contents",docText,Field.Store.YES,Field.Index.TOKENIZED,Field.TermVe=
ctor.YES));
            IndexWriter writer =3D new
IndexWriter("/java/lucene/portal/cms",new BrazilianAnalyzer()); // gotta
improve this latter
            writer.addDocument(doc);
            writer.close();
        }


So, why would these word (and others) not being indexed?

Regards
--=20
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_4341_30378097.1212522672384--

From java-user-return-34310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 19:57:44 2008
Return-Path: <java-user-return-34310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58662 invoked from network); 3 Jun 2008 19:57:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 19:57:44 -0000
Received: (qmail 4289 invoked by uid 500); 3 Jun 2008 19:57:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4250 invoked by uid 500); 3 Jun 2008 19:57:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4239 invoked by uid 99); 3 Jun 2008 19:57:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 12:57:40 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Jun 2008 19:56:48 +0000
Received: by ti-out-0910.google.com with SMTP id b8so2226499tic.11
        for <java-user@lucene.apache.org>; Tue, 03 Jun 2008 12:57:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=ItwJuDN7JdxqPVY2zpN+bVUGb49A96v/bT0U9dxtvPk=;
        b=Lcvdq9ZofhR0LzZxRx9ufVHlbTf1AQxzX6Um4XT3v6rn7Iyq4go1rOvUN8dM26W0DcR4UMTkqj2tABMG8yFdYL5cxlbMJaU4WKwavtaoz5EKup5OtmZav433Z02mYyIXuHJ3PmVO3v7S+4Ksmu6JUYAn05j4I36kYO4QhGrMVbc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cvpzZXcu6WE8ile5sDST5GkffHrzs5CH57/gkOdKK082JLAASncK/GhwoaKvZwzWQdLPIMSJF582Cd8dMSzR82OxU+JUOT7k4a/cWvQ3yjl6v2HTfqXljtAD/8k3p7DmUx92Iwwt34pOy86oMT/fZc2M79wSsgYMfi9WHRP48LQ=
Received: by 10.151.45.6 with SMTP id x6mr9647630ybj.163.1212523022856;
        Tue, 03 Jun 2008 12:57:02 -0700 (PDT)
Received: by 10.151.99.7 with HTTP; Tue, 3 Jun 2008 12:57:02 -0700 (PDT)
Message-ID: <126142c0806031257s72576c48nca1c38805cc8d932@mail.gmail.com>
Date: Tue, 3 Jun 2008 16:57:02 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Typical Indexing performance
In-Reply-To: <411438.57046.qm@web50302.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <411438.57046.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi:
  Here my latest testing of Oracle-Lucene integration (Lucene 2.3.2
binary dist. / Oracle 11g):
http://marceloochoa.blogspot.com/2008/06/new-binary-release-of-lucene-oracle.html
  Tested against Spanish Wikipedia Dumps and using Wikipedia Analyzer/Tokenizer.
  There is independent times for uploading process and for indexing process.
  Uploading process means parsing of Wikipedia XML dumps and insert
into Oracle XMLDB repository which transform it in an object
relational structure:
http://marceloochoa.blogspot.com/2007/12/uploading-wikipedia-dumps-to-oracle.html
  Indexing process means a creation of a Lucene Domain Index with
something like this:

create index pages_lidx_all on pages p (value(p))
indextype is Lucene.LuceneIndex
parameters('PopulateIndex:false;SyncMode:Deferred;LogLevel:WARNING;Analyzer:org.apache.lucene.analysis.SpanishWikipediaAnalyzer;ExtraCols:extractValue(object_value,''/page/title'')
"title",extractValue(object_value,''/page/revision/comment'')
"comment",extract(object_value,''/page/revision/text/text()'')
"text",extractValue(object_value,''/page/revision/timestamp'')
"revisionDate";FormatCols:revisionDate(day);IncludeMasterColumn:false;LobStorageParameters:PCTVERSION
0 ENABLE STORAGE IN ROW CHUNK 32768 CACHE READS
FILESYSTEM_LIKE_LOGGING');

  Which indexs in separately Lucene Fields title, comment,  text and
timestamp XML nodes and the Oracle ROWID.
  Best regards, Marcelo.
On Tue, Jun 3, 2008 at 4:42 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> There i really no "typical".  I'm playing with Hadoop (HDFS) and Solr at the moment, for example, and I'm seeing indexing rate of cca 70 docs/second.  However, the bottleneck there is not indexing, it is reading data from HDFS (over the network).
>
>
> I've also seen 500+ docs/second.
>
> It depends on many factors:
> how fast reading your data source is, how complex your analysis is, the size of documents and number of fields, whether fields are stored or only indexed, the IndexWriter settings for segment merging and memory usage, of course, there is hardware, etc.
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
>> From: Simon Wistow <simon@thegestalt.org>
>> To: Lucene <java-user@lucene.apache.org>
>> Sent: Monday, June 2, 2008 7:40:52 PM
>> Subject: Typical Indexing performance
>>
>> I know this is one of those "How long is a piece of string?" questions
>> but I'm curious as to the order of magnitude of indexing performance.
>>
>> http://lucene.apache.org/java/docs/benchmarks.html
>>
>> seems to indicate about 100-120 docs/s is pretty good for average sized
>> documents (say, an email or something) or is that ludicrously out of
>> date for 2.3.x ?
>>
>> Simon
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 03 23:28:20 2008
Return-Path: <java-user-return-34311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51169 invoked from network); 3 Jun 2008 23:28:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jun 2008 23:28:20 -0000
Received: (qmail 74077 invoked by uid 500); 3 Jun 2008 23:28:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73406 invoked by uid 500); 3 Jun 2008 23:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 9433 invoked by uid 99); 3 Jun 2008 22:10:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Message-id: <4845C12C.5030304@mac.com>
Date: Tue, 03 Jun 2008 15:09:48 -0700
From: Michael Garski <mgarski@mac.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
To: java-user@lucene.apache.org
Subject: Multi-field query - determining which fields are hit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

In performing a multi-field query, is there a way to determine which 
field(s) the query matched in short of running a query against each of 
the fields independently?  Could payloads be utilized for something like 
this?

Thanks,

Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 04 07:39:10 2008
Return-Path: <java-user-return-34312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87380 invoked from network); 4 Jun 2008 07:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jun 2008 07:39:07 -0000
Received: (qmail 52143 invoked by uid 500); 4 Jun 2008 07:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51959 invoked by uid 500); 4 Jun 2008 07:39:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51948 invoked by uid 99); 4 Jun 2008 07:39:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jun 2008 00:39:03 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 143.167.2.187 is neither permitted nor denied by domain of arni.thomas@gmail.com)
Received: from [143.167.2.187] (HELO stoat.shef.ac.uk) (143.167.2.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jun 2008 07:38:13 +0000
Received: from dyn102195.shef.ac.uk ([143.167.102.195])
	by stoat.shef.ac.uk with esmtpsa (TLSv1:RC4-MD5:128)
	(Exim 4.68)
	(envelope-from <arni.thomas@gmail.com>)
	id 1K3nZk-0002pI-4D; Wed, 04 Jun 2008 08:38:28 +0100
Message-ID: <48464673.9050904@gmail.com>
Date: Wed, 04 Jun 2008 08:38:27 +0100
From: Thomas Arni <arni.thomas@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question about indexing (BrazilianAnalyzer)
References: <9d2777b60806031251h8f6e20fn15f2adab1e02abea@mail.gmail.com>
In-Reply-To: <9d2777b60806031251h8f6e20fn15f2adab1e02abea@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-S0phie-Scan: no
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

First of all please please always make sure that you use
exactly the same Analyser during indexing and searching.

I am not confident with the BrazilianAnalyzer, but I saw
in the source code that it does not use a ISOLatin1AccentFilter,
which replaces the accented characters ( -> c).

Probably the problem is with this accents..
You can check this if you adapt the method tokenStream()
in the BrazilianAnalzyer by including the ISOLatin1AccentFilter
in the filter chain.

Thomas



Vinicius Carvalho said the following on 03/06/08 20:51:
> Hello there! I'm indexing documents using the BrazilianAnalyzer, and I've
> noticed that many words are not being indexed. I store and index the entire
> doc (I'm doing this in order to present the fragments on the results, don't
> know if its the best way, mostly on large docs, any ideas?). Well using luke
> to check the index I open the stored doc, and its contents contains 17
> occurrences of the word "herana" for instance. But, there's no term for
> this word or it stemm version: "heranc", so searching for this word would
> not return a result for this document.
> 
> I'm pretty sure I'm missing something on the indexing process:
> 
> 
> try {
>             doc.add(new
> Field("contents",docText,Field.Store.YES,Field.Index.TOKENIZED,Field.TermVector.YES));
>             IndexWriter writer = new
> IndexWriter("/java/lucene/portal/cms",new BrazilianAnalyzer()); // gotta
> improve this latter
>             writer.addDocument(doc);
>             writer.close();
>         }
> 
> 
> So, why would these word (and others) not being indexed?
> 
> Regards

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 04 12:59:45 2008
Return-Path: <java-user-return-34313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64812 invoked from network); 4 Jun 2008 12:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jun 2008 12:59:45 -0000
Received: (qmail 41033 invoked by uid 500); 4 Jun 2008 12:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41004 invoked by uid 500); 4 Jun 2008 12:59:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40993 invoked by uid 99); 4 Jun 2008 12:59:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jun 2008 05:59:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jun 2008 12:58:44 +0000
Received: from sub20.acc.br (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id EB3FA51D02
	for <java-user@lucene.apache.org>; Wed,  4 Jun 2008 09:58:59 -0300 (BRST)
Message-ID: <48469192.3020605@accurate.com.br>
Date: Wed, 04 Jun 2008 09:58:58 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.14 (Macintosh/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: Question about indexing (BrazilianAnalyzer)
References: <9d2777b60806031251h8f6e20fn15f2adab1e02abea@mail.gmail.com>
In-Reply-To: <9d2777b60806031251h8f6e20fn15f2adab1e02abea@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------020706070308050706010808"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020706070308050706010808
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Are you using ISOLatin1AccentFilter ?

[]s,

Lucas Frare A. Teixeira
lucas.teixeira@accurate.com.br <mailto:lucas.teixeira@accurate.com.br>
Tel: +55 11 3660.1622 - R3018



Vinicius Carvalho escreveu:
> Hello there! I'm indexing documents using the BrazilianAnalyzer, and I've
> noticed that many words are not being indexed. I store and index the entire
> doc (I'm doing this in order to present the fragments on the results, don't
> know if its the best way, mostly on large docs, any ideas?). Well using luke
> to check the index I open the stored doc, and its contents contains 17
> occurrences of the word "herana" for instance. But, there's no term for
> this word or it stemm version: "heranc", so searching for this word would
> not return a result for this document.
>
> I'm pretty sure I'm missing something on the indexing process:
>
>
> try {
>             doc.add(new
> Field("contents",docText,Field.Store.YES,Field.Index.TOKENIZED,Field.TermVector.YES));
>             IndexWriter writer = new
> IndexWriter("/java/lucene/portal/cms",new BrazilianAnalyzer()); // gotta
> improve this latter
>             writer.addDocument(doc);
>             writer.close();
>         }
>
>
> So, why would these word (and others) not being indexed?
>
> Regards
>   

--------------020706070308050706010808--

From java-user-return-34314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 04 16:55:22 2008
Return-Path: <java-user-return-34314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10678 invoked from network); 4 Jun 2008 16:55:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jun 2008 16:55:21 -0000
Received: (qmail 709 invoked by uid 500); 4 Jun 2008 16:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 664 invoked by uid 500); 4 Jun 2008 16:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 653 invoked by uid 99); 4 Jun 2008 16:55:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jun 2008 09:55:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Jun 2008 16:54:18 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id 3032A129B1F
	for <java-user@lucene.apache.org>; Wed,  4 Jun 2008 09:54:39 -0700 (PDT)
Message-Id: <3FBBFA92-E32A-4D87-9778-F492CFB2765C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4845C12C.5030304@mac.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Multi-field query - determining which fields are hit
Date: Wed, 4 Jun 2008 12:54:37 -0400
References: <4845C12C.5030304@mac.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 3, 2008, at 6:09 PM, Michael Garski wrote:

> Hello,
>
> In performing a multi-field query, is there a way to determine which  
> field(s) the query matched in short of running a query against each  
> of the fields independently?

I don't know there is some obvious way.  I think people tend to use  
the highlighter and/or explains or some other roll your own approach.


> Could payloads be utilized for something like this?

Not sure, what do you have in mind?


>
>
> Thanks,
>
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 15:33:16 2008
Return-Path: <java-user-return-34315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96225 invoked from network); 5 Jun 2008 15:33:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 15:33:16 -0000
Received: (qmail 17261 invoked by uid 500); 5 Jun 2008 15:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17213 invoked by uid 500); 5 Jun 2008 15:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17193 invoked by uid 99); 5 Jun 2008 15:33:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 08:33:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michaelysiu@hotmail.com designates 65.54.246.207 as permitted sender)
Received: from [65.54.246.207] (HELO bay0-omc3-s7.bay0.hotmail.com) (65.54.246.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 15:32:19 +0000
Received: from hotmail.com ([65.55.133.13]) by bay0-omc3-s7.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 5 Jun 2008 08:32:36 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 5 Jun 2008 08:32:36 -0700
Message-ID: <BAY128-DAV3DBA9CA61C8FDE8D47E52BEB40@phx.gbl>
Received: from 209.189.193.162 by BAY128-DAV3.phx.gbl with DAV;
	Thu, 05 Jun 2008 15:32:31 +0000
X-Originating-IP: [209.189.193.162]
X-Originating-Email: [michaelysiu@hotmail.com]
X-Sender: michaelysiu@hotmail.com
From: "Michael Siu" <michaelysiu@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: How international languages are supported in Lucene
Date: Thu, 5 Jun 2008 08:32:52 -0700
Message-ID: <009401c8c721$6b548ad0$41fda070$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0095_01C8C6E6.BEF5B2D0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcjHIWoEnm5m7tv+TfqPURn3wrFlJg==
Content-Language: en-us
X-OriginalArrivalTime: 05 Jun 2008 15:32:36.0174 (UTC) FILETIME=[61624EE0:01C8C721]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0095_01C8C6E6.BEF5B2D0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Would someone tell me how Lucene supports indexing and searching documents
that contain international languages? What do I need to do in additions to
using the StandardAnalyzer?

 

Thanks.

 

 

 


------=_NextPart_000_0095_01C8C6E6.BEF5B2D0--


From java-user-return-34316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 15:53:40 2008
Return-Path: <java-user-return-34316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7311 invoked from network); 5 Jun 2008 15:53:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 15:53:40 -0000
Received: (qmail 53810 invoked by uid 500); 5 Jun 2008 15:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53579 invoked by uid 500); 5 Jun 2008 15:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53568 invoked by uid 99); 5 Jun 2008 15:53:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 08:53:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 15:52:38 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 423B93B9F2
	for <java-user@lucene.apache.org>; Thu,  5 Jun 2008 08:52:57 -0700 (PDT)
Message-Id: <3A3FE2E4-0478-4DA7-A22E-064B9CC4274B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <BAY128-DAV3DBA9CA61C8FDE8D47E52BEB40@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: How international languages are supported in Lucene
Date: Thu, 5 Jun 2008 11:52:57 -0400
References: <BAY128-DAV3DBA9CA61C8FDE8D47E52BEB40@phx.gbl>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

That's a pretty open ended question and, I'm assuming, by  
"international languages" you mean non-English :-).  You might get  
some mileage out of http://wiki.apache.org/lucene-java/IndexingOtherLanguages 
   but it is a bit out of date (namely the sandbox references).   
Lucene indexes non-English languages just like it does English.  You  
need to figure out what Analyzer you need (have a look in the contrib/ 
Analyzers code/javadocs for many existing languages) and then pretty  
much everything else is the same.  Namely, the same principals apply  
(what to store, index, etc.), as they do in English.

Did you have something specific in mind?  i.e. how to handle Chinese  
or some specific language?  Lastly, if you do have a language in mind,  
try searching the mail archives for the name of that language.

HTH,
Grant

On Jun 5, 2008, at 11:32 AM, Michael Siu wrote:

> Would someone tell me how Lucene supports indexing and searching  
> documents
> that contain international languages? What do I need to do in  
> additions to
> using the StandardAnalyzer?
>
>
>
> Thanks.
>
>
>
>
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 16:04:51 2008
Return-Path: <java-user-return-34317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10168 invoked from network); 5 Jun 2008 16:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 16:04:51 -0000
Received: (qmail 66031 invoked by uid 500); 5 Jun 2008 16:04:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65993 invoked by uid 500); 5 Jun 2008 16:04:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65982 invoked by uid 99); 5 Jun 2008 16:04:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 09:04:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of michaelysiu@hotmail.com designates 65.54.246.94 as permitted sender)
Received: from [65.54.246.94] (HELO bay0-omc1-s22.bay0.hotmail.com) (65.54.246.94)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 16:03:49 +0000
Received: from hotmail.com ([65.55.133.20]) by bay0-omc1-s22.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 5 Jun 2008 09:04:11 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 5 Jun 2008 09:04:10 -0700
Message-ID: <BAY128-DAV10E521449D30B7EE8D573DBEB40@phx.gbl>
Received: from 209.189.193.162 by BAY128-DAV10.phx.gbl with DAV;
	Thu, 05 Jun 2008 16:04:07 +0000
X-Originating-IP: [209.189.193.162]
X-Originating-Email: [michaelysiu@hotmail.com]
X-Sender: michaelysiu@hotmail.com
From: "Michael Siu" <michaelysiu@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY128-DAV3DBA9CA61C8FDE8D47E52BEB40@phx.gbl> <3A3FE2E4-0478-4DA7-A22E-064B9CC4274B@apache.org>
In-Reply-To: <3A3FE2E4-0478-4DA7-A22E-064B9CC4274B@apache.org>
Subject: RE: How international languages are supported in Lucene
Date: Thu, 5 Jun 2008 09:04:28 -0700
Message-ID: <009901c8c725$d541dd40$7fc597c0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcjHJFKud/7wRKdnSD64wJghN3uQzwAAIEZQ
Content-Language: en-us
X-OriginalArrivalTime: 05 Jun 2008 16:04:10.0853 (UTC) FILETIME=[CAB36150:01C8C725]
X-Virus-Checked: Checked by ClamAV on apache.org

Grant,

Thanks for the timely reply. :-)

No, we do not have a specific language in mind. Basically, our document
source could potentially contain any language in the world. Supporting
English, Spanish, Italian, French, Chinese, Russian and Japanese would be
the minimum set. 

Do you mean we will need different analyzer for each language? Then is that
means we will need to know the language type of a document before we can
index it?

Thanks again.



-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org] 
Sent: Thursday, June 05, 2008 8:53 AM
To: java-user@lucene.apache.org
Subject: Re: How international languages are supported in Lucene

Hi Michael,

That's a pretty open ended question and, I'm assuming, by  
"international languages" you mean non-English :-).  You might get  
some mileage out of
http://wiki.apache.org/lucene-java/IndexingOtherLanguages 
   but it is a bit out of date (namely the sandbox references).   
Lucene indexes non-English languages just like it does English.  You  
need to figure out what Analyzer you need (have a look in the contrib/ 
Analyzers code/javadocs for many existing languages) and then pretty  
much everything else is the same.  Namely, the same principals apply  
(what to store, index, etc.), as they do in English.

Did you have something specific in mind?  i.e. how to handle Chinese  
or some specific language?  Lastly, if you do have a language in mind,  
try searching the mail archives for the name of that language.

HTH,
Grant

On Jun 5, 2008, at 11:32 AM, Michael Siu wrote:

> Would someone tell me how Lucene supports indexing and searching  
> documents
> that contain international languages? What do I need to do in  
> additions to
> using the StandardAnalyzer?
>
>
>
> Thanks.
>
>
>
>
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 16:15:14 2008
Return-Path: <java-user-return-34318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14469 invoked from network); 5 Jun 2008 16:15:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 16:15:14 -0000
Received: (qmail 86400 invoked by uid 500); 5 Jun 2008 16:15:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86372 invoked by uid 500); 5 Jun 2008 16:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86361 invoked by uid 99); 5 Jun 2008 16:15:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 09:15:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 16:14:21 +0000
Received: by rv-out-0506.google.com with SMTP id f6so813596rvb.5
        for <java-user@lucene.apache.org>; Thu, 05 Jun 2008 09:14:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=7RfSn/b0hTfGAAcLpYVKtCypa8EbMx7m41fQ1gEbfZs=;
        b=MPSYjczsXHt1gqGsJ4OTxzUGbG9og+zseKPQTVKxncNaFR2i7z7aRMee07aJ9lNRq1
         oiH6vTkHVM9AEgsHuIJTHO4vSHNbBfMJVZmwwavLRh74qFNERp4B8hPp6UKCEGxArUvD
         io+SC3U0FvcNUPr8vu/vayCC4WttOlaPqpbw0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=isTOefxSP3/AbzjYE6PE1urYjbiDeE0mNd5D/qLFPI1KZIAxGmt0DMpnLfxRFT/m31
         H7DoVyS89oVvbfHTq+B6pyDbGsFaXw4CNwhqu+6ZORUnlgSJ3ruU4scFhNSAvC9dcKnC
         4xBCbw0cjh9dORhf+fHvJw/G4/an5yXUXHyhw=
Received: by 10.140.126.14 with SMTP id y14mr1038647rvc.59.1212682477843;
        Thu, 05 Jun 2008 09:14:37 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Thu, 5 Jun 2008 09:14:37 -0700 (PDT)
Message-ID: <5e76f3840806050914m16a6e013pff44257863348e02@mail.gmail.com>
Date: Thu, 5 Jun 2008 12:14:37 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi-language support within a single index
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I would like to be able to get multi-language support within a single index.
I would appreciate input on what I am suggesting:

Assuming that you want something like the following in your document:
Title_english
Title_french
Title_german
Keyword_english
Keyword_french
Keyword_german

Let's pretend for now that each of these was created with a different
appropriate analyzer and the mechanisms for doing this exist (see end
of post for more on this).

How to handle a query?
Could we associate an Analyzer with a set of fields, like this:
// pseudo java
Analyzer ea = new EnglishAnalyzer({"TitleEnglish", "KeywordEnglish"});
Analyzer fa = new FrenchAnalyzer({"TitleFrench", "KeywordFrench"});
Analyzer ga = new EnglishAnalyzer({"TitleEnglish", "KeywordEnglish"});
Analyzer ml = new MultiLanguageAnalyzer();
(MultiLanguageAnalyzer)ml.add(ea);
(MultiLanguageAnalyzer)ml.add(fa);
(MultiLanguageAnalyzer)ml.add(ga);
QueryParser parser = MultiLanguageParser("TitleEnglish", ml);
// end

Now when
  parser.parse("TitleEnglish: foo TitleFrench:bar  smith")
is called, MultiLanguageParser uses the appropriate analyzer for each
field in the query to parse the sub-query & rolls up all of the
queries created by these analyzers into the real query.

I am thinking that this would require having separate term
dictionaries for each language, thus demanding a significant change in
the index format? [Note I am not an expert on Lucene internals]

Of course, something similar to the above could be used adding
documents to the index.

Looking at:
  http://lucene.apache.org/java/docs/fileformats.html#Per-Segment%20Files
It seems that it would need - instead of the present single set - a
set of segment files for each analyzer: .fnm (Fields), tis & tii (term
dictionary), .frq (term frequencies), .prx (positions), .nrm
(normalizations), .tvx, .tvd, .tvf (term vectors).
How stable is the code for this part of the index & would it easily
support this kind of extension? Or would some re-factoring be needed
to make these sorts of manipulations to the nature of the segments
files easier for mere mortal developers?  :-)

Is this something that is already being talked about/looked in
to/being implemented? :-)

thanks,

Glen Newton
http://zzzoot.blogspot.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 16:51:56 2008
Return-Path: <java-user-return-34319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34066 invoked from network); 5 Jun 2008 16:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 16:51:56 -0000
Received: (qmail 72932 invoked by uid 500); 5 Jun 2008 16:51:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72897 invoked by uid 500); 5 Jun 2008 16:51:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72885 invoked by uid 99); 5 Jun 2008 16:51:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 09:51:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 16:51:03 +0000
Received: by fg-out-1718.google.com with SMTP id l27so483934fgb.27
        for <java-user@lucene.apache.org>; Thu, 05 Jun 2008 09:51:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tSq56fuUHuwfHlK+Nrxpnw0FnmBOhf/YDjlLpbMErsc=;
        b=dzokV6m/uHy6vC16aiKNDPbHR+tQKWAJ9qsF2OEHjkxVjYVhqvSg6DEkdQvEsFRj0h
         CB7oX7lnZqe+GgkXb6lyC6OrRvM6dXIMCLSZzC9fJJ3bDcioti00WxjaHx6+H1vPuCRq
         Zrc8K5gri/46ay9RkzIKHTqT4aU1XoaSNbgVU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=GkIl9ZQyc0WCEI/q7git2Aj4Hv0ebYmm9FI+azoIircso7lZOwKejIUglePOywaYuU
         gI8GJpLXyI6NK/rBK4QH3hO4usCfxqcq32VoW7hEEJUjF0xq6AVxO/J+20NMaqO0aoDf
         NI36329nyVlXk7RXfmDVLl38jbjCymlHgM2YM=
Received: by 10.86.54.3 with SMTP id c3mr2446761fga.55.1212684678786;
        Thu, 05 Jun 2008 09:51:18 -0700 (PDT)
Received: by 10.86.63.2 with HTTP; Thu, 5 Jun 2008 09:51:18 -0700 (PDT)
Message-ID: <359a92830806050951u6f5da79i8b039f6d0081f47c@mail.gmail.com>
Date: Thu, 5 Jun 2008 12:51:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How international languages are supported in Lucene
In-Reply-To: <BAY128-DAV10E521449D30B7EE8D573DBEB40@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3083_9886931.1212684678777"
References: <BAY128-DAV3DBA9CA61C8FDE8D47E52BEB40@phx.gbl>
	 <3A3FE2E4-0478-4DA7-A22E-064B9CC4274B@apache.org>
	 <BAY128-DAV10E521449D30B7EE8D573DBEB40@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3083_9886931.1212684678777
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below

On Thu, Jun 5, 2008 at 12:04 PM, Michael Siu <michaelysiu@hotmail.com>
wrote:

> Grant,
>
> Thanks for the timely reply. :-)
>
> No, we do not have a specific language in mind. Basically, our document
> source could potentially contain any language in the world. Supporting
> English, Spanish, Italian, French, Chinese, Russian and Japanese would be
> the minimum set.
>
> Do you mean we will need different analyzer for each language? Then is that
> means we will need to know the language type of a document before we can
> index it?
>

yes and yes. Try searching the mail archives for things like
multi-language and you'll find this topic discussed ad-nauseum

But basically consider why this must be so, especially when
stemming. Languages are so variable that you'd get wildly
different (and inappropriate) results if you tried to analyze them
with the same analyzer. Especially when you get different
language encodings in the document.


Best
Erick


>
> Thanks again.
>
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Thursday, June 05, 2008 8:53 AM
> To: java-user@lucene.apache.org
> Subject: Re: How international languages are supported in Lucene
>
> Hi Michael,
>
> That's a pretty open ended question and, I'm assuming, by
> "international languages" you mean non-English :-).  You might get
> some mileage out of
> http://wiki.apache.org/lucene-java/IndexingOtherLanguages
>   but it is a bit out of date (namely the sandbox references).
> Lucene indexes non-English languages just like it does English.  You
> need to figure out what Analyzer you need (have a look in the contrib/
> Analyzers code/javadocs for many existing languages) and then pretty
> much everything else is the same.  Namely, the same principals apply
> (what to store, index, etc.), as they do in English.
>
> Did you have something specific in mind?  i.e. how to handle Chinese
> or some specific language?  Lastly, if you do have a language in mind,
> try searching the mail archives for the name of that language.
>
> HTH,
> Grant
>
> On Jun 5, 2008, at 11:32 AM, Michael Siu wrote:
>
> > Would someone tell me how Lucene supports indexing and searching
> > documents
> > that contain international languages? What do I need to do in
> > additions to
> > using the StandardAnalyzer?
> >
> >
> >
> > Thanks.
> >
> >
> >
> >
> >
> >
> >
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3083_9886931.1212684678777--

From java-user-return-34320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 16:55:28 2008
Return-Path: <java-user-return-34320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36822 invoked from network); 5 Jun 2008 16:55:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 16:55:28 -0000
Received: (qmail 80960 invoked by uid 500); 5 Jun 2008 16:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80930 invoked by uid 500); 5 Jun 2008 16:55:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80912 invoked by uid 99); 5 Jun 2008 16:55:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 09:55:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 16:54:23 +0000
Received: by fg-out-1718.google.com with SMTP id l27so485000fgb.27
        for <java-user@lucene.apache.org>; Thu, 05 Jun 2008 09:54:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RyJJXzBZoU8wj8+AYuQjiG/9WEzxwfdG+MYLD8PiXkc=;
        b=Zpiu8USRYK0PjhS41sQlOcTm81Wjvs2ijG3fLJUENWUZ9Q9X4neuzEFNwgDNqAZkeJ
         D0cG3G6bUOpaxuCcCjMfEML00qscEmvSm4OZc5VC+p6aG2AW8Bq+DnMmepAf2GmRxcbR
         PM7ZjVfAsPrFXM0SKcknYBJ2YrLgTwWK8BOEA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bZGeOBh5Z3Zsbc4U0CCRq6DF9no1bWmTzEmKZZyO1hTqWuqggkuVf1ieC7skEpizz0
         8BYMFDpHDSXa1Z9X6A0PKRQ2GlGAAc3gHCR9tThfJ55E2C1t1dJ5IkgZrcIvC2CW5PwR
         TGXocwwTe8swSakZwPaqe4vop+9QbZCC/zoz4=
Received: by 10.86.83.2 with SMTP id g2mr2460899fgb.54.1212684878376;
        Thu, 05 Jun 2008 09:54:38 -0700 (PDT)
Received: by 10.86.63.2 with HTTP; Thu, 5 Jun 2008 09:54:38 -0700 (PDT)
Message-ID: <359a92830806050954l49e3d5dbw8e07141b77ca3575@mail.gmail.com>
Date: Thu, 5 Jun 2008 12:54:38 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi-language support within a single index
In-Reply-To: <5e76f3840806050914m16a6e013pff44257863348e02@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3102_10171143.1212684878386"
References: <5e76f3840806050914m16a6e013pff44257863348e02@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3102_10171143.1212684878386
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not sure what you're getting at, but it seems awful similar to
PerFieldAnalyzerWrapper that already exists and does (it seems
to me on a quick scan) to do exactly what you want. And it
works for both indexing and querying out-of-the-box.....

Best
Erick

On Thu, Jun 5, 2008 at 12:14 PM, Glen Newton <glen.newton@gmail.com> wrote:

> I would like to be able to get multi-language support within a single
> index.
> I would appreciate input on what I am suggesting:
>
> Assuming that you want something like the following in your document:
> Title_english
> Title_french
> Title_german
> Keyword_english
> Keyword_french
> Keyword_german
>
> Let's pretend for now that each of these was created with a different
> appropriate analyzer and the mechanisms for doing this exist (see end
> of post for more on this).
>
> How to handle a query?
> Could we associate an Analyzer with a set of fields, like this:
> // pseudo java
> Analyzer ea = new EnglishAnalyzer({"TitleEnglish", "KeywordEnglish"});
> Analyzer fa = new FrenchAnalyzer({"TitleFrench", "KeywordFrench"});
> Analyzer ga = new EnglishAnalyzer({"TitleEnglish", "KeywordEnglish"});
> Analyzer ml = new MultiLanguageAnalyzer();
> (MultiLanguageAnalyzer)ml.add(ea);
> (MultiLanguageAnalyzer)ml.add(fa);
> (MultiLanguageAnalyzer)ml.add(ga);
> QueryParser parser = MultiLanguageParser("TitleEnglish", ml);
> // end
>
> Now when
>  parser.parse("TitleEnglish: foo TitleFrench:bar  smith")
> is called, MultiLanguageParser uses the appropriate analyzer for each
> field in the query to parse the sub-query & rolls up all of the
> queries created by these analyzers into the real query.
>
> I am thinking that this would require having separate term
> dictionaries for each language, thus demanding a significant change in
> the index format? [Note I am not an expert on Lucene internals]
>
> Of course, something similar to the above could be used adding
> documents to the index.
>
> Looking at:
>  http://lucene.apache.org/java/docs/fileformats.html#Per-Segment%20Files
> It seems that it would need - instead of the present single set - a
> set of segment files for each analyzer: .fnm (Fields), tis & tii (term
> dictionary), .frq (term frequencies), .prx (positions), .nrm
> (normalizations), .tvx, .tvd, .tvf (term vectors).
> How stable is the code for this part of the index & would it easily
> support this kind of extension? Or would some re-factoring be needed
> to make these sorts of manipulations to the nature of the segments
> files easier for mere mortal developers?  :-)
>
> Is this something that is already being talked about/looked in
> to/being implemented? :-)
>
> thanks,
>
> Glen Newton
> http://zzzoot.blogspot.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3102_10171143.1212684878386--

From java-user-return-34321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 17:07:38 2008
Return-Path: <java-user-return-34321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43277 invoked from network); 5 Jun 2008 17:07:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 17:07:37 -0000
Received: (qmail 8394 invoked by uid 500); 5 Jun 2008 17:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8361 invoked by uid 500); 5 Jun 2008 17:07:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8350 invoked by uid 99); 5 Jun 2008 17:07:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 10:07:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 17:06:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so836641rvb.5
        for <java-user@lucene.apache.org>; Thu, 05 Jun 2008 10:07:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=VicW0CQNLCECcr0pLkEe/sYw2fZGI/FpnGN5AkUAlBM=;
        b=Q9Du4dNAHBZFU/ZsPlSRSaLdDTDau8dXfjY69sT5XNVy62nOLHRzb84gbT4QlzLiVa
         RNoReDScGDsW988lOlscKdKMHiC/HPlF7AsDozdUXzZ1oLRAOfGSgf5Ag7qqu3KjUpma
         xlRpNQKHqmRXtwiKF5y1l7dd6M+Tqtiu91s3A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=oLNxRl4ARH8KYCl+QnWcMrvZj8SXr9RwWoXQTIKLjzfRpitgE5ajykgxmJ2120rC/w
         uR3gokwLvNAQmQcQCEjQ/WOIO8y93/StnoDOVpUNGPMEwPk5JmE7mDioQqTHX7V98a/f
         CpcYgc3Nfq1X/NIKcF63zuMkNtl7/HyScEva8=
Received: by 10.140.163.3 with SMTP id l3mr1088692rve.15.1212685621924;
        Thu, 05 Jun 2008 10:07:01 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Thu, 5 Jun 2008 10:07:01 -0700 (PDT)
Message-ID: <5e76f3840806051007q7eecd220vd8331a23a1347c51@mail.gmail.com>
Date: Thu, 5 Jun 2008 13:07:01 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi-language support within a single index
In-Reply-To: <359a92830806050954l49e3d5dbw8e07141b77ca3575@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840806050914m16a6e013pff44257863348e02@mail.gmail.com>
	 <359a92830806050954l49e3d5dbw8e07141b77ca3575@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, thank-you for the pointer, and apologies for not doing my
homework better. :-)
It is exactly what I want.

The scenario is where I have articles which tend to be in english and
have abstracts, and for some of them have french language abstracts.
Users may want to search the english abstracts or the french abstracts
or both.

thanks,

Glen

2008/6/5 Erick Erickson <erickerickson@gmail.com>:
> I'm not sure what you're getting at, but it seems awful similar to
> PerFieldAnalyzerWrapper that already exists and does (it seems
> to me on a quick scan) to do exactly what you want. And it
> works for both indexing and querying out-of-the-box.....
>
> Best
> Erick
>
> On Thu, Jun 5, 2008 at 12:14 PM, Glen Newton <glen.newton@gmail.com> wrote:
>
>> I would like to be able to get multi-language support within a single
>> index.
>> I would appreciate input on what I am suggesting:
>>
>> Assuming that you want something like the following in your document:
>> Title_english
>> Title_french
>> Title_german
>> Keyword_english
>> Keyword_french
>> Keyword_german
>>
>> Let's pretend for now that each of these was created with a different
>> appropriate analyzer and the mechanisms for doing this exist (see end
>> of post for more on this).
>>
>> How to handle a query?
>> Could we associate an Analyzer with a set of fields, like this:
>> // pseudo java
>> Analyzer ea = new EnglishAnalyzer({"TitleEnglish", "KeywordEnglish"});
>> Analyzer fa = new FrenchAnalyzer({"TitleFrench", "KeywordFrench"});
>> Analyzer ga = new EnglishAnalyzer({"TitleEnglish", "KeywordEnglish"});
>> Analyzer ml = new MultiLanguageAnalyzer();
>> (MultiLanguageAnalyzer)ml.add(ea);
>> (MultiLanguageAnalyzer)ml.add(fa);
>> (MultiLanguageAnalyzer)ml.add(ga);
>> QueryParser parser = MultiLanguageParser("TitleEnglish", ml);
>> // end
>>
>> Now when
>>  parser.parse("TitleEnglish: foo TitleFrench:bar  smith")
>> is called, MultiLanguageParser uses the appropriate analyzer for each
>> field in the query to parse the sub-query & rolls up all of the
>> queries created by these analyzers into the real query.
>>
>> I am thinking that this would require having separate term
>> dictionaries for each language, thus demanding a significant change in
>> the index format? [Note I am not an expert on Lucene internals]
>>
>> Of course, something similar to the above could be used adding
>> documents to the index.
>>
>> Looking at:
>>  http://lucene.apache.org/java/docs/fileformats.html#Per-Segment%20Files
>> It seems that it would need - instead of the present single set - a
>> set of segment files for each analyzer: .fnm (Fields), tis & tii (term
>> dictionary), .frq (term frequencies), .prx (positions), .nrm
>> (normalizations), .tvx, .tvd, .tvf (term vectors).
>> How stable is the code for this part of the index & would it easily
>> support this kind of extension? Or would some re-factoring be needed
>> to make these sorts of manipulations to the nature of the segments
>> files easier for mere mortal developers?  :-)
>>
>> Is this something that is already being talked about/looked in
>> to/being implemented? :-)
>>
>> thanks,
>>
>> Glen Newton
>> http://zzzoot.blogspot.com/
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 17:20:52 2008
Return-Path: <java-user-return-34322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60178 invoked from network); 5 Jun 2008 17:20:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 17:20:52 -0000
Received: (qmail 43957 invoked by uid 500); 5 Jun 2008 17:20:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43911 invoked by uid 500); 5 Jun 2008 17:20:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43885 invoked by uid 99); 5 Jun 2008 17:20:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 10:20:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of michaelysiu@hotmail.com designates 65.54.246.208 as permitted sender)
Received: from [65.54.246.208] (HELO bay0-omc3-s8.bay0.hotmail.com) (65.54.246.208)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 17:19:50 +0000
Received: from hotmail.com ([65.55.133.18]) by bay0-omc3-s8.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 5 Jun 2008 10:20:12 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 5 Jun 2008 10:20:12 -0700
Message-ID: <BAY128-DAV88C414A138788B993C5C5BEB40@phx.gbl>
Received: from 209.189.193.162 by BAY128-DAV8.phx.gbl with DAV;
	Thu, 05 Jun 2008 17:20:09 +0000
X-Originating-IP: [209.189.193.162]
X-Originating-Email: [michaelysiu@hotmail.com]
X-Sender: michaelysiu@hotmail.com
From: "Michael Siu" <michaelysiu@hotmail.com>
To: <java-user@lucene.apache.org>
References: <BAY128-DAV3DBA9CA61C8FDE8D47E52BEB40@phx.gbl>	 <3A3FE2E4-0478-4DA7-A22E-064B9CC4274B@apache.org>	 <BAY128-DAV10E521449D30B7EE8D573DBEB40@phx.gbl> <359a92830806050951u6f5da79i8b039f6d0081f47c@mail.gmail.com>
In-Reply-To: <359a92830806050951u6f5da79i8b039f6d0081f47c@mail.gmail.com>
Subject: RE: How international languages are supported in Lucene
Date: Thu, 5 Jun 2008 10:20:30 -0700
Message-ID: <00a001c8c730$746e1c30$5d4a5490$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcjHLHZ2skZ354MxQbG46/eDiuP0nwAA/FUQ
Content-Language: en-us
X-OriginalArrivalTime: 05 Jun 2008 17:20:12.0176 (UTC) FILETIME=[69760900:01C8C730]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Thursday, June 05, 2008 9:51 AM
To: java-user@lucene.apache.org
Subject: Re: How international languages are supported in Lucene

See below

On Thu, Jun 5, 2008 at 12:04 PM, Michael Siu <michaelysiu@hotmail.com>
wrote:

> Grant,
>
> Thanks for the timely reply. :-)
>
> No, we do not have a specific language in mind. Basically, our document
> source could potentially contain any language in the world. Supporting
> English, Spanish, Italian, French, Chinese, Russian and Japanese would be
> the minimum set.
>
> Do you mean we will need different analyzer for each language? Then is
that
> means we will need to know the language type of a document before we can
> index it?
>

yes and yes. Try searching the mail archives for things like
multi-language and you'll find this topic discussed ad-nauseum

But basically consider why this must be so, especially when
stemming. Languages are so variable that you'd get wildly
different (and inappropriate) results if you tried to analyze them
with the same analyzer. Especially when you get different
language encodings in the document.


Best
Erick


>
> Thanks again.
>
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Thursday, June 05, 2008 8:53 AM
> To: java-user@lucene.apache.org
> Subject: Re: How international languages are supported in Lucene
>
> Hi Michael,
>
> That's a pretty open ended question and, I'm assuming, by
> "international languages" you mean non-English :-).  You might get
> some mileage out of
> http://wiki.apache.org/lucene-java/IndexingOtherLanguages
>   but it is a bit out of date (namely the sandbox references).
> Lucene indexes non-English languages just like it does English.  You
> need to figure out what Analyzer you need (have a look in the contrib/
> Analyzers code/javadocs for many existing languages) and then pretty
> much everything else is the same.  Namely, the same principals apply
> (what to store, index, etc.), as they do in English.
>
> Did you have something specific in mind?  i.e. how to handle Chinese
> or some specific language?  Lastly, if you do have a language in mind,
> try searching the mail archives for the name of that language.
>
> HTH,
> Grant
>
> On Jun 5, 2008, at 11:32 AM, Michael Siu wrote:
>
> > Would someone tell me how Lucene supports indexing and searching
> > documents
> > that contain international languages? What do I need to do in
> > additions to
> > using the StandardAnalyzer?
> >
> >
> >
> > Thanks.
> >
> >
> >
> >
> >
> >
> >
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 05 23:36:19 2008
Return-Path: <java-user-return-34323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82333 invoked from network); 5 Jun 2008 23:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jun 2008 23:36:18 -0000
Received: (qmail 14731 invoked by uid 500); 5 Jun 2008 23:36:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14615 invoked by uid 500); 5 Jun 2008 23:36:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14604 invoked by uid 99); 5 Jun 2008 23:36:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 16:36:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Jun 2008 23:35:26 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 763E34A8173
	for <java-user@lucene.apache.org>; Fri,  6 Jun 2008 09:37:24 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: How international languages are supported in Lucene
Date: Fri, 6 Jun 2008 09:36:11 +1000
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <BAY128-DAV3DBA9CA61C8FDE8D47E52BEB40@phx.gbl> <BAY128-DAV10E521449D30B7EE8D573DBEB40@phx.gbl> <359a92830806050951u6f5da79i8b039f6d0081f47c@mail.gmail.com>
In-Reply-To: <359a92830806050951u6f5da79i8b039f6d0081f47c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806060936.11906.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> But basically consider why this must be so, especially when
> stemming. Languages are so variable that you'd get wildly
> different (and inappropriate) results if you tried to analyze them
> with the same analyzer. Especially when you get different
> language encodings in the document.

Well... technically encoding is out of the scope of Lucene since we're passing 
in a Reader.

I have to say though, analysing with the most naive analyser possible (the 
default one with no stop words and no stemming) works well enough.

Language detection isn't at a point where it's reliable enough to use to 
determine which analyser to use automatically.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 06 09:01:16 2008
Return-Path: <java-user-return-34324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82120 invoked from network); 6 Jun 2008 09:01:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2008 09:01:16 -0000
Received: (qmail 12559 invoked by uid 500); 6 Jun 2008 09:01:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12530 invoked by uid 500); 6 Jun 2008 09:01:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12519 invoked by uid 99); 6 Jun 2008 09:01:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jun 2008 02:01:11 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jun 2008 09:00:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K4XoM-0000ki-5A
	for java-user@lucene.apache.org; Fri, 06 Jun 2008 02:00:38 -0700
Message-ID: <17687701.post@talk.nabble.com>
Date: Fri, 6 Jun 2008 02:00:38 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Typical Indexing performance
In-Reply-To: <C9BE8C35-38AB-483C-8256-2D7152BB4060@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <20080602234052.GB50904@thegestalt.org> <C9BE8C35-38AB-483C-8256-2D7152BB4060@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


my 2 cents

My indexing-module handles the documents with ~15 fields, most of those must
be indexed and stored. Using the GermanAnalyzer I saw the following times:

10 MB ~ 3400 docs --> 6-8 sec
70 MB ~ 50000 docs --> 65 sec

so it gives me 500 - 760 doc/s
-- 
View this message in context: http://www.nabble.com/Typical-Indexing-performance-tp17619271p17687701.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 06 20:11:05 2008
Return-Path: <java-user-return-34325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48057 invoked from network); 6 Jun 2008 20:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jun 2008 20:11:05 -0000
Received: (qmail 96548 invoked by uid 500); 6 Jun 2008 20:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96507 invoked by uid 500); 6 Jun 2008 20:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96496 invoked by uid 99); 6 Jun 2008 20:11:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jun 2008 13:11:00 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Jun 2008 20:10:08 +0000
Received: by yw-out-2324.google.com with SMTP id 3so626235ywj.5
        for <java-user@lucene.apache.org>; Fri, 06 Jun 2008 13:10:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=KGfAibb3gn7JsEPZfryL9fYbxGoKIRj2Hhlr5M/VchI=;
        b=aAJLI1aWrak9y3ephHUjbGmt6EySip9aZGP26nTZGKbrSN0WvxnwZhaQP7tjz29b+J
         nl5vcdQLqWu2pwEzlSU0UMHRX8C3+dGuBwArfxthurBXiJEqnwXClyOLM0XF++SkDUWl
         nusZkioS+4O1crlUoeuz009nfeUFPspkpjf34=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=pmR4UJL236CzkAh2uTwRmfarz/85PiThXecrdogXQZcjUOgmFxqLP5BhtU7fKAgcTH
         JWIoz7PJg4wewP3vsZQ+0AdUJd6N5+rftrrBl0Ykq+p1pNuSwUwt04tnyCX77RNMcbZy
         CiLL59UMeq18FO/Bo+Ruk0BZCk/g+0GnosbtI=
Received: by 10.151.155.21 with SMTP id h21mr824768ybo.142.1212783022750;
        Fri, 06 Jun 2008 13:10:22 -0700 (PDT)
Received: by 10.151.99.7 with HTTP; Fri, 6 Jun 2008 13:10:22 -0700 (PDT)
Message-ID: <126142c0806061310y52281270n4505e235026debac@mail.gmail.com>
Date: Fri, 6 Jun 2008 17:10:22 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: OT: Oracle-Lucene integration at Oracle Open World 08
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi:
   Oracle-Lucene integration will have a place at Oracle Open World 08
(Oracle Develop - San Francisco Marriott).
   My friend Kuassi Mensah and I will present the architecture as an
example of database intensive solution.
   Here the link to the content catalogue:
http://www28.cplan.com/cc208/session_details.jsp?isid=298820&ilocation_id=208-1&ilanguage=english
   For anybody who have a plan to go to the event will be a good time
to share experience.
   Best regards, Marcelo.

-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 07 15:09:12 2008
Return-Path: <java-user-return-34326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38744 invoked from network); 7 Jun 2008 15:09:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2008 15:09:12 -0000
Received: (qmail 56700 invoked by uid 500); 7 Jun 2008 15:09:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56662 invoked by uid 500); 7 Jun 2008 15:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56649 invoked by uid 99); 7 Jun 2008 15:09:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jun 2008 08:09:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jun 2008 15:08:18 +0000
Received: by wa-out-1112.google.com with SMTP id l24so1165460waf.11
        for <java-user@lucene.apache.org>; Sat, 07 Jun 2008 08:08:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=5n0RGHaHRRaoDUB30fU50pMy5Isu4v7TaD6DwDanLgs=;
        b=qmY2FazRZC0a2nGhLh0ESvf6EQLnhSDO/T7QwT4j9rithBNHH3Mxb5qrIqybO+ldZv
         fwquKbSjWXLacr5UdqCHrCMtuUkmh8UAVDSYaZ3gcRwjAJigI6nksGROSr+QscMs9NWd
         uE80czVN0TkXSbsWSqdHOw5bDdlTPYM2su1Ys=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=l3wz2DCw+07EIcYQmY1TvvHbFVyXWLK7eA8/CgonFVTT2oQtfyG+TbtSwcjRAx1ejQ
         D3f61VQmZDRLm6aRqf5x5HjIDxwbMr3BUFredIN/dWjxvsWAG+I7cMtHg3W4wFCDfL3F
         V7npAkBp84tP3PeWt2zRsevJ09/v4+E/yZn9s=
Received: by 10.115.58.18 with SMTP id l18mr1452288wak.177.1212851315066;
        Sat, 07 Jun 2008 08:08:35 -0700 (PDT)
Received: by 10.114.75.13 with HTTP; Sat, 7 Jun 2008 08:08:34 -0700 (PDT)
Message-ID: <c68e39170806070808q5def8c6cvd5bed2d33ce231e1@mail.gmail.com>
Date: Sat, 7 Jun 2008 11:08:34 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: IndexDeletionPolicy and IndexCommitPoint
In-Reply-To: <9ac0c6aa0802210925h4d4097bcn32fdceeebf5ed0a4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <212887129.209141203608549488.JavaMail.root@dogfood.zimbra.com>
	 <272972818.209491203609299910.JavaMail.root@dogfood.zimbra.com>
	 <9ac0c6aa0802210925h4d4097bcn32fdceeebf5ed0a4@mail.gmail.com>
X-Google-Sender-Auth: fd8a25bb56101f10
X-Virus-Checked: Checked by ClamAV on apache.org

OK, does this mean it's now relatively safe/lightweight now to hold
references to IndexCommit objects long term (across different
IndexWriter objects on the same Directory?)

I also notice that IndexCommit.equals() only compares the segment fine
name... should it compare version also?  If index files were deleted,
and a new IndexWriter was opened, one could end up with a different
index but the same segment file name.

-Yonik

On Thu, Feb 21, 2008 at 1:25 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> Good questions!
>
> Yes, it's best to use the segments filename to compare commit points
> across close/reopen of IndexWriter as long as you ensure you're always
> working with the same index / Directory.
>
> You could change snapshot to be a String (the segments file name) and
> do all comparisons on that basis instead of holding the
> IndexCommitPoint.  This breaks the reference to the non-static inner
> class CommitPoint in IndexFileDeleter.
>
> I like this simplification ... I've opened LUCENE-1184 for this and
> attached a patch:
>
>    https://issues.apache.org/jira/browse/LUCENE-1184
>
> Thanks Tim!
>
> Mike
>
> Tim Brennan <tim@zimbra.com> wrote:
>> When implementing a custom IndexDeletionPolicy, is it sufficient to just use the segments filename (returned by IndexCommitPoint.getSegmentsFilename()) to compare CommitPoints to see if they are equal?
>>
>>  I've looked at the code in SnapshotDeletionPolicy and it works by keeping a pointer to the snapshot IndexCommitPoint and comparing that against the listed commit points in onCommit.  This strategy doesn't seem to work if the IndexWriter is closed and re-opened: you get all new CommitPoint instances from the new Writer even if they refer to the same logical commit, and furthermore holding onto IndexCommitPoint references across generations of IndexWriters will cause significant memory pressure (an IndexCommitPoint is an instance of the *non-static* inner class IndexFileDeleter$CommitPoint so it points to the IndexFileDeleter which points to the DocumentsWriter which points to the Posting[] array.....so holding onto a commit point effectively keeps the Posting[] array around)
>>
>>  Am I going completely wrong here, trying to IndexDeletionPolicy across Writer generations?
>>
>>  --tim
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 07 19:22:31 2008
Return-Path: <java-user-return-34327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78871 invoked from network); 7 Jun 2008 19:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jun 2008 19:22:29 -0000
Received: (qmail 61494 invoked by uid 500); 7 Jun 2008 19:22:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61460 invoked by uid 500); 7 Jun 2008 19:22:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61449 invoked by uid 99); 7 Jun 2008 19:22:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jun 2008 12:22:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Jun 2008 19:21:36 +0000
Received: by an-out-0708.google.com with SMTP id c37so358375anc.49
        for <java-user@lucene.apache.org>; Sat, 07 Jun 2008 12:21:52 -0700 (PDT)
Received: by 10.100.201.16 with SMTP id y16mr621169anf.90.1212866511840;
        Sat, 07 Jun 2008 12:21:51 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id c20sm15009676ana.21.2008.06.07.12.21.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 07 Jun 2008 12:21:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <c68e39170806070808q5def8c6cvd5bed2d33ce231e1@mail.gmail.com>
References: <212887129.209141203608549488.JavaMail.root@dogfood.zimbra.com> <272972818.209491203609299910.JavaMail.root@dogfood.zimbra.com> <9ac0c6aa0802210925h4d4097bcn32fdceeebf5ed0a4@mail.gmail.com> <c68e39170806070808q5def8c6cvd5bed2d33ce231e1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A3C5CAC0-CC21-4A1B-95F1-E53C3FCB29CA@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexDeletionPolicy and IndexCommitPoint
Date: Sat, 7 Jun 2008 15:21:54 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Yonik Seeley wrote:

> OK, does this mean it's now relatively safe/lightweight now to hold
> references to IndexCommit objects long term (across different
> IndexWriter objects on the same Directory?)

Yes, this should be fine.

> I also notice that IndexCommit.equals() only compares the segment fine
> name... should it compare version also?  If index files were deleted,
> and a new IndexWriter was opened, one could end up with a different
> index but the same segment file name.

Good point!  I think we we only need to compare version (comparing  
filename would be redundant), and Directory.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 08 11:20:45 2008
Return-Path: <java-user-return-34328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46063 invoked from network); 8 Jun 2008 11:20:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2008 11:20:45 -0000
Received: (qmail 49489 invoked by uid 500); 8 Jun 2008 11:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49452 invoked by uid 500); 8 Jun 2008 11:20:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 35211 invoked by uid 99); 7 Jun 2008 14:35:07 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 216.239.58.185 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=Uqj8ANKI0IG2bOgXWOkNiC3374wPKBf+77BcRAiuuyA=;
        b=FB6Q20hh+kH64/8KLt+MNAR8HPvjOpnleV+g2AqfUwGBNMGKAYiJUpL6VOUyPyYhrs
         tFuzPeN5lUjysftp2xJ2e9fyZBIuFpOSOTulB5rJvGFlKaPc6HrANOnFeiDMK+GarIml
         TeuTjt2J43Q5OHTnXiRTEbpXk9dfULhorZN88=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=q4uzbMu84ZZXg1/dEGD9rRGzIbettYVfObl11ZDJ0MNQknOFiaUvtg2g8tki5cJkNP
         e79ebrEuo6x1VXLvn/Ka7JYRmP81lJKzMkiX9ugh/OaTmI/paTX3BU0FvJCJhgyfv0cV
         2iW10j4/x7SImiaejZ1gSKZP8Z5LLpmU8WiIg=
Message-Id: <057E98ED-CB2E-430D-AC2A-988C52FAEFD0@evenity.net>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Indexstructure design
Date: Sat, 7 Jun 2008 16:34:22 +0200
X-Mailer: Apple Mail (2.924)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am quite new to the lucene scene and I need your help :-)
There are several document classes. Lets say documents from class A,  
B, C, D and E. What I need is the following:

1) I want to search over all classes together. So the query should hit  
results from all different classes - ideally it is possible
to limit the results from each class to lets say 10 or 20 results per  
class.

2) I want to search over all classes seperately.

My first idea was to have one index per class and use a MultiReader  
for searching over all classes and use an IndexReader for
searching over the classes seperately. Right now I have 3 questions:
	1. Is that a good idea?
	2. Is there a way to identify the index a result comes from?
	3. Is it possible to limit the results to a number of hits from each  
index?


Thank you,
Sascha


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 08 15:50:34 2008
Return-Path: <java-user-return-34329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21232 invoked from network); 8 Jun 2008 15:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jun 2008 15:50:34 -0000
Received: (qmail 38843 invoked by uid 500); 8 Jun 2008 15:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38814 invoked by uid 500); 8 Jun 2008 15:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38802 invoked by uid 99); 8 Jun 2008 15:50:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jun 2008 08:50:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Jun 2008 15:49:40 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1576179fgb.27
        for <java-user@lucene.apache.org>; Sun, 08 Jun 2008 08:49:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=l6CVeJcNyroHeiXoaXSLg7uMxhPe4SyY9O/9C8B7ckk=;
        b=CyhPcqofRpERv9rKEqix/srbwTAl/9ld1xm+tMeqi0zYB44okDC8vpFtbE4MbYt0xX
         LgYZr8blsg4hMHIpLuAPGSMlk680TdB1iubxdk4yrTx/Xzwrsfd2JRBDiyOpayG00lYY
         35bWkSn5FAVfWmhKO/+yjjnxDEzAK8PvHoxbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=w7kIpsxxW0d2P2r692dKy1mAVlGh4xOw0gFYdMWmmnzkDfQT+Wbu6K0Mfdj87TJyt+
         oRxXCXce4UAwWtPRB9vaTvzB0yV/eXjvA/A3lqgUff2BOEfc13VWjM6DwFzHjo2/3nWk
         BGGBvtAfPShbIYTQWIxM9aLaxCNTAYQ0VprNw=
Received: by 10.86.84.5 with SMTP id h5mr3076854fgb.58.1212940196725;
        Sun, 08 Jun 2008 08:49:56 -0700 (PDT)
Received: by 10.86.63.2 with HTTP; Sun, 8 Jun 2008 08:49:56 -0700 (PDT)
Message-ID: <359a92830806080849s7bc9296aq646c7d739cba7595@mail.gmail.com>
Date: Sun, 8 Jun 2008 11:49:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexstructure design
In-Reply-To: <057E98ED-CB2E-430D-AC2A-988C52FAEFD0@evenity.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13959_27418019.1212940196712"
References: <057E98ED-CB2E-430D-AC2A-988C52FAEFD0@evenity.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13959_27418019.1212940196712
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well, why not just include a field that identifies each document's class?
Then, to search over
all classes, just don't mention the class field.

When you *do* want to restrict by class, include "AND class:blah" in your
query.

This assumes you don't have a huge number of classes and it wouldn't be a
problem
to have a clause like AND (class:cl1 OR class:cl2 OR class:cl3......). That
said, a
clause containing 100s of class:blah isn't a problem.

And if you want to get really fancy, create a Filter for each class and you
can just
combine the filters appropriately when you want to query and restrict to
classes.

Limiting the results to the top 10/20 per class is tricker, but see
HitCollectors
for a way to intervene in the hit selection process. You could keep a simple
map
that counted by class and reject each doc that came through the hitcollector
class after it reached your limit. Beware of doing a Reader.get() on each
hit, you'd have to do some work with TermDocs/TermEnum.

All that said, I haven't really kept up on the faceting that's been talked
about
in the archive, so you may want to look at the searchable mail archive and
see what's up with that.

How big is your index? That is, how many documents and how many fields
(approx) are you talking about here? That'll influence whether you would
be better off keeping them all in one index or splitting them up. But if you
can keep them in a single index, your maintenance will be *much* easier.

Best
Erick

On Sat, Jun 7, 2008 at 10:34 AM, Sascha Fahl <sascha.fahl@googlemail.com>
wrote:

> Hi,
> I am quite new to the lucene scene and I need your help :-)
> There are several document classes. Lets say documents from class A, B, C,
> D and E. What I need is the following:
>
> 1) I want to search over all classes together. So the query should hit
> results from all different classes - ideally it is possible
> to limit the results from each class to lets say 10 or 20 results per
> class.
>
> 2) I want to search over all classes seperately.
>
> My first idea was to have one index per class and use a MultiReader for
> searching over all classes and use an IndexReader for
> searching over the classes seperately. Right now I have 3 questions:
>        1. Is that a good idea?
>        2. Is there a way to identify the index a result comes from?
>        3. Is it possible to limit the results to a number of hits from each
> index?
>
>
> Thank you,
> Sascha
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13959_27418019.1212940196712--

From java-user-return-34330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 07:14:08 2008
Return-Path: <java-user-return-34330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24662 invoked from network); 9 Jun 2008 07:14:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 07:14:08 -0000
Received: (qmail 7075 invoked by uid 500); 9 Jun 2008 07:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6632 invoked by uid 500); 9 Jun 2008 07:14:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6621 invoked by uid 99); 9 Jun 2008 07:14:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 00:14:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 07:13:12 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1435492muf.5
        for <java-user@lucene.apache.org>; Mon, 09 Jun 2008 00:13:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:in-reply-to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :references:x-mailer:from;
        bh=nVbcyUkN4YG2atHBRrHDg0zXwd8TQ1GJWXYtbWI90Cw=;
        b=ozf2eOJ5H3stX9CpayeZbr1io4T/DZ99iQtyC35hUa1q4YGKX2ByTT4op+wpcfJTpC
         BYQt9k/RH3a9sQktkljB6RI+UIiQQs9SnJghQEpku2hLOk5vQ31NzDBUZbvIi1Y3siFm
         dl1nXP2mo88hZP+miSahmly4KK6tdgKcqNFus=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:in-reply-to:content-type:content-transfer-encoding
         :mime-version:subject:date:references:x-mailer:from;
        b=oUmVWdWoE+DSfXMvzlS5SKbjYoQ2dbv5WRBQnK2PtNBGUwKx5A9WTmAQDxQHiWhluk
         +GPBzAmRrqHp5ww2Q32cJ3rB0HiGTZDiWHdzYq18/5vUsY+6CfqZc7ZEZ0u6zJ6GJ/um
         2mc/TeP35a112R/4iKYJozBVMv34qMyZixkbg=
Received: by 10.103.252.17 with SMTP id e17mr2057420mus.115.1212995608302;
        Mon, 09 Jun 2008 00:13:28 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.72.103])
        by mx.google.com with ESMTPS id e8sm41199966muf.0.2008.06.09.00.13.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 09 Jun 2008 00:13:26 -0700 (PDT)
Message-Id: <E0CC0136-E149-40B6-BC68-477D299E7DE8@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830806080849s7bc9296aq646c7d739cba7595@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Indexstructure design
Date: Mon, 9 Jun 2008 09:13:22 +0200
References: <057E98ED-CB2E-430D-AC2A-988C52FAEFD0@evenity.net> <359a92830806080849s7bc9296aq646c7d739cba7595@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi and thanks a lot,

I'll take a look at the HitCollector thing.
I think I will have around 500.000 - 1.000.000 docs per class.
So having different indeces is a good idea I think. Especially because
half of the requests will point to only one document class and not to  
all classes.
Is there a way to get the index from a result? So I would not need to  
have this one
special field for identifying the document classes.

Best,
sascha

Am 08.06.2008 um 17:49 schrieb Erick Erickson:

> well, why not just include a field that identifies each document's  
> class?
> Then, to search over
> all classes, just don't mention the class field.
>
> When you *do* want to restrict by class, include "AND class:blah" in  
> your
> query.
>
> This assumes you don't have a huge number of classes and it wouldn't  
> be a
> problem
> to have a clause like AND (class:cl1 OR class:cl2 OR  
> class:cl3......). That
> said, a
> clause containing 100s of class:blah isn't a problem.
>
> And if you want to get really fancy, create a Filter for each class  
> and you
> can just
> combine the filters appropriately when you want to query and  
> restrict to
> classes.
>
> Limiting the results to the top 10/20 per class is tricker, but see
> HitCollectors
> for a way to intervene in the hit selection process. You could keep  
> a simple
> map
> that counted by class and reject each doc that came through the  
> hitcollector
> class after it reached your limit. Beware of doing a Reader.get() on  
> each
> hit, you'd have to do some work with TermDocs/TermEnum.
>
> All that said, I haven't really kept up on the faceting that's been  
> talked
> about
> in the archive, so you may want to look at the searchable mail  
> archive and
> see what's up with that.
>
> How big is your index? That is, how many documents and how many fields
> (approx) are you talking about here? That'll influence whether you  
> would
> be better off keeping them all in one index or splitting them up.  
> But if you
> can keep them in a single index, your maintenance will be *much*  
> easier.
>
> Best
> Erick
>
> On Sat, Jun 7, 2008 at 10:34 AM, Sascha Fahl <sascha.fahl@googlemail.com 
> >
> wrote:
>
>> Hi,
>> I am quite new to the lucene scene and I need your help :-)
>> There are several document classes. Lets say documents from class  
>> A, B, C,
>> D and E. What I need is the following:
>>
>> 1) I want to search over all classes together. So the query should  
>> hit
>> results from all different classes - ideally it is possible
>> to limit the results from each class to lets say 10 or 20 results per
>> class.
>>
>> 2) I want to search over all classes seperately.
>>
>> My first idea was to have one index per class and use a MultiReader  
>> for
>> searching over all classes and use an IndexReader for
>> searching over the classes seperately. Right now I have 3 questions:
>>       1. Is that a good idea?
>>       2. Is there a way to identify the index a result comes from?
>>       3. Is it possible to limit the results to a number of hits  
>> from each
>> index?
>>
>>
>> Thank you,
>> Sascha
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 07:58:11 2008
Return-Path: <java-user-return-34331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35686 invoked from network); 9 Jun 2008 07:58:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 07:58:10 -0000
Received: (qmail 51163 invoked by uid 500); 9 Jun 2008 07:58:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51135 invoked by uid 500); 9 Jun 2008 07:58:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51124 invoked by uid 99); 9 Jun 2008 07:58:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 00:58:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 07:57:17 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2315252rvb.5
        for <java-user@lucene.apache.org>; Mon, 09 Jun 2008 00:57:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tkhu+5ltNn/SNsJ6zInOY2ATigqnJdXoJjxCiLyAtec=;
        b=tNv+BCYh6KjNp4vQiFtZ4L7ugU9vK1gcsHQRpUb2X7MQYp0VqohL76fBFsYsADIGpE
         y+h35IAJ3i6FX0u0ZHnnGRA9nqO1Sv4+uOgzBGBsi5e+4Zws0Gztzw4Gic1hU812T8iv
         YZaWC/TLRYWv676AnCtA9/o+fWg867Ts/nc5Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=eyo62FOZFjX68SgyUPxS9r+AuUr0zNBMI5YFa5d8Eh/tN0/HuXb1x6OBCE7KhWTlcK
         qmsX2br0g2zGInEkEUo42Rpkss+2M/uMbQ2n+28nskbVPipoFolHe3J6mazEOdLCP4tV
         gjJFhzZA84KlWWrFxUImvtUZeD0+Ei4sJpj74=
Received: by 10.141.76.21 with SMTP id d21mr1859026rvl.270.1212998254673;
        Mon, 09 Jun 2008 00:57:34 -0700 (PDT)
Received: by 10.140.174.15 with HTTP; Mon, 9 Jun 2008 00:57:34 -0700 (PDT)
Message-ID: <867513fe0806090057r3c531a89t34162157d966ac3e@mail.gmail.com>
Date: Mon, 9 Jun 2008 13:27:34 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexstructure design
In-Reply-To: <E0CC0136-E149-40B6-BC68-477D299E7DE8@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9864_33549248.1212998254706"
References: <057E98ED-CB2E-430D-AC2A-988C52FAEFD0@evenity.net>
	 <359a92830806080849s7bc9296aq646c7d739cba7595@mail.gmail.com>
	 <E0CC0136-E149-40B6-BC68-477D299E7DE8@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9864_33549248.1212998254706
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Considering you have that number of documents for each class, you may think
of splitting the index (as I believe that the total number would be high).
What exactly would you mean by 'get the index' from the result? Do you mean
that you would want to fetch the class as well (without actually fetching
it?).
If thats the case you might just collect documents from different indexes
into different holders so you would know what belongs to which index.

--
Anshum

On Mon, Jun 9, 2008 at 12:43 PM, Sascha Fahl <sascha.fahl@googlemail.com>
wrote:

> Hi and thanks a lot,
>
> I'll take a look at the HitCollector thing.
> I think I will have around 500.000 - 1.000.000 docs per class.
> So having different indeces is a good idea I think. Especially because
> half of the requests will point to only one document class and not to all
> classes.
> Is there a way to get the index from a result? So I would not need to have
> this one
> special field for identifying the document classes.
>
> Best,
> sascha
>
> Am 08.06.2008 um 17:49 schrieb Erick Erickson:
>
>
>  well, why not just include a field that identifies each document's class?
>> Then, to search over
>> all classes, just don't mention the class field.
>>
>> When you *do* want to restrict by class, include "AND class:blah" in your
>> query.
>>
>> This assumes you don't have a huge number of classes and it wouldn't be a
>> problem
>> to have a clause like AND (class:cl1 OR class:cl2 OR class:cl3......).
>> That
>> said, a
>> clause containing 100s of class:blah isn't a problem.
>>
>> And if you want to get really fancy, create a Filter for each class and
>> you
>> can just
>> combine the filters appropriately when you want to query and restrict to
>> classes.
>>
>> Limiting the results to the top 10/20 per class is tricker, but see
>> HitCollectors
>> for a way to intervene in the hit selection process. You could keep a
>> simple
>> map
>> that counted by class and reject each doc that came through the
>> hitcollector
>> class after it reached your limit. Beware of doing a Reader.get() on each
>> hit, you'd have to do some work with TermDocs/TermEnum.
>>
>> All that said, I haven't really kept up on the faceting that's been talked
>> about
>> in the archive, so you may want to look at the searchable mail archive and
>> see what's up with that.
>>
>> How big is your index? That is, how many documents and how many fields
>> (approx) are you talking about here? That'll influence whether you would
>> be better off keeping them all in one index or splitting them up. But if
>> you
>> can keep them in a single index, your maintenance will be *much* easier.
>>
>> Best
>> Erick
>>
>> On Sat, Jun 7, 2008 at 10:34 AM, Sascha Fahl <sascha.fahl@googlemail.com>
>> wrote:
>>
>>  Hi,
>>> I am quite new to the lucene scene and I need your help :-)
>>> There are several document classes. Lets say documents from class A, B,
>>> C,
>>> D and E. What I need is the following:
>>>
>>> 1) I want to search over all classes together. So the query should hit
>>> results from all different classes - ideally it is possible
>>> to limit the results from each class to lets say 10 or 20 results per
>>> class.
>>>
>>> 2) I want to search over all classes seperately.
>>>
>>> My first idea was to have one index per class and use a MultiReader for
>>> searching over all classes and use an IndexReader for
>>> searching over the classes seperately. Right now I have 3 questions:
>>>      1. Is that a good idea?
>>>      2. Is there a way to identify the index a result comes from?
>>>      3. Is it possible to limit the results to a number of hits from each
>>> index?
>>>
>>>
>>> Thank you,
>>> Sascha
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_9864_33549248.1212998254706--

From java-user-return-34332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 13:51:42 2008
Return-Path: <java-user-return-34332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45302 invoked from network); 9 Jun 2008 13:51:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 13:51:42 -0000
Received: (qmail 29029 invoked by uid 500); 9 Jun 2008 13:51:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29001 invoked by uid 500); 9 Jun 2008 13:51:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28990 invoked by uid 99); 9 Jun 2008 13:51:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 06:51:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 13:50:49 +0000
Received: by wa-out-1112.google.com with SMTP id l24so1833624waf.11
        for <java-user@lucene.apache.org>; Mon, 09 Jun 2008 06:51:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=OrjX560UkJOLbxGwks3CNQkcTNMQLoRPDDVMGmD0mgg=;
        b=nodf9ZA3bp9AI1E5hWm5jf1nfH40vvhwcptgQSXPO38KFlJiDX0DFzG3qFzxgUF7ZT
         YqjKPIgo8SFEmRo36Y2CVYQ1I3WLsGGIPOpIb/j1Ie0qu953U7jWwcVCYhGr/DTAgZ/Y
         LBvY8J0bHO3PVDGt8/mJ5SdGp8ylhbf/v6oTs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=s7j8Y6iztEtwTJjzvqT3M/v1N0rmd5/wt818lYIN4EDpLrF8g5Svc/eniyc7IUUdNy
         /Mt7m3alb3zGxWJ7rR7Oz43U5sS3czkNhllpLVwJ3CzkkbOugCcWfJpdFIP4tHLE3xae
         VPwzwsNPExbt8f29vbndtcOiNgM3PmmTqK0m0=
Received: by 10.114.53.1 with SMTP id b1mr3304977waa.53.1213019466602;
        Mon, 09 Jun 2008 06:51:06 -0700 (PDT)
Received: by 10.114.88.6 with HTTP; Mon, 9 Jun 2008 06:51:06 -0700 (PDT)
Message-ID: <5816fbdd0806090651o5c8952ecqe1bb5fdd9aff4cb5@mail.gmail.com>
Date: Mon, 9 Jun 2008 19:21:06 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Running Lucene in a Clustered Environment
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15428_6215952.1213019466549"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15428_6215952.1213019466549
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I'm new to Lucene. I need to run Lucene in a clustered environment. So
creating the index in the local file system is not an option and it is
better if I can create the index in the database as all nodes can share it.

Can anyone of you please suggest me a way to do this? I got to know about
org.apache.lucene.store.jdbc.JdbcDirectory from mailing list archives.
However, since it's not part of the Lucene release itself I'd be pleased if
someone can point me where to find an implementation of it.

Additionally, instead of keeping the index inside the database, is there any
other way to work Lucene in a clustering environment?

Thanks in advance

Kalani



-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_15428_6215952.1213019466549--

From java-user-return-34333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 14:47:32 2008
Return-Path: <java-user-return-34333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75099 invoked from network); 9 Jun 2008 14:47:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 14:47:31 -0000
Received: (qmail 15701 invoked by uid 500); 9 Jun 2008 14:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15661 invoked by uid 500); 9 Jun 2008 14:47:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15558 invoked by uid 99); 9 Jun 2008 14:47:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 07:47:26 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 14:46:36 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m59EkcUD009436
	for <java-user@lucene.apache.org>; Mon, 9 Jun 2008 17:46:39 +0300
Received: from [10.142.130.136] ([10.142.130.136]) by nimitz.teamw.com with ESMTP
	 id mck#=q=s; 9 Jun 2008 17:46:00 +0300
Message-ID: <484D42CF.3070601@teamware.com>
Date: Mon, 09 Jun 2008 17:48:47 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Rebuilding parallel indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I have a design where I will be using multiple index shards to hold approx 7.5 
million documents per index per month over many years.  These will be large 
static R/O indexes but the corresponding smaller parallel index will get many 
frequent changes.

I understand from previous replies by Hoss that the technique to handle this is 
to use parallel indexes where the parallel index gets rebuilt periodically with 
the changing data.

However, this 'periodically' needs to be quite frequent to try to provide 
responsive changes to the index, potentially several times a dat.  One problem 
is that there can be updates to any of the data in almost any month, so an 
update by a user to 120 documents, one document per month for 10 years, requires 
a full rebuild of the 120 index shards of 7.5m docs each...

I was wondering what the technical reasons were why a 'delete+add' could not 
allow the original docId to be re-used, thus keeping the two parallel indexes in 
sync without requiring a rebuild.

If this could be overcome, this would make this parallel index pattern so much 
more useful for large volume data sets.

Any thoughts
Antony





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 15:21:47 2008
Return-Path: <java-user-return-34334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33253 invoked from network); 9 Jun 2008 15:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 15:21:46 -0000
Received: (qmail 89082 invoked by uid 500); 9 Jun 2008 15:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88761 invoked by uid 500); 9 Jun 2008 15:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88750 invoked by uid 99); 9 Jun 2008 15:21:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 08:21:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 15:20:46 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1K5j6t-0006xJ-74
	for java-user@lucene.apache.org; Mon, 09 Jun 2008 16:16:43 +0100
Message-ID: <484D4A5D.4000507@propylon.com>
Date: Mon, 09 Jun 2008 16:21:01 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: number of hits per document
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi,

Is there an easy way to find out the number of hits per document for a 
Query, rather than just for a Term?

Let's say, for example, I have a document like this:

"here is cats near dogs and here is cats a long long way from dogs"

and I use a SpanNearQuery to find "cats" near "dogs" with a slop of 1 - 
I need to be able to find out that there was 1 hit, even though there 
are 2 occurrences of "cats" and 2 of "dogs" - there is still only 1 hit 
that matches my Query.

Is this possible?

Thanks,
JB.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 19:36:16 2008
Return-Path: <java-user-return-34335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82619 invoked from network); 9 Jun 2008 19:36:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 19:36:15 -0000
Received: (qmail 57856 invoked by uid 500); 9 Jun 2008 19:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57818 invoked by uid 500); 9 Jun 2008 19:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57807 invoked by uid 99); 9 Jun 2008 19:36:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 12:36:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 19:35:13 +0000
Received: from [192.168.1.101] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m59JZmc16342
	for <java-user@lucene.apache.org>; Mon, 9 Jun 2008 14:35:48 -0500
Message-ID: <484D85FE.7010907@getopt.org>
Date: Mon, 09 Jun 2008 21:35:26 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Rebuilding parallel indexes
References: <484D42CF.3070601@teamware.com>
In-Reply-To: <484D42CF.3070601@teamware.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman wrote:
> I have a design where I will be using multiple index shards to hold 
> approx 7.5 million documents per index per month over many years.  These 
> will be large static R/O indexes but the corresponding smaller parallel 
> index will get many frequent changes.
> 
> I understand from previous replies by Hoss that the technique to handle 
> this is to use parallel indexes where the parallel index gets rebuilt 
> periodically with the changing data.
> 
> However, this 'periodically' needs to be quite frequent to try to 
> provide responsive changes to the index, potentially several times a 
> dat.  One problem is that there can be updates to any of the data in 
> almost any month, so an update by a user to 120 documents, one document 
> per month for 10 years, requires a full rebuild of the 120 index shards 
> of 7.5m docs each...
> 
> I was wondering what the technical reasons were why a 'delete+add' could 
> not allow the original docId to be re-used, thus keeping the two 
> parallel indexes in sync without requiring a rebuild.
> 
> If this could be overcome, this would make this parallel index pattern 
> so much more useful for large volume data sets.
> 
> Any thoughts

I have a thought ;) Perhaps you could use a FilteredIndexReader to 
maintain a map between new IDs and old IDs, and remap on the fly. 
Although I think that some parts of Lucene depend on the fact that in a 
normal index the IDs are monotonically increasing ... this would 
complicate the issue.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 20:53:42 2008
Return-Path: <java-user-return-34336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28944 invoked from network); 9 Jun 2008 20:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 20:53:42 -0000
Received: (qmail 74528 invoked by uid 500); 9 Jun 2008 20:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74482 invoked by uid 500); 9 Jun 2008 20:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74471 invoked by uid 99); 9 Jun 2008 20:53:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 13:53:38 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.199] (HELO out4.bezeqint.net) (192.115.188.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 20:52:48 +0000
Received: from your0548c161e1 (unknown [80.250.146.237])
	by out4.bezeqint.net (Postfix) with ESMTPA id 77961B08422
	for <java-user@lucene.apache.org>; Mon,  9 Jun 2008 23:39:24 +0300 (IDT)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: Options of Field constructor accepting Reader
Date: Mon, 9 Jun 2008 23:52:52 +0300
Message-ID: <001001c8ca72$cb10fdb0$ed92fa50@your0548c161e1>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0011_01C8CA8B.F05E35B0"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcjKcsjxlch1DCnARQqxXmUHGo8qog==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0011_01C8CA8B.F05E35B0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,
 
I was wondering why only the Field constructor which accepts a String offers
Store and Index options? I understand there might be no logic in offering
them for the TokenStream constructor, but what's wrong in Storing an input
from a Reader, that 2.3.2 does not allow it?
 
Itamar.

------=_NextPart_000_0011_01C8CA8B.F05E35B0--



From java-user-return-34337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 21:28:02 2008
Return-Path: <java-user-return-34337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42324 invoked from network); 9 Jun 2008 21:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 21:28:02 -0000
Received: (qmail 33419 invoked by uid 500); 9 Jun 2008 21:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33392 invoked by uid 500); 9 Jun 2008 21:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33381 invoked by uid 99); 9 Jun 2008 21:27:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 14:27:57 -0700
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,SUBJECT_FUZZY_TION,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 21:27:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K5ote-0006oC-Qt
	for java-user@lucene.apache.org; Mon, 09 Jun 2008 14:27:22 -0700
Message-ID: <17742490.post@talk.nabble.com>
Date: Mon, 9 Jun 2008 14:27:22 -0700 (PDT)
From: stevieray <mud-nabble@mudworks.net>
To: java-user@lucene.apache.org
Subject: Compass - Reloading Domain Object Defintiion Files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mud-nabble@mudworks.net
X-Virus-Checked: Checked by ClamAV on apache.org



I am interested in changing the search configuration for grails domain
objects on a running grails instance.   Near as I can tell, I need to reload
the mappings (Domain.cpm.xml) and then reindex lucene.  Is this the correct
approach?  If so, how would I go about reloading the mapping files?  What is
the best way to force lucene to reindex?

Thank you.


-- 
View this message in context: http://www.nabble.com/Compass---Reloading-Domain-Object-Defintiion-Files-tp17742490p17742490.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 21:45:01 2008
Return-Path: <java-user-return-34338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55183 invoked from network); 9 Jun 2008 21:45:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 21:45:00 -0000
Received: (qmail 65465 invoked by uid 500); 9 Jun 2008 21:44:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65431 invoked by uid 500); 9 Jun 2008 21:44:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65420 invoked by uid 99); 9 Jun 2008 21:44:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 14:44:55 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=SPF_PASS,SUBJECT_FUZZY_TION,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jun 2008 21:43:57 +0000
Received: (qmail 5746 invoked by uid 60001); 9 Jun 2008 21:44:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=pzTNUae9K5ciQFymf3cnlnPeu3hw1udxwTXS1j2z+CKi299GzHP+mSwiIyNMwJoPQd8Wxd0gFtgnoQ2I17wj5yiVpSgjZs4MrdKOvHHV30gcxoiU9/8MhLD0TnMRoG51GNwQZIZT9qJax/zyGHCW25gT1IMi7WETBbBONjE2D/A=;
Received: from [72.231.9.236] by web50307.mail.re2.yahoo.com via HTTP; Mon, 09 Jun 2008 14:44:18 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 9 Jun 2008 14:44:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Compass - Reloading Domain Object Defintiion Files
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <913633.5479.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,


It looks like you wanted to post this to Compass mailing list, but posted it to the Lucene user list.

Otis 
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: stevieray <mud-nabble@mudworks.net>
> To: java-user@lucene.apache.org
> Sent: Monday, June 9, 2008 5:27:22 PM
> Subject: Compass - Reloading Domain Object Defintiion Files
> 
> 
> 
> I am interested in changing the search configuration for grails domain
> objects on a running grails instance.   Near as I can tell, I need to reload
> the mappings (Domain.cpm.xml) and then reindex lucene.  Is this the correct
> approach?  If so, how would I go about reloading the mapping files?  What is
> the best way to force lucene to reindex?
> 
> Thank you.
> 
> 
> -- 
> View this message in context: 
> http://www.nabble.com/Compass---Reloading-Domain-Object-Defintiion-Files-tp17742490p17742490.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 21:46:57 2008
Return-Path: <java-user-return-34339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58420 invoked from network); 9 Jun 2008 21:46:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 21:46:56 -0000
Received: (qmail 70755 invoked by uid 500); 9 Jun 2008 21:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70718 invoked by uid 500); 9 Jun 2008 21:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70707 invoked by uid 99); 9 Jun 2008 21:46:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 14:46:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jun 2008 21:46:00 +0000
Received: (qmail 80466 invoked by uid 60001); 9 Jun 2008 21:46:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=r/CnkQouMDMUTluG6uBvtGgdMbxAbGX//XZ9okWkZwu6H4tTrJesclMltLxsHXPlF/C/lk9w9rGGPzp6b6hZKWGAENm5xuyEhwbMR8iqKLwsm8pPlqHm1Iv36OzHWyT0qLpd5qyjhfmRW3ZVex3OnCfnNkl1YLtfVkJqW2zPly8=;
Received: from [72.231.9.236] by web50311.mail.re2.yahoo.com via HTTP; Mon, 09 Jun 2008 14:46:16 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 9 Jun 2008 14:46:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Running Lucene in a Clustered Environment
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <567100.80405.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Kalani,

Is creating a local index and then distributing it to all nodes in the cluster an option for you?
Or maybe you can simply put your index on a SAN and let all search nodes access the same index there?


Otis --
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Kalani Ruwanpathirana <kalanir@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, June 9, 2008 9:51:06 AM
> Subject: Running Lucene in a Clustered Environment
> 
> Hi all,
> 
> I'm new to Lucene. I need to run Lucene in a clustered environment. So
> creating the index in the local file system is not an option and it is
> better if I can create the index in the database as all nodes can share it.
> 
> Can anyone of you please suggest me a way to do this? I got to know about
> org.apache.lucene.store.jdbc.JdbcDirectory from mailing list archives.
> However, since it's not part of the Lucene release itself I'd be pleased if
> someone can point me where to find an implementation of it.
> 
> Additionally, instead of keeping the index inside the database, is there any
> other way to work Lucene in a clustering environment?
> 
> Thanks in advance
> 
> Kalani
> 
> 
> 
> -- 
> Kalani Ruwanpathirana
> Department of Computer Science & Engineering
> University of Moratuwa


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 21:50:11 2008
Return-Path: <java-user-return-34340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59325 invoked from network); 9 Jun 2008 21:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 21:50:11 -0000
Received: (qmail 75613 invoked by uid 500); 9 Jun 2008 21:50:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75590 invoked by uid 500); 9 Jun 2008 21:50:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75579 invoked by uid 99); 9 Jun 2008 21:50:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 14:50:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jun 2008 21:49:08 +0000
Received: (qmail 30242 invoked by uid 60001); 9 Jun 2008 21:49:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=eRvdiToJljZR+VfO3vsfiY8TQ+1HNChz9DyPfDjsckexqTcgWdH1DbhB9FEC6weZ/kHbyuK2VXYbTk8ITTK51L3bBmlIfY3e3MP7eLkspzcBQ6ZwYyau9I13zlLcX6qTFp4X2vRKkwW35t7ESXliCMQaO0OST81zzMPDKxhIBtA=;
Received: from [72.231.9.236] by web50304.mail.re2.yahoo.com via HTTP; Mon, 09 Jun 2008 14:49:29 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 9 Jun 2008 14:49:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How international languages are supported in Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <377003.26227.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Daniel,

What makes you say that about language detection?  Wouldn't that depend on the language detection approach or tool one uses and on the type and amount of content one trains language detector on?  And what is the threshold for "reliable enough" that you have in mind?


Thanks,
Otis --
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Daniel Noll <daniel@nuix.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 5, 2008 7:36:11 PM
> Subject: Re: How international languages are supported in Lucene
> 
> > But basically consider why this must be so, especially when
> > stemming. Languages are so variable that you'd get wildly
> > different (and inappropriate) results if you tried to analyze them
> > with the same analyzer. Especially when you get different
> > language encodings in the document.
> 
> Well... technically encoding is out of the scope of Lucene since we're passing 
> in a Reader.
> 
> I have to say though, analysing with the most naive analyser possible (the 
> default one with no stop words and no stemming) works well enough.
> 
> Language detection isn't at a point where it's reliable enough to use to 
> determine which analyser to use automatically.
> 
> Daniel
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 21:53:00 2008
Return-Path: <java-user-return-34341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59927 invoked from network); 9 Jun 2008 21:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 21:52:59 -0000
Received: (qmail 78678 invoked by uid 500); 9 Jun 2008 21:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78646 invoked by uid 500); 9 Jun 2008 21:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78635 invoked by uid 99); 9 Jun 2008 21:52:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 14:52:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Jun 2008 21:51:59 +0000
Received: (qmail 77406 invoked by uid 60001); 9 Jun 2008 21:52:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=WPyeyRmyd17A9r14ek8N8M68dbz6PsQZfvHKQqpG9P2xJa45qpk5gepwMxVKrI1ebqvX725o5qrfn3L8m7d2TXysxvhL1/QqdEDnizmZn3MVZS2dD5dDpqIakBEyLUjShSBATE/l7+SMmYBHQrHNvnbU6SuVJ4bBBEHogBZkMQs=;
Received: from [72.231.9.236] by web50309.mail.re2.yahoo.com via HTTP; Mon, 09 Jun 2008 14:52:20 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 9 Jun 2008 14:52:20 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How international languages are supported in Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <667138.68992.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Daniel,

What makes you say that about language detection?  Wouldn't that depend on the language detection approach or tool one uses and on the type and amount of content one trains language detector on?  And what is the threshold for "reliable enough" that you have in mind?


Thanks,
Otis --
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Daniel Noll <daniel@nuix.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 5, 2008 7:36:11 PM
> Subject: Re: How international languages are supported in Lucene
> 
> > But basically consider why this must be so, especially when
> > stemming. Languages are so variable that you'd get wildly
> > different (and inappropriate) results if you tried to analyze them
> > with the same analyzer. Especially when you get different
> > language encodings in the document.
> 
> Well... technically encoding is out of the scope of Lucene since we're passing 
> in a Reader.
> 
> I have to say though, analysing with the most naive analyser possible (the 
> default one with no stop words and no stemming) works well enough.
> 
> Language detection isn't at a point where it's reliable enough to use to 
> determine which analyser to use automatically.
> 
> Daniel
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 09 22:52:17 2008
Return-Path: <java-user-return-34342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82549 invoked from network); 9 Jun 2008 22:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jun 2008 22:52:17 -0000
Received: (qmail 38337 invoked by uid 500); 9 Jun 2008 22:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38308 invoked by uid 500); 9 Jun 2008 22:52:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38293 invoked by uid 99); 9 Jun 2008 22:52:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 15:52:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 22:51:24 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2700983rvb.5
        for <java-user@lucene.apache.org>; Mon, 09 Jun 2008 15:51:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=dU/203uWDFRxvpxuLTjIhwtb5FJGrG06K6VF+WyYzVE=;
        b=tyCmQ3MvZh3b80kmDUgPhiYHnMZGtZU0Ct52pbAifbIjbved6XcvfqzQrwc5mhd/D/
         dme7wHS7PQBzQwaFhWt56TfcDbdQ7xiSkD6zsViTpxQE0RAxMU7rtV2XsAXKpkRgOS6c
         2VEFnOYDsxTrMUq1JRPnUQkoSncjF7+kRRD60=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=tSF/cJ/eiQKQjOEwS6yIr4zyEh/Gy5Q/97OKSOiwtP51j+9lnR5KyEGnk4eMXYpLnE
         oOYJzaeqDf9P7WW+yaOmAUKvQc5OhqAqbkC++cqMvKXIQeV3GtXQS/i/oAQMHdAJck7U
         su7wIpREBkasWPhoFpyHpDy+YrY+plWeIGIfI=
Received: by 10.141.23.7 with SMTP id a7mr2546508rvj.58.1213051901512;
        Mon, 09 Jun 2008 15:51:41 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Mon, 9 Jun 2008 15:51:41 -0700 (PDT)
Message-ID: <5e76f3840806091551o3826af99wdafed8133561eacc@mail.gmail.com>
Date: Mon, 9 Jun 2008 18:51:41 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Concurrent query benchmarks
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

A number of people have asked about query benchmarks.

I have posted benchmarks for concurrent query requests for Lucene
2.3.1 on my blog, where I look at 1 - 4096 concurrent requests:
  http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html

I hope you find this useful.

thanks,

Glen

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 00:09:10 2008
Return-Path: <java-user-return-34343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98501 invoked from network); 10 Jun 2008 00:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 00:09:09 -0000
Received: (qmail 6797 invoked by uid 500); 10 Jun 2008 00:09:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6771 invoked by uid 500); 10 Jun 2008 00:09:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6760 invoked by uid 99); 10 Jun 2008 00:09:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 17:09:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 00:08:17 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6FEB04A86ED
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 10:10:21 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: How international languages are supported in Lucene
Date: Tue, 10 Jun 2008 10:09:10 +1000
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <377003.26227.qm@web50304.mail.re2.yahoo.com>
In-Reply-To: <377003.26227.qm@web50304.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806101009.10700.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 10 June 2008 07:49:29 Otis Gospodnetic wrote:
> Hi Daniel,
>
> What makes you say that about language detection?  Wouldn't that depend on
> the language detection approach or tool one uses and on the type and amount
> of content one trains language detector on?  And what is the threshold for
> "reliable enough" that you have in mind?

I can't come up with a number of course, but I can say for certain that ICU's 
detector is unusable for detecting languages.  It's barely good enough to 
correctly identify the charset; if you create a simple test in one charset it 
often detects it as another.  If you then re-encode the text in that charset, 
it detects it as being yet another, and so forth.

If you know of any better [open source] libraries for the same purpose, I'd 
love to hear of it.

Additionally, anything the developer or user has to train I consider 
unreliable also.  If a detector has to be trained, it should be trained by 
the ones who are distributing it.  Not everyone has a corpus of every 
language in the world in order to train such a thing. :-/

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 00:48:39 2008
Return-Path: <java-user-return-34344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15491 invoked from network); 10 Jun 2008 00:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 00:48:39 -0000
Received: (qmail 28163 invoked by uid 500); 10 Jun 2008 00:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28132 invoked by uid 500); 10 Jun 2008 00:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28113 invoked by uid 99); 10 Jun 2008 00:48:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 17:48:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 Jun 2008 00:47:43 +0000
Received: (qmail 44258 invoked by uid 60001); 10 Jun 2008 00:46:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=eK0yFqe8UV7VvN9VpJGoc5mjBgqTzXUUguclB5cI6poRXUi05LFHotcSXmooyBRJbk5lvKOuH7T1qSFFU+UqLNmb7xVXmfG+m4c9PAbZaD/JF8c2ZYMuCRmAoxydsIMzlvJ75zp7TmAb4URUDFmGWeMUnNqHlyl8miYLL9OcOIM=;
Received: from [72.231.9.236] by web50312.mail.re2.yahoo.com via HTTP; Mon, 09 Jun 2008 17:46:58 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 9 Jun 2008 17:46:58 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How international languages are supported in Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <231366.44004.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Aha, I see.  I wasn't referring to character-encoding-based lang ID.  That is probably good enough if you need to know if the text is English or if it's Chinese or Japanese or Korean or Russian Cyrillic or Arabic or...

I think there is a bit missing in your statement about training.  You can't just train on, say "English".  There are all kinds of "English" out there.  The distribution of terms in WSJ is probably a lot different from what you might find in some corpus of medical texts or botany tests or contemporary art.

As for not everyone having access to a corpus, I've come to love Wikipedia for exactly this thing. :)  For an NLP class I took recently we used Croatian Wikipedia while developing an unsupervised morphological analyzer for highly inflected languages (Croatian being one of them - 7 cases, a pile of case/number/gender-dependent suffixes...).  The analyzer ended up matching the state-of-the-art results. :)


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Daniel Noll <daniel@nuix.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 10, 2008 2:09:10 AM
> Subject: Re: How international languages are supported in Lucene
> 
> On Tuesday 10 June 2008 07:49:29 Otis Gospodnetic wrote:
> > Hi Daniel,
> >
> > What makes you say that about language detection?  Wouldn't that depend on
> > the language detection approach or tool one uses and on the type and amount
> > of content one trains language detector on?  And what is the threshold for
> > "reliable enough" that you have in mind?
> 
> I can't come up with a number of course, but I can say for certain that ICU's 
> detector is unusable for detecting languages.  It's barely good enough to 
> correctly identify the charset; if you create a simple test in one charset it 
> often detects it as another.  If you then re-encode the text in that charset, 
> it detects it as being yet another, and so forth.
> 
> If you know of any better [open source] libraries for the same purpose, I'd 
> love to hear of it.
> 
> Additionally, anything the developer or user has to train I consider 
> unreliable also.  If a detector has to be trained, it should be trained by 
> the ones who are distributing it.  Not everyone has a corpus of every 
> language in the world in order to train such a thing. :-/
> 
> Daniel
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 00:52:33 2008
Return-Path: <java-user-return-34345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15917 invoked from network); 10 Jun 2008 00:52:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 00:52:32 -0000
Received: (qmail 30763 invoked by uid 500); 10 Jun 2008 00:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30727 invoked by uid 500); 10 Jun 2008 00:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30715 invoked by uid 99); 10 Jun 2008 00:52:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 17:52:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 Jun 2008 00:51:37 +0000
Received: (qmail 26184 invoked by uid 60001); 10 Jun 2008 00:50:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=tRXPZ2gJtgBFGjw8z27jsBMItxzSZha4IvnXAlwYsqS8OFCmFsuwJPDvYwpTSWMhmambOXeBItauqYoNSnixKTHW0TRnKct4Gg84lYpEbSPSx8En0l3GEyzaKf1MqJp4i12CB8E5qtasz2ePxRybNLPX4zD+9txakVny2AcWO3M=;
Received: from [72.231.9.236] by web50311.mail.re2.yahoo.com via HTTP; Mon, 09 Jun 2008 17:50:53 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 9 Jun 2008 17:50:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Concurrent query benchmarks
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <193059.25790.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Glen,

Thanks for sharing.  Does your benchmarking tool build on top of contrib/benchmark? (not sure if that one lets you specify the number of concurrent threads -- if it does not, perhaps this is an opportunity to add this functionality).

I couldn't find info about the index format (compound or not) you used.  It would be good to see the comparison with high number of threads for the 2 index formats.  It would also be good to see the numbers when the index has no deletion and when it has some percentage of docs deleted.


Finally, if you end up extending contrib/benchmark, I think just having the ability to pump the results of that into a gnuplot script would be nice to have.  I've written a standalone benchmarking tool that did pretty much what yours seems to do, but I wrote it for Technorati, so I can't release it. :(

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Glen Newton <glen.newton@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 10, 2008 12:51:41 AM
> Subject: Concurrent query benchmarks
> 
> A number of people have asked about query benchmarks.
> 
> I have posted benchmarks for concurrent query requests for Lucene
> 2.3.1 on my blog, where I look at 1 - 4096 concurrent requests:
>   http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
> 
> I hope you find this useful.
> 
> thanks,
> 
> Glen
> 
> -- 
> 
> -
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 05:48:11 2008
Return-Path: <java-user-return-34346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7882 invoked from network); 10 Jun 2008 05:48:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 05:48:11 -0000
Received: (qmail 83695 invoked by uid 500); 10 Jun 2008 05:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83669 invoked by uid 500); 10 Jun 2008 05:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83658 invoked by uid 99); 10 Jun 2008 05:48:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 22:48:06 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 05:47:18 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m5A5jRum032722
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 08:45:27 +0300
Received: from [10.142.130.136] ([10.142.130.136]) by nimitz.teamw.com with ESMTP
	 id m@kl43h8; 10 Jun 2008 08:45:00 +0300
Message-ID: <484E156E.8080703@teamware.com>
Date: Tue, 10 Jun 2008 08:47:26 +0300
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Rebuilding parallel indexes
References: <484D42CF.3070601@teamware.com> <484D85FE.7010907@getopt.org>
In-Reply-To: <484D85FE.7010907@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Andrzej Bialecki wrote:

> I have a thought ;) Perhaps you could use a FilteredIndexReader to maintain a
> map between new IDs and old IDs, and remap on the fly. Although I think that
> some parts of Lucene depend on the fact that in a normal index the IDs are
> monotonically increasing ... this would complicate the issue.

Interesting thought!  I've not yet looked into the guts of the ParallelReader, 
but can imagine that it could work, but it sounds like an effective rewrite of 
ParallelReader.  Optimize would be a problem though as optimizing this index 
would then mean the mapping table would need recreation (I'm assuming the 
optimization would muck up the Ids if only the parallel index was optimized).

You'd also need to get the new doc Id for each doc that is added.  Are docIds 
allocated during addDocument or during the commit?

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 06:14:14 2008
Return-Path: <java-user-return-34347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13758 invoked from network); 10 Jun 2008 06:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 06:14:14 -0000
Received: (qmail 1295 invoked by uid 500); 10 Jun 2008 06:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1256 invoked by uid 500); 10 Jun 2008 06:14:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1245 invoked by uid 99); 10 Jun 2008 06:14:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Jun 2008 23:14:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 06:13:20 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2479304wfc.20
        for <java-user@lucene.apache.org>; Mon, 09 Jun 2008 23:13:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lXUrsL4s/qa1FPAp8Xv4MtAOesvo+eTOQK6iHUO4+3w=;
        b=Jz7+ng6rPkSwMjK/9uMI4/HCkype5s8xwv2V9qN7p1CHAYfpYNVR7BR1Av4RqaiawY
         yK+sA57RIPI7ZPocaa03zqdQGeHh+IRRlWU7CGiXXnO+VcAiAV5sqIuyN7mqSFr8WYVX
         QF5cuZdW7hxKuF1304nkxbvJ78S1R8+vVGcBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rVYGjEunBfj3tUYyqUQ0TN5FCnBCr3++8Yac0gNgA/bBIOLHp+s4PPlWy2am1b5sii
         w1tSmiO8lAd+jGWzybn3ZaOWKE03xj4jbw6MlmiBnTXlFRGR9kiTaiwUmbJy7dKOPOy2
         BzgcaIET29OkU7hAgX/fsX36aGkOhQAwjO/CE=
Received: by 10.142.11.2 with SMTP id 2mr1861145wfk.72.1213078417725;
        Mon, 09 Jun 2008 23:13:37 -0700 (PDT)
Received: by 10.142.221.17 with HTTP; Mon, 9 Jun 2008 23:13:37 -0700 (PDT)
Message-ID: <e05f0fd10806092313o7b7caac1o9281865a40f0f030@mail.gmail.com>
Date: Tue, 10 Jun 2008 09:13:37 +0300
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent query benchmarks
In-Reply-To: <193059.25790.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16389_13593106.1213078417794"
References: <193059.25790.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16389_13593106.1213078417794
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Tue, Jun 10, 2008 at 3:50 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi Glen,
>
> Thanks for sharing.  Does your benchmarking tool build on top of
> contrib/benchmark? (not sure if that one lets you specify the number of
> concurrent threads -- if it does not, perhaps this is an opportunity to add
> this functionality).


contrib/benchmark's syntax for parallel-execution spawns parallel threads.
I.e. something like
    [ Search ] : 20
would run 20 queries in parallel, and this
    [ Search ] : 20000 : 5
would run 20,000 queries in parallel, but starting up to 5 new threads per
second.
One more example:
    [
       { SearchTrav(20) > : 300
    ] : 500
Would spawn 500 threads each running 300 queries, where query 20 results are
traversed.
It allows various parallel settings, though not sure it covers exactly what
Glen did.


> I couldn't find info about the index format (compound or not) you used.  It
> would be good to see the comparison with high number of threads for the 2
> index formats.  It would also be good to see the numbers when the index has
> no deletion and when it has some percentage of docs deleted.
>
>
> Finally, if you end up extending contrib/benchmark, I think just having the
> ability to pump the results of that into a gnuplot script would be nice to
> have.


Yes this would be great!


>  I've written a standalone benchmarking tool that did pretty much what
> yours seems to do, but I wrote it for Technorati, so I can't release it. :(
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
> > From: Glen Newton <glen.newton@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, June 10, 2008 12:51:41 AM
> > Subject: Concurrent query benchmarks
> >
> > A number of people have asked about query benchmarks.
> >
> > I have posted benchmarks for concurrent query requests for Lucene
> > 2.3.1 on my blog, where I look at 1 - 4096 concurrent requests:
> >
> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
> >
> > I hope you find this useful.
> >
> > thanks,
> >
> > Glen
> >
>
>
>

------=_Part_16389_13593106.1213078417794--

From java-user-return-34348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 07:55:51 2008
Return-Path: <java-user-return-34348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46321 invoked from network); 10 Jun 2008 07:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 07:55:51 -0000
Received: (qmail 83863 invoked by uid 500); 10 Jun 2008 07:55:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83416 invoked by uid 500); 10 Jun 2008 07:55:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83405 invoked by uid 99); 10 Jun 2008 07:55:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 00:55:47 -0700
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,SUBJECT_FUZZY_TION,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 07:54:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K5yhF-0000Zk-Pe
	for java-user@lucene.apache.org; Tue, 10 Jun 2008 00:55:13 -0700
Message-ID: <17749796.post@talk.nabble.com>
Date: Tue, 10 Jun 2008 00:55:13 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Compass - Reloading Domain Object Defintiion Files
In-Reply-To: <17742490.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <17742490.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I was having a similar prob.

See here:
http://www.nabble.com/Alternative-to-Compass-Searchable-plugin-tp17248352p17248352.html
-- 
View this message in context: http://www.nabble.com/Compass---Reloading-Domain-Object-Defintiion-Files-tp17742490p17749796.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 08:18:39 2008
Return-Path: <java-user-return-34349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53990 invoked from network); 10 Jun 2008 08:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 08:18:39 -0000
Received: (qmail 13231 invoked by uid 500); 10 Jun 2008 08:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12643 invoked by uid 500); 10 Jun 2008 08:18:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12632 invoked by uid 99); 10 Jun 2008 08:18:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 01:18:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 08:17:43 +0000
Received: by wa-out-1112.google.com with SMTP id l24so2116987waf.11
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 01:18:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lxH61F2C6vCqD/c0+7STeVAEa3N0sPT8fToU9TNdz9o=;
        b=RoGLcV3wk/F0FtXTNB5hirq5SY+UfYgIjXi0GBZGikreJFsuh6l0xQ5RijyDsooWSu
         6dyaV2w0r0qhnSujZyIr5zacwdUANmZRC2AZM3awL5ffHC24tjhc2j3olO/O6dv+9Amp
         XaALF5UmZGaQg+8YFXtqAY48YUBCYYkDEPwaQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Wpo0RZPUSAj1GRwT/YaLMUE7vqXnH/cEDqjwIy8ARXi+uOjMt+6HUt6Ri+ve0wRqgM
         ZGGJM5233PPALFRwBJ+/y3qXLbZxK1UwyYGPWWJZZVuZWSvWuIWQAKV6gwCkYwAzToBq
         luvql0VexWnLJ2nkPCZWgHeqVSs4KBorIwA8Q=
Received: by 10.115.91.2 with SMTP id t2mr4528101wal.62.1213085873572;
        Tue, 10 Jun 2008 01:17:53 -0700 (PDT)
Received: by 10.114.88.6 with HTTP; Tue, 10 Jun 2008 01:17:53 -0700 (PDT)
Message-ID: <5816fbdd0806100117k3271e9fbu8f9b79815ecfb6f2@mail.gmail.com>
Date: Tue, 10 Jun 2008 13:47:53 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Running Lucene in a Clustered Environment
In-Reply-To: <567100.80405.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20231_19663560.1213085873564"
References: <567100.80405.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20231_19663560.1213085873564
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Thanks for the reply. It seems that SAN is not an option for my case .
However the other option is acceptable though I have to do some extra work
with clustering.

I got to know that there is an option  called "Database clustered local
search" (
http://bugs.sakaiproject.org/confluence/display/SEARCH/IndexClusterOperation)
which synchronizes the local copy of the index at each node with the
database. This option seems better if the implementation is available. Does
anyone know if there is there is a known implementation of this?

Thanks,

KalaniOn Tue, Jun 10, 2008 at 3:16 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Kalani,
>
> Is creating a local index and then distributing it to all nodes in the
> cluster an option for you?
> Or maybe you can simply put your index on a SAN and let all search nodes
> access the same index there?
>
>
> Otis --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
> > From: Kalani Ruwanpathirana <kalanir@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, June 9, 2008 9:51:06 AM
> > Subject: Running Lucene in a Clustered Environment
> >
> > Hi all,
> >
> > I'm new to Lucene. I need to run Lucene in a clustered environment. So
> > creating the index in the local file system is not an option and it is
> > better if I can create the index in the database as all nodes can share
> it.
> >
> > Can anyone of you please suggest me a way to do this? I got to know about
> > org.apache.lucene.store.jdbc.JdbcDirectory from mailing list archives.
> > However, since it's not part of the Lucene release itself I'd be pleased
> if
> > someone can point me where to find an implementation of it.
> >
> > Additionally, instead of keeping the index inside the database, is there
> any
> > other way to work Lucene in a clustering environment?
> >
> > Thanks in advance
> >
> > Kalani
> >
> >
> >
> > --
> > Kalani Ruwanpathirana
> > Department of Computer Science & Engineering
> > University of Moratuwa
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_20231_19663560.1213085873564--

From java-user-return-34350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 09:02:48 2008
Return-Path: <java-user-return-34350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67930 invoked from network); 10 Jun 2008 09:02:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 09:02:48 -0000
Received: (qmail 70931 invoked by uid 500); 10 Jun 2008 09:02:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70909 invoked by uid 500); 10 Jun 2008 09:02:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70898 invoked by uid 99); 10 Jun 2008 09:02:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 02:02:44 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:01:52 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id B11791126F5
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 05:02:08 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Tue, 10 Jun 2008 05:02:08 -0400
X-Sasl-enc: 7OEonb7Agtx8x5r884//4XrDAaloXm6QncCzyEf/04ol 1213088528
Received: from [192.168.123.210] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 30EB2280A5
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 05:02:08 -0400 (EDT)
Message-ID: <484E430E.2060607@boboco.ie>
Date: Tue, 10 Jun 2008 10:02:06 +0100
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Running Lucene in a Clustered Environment
References: <567100.80405.qm@web50311.mail.re2.yahoo.com> <5816fbdd0806100117k3271e9fbu8f9b79815ecfb6f2@mail.gmail.com>
In-Reply-To: <5816fbdd0806100117k3271e9fbu8f9b79815ecfb6f2@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Kalani Ruwanpathirana wrote:
> Hi,
>
> Thanks for the reply. It seems that SAN is not an option for my case .
> However the other option is acceptable though I have to do some extra work
> with clustering.
>
> I got to know that there is an option  called "Database clustered local
> search" (
> http://bugs.sakaiproject.org/confluence/display/SEARCH/IndexClusterOperation)
> which synchronizes the local copy of the index at each node with the
> database. This option seems better if the implementation is available. Does
> anyone know if there is there is a known implementation of this?
>
>   

rsync is a very powerful tool here -- unless the index is changing 
often, this is a very easy approach.

cheers,
Eric

-- 
Eric Bowman
Boboco Ltd
ebowman@boboco.ie
http://www.boboco.ie/ebowman/pubkey.pgp
+35318394189/+353872801532


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 09:24:30 2008
Return-Path: <java-user-return-34351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78461 invoked from network); 10 Jun 2008 09:24:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 09:24:30 -0000
Received: (qmail 96177 invoked by uid 500); 10 Jun 2008 09:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96142 invoked by uid 500); 10 Jun 2008 09:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96131 invoked by uid 99); 10 Jun 2008 09:24:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 02:24:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.172.143.182] (HELO tbee.org) (72.172.143.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:23:37 +0000
Received: (qmail 26180 invoked from network); 10 Jun 2008 05:23:54 -0400
Received: from tbee.dyndns.org (HELO ?10.0.0.101?) (82.95.213.40)
  by tbee.org with SMTP; 10 Jun 2008 05:23:54 -0400
Message-ID: <484E4829.9040702@tbee.org>
Date: Tue, 10 Jun 2008 11:23:53 +0200
From: Tom <tbee@tbee.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: swapping Lucene's on RAM drive
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have not been able to find much information about this, hence this 
question.

Currently I use Lucene through Compass with the data stored in RAM. The 
indexed information is updated daily and therefore I create a new 
Compass/Lucene combination every day, let it load the new data and then 
swap the active search engine (simply assigning a 'global' variable). 
So, all in memory.

I'm not confident what this will do with the memory. In my setupo each 
Compass/Lucene engine gets a separate ram store based on a different id 
per engine:

    ...setSetting(CompassEnvironment.CONNECTION, "ram://" + id)

And this seems to be working okay. However:
1. Is this the correct way to have 2 engines running next to each other 
(while the second one is loading the new data)?
2. After the engines are swapped, is the RAM store of the now not used 
engine automatically cleaned up? If not, how do I?

Thanks for any help!

Tom


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 09:51:20 2008
Return-Path: <java-user-return-34352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89744 invoked from network); 10 Jun 2008 09:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 09:51:20 -0000
Received: (qmail 23926 invoked by uid 500); 10 Jun 2008 09:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23895 invoked by uid 500); 10 Jun 2008 09:51:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23884 invoked by uid 99); 10 Jun 2008 09:51:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 02:51:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:50:27 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2156911fgb.27
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 02:50:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=THaFFcbwuCoGaqt21bUVD/qERrwb37Ke0dN17i0cf/c=;
        b=jxC0bOojw8AWfIOWyBCOScvI4E5unQwwQHG3s3XHxXnw5s3YP7B24QIDjjrCLJdNON
         K58bb30FMXkrD07sIFZPT/cyrc0qmOUJo8Tq1uMQDWcIZa+kRxPt0QJkFlbDUt/zj+5i
         yJZfJisadzXnP07gdpszosKgTqqY28b6ChVu4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rHk1XjLSXLd3rSR2ffe7TnlYICFSklU/L1QLst3eXIslyhi8ouiVW65JduswgNHk7u
         DUlBZcg+8ZKv1Gf8wMhlwsA1urPyEmmDJOdmkuOILCjjiyWV1TFiqixRTLIwCgfmqBmX
         yWyoZ5PwkXm950pRyJb2rz7Yvv+3jmCA/crCI=
Received: by 10.103.18.19 with SMTP id v19mr3107278mui.123.1213091443237;
        Tue, 10 Jun 2008 02:50:43 -0700 (PDT)
Received: by 10.125.130.6 with HTTP; Tue, 10 Jun 2008 02:50:42 -0700 (PDT)
Message-ID: <867513fe0806100250g72411673yb0fb811024d7e143@mail.gmail.com>
Date: Tue, 10 Jun 2008 15:20:42 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: swapping Lucene's on RAM drive
In-Reply-To: <484E4829.9040702@tbee.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3046_31809818.1213091442879"
References: <484E4829.9040702@tbee.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3046_31809818.1213091442879
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Tom, perhaps this is regarding Compass and you would have wanted to post
this query there.
In case you are looking and asking about running 2 instances of lucene on
the machine with 2 separate indexes in RAM, could you specify :
* Do you use tmpfs or do you load it using the RamDirectory class?
* In case you use tmpfs, you'd have to clean it manually after releasing the
hold of the engine (by stopping or closing the old index reader). The
cleaning is done straight off by deleting the index or moving the index off
the tmpfs after closing the index reader. Incase you happen to do it without
closing the reader, though the dir won't be listed under the directory
listing but it would still be using all of that space (which you would only
realise if you run out of space i.e. have space constraints).
* In the other case, if you are just using the OS cache mechanism or
something like it, it would not get cleaned up but gradually be cleaned as
and when the OS needs to allocate more memory (that is how caching works).

--
Anshum
Naukri Labs!

On Tue, Jun 10, 2008 at 2:53 PM, Tom <tbee@tbee.org> wrote:

> I have not been able to find much information about this, hence this
> question.
>
> Currently I use Lucene through Compass with the data stored in RAM. The
> indexed information is updated daily and therefore I create a new
> Compass/Lucene combination every day, let it load the new data and then swap
> the active search engine (simply assigning a 'global' variable). So, all in
> memory.
>
> I'm not confident what this will do with the memory. In my setupo each
> Compass/Lucene engine gets a separate ram store based on a different id per
> engine:
>
>   ...setSetting(CompassEnvironment.CONNECTION, "ram://" + id)
>
> And this seems to be working okay. However:
> 1. Is this the correct way to have 2 engines running next to each other
> (while the second one is loading the new data)?
> 2. After the engines are swapped, is the RAM store of the now not used
> engine automatically cleaned up? If not, how do I?
>
> Thanks for any help!
>
> Tom
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_3046_31809818.1213091442879--

From java-user-return-34353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 10:35:20 2008
Return-Path: <java-user-return-34353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2295 invoked from network); 10 Jun 2008 10:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 10:35:20 -0000
Received: (qmail 79377 invoked by uid 500); 10 Jun 2008 10:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79344 invoked by uid 500); 10 Jun 2008 10:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 8710 invoked by uid 99); 9 Jun 2008 21:12:12 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8CA75.5E42281C"
Subject: Memory Leak when using Custom Sort (i.e., DistanceSortSource) of LocalLucene with Lucene
Date: Mon, 9 Jun 2008 14:10:31 -0700
Message-ID: <8E2AE6006D6A584F98D5CD65F4801BFE0D42D6B0@EXVBE012-1.exch012.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Memory Leak when using Custom Sort (i.e., DistanceSortSource) of LocalLucene with Lucene
Thread-Index: AcjKdUBTa45WBi9jSm+3qQcRxyUwkA==
From: "Ethan Tao" <Ethant@collarity.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Jun 2008 21:11:37.0034 (UTC) FILETIME=[67223AA0:01C8CA75]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8CA75.5E42281C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,=20

=20

We had the memory leak issue when using DistanceSortSource of
LocalLucene for repeated query/search. In about 450 queries, we are
experiencing out of memory error. After dig in the code, we found the
problem source is coming from Lucene package, the way how it handles
"custom" type comparator. Lucene internally caches all created
comparators. In the case of query using LocalLucene, we create new
comparator for every search due to different lon/lat and query terms.
This causes major memory leak as the cached comparators are also holding
memory for other large objects (e.g., bit sets). The solution we came up
with:

=20

1.  In Lucene package, create new file
SortComparatorSourceUncacheable.java:

=20

package org.apache.lucene.search;

=20

import org.apache.lucene.index.IndexReader;

import java.io.IOException;

import java.io.Serializable;

=20

public interface SortComparatorSourceUncacheable extends Serializable {

}

=20

2.       Have your custom sort class to implement the interface

=20

public class LocalSortSource extends DistanceSortSource implements
SortComparatorSourceUncacheable {

...

}

=20

3.       Modify Lucene's FieldSorterHitQueue.java to bypass caching for
custom sort comparator:

=20

Index: FieldSortedHitQueue.java

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

--- FieldSortedHitQueue.java     (revision 654583)

+++ FieldSortedHitQueue.java  (working copy)

@@ -53,7 +53,12 @@

     this.fields =3D new SortField[n];

     for (int i=3D0; i<n; ++i) {

       String fieldname =3D fields[i].getField();

-      comparators[i] =3D getCachedComparator (reader, fieldname,
fields[i].getType(), fields[i].getLocale(), fields[i].getFactory());

+

+      if(fields[i].getFactory() instanceof
SortComparatorSourceUncacheable) { // no caching to avoid memory leak

+        comparators[i] =3D getComparator (reader, fieldname,
fields[i].getType(), fields[i].getLocale(), fields[i].getFactory());

+      } else {

+        comparators[i] =3D getCachedComparator (reader, fieldname,
fields[i].getType(), fields[i].getLocale(), fields[i].getFactory());

+      }

      =20

       if (comparators[i].sortType() =3D=3D SortField.STRING) {

                  this.fields[i] =3D new SortField (fieldname,
fields[i].getLocale(), fields[i].getReverse());

@@ -157,7 +162,18 @@

   SortField[] getFields() {

     return fields;

   }

- =20

+

+  static ScoreDocComparator getComparator (IndexReader reader, String
field, int type, Locale locale, SortComparatorSource factory)

+    throws IOException {

+      if (type =3D=3D SortField.DOC) return =
ScoreDocComparator.INDEXORDER;

+      if (type =3D=3D SortField.SCORE) return =
ScoreDocComparator.RELEVANCE;

+      FieldCacheImpl.Entry entry =3D (factory !=3D null)

+        ? new FieldCacheImpl.Entry (field, factory)

+        : new FieldCacheImpl.Entry (field, type, locale);

+      return (ScoreDocComparator)Comparators.createValue(reader,
entry);

+    }

+

+

=20

=20

Can someone from internal Lucene Developer please review the change
above and see if it makes sense? And possibly if a feature request
should be filed in Jira, please let me know.

Thanks.

=20

-Ethan

=20


------_=_NextPart_001_01C8CA75.5E42281C--

From java-user-return-34354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 11:34:15 2008
Return-Path: <java-user-return-34354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21154 invoked from network); 10 Jun 2008 11:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 11:34:15 -0000
Received: (qmail 45255 invoked by uid 500); 10 Jun 2008 11:34:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45216 invoked by uid 500); 10 Jun 2008 11:34:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45204 invoked by uid 99); 10 Jun 2008 11:34:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 04:34:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 11:33:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2981654rvb.5
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 04:33:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=buA3ItThW86DXuuLtQC5zy6sGjmddsw0cXlIgrsgaVs=;
        b=S5aus37C7NfQNsp/hDqN1cc9m+QmgLqvoEEH4pF0vdmfmV85nixrBB31H6V6wVW2Oi
         A1MmCocEK6ig2NG8aV/csi/JkS3eyzonEOjceGb1F36RYU62sWIj1tIiNFpOVESrzX4x
         vB6Sqsw1DdjaYxYubZvjNFfgebeC2XiXa9hs0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lxPIqdz0/TMp61OGIE8GlQMHnII9JsPQMazAZQTZnWvXESBw4NXEfflt1waRL5bCaL
         WOlSuh/EpWxLuLtfxOWF6+G5mTAUK8BBky3Fmge019FdvFocEbnWBeULHQoa8hUqrPxQ
         m1HZ3tn5Me0aTh3pbgx+YdYr65AC5efZPIUxs=
Received: by 10.141.68.12 with SMTP id v12mr2902782rvk.111.1213097617042;
        Tue, 10 Jun 2008 04:33:37 -0700 (PDT)
Received: by 10.141.15.16 with HTTP; Tue, 10 Jun 2008 04:33:36 -0700 (PDT)
Message-ID: <69de18140806100433te43fc04i21654d10ef64cc00@mail.gmail.com>
Date: Tue, 10 Jun 2008 17:03:36 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Running Lucene in a Clustered Environment
In-Reply-To: <484E430E.2060607@boboco.ie>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21506_25116426.1213097617017"
References: <567100.80405.qm@web50311.mail.re2.yahoo.com>
	 <5816fbdd0806100117k3271e9fbu8f9b79815ecfb6f2@mail.gmail.com>
	 <484E430E.2060607@boboco.ie>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21506_25116426.1213097617017
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Kalani,

Are you aware of Apache Solr?

On Tue, Jun 10, 2008 at 2:32 PM, Eric Bowman <ebowman@boboco.ie> wrote:

> Kalani Ruwanpathirana wrote:
>
>> Hi,
>>
>> Thanks for the reply. It seems that SAN is not an option for my case .
>> However the other option is acceptable though I have to do some extra work
>> with clustering.
>>
>> I got to know that there is an option  called "Database clustered local
>> search" (
>>
>> http://bugs.sakaiproject.org/confluence/display/SEARCH/IndexClusterOperation
>> )
>> which synchronizes the local copy of the index at each node with the
>> database. This option seems better if the implementation is available.
>> Does
>> anyone know if there is there is a known implementation of this?
>>
>>
>>
>
> rsync is a very powerful tool here -- unless the index is changing often,
> this is a very easy approach.
>
> cheers,
> Eric
>
> --
> Eric Bowman
> Boboco Ltd
> ebowman@boboco.ie
> http://www.boboco.ie/ebowman/pubkey.pgp
> +35318394189/+353872801532
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_21506_25116426.1213097617017--

From java-user-return-34355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 12:16:37 2008
Return-Path: <java-user-return-34355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32974 invoked from network); 10 Jun 2008 12:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 12:16:37 -0000
Received: (qmail 92750 invoked by uid 500); 10 Jun 2008 12:16:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92711 invoked by uid 500); 10 Jun 2008 12:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92700 invoked by uid 99); 10 Jun 2008 12:16:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 05:16:32 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.mueller@scai.fhg.de designates 153.96.87.18 as permitted sender)
Received: from [153.96.87.18] (HELO mailgwb1.fraunhofer.de) (153.96.87.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 12:15:42 +0000
Received: from mailgwb1.fraunhofer.de (localhost [127.0.0.1])
	by mailgwb1.fraunhofer.de[host mailgwb1] (8.14.2+/8.14.2) with ESMTP id m5ACFt1e028333
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 14:15:55 +0200 (CEST)
Received: from kso.scai.fraunhofer.de (kso.scai.fraunhofer.de [193.175.167.130])
	by mailgwb1.fraunhofer.de (8.14.2+/8.14.2) with ESMTP id m5ACFsoq028310
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 14:15:55 +0200 (CEST)
Received: from [129.26.132.5] (neyman.scai.fraunhofer.de [129.26.132.5])
	by kso.scai.fraunhofer.de (8.13.5+/8.13.5) with ESMTP id m5ACHMbL020015
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 14:17:22 +0200 (CEST)
X-Authentication-Warning: kso.scai.fraunhofer.de: Host neyman.scai.fraunhofer.de [129.26.132.5] claimed to be [129.26.132.5]
Message-ID: <484E6FE3.1050800@scai.fhg.de>
Date: Tue, 10 Jun 2008 14:13:23 +0200
From: Bernd Mueller <bernd.mueller@scai.fhg.de>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: indexing images of a document
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Fraunhofer-Email-Policy: accepted
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have XML-documents containing image information. These images should 
be indexed with the document by having one additional field with the 
image stuff. Could anyone please give me some hints how I can manage this?

Regards,
Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 12:27:13 2008
Return-Path: <java-user-return-34356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43717 invoked from network); 10 Jun 2008 12:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 12:27:13 -0000
Received: (qmail 7153 invoked by uid 500); 10 Jun 2008 12:27:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6388 invoked by uid 500); 10 Jun 2008 12:27:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6377 invoked by uid 99); 10 Jun 2008 12:27:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 05:27:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 12:26:20 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2195433fgb.27
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 05:26:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WuOkO4lSJSNTp2l5yaTg18jiGYrSwgErJWdsQ3mh418=;
        b=HBcpd6JgVZQlaHVGWVAHIuQ9zdw8HipmN0aUIcyjy7DtKUfgGypfta+Jg+5w6KhcoS
         bfusnJzsRQAVkQf0ndD3Z5yZViA1ZH514a9cmFQr4A29KNfvUJ+GN1Uj2BPMLjCj6a8f
         VNugF4an8hFmJO2Qs2RW61QwqJS8U9wzHccy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fL+ka//XzDC4YKnjjJb7kaSOrMiZ/9i7VcaskLfsocinc+0xMHHlUDKyzxjUN6i+zK
         sUsBs6nAc1CuBp32OAwlX5C6yXEvS2CvplPGDS182QHJZUnXixAMDXHOOx+ijMvH2XHY
         5b2XBWnR1wPs1zVWoUXbblH5OCbY67VK1WbOw=
Received: by 10.86.78.4 with SMTP id a4mr5653456fgb.14.1213100796787;
        Tue, 10 Jun 2008 05:26:36 -0700 (PDT)
Received: by 10.86.63.2 with HTTP; Tue, 10 Jun 2008 05:26:36 -0700 (PDT)
Message-ID: <359a92830806100526u16ba073cx16b74570116ea48f@mail.gmail.com>
Date: Tue, 10 Jun 2008 08:26:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing images of a document
In-Reply-To: <484E6FE3.1050800@scai.fhg.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24205_14426138.1213100796786"
References: <484E6FE3.1050800@scai.fhg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24205_14426138.1213100796786
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You add as many fields to the document while indexing as you need to
correctly contain your "image stuff".

If this answer seems cryptic, it's as clear as your problem statement
<G>. To give you a meaningful answer, we need a much clearer
problem statement. What is "image stuff", what format is it in, and
what do you want to do with it?

Lucene doesn't index binary data...

Best
Erick

On Tue, Jun 10, 2008 at 8:13 AM, Bernd Mueller <bernd.mueller@scai.fhg.de>
wrote:

> Hello,
>
> I have XML-documents containing image information. These images should be
> indexed with the document by having one additional field with the image
> stuff. Could anyone please give me some hints how I can manage this?
>
> Regards,
> Bernd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24205_14426138.1213100796786--

From java-user-return-34357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 12:39:44 2008
Return-Path: <java-user-return-34357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48201 invoked from network); 10 Jun 2008 12:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 12:39:44 -0000
Received: (qmail 22849 invoked by uid 500); 10 Jun 2008 12:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22578 invoked by uid 500); 10 Jun 2008 12:39:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22567 invoked by uid 99); 10 Jun 2008 12:39:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 05:39:39 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.mueller@scai.fhg.de designates 153.96.87.18 as permitted sender)
Received: from [153.96.87.18] (HELO mailgwb1.fraunhofer.de) (153.96.87.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 12:38:48 +0000
Received: from mailgwb1.fraunhofer.de (localhost [127.0.0.1])
	by mailgwb1.fraunhofer.de[host mailgwb1] (8.14.2+/8.14.2) with ESMTP id m5ACcsCM015198
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 14:38:54 +0200 (CEST)
Received: from kso.scai.fraunhofer.de (kso.scai.fraunhofer.de [193.175.167.130])
	by mailgwb1.fraunhofer.de (8.14.2+/8.14.2) with ESMTP id m5ACcrZ1015174
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 14:38:54 +0200 (CEST)
Received: from [129.26.132.5] (neyman.scai.fraunhofer.de [129.26.132.5])
	by kso.scai.fraunhofer.de (8.13.5+/8.13.5) with ESMTP id m5ACeL8I001015
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 14:40:21 +0200 (CEST)
X-Authentication-Warning: kso.scai.fraunhofer.de: Host neyman.scai.fraunhofer.de [129.26.132.5] claimed to be [129.26.132.5]
Message-ID: <484E7545.1080803@scai.fhg.de>
Date: Tue, 10 Jun 2008 14:36:21 +0200
From: Bernd Mueller <bernd.mueller@scai.fhg.de>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing images of a document
References: <484E6FE3.1050800@scai.fhg.de> <359a92830806100526u16ba073cx16b74570116ea48f@mail.gmail.com>
In-Reply-To: <359a92830806100526u16ba073cx16b74570116ea48f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Fraunhofer-Email-Policy: accepted
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,


Thanks for your fast reply.

I will try to explain what I mean with image stuff. An image in 
xml-documents is usually an url to the location where the image is 
stored. Additionally, such an image tag contains information like 
offset, width and height. I am thinking about storing the images (binary 
data) and meta-information (offset, width, height) in one field instead 
of using these tagging information as values for a field in the index.

I guess, your last statement "Lucene doesn't index binary data..." 
indicates that this isn't possible...


Regards,

Bernd


Erick Erickson wrote:

>You add as many fields to the document while indexing as you need to
>correctly contain your "image stuff".
>
>If this answer seems cryptic, it's as clear as your problem statement
><G>. To give you a meaningful answer, we need a much clearer
>problem statement. What is "image stuff", what format is it in, and
>what do you want to do with it?
>
>Lucene doesn't index binary data...
>
>Best
>Erick
>
>On Tue, Jun 10, 2008 at 8:13 AM, Bernd Mueller <bernd.mueller@scai.fhg.de>
>wrote:
>
>  
>
>>Hello,
>>
>>I have XML-documents containing image information. These images should be
>>indexed with the document by having one additional field with the image
>>stuff. Could anyone please give me some hints how I can manage this?
>>
>>Regards,
>>Bernd
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 13:05:21 2008
Return-Path: <java-user-return-34358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59228 invoked from network); 10 Jun 2008 13:05:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 13:05:21 -0000
Received: (qmail 67185 invoked by uid 500); 10 Jun 2008 13:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67150 invoked by uid 500); 10 Jun 2008 13:05:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67139 invoked by uid 99); 10 Jun 2008 13:05:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 06:05:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 13:04:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 51FC8190E37
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 06:04:01 -0700 (PDT)
Message-Id: <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <484D4A5D.4000507@propylon.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: number of hits per document
Date: Tue, 10 Jun 2008 09:03:58 -0400
References: <484D4A5D.4000507@propylon.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

A SpanQuery is just a Query, so the traditional way of Querying still  
applies, i.e. you get back a list of matching documents.  Beyond that,  
if you just want to operate on the spans, just keep track of how often  
the doc() method changes.

HTH,
Grant
On Jun 9, 2008, at 11:21 AM, John Byrne wrote:

> Hi,
>
> Is there an easy way to find out the number of hits per document for  
> a Query, rather than just for a Term?
>
> Let's say, for example, I have a document like this:
>
> "here is cats near dogs and here is cats a long long way from dogs"
>
> and I use a SpanNearQuery to find "cats" near "dogs" with a slop of  
> 1 - I need to be able to find out that there was 1 hit, even though  
> there are 2 occurrences of "cats" and 2 of "dogs" - there is still  
> only 1 hit that matches my Query.
>
> Is this possible?
>
> Thanks,
> JB.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 13:12:13 2008
Return-Path: <java-user-return-34359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60981 invoked from network); 10 Jun 2008 13:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 13:12:12 -0000
Received: (qmail 84097 invoked by uid 500); 10 Jun 2008 13:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84068 invoked by uid 500); 10 Jun 2008 13:12:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84057 invoked by uid 99); 10 Jun 2008 13:12:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 06:12:08 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.205 as permitted sender)
Received: from [65.54.246.205] (HELO bay0-omc3-s5.bay0.hotmail.com) (65.54.246.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 13:11:16 +0000
Received: from BAY119-W29 ([207.46.9.64]) by bay0-omc3-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 10 Jun 2008 06:11:12 -0700
Message-ID: <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_655b88ad-bf5e-4fbd-a06c-3645f38d4f70_"
X-Originating-IP: [60.63.16.18]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: The performance of lucene searching(web entironment) test
Date: Tue, 10 Jun 2008 21:11:12 +0800
Importance: Normal
In-Reply-To: <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
References: <484D4A5D.4000507@propylon.com>
 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 10 Jun 2008 13:11:12.0629 (UTC) FILETIME=[74DCD250:01C8CAFB]
X-Virus-Checked: Checked by ClamAV on apache.org

--_655b88ad-bf5e-4fbd-a06c-3645f38d4f70_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


I have recently done some tests on lucene. I do not know whether the test results normal. hd entironment:Intel(R) Xeon(R) CPU   5110  @ 1.60GHz4GB ram sw entironment:centOS4.6+sun jdk 1.5+jboss+lucene2.3.2+je-analysis(a chinese analysis)there are 10 million+ documents which total about 3GB test steps: 1 run single searcher.jsp in jboss(tuning ,and use 1GB ram)2 use loadrunner  to test   simulation  10 user concurrent  request.    the TPS(transactions per second) about 10   simulation  50 user concurrent  request.    the TPS(transactions per second) about 8   simulation  100 user concurrent  request.    the TPS(transactions per second) about 2 and the jsp was very simple,index in local file system-------------------------------------------------------------------------------------------------  <body>    <center>   <form action="lucene.jsp" method="post" name="form1" >    <input type="text" value="" name="keyword2"/>    <input type="submit" value="searcher" onclick="SUB()"/>   
  <input type="reset" value="exit"/>   </form>   </center>     <hr>  <%   if(request.getParameter("keyword2")!=null && !"".equals(request.getParameter("keyword2"))) {    String dir="/usr/local/index";  String key="name";  String word = new String(request.getParameter("keyword2"),"utf-8") ;  Searcher searcher = null;  searcher = new IndexSearcher(FSDirectory.getDirectory(dir, false));  Analyzer myAnalyzer=new jeasy.analysis.MMAnalyzer();  QueryParser queryParser=new QueryParser(key,myAnalyzer);  Query query=queryParser.parse(word);           Hits hits = null;  long startTime = System.nanoTime();        hits= searcher.search(query);          long estimatedTime = System.nanoTime() - startTime;         BigDecimal bb = new BigDecimal(estimatedTime);        BigDecimal ee = new BigDecimal(1000000000);        System.out.println("Key word: "+word+" Hits:" + hits.length()+"  Cost time: "+ bb.divide(ee) + "/s");    searcher.close();    }  out.print("ABC") ; %>  </body>   ---------------
 ----------------------search.jsp--------------------------------------------------------- and I also try to use Singleton IndexSearcher ,but it's seam not helpful.-------------------------------------------------------------------------------- public IndexSearcher getIndexSearcher() throws IOException {  if (this.indexSearcher == null) {   return new IndexSearcher(FSDirectory.getDirectory(folder, false));  } else {   IndexReader ir = indexSearcher.getIndexReader();   if (!ir.isCurrent()) {    this.indexSearcher.close();    this.indexSearcher = new IndexSearcher(FSDirectory.getDirectory(folder, false));    ir = indexSearcher.getIndexReader();    if (ir.hasDeletions()) {     if (this.indexWriter != null) {      this.indexWriter.optimize();     }    }   }   return this.indexSearcher;  } }------------------------------------GetsingletonIndexsearcher.java --------------------------------------------- use the same code in application search one times per 0.5s average.so how do I i
 mprove the seaching  performance in  concurrent entironment ? Does the hd entironment: Intel(R) Xeon(R) CPU   5110  @ 1.60GHz4GB ramgive  me     50+TPS?
_________________________________________________________________
MSN
http://mobile.msn.com.cn/
--_655b88ad-bf5e-4fbd-a06c-3645f38d4f70_--

From java-user-return-34360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 13:29:41 2008
Return-Path: <java-user-return-34360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71202 invoked from network); 10 Jun 2008 13:29:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 13:29:41 -0000
Received: (qmail 21717 invoked by uid 500); 10 Jun 2008 13:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21690 invoked by uid 500); 10 Jun 2008 13:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21679 invoked by uid 99); 10 Jun 2008 13:29:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 06:29:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 13:28:45 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1K63pu-0001NE-Ic
	for java-user@lucene.apache.org; Tue, 10 Jun 2008 14:24:35 +0100
Message-ID: <484E8194.6080903@propylon.com>
Date: Tue, 10 Jun 2008 14:28:52 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <484D4A5D.4000507@propylon.com> <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
In-Reply-To: <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: number of hits per document
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi,
 
I could do it that way, but couting the spans per document is specific 
to SpanQuerys. I would still have to count hits for TermQuerys 
separately. I was looking for a generic way to count hits for any 
instance of Query within a document.

To put it another way, the ability to find the Term frequency in a 
single document seems incomplete, since a Term does not equate to a hit. 
For instance, sticking with my previous example, if my document 
contained a thousand occurrences of "cats" but only one of them is near 
"dogs", then the frequency of the Term "cats" in that document is 
irrelevant to me.

In general, my queries will consist of a BooleanQuery containing any 
number of sub-queries of any implementation - what I actually need to 
know is how many hits there are for that BooleanQuery query in each 
document. Maybe I will expand the BooleanQuery into all it's sub-queries 
recursively, and then handle them by type - counting spans per document 
for SpanQuerys and using the Term frequency for TermQuerys. I was just 
hoping there would be an existing (and fast)  way to do this.

Thanks,
John

Grant Ingersoll wrote:
> A SpanQuery is just a Query, so the traditional way of Querying still 
> applies, i.e. you get back a list of matching documents.  Beyond that, 
> if you just want to operate on the spans, just keep track of how often 
> the doc() method changes.
>
> HTH,
> Grant
> On Jun 9, 2008, at 11:21 AM, John Byrne wrote:
>
>> Hi,
>>
>> Is there an easy way to find out the number of hits per document for 
>> a Query, rather than just for a Term?
>>
>> Let's say, for example, I have a document like this:
>>
>> "here is cats near dogs and here is cats a long long way from dogs"
>>
>> and I use a SpanNearQuery to find "cats" near "dogs" with a slop of 1 
>> - I need to be able to find out that there was 1 hit, even though 
>> there are 2 occurrences of "cats" and 2 of "dogs" - there is still 
>> only 1 hit that matches my Query.
>>
>> Is this possible?
>>
>> Thanks,
>> JB.
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 13:46:46 2008
Return-Path: <java-user-return-34361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81308 invoked from network); 10 Jun 2008 13:46:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 13:46:46 -0000
Received: (qmail 49231 invoked by uid 500); 10 Jun 2008 13:46:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48987 invoked by uid 500); 10 Jun 2008 13:46:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48976 invoked by uid 99); 10 Jun 2008 13:46:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 06:46:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.172.143.182] (HELO tbee.org) (72.172.143.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 13:45:51 +0000
Received: (qmail 21423 invoked from network); 10 Jun 2008 09:45:07 -0400
Received: from tbee.dyndns.org (HELO ?10.0.0.101?) (82.95.213.40)
  by tbee.org with SMTP; 10 Jun 2008 09:45:06 -0400
Message-ID: <484E8560.9070400@tbee.org>
Date: Tue, 10 Jun 2008 15:45:04 +0200
From: Tom <tbee@tbee.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: swapping Lucene's on RAM drive
References: <484E4829.9040702@tbee.org> <867513fe0806100250g72411673yb0fb811024d7e143@mail.gmail.com>
In-Reply-To: <867513fe0806100250g72411673yb0fb811024d7e143@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------090604010503090302040808"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------090604010503090302040808
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Thanks for reacting Anshum,

I also posted this on the Compass forum, but I was not sure where the 
responsibility was. But your information did give me a good start. From 
the Compass' RAMDirectoryStore source code: "uses 
org.apache.lucene.store.RAMDirectory"

So appearantly I use two separate Lucene RamDirectory instances, one for 
each Compass/Lucene engine, which would mean that the data is garbage 
collected. Good!

I also have the sheer impression that the id I postfix to the "ram://" 
is quite useless. I cannot find any location where that information is 
actually used to configure separate filesystems on a ram drive. As a 
comparison, the FSDirectoryStore has a "configure" method which actually 
uses the part behind the ://, but the RAMDirectoryStore only is created. 
In fact the RAMDirectoryStore does nothing else aside from being 
created; no deleteIndex is implemented, no cleanIndex, no nothing. It 
seems a miracle it works at all ;-) The only thing that is present is a 
delete-files loop in beforeCopyFrom.

So I think I dare to assume that the memory is garbage collected.

Thanks again.

Tom





Anshum wrote:
> Hi Tom, perhaps this is regarding Compass and you would have wanted to post
> this query there.
> In case you are looking and asking about running 2 instances of lucene on
> the machine with 2 separate indexes in RAM, could you specify :
> * Do you use tmpfs or do you load it using the RamDirectory class?
> * In case you use tmpfs, you'd have to clean it manually after releasing the
> hold of the engine (by stopping or closing the old index reader). The
> cleaning is done straight off by deleting the index or moving the index off
> the tmpfs after closing the index reader. Incase you happen to do it without
> closing the reader, though the dir won't be listed under the directory
> listing but it would still be using all of that space (which you would only
> realise if you run out of space i.e. have space constraints).
> * In the other case, if you are just using the OS cache mechanism or
> something like it, it would not get cleaned up but gradually be cleaned as
> and when the OS needs to allocate more memory (that is how caching works).
>
> --
> Anshum
> Naukri Labs!
>
> On Tue, Jun 10, 2008 at 2:53 PM, Tom <tbee@tbee.org> wrote:
>
>   
>> I have not been able to find much information about this, hence this
>> question.
>>
>> Currently I use Lucene through Compass with the data stored in RAM. The
>> indexed information is updated daily and therefore I create a new
>> Compass/Lucene combination every day, let it load the new data and then swap
>> the active search engine (simply assigning a 'global' variable). So, all in
>> memory.
>>
>> I'm not confident what this will do with the memory. In my setupo each
>> Compass/Lucene engine gets a separate ram store based on a different id per
>> engine:
>>
>>   ...setSetting(CompassEnvironment.CONNECTION, "ram://" + id)
>>
>> And this seems to be working okay. However:
>> 1. Is this the correct way to have 2 engines running next to each other
>> (while the second one is loading the new data)?
>> 2. After the engines are swapped, is the RAM store of the now not used
>> engine automatically cleaned up? If not, how do I?
>>
>> Thanks for any help!
>>
>> Tom
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>   


--------------090604010503090302040808--

From java-user-return-34362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 14:38:40 2008
Return-Path: <java-user-return-34362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1360 invoked from network); 10 Jun 2008 14:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 14:38:39 -0000
Received: (qmail 38535 invoked by uid 500); 10 Jun 2008 14:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38509 invoked by uid 500); 10 Jun 2008 14:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38498 invoked by uid 99); 10 Jun 2008 14:38:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 07:38:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 14:37:46 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K2900B7O4H5RK@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Tue, 10 Jun 2008 16:34:17 +0200 (MEST)
Date: Tue, 10 Jun 2008 16:34:17 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: The performance of lucene searching(web entironment) test
In-reply-to: <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1213108457.3574.99.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <484D4A5D.4000507@propylon.com>
 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
 <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-06-10 at 21:11 +0800, lutan wrote:
> [A lot of text with code and no newlines, making it very hard to read]

In your test you're reusing the searcher. For each search your program
performs, you will see faster response times, until the searcher is
fully warmed.

If your production-system, you re-open your searcher every time and do
not have the benefit of a warmed searcher.

So yes, Singleton searcher helps, as opposed to opening a searcher for
every search. Try making a test where the only thing you do is open a
searcher 100 times and you will see that it takes a non-trivial amount
of time.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 15:10:46 2008
Return-Path: <java-user-return-34363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58061 invoked from network); 10 Jun 2008 15:10:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 15:10:46 -0000
Received: (qmail 9845 invoked by uid 500); 10 Jun 2008 15:10:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9817 invoked by uid 500); 10 Jun 2008 15:10:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9806 invoked by uid 99); 10 Jun 2008 15:10:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 08:10:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 15:09:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3078683rvb.5
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 08:10:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=ScAK/wsdqEucepj9zRfzferRAQ/1o9K5W9ojBP1m5b8=;
        b=NyP/71q9P7aFYBkCXsDKJTunrhawh9OFpndAAt8clI4I4w/PlGhE9TvchJcLKIYQjF
         GvVu0bPu08J8OrADG4YppxL4YfIX0/W4f+vDja9T/S8wHV9+/VLdftDbnEPSoerLEMh4
         I0HptCHNUk1i7rJVvX1MMar/3fmkJutArLlOs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=OmV9qRa5nj00m2uhMtduYIFhgYeRn5fVHkU1ObzbyBzi/YWT7HyNTuVr0Q4UY9fvZo
         uS4/1jZYpeSGAofogJKKDmA8yqoMt7EnM6ujHA5nWH7B4BHDIaETp+QXjVrBkFULoUZt
         deisR+7h5odQQf0sdq2EAw65RVY6N/BI3/Ydc=
Received: by 10.141.34.12 with SMTP id m12mr3116399rvj.26.1213110605610;
        Tue, 10 Jun 2008 08:10:05 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Tue, 10 Jun 2008 08:10:05 -0700 (PDT)
Message-ID: <5e76f3840806100810m71524d3dub976a0d3476393ae@mail.gmail.com>
Date: Tue, 10 Jun 2008 11:10:05 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent query benchmarks
In-Reply-To: <193059.25790.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <193059.25790.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

2008/6/9 Otis Gospodnetic <otis_gospodnetic@yahoo.com>:
> Hi Glen,
>
> Thanks for sharing.  Does your benchmarking tool build on top of contrib/benchmark? (not sure if that one lets you specify the number of concurrent threads -- if it does not, perhaps this is an opportunity to add this functionality).

No, it is a stand-alone program. You give it the index directory, the
default query field, the number of threads, and the filename of a file
that contains one Lucene query per line.hreads. The output is one
line: the # fo threads followed by the #queries handled per second.

I have a shell script which runs the above with increasing #s of threads.

> I couldn't find info about the index format (compound or not) you used.  It would be good to see the comparison with high number of threads for the 2 index formats.  It would also be good to see the numbers when the index has no deletion and when it has some percentage of docs deleted.

Sorry, I didn't include it. The index in the benchmarks uses the
compound format, with 0% documents deleted.

>
> Finally, if you end up extending contrib/benchmark, I think just having the ability to pump the results of that into a gnuplot script would be nice to have.  I've written a standalone benchmarking tool that did pretty much what yours seems to do, but I wrote it for Technorati, so I can't release it. :(

I would be very willing to contribute what I have, with the gnuplot
scripts that I have. Let me finish off what I am doing for my work and
I will clean things up a bit, write a little documentation.

-Glen

>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
>> From: Glen Newton <glen.newton@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, June 10, 2008 12:51:41 AM
>> Subject: Concurrent query benchmarks
>>
>> A number of people have asked about query benchmarks.
>>
>> I have posted benchmarks for concurrent query requests for Lucene
>> 2.3.1 on my blog, where I look at 1 - 4096 concurrent requests:
>>   http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
>>
>> I hope you find this useful.
>>
>> thanks,
>>
>> Glen
>>
>> --
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 16:16:56 2008
Return-Path: <java-user-return-34364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1376 invoked from network); 10 Jun 2008 16:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 16:16:56 -0000
Received: (qmail 33528 invoked by uid 500); 10 Jun 2008 16:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33475 invoked by uid 500); 10 Jun 2008 16:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33463 invoked by uid 99); 10 Jun 2008 16:16:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:16:51 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 16:16:02 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: indexing images of a document
Date: Tue, 10 Jun 2008 12:13:51 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5973C@SUEXCL-02.ad.syr.edu>
In-Reply-To: <484E7545.1080803@scai.fhg.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexing images of a document
Thread-Index: AcjK9xTydD8wEdAcRfyoJr5oTahUeQAHRyUQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bernd,

It's still not clear what you want to do.  What will a search look like?

On 06/10/2008 at 8:36 AM, Bernd Mueller wrote:
> I will try to explain what I mean with image stuff. An image in
> xml-documents is usually an url to the location where the image is
> stored. Additionally, such an image tag contains information like
> offset, width and height. I am thinking about storing the
> images (binary data) and meta-information (offset, width, height) in =
one
> field instead of using these tagging information as values for a field
> in the index.

You seem to be saying that you want to store the binary image along with =
its metadata all in one field - is this correct?  Why do you want to do =
this?

> I guess, your last statement "Lucene doesn't index binary data..."
> indicates that this isn't possible...

While Lucene will not *index* binary data, it can *store* it.

Steve

> Erick Erickson wrote:
> > You add as many fields to the document while indexing as you need to
> > correctly contain your "image stuff".
> >=20
> > If this answer seems cryptic, it's as clear as your problem =
statement
> > <G>. To give you a meaningful answer, we need a much clearer
> > problem statement. What is "image stuff", what format is it in, and
> > what do you want to do with it?
> >=20
> > Lucene doesn't index binary data...
> >=20
> > Best
> > Erick
> >=20
> > On Tue, Jun 10, 2008 at 8:13 AM, Bernd Mueller
> > <bernd.mueller@scai.fhg.de> wrote:
> >=20
> > > Hello,
> > >=20
> > > I have XML-documents containing image information. These images =
should
> > > be indexed with the document by having one additional field with =
the
> > > image stuff. Could anyone please give me some hints how I can =
manage
> > > this?
> > >=20
> > > Regards,
> > > Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 16:18:23 2008
Return-Path: <java-user-return-34365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1937 invoked from network); 10 Jun 2008 16:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 16:18:23 -0000
Received: (qmail 36252 invoked by uid 500); 10 Jun 2008 16:18:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36220 invoked by uid 500); 10 Jun 2008 16:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36209 invoked by uid 99); 10 Jun 2008 16:18:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:18:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.240 as permitted sender)
Received: from [65.54.246.240] (HELO bay0-omc3-s40.bay0.hotmail.com) (65.54.246.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 16:17:28 +0000
Received: from BAY119-W18 ([207.46.9.53]) by bay0-omc3-s40.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 10 Jun 2008 09:17:24 -0700
Message-ID: <BAY119-W184FC8B3C9CDFEBF35DBBEB4B30@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_f4c88d67-a159-4892-a85f-3a40ddda4843_"
X-Originating-IP: [60.63.16.18]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: The performance of lucene searching(web entironment) test
Date: Wed, 11 Jun 2008 00:17:24 +0800
Importance: Normal
In-Reply-To: <1213108457.3574.99.camel@PC990.sb.statsbiblioteket.dk>
References: <484D4A5D.4000507@propylon.com>
 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
  <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl> 
 <1213108457.3574.99.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
X-OriginalArrivalTime: 10 Jun 2008 16:17:24.0927 (UTC) FILETIME=[781234F0:01C8CB15]
X-Virus-Checked: Checked by ClamAV on apache.org

--_f4c88d67-a159-4892-a85f-3a40ddda4843_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


Thanks  for the reply! 
 
In my test case , I start loadrunner jsut test for 5 minute,and the response growth slowly.the TPS(transactions per second) seems stoped at 10 finally.
I will run a test for a longer time again.
In addition,does lucene has bottleneck about the number of documents or index size..?
 
> Date: Tue, 10 Jun 2008 16:34:17 +0200> From: te@statsbiblioteket.dk> Subject: Re: The performance of lucene searching(web entironment) test> To: java-user@lucene.apache.org> > On Tue, 2008-06-10 at 21:11 +0800, lutan wrote:> > [A lot of text with code and no newlines, making it very hard to read]> > In your test you're reusing the searcher. For each search your program> performs, you will see faster response times, until the searcher is> fully warmed.> > If your production-system, you re-open your searcher every time and do> not have the benefit of a warmed searcher.> > So yes, Singleton searcher helps, as opposed to opening a searcher for> every search. Try making a test where the only thing you do is open a> searcher 100 times and you will see that it takes a non-trivial amount> of time.> > > > ---------------------------------------------------------------------> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: java-user-h
 elp@lucene.apache.org> 
_________________________________________________________________
Windows Live Photo gallery 
http://get.live.cn/product/photo.html
--_f4c88d67-a159-4892-a85f-3a40ddda4843_--

From java-user-return-34366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 16:35:19 2008
Return-Path: <java-user-return-34366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9296 invoked from network); 10 Jun 2008 16:35:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 16:35:19 -0000
Received: (qmail 56560 invoked by uid 500); 10 Jun 2008 16:35:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56521 invoked by uid 500); 10 Jun 2008 16:35:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56510 invoked by uid 99); 10 Jun 2008 16:35:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:35:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.204 as permitted sender)
Received: from [65.54.246.204] (HELO bay0-omc3-s4.bay0.hotmail.com) (65.54.246.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 16:34:21 +0000
Received: from BAY119-W31 ([207.46.9.66]) by bay0-omc3-s4.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 10 Jun 2008 09:34:17 -0700
Message-ID: <BAY119-W317367B56E7ACFDA41E1EAB4B30@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_3badb25b-b6b6-472c-b683-e6beaf3558ec_"
X-Originating-IP: [60.63.16.18]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: Running Lucene in a Clustered Environment
Date: Wed, 11 Jun 2008 00:34:17 +0800
Importance: Normal
In-Reply-To: <5816fbdd0806090651o5c8952ecqe1bb5fdd9aff4cb5@mail.gmail.com>
References: <5816fbdd0806090651o5c8952ecqe1bb5fdd9aff4cb5@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 10 Jun 2008 16:34:17.0643 (UTC) FILETIME=[D3B267B0:01C8CB17]
X-Virus-Checked: Checked by ClamAV on apache.org

--_3badb25b-b6b6-472c-b683-e6beaf3558ec_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


I and you have the same problem to solve,and I also research recently.
 
and I heard that:
<Lucene in a cluster >Lucene is a highly optimized inverted index search engine. It stored a number of inverted indexes in a custom file format that is highly optimized to ensure that the indexes can be loaded by searchers quickly and searched efficiently. These structures are create so that they are almost completely pre-computed. To store the index, Lucene uses an implementation of a 'Directory' interface, not to be confused with anything in java.io. . The standard implementation if FSDirectory that stored the search index on a file system. There a number of other implementations that can bused including ones to split the index on the filesystem into smaller chunks, and ones to distribute the index throughout a cluster using Map Reduce (see google). There is additionally a database implementation that stored the index as blocks in a database. Lucene derives its speed from this index structure, and to work really well it needs to be able to seek efficiently into the blocks o
 f the segments that make up the index. This is trivial where the underlying storage mechanism supports seek, but less trivial if the storage mechanism does not. The FSDirectory is based on files, and is efficient in this area. If the files are on a local file system, pure seeks can be used. If the index is on a shared file system , there will always be some latency and potentially increased IO traffic. The Database implementation is highly dependent on the the blob implementation in the target database and will nearly always be slower than the FSDirectory. Some databases support seekable blobs (Oracle), some emulate this behavior (MySQL with emulateLocators=true), others just don't support it and so are really slow. (and I mean really slow) All of this impacts how Lucene works in a cluster. Each node performing the search needs access to the index. To make search work in a clustered environment we must provide this. There are 3 ways of doing this. Use a shared file system be
 tween all nodes, and use FSDirectory. Use indexes on the nodes local file system and a synchronization strategy. Use a database using JDBCDirectory Use a distributed file system (eg Google File System, Nutch Distributed File System) Use a local cache with backup in the Database Shared filesystem There are a number of issues with a shared file system. Performance is lower than a local file system (obviously), unless a SAN is used, but a SAN shared file system must be a true SAN file system (eg Redhat Global File System, Apple XSan) as modifications to the file system blocks must be mirrored instantly in the block cache of all connected nodes, otherwise they will see a corrupted file system. Remember a SAN is just a networked block device, that without additional help cannot be shared by multiple compute nodes at the same time. Provided the performance of the shared file system is sufficient, Lucene works well like this with no modifications using the FSDirectory implementatio
 n. The implementation of the lock managed in the Sakai Search component eliminates problems with locks reported by the Lucene community. This mechanism is available now in Sakai Search. Synchronized Local indexes. Where the architecture of the cluster is a shared nothing architecture, the Lucene indexes can be written to local disk and synchronized at the end of each index cycle. This is an optimal deployment of Lucene in a cluster as it ensures that all the IO is from the local disk and is hence fast. To ensure that there is always a back up copy of the index, the synchronization would also target a backup location. The difficulty with this approach is that without support in the implementation of the search engine, it requires some deployment support. This may involve include making hard link mirrors to speed up the synchronization process. Lucene indexes are suitable for synchronizing with rsync which is a block based synchronization mechanism. The main drawback of this a
 pproach is that the full index is present on the local machine. In large search environments, this duplication will be wastefully, however in search engine terms, a single deployment of Sakai will probably never get into the large space ( large > 100M documents, 2TB index) This mechanism is available, but requires local configuration Database hosted search index. Where a simple cluster setup is required, a database hosted search index is straightforward option. There are however significant drawbacks with this approach, most notable being the drop in performance. The index is stored as blocks in blobs inside the database. These blobs are stored in a block structure to eliminate most of the unnecessary loading however each blob bypasses any local disk block cache on the local machine and has to be streamed over the network. If the database supports seekable blobs, within the database itself, it is possible to minimize unnecessary network traffic. Oracle has this support. Howe
 ver where the database only emulated this behavior (MySQL) the performance is poor as the complete blob needs to be streamed over the network. In addition to this the speed of access is slower since a SQL statement has to be executed for each data access. The net result is slower performance. This mechanims is available, but performance is probably unacceptable Distributed File System Real Search Engines use a distributed file system that provides a self healing file system where the data itself is distributed across multiple nodes in such a way that the file system can recover from the loss of one or more nodes. The original file system of this form is the Google File System and the Nutch Distributed File System is modeled on Google File System. Both implementations use a gather scatter algorithm detailed by Google in Map-Reduce (see Google labs). This approach results in every node containing a part of the file system. Where the index size has grown to such an extent to ma
 ke the storage of the complete index on every node in the cluster, this approach becomes more attractive. At the moment there are no plans to provide an implementation of a distributed file system within Sakai. Database Clustered Local Search In this approach, indexes are used from local disk, but backed up to the database as Lucene Segments. A cluster app node is installed, it synconizes the local copy of the search index with the database. When new content is added by one of the cluster app nodes, it updates the backup copy in the database. On reciept of the index reload events, all cluster app nodes resyncronize the with the database downloading changed and new search segments. This mechanism in in the process of being tested, I exhibits the same performance as a local basaed search for a 200MB index with 80,000 documents. Once this mechanism is completely tested it will become the default OOTB mechanism, as it works where there is a single cluster node or more than one c
 luster node. The added advantage of this mechanism is that the index is stored in the database. It will also be possible to implement this mechanism with a shared filestore acting as the backup location. 
> Date: Mon, 9 Jun 2008 19:21:06 +0530> From: kalanir@gmail.com> To: java-user@lucene.apache.org> Subject: Running Lucene in a Clustered Environment> > Hi all,> > I'm new to Lucene. I need to run Lucene in a clustered environment. So> creating the index in the local file system is not an option and it is> better if I can create the index in the database as all nodes can share it.> > Can anyone of you please suggest me a way to do this? I got to know about> org.apache.lucene.store.jdbc.JdbcDirectory from mailing list archives.> However, since it's not part of the Lucene release itself I'd be pleased if> someone can point me where to find an implementation of it.> > Additionally, instead of keeping the index inside the database, is there any> other way to work Lucene in a clustering environment?> > Thanks in advance> > Kalani> > > > -- > Kalani Ruwanpathirana> Department of Computer Science & Engineering> University of Moratuwa
_________________________________________________________________
MSN
http://mobile.msn.com.cn/
--_3badb25b-b6b6-472c-b683-e6beaf3558ec_--

From java-user-return-34367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 16:37:20 2008
Return-Path: <java-user-return-34367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9862 invoked from network); 10 Jun 2008 16:37:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 16:37:20 -0000
Received: (qmail 60293 invoked by uid 500); 10 Jun 2008 16:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60264 invoked by uid 500); 10 Jun 2008 16:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60253 invoked by uid 99); 10 Jun 2008 16:37:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:37:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.217 as permitted sender)
Received: from [65.54.246.217] (HELO bay0-omc3-s17.bay0.hotmail.com) (65.54.246.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 16:36:21 +0000
Received: from BAY119-W1 ([207.46.9.36]) by bay0-omc3-s17.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 10 Jun 2008 09:36:17 -0700
Message-ID: <BAY119-W15A8F3F06BA445B1B7BFDB4B30@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_40e4e361-d602-460e-97ee-89f36eac2d27_"
X-Originating-IP: [60.63.16.18]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: Running Lucene in a Clustered Environment
Date: Wed, 11 Jun 2008 00:36:17 +0800
Importance: Normal
In-Reply-To: <5816fbdd0806090651o5c8952ecqe1bb5fdd9aff4cb5@mail.gmail.com>
References: <5816fbdd0806090651o5c8952ecqe1bb5fdd9aff4cb5@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 10 Jun 2008 16:36:17.0551 (UTC) FILETIME=[1B2AE9F0:01C8CB18]
X-Virus-Checked: Checked by ClamAV on apache.org

--_40e4e361-d602-460e-97ee-89f36eac2d27_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


I and you have the same problem to solve,and I also research recently.
 
and I heard that:
<Lucene in a cluster >Lucene is a highly optimized inverted index search engine. It stored a number of inverted indexes in a custom file format that is highly optimized to ensure that the indexes can be loaded by searchers quickly and searched efficiently. These structures are create so that they are almost completely pre-computed. To store the index, Lucene uses an implementation of a 'Directory' interface, not to be confused with anything in java.io. . The standard implementation if FSDirectory that stored the search index on a file system. There a number of other implementations that can bused including ones to split the index on the filesystem into smaller chunks, and ones to distribute the index throughout a cluster using Map Reduce (see google). There is additionally a database implementation that stored the index as blocks in a database. Lucene derives its speed from this index structure, and to work really well it needs to be able to seek efficiently into the blocks o
 f the segments that make up the index. This is trivial where the underlying storage mechanism supports seek, but less trivial if the storage mechanism does not. The FSDirectory is based on files, and is efficient in this area. If the files are on a local file system, pure seeks can be used. If the index is on a shared file system , there will always be some latency and potentially increased IO traffic. The Database implementation is highly dependent on the the blob implementation in the target database and will nearly always be slower than the FSDirectory. Some databases support seekable blobs (Oracle), some emulate this behavior (MySQL with emulateLocators=true), others just don't support it and so are really slow. (and I mean really slow) All of this impacts how Lucene works in a cluster. Each node performing the search needs access to the index. To make search work in a clustered environment we must provide this. There are 3 ways of doing this. Use a shared file system be
 tween all nodes, and use FSDirectory. Use indexes on the nodes local file system and a synchronization strategy. Use a database using JDBCDirectory Use a distributed file system (eg Google File System, Nutch Distributed File System) Use a local cache with backup in the Database Shared filesystem There are a number of issues with a shared file system. Performance is lower than a local file system (obviously), unless a SAN is used, but a SAN shared file system must be a true SAN file system (eg Redhat Global File System, Apple XSan) as modifications to the file system blocks must be mirrored instantly in the block cache of all connected nodes, otherwise they will see a corrupted file system. Remember a SAN is just a networked block device, that without additional help cannot be shared by multiple compute nodes at the same time. Provided the performance of the shared file system is sufficient, Lucene works well like this with no modifications using the FSDirectory implementatio
 n. The implementation of the lock managed in the Sakai Search component eliminates problems with locks reported by the Lucene community. This mechanism is available now in Sakai Search. Synchronized Local indexes. Where the architecture of the cluster is a shared nothing architecture, the Lucene indexes can be written to local disk and synchronized at the end of each index cycle. This is an optimal deployment of Lucene in a cluster as it ensures that all the IO is from the local disk and is hence fast. To ensure that there is always a back up copy of the index, the synchronization would also target a backup location. The difficulty with this approach is that without support in the implementation of the search engine, it requires some deployment support. This may involve include making hard link mirrors to speed up the synchronization process. Lucene indexes are suitable for synchronizing with rsync which is a block based synchronization mechanism. The main drawback of this a
 pproach is that the full index is present on the local machine. In large search environments, this duplication will be wastefully, however in search engine terms, a single deployment of Sakai will probably never get into the large space ( large > 100M documents, 2TB index) This mechanism is available, but requires local configuration Database hosted search index. Where a simple cluster setup is required, a database hosted search index is straightforward option. There are however significant drawbacks with this approach, most notable being the drop in performance. The index is stored as blocks in blobs inside the database. These blobs are stored in a block structure to eliminate most of the unnecessary loading however each blob bypasses any local disk block cache on the local machine and has to be streamed over the network. If the database supports seekable blobs, within the database itself, it is possible to minimize unnecessary network traffic. Oracle has this support. Howe
 ver where the database only emulated this behavior (MySQL) the performance is poor as the complete blob needs to be streamed over the network. In addition to this the speed of access is slower since a SQL statement has to be executed for each data access. The net result is slower performance. This mechanims is available, but performance is probably unacceptable Distributed File System Real Search Engines use a distributed file system that provides a self healing file system where the data itself is distributed across multiple nodes in such a way that the file system can recover from the loss of one or more nodes. The original file system of this form is the Google File System and the Nutch Distributed File System is modeled on Google File System. Both implementations use a gather scatter algorithm detailed by Google in Map-Reduce (see Google labs). This approach results in every node containing a part of the file system. Where the index size has grown to such an extent to ma
 ke the storage of the complete index on every node in the cluster, this approach becomes more attractive. At the moment there are no plans to provide an implementation of a distributed file system within Sakai. Database Clustered Local Search In this approach, indexes are used from local disk, but backed up to the database as Lucene Segments. A cluster app node is installed, it synconizes the local copy of the search index with the database. When new content is added by one of the cluster app nodes, it updates the backup copy in the database. On reciept of the index reload events, all cluster app nodes resyncronize the with the database downloading changed and new search segments. This mechanism in in the process of being tested, I exhibits the same performance as a local basaed search for a 200MB index with 80,000 documents. Once this mechanism is completely tested it will become the default OOTB mechanism, as it works where there is a single cluster node or more than one c
 luster node. The added advantage of this mechanism is that the index is stored in the database. It will also be possible to implement this mechanism with a shared filestore acting as the backup location. 
> Date: Mon, 9 Jun 2008 19:21:06 +0530> From: kalanir@gmail.com> To: java-user@lucene.apache.org> Subject: Running Lucene in a Clustered Environment> > Hi all,> > I'm new to Lucene. I need to run Lucene in a clustered environment. So> creating the index in the local file system is not an option and it is> better if I can create the index in the database as all nodes can share it.> > Can anyone of you please suggest me a way to do this? I got to know about> org.apache.lucene.store.jdbc.JdbcDirectory from mailing list archives.> However, since it's not part of the Lucene release itself I'd be pleased if> someone can point me where to find an implementation of it.> > Additionally, instead of keeping the index inside the database, is there any> other way to work Lucene in a clustering environment?> > Thanks in advance> > Kalani> > > > -- > Kalani Ruwanpathirana> Department of Computer Science & Engineering> University of Moratuwa
_________________________________________________________________
MSNTA
http://im.live.cn/emoticons/?ID=18
--_40e4e361-d602-460e-97ee-89f36eac2d27_--

From java-user-return-34368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 16:54:45 2008
Return-Path: <java-user-return-34368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19007 invoked from network); 10 Jun 2008 16:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 16:54:45 -0000
Received: (qmail 96961 invoked by uid 500); 10 Jun 2008 16:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96932 invoked by uid 500); 10 Jun 2008 16:54:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96921 invoked by uid 99); 10 Jun 2008 16:54:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 09:54:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 16:53:49 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1505188fkq.5
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 09:54:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PAIM7wnsIsLfDlUJ5g7zXLNq4K3JkyYQ0os+SMs+GhE=;
        b=dD/gFEhdBkj0uTk04EpuryjIQw/bOS4oA5JQtCK8mzfFcrYyeANvOFwsdbPl0FXGB0
         v0mNB5NUcUJkG+a+157XHOF/n2sMHB3v9bCPlCxLooWkhCh1cFZaCr3KgwyEAO5xi3Z5
         UnUSshaZj9d42gI709b6X8nuWjTj+w8rXaiMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xB6OZLvfUCq1fhUI0AiELkV057NxQP4OTTmNh2mRBbSEEG096M5ZJefc2eKERiG5EF
         Q8B3PZ33AqYhIb+po9rshf/rvkY1tpY+KgjhKSlWC0jtS5VhJ4E9cF5R8T0oXzZkVF5W
         wOq5V5mSfLfdxS6NB9WsKlKGwCZ6zzoxAHK0g=
Received: by 10.78.130.6 with SMTP id c6mr2796220hud.93.1213116844763;
        Tue, 10 Jun 2008 09:54:04 -0700 (PDT)
Received: by 10.78.140.18 with HTTP; Tue, 10 Jun 2008 09:54:04 -0700 (PDT)
Message-ID: <6e3ae6310806100954p13fd4e48h64311a3ca057b30@mail.gmail.com>
Date: Tue, 10 Jun 2008 09:54:04 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent query benchmarks
In-Reply-To: <5e76f3840806091551o3826af99wdafed8133561eacc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19552_12421175.1213116844753"
References: <5e76f3840806091551o3826af99wdafed8133561eacc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19552_12421175.1213116844753
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Good work!

I would like to see how it performs with several index reader instances,
which is said to increase concurrency.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Mon, Jun 9, 2008 at 3:51 PM, Glen Newton <glen.newton@gmail.com> wrote:

> A number of people have asked about query benchmarks.
>
> I have posted benchmarks for concurrent query requests for Lucene
> 2.3.1 on my blog, where I look at 1 - 4096 concurrent requests:
>
> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
>
> I hope you find this useful.
>
> thanks,
>
> Glen
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19552_12421175.1213116844753--

From java-user-return-34369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 17:08:51 2008
Return-Path: <java-user-return-34369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27547 invoked from network); 10 Jun 2008 17:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 17:08:51 -0000
Received: (qmail 17343 invoked by uid 500); 10 Jun 2008 17:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17308 invoked by uid 500); 10 Jun 2008 17:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17297 invoked by uid 99); 10 Jun 2008 17:08:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 10:08:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 17:07:54 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3131754rvb.5
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 10:08:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=6SBMn5G3uhNhI1wq+4BvheRENCzqcKmlugkFpqgSBpI=;
        b=j3+jg2fA8Mwd5f01HcBJg2UacK8iNNUSi9O+gbG/kefgb8ieM33BGVj2LcYeyKgjNF
         FqlastPA5oz/H/gZydPpdeBoAmwRc7ldnx7dcTCK3eHopjWJIN+AVmbvnhJAaW1EsWCk
         Y3mzeju6TP/jVNu6Z5YPppSWuiIkYxHW+Q9TE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Odvr/fEKvcktlGHC3Ku0Bw0spAkI4N6hW+C5xpg56+bl2mHeIqX/R5fZEArQPkEWgI
         KgmQRyREcWyqMEHyj/WLF1MluCfKAvfy5qi1j+8oVgeQYsYmyeBGsVAEko3+GZfnu+cv
         eSvDLeesodkijgl8dcDqcu5rG+y22kl0LR8c0=
Received: by 10.141.210.21 with SMTP id m21mr3239104rvq.23.1213117691399;
        Tue, 10 Jun 2008 10:08:11 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Tue, 10 Jun 2008 10:08:11 -0700 (PDT)
Message-ID: <5e76f3840806101008w7dd61983mf4391d58f28021b@mail.gmail.com>
Date: Tue, 10 Jun 2008 13:08:11 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent query benchmarks
In-Reply-To: <6e3ae6310806100954p13fd4e48h64311a3ca057b30@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840806091551o3826af99wdafed8133561eacc@mail.gmail.com>
	 <6e3ae6310806100954p13fd4e48h64311a3ca057b30@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the positive feedback.  :-)

Yes, right now the benchmark only uses one IndexSearcher for all
threads, but I have completed an extension that allows you to either
1) have multiple searchers for the same index; or 2) have multiple
indexes (copies of one another) with a single searcher per copy (to
test when you have your index copies on separate disks, SANS, NAS,
etc).

I will rerun my benchmarks with increasing numbers of readers & post
the results in the next couple of days.

-glen

2008/6/10 Chris Lu <chris.lu@gmail.com>:
> Good work!


> I would like to see how it performs with several index reader instances,
> which is said to increase concurrency.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Mon, Jun 9, 2008 at 3:51 PM, Glen Newton <glen.newton@gmail.com> wrote:
>
>> A number of people have asked about query benchmarks.
>>
>> I have posted benchmarks for concurrent query requests for Lucene
>> 2.3.1 on my blog, where I look at 1 - 4096 concurrent requests:
>>
>> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
>>
>> I hope you find this useful.
>>
>> thanks,
>>
>> Glen
>>
>> --
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 18:20:33 2008
Return-Path: <java-user-return-34370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62145 invoked from network); 10 Jun 2008 18:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 18:20:32 -0000
Received: (qmail 38027 invoked by uid 500); 10 Jun 2008 18:20:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38003 invoked by uid 500); 10 Jun 2008 18:20:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37992 invoked by uid 99); 10 Jun 2008 18:20:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 11:20:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 18:19:38 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 24C5D71C528; Tue, 10 Jun 2008 11:19:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1AE9271C527
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 11:19:56 -0700 (PDT)
Date: Tue, 10 Jun 2008 11:19:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to get the error position in QueryParser/ParseException
In-Reply-To: <200805231059.37109.wzzelfzzel@abas.de>
Message-ID: <Pine.LNX.4.62.0806101115120.29298@radix.cryptio.net>
References: <200805231059.37109.wzzelfzzel@abas.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: 
: When using "new QueryParser(...).parse(...)" I'd like to get the 
: position where the error was detected (to show it to the user).
: See (and run) the code below.
: 
: This is not possible via "e.currentToken" (that's null). Nevertheless 
: this position will be printed within the getMessage() method but is not 
: accessible directly.

In general, QueryParser isn't a very good parser -- especally when it 
comes to error conditions.  in a lot of cases, Queryparser generates a 
ParseException because it can see that the input is "bad", but the method 
generating the exception doesn't actaully know where in the string 
the"bad" input came from -- it's already dealing with trees of Query 
objects.

if you're getting exceptions where the position info is in the getMessage, 
that means the ParseException you're getting is fro ma code path where it 
did know the position, probably from a nested exception, but it's wrapping
it very naively and loosing that piece of "structured" error info.

We'd need a patch for QueryParser to fix this ... it would probably be 
fairly straight forward, but like i said: itwould only help you in some of 
the cases, there are plenty of other places in the code where 
ParseExceptions are thrown without any idea what the parse position is.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 18:55:26 2008
Return-Path: <java-user-return-34371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73648 invoked from network); 10 Jun 2008 18:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 18:55:26 -0000
Received: (qmail 90346 invoked by uid 500); 10 Jun 2008 18:55:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90316 invoked by uid 500); 10 Jun 2008 18:55:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90305 invoked by uid 99); 10 Jun 2008 18:55:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 11:55:20 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 18:54:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id D273775205
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 11:54:15 -0700 (PDT)
Message-Id: <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Tue, 10 Jun 2008 14:54:14 -0400
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

Not sure if this was resolved, but I don't think it was.  Can you try  
reproducing this with setCompoundFile(false)?  That is, turn of  
compound files.  I have an intermittent report of an exception that  
looks eerily similar that I am trying to track down and I am not using  
CFS and the exception is reporting the error in the .fdt (stored  
fields info) file.  Unfortunately, I don't have any more specifics at  
this time as it hasn't been reproduced since, but thought that you  
might be able to get to it quicker since you seem to be able to  
somewhat reproduce it.

Exception is:
java.io.FileNotFoundException: ..../index/_1l5.fdt (No such file or  
directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(Unknown Source)
	at org.apache.lucene.store.FSDirectory$FSIndexInput 
$Descriptor.<init>(FSDirectory.java:506)
	at org.apache.lucene.store.FSDirectory 
$FSIndexInput.<init>(FSDirectory.java:536)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:445)
	at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:75)
	at  
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:308)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java: 
3263)
	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
	at org.apache.lucene.index.ConcurrentMergeScheduler 
$MergeThread.run(ConcurrentMergeScheduler.java:240)

Of course, this may just be a red herring, since it is a background  
thread running and it may just be a timing thing, but it might be  
interesting if it consistently occurred in the same spot.


Thanks,
Grant

On May 29, 2008, at 7:43 PM, Paul J. Lucas wrote:

> I occasionally get a FileNotFoundException like:
>
> Exception in thread "Thread-44" org.apache.lucene.index.MergePolicy 
> $MergeException: java.io.FileNotFoundException: /Stuff/Caches/ 
> AuroraSupport/IM_IndexCache/INDEX/_27.cfs (No such file or directory)
> 	at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:271)
> Caused by: java.io.FileNotFoundException: /Stuff/Caches/ 
> AuroraSupport/IM_IndexCache/INDEX/_27.cfs (No such file or directory)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 	at org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
> 	at org.apache.lucene.store.FSDirectory 
> $FSIndexInput.<init>(FSDirectory.java:536)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 445)
> 	at  
> org 
> .apache 
> .lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
> 	at  
> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
> 277)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
> 	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java: 
> 3263)
> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
> 	at org.apache.lucene.index.ConcurrentMergeScheduler 
> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>
> I'm currently using the 2.3.2 version of Lucene.  The exception  
> frequency has decreased since upgrading from 2.3.1.
>
> My code runs in a server that monitors the filesystem.  Whenever the  
> contents of a directory change, my code unindexes all the files in  
> the changed directory, then reindexes all the files in the directory.
>
> I'm not doing anything complicated in my code.  To create/open the  
> index, I do:
>
> 	INDEX_DIR = new File( INDEX_CACHE_DIR, "INDEX" );
> 	INDEX = FSDirectory.getDirectory( INDEX_DIR );
> 	if ( IndexReader.isLocked( INDEX ) )
> 	    IndexReader.unlock( INDEX );
>
> The isLocked()/unlock() is because sometimes the server process gets  
> killed and leaves teh indexed locked.
>
> I have a thread than handles the unindexing/reindexing.  It gets  
> changed from a BlockingQueue.  My unindex code is like:
>
> 	IndexWriter writer = new IndexWriter( INDEX, INDEX_ANALYZER, false );
> 	final Term t = new Term( DIR_FIELD, dir.getAbsolutePath() );
> 	writer.deleteDocuments( t );
> 	writer.close();
>
> My indexing code is like:
>
> 	IndexWriter writer = new IndexWriter( INDEX, INDEX_ANALYZER );
> 	writer.setMergeFactor( INDEX_MERGE_FACTOR );
> 	Document doc = new Document();
> 	// ... add fields to doc ...
> 	writer.addDocument( doc );
> 	writer.close();
>
> While that thread is executing, other threads can search the index  
> by doing:
>
> 	IndexSearcher searcher = new IndexSearcher( INDEX );
> 	// ... prepare Query and Sort ...
> 	Hits hits = searcher.search( query, sort );
> 	Iterator hitIterator  hits.iterator();
> 	// ... iterate over hitIterator ...
> 	searcher.close();
>
> Any ideas?  Is this a bug in Lucene?
>
> - Paul
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 19:22:22 2008
Return-Path: <java-user-return-34372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85944 invoked from network); 10 Jun 2008 19:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 19:22:21 -0000
Received: (qmail 28991 invoked by uid 500); 10 Jun 2008 19:22:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28968 invoked by uid 500); 10 Jun 2008 19:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 63730 invoked by uid 99); 10 Jun 2008 18:41:06 -0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.mueller@scai.fraunhofer.de designates 153.96.87.18 as permitted sender)
X-Received: scai.fraunhofer.de-policy  from ksi.scai.fraunhofer.de (ldap.scai.fraunhofer.de [129.26.128.74])
	by ksi.scai.fraunhofer.de (8.13.5+/8.13.5) with ESMTP id m5AIeUUd017106
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 20:40:30 +0200 (CEST)
X-Authentication-Warning: ksi.scai.fraunhofer.de: Host ldap.scai.fraunhofer.de [129.26.128.74] claimed to be ksi.scai.fraunhofer.de
Message-ID: <36933.212.201.74.126.1213123229.squirrel@portal.scai.fraunhofer.de>
In-Reply-To: <9294E20AED46934EA459020706463F94C5973C@SUEXCL-02.ad.syr.edu>
References: <484E7545.1080803@scai.fhg.de>
    <9294E20AED46934EA459020706463F94C5973C@SUEXCL-02.ad.syr.edu>
Date: Tue, 10 Jun 2008 20:40:29 +0200 (CEST)
Subject: RE: indexing images of a document
From: "Bernd Mueller" <bernd.mueller@scai.fraunhofer.de>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.5
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Fraunhofer-Email-Policy: accepted
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steve,


Actually it is not about searching the binary data. I just wanna have the
whole document (together with the "image stuff") to be stored in the
index. So when I got a hit of a search on a document that I can extract
the document with its images (and the images' meta information).

Nice would be some data structure to be stored in the "image"-field of the
document (maybe a HashSet?). So I could extract the found documents with
all their image information from the index for easy visualization purpose
of the search results.


Regards,

Bernd


Steven A Rowe wrote:
> Hi Bernd,
>
> It's still not clear what you want to do.  What will a search look like?
>
> On 06/10/2008 at 8:36 AM, Bernd Mueller wrote:
>> I will try to explain what I mean with image stuff. An image in
>> xml-documents is usually an url to the location where the image is
>> stored. Additionally, such an image tag contains information like
>> offset, width and height. I am thinking about storing the
>> images (binary data) and meta-information (offset, width, height) in one
>> field instead of using these tagging information as values for a field
>> in the index.
>
> You seem to be saying that you want to store the binary image along with
> its metadata all in one field - is this correct?  Why do you want to do
> this?
>
>> I guess, your last statement "Lucene doesn't index binary data..."
>> indicates that this isn't possible...
>
> While Lucene will not *index* binary data, it can *store* it.
>
> Steve
>
>> Erick Erickson wrote:
>> > You add as many fields to the document while indexing as you need to
>> > correctly contain your "image stuff".
>> >
>> > If this answer seems cryptic, it's as clear as your problem statement
>> > <G>. To give you a meaningful answer, we need a much clearer
>> > problem statement. What is "image stuff", what format is it in, and
>> > what do you want to do with it?
>> >
>> > Lucene doesn't index binary data...
>> >
>> > Best
>> > Erick
>> >
>> > On Tue, Jun 10, 2008 at 8:13 AM, Bernd Mueller
>> > <bernd.mueller@scai.fhg.de> wrote:
>> >
>> > > Hello,
>> > >
>> > > I have XML-documents containing image information. These images
>> should
>> > > be indexed with the document by having one additional field with the
>> > > image stuff. Could anyone please give me some hints how I can manage
>> > > this?
>> > >
>> > > Regards,
>> > > Bernd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Diplom Informatiker (FH)
Bernd Mueller
Fraunhofer SCAI
Schlo Birlinghoven
53754 Sankt Augustin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 19:32:38 2008
Return-Path: <java-user-return-34373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91548 invoked from network); 10 Jun 2008 19:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 19:32:37 -0000
Received: (qmail 52723 invoked by uid 500); 10 Jun 2008 19:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52174 invoked by uid 500); 10 Jun 2008 19:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52163 invoked by uid 99); 10 Jun 2008 19:32:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 12:32:33 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 19:31:44 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: indexing images of a document
Date: Tue, 10 Jun 2008 15:29:54 -0400
Message-ID: <9294E20AED46934EA459020706463F94C5974B@SUEXCL-02.ad.syr.edu>
In-Reply-To: <36933.212.201.74.126.1213123229.squirrel@portal.scai.fraunhofer.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexing images of a document
Thread-Index: AcjLL3RqTXWI2BJFTTOSS9WvHHY/AQAAAsPQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bernd,

On 06/10/2008 at 2:40 PM, Bernd Mueller wrote:
> Actually it is not about searching the binary data. I just
> wanna have the whole document (together with the "image stuff")
> to be stored in the index. So when I got a hit of a search on a
> document that I can extract the document with its images (and
> the images' meta information).
>=20
> Nice would be some data structure to be stored in the
> "image"-field of the document (maybe a HashSet?). So I
> could extract the found documents with all their image information
> from the index for easy visualization purpose of the search results.

Lucene field values are flat - the kind of complex object serialization =
and de-serialization you're talking about is not directly supported.

That said, if you manage the packing and unpacking yourself, Lucene can =
help.  For example, if you serialize the image data and its metadata as =
a YAML file, with the binary data encoded as Base64 or something =
similar, you should be able to store and retrieve it as a String.  Or =
maybe you could store a .jar file in a binary field - that would =
probably be simplest.

Steve

> Steven A Rowe wrote:
> > Hi Bernd,
> >=20
> > It's still not clear what you want to do.  What will a search look =
like?
> >=20
> > On 06/10/2008 at 8:36 AM, Bernd Mueller wrote:
> > > I will try to explain what I mean with image stuff. An image in
> > > xml-documents is usually an url to the location where the image is
> > > stored. Additionally, such an image tag contains information like
> > > offset, width and height. I am thinking about storing the images
> > > (binary data) and meta-information (offset, width, height) in one
> > > field instead of using these tagging information as values for a =
field
> > > in the index.
> >=20
> > You seem to be saying that you want to store the binary image along
> > with its metadata all in one field - is this correct?  Why do you =
want
> > to do this?
> >=20
> > > I guess, your last statement "Lucene doesn't index binary data..."
> > > indicates that this isn't possible...
> >=20
> > While Lucene will not *index* binary data, it can *store* it.
> >=20
> > Steve
> >=20
> > > Erick Erickson wrote:
> > > > You add as many fields to the document while indexing as you =
need to
> > > > correctly contain your "image stuff".
> > > >=20
> > > > If this answer seems cryptic, it's as clear as your problem =
statement
> > > > <G>. To give you a meaningful answer, we need a much clearer =
problem
> > > > statement. What is "image stuff", what format is it in, and what =
do
> > > > you want to do with it?
> > > >=20
> > > > Lucene doesn't index binary data...
> > > >=20
> > > > Best
> > > > Erick
> > > >=20
> > > > On Tue, Jun 10, 2008 at 8:13 AM, Bernd Mueller
> > > > <bernd.mueller@scai.fhg.de> wrote:
> > > >=20
> > > > > Hello,
> > > > >=20
> > > > > I have XML-documents containing image information. These =
images
> > > > > should be indexed with the document by having one additional =
field
> > > > > with the image stuff. Could anyone please give me some hints =
how I
> > > > > can manage this?
> > > > >=20
> > > > > Regards,
> > > > > Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 19:36:10 2008
Return-Path: <java-user-return-34374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92743 invoked from network); 10 Jun 2008 19:36:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 19:36:10 -0000
Received: (qmail 63264 invoked by uid 500); 10 Jun 2008 19:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63236 invoked by uid 500); 10 Jun 2008 19:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63225 invoked by uid 99); 10 Jun 2008 19:36:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 12:36:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 19:35:14 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1613417wra.21
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 12:35:30 -0700 (PDT)
Received: by 10.90.73.17 with SMTP id v17mr5678250aga.87.1213126530482;
        Tue, 10 Jun 2008 12:35:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm5417066aga.15.2008.06.10.12.35.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 10 Jun 2008 12:35:29 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org>
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3554C441-6C62-4E34-BDB9-0606D99EEA6F@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Tue, 10 Jun 2008 15:35:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Grant,

Can you describe any details on how this app is using Lucene?  EG are  
you using autoCommit=false or true?  Is more than one thread adding  
documents to the index?  Any changes to the defaults in IndexWriter?

After seeing that exception, does IndexReader.open also hit that  
exception (ie, is/was the index corrupt)?  Or does it only happen  
with BG merges?

Mike

Grant Ingersoll wrote:

> Hi Paul,
>
> Not sure if this was resolved, but I don't think it was.  Can you  
> try reproducing this with setCompoundFile(false)?  That is, turn of  
> compound files.  I have an intermittent report of an exception that  
> looks eerily similar that I am trying to track down and I am not  
> using CFS and the exception is reporting the error in the .fdt  
> (stored fields info) file.  Unfortunately, I don't have any more  
> specifics at this time as it hasn't been reproduced since, but  
> thought that you might be able to get to it quicker since you seem  
> to be able to somewhat reproduce it.
>
> Exception is:
> java.io.FileNotFoundException: ..../index/_1l5.fdt (No such file or  
> directory)
> 	at java.io.RandomAccessFile.open(Native Method)
> 	at java.io.RandomAccessFile.<init>(Unknown Source)
> 	at org.apache.lucene.store.FSDirectory$FSIndexInput 
> $Descriptor.<init>(FSDirectory.java:506)
> 	at org.apache.lucene.store.FSDirectory$FSIndexInput.<init> 
> (FSDirectory.java:536)
> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
> 445)
> 	at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:75)
> 	at org.apache.lucene.index.SegmentReader.initialize 
> (SegmentReader.java:308)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
> 	at org.apache.lucene.index.IndexWriter.mergeMiddle 
> (IndexWriter.java:3263)
> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
> 	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run 
> (ConcurrentMergeScheduler.java:240)
>
> Of course, this may just be a red herring, since it is a background  
> thread running and it may just be a timing thing, but it might be  
> interesting if it consistently occurred in the same spot.
>
>
> Thanks,
> Grant
>
> On May 29, 2008, at 7:43 PM, Paul J. Lucas wrote:
>
>> I occasionally get a FileNotFoundException like:
>>
>> Exception in thread "Thread-44" org.apache.lucene.index.MergePolicy 
>> $MergeException: java.io.FileNotFoundException: /Stuff/Caches/ 
>> AuroraSupport/IM_IndexCache/INDEX/_27.cfs (No such file or directory)
>> 	at org.apache.lucene.index.ConcurrentMergeScheduler 
>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>> Caused by: java.io.FileNotFoundException: /Stuff/Caches/ 
>> AuroraSupport/IM_IndexCache/INDEX/_27.cfs (No such file or directory)
>> 	at java.io.RandomAccessFile.open(Native Method)
>> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>> 	at org.apache.lucene.store.FSDirectory$FSIndexInput 
>> $Descriptor.<init>(FSDirectory.java:506)
>> 	at org.apache.lucene.store.FSDirectory$FSIndexInput.<init> 
>> (FSDirectory.java:536)
>> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
>> 445)
>> 	at org.apache.lucene.index.CompoundFileReader.<init> 
>> (CompoundFileReader.java:70)
>> 	at org.apache.lucene.index.SegmentReader.initialize 
>> (SegmentReader.java:277)
>> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>> 	at org.apache.lucene.index.IndexWriter.mergeMiddle 
>> (IndexWriter.java:3263)
>> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
>> 	at org.apache.lucene.index.ConcurrentMergeScheduler 
>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>>
>> I'm currently using the 2.3.2 version of Lucene.  The exception  
>> frequency has decreased since upgrading from 2.3.1.
>>
>> My code runs in a server that monitors the filesystem.  Whenever  
>> the contents of a directory change, my code unindexes all the  
>> files in the changed directory, then reindexes all the files in  
>> the directory.
>>
>> I'm not doing anything complicated in my code.  To create/open the  
>> index, I do:
>>
>> 	INDEX_DIR = new File( INDEX_CACHE_DIR, "INDEX" );
>> 	INDEX = FSDirectory.getDirectory( INDEX_DIR );
>> 	if ( IndexReader.isLocked( INDEX ) )
>> 	    IndexReader.unlock( INDEX );
>>
>> The isLocked()/unlock() is because sometimes the server process  
>> gets killed and leaves teh indexed locked.
>>
>> I have a thread than handles the unindexing/reindexing.  It gets  
>> changed from a BlockingQueue.  My unindex code is like:
>>
>> 	IndexWriter writer = new IndexWriter( INDEX, INDEX_ANALYZER,  
>> false );
>> 	final Term t = new Term( DIR_FIELD, dir.getAbsolutePath() );
>> 	writer.deleteDocuments( t );
>> 	writer.close();
>>
>> My indexing code is like:
>>
>> 	IndexWriter writer = new IndexWriter( INDEX, INDEX_ANALYZER );
>> 	writer.setMergeFactor( INDEX_MERGE_FACTOR );
>> 	Document doc = new Document();
>> 	// ... add fields to doc ...
>> 	writer.addDocument( doc );
>> 	writer.close();
>>
>> While that thread is executing, other threads can search the index  
>> by doing:
>>
>> 	IndexSearcher searcher = new IndexSearcher( INDEX );
>> 	// ... prepare Query and Sort ...
>> 	Hits hits = searcher.search( query, sort );
>> 	Iterator hitIterator  hits.iterator();
>> 	// ... iterate over hitIterator ...
>> 	searcher.close();
>>
>> Any ideas?  Is this a bug in Lucene?
>>
>> - Paul
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 20:42:28 2008
Return-Path: <java-user-return-34375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21377 invoked from network); 10 Jun 2008 20:42:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 20:42:28 -0000
Received: (qmail 19037 invoked by uid 500); 10 Jun 2008 20:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19012 invoked by uid 500); 10 Jun 2008 20:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19001 invoked by uid 99); 10 Jun 2008 20:42:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 13:42:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 20:41:31 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 75362109F31
	for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 13:41:47 -0700 (PDT)
Message-Id: <6E16D593-87FE-43A4-AC5F-5E1BED594B2B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <3554C441-6C62-4E34-BDB9-0606D99EEA6F@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Tue, 10 Jun 2008 16:41:46 -0400
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org> <3554C441-6C62-4E34-BDB9-0606D99EEA6F@mikemccandless.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 10, 2008, at 3:35 PM, Michael McCandless wrote:

>
> Grant,
>
> Can you describe any details on how this app is using Lucene?

It's in Solr using the trunk.

> EG are you using autoCommit=false or true?

ac=false

>  Is more than one thread adding documents to the index?

I don't believe so, but I am trying to reproduce.  I've only seen it  
once, and don't have a lot of details, other than I noticed it was on  
a specific file (.fdt) and was wondering if that was a factor or not.   
That is, maybe Paul could reproduce it.

>  Any changes to the defaults in IndexWriter?

It's the SolrIndexWriter.

>
>
> After seeing that exception, does IndexReader.open also hit that  
> exception (ie, is/was the index corrupt)?  Or does it only happen  
> with BG merges?

Not sure, unfortunately, I don't have a lot of info yet.  The  
background exception happened during an optimize, if that matters at all

>
>
> Mike
>
> Grant Ingersoll wrote:
>
>> Hi Paul,
>>
>> Not sure if this was resolved, but I don't think it was.  Can you  
>> try reproducing this with setCompoundFile(false)?  That is, turn of  
>> compound files.  I have an intermittent report of an exception that  
>> looks eerily similar that I am trying to track down and I am not  
>> using CFS and the exception is reporting the error in the .fdt  
>> (stored fields info) file.  Unfortunately, I don't have any more  
>> specifics at this time as it hasn't been reproduced since, but  
>> thought that you might be able to get to it quicker since you seem  
>> to be able to somewhat reproduce it.
>>
>> Exception is:
>> java.io.FileNotFoundException: ..../index/_1l5.fdt (No such file or  
>> directory)
>> 	at java.io.RandomAccessFile.open(Native Method)
>> 	at java.io.RandomAccessFile.<init>(Unknown Source)
>> 	at org.apache.lucene.store.FSDirectory$FSIndexInput 
>> $Descriptor.<init>(FSDirectory.java:506)
>> 	at org.apache.lucene.store.FSDirectory 
>> $FSIndexInput.<init>(FSDirectory.java:536)
>> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
>> 445)
>> 	at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:75)
>> 	at  
>> org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
>> 308)
>> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
>> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:221)
>> 	at  
>> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java: 
>> 3263)
>> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
>> 	at org.apache.lucene.index.ConcurrentMergeScheduler 
>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>>
>> Of course, this may just be a red herring, since it is a background  
>> thread running and it may just be a timing thing, but it might be  
>> interesting if it consistently occurred in the same spot.
>>
>>
>> Thanks,
>> Grant
>>
>> On May 29, 2008, at 7:43 PM, Paul J. Lucas wrote:
>>
>>> I occasionally get a FileNotFoundException like:
>>>
>>> Exception in thread "Thread-44" org.apache.lucene.index.MergePolicy 
>>> $MergeException: java.io.FileNotFoundException: /Stuff/Caches/ 
>>> AuroraSupport/IM_IndexCache/INDEX/_27.cfs (No such file or  
>>> directory)
>>> 	at org.apache.lucene.index.ConcurrentMergeScheduler 
>>> $MergeThread.run(ConcurrentMergeScheduler.java:271)
>>> Caused by: java.io.FileNotFoundException: /Stuff/Caches/ 
>>> AuroraSupport/IM_IndexCache/INDEX/_27.cfs (No such file or  
>>> directory)
>>> 	at java.io.RandomAccessFile.open(Native Method)
>>> 	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>>> 	at org.apache.lucene.store.FSDirectory$FSIndexInput 
>>> $Descriptor.<init>(FSDirectory.java:506)
>>> 	at org.apache.lucene.store.FSDirectory 
>>> $FSIndexInput.<init>(FSDirectory.java:536)
>>> 	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java: 
>>> 445)
>>> 	at  
>>> org 
>>> .apache 
>>> .lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:70)
>>> 	at  
>>> org 
>>> .apache.lucene.index.SegmentReader.initialize(SegmentReader.java: 
>>> 277)
>>> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java: 
>>> 262)
>>> 	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java: 
>>> 221)
>>> 	at  
>>> org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java: 
>>> 3263)
>>> 	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:2968)
>>> 	at org.apache.lucene.index.ConcurrentMergeScheduler 
>>> $MergeThread.run(ConcurrentMergeScheduler.java:240)
>>>
>>> I'm currently using the 2.3.2 version of Lucene.  The exception  
>>> frequency has decreased since upgrading from 2.3.1.
>>>
>>> My code runs in a server that monitors the filesystem.  Whenever  
>>> the contents of a directory change, my code unindexes all the  
>>> files in the changed directory, then reindexes all the files in  
>>> the directory.
>>>
>>> I'm not doing anything complicated in my code.  To create/open the  
>>> index, I do:
>>>
>>> 	INDEX_DIR = new File( INDEX_CACHE_DIR, "INDEX" );
>>> 	INDEX = FSDirectory.getDirectory( INDEX_DIR );
>>> 	if ( IndexReader.isLocked( INDEX ) )
>>> 	    IndexReader.unlock( INDEX );
>>>
>>> The isLocked()/unlock() is because sometimes the server process  
>>> gets killed and leaves teh indexed locked.
>>>
>>> I have a thread than handles the unindexing/reindexing.  It gets  
>>> changed from a BlockingQueue.  My unindex code is like:
>>>
>>> 	IndexWriter writer = new IndexWriter( INDEX, INDEX_ANALYZER,  
>>> false );
>>> 	final Term t = new Term( DIR_FIELD, dir.getAbsolutePath() );
>>> 	writer.deleteDocuments( t );
>>> 	writer.close();
>>>
>>> My indexing code is like:
>>>
>>> 	IndexWriter writer = new IndexWriter( INDEX, INDEX_ANALYZER );
>>> 	writer.setMergeFactor( INDEX_MERGE_FACTOR );
>>> 	Document doc = new Document();
>>> 	// ... add fields to doc ...
>>> 	writer.addDocument( doc );
>>> 	writer.close();
>>>
>>> While that thread is executing, other threads can search the index  
>>> by doing:
>>>
>>> 	IndexSearcher searcher = new IndexSearcher( INDEX );
>>> 	// ... prepare Query and Sort ...
>>> 	Hits hits = searcher.search( query, sort );
>>> 	Iterator hitIterator  hits.iterator();
>>> 	// ... iterate over hitIterator ...
>>> 	searcher.close();
>>>
>>> Any ideas?  Is this a bug in Lucene?
>>>
>>> - Paul
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 20:43:06 2008
Return-Path: <java-user-return-34376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21550 invoked from network); 10 Jun 2008 20:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 20:43:06 -0000
Received: (qmail 24108 invoked by uid 500); 10 Jun 2008 20:43:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24079 invoked by uid 500); 10 Jun 2008 20:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24068 invoked by uid 99); 10 Jun 2008 20:43:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 13:43:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 20:42:10 +0000
Received: by ug-out-1314.google.com with SMTP id h3so168836ugf.29
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 13:42:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=gcIJ7xHajMdMvgE6ZhEaejnoLMDByfeANSb7krTxWGg=;
        b=oDuuZ5U4NIdjmeNjJgIK1W827ImUDmmK5Rgsx22LVYdYkA/KLvmiDp/Fy+dU7OMXHy
         nOLeXVk8uD+/4Guybxnpg9OUosFe9ZYCB3QN2RFx61rd9OOwe87PEalSarb/zNFcdyHg
         ahtrj2YWdKBvSS4ErIsqoQDvVqvNiSvtUc0hA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=iFQxH+5G0aVsE+N9GqnJKbVQcbMOsdircHvJojlBVY/cHPbu7E5T6s8pHQ+jec3WIO
         LQru49mrnlntAChtEhm5Kemro3WWGzbJd+LtW5NRIbFaXr+D87w9TYvEWR5vSrDv3PYs
         UYRQwVk7fVwjzvs1YkbpHsrCf5Ry7NlwghZbY=
Received: by 10.78.134.7 with SMTP id h7mr2954404hud.76.1213130545943;
        Tue, 10 Jun 2008 13:42:25 -0700 (PDT)
Received: by 10.78.185.19 with HTTP; Tue, 10 Jun 2008 13:42:25 -0700 (PDT)
Message-ID: <2d72c9c50806101342t6ebc420frae6c12d840687fcb@mail.gmail.com>
Date: Tue, 10 Jun 2008 13:42:25 -0700
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: number of hits per document
In-Reply-To: <484E8194.6080903@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <484D4A5D.4000507@propylon.com>
	 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
	 <484E8194.6080903@propylon.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi John,

Sorry I don't have a solution for you but I'm trying to do the same
thing. I would love to hear from you if you have any success with
this.

Cheers,

Spencer
spencertickner@gmail.com

On Tue, Jun 10, 2008 at 6:28 AM, John Byrne <john.byrne@propylon.com> wrote:
> Hi,
>
> I could do it that way, but couting the spans per document is specific to
> SpanQuerys. I would still have to count hits for TermQuerys separately. I
> was looking for a generic way to count hits for any instance of Query within
> a document.
>
> To put it another way, the ability to find the Term frequency in a single
> document seems incomplete, since a Term does not equate to a hit. For
> instance, sticking with my previous example, if my document contained a
> thousand occurrences of "cats" but only one of them is near "dogs", then the
> frequency of the Term "cats" in that document is irrelevant to me.
>
> In general, my queries will consist of a BooleanQuery containing any number
> of sub-queries of any implementation - what I actually need to know is how
> many hits there are for that BooleanQuery query in each document. Maybe I
> will expand the BooleanQuery into all it's sub-queries recursively, and then
> handle them by type - counting spans per document for SpanQuerys and using
> the Term frequency for TermQuerys. I was just hoping there would be an
> existing (and fast)  way to do this.
>
> Thanks,
> John
>
> Grant Ingersoll wrote:
>>
>> A SpanQuery is just a Query, so the traditional way of Querying still
>> applies, i.e. you get back a list of matching documents.  Beyond that, if
>> you just want to operate on the spans, just keep track of how often the
>> doc() method changes.
>>
>> HTH,
>> Grant
>> On Jun 9, 2008, at 11:21 AM, John Byrne wrote:
>>
>>> Hi,
>>>
>>> Is there an easy way to find out the number of hits per document for a
>>> Query, rather than just for a Term?
>>>
>>> Let's say, for example, I have a document like this:
>>>
>>> "here is cats near dogs and here is cats a long long way from dogs"
>>>
>>> and I use a SpanNearQuery to find "cats" near "dogs" with a slop of 1 - I
>>> need to be able to find out that there was 1 hit, even though there are 2
>>> occurrences of "cats" and 2 of "dogs" - there is still only 1 hit that
>>> matches my Query.
>>>
>>> Is this possible?
>>>
>>> Thanks,
>>> JB.
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 22:36:12 2008
Return-Path: <java-user-return-34377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54254 invoked from network); 10 Jun 2008 22:36:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 22:36:11 -0000
Received: (qmail 91500 invoked by uid 500); 10 Jun 2008 22:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91472 invoked by uid 500); 10 Jun 2008 22:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91461 invoked by uid 99); 10 Jun 2008 22:36:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 15:36:07 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 22:35:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6CRB-0007Th-TN
	for java-user@lucene.apache.org; Tue, 10 Jun 2008 15:35:33 -0700
Message-ID: <17766268.post@talk.nabble.com>
Date: Tue, 10 Jun 2008 15:35:33 -0700 (PDT)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: retrieve all docs efficiently - just one field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings all. I have read many posts concerning similar use cases, but I am
still a little hazy on the best way to achieve what I need to do. Here is
the background:

2 million documents with multiple sections, some sections contain structured
data, some unstructured.

We parse the docs and place the structured stuff in oracle where each
section is a table and one master table to relate them all.

We index the unstructured sections with lucene where each section is a
document (meaning a total of about ~30 million documents) with extra fields
including one for the primary key of the master table and then some meta
fields to describe the section - type, date, etc.

For a common use case, say we have a table called demographics with a number
field that represents age (overly simplistic but gets the point across).

So say we want all people over the age of 50 who may have visited Panama: 

--
We have our lucene index and we want to search the section text for the word
"panama" 

AND

We want to select from the demographics table where age > 50.
--

Now I need to intersect the master table IDs from my lucene hits and my
table results. 

I have a java stored procedure that runs the lucene query and creates a
temporary table with a single column where I insert the master id from the
hits of my lucene query. I then can do a join with my structured query
results.

The problem here is obviously the speed of iterating through the hits to
extract the single field that I need.

Notes: 
- I must be able to get a full set of results, though I only need the one id
field
- We originally went with Oracle text which was simple, but limited and
quite slow for most queries


I have read a little about the hitcollector class and the fieldselector api,
but I am still not sure how they may help me or even if they can.

I have also tooled around with the idea of using termdocs, but the queries
may get a little complex with various ors/ands/nots, though probably not
spans and so forth.

Any suggestions will be greatly apreciated.

Thanks,

J

-- 
View this message in context: http://www.nabble.com/retrieve-all-docs-efficiently---just-one-field-tp17766268p17766268.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 23:42:56 2008
Return-Path: <java-user-return-34378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69318 invoked from network); 10 Jun 2008 23:42:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 23:42:56 -0000
Received: (qmail 53566 invoked by uid 500); 10 Jun 2008 23:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53532 invoked by uid 500); 10 Jun 2008 23:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53515 invoked by uid 99); 10 Jun 2008 23:42:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 16:42:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.21 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 23:42:01 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5ANfdut052857
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 01:41:47 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <5BE05F9C-D345-4A7F-86CA-B2980E98945D@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Scoring filters
Date: Wed, 11 Jun 2008 01:41:38 +0200
X-Mailer: Apple Mail (2.919.2)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Each of my filters represent single boosting term queries. But when  
using the filter instead o the boosting term query I loose the score  
(not sure this is true) and payload boost (if any), both essential for  
the quality of my results. If I was to add payloads to the bits that  
are set, what is the best or simplest way to get the score back in?  
How about wrapping each filter in a query?

Are there any obvious problems with this strategy that I've missed?


      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 10 23:56:27 2008
Return-Path: <java-user-return-34379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71462 invoked from network); 10 Jun 2008 23:56:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jun 2008 23:56:26 -0000
Received: (qmail 63535 invoked by uid 500); 10 Jun 2008 23:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63504 invoked by uid 500); 10 Jun 2008 23:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63488 invoked by uid 99); 10 Jun 2008 23:56:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 16:56:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.32 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 23:55:33 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5ANtAo3046619
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 01:55:19 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <E892E79A-9E2C-4A0C-B536-392E4021F906@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <17766268.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: retrieve all docs efficiently - just one field
Date: Wed, 11 Jun 2008 01:55:10 +0200
References: <17766268.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 jun 2008 kl. 00.35 skrev 1world1love:
>
> We have our lucene index and we want to search the section text for  
> the word
> "panama"
>
> AND
>
> We want to select from the demographics table where age > 50.
> --
>
> Now I need to intersect the master table IDs from my lucene hits and  
> my
> table results.

I might be missing something here -- can't you just add the age field  
to the index and include that in your query?


             karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 04:10:02 2008
Return-Path: <java-user-return-34380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43171 invoked from network); 11 Jun 2008 04:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 04:10:02 -0000
Received: (qmail 2287 invoked by uid 500); 11 Jun 2008 04:09:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2258 invoked by uid 500); 11 Jun 2008 04:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2247 invoked by uid 99); 11 Jun 2008 04:09:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 21:09:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 04:09:08 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2471018fgb.27
        for <java-user@lucene.apache.org>; Tue, 10 Jun 2008 21:09:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9u5DqcsAsOMngjrCg6P/rhNwXvMFZfewbHXjEO8KvIU=;
        b=UaUi0yfxQzITsUE0aKEXMpCDQ6Jgd/2AMdKOaQgHrR/iY0+pmIa3+YYERel2ueK8oh
         8WNsBGH/t3OYbQDIkw1QKE8xJADwAJARgGEUp/ZncnzglhCDuTv9LQbQpUucIeyVA/gE
         YBz/8Dzagqdd8BULx8XKC92uM+FxHmAvAkUfU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iR3zTfXhup8lO+gAo6+MthTaJcyrTc0emn5Dulg5o1vq4/RXNxUQddA3a8XGE4gMJP
         qd3yNzlbvlfbLh6TMCIwZDaAjYAPy8YB/PszYP9JammambZr2tneEHOT70PD9G4A9Dtf
         FOdIsF8U+NT+SUeC3fQyAPCUHJd/awlgh5FAg=
Received: by 10.125.73.13 with SMTP id a13mr7825mkl.8.1213157364608;
        Tue, 10 Jun 2008 21:09:24 -0700 (PDT)
Received: by 10.125.130.6 with HTTP; Tue, 10 Jun 2008 21:09:24 -0700 (PDT)
Message-ID: <867513fe0806102109g524b6ad2se79f7ce8a912b7b5@mail.gmail.com>
Date: Wed, 11 Jun 2008 09:39:24 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: swapping Lucene's on RAM drive
In-Reply-To: <484E8560.9070400@tbee.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3806_32303185.1213157364603"
References: <484E4829.9040702@tbee.org>
	 <867513fe0806100250g72411673yb0fb811024d7e143@mail.gmail.com>
	 <484E8560.9070400@tbee.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3806_32303185.1213157364603
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Tom,

Just a suggestion, why don't you try explicitly using tmpfs. (considering
you use a unix/linux server. I tried both, RAMDirectory implementation and
tmpfs and found the latter more appealing. Firstly, in this case you'll have
more control of cleaning up/retaining as per your needs. Also, using
RAMDirectory depends on the architecture i.e. In case you run a 32 bit
machine with a 32 bit OS and a 32 bit JVM, you wouldnt be able to allocate
more than 2 Gigs of memory to any process(in this case JVM) and hence the
total memory available for utilization by the program (includes both, the
index as well as program size) would be restricted by this limit.
In case of tmpfs, there is no such limitation. All you need to do is mount a
tmpfs type partion (which uses your ram, and the total RAM available is the
only limit here) and copy the index to that mount. The just open readers to
read from that partition.

All that I said above was just a suggestion, so you might want to try.
As about automatic GC, you could also look at the options available with
JVM. :)

Hope this helps.

--
Anshum Gupta
Naukri Labs

On Tue, Jun 10, 2008 at 7:15 PM, Tom <tbee@tbee.org> wrote:

> Thanks for reacting Anshum,
>
> I also posted this on the Compass forum, but I was not sure where the
> responsibility was. But your information did give me a good start. From the
> Compass' RAMDirectoryStore source code: "uses
> org.apache.lucene.store.RAMDirectory"
>
> So appearantly I use two separate Lucene RamDirectory instances, one for
> each Compass/Lucene engine, which would mean that the data is garbage
> collected. Good!
>
> I also have the sheer impression that the id I postfix to the "ram://" is
> quite useless. I cannot find any location where that information is actually
> used to configure separate filesystems on a ram drive. As a comparison, the
> FSDirectoryStore has a "configure" method which actually uses the part
> behind the ://, but the RAMDirectoryStore only is created. In fact the
> RAMDirectoryStore does nothing else aside from being created; no deleteIndex
> is implemented, no cleanIndex, no nothing. It seems a miracle it works at
> all ;-) The only thing that is present is a delete-files loop in
> beforeCopyFrom.
>
> So I think I dare to assume that the memory is garbage collected.
>
> Thanks again.
>
> Tom
>
>
>
>
>
>
> Anshum wrote:
>
>> Hi Tom, perhaps this is regarding Compass and you would have wanted to
>> post
>> this query there.
>> In case you are looking and asking about running 2 instances of lucene on
>> the machine with 2 separate indexes in RAM, could you specify :
>> * Do you use tmpfs or do you load it using the RamDirectory class?
>> * In case you use tmpfs, you'd have to clean it manually after releasing
>> the
>> hold of the engine (by stopping or closing the old index reader). The
>> cleaning is done straight off by deleting the index or moving the index
>> off
>> the tmpfs after closing the index reader. Incase you happen to do it
>> without
>> closing the reader, though the dir won't be listed under the directory
>> listing but it would still be using all of that space (which you would
>> only
>> realise if you run out of space i.e. have space constraints).
>> * In the other case, if you are just using the OS cache mechanism or
>> something like it, it would not get cleaned up but gradually be cleaned as
>> and when the OS needs to allocate more memory (that is how caching works).
>>
>> --
>> Anshum
>> Naukri Labs!
>>
>> On Tue, Jun 10, 2008 at 2:53 PM, Tom <tbee@tbee.org> wrote:
>>
>>
>>
>>> I have not been able to find much information about this, hence this
>>> question.
>>>
>>> Currently I use Lucene through Compass with the data stored in RAM. The
>>> indexed information is updated daily and therefore I create a new
>>> Compass/Lucene combination every day, let it load the new data and then
>>> swap
>>> the active search engine (simply assigning a 'global' variable). So, all
>>> in
>>> memory.
>>>
>>> I'm not confident what this will do with the memory. In my setupo each
>>> Compass/Lucene engine gets a separate ram store based on a different id
>>> per
>>> engine:
>>>
>>>  ...setSetting(CompassEnvironment.CONNECTION, "ram://" + id)
>>>
>>> And this seems to be working okay. However:
>>> 1. Is this the correct way to have 2 engines running next to each other
>>> (while the second one is loading the new data)?
>>> 2. After the engines are swapped, is the RAM store of the now not used
>>> engine automatically cleaned up? If not, how do I?
>>>
>>> Thanks for any help!
>>>
>>> Tom
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>>
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_3806_32303185.1213157364603--

From java-user-return-34381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 05:53:21 2008
Return-Path: <java-user-return-34381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65224 invoked from network); 11 Jun 2008 05:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 05:53:20 -0000
Received: (qmail 47999 invoked by uid 500); 11 Jun 2008 05:53:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47015 invoked by uid 500); 11 Jun 2008 05:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47004 invoked by uid 99); 11 Jun 2008 05:53:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Jun 2008 22:53:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Jun 2008 05:52:24 +0000
Received: (qmail 22825 invoked by uid 60001); 11 Jun 2008 05:51:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=VOEjE/8oHNuol4ijB4u2SSjSrH0QkH6FMCFqO2O3SPo2fuAoOGfbyDwuz8OuIGdjNUfRO5c+hCKKjqPEoejIiq6s2AyxI7da9QVtAhQN9O9hpw5qudLhDxGF1NIxBE4J1s7oGwVwMgP+Xdg5oj8FsAfSzYq3q4mVY2e3PlGFY3E=;
Received: from [72.231.9.236] by web50301.mail.re2.yahoo.com via HTTP; Tue, 10 Jun 2008 22:51:39 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Tue, 10 Jun 2008 22:51:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Memory Leak when using Custom Sort (i.e., DistanceSortSource) of LocalLucene with Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <571296.22735.qm@web50301.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ethan,

Yes, it would be good to have this in JIRA.  Please see http://wiki.apache.org/lucene-java/HowToContribute for info about generating the patch, etc.

Thanks,
Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Ethan Tao <Ethant@collarity.com>
> To: java-user@lucene.apache.org
> Sent: Monday, June 9, 2008 5:10:31 PM
> Subject: Memory Leak when using Custom Sort (i.e., DistanceSortSource) of LocalLucene with Lucene
> 
> Hi, 
> 
> 
> 
> We had the memory leak issue when using DistanceSortSource of
> LocalLucene for repeated query/search. In about 450 queries, we are
> experiencing out of memory error. After dig in the code, we found the
> problem source is coming from Lucene package, the way how it handles
> "custom" type comparator. Lucene internally caches all created
> comparators. In the case of query using LocalLucene, we create new
> comparator for every search due to different lon/lat and query terms.
> This causes major memory leak as the cached comparators are also holding
> memory for other large objects (e.g., bit sets). The solution we came up
> with:
> 
> 
> 
> 1.  In Lucene package, create new file
> SortComparatorSourceUncacheable.java:
> 
> 
> 
> package org.apache.lucene.search;
> 
> 
> 
> import org.apache.lucene.index.IndexReader;
> 
> import java.io.IOException;
> 
> import java.io.Serializable;
> 
> 
> 
> public interface SortComparatorSourceUncacheable extends Serializable {
> 
> }
> 
> 
> 
> 2.       Have your custom sort class to implement the interface
> 
> 
> 
> public class LocalSortSource extends DistanceSortSource implements
> SortComparatorSourceUncacheable {
> 
> ...
> 
> }
> 
> 
> 
> 3.       Modify Lucene's FieldSorterHitQueue.java to bypass caching for
> custom sort comparator:
> 
> 
> 
> Index: FieldSortedHitQueue.java
> 
> ===================================================================
> 
> --- FieldSortedHitQueue.java     (revision 654583)
> 
> +++ FieldSortedHitQueue.java  (working copy)
> 
> @@ -53,7 +53,12 @@
> 
>      this.fields = new SortField[n];
> 
>      for (int i=0; i
> 
>        String fieldname = fields[i].getField();
> 
> -      comparators[i] = getCachedComparator (reader, fieldname,
> fields[i].getType(), fields[i].getLocale(), fields[i].getFactory());
> 
> +
> 
> +      if(fields[i].getFactory() instanceof
> SortComparatorSourceUncacheable) { // no caching to avoid memory leak
> 
> +        comparators[i] = getComparator (reader, fieldname,
> fields[i].getType(), fields[i].getLocale(), fields[i].getFactory());
> 
> +      } else {
> 
> +        comparators[i] = getCachedComparator (reader, fieldname,
> fields[i].getType(), fields[i].getLocale(), fields[i].getFactory());
> 
> +      }
> 
>       
> 
>        if (comparators[i].sortType() == SortField.STRING) {
> 
>                   this.fields[i] = new SortField (fieldname,
> fields[i].getLocale(), fields[i].getReverse());
> 
> @@ -157,7 +162,18 @@
> 
>    SortField[] getFields() {
> 
>      return fields;
> 
>    }
> 
> -  
> 
> +
> 
> +  static ScoreDocComparator getComparator (IndexReader reader, String
> field, int type, Locale locale, SortComparatorSource factory)
> 
> +    throws IOException {
> 
> +      if (type == SortField.DOC) return ScoreDocComparator.INDEXORDER;
> 
> +      if (type == SortField.SCORE) return ScoreDocComparator.RELEVANCE;
> 
> +      FieldCacheImpl.Entry entry = (factory != null)
> 
> +        ? new FieldCacheImpl.Entry (field, factory)
> 
> +        : new FieldCacheImpl.Entry (field, type, locale);
> 
> +      return (ScoreDocComparator)Comparators.createValue(reader,
> entry);
> 
> +    }
> 
> +
> 
> +
> 
> 
> 
> 
> 
> Can someone from internal Lucene Developer please review the change
> above and see if it makes sense? And possibly if a feature request
> should be filed in Jira, please let me know.
> 
> Thanks.
> 
> 
> 
> -Ethan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 07:15:10 2008
Return-Path: <java-user-return-34382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94130 invoked from network); 11 Jun 2008 07:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 07:15:10 -0000
Received: (qmail 18893 invoked by uid 500); 11 Jun 2008 07:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18850 invoked by uid 500); 11 Jun 2008 07:15:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18839 invoked by uid 99); 11 Jun 2008 07:15:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 00:15:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:14:16 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr17.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5B7EWHw004033
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 09:14:32 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Scoring filters
Date: Wed, 11 Jun 2008 09:14:32 +0200
User-Agent: KMail/1.9.9
References: <5BE05F9C-D345-4A7F-86CA-B2980E98945D@gmail.com>
In-Reply-To: <5BE05F9C-D345-4A7F-86CA-B2980E98945D@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806110914.32732.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Wednesday 11 June 2008 01:41:38 schreef Karl Wettin:
> Each of my filters represent single boosting term queries. But when
> using the filter instead o the boosting term query I loose the score
> (not sure this is true) and payload boost (if any), both essential
> for the quality of my results. If I was to add payloads to the bits
> that are set, what is the best or simplest way to get the score back
> in? How about wrapping each filter in a query?
>
> Are there any obvious problems with this strategy that I've missed?

Why not add the boosting term queries as required
to a BooleanQuery? This has the advantage that it uses the
index data and the various caches built into Lucene and the
underlying OS.

In case you have the memory available, it is also possible to keep
the score values of any Query with the Filter and implement a Scorer
using the filter docs and these score values. Then use this as the
scorer for a new Query, via a Weight.
Once this new Query is available, just add it as required to a
BooleanQuery.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 07:24:08 2008
Return-Path: <java-user-return-34383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97263 invoked from network); 11 Jun 2008 07:24:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 07:24:07 -0000
Received: (qmail 25676 invoked by uid 500); 11 Jun 2008 07:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25640 invoked by uid 500); 11 Jun 2008 07:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25629 invoked by uid 99); 11 Jun 2008 07:24:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 00:24:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:23:15 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K2A001EIF0YXD@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 11 Jun 2008 09:19:46 +0200 (MEST)
Date: Wed, 11 Jun 2008 09:19:46 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: RE: The performance of lucene searching(web entironment) test
In-reply-to: <BAY119-W184FC8B3C9CDFEBF35DBBEB4B30@phx.gbl>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1213168786.3574.125.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <484D4A5D.4000507@propylon.com>
 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
 <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl>
 <1213108457.3574.99.camel@PC990.sb.statsbiblioteket.dk>
 <BAY119-W184FC8B3C9CDFEBF35DBBEB4B30@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-06-11 at 00:17 +0800, lutan wrote:
> In my test case , I start loadrunner jsut test for 5 minute,and the response 
> growth slowly.the TPS(transactions per second) seems stoped at 10 finally.

That's without reusing the searcher, right? In that case the increased
rate must be attributed to the disk cache being warmed. Please try and
test again with the searcher being reused.

> In addition,does lucene has bottleneck about the number of documents or index size..?

Not to my knowledge. Search time and RAM consumption goes up, of course,
but I'm not aware of any special point where things start to go bad at
an increased rate.

> Does the hd entironment: Intel(R) Xeon(R) CPU   5110  @ 1.60GHz4GB 
> ramgive  me     50+TPS?

With an index of 10M/3GB? It doesn't sound unrealistic after warm-up.
How much RAM is available for disk-cache, when the machine is running?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 07:40:44 2008
Return-Path: <java-user-return-34384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5078 invoked from network); 11 Jun 2008 07:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 07:40:44 -0000
Received: (qmail 41719 invoked by uid 500); 11 Jun 2008 07:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41684 invoked by uid 500); 11 Jun 2008 07:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41673 invoked by uid 99); 11 Jun 2008 07:40:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 00:40:40 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.119.2.190] (HELO cluster-f.mailcontrol.com) (85.119.2.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:39:49 +0000
Received: from insiders.de (nebukadnezar.insiders.de [193.22.3.33] (may be forged))
	by rly26f.srv.mailcontrol.com (MailControl) with ESMTP id m5B7d2u9002875
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 08:39:03 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: retrieve all docs efficiently - just one field
Date: Wed, 11 Jun 2008 09:38:59 +0200
Message-ID: <D4E368C6FE4C57499CBCE2A0B476C8B0E713CA@nebukadnezar.insiders.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: retrieve all docs efficiently - just one field
Thread-Index: AcjLVZvUrC+6iUAkSzO9FGiARGsbugAPlOLw
References: <17766268.post@talk.nabble.com> <E892E79A-9E2C-4A0C-B536-392E4021F906@gmail.com>
From: "Johannes Christen" <j.christen@insiders.de>
To: <java-user@lucene.apache.org>
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.70.0.136
X-Virus-Checked: Checked by ClamAV on apache.org


That might be a solution in this case, but I have the same kind of =
problem in another case.
We index documents from an NTFS source. One field is the URI of the =
document.
After a query has been processed, we perform an access check on the hits =
to ensure the user has access rights to open the document. If we have a =
big result set it takes very long to retrieve the URIs from all the =
hits, which we need to perform the access check against the file system.

Any good solution for this?
I think a fix document ID in lucene would help in this cases a lot. The =
mapping between lucene documents and other systems (e.g. Oracle) would =
be much faster.

	Jo

-----Urspr=FCngliche Nachricht-----
Von: Karl Wettin [mailto:karl.wettin@gmail.com]=20
Gesendet: Mittwoch, 11. Juni 2008 01:55
An: java-user@lucene.apache.org
Betreff: Re: retrieve all docs efficiently - just one field


11 jun 2008 kl. 00.35 skrev 1world1love:
>
> We have our lucene index and we want to search the section text for =20
> the word
> "panama"
>
> AND
>
> We want to select from the demographics table where age > 50.
> --
>
> Now I need to intersect the master table IDs from my lucene hits and =20
> my
> table results.

I might be missing something here -- can't you just add the age field =20
to the index and include that in your query?


             karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 10:01:25 2008
Return-Path: <java-user-return-34385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48166 invoked from network); 11 Jun 2008 10:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 10:01:24 -0000
Received: (qmail 95542 invoked by uid 500); 11 Jun 2008 10:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95516 invoked by uid 500); 11 Jun 2008 10:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95505 invoked by uid 99); 11 Jun 2008 10:01:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 03:01:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.236] (HELO qb-out-0506.google.com) (72.14.204.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 10:00:28 +0000
Received: by qb-out-0506.google.com with SMTP id a16so1106976qbd.23
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 03:00:44 -0700 (PDT)
Received: by 10.114.36.4 with SMTP id j4mr6186472waj.156.1213178444291;
        Wed, 11 Jun 2008 03:00:44 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm2877846ywn.0.2008.06.11.03.00.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Jun 2008 03:00:43 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <6E16D593-87FE-43A4-AC5F-5E1BED594B2B@apache.org>
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org> <3554C441-6C62-4E34-BDB9-0606D99EEA6F@mikemccandless.com> <6E16D593-87FE-43A4-AC5F-5E1BED594B2B@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <00C66825-EB8B-4B08-82B1-72CF53E25C33@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Wed, 11 Jun 2008 06:00:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Grant Ingersoll wrote:

>>  Is more than one thread adding documents to the index?
>
> I don't believe so, but I am trying to reproduce.  I've only seen  
> it once, and don't have a lot of details, other than I noticed it  
> was on a specific file (.fdt) and was wondering if that was a  
> factor or not.  That is, maybe Paul could reproduce it.

I think your exception differs from Paul's in an important way.   
Paul's exception means an entire segment (its CFS file) was deleted,  
which is very easily caused by accidentally allowing 2 writers on the  
index at once.  But in your case, SegmentReader successfully opened  
the fnm file but then failed on the fdt, so, your segment wasn't  
deleted (at least not entirely).  So I think something different  
caused your exception.

>>  Any changes to the defaults in IndexWriter?
>
> It's the SolrIndexWriter.

OK.  But what does your solrconfig.xml look like?

>>
>>
>> After seeing that exception, does IndexReader.open also hit that  
>> exception (ie, is/was the index corrupt)?  Or does it only happen  
>> with BG merges?
>
> Not sure, unfortunately, I don't have a lot of info yet.  The  
> background exception happened during an optimize, if that matters  
> at all

OK.  It'd be very useful to know if index was really corrupt (missing  
that segment) vs BG merge incorrectly, temporarily, thought it was  
supposed to merge that segment.

Is this a largish index?  Like, would there be so many segments that  
optimize would be running concurrent merges (> 2*mergeFactor  
segments)?  With ConcurrentMergeScheduler, optimize is now able to  
run multiple merges concurrently, if the index has enough segments.

I'll run some stress tests, focusing on concurrency of merges during  
optimize...

Which OS & JRE are you using?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 10:57:55 2008
Return-Path: <java-user-return-34386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61097 invoked from network); 11 Jun 2008 10:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 10:57:54 -0000
Received: (qmail 53936 invoked by uid 500); 11 Jun 2008 10:57:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53906 invoked by uid 500); 11 Jun 2008 10:57:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53895 invoked by uid 99); 11 Jun 2008 10:57:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 03:57:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.226 as permitted sender)
Received: from [65.54.246.226] (HELO bay0-omc3-s26.bay0.hotmail.com) (65.54.246.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 10:56:58 +0000
Received: from BAY119-W4 ([207.46.9.39]) by bay0-omc3-s26.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 11 Jun 2008 03:56:52 -0700
Message-ID: <BAY119-W4E0ECFE08716D3AE856C4B4B20@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_fb7b2754-b0b4-49c4-b9d0-adaf5e362fc5_"
X-Originating-IP: [222.66.20.82]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: The performance of lucene searching(web entironment) test
Date: Wed, 11 Jun 2008 18:56:53 +0800
Importance: Normal
In-Reply-To: <1213168786.3574.125.camel@PC990.sb.statsbiblioteket.dk>
References: <484D4A5D.4000507@propylon.com>
 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
  <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl>
  <1213108457.3574.99.camel@PC990.sb.statsbiblioteket.dk>
  <BAY119-W184FC8B3C9CDFEBF35DBBEB4B30@phx.gbl> 
 <1213168786.3574.125.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
X-OriginalArrivalTime: 11 Jun 2008 10:56:52.0923 (UTC) FILETIME=[DB5108B0:01C8CBB1]
X-Virus-Checked: Checked by ClamAV on apache.org

--_fb7b2754-b0b4-49c4-b9d0-adaf5e362fc5_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


Thanks for you replay!> Date: Wed, 11 Jun 2008 09:19:46 +0200> From: te@statsbiblioteket.dk> Subject: RE: The performance of lucene searching(web entironment) test> To: java-user@lucene.apache.org> > On Wed, 2008-06-11 at 00:17 +0800, lutan wrote:> > In my test case , I start loadrunner jsut test for 5 minute,and the response > > growth slowly.the TPS(transactions per second) seems stoped at 10 finally.> > That's without reusing the searcher, right? In that case the increased> rate must be attributed to the disk cache being warmed. Please try and> test again with the searcher being reused.> 
 
 
Yes ,I have test again with same entironment but to use singleton IndexSearcher.the  performance 
has increased. there 100 concurrent user request use different keyword ,and get 60 TPS(2 TPS before).
and now the bottleneck  seem to be CPU,and the CPU using approach 100%.and both RAM(using 70MB average),
HD using as normal.
 
> > In addition,does lucene has bottleneck about the number of documents or index size..?> > Not to my knowledge. Search time and RAM consumption goes up, of course,> but I'm not aware of any special point where things start to go bad at> an increased rate.> 
 
Could I consider that as long as I have a larger capacity RAM ,and I 
will get a good performance.
 
 
> > Does the hd entironment: Intel(R) Xeon(R) CPU 5110 @ 1.60GHz4GB > > ramgive me 50+TPS?> > With an index of 10M/3GB? It doesn't sound unrealistic after warm-up.> How much RAM is available for disk-cache, when the machine is running?> 
 
 
I don't understand  " for disk-cache" meaning  very  clear.Could you please
explain it again.Thanks a lot!(does't cache on RAM?)
 does warm-up  ==  cache?
 how many docs do lucene will be cached default?and could I control the cache size?
 
I am new to lucene ,maybe my questions  looks  not professional.
forgive me. 
> > ---------------------------------------------------------------------> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: java-user-help@lucene.apache.org> 
_________________________________________________________________
MSNTA
http://im.live.cn/emoticons/?ID=18
--_fb7b2754-b0b4-49c4-b9d0-adaf5e362fc5_--

From java-user-return-34387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 11:29:36 2008
Return-Path: <java-user-return-34387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68853 invoked from network); 11 Jun 2008 11:29:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 11:29:36 -0000
Received: (qmail 94183 invoked by uid 500); 11 Jun 2008 11:29:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93982 invoked by uid 500); 11 Jun 2008 11:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93971 invoked by uid 99); 11 Jun 2008 11:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 04:29:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 11:28:42 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id A64163BA13
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 04:28:28 -0700 (PDT)
Message-Id: <F660481E-891F-4D92-A115-C6AC21AB61B7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <00C66825-EB8B-4B08-82B1-72CF53E25C33@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Wed, 11 Jun 2008 07:28:24 -0400
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org> <3554C441-6C62-4E34-BDB9-0606D99EEA6F@mikemccandless.com> <6E16D593-87FE-43A4-AC5F-5E1BED594B2B@apache.org> <00C66825-EB8B-4B08-82B1-72CF53E25C33@mikemccandless.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 11, 2008, at 6:00 AM, Michael McCandless wrote:

>
> Grant Ingersoll wrote:
>
>>> Is more than one thread adding documents to the index?
>>
>> I don't believe so, but I am trying to reproduce.  I've only seen  
>> it once, and don't have a lot of details, other than I noticed it  
>> was on a specific file (.fdt) and was wondering if that was a  
>> factor or not.  That is, maybe Paul could reproduce it.
>
> I think your exception differs from Paul's in an important way.   
> Paul's exception means an entire segment (its CFS file) was deleted,  
> which is very easily caused by accidentally allowing 2 writers on  
> the index at once.  But in your case, SegmentReader successfully  
> opened the fnm file but then failed on the fdt, so, your segment  
> wasn't deleted (at least not entirely).  So I think something  
> different caused your exception.
>
>>> Any changes to the defaults in IndexWriter?
>>
>> It's the SolrIndexWriter.
>
> OK.  But what does your solrconfig.xml look like?

It's pretty much the standard indexing setup that's on trunk.  Merge  
Factor 10, Max Buffered Docs 1000

>
>
>>>
>>>
>>> After seeing that exception, does IndexReader.open also hit that  
>>> exception (ie, is/was the index corrupt)?  Or does it only happen  
>>> with BG merges?
>>
>> Not sure, unfortunately, I don't have a lot of info yet.  The  
>> background exception happened during an optimize, if that matters  
>> at all
>
> OK.  It'd be very useful to know if index was really corrupt  
> (missing that segment) vs BG merge incorrectly, temporarily, thought  
> it was supposed to merge that segment.
>
> Is this a largish index?

couple million relatively small records

>  Like, would there be so many segments that optimize would be  
> running concurrent merges (> 2*mergeFactor segments)?  With  
> ConcurrentMergeScheduler, optimize is now able to run multiple  
> merges concurrently, if the index has enough segments.

I don't know.  Like I said, the only reason I posted was b/c I thought  
it sounded similar to Paul's.  I haven't been able to reproduce it yet.

>
>
> I'll run some stress tests, focusing on concurrency of merges during  
> optimize...
>
> Which OS & JRE are you using?

Linux, Java 1.6.0_05



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 11:30:04 2008
Return-Path: <java-user-return-34388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69068 invoked from network); 11 Jun 2008 11:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 11:30:01 -0000
Received: (qmail 96043 invoked by uid 500); 11 Jun 2008 11:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95690 invoked by uid 500); 11 Jun 2008 11:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95679 invoked by uid 99); 11 Jun 2008 11:29:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 04:29:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.schneider@digitro.com.br designates 189.85.128.24 as permitted sender)
Received: from [189.85.128.24] (HELO mail.digitro.com.br) (189.85.128.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 11:29:05 +0000
Received: from serverdgt.daf.digitro.com.br (firewall [189.85.128.10])
	by mail.digitro.com.br (Postfix) with ESMTP id EDA131F90AAF
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 08:28:16 -0300 (BRT)
Received: from [192.168.167.14] (apc-bd13.dti.digitro.com.br [192.168.167.14])
	by serverdgt.daf.digitro.com.br (Postfix) with ESMTP id 7CA3C3C45BB
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 08:28:38 -0300 (BRT)
Message-ID: <484FB6EE.2050209@digitro.com.br>
Date: Wed, 11 Jun 2008 08:28:46 -0300
From: Marcelo Schneider <marcelo.schneider@digitro.com.br>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Is it possible to get only one Field from a Document?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Digitro-MailScanner-Information: Please contact the ISP for more information
X-MailScanner-ID: EDA131F90AAF.39A37
X-Digitro-MailScanner: Found to be clean
X-Digitro-MailScanner-From: marcelo.schneider@digitro.com.br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

I have a environment where we have indexed a DB with about 6mil entries 
with Lucene, and each row has 25 columns. 20 cols have integer codes 
used as filters (indexed/unstored), and the other 5 have (very) large 
texts (also indexed/unstored). Currently the search I'm doing is like this:

Hits hits = searcher.search(query);
for (int i = 0; i < this.hits.length(); i++) {
    Document doc = this.hits.doc(i);
    String s = doc.get("fieldWanted");
     // does everything with the result, etc
}

We are trying to reduce memory usage, however. Is it possible to return 
a Document object with just the Fields I really need? In the example, 
each Document have 25 fields, and I just need one... would this 
theoretically make any difference?




-- 

Marcelo Frantz Schneider
SIC - TCO - Tecnologia em Engenharia do Conhecimento
DGITRO TECNOLOGIA
E-mail: marcelo.schneider@digitro.com.br
Site: www.digitro.com


-- 
Esta mensagem foi verificada pelo sistema de antivrus da Dgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 11:44:35 2008
Return-Path: <java-user-return-34389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77168 invoked from network); 11 Jun 2008 11:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 11:44:32 -0000
Received: (qmail 20140 invoked by uid 500); 11 Jun 2008 11:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20100 invoked by uid 500); 11 Jun 2008 11:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20089 invoked by uid 99); 11 Jun 2008 11:44:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 04:44:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 11:43:36 +0000
Received: by wa-out-1112.google.com with SMTP id l24so2552648waf.11
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 04:43:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=LY6Dy13JZ+55f2zIsK7eKDZkbf83ohY4ft4kdX6t/fk=;
        b=r1kgSmb77sHMt1jK9zo9vQSb9UYTxdI6FE8SpeZrIe0bCOdJtku64pwenEg9KPovRg
         Wv3QBq/52Drv6w7co7Jc57IlOKsrLPRj5ZTfjWSJO8+0kF2ti5yUxndo+KSUNjuxL5lc
         iikuq+Vy/W7tommi0OQY2mrVzWA5/vlL0zavM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hCFFRknk9fp4b640WlnRP0GvvoScSaAQHkWZ9SoaooOmLyrtZDQtbYz8uIJbC8TArW
         eOreoXUPeAuoSQ8OC7RhTAu9Cu6IYvITpH4aGxo64rTkGbuNNIfCKQGe5c+6axg23/V8
         ROxwu0TuQcaV1+CfJkxe9UB0MzQbgudm+XUT8=
Received: by 10.114.73.1 with SMTP id v1mr6318184waa.166.1213184626277;
        Wed, 11 Jun 2008 04:43:46 -0700 (PDT)
Received: by 10.114.88.6 with HTTP; Wed, 11 Jun 2008 04:43:46 -0700 (PDT)
Message-ID: <5816fbdd0806110443n56303fc8o9e8e9052e3d4b4d2@mail.gmail.com>
Date: Wed, 11 Jun 2008 17:13:46 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Running Lucene in a Clustered Environment
In-Reply-To: <69de18140806100433te43fc04i21654d10ef64cc00@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2037_27044235.1213184626270"
References: <567100.80405.qm@web50311.mail.re2.yahoo.com>
	 <5816fbdd0806100117k3271e9fbu8f9b79815ecfb6f2@mail.gmail.com>
	 <484E430E.2060607@boboco.ie>
	 <69de18140806100433te43fc04i21654d10ef64cc00@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2037_27044235.1213184626270
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Shalin,

I am not familiar with Solr. I just know that it is a search server. Can you
please point me to some resources on how can I use Solr to solve the
situation?

Kalani


On Tue, Jun 10, 2008 at 5:03 PM, Shalin Shekhar Mangar <
shalinmangar@gmail.com> wrote:

> Hi Kalani,
>
> Are you aware of Apache Solr?
>
> On Tue, Jun 10, 2008 at 2:32 PM, Eric Bowman <ebowman@boboco.ie> wrote:
>
> > Kalani Ruwanpathirana wrote:
> >
> >> Hi,
> >>
> >> Thanks for the reply. It seems that SAN is not an option for my case .
> >> However the other option is acceptable though I have to do some extra
> work
> >> with clustering.
> >>
> >> I got to know that there is an option  called "Database clustered local
> >> search" (
> >>
> >>
> http://bugs.sakaiproject.org/confluence/display/SEARCH/IndexClusterOperation
> >> )
> >> which synchronizes the local copy of the index at each node with the
> >> database. This option seems better if the implementation is available.
> >> Does
> >> anyone know if there is there is a known implementation of this?
> >>
> >>
> >>
> >
> > rsync is a very powerful tool here -- unless the index is changing often,
> > this is a very easy approach.
> >
> > cheers,
> > Eric
> >
> > --
> > Eric Bowman
> > Boboco Ltd
> > ebowman@boboco.ie
> > http://www.boboco.ie/ebowman/pubkey.pgp
> > +35318394189/+353872801532
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> Shalin Shekhar Mangar.
>



-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_2037_27044235.1213184626270--

From java-user-return-34390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 11:44:55 2008
Return-Path: <java-user-return-34390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77237 invoked from network); 11 Jun 2008 11:44:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 11:44:55 -0000
Received: (qmail 21698 invoked by uid 500); 11 Jun 2008 11:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21677 invoked by uid 500); 11 Jun 2008 11:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21666 invoked by uid 99); 11 Jun 2008 11:44:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 04:44:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.247.21.92] (HELO mail.local.wis.nl) (83.247.21.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Jun 2008 11:43:58 +0000
Content-class: urn:content-classes:message
Subject: RE: Is it possible to get only one Field from a Document?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 11 Jun 2008 13:43:58 +0200
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Message-ID: <50CA25BD6EEA954FA592C097399942E319B53279@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is it possible to get only one Field from a Document?
thread-index: AcjLtnQdjIwmm2qoRVCIiDZP7DTk/AAAaInA
References: <484FB6EE.2050209@digitro.com.br>
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

This is possible, you need to provider a FieldSelector to =
IndexReader#document(docId, selector). This won't work with Hits though, =
because Hits does not expose the document number, so you need to roll =
your own solution using TopDocs or HitCollector, for information see the =
discussion in this issue: =
https://issues.apache.org/jira/browse/LUCENE-1290

Kind regards,
Daan de Wit

-----Original Message-----
From: Marcelo Schneider [mailto:marcelo.schneider@digitro.com.br]=20
Sent: Wednesday, June 11, 2008 13:29
To: java-user@lucene.apache.org
Subject: Is it possible to get only one Field from a Document?

I have a environment where we have indexed a DB with about 6mil entries=20
with Lucene, and each row has 25 columns. 20 cols have integer codes=20
used as filters (indexed/unstored), and the other 5 have (very) large=20
texts (also indexed/unstored). Currently the search I'm doing is like =
this:

Hits hits =3D searcher.search(query);
for (int i =3D 0; i < this.hits.length(); i++) {
    Document doc =3D this.hits.doc(i);
    String s =3D doc.get("fieldWanted");
     // does everything with the result, etc
}

We are trying to reduce memory usage, however. Is it possible to return=20
a Document object with just the Fields I really need? In the example,=20
each Document have 25 fields, and I just need one... would this=20
theoretically make any difference?




--=20

Marcelo Frantz Schneider
SIC - TCO - Tecnologia em Engenharia do Conhecimento
D=CDGITRO TECNOLOGIA
E-mail: marcelo.schneider@digitro.com.br
Site: www.digitro.com


--=20
Esta mensagem foi verificada pelo sistema de antiv=EDrus da D=EDgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 12:05:56 2008
Return-Path: <java-user-return-34391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82589 invoked from network); 11 Jun 2008 12:05:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 12:05:55 -0000
Received: (qmail 51796 invoked by uid 500); 11 Jun 2008 12:05:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51751 invoked by uid 500); 11 Jun 2008 12:05:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51740 invoked by uid 99); 11 Jun 2008 12:05:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 05:05:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.247.21.92] (HELO mail.local.wis.nl) (83.247.21.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Jun 2008 12:05:00 +0000
Content-class: urn:content-classes:message
Subject: RE: Is it possible to get only one Field from a Document?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 11 Jun 2008 14:05:00 +0200
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Message-ID: <50CA25BD6EEA954FA592C097399942E319B5327C@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is it possible to get only one Field from a Document?
thread-index: AcjLtnQdjIwmm2qoRVCIiDZP7DTk/AAAaInAAAC8N+A=
References: <484FB6EE.2050209@digitro.com.br> <50CA25BD6EEA954FA592C097399942E319B53279@CM1.wis.local>
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

But I doubt this will solve your memory issue because nonstored fields =
are not read when retrieving the document.

-----Original Message-----
From: Daan de Wit [mailto:d.de.wit@wis.nl]=20
Sent: Wednesday, June 11, 2008 13:44
To: java-user@lucene.apache.org
Subject: RE: Is it possible to get only one Field from a Document?

This is possible, you need to provider a FieldSelector to =
IndexReader#document(docId, selector). This won't work with Hits though, =
because Hits does not expose the document number, so you need to roll =
your own solution using TopDocs or HitCollector, for information see the =
discussion in this issue: =
https://issues.apache.org/jira/browse/LUCENE-1290

Kind regards,
Daan de Wit

-----Original Message-----
From: Marcelo Schneider [mailto:marcelo.schneider@digitro.com.br]=20
Sent: Wednesday, June 11, 2008 13:29
To: java-user@lucene.apache.org
Subject: Is it possible to get only one Field from a Document?

I have a environment where we have indexed a DB with about 6mil entries=20
with Lucene, and each row has 25 columns. 20 cols have integer codes=20
used as filters (indexed/unstored), and the other 5 have (very) large=20
texts (also indexed/unstored). Currently the search I'm doing is like =
this:

Hits hits =3D searcher.search(query);
for (int i =3D 0; i < this.hits.length(); i++) {
    Document doc =3D this.hits.doc(i);
    String s =3D doc.get("fieldWanted");
     // does everything with the result, etc
}

We are trying to reduce memory usage, however. Is it possible to return=20
a Document object with just the Fields I really need? In the example,=20
each Document have 25 fields, and I just need one... would this=20
theoretically make any difference?




--=20

Marcelo Frantz Schneider
SIC - TCO - Tecnologia em Engenharia do Conhecimento
D=CDGITRO TECNOLOGIA
E-mail: marcelo.schneider@digitro.com.br
Site: www.digitro.com


--=20
Esta mensagem foi verificada pelo sistema de antiv=EDrus da D=EDgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 12:23:34 2008
Return-Path: <java-user-return-34392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97253 invoked from network); 11 Jun 2008 12:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 12:23:34 -0000
Received: (qmail 79298 invoked by uid 500); 11 Jun 2008 12:23:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79213 invoked by uid 500); 11 Jun 2008 12:23:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79202 invoked by uid 99); 11 Jun 2008 12:23:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 05:23:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 12:22:37 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id 8A4DC190E2D
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 05:22:23 -0700 (PDT)
Message-Id: <51FFA3A2-63A2-46F6-81EF-263A5C8FBC83@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <50CA25BD6EEA954FA592C097399942E319B53279@CM1.wis.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Is it possible to get only one Field from a Document?
Date: Wed, 11 Jun 2008 08:22:22 -0400
References: <484FB6EE.2050209@digitro.com.br> <50CA25BD6EEA954FA592C097399942E319B53279@CM1.wis.local>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

For the record, Hits.id(int i) returns the document number.  Note, =20
though, that Hits is now deprecated, as pointed out by the link to =20
1290, so going the TopDocs route is probably better anyway.

-Grant

On Jun 11, 2008, at 7:43 AM, Daan de Wit wrote:

> This is possible, you need to provider a FieldSelector to =20
> IndexReader#document(docId, selector). This won't work with Hits =20
> though, because Hits does not expose the document number, so you =20
> need to roll your own solution using TopDocs or HitCollector, for =20
> information see the discussion in this issue: =
https://issues.apache.org/jira/browse/LUCENE-1290
>
> Kind regards,
> Daan de Wit
>
> -----Original Message-----
> From: Marcelo Schneider [mailto:marcelo.schneider@digitro.com.br]
> Sent: Wednesday, June 11, 2008 13:29
> To: java-user@lucene.apache.org
> Subject: Is it possible to get only one Field from a Document?
>
> I have a environment where we have indexed a DB with about 6mil =20
> entries
> with Lucene, and each row has 25 columns. 20 cols have integer codes
> used as filters (indexed/unstored), and the other 5 have (very) large
> texts (also indexed/unstored). Currently the search I'm doing is =20
> like this:
>
> Hits hits =3D searcher.search(query);
> for (int i =3D 0; i < this.hits.length(); i++) {
>    Document doc =3D this.hits.doc(i);
>    String s =3D doc.get("fieldWanted");
>     // does everything with the result, etc
> }
>
> We are trying to reduce memory usage, however. Is it possible to =20
> return
> a Document object with just the Fields I really need? In the example,
> each Document have 25 fields, and I just need one... would this
> theoretically make any difference?
>
>
>
>
> --=20
>
> Marcelo Frantz Schneider
> SIC - TCO - Tecnologia em Engenharia do Conhecimento
> D=CDGITRO TECNOLOGIA
> E-mail: marcelo.schneider@digitro.com.br
> Site: www.digitro.com
>
>
> --=20
> Esta mensagem foi verificada pelo sistema de antiv=EDrus da D=EDgitro =
e
> acredita-se estar livre de perigo.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 13:09:00 2008
Return-Path: <java-user-return-34393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20024 invoked from network); 11 Jun 2008 13:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 13:08:59 -0000
Received: (qmail 55183 invoked by uid 500); 11 Jun 2008 13:08:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55155 invoked by uid 500); 11 Jun 2008 13:08:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55142 invoked by uid 99); 11 Jun 2008 13:08:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 06:08:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.schneider@digitro.com.br designates 189.85.128.24 as permitted sender)
Received: from [189.85.128.24] (HELO mail.digitro.com.br) (189.85.128.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 13:08:05 +0000
Received: from serverdgt.daf.digitro.com.br (firewall [189.85.128.10])
	by mail.digitro.com.br (Postfix) with ESMTP id DF09E1F90A81
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 10:07:01 -0300 (BRT)
Received: from [192.168.167.14] (apc-bd13.dti.digitro.com.br [192.168.167.14])
	by serverdgt.daf.digitro.com.br (Postfix) with ESMTP id 503293C45BB
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 10:07:24 -0300 (BRT)
Message-ID: <484FCE14.1040808@digitro.com.br>
Date: Wed, 11 Jun 2008 10:07:32 -0300
From: Marcelo Schneider <marcelo.schneider@digitro.com.br>
User-Agent: Thunderbird 2.0.0.4 (Windows/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Is it possible to get only one Field from a Document?
References: <484FB6EE.2050209@digitro.com.br> <50CA25BD6EEA954FA592C097399942E319B53279@CM1.wis.local> <50CA25BD6EEA954FA592C097399942E319B5327C@CM1.wis.local>
In-Reply-To: <50CA25BD6EEA954FA592C097399942E319B5327C@CM1.wis.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Digitro-MailScanner-Information: Please contact the ISP for more information
X-MailScanner-ID: DF09E1F90A81.ACCC3
X-Digitro-MailScanner: Found to be clean
X-Digitro-MailScanner-From: marcelo.schneider@digitro.com.br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Daan de Wit escreveu:
> But I doubt this will solve your memory issue because nonstored fields are not read when retrieving the document.
>   
Thanks for the fast reply Daan! Just for clearance, if I had all the 
code fields (filters) stored,  then it would make any difference?


> -----Original Message-----
> From: Daan de Wit [mailto:d.de.wit@wis.nl] 
> Sent: Wednesday, June 11, 2008 13:44
> To: java-user@lucene.apache.org
> Subject: RE: Is it possible to get only one Field from a Document?
>
> This is possible, you need to provider a FieldSelector to IndexReader#document(docId, selector). This won't work with Hits though, because Hits does not expose the document number, so you need to roll your own solution using TopDocs or HitCollector, for information see the discussion in this issue: https://issues.apache.org/jira/browse/LUCENE-1290
>
> Kind regards,
> Daan de Wit
>
> -----Original Message-----
> From: Marcelo Schneider [mailto:marcelo.schneider@digitro.com.br] 
> Sent: Wednesday, June 11, 2008 13:29
> To: java-user@lucene.apache.org
> Subject: Is it possible to get only one Field from a Document?
>
> I have a environment where we have indexed a DB with about 6mil entries 
> with Lucene, and each row has 25 columns. 20 cols have integer codes 
> used as filters (indexed/unstored), and the other 5 have (very) large 
> texts (also indexed/unstored). Currently the search I'm doing is like this:
>
> Hits hits = searcher.search(query);
> for (int i = 0; i < this.hits.length(); i++) {
>     Document doc = this.hits.doc(i);
>     String s = doc.get("fieldWanted");
>      // does everything with the result, etc
> }
>
> We are trying to reduce memory usage, however. Is it possible to return 
> a Document object with just the Fields I really need? In the example, 
> each Document have 25 fields, and I just need one... would this 
> theoretically make any difference?

-- 
Esta mensagem foi verificada pelo sistema de antivrus da Dgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 13:22:20 2008
Return-Path: <java-user-return-34394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24163 invoked from network); 11 Jun 2008 13:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 13:22:18 -0000
Received: (qmail 83972 invoked by uid 500); 11 Jun 2008 13:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83943 invoked by uid 500); 11 Jun 2008 13:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83927 invoked by uid 99); 11 Jun 2008 13:22:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 06:22:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.247.21.92] (HELO mail.local.wis.nl) (83.247.21.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Jun 2008 13:21:19 +0000
Content-class: urn:content-classes:message
Subject: RE: Is it possible to get only one Field from a Document?
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 11 Jun 2008 15:20:58 +0200
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Message-ID: <50CA25BD6EEA954FA592C097399942E319B53287@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is it possible to get only one Field from a Document?
thread-index: AcjLxEd1RV8eqJ+iRX2fm2AI12F9KgAAPdEQ
References: <484FB6EE.2050209@digitro.com.br> <50CA25BD6EEA954FA592C097399942E319B53279@CM1.wis.local> <50CA25BD6EEA954FA592C097399942E319B5327C@CM1.wis.local> <484FCE14.1040808@digitro.com.br>
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Yep, using a FieldSelector you can restrict the fields that will be =
loaded, you can also specify how fields should be loaded (normal, lazy =
or load the field, and then stop loading the document, i.e. skip other =
fields).

-----Original Message-----
From: Marcelo Schneider [mailto:marcelo.schneider@digitro.com.br]=20
Sent: Wednesday, June 11, 2008 15:08
To: java-user@lucene.apache.org
Subject: Re: Is it possible to get only one Field from a Document?

Daan de Wit escreveu:
> But I doubt this will solve your memory issue because nonstored fields =
are not read when retrieving the document.
>  =20
Thanks for the fast reply Daan! Just for clearance, if I had all the=20
code fields (filters) stored,  then it would make any difference?


> -----Original Message-----
> From: Daan de Wit [mailto:d.de.wit@wis.nl]=20
> Sent: Wednesday, June 11, 2008 13:44
> To: java-user@lucene.apache.org
> Subject: RE: Is it possible to get only one Field from a Document?
>
> This is possible, you need to provider a FieldSelector to =
IndexReader#document(docId, selector). This won't work with Hits though, =
because Hits does not expose the document number, so you need to roll =
your own solution using TopDocs or HitCollector, for information see the =
discussion in this issue: =
https://issues.apache.org/jira/browse/LUCENE-1290
>
> Kind regards,
> Daan de Wit
>
> -----Original Message-----
> From: Marcelo Schneider [mailto:marcelo.schneider@digitro.com.br]=20
> Sent: Wednesday, June 11, 2008 13:29
> To: java-user@lucene.apache.org
> Subject: Is it possible to get only one Field from a Document?
>
> I have a environment where we have indexed a DB with about 6mil =
entries=20
> with Lucene, and each row has 25 columns. 20 cols have integer codes=20
> used as filters (indexed/unstored), and the other 5 have (very) large=20
> texts (also indexed/unstored). Currently the search I'm doing is like =
this:
>
> Hits hits =3D searcher.search(query);
> for (int i =3D 0; i < this.hits.length(); i++) {
>     Document doc =3D this.hits.doc(i);
>     String s =3D doc.get("fieldWanted");
>      // does everything with the result, etc
> }
>
> We are trying to reduce memory usage, however. Is it possible to =
return=20
> a Document object with just the Fields I really need? In the example,=20
> each Document have 25 fields, and I just need one... would this=20
> theoretically make any difference?

--=20
Esta mensagem foi verificada pelo sistema de antiv=EDrus da D=EDgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 13:43:56 2008
Return-Path: <java-user-return-34395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31833 invoked from network); 11 Jun 2008 13:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 13:43:56 -0000
Received: (qmail 32625 invoked by uid 500); 11 Jun 2008 13:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32595 invoked by uid 500); 11 Jun 2008 13:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32584 invoked by uid 99); 11 Jun 2008 13:43:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 06:43:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.22 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 13:43:00 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5BDhFD7067368
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 15:43:16 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <B5F918D9-F601-438E-99A7-18A21594A771@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <D4E368C6FE4C57499CBCE2A0B476C8B0E713CA@nebukadnezar.insiders.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: retrieve all docs efficiently - just one field
Date: Wed, 11 Jun 2008 15:43:11 +0200
References: <17766268.post@talk.nabble.com> <E892E79A-9E2C-4A0C-B536-392E4021F906@gmail.com> <D4E368C6FE4C57499CBCE2A0B476C8B0E713CA@nebukadnezar.insiders.de>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 jun 2008 kl. 09.38 skrev Johannes Christen:
>
> That might be a solution in this case, but I have the same kind of =20
> problem in another case.
> We index documents from an NTFS source. One field is the URI of the =20=

> document.
> After a query has been processed, we perform an access check on the =20=

> hits to ensure the user has access rights to open the document. If =20
> we have a big result set it takes very long to retrieve the URIs =20
> from all the hits, which we need to perform the access check against =20=

> the file system.

How many users usually have access to any given document? Can't you =20
just index them with the document?

> Any good solution for this?
> I think a fix document ID in lucene would help in this cases a lot. =20=

> The mapping between lucene documents and other systems (e.g. Oracle) =20=

> would be much faster.

LUCENE-879 is a proof of concept that shows how you can enforce the =20
Lucene document numbers if you really want to go that way.


        karl

>
>
> 	Jo
>
> -----Urspr=FCngliche Nachricht-----
> Von: Karl Wettin [mailto:karl.wettin@gmail.com]
> Gesendet: Mittwoch, 11. Juni 2008 01:55
> An: java-user@lucene.apache.org
> Betreff: Re: retrieve all docs efficiently - just one field
>
>
> 11 jun 2008 kl. 00.35 skrev 1world1love:
>>
>> We have our lucene index and we want to search the section text for
>> the word
>> "panama"
>>
>> AND
>>
>> We want to select from the demographics table where age > 50.
>> --
>>
>> Now I need to intersect the master table IDs from my lucene hits and
>> my
>> table results.
>
> I might be missing something here -- can't you just add the age field
> to the index and include that in your query?
>
>
>             karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 13:46:17 2008
Return-Path: <java-user-return-34396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32522 invoked from network); 11 Jun 2008 13:46:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 13:46:16 -0000
Received: (qmail 40892 invoked by uid 500); 11 Jun 2008 13:46:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40864 invoked by uid 500); 11 Jun 2008 13:46:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40853 invoked by uid 99); 11 Jun 2008 13:46:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 06:46:10 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 13:45:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6Qdt-0002Nc-Mu
	for java-user@lucene.apache.org; Wed, 11 Jun 2008 06:45:37 -0700
Message-ID: <17777993.post@talk.nabble.com>
Date: Wed, 11 Jun 2008 06:45:37 -0700 (PDT)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: retrieve all docs efficiently - just one field
In-Reply-To: <E892E79A-9E2C-4A0C-B536-392E4021F906@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <17766268.post@talk.nabble.com> <E892E79A-9E2C-4A0C-B536-392E4021F906@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




karl wettin-3 wrote:
> 
> 
> I might be missing something here -- can't you just add the age field  
> to the index and include that in your query?
> 
> 

Thanks for the response Karl:

I just used the age field as an example, but in reality the structured data
is copious and complex relationships exist so there are dozens of such
tables to manage it. The unstructured data is actually the more simplistic
element of the data model.

Also, in presenting the data, we must perform a number of aggregations and
summaries that are fairly straightforward in SQL, but would be quite tedious
and time consuming to do with lucene/programatically.
-- 
View this message in context: http://www.nabble.com/retrieve-all-docs-efficiently---just-one-field-tp17766268p17777993.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 13:50:19 2008
Return-Path: <java-user-return-34397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34624 invoked from network); 11 Jun 2008 13:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 13:50:19 -0000
Received: (qmail 50257 invoked by uid 500); 11 Jun 2008 13:50:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50218 invoked by uid 500); 11 Jun 2008 13:50:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50207 invoked by uid 99); 11 Jun 2008 13:50:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 06:50:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.32 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 13:49:25 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5BDnc3j091417
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 15:49:38 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <7F13990A-964E-4B5E-9EB1-19F3FE107551@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <200806110914.32732.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Scoring filters
Date: Wed, 11 Jun 2008 15:49:37 +0200
References: <5BE05F9C-D345-4A7F-86CA-B2980E98945D@gmail.com> <200806110914.32732.paul.elschot@xs4all.nl>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 jun 2008 kl. 09.14 skrev Paul Elschot:
> Op Wednesday 11 June 2008 01:41:38 schreef Karl Wettin:
>> Each of my filters represent single boosting term queries. But when
>> using the filter instead o the boosting term query I loose the score
>> (not sure this is true) and payload boost (if any), both essential
>> for the quality of my results. If I was to add payloads to the bits
>> that are set, what is the best or simplest way to get the score back
>> in? How about wrapping each filter in a query?
>>
>> Are there any obvious problems with this strategy that I've missed?
>
> Why not add the boosting term queries as required
> to a BooleanQuery? This has the advantage that it uses the
> index data and the various caches built into Lucene and the
> underlying OS.

It used to be like that. But some of my terms occurs in 50% of all the  
documents and it took a very long time to match them, so I replace any  
such clause with a filter.

> In case you have the memory available, it is also possible to keep
> the score values of any Query with the Filter and implement a Scorer
> using the filter docs and these score values. Then use this as the
> scorer for a new Query, via a Weight.
> Once this new Query is available, just add it as required to a
> BooleanQuery.

That I'll do. Thanks!


           karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 14:05:16 2008
Return-Path: <java-user-return-34398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40494 invoked from network); 11 Jun 2008 14:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 14:05:16 -0000
Received: (qmail 90707 invoked by uid 500); 11 Jun 2008 14:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90678 invoked by uid 500); 11 Jun 2008 14:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90667 invoked by uid 99); 11 Jun 2008 14:05:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:05:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 14:04:23 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3640311rvb.5
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 07:04:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=+hkYvBcoSKT6DPtEfEVjblNC/GSuFG8NpO09g0vg6UQ=;
        b=e34PwhzZ1IE88iZZV3tCT5kxPraX0UBG8WlJIbAbg9e7D2vehcw+nnLId6u1O3yLgI
         +uWntLyFVfBK378T91opyPIE18OzVSqf+qXx33gXW/1iGy0btsXYIblhxZReDVo65/1o
         8TBdy1E62mYPDtwYYTM1OKI5/AG1FdaKy+s6Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=YK7ULCJodffvLGlN5xi6eBo8zdlBU2CQLCfqLmun+kgiL5siG2H4dqvNp/8NZx9pzz
         XRzhUo3pWBSX+EY0cX57WelRsVls/o+Kl8O1+NHdm+OSifrF2aD3t1t7sc8ZNt/QSVmH
         t6ZHt9245IGxc4PGqsDMDNgsU2bbG/iFzKWCA=
Received: by 10.140.203.9 with SMTP id a9mr3883111rvg.203.1213193080909;
        Wed, 11 Jun 2008 07:04:40 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Wed, 11 Jun 2008 07:04:40 -0700 (PDT)
Message-ID: <1bcb7c7f0806110704x7f8072c0v5ef30e52356b7e99@mail.gmail.com>
Date: Wed, 11 Jun 2008 17:04:40 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: fieldNorm and fieldValueUniqueness
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_442_6969743.1213193080897"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_442_6969743.1213193080897
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

When you look at the fields of a document with Luke, there is a norm column.
I have not been able to figure out what that is.

The reason I am asking is that I am trying to build a uniqueness model. My
Index is structured as follows:

classID, textID, K, V

classID is a given class. textID is a document ID. each document is formed
by multiple K,V pairs.

I want to measure uniqueness of V, with both inter classID and inter textID.
In other words, given a document (K,V pair) I would like to know how unique
is the V both inside the classID, and textID.

Any ideas/recomendations/help greatly appreciated.

Best.
-C.B.

------=_Part_442_6969743.1213193080897--

From java-user-return-34399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 14:06:26 2008
Return-Path: <java-user-return-34399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40862 invoked from network); 11 Jun 2008 14:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 14:06:26 -0000
Received: (qmail 97635 invoked by uid 500); 11 Jun 2008 14:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97608 invoked by uid 500); 11 Jun 2008 14:06:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97597 invoked by uid 99); 11 Jun 2008 14:06:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:06:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 14:05:31 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2656061fgb.27
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 07:05:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4NvEYPBPg70zjz5aitxRZM3AWZ1nfyqvaGFst8jsNfE=;
        b=qllvSfad81Gow6G6VH9gWGE974pqtlrriZ/WleIuA6/sD91hulJ2shgHVspOu2tbLz
         g7+AQAsah37+quGZkZl7+R5yYjmAD5G1iJchMbK9/YY6fiZsrNXHnTYafYFv2haklivX
         D/1MHSioKuGYGCgZeTzw9l3PhedidzXB7xvYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZTFs1YXn0bJoJcUYDl91ahZ8nm9s5cD8jvcfGRM5zyog3wsesF9dQ9ipFHz7kh+kYR
         zdpHEC0MzMpH02XSu9xZRGC6Z+3EJWNWSwBPktbyBZsNn0jmvAnIlBS6EGLS2AdpL2lT
         i7WYruS2QhDNabeXOMUyPgnN1rlSQXDjbt5DM=
Received: by 10.86.29.19 with SMTP id c19mr279081fgc.28.1213193147539;
        Wed, 11 Jun 2008 07:05:47 -0700 (PDT)
Received: by 10.86.63.2 with HTTP; Wed, 11 Jun 2008 07:05:47 -0700 (PDT)
Message-ID: <359a92830806110705w362342b3wf70d67e1cd3da5c7@mail.gmail.com>
Date: Wed, 11 Jun 2008 10:05:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: retrieve all docs efficiently - just one field
In-Reply-To: <17766268.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30864_12857625.1213193147540"
References: <17766268.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30864_12857625.1213193147540
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<<<I have read a little about the hitcollector class and the fieldselector
api,
but I am still not sure how they may help me or even if they can.>>>

I infer from this that you're using a Hits object to get your IDs to insert
in
your temporary table. Here's the problem with Hits... It re-executes
the query every 100 (200?) hits. So you can think of it as

while (more hits) {
   if ((count % 100) == 0) execute the search and throw away the first
<count> items
   work with the document
}

It can be a major bottleneck to re-execute the query every 100 hits you look
at. HitCollector avoids this re-execution, and can result in very
significant
speedups when iterating through many documents.

FieldSelector will allow lazy fetching. That is, when you do something
like Reader.document(idx, selector) you'll be able to only load those
fields from the document that you specify with the selector. In your case,
you would only load the ID you care about and insert that in your temporary
table. This can also result in very significant savings, especially if you
only want to load a very small field from a document that has very large
fields. See a writeup I did for one of my projects on the Lucene Wiki

http://wiki.apache.org/lucene-java/FieldSelectorPerformance?highlight=(FieldSelector)


Hope this helps
Erick



On Tue, Jun 10, 2008 at 6:35 PM, 1world1love <jd_cowan@yahoo.com> wrote:

>
> Greetings all. I have read many posts concerning similar use cases, but I
> am
> still a little hazy on the best way to achieve what I need to do. Here is
> the background:
>
> 2 million documents with multiple sections, some sections contain
> structured
> data, some unstructured.
>
> We parse the docs and place the structured stuff in oracle where each
> section is a table and one master table to relate them all.
>
> We index the unstructured sections with lucene where each section is a
> document (meaning a total of about ~30 million documents) with extra fields
> including one for the primary key of the master table and then some meta
> fields to describe the section - type, date, etc.
>
> For a common use case, say we have a table called demographics with a
> number
> field that represents age (overly simplistic but gets the point across).
>
> So say we want all people over the age of 50 who may have visited Panama:
>
> --
> We have our lucene index and we want to search the section text for the
> word
> "panama"
>
> AND
>
> We want to select from the demographics table where age > 50.
> --
>
> Now I need to intersect the master table IDs from my lucene hits and my
> table results.
>
> I have a java stored procedure that runs the lucene query and creates a
> temporary table with a single column where I insert the master id from the
> hits of my lucene query. I then can do a join with my structured query
> results.
>
> The problem here is obviously the speed of iterating through the hits to
> extract the single field that I need.
>
> Notes:
> - I must be able to get a full set of results, though I only need the one
> id
> field
> - We originally went with Oracle text which was simple, but limited and
> quite slow for most queries
>
>
> I have read a little about the hitcollector class and the fieldselector
> api,
> but I am still not sure how they may help me or even if they can.
>
> I have also tooled around with the idea of using termdocs, but the queries
> may get a little complex with various ors/ands/nots, though probably not
> spans and so forth.
>
> Any suggestions will be greatly apreciated.
>
> Thanks,
>
> J
>
> --
> View this message in context:
> http://www.nabble.com/retrieve-all-docs-efficiently---just-one-field-tp17766268p17766268.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30864_12857625.1213193147540--

From java-user-return-34400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 14:22:49 2008
Return-Path: <java-user-return-34400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45849 invoked from network); 11 Jun 2008 14:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 14:22:48 -0000
Received: (qmail 37954 invoked by uid 500); 11 Jun 2008 14:22:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37653 invoked by uid 500); 11 Jun 2008 14:22:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37642 invoked by uid 99); 11 Jun 2008 14:22:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:22:43 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 14:21:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6RDG-00042f-E8
	for java-user@lucene.apache.org; Wed, 11 Jun 2008 07:22:10 -0700
Message-ID: <17779004.post@talk.nabble.com>
Date: Wed, 11 Jun 2008 07:22:10 -0700 (PDT)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: retrieve all docs efficiently - just one field
In-Reply-To: <359a92830806110705w362342b3wf70d67e1cd3da5c7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <17766268.post@talk.nabble.com> <359a92830806110705w362342b3wf70d67e1cd3da5c7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Erick. That is what I was assuming but couldn't confirm if it was
worth going down those paths to acheive what I was hoping. Your essay was
very informative about realistic expectations with the fieldselector.

I actually just got through reading the discussion on deprecating hits which
essentially provides great detail about the summary you provided (link for
anyone else who comes upon this thread and is curious -
https://issues.apache.org/jira/browse/LUCENE-1290).

I am still not quite sure how exactly to ustilize the hitcollector api, but
I will make a first pass at refactoring my code to use both.


Erick Erickson wrote:
> 
> It can be a major bottleneck ....
> 

-- 
View this message in context: http://www.nabble.com/retrieve-all-docs-efficiently---just-one-field-tp17766268p17779004.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 14:40:41 2008
Return-Path: <java-user-return-34401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52557 invoked from network); 11 Jun 2008 14:40:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 14:40:40 -0000
Received: (qmail 77535 invoked by uid 500); 11 Jun 2008 14:40:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77512 invoked by uid 500); 11 Jun 2008 14:40:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77501 invoked by uid 99); 11 Jun 2008 14:40:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:40:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.36 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 14:39:46 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5BEdW9J028509
	for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 16:39:33 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <44194F79-F3ED-4EA5-A171-D220F59E4032@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0806110704x7f8072c0v5ef30e52356b7e99@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: fieldNorm and fieldValueUniqueness
Date: Wed, 11 Jun 2008 16:39:32 +0200
References: <1bcb7c7f0806110704x7f8072c0v5ef30e52356b7e99@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 jun 2008 kl. 16.04 skrev Cam Bazz:
>
> When you look at the fields of a document with Luke, there is a norm  
> column.
> I have not been able to figure out what that is.

Norms is the 8 bit discretization of length normalization and field  
boost combined.

See IndexReader#norms, Similarity#lengthNorm and Field#omitNorms


         karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 14:42:42 2008
Return-Path: <java-user-return-34402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53459 invoked from network); 11 Jun 2008 14:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 14:42:42 -0000
Received: (qmail 83444 invoked by uid 500); 11 Jun 2008 14:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83417 invoked by uid 500); 11 Jun 2008 14:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83402 invoked by uid 99); 11 Jun 2008 14:42:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:42:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chy1013m1@hotmail.com designates 65.54.246.208 as permitted sender)
Received: from [65.54.246.208] (HELO bay0-omc3-s8.bay0.hotmail.com) (65.54.246.208)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 14:41:38 +0000
Received: from BAY143-W10 ([65.55.154.45]) by bay0-omc3-s8.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 11 Jun 2008 07:41:55 -0700
Message-ID: <BAY143-W1009ACFD6897932025C66CE2B20@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ce8f1946-8646-420a-a14b-cdee106e894d_"
X-Originating-IP: [67.204.9.231]
From: Alex <chy1013m1@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Is it possible to get only one Field from a Document?
Date: Wed, 11 Jun 2008 14:41:55 +0000
Importance: Normal
In-Reply-To: <51FFA3A2-63A2-46F6-81EF-263A5C8FBC83@apache.org>
References: <484FB6EE.2050209@digitro.com.br>
 <50CA25BD6EEA954FA592C097399942E319B53279@CM1.wis.local>
 <51FFA3A2-63A2-46F6-81EF-263A5C8FBC83@apache.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 11 Jun 2008 14:41:55.0653 (UTC) FILETIME=[4B921F50:01C8CBD1]
X-Virus-Checked: Checked by ClamAV on apache.org

--_ce8f1946-8646-420a-a14b-cdee106e894d_
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64

aWYgeW91IGhhdmUgbWFueSB0ZXJtcyBhY3Jvc3MgdGhlIGZpZWxkcywgeW91IG1pZ2h0IHdhbnQg
dG8gaW52b2tlDQpJbmRleFJlYWRlcidzIHNldFRlcm1JbmZvc0luZGV4RGl2aXNvcigpIG1ldGhv
ZCwgd2hpY2ggd291bGQNCnJlZHVjZSB0aGUgaW4gbWVtb3J5IHRlcm0gaW5mb3MgdXNlZCB0byBs
b29rdXAgaWRmLCBidXQgYSAoc2xpZ2h0bHkpDQpzbG93ZXIgc2VhcmNoLg0KDQoNCg0KDQo+IEZy
b206IGdzaW5nZXJzQGFwYWNoZS5vcmcNCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiBTdWJqZWN0OiBSZTogSXMgaXQgcG9zc2libGUgdG8gZ2V0IG9ubHkgb25lIEZpZWxkIGZy
b20gYSBEb2N1bWVudD8NCj4gRGF0ZTogV2VkLCAxMSBKdW4gMjAwOCAwODoyMjoyMiAtMDQwMA0K
PiANCj4gRm9yIHRoZSByZWNvcmQsIEhpdHMuaWQoaW50IGkpIHJldHVybnMgdGhlIGRvY3VtZW50
IG51bWJlci4gIE5vdGUsICANCj4gdGhvdWdoLCB0aGF0IEhpdHMgaXMgbm93IGRlcHJlY2F0ZWQs
IGFzIHBvaW50ZWQgb3V0IGJ5IHRoZSBsaW5rIHRvICANCj4gMTI5MCwgc28gZ29pbmcgdGhlIFRv
cERvY3Mgcm91dGUgaXMgcHJvYmFibHkgYmV0dGVyIGFueXdheS4NCj4gDQo+IC1HcmFudA0KPiAN
Cj4gT24gSnVuIDExLCAyMDA4LCBhdCA3OjQzIEFNLCBEYWFuIGRlIFdpdCB3cm90ZToNCj4gDQo+
ID4gVGhpcyBpcyBwb3NzaWJsZSwgeW91IG5lZWQgdG8gcHJvdmlkZXIgYSBGaWVsZFNlbGVjdG9y
IHRvICANCj4gPiBJbmRleFJlYWRlciNkb2N1bWVudChkb2NJZCwgc2VsZWN0b3IpLiBUaGlzIHdv
bid0IHdvcmsgd2l0aCBIaXRzICANCj4gPiB0aG91Z2gsIGJlY2F1c2UgSGl0cyBkb2VzIG5vdCBl
eHBvc2UgdGhlIGRvY3VtZW50IG51bWJlciwgc28geW91ICANCj4gPiBuZWVkIHRvIHJvbGwgeW91
ciBvd24gc29sdXRpb24gdXNpbmcgVG9wRG9jcyBvciBIaXRDb2xsZWN0b3IsIGZvciAgDQo+ID4g
aW5mb3JtYXRpb24gc2VlIHRoZSBkaXNjdXNzaW9uIGluIHRoaXMgaXNzdWU6IGh0dHBzOi8vaXNz
dWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvTFVDRU5FLTEyOTANCj4gPg0KPiA+IEtpbmQgcmVn
YXJkcywNCj4gPiBEYWFuIGRlIFdpdA0KPiA+DQo+ID4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0t
LS0NCj4gPiBGcm9tOiBNYXJjZWxvIFNjaG5laWRlciBbbWFpbHRvOm1hcmNlbG8uc2NobmVpZGVy
QGRpZ2l0cm8uY29tLmJyXQ0KPiA+IFNlbnQ6IFdlZG5lc2RheSwgSnVuZSAxMSwgMjAwOCAxMzoy
OQ0KPiA+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiBTdWJqZWN0OiBJcyBp
dCBwb3NzaWJsZSB0byBnZXQgb25seSBvbmUgRmllbGQgZnJvbSBhIERvY3VtZW50Pw0KPiA+DQo+
ID4gSSBoYXZlIGEgZW52aXJvbm1lbnQgd2hlcmUgd2UgaGF2ZSBpbmRleGVkIGEgREIgd2l0aCBh
Ym91dCA2bWlsICANCj4gPiBlbnRyaWVzDQo+ID4gd2l0aCBMdWNlbmUsIGFuZCBlYWNoIHJvdyBo
YXMgMjUgY29sdW1ucy4gMjAgY29scyBoYXZlIGludGVnZXIgY29kZXMNCj4gPiB1c2VkIGFzIGZp
bHRlcnMgKGluZGV4ZWQvdW5zdG9yZWQpLCBhbmQgdGhlIG90aGVyIDUgaGF2ZSAodmVyeSkgbGFy
Z2UNCj4gPiB0ZXh0cyAoYWxzbyBpbmRleGVkL3Vuc3RvcmVkKS4gQ3VycmVudGx5IHRoZSBzZWFy
Y2ggSSdtIGRvaW5nIGlzICANCj4gPiBsaWtlIHRoaXM6DQo+ID4NCj4gPiBIaXRzIGhpdHMgPSBz
ZWFyY2hlci5zZWFyY2gocXVlcnkpOw0KPiA+IGZvciAoaW50IGkgPSAwOyBpIDwgdGhpcy5oaXRz
Lmxlbmd0aCgpOyBpKyspIHsNCj4gPiAgICBEb2N1bWVudCBkb2MgPSB0aGlzLmhpdHMuZG9jKGkp
Ow0KPiA+ICAgIFN0cmluZyBzID0gZG9jLmdldCgiZmllbGRXYW50ZWQiKTsNCj4gPiAgICAgLy8g
ZG9lcyBldmVyeXRoaW5nIHdpdGggdGhlIHJlc3VsdCwgZXRjDQo+ID4gfQ0KPiA+DQo+ID4gV2Ug
YXJlIHRyeWluZyB0byByZWR1Y2UgbWVtb3J5IHVzYWdlLCBob3dldmVyLiBJcyBpdCBwb3NzaWJs
ZSB0byAgDQo+ID4gcmV0dXJuDQo+ID4gYSBEb2N1bWVudCBvYmplY3Qgd2l0aCBqdXN0IHRoZSBG
aWVsZHMgSSByZWFsbHkgbmVlZD8gSW4gdGhlIGV4YW1wbGUsDQo+ID4gZWFjaCBEb2N1bWVudCBo
YXZlIDI1IGZpZWxkcywgYW5kIEkganVzdCBuZWVkIG9uZS4uLiB3b3VsZCB0aGlzDQo+ID4gdGhl
b3JldGljYWxseSBtYWtlIGFueSBkaWZmZXJlbmNlPw0KPiA+DQo+ID4NCj4gPg0KPiA+DQo+ID4g
LS0gDQo+ID4NCj4gPiBNYXJjZWxvIEZyYW50eiBTY2huZWlkZXINCj4gPiBTSUMgLSBUQ08gLSBU
ZWNub2xvZ2lhIGVtIEVuZ2VuaGFyaWEgZG8gQ29uaGVjaW1lbnRvDQo+ID4gRMONR0lUUk8gVEVD
Tk9MT0dJQQ0KPiA+IEUtbWFpbDogbWFyY2Vsby5zY2huZWlkZXJAZGlnaXRyby5jb20uYnINCj4g
PiBTaXRlOiB3d3cuZGlnaXRyby5jb20NCj4gPg0KPiA+DQo+ID4gLS0gDQo+ID4gRXN0YSBtZW5z
YWdlbSBmb2kgdmVyaWZpY2FkYSBwZWxvIHNpc3RlbWEgZGUgYW50aXbDrXJ1cyBkYSBEw61naXRy
byBlDQo+ID4gYWNyZWRpdGEtc2UgZXN0YXIgbGl2cmUgZGUgcGVyaWdvLg0KPiA+DQo+ID4NCj4g
PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0NCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywg
ZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+DQo+ID4NCj4gPiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJz
Y3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+DQo+IA0KPiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBHcmFudCBJbmdlcnNvbGwNCj4gaHR0cDovL3d3dy5sdWNp
ZGltYWdpbmF0aW9uLmNvbQ0KPiANCj4gTHVjZW5lIEhlbHBmdWwgSGludHM6DQo+IGh0dHA6Ly93
aWtpLmFwYWNoZS5vcmcvbHVjZW5lLWphdmEvQmFzaWNzT2ZQZXJmb3JtYW5jZQ0KPiBodHRwOi8v
d2lraS5hcGFjaGUub3JnL2x1Y2VuZS1qYXZhL0x1Y2VuZUZBUQ0KPiANCj4gDQo+IA0KPiANCj4g
DQo+IA0KPiANCj4gDQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4gDQoN
Cl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fDQrpmqjouqvnmoQgV2luZG93cyBMaXZlIE1lc3NlbmdlciDlkowgSG90bWFpbO+8
jOS4jemZkOaZguWcsOaOjOaPoeizh+ioiueboeWcqOaMh+mWkyDigJQgV2luZG93cyBMaXZlIGZv
ciBNb2JpbGUgDQpodHRwOi8vd3d3Lm1zbi5jb20udHcvbXNubW9iaWxlLyA=

--_ce8f1946-8646-420a-a14b-cdee106e894d_--

From java-user-return-34403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 14:51:09 2008
Return-Path: <java-user-return-34403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55784 invoked from network); 11 Jun 2008 14:51:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 14:51:09 -0000
Received: (qmail 1707 invoked by uid 500); 11 Jun 2008 14:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1680 invoked by uid 500); 11 Jun 2008 14:51:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1662 invoked by uid 99); 11 Jun 2008 14:51:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 07:51:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 14:50:14 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3661504rvb.5
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 07:50:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jg3dTwqCtfreWxr6fFNLz6kD6nk+7O5P1VWIznnk9GE=;
        b=LHvSQv9t+W+Aji1c2+ZdU6RYp7tRMLaUqy26JaCZpo/DozUlKlGeTE84QITXe3yQw9
         +ZG/l5/xfuY2ufU30omEObmRdyAHWd0BoMv8dH/ZwYdNBM8m4lnoRvnbnd0tA6JFfGjr
         BnYv2Mf/gttfjimdpVu/Kk3uZg5hwAcHT3LIQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=E9RYuKgboemM/nltHc1ee+MHT5fc9Bld9Ues2mgYrQGapwgD3sfVpM/basSM8Puzao
         NZ4gEIQOLSu8FQ2L0HozAhcdQbNXqL6QTCm6KG+6QEJNM5RJc/LuUidL+znUzGEVPUaC
         Y6p/OarW3cp9EHkhgzfOX+R99A69ElUZ9/EYo=
Received: by 10.140.128.11 with SMTP id a11mr3942930rvd.232.1213195832628;
        Wed, 11 Jun 2008 07:50:32 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Wed, 11 Jun 2008 07:50:32 -0700 (PDT)
Message-ID: <1bcb7c7f0806110750r2baa2a8ew370fc05c196512d5@mail.gmail.com>
Date: Wed, 11 Jun 2008 17:50:32 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: fieldNorm and fieldValueUniqueness
In-Reply-To: <44194F79-F3ED-4EA5-A171-D220F59E4032@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_878_25646910.1213195832621"
References: <1bcb7c7f0806110704x7f8072c0v5ef30e52356b7e99@mail.gmail.com>
	 <44194F79-F3ED-4EA5-A171-D220F59E4032@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_878_25646910.1213195832621
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes, figured it out. thanks.

how about checking for uniqueness?

Best.

On Wed, Jun 11, 2008 at 5:39 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> 11 jun 2008 kl. 16.04 skrev Cam Bazz:
>
>>
>> When you look at the fields of a document with Luke, there is a norm
>> column.
>> I have not been able to figure out what that is.
>>
>
> Norms is the 8 bit discretization of length normalization and field boost
> combined.
>
> See IndexReader#norms, Similarity#lengthNorm and Field#omitNorms
>
>
>        karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_878_25646910.1213195832621--

From java-user-return-34404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 17:18:56 2008
Return-Path: <java-user-return-34404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49219 invoked from network); 11 Jun 2008 17:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 17:18:56 -0000
Received: (qmail 24997 invoked by uid 500); 11 Jun 2008 17:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24960 invoked by uid 500); 11 Jun 2008 17:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24947 invoked by uid 99); 11 Jun 2008 17:18:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 10:18:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sengly.heng@gmail.com designates 72.14.204.236 as permitted sender)
Received: from [72.14.204.236] (HELO qb-out-0506.google.com) (72.14.204.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 17:17:56 +0000
Received: by qb-out-0506.google.com with SMTP id a16so1247747qbd.23
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 10:18:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=mLe9zgZKXAGSk8WwSeDv9tU6/ESzuD5x1XY+M/RugVw=;
        b=kVvjsCJMtVrNgZUZ8ukC9b3VQd7ZyaZRWNi1OQlYTLcJtk0XdPqW9sKaS2PoAKmCQQ
         Ttj33VJ3mrgQt6JORQYC0JGhSkTAX7iOg0dRbYdv0q1XwdPcRDsybdVitIl4cfq53Zk4
         T2OtIqDkAWuWbr4WxMbK0KDfh10nBVaxzmMiU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Y+NlZhgBwa9XsrQ0q6xAqpeBVB8p2tHKK4hgUPLXcBdNRwMv2f/FzsLCvIg3wb7Aat
         kuEuliYOWzG6q8SasiZ8+3VT28Olz/sAmoqE4ZM4xAdMfYIaklTYDH8ojSjb49EPqTRO
         Ww1HLoNnYekqKNaW99Ju+VZYb/oDporgLACP0=
Received: by 10.66.245.2 with SMTP id s2mr1317844ugh.23.1213204693333;
        Wed, 11 Jun 2008 10:18:13 -0700 (PDT)
Received: by 10.66.236.4 with HTTP; Wed, 11 Jun 2008 10:18:13 -0700 (PDT)
Message-ID: <17db983d0806111018m4f7aa357l1adc25274b522bed@mail.gmail.com>
Date: Thu, 12 Jun 2008 02:18:13 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Keyword expansion
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19395_19746164.1213204693307"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19395_19746164.1213204693307
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,

To improve the search, I will have to do keyword expansion. I am looking for
a library that would help me to get the list of synonym of a term with some
similarity score. Is there any lib package that can handle this? It would be
great if it is in Python. I have searched the web and found one project but
it is written in Perl (http://www.d.umn.edu/~tpederse/senserelate.html)

I doubt if there are other similar projects.

I appreciate any pointer.

Thank you in advance.

Regards,

Sengly

------=_Part_19395_19746164.1213204693307--

From java-user-return-34405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 18:08:22 2008
Return-Path: <java-user-return-34405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63109 invoked from network); 11 Jun 2008 18:08:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 18:08:21 -0000
Received: (qmail 96864 invoked by uid 500); 11 Jun 2008 18:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96824 invoked by uid 500); 11 Jun 2008 18:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96800 invoked by uid 99); 11 Jun 2008 18:08:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 11:08:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 18:07:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3752731rvb.5
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 11:07:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=DaxGfTEzf913SCuC6INVcBSVMOEq2dFdQ3gnbrw64ec=;
        b=ucE/1CQnHlIZhsMYrgdAgqsiVY43hdDJEfV09rY/UgTJx7Xzv2+pew3N4bFfBFjNiP
         9uKjTWHwkJsqkyYZr8rgd5L/QVusnBw84VaL5FBwaTPSE/Ty0FG28kYz7tujXGHkaC9M
         OSAedMyGUIW+2frRION+9Oytn6FLr/yfIuCks=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=o9540di//nHphWuR6ZwKygyhiqFCV82fMLMhBiphOWRF9p6WvSLCa4ukPLgmhf2W1K
         P5pLLzm1IYBPTLL58TLjbsbEje43JCCUtBDAsGLGVf+P6Q+HAw1eN6mpJ2lyKfxVinxb
         jrtZUUpQhtMiLBVt2UC0U3RlMiIZF9oWiqKI0=
Received: by 10.141.210.13 with SMTP id m13mr176008rvq.25.1213207665475;
        Wed, 11 Jun 2008 11:07:45 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Wed, 11 Jun 2008 11:07:45 -0700 (PDT)
Message-ID: <5e76f3840806111107s101de6dhf63d72e6ab9f4551@mail.gmail.com>
Date: Wed, 11 Jun 2008 14:07:45 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Concurrent query benchmarks, with 1,2,4,8 readers
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have extended my evaluation (previous evaluation:
http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html)
to include as well as an increasing # of threads performing concurrent
queries, 1,2,4 and 8 IndexReaders.

The results can be found here:
http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html

thanks,

Glen

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 19:02:26 2008
Return-Path: <java-user-return-34406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96651 invoked from network); 11 Jun 2008 19:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 19:02:26 -0000
Received: (qmail 87682 invoked by uid 500); 11 Jun 2008 19:02:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87657 invoked by uid 500); 11 Jun 2008 19:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87635 invoked by uid 99); 11 Jun 2008 19:02:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 12:02:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Jun 2008 19:01:23 +0000
Received: (qmail 13731 invoked by uid 60001); 11 Jun 2008 19:00:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ola08JERaX8We4d9CC/4CeSSOv3Kbx2REZlFmu1e4skW1z22F9jclPKY1ZQJ94k2toYDx3R5fqwUB/a2MRmkJRGX/3XqTCWddnh2sHB1D22LZEZr1F8+lbl6t+xijAqwFWA8t1wWECu5XXj81oNIWKlFHfEiZdIO9IwRYTIfbfk=;
Received: from [71.249.227.161] by web50306.mail.re2.yahoo.com via HTTP; Wed, 11 Jun 2008 12:00:39 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Wed, 11 Jun 2008 12:00:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <519507.12479.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Glen,

Aha, good to see the benefit of multiple IndexReaders/Searchers so clearly.  Makes me think we'll want to add a config setting for this in Solr... :)

As for why 4 is the best choice, I think it's because of those 4 cores that you've got.  My guess is that you'll see slightly better performance with 5 threads and then the performance will slowly deteriorate with more readers/searchers.... let's see it!


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Glen Newton <glen.newton@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 11, 2008 2:07:45 PM
> Subject: Concurrent query benchmarks, with 1,2,4,8 readers
> 
> I have extended my evaluation (previous evaluation:
> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html)
> to include as well as an increasing # of threads performing concurrent
> queries, 1,2,4 and 8 IndexReaders.
> 
> The results can be found here:
> http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
> 
> thanks,
> 
> Glen
> 
> -- 
> 
> -
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 11 19:12:23 2008
Return-Path: <java-user-return-34407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3314 invoked from network); 11 Jun 2008 19:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jun 2008 19:12:23 -0000
Received: (qmail 4964 invoked by uid 500); 11 Jun 2008 19:12:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4730 invoked by uid 500); 11 Jun 2008 19:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4719 invoked by uid 99); 11 Jun 2008 19:12:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 12:12:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Jun 2008 19:11:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3783285rvb.5
        for <java-user@lucene.apache.org>; Wed, 11 Jun 2008 12:11:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=a7QrTujS0yxdn9uaRKkPCv2Ppd0t59BHUGl69MT9QJs=;
        b=EuRc2qU0UG5FOOGEppgvD/YSeYFclXplPE/5KS3kSB05Dv3ljf4IL2QNXzYocaHqAq
         wqle/0p5LFbSVA7b89LrAg7jkK3pBKBVp8Oj9Bv5PhcBuiLBm1mj24sw38jVbhjJ0jVU
         tE3iWkPXGXGZJL/A37aqVAnu/gckZG5FQuWX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=KsEva9eAFGWZHsiK1+vG7UXbQ/LZ9YM21kO95I2NixaB7Ev03SPB81NhDOIJ7zge9q
         dLoWlUapNzCiKFCVh1V9Ep2yWxRFS5mZrJQ1/NZv+iVTT5/ZpZazWzJC+GIV68AxAmXR
         RSUco+akH2OHwvOO6Ki8+dCNvzYw+tPchcjYQ=
Received: by 10.141.22.1 with SMTP id z1mr253825rvi.67.1213211505334;
        Wed, 11 Jun 2008 12:11:45 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Wed, 11 Jun 2008 12:11:45 -0700 (PDT)
Message-ID: <5e76f3840806111211j103c550fpa68db5e932214955@mail.gmail.com>
Date: Wed, 11 Jun 2008 15:11:45 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers
In-Reply-To: <519507.12479.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <519507.12479.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,

Thanks for the feedback.

2008/6/11 Otis Gospodnetic <otis_gospodnetic@yahoo.com>:
> Hi Glen,
>
> Aha, good to see the benefit of multiple IndexReaders/Searchers so clearly.  Makes me think we'll want to add a config setting for this in Solr... :)

Until then, you might want to use: Runtime.availableProcessors()
as the default #.
Oh no, that won't work: it gives me 8 (the number of hyperthread
processors) versus 4 (# of real cores. Hmm, I consider not being able
to find the number of physical cores as being, well, a bug (I guess
you could turn-off hyperthreading). Anyone know if there is a JSR
looking for perhaps: Runtime.availableRealProcessors()  ??

> As for why 4 is the best choice, I think it's because of those 4 cores that you've got.  My guess is that you'll see slightly better performance with 5 threads and then the performance will slowly deteriorate with more readers/searchers.... let's see it!

I'm running it & will post when it is done.

thanks,

Glen  :-)

>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
>> From: Glen Newton <glen.newton@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, June 11, 2008 2:07:45 PM
>> Subject: Concurrent query benchmarks, with 1,2,4,8 readers
>>
>> I have extended my evaluation (previous evaluation:
>> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html)
>> to include as well as an increasing # of threads performing concurrent
>> queries, 1,2,4 and 8 IndexReaders.
>>
>> The results can be found here:
>> http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
>>
>> thanks,
>>
>> Glen
>>
>> --
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 10:39:56 2008
Return-Path: <java-user-return-34408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32968 invoked from network); 12 Jun 2008 10:39:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 10:39:56 -0000
Received: (qmail 3368 invoked by uid 500); 12 Jun 2008 10:39:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3339 invoked by uid 500); 12 Jun 2008 10:39:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3328 invoked by uid 99); 12 Jun 2008 10:39:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 03:39:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 10:39:00 +0000
Received: by an-out-0708.google.com with SMTP id c37so818416anc.49
        for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 03:39:17 -0700 (PDT)
Received: by 10.100.240.17 with SMTP id n17mr1755866anh.49.1213267156982;
        Thu, 12 Jun 2008 03:39:16 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm1317610ywg.6.2008.06.12.03.39.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 12 Jun 2008 03:39:16 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <F660481E-891F-4D92-A115-C6AC21AB61B7@apache.org>
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org> <3554C441-6C62-4E34-BDB9-0606D99EEA6F@mikemccandless.com> <6E16D593-87FE-43A4-AC5F-5E1BED594B2B@apache.org> <00C66825-EB8B-4B08-82B1-72CF53E25C33@mikemccandless.com> <F660481E-891F-4D92-A115-C6AC21AB61B7@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9393D8EA-CE02-416C-8C75-7AE906BE9C82@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Thu, 12 Jun 2008 06:39:15 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Grant,

My stress test is unable to reproduce this exception, either.  I'm  
adding Wikipedia docs to an index, using a high merge factor, then  
opening a new writer with low merge factor (5) and calling optimize.   
This forces concurrent merges to run during the optimize.

One more question: are your docs uniform?  Or, for example, do some  
of them have stored fields while others do not?

Mike

Grant Ingersoll wrote:

>
> On Jun 11, 2008, at 6:00 AM, Michael McCandless wrote:
>
>>
>> Grant Ingersoll wrote:
>>
>>>> Is more than one thread adding documents to the index?
>>>
>>> I don't believe so, but I am trying to reproduce.  I've only seen  
>>> it once, and don't have a lot of details, other than I noticed it  
>>> was on a specific file (.fdt) and was wondering if that was a  
>>> factor or not.  That is, maybe Paul could reproduce it.
>>
>> I think your exception differs from Paul's in an important way.   
>> Paul's exception means an entire segment (its CFS file) was  
>> deleted, which is very easily caused by accidentally allowing 2  
>> writers on the index at once.  But in your case, SegmentReader  
>> successfully opened the fnm file but then failed on the fdt, so,  
>> your segment wasn't deleted (at least not entirely).  So I think  
>> something different caused your exception.
>>
>>>> Any changes to the defaults in IndexWriter?
>>>
>>> It's the SolrIndexWriter.
>>
>> OK.  But what does your solrconfig.xml look like?
>
> It's pretty much the standard indexing setup that's on trunk.   
> Merge Factor 10, Max Buffered Docs 1000
>
>>
>>
>>>>
>>>>
>>>> After seeing that exception, does IndexReader.open also hit that  
>>>> exception (ie, is/was the index corrupt)?  Or does it only  
>>>> happen with BG merges?
>>>
>>> Not sure, unfortunately, I don't have a lot of info yet.  The  
>>> background exception happened during an optimize, if that matters  
>>> at all
>>
>> OK.  It'd be very useful to know if index was really corrupt  
>> (missing that segment) vs BG merge incorrectly, temporarily,  
>> thought it was supposed to merge that segment.
>>
>> Is this a largish index?
>
> couple million relatively small records
>
>>  Like, would there be so many segments that optimize would be  
>> running concurrent merges (> 2*mergeFactor segments)?  With  
>> ConcurrentMergeScheduler, optimize is now able to run multiple  
>> merges concurrently, if the index has enough segments.
>
> I don't know.  Like I said, the only reason I posted was b/c I  
> thought it sounded similar to Paul's.  I haven't been able to  
> reproduce it yet.
>
>>
>>
>> I'll run some stress tests, focusing on concurrency of merges  
>> during optimize...
>>
>> Which OS & JRE are you using?
>
> Linux, Java 1.6.0_05
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 17:11:01 2008
Return-Path: <java-user-return-34409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52370 invoked from network); 12 Jun 2008 17:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 17:11:01 -0000
Received: (qmail 45156 invoked by uid 500); 12 Jun 2008 17:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45129 invoked by uid 500); 12 Jun 2008 17:10:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45118 invoked by uid 99); 12 Jun 2008 17:10:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 10:10:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 17:10:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6qJb-0008PG-EF
	for java-user@lucene.apache.org; Thu, 12 Jun 2008 10:10:23 -0700
Message-ID: <17805042.post@talk.nabble.com>
Date: Thu, 12 Jun 2008 10:10:23 -0700 (PDT)
From: JustJoc <joconnor@bond.co.uk>
To: java-user@lucene.apache.org
Subject: Match "best one" from list
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: joconnor@bond.co.uk
X-Virus-Checked: Checked by ClamAV on apache.org


Im new to Lucene (dont they all just say that), and finding it a little
daunting. I am trying to find a way to replicate functionality we currently
have with our database searching to be able to apply it to documents too.
Most of it is just simple matching, but there is one particular part I am
having trouble with and don't know where to start....

Basically its a kind of weighted word expansion to allow for alternate
meanings/languages etc. 
The expansion part is not a problem as that would be performed outside of
lucene and passed in, so just a bunch of weighted OR terms, *but* within
that expansion we only want the single best match from the list, and only
that contributes towards the final rank (as this would only form part of a
larger query).

For example - I want to be able to do a fruit search, the desired criteria
is "apple", so at its simplest we want to be able to construct something
like this :-

  BESTOF( "apple"^10, "orange"^9, "pear"^8, "peach"^8, "grapes"^2 )

So ideally in this field we want to find "apple", but would accept one of
the other pre-defined alternatives as a match. If the document field
contains apples it scores higher than if it only contains oranges, but a
document with apples AND oranges only has apples taken into consideration,
we aren't looking for a cumulative score for this, just the closest match to
the original desired criteria, also term frequency (occurences within a
document) shouldnt affect the score (10 apples arent better than 1 apple).

I just dont know where to start, ... so all and any suggestions gratefully
welcomed,
Thanks

-- 
View this message in context: http://www.nabble.com/Match-%22best-one%22-from-list-tp17805042p17805042.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 17:45:38 2008
Return-Path: <java-user-return-34410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62020 invoked from network); 12 Jun 2008 17:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 17:45:38 -0000
Received: (qmail 97876 invoked by uid 500); 12 Jun 2008 17:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97839 invoked by uid 500); 12 Jun 2008 17:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97828 invoked by uid 99); 12 Jun 2008 17:45:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 10:45:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 17:44:44 +0000
Received: by py-out-1112.google.com with SMTP id z74so1506943pyg.9
        for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 10:45:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=yk9w+Tghm2bilNqVBYKJICb3lp0+GCZbbzWPQnrxHD0=;
        b=Fu3mikiFUN6cQrkUtFIMUUMU7RoR8Ye0UUBO0CrWiQBhT+IJHXEIfCnJHhnXua/t/8
         EbFV+1bKVXeAwRRfgfs3odWHSlYW93r1w755pN5cDblrgnxFZSP8kOyZAzx3/9w6Q04n
         6+G8vZc/K+5kdwltWROUb2RoHhLIu/xQL6Vzs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=mQE5walJLiMda3FcNrlQ8GEP7nlKgVUORQm7t5ec4vMHBsm5Qkrj3LvQYnkGbzLtVJ
         bVYJjUFgRetCFS24Ncf/3i2M5y429L6DyicFhYbB35u4LRSo5n+ufhpzM3CLJvqTG6UY
         gtXlcPHA+iutLTdWv/wCauNR0n4drHFkTzYfU=
Received: by 10.141.146.4 with SMTP id y4mr1155172rvn.272.1213292700794;
        Thu, 12 Jun 2008 10:45:00 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Thu, 12 Jun 2008 10:45:00 -0700 (PDT)
Message-ID: <1bcb7c7f0806121045i77f7f7b0oe689975d1a10c585@mail.gmail.com>
Date: Thu, 12 Jun 2008 20:45:00 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene wildcard query with stop character
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4957_15176574.1213292700746"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4957_15176574.1213292700746
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Imagine I have the following documents having keys

A
A>B
A>B>C
A>B>D
A>B>C>D

now Imagine a query with keyword analyzer and a wildcard: A>B>*

which will bring me A>B>C , A>B>D and A>B>C>D

but I just want to get A>B>C and A>B>D

so can I make a query like A>B>* but does not have the > character after
A>B>

Best Regards,
-C.B.

------=_Part_4957_15176574.1213292700746--

From java-user-return-34411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 17:50:20 2008
Return-Path: <java-user-return-34411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64757 invoked from network); 12 Jun 2008 17:50:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 17:50:20 -0000
Received: (qmail 7839 invoked by uid 500); 12 Jun 2008 17:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7604 invoked by uid 500); 12 Jun 2008 17:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7593 invoked by uid 99); 12 Jun 2008 17:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 10:50:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 17:49:26 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5CHnfmX006622
	for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 13:49:42 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48516140.6030409@informatics.jax.org>
Date: Thu, 12 Jun 2008 13:47:44 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene wildcard query with stop character
References: <1bcb7c7f0806121045i77f7f7b0oe689975d1a10c585@mail.gmail.com>
In-Reply-To: <1bcb7c7f0806121045i77f7f7b0oe689975d1a10c585@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.12.103141
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_600_699 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

I assume you want all of your queries to function in this way?

If so, you could just translate the * character into a ? at search time, 
which should give you the functionality you are asking for.

Unless I'm missing something.

Matt

Cam Bazz wrote:
> Hello,
>
> Imagine I have the following documents having keys
>
> A
> A>B
> A>B>C
> A>B>D
> A>B>C>D
>
> now Imagine a query with keyword analyzer and a wildcard: A>B>*
>
> which will bring me A>B>C , A>B>D and A>B>C>D
>
> but I just want to get A>B>C and A>B>D
>
> so can I make a query like A>B>* but does not have the > character after
> A>B>
>
> Best Regards,
> -C.B.
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 18:10:38 2008
Return-Path: <java-user-return-34412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70668 invoked from network); 12 Jun 2008 18:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 18:10:37 -0000
Received: (qmail 37683 invoked by uid 500); 12 Jun 2008 18:10:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37656 invoked by uid 500); 12 Jun 2008 18:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37645 invoked by uid 99); 12 Jun 2008 18:10:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 11:10:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 18:09:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6rFE-0002dM-VT
	for java-user@lucene.apache.org; Thu, 12 Jun 2008 11:09:56 -0700
Message-ID: <17806254.post@talk.nabble.com>
Date: Thu, 12 Jun 2008 11:09:56 -0700 (PDT)
From: Adrian Tarau <adrian.tarau@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does lucene support distributed indexing?
In-Reply-To: <237280.26430.qm@web50309.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: adrian.tarau@gmail.com
References: <25aacb800804252333if6b22f1j930238fb415ce1b7@mail.gmail.com> <237280.26430.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I've started an year ago a different implementation of ParallelMultiSearche=
r
using a ThreadPoolExecutor where everything is parallelized.
Unfortunately, I had to interrupt this and work on something else, but this
month I'll start working again. Right now there are some dependencies so it
cannot be used outside my infrastructure(like discovering new nodes,
notifications between nodes), but I'm thinking to extract this as a separat=
e
project(maybe latter) so can be used as an Lucene extension.

I will post some code as soon as I will have something to show :)

Thanks.






Otis Gospodnetic wrote:
>=20
> There are actually several distributed indexing or searching projects in
> Lucene (the top-level ASF Lucene project, not Lucene Java), and it's time
> to start thinking about the possibility of bringing them together, findin=
g
> commonalities, etc.
>=20
> Here is the summary:
> - Lucene - distributed search via ParallelMultiSearcher.  How you split
> indices/shards is up to you.
> - Solr - distributed indexing via SOLR-303 (see DistributedSearch on its
> Wiki).  How you split indices/shards is up to you.
> - Nutch - see its org.apache.nutch.ipc (I think).  How you split
> indices/segments is up to you.
> - Nutch - see the bottom of
> http://wiki.apache.org/nutch/Nutch2Architecture
>=20
> There is also Hadoop:
> - Using MapReduce + HDFS to build a single Lucene index in a distributed
> fashion (see contrib/ in Hadoop)
>=20
> There is also GridLucene project somewhere on the web...
>=20
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>=20
> ----- Original Message ----
>> From: Grant Ingersoll <gsingers@apache.org>
>> To: java-user@lucene.apache.org
>> Sent: Saturday, April 26, 2008 4:20:19 PM
>> Subject: Re: Does lucene support distributed indexing?
>>=20
>>=20
>> On Apr 26, 2008, at 2:33 AM, Samuel Guo wrote:
>>=20
>> > Hi all=EF=BC=8C
>> >
>> > I am a lucene newbie:)
>> >
>> > It seems that lucene doesn't support distributed indexing:(
>> > As some IR research papers mentioned, when the documents collection =
=20
>> > become
>> > large, the index will be large also. When one single machine can't =20
>> > hold all
>> > the index, some strategies are used to solve it. such as that we can =
=20
>> > part
>> > the whole collection into several small sub-collections. According to
>> > different partitions, we can got different strategies : document-=20
>> > partittion
>> > and term-partition. but I don't know why not lucene support these =20
>> > ways:(
>> > can't anyone explain it ?
>>=20
>> Because no one has donated the code to do it.  You can do distributed =
=20
>> indexing via Nutch and some (albeit non fault tolerant) distributed =20
>> Search in Lucene.  Solr also now has distributed search.
>>=20
>> -Grant
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Does-lucene-support-dis=
tributed-indexing--tp16909912p17806254.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 18:39:12 2008
Return-Path: <java-user-return-34413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84714 invoked from network); 12 Jun 2008 18:39:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 18:39:11 -0000
Received: (qmail 74515 invoked by uid 500); 12 Jun 2008 18:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74486 invoked by uid 500); 12 Jun 2008 18:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74473 invoked by uid 99); 12 Jun 2008 18:39:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 11:39:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 18:38:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6rgw-0003r5-KK
	for java-user@lucene.apache.org; Thu, 12 Jun 2008 11:38:34 -0700
Message-ID: <17806910.post@talk.nabble.com>
Date: Thu, 12 Jun 2008 11:38:34 -0700 (PDT)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Giving Bosst to a certain category of pages
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, I am maintaing a website's search engine, and using lucene.
my job is to give boost to a particular set of pages, like pages about the
Products of the company, Pages giving description of the company, about
technology used etc etc.....
How can i start that, I mean i just joined this job and want to perform
good.
Please let me know about it, if you need any particular information, let me
know... 

thanks
Sumit
-- 
View this message in context: http://www.nabble.com/Giving-Bosst-to-a-certain-category-of-pages-tp17806910p17806910.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 18:39:37 2008
Return-Path: <java-user-return-34414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84871 invoked from network); 12 Jun 2008 18:39:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 18:39:36 -0000
Received: (qmail 76449 invoked by uid 500); 12 Jun 2008 18:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76406 invoked by uid 500); 12 Jun 2008 18:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76372 invoked by uid 99); 12 Jun 2008 18:39:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 11:39:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 18:38:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6rhG-0003rk-Tw
	for java-user@lucene.apache.org; Thu, 12 Jun 2008 11:38:54 -0700
Message-ID: <17806910.post@talk.nabble.com>
Date: Thu, 12 Jun 2008 11:38:54 -0700 (PDT)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Giving Boost to a certain category of pages
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, I am maintaing a website's search engine, and using lucene.
my job is to give boost to a particular set of pages, like pages about the
Products of the company, Pages giving description of the company, about
technology used etc etc.....
How can i start that, I mean i just joined this job and want to perform
good.
Please let me know about it, if you need any particular information, let me
know... 

thanks
Sumit
-- 
View this message in context: http://www.nabble.com/Giving-Boost-to-a-certain-category-of-pages-tp17806910p17806910.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 19:00:19 2008
Return-Path: <java-user-return-34415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90803 invoked from network); 12 Jun 2008 19:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 19:00:18 -0000
Received: (qmail 8922 invoked by uid 500); 12 Jun 2008 19:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8693 invoked by uid 500); 12 Jun 2008 19:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8682 invoked by uid 99); 12 Jun 2008 19:00:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 12:00:14 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 18:59:22 +0000
Received: by fg-out-1718.google.com with SMTP id l27so3165949fgb.27
        for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 11:59:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Alaxpv2HQOc3/jaViEF1Z8EG56lHJnLYJ3D9b0nGCjw=;
        b=k2ZZP9mVUO1loUFldtG/hMuUtgLFsMiiCs/6szAVFSe02ahOV8YxzWo4bboYwCCoXh
         7H1UPQ2rwj0eITTB6o0kmHXGH8LuDG+qoE8JSB0qZWqxm/I74EEilIyJ0wARfgQfEWbq
         WJcNxjey7jmPEe/yDwXSmLnHK+LzCw9xrEHdM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wMDbWl5AHAYi7K6eN0OlUGrnzrUJ7UInpMDQDOaGcUefQSfTt5iHuLELNTUC6xu/rz
         eYu+dlQAGTNBhmzCAVBijSxOCeFJfHt/ekFDV98sMC1IQXSnXEDILRbbBb9knMH9MZwl
         iazTs8UqSdbaZ8erQ2v582gsbOMoe9DtSodyw=
Received: by 10.86.66.19 with SMTP id o19mr2764346fga.62.1213297179014;
        Thu, 12 Jun 2008 11:59:39 -0700 (PDT)
Received: by 10.86.63.2 with HTTP; Thu, 12 Jun 2008 11:59:39 -0700 (PDT)
Message-ID: <359a92830806121159q492eca70ja33f636ef1a8eb59@mail.gmail.com>
Date: Thu, 12 Jun 2008 14:59:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Giving Boost to a certain category of pages
In-Reply-To: <17806910.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6172_23055649.1213297179032"
References: <17806910.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6172_23055649.1213297179032
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From the Hossman:

'...Index time field boosts are a way to express things like "this documents
title is worth twice as much as the title of most documents". Query time
boosts are a way to express "I care about matches on this clause of my query
twice as much as I do about matches to other clauses of my query.'


So, I think you want to think about index time boosts.....

Best
Erick

On Thu, Jun 12, 2008 at 2:38 PM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> Hi, I am maintaing a website's search engine, and using lucene.
> my job is to give boost to a particular set of pages, like pages about the
> Products of the company, Pages giving description of the company, about
> technology used etc etc.....
> How can i start that, I mean i just joined this job and want to perform
> good.
> Please let me know about it, if you need any particular information, let me
> know...
>
> thanks
> Sumit
> --
> View this message in context:
> http://www.nabble.com/Giving-Boost-to-a-certain-category-of-pages-tp17806910p17806910.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6172_23055649.1213297179032--

From java-user-return-34416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 19:06:08 2008
Return-Path: <java-user-return-34416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93176 invoked from network); 12 Jun 2008 19:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 19:06:07 -0000
Received: (qmail 21596 invoked by uid 500); 12 Jun 2008 19:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21571 invoked by uid 500); 12 Jun 2008 19:06:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21560 invoked by uid 99); 12 Jun 2008 19:06:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 12:06:02 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 19:05:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K6s70-00053r-24
	for java-user@lucene.apache.org; Thu, 12 Jun 2008 12:05:30 -0700
Message-ID: <17807505.post@talk.nabble.com>
Date: Thu, 12 Jun 2008 12:05:30 -0700 (PDT)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Giving Boost to a certain category of pages
In-Reply-To: <359a92830806121159q492eca70ja33f636ef1a8eb59@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <17806910.post@talk.nabble.com> <359a92830806121159q492eca70ja33f636ef1a8eb59@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


which one do you think is faster, boosting at search time or boosting at
index time...
thanks for the reply..

Erick Erickson wrote:
> 
> From the Hossman:
> 
> '...Index time field boosts are a way to express things like "this
> documents
> title is worth twice as much as the title of most documents". Query time
> boosts are a way to express "I care about matches on this clause of my
> query
> twice as much as I do about matches to other clauses of my query.'
> 
> 
> So, I think you want to think about index time boosts.....
> 
> Best
> Erick
> 
> On Thu, Jun 12, 2008 at 2:38 PM, sumittyagi <ping.sumit@gmail.com> wrote:
> 
>>
>> Hi, I am maintaing a website's search engine, and using lucene.
>> my job is to give boost to a particular set of pages, like pages about
>> the
>> Products of the company, Pages giving description of the company, about
>> technology used etc etc.....
>> How can i start that, I mean i just joined this job and want to perform
>> good.
>> Please let me know about it, if you need any particular information, let
>> me
>> know...
>>
>> thanks
>> Sumit
>> --
>> View this message in context:
>> http://www.nabble.com/Giving-Boost-to-a-certain-category-of-pages-tp17806910p17806910.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Giving-Boost-to-a-certain-category-of-pages-tp17806910p17807505.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 19:45:42 2008
Return-Path: <java-user-return-34417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3323 invoked from network); 12 Jun 2008 19:45:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 19:45:42 -0000
Received: (qmail 73268 invoked by uid 500); 12 Jun 2008 19:45:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73245 invoked by uid 500); 12 Jun 2008 19:45:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73234 invoked by uid 99); 12 Jun 2008 19:45:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 12:45:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 19:44:47 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 55E193B9F3
	for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 12:44:33 -0700 (PDT)
Message-Id: <EDD66444-2E03-4E49-9C8C-A1FAAF2200C0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <9393D8EA-CE02-416C-8C75-7AE906BE9C82@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Thu, 12 Jun 2008 15:44:32 -0400
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <2CF563C9-66FC-424E-9069-AFDC7307A856@apache.org> <3554C441-6C62-4E34-BDB9-0606D99EEA6F@mikemccandless.com> <6E16D593-87FE-43A4-AC5F-5E1BED594B2B@apache.org> <00C66825-EB8B-4B08-82B1-72CF53E25C33@mikemccandless.com> <F660481E-891F-4D92-A115-C6AC21AB61B7@apache.org> <9393D8EA-CE02-416C-8C75-7AE906BE9C82@mikemccandless.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 12, 2008, at 6:39 AM, Michael McCandless wrote:

>
> Hi Grant,
>
> My stress test is unable to reproduce this exception, either.  I'm  
> adding Wikipedia docs to an index, using a high merge factor, then  
> opening a new writer with low merge factor (5) and calling  
> optimize.  This forces concurrent merges to run during the optimize.
>
> One more question: are your docs uniform?  Or, for example, do some  
> of them have stored fields while others do not?

They are uniform.  I really wouldn't spend more time on it until I can  
report on seeing it again.  I was just hoping it would help w/ Paul's  
issue and maybe spur something.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 19:47:28 2008
Return-Path: <java-user-return-34418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4214 invoked from network); 12 Jun 2008 19:47:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 19:47:28 -0000
Received: (qmail 76663 invoked by uid 500); 12 Jun 2008 19:47:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76628 invoked by uid 500); 12 Jun 2008 19:47:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76617 invoked by uid 99); 12 Jun 2008 19:47:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 12:47:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 19:46:34 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4366647rvb.5
        for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 12:46:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=girl5H4xzBwoBHZFpDbiaoh5ZpS9NqUOpx9v919r6xw=;
        b=TNgqNNlT2AM71rM5PD7wCzurHbEDbnD/quiKnCCbW5DWoX9xA8b86J0WH3fo49jbbn
         L1pVwqW6yxKFON6enFbMiThVFKmlLIdyUSFnx18m3y/EBLn201+HHhTDojijyR9H3qi5
         Cbq13HDfy2pb6Y8KK1ixAH+gm+enywTq70bkI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=UMw2CE+oHUtlSBX8qHuTXqrjtsQeXhWlG5aLLG9uReEfqULZQW1XN5APLv0zsDGTrD
         kRjhjj2iVYIiJhICP/WMAhmGg38qdHBaXhR6SEECaAqTUzy75kiZVb1oqtv4zvBEikPz
         GE1VBESwjBHDyjh4LpGWU+H2gRo7LbZbg++qs=
Received: by 10.141.28.4 with SMTP id f4mr1355522rvj.16.1213300012444;
        Thu, 12 Jun 2008 12:46:52 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Thu, 12 Jun 2008 12:46:52 -0700 (PDT)
Message-ID: <1bcb7c7f0806121246w33b0a44gb6c3ca8d7e7e6c7c@mail.gmail.com>
Date: Thu, 12 Jun 2008 22:46:52 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene wildcard query with stop character
In-Reply-To: <48516140.6030409@informatics.jax.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5726_21595439.1213300012445"
References: <1bcb7c7f0806121045i77f7f7b0oe689975d1a10c585@mail.gmail.com>
	 <48516140.6030409@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5726_21595439.1213300012445
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

well the ? would work if the length of each token be same.
however, instead of A>B>C I want tags that change dynamically from 1 to
unlimited length.

I just I could just pad every token to a normalized length such as
00000000...000A but i am hoping there is a better method.

if we could tell lucene to do it like in a regular expression until a > is
there to insert ??'s ...

Another way could be to do the regularexpression outside lucene, but then
still there is need for fetching the hits.

Best.
-C.B.



On Thu, Jun 12, 2008 at 8:47 PM, Matthew Hall <mhall@informatics.jax.org>
wrote:

> I assume you want all of your queries to function in this way?
>
> If so, you could just translate the * character into a ? at search time,
> which should give you the functionality you are asking for.
>
> Unless I'm missing something.
>
> Matt
>
>
> Cam Bazz wrote:
>
>> Hello,
>>
>> Imagine I have the following documents having keys
>>
>> A
>> A>B
>> A>B>C
>> A>B>D
>> A>B>C>D
>>
>> now Imagine a query with keyword analyzer and a wildcard: A>B>*
>>
>> which will bring me A>B>C , A>B>D and A>B>C>D
>>
>> but I just want to get A>B>C and A>B>D
>>
>> so can I make a query like A>B>* but does not have the > character after
>> A>B>
>>
>> Best Regards,
>> -C.B.
>>
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5726_21595439.1213300012445--

From java-user-return-34419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 20:12:51 2008
Return-Path: <java-user-return-34419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14193 invoked from network); 12 Jun 2008 20:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 20:12:51 -0000
Received: (qmail 99970 invoked by uid 500); 12 Jun 2008 20:12:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99929 invoked by uid 500); 12 Jun 2008 20:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99918 invoked by uid 99); 12 Jun 2008 20:12:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 13:12:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 20:11:55 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5CKBmi3018645
	for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 16:11:49 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4851828D.7030501@informatics.jax.org>
Date: Thu, 12 Jun 2008 16:09:49 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene wildcard query with stop character
References: <1bcb7c7f0806121045i77f7f7b0oe689975d1a10c585@mail.gmail.com>	 <48516140.6030409@informatics.jax.org> <1bcb7c7f0806121246w33b0a44gb6c3ca8d7e7e6c7c@mail.gmail.com>
In-Reply-To: <1bcb7c7f0806121246w33b0a44gb6c3ca8d7e7e6c7c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.12.125451
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1900_1999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Hrm.. can we see a more specific example of the type of data you are 
trying to query against here?

Matt

Cam Bazz wrote:
> well the ? would work if the length of each token be same.
> however, instead of A>B>C I want tags that change dynamically from 1 to
> unlimited length.
>
> I just I could just pad every token to a normalized length such as
> 00000000...000A but i am hoping there is a better method.
>
> if we could tell lucene to do it like in a regular expression until a > is
> there to insert ??'s ...
>
> Another way could be to do the regularexpression outside lucene, but then
> still there is need for fetching the hits.
>
> Best.
> -C.B.
>
>
>
> On Thu, Jun 12, 2008 at 8:47 PM, Matthew Hall <mhall@informatics.jax.org>
> wrote:
>
>   
>> I assume you want all of your queries to function in this way?
>>
>> If so, you could just translate the * character into a ? at search time,
>> which should give you the functionality you are asking for.
>>
>> Unless I'm missing something.
>>
>> Matt
>>
>>
>> Cam Bazz wrote:
>>
>>     
>>> Hello,
>>>
>>> Imagine I have the following documents having keys
>>>
>>> A
>>> A>B
>>> A>B>C
>>> A>B>D
>>> A>B>C>D
>>>
>>> now Imagine a query with keyword analyzer and a wildcard: A>B>*
>>>
>>> which will bring me A>B>C , A>B>D and A>B>C>D
>>>
>>> but I just want to get A>B>C and A>B>D
>>>
>>> so can I make a query like A>B>* but does not have the > character after
>>> A>B>
>>>
>>> Best Regards,
>>> -C.B.
>>>
>>>
>>>
>>>       
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 21:24:25 2008
Return-Path: <java-user-return-34420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39425 invoked from network); 12 Jun 2008 21:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 21:24:25 -0000
Received: (qmail 7911 invoked by uid 500); 12 Jun 2008 21:24:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7874 invoked by uid 500); 12 Jun 2008 21:24:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7856 invoked by uid 99); 12 Jun 2008 21:24:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 14:24:19 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.216.127.90] (HELO rs35.luxsci.com) (66.216.127.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 21:23:27 +0000
Received: from [192.168.1.102] (dsl253-005-254.nyc1.dsl.speakeasy.net [66.253.5.254])
	(authenticated bits=0)
	by rs35.luxsci.com (8.13.1/8.13.7) with ESMTP id m5CLNfMB005548
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Thu, 12 Jun 2008 16:23:42 -0500
Message-ID: <485193F7.3080500@alias-i.com>
Date: Thu, 12 Jun 2008 17:24:07 -0400
From: Bob Carpenter <carp@alias-i.com>
Reply-To: carp@alias-i.com
Organization: Alias-i
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Book: Building Search Applications: Lucene, LingPipe and Gate
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Manu Konchady's book on building search applications
is out:

Konchady, Manu. 2008. Building Search Applications: Lucene, LingPipe,
and Gate. Mustru Publishing.

It's available from Amazon:
http://www.amazon.com/Building-Search-Applications-Lucene-Lingpipe/dp/0615204252/

The book's a gentle introduction to enterprise and
web search, focusing on the three tools in the title
(disclaimer: I wrote most of LingPipe.)

The target audience is Java programmers who are new to
search and text analytics.  As such it provides step-by-step
code-based explanations in the mold of a Manning "in Action"
book.

I read the draft, have a copy of the book right here,
and can vouch for its technical accuracy (disclaimer 2:
I didn't actually run the code.)

It's based on Lucene 2.3.

Here's a chapter-by-chapter overview
of topics:

After (1) a brief discussion of application issues,
the chapters include (2) tokenization in all three frameworks,
(3) indexing with Lucene, (4) searching with Lucene,
(5) sentence extraction, part-of-speech tagging,
interesting/significant phrase extraction, and
entity extraction with LingPipe and Gate (6) clustering
with LingPipe, (7) topic and language classification
with LingPipe, (8 ) enterprise and web search,
page rank/authority calculation, and crawling with
Nutch, (9) tracking news, sentiment analysis with
LingPipe, detecting offensive content and plagiarism,
and finally, (10) future directions including vertical
search, tag-based search and question-answering.

That may sound like a whole lot of ground to cover in
400 pages, but Konchady pulls the reader along by illustrating
everything  with working code and not getting bogged down in
technicalities. There are pointers to theory, and a bit of
math where necessary, but the book never loses sight of its
goal  of providing a practical introduction. In that way,
its like the Manning "in Action" series.

About the author: Manu Konchady has a home page/blog on Amazon:

http://www.amazon.com/gp/blog/A2TWRNMTU6T9TW/ref=cm_blog_dp_artist_blog

- Bob Carpenter
   Alias-i

PS:  If you want a theory book on roughly the same
selection of topics, check this out:

Manning, Raghavan and Schuetze.  2008.
Introduction to Information Retrieval.
Cambridge University Press.

It's due out in July; the content will remain
free online in PDF form:

http://www-csli.stanford.edu/~hinrich/information-retrieval-book.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 12 23:32:05 2008
Return-Path: <java-user-return-34421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91760 invoked from network); 12 Jun 2008 23:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jun 2008 23:32:01 -0000
Received: (qmail 70560 invoked by uid 500); 12 Jun 2008 23:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70000 invoked by uid 500); 12 Jun 2008 23:31:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69989 invoked by uid 99); 12 Jun 2008 23:31:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 16:31:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Jun 2008 23:31:08 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9F34371C807; Thu, 12 Jun 2008 16:31:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8F3DB71C7C4
	for <java-user@lucene.apache.org>; Thu, 12 Jun 2008 16:31:25 -0700 (PDT)
Date: Thu, 12 Jun 2008 16:31:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: HitCollector and sorting
In-Reply-To: <17604363.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0806121616130.22955@radix.cryptio.net>
References: <17604363.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: So, how can I get the same results using the HitCollector? Also it would be
: really nice, if you could point me to some examples of using it...

Take a look at TopFieldDocCollector  It's a HitCollector provided out of 
the box that does sorting.

If you look at the trunk, the (recently updateed) "demo" file 
SearchFiles.java shows how to use TopDocCollector ... TopFieldDocCollector 
works exactly the same way, except that it knows about Sorting.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 07:03:52 2008
Return-Path: <java-user-return-34422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8963 invoked from network); 13 Jun 2008 07:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 07:03:51 -0000
Received: (qmail 4430 invoked by uid 500); 13 Jun 2008 07:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3805 invoked by uid 500); 13 Jun 2008 07:03:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3794 invoked by uid 99); 13 Jun 2008 07:03:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 00:03:46 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=FB_MORE_SIZE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 07:02:56 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K2E00INN3F3OV@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Fri, 13 Jun 2008 08:59:27 +0200 (MEST)
Date: Fri, 13 Jun 2008 08:59:27 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: RE: The performance of lucene searching(web entironment) test
In-reply-to: <BAY119-W4E0ECFE08716D3AE856C4B4B20@phx.gbl>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1213340367.3574.160.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <484D4A5D.4000507@propylon.com>
 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
 <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl>
 <1213108457.3574.99.camel@PC990.sb.statsbiblioteket.dk>
 <BAY119-W184FC8B3C9CDFEBF35DBBEB4B30@phx.gbl>
 <1213168786.3574.125.camel@PC990.sb.statsbiblioteket.dk>
 <BAY119-W4E0ECFE08716D3AE856C4B4B20@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-06-11 at 18:56 +0800, lutan wrote:
> Yes ,I have test again with same entironment but to use singleton 
> IndexSearcher.the  performance has increased. there 100 concurrent
> user request use different keyword ,and get 60 TPS(2 TPS before).
> and now the bottleneck  seem to be CPU,and the CPU using approach 
> 100%.and both RAM(using 70MB average), HD using as normal.

It sounds like you have found the solution to your immediate problem.
Great.

> Could I consider that as long as I have a larger capacity RAM ,and I 
> will get a good performance.

Depends on your index-size (in bytes). When your index grows, less and
less of it can fit in the disk-cache and more time will be required for
proper warm-up. But the change will happen gradually, so you'll only be
surprised if you suddenly increase your index-size to double or more
size.

> I don't understand  " for disk-cache" meaning  very  clear.Could you please
> explain it again.Thanks a lot!(does't cache on RAM?)
> does warm-up  ==  cache?

There are (at least) two important memory mechanisms to consider.
My apologies if some of this is basic knowledge to you:

1) Disk-cache.
In general, the free RAM on your Linux-system is used for disk-cache.
With an index-size of 3GB and (just a guess) 1 GB free RAM, the
operating system is able to cache 1/3 or less of your index. If you open
the same index several times in a row, the disk-cache will be warmed to
the relevant parts of your index, so that you're not even hitting the
disk after a while. At least not for opening. This is the effect you
observed with your non-singleton based test, where the speed increased
slowly up to a not-so-high level.

2) Lucene internal structures.
I don't know much about this, so I hope somebody will correct me if I
make mistakes: Lucene has some internal structures that are initialized
when searches are performed. Depending on setup, this initialization can
be quite heavy (custom search for example). Performing warm-up, such as
searching with previously logged queries, will initialize these
structures before the real queries are received. This is the effect you
observed with your singleton searcher.

1 & 2 can be seen in combination, as the initialization of the internal
structures in Lucene requires a fair amount of seeks in the index data.
If there's nothing in the disk-cache and a conventional platter-based
harddisk is used, it takes some time. If the disk-cache is warmed from
previous use or a solid state drive setup is used, it is much faster.

>  how many docs do lucene will be cached default?and could I control the
>  cache size?

I don't know. Maybe someone else will chime in?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 10:44:27 2008
Return-Path: <java-user-return-34423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13674 invoked from network); 13 Jun 2008 10:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 10:44:27 -0000
Received: (qmail 38671 invoked by uid 500); 13 Jun 2008 10:44:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38637 invoked by uid 500); 13 Jun 2008 10:44:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38626 invoked by uid 99); 13 Jun 2008 10:44:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 03:44:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.213 as permitted sender)
Received: from [65.54.246.213] (HELO bay0-omc3-s13.bay0.hotmail.com) (65.54.246.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 10:43:30 +0000
Received: from BAY119-W31 ([207.46.9.66]) by bay0-omc3-s13.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 13 Jun 2008 03:43:46 -0700
Message-ID: <BAY119-W316B3D6C23F65E7B6809F0B4AC0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_5dc21d30-fcbd-41f5-8e31-3ab7e6bb42bf_"
X-Originating-IP: [58.37.171.208]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: The performance of lucene searching(web entironment) test
Date: Fri, 13 Jun 2008 18:43:46 +0800
Importance: Normal
In-Reply-To: <1213340367.3574.160.camel@PC990.sb.statsbiblioteket.dk>
References: <484D4A5D.4000507@propylon.com>
 <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
  <BAY119-W296E8C479628891664CBCDB4B30@phx.gbl>
  <1213108457.3574.99.camel@PC990.sb.statsbiblioteket.dk>
  <BAY119-W184FC8B3C9CDFEBF35DBBEB4B30@phx.gbl>
  <1213168786.3574.125.camel@PC990.sb.statsbiblioteket.dk>
  <BAY119-W4E0ECFE08716D3AE856C4B4B20@phx.gbl> 
 <1213340367.3574.160.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
X-OriginalArrivalTime: 13 Jun 2008 10:43:46.0557 (UTC) FILETIME=[5B6E9AD0:01C8CD42]
X-Virus-Checked: Checked by ClamAV on apache.org

--_5dc21d30-fcbd-41f5-8e31-3ab7e6bb42bf_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


Very grateful for Toke Eskildsen of attention my questions.
> Date: Fri, 13 Jun 2008 08:59:27 +0200> From: te@statsbiblioteket.dk> Subject: RE: The performance of lucene searching(web entironment) test> To: java-user@lucene.apache.org> > On Wed, 2008-06-11 at 18:56 +0800, lutan wrote:> > Yes ,I have test again with same entironment but to use singleton > > IndexSearcher.the performance has increased. there 100 concurrent> > user request use different keyword ,and get 60 TPS(2 TPS before).> > and now the bottleneck seem to be CPU,and the CPU using approach > > 100%.and both RAM(using 70MB average), HD using as normal.> > It sounds like you have found the solution to your immediate problem.> Great.> 
 
 
The performance increase dependents on your suggestion.
Today I hava another tesing,and using  RemoteSearchable(code like 
the example of <lucene in action> supply).
app runing setps:
1,A customer request a keyword to web(JBoss:192.168.0.1). 
2,JBoss call RMIServer(192.168.0.2)(the index file on it).
other tesing entironment as same as before.
 
the result:
loadrunner: 300 concurrent user(I find one user ,one TCP/IP 
connection  form WebServer  to  RMIServer),
and  the TPS got 180+,web response time is
 about 2 second average. both WebServer and RMIServer
 has being using as normal of 
cpu(50%),ram(not full).
 
the performance almost  achieve thrice !
 It's amazing to me:)
I consider the method of RMI would hava low performance(
because of expensively net using),
but the  result is really puzzled me  :(
 
 
 
> > Could I consider that as long as I have a larger capacity RAM ,and I > > will get a good performance.> > Depends on your index-size (in bytes). When your index grows, less and> less of it can fit in the disk-cache and more time will be required for> proper warm-up. But the change will happen gradually, so you'll only be> surprised if you suddenly increase your index-size to double or more> size.> 
> > I don't understand " for disk-cache" meaning very clear.Could you please> > explain it again.Thanks a lot!(does't cache on RAM?)> > does warm-up == cache?> > There are (at least) two important memory mechanisms to consider.> My apologies if some of this is basic knowledge to you:> > 1) Disk-cache.> In general, the free RAM on your Linux-system is used for disk-cache.> With an index-size of 3GB and (just a guess) 1 GB free RAM, the> operating system is able to cache 1/3 or less of your index. If you open> the same index several times in a row, the disk-cache will be warmed to> the relevant parts of your index, so that you're not even hitting the> disk after a while. At least not for opening. This is the effect you> observed with your non-singleton based test, where the speed increased> slowly up to a not-so-high level.> > 2) Lucene internal structures.> I don't know much about this, so I hope somebody will correct me if I> make mistakes: Lucene has some internal structures
  that are initialized> when searches are performed. Depending on setup, this initialization can> be quite heavy (custom search for example). Performing warm-up, such as> searching with previously logged queries, will initialize these> structures before the real queries are received. This is the effect you> observed with your singleton searcher.> > 1 & 2 can be seen in combination, as the initialization of the internal> structures in Lucene requires a fair amount of seeks in the index data.> If there's nothing in the disk-cache and a conventional platter-based> harddisk is used, it takes some time. If the disk-cache is warmed from> previous use or a solid state drive setup is used, it is much faster.> 
 
 
I have understand it by your reply,thanks a lot.
 
> > how many docs do lucene will be cached default?and could I control the> > cache size?> > I don't know. Maybe someone else will chime in?> > > ---------------------------------------------------------------------> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: java-user-help@lucene.apache.org> 
_________________________________________________________________
MSN
http://mobile.msn.com.cn/
--_5dc21d30-fcbd-41f5-8e31-3ab7e6bb42bf_--

From java-user-return-34424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 11:04:08 2008
Return-Path: <java-user-return-34424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21375 invoked from network); 13 Jun 2008 11:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 11:04:08 -0000
Received: (qmail 68746 invoked by uid 500); 13 Jun 2008 11:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68714 invoked by uid 500); 13 Jun 2008 11:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68703 invoked by uid 99); 13 Jun 2008 11:04:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 04:04:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.201 as permitted sender)
Received: from [65.54.246.201] (HELO bay0-omc3-s1.bay0.hotmail.com) (65.54.246.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 11:03:12 +0000
Received: from BAY119-W27 ([207.46.9.62]) by bay0-omc3-s1.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 13 Jun 2008 04:03:29 -0700
Message-ID: <BAY119-W2732B32008EB8E34E67507B4AC0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_c32b8929-a455-43db-af06-21839856c067_"
X-Originating-IP: [58.37.171.208]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: Concurrent query benchmarks, with 1,2,4,8 readers
Date: Fri, 13 Jun 2008 19:03:29 +0800
Importance: Normal
In-Reply-To: <5e76f3840806111211j103c550fpa68db5e932214955@mail.gmail.com>
References: <519507.12479.qm@web50306.mail.re2.yahoo.com>
 <5e76f3840806111211j103c550fpa68db5e932214955@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 13 Jun 2008 11:03:29.0571 (UTC) FILETIME=[1C903730:01C8CD45]
X-Virus-Checked: Checked by ClamAV on apache.org

--_c32b8929-a455-43db-af06-21839856c067_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


TO: Glen Newton Could I get your test code or code architecture for study.
I have try to using java.util.concurrent package(
like ArrayBlockingQueue  ThreadPoolExecutor;) 
 with lucene,but it is no successful.I don't
know how to design.
 
 
Thanks ! my emial: wsnet@live.cn
_________________________________________________________________
live mail
http://get.live.cn/product/mail.html
--_c32b8929-a455-43db-af06-21839856c067_--

From java-user-return-34425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 13:31:02 2008
Return-Path: <java-user-return-34425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95072 invoked from network); 13 Jun 2008 13:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 13:31:02 -0000
Received: (qmail 65918 invoked by uid 500); 13 Jun 2008 13:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65792 invoked by uid 500); 13 Jun 2008 13:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65781 invoked by uid 99); 13 Jun 2008 13:30:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 06:30:56 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 13:30:05 +0000
Received: by yw-out-2324.google.com with SMTP id 3so2495366ywj.5
        for <java-user@lucene.apache.org>; Fri, 13 Jun 2008 06:30:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ACTmm7Ktg00UUwwKSgRgc9z+Etp0Qgi1Hy4kOBxPYSE=;
        b=jUYdtFltYWEzF6d963IAUuS7KvoUdZOseSmAj63q5OaugoH7K1bPBP8RyHsYRrXZzT
         1RZniOdI9iblTF+zAkakaQed7iFd8STUBtQj+9+kkQGj0G0KY0tPpv9dOpH2rDhnC7WI
         1ykQ7aNQwh/oV1BfgJjoOGtTW6A9hX8iP1lng=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fqTQS+u22aIqfPE2YaGgrMmJHfMmCJlSNMEOkNnIf/vEwLthkNXNgpQXpE03VZ76yh
         sxvogPyts7n+6MogvRxwd65/Ub1TwSpx9y2ou0h5acULEwteMumlYevAjqV0Ag3YPY7G
         kaG+QiqK2+4W2gbFTc5irm5l+BxmWJKsjmrxk=
Received: by 10.151.44.15 with SMTP id w15mr4539821ybj.209.1213363816005;
        Fri, 13 Jun 2008 06:30:16 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Fri, 13 Jun 2008 06:30:15 -0700 (PDT)
Message-ID: <359a92830806130630w6ba62ed4y3a5e9734649d474c@mail.gmail.com>
Date: Fri, 13 Jun 2008 09:30:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Giving Boost to a certain category of pages
In-Reply-To: <17807505.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26773_23896183.1213363815964"
References: <17806910.post@talk.nabble.com>
	 <359a92830806121159q492eca70ja33f636ef1a8eb59@mail.gmail.com>
	 <17807505.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26773_23896183.1213363815964
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You missed the point. They have different intents, so speed is irrelevant.
>From your original post:

<<<and using lucene. my job is to give boost to a particular
set of pages>>>

In which case you want to do index-time boosting.

So don't do anything until you understand the difference <G>...

Best
Erick

On Thu, Jun 12, 2008 at 3:05 PM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> which one do you think is faster, boosting at search time or boosting at
> index time...
> thanks for the reply..
>
> Erick Erickson wrote:
> >
> > From the Hossman:
> >
> > '...Index time field boosts are a way to express things like "this
> > documents
> > title is worth twice as much as the title of most documents". Query time
> > boosts are a way to express "I care about matches on this clause of my
> > query
> > twice as much as I do about matches to other clauses of my query.'
> >
> >
> > So, I think you want to think about index time boosts.....
> >
> > Best
> > Erick
> >
> > On Thu, Jun 12, 2008 at 2:38 PM, sumittyagi <ping.sumit@gmail.com>
> wrote:
> >
> >>
> >> Hi, I am maintaing a website's search engine, and using lucene.
> >> my job is to give boost to a particular set of pages, like pages about
> >> the
> >> Products of the company, Pages giving description of the company, about
> >> technology used etc etc.....
> >> How can i start that, I mean i just joined this job and want to perform
> >> good.
> >> Please let me know about it, if you need any particular information, let
> >> me
> >> know...
> >>
> >> thanks
> >> Sumit
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Giving-Boost-to-a-certain-category-of-pages-tp17806910p17806910.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Giving-Boost-to-a-certain-category-of-pages-tp17806910p17807505.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26773_23896183.1213363815964--

From java-user-return-34426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 14:02:15 2008
Return-Path: <java-user-return-34426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9681 invoked from network); 13 Jun 2008 14:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 14:02:15 -0000
Received: (qmail 17084 invoked by uid 500); 13 Jun 2008 14:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17046 invoked by uid 500); 13 Jun 2008 14:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17035 invoked by uid 99); 13 Jun 2008 14:02:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 07:02:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 14:01:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K79qT-0001s8-AY
	for java-user@lucene.apache.org; Fri, 13 Jun 2008 07:01:37 -0700
Message-ID: <17824134.post@talk.nabble.com>
Date: Fri, 13 Jun 2008 07:01:37 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi keyword match
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys ,
I need ur help.
 I am working with lucene engine its very good.
but I had some problem.
like my document contains feilds like id , name , desg 
i need to search "  id=1 and name=sandy and desg = manager "  where i need 
documents which satisfies  three conditions 
please help me if you have idea 
-- 
View this message in context: http://www.nabble.com/Multi-keyword-match-tp17824134p17824134.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 14:26:44 2008
Return-Path: <java-user-return-34427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23038 invoked from network); 13 Jun 2008 14:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 14:26:44 -0000
Received: (qmail 6052 invoked by uid 500); 13 Jun 2008 14:26:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6028 invoked by uid 500); 13 Jun 2008 14:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6017 invoked by uid 99); 13 Jun 2008 14:26:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 07:26:40 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 14:25:49 +0000
Received: from insiders.de (nebukadnezar.insiders.de [193.22.3.33] (may be forged))
	by rly16d.srv.mailcontrol.com (MailControl) with ESMTP id m5DEPuJq019616
	for <java-user@lucene.apache.org>; Fri, 13 Jun 2008 15:25:59 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: retrieve all docs efficiently - just one field
Date: Fri, 13 Jun 2008 16:25:44 +0200
Message-ID: <D4E368C6FE4C57499CBCE2A0B476C8B0E7159A@nebukadnezar.insiders.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: retrieve all docs efficiently - just one field
Thread-Index: AcjLyT0lIXn5hFZ/SN+OduFGYIUbIgBl42Yw
References: <17766268.post@talk.nabble.com> <E892E79A-9E2C-4A0C-B536-392E4021F906@gmail.com> <D4E368C6FE4C57499CBCE2A0B476C8B0E713CA@nebukadnezar.insiders.de> <B5F918D9-F601-438E-99A7-18A21594A771@gmail.com>
From: "Johannes Christen" <j.christen@insiders.de>
To: <java-user@lucene.apache.org>
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.68.0.126
X-Virus-Checked: Checked by ClamAV on apache.org



There might be quite a lot of users in different groups, but more =
important the user access rights might change and keeping them up to =
date in the index would be a real challenge.

But thanks for the LUCENE-879 tip. I will look into that next week.

	Jo


-----Urspr=FCngliche Nachricht-----
Von: Karl Wettin [mailto:karl.wettin@gmail.com]=20
Gesendet: Mittwoch, 11. Juni 2008 15:43
An: java-user@lucene.apache.org
Betreff: Re: retrieve all docs efficiently - just one field


11 jun 2008 kl. 09.38 skrev Johannes Christen:
>
> That might be a solution in this case, but I have the same kind of =20
> problem in another case.
> We index documents from an NTFS source. One field is the URI of the =20
> document.
> After a query has been processed, we perform an access check on the =20
> hits to ensure the user has access rights to open the document. If =20
> we have a big result set it takes very long to retrieve the URIs =20
> from all the hits, which we need to perform the access check against =20
> the file system.

How many users usually have access to any given document? Can't you =20
just index them with the document?

> Any good solution for this?
> I think a fix document ID in lucene would help in this cases a lot. =20
> The mapping between lucene documents and other systems (e.g. Oracle) =20
> would be much faster.

LUCENE-879 is a proof of concept that shows how you can enforce the =20
Lucene document numbers if you really want to go that way.


        karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 14:45:02 2008
Return-Path: <java-user-return-34428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37569 invoked from network); 13 Jun 2008 14:45:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 14:45:01 -0000
Received: (qmail 38066 invoked by uid 500); 13 Jun 2008 14:44:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38029 invoked by uid 500); 13 Jun 2008 14:44:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38018 invoked by uid 99); 13 Jun 2008 14:44:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 07:44:56 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 14:44:06 +0000
Received: by yx-out-2324.google.com with SMTP id 31so476963yxl.5
        for <java-user@lucene.apache.org>; Fri, 13 Jun 2008 07:44:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Mhoiug2o6o+3yPhCSx8c5QhTUH5ZGMQurCwrwyy8iJI=;
        b=G76FFHH71qW6cCDtOpLrePZDLXU2zq6pEl/i1HAPZ08LsnaLy9heSOYI69/+o0w13L
         duHZbMXbE8CHdwpdzrSV8Q3nk2CmIc+wGYCWJSYeKjt/NcbO9AuTjDOAX7YJtW58RjYK
         yMwdOtKJKPZLKUTTclVTUvzr4jpdfs/7SqA/0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Q+ik9HDwOQCavaA0sa6Rx7UU7czHTmwFzi5CqdaslNykNz+a2LiAUj+ZSrwIfAXqIn
         mZ8Pp1wThE4d24OBdoTsK0mTQTiTrPvuQimgJAeWwcpeSww5PBxrui6uqPpf9hiraGU/
         b5H0U6p8pKs4K/nErdZU9zlA9mG23yMsXES2o=
Received: by 10.150.148.19 with SMTP id v19mr4579649ybd.240.1213368263580;
        Fri, 13 Jun 2008 07:44:23 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 13 Jun 2008 07:44:23 -0700 (PDT)
Message-ID: <359a92830806130744n6abb05d8k1cc9095c98707940@mail.gmail.com>
Date: Fri, 13 Jun 2008 10:44:23 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi keyword match
In-Reply-To: <17824134.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30509_32808256.1213368263616"
References: <17824134.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30509_32808256.1213368263616
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you looked at:

http://lucene.apache.org/java/docs/queryparsersyntax.html

??

Best
Erick

On Fri, Jun 13, 2008 at 10:01 AM, sandyg <gaddamsandeeps@gmail.com> wrote:

>
> Hi guys ,
> I need ur help.
>  I am working with lucene engine its very good.
> but I had some problem.
> like my document contains feilds like id , name , desg
> i need to search "  id=1 and name=sandy and desg = manager "  where i need
> documents which satisfies  three conditions
> please help me if you have idea
> --
> View this message in context:
> http://www.nabble.com/Multi-keyword-match-tp17824134p17824134.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30509_32808256.1213368263616--

From java-user-return-34429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 15:00:51 2008
Return-Path: <java-user-return-34429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51425 invoked from network); 13 Jun 2008 15:00:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 15:00:51 -0000
Received: (qmail 73149 invoked by uid 500); 13 Jun 2008 15:00:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73123 invoked by uid 500); 13 Jun 2008 15:00:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73112 invoked by uid 99); 13 Jun 2008 15:00:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 08:00:47 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 14:59:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K7AlC-0004GM-6T
	for java-user@lucene.apache.org; Fri, 13 Jun 2008 08:00:14 -0700
Message-ID: <17825442.post@talk.nabble.com>
Date: Fri, 13 Jun 2008 08:00:14 -0700 (PDT)
From: MaxiRobbie <felker.robert@gmail.com>
To: java-user@lucene.apache.org
Subject: [BEGINNER]Query on index with number
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: felker.robert@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all, 

I've worked just a little with Lucene and now i need some stuffs to be done
but i can't find responses in faq or how-to.

My index contains products title like Nikon d300, nikon d200, nikon d3

i'm using SimpleAnalyzer and when i query for title:d300, it's transformed
in title:d and the results contains d200 and others kind of stuff.

How can i correct this ? somes links would be helpfull.

Thanks for share your experience.
-- 
View this message in context: http://www.nabble.com/-BEGINNER-Query-on-index-with-number-tp17825442p17825442.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 15:25:57 2008
Return-Path: <java-user-return-34430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97480 invoked from network); 13 Jun 2008 15:25:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 15:25:57 -0000
Received: (qmail 31459 invoked by uid 500); 13 Jun 2008 15:25:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31434 invoked by uid 500); 13 Jun 2008 15:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31423 invoked by uid 99); 13 Jun 2008 15:25:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 08:25:52 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 15:25:02 +0000
Received: by py-out-1112.google.com with SMTP id z74so1643631pyg.9
        for <java-user@lucene.apache.org>; Fri, 13 Jun 2008 08:25:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=6BR+HvXgeMbeKwiw2LhVPtOMh+leTNPqgJd1kI9p7vc=;
        b=RL6wAF3Pbl8zi6oHDM7p0QzCkhNX40b1aoeRgrotaLz+rK/PZDKnh5J3plzHzc5vOv
         RklCSGCLB0O06+8huyMewn2hRUcGDANpQ8hlCoVp+cbI+CJTITqw1a4TrzHOKvMYLDon
         ryYgYAD3dm1wVdDrWhbv6gpK3niP+/1/nfPGI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Gad2vOqFcaRfY2/ZFvVVq5+NbK+POVxsx2/3EMPQliwU7D1Znq1wDoSgLbSRgWxGLT
         0UiIB5Y2EH11Cbw+6Pn4WbQjcdhxFg9d3jwa+FiPIzllgnofqo1Ha+IoGiqZsKnJELnU
         2s/3gQg2hV73hcEjSxjMrLn3Zm7iL9zeq4N8w=
Received: by 10.115.60.1 with SMTP id n1mr3187178wak.179.1213370718888;
        Fri, 13 Jun 2008 08:25:18 -0700 (PDT)
Received: by 10.115.59.8 with HTTP; Fri, 13 Jun 2008 08:25:18 -0700 (PDT)
Message-ID: <8c4e68610806130825j12a2ef6ep3e88b27bc9a7983f@mail.gmail.com>
Date: Fri, 13 Jun 2008 16:25:18 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [BEGINNER]Query on index with number
In-Reply-To: <17825442.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <17825442.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Try StandardAnalyzer rather than SimpleAnalyzer.  See the javadocs for
these classes and the tokenizers they use for explanations.

SimpleAnalyzer uses LetterTokenizer which divides text at non-letters.


--
Ian.


On Fri, Jun 13, 2008 at 4:00 PM, MaxiRobbie <felker.robert@gmail.com> wrote:
>
> Hi all,
>
> I've worked just a little with Lucene and now i need some stuffs to be done
> but i can't find responses in faq or how-to.
>
> My index contains products title like Nikon d300, nikon d200, nikon d3
>
> i'm using SimpleAnalyzer and when i query for title:d300, it's transformed
> in title:d and the results contains d200 and others kind of stuff.
>
> How can i correct this ? somes links would be helpfull.
>
> Thanks for share your experience.
> --
> View this message in context: http://www.nabble.com/-BEGINNER-Query-on-index-with-number-tp17825442p17825442.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 15:48:04 2008
Return-Path: <java-user-return-34431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16172 invoked from network); 13 Jun 2008 15:48:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 15:48:04 -0000
Received: (qmail 88145 invoked by uid 500); 13 Jun 2008 15:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88108 invoked by uid 500); 13 Jun 2008 15:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88097 invoked by uid 99); 13 Jun 2008 15:47:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 08:47:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sengly.heng@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 15:47:10 +0000
Received: by ug-out-1314.google.com with SMTP id h3so105573ugf.29
        for <java-user@lucene.apache.org>; Fri, 13 Jun 2008 08:47:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=hwmkrqRjBpNFqM+Adk0pJmMjkGfGgw4P6q7UOU5LKFM=;
        b=YPAbqli6nlBpFToVChPXrJS1tpiifCTcQTpXR06oEhpEa5exqEQAz/0uAU+WaJDOP4
         J/L7DKDMaeTIHJBae2Gy1a8BHdSGOuyv2hpQ1cf2MSSMiV4ycwoRSxXPeGJPP7sv5Kuu
         L0UYIl22MlX8aNQuAYwHevYht5Xp7k48Uv9o8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=bYeafHK6V1vU9ZD98j3rT3u3q8OWEgYtP7XuXOh8VKkeNJ50fBxRKd/PRj7OQyb5tX
         sTh4NLIbCUJC9h9p8OCEaisKHC4PdIDenwE3pMM3H3vSPKnVKvdzB2V8gYsbipx46saF
         PhXIXgcqlJz903IZP1WeInuku2Mh6KnWKBRM8=
Received: by 10.67.122.10 with SMTP id z10mr1204495ugm.79.1213372047184;
        Fri, 13 Jun 2008 08:47:27 -0700 (PDT)
Received: by 10.66.236.4 with HTTP; Fri, 13 Jun 2008 08:47:26 -0700 (PDT)
Message-ID: <17db983d0806130847v493d7bc9t2c9f0c7a5cd146ca@mail.gmail.com>
Date: Sat, 14 Jun 2008 00:47:26 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Seeking suggestion on results re-ranking methodology
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25138_19080217.1213372047160"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25138_19080217.1213372047160
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dear all,

I would like to seek your suggestion on re-ranking methodology. My
problem is that I have a set of resulting documents to a query and
each one of them with a matching score and also a list of relatedness
score between each two of them. I would like to re-rank my resulting
documents by downgrading the score of those near duplicate results. I would
like to
know whether there exists any standard approach to do so?

Any suggestions or pointers would be highly appreciated.

Best regards,
Sengly

------=_Part_25138_19080217.1213372047160--

From java-user-return-34432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 15:53:16 2008
Return-Path: <java-user-return-34432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18635 invoked from network); 13 Jun 2008 15:53:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 15:53:16 -0000
Received: (qmail 413 invoked by uid 500); 13 Jun 2008 15:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 381 invoked by uid 500); 13 Jun 2008 15:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 366 invoked by uid 99); 13 Jun 2008 15:53:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 08:53:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 15:52:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K7BZq-0006O3-Ny
	for java-user@lucene.apache.org; Fri, 13 Jun 2008 08:52:34 -0700
Message-ID: <17826573.post@talk.nabble.com>
Date: Fri, 13 Jun 2008 08:52:34 -0700 (PDT)
From: MaxiRobbie <felker.robert@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [BEGINNER]Query on index with number
In-Reply-To: <8c4e68610806130825j12a2ef6ep3e88b27bc9a7983f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: felker.robert@gmail.com
References: <17825442.post@talk.nabble.com> <8c4e68610806130825j12a2ef6ep3e88b27bc9a7983f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you for your valuable help, now i can solve the problem.

Much respect to the team and various helpers :)

Robbie


Ian Lea wrote:
> 
> Try StandardAnalyzer rather than SimpleAnalyzer.  See the javadocs for
> these classes and the tokenizers they use for explanations.
> 
> SimpleAnalyzer uses LetterTokenizer which divides text at non-letters.
> 
> 
> --
> Ian.
> 
> 
> On Fri, Jun 13, 2008 at 4:00 PM, MaxiRobbie <felker.robert@gmail.com>
> wrote:
>>
>> Hi all,
>>
>> I've worked just a little with Lucene and now i need some stuffs to be
>> done
>> but i can't find responses in faq or how-to.
>>
>> My index contains products title like Nikon d300, nikon d200, nikon d3
>>
>> i'm using SimpleAnalyzer and when i query for title:d300, it's
>> transformed
>> in title:d and the results contains d200 and others kind of stuff.
>>
>> How can i correct this ? somes links would be helpfull.
>>
>> Thanks for share your experience.
>> --
>> View this message in context:
>> http://www.nabble.com/-BEGINNER-Query-on-index-with-number-tp17825442p17825442.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/-BEGINNER-Query-on-index-with-number-tp17825442p17826573.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 16:52:31 2008
Return-Path: <java-user-return-34433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40651 invoked from network); 13 Jun 2008 16:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 16:52:30 -0000
Received: (qmail 87483 invoked by uid 500); 13 Jun 2008 16:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87455 invoked by uid 500); 13 Jun 2008 16:52:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87444 invoked by uid 99); 13 Jun 2008 16:52:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 09:52:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 16:51:33 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4813339rvb.5
        for <java-user@lucene.apache.org>; Fri, 13 Jun 2008 09:51:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=V54tEEOy13IbXzpcAxR92l6riyhbtT6ANUQW4xTEQ4E=;
        b=e0tgmnHsmDLH56yG6DjFmA5/m8bQUMSxdGjZ+bxLEyvmk74AryLsZeprrRDjKqRoqb
         d1Qjzovr8vymQI8v1K6SLD7N/vZ124PF24k9NxJUJdB39RWHlzFuoOvI08j6jF5lR741
         eh8KPo6l1a88LkA0TfK9sCzbSnQ775deHy024=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=rAZOJy8+mQpDFq6mhb9z160yxSU+aIKm2vSsKaBiW8mmddhbCLyzyyT2LiqZLkf7Bz
         bNI4/mLKTQC8vZ+Ku084le0JgBNyo9GX0eYdPjKag47+dmK+GQPwyMgPWArfO3KNOckn
         Pt0XM6JxjiD1v8JRV66y+vMDipBvB2jG96A34=
Received: by 10.141.13.16 with SMTP id q16mr2001589rvi.99.1213375911467;
        Fri, 13 Jun 2008 09:51:51 -0700 (PDT)
Received: by 10.141.18.7 with HTTP; Fri, 13 Jun 2008 09:51:51 -0700 (PDT)
Message-ID: <5e76f3840806130951u28be4bfbh237da22b431a8804@mail.gmail.com>
Date: Fri, 13 Jun 2008 12:51:51 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers
In-Reply-To: <BAY119-W2732B32008EB8E34E67507B4AC0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <519507.12479.qm@web50306.mail.re2.yahoo.com>
	 <5e76f3840806111211j103c550fpa68db5e932214955@mail.gmail.com>
	 <BAY119-W2732B32008EB8E34E67507B4AC0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

THV0YW4sCgpZZXMsIG5vIHByb2JsZW0uIEkgYW0gYXdheSBhdCBhIGNvbmZlcmVuY2UgbmV4dCB3
ZWVrIGJ1dCBwbGFuIHRvCnJlbGVhc2UgdGhlIGNvZGUgdGhlIGZvbGxvd2luZyB3ZWVrLiBJcyB0
aGlzIE9LIGZvciB5b3U/Cgp0aGFua3MsCgpHbGVuCgoyMDA4LzYvMTMgbHV0YW4gPHdzbmV0QGxp
dmUuY24+Ogo+Cj4gVE86IEdsZW4gTmV3dG9uIENvdWxkIEkgZ2V0IHlvdXIgdGVzdCBjb2RlIG9y
IGNvZGUgYXJjaGl0ZWN0dXJlIGZvciBzdHVkeS4KPiBJIGhhdmUgdHJ5IHRvIHVzaW5nIGphdmEu
dXRpbC5jb25jdXJyZW50IHBhY2thZ2UoCj4gbGlrZSBBcnJheUJsb2NraW5nUXVldWUgIFRocmVh
ZFBvb2xFeGVjdXRvcjspCj4gIHdpdGggbHVjZW5lLGJ1dCBpdCBpcyBubyBzdWNjZXNzZnVsLkkg
ZG9uJ3QKPiBrbm93IGhvdyB0byBkZXNpZ24uCj4KPgo+IFRoYW5rcyAhIG15IGVtaWFsOiB3c25l
dEBsaXZlLmNuCj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KPiDlpJrkuKrpgq7nrrHlkIzmraXnrqHnkIbvvIxsaXZlIG1h
aWzlrqLmiLfnq6/kuIfkurrmiqLnlKjkuK0KPiBodHRwOi8vZ2V0LmxpdmUuY24vcHJvZHVjdC9t
YWlsLmh0bWwKCgoKLS0gCgotCg==


From java-user-return-34434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 17:15:33 2008
Return-Path: <java-user-return-34434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53232 invoked from network); 13 Jun 2008 17:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 17:15:33 -0000
Received: (qmail 46497 invoked by uid 500); 13 Jun 2008 17:15:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46467 invoked by uid 500); 13 Jun 2008 17:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46439 invoked by uid 99); 13 Jun 2008 17:15:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 10:15:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.214 as permitted sender)
Received: from [65.54.246.214] (HELO bay0-omc3-s14.bay0.hotmail.com) (65.54.246.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 17:14:34 +0000
Received: from BAY119-W14 ([207.46.9.49]) by bay0-omc3-s14.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 13 Jun 2008 10:14:31 -0700
Message-ID: <BAY119-W14A0D3214603A75B207149B4AC0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_a85ba25f-02e8-440c-98c2-5e38172eb0fa_"
X-Originating-IP: [60.63.21.219]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: Concurrent query benchmarks, with 1,2,4,8 readers
Date: Sat, 14 Jun 2008 01:14:30 +0800
Importance: Normal
In-Reply-To: <5e76f3840806130951u28be4bfbh237da22b431a8804@mail.gmail.com>
References: <519507.12479.qm@web50306.mail.re2.yahoo.com>
	 <5e76f3840806111211j103c550fpa68db5e932214955@mail.gmail.com>
 	 <BAY119-W2732B32008EB8E34E67507B4AC0@phx.gbl> 
 <5e76f3840806130951u28be4bfbh237da22b431a8804@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 13 Jun 2008 17:14:31.0424 (UTC) FILETIME=[F1A96800:01C8CD78]
X-Virus-Checked: Checked by ClamAV on apache.org

--_a85ba25f-02e8-440c-98c2-5e38172eb0fa_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


TO : Glen Newton 
Thank you very much!
I am so glad to learn it.
 
> Date: Fri, 13 Jun 2008 12:51:51 -0400> From: glen.newton@gmail.com> To: java-user@lucene.apache.org> Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers> > Lutan,> > Yes, no problem. I am away at a conference next week but plan to> release the code the following week. Is this OK for you?> > thanks,> > Glen> > 2008/6/13 lutan <wsnet@live.cn>:> >> > TO: Glen Newton Could I get your test code or code architecture for study.> > I have try to using java.util.concurrent package(> > like ArrayBlockingQueue ThreadPoolExecutor;)> > with lucene,but it is no successful.I don't> > know how to design.> >> >> > Thanks ! my emial: wsnet@live.cn> > _________________________________________________________________> > > > -- > > -
_________________________________________________________________
MSN
http://mobile.msn.com.cn/
--_a85ba25f-02e8-440c-98c2-5e38172eb0fa_--

From java-user-return-34435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 13 22:25:45 2008
Return-Path: <java-user-return-34435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82243 invoked from network); 13 Jun 2008 22:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jun 2008 22:25:45 -0000
Received: (qmail 92756 invoked by uid 500); 13 Jun 2008 22:25:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92719 invoked by uid 500); 13 Jun 2008 22:25:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92708 invoked by uid 99); 13 Jun 2008 22:25:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 15:25:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 22:24:50 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 340DD71CC77; Fri, 13 Jun 2008 15:25:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 30F7E71CC76
	for <java-user@lucene.apache.org>; Fri, 13 Jun 2008 15:25:08 -0700 (PDT)
Date: Fri, 13 Jun 2008 15:25:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Match "best one" from list
In-Reply-To: <17805042.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0806131523100.28409@radix.cryptio.net>
References: <17805042.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:   BESTOF( "apple"^10, "orange"^9, "pear"^8, "peach"^8, "grapes"^2 )
: 
: So ideally in this field we want to find "apple", but would accept one of
: the other pre-defined alternatives as a match. If the document field
: contains apples it scores higher than if it only contains oranges, but a
: document with apples AND oranges only has apples taken into consideration,

take a look at DisjunctionMaxQuery.  I'm 90% certain it's exactly what 
you're talking about.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 14 04:37:23 2008
Return-Path: <java-user-return-34436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79879 invoked from network); 14 Jun 2008 04:37:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jun 2008 04:37:23 -0000
Received: (qmail 33828 invoked by uid 500); 14 Jun 2008 04:37:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33801 invoked by uid 500); 14 Jun 2008 04:37:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33790 invoked by uid 99); 14 Jun 2008 04:37:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Jun 2008 21:37:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 14 Jun 2008 04:36:26 +0000
Received: (qmail 69500 invoked by uid 60001); 14 Jun 2008 04:36:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=p9MixVxY5Wly8NGk5bAQAiIlFk44cGQHCdvf6dnaXPShuj4ZXt7/L7Fax0NrocMzirjcejBJsaNLZHlBxVcI2wdpKP71bIXWpNNl7d40xIasuVv6lYrf3qIal+kgOrZbCknIBslT36IOqIpbWbXB+BYcsIFpkQkE9KgvTB4dzPU=;
Received: from [72.231.9.236] by web50305.mail.re2.yahoo.com via HTTP; Fri, 13 Jun 2008 21:36:42 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Fri, 13 Jun 2008 21:36:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Seeking suggestion on results re-ranking methodology
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <9931.69169.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There might be something here:

http://wunderwood.org/most_casual_observer/2007/04/progressive_reranking.html
 Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Sengly Heng <sengly.heng@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 13, 2008 11:47:26 AM
> Subject: Seeking suggestion on results re-ranking methodology
> 
> Dear all,
> 
> I would like to seek your suggestion on re-ranking methodology. My
> problem is that I have a set of resulting documents to a query and
> each one of them with a matching score and also a list of relatedness
> score between each two of them. I would like to re-rank my resulting
> documents by downgrading the score of those near duplicate results. I would
> like to
> know whether there exists any standard approach to do so?
> 
> Any suggestions or pointers would be highly appreciated.
> 
> Best regards,
> Sengly


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 15 06:16:27 2008
Return-Path: <java-user-return-34437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73041 invoked from network); 15 Jun 2008 06:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2008 06:16:27 -0000
Received: (qmail 14687 invoked by uid 500); 15 Jun 2008 06:16:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14654 invoked by uid 500); 15 Jun 2008 06:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14640 invoked by uid 99); 15 Jun 2008 06:16:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Jun 2008 23:16:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sengly.heng@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jun 2008 06:15:25 +0000
Received: by ug-out-1314.google.com with SMTP id h3so250518ugf.29
        for <java-user@lucene.apache.org>; Sat, 14 Jun 2008 23:15:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zBmBNUKf1l+GNsRNHTZXOkYhGqDXMcR8hIyplgbvFy0=;
        b=JWG8vOR0snxuWHfptptv2gSgjUNmm36SI3CAXLq1cb/vJ2MNeuDRG/PntpC0sP8OH4
         bBD87nW/v+tJAg3kQu8TRHVYD50AQItLDPqWt1Ee+vkrAtpF6NcusRDmEvMUvr5lf1qU
         j8OoCLRp5pAd4X4E+ukSWJGG3HMgFCPbT7kjU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iV97r66axKNwkJn+lqG1Nz3aLflZi8lC2KXXzOioyHXWzMbNax9y9TgAHTde+ziUTR
         /W7vHTRBltJbbpwTEcaBtDtxgKy1gBRQ4FyAAVbFD43ckfiaqxbM72y3wpDvf0QfQahD
         exhzuGH1sBfWyIg+Sel65huzIZfjmBS7v/QRE=
Received: by 10.66.255.20 with SMTP id c20mr3435854ugi.16.1213510541618;
        Sat, 14 Jun 2008 23:15:41 -0700 (PDT)
Received: by 10.66.236.4 with HTTP; Sat, 14 Jun 2008 23:15:41 -0700 (PDT)
Message-ID: <17db983d0806142315v30f088f2vdafc5745ad0d78db@mail.gmail.com>
Date: Sun, 15 Jun 2008 15:15:41 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Seeking suggestion on results re-ranking methodology
In-Reply-To: <9931.69169.qm@web50305.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28661_1107858.1213510541580"
References: <9931.69169.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28661_1107858.1213510541580
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It doesn't really solve my problem. But thank you so much for the pointer,
Otis!

Any other suggestions/pointers would be very welcome.

Thank you.

Nice weekend,

Sengly

On Sat, Jun 14, 2008 at 1:36 PM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> There might be something here:
>
>
> http://wunderwood.org/most_casual_observer/2007/04/progressive_reranking.html
>  Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
> > From: Sengly Heng <sengly.heng@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Friday, June 13, 2008 11:47:26 AM
> > Subject: Seeking suggestion on results re-ranking methodology
> >
> > Dear all,
> >
> > I would like to seek your suggestion on re-ranking methodology. My
> > problem is that I have a set of resulting documents to a query and
> > each one of them with a matching score and also a list of relatedness
> > score between each two of them. I would like to re-rank my resulting
> > documents by downgrading the score of those near duplicate results. I
> would
> > like to
> > know whether there exists any standard approach to do so?
> >
> > Any suggestions or pointers would be highly appreciated.
> >
> > Best regards,
> > Sengly
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28661_1107858.1213510541580--

From java-user-return-34438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 15 09:09:14 2008
Return-Path: <java-user-return-34438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2970 invoked from network); 15 Jun 2008 09:09:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2008 09:09:13 -0000
Received: (qmail 63093 invoked by uid 500); 15 Jun 2008 09:09:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63060 invoked by uid 500); 15 Jun 2008 09:09:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63049 invoked by uid 99); 15 Jun 2008 09:09:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jun 2008 02:09:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sengly.heng@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jun 2008 09:08:21 +0000
Received: by ug-out-1314.google.com with SMTP id h3so257328ugf.29
        for <java-user@lucene.apache.org>; Sun, 15 Jun 2008 02:08:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=VY1+Bo3/d5ceV5j1/l1X90GfRJj9pys4G7tPERXpb5s=;
        b=EL091Rh9f2w0Aoa4Zum6sPUYIrAM5ukDcdqF0id+fT1DQ2188HzWrWYzbKxabaiRlr
         DjOeXOh5cL2s8zCxP8Youhic+HL+TPBlRYuaYBpM/gA4A3vtwf3Uqp2HPdtbwV6AN6D5
         +qMye9bA23VFZGnWiXO+J9nPbHPaRScXsFpgA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=B/QrPyPn6WdPal8mnXoBDtSaTnozUUJa1wK7Bgsvp2QJPTk5Wfqa4lJUM56b/LuD4E
         UMk8y0i6PgjZuQr0tFbUSdaJWnTXQgL1JjPlQFJCXWJG5GoGs0RuZILCh1uvoLjta6W4
         5Lzsg5ypXADMKWUxeYMlln6ppGViS/+O8476k=
Received: by 10.67.91.20 with SMTP id t20mr2752379ugl.77.1213520918866;
        Sun, 15 Jun 2008 02:08:38 -0700 (PDT)
Received: by 10.66.236.4 with HTTP; Sun, 15 Jun 2008 02:08:38 -0700 (PDT)
Message-ID: <17db983d0806150208x58e7fe81u4e6d0c1415010187@mail.gmail.com>
Date: Sun, 15 Jun 2008 18:08:38 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: How to handle plural?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28716_29062387.1213520918815"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28716_29062387.1213520918815
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all,

I am facing a problem when dealing a query such as "Finding all the
documents that write about at least 5 animals"? How to handle it?

Do you have any idea?

Thank you.

Best regards,

Sengly

------=_Part_28716_29062387.1213520918815--

From java-user-return-34439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 15 23:32:00 2008
Return-Path: <java-user-return-34439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82927 invoked from network); 15 Jun 2008 23:32:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jun 2008 23:32:00 -0000
Received: (qmail 50807 invoked by uid 500); 15 Jun 2008 23:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50758 invoked by uid 500); 15 Jun 2008 23:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50747 invoked by uid 99); 15 Jun 2008 23:31:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jun 2008 16:31:55 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jun 2008 23:31:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K81gu-0002NM-Mr
	for java-user@lucene.apache.org; Sun, 15 Jun 2008 16:31:20 -0700
Message-ID: <17855832.post@talk.nabble.com>
Date: Sun, 15 Jun 2008 16:31:20 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
In-Reply-To: <200806011915.38616@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <17582678.post@talk.nabble.com> <200806011915.38616@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the reply, and my apologies for the delay in my response.  I
unfortunately have been quite busy trying to meet some deadlines at work.  

Unfortunately this response was a bit vague.  To clarify, Lucene allows the
user to return a result set when searching from an index with the users
keyword(s) highlighted.  I am able to do this.  What I am unable to do, is
have the user's keywords highlighted when doing a fuzzy search, or a wild
card search.  Is this possible, and if so, how?  At present, I am trying to
search an xml document, which I am searching using the SAX API.

Any help in accomplishing this would be greatly appreciated.

Sincerely;
Fayyaz

Daniel Naber-10 wrote:
> 
> On Sonntag, 1. Juni 2008, syedfa wrote:
> 
>> I am trying to display my results from doing a search of an xml document
>> (some quotes from shakespeare's "Hamlet") using a WildCard and Fuzzy
>> search, and then I'm trying to highlight the keyword(s) in the results,
>> but unfortunately I am having problems.
> 
> Please see
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-75566820ee94a425c7e2950ac61d24e405fbd914
> 
> regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Displaying-and-highlighting-results-from-a-Wild-Card-and-Fuzzy-search-using-Lucene-in-Java-tp17582678p17855832.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 02:09:52 2008
Return-Path: <java-user-return-34440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37314 invoked from network); 16 Jun 2008 02:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 02:09:52 -0000
Received: (qmail 41751 invoked by uid 500); 16 Jun 2008 02:09:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40816 invoked by uid 500); 16 Jun 2008 02:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40802 invoked by uid 99); 16 Jun 2008 02:09:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Jun 2008 19:09:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 02:08:57 +0000
Received: by yw-out-2324.google.com with SMTP id 3so3075637ywj.5
        for <java-user@lucene.apache.org>; Sun, 15 Jun 2008 19:09:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=fBuNQIQcsmU36yAeEp83GYW3yaKE8K7ChaJiimZUG9w=;
        b=ZxVDn5qkI/s1j9Dyjm8n/naTHGYJVWSOVgGpSljZ+FsihgtbI1mQ9S2HeruOP6UdEn
         +0bOIXQiUaPfMMSqBMzBfdjbhK7f17Cs6MFgElWghqMoz5jnfxWmpWGwD1LMt31MIT7O
         LM3WYvm4IBie1HLbnpiixqsPhmf8YlzWxNL94=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Bb1pCEUf13jt11Hik8wI+aACJvGKXyJ0O2lUWj7btLfn2Ge6zm4fdfsXc+mKJcpRNH
         PEPx1XMqK4afaF61MhTxn0Qt9lV82n6UxJ+q5N1bZwVeo5YvZyBasDS3scWSRy9wUqLl
         84+z3DeiwX/qNvM6NNh7UTV3zVRRf+t7JVR8U=
Received: by 10.150.52.2 with SMTP id z2mr9790023ybz.48.1213582155338;
        Sun, 15 Jun 2008 19:09:15 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 25sm9588923qbw.1.2008.06.15.19.09.13
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 15 Jun 2008 19:09:14 -0700 (PDT)
Message-ID: <4855CB49.3010706@gmail.com>
Date: Sun, 15 Jun 2008 22:09:13 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
References: <17582678.post@talk.nabble.com> <200806011915.38616@danielnaber.de> <17855832.post@talk.nabble.com>
In-Reply-To: <17855832.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

First step:

query = query.rewrite()

Then pass the query to the Highlighter.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 07:44:34 2008
Return-Path: <java-user-return-34441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16392 invoked from network); 16 Jun 2008 07:44:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 07:44:34 -0000
Received: (qmail 22064 invoked by uid 500); 16 Jun 2008 07:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22039 invoked by uid 500); 16 Jun 2008 07:44:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22028 invoked by uid 99); 16 Jun 2008 07:44:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 00:44:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 07:43:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K89Nd-0000n7-De
	for java-user@lucene.apache.org; Mon, 16 Jun 2008 00:43:57 -0700
Message-ID: <17859500.post@talk.nabble.com>
Date: Mon, 16 Jun 2008 00:43:57 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi keyword match
In-Reply-To: <359a92830806130744n6abb05d8k1cc9095c98707940@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <17824134.post@talk.nabble.com> <359a92830806130744n6abb05d8k1cc9095c98707940@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
Thnx for the help.But its not fullfilled my requirement.
for example  my record is like    id=121 ,name=sandy and desg=professional.
Actually here default keyword is id
If i do search like       id:"121" and name:"sandy"                   it
gives the result
 But when i search     name:"sandy" and desg:"professional"    it gives no
result.

So it is searching based on default feild only not on remaining conditions.
Please if u find any solution for this forward it to me.



Erick Erickson wrote:
> 
> Have you looked at:
> 
> http://lucene.apache.org/java/docs/queryparsersyntax.html
> 
> ??
> 
> Best
> Erick
> 
> On Fri, Jun 13, 2008 at 10:01 AM, sandyg <gaddamsandeeps@gmail.com> wrote:
> 
>>
>> Hi guys ,
>> I need ur help.
>>  I am working with lucene engine its very good.
>> but I had some problem.
>> like my document contains feilds like id , name , desg
>> i need to search "  id=1 and name=sandy and desg = manager "  where i
>> need
>> documents which satisfies  three conditions
>> please help me if you have idea
>> --
>> View this message in context:
>> http://www.nabble.com/Multi-keyword-match-tp17824134p17824134.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Multi-keyword-match-tp17824134p17859500.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 07:57:07 2008
Return-Path: <java-user-return-34442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18476 invoked from network); 16 Jun 2008 07:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 07:57:07 -0000
Received: (qmail 32323 invoked by uid 500); 16 Jun 2008 07:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32289 invoked by uid 500); 16 Jun 2008 07:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32278 invoked by uid 99); 16 Jun 2008 07:57:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 00:57:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 07:56:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K89Zn-0001Dy-EP
	for java-user@lucene.apache.org; Mon, 16 Jun 2008 00:56:31 -0700
Message-ID: <17859694.post@talk.nabble.com>
Date: Mon, 16 Jun 2008 00:56:31 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi keyword match
In-Reply-To: <17859500.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <17824134.post@talk.nabble.com> <359a92830806130744n6abb05d8k1cc9095c98707940@mail.gmail.com> <17859500.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
Guys please ignore this message i found the solution .
Just i have to search "sandy" and "professional"
sorry for misuse the mailing service .


sandyg wrote:
> 
> Hi,
> Thnx for the help.But its not fullfilled my requirement.
> for example  my record is like    id=121 ,name=sandy and
> desg=professional.
> Actually here default keyword is id
> If i do search like       id:"121" and name:"sandy"                   it
> gives the result
>  But when i search     name:"sandy" and desg:"professional"    it gives no
> result.
> 
> So it is searching based on default feild only not on remaining
> conditions.
> Please if u find any solution for this forward it to me.
> 
> 
> 
> Erick Erickson wrote:
>> 
>> Have you looked at:
>> 
>> http://lucene.apache.org/java/docs/queryparsersyntax.html
>> 
>> ??
>> 
>> Best
>> Erick
>> 
>> On Fri, Jun 13, 2008 at 10:01 AM, sandyg <gaddamsandeeps@gmail.com>
>> wrote:
>> 
>>>
>>> Hi guys ,
>>> I need ur help.
>>>  I am working with lucene engine its very good.
>>> but I had some problem.
>>> like my document contains feilds like id , name , desg
>>> i need to search "  id=1 and name=sandy and desg = manager "  where i
>>> need
>>> documents which satisfies  three conditions
>>> please help me if you have idea
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Multi-keyword-match-tp17824134p17824134.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Multi-keyword-match-tp17824134p17859694.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 08:26:09 2008
Return-Path: <java-user-return-34443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27634 invoked from network); 16 Jun 2008 08:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 08:26:09 -0000
Received: (qmail 63171 invoked by uid 500); 16 Jun 2008 08:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63133 invoked by uid 500); 16 Jun 2008 08:26:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63122 invoked by uid 99); 16 Jun 2008 08:26:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 01:26:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 08:25:13 +0000
Received: by fg-out-1718.google.com with SMTP id l27so3863605fgb.27
        for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 01:25:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :mime-version:subject:date:x-mailer:from;
        bh=5BpKIaO+v89T2dNae4mUlffOx3vJPTbsgFlpP/lfxMg=;
        b=gngmBdha4lkdu/ZwgzdlM5OTSOsxM2yDd9GTM5V0kdp+dO1EBVqQD3hzuK3zgCGuuM
         b5tErjLiXwzTIn+XZIc0xyYuS72soqzynH9G/XcCMsH2ViFGZkCkZ2YfTMwxYRCkEd57
         Tmay4nMx2iePApZ7k+VjLxIheGI1JtI1zu4K4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:mime-version:subject:date:x-mailer:from;
        b=Qy0maS7SPmAakAXR+4j1c3prrfb7fBAeAHxUoti9va/kmRPZxVq+7S3dP6GD7iiK5c
         FBp0IfYBN97RXSpEhtQM8NmZPxpGC92ROYOSKG1j1sKH2ky7RaYYDq0UsVRTARReqGZH
         +Bpymh+MSgdgodTXG1aoGGFKUXbn2XnZ8t/6g=
Received: by 10.86.80.5 with SMTP id d5mr7656213fgb.11.1213604729922;
        Mon, 16 Jun 2008 01:25:29 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.118.139])
        by mx.google.com with ESMTPS id 3sm11490630fge.3.2008.06.16.01.25.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 16 Jun 2008 01:25:28 -0700 (PDT)
Message-Id: <554675AE-C422-4980-9146-DCDA929E39A7@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-5--925674154
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Custom BooleanQuery
Date: Mon, 16 Jun 2008 10:25:27 +0200
X-Mailer: Apple Mail (2.924)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-5--925674154
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi,

I'm trying to build my own query. I want to combine several TermQuery  
+ 1 PrefixQuery in a BooleanQuery. The Code looks like this:
BooleanQuery bq = new BooleanQuery();

Term t = new Term("field", "");

t.createTerm("foo");
TermQuery tq = new TermQuery(t);
bq.add(tq, Occur.MUST);

t.createTerm("bar");
PrefixQuery pq = new PrefixQuery(t);
bq.add(pq, Occur.MUST);

So bq is my customized BooleanQuery. Searching with this query results  
in 0 hits. But working with QueryParser.parse()
and the parameter "foo AND bar*" results in a high number of hits.  
Looking at the query string shows the same result
for the QueryParser querystring and the customized BooleanQuery  
querystring.
What could be the problem with my customized query?

Sascha


--Apple-Mail-5--925674154--

From java-user-return-34444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 11:52:18 2008
Return-Path: <java-user-return-34444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93492 invoked from network); 16 Jun 2008 11:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 11:52:17 -0000
Received: (qmail 44960 invoked by uid 500); 16 Jun 2008 11:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44919 invoked by uid 500); 16 Jun 2008 11:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44908 invoked by uid 99); 16 Jun 2008 11:52:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 04:52:12 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.112.231.16] (HELO ipx11390.ipxserver.de) (212.112.231.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 11:51:21 +0000
Received: from p57a098e8.dip0.t-ipconnect.de ([87.160.152.232] helo=[192.168.1.21])
	by ipx11390.ipxserver.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.43)
	id 1K8DCH-00053D-Pj
	for java-user@lucene.apache.org; Mon, 16 Jun 2008 13:48:29 +0200
Message-ID: <4856530C.4040006@web.de>
Date: Mon, 16 Jun 2008 13:48:28 +0200
From: Felix Schwarz <felix.schwarz@web.de>
User-Agent: Thunderbird 1.5.0.12 (X11/20080430)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Problems understanding QueryParser + WildcardQueries
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-AuthenticatedUser: felix@schwarz-online.org
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a small problem regarding QueryParser and WildcardQueries.

Basically, I'm indexing documents like this:
doc.add(new Field("title", "_FooBar", Field.Store.YES, Field.Index.TOKENIZED));

Afterwards I expected that this query would return the document above:
QueryParser parser = new QueryParser("title", getAnalyzer());
Query q = parser.parse("_Foo*");

But instead no hit is returned (yes, I'm using StandardAnalyzer for indexing+searching).
If I search for "_FooBar", it works.

Obviously, I did not understand thorougly what Lucene does with my query.

Can anyone shed some light on this?

Thank you very much
fs

PS: Maybe it's just a stupid coding error. The complete test case is available, too:
http://www.felix-schwarz.name/files/misc/2008/UnderscoreSearching.java

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 12:13:47 2008
Return-Path: <java-user-return-34445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4010 invoked from network); 16 Jun 2008 12:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 12:13:46 -0000
Received: (qmail 88209 invoked by uid 500); 16 Jun 2008 12:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88176 invoked by uid 500); 16 Jun 2008 12:13:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88165 invoked by uid 99); 16 Jun 2008 12:13:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 05:13:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 12:12:49 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 60B0A5C574
	for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 05:13:03 -0700 (PDT)
Message-Id: <7B08AE53-8A35-48F8-8262-3CFD4D558808@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5e76f3840806111107s101de6dhf63d72e6ab9f4551@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers
Date: Mon, 16 Jun 2008 08:13:02 -0400
References: <5e76f3840806111107s101de6dhf63d72e6ab9f4551@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Also note, there is the contrib/benchmark source in Lucene that allows  
one to do many of these tests in a "standard" way, such that the  
results are easily reproducible.

Do you actually have a situation where you would ever see 8K threads?   
Or even 4k?  Or was this just for the purposes of the exercise?  I  
would be interested in hearing more about your use case, if you can  
share it.

On Jun 11, 2008, at 2:07 PM, Glen Newton wrote:

> I have extended my evaluation (previous evaluation:
> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html)
> to include as well as an increasing # of threads performing concurrent
> queries, 1,2,4 and 8 IndexReaders.
>
> The results can be found here:
> http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
>
> thanks,
>
> Glen
>
> -- 
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 12:15:10 2008
Return-Path: <java-user-return-34446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5702 invoked from network); 16 Jun 2008 12:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 12:15:10 -0000
Received: (qmail 95295 invoked by uid 500); 16 Jun 2008 12:15:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95261 invoked by uid 500); 16 Jun 2008 12:15:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95250 invoked by uid 99); 16 Jun 2008 12:15:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 05:15:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 12:14:13 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 4F3DC5C574
	for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 05:14:01 -0700 (PDT)
Message-Id: <A40D3FEA-FA38-4B93-B3A8-FF9FA7180FB1@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <17db983d0806150208x58e7fe81u4e6d0c1415010187@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: How to handle plural?
Date: Mon, 16 Jun 2008 08:14:01 -0400
References: <17db983d0806150208x58e7fe81u4e6d0c1415010187@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

What do your documents look like?  Can you share more about the  
problem?  Is there some kind of structure that lets you count this  
information?

-Grant

On Jun 15, 2008, at 5:08 AM, Sengly Heng wrote:

> Hello all,
>
> I am facing a problem when dealing a query such as "Finding all the
> documents that write about at least 5 animals"? How to handle it?
>
> Do you have any idea?
>
> Thank you.
>
> Best regards,
>
> Sengly

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 13:12:37 2008
Return-Path: <java-user-return-34447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39773 invoked from network); 16 Jun 2008 13:12:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 13:12:36 -0000
Received: (qmail 89436 invoked by uid 500); 16 Jun 2008 13:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89407 invoked by uid 500); 16 Jun 2008 13:12:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89396 invoked by uid 99); 16 Jun 2008 13:12:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 06:12:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 13:11:41 +0000
Received: by yw-out-2324.google.com with SMTP id 3so3158888ywj.5
        for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 06:11:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=u5loXcp8VDhaN3l4shop92yjDLf1r8Tjh765CefewBo=;
        b=NXPAOsfFYSkyRygr1+1jyuZMIg6K/fQcWSB8JWziB8/Lv+dH1CTrB62g0y9T3VyBjg
         7dqaaBkCi/fyzos/tD4iI38q0ZDgZftXK3PDmgBg2Hv5OqeOLNa8eqTpcY0uWFdb3esI
         oN08aJgJhC1S9Jvdbsggo/3VWWpKgFGzdx+88=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=US0IB2AgseXMrL2aaQOAtefi13AzgKvo7LnXFhDkyMMHbG7hRVrQhfUujPHzzZ0sMy
         I+ojlNKGGQsRdNmToWz57LQf3Upie13SvrKYq1B4/3V8zp+jqnKc8Or+nkuvIr4S/I6g
         7yK0IUSWdvxjL7Ldg9lID0rjz3sCc+nwaCQIs=
Received: by 10.150.229.16 with SMTP id b16mr10806330ybh.123.1213621918856;
        Mon, 16 Jun 2008 06:11:58 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Mon, 16 Jun 2008 06:11:58 -0700 (PDT)
Message-ID: <359a92830806160611m3dc7528cpfba50dac5e6c8ad1@mail.gmail.com>
Date: Mon, 16 Jun 2008 09:11:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Custom BooleanQuery
In-Reply-To: <554675AE-C422-4980-9146-DCDA929E39A7@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36916_21408163.1213621918873"
References: <554675AE-C422-4980-9146-DCDA929E39A7@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36916_21408163.1213621918873
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, have you tried looking at bq.toString() to see what your query looks
like?

But from your code, you're not assigning your createTerm to anything, so
your
BQ is constructed from two terms on "field" that have no values. You need
something like

bq.add(t.createTerm("foo), Occur.MUST);

Best
Erick

On Mon, Jun 16, 2008 at 4:25 AM, Sascha Fahl <sascha.fahl@googlemail.com>
wrote:

> Hi,
>
> I'm trying to build my own query. I want to combine several TermQuery + 1
> PrefixQuery in a BooleanQuery. The Code looks like this:
> BooleanQuery bq = new BooleanQuery();
>
> Term t = new Term("field", "");
>
> t.createTerm("foo");
> TermQuery tq = new TermQuery(t);
> bq.add(tq, Occur.MUST);
>
> t.createTerm("bar");
> PrefixQuery pq = new PrefixQuery(t);
> bq.add(pq, Occur.MUST);
>
> So bq is my customized BooleanQuery. Searching with this query results in 0
> hits. But working with QueryParser.parse()
> and the parameter "foo AND bar*" results in a high number of hits. Looking
> at the query string shows the same result
> for the QueryParser querystring and the customized BooleanQuery
> querystring.
> What could be the problem with my customized query?
>
> Sascha
>
>

------=_Part_36916_21408163.1213621918873--

From java-user-return-34448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 13:23:47 2008
Return-Path: <java-user-return-34448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44908 invoked from network); 16 Jun 2008 13:23:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 13:23:47 -0000
Received: (qmail 18369 invoked by uid 500); 16 Jun 2008 13:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18346 invoked by uid 500); 16 Jun 2008 13:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18335 invoked by uid 99); 16 Jun 2008 13:23:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 06:23:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 13:22:50 +0000
Received: by yw-out-2324.google.com with SMTP id 3so3161577ywj.5
        for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 06:23:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=XQZNZ7ktJRceu0bwSSawCbjDu+I3uilYKEZ6WadmH7Y=;
        b=CryIgsX9uYTporyTfwf+kx36HcxZakjwx8njwvpWLzVV7Y54pk9NoYneOMrGCOUMBp
         oJOWP19ckDUYsV+ljFtvFUBs9RhrrVQu94fVqHqsH/wuVenGN0wAnCoOd2LJgUa7qokB
         IxJZlt/TRpCLW6eWX7uapxMV0jx+ITXPeV4AE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=IhTr86Hq9N+6/g7u7yU2JSZv7W5r6BcZUk6BdrFzA4sfDMCZInhekFiU0YnZI/yCBU
         sQrDlgF+lEL6Kcgsj3nlHW3iECEn4XZBWToD/VLSK8q0M+kBhylrRrG8g1PAn24nYrIw
         5eJs6v8llbT0j7VJ3iwKvVU3yNzelpFQ0mCg0=
Received: by 10.150.91.17 with SMTP id o17mr10819165ybb.223.1213622582539;
        Mon, 16 Jun 2008 06:23:02 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Mon, 16 Jun 2008 06:23:02 -0700 (PDT)
Message-ID: <359a92830806160623p11fed498qff920724cbeea411@mail.gmail.com>
Date: Mon, 16 Jun 2008 09:23:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problems understanding QueryParser + WildcardQueries
In-Reply-To: <4856530C.4040006@web.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36946_18953595.1213622582542"
References: <4856530C.4040006@web.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36946_18953595.1213622582542
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here's your answer I think....

http://wiki.apache.org/lucene-java/LuceneFAQ#head-133cf44dd3dff3680c96c1316a663e881eeac35a


In a nutshell, wildcard queries are not passed through an analyzer, although
they are
lower-cased by default. So you're indexing foobar but searching on _foobar
(after rewrite)....

But since searching on "_FooBar" *is* passed through the analyzer, it works.

query.toString is your friend <G>......

at least I think....

Best
Erick

On Mon, Jun 16, 2008 at 7:48 AM, Felix Schwarz <felix.schwarz@web.de> wrote:

> Hi,
>
> I have a small problem regarding QueryParser and WildcardQueries.
>
> Basically, I'm indexing documents like this:
> doc.add(new Field("title", "_FooBar", Field.Store.YES,
> Field.Index.TOKENIZED));
>
> Afterwards I expected that this query would return the document above:
> QueryParser parser = new QueryParser("title", getAnalyzer());
> Query q = parser.parse("_Foo*");
>
> But instead no hit is returned (yes, I'm using StandardAnalyzer for
> indexing+searching).
> If I search for "_FooBar", it works.
>
> Obviously, I did not understand thorougly what Lucene does with my query.
>
> Can anyone shed some light on this?
>
> Thank you very much
> fs
>
> PS: Maybe it's just a stupid coding error. The complete test case is
> available, too:
> http://www.felix-schwarz.name/files/misc/2008/UnderscoreSearching.java
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36946_18953595.1213622582542--

From java-user-return-34449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 14:02:12 2008
Return-Path: <java-user-return-34449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67575 invoked from network); 16 Jun 2008 14:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 14:02:12 -0000
Received: (qmail 83897 invoked by uid 500); 16 Jun 2008 14:02:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83862 invoked by uid 500); 16 Jun 2008 14:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83851 invoked by uid 99); 16 Jun 2008 14:02:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 07:02:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 14:01:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K8FH4-0006mt-9S
	for java-user@lucene.apache.org; Mon, 16 Jun 2008 07:01:34 -0700
Message-ID: <17865087.post@talk.nabble.com>
Date: Mon, 16 Jun 2008 07:01:34 -0700 (PDT)
From: JustJoc <joconnor@bond.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Match "best one" from list
In-Reply-To: <Pine.LNX.4.62.0806131523100.28409@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: joconnor@bond.co.uk
References: <17805042.post@talk.nabble.com> <Pine.LNX.4.62.0806131523100.28409@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org



hossman wrote:
> 
> 
> :   BESTOF( "apple"^10, "orange"^9, "pear"^8, "peach"^8, "grapes"^2 )
> : 
> : So ideally in this field we want to find "apple", but would accept one
> of
> : the other pre-defined alternatives as a match. If the document field
> : contains apples it scores higher than if it only contains oranges, but a
> : document with apples AND oranges only has apples taken into
> consideration,
> 
> take a look at DisjunctionMaxQuery.  I'm 90% certain it's exactly what 
> you're talking about.
> 
> -Hoss
> 

Perfect! after a few seemingly unsuccessful tests (all because of my own
stupidity), 
DisjunctionMaxQuery turned out to be exactly what i'm looking for, thank you
very much!

But with great answers come more questions :)

Ideally I want to be able to use the queryparser as the requirement above
will just be 
an element of a larger query (albeit for now the most complex element). The
format of 
the whole query is something which I don't have much control over, hence the
preference 
to keep or somehow extend the existing parser.
The queryparser as is, doesn't seem to support all of the query types, and
it does 
seem that the only way to get extended functionality is to modify the
grammar file 
QueryParser.jj, and (somehow) build a new parser?  Am I right in thinking
this, or is there 
another way to plug new query types into the existing queryparser that I
havent found?
I'd rather not mess with the distribution as is, but if theres no other way
I'll have to roll 
my sleves up and learn JavaCC :D

Thanks again!

JJ
-- 
View this message in context: http://www.nabble.com/Match-%22best-one%22-from-list-tp17805042p17865087.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 18:24:51 2008
Return-Path: <java-user-return-34450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44226 invoked from network); 16 Jun 2008 18:24:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 18:24:51 -0000
Received: (qmail 28356 invoked by uid 500); 16 Jun 2008 18:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28326 invoked by uid 500); 16 Jun 2008 18:24:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28309 invoked by uid 99); 16 Jun 2008 18:24:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 11:24:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sengly.heng@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 18:23:53 +0000
Received: by ug-out-1314.google.com with SMTP id h3so443061ugf.29
        for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 11:24:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=CMgdGmjxTKuZ16eLCVBrmgZKBNQ9q71XO3XjeN5rygE=;
        b=F6uVCxCROsBQVMSxBVKLWcaBI8bYABrBwPu/PD6ZPuFH2W020JMWSmXCUdESEN213y
         aLArb6d7yvN+3d4RcI0cq47z6WUXFz/5wyidzL3PdKyjw1bk3uYKPEfjTkqB5V6kzHUH
         Lb352LCZqZsQSkLhZuFvCSREGLfujs6zB933w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hleIdVa5BfIkBtZ0e8yKP9Mb9cPFXlUKLoAXizTiNzJ5zavHgwC2mGH1Ui8oO2KW1t
         FsAB6I0YruTacaiYOftaMUcolaNRgnKEpFqL2CVUT9LQhbvI37kdaVfYno+ldiYZYPwZ
         F28bZwVHMZ+3wZ6750Z5AMLR/3eCWP56nBYbc=
Received: by 10.66.239.16 with SMTP id m16mr6151243ugh.28.1213640650747;
        Mon, 16 Jun 2008 11:24:10 -0700 (PDT)
Received: by 10.66.236.4 with HTTP; Mon, 16 Jun 2008 11:24:10 -0700 (PDT)
Message-ID: <17db983d0806161124s418853dai6c4650c1da0e8b80@mail.gmail.com>
Date: Tue, 17 Jun 2008 03:24:10 +0900
From: "Sengly Heng" <sengly.heng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to handle plural?
In-Reply-To: <A40D3FEA-FA38-4B93-B3A8-FF9FA7180FB1@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31696_30191366.1213640650719"
References: <17db983d0806150208x58e7fe81u4e6d0c1415010187@mail.gmail.com>
	 <A40D3FEA-FA38-4B93-B3A8-FF9FA7180FB1@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31696_30191366.1213640650719
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Thanks for your interest. Actually, it's a normal unstructured text. In the
text, they might describe the number of animal or enumerate the kind of
animal one by one, etc. To me, it's very difficult to resolve this. I don't
have a clue until now.

All comments are VERY welcome.

Thanks.

Regards,

Sengly

On Mon, Jun 16, 2008 at 9:14 PM, Grant Ingersoll <gsingers@apache.org>
wrote:

> What do your documents look like?  Can you share more about the problem?
>  Is there some kind of structure that lets you count this information?
>
> -Grant
>
>
> On Jun 15, 2008, at 5:08 AM, Sengly Heng wrote:
>
>  Hello all,
>>
>> I am facing a problem when dealing a query such as "Finding all the
>> documents that write about at least 5 animals"? How to handle it?
>>
>> Do you have any idea?
>>
>> Thank you.
>>
>> Best regards,
>>
>> Sengly
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31696_30191366.1213640650719--

From java-user-return-34451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 16 23:39:16 2008
Return-Path: <java-user-return-34451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34208 invoked from network); 16 Jun 2008 23:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jun 2008 23:39:16 -0000
Received: (qmail 79585 invoked by uid 500); 16 Jun 2008 23:39:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79548 invoked by uid 500); 16 Jun 2008 23:39:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79537 invoked by uid 99); 16 Jun 2008 23:39:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 16:39:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 23:38:21 +0000
Received: from [192.168.1.125] (dsl254-071-128.nyc1.dsl.speakeasy.net [216.254.71.128])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m5GNccSt027868
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 18:38:38 -0500
Message-ID: <4856F96F.4020103@vshift.com>
Date: Mon, 16 Jun 2008 19:38:23 -0400
From: Ruslan Sivak <russ@vshift.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Simple Web Search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would like to provide a simple web search of our web site.  We have a 
lot of dynamic content, and instead of searching through the database, I 
would like to use some some sort of crawler to index the site.  Is there 
one available that generates Lucene indexes? 

I looked into Nutch, but it looks a bit complicated to set up.  I'm not 
really interested in running Nutch as web app, maybe only do update 
indexes, and I would like to use Nutch/Lucene jars to do the searching. 

Can someone recommend a crawler?

Russ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 00:27:11 2008
Return-Path: <java-user-return-34452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48981 invoked from network); 17 Jun 2008 00:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 00:27:11 -0000
Received: (qmail 5100 invoked by uid 500); 17 Jun 2008 00:27:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5058 invoked by uid 500); 17 Jun 2008 00:27:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5043 invoked by uid 99); 17 Jun 2008 00:27:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 17:27:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 00:26:17 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 55EB271C6D2; Mon, 16 Jun 2008 17:26:05 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3C89371C6B1
	for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 17:26:05 -0700 (PDT)
Date: Mon, 16 Jun 2008 17:26:05 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Options of Field constructor accepting Reader
In-Reply-To: <001001c8ca72$cb10fdb0$ed92fa50@your0548c161e1>
Message-ID: <Pine.LNX.4.62.0806161724590.21972@radix.cryptio.net>
References: <001001c8ca72$cb10fdb0$ed92fa50@your0548c161e1>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I was wondering why only the Field constructor which accepts a String offers
: Store and Index options? I understand there might be no logic in offering
: them for the TokenStream constructor, but what's wrong in Storing an input
: from a Reader, that 2.3.2 does not allow it?

if you want to store all of the text associated with a Reader, then 
"something" needs to slurp all of that text into a String -- the Lucene 
API makes you be explicit about doing that (via the String constructor)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 04:33:32 2008
Return-Path: <java-user-return-34453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14817 invoked from network); 17 Jun 2008 04:33:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 04:33:31 -0000
Received: (qmail 44254 invoked by uid 500); 17 Jun 2008 04:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44224 invoked by uid 500); 17 Jun 2008 04:33:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44213 invoked by uid 99); 17 Jun 2008 04:33:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 21:33:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 04:32:35 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3667812fkq.5
        for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 21:32:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=EJRUnjbVbPuwdo9YZF2QMjMx34gpBKtElSFiyg9yN1Y=;
        b=shrKF/qa5es+DFuZbCenp0ZXhXQ9se/oDsTylgJdMBy+dMWR1IiuvqDyjKkuMOA8fc
         8weGcOAXsGJPqzRYqorxfFiPKTGZekP41mXr1Gg7D0jMuANXdveWrE829lDrCS6zDqbi
         SiHjeqi1Sy2jZo8GC5p3/hiKX9JQqWYAuNHT0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=We9U5YlDip8VgJQGpU1eipbLeroFSIeopnHd8gSSxYqrfgWb6hJzVQnoV0L/pIxdvV
         OJOvZpgIQ3rjSQJev7AqCbhBFdBWoF0CODyBJ2R2UEydZCPmi1lTaD8pM91i6jUJJiLi
         OOj0F0EdkqTXfQIUJORXLrmPyvfQO04Wd5A+s=
Received: by 10.78.199.8 with SMTP id w8mr2876462huf.106.1213677169434;
        Mon, 16 Jun 2008 21:32:49 -0700 (PDT)
Received: by 10.78.155.18 with HTTP; Mon, 16 Jun 2008 21:32:49 -0700 (PDT)
Message-ID: <6e3ae6310806162132q2bc82b25s5a206c759f61e039@mail.gmail.com>
Date: Mon, 16 Jun 2008 21:32:49 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Simple Web Search
In-Reply-To: <4856F96F.4020103@vshift.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50145_31728944.1213677169401"
References: <4856F96F.4020103@vshift.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50145_31728944.1213677169401
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sounds you should use DBSight. Besides simple SQL crawler, you can adjust
ranking by time(freshness), efficient multi-valued facet search(tagging),
etc.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!


On Mon, Jun 16, 2008 at 4:38 PM, Ruslan Sivak <russ@vshift.com> wrote:

> I would like to provide a simple web search of our web site.  We have a lot
> of dynamic content, and instead of searching through the database, I would
> like to use some some sort of crawler to index the site.  Is there one
> available that generates Lucene indexes?
> I looked into Nutch, but it looks a bit complicated to set up.  I'm not
> really interested in running Nutch as web app, maybe only do update indexes,
> and I would like to use Nutch/Lucene jars to do the searching.
> Can someone recommend a crawler?
>
> Russ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50145_31728944.1213677169401--

From java-user-return-34454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 04:45:44 2008
Return-Path: <java-user-return-34454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19394 invoked from network); 17 Jun 2008 04:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 04:45:44 -0000
Received: (qmail 53319 invoked by uid 500); 17 Jun 2008 04:45:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53294 invoked by uid 500); 17 Jun 2008 04:45:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53283 invoked by uid 99); 17 Jun 2008 04:45:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 21:45:40 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 04:44:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K8T47-0004vC-Hy
	for java-user@lucene.apache.org; Mon, 16 Jun 2008 21:45:07 -0700
Message-ID: <17878039.post@talk.nabble.com>
Date: Mon, 16 Jun 2008 21:45:07 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
In-Reply-To: <4855CB49.3010706@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <17582678.post@talk.nabble.com> <200806011915.38616@danielnaber.de> <17855832.post@talk.nabble.com> <4855CB49.3010706@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks very much for your reply.  I am having problems creating an
IndexReader object for this purpose.  This is the relevant code for my
method:


public List wildSearch(File indexDir) throws Exception {
    	
        List searchResult = new ArrayList();
        Directory fsDir=FSDirectory.getDirectory(indexDir);
        IndexSearcher is = new IndexSearcher(fsDir);
        IndexReader	ir = new IndexReader().open(fsDir);
         
        Analyzer analyser = new StandardAnalyzer();
        Query parser=new WildcardQuery(new Term("LINES", "?rr*"));
        parser=parser.rewrite(ir);
        long start=new Date().getTime();
        Hits hits=is.search(parser);
        long end=new Date().getTime();
        QueryScorer scorer = new QueryScorer(parser);
        Highlighter highlighter = new Highlighter(scorer);

The error I am getting in eclipse is, "cannot instantiate the type
IndexReader".  What am I doing wrong?  
I am able to use the Highlighter class with a boolean search, but not with
the WildCard search, nor with the Fuzzy search.  Any suggestions?

Thanks again to all that reply.
Sincerely;
Fayyaz

markrmiller wrote:
> 
> First step:
> 
> query = query.rewrite()
> 
> Then pass the query to the Highlighter.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Displaying-and-highlighting-results-from-a-Wild-Card-and-Fuzzy-search-using-Lucene-in-Java-tp17582678p17878039.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 05:11:36 2008
Return-Path: <java-user-return-34455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27744 invoked from network); 17 Jun 2008 05:11:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 05:11:36 -0000
Received: (qmail 72316 invoked by uid 500); 17 Jun 2008 05:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72279 invoked by uid 500); 17 Jun 2008 05:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72268 invoked by uid 99); 17 Jun 2008 05:11:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Jun 2008 22:11:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 05:10:42 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 48F5171C4AE; Mon, 16 Jun 2008 22:11:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 41A4171C47E
	for <java-user@lucene.apache.org>; Mon, 16 Jun 2008 22:11:00 -0700 (PDT)
Date: Mon, 16 Jun 2008 22:11:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: lucene wildcard query with stop character
In-Reply-To: <4851828D.7030501@informatics.jax.org>
Message-ID: <Pine.LNX.4.62.0806162203450.30963@radix.cryptio.net>
References: <1bcb7c7f0806121045i77f7f7b0oe689975d1a10c585@mail.gmail.com> 
 <48516140.6030409@informatics.jax.org> <1bcb7c7f0806121246w33b0a44gb6c3ca8d7e7e6c7c@mail.gmail.com>
 <4851828D.7030501@informatics.jax.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Hrm.. can we see a more specific example of the type of data you are trying to
: query against here?

As i understand the question, this is a fairly classic hierarchical 
organization of documents.  Documents Foo>Bar>Baz and Foo>Bar>Bax are both 
children of Document Foo>Bar ... Foo>Barber is their aunt (a sibling 
document of Foo>Bar.

searching for  doc:Foo>Bar>*  will find all of the decendents of document 
Foo>Bar ... but you want to just find the direct children (not hte grand 
children)

the easiest way to tackled something like this is with multiple fields...

   doc_path: Foo>Bar>Baz
   parent:   Foo>Bar

..then you can query for parent:"Foo>Bar" to find all of the direct 
children, or doc:Foo>Bar>* to find all decendents.

i typically use an "ancestors" field, where every ancestor in the "family 
tree" is enumerated as a seperate field value, so that i'm not dependent 
on prefix queries to do "decendents" queries like that....

   doc_path: Foo>Bar>Baz
   parent:   Foo>Bar
   ancestor: Foo>Bar
   ancestor: Foo



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 07:11:59 2008
Return-Path: <java-user-return-34456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63773 invoked from network); 17 Jun 2008 07:11:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 07:11:59 -0000
Received: (qmail 86760 invoked by uid 500); 17 Jun 2008 07:11:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86732 invoked by uid 500); 17 Jun 2008 07:11:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86721 invoked by uid 99); 17 Jun 2008 07:11:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 00:11:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 07:11:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6120765rvb.5
        for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 00:11:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6NvUJSoxw93/vkRmzIbIiiaP2IpjeIcO26RSbRO8qUE=;
        b=N+DSkVp8SB0G6aFRk4fIzU+26uZ0vz+K6R9CHp/zuVgDRLMoAsrLWDcZXR1pk6mHoI
         HXbes8Ui+oCxwPL0eCjf7otWr8TkwonOMmEYxDNxsj1PfvkEBnE7QpY5kZTmV+7+7s3A
         kwtte20ij6EY1Y/BNG/6R4O6VLvXko/PG06Kw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RsRoTfaup1Dis9vmjnqaLds/BAAQZTaUYhfTuGMZxWwV3P7aMSZairmziOcyKYBFzB
         dvdK2teRD9SjTBYLSpdefVc9FQW+JNB72F7AKvTt6l5INKkjnK5z/JdJEdrdA129cFKP
         VoO1HBbLuY2R9n6vx0fGV+B8TGECZc4RsmGbM=
Received: by 10.141.13.16 with SMTP id q16mr4423440rvi.99.1213686678339;
        Tue, 17 Jun 2008 00:11:18 -0700 (PDT)
Received: by 10.141.26.7 with HTTP; Tue, 17 Jun 2008 00:11:18 -0700 (PDT)
Message-ID: <52c3ddca0806170011wfdf78e4ye3b4e38a7c8b357f@mail.gmail.com>
Date: Tue, 17 Jun 2008 09:11:18 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Simple Web Search
In-Reply-To: <6e3ae6310806162132q2bc82b25s5a206c759f61e039@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1731_895350.1213686678325"
References: <4856F96F.4020103@vshift.com>
	 <6e3ae6310806162132q2bc82b25s5a206c759f61e039@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1731_895350.1213686678325
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

If your content is stored in database then you might be also interested in
Compass (I have a very positive experience with this product). Hibernate
search can be other interesting product for you (I don't have any experience
with this product so I am not able to tell you).

Lukas

On Tue, Jun 17, 2008 at 6:32 AM, Chris Lu <chris.lu@gmail.com> wrote:

> Sounds you should use DBSight. Besides simple SQL crawler, you can adjust
> ranking by time(freshness), efficient multi-valued facet search(tagging),
> etc.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
>
> On Mon, Jun 16, 2008 at 4:38 PM, Ruslan Sivak <russ@vshift.com> wrote:
>
> > I would like to provide a simple web search of our web site.  We have a
> lot
> > of dynamic content, and instead of searching through the database, I
> would
> > like to use some some sort of crawler to index the site.  Is there one
> > available that generates Lucene indexes?
> > I looked into Nutch, but it looks a bit complicated to set up.  I'm not
> > really interested in running Nutch as web app, maybe only do update
> indexes,
> > and I would like to use Nutch/Lucene jars to do the searching.
> > Can someone recommend a crawler?
> >
> > Russ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
http://blog.lukas-vlcek.com/

------=_Part_1731_895350.1213686678325--

From java-user-return-34457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 10:00:57 2008
Return-Path: <java-user-return-34457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22319 invoked from network); 17 Jun 2008 10:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 10:00:57 -0000
Received: (qmail 89344 invoked by uid 500); 17 Jun 2008 10:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89319 invoked by uid 500); 17 Jun 2008 10:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89308 invoked by uid 99); 17 Jun 2008 10:00:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 03:00:52 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 10:00:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K8Xz9-0007cR-Rd
	for java-user@lucene.apache.org; Tue, 17 Jun 2008 03:00:19 -0700
Message-ID: <17881706.post@talk.nabble.com>
Date: Tue, 17 Jun 2008 03:00:19 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: HitCollector and sorting
In-Reply-To: <Pine.LNX.4.62.0806121616130.22955@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <17604363.post@talk.nabble.com> <Pine.LNX.4.62.0806121616130.22955@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org



hossman wrote:
> 
> Take a look at TopFieldDocCollector  It's a HitCollector provided out of 
> the box that does sorting.
> 

will it work against a ParallelMultiSearcher? 
-- 
View this message in context: http://www.nabble.com/HitCollector-and-sorting-tp17604363p17881706.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 11:38:07 2008
Return-Path: <java-user-return-34458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49224 invoked from network); 17 Jun 2008 11:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 11:38:07 -0000
Received: (qmail 16717 invoked by uid 500); 17 Jun 2008 11:38:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16688 invoked by uid 500); 17 Jun 2008 11:38:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16676 invoked by uid 99); 17 Jun 2008 11:38:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 04:38:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 11:37:10 +0000
Received: by yw-out-2324.google.com with SMTP id 3so3409911ywj.5
        for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 04:37:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=+/cFq6GC0Sg+b2rDSoRrAU21WlZ6cCGu+6YrvsOZCB8=;
        b=w3hyitGXh0MjrWrkO7V82jH761wg6qikDN17C0/Fh4DL338VOK6Brp5CB0VdPY1ViC
         ML8tLzmb1J0HA8ZxJtAjEb+SqB0Qie36ssfQZ11NhiV5Ha3lA/3DfMpPUqSNa166c0cA
         FBtsOCH/YshBQsWaRvG6QhnJYNskjct4vH1+8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=W8YFsSyjxFtnNQ/QqczuWsvz/xeS8zn6u4v+uJ6ExKfcHCNnuIX1BStmDQb0lIVyTz
         Xh/uZtoqjf35hC0Nxoq+1plG1T4di6hwWaeluiUH2aMa+VVfZyywtzPFXFsK34Ye/3hk
         mFI3Fo2GWFWCAGgjC/U5HlE3/JGn+duixPjzg=
Received: by 10.150.156.20 with SMTP id d20mr8060862ybe.230.1213702643579;
        Tue, 17 Jun 2008 04:37:23 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id s27sm3354604qbs.12.2008.06.17.04.37.21
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 17 Jun 2008 04:37:22 -0700 (PDT)
Message-ID: <4857A1F0.6090606@gmail.com>
Date: Tue, 17 Jun 2008 07:37:20 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
References: <17582678.post@talk.nabble.com> <200806011915.38616@danielnaber.de> <17855832.post@talk.nabble.com> <4855CB49.3010706@gmail.com> <17878039.post@talk.nabble.com>
In-Reply-To: <17878039.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am not seeing the problem. One small thing is that you don't need to 
make another Reader...you can get the one from the IndexSearcher. But I 
dont see why your are getting that error...that is the type of error you 
would get if you were trying to use IndexReaders Protected constructor 
outside the index package...but you are correctly using the static open 
call...
> Thanks very much for your reply.  I am having problems creating an
> IndexReader object for this purpose.  This is the relevant code for my
> method:
>
>
> public List wildSearch(File indexDir) throws Exception {
>     	
>         List searchResult = new ArrayList();
>         Directory fsDir=FSDirectory.getDirectory(indexDir);
>         IndexSearcher is = new IndexSearcher(fsDir);
>         IndexReader	ir = new IndexReader().open(fsDir);
>          
>         Analyzer analyser = new StandardAnalyzer();
>         Query parser=new WildcardQuery(new Term("LINES", "?rr*"));
>         parser=parser.rewrite(ir);
>         long start=new Date().getTime();
>         Hits hits=is.search(parser);
>         long end=new Date().getTime();
>         QueryScorer scorer = new QueryScorer(parser);
>         Highlighter highlighter = new Highlighter(scorer);
>
> The error I am getting in eclipse is, "cannot instantiate the type
> IndexReader".  What am I doing wrong?  
> I am able to use the Highlighter class with a boolean search, but not with
> the WildCard search, nor with the Fuzzy search.  Any suggestions?
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 12:27:26 2008
Return-Path: <java-user-return-34459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76912 invoked from network); 17 Jun 2008 12:27:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 12:27:26 -0000
Received: (qmail 1743 invoked by uid 500); 17 Jun 2008 12:27:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1707 invoked by uid 500); 17 Jun 2008 12:27:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1696 invoked by uid 99); 17 Jun 2008 12:27:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 05:27:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 12:26:30 +0000
Received: from [192.168.0.6] (ool-18b89ba7.dyn.optonline.net [24.184.155.167])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m5HCQkcb026136
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 07:26:47 -0500
Message-ID: <4857AD86.2010408@vshift.com>
Date: Tue, 17 Jun 2008 08:26:46 -0400
From: Ruslan Sivak <russ@vshift.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Simple Web Search
References: <4856F96F.4020103@vshift.com>	 <6e3ae6310806162132q2bc82b25s5a206c759f61e039@mail.gmail.com> <52c3ddca0806170011wfdf78e4ye3b4e38a7c8b357f@mail.gmail.com>
In-Reply-To: <52c3ddca0806170011wfdf78e4ye3b4e38a7c8b357f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The thing is I don't necessarily want to search the db, as I don't know 
what page to send the user to to view the result.  I want to have 
something crawl the site and then be able to know the url of the match.

Russ

Lukas Vlcek wrote:
> Hi,
>
> If your content is stored in database then you might be also interested in
> Compass (I have a very positive experience with this product). Hibernate
> search can be other interesting product for you (I don't have any experience
> with this product so I am not able to tell you).
>
> Lukas
>
> On Tue, Jun 17, 2008 at 6:32 AM, Chris Lu <chris.lu@gmail.com> wrote:
>
>   
>> Sounds you should use DBSight. Besides simple SQL crawler, you can adjust
>> ranking by time(freshness), efficient multi-valued facet search(tagging),
>> etc.
>>
>> --
>> Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes:
>>
>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per request) got
>> 2.6 Million Euro funding!
>>
>>
>> On Mon, Jun 16, 2008 at 4:38 PM, Ruslan Sivak <russ@vshift.com> wrote:
>>
>>     
>>> I would like to provide a simple web search of our web site.  We have a
>>>       
>> lot
>>     
>>> of dynamic content, and instead of searching through the database, I
>>>       
>> would
>>     
>>> like to use some some sort of crawler to index the site.  Is there one
>>> available that generates Lucene indexes?
>>> I looked into Nutch, but it looks a bit complicated to set up.  I'm not
>>> really interested in running Nutch as web app, maybe only do update
>>>       
>> indexes,
>>     
>>> and I would like to use Nutch/Lucene jars to do the searching.
>>> Can someone recommend a crawler?
>>>
>>> Russ
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 12:30:17 2008
Return-Path: <java-user-return-34460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78006 invoked from network); 17 Jun 2008 12:30:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 12:30:16 -0000
Received: (qmail 4778 invoked by uid 500); 17 Jun 2008 12:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4739 invoked by uid 500); 17 Jun 2008 12:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4728 invoked by uid 99); 17 Jun 2008 12:30:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 05:30:12 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 12:29:20 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id A54E4109F34
	for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 05:29:36 -0700 (PDT)
Message-Id: <7737F8EA-1F0D-4A23-BD9B-06EBE7CE5BFD@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <17db983d0806161124s418853dai6c4650c1da0e8b80@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: How to handle plural?
Date: Tue, 17 Jun 2008 08:29:35 -0400
References: <17db983d0806150208x58e7fe81u4e6d0c1415010187@mail.gmail.com> <A40D3FEA-FA38-4B93-B3A8-FF9FA7180FB1@apache.org> <17db983d0806161124s418853dai6c4650c1da0e8b80@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Really could use a sample sentence or two, maybe even a paragraph,  
just to make sure I'm following you here.

However, this sounds like, to me anyway, as a job for some higher  
order processing.  If I understand you right, you are asking for a  
system that can reason about the types of things in the text.  That  
is, you need to be able to identify the animals, as well as relate  
that there is some language suggesting there is one or more of them.   
If that is what you are talking about, the problem goes well beyond  
Lucene.

If, on the other hand, you already have this structure overlaid on top  
of the document, then it sounds like you just need to come up with the  
proper field structure to allow you to write queries like 5 AND Zebra

-Grant

On Jun 16, 2008, at 2:24 PM, Sengly Heng wrote:

> Hello,
>
> Thanks for your interest. Actually, it's a normal unstructured text.  
> In the
> text, they might describe the number of animal or enumerate the kind  
> of
> animal one by one, etc. To me, it's very difficult to resolve this.  
> I don't
> have a clue until now.
>
> All comments are VERY welcome.
>
> Thanks.
>
> Regards,
>
> Sengly
>
> On Mon, Jun 16, 2008 at 9:14 PM, Grant Ingersoll <gsingers@apache.org>
> wrote:
>
>> What do your documents look like?  Can you share more about the  
>> problem?
>> Is there some kind of structure that lets you count this information?
>>
>> -Grant
>>
>>
>> On Jun 15, 2008, at 5:08 AM, Sengly Heng wrote:
>>
>> Hello all,
>>>
>>> I am facing a problem when dealing a query such as "Finding all the
>>> documents that write about at least 5 animals"? How to handle it?
>>>
>>> Do you have any idea?
>>>
>>> Thank you.
>>>
>>> Best regards,
>>>
>>> Sengly
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 18:00:02 2008
Return-Path: <java-user-return-34461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26171 invoked from network); 17 Jun 2008 18:00:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 18:00:02 -0000
Received: (qmail 71468 invoked by uid 500); 17 Jun 2008 17:59:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70529 invoked by uid 500); 17 Jun 2008 17:59:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70518 invoked by uid 99); 17 Jun 2008 17:59:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 10:59:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 17:59:07 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8B07371CFCE; Tue, 17 Jun 2008 10:58:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 79DC771CD67
	for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 10:58:55 -0700 (PDT)
Date: Tue, 17 Jun 2008 10:58:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
In-Reply-To: <4857A1F0.6090606@gmail.com>
Message-ID: <Pine.LNX.4.62.0806171058130.6330@radix.cryptio.net>
References: <17582678.post@talk.nabble.com> <200806011915.38616@danielnaber.de>
 <17855832.post@talk.nabble.com> <4855CB49.3010706@gmail.com>
 <17878039.post@talk.nabble.com> <4857A1F0.6090606@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: why your are getting that error...that is the type of error you would get if
: you were trying to use IndexReaders Protected constructor outside the index
: package...but you are correctly using the static open call...

not quite...

: >         IndexReader	ir = new IndexReader().open(fsDir);

...that should be...

            IndexReader ir = IndexReader.open(fsDir);

..correct?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 18:09:52 2008
Return-Path: <java-user-return-34462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31846 invoked from network); 17 Jun 2008 18:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 18:09:52 -0000
Received: (qmail 89574 invoked by uid 500); 17 Jun 2008 18:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89535 invoked by uid 500); 17 Jun 2008 18:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89524 invoked by uid 99); 17 Jun 2008 18:09:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 11:09:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 18:08:58 +0000
Received: by yw-out-2324.google.com with SMTP id 3so3500462ywj.5
        for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 11:09:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=EGRMbUKJjp60Yc6T3G8eQTHan07z168Z5KTQr5M3suE=;
        b=DHjz3Mbd3g8Mdi8LoqsFfQZVVzpmAYOUqDwWlYVd2T0J8snsr8mYpx7SeH0VuX4DFJ
         Eq3UOh1GVUj7eCyQ6QJYN3xxuhkjRjt9hIwHZZhLUFIw7QoN4ALywUjNDcv1xpbxTSOY
         v0t/4KQFJAQB2Hd9rq35HSd93iLl8uU4aP7zY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=okSBm69fGpGPV2Mzpi5zgPpoiBYPnGqhk5dRgzNquTNv123VNIP1ubHzpZVT+/MMWo
         xgB7u4ETy/o+OECv2iDW/Fa6xoDRRtSkKAIISXDow2oYih1+k8Pn2YwxUU7yPYA6Y/BZ
         j/mw/HyoI26XqOmLgr5vpDAF7HWwLczi/xHzM=
Received: by 10.142.214.5 with SMTP id m5mr3171944wfg.279.1213726155755;
        Tue, 17 Jun 2008 11:09:15 -0700 (PDT)
Received: by 10.142.58.9 with HTTP; Tue, 17 Jun 2008 11:09:15 -0700 (PDT)
Message-ID: <84fb38e30806171109p2c5e0223g9be8a0d968986489@mail.gmail.com>
Date: Tue, 17 Jun 2008 13:09:15 -0500
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Subject: huge tii files
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have a collection of indices with a total of about 7,000,000
documents between them all.  When I attempt to run a search over these
indices, the searching process's memory usage increases to ~1.7GB if I
allow java to use that much memory.  If I don't (my normal memory cap
is 512MB), I get the following exception:

Exception in thread "Thread-2" java.lang.OutOfMemoryError: Java heap space
        at java.util.Arrays.copyOfRange(Arrays.java:3209)
        at java.lang.String.<init>(String.java:216)
        at org.apache.lucene.index.TermBuffer.toTerm(TermBuffer.java:104)
        at org.apache.lucene.index.SegmentTermEnum.term(SegmentTermEnum.java:159)
        at org.apache.lucene.index.TermInfosReader.ensureIndexIsRead(TermInfosReader.java:119)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:157)
        at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:419)
        at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:87)
        at org.apache.lucene.search.Searcher.docFreqs(Searcher.java:178)
        at org.apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:311)
        at org.apache.lucene.search.Searcher.search(Searcher.java:118)
        at org.apache.lucene.search.Searcher.search(Searcher.java:97)
        at SearchThread.run(SearchThread.java:54)

So, it looks like simply attempting to read the .tii files from the
indices is taking huge amounts of RAM.  This is only happening on one
machine; other machines with similar data run just with 256-512MB
memory restrictions, so I'm trying to figure out what could cause the
.tii files to become so bloated.  Is there anything I can do to fix
these indices?  Searching is also very slow on this machine; many
machines with tens of millions of documents can do searches with
subsecond responses, whereas this machine takes many seconds to call
its HitCollector's collect function for the first time.

Any suggestions about how to slim down the .tii files on this machine
(or any workarounds) would be much appreciated.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 18:19:34 2008
Return-Path: <java-user-return-34463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42716 invoked from network); 17 Jun 2008 18:19:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 18:19:33 -0000
Received: (qmail 3916 invoked by uid 500); 17 Jun 2008 18:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3876 invoked by uid 500); 17 Jun 2008 18:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3865 invoked by uid 99); 17 Jun 2008 18:19:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 11:19:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chy1013m1@hotmail.com designates 65.54.246.232 as permitted sender)
Received: from [65.54.246.232] (HELO bay0-omc3-s32.bay0.hotmail.com) (65.54.246.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 18:18:37 +0000
Received: from BAY143-W3 ([65.55.154.38]) by bay0-omc3-s32.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 17 Jun 2008 11:18:54 -0700
Message-ID: <BAY143-W36F03F816D2EDF2AD7F67E2A80@phx.gbl>
X-Originating-IP: [128.100.5.115]
From: Alex <chy1013m1@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: huge tii files
Date: Tue, 17 Jun 2008 18:18:54 +0000
Importance: Normal
In-Reply-To: <84fb38e30806171109p2c5e0223g9be8a0d968986489@mail.gmail.com>
References: <84fb38e30806171109p2c5e0223g9be8a0d968986489@mail.gmail.com>
Content-Type: text/plain; charset="big5"
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
X-OriginalArrivalTime: 17 Jun 2008 18:18:55.0292 (UTC) FILETIME=[9A5BDFC0:01C8D0A6]
X-Virus-Checked: Checked by ClamAV on apache.org


you can invoke IndexReader.setTermInfosIndexDivisor prior to any search to control the fraction of .tii file read into memory.


_________________________________________________________________
ojMMsKOuC X MSN jMuC 
http://toolbar.live.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 18:31:56 2008
Return-Path: <java-user-return-34464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49151 invoked from network); 17 Jun 2008 18:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 18:31:56 -0000
Received: (qmail 26686 invoked by uid 500); 17 Jun 2008 18:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26663 invoked by uid 500); 17 Jun 2008 18:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26646 invoked by uid 99); 17 Jun 2008 18:31:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 11:31:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tsuraan@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 18:30:48 +0000
Received: by yw-out-2324.google.com with SMTP id 3so3506052ywj.5
        for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 11:31:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=zRJ4l4WZ/D61ArYTUXGXivehcguCevsDIBoBKcKKh+Q=;
        b=D3exByJdYCeBIjkv2lm7Y5DWTUT5+Zf0x5QrhtgvhPJRyEjWIyq+oOAnM45FiuNY6G
         PFUHedqYTLnZty4KOD96r1DhFmA+z29iscc3m0JI+EMqW9RE5kJwroklqLe/xGRbJz89
         lkLPdEEIpkiglLKbQ7puOa3WfwzRKzSH2tG6k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=oPeCn8KpLnGS/cjVncRkXYI34N3yAdb0eeNdlVV/kPq1MVjYCbCk3CzZPOLfd535Us
         ZEM7Giysod2eT/svc6apd7RUsx8V3zNY+bUAz83CZVM9Fd0EOllqOkhB1jj2eXxWQGbb
         n5U91Nf0PO7M59iUqyshB+RPySWinh9CMH55w=
Received: by 10.143.37.20 with SMTP id p20mr3218398wfj.236.1213727460885;
        Tue, 17 Jun 2008 11:31:00 -0700 (PDT)
Received: by 10.142.58.9 with HTTP; Tue, 17 Jun 2008 11:31:00 -0700 (PDT)
Message-ID: <84fb38e30806171131o60e4d986mb5c312bf6aa03224@mail.gmail.com>
Date: Tue, 17 Jun 2008 13:31:00 -0500
From: tsuraan <tsuraan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: huge tii files
In-Reply-To: <BAY143-W36F03F816D2EDF2AD7F67E2A80@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=BIG5
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <84fb38e30806171109p2c5e0223g9be8a0d968986489@mail.gmail.com>
	 <BAY143-W36F03F816D2EDF2AD7F67E2A80@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

VGhhdCdzIHJlYWxseSBuaWNlLiAgVGhhbmtzIQoKSSdtIGd1ZXNzaW5nIHRoZSBhbnN3ZXIgaXMg
bm8sIGJ1dCBpcyB0aGVyZSBhbiBlcXVpdmFsZW50IHRvIHRoYXQgZm9yCmx1Y2VuZS0yLjIuMD8g
IFVwZ3JhZGluZyBzaG91bGRuJ3QgYmUgbXVjaCBvZiBhIHByb2JsZW0gYW55aG93ICh3ZSd2ZQpi
ZWVuIGRvaW5nIGl0IHNpbmNlIDEuOSksIGJ1dCBvdXQgb2YgY3VyaW9zaXR5Li4uCgpPbiAxNy8w
Ni8yMDA4LCBBbGV4IDxjaHkxMDEzbTFAaG90bWFpbC5jb20+IHdyb3RlOgo+Cj4geW91IGNhbiBp
bnZva2UgSW5kZXhSZWFkZXIuc2V0VGVybUluZm9zSW5kZXhEaXZpc29yIHByaW9yIHRvIGFueSBz
ZWFyY2ggdG8KPiBjb250cm9sIHRoZSBmcmFjdGlvbiBvZiAudGlpIGZpbGUgcmVhZCBpbnRvIG1l
bW9yeS4KPgo+Cj4gX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KPiDBb6n6t2q0TalNwnPE/br0uPSquqdLtk+kdajjpkMgoVgg
TVNOILdqtE2kdajjpkMKPiBodHRwOi8vdG9vbGJhci5saXZlLmNvbS8KPgo+IC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUu
YXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-34465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 19:38:11 2008
Return-Path: <java-user-return-34465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79067 invoked from network); 17 Jun 2008 19:38:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 19:38:10 -0000
Received: (qmail 25067 invoked by uid 500); 17 Jun 2008 19:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25042 invoked by uid 500); 17 Jun 2008 19:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25029 invoked by uid 99); 17 Jun 2008 19:38:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 12:38:06 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 19:37:16 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="BIG5"
Content-Transfer-Encoding: quoted-printable
Subject: RE: huge tii files
Date: Tue, 17 Jun 2008 15:35:20 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59830@SUEXCL-02.ad.syr.edu>
In-Reply-To: <84fb38e30806171131o60e4d986mb5c312bf6aa03224@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: huge tii files
Thread-Index: AcjQqG/B++d79deSTpy+V63XVsW+BgABrlAg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi tsuraan,

On 06/17/2008 at 2:31 PM, tsuraan wrote:
> I'm guessing the answer is no, but is there an equivalent to that for
> lucene-2.2.0?

Not exactly equivalent, but: from the apidoc for the 2.3.2 version of =
setTermInfosIndexDivisor(int)
<http://lucene.apache.org/java/2_3_2/api/core/org/apache/lucene/index/Ind=
exReader.html#setTermInfosIndexDivisor(int)>:

     For IndexReader implementations that use TermInfosReader to read =
terms,
     this sets the indexDivisor to subsample the number of indexed terms
     loaded into memory. This has the same effect as=20
     IndexWriter.setTermIndexInterval(int) except that setting must be =
done
     at indexing time while this setting can be set per reader. [....]

The apidoc for the 2.2.0 version of =
IndexWriter.setTermIndexInterval(int):

<http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/index/IndexWri=
ter.html#setTermIndexInterval(int)>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 20:03:27 2008
Return-Path: <java-user-return-34466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88467 invoked from network); 17 Jun 2008 20:03:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 20:03:27 -0000
Received: (qmail 67804 invoked by uid 500); 17 Jun 2008 20:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67772 invoked by uid 500); 17 Jun 2008 20:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67761 invoked by uid 99); 17 Jun 2008 20:03:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 13:03:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 20:02:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K8hOB-0004EJ-B6
	for java-user@lucene.apache.org; Tue, 17 Jun 2008 13:02:47 -0700
Message-ID: <17936135.post@talk.nabble.com>
Date: Tue, 17 Jun 2008 13:02:47 -0700 (PDT)
From: Adrian Tarau <adrian.tarau@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene & Transactional semantics
In-Reply-To: <437CF39A.8030503@tera-code.com.ar>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: adrian.tarau@gmail.com
References: <007c01c5ea92$9df48620$0401a8c0@MARIO> <437CF39A.8030503@tera-code.com.ar>
X-Virus-Checked: Checked by ClamAV on apache.org


I had the same problem, so one year ago I implemented transactions on top of
Lucene(I had an idea how to do it, but I also peeked a little bit in Compass
sources). Basically I create a new index every time when a new transaction
is started and this new index is made visible if commit is successful. Of
course, you will still need to refresh your IndexReader(s). I planned also
for a form of two-phase commit but right now it works pretty well doing
everything manually - controlling when to commit/rollback/restore.

How it works :

1. start 2 transactions, one with MySQL one with Lucene(I have an abstract
layer on top of both engines so the API calls are the same), commit first
Lucene. 
2. if Lucene fails, rollback MySQL.
3. if Lucene commit(precommit actually - everything is stored, I have a new
optimized index, ready to be used) is successful, commit MySQL.
4. if MySQL fails, "cancel" Lucene transaction(remove index). There is a
slightly chance to not being able to cancel the Lucene transaction(which is
a new index). This index will hang there on disk/memory until the session is
closed or the application is restarted.
5. if MySQL commit is successful, the newly created Lucene index is
"activated". There is a slightly chance to not being able to "activate"
Lucene transaction(application crashes, disk full so cannot write state on
disk) - so in this case the global transaction is "in-doubt". In this case a
system administrator must act and activate the index(the index is fine, but
not active) - after he fixes any existing problems - or decided to clear the
database(you need eventually a unique global transaction id stored in the
database too, as an additional column). Your data is in the database, the
application works fine but some entries are "invisible" when searching.

So is kind of a two-phase commit. You can read more about two-phase commit
here :
http://www.ibm.com/developerworks/db2/library/techarticle/dm-0611chang/ or
just google about "two-phase commit". 

 



Beto Siless wrote:
> 
> 
> Hi, I'm with the transaction problem too: I have Documents which are 
> represented by a Business Object (persisted in a DB with an ORM), 
> indexed with Lucene and finally stored in the file system. So it's very 
> difficult to maintain the consistency in an error scenario.
> The main problem is that if you implement some ad-hoc transaction with 
> Lucene (working in a RAMDirectory or keeping the commands to apply until 
> the end), you still have to coordinate the lucene transaction with the 
> others. Cause if lucene transaction rollbacks you can abort the db 
> transaction, but if lucene transaction commits you can't do anything if 
> the DB transaction fails with out a 3pc transaction manager.
> Does Anybody have an idea about how to reduce the error time window? 
> Could this problem be solved storing the index in a database?
> Thanks
> Beto
> 
> 
> Marios Skounakis wrote:
>> Hi all,
>> 
>> I am interested in developing a system which will use Lucene to implement
>> the search functionality. A key characteristic of this system is that
>> certain information about the indexed documents will be editable by the
>> user administrators. For instance, the user administrators can manually
>> create "document collections" and assign some of the indexed documents to
>> them. One way to implement document collections would by having documents
>> have a dedicated field for storing the document collection id, and
>> storing the document collection information in a database.
>> 
>> Ideally, such an operation as the above should have transactional
>> semantics, i.e. if a user wants to assign documents x, y and z to
>> collection C, then either all three documents should be assigned to the
>> collection or, in case of error, none of the documents should be assigned
>> to the collection. Also, if the operation were to be followed by an SQL
>> query to update the database with the number of documents assigned to
>> collection C, that should be included in the "transaction" as well.
>> 
>> Is there a straightforward way to do this with Lucene? Or are
>> "transactions" a no-no for a system like Lucene and I should just go
>> ahead without having transactional semantics?
>> 
>> Thanks in advance,
>> 
>> Marios Skounakis
>> 
>> 
>> ------------------------------------------------------------------------
>> 
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.
>> Version: 7.1.362 / Virus Database: 267.13.1/169 - Release Date:
>> 11/15/2005
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene---Transactional-semantics-tp1509155p17936135.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 20:21:39 2008
Return-Path: <java-user-return-34467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93479 invoked from network); 17 Jun 2008 20:21:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 20:21:39 -0000
Received: (qmail 91412 invoked by uid 500); 17 Jun 2008 20:21:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90947 invoked by uid 500); 17 Jun 2008 20:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90936 invoked by uid 99); 17 Jun 2008 20:21:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 13:21:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 20:20:44 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3798083wra.21
        for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 13:21:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=lYyzlNLtD2xp9hWnfb30coATSnDi+oD2H6yo7up+sow=;
        b=mWSmaRvxDOjlPwSEHzbhnehU4FS2v+VYm48XwKtA49Hie+V3mDPaVfrHdRxFiWoWSQ
         p/BONFqLFoObPlBsETOBuFoDDW/YM53Y8kFLlJfuxcxsKmJfVnhEz+FhvDQ0nl809m6a
         IMZFENl68o2/z7iDLfvOir6CnEmoqtydw23yw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=MfY6cGLDhIFB+qOQg8RBP7hcuZN51GPyqINcylbt0b3cZiISzKZwZsHifqnNPqL5Zm
         HCFWE5ZbGaYcVK7aivRPYSG5wUryJCHcPtKDdRksXf1gk+ftbyhxF8uqwWG/Eidh3rl/
         oV7Cnm6uogYDCmyDV4kFUoUTIJ5urkOHAhrlE=
Received: by 10.90.49.8 with SMTP id w8mr9251346agw.72.1213734062557;
        Tue, 17 Jun 2008 13:21:02 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id s35sm876332qbs.13.2008.06.17.13.21.00
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 17 Jun 2008 13:21:01 -0700 (PDT)
Message-ID: <48581CAD.2000803@gmail.com>
Date: Tue, 17 Jun 2008 16:21:01 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
References: <17582678.post@talk.nabble.com> <200806011915.38616@danielnaber.de> <17855832.post@talk.nabble.com> <4855CB49.3010706@gmail.com> <17878039.post@talk.nabble.com> <4857A1F0.6090606@gmail.com> <Pine.LNX.4.62.0806171058130.6330@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0806171058130.6330@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : why your are getting that error...that is the type of error you would get if
> : you were trying to use IndexReaders Protected constructor outside the index
> : package...but you are correctly using the static open call...
>
> not quite...
>
> : >         IndexReader	ir = new IndexReader().open(fsDir);
>
> ...that should be...
>
>             IndexReader ir = IndexReader.open(fsDir);
>
> ..correct?
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   
I am sadly lost without my syntax Highlighting :) Nice catch.

You need to use the static method rather than try and instantiate a new 
IndexReader and then call the static method on the instantiated object.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 21:17:42 2008
Return-Path: <java-user-return-34468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13682 invoked from network); 17 Jun 2008 21:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 21:17:41 -0000
Received: (qmail 90716 invoked by uid 500); 17 Jun 2008 21:17:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90512 invoked by uid 500); 17 Jun 2008 21:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90491 invoked by uid 99); 17 Jun 2008 21:17:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 14:17:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 21:16:47 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8D0BF.74071016"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Snowball Analyzer and apostrophes
Date: Tue, 17 Jun 2008 17:16:47 -0400
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B125B7955@sbsrv.AALabs.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Snowball Analyzer and apostrophes
Thread-Index: AcjQv3O7APCDs8M/RpugYYrbTJkrAA==
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8D0BF.74071016
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

So I'm using Snowball Analyzer on a field for business titles.  The
value "Charlie's Sandwich Shoppe" becomes "charli sandwich shopp".  This
happens partly because the StandardAnalyzer strips off the apostrophe-s
entirely, and then the Snowballer takes off the e.  The problem is when
someone comes in to search for Charlies, without the apostrophe, they
get no match because in THAT case, Snowballer produces "charl" as the
term.  Thoughts on best approach for solving this?  Do I expand it to
become "{charl,charli} sandwich shop"?  Should I strip apostrophe's
before feeding the beast?

=20

Thanks

--Max

=20


------_=_NextPart_001_01C8D0BF.74071016--

From java-user-return-34469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 22:05:07 2008
Return-Path: <java-user-return-34469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29675 invoked from network); 17 Jun 2008 22:05:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 22:05:07 -0000
Received: (qmail 59311 invoked by uid 500); 17 Jun 2008 22:05:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59277 invoked by uid 500); 17 Jun 2008 22:05:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59266 invoked by uid 99); 17 Jun 2008 22:05:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 15:05:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 22:04:11 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B32FA71CC7A; Tue, 17 Jun 2008 15:03:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id AFB7271C61D
	for <java-user@lucene.apache.org>; Tue, 17 Jun 2008 15:03:59 -0700 (PDT)
Date: Tue, 17 Jun 2008 15:03:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: number of hits per document
In-Reply-To: <2d72c9c50806101342t6ebc420frae6c12d840687fcb@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0806171500100.21455@radix.cryptio.net>
References: <484D4A5D.4000507@propylon.com>  <B6E12E6B-2D06-4317-B249-F52D2985F824@apache.org>
  <484E8194.6080903@propylon.com> <2d72c9c50806101342t6ebc420frae6c12d840687fcb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > I could do it that way, but couting the spans per document is specific to
: > SpanQuerys. I would still have to count hits for TermQuerys separately. I
: > was looking for a generic way to count hits for any instance of Query within
: > a document.

the orriginal Query, Weight, and Scorer APIs provided no mechanism for 
doing this -- this is one of the reasons why the SpanQuery API exists, to 
model the types of queries that (can) collect this type of information as 
they score documents.  Non-Span based queries typically have no idea about 
this type of information.  (which typically allows them to be faster)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 17 23:07:50 2008
Return-Path: <java-user-return-34470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43500 invoked from network); 17 Jun 2008 23:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jun 2008 23:07:50 -0000
Received: (qmail 12351 invoked by uid 500); 17 Jun 2008 23:07:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12325 invoked by uid 500); 17 Jun 2008 23:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12314 invoked by uid 99); 17 Jun 2008 23:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 16:07:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Jun 2008 23:06:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K8kGe-000352-CW
	for java-user@lucene.apache.org; Tue, 17 Jun 2008 16:07:12 -0700
Message-ID: <17956561.post@talk.nabble.com>
Date: Tue, 17 Jun 2008 16:07:12 -0700 (PDT)
From: Jdanko <jdanko@volt.com>
To: java-user@lucene.apache.org
Subject: Lucene Developer
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdanko@volt.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am not here to waste anyone's time and don't believe my post violates the
terms of use. If the admins wish to remove my posts I understand. 


I am recruiting for a Search Engineer (Lucene), this position is a direct
hire opportunity for an e-commerce site in the Monterey, Ca area. Below is a
basic overview of the position.

Apache Lucene a must, strong experience with Java, J2EE, SQL, XML, AJAX and
Web 2.0 standards
Lucene optimizing performance with large scale data sets
Proven success in developing and tuning search algorithms, particularly for
large e-commerce sites 
5+ years Java software engineering experience developing consumer facing
Internet solutions
3+ years as a Search engineer/architect, deploying information retrieval
algorithms

If you are interested or know someone who is please contact me.

Thank you in advance,


Justin Danko
Technical Recruiter
 
Volt Workforce Solutions | 2425 Porter St, Ste 11 | Soquel, Ca 95073
jdanko@volt.com | t: 831-479-8658 | f: 831-479-4724

-- 
View this message in context: http://www.nabble.com/Lucene-Developer-tp17956561p17956561.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 13:13:44 2008
Return-Path: <java-user-return-34471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51606 invoked from network); 18 Jun 2008 13:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 13:13:42 -0000
Received: (qmail 30580 invoked by uid 500); 18 Jun 2008 13:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29971 invoked by uid 500); 18 Jun 2008 13:13:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29960 invoked by uid 99); 18 Jun 2008 13:13:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 06:13:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 13:12:47 +0000
Received: by gv-out-0910.google.com with SMTP id u5so14094gve.23
        for <java-user@lucene.apache.org>; Wed, 18 Jun 2008 06:13:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=7IkIPCXKhUal6EqJZbE6lpSkKC2rg5oPGtm1jrM8Jpc=;
        b=T28i0KKYDJf/eQP0FYTCC/Hls9eewz9WUPBx9UZg0TWvG5Rp11zXJAsyyKU/eOoSam
         P/4UDSpdEW81HBpZAdKHIwqhqdJQFN6yXEMAGOuzNXxqrwYsUxrXNkLUitKQSdxGKC8V
         jfROZ+TD77+iP2fpvvt6LKecno4St4GHrm+hk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tjeMehhjd1WSb5B9STdUfVWzs9wGQ7JJls6kVGtWcOYxjoz+Qekh1KDGFnvQVHzVhw
         v0kQPJ1YxZWvzF2QPvT2IEt5OhrD6j61Q8o67gMJU1yxro3+JWPePX82E8PEAD7nTFdn
         iFTfqSu8gJXHANaS0dogbScCPZoN83M3HvcUM=
Received: by 10.125.99.1 with SMTP id b1mr34701mkm.151.1213794782487;
        Wed, 18 Jun 2008 06:13:02 -0700 (PDT)
Received: by 10.125.130.6 with HTTP; Wed, 18 Jun 2008 06:12:57 -0700 (PDT)
Message-ID: <867513fe0806180612o59493c9dpd3ed2f69366748d4@mail.gmail.com>
Date: Wed, 18 Jun 2008 18:42:57 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Copying a part of index and index structure
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17150_16245453.1213794777478"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17150_16245453.1213794777478
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have 2 indexes and I would like to move index for a few 'selected' and
'specified' terms from one of the indexes to the other.
Would some one have an idea on how to do it?
Actually, I am looking at splitting my index on keywords (terms) and would
like a single index be distributed over 2 smaller indexes after it has been
created.
How can I do it?

-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_17150_16245453.1213794777478--

From java-user-return-34472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 13:46:44 2008
Return-Path: <java-user-return-34472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74145 invoked from network); 18 Jun 2008 13:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 13:46:43 -0000
Received: (qmail 99661 invoked by uid 500); 18 Jun 2008 13:46:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99626 invoked by uid 500); 18 Jun 2008 13:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99615 invoked by uid 99); 18 Jun 2008 13:46:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 06:46:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 13:45:49 +0000
Received: by yw-out-2324.google.com with SMTP id 3so129460ywj.5
        for <java-user@lucene.apache.org>; Wed, 18 Jun 2008 06:46:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ibCTMcDh2GSX+Nf8CJU8oaQn2/OiFVSCowgI2idAUgM=;
        b=RM6hfahtQrJUlFot0HJfzWwdX4sszsoQXeL/l6Cyxl5iE6jS4srgQL8aX2LYjVZodl
         EfZUw2hSOnl6arIpJsYzipzO1SC4psGiYi4JkfBNfJ0cebv4V3WU/sN3urCIITLcyUdJ
         Hpew2UNrj86KPz0EzNGZc9DoetjQaBU6jWbuk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=UdOHa+IK+ctvm+snsetCmloDdj7Wh2j7QZx+Gws8mdkIWtqynv0sFVZyh2IKloYp0U
         fikpDh4OcLWnWwKl40GEKFWNmCOpCvCw+DWS9T19K5/Wky83HZcnSA+6oviNKnCDmFBf
         Fc/taJ9i+neHXL1WW7ZL8EFeo+ApvaOnzo4UM=
Received: by 10.151.102.16 with SMTP id e16mr1071616ybm.188.1213796762354;
        Wed, 18 Jun 2008 06:46:02 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Wed, 18 Jun 2008 06:46:02 -0700 (PDT)
Message-ID: <359a92830806180646s4d207440w4bfbd94bb9638d28@mail.gmail.com>
Date: Wed, 18 Jun 2008 09:46:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Snowball Analyzer and apostrophes
In-Reply-To: <E9DD5BE59E84CA4E87AE0E5E6F1B8B125B7955@sbsrv.AALabs.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_355_4629976.1213796762371"
References: <E9DD5BE59E84CA4E87AE0E5E6F1B8B125B7955@sbsrv.AALabs.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_355_4629976.1213796762371
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is tricky....

If you strip the apostrophe, you'd get interesting results from O'brien,
depending
upon how you stripped it (i.e. "closed up" the word to Obrien or substituted
a space, e.g. O brien). We've generally had the fewest surprises by closing
up apostrophes (i.e. Obrien, Charlies).

Unfortunately, anything you do will be wrong in some case. You can either
do something simple like the above, or, say, generate a dictionary that you
use. That is, basically keep a record of all the exceptions to your simple
rule
and transform the input before feeding the analyzer.

Personally, though, I'd close up the apostrophe and feed the analyzer. Don't
forget to do the same for the query.

Best
Erick

You know, my job would be a lot easier if English were regularized. Sign my
petition now!

On Tue, Jun 17, 2008 at 5:16 PM, Max Metral <max@artsalliancelabs.com>
wrote:

> So I'm using Snowball Analyzer on a field for business titles.  The
> value "Charlie's Sandwich Shoppe" becomes "charli sandwich shopp".  This
> happens partly because the StandardAnalyzer strips off the apostrophe-s
> entirely, and then the Snowballer takes off the e.  The problem is when
> someone comes in to search for Charlies, without the apostrophe, they
> get no match because in THAT case, Snowballer produces "charl" as the
> term.  Thoughts on best approach for solving this?  Do I expand it to
> become "{charl,charli} sandwich shop"?  Should I strip apostrophe's
> before feeding the beast?
>
>
>
> Thanks
>
> --Max
>
>
>
>

------=_Part_355_4629976.1213796762371--

From java-user-return-34473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 14:06:05 2008
Return-Path: <java-user-return-34473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87971 invoked from network); 18 Jun 2008 14:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 14:06:05 -0000
Received: (qmail 61988 invoked by uid 500); 18 Jun 2008 14:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61572 invoked by uid 500); 18 Jun 2008 14:05:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61561 invoked by uid 99); 18 Jun 2008 14:05:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 07:05:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 14:05:07 +0000
Received: by yw-out-2324.google.com with SMTP id 3so134230ywj.5
        for <java-user@lucene.apache.org>; Wed, 18 Jun 2008 07:05:25 -0700 (PDT)
Received: by 10.150.49.2 with SMTP id w2mr1176630ybw.27.1213797925230;
        Wed, 18 Jun 2008 07:05:25 -0700 (PDT)
Received: from ?192.168.1.2? ( [84.0.44.86])
        by mx.google.com with ESMTPS id 9sm3686740qbw.14.2008.06.18.07.05.23
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 18 Jun 2008 07:05:24 -0700 (PDT)
Subject: Getting irrelevant results using fuzzy query
From: =?ISO-8859-1?Q?L=E1szl=F3?= Monda <laci@monda.hu>
To: java-user@lucene.apache.org
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-cctZvVgvQtsQrRyegZQe"
Date: Wed, 18 Jun 2008 16:05:29 +0200
Message-Id: <1213797929.14253.64.camel@whisper.dnsalias.net>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.1 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-cctZvVgvQtsQrRyegZQe
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable

Hi List,

I've been redirected from general@lucene.apache.org to here to discuss
my issue.


---------- My original email ----------


I try to provide relevant results for the users of a lyrics site, even
in the case of misspellings by indexing artist and songs with Lucene.

The problem is that Lucene provides irrelevant search results.  For
example searching for "Coldplay" returns "Longplay" as the most relevant
result.

This is how I create individual documents:

Document document =3D new Document();
document.add(new Field("artist", artist, Field.Store.YES,
Field.Index.UN_TOKENIZED));
document.add(new Field("song", song, Field.Store.YES,
Field.Index.UN_TOKENIZED));
document.add(new Field("path", path, Field.Store.YES, Field.Index.NO));
indexWriter.addDocument(document);

And this is how I compose the actual query:

BooleanQuery query =3D new BooleanQuery();
if (artist.length() > 0) {
    FuzzyQuery artist_query =3D new FuzzyQuery(new Term("artist",
artist));
    query.add(artist_query, BooleanClause.Occur.MUST);
}
if (song.length() > 0) {
    FuzzyQuery song_query =3D new FuzzyQuery(new Term("song", song));
    query.add(song_query, BooleanClause.Occur.MUST);
}

Please let me know what's wrong, I'd like to make this work right.

Thanks in advance!


---------- My reply to an answer ----------


On Tue, 2008-06-17 at 20:38 +0200, Daniel Naber wrote:
> On Dienstag, 17. Juni 2008, L=E1szl=F3 Monda wrote:
>=20
> >     FuzzyQuery artist_query =3D new FuzzyQuery(new Term("artist",
> > artist));
>=20
> You should try the FuzzyQuery constructor that takes a minimum
similarity=20
> and a prefix length. The general problem is however, that the degree
of=20
> similarity is only one factor. The other factors are the same as for
other=20
> searches, e.g. the number of occurences of the term in the document
and in=20
> the whole index.
>=20
> You could try to write your own similarity implementation that
disables all=20
> these factors, see
>
http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/Similarity=
.html=20

I understand some essential concepts related to Lucene such as the
Levenshtein distance and tokenization, but I really don't want to go
this deep if it's not necessary.

Since fuzzy searching is based on the Levenshtein distance, the distance
between "coldplay" and "coldplay" is 0 and the distance between
"coldplay" and "downplay" is 3 so how on earth is possible that when
searching for "coldplay", Lucene returns "longplay"?  This shouldn't
happen regardless of the minimum similarity and prefix length factors.

Additional info: Lucene seems to do the right thing when only few
documents are present, but goes crazy when there is about 1.5 million
documents in the index.


---------------------------------------------------------------------


I hope that some of you can help me because I don't have any ideas what
can be wrong here.

Thanks in advance!

--=20
Laci  <http://monda.hu>


--=-cctZvVgvQtsQrRyegZQe
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQBIWRYp5t2qLX5n7ZgRAqchAJ92ua2149amdAVJpn1v6Oc+V4xqeQCeMhJe
NpgXd8lBBzly/eKZHSscEK0=
=S/84
-----END PGP SIGNATURE-----

--=-cctZvVgvQtsQrRyegZQe--


From java-user-return-34474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 14:08:19 2008
Return-Path: <java-user-return-34474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89152 invoked from network); 18 Jun 2008 14:08:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 14:08:18 -0000
Received: (qmail 65235 invoked by uid 500); 18 Jun 2008 14:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65193 invoked by uid 500); 18 Jun 2008 14:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65179 invoked by uid 99); 18 Jun 2008 14:08:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 07:08:14 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 14:07:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K8yJn-0008Q0-0P
	for java-user@lucene.apache.org; Wed, 18 Jun 2008 07:07:23 -0700
Message-ID: <17983491.post@talk.nabble.com>
Date: Wed, 18 Jun 2008 07:07:22 -0700 (PDT)
From: Gaurav Sharma <gaurav.gash@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing unsupported mime types using Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaurav.gash@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I am using Lucene for indexing and searching the documents.
Its working file for supported documents. Now i want to index documents with
unsupported mime types.
Right now i am using LIUS which is built over Lucene for indexing the
documents.

Is there any tool which I can use for indexing the unsupported mime types.
Thanks in advance.
-Gaurav


-----
-Gaurav
-- 
View this message in context: http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p17983491.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 14:17:59 2008
Return-Path: <java-user-return-34475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95570 invoked from network); 18 Jun 2008 14:17:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 14:17:59 -0000
Received: (qmail 89686 invoked by uid 500); 18 Jun 2008 14:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89661 invoked by uid 500); 18 Jun 2008 14:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89650 invoked by uid 99); 18 Jun 2008 14:17:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 07:17:53 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 14:17:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K8yTS-0000IL-2s
	for java-user@lucene.apache.org; Wed, 18 Jun 2008 07:17:22 -0700
Message-ID: <17983687.post@talk.nabble.com>
Date: Wed, 18 Jun 2008 07:17:22 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Search Very Slow
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I need to fetch approximately 225 GB of Index Store records in a web page
.the total time to fetch the record and display to the user takes 10
minutes.is it possible to reduce the time to milliseconds


sample code snippet:


 
        IndexReader[] readArray = 
        { indexIR1, indexIR2, indexIR3, indexIR4, indexIR5, indexIR6,
indexIR7, 
          indexIR8, indexIR9, indexIR10, indexIR11,indexIR12, indexIR13,
indexIR14,indexIR15, indexIR16, indexIR17, indexIR18, indexIR19, indexIR20,
indexIR21, 
          indexIR22, indexIR23, indexIR24, indexIR25,indexIR26, indexIR27,
indexIR28,indexIR29, indexIR29, indexIR30, indexIR31, indexIR32, indexIR33,
indexIR34, 
          indexIR35, indexIR36, indexIR37, indexIR38,indexIR39, indexIR40,
indexIR41,indexIR42, indexIR43, indexIR44, indexIR45, indexIR46, indexIR47,
indexIR48, 
          indexIR49, indexIR50, indexIR51, indexIR52,indexIR53, indexIR54,
indexIR55,indexIR56, indexIR57, indexIR58, indexIR59, indexIR60, indexIR61,
indexIR62, 
          indexIR63, indexIR64, indexIR65, indexIR66,indexIR67, indexIR68,
indexIR69,indexIR69, indexIR70, indexIR71, indexIR72, indexIR73, indexIR74,
indexIR75, 
          indexIR76, indexIR77, indexIR78, indexIR79,indexIR80, indexIR81,
indexIR82,indexIR83, indexIR84, indexIR85, indexIR86, indexIR87, indexIR88,
indexIR89, 
          indexIR90, indexIR91, indexIR92, indexIR93,indexIR94, indexIR95,
indexIR96,indexIR97, indexIR98, indexIR99, indexIR100, indexIR101,
indexIR102, indexIR103, 
          indexIR104, indexIR105, indexIR106, indexIR107,indexIR108,
indexIR109, indexIR110,indexIR111, indexIR112, indexIR113, indexIR114,
indexIR115, indexIR116, indexIR117, 
          indexIR118, indexIR119, indexIR120, indexIR121,indexIR122,
indexIR123, indexIR124,indexIR125, indexIR126, indexIR127, indexIR128,
indexIR129, indexIR130, indexIR131, 
          indexIR132, indexIR133, indexIR134, indexIR135,indexIR136,
indexIR137, indexIR138,indexIR139, indexIR140, indexIR141, indexIR142,
indexIR143, indexIR144, indexIR145, 
          indexIR146, indexIR147, indexIR148, indexIR149,indexIR150,
indexIR151, indexIR152, indexIR153, indexIR154};
          
   
*/
        //merged reader
      //  IndexReader mergedReader = new MultiReader(readArray);
        
      //  IndexSearcher is = new IndexSearcher(mergedReader);
      //  q = search.integerToCompressedString(q);
        BooleanQuery.setMaxClauseCount(100000);
        QueryParser parser = 
            new QueryParser("indexRecords", new StandardAnalyzer());
            
            
        Query query = parser.parse(searchQuery);

Hits hits = is.search(query);

);



for every search i open 154 folders of size 2 GB .







-- 
View this message in context: http://www.nabble.com/Lucene-Search-Very-Slow-tp17983687p17983687.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 14:51:18 2008
Return-Path: <java-user-return-34476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20423 invoked from network); 18 Jun 2008 14:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 14:51:18 -0000
Received: (qmail 83756 invoked by uid 500); 18 Jun 2008 14:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83733 invoked by uid 500); 18 Jun 2008 14:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83720 invoked by uid 99); 18 Jun 2008 14:51:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 07:51:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 14:50:22 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K2N00HJJYKF0O@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 18 Jun 2008 16:50:39 +0200 (MEST)
Date: Wed, 18 Jun 2008 16:50:39 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Lucene Search Very Slow
In-reply-to: <17983687.post@talk.nabble.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1213800639.3574.191.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <17983687.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-06-18 at 07:17 -0700, Sebastin wrote:
> I need to fetch approximately 225 GB of Index Store records in a web page
> .the total time to fetch the record and display to the user takes 10
> minutes.is it possible to reduce the time to milliseconds

Depends on your indexes and your queries, but it shouldn't be
impossible: Keep the searcher open between searches instead of starting
from scratch every time and do warm up searches before the real ones.

How many hits does a normal search return and what do you do with them?

You might also consider the viability of that many indexes, as there is
an upper limit to the number of available file handles. I guess it's
system-specific, but on my machine it's around 1000 and since an active
Lucene index uses more than one file handle, you might well hit the
ceiling not far from your current number of searchers.

All else failing, buy 4 * 64GB quality solid state drives, put them in
RAID 0 and be happy. Lucene still needs to warm up on those, but nowhere
near as much as conventional harddrives, and they are not as reliant on
free RAM for disk-cache.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 18:36:34 2008
Return-Path: <java-user-return-34477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11493 invoked from network); 18 Jun 2008 18:36:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 18:36:33 -0000
Received: (qmail 21354 invoked by uid 500); 18 Jun 2008 18:36:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21315 invoked by uid 500); 18 Jun 2008 18:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21303 invoked by uid 99); 18 Jun 2008 18:36:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 11:36:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.24 as permitted sender)
Received: from [80.67.29.24] (HELO smtprelay10.ispgateway.de) (80.67.29.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 18:35:35 +0000
Received: from [91.37.209.138] (helo=p5b25d18a.dip.t-dialin.net)
	by smtprelay10.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1K92Vb-0003F4-7S
	for java-user@lucene.apache.org; Wed, 18 Jun 2008 20:35:51 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Getting irrelevant results using fuzzy query
Date: Wed, 18 Jun 2008 20:37:58 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <1213797929.14253.64.camel@whisper.dnsalias.net>
In-Reply-To: <1213797929.14253.64.camel@whisper.dnsalias.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200806182037.58911@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Mittwoch, 18. Juni 2008, L=C3=A1szl=C3=B3 Monda wrote:

> Since fuzzy searching is based on the Levenshtein distance, the distance
> between "coldplay" and "coldplay" is 0 and the distance between
> "coldplay" and "downplay" is 3 so how on earth is possible that when
> searching for "coldplay", Lucene returns "longplay"?

You can use query.explain() to get the details of the ranking. In your=20
case, just build a query like: term^100 OR term~, i.e. boost the original=20
(non-fuzzy) term with a large number.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 19:09:35 2008
Return-Path: <java-user-return-34478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32293 invoked from network); 18 Jun 2008 19:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 19:09:35 -0000
Received: (qmail 70515 invoked by uid 500); 18 Jun 2008 19:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70491 invoked by uid 500); 18 Jun 2008 19:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70475 invoked by uid 99); 18 Jun 2008 19:09:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 12:09:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 19:08:38 +0000
Received: from [91.37.209.138] (helo=p5b25d18a.dip.t-dialin.net)
	by smtprelay04.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1K9317-0005RF-Ky
	for java-user@lucene.apache.org; Wed, 18 Jun 2008 21:08:25 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Getting irrelevant results using fuzzy query
Date: Wed, 18 Jun 2008 21:10:33 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <1213797929.14253.64.camel@whisper.dnsalias.net>
In-Reply-To: <1213797929.14253.64.camel@whisper.dnsalias.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200806182110.33829@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Mittwoch, 18. Juni 2008, L=C3=A1szl=C3=B3 Monda wrote:

> Additional info: Lucene seems to do the right thing when only few
> documents are present, but goes crazy when there is about 1.5 million
> documents in the index.

Lucene works well with more documents (currently using it with 9 million).=
=20
but the fuzzy query requires iteration over all terms which makes this=20
query slow. This can be avoid by setting the prefixLength parameter of the=
=20
=46uzzyQuery constructor to 1 or 2. Or maybe you should use an n-gram index=
,=20
see the spellchecker in the contrib area.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 18 20:11:05 2008
Return-Path: <java-user-return-34479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69939 invoked from network); 18 Jun 2008 20:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jun 2008 20:11:05 -0000
Received: (qmail 71252 invoked by uid 500); 18 Jun 2008 20:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71220 invoked by uid 500); 18 Jun 2008 20:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71209 invoked by uid 99); 18 Jun 2008 20:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 13:10:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [87.248.110.147] (HELO n30.bullet.mail.ukl.yahoo.com) (87.248.110.147)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Jun 2008 20:10:06 +0000
Received: from [217.12.4.215] by n30.bullet.mail.ukl.yahoo.com with NNFMP; 18 Jun 2008 20:09:05 -0000
Received: from [87.248.110.116] by t2.bullet.ukl.yahoo.com with NNFMP; 18 Jun 2008 20:09:05 -0000
Received: from [127.0.0.1] by omp221.mail.ukl.yahoo.com with NNFMP; 18 Jun 2008 20:09:05 -0000
X-Yahoo-Newman-Id: 963605.13924.bm@omp221.mail.ukl.yahoo.com
Received: (qmail 78085 invoked from network); 18 Jun 2008 20:09:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=kmjyQg6GO876R03847nysN+TNpkx3sOdW07Wtwg952J7vzEv1ij4tiAqNTRUWJUPGRSh7SXR8FUEz9fppQPRT+Vf7OJGhQepfX7MAlYks2E2tc0M4venFQQpIPvM/qooCnlw9u+rUP7ApV1zMyK5UvTA03gxllWwlgaLPfDUO8k=  ;
Received: from unknown (HELO ?192.168.2.2?) (markharw00d@194.106.34.5 with plain)
  by smtp009.mail.ukl.yahoo.com with SMTP; 18 Jun 2008 20:09:04 -0000
X-YMail-OSG: E309EhkVM1ntJY1Gf3nWKEcfBrQDqD2_C_FXAiquC4jAk64TxA1PpdrQJem0PnijqN9X0f9TVes8PR9ozK6Vy7cHI9hpxuOekVYjp..VNGzC_GVQMzKPsv0pb3HV7iA8Yh613gh2EcSmxC694BbyzPMA
X-Yahoo-Newman-Property: ymail-3
Message-ID: <48596B5E.3070105@yahoo.co.uk>
Date: Wed, 18 Jun 2008 21:09:02 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Getting irrelevant results using fuzzy query
References: <1213797929.14253.64.camel@whisper.dnsalias.net>
In-Reply-To: <1213797929.14253.64.camel@whisper.dnsalias.net>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

This looks like it is related to an issue I first raised here:
    http://markmail.org/message/37ywsemfudpos6uh

At the time I identified 2 issues with FuzzyQuery - that the usual 
"coord" and "idf" scoring factors shouldn't be applied to fuzzy queries.
The coord factor got fixed but idf remains an issue in FuzzyQuery I beleive.
There is a class I added to contrib/queries - "FuzzyLikeThisQuery", 
which can be used as a replacement to FuzzyQuery and fixes the idf 
issue. You can subclass the QueryParser to create an instance of that 
rather than FuzzyQuery if required.

Cheers,
Mark

Lszl Monda wrote:
> Hi List,
>
> I've been redirected from general@lucene.apache.org to here to discuss
> my issue.
>
>
> ---------- My original email ----------
>
>
> I try to provide relevant results for the users of a lyrics site, even
> in the case of misspellings by indexing artist and songs with Lucene.
>
> The problem is that Lucene provides irrelevant search results.  For
> example searching for "Coldplay" returns "Longplay" as the most relevant
> result.
>
> This is how I create individual documents:
>
> Document document = new Document();
> document.add(new Field("artist", artist, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> document.add(new Field("song", song, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> document.add(new Field("path", path, Field.Store.YES, Field.Index.NO));
> indexWriter.addDocument(document);
>
> And this is how I compose the actual query:
>
> BooleanQuery query = new BooleanQuery();
> if (artist.length() > 0) {
>     FuzzyQuery artist_query = new FuzzyQuery(new Term("artist",
> artist));
>     query.add(artist_query, BooleanClause.Occur.MUST);
> }
> if (song.length() > 0) {
>     FuzzyQuery song_query = new FuzzyQuery(new Term("song", song));
>     query.add(song_query, BooleanClause.Occur.MUST);
> }
>
> Please let me know what's wrong, I'd like to make this work right.
>
> Thanks in advance!
>
>
> ---------- My reply to an answer ----------
>
>
> On Tue, 2008-06-17 at 20:38 +0200, Daniel Naber wrote:
>   
>> On Dienstag, 17. Juni 2008, Lszl Monda wrote:
>>
>>     
>>>     FuzzyQuery artist_query = new FuzzyQuery(new Term("artist",
>>> artist));
>>>       
>> You should try the FuzzyQuery constructor that takes a minimum
>>     
> similarity 
>   
>> and a prefix length. The general problem is however, that the degree
>>     
> of 
>   
>> similarity is only one factor. The other factors are the same as for
>>     
> other 
>   
>> searches, e.g. the number of occurences of the term in the document
>>     
> and in 
>   
>> the whole index.
>>
>> You could try to write your own similarity implementation that
>>     
> disables all 
>   
>> these factors, see
>>
>>     
> http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/Similarity.html 
>
> I understand some essential concepts related to Lucene such as the
> Levenshtein distance and tokenization, but I really don't want to go
> this deep if it's not necessary.
>
> Since fuzzy searching is based on the Levenshtein distance, the distance
> between "coldplay" and "coldplay" is 0 and the distance between
> "coldplay" and "downplay" is 3 so how on earth is possible that when
> searching for "coldplay", Lucene returns "longplay"?  This shouldn't
> happen regardless of the minimum similarity and prefix length factors.
>
> Additional info: Lucene seems to do the right thing when only few
> documents are present, but goes crazy when there is about 1.5 million
> documents in the index.
>
>
> ---------------------------------------------------------------------
>
>
> I hope that some of you can help me because I don't have any ideas what
> can be wrong here.
>
> Thanks in advance!
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 00:10:39 2008
Return-Path: <java-user-return-34480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5391 invoked from network); 19 Jun 2008 00:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 00:10:39 -0000
Received: (qmail 26200 invoked by uid 500); 19 Jun 2008 00:10:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26168 invoked by uid 500); 19 Jun 2008 00:10:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26155 invoked by uid 99); 19 Jun 2008 00:10:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 17:10:33 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 00:09:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K97iz-0005pb-KB
	for java-user@lucene.apache.org; Wed, 18 Jun 2008 17:10:01 -0700
Message-ID: <17994732.post@talk.nabble.com>
Date: Wed, 18 Jun 2008 17:10:01 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Displaying and highlighting results from a Wild Card and Fuzzy
 search using Lucene in Java
In-Reply-To: <48581CAD.2000803@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <17582678.post@talk.nabble.com> <200806011915.38616@danielnaber.de> <17855832.post@talk.nabble.com> <4855CB49.3010706@gmail.com> <17878039.post@talk.nabble.com> <4857A1F0.6090606@gmail.com> <Pine.LNX.4.62.0806171058130.6330@radix.cryptio.net> <48581CAD.2000803@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks so much for your responses, I have it figured out:

Query parser=new WildcardQuery(new Term("LINES", "the*"));
         parser=parser.rewrite(IndexReader.open(fsDir));

and I was able to get my results highlighted for both WildCard and Fuzzy
searches.

Thanks for the responses.
Sincerely;
Fayyaz


markrmiller wrote:
> 
> Chris Hostetter wrote:
>> : why your are getting that error...that is the type of error you would
>> get if
>> : you were trying to use IndexReaders Protected constructor outside the
>> index
>> : package...but you are correctly using the static open call...
>>
>> not quite...
>>
>> : >         IndexReader	ir = new IndexReader().open(fsDir);
>>
>> ...that should be...
>>
>>             IndexReader ir = IndexReader.open(fsDir);
>>
>> ..correct?
>>
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>   
> I am sadly lost without my syntax Highlighting :) Nice catch.
> 
> You need to use the static method rather than try and instantiate a new 
> IndexReader and then call the static method on the instantiated object.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Displaying-and-highlighting-results-from-a-Wild-Card-and-Fuzzy-search-using-Lucene-in-Java-tp17582678p17994732.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 03:00:18 2008
Return-Path: <java-user-return-34481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26450 invoked from network); 19 Jun 2008 03:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 03:00:18 -0000
Received: (qmail 62638 invoked by uid 500); 19 Jun 2008 03:00:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62608 invoked by uid 500); 19 Jun 2008 03:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62589 invoked by uid 99); 19 Jun 2008 03:00:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Jun 2008 20:00:14 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 02:59:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9ANA-0002SN-Os
	for java-user@lucene.apache.org; Wed, 18 Jun 2008 19:59:40 -0700
Message-ID: <17996441.post@talk.nabble.com>
Date: Wed, 18 Jun 2008 19:59:40 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Improving search performance with the results returned
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Fellow Java/Lucene developers:

I want to know if there is a way to improve the efficiency of doing a search
using lucene such that when a user does a search, and should there be
hundreds of hits, by paging the results for the user, provide only the best
20 hits first (like google).  If the user then goes to the second page,
Lucene would then conduct a search and return the next best 20 results, and
so on.  Is this possible using Lucene, and if so, how?  

Just wondering.

Thanks to all who respond.
Sincerely;
Fayyaz
-- 
View this message in context: http://www.nabble.com/Improving-search-performance-with-the-results-returned-tp17996441p17996441.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 10:30:13 2008
Return-Path: <java-user-return-34482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23441 invoked from network); 19 Jun 2008 10:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 10:30:12 -0000
Received: (qmail 94260 invoked by uid 500); 19 Jun 2008 10:30:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94235 invoked by uid 500); 19 Jun 2008 10:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94224 invoked by uid 99); 19 Jun 2008 10:30:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 03:30:06 -0700
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 10:29:16 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: indexing unsupported mime types using Lucene
Date: Thu, 19 Jun 2008 06:27:18 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59886@SUEXCL-02.ad.syr.edu>
In-Reply-To: <17983491.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexing unsupported mime types using Lucene
Thread-Index: AcjRTMn2wJC02QwaQg2G8hBcZ+YPRgAqZwKQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Gaurav,

To which mime types are you referring?

I can't think of a tool designed for this, but one thing you might try =
is checking whether the input is compressed/packed, and if so first =
decompressing/unpacking it, and then using the "strings" program =
(available on Linux and Cygwin) to extract string data.

Steve

On 06/18/2008 at 10:07 AM, Gaurav Sharma wrote:
>=20
> Hi, I am using Lucene for indexing and searching the documents. Its
> working file for supported documents. Now i want to index documents =
with
> unsupported mime types. Right now i am using LIUS which is built over
> Lucene for indexing the documents.
>=20
> Is there any tool which I can use for indexing the
> unsupported mime types.
> Thanks in advance.
> -Gaurav
>=20
>=20
> ----- -Gaurav -- View this message in context:
> http://www.nabble.com/indexing-unsupported-mime-types-using-Lu
> cene-tp17983491p17983491.html Sent from the Lucene - Java Users =
mailing
> list archive at Nabble.com.
>=20
>=20
> --------------------------------------------------------------------- =
To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 10:43:49 2008
Return-Path: <java-user-return-34483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26958 invoked from network); 19 Jun 2008 10:43:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 10:43:48 -0000
Received: (qmail 10973 invoked by uid 500); 19 Jun 2008 10:43:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10945 invoked by uid 500); 19 Jun 2008 10:43:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10934 invoked by uid 99); 19 Jun 2008 10:43:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 03:43:44 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 10:42:53 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id D106F21337
	for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 03:42:33 -0700 (PDT)
Message-Id: <FD84F8C5-5841-419F-B128-C907D45B8027@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <17996441.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Improving search performance with the results returned
Date: Thu, 19 Jun 2008 06:42:32 -0400
References: <17996441.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

This is exactly how a score-sorted (the default) search works in  
Lucene.  It attempts to return the most relevant results first.  Have  
a look at the docs and the demo and try it out.

-Grant

On Jun 18, 2008, at 10:59 PM, syedfa wrote:

>
> Dear Fellow Java/Lucene developers:
>
> I want to know if there is a way to improve the efficiency of doing  
> a search
> using lucene such that when a user does a search, and should there be
> hundreds of hits, by paging the results for the user, provide only  
> the best
> 20 hits first (like google).  If the user then goes to the second  
> page,
> Lucene would then conduct a search and return the next best 20  
> results, and
> so on.  Is this possible using Lucene, and if so, how?
>
> Just wondering.
>
> Thanks to all who respond.
> Sincerely;
> Fayyaz
> -- 
> View this message in context: http://www.nabble.com/Improving-search-performance-with-the-results-returned-tp17996441p17996441.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 16:07:12 2008
Return-Path: <java-user-return-34484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8100 invoked from network); 19 Jun 2008 16:07:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 16:07:12 -0000
Received: (qmail 51590 invoked by uid 500); 19 Jun 2008 16:06:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51543 invoked by uid 500); 19 Jun 2008 16:06:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51504 invoked by uid 99); 19 Jun 2008 16:06:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 09:06:55 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [200.53.68.48] (HELO occemailcluster.terra.com.mx) (200.53.68.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 16:06:04 +0000
Received: from [201.151.221.142] (201.151.221.142) by occemailcluster.terra.com.mx (7.2.033.1) (authenticated as gsegura@correobancomer.com)
        id 48458E7100116AAF for java-user@lucene.apache.org; Thu, 19 Jun 2008 11:02:23 -0500
Message-ID: <485A9227.2010400@correobancomer.com>
Date: Thu, 19 Jun 2008 11:06:47 -0600
From: Gerardo Segura <gsegura@correobancomer.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: looking for efficient way to dump index info
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello list,
I need to generate a report with all the terms, the document ids where 
they appear and the score in each document.
My current approach is to get a Term enumeration from the index and 
construct a query for each of them.

But as I am a newbie with the library I wonder if there is a better 
approach.


best regards,
Gerardo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 16:13:50 2008
Return-Path: <java-user-return-34485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12021 invoked from network); 19 Jun 2008 16:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 16:13:50 -0000
Received: (qmail 79315 invoked by uid 500); 19 Jun 2008 16:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79289 invoked by uid 500); 19 Jun 2008 16:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79274 invoked by uid 99); 19 Jun 2008 16:13:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 09:13:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 16:12:45 +0000
Received: by yx-out-2324.google.com with SMTP id 31so124610yxl.5
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 09:13:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=oeQiL/pvEja2l11lrE7ptG+8d6bCp81Ld1vEZXkw/6k=;
        b=Ei9euLAeSi8hjQjOnw6bJF8spV2jeQy+odHtu870NK7Zv4YsaWRn8g7znfuAuyCpJj
         CwW0ow/gM11PHT5pgymZFCEziThB6a1c++CQc3Hbvo6pfG5lsugDddidTrx2QSsiKY4A
         0CPGOnYbNTp2oe2bCVIsUOGlZoajVIiTV4K9I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=njYPx7AQajDJ/0O0PZcZQZOLv/AnZNucxHCj1LrNIl46kmbD/3XAxbRVQUxKu+o2pv
         4tPCB4pF6ZwnnN/Jz1G+YtZtoi3kklzPspBhec5wsyxF7EIPeVRHBCRenYDCELLFgrNE
         IgIWA9HoJarZlteKkbtIQ2SvHL4pCcGM2H6u8=
Received: by 10.115.75.14 with SMTP id c14mr2863497wal.45.1213891982097;
        Thu, 19 Jun 2008 09:13:02 -0700 (PDT)
Received: by 10.114.182.2 with HTTP; Thu, 19 Jun 2008 09:13:02 -0700 (PDT)
Message-ID: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
Date: Thu, 19 Jun 2008 12:13:02 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: RAMDirectory IndexInput and IndexOutput
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7757_3777337.1213891982095"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7757_3777337.1213891982095
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Seeing strange behavior with RAMDirectory.  Is a file designed to supported
IndexOutput being open concurrently with IndexInput?  I open an IndexInput
with IndexOutput open, with data written to the file previously, and the
IndexInput is reporting a filelength of 0, while Directory.fileLength()
reports 110.  Also seeing other strange behavior.

------=_Part_7757_3777337.1213891982095--

From java-user-return-34486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 16:29:20 2008
Return-Path: <java-user-return-34486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20857 invoked from network); 19 Jun 2008 16:29:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 16:29:19 -0000
Received: (qmail 19160 invoked by uid 500); 19 Jun 2008 16:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19132 invoked by uid 500); 19 Jun 2008 16:29:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19121 invoked by uid 99); 19 Jun 2008 16:29:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 09:29:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 16:28:24 +0000
Received: by rn-out-0910.google.com with SMTP id j71so64388rne.4
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 09:28:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=IzoLdDA6FS2Cyq49QpVYYM6tw8T85bfcsGa0BgylzQA=;
        b=m3tqjwcVgA9VJjV5a2Bn5+z31IyqbTokCcnqc71q9+gCc7JJOA67ycbVD+A+4lqzs+
         s1nbOfdPotb7mnB65isS7FWoH5zZVcOZUyQADKVJPNhzsCzHvJfnMovB/d8U187nJvNp
         Vh0POl6CWLrtEisO/UcksGhlBiUto2LUC7C7Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QpERzMiIDzD3LjEi/SM7ODMb6YXITIrZOxOe1/j8OK1N9fH6aZBKVRetuBBVexx4f8
         JIAMq6oy5i9nesZaM01SnXMoRhnsnYTGQQM+6rI4HN+q0yBCWnJoFyiGGNiMTzRax8Hm
         PawJ3hCJ8+CJX2FvSGOXmbvX8IYPzBppQDgrc=
Received: by 10.150.212.17 with SMTP id k17mr3389642ybg.68.1213892915544;
        Thu, 19 Jun 2008 09:28:35 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Thu, 19 Jun 2008 09:28:35 -0700 (PDT)
Message-ID: <359a92830806190928y1b999c36i851fa4d44f16fe0d@mail.gmail.com>
Date: Thu, 19 Jun 2008 12:28:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: looking for efficient way to dump index info
In-Reply-To: <485A9227.2010400@correobancomer.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4289_6648707.1213892915512"
References: <485A9227.2010400@correobancomer.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4289_6648707.1213892915512
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What's the high-level goal here? The reason I ask is that
I'm not sure what *use* these scores are to you. Perhaps
someone will have a better approach if you post what it
is you're trying to accomplish...

Best
Erick


On Thu, Jun 19, 2008 at 1:06 PM, Gerardo Segura <gsegura@correobancomer.com>
wrote:

> Hello list,
> I need to generate a report with all the terms, the document ids where they
> appear and the score in each document.
> My current approach is to get a Term enumeration from the index and
> construct a query for each of them.
>
> But as I am a newbie with the library I wonder if there is a better
> approach.
>
>
> best regards,
> Gerardo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4289_6648707.1213892915512--

From java-user-return-34487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 16:51:24 2008
Return-Path: <java-user-return-34487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35619 invoked from network); 19 Jun 2008 16:51:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 16:51:24 -0000
Received: (qmail 62400 invoked by uid 500); 19 Jun 2008 16:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62377 invoked by uid 500); 19 Jun 2008 16:51:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62363 invoked by uid 99); 19 Jun 2008 16:51:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 09:51:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 16:50:20 +0000
Received: by yx-out-2324.google.com with SMTP id 31so132548yxl.5
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 09:50:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=8jujUcT+lg8WzO4TkgZw8Eg5EoqMhJukuJYr8xg7ctA=;
        b=eQFiFoale1PFu5dH61VD8GtlqKAe7YjTFoOJtAqQb/hSfsR21FRKfLQLaxHGl4j4Ts
         LZCQkcL9SQ5he6w1Z0Ee9sH/d4TuwXCMPJHR/MbCGyoi6zBhKmLKl6mbej/sYh8EM8FO
         N1/OlLxfs/86W2pYRLLx0cs4C4M8VfpBqCwGE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=QQB3WgT415N1uJFJmN2gD1njiLXxXYSz26jGyxty0QYQifACcGNUYkSamKO/dY6glf
         dL+reL2/RfokvIerjxxofP2scPrZgfzgwCWi5UqupCOzZSprqg7LW5Q2iGT2cRyVCler
         6N1DA319zJPXMl2EwdVdGAN1ZXxuIU8pa3pVU=
Received: by 10.115.90.1 with SMTP id s1mr2928858wal.51.1213894236118;
        Thu, 19 Jun 2008 09:50:36 -0700 (PDT)
Received: by 10.115.17.5 with HTTP; Thu, 19 Jun 2008 09:50:36 -0700 (PDT)
Message-ID: <c68e39170806190950y61533b4emf419fd9e1ceadad3@mail.gmail.com>
Date: Thu, 19 Jun 2008 12:50:36 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory IndexInput and IndexOutput
In-Reply-To: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
X-Google-Sender-Auth: 2ac887e78adec4c8
X-Virus-Checked: Checked by ClamAV on apache.org

Did you try calling flush() on the IndexOutput before opening the IndexInput?

-Yonik

On Thu, Jun 19, 2008 at 12:13 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> Seeing strange behavior with RAMDirectory.  Is a file designed to supported
> IndexOutput being open concurrently with IndexInput?  I open an IndexInput
> with IndexOutput open, with data written to the file previously, and the
> IndexInput is reporting a filelength of 0, while Directory.fileLength()
> reports 110.  Also seeing other strange behavior.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 19:00:01 2008
Return-Path: <java-user-return-34488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32831 invoked from network); 19 Jun 2008 19:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 19:00:00 -0000
Received: (qmail 82967 invoked by uid 500); 19 Jun 2008 18:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82849 invoked by uid 500); 19 Jun 2008 18:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82832 invoked by uid 99); 19 Jun 2008 18:59:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 11:59:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 18:59:05 +0000
Received: by yw-out-2324.google.com with SMTP id 3so410569ywj.5
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 11:59:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=hHUJOJtCGSDJ7C1jCbnVosOAh7rBSnu7kMuQpyqGm7k=;
        b=cwbE0QB1gyqA86l0F2wC7Pz2laE1VGdgkn2oYNGHDFNxvK3UxvJs2jniRLZgKljAM5
         By1owZ8ahz6BOZOhSwbbTFXGtYDXHYLV9/J9GQY6jclA+guUvf3rpXhFI1h/EtaYaIID
         Sq/e59KIt6qoNjIxVTG+HP1Z6+aQWh5HLnjEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=SWzktldD2ht5vE4FS3byFtk91PoClTAofjo3Ntjzw/wck6edHb7biFCugdtO7ma9P0
         H6RVvXsn4E9CAjcbS3PAG5J7qmSSEZb2j6JIBP+QBvwb10+jHmHu5dJaLbi1/ICQOR44
         1PdhP76m6VXRfDhkfJEu8NGSBReOKesd/SkCc=
Received: by 10.114.177.1 with SMTP id z1mr3125801wae.226.1213901962554;
        Thu, 19 Jun 2008 11:59:22 -0700 (PDT)
Received: by 10.114.182.2 with HTTP; Thu, 19 Jun 2008 11:59:22 -0700 (PDT)
Message-ID: <85d3c3b60806191159k11f1217m34a930face9e8829@mail.gmail.com>
Date: Thu, 19 Jun 2008 14:59:22 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory IndexInput and IndexOutput
In-Reply-To: <c68e39170806190950y61533b4emf419fd9e1ceadad3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9289_18250142.1213901962571"
References: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
	 <c68e39170806190950y61533b4emf419fd9e1ceadad3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9289_18250142.1213901962571
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes.  Also close.  But then reopen the IndexOutput again later, then open
the IndexInput.  I'm not sure if this is the recomended usage of these
APIs.  It seems everywhere else in the Lucene code base only one is open at
a time.

On Thu, Jun 19, 2008 at 12:50 PM, Yonik Seeley <yonik@apache.org> wrote:

> Did you try calling flush() on the IndexOutput before opening the
> IndexInput?
>
> -Yonik
>
> On Thu, Jun 19, 2008 at 12:13 PM, Jason Rutherglen
> <jason.rutherglen@gmail.com> wrote:
> > Seeing strange behavior with RAMDirectory.  Is a file designed to
> supported
> > IndexOutput being open concurrently with IndexInput?  I open an
> IndexInput
> > with IndexOutput open, with data written to the file previously, and the
> > IndexInput is reporting a filelength of 0, while Directory.fileLength()
> > reports 110.  Also seeing other strange behavior.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9289_18250142.1213901962571--

From java-user-return-34489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 19:11:30 2008
Return-Path: <java-user-return-34489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42622 invoked from network); 19 Jun 2008 19:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 19:11:29 -0000
Received: (qmail 215 invoked by uid 500); 19 Jun 2008 19:11:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99778 invoked by uid 500); 19 Jun 2008 19:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99767 invoked by uid 99); 19 Jun 2008 19:11:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 12:11:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 19:10:35 +0000
Received: by wa-out-1112.google.com with SMTP id l24so650993waf.11
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 12:10:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=A6WhEOyqKAmEAGoYr3wDAp7KO++UY5V12PrS1zf0Juw=;
        b=ILXzgI/qb1wodd4nWa9LVfebDSfzyE0xGbyEGQ4MJtl68seyBM0rVw9BdtxWGahCHg
         lXRPtRwSJgulIgpI0eTQULquXs0lBbBL2QEQ9XoG77OvChyb75HWBqs+YIfI8HoRc5s0
         cVxmYkx6drs05GcwLKw5HH35EA7jCgGrPnluk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FOArlorFATsA1S4VQ8dCgk24EqftLAtHKCg11tW7uk+0E8X5mn8WxI1aPDLUn3gHbD
         IhVZh52pr+lVIoy+UwHmZWw7xnGEzMvTXC/nreMiHpny6dvJ/Kqfv2keDFcJYRhw1OyM
         MzqSirEZP75Ds6gidWCORrfNz6tMPdLLQ159A=
Received: by 10.115.18.1 with SMTP id v1mr3173537wai.81.1213902653936;
        Thu, 19 Jun 2008 12:10:53 -0700 (PDT)
Received: by 10.114.182.2 with HTTP; Thu, 19 Jun 2008 12:10:53 -0700 (PDT)
Message-ID: <85d3c3b60806191210l4c6ac393j9ba07f87fe4c7056@mail.gmail.com>
Date: Thu, 19 Jun 2008 15:10:53 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory IndexInput and IndexOutput
In-Reply-To: <85d3c3b60806191159k11f1217m34a930face9e8829@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9441_20825760.1213902653932"
References: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
	 <c68e39170806190950y61533b4emf419fd9e1ceadad3@mail.gmail.com>
	 <85d3c3b60806191159k11f1217m34a930face9e8829@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9441_20825760.1213902653932
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here's code that reproduces it.

public void testMain() throws IOException {
    RAMDirectory ramDirectory = new RAMDirectory();
    IndexOutput output = ramDirectory.createOutput("test");
    byte[] bytes = "hello world".getBytes("UTF-8");
    output.writeBytes(bytes, bytes.length);
    output.flush();
    System.out.println("fileLength: "+ramDirectory.fileLength("test"));
    output = ramDirectory.createOutput("test");
    IndexInput input = ramDirectory.openInput("test");
    System.out.println("input length: "+input.length());
  }

On Thu, Jun 19, 2008 at 2:59 PM, Jason Rutherglen <
jason.rutherglen@gmail.com> wrote:

> Yes.  Also close.  But then reopen the IndexOutput again later, then open
> the IndexInput.  I'm not sure if this is the recomended usage of these
> APIs.  It seems everywhere else in the Lucene code base only one is open at
> a time.
>
>
> On Thu, Jun 19, 2008 at 12:50 PM, Yonik Seeley <yonik@apache.org> wrote:
>
>> Did you try calling flush() on the IndexOutput before opening the
>> IndexInput?
>>
>> -Yonik
>>
>> On Thu, Jun 19, 2008 at 12:13 PM, Jason Rutherglen
>> <jason.rutherglen@gmail.com> wrote:
>> > Seeing strange behavior with RAMDirectory.  Is a file designed to
>> supported
>> > IndexOutput being open concurrently with IndexInput?  I open an
>> IndexInput
>> > with IndexOutput open, with data written to the file previously, and the
>> > IndexInput is reporting a filelength of 0, while Directory.fileLength()
>> > reports 110.  Also seeing other strange behavior.
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_9441_20825760.1213902653932--

From java-user-return-34490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 19:21:19 2008
Return-Path: <java-user-return-34490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48285 invoked from network); 19 Jun 2008 19:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 19:21:19 -0000
Received: (qmail 16362 invoked by uid 500); 19 Jun 2008 19:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16334 invoked by uid 500); 19 Jun 2008 19:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16323 invoked by uid 99); 19 Jun 2008 19:21:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 12:21:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 19:20:24 +0000
Received: by py-out-1112.google.com with SMTP id z74so402204pyg.9
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 12:20:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=beV1GstVOQaC1smgdqZjRFTT8gRQmReJVBWY7dZLeSU=;
        b=juvzHinQsSKU6iThiOwrJyMpmXPDXq/ep+4ZebiXf42O/G86a8j22+Tfn/zY6PwgRM
         rGBkzKUggu2AY6gMQvvPskQFyeOZcOOUs0vDc0782cC0+OYcJzTYdIPqmuX0jE1k9eKL
         5J8+RHgY8dDbJoO8hOQwIiFgb34nlIDlukyuY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=EFTWczuVFn0G2c8PZtU+82Ls91OpyfPrlPWjVcsYN/1VTu/D/+ESNLChrtqhzKxIVn
         rbkcu4RhooSJ523Iw5htFFl1iQQPeYZAHKEH4+BMThJSgGXW9iI6MxbgCGabiyUptSyb
         YhGXHoRwN0ZRm6hM6NyZh7IdqjrTy+fbgwP2Y=
Received: by 10.114.181.1 with SMTP id d1mr3207393waf.3.1213903242468;
        Thu, 19 Jun 2008 12:20:42 -0700 (PDT)
Received: by 10.115.17.5 with HTTP; Thu, 19 Jun 2008 12:20:42 -0700 (PDT)
Message-ID: <c68e39170806191220u5ebadc98wa8dbcbf058260ff4@mail.gmail.com>
Date: Thu, 19 Jun 2008 15:20:42 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory IndexInput and IndexOutput
In-Reply-To: <85d3c3b60806191210l4c6ac393j9ba07f87fe4c7056@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
	 <c68e39170806190950y61533b4emf419fd9e1ceadad3@mail.gmail.com>
	 <85d3c3b60806191159k11f1217m34a930face9e8829@mail.gmail.com>
	 <85d3c3b60806191210l4c6ac393j9ba07f87fe4c7056@mail.gmail.com>
X-Google-Sender-Auth: ecbe33b4e1cef207
X-Virus-Checked: Checked by ClamAV on apache.org

createOutput() creates a new file, overwriting the old one.
If you open the IndexInput before you call createOutput() for the 2nd
time, you should see the file.

And you definitely shouldn't have more than one IndexOutput open on
the same file (but that's not your problem here).

-Yonik

On Thu, Jun 19, 2008 at 3:10 PM, Jason Rutherglen
<jason.rutherglen@gmail.com> wrote:
> public void testMain() throws IOException {
>    RAMDirectory ramDirectory = new RAMDirectory();
>    IndexOutput output = ramDirectory.createOutput("test");
>    byte[] bytes = "hello world".getBytes("UTF-8");
>    output.writeBytes(bytes, bytes.length);
>    output.flush();
>    System.out.println("fileLength: "+ramDirectory.fileLength("test"));
>    output = ramDirectory.createOutput("test");
>    IndexInput input = ramDirectory.openInput("test");
>    System.out.println("input length: "+input.length());
>  }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 19:33:37 2008
Return-Path: <java-user-return-34491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54276 invoked from network); 19 Jun 2008 19:33:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 19:33:37 -0000
Received: (qmail 35209 invoked by uid 500); 19 Jun 2008 19:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35180 invoked by uid 500); 19 Jun 2008 19:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35159 invoked by uid 99); 19 Jun 2008 19:33:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 12:33:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 19:32:45 +0000
Received: by py-out-1112.google.com with SMTP id z74so406437pyg.9
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 12:33:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Mzymvtc+Pnb9ozWMlckkLDSs0nDQz3L/x0BzzUlxRLg=;
        b=f0qIRniy49SxHIXVDOOYkPEOvxQVQmWi5nOJAatPZx6/QB4e7AgGo4gxAoZd3k1wAN
         nzXzP/Gs4AjdHCDJ4LlL6b6GbvvwDwP8jJVpAE7LxbOGftYcNKkKKmUBeVHBNJHUWunv
         DBUXD+xl3ZiXjedjU4zIikQFceO8l2i0dRJS4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kGKLoF4xarEJmXDwViSASQ8NW6vTcP6J3t6xt39EiALTGM8XrIwXGCaOJL7U9fUJtm
         ZqmoRhZBhKDM5Oaf9aadditGtJ4shrpdeh5WYrrXo+/oINn0YzcMe75o5jHpOgFD3T9s
         nZS8Mf740IW5GCoh7dGplAOqjW7EPJZDVjoFw=
Received: by 10.115.58.18 with SMTP id l18mr3195314wak.177.1213903982771;
        Thu, 19 Jun 2008 12:33:02 -0700 (PDT)
Received: by 10.114.182.2 with HTTP; Thu, 19 Jun 2008 12:33:02 -0700 (PDT)
Message-ID: <85d3c3b60806191233r265ff7b1m512a22a0ce11bf11@mail.gmail.com>
Date: Thu, 19 Jun 2008 15:33:02 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory IndexInput and IndexOutput
In-Reply-To: <c68e39170806191220u5ebadc98wa8dbcbf058260ff4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9645_3701403.1213903982762"
References: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
	 <c68e39170806190950y61533b4emf419fd9e1ceadad3@mail.gmail.com>
	 <85d3c3b60806191159k11f1217m34a930face9e8829@mail.gmail.com>
	 <85d3c3b60806191210l4c6ac393j9ba07f87fe4c7056@mail.gmail.com>
	 <c68e39170806191220u5ebadc98wa8dbcbf058260ff4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9645_3701403.1213903982762
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Looks like it cannot be used for a log system that needs concurrent read
write access to a file.  Back to RandomAccessFile which will have buffering
issues,  any experience with http://reader.imagero.com/uio/

On Thu, Jun 19, 2008 at 3:20 PM, Yonik Seeley <yonik@apache.org> wrote:

> createOutput() creates a new file, overwriting the old one.
> If you open the IndexInput before you call createOutput() for the 2nd
> time, you should see the file.
>
> And you definitely shouldn't have more than one IndexOutput open on
> the same file (but that's not your problem here).
>
> -Yonik
>
> On Thu, Jun 19, 2008 at 3:10 PM, Jason Rutherglen
> <jason.rutherglen@gmail.com> wrote:
> > public void testMain() throws IOException {
> >    RAMDirectory ramDirectory = new RAMDirectory();
> >    IndexOutput output = ramDirectory.createOutput("test");
> >    byte[] bytes = "hello world".getBytes("UTF-8");
> >    output.writeBytes(bytes, bytes.length);
> >    output.flush();
> >    System.out.println("fileLength: "+ramDirectory.fileLength("test"));
> >    output = ramDirectory.createOutput("test");
> >    IndexInput input = ramDirectory.openInput("test");
> >    System.out.println("input length: "+input.length());
> >  }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9645_3701403.1213903982762--

From java-user-return-34492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 20:13:41 2008
Return-Path: <java-user-return-34492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81058 invoked from network); 19 Jun 2008 20:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 20:13:41 -0000
Received: (qmail 91281 invoked by uid 500); 19 Jun 2008 20:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91248 invoked by uid 500); 19 Jun 2008 20:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91237 invoked by uid 99); 19 Jun 2008 20:13:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 13:13:35 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Jun 2008 20:12:44 +0000
Received: (qmail 20252 invoked by uid 60001); 19 Jun 2008 20:13:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=oV+CawB5dTn5EGNLsWw+mt+0+Ckqfd7rqnonnu0wtyvwHQIL10Xj5xR/WMOtnLLIQx7BmSmuKdpXwN5Td1L7mIYAannuEkPq+hq6SXcYTnlQbkelsVkKr8uMPDdXEilg3MxF1l18NK/9wOhsXgr0uxtjXTjsJad/2wXYK6m2zp0=;
Received: from [71.249.227.161] by web50305.mail.re2.yahoo.com via HTTP; Thu, 19 Jun 2008 13:13:00 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Thu, 19 Jun 2008 13:13:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexing unsupported mime types using Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <511684.18565.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Gaurav, have you tried Tika? (sub-project of Apache Lucene)


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Gaurav Sharma <gaurav.gash@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 18, 2008 10:07:22 AM
> Subject: indexing unsupported mime types using Lucene
> 
> 
> Hi,
> I am using Lucene for indexing and searching the documents.
> Its working file for supported documents. Now i want to index documents with
> unsupported mime types.
> Right now i am using LIUS which is built over Lucene for indexing the
> documents.
> 
> Is there any tool which I can use for indexing the unsupported mime types.
> Thanks in advance.
> -Gaurav
> 
> 
> -----
> -Gaurav
> -- 
> View this message in context: 
> http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p17983491.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 20:43:33 2008
Return-Path: <java-user-return-34493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96682 invoked from network); 19 Jun 2008 20:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 20:43:33 -0000
Received: (qmail 29662 invoked by uid 500); 19 Jun 2008 20:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29628 invoked by uid 500); 19 Jun 2008 20:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29617 invoked by uid 99); 19 Jun 2008 20:43:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 13:43:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 20:42:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so7330929rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 13:42:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=DafwY6PYfZ6xYRN8+Kydf33rcx0Eq04Kxo4+uSOuKgo=;
        b=RVu+eEmtruGTygCTzRYGo96N/hXkdxpHBWyADJO6ecrK/mMai2MrgghbXpE/lmQfx6
         /hUhAcepgD5ePlk4XlpvSofuraKdNGIJ+eruaqZYWwJPkHAlvYUkPkp5vM5XaqTtd5bW
         v9wGzm58QohMYlFT00+QLblWPa/jOk3LVQCVU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cbQvjsEOUnuZtu9shbW888pk/lzCIYqhy6ho6lXCRHxBHNmj0AS8topziyyV91xTg/
         /TWXhQVBtDEGTsf/2AzkpEIQjZ49yXQKj8J8qczeO7LbBZ3VHcm7h63b5WeQ4JvDMpsi
         UBHljtGaeg/LtTOoB8qzAHuHjdFnPYYaERhCI=
Received: by 10.114.151.13 with SMTP id y13mr3326802wad.134.1213908174358;
        Thu, 19 Jun 2008 13:42:54 -0700 (PDT)
Received: by 10.114.182.2 with HTTP; Thu, 19 Jun 2008 13:42:54 -0700 (PDT)
Message-ID: <85d3c3b60806191342k62321cai70edf4369b55515a@mail.gmail.com>
Date: Thu, 19 Jun 2008 16:42:54 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory IndexInput and IndexOutput
In-Reply-To: <85d3c3b60806191233r265ff7b1m512a22a0ce11bf11@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10137_1384765.1213908174323"
References: <85d3c3b60806190913p1c1c58eh46963dac3b444e0b@mail.gmail.com>
	 <c68e39170806190950y61533b4emf419fd9e1ceadad3@mail.gmail.com>
	 <85d3c3b60806191159k11f1217m34a930face9e8829@mail.gmail.com>
	 <85d3c3b60806191210l4c6ac393j9ba07f87fe4c7056@mail.gmail.com>
	 <c68e39170806191220u5ebadc98wa8dbcbf058260ff4@mail.gmail.com>
	 <85d3c3b60806191233r265ff7b1m512a22a0ce11bf11@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10137_1384765.1213908174323
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Created a RAMDirectory like directory class that uses
ByteArrayRandomAccessIO from http://reader.imagero.com/uio/ to allow
concurrent random file access.

On Thu, Jun 19, 2008 at 3:33 PM, Jason Rutherglen <
jason.rutherglen@gmail.com> wrote:

> Looks like it cannot be used for a log system that needs concurrent read
> write access to a file.  Back to RandomAccessFile which will have buffering
> issues,  any experience with http://reader.imagero.com/uio/
>
> On Thu, Jun 19, 2008 at 3:20 PM, Yonik Seeley <yonik@apache.org> wrote:
>
>> createOutput() creates a new file, overwriting the old one.
>> If you open the IndexInput before you call createOutput() for the 2nd
>> time, you should see the file.
>>
>> And you definitely shouldn't have more than one IndexOutput open on
>> the same file (but that's not your problem here).
>>
>> -Yonik
>>
>> On Thu, Jun 19, 2008 at 3:10 PM, Jason Rutherglen
>> <jason.rutherglen@gmail.com> wrote:
>> > public void testMain() throws IOException {
>> >    RAMDirectory ramDirectory = new RAMDirectory();
>> >    IndexOutput output = ramDirectory.createOutput("test");
>> >    byte[] bytes = "hello world".getBytes("UTF-8");
>> >    output.writeBytes(bytes, bytes.length);
>> >    output.flush();
>> >    System.out.println("fileLength: "+ramDirectory.fileLength("test"));
>> >    output = ramDirectory.createOutput("test");
>> >    IndexInput input = ramDirectory.openInput("test");
>> >    System.out.println("input length: "+input.length());
>> >  }
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_10137_1384765.1213908174323--

From java-user-return-34494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 19 22:35:13 2008
Return-Path: <java-user-return-34494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58411 invoked from network); 19 Jun 2008 22:35:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jun 2008 22:35:12 -0000
Received: (qmail 76061 invoked by uid 500); 19 Jun 2008 22:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76032 invoked by uid 500); 19 Jun 2008 22:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76021 invoked by uid 99); 19 Jun 2008 22:35:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 15:35:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 22:34:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9Si8-0005On-6C
	for java-user@lucene.apache.org; Thu, 19 Jun 2008 15:34:32 -0700
Message-ID: <18019671.post@talk.nabble.com>
Date: Thu, 19 Jun 2008 15:34:32 -0700 (PDT)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Where to get NGramSpeller.java
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


HI,
i need to download this file which is NGramSpeller.java
more information about this file is here
http://www.marine-geo.org/services/oai/docs/javadoc/org/apache/lucene/spell/NGramSpeller.html

but from where can i get its src code file....
any ideas..plzz
-- 
View this message in context: http://www.nabble.com/Where-to-get-NGramSpeller.java-tp18019671p18019671.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 00:15:49 2008
Return-Path: <java-user-return-34495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8237 invoked from network); 20 Jun 2008 00:15:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 00:15:49 -0000
Received: (qmail 49215 invoked by uid 500); 20 Jun 2008 00:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49173 invoked by uid 500); 20 Jun 2008 00:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49162 invoked by uid 99); 20 Jun 2008 00:15:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 17:15:43 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gupta.geeti@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 00:14:50 +0000
Received: by rv-out-0506.google.com with SMTP id f6so7414718rvb.5
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 17:15:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=U+uwC82SD7gQv4Hqe/JvlOMblwUqH8VX8JIg9sHCN1E=;
        b=rHuNTWIoY26Rwms5ec+vrfvXObNpbDI+BZMiYBlXj1/r0LUKxKxmtY/vfwF/OPh+je
         wVdoZ1w7Ms0kRIohZeZRouYzGIPQAtbxA5IDFRPJfuuHmRfUcZUnyu+/QC05tnfI26P6
         8Ateux47OZVxDNkEHiZW0pNeGO5naUtXvxBE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dS2MH7IeErAwbJ+KmzSYyoul7e9ZcCUV+aJxSH/nQj7golihO8Ix6mmqMV6UxOhr7+
         GzTgxhkO/q1JiQVnMFwW/RnmTweSFjnmmCk0pDPHV3Yeryup+ahg6ScWJ7r+Dzwz3cvW
         M3L88T9Fx6taV+soOOglFJyEEunfyQzAs18Fw=
Received: by 10.140.192.9 with SMTP id p9mr7109206rvf.114.1213920908634;
        Thu, 19 Jun 2008 17:15:08 -0700 (PDT)
Received: by 10.141.123.7 with HTTP; Thu, 19 Jun 2008 17:15:08 -0700 (PDT)
Message-ID: <b8b6c22e0806191715i703b3476h80a0c0099933f633@mail.gmail.com>
Date: Fri, 20 Jun 2008 01:15:08 +0100
From: "Geeti Gupta" <gupta.geeti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Where to get NGramSpeller.java
In-Reply-To: <18019671.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7310_25325863.1213920908627"
References: <18019671.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7310_25325863.1213920908627
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

NGramSpeller: source code from David Spencer (dave@tropo.com)

http://www.fsc.follett.com/destiny/licenseagreement/OpenSource.pdf

On Thu, Jun 19, 2008 at 11:34 PM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> HI,
> i need to download this file which is NGramSpeller.java
> more information about this file is here
>
> http://www.marine-geo.org/services/oai/docs/javadoc/org/apache/lucene/spell/NGramSpeller.html
>
> but from where can i get its src code file....
> any ideas..plzz
> --
> View this message in context:
> http://www.nabble.com/Where-to-get-NGramSpeller.java-tp18019671p18019671.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7310_25325863.1213920908627--

From java-user-return-34496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 00:33:44 2008
Return-Path: <java-user-return-34496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22331 invoked from network); 20 Jun 2008 00:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 00:33:43 -0000
Received: (qmail 60496 invoked by uid 500); 20 Jun 2008 00:33:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60468 invoked by uid 500); 20 Jun 2008 00:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60457 invoked by uid 99); 20 Jun 2008 00:33:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 17:33:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 00:32:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9UYr-0000zx-K3
	for java-user@lucene.apache.org; Thu, 19 Jun 2008 17:33:05 -0700
Message-ID: <18020806.post@talk.nabble.com>
Date: Thu, 19 Jun 2008 17:33:05 -0700 (PDT)
From: Sangrish <sidangrish@gmail.com>
To: java-user@lucene.apache.org
Subject: Arbitrary String to String Similarity Score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sidangrish@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a use case for comparing two given strings (attached to a specific
field)
using Lucene and get the similarity scores.

  I tried but could not find any built-in way to do so. Hence assuming that
Lucene only compares a Query against Indexed documents, I came up with the
following approach:
(Let the 2 strings be, str1 and str2 )

1) Create an IndexWriter using a RAMDirectory (I don't want to store those
strings on the disk)
2) Index str1 and store it 
3) Search str2 in the index. ( shall the indexWriter be closed before you
search on the index? )
4) Get the similarity score & publish it
5) Delete str1 from the index and make the index available for a new
comparison

Any comments & suggestions on making the process optimal

Siddharth

-- 
View this message in context: http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18020806.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 02:12:53 2008
Return-Path: <java-user-return-34497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85735 invoked from network); 20 Jun 2008 02:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 02:12:52 -0000
Received: (qmail 37965 invoked by uid 500); 20 Jun 2008 02:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37935 invoked by uid 500); 20 Jun 2008 02:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37924 invoked by uid 99); 20 Jun 2008 02:12:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 19:12:47 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 02:11:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id A9501751A1
	for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 19:11:43 -0700 (PDT)
Message-Id: <D1D9DDB2-6B8B-4FF6-9133-524BB5294EE8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <18020806.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Arbitrary String to String Similarity Score
Date: Thu, 19 Jun 2008 22:11:42 -0400
References: <18020806.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

You might also have a look at the MemoryIndex.  Question, though, is  
what are you hoping to gain from doing a Query against a single  
String?  Are you doing a FuzzyQuery?  You might look at the  
SecondString project on SourceForge for doing string comparisons.

I guess I am a bit confused by your problem statement.  Perhaps you  
can explain more what you are trying to do at a higher level, as it  
sounds like to me you have str1 and str2, so why do you need to inject  
an index into the middle of it?

-Grant

On Jun 19, 2008, at 8:33 PM, Sangrish wrote:

>
> I have a use case for comparing two given strings (attached to a  
> specific
> field)
> using Lucene and get the similarity scores.
>
>  I tried but could not find any built-in way to do so. Hence  
> assuming that
> Lucene only compares a Query against Indexed documents, I came up  
> with the
> following approach:
> (Let the 2 strings be, str1 and str2 )
>
> 1) Create an IndexWriter using a RAMDirectory (I don't want to store  
> those
> strings on the disk)
> 2) Index str1 and store it
> 3) Search str2 in the index. ( shall the indexWriter be closed  
> before you
> search on the index? )
> 4) Get the similarity score & publish it
> 5) Delete str1 from the index and make the index available for a new
> comparison
>
> Any comments & suggestions on making the process optimal
>
> Siddharth
>
> -- 
> View this message in context: http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18020806.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 02:33:41 2008
Return-Path: <java-user-return-34498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95342 invoked from network); 20 Jun 2008 02:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 02:33:41 -0000
Received: (qmail 55305 invoked by uid 500); 20 Jun 2008 02:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55270 invoked by uid 500); 20 Jun 2008 02:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55253 invoked by uid 99); 20 Jun 2008 02:33:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 19:33:35 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Jun 2008 02:32:43 +0000
Received: (qmail 96158 invoked by uid 60001); 20 Jun 2008 02:32:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=kM4mY2JzcQGwb2Ql9mVqi44iYOugjw6liBrJwokjagKMBV6NMxRayzzQhfDK27CswH5SuaEKwXxkH6ctUL60AkKf6eJl/PFEOgiffApqt46x9jzOg2TWCedpfT+c3HpK0eK0VWv+pGOpZdvUBNsuwy4tMWnDYmJiEDfkDlGLx0k=;
Received: from [72.231.9.236] by web50306.mail.re2.yahoo.com via HTTP; Thu, 19 Jun 2008 19:32:00 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Thu, 19 Jun 2008 19:32:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Where to get NGramSpeller.java
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <922927.94313.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think you really want to get the SpellCheck from the Java Lucene's contrib/spell .  I think this stuff is in nightly builds.  If not, check it out of svn - it just got updated a bit, so it's different than in Lucene 2.3.2.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Geeti Gupta <gupta.geeti@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, June 19, 2008 8:15:08 PM
> Subject: Re: Where to get NGramSpeller.java
> 
> NGramSpeller: source code from David Spencer (dave@tropo.com)
> 
> http://www.fsc.follett.com/destiny/licenseagreement/OpenSource.pdf
> 
> On Thu, Jun 19, 2008 at 11:34 PM, sumittyagi wrote:
> 
> >
> > HI,
> > i need to download this file which is NGramSpeller.java
> > more information about this file is here
> >
> > 
> http://www.marine-geo.org/services/oai/docs/javadoc/org/apache/lucene/spell/NGramSpeller.html
> >
> > but from where can i get its src code file....
> > any ideas..plzz
> > --
> > View this message in context:
> > http://www.nabble.com/Where-to-get-NGramSpeller.java-tp18019671p18019671.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 02:36:31 2008
Return-Path: <java-user-return-34499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97477 invoked from network); 20 Jun 2008 02:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 02:36:31 -0000
Received: (qmail 61316 invoked by uid 500); 20 Jun 2008 02:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61287 invoked by uid 500); 20 Jun 2008 02:36:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61273 invoked by uid 99); 20 Jun 2008 02:36:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 19:36:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Jun 2008 02:35:29 +0000
Received: (qmail 20909 invoked by uid 60001); 20 Jun 2008 02:34:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=gOVksUk56515oWi5PfhZnyQWx9XHaYIXmgyThe+M6/z60+qB8tfvfSAz2mrKJs2vY0JyRKcKRKBDeuLyyZYoMZGjTQd4JLoph4fsGqNsT6hwGFEJFkpNUcKgASBpKlh3qknk8f4CiYkl5xwkqcbTCkS2BUylgxrKrR5JXHDcW3w=;
Received: from [72.231.9.236] by web50311.mail.re2.yahoo.com via HTTP; Thu, 19 Jun 2008 19:34:46 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Thu, 19 Jun 2008 19:34:46 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Copying a part of index and index structure
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <176784.20146.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I don't think there are tools for taking a single index and sharding it.  So you'll have to create a new index and remove what you ened to remove from the old big index.  I could be wrong :)


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, June 18, 2008 9:12:57 AM
> Subject: Copying a part of index and index structure
> 
> I have 2 indexes and I would like to move index for a few 'selected' and
> 'specified' terms from one of the indexes to the other.
> Would some one have an idea on how to do it?
> Actually, I am looking at splitting my index on keywords (terms) and would
> like a single index be distributed over 2 smaller indexes after it has been
> created.
> How can I do it?
> 
> -- 
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 04:20:42 2008
Return-Path: <java-user-return-34500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26033 invoked from network); 20 Jun 2008 04:20:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 04:20:42 -0000
Received: (qmail 45414 invoked by uid 500); 20 Jun 2008 04:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44994 invoked by uid 500); 20 Jun 2008 04:20:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44983 invoked by uid 99); 20 Jun 2008 04:20:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 21:20:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 04:19:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9Y6U-0008UG-VE
	for java-user@lucene.apache.org; Thu, 19 Jun 2008 21:20:02 -0700
Message-ID: <18022691.post@talk.nabble.com>
Date: Thu, 19 Jun 2008 21:20:02 -0700 (PDT)
From: Sangrish <sidangrish@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Arbitrary String to String Similarity Score
In-Reply-To: <D1D9DDB2-6B8B-4FF6-9133-524BB5294EE8@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sidangrish@gmail.com
References: <18020806.post@talk.nabble.com> <D1D9DDB2-6B8B-4FF6-9133-524BB5294EE8@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Given 2 text documents I want to quantitatively find, how similar they are,
with respect to each other. Say, I want to find Cosine Similarity score
between any two given documents. I am trying to use Lucene for it (is it
good for this purpose?)

This use case is different from querying against a set of documents

I am not sure if Lucene provides a direct API to evaluate this score.

Siddharth





Grant Ingersoll-6 wrote:
> 
> You might also have a look at the MemoryIndex.  Question, though, is  
> what are you hoping to gain from doing a Query against a single  
> String?  Are you doing a FuzzyQuery?  You might look at the  
> SecondString project on SourceForge for doing string comparisons.
> 
> I guess I am a bit confused by your problem statement.  Perhaps you  
> can explain more what you are trying to do at a higher level, as it  
> sounds like to me you have str1 and str2, so why do you need to inject  
> an index into the middle of it?
> 
> -Grant
> 
> On Jun 19, 2008, at 8:33 PM, Sangrish wrote:
> 
>>
>> I have a use case for comparing two given strings (attached to a  
>> specific
>> field)
>> using Lucene and get the similarity scores.
>>
>>  I tried but could not find any built-in way to do so. Hence  
>> assuming that
>> Lucene only compares a Query against Indexed documents, I came up  
>> with the
>> following approach:
>> (Let the 2 strings be, str1 and str2 )
>>
>> 1) Create an IndexWriter using a RAMDirectory (I don't want to store  
>> those
>> strings on the disk)
>> 2) Index str1 and store it
>> 3) Search str2 in the index. ( shall the indexWriter be closed  
>> before you
>> search on the index? )
>> 4) Get the similarity score & publish it
>> 5) Delete str1 from the index and make the index available for a new
>> comparison
>>
>> Any comments & suggestions on making the process optimal
>>
>> Siddharth
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18020806.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18022691.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 04:52:43 2008
Return-Path: <java-user-return-34501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40741 invoked from network); 20 Jun 2008 04:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 04:52:43 -0000
Received: (qmail 12538 invoked by uid 500); 20 Jun 2008 04:52:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12501 invoked by uid 500); 20 Jun 2008 04:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12490 invoked by uid 99); 20 Jun 2008 04:52:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 21:52:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 04:51:46 +0000
Received: by fg-out-1718.google.com with SMTP id l27so643839fgb.27
        for <java-user@lucene.apache.org>; Thu, 19 Jun 2008 21:52:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=trvdp+cCRotHOQyRnesy75BZch0PPZw2OBN44GgmYas=;
        b=IixFK+aFWxumTLHSNIDIxWVVm93neIhukQ5vrwc7IwLbUmtaBGYkmtj598t8ryZEjr
         YJB/GU0dG0JDilETrvCRVOe71A9aih1azD+zt0Bit82n8CSOnA+D9qIZuTtZP2RgvsMX
         Bt2EWzXmkx/D8STlvJOdvO1t9b8Q+y2UuVVO0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vEkE3X5nWTGbXqHuh5XdTYgFAm3nA9K3K/lhjQcqwyqAD7GfYnOAsSdZ/78IrRtrN2
         XHYd7BgVMFeItdBYZhFevIGcuYP1NKp4caErxjCbtmMHHUKcbnoozuds1Xk/zpE84UYJ
         XrvpsJQ6Gj+OtwIPjl5mfVuLEs4+aYG+RYKS4=
Received: by 10.125.90.8 with SMTP id s8mr224641mkl.73.1213937523458;
        Thu, 19 Jun 2008 21:52:03 -0700 (PDT)
Received: by 10.125.130.6 with HTTP; Thu, 19 Jun 2008 21:52:03 -0700 (PDT)
Message-ID: <867513fe0806192152m1be83df1h14a5b6849de2b363@mail.gmail.com>
Date: Fri, 20 Jun 2008 10:22:03 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Copying a part of index and index structure
In-Reply-To: <176784.20146.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5404_20402110.1213937523459"
References: <176784.20146.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5404_20402110.1213937523459
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Otis,

I guess lucene API would only help me remove documents from an Index and not
'terms'. I need to remove terms from the index for all documents. any clue
as to how to get it done? I'm currently analyzing the internal index
structure.  really need to get it done and if it works out I guess we'd be
closer to having a kinda distributed lucene index.

--
Anshum

On Fri, Jun 20, 2008 at 8:04 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi,
>
> I don't think there are tools for taking a single index and sharding it.
>  So you'll have to create a new index and remove what you ened to remove
> from the old big index.  I could be wrong :)
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
> > From: Anshum <anshumg@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, June 18, 2008 9:12:57 AM
> > Subject: Copying a part of index and index structure
> >
> > I have 2 indexes and I would like to move index for a few 'selected' and
> > 'specified' terms from one of the indexes to the other.
> > Would some one have an idea on how to do it?
> > Actually, I am looking at splitting my index on keywords (terms) and
> would
> > like a single index be distributed over 2 smaller indexes after it has
> been
> > created.
> > How can I do it?
> >
> > --
> > --
> > The facts expressed here belong to everybody, the opinions to me.
> > The distinction is yours to draw............
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_5404_20402110.1213937523459--

From java-user-return-34502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 05:56:55 2008
Return-Path: <java-user-return-34502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62784 invoked from network); 20 Jun 2008 05:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 05:56:55 -0000
Received: (qmail 74263 invoked by uid 500); 20 Jun 2008 05:56:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74227 invoked by uid 500); 20 Jun 2008 05:56:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74216 invoked by uid 99); 20 Jun 2008 05:56:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 22:56:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Jun 2008 05:55:59 +0000
Received: (qmail 14389 invoked by uid 60001); 20 Jun 2008 05:56:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ogrOHtBC7YtYIRz8nqWqW4WsxbF0vo/b8qzTRu6f5olzry7B8YCTRkcNdcYABSXETmP8jVBy0kz+ZgPgTmGKCndPpxYjZ3J/lreZDNA7tBkr7TiSRqYlfGV2/LeckAAo6gY0LLttO5TjNkIXMq11f47D+i54C4x9ApmsSWZMg80=;
Received: from [72.231.9.236] by web50310.mail.re2.yahoo.com via HTTP; Thu, 19 Jun 2008 22:56:16 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Thu, 19 Jun 2008 22:56:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Copying a part of index and index structure
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <295595.14316.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Not doable with Lucene as far as I know.  I'm not even certain you would want to split by term.  What would that do TF IDF in your distributed search?  What's wrong with splitting t the doc level?  There are about half a dozen distributed (Lucene) search solutions floating around, why not reuse them?


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 20, 2008 12:52:03 AM
> Subject: Re: Copying a part of index and index structure
> 
> Hey Otis,
> 
> I guess lucene API would only help me remove documents from an Index and not
> 'terms'. I need to remove terms from the index for all documents. any clue
> as to how to get it done? I'm currently analyzing the internal index
> structure.  really need to get it done and if it works out I guess we'd be
> closer to having a kinda distributed lucene index.
> 
> --
> Anshum
> 
> On Fri, Jun 20, 2008 at 8:04 AM, Otis Gospodnetic <
> otis_gospodnetic@yahoo.com> wrote:
> 
> > Hi,
> >
> > I don't think there are tools for taking a single index and sharding it.
> >  So you'll have to create a new index and remove what you ened to remove
> > from the old big index.  I could be wrong :)
> >
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> > ----- Original Message ----
> > > From: Anshum 
> > > To: java-user@lucene.apache.org
> > > Sent: Wednesday, June 18, 2008 9:12:57 AM
> > > Subject: Copying a part of index and index structure
> > >
> > > I have 2 indexes and I would like to move index for a few 'selected' and
> > > 'specified' terms from one of the indexes to the other.
> > > Would some one have an idea on how to do it?
> > > Actually, I am looking at splitting my index on keywords (terms) and
> > would
> > > like a single index be distributed over 2 smaller indexes after it has
> > been
> > > created.
> > > How can I do it?
> > >
> > > --
> > > --
> > > The facts expressed here belong to everybody, the opinions to me.
> > > The distinction is yours to draw............
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> -- 
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 05:59:03 2008
Return-Path: <java-user-return-34503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63159 invoked from network); 20 Jun 2008 05:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 05:59:03 -0000
Received: (qmail 78123 invoked by uid 500); 20 Jun 2008 05:58:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78092 invoked by uid 500); 20 Jun 2008 05:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78077 invoked by uid 99); 20 Jun 2008 05:58:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 22:58:58 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Jun 2008 05:58:06 +0000
Received: (qmail 69634 invoked by uid 60001); 20 Jun 2008 05:57:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=wzMPGo0z8iI92vhN3/0OZYvEDldqRr+I8LWmf8Lq4KPW2gPP1Ya7eHGQ0tvayEUwS2NGXm9GHJj7jzyxgBo8OkA6989ONdaCXvxD4MauZ0A+tz3XRFKuaHQNJ7dHcOov9GH38H2H6knP35xg13A5PzwV17qEJ/lwaj8VTmmsvfk=;
Received: from [72.231.9.236] by web50311.mail.re2.yahoo.com via HTTP; Thu, 19 Jun 2008 22:57:24 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Thu, 19 Jun 2008 22:57:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Arbitrary String to String Similarity Score
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <400359.69594.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Have a look at MoreLikeThis:

[otis@localhost trunk]$ ff \*MoreLikeThis\*.java
./contrib/queries/src/java/org/apache/lucene/search/similar/MoreLikeThisQuery.java
./contrib/queries/src/java/org/apache/lucene/search/similar/MoreLikeThis.java


I think that or something a lot like it is what you are after.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Sangrish <sidangrish@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 20, 2008 12:20:02 AM
> Subject: Re: Arbitrary String to String Similarity Score
> 
> 
> Given 2 text documents I want to quantitatively find, how similar they are,
> with respect to each other. Say, I want to find Cosine Similarity score
> between any two given documents. I am trying to use Lucene for it (is it
> good for this purpose?)
> 
> This use case is different from querying against a set of documents
> 
> I am not sure if Lucene provides a direct API to evaluate this score.
> 
> Siddharth
> 
> 
> 
> 
> 
> Grant Ingersoll-6 wrote:
> > 
> > You might also have a look at the MemoryIndex.  Question, though, is  
> > what are you hoping to gain from doing a Query against a single  
> > String?  Are you doing a FuzzyQuery?  You might look at the  
> > SecondString project on SourceForge for doing string comparisons.
> > 
> > I guess I am a bit confused by your problem statement.  Perhaps you  
> > can explain more what you are trying to do at a higher level, as it  
> > sounds like to me you have str1 and str2, so why do you need to inject  
> > an index into the middle of it?
> > 
> > -Grant
> > 
> > On Jun 19, 2008, at 8:33 PM, Sangrish wrote:
> > 
> >>
> >> I have a use case for comparing two given strings (attached to a  
> >> specific
> >> field)
> >> using Lucene and get the similarity scores.
> >>
> >>  I tried but could not find any built-in way to do so. Hence  
> >> assuming that
> >> Lucene only compares a Query against Indexed documents, I came up  
> >> with the
> >> following approach:
> >> (Let the 2 strings be, str1 and str2 )
> >>
> >> 1) Create an IndexWriter using a RAMDirectory (I don't want to store  
> >> those
> >> strings on the disk)
> >> 2) Index str1 and store it
> >> 3) Search str2 in the index. ( shall the indexWriter be closed  
> >> before you
> >> search on the index? )
> >> 4) Get the similarity score & publish it
> >> 5) Delete str1 from the index and make the index available for a new
> >> comparison
> >>
> >> Any comments & suggestions on making the process optimal
> >>
> >> Siddharth
> >>
> >> -- 
> >> View this message in context:
> >> 
> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18020806.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> > 
> > --------------------------
> > Grant Ingersoll
> > http://www.lucidimagination.com
> > 
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> -- 
> View this message in context: 
> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18022691.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 06:04:49 2008
Return-Path: <java-user-return-34504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64894 invoked from network); 20 Jun 2008 06:04:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 06:04:48 -0000
Received: (qmail 83255 invoked by uid 500); 20 Jun 2008 06:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83221 invoked by uid 500); 20 Jun 2008 06:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83204 invoked by uid 99); 20 Jun 2008 06:04:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 23:04:44 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 06:03:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9ZjI-0003dE-Vv
	for java-user@lucene.apache.org; Thu, 19 Jun 2008 23:04:12 -0700
Message-ID: <18023594.post@talk.nabble.com>
Date: Thu, 19 Jun 2008 23:04:12 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: creating Array of IndexReaders
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,


I need to create dynamic Index Readers based on the user input.

for example

if the user needs to see the records from june 17-june 20 


        Directory indexFsDir1 =
FSDirectory.getDirectory("C:\\200806\\17\\outgoing1", false);
        IndexReader indexIR1 = IndexReader.open(indexFsDir1);

Directory indexFsDir1 =
FSDirectory.getDirectory("C:\\200806\\18\\outgoing1", false);
        IndexReader indexIR2 = IndexReader.open(indexFsDir1);

Directory indexFsDir1 =
FSDirectory.getDirectory("C:\\200806\\19\\outgoing1", false);
        IndexReader indexIR3 = IndexReader.open(indexFsDir1);

Directory indexFsDir1 =
FSDirectory.getDirectory("C:\\200806\\20\\outgoing1", false);
        IndexReader indexIR4 = IndexReader.open(indexFsDir1);


        IndexReader[] readArray = 
        { indexIR1, indexIR2, indexIR3, indexIR4};
          
   

        //merged reader
        IndexReader mergedReader = new MultiReader(readArray);
        
        IndexSearcher is = new IndexSearcher(mergedReader);

likewise is there any possibility to create Array of Index Readers.


-- 
View this message in context: http://www.nabble.com/creating-Array-of-IndexReaders-tp18023594p18023594.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 06:27:50 2008
Return-Path: <java-user-return-34505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75309 invoked from network); 20 Jun 2008 06:27:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 06:27:50 -0000
Received: (qmail 3970 invoked by uid 500); 20 Jun 2008 06:27:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3940 invoked by uid 500); 20 Jun 2008 06:27:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3929 invoked by uid 99); 20 Jun 2008 06:27:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 23:27:44 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Jun 2008 06:26:51 +0000
Received: (qmail 62351 invoked by uid 60001); 20 Jun 2008 06:26:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=foZkJCYVqoK/wuMl2n4gWoJ+iRS67UgnfvvDIVGf1NwvqsMcbOdpvOi1cHh5+BixmtngkKVaZphJJmWzFLn9V3eYD0bFWKzTt8nNXbQL6KfRJAi31ERUPAWG/irU96weJZGv/hG25djQm3FhKihTCCLKb2uJCmxefJEOBesR850=;
Received: from [72.231.9.236] by web50312.mail.re2.yahoo.com via HTTP; Thu, 19 Jun 2008 23:26:09 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Thu, 19 Jun 2008 23:26:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: creating Array of IndexReaders
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <340188.61901.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Have you looked at MultiReader?  Opening IndexReaders like that will cost you...


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Sebastin <sebasmtech@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 20, 2008 2:04:12 AM
> Subject: creating Array of IndexReaders
> 
> 
> Hi All,
> 
> 
> I need to create dynamic Index Readers based on the user input.
> 
> for example
> 
> if the user needs to see the records from june 17-june 20 
> 
> 
>         Directory indexFsDir1 =
> FSDirectory.getDirectory("C:\\200806\\17\\outgoing1", false);
>         IndexReader indexIR1 = IndexReader.open(indexFsDir1);
> 
> Directory indexFsDir1 =
> FSDirectory.getDirectory("C:\\200806\\18\\outgoing1", false);
>         IndexReader indexIR2 = IndexReader.open(indexFsDir1);
> 
> Directory indexFsDir1 =
> FSDirectory.getDirectory("C:\\200806\\19\\outgoing1", false);
>         IndexReader indexIR3 = IndexReader.open(indexFsDir1);
> 
> Directory indexFsDir1 =
> FSDirectory.getDirectory("C:\\200806\\20\\outgoing1", false);
>         IndexReader indexIR4 = IndexReader.open(indexFsDir1);
> 
> 
>         IndexReader[] readArray = 
>         { indexIR1, indexIR2, indexIR3, indexIR4};
>           
>   
> 
>         //merged reader
>         IndexReader mergedReader = new MultiReader(readArray);
>         
>         IndexSearcher is = new IndexSearcher(mergedReader);
> 
> likewise is there any possibility to create Array of Index Readers.
> 
> 
> -- 
> View this message in context: 
> http://www.nabble.com/creating-Array-of-IndexReaders-tp18023594p18023594.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 06:43:35 2008
Return-Path: <java-user-return-34506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80916 invoked from network); 20 Jun 2008 06:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 06:43:34 -0000
Received: (qmail 20669 invoked by uid 500); 20 Jun 2008 06:43:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20631 invoked by uid 500); 20 Jun 2008 06:43:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20620 invoked by uid 99); 20 Jun 2008 06:43:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 23:43:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 06:42:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9aKl-0004rh-M1
	for java-user@lucene.apache.org; Thu, 19 Jun 2008 23:42:55 -0700
Message-ID: <18023951.post@talk.nabble.com>
Date: Thu, 19 Jun 2008 23:42:55 -0700 (PDT)
From: Gaurav Sharma <gaurav.gash@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing unsupported mime types using Lucene
In-Reply-To: <511684.18565.qm@web50305.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaurav.gash@gmail.com
References: <17983491.post@talk.nabble.com> <511684.18565.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi Otis

I haven't tried Tiks?
Is it open source?

had u heard about LIUS before or is it talked aroung industry?
And what about Solr. It seems you worked on Solr and Nutch.

Otis Gospodnetic wrote:
> 
> Gaurav, have you tried Tika? (sub-project of Apache Lucene)
> 
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> ----- Original Message ----
>> From: Gaurav Sharma <gaurav.gash@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, June 18, 2008 10:07:22 AM
>> Subject: indexing unsupported mime types using Lucene
>> 
>> 
>> Hi,
>> I am using Lucene for indexing and searching the documents.
>> Its working file for supported documents. Now i want to index documents
>> with
>> unsupported mime types.
>> Right now i am using LIUS which is built over Lucene for indexing the
>> documents.
>> 
>> Is there any tool which I can use for indexing the unsupported mime
>> types.
>> Thanks in advance.
>> -Gaurav
>> 
>> 
>> -----
>> -Gaurav
>> -- 
>> View this message in context: 
>> http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p17983491.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


-----
-Gaurav
-- 
View this message in context: http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p18023951.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 06:47:10 2008
Return-Path: <java-user-return-34507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83725 invoked from network); 20 Jun 2008 06:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 06:47:10 -0000
Received: (qmail 30661 invoked by uid 500); 20 Jun 2008 06:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30633 invoked by uid 500); 20 Jun 2008 06:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30622 invoked by uid 99); 20 Jun 2008 06:47:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Jun 2008 23:47:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 06:46:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9aOG-0004zr-5t
	for java-user@lucene.apache.org; Thu, 19 Jun 2008 23:46:32 -0700
Message-ID: <18023991.post@talk.nabble.com>
Date: Thu, 19 Jun 2008 23:46:32 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: creating Array of IndexReaders
In-Reply-To: <340188.61901.qm@web50312.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <18023594.post@talk.nabble.com> <340188.61901.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi otis,

Rightnow I am using Multi Reader by just collecting array of indexReaders

IndexReader[] readArray = 
        { indexIR1, indexIR2, indexIR3, indexIR4};
           
   
 
         //merged reader
         IndexReader mergedReader = new MultiReader(readArray);

its not possible for me to create array of index readers based on the user
input? IndexReader 


Otis Gospodnetic wrote:
> 
> Hi,
> 
> Have you looked at MultiReader?  Opening IndexReaders like that will cost
> you...
> 
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> ----- Original Message ----
>> From: Sebastin <sebasmtech@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Friday, June 20, 2008 2:04:12 AM
>> Subject: creating Array of IndexReaders
>> 
>> 
>> Hi All,
>> 
>> 
>> I need to create dynamic Index Readers based on the user input.
>> 
>> for example
>> 
>> if the user needs to see the records from june 17-june 20 
>> 
>> 
>>         Directory indexFsDir1 =
>> FSDirectory.getDirectory("C:\\200806\\17\\outgoing1", false);
>>         IndexReader indexIR1 = IndexReader.open(indexFsDir1);
>> 
>> Directory indexFsDir1 =
>> FSDirectory.getDirectory("C:\\200806\\18\\outgoing1", false);
>>         IndexReader indexIR2 = IndexReader.open(indexFsDir1);
>> 
>> Directory indexFsDir1 =
>> FSDirectory.getDirectory("C:\\200806\\19\\outgoing1", false);
>>         IndexReader indexIR3 = IndexReader.open(indexFsDir1);
>> 
>> Directory indexFsDir1 =
>> FSDirectory.getDirectory("C:\\200806\\20\\outgoing1", false);
>>         IndexReader indexIR4 = IndexReader.open(indexFsDir1);
>> 
>> 
>>         IndexReader[] readArray = 
>>         { indexIR1, indexIR2, indexIR3, indexIR4};
>>           
>>   
>> 
>>         //merged reader
>>         IndexReader mergedReader = new MultiReader(readArray);
>>         
>>         IndexSearcher is = new IndexSearcher(mergedReader);
>> 
>> likewise is there any possibility to create Array of Index Readers.
>> 
>> 
>> -- 
>> View this message in context: 
>> http://www.nabble.com/creating-Array-of-IndexReaders-tp18023594p18023594.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/creating-Array-of-IndexReaders-tp18023594p18023991.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 07:05:24 2008
Return-Path: <java-user-return-34508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90426 invoked from network); 20 Jun 2008 07:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 07:05:23 -0000
Received: (qmail 48678 invoked by uid 500); 20 Jun 2008 07:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48509 invoked by uid 500); 20 Jun 2008 07:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48498 invoked by uid 99); 20 Jun 2008 07:05:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 00:05:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 07:04:28 +0000
Received: from [192.168.1.101] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m5K73lG26189
	for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 02:03:47 -0500
Message-ID: <485B564B.2050705@getopt.org>
Date: Fri, 20 Jun 2008 09:03:39 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Copying a part of index and index structure
References: <295595.14316.qm@web50310.mail.re2.yahoo.com>
In-Reply-To: <295595.14316.qm@web50310.mail.re2.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Hi,
> 
> Not doable with Lucene as far as I know.  I'm not even certain you
> would want to split by term.  What would that do TF IDF in your
> distributed search?  What's wrong with splitting t the doc level?
> There are about half a dozen distributed (Lucene) search solutions
> floating around, why not reuse them?

Distributed search that uses the splitting by term is an alternative to 
splitting by doc known in literature. However, a few recent research 
papers that I'm familiar with indicate that this is eventually a more 
complex and less efficient option than splitting by doc.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 07:08:50 2008
Return-Path: <java-user-return-34509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91277 invoked from network); 20 Jun 2008 07:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 07:08:50 -0000
Received: (qmail 54059 invoked by uid 500); 20 Jun 2008 07:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54030 invoked by uid 500); 20 Jun 2008 07:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54019 invoked by uid 99); 20 Jun 2008 07:08:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 00:08:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 07:07:53 +0000
Received: by fg-out-1718.google.com with SMTP id l27so666284fgb.27
        for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 00:08:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=kqMoohWmDViKCxaCXIF4tqnUiG79U+Vx0xwSwR41pZ8=;
        b=ATn6MdTsBYsUAKvdVca2guGqh2QJRxC6EMFFp1LgRA7rjdLScHYd73Klckkn7Uq0iZ
         cep9t77Mqf5sc6qxhUM+rcM91zhZ7uE3XadZHMxgGbvV6AAEN/t+a+waRxcl4FbI7ZN9
         QKPTLthyhdLScbUCUj7yyEIC9Gbgmxg5cjOpo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fdZ/9pS7WvWmYI2Vx7jkJsTxj4jtu6ARToq6HdO1ozpDxJpXrQD173NQjd1rjPFTtw
         6uil7kCshHtBBBzDgUCkhBxzVJYNx7wZYuFxpvNiptxY4eXk+9EGXTFcswbzNYi0bEtD
         krxJCM8uH3YUic8e9Ynj2QPGgJmZ2O8ex96CA=
Received: by 10.125.78.5 with SMTP id f5mr232229mkl.71.1213945689993;
        Fri, 20 Jun 2008 00:08:09 -0700 (PDT)
Received: by 10.125.130.6 with HTTP; Fri, 20 Jun 2008 00:08:09 -0700 (PDT)
Message-ID: <867513fe0806200008q63378c06l79f28adec2e8a3e8@mail.gmail.com>
Date: Fri, 20 Jun 2008 12:38:09 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Copying a part of index and index structure
In-Reply-To: <295595.14316.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5814_7188282.1213945690005"
References: <295595.14316.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5814_7188282.1213945690005
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Otis,

Could you suggest a few good distributed (lucene) search solutions? (Open
Source)
Yes, I do want to split by terms as the math tells a story. :)
TF IDF would be handled separately. I'd just use a different cluster of
machines to store the index instead of having the search run on the same
machine that stores the index.

--
Anshum

On Fri, Jun 20, 2008 at 11:26 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Hi,
>
> Not doable with Lucene as far as I know.  I'm not even certain you would
> want to split by term.  What would that do TF IDF in your distributed
> search?  What's wrong with splitting t the doc level?  There are about half
> a dozen distributed (Lucene) search solutions floating around, why not reuse
> them?
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
> ----- Original Message ----
> > From: Anshum <anshumg@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Friday, June 20, 2008 12:52:03 AM
> > Subject: Re: Copying a part of index and index structure
> >
> > Hey Otis,
> >
> > I guess lucene API would only help me remove documents from an Index and
> not
> > 'terms'. I need to remove terms from the index for all documents. any
> clue
> > as to how to get it done? I'm currently analyzing the internal index
> > structure.  really need to get it done and if it works out I guess we'd
> be
> > closer to having a kinda distributed lucene index.
> >
> > --
> > Anshum
> >
> > On Fri, Jun 20, 2008 at 8:04 AM, Otis Gospodnetic <
> > otis_gospodnetic@yahoo.com> wrote:
> >
> > > Hi,
> > >
> > > I don't think there are tools for taking a single index and sharding
> it.
> > >  So you'll have to create a new index and remove what you ened to
> remove
> > > from the old big index.  I could be wrong :)
> > >
> > >
> > > Otis
> > > --
> > > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > >
> > >
> > > ----- Original Message ----
> > > > From: Anshum
> > > > To: java-user@lucene.apache.org
> > > > Sent: Wednesday, June 18, 2008 9:12:57 AM
> > > > Subject: Copying a part of index and index structure
> > > >
> > > > I have 2 indexes and I would like to move index for a few 'selected'
> and
> > > > 'specified' terms from one of the indexes to the other.
> > > > Would some one have an idea on how to do it?
> > > > Actually, I am looking at splitting my index on keywords (terms) and
> > > would
> > > > like a single index be distributed over 2 smaller indexes after it
> has
> > > been
> > > > created.
> > > > How can I do it?
> > > >
> > > > --
> > > > --
> > > > The facts expressed here belong to everybody, the opinions to me.
> > > > The distinction is yours to draw............
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > --
> > The facts expressed here belong to everybody, the opinions to me.
> > The distinction is yours to draw............
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_5814_7188282.1213945690005--

From java-user-return-34510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 07:28:58 2008
Return-Path: <java-user-return-34510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97928 invoked from network); 20 Jun 2008 07:28:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 07:28:57 -0000
Received: (qmail 88106 invoked by uid 500); 20 Jun 2008 07:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88081 invoked by uid 500); 20 Jun 2008 07:28:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88068 invoked by uid 99); 20 Jun 2008 07:28:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 00:28:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 07:27:56 +0000
Received: by fg-out-1718.google.com with SMTP id l27so669852fgb.27
        for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 00:28:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=e+uSHTpC3j7D2Fd0D4jsjlHVxhEq3Z9J3Q2OVNP/APQ=;
        b=m1ezHtWM4cJ3VoJ+47QbRFLzLBGZWSsR2Er/2TxwaNiZGG17iwCR5JKGKIZO4pIsn5
         xwUXg7wYU+nun/juuTqLLiYlGBxDeI+zDQN9VllSLahYIZFTaFdrdA3s66BxqKID7aKR
         55/R5ltC132iUBm6LtpvNrB+RyC/ofN0LLixU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kgVvObx1DjiSlBjAWF833XzHEnZH2wzINvs0Bajm8SVkxZv02oezl4HoBYgYUJRAjc
         JZiWX1o7OwaswoRdo37tpbif/QBmsFJZyp8JXIE6Wu7Pr4XdtIr0g70FFsEHPbF+yFto
         s3aLNk1bNEfqOQ1vnb/4Dm4D5Kg+5ycRJV8Yw=
Received: by 10.125.82.5 with SMTP id j5mr231764mkl.48.1213946893625;
        Fri, 20 Jun 2008 00:28:13 -0700 (PDT)
Received: by 10.125.130.6 with HTTP; Fri, 20 Jun 2008 00:28:13 -0700 (PDT)
Message-ID: <867513fe0806200028gade4061i6ae30dad50679a92@mail.gmail.com>
Date: Fri, 20 Jun 2008 12:58:13 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Copying a part of index and index structure
In-Reply-To: <485B564B.2050705@getopt.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5874_14535642.1213946893627"
References: <295595.14316.qm@web50310.mail.re2.yahoo.com>
	 <485B564B.2050705@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5874_14535642.1213946893627
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Andrzej,
Could you tell me as to what research suggests this and why is it this way?
My calculation says the average load on each server would go down as I would
know what server to query for an index term as opposed to querying all
servers for terms.
I'm looking for a solution wherein I could break up the index based any
criteria and know what index to query for any input (and not query indexes
that would lead to zero results).

--
Anshum


On Fri, Jun 20, 2008 at 12:33 PM, Andrzej Bialecki <ab@getopt.org> wrote:

> Otis Gospodnetic wrote:
>
>> Hi,
>>
>> Not doable with Lucene as far as I know.  I'm not even certain you
>> would want to split by term.  What would that do TF IDF in your
>> distributed search?  What's wrong with splitting t the doc level?
>> There are about half a dozen distributed (Lucene) search solutions
>> floating around, why not reuse them?
>>
>
> Distributed search that uses the splitting by term is an alternative to
> splitting by doc known in literature. However, a few recent research papers
> that I'm familiar with indicate that this is eventually a more complex and
> less efficient option than splitting by doc.
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_5874_14535642.1213946893627--

From java-user-return-34511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 08:23:46 2008
Return-Path: <java-user-return-34511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13238 invoked from network); 20 Jun 2008 08:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 08:23:45 -0000
Received: (qmail 64008 invoked by uid 500); 20 Jun 2008 08:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63727 invoked by uid 500); 20 Jun 2008 08:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63716 invoked by uid 99); 20 Jun 2008 08:23:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 01:23:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liuping.james@gmail.com designates 209.85.142.190 as permitted sender)
Received: from [209.85.142.190] (HELO ti-out-0910.google.com) (209.85.142.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 08:22:50 +0000
Received: by ti-out-0910.google.com with SMTP id b8so573334tic.11
        for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 01:23:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=yHwJJivMacnBpe1jDMTtwh2KLecXYtsmpPbPHh3Mk14=;
        b=RhlB/1p6KyYFbFzPkdtmPsCx9CYf0BJRgs7oKosuEFODlZLNQoQqz/3HLU2XB0OH7y
         ZQewrpymElCux0d2rEkDF79is9IT2kvPlrSDLsHM0awA8mtsXV2IZmhsoj5C8Czvd/mq
         AweQ433vWbaCgXUZMv0L5BaecoAwEByyknGOE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=q1UqDHHXM/HqRZpbjZ1loOIJ5V8SrwXZ62njKHVPOt3pZWY0s01eKySIO8TvR+KQN8
         zQvx5V/If5mYDqo/a7stBMJMI09IEIb/nmqRiFb7wdR/S/VGD0i6c33J+HF6MdWYj5SG
         ete9RPOdzAWf4phChCbehoGahXuwAnq39eGwI=
Received: by 10.110.15.19 with SMTP id 19mr2560017tio.42.1213950188089;
        Fri, 20 Jun 2008 01:23:08 -0700 (PDT)
Received: by 10.110.57.14 with HTTP; Fri, 20 Jun 2008 01:23:08 -0700 (PDT)
Message-ID: <5d5204510806200123g12a659bdtef3d00b4e8f49971@mail.gmail.com>
Date: Fri, 20 Jun 2008 16:23:08 +0800
From: j.L <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Copying a part of index and index structure
In-Reply-To: <867513fe0806180612o59493c9dpd3ed2f69366748d4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19607_11855023.1213950188091"
References: <867513fe0806180612o59493c9dpd3ed2f69366748d4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19607_11855023.1213950188091
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i think u can use solr to solve it.

u just merge ur search result from 2 solr Instance(2 indexes).

it is very simple and u can distribute it.

On Wed, Jun 18, 2008 at 9:12 PM, Anshum <anshumg@gmail.com> wrote:

> I have 2 indexes and I would like to move index for a few 'selected' and
> 'specified' terms from one of the indexes to the other.
> Would some one have an idea on how to do it?
> Actually, I am looking at splitting my index on keywords (terms) and would
> like a single index be distributed over 2 smaller indexes after it has been
> created.
> How can I do it?
>
> --
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............
>



-- 
regards
j.L

------=_Part_19607_11855023.1213950188091--

From java-user-return-34512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 12:27:47 2008
Return-Path: <java-user-return-34512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92601 invoked from network); 20 Jun 2008 12:27:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 12:27:47 -0000
Received: (qmail 94507 invoked by uid 500); 20 Jun 2008 12:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94476 invoked by uid 500); 20 Jun 2008 12:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94465 invoked by uid 99); 20 Jun 2008 12:27:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 05:27:41 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 12:26:49 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id A781312876C
	for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 08:23:58 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Fri, 20 Jun 2008 08:23:58 -0400
X-Sasl-enc: bApDY0QruL3ow7anUdO3MlEXpfuYlGBmQv95yt4D3QA1 1213964638
Received: from [192.168.123.210] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 143412A0FD
	for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 08:23:57 -0400 (EDT)
Message-ID: <485BA15C.6020701@boboco.ie>
Date: Fri, 20 Jun 2008 13:23:56 +0100
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Copying a part of index and index structure
References: <295595.14316.qm@web50310.mail.re2.yahoo.com>	 <485B564B.2050705@getopt.org> <867513fe0806200028gade4061i6ae30dad50679a92@mail.gmail.com>
In-Reply-To: <867513fe0806200028gade4061i6ae30dad50679a92@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Anshum wrote:
> Hey Andrzej,
> Could you tell me as to what research suggests this and why is it this way?
> My calculation says the average load on each server would go down as I would
> know what server to query for an index term as opposed to querying all
> servers for terms.
> I'm looking for a solution wherein I could break up the index based any
> criteria and know what index to query for any input (and not query indexes
> that would lead to zero results).
>   

It is perhaps heresy on this mailing list, but GridGain makes this kind 
of thing really easy.  Obviously you could roll your own with Hadoop as 
well.

In this case you would simply have multiple indexes, each deployed to a 
different grid node, and a load balancing SPI that sent requests to the 
right grid node or nodes.

cheers,
Eric

-- 
Eric Bowman
Boboco Ltd
ebowman@boboco.ie
http://www.boboco.ie/ebowman/pubkey.pgp
+35318394189/+353872801532


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 14:58:59 2008
Return-Path: <java-user-return-34513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56985 invoked from network); 20 Jun 2008 14:58:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 14:58:59 -0000
Received: (qmail 31714 invoked by uid 500); 20 Jun 2008 14:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31674 invoked by uid 500); 20 Jun 2008 14:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31663 invoked by uid 99); 20 Jun 2008 14:58:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 07:58:53 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 14:58:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9i4D-0006q9-2U
	for java-user@lucene.apache.org; Fri, 20 Jun 2008 07:58:21 -0700
Message-ID: <18031330.post@talk.nabble.com>
Date: Fri, 20 Jun 2008 07:58:21 -0700 (PDT)
From: jnance <nancejd@ornl.gov>
To: java-user@lucene.apache.org
Subject: Indexing and searching txt files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nancejd@ornl.gov
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am new to Lucene. I have several text files I would like to index and
search. How do I do this?

Thanks,

jnance
-- 
View this message in context: http://www.nabble.com/Indexing-and-searching-txt-files-tp18031330p18031330.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 14:59:07 2008
Return-Path: <java-user-return-34514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57041 invoked from network); 20 Jun 2008 14:59:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 14:59:07 -0000
Received: (qmail 32180 invoked by uid 500); 20 Jun 2008 14:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32143 invoked by uid 500); 20 Jun 2008 14:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32115 invoked by uid 99); 20 Jun 2008 14:58:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 07:58:55 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [200.53.68.48] (HELO occemailcluster.terra.com.mx) (200.53.68.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 14:58:04 +0000
Received: from [201.151.221.142] (201.151.221.142) by occemailcluster.terra.com.mx (7.2.033.1) (authenticated as gsegura@correobancomer.com)
        id 48458E710012622A for java-user@lucene.apache.org; Fri, 20 Jun 2008 09:57:29 -0500
Message-ID: <485BD474.1060408@correobancomer.com>
Date: Fri, 20 Jun 2008 10:01:56 -0600
From: Gerardo Segura <gsegura@correobancomer.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: looking for efficient way to dump index info
References: <485A9227.2010400@correobancomer.com> <359a92830806190928y1b999c36i851fa4d44f16fe0d@mail.gmail.com>
In-Reply-To: <359a92830806190928y1b999c36i851fa4d44f16fe0d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using this to build a static index of documents and terms. A 
snapshot requested for further client (third party) analysis.

regards,
Gerardo

Erick Erickson wrote:
> What's the high-level goal here? The reason I ask is that
> I'm not sure what *use* these scores are to you. Perhaps
> someone will have a better approach if you post what it
> is you're trying to accomplish...
>
> Best
> Erick
>
>
> On Thu, Jun 19, 2008 at 1:06 PM, Gerardo Segura <gsegura@correobancomer.com>
> wrote:
>
>   
>> Hello list,
>> I need to generate a report with all the terms, the document ids where they
>> appear and the score in each document.
>> My current approach is to get a Term enumeration from the index and
>> construct a query for each of them.
>>
>> But as I am a newbie with the library I wonder if there is a better
>> approach.
>>
>>
>> best regards,
>> Gerardo
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 15:26:53 2008
Return-Path: <java-user-return-34515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92785 invoked from network); 20 Jun 2008 15:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 15:26:52 -0000
Received: (qmail 11666 invoked by uid 500); 20 Jun 2008 15:26:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11625 invoked by uid 500); 20 Jun 2008 15:26:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11593 invoked by uid 99); 20 Jun 2008 15:26:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 08:26:35 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 15:25:42 +0000
Received: by rn-out-0910.google.com with SMTP id j71so162932rne.4
        for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 08:26:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QQ2NmAJJU4cMddxQV1Kw0lxmnwNDvQtf31Kagh6aHg8=;
        b=pOueVcBBg3wTy++qaWSOiDmbVBHjIg7lgeUJDExSTouKiKOOU++bjMHZNiST6fLWci
         KlKWJH3bhcjq5wjoEJf4MRxrmEAEyjbRarPAMeFpEKMSJaqB/yWt415RvywHoIXGUR/F
         FpK8Aj+/F3m9PEcmWkkBWppXtt4NT6kzWf0eA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=COd4UdL88vc/9/j5d1xU0GIRZ2Dj+5re42WNsYtpW797zK3et9a5JPp/7WPvPCEXhj
         vGJddx0+xpl78MJ+pZXacL0PSWIRnBC6iNLhHtAtQWBzmd9CaFhXxtQ0aD8kQJVHmyFv
         tbM48qmuPhl0Jm07AauGwHLDuX+yOEVdH0LPM=
Received: by 10.142.239.13 with SMTP id m13mr1349751wfh.298.1213975559723;
        Fri, 20 Jun 2008 08:25:59 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 20 Jun 2008 08:25:59 -0700 (PDT)
Message-ID: <359a92830806200825i2a3f50ddu28f4e18683fe12e4@mail.gmail.com>
Date: Fri, 20 Jun 2008 11:25:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing and searching txt files
In-Reply-To: <18031330.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8413_1095108.1213975559775"
References: <18031330.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8413_1095108.1213975559775
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ummmm, have you tried reading any of the info on the home page? See:

http://lucene.apache.org/java/2_3_2/gettingstarted.html

I'd also recommend "Lucene in Action"

Best
Erick

On Fri, Jun 20, 2008 at 10:58 AM, jnance <nancejd@ornl.gov> wrote:

>
> Hi,
>
> I am new to Lucene. I have several text files I would like to index and
> search. How do I do this?
>
> Thanks,
>
> jnance
> --
> View this message in context:
> http://www.nabble.com/Indexing-and-searching-txt-files-tp18031330p18031330.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8413_1095108.1213975559775--

From java-user-return-34516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 16:13:34 2008
Return-Path: <java-user-return-34516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18554 invoked from network); 20 Jun 2008 16:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 16:13:33 -0000
Received: (qmail 85025 invoked by uid 500); 20 Jun 2008 16:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84806 invoked by uid 500); 20 Jun 2008 16:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84795 invoked by uid 99); 20 Jun 2008 16:13:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 09:13:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 16:12:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so7693237rvb.5
        for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 09:12:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=wyFmkog4QzU3lDVSXfm2rMUi2t5pzFc1HbRQZx/BotQ=;
        b=ik5j3EQg6AIRfcTfEQ8Iv5TqgY4d6pJ4KgPhnBGGiybHGSn7OJdNHIee3q7es2wGrk
         7NOJSp5qCjO4NC3lXp4uOStrRt7ANOYoMhqkGx+dWWpSEgmrOZslfmu4/mFWGx5Id3D/
         pMghyoZAQ0eYeBhKzuY1sdhxL/FwKJPu4I6hY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=k0vO6mYNsWcqM3E1PeofLlu+bV12WOSZB6iNyFfOVRqnCyrk/FRMh1RLpow9sEwbO+
         I760ku8qynS8SQ2Om78eHc/zV0A7TIHcErBldmHHpl193h4Gw+dIO84AN7EtpZOYCEeY
         nJq571aSlx/VmwmaZmym66yMmyFyoJWprsZx0=
Received: by 10.141.204.20 with SMTP id g20mr7724418rvq.230.1213978378532;
        Fri, 20 Jun 2008 09:12:58 -0700 (PDT)
Received: by 10.140.173.16 with HTTP; Fri, 20 Jun 2008 09:12:58 -0700 (PDT)
Message-ID: <9d2777b60806200912k153d17f1y81b62050d8c401f4@mail.gmail.com>
Date: Fri, 20 Jun 2008 13:12:58 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Termdocs question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10946_21332260.1213978378532"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10946_21332260.1213978378532
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello there! I trying to query for a specific document on a efficient way.
My index is structured in a way where I have an id field which is a unique
key for the whole index. When I'm updating/removing a document I was
searching for my id using a Searcher and a TermQuery. But reading the list
it seems that its a bit of overhead, using a reader.termDocs(term) would be
faster.

Here's a piece of code:

private void deleteFromIndex(String id){
        Term term = new Term("id",id);
        IndexReader reader = readerManager.getIndexReader();
        TermDocs termDocs = null;
        try {
            termDocs = reader.termDocs(term);
            while(termDocs.next()){
                int index = termDocs.doc();
                if(reader.document(index).get("id").equals(id)){
                    reader.deleteDocument(index);
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
        }finally{
            if(termDocs != null){
                try {
                    termDocs.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

problem is, reader is not returning any term. When I switch to query it
works. My documents have all being indexed using BrazilianAnalyzer, don't
know if that could be the reason.

Regards

-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_10946_21332260.1213978378532--

From java-user-return-34517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 17:24:58 2008
Return-Path: <java-user-return-34517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43768 invoked from network); 20 Jun 2008 17:24:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 17:24:57 -0000
Received: (qmail 88164 invoked by uid 500); 20 Jun 2008 17:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88135 invoked by uid 500); 20 Jun 2008 17:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88124 invoked by uid 99); 20 Jun 2008 17:24:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 10:24:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 17:24:03 +0000
Received: by yx-out-2324.google.com with SMTP id 31so245352yxl.5
        for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 10:24:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+LLZ++/uGYdeJPWpaJQBHv9WvKIBXC7/NDgZ+um2MS8=;
        b=QFGBQgsW7IwRFI7XP7WA6ZtjvVvbEhvhbUAncFoRAZ5FK0YbrPCmszYX58SuqrGwz4
         8VPa3iSQoF0wQjbS2ApFhB38fgsy+Fzgu/gXeZEM3VXdCDOr/SHxdSo5GWDjGW4y0OsN
         v0IeG1QEcd+T4UMvNS/b+KaslZlImahZByhI0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pjwGobq+BWzwHzxXpQIUalNgWgDxswWJotEayrpqDEPPAy0Cqx40+SbCh9Cxn7yR0Y
         TdKqsHlcojBmLHNisWQ8KcSszfwhowtu/gcD1b51PipWArvdDxJ1SvpwfxZ0g9k+fvj8
         L9C07C7pnkPzBMxgAVKR85gSx50aia31z32R0=
Received: by 10.142.193.13 with SMTP id q13mr1559875wff.103.1213982660470;
        Fri, 20 Jun 2008 10:24:20 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 20 Jun 2008 10:24:20 -0700 (PDT)
Message-ID: <359a92830806201024s4639b47aw1de1b27b66cf7899@mail.gmail.com>
Date: Fri, 20 Jun 2008 13:24:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Termdocs question
In-Reply-To: <9d2777b60806200912k153d17f1y81b62050d8c401f4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8853_4196705.1213982660464"
References: <9d2777b60806200912k153d17f1y81b62050d8c401f4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8853_4196705.1213982660464
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A couple of questions:
1> I assume by "not returning any docs" you mean that you
    never get into your while loop. Is that true?
2> I'm a little suspicious of the field labeled "id" and whether
     it's at all possible that this is getting confused with the
     internal Lucene doc ID. This is a wild shot in the dark
     influenced by the fact that I'm working with Groovy where
     property access is equivalent to get.....
3> What is the form of your unique key? If it's all numeric I
     don't see a problem, but if it has any non-numeric
     characters in it, then your analyzer will probably
     lower-case the term wheres your term constructor
     won't. Which would also explain why searching
     would work.

If none of this is remotely helpful, could you post a few
examples of keys that work and those that don't?

Best
Erick

On Fri, Jun 20, 2008 at 12:12 PM, Vinicius Carvalho <
viniciusccarvalho@gmail.com> wrote:

> Hello there! I trying to query for a specific document on a efficient way.
> My index is structured in a way where I have an id field which is a unique
> key for the whole index. When I'm updating/removing a document I was
> searching for my id using a Searcher and a TermQuery. But reading the list
> it seems that its a bit of overhead, using a reader.termDocs(term) would be
> faster.
>
> Here's a piece of code:
>
> private void deleteFromIndex(String id){
>        Term term = new Term("id",id);
>        IndexReader reader = readerManager.getIndexReader();
>        TermDocs termDocs = null;
>        try {
>            termDocs = reader.termDocs(term);
>            while(termDocs.next()){
>                int index = termDocs.doc();
>                if(reader.document(index).get("id").equals(id)){
>                    reader.deleteDocument(index);
>                }
>            }
>        } catch (IOException e) {
>            e.printStackTrace();
>        }finally{
>            if(termDocs != null){
>                try {
>                    termDocs.close();
>                } catch (IOException e) {
>                    e.printStackTrace();
>                }
>            }
>        }
>    }
>
> problem is, reader is not returning any term. When I switch to query it
> works. My documents have all being indexed using BrazilianAnalyzer, don't
> know if that could be the reason.
>
> Regards
>
> --
> "In a world without fences and walls, who needs Gates and Windows?"
>

------=_Part_8853_4196705.1213982660464--

From java-user-return-34518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 17:46:31 2008
Return-Path: <java-user-return-34518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50714 invoked from network); 20 Jun 2008 17:46:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 17:46:31 -0000
Received: (qmail 24627 invoked by uid 500); 20 Jun 2008 17:46:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24605 invoked by uid 500); 20 Jun 2008 17:46:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24594 invoked by uid 99); 20 Jun 2008 17:46:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 10:46:25 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 17:45:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9kgK-0005TR-FS
	for java-user@lucene.apache.org; Fri, 20 Jun 2008 10:45:52 -0700
Message-ID: <18034468.post@talk.nabble.com>
Date: Fri, 20 Jun 2008 10:45:52 -0700 (PDT)
From: Sangrish <sidangrish@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Arbitrary String to String Similarity Score
In-Reply-To: <400359.69594.qm@web50311.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sidangrish@gmail.com
References: <18020806.post@talk.nabble.com> <400359.69594.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Yes, "MoreLikeThis" is more like what I want.  

But theres one problem. Even here one has to run the query against an
indexed set of documents.

While I would like to create two Queries through "MoreLikeThis" and get a
score of how similar they are to each other.

Siddharth







Otis Gospodnetic wrote:
> 
> Hi,
> 
> Have a look at MoreLikeThis:
> 
> [otis@localhost trunk]$ ff \*MoreLikeThis\*.java
> ./contrib/queries/src/java/org/apache/lucene/search/similar/MoreLikeThisQuery.java
> ./contrib/queries/src/java/org/apache/lucene/search/similar/MoreLikeThis.java
> 
> 
> I think that or something a lot like it is what you are after.
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> ----- Original Message ----
>> From: Sangrish <sidangrish@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Friday, June 20, 2008 12:20:02 AM
>> Subject: Re: Arbitrary String to String Similarity Score
>> 
>> 
>> Given 2 text documents I want to quantitatively find, how similar they
>> are,
>> with respect to each other. Say, I want to find Cosine Similarity score
>> between any two given documents. I am trying to use Lucene for it (is it
>> good for this purpose?)
>> 
>> This use case is different from querying against a set of documents
>> 
>> I am not sure if Lucene provides a direct API to evaluate this score.
>> 
>> Siddharth
>> 
>> 
>> 
>> 
>> 
>> Grant Ingersoll-6 wrote:
>> > 
>> > You might also have a look at the MemoryIndex.  Question, though, is  
>> > what are you hoping to gain from doing a Query against a single  
>> > String?  Are you doing a FuzzyQuery?  You might look at the  
>> > SecondString project on SourceForge for doing string comparisons.
>> > 
>> > I guess I am a bit confused by your problem statement.  Perhaps you  
>> > can explain more what you are trying to do at a higher level, as it  
>> > sounds like to me you have str1 and str2, so why do you need to inject  
>> > an index into the middle of it?
>> > 
>> > -Grant
>> > 
>> > On Jun 19, 2008, at 8:33 PM, Sangrish wrote:
>> > 
>> >>
>> >> I have a use case for comparing two given strings (attached to a  
>> >> specific
>> >> field)
>> >> using Lucene and get the similarity scores.
>> >>
>> >>  I tried but could not find any built-in way to do so. Hence  
>> >> assuming that
>> >> Lucene only compares a Query against Indexed documents, I came up  
>> >> with the
>> >> following approach:
>> >> (Let the 2 strings be, str1 and str2 )
>> >>
>> >> 1) Create an IndexWriter using a RAMDirectory (I don't want to store  
>> >> those
>> >> strings on the disk)
>> >> 2) Index str1 and store it
>> >> 3) Search str2 in the index. ( shall the indexWriter be closed  
>> >> before you
>> >> search on the index? )
>> >> 4) Get the similarity score & publish it
>> >> 5) Delete str1 from the index and make the index available for a new
>> >> comparison
>> >>
>> >> Any comments & suggestions on making the process optimal
>> >>
>> >> Siddharth
>> >>
>> >> -- 
>> >> View this message in context:
>> >> 
>> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18020806.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> > 
>> > --------------------------
>> > Grant Ingersoll
>> > http://www.lucidimagination.com
>> > 
>> > Lucene Helpful Hints:
>> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> > http://wiki.apache.org/lucene-java/LuceneFAQ
>> > 
>> > 
>> > 
>> > 
>> > 
>> > 
>> > 
>> > 
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > 
>> > 
>> > 
>> 
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18022691.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18034468.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 18:21:29 2008
Return-Path: <java-user-return-34519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71828 invoked from network); 20 Jun 2008 18:21:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 18:21:29 -0000
Received: (qmail 86597 invoked by uid 500); 20 Jun 2008 18:21:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86571 invoked by uid 500); 20 Jun 2008 18:21:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86560 invoked by uid 99); 20 Jun 2008 18:21:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 11:21:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 18:20:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9lEC-0006wJ-Eg
	for java-user@lucene.apache.org; Fri, 20 Jun 2008 11:20:52 -0700
Message-ID: <18034945.post@talk.nabble.com>
Date: Fri, 20 Jun 2008 11:20:52 -0700 (PDT)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Example using NGramSpeller.java
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


is there any way i can find example of a program using NGramSpeller.java
-- 
View this message in context: http://www.nabble.com/Example-using-NGramSpeller.java-tp18034945p18034945.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 18:30:22 2008
Return-Path: <java-user-return-34520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77402 invoked from network); 20 Jun 2008 18:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 18:30:22 -0000
Received: (qmail 2473 invoked by uid 500); 20 Jun 2008 18:30:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2445 invoked by uid 500); 20 Jun 2008 18:30:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2434 invoked by uid 99); 20 Jun 2008 18:30:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 11:30:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 18:29:25 +0000
Received: from [192.168.0.219] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m5KISr329315
	for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 13:28:53 -0500
Message-ID: <485BF6D1.9030601@getopt.org>
Date: Fri, 20 Jun 2008 20:28:33 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Copying a part of index and index structure
References: <295595.14316.qm@web50310.mail.re2.yahoo.com>	 <485B564B.2050705@getopt.org> <867513fe0806200028gade4061i6ae30dad50679a92@mail.gmail.com>
In-Reply-To: <867513fe0806200028gade4061i6ae30dad50679a92@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Anshum wrote:
> Hey Andrzej,
> Could you tell me as to what research suggests this and why is it this way?
> My calculation says the average load on each server would go down as I would
> know what server to query for an index term as opposed to querying all
> servers for terms.
> I'm looking for a solution wherein I could break up the index based any
> criteria and know what index to query for any input (and not query indexes
> that would lead to zero results).

* Ricardo Baeza-Yates, Carlos Castillo, Flavio Junqueira, Vassilis 
Plachouras, Fabrizio Silvestri, 2007: Challenges on Distributed Web 
Retrieval: "The disadvantage of term partitioning is having to build 
initially the entire global index. This does not scale well, and it is 
not useful in actual large scale Web search engines. There are, however, 
some advantages of this approach in the query processing phase. Webber 
et al. show that term partitioning results in lower utilization of 
resources [49]. More specically, it signicantly reduces the number of 
disk accesses and the volume of data exchanged. Document partitioning 
however is still better in terms of throughput, because of an uneven 
distribution of work load in term partitioning."

* Claudine Badue, Ricardo Baeza-Yates, 2001: Distributed Query 
Processing Using Partitioned Inverted Files (note that their conclusion 
that global partitioning is more efficient than local partitioning is 
based on a crucial assumption of being able to distribute the load 
efficiently. Other papers indicate that this is a very complex issue).

* Claudine Badue, Ramurti Barbosa, Paulo Golgher: Distributed Processing 
of Conjunctive Queries. This paper evaluates the bottlenecks in an 
engine with local index partitioning.

* Justin Zobel, Alistair Moffat, 2006: Inverted Files for Text Search 
Engines

* Claudio Lucchese, Salvatore Orlando, Raaele Perego, Fabrizio 
Silvestri, 2006: Mining Query Logs to Optimize Index Partitioning in 
Parallel Web Search Engines

* Ronny Lempel, Shlomo Moran, 2002: Optimizing Result Prefetching in Web 
Search Engines with Segmented Indices

... and quite a few other papers that I don't remember now ... please do 
a search for "distributed IR" on ACM or Citeseer.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 20 19:06:02 2008
Return-Path: <java-user-return-34521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1063 invoked from network); 20 Jun 2008 19:06:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jun 2008 19:06:02 -0000
Received: (qmail 66766 invoked by uid 500); 20 Jun 2008 19:05:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66742 invoked by uid 500); 20 Jun 2008 19:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66729 invoked by uid 99); 20 Jun 2008 19:05:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 12:05:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 19:05:07 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5C51271E4BB; Fri, 20 Jun 2008 11:50:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4DC8671DC2B
	for <java-user@lucene.apache.org>; Fri, 20 Jun 2008 11:50:34 -0700 (PDT)
Date: Fri, 20 Jun 2008 11:50:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Match "best one" from list
In-Reply-To: <17865087.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0806201147430.6966@radix.cryptio.net>
References: <17805042.post@talk.nabble.com> <Pine.LNX.4.62.0806131523100.28409@radix.cryptio.net>
 <17865087.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


correct, adding new syntax to the parser currently requires editing the 
grammer.  

Something else you might consider is that ifyou expect "BESTOF" type 
queries to be the default behavior people want, you could just overriget 
the getBooleanQuery method of hte QUeryarser and *always* generate a 
DisMax query for any query containing multiple cuases.

it may not be what you want ... but it's pretty easy.

: > :   BESTOF( "apple"^10, "orange"^9, "pear"^8, "peach"^8, "grapes"^2 )
	...
: Ideally I want to be able to use the queryparser as the requirement above
: will just be 
: an element of a larger query (albeit for now the most complex element). The
: format of 
: the whole query is something which I don't have much control over, hence the
: preference 
: to keep or somehow extend the existing parser.
: The queryparser as is, doesn't seem to support all of the query types, and
: it does 
: seem that the only way to get extended functionality is to modify the
: grammar file 
: QueryParser.jj, and (somehow) build a new parser?  Am I right in thinking
: this, or is there 
: another way to plug new query types into the existing queryparser that I
: havent found?
: I'd rather not mess with the distribution as is, but if theres no other way
: I'll have to roll 
: my sleves up and learn JavaCC :D




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 21 06:04:01 2008
Return-Path: <java-user-return-34522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38384 invoked from network); 21 Jun 2008 06:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2008 06:04:01 -0000
Received: (qmail 41494 invoked by uid 500); 21 Jun 2008 06:03:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41468 invoked by uid 500); 21 Jun 2008 06:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41457 invoked by uid 99); 21 Jun 2008 06:03:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 23:03:54 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 21 Jun 2008 06:03:02 +0000
Received: (qmail 3779 invoked by uid 60001); 21 Jun 2008 06:02:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=HMmLoc5XdkIU9ajsr1f3PZYs6Jmm+hnSN5P79nN9uVfY3dMTOlC7OXegZ5+usKq+LsT5Nuv6Fruz2wYHKFFrvQPQB21QxaK29QoJUzzPD7EbWstnKE5+lCeQNyaPOqO8jrHDCC1hSrKbPIe7g3KWhv9OnlG1mI2Z6STIxZAM2ww=;
Received: from [72.231.9.236] by web50306.mail.re2.yahoo.com via HTTP; Fri, 20 Jun 2008 23:02:18 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Fri, 20 Jun 2008 23:02:18 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Arbitrary String to String Similarity Score
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <874453.3164.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You should look into SecondString perhaps then, like Grant said.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Sangrish <sidangrish@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 20, 2008 1:45:52 PM
> Subject: Re: Arbitrary String to String Similarity Score
> 
> 
> 
> Yes, "MoreLikeThis" is more like what I want.  
> 
> But theres one problem. Even here one has to run the query against an
> indexed set of documents.
> 
> While I would like to create two Queries through "MoreLikeThis" and get a
> score of how similar they are to each other.
> 
> Siddharth
> 
> 
> 
> 
> 
> 
> 
> Otis Gospodnetic wrote:
> > 
> > Hi,
> > 
> > Have a look at MoreLikeThis:
> > 
> > [otis@localhost trunk]$ ff \*MoreLikeThis\*.java
> > 
> ./contrib/queries/src/java/org/apache/lucene/search/similar/MoreLikeThisQuery.java
> > ./contrib/queries/src/java/org/apache/lucene/search/similar/MoreLikeThis.java
> > 
> > 
> > I think that or something a lot like it is what you are after.
> > 
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > 
> > 
> > ----- Original Message ----
> >> From: Sangrish 
> >> To: java-user@lucene.apache.org
> >> Sent: Friday, June 20, 2008 12:20:02 AM
> >> Subject: Re: Arbitrary String to String Similarity Score
> >> 
> >> 
> >> Given 2 text documents I want to quantitatively find, how similar they
> >> are,
> >> with respect to each other. Say, I want to find Cosine Similarity score
> >> between any two given documents. I am trying to use Lucene for it (is it
> >> good for this purpose?)
> >> 
> >> This use case is different from querying against a set of documents
> >> 
> >> I am not sure if Lucene provides a direct API to evaluate this score.
> >> 
> >> Siddharth
> >> 
> >> 
> >> 
> >> 
> >> 
> >> Grant Ingersoll-6 wrote:
> >> > 
> >> > You might also have a look at the MemoryIndex.  Question, though, is  
> >> > what are you hoping to gain from doing a Query against a single  
> >> > String?  Are you doing a FuzzyQuery?  You might look at the  
> >> > SecondString project on SourceForge for doing string comparisons.
> >> > 
> >> > I guess I am a bit confused by your problem statement.  Perhaps you  
> >> > can explain more what you are trying to do at a higher level, as it  
> >> > sounds like to me you have str1 and str2, so why do you need to inject  
> >> > an index into the middle of it?
> >> > 
> >> > -Grant
> >> > 
> >> > On Jun 19, 2008, at 8:33 PM, Sangrish wrote:
> >> > 
> >> >>
> >> >> I have a use case for comparing two given strings (attached to a  
> >> >> specific
> >> >> field)
> >> >> using Lucene and get the similarity scores.
> >> >>
> >> >>  I tried but could not find any built-in way to do so. Hence  
> >> >> assuming that
> >> >> Lucene only compares a Query against Indexed documents, I came up  
> >> >> with the
> >> >> following approach:
> >> >> (Let the 2 strings be, str1 and str2 )
> >> >>
> >> >> 1) Create an IndexWriter using a RAMDirectory (I don't want to store  
> >> >> those
> >> >> strings on the disk)
> >> >> 2) Index str1 and store it
> >> >> 3) Search str2 in the index. ( shall the indexWriter be closed  
> >> >> before you
> >> >> search on the index? )
> >> >> 4) Get the similarity score & publish it
> >> >> 5) Delete str1 from the index and make the index available for a new
> >> >> comparison
> >> >>
> >> >> Any comments & suggestions on making the process optimal
> >> >>
> >> >> Siddharth
> >> >>
> >> >> -- 
> >> >> View this message in context:
> >> >> 
> >> 
> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18020806.html
> >> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> > 
> >> > --------------------------
> >> > Grant Ingersoll
> >> > http://www.lucidimagination.com
> >> > 
> >> > Lucene Helpful Hints:
> >> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >> > 
> >> > 
> >> > 
> >> > 
> >> > 
> >> > 
> >> > 
> >> > 
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > 
> >> > 
> >> > 
> >> 
> >> -- 
> >> View this message in context: 
> >> 
> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18022691.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> 
> >> 
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> -- 
> View this message in context: 
> http://www.nabble.com/Arbitrary-String-to-String-Similarity-Score-tp18020806p18034468.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 21 06:10:22 2008
Return-Path: <java-user-return-34523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41435 invoked from network); 21 Jun 2008 06:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2008 06:10:22 -0000
Received: (qmail 45326 invoked by uid 500); 21 Jun 2008 06:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45299 invoked by uid 500); 21 Jun 2008 06:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45288 invoked by uid 99); 21 Jun 2008 06:10:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 23:10:17 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 21 Jun 2008 06:09:26 +0000
Received: (qmail 89683 invoked by uid 60001); 21 Jun 2008 06:08:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=jRWI/n0bys2pIxVYwUm3yPAePql3cjDiQ1Btd/7GAZe7zGNqxjTBGOdmCiGZ9aSdBhzarYqVnawJWtzfX3vtD2xx0Ied+05O3SuY8311V4ha1WdFUGJpQkfBOS4fXe2YNwhP5iIrH0o3qCLvydfQwYxPTHBBqeaVql+IipbOg0U=;
Received: from [72.231.9.236] by web50302.mail.re2.yahoo.com via HTTP; Fri, 20 Jun 2008 23:08:43 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Fri, 20 Jun 2008 23:08:43 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: creating Array of IndexReaders
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <386073.89631.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I think you mentioned 225GB of data somewhere.
You can open IndexReaders "on demand", but that's not a cheap operation, esp. not with so much data.  You want to keep your IndexReaders opened for a while.  Multiple requests/threads can share them.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Sebastin <sebasmtech@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 20, 2008 2:46:32 AM
> Subject: Re: creating Array of IndexReaders
> 
> 
> Hi otis,
> 
> Rightnow I am using Multi Reader by just collecting array of indexReaders
> 
> IndexReader[] readArray = 
>         { indexIR1, indexIR2, indexIR3, indexIR4};
>           
>   
> 
>          //merged reader
>          IndexReader mergedReader = new MultiReader(readArray);
> 
> its not possible for me to create array of index readers based on the user
> input? IndexReader 
> 
> 
> Otis Gospodnetic wrote:
> > 
> > Hi,
> > 
> > Have you looked at MultiReader?  Opening IndexReaders like that will cost
> > you...
> > 
> > 
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > 
> > 
> > ----- Original Message ----
> >> From: Sebastin 
> >> To: java-user@lucene.apache.org
> >> Sent: Friday, June 20, 2008 2:04:12 AM
> >> Subject: creating Array of IndexReaders
> >> 
> >> 
> >> Hi All,
> >> 
> >> 
> >> I need to create dynamic Index Readers based on the user input.
> >> 
> >> for example
> >> 
> >> if the user needs to see the records from june 17-june 20 
> >> 
> >> 
> >>         Directory indexFsDir1 =
> >> FSDirectory.getDirectory("C:\\200806\\17\\outgoing1", false);
> >>         IndexReader indexIR1 = IndexReader.open(indexFsDir1);
> >> 
> >> Directory indexFsDir1 =
> >> FSDirectory.getDirectory("C:\\200806\\18\\outgoing1", false);
> >>         IndexReader indexIR2 = IndexReader.open(indexFsDir1);
> >> 
> >> Directory indexFsDir1 =
> >> FSDirectory.getDirectory("C:\\200806\\19\\outgoing1", false);
> >>         IndexReader indexIR3 = IndexReader.open(indexFsDir1);
> >> 
> >> Directory indexFsDir1 =
> >> FSDirectory.getDirectory("C:\\200806\\20\\outgoing1", false);
> >>         IndexReader indexIR4 = IndexReader.open(indexFsDir1);
> >> 
> >> 
> >>         IndexReader[] readArray = 
> >>         { indexIR1, indexIR2, indexIR3, indexIR4};
> >>          
> >>  
> >> 
> >>         //merged reader
> >>         IndexReader mergedReader = new MultiReader(readArray);
> >>        
> >>         IndexSearcher is = new IndexSearcher(mergedReader);
> >> 
> >> likewise is there any possibility to create Array of Index Readers.
> >> 
> >> 
> >> -- 
> >> View this message in context: 
> >> http://www.nabble.com/creating-Array-of-IndexReaders-tp18023594p18023594.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 21 06:10:56 2008
Return-Path: <java-user-return-34524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41715 invoked from network); 21 Jun 2008 06:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2008 06:10:56 -0000
Received: (qmail 47162 invoked by uid 500); 21 Jun 2008 06:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47006 invoked by uid 500); 21 Jun 2008 06:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46995 invoked by uid 99); 21 Jun 2008 06:10:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Jun 2008 23:10:51 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 21 Jun 2008 06:09:59 +0000
Received: (qmail 48798 invoked by uid 60001); 21 Jun 2008 06:10:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=u11z/YQWzGPPYhB6qvalezc3CKm4dvI+u6Z4gjDltHWm7F93TuK2Sz/QISg7oWPW6t7gfoalbRxhmYSLrdXL/tbUojkJhqQhHz39HeXQtX+erphgdxbwNntjotvBg3LgRxU2pH7dfO9Uhs8ZjMp8dRRXd1VeKqKQaf7AWnL7PcY=;
Received: from [72.231.9.236] by web50303.mail.re2.yahoo.com via HTTP; Fri, 20 Jun 2008 23:10:16 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Fri, 20 Jun 2008 23:10:16 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexing unsupported mime types using Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <606948.48782.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Gaurav,

If you go to http://lucene.apache.org/ you will see a Tika tab there.  It's OSS.  LIUS is either a part of Tika or is about to become a part of it.

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Gaurav Sharma <gaurav.gash@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, June 20, 2008 2:42:55 AM
> Subject: Re: indexing unsupported mime types using Lucene
> 
> 
> hi Otis
> 
> I haven't tried Tiks?
> Is it open source?
> 
> had u heard about LIUS before or is it talked aroung industry?
> And what about Solr. It seems you worked on Solr and Nutch.
> 
> Otis Gospodnetic wrote:
> > 
> > Gaurav, have you tried Tika? (sub-project of Apache Lucene)
> > 
> > 
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> > 
> > 
> > ----- Original Message ----
> >> From: Gaurav Sharma 
> >> To: java-user@lucene.apache.org
> >> Sent: Wednesday, June 18, 2008 10:07:22 AM
> >> Subject: indexing unsupported mime types using Lucene
> >> 
> >> 
> >> Hi,
> >> I am using Lucene for indexing and searching the documents.
> >> Its working file for supported documents. Now i want to index documents
> >> with
> >> unsupported mime types.
> >> Right now i am using LIUS which is built over Lucene for indexing the
> >> documents.
> >> 
> >> Is there any tool which I can use for indexing the unsupported mime
> >> types.
> >> Thanks in advance.
> >> -Gaurav
> >> 
> >> 
> >> -----
> >> -Gaurav
> >> -- 
> >> View this message in context: 
> >> 
> http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p17983491.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> 
> >> 
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> 
> -----
> -Gaurav
> -- 
> View this message in context: 
> http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p18023951.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 21 09:01:37 2008
Return-Path: <java-user-return-34525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52640 invoked from network); 21 Jun 2008 09:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2008 09:01:37 -0000
Received: (qmail 46976 invoked by uid 500); 21 Jun 2008 09:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46937 invoked by uid 500); 21 Jun 2008 09:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46925 invoked by uid 99); 21 Jun 2008 09:01:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jun 2008 02:01:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jun 2008 09:00:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1K9yur-0000dI-2s
	for java-user@lucene.apache.org; Sat, 21 Jun 2008 01:57:49 -0700
Message-ID: <18042275.post@talk.nabble.com>
Date: Sat, 21 Jun 2008 01:57:49 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: creating Array of IndexReaders
In-Reply-To: <386073.89631.qm@web50302.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <18023594.post@talk.nabble.com> <386073.89631.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi otis,

Since i am maintaining more than 1.5 years records in the windows 2003
server,based on the user input for example if the user wants to display june
1 - june 15 folders and fetch the records from them.if the user wants to
display may 1-may15 records i need to open those folders.thatswhy i am
opening the index readers based on the user input.is it possible to create
the array of index raders based on user input.


Otis Gospodnetic wrote:
> 
> Hi,
> 
> I think you mentioned 225GB of data somewhere.
> You can open IndexReaders "on demand", but that's not a cheap operation,
> esp. not with so much data.  You want to keep your IndexReaders opened for
> a while.  Multiple requests/threads can share them.
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> ----- Original Message ----
>> From: Sebastin <sebasmtech@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Friday, June 20, 2008 2:46:32 AM
>> Subject: Re: creating Array of IndexReaders
>> 
>> 
>> Hi otis,
>> 
>> Rightnow I am using Multi Reader by just collecting array of indexReaders
>> 
>> IndexReader[] readArray = 
>>         { indexIR1, indexIR2, indexIR3, indexIR4};
>>           
>>   
>> 
>>          //merged reader
>>          IndexReader mergedReader = new MultiReader(readArray);
>> 
>> its not possible for me to create array of index readers based on the
>> user
>> input? IndexReader 
>> 
>> 
>> Otis Gospodnetic wrote:
>> > 
>> > Hi,
>> > 
>> > Have you looked at MultiReader?  Opening IndexReaders like that will
>> cost
>> > you...
>> > 
>> > 
>> > Otis
>> > --
>> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>> > 
>> > 
>> > ----- Original Message ----
>> >> From: Sebastin 
>> >> To: java-user@lucene.apache.org
>> >> Sent: Friday, June 20, 2008 2:04:12 AM
>> >> Subject: creating Array of IndexReaders
>> >> 
>> >> 
>> >> Hi All,
>> >> 
>> >> 
>> >> I need to create dynamic Index Readers based on the user input.
>> >> 
>> >> for example
>> >> 
>> >> if the user needs to see the records from june 17-june 20 
>> >> 
>> >> 
>> >>         Directory indexFsDir1 =
>> >> FSDirectory.getDirectory("C:\\200806\\17\\outgoing1", false);
>> >>         IndexReader indexIR1 = IndexReader.open(indexFsDir1);
>> >> 
>> >> Directory indexFsDir1 =
>> >> FSDirectory.getDirectory("C:\\200806\\18\\outgoing1", false);
>> >>         IndexReader indexIR2 = IndexReader.open(indexFsDir1);
>> >> 
>> >> Directory indexFsDir1 =
>> >> FSDirectory.getDirectory("C:\\200806\\19\\outgoing1", false);
>> >>         IndexReader indexIR3 = IndexReader.open(indexFsDir1);
>> >> 
>> >> Directory indexFsDir1 =
>> >> FSDirectory.getDirectory("C:\\200806\\20\\outgoing1", false);
>> >>         IndexReader indexIR4 = IndexReader.open(indexFsDir1);
>> >> 
>> >> 
>> >>         IndexReader[] readArray = 
>> >>         { indexIR1, indexIR2, indexIR3, indexIR4};
>> >>          
>> >>  
>> >> 
>> >>         //merged reader
>> >>         IndexReader mergedReader = new MultiReader(readArray);
>> >>        
>> >>         IndexSearcher is = new IndexSearcher(mergedReader);
>> >> 
>> >> likewise is there any possibility to create Array of Index Readers.
>> >> 
>> >> 
>> >> -- 
>> >> View this message in context: 
>> >>
>> http://www.nabble.com/creating-Array-of-IndexReaders-tp18023594p18023594.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/creating-Array-of-IndexReaders-tp18023594p18042275.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 21 16:57:42 2008
Return-Path: <java-user-return-34526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96082 invoked from network); 21 Jun 2008 16:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2008 16:57:42 -0000
Received: (qmail 66362 invoked by uid 500); 21 Jun 2008 16:57:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66322 invoked by uid 500); 21 Jun 2008 16:57:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66311 invoked by uid 99); 21 Jun 2008 16:57:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jun 2008 09:57:36 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.23 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jun 2008 16:56:46 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5LGuLBk069055
	for <java-user@lucene.apache.org>; Sat, 21 Jun 2008 18:56:29 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <2A04FF58-7362-46B9-86DB-6628C255F8AD@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Token payload attribute partitioning
Date: Sat, 21 Jun 2008 18:56:15 +0200
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

How do you handle token payload that represent multiple values? I  
simply don't do it even though there are cases where I would like to  
see it. I also find that my token filters that update payload feels  
sort of quick and dirty, that it use a lot of that static scope I so  
much dread for anything but ad hoc solutions.

I would feel much better if there was some sort of partitioner with  
pluggable CRUD strategies. PayloadMap or something.

But I'm not sure, perhaps the idea with the Payload class (rather than  
just a byte[]) is to extend it and do stuff I did not think of?


         karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 21 17:09:33 2008
Return-Path: <java-user-return-34527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5484 invoked from network); 21 Jun 2008 17:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jun 2008 17:09:33 -0000
Received: (qmail 80662 invoked by uid 500); 21 Jun 2008 17:09:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80635 invoked by uid 500); 21 Jun 2008 17:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80623 invoked by uid 99); 21 Jun 2008 17:09:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jun 2008 10:09:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.29 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Jun 2008 17:08:37 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id m5LH8PYv043633
	for <java-user@lucene.apache.org>; Sat, 21 Jun 2008 19:08:33 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <C431D4CB-D716-4833-8111-6B5338A6607A@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <9d2777b60806200912k153d17f1y81b62050d8c401f4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Termdocs question
Date: Sat, 21 Jun 2008 19:08:25 +0200
References: <9d2777b60806200912k153d17f1y81b62050d8c401f4@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


20 jun 2008 kl. 18.12 skrev Vinicius Carvalho:


> Hello there! I trying to query for a specific document on a  
> efficient way.

Hi Vinicius,

>            termDocs = reader.termDocs(term);
>            while(termDocs.next()){
>                int index = termDocs.doc();
>                if(reader.document(index).get("id").equals(id)){
>                    reader.deleteDocument(index);
>                }
>            }

Iterating documents and string comparing stored values is not very  
efficient. Use a query instead, something like this:

BooleanQuery query = new BooleanQuery();
query.add(new TermQuery(term), Occurs.MUST);
query.add(new TermQuery(new Term("id", id), Occurs.MUST);
searcher.search(query, new HitCollector() {
   public void collect(int doc, float score) {
     reader.deleteDocument(doc);
   }
});


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 22 16:30:24 2008
Return-Path: <java-user-return-34528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80981 invoked from network); 22 Jun 2008 16:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2008 16:30:24 -0000
Received: (qmail 26983 invoked by uid 500); 22 Jun 2008 16:30:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26953 invoked by uid 500); 22 Jun 2008 16:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26930 invoked by uid 99); 22 Jun 2008 16:30:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 09:30:18 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 16:29:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KASRm-0006EK-GM
	for java-user@lucene.apache.org; Sun, 22 Jun 2008 09:29:46 -0700
Message-ID: <18056289.post@talk.nabble.com>
Date: Sun, 22 Jun 2008 09:29:46 -0700 (PDT)
From: "Dr. Fish" <spam@thetunaman.com>
To: java-user@lucene.apache.org
Subject: How to make mutually exclusive lists of results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spam@thetunaman.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I currently am using Lucene to index documents. I index 4 fields, the body
of the document, the city it is related to, the state it is related to, and
the country it is related to.

I have a java web application where the user types in some search text.. and
it searches the body of the document for matches. This works fine.

However, what I am loooking to do is generate 3 separate mutually exclusive
search results.

List 1) Results from text search, but also matching current user city,
state, and country

List 2) Results from text search, but also matching current state and
country

List 3) Result from text search, but also matching current country

The idea would be for each search to be mutually exclusive.

The naive way I know to do this, is to run 3 searches. For example if My
Search text was "bacon", and my City was Chicago, IL... I could do something
like


List 1 -> body:"bacon" AND city:"chicago" AND state:"illinois" AND
country:"united states"

List 2 ->  body:"bacon" NOT city:chicago" AND state:"illinois" AND
country:"united states"

List 3-> body:"bacon" NOT city:chicago" NOT state:"illinois" AND
country:"united states"


So this gives me my 3 mutually exclusive lists... but it makes me search the
database 3 times for each search I want to do. This seems rather jank.  Is
there some fancy Lucene tool I am missing that would let me do this?  I
don't have a ton of Lucene experience, so I think I am missing something
obvious.




-- 
View this message in context: http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-results-tp18056289p18056289.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 22 16:38:42 2008
Return-Path: <java-user-return-34529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81708 invoked from network); 22 Jun 2008 16:38:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2008 16:38:41 -0000
Received: (qmail 33435 invoked by uid 500); 22 Jun 2008 16:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33404 invoked by uid 500); 22 Jun 2008 16:38:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33393 invoked by uid 99); 22 Jun 2008 16:38:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 09:38:36 -0700
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 16:37:45 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to make mutually exclusive lists of results
Date: Sun, 22 Jun 2008 12:35:42 -0400
Message-ID: <9294E20AED46934EA459020706463F94C598C5@SUEXCL-02.ad.syr.edu>
In-Reply-To: <18056289.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to make mutually exclusive lists of results
Thread-Index: AcjUhUjRcM7vhAbZRmyA72Vbt65e+wAAFFHA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dr. Fish,

You could make just a single query with the broadest query possible - =
e.g.=20

  bacon AND country:"united states"

and then iterate over all results, dividing them into your three buckets =
based on the values of the other two fields.

Steve

On 06/22/2008 at 12:29 PM, Dr. Fish wrote:
>=20
> Hi,
>=20
> I currently am using Lucene to index documents. I index 4
> fields, the body
> of the document, the city it is related to, the state it is
> related to, and
> the country it is related to.
>=20
> I have a java web application where the user types in some
> search text.. and
> it searches the body of the document for matches. This works fine.
>=20
> However, what I am loooking to do is generate 3 separate
> mutually exclusive
> search results.
>=20
> List 1) Results from text search, but also matching current user city,
> state, and country
>=20
> List 2) Results from text search, but also matching current state and
> country
>=20
> List 3) Result from text search, but also matching current country
>=20
> The idea would be for each search to be mutually exclusive.
>=20
> The naive way I know to do this, is to run 3 searches. For
> example if My
> Search text was "bacon", and my City was Chicago, IL... I
> could do something
> like
>=20
>=20
> List 1 -> body:"bacon" AND city:"chicago" AND state:"illinois" AND
> country:"united states"
>=20
> List 2 ->  body:"bacon" NOT city:chicago" AND state:"illinois" AND
> country:"united states"
>=20
> List 3-> body:"bacon" NOT city:chicago" NOT state:"illinois" AND
> country:"united states"
>=20
>=20
> So this gives me my 3 mutually exclusive lists... but it
> makes me search the
> database 3 times for each search I want to do. This seems
> rather jank.  Is
> there some fancy Lucene tool I am missing that would let me
> do this?  I
> don't have a ton of Lucene experience, so I think I am
> missing something
> obvious.
>=20
>=20
>=20
>=20
> -- View this message in context:
> http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-
> results-tp18056289p18056289.html Sent from the Lucene - Java Users
> mailing list archive at Nabble.com.
>=20
>=20
> --------------------------------------------------------------------- =
To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 22 17:02:10 2008
Return-Path: <java-user-return-34530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85033 invoked from network); 22 Jun 2008 17:02:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2008 17:02:10 -0000
Received: (qmail 46691 invoked by uid 500); 22 Jun 2008 17:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46665 invoked by uid 500); 22 Jun 2008 17:02:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46654 invoked by uid 99); 22 Jun 2008 17:02:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 10:02:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 17:01:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KASwX-00079w-LM
	for java-user@lucene.apache.org; Sun, 22 Jun 2008 10:01:33 -0700
Message-ID: <18056606.post@talk.nabble.com>
Date: Sun, 22 Jun 2008 10:01:33 -0700 (PDT)
From: "Dr. Fish" <spam@thetunaman.com>
To: java-user@lucene.apache.org
Subject: RE: How to make mutually exclusive lists of results
In-Reply-To: <9294E20AED46934EA459020706463F94C598C5@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spam@thetunaman.com
References: <18056289.post@talk.nabble.com> <9294E20AED46934EA459020706463F94C598C5@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


I tried this first, and I was having trouble iterating over them.


If I do something like this

hit.getDocument().getField("CountryID").toString()

I get a big long BS object.. not just the result of my search.

I also tried messing with the tokenStreamValue(), and had the same result. 
How do I just get the value "countryID" out of the document?


Steven A Rowe wrote:
> 
> Hi Dr. Fish,
> 
> You could make just a single query with the broadest query possible - e.g. 
> 
>   bacon AND country:"united states"
> 
> and then iterate over all results, dividing them into your three buckets
> based on the values of the other two fields.
> 
> Steve
> 
> On 06/22/2008 at 12:29 PM, Dr. Fish wrote:
>> 
>> Hi,
>> 
>> I currently am using Lucene to index documents. I index 4
>> fields, the body
>> of the document, the city it is related to, the state it is
>> related to, and
>> the country it is related to.
>> 
>> I have a java web application where the user types in some
>> search text.. and
>> it searches the body of the document for matches. This works fine.
>> 
>> However, what I am loooking to do is generate 3 separate
>> mutually exclusive
>> search results.
>> 
>> List 1) Results from text search, but also matching current user city,
>> state, and country
>> 
>> List 2) Results from text search, but also matching current state and
>> country
>> 
>> List 3) Result from text search, but also matching current country
>> 
>> The idea would be for each search to be mutually exclusive.
>> 
>> The naive way I know to do this, is to run 3 searches. For
>> example if My
>> Search text was "bacon", and my City was Chicago, IL... I
>> could do something
>> like
>> 
>> 
>> List 1 -> body:"bacon" AND city:"chicago" AND state:"illinois" AND
>> country:"united states"
>> 
>> List 2 ->  body:"bacon" NOT city:chicago" AND state:"illinois" AND
>> country:"united states"
>> 
>> List 3-> body:"bacon" NOT city:chicago" NOT state:"illinois" AND
>> country:"united states"
>> 
>> 
>> So this gives me my 3 mutually exclusive lists... but it
>> makes me search the
>> database 3 times for each search I want to do. This seems
>> rather jank.  Is
>> there some fancy Lucene tool I am missing that would let me
>> do this?  I
>> don't have a ton of Lucene experience, so I think I am
>> missing something
>> obvious.
>> 
>> 
>> 
>> 
>> -- View this message in context:
>> http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-
>> results-tp18056289p18056289.html Sent from the Lucene - Java Users
>> mailing list archive at Nabble.com.
>> 
>> 
>> --------------------------------------------------------------------- To
>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>> additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>>
> 
>  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-results-tp18056289p18056606.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 22 19:00:14 2008
Return-Path: <java-user-return-34531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17735 invoked from network); 22 Jun 2008 19:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jun 2008 19:00:14 -0000
Received: (qmail 22792 invoked by uid 500); 22 Jun 2008 19:00:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22761 invoked by uid 500); 22 Jun 2008 19:00:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22750 invoked by uid 99); 22 Jun 2008 19:00:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 12:00:09 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 18:59:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KAUmm-0002Zc-EW
	for java-user@lucene.apache.org; Sun, 22 Jun 2008 11:59:36 -0700
Message-ID: <18057829.post@talk.nabble.com>
Date: Sun, 22 Jun 2008 11:59:36 -0700 (PDT)
From: "Dr. Fish" <spam@thetunaman.com>
To: java-user@lucene.apache.org
Subject: RE: How to make mutually exclusive lists of results
In-Reply-To: <18056606.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spam@thetunaman.com
References: <18056289.post@talk.nabble.com> <9294E20AED46934EA459020706463F94C598C5@SUEXCL-02.ad.syr.edu> <18056606.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ah I think I got it


hit.getDocument().getField("CityID").stringValue() seems to be what I wanted


Thanks!



Dr. Fish wrote:
> 
> I tried this first, and I was having trouble iterating over them.
> 
> 
> If I do something like this
> 
> hit.getDocument().getField("CountryID").toString()
> 
> I get a big long BS object.. not just the result of my search.
> 
> I also tried messing with the tokenStreamValue(), and had the same result. 
> How do I just get the value "countryID" out of the document?
> 
> 
> Steven A Rowe wrote:
>> 
>> Hi Dr. Fish,
>> 
>> You could make just a single query with the broadest query possible -
>> e.g. 
>> 
>>   bacon AND country:"united states"
>> 
>> and then iterate over all results, dividing them into your three buckets
>> based on the values of the other two fields.
>> 
>> Steve
>> 
>> On 06/22/2008 at 12:29 PM, Dr. Fish wrote:
>>> 
>>> Hi,
>>> 
>>> I currently am using Lucene to index documents. I index 4
>>> fields, the body
>>> of the document, the city it is related to, the state it is
>>> related to, and
>>> the country it is related to.
>>> 
>>> I have a java web application where the user types in some
>>> search text.. and
>>> it searches the body of the document for matches. This works fine.
>>> 
>>> However, what I am loooking to do is generate 3 separate
>>> mutually exclusive
>>> search results.
>>> 
>>> List 1) Results from text search, but also matching current user city,
>>> state, and country
>>> 
>>> List 2) Results from text search, but also matching current state and
>>> country
>>> 
>>> List 3) Result from text search, but also matching current country
>>> 
>>> The idea would be for each search to be mutually exclusive.
>>> 
>>> The naive way I know to do this, is to run 3 searches. For
>>> example if My
>>> Search text was "bacon", and my City was Chicago, IL... I
>>> could do something
>>> like
>>> 
>>> 
>>> List 1 -> body:"bacon" AND city:"chicago" AND state:"illinois" AND
>>> country:"united states"
>>> 
>>> List 2 ->  body:"bacon" NOT city:chicago" AND state:"illinois" AND
>>> country:"united states"
>>> 
>>> List 3-> body:"bacon" NOT city:chicago" NOT state:"illinois" AND
>>> country:"united states"
>>> 
>>> 
>>> So this gives me my 3 mutually exclusive lists... but it
>>> makes me search the
>>> database 3 times for each search I want to do. This seems
>>> rather jank.  Is
>>> there some fancy Lucene tool I am missing that would let me
>>> do this?  I
>>> don't have a ton of Lucene experience, so I think I am
>>> missing something
>>> obvious.
>>> 
>>> 
>>> 
>>> 
>>> -- View this message in context:
>>> http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-
>>> results-tp18056289p18056289.html Sent from the Lucene - Java Users
>>> mailing list archive at Nabble.com.
>>> 
>>> 
>>> --------------------------------------------------------------------- To
>>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>>> additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>>>
>> 
>>  
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-results-tp18056289p18057829.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 00:34:56 2008
Return-Path: <java-user-return-34532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36784 invoked from network); 23 Jun 2008 00:34:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 00:34:56 -0000
Received: (qmail 18346 invoked by uid 500); 23 Jun 2008 00:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18301 invoked by uid 500); 23 Jun 2008 00:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18287 invoked by uid 99); 23 Jun 2008 00:34:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 17:34:51 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 00:34:01 +0000
Received: by an-out-0708.google.com with SMTP id c37so514118anc.49
        for <java-user@lucene.apache.org>; Sun, 22 Jun 2008 17:34:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NNiEuVWsOxHSjOZPNo+gm0AVOYcGlM0/FpFKHAdJJOc=;
        b=o/oxWU64LpvWYRExbqz4heML8UHwykLmxUsOajy8/+YUUaSBN7Vm36ENpINEtVq9W8
         fDZOqT2fKKQ78YRMCnPTLp3zTgpnnmH/1bU1qdLQTpMnBP5gnzGFiHteFc/4caIlNx82
         5fxB/PYNgTcnhxkQimfWx1fhs6ULiUvmOHBp0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bcKuhdWECe9aJb1BOw8LrQGXRe13uTi89Cd/bXmcawsBw1qZg99BpCgQ9igJVsGf8k
         GmHaAPIFHHK8rY0aeG+gwJTAW7nxgJDyxBCNCmVOccvVB1uK1ilPM87kUEQBaLJUhK/8
         X1bBwNT4FzDGaY2cI6ZZ/pauUyIJ2tn5n8RjE=
Received: by 10.100.172.16 with SMTP id u16mr11949898ane.9.1214181260137;
        Sun, 22 Jun 2008 17:34:20 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Sun, 22 Jun 2008 17:34:20 -0700 (PDT)
Message-ID: <359a92830806221734s493a7ba1k6559fd8c64d9ea1f@mail.gmail.com>
Date: Sun, 22 Jun 2008 20:34:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to make mutually exclusive lists of results
In-Reply-To: <18057829.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13108_5966040.1214181260128"
References: <18056289.post@talk.nabble.com>
	 <9294E20AED46934EA459020706463F94C598C5@SUEXCL-02.ad.syr.edu>
	 <18056606.post@talk.nabble.com> <18057829.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13108_5966040.1214181260128
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Watch out though. By "hit' I assume you mean a Hits object. Iterating
over a large result set with a Hits object can be very inefficient because
the query re-executes every 100 or so. Think about a HitCollector
instead.

Best
Erick.



On Sun, Jun 22, 2008 at 2:59 PM, Dr. Fish <spam@thetunaman.com> wrote:

>
> Ah I think I got it
>
>
> hit.getDocument().getField("CityID").stringValue() seems to be what I
> wanted
>
>
> Thanks!
>
>
>
> Dr. Fish wrote:
> >
> > I tried this first, and I was having trouble iterating over them.
> >
> >
> > If I do something like this
> >
> > hit.getDocument().getField("CountryID").toString()
> >
> > I get a big long BS object.. not just the result of my search.
> >
> > I also tried messing with the tokenStreamValue(), and had the same
> result.
> > How do I just get the value "countryID" out of the document?
> >
> >
> > Steven A Rowe wrote:
> >>
> >> Hi Dr. Fish,
> >>
> >> You could make just a single query with the broadest query possible -
> >> e.g.
> >>
> >>   bacon AND country:"united states"
> >>
> >> and then iterate over all results, dividing them into your three buckets
> >> based on the values of the other two fields.
> >>
> >> Steve
> >>
> >> On 06/22/2008 at 12:29 PM, Dr. Fish wrote:
> >>>
> >>> Hi,
> >>>
> >>> I currently am using Lucene to index documents. I index 4
> >>> fields, the body
> >>> of the document, the city it is related to, the state it is
> >>> related to, and
> >>> the country it is related to.
> >>>
> >>> I have a java web application where the user types in some
> >>> search text.. and
> >>> it searches the body of the document for matches. This works fine.
> >>>
> >>> However, what I am loooking to do is generate 3 separate
> >>> mutually exclusive
> >>> search results.
> >>>
> >>> List 1) Results from text search, but also matching current user city,
> >>> state, and country
> >>>
> >>> List 2) Results from text search, but also matching current state and
> >>> country
> >>>
> >>> List 3) Result from text search, but also matching current country
> >>>
> >>> The idea would be for each search to be mutually exclusive.
> >>>
> >>> The naive way I know to do this, is to run 3 searches. For
> >>> example if My
> >>> Search text was "bacon", and my City was Chicago, IL... I
> >>> could do something
> >>> like
> >>>
> >>>
> >>> List 1 -> body:"bacon" AND city:"chicago" AND state:"illinois" AND
> >>> country:"united states"
> >>>
> >>> List 2 ->  body:"bacon" NOT city:chicago" AND state:"illinois" AND
> >>> country:"united states"
> >>>
> >>> List 3-> body:"bacon" NOT city:chicago" NOT state:"illinois" AND
> >>> country:"united states"
> >>>
> >>>
> >>> So this gives me my 3 mutually exclusive lists... but it
> >>> makes me search the
> >>> database 3 times for each search I want to do. This seems
> >>> rather jank.  Is
> >>> there some fancy Lucene tool I am missing that would let me
> >>> do this?  I
> >>> don't have a ton of Lucene experience, so I think I am
> >>> missing something
> >>> obvious.
> >>>
> >>>
> >>>
> >>>
> >>> -- View this message in context:
> >>> http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-
> >>> results-tp18056289p18056289.html Sent from the Lucene - Java Users
> >>> mailing list archive at Nabble.com.
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> To
> >>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> >>> additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-results-tp18056289p18057829.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13108_5966040.1214181260128--

From java-user-return-34533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 01:27:24 2008
Return-Path: <java-user-return-34533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62235 invoked from network); 23 Jun 2008 01:27:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 01:27:24 -0000
Received: (qmail 37538 invoked by uid 500); 23 Jun 2008 01:27:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37501 invoked by uid 500); 23 Jun 2008 01:27:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37490 invoked by uid 99); 23 Jun 2008 01:27:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 18:27:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 01:26:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KAapT-0006D3-7l
	for java-user@lucene.apache.org; Sun, 22 Jun 2008 18:26:47 -0700
Message-ID: <18061117.post@talk.nabble.com>
Date: Sun, 22 Jun 2008 18:26:47 -0700 (PDT)
From: "Dr. Fish" <spam@thetunaman.com>
To: java-user@lucene.apache.org
Subject: Re: How to make mutually exclusive lists of results
In-Reply-To: <359a92830806221734s493a7ba1k6559fd8c64d9ea1f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spam@thetunaman.com
References: <18056289.post@talk.nabble.com> <9294E20AED46934EA459020706463F94C598C5@SUEXCL-02.ad.syr.edu> <18056606.post@talk.nabble.com> <18057829.post@talk.nabble.com> <359a92830806221734s493a7ba1k6559fd8c64d9ea1f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ah great that was the kind of stuff I was looking for.

Right now I have < 1000 results, so it won't kill me to use hits. I will
look into Hit Collection for my next release to fix that... 




Erick Erickson wrote:
> 
> Watch out though. By "hit' I assume you mean a Hits object. Iterating
> over a large result set with a Hits object can be very inefficient because
> the query re-executes every 100 or so. Think about a HitCollector
> instead.
> 
> Best
> Erick.
> 
> 
> 
> On Sun, Jun 22, 2008 at 2:59 PM, Dr. Fish <spam@thetunaman.com> wrote:
> 
>>
>> Ah I think I got it
>>
>>
>> hit.getDocument().getField("CityID").stringValue() seems to be what I
>> wanted
>>
>>
>> Thanks!
>>
>>
>>
>> Dr. Fish wrote:
>> >
>> > I tried this first, and I was having trouble iterating over them.
>> >
>> >
>> > If I do something like this
>> >
>> > hit.getDocument().getField("CountryID").toString()
>> >
>> > I get a big long BS object.. not just the result of my search.
>> >
>> > I also tried messing with the tokenStreamValue(), and had the same
>> result.
>> > How do I just get the value "countryID" out of the document?
>> >
>> >
>> > Steven A Rowe wrote:
>> >>
>> >> Hi Dr. Fish,
>> >>
>> >> You could make just a single query with the broadest query possible -
>> >> e.g.
>> >>
>> >>   bacon AND country:"united states"
>> >>
>> >> and then iterate over all results, dividing them into your three
>> buckets
>> >> based on the values of the other two fields.
>> >>
>> >> Steve
>> >>
>> >> On 06/22/2008 at 12:29 PM, Dr. Fish wrote:
>> >>>
>> >>> Hi,
>> >>>
>> >>> I currently am using Lucene to index documents. I index 4
>> >>> fields, the body
>> >>> of the document, the city it is related to, the state it is
>> >>> related to, and
>> >>> the country it is related to.
>> >>>
>> >>> I have a java web application where the user types in some
>> >>> search text.. and
>> >>> it searches the body of the document for matches. This works fine.
>> >>>
>> >>> However, what I am loooking to do is generate 3 separate
>> >>> mutually exclusive
>> >>> search results.
>> >>>
>> >>> List 1) Results from text search, but also matching current user
>> city,
>> >>> state, and country
>> >>>
>> >>> List 2) Results from text search, but also matching current state and
>> >>> country
>> >>>
>> >>> List 3) Result from text search, but also matching current country
>> >>>
>> >>> The idea would be for each search to be mutually exclusive.
>> >>>
>> >>> The naive way I know to do this, is to run 3 searches. For
>> >>> example if My
>> >>> Search text was "bacon", and my City was Chicago, IL... I
>> >>> could do something
>> >>> like
>> >>>
>> >>>
>> >>> List 1 -> body:"bacon" AND city:"chicago" AND state:"illinois" AND
>> >>> country:"united states"
>> >>>
>> >>> List 2 ->  body:"bacon" NOT city:chicago" AND state:"illinois" AND
>> >>> country:"united states"
>> >>>
>> >>> List 3-> body:"bacon" NOT city:chicago" NOT state:"illinois" AND
>> >>> country:"united states"
>> >>>
>> >>>
>> >>> So this gives me my 3 mutually exclusive lists... but it
>> >>> makes me search the
>> >>> database 3 times for each search I want to do. This seems
>> >>> rather jank.  Is
>> >>> there some fancy Lucene tool I am missing that would let me
>> >>> do this?  I
>> >>> don't have a ton of Lucene experience, so I think I am
>> >>> missing something
>> >>> obvious.
>> >>>
>> >>>
>> >>>
>> >>>
>> >>> -- View this message in context:
>> >>> http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-
>> >>> results-tp18056289p18056289.html Sent from the Lucene - Java Users
>> >>> mailing list archive at Nabble.com.
>> >>>
>> >>>
>> >>> ---------------------------------------------------------------------
>> To
>> >>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>> >>> additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-results-tp18056289p18057829.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-make-mutually-exclusive-lists-of-results-tp18056289p18061117.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 01:57:03 2008
Return-Path: <java-user-return-34534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77452 invoked from network); 23 Jun 2008 01:57:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 01:57:03 -0000
Received: (qmail 44716 invoked by uid 500); 23 Jun 2008 01:56:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44683 invoked by uid 500); 23 Jun 2008 01:56:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44672 invoked by uid 99); 23 Jun 2008 01:56:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 18:56:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 01:56:09 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6B3D24A8226
	for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 11:58:30 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: creating Array of IndexReaders
Date: Mon, 23 Jun 2008 11:57:25 +1000
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <18023594.post@talk.nabble.com> <386073.89631.qm@web50302.mail.re2.yahoo.com> <18042275.post@talk.nabble.com>
In-Reply-To: <18042275.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806231157.25596.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Saturday 21 June 2008 18:57:49 Sebastin wrote:
> Since i am maintaining more than 1.5 years records in the windows 2003
> server,based on the user input for example if the user wants to display
> june 1 - june 15 folders and fetch the records from them.if the user wants
> to display may 1-may15 records i need to open those folders.thatswhy i am
> opening the index readers based on the user input.is it possible to create
> the array of index raders based on user input.

Is that not what your original code was already doing?  If not, some small 
modification must be all you really need.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 06:22:10 2008
Return-Path: <java-user-return-34535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51312 invoked from network); 23 Jun 2008 06:22:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 06:22:10 -0000
Received: (qmail 98048 invoked by uid 500); 23 Jun 2008 06:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97819 invoked by uid 500); 23 Jun 2008 06:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97808 invoked by uid 99); 23 Jun 2008 06:22:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 23:22:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:21:16 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1048230tic.11
        for <java-user@lucene.apache.org>; Sun, 22 Jun 2008 23:21:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=R6kLXpDR/aAEyadbWlWZOZ3jhz5mrunK2Iey0lHG918=;
        b=fYkaz/Y8APE5d9WhKqdCZZLkIF7RRFJmEr5g30WIpE89srbWR8sBeTMIH8iG2LvJo2
         I0IvfqHrfLnUkSMc/AL4WYz9KTKFnT9SVsqJy2vEUhubuav+2UpXcAf+AEmOO83Mub1Q
         24Wiob/gSrtt6Q9l/LqaTlpnnk1tIUJaWXxS4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=jJX/ZquXZPkEPKrxsomqOOTK/SuSze5VjT+hvdujXEFoqd+ET3jV6+lg6Ozq9fs5UX
         CX7+gBxlZg4eE6/Drwm7R5L1mTy4EWyd6S11Vh1xyUhavBiuUVD78PKJUSzC4FH7A66l
         VE4ozcl2NHeR4i7aAqhPVrgEYJ7UK78Stprdg=
Received: by 10.110.41.17 with SMTP id o17mr5465016tio.18.1214202077993;
        Sun, 22 Jun 2008 23:21:17 -0700 (PDT)
Received: by 10.110.10.14 with HTTP; Sun, 22 Jun 2008 23:21:17 -0700 (PDT)
Message-ID: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
Date: Mon, 23 Jun 2008 11:51:17 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene search options
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12965_21237951.1214202077980"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12965_21237951.1214202077980
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I am using Lucene for creating indexes. There is one field as "email" which
stored the email id.
I have few queries regarding searching:
1. I want to search for all the records having domain as "gmail.com" . So,
is there a way by which I can do a partial search on "email" field such that
I get the records matching only the domain name.
I think wildcard (*) cannot be used in the beginning :(

2. If I just want to search for the records which are not matching email as
"abc@xyz.com"
How can I search for it. Here, MUST_NOT cannot be used alone. Is there a way
out?


Please help.

Thanks,
Aditi

------=_Part_12965_21237951.1214202077980--

From java-user-return-34536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 06:26:00 2008
Return-Path: <java-user-return-34536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52180 invoked from network); 23 Jun 2008 06:25:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 06:25:59 -0000
Received: (qmail 6477 invoked by uid 500); 23 Jun 2008 06:25:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6445 invoked by uid 500); 23 Jun 2008 06:25:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6434 invoked by uid 99); 23 Jun 2008 06:25:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 23:25:54 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [61.95.162.76] (HELO kecgate02.infosys.com) (61.95.162.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:25:05 +0000
X-TM-IMSS-Message-ID:<3692a4600000ca8e@infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by infosys.com ([61.95.162.76]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 3692a4600000ca8e ; Mon, 23 Jun 2008 11:54:01 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub03.ad.infosys.com ([10.66.236.43]) with mapi; Mon, 23 Jun 2008
 11:55:19 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 23 Jun 2008 11:55:19 +0530
Subject: RE: lucene search options
Thread-Topic: lucene search options
Thread-Index: AcjU+XqM2TNwiDe6ROWrAaUug/fyUQAABrbA
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07ECD64783@BLRKECMBX06.ad.infosys.com>
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
In-Reply-To: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

One=20way=20of=20doing=20it=20is=20while=20parsing=20email=20if=20it=20ha=
s=20.gmail.com=20add=20it=20to=20different=20field=20also.
Warm=20Regards,
Allahbaksh
Allahbaksh=20Mohammedali=20Asadullah,
Software=20Engineering=20&=20Technology=20Labs,
Infosys=20Technolgies=20Limited,=20Electronics=20City,
Hosur=20Road,=20Bangalore=20560=20100,=20India.
*Board:=20+91-80-28520261=20|=20Extn:=2053915=20|=20Direct:=2041173915.
Fax:=20+91-80-28520362=20|=20Mobile:=20+91-9845505322.
http://allahbaksh.blogspot.com


-----Original=20Message-----
From:=20Aditi=20Goyal=20[mailto:aditigupta20@gmail.com]
Sent:=20Monday,=20June=2023,=202008=2011:51=20AM
To:=20java-user@lucene.apache.org
Subject:=20lucene=20search=20options

Hi=20All,

I=20am=20using=20Lucene=20for=20creating=20indexes.=20There=20is=20one=20=
field=20as=20"email"=20which
stored=20the=20email=20id.
I=20have=20few=20queries=20regarding=20searching:
1.=20I=20want=20to=20search=20for=20all=20the=20records=20having=20domain=
=20as=20"gmail.com"=20.=20So,
is=20there=20a=20way=20by=20which=20I=20can=20do=20a=20partial=20search=
=20on=20"email"=20field=20such=20that
I=20get=20the=20records=20matching=20only=20the=20domain=20name.
I=20think=20wildcard=20(*)=20cannot=20be=20used=20in=20the=20beginning=20=
:(

2.=20If=20I=20just=20want=20to=20search=20for=20the=20records=20which=20a=
re=20not=20matching=20email=20as
"abc@xyz.com"
How=20can=20I=20search=20for=20it.=20Here,=20MUST_NOT=20cannot=20be=20use=
d=20alone.=20Is=20there=20a=20way
out?


Please=20help.

Thanks,
Aditi

****************=20CAUTION=20-=20Disclaimer=20*****************
This=20e-mail=20contains=20PRIVILEGED=20AND=20CONFIDENTIAL=20INFORMATION=
=20intended=20solely=20
for=20the=20use=20of=20the=20addressee(s).=20If=20you=20are=20not=20the=
=20intended=20recipient,=20please=20
notify=20the=20sender=20by=20e-mail=20and=20delete=20the=20original=20mes=
sage.=20Further,=20you=20are=20not=20
to=20copy,=20disclose,=20or=20distribute=20this=20e-mail=20or=20its=20con=
tents=20to=20any=20other=20person=20and=20
any=20such=20actions=20are=20unlawful.=20This=20e-mail=20may=20contain=20=
viruses.=20Infosys=20has=20taken=20
every=20reasonable=20precaution=20to=20minimize=20this=20risk,=20but=20is=
=20not=20liable=20for=20any=20damage=20
you=20may=20sustain=20as=20a=20result=20of=20any=20virus=20in=20this=20e-=
mail.=20You=20should=20carry=20out=20your=20
own=20virus=20checks=20before=20opening=20the=20e-mail=20or=20attachment.=
=20Infosys=20reserves=20the=20
right=20to=20monitor=20and=20review=20the=20content=20of=20all=20messages=
=20sent=20to=20or=20from=20this=20e-mail=20
address.=20Messages=20sent=20to=20or=20from=20this=20e-mail=20address=20m=
ay=20be=20stored=20on=20the=20
Infosys=20e-mail=20system.
***INFOSYS********=20End=20of=20Disclaimer=20********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 06:31:10 2008
Return-Path: <java-user-return-34537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53605 invoked from network); 23 Jun 2008 06:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 06:31:09 -0000
Received: (qmail 10022 invoked by uid 500); 23 Jun 2008 06:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9991 invoked by uid 500); 23 Jun 2008 06:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9980 invoked by uid 99); 23 Jun 2008 06:31:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 23:31:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:30:15 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1050501tic.11
        for <java-user@lucene.apache.org>; Sun, 22 Jun 2008 23:30:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fh4I5fZE9K6lvSuCSTFY4Owxi7y6SfjQBncmhROt2FQ=;
        b=gI7qkDerPsYYMCcPFGe+NXLUlVBe3V8uZpUpPH2Sa3UbcI74GCbJFkyDt98p0rvz+2
         j3bEJl5wNkNUHKKULfPnZyECwCk89INwT45RnDs6J7W0lM3vBpKVAcSnecYjVjziDMBZ
         yQBecgOXMCVCeccVtrX+psO9MAew0Me/rXGU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QWdqQwv6PFC5DmVQrnU/W2vMcVXOZZTH1kVw9IWkrwWtEfGpZwAOTYUtC+EQl5OD9F
         2Ue8gW5gg5O8rNUcorkncKTXhLlQlq5EeG9Cjn5TuU7dCw3qJV0djPdZLeYa4Zxxokwh
         hE84uB5XOvI0OSc0fxOApvM7wJ1XNlIP2EQSU=
Received: by 10.110.90.9 with SMTP id n9mr5450153tib.53.1214202633625;
        Sun, 22 Jun 2008 23:30:33 -0700 (PDT)
Received: by 10.110.10.14 with HTTP; Sun, 22 Jun 2008 23:30:33 -0700 (PDT)
Message-ID: <6fc71b230806222330x65fca397rd91d272bf307ef29@mail.gmail.com>
Date: Mon, 23 Jun 2008 12:00:33 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07ECD64783@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13074_28413309.1214202633598"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD64783@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13074_28413309.1214202633598
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Allahbaksh, But this was just an example. I want to search for lot
more fields like this.


On Mon, Jun 23, 2008 at 11:55 AM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> One way of doing it is while parsing email if it has .gmail.com add it to
> different field also.
> Warm Regards,
> Allahbaksh
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://allahbaksh.blogspot.com
>
>
> -----Original Message-----
> From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> Sent: Monday, June 23, 2008 11:51 AM
> To: java-user@lucene.apache.org
> Subject: lucene search options
>
> Hi All,
>
> I am using Lucene for creating indexes. There is one field as "email" which
> stored the email id.
> I have few queries regarding searching:
> 1. I want to search for all the records having domain as "gmail.com" . So,
> is there a way by which I can do a partial search on "email" field such
> that
> I get the records matching only the domain name.
> I think wildcard (*) cannot be used in the beginning :(
>
> 2. If I just want to search for the records which are not matching email as
> "abc@xyz.com"
> How can I search for it. Here, MUST_NOT cannot be used alone. Is there a
> way
> out?
>
>
> Please help.
>
> Thanks,
> Aditi
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys has
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserves
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on the
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13074_28413309.1214202633598--

From java-user-return-34538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 06:32:51 2008
Return-Path: <java-user-return-34538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53965 invoked from network); 23 Jun 2008 06:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 06:32:51 -0000
Received: (qmail 12541 invoked by uid 500); 23 Jun 2008 06:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12513 invoked by uid 500); 23 Jun 2008 06:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12502 invoked by uid 99); 23 Jun 2008 06:32:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 23:32:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:31:56 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id EE2A34A8186
	for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 16:34:15 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: lucene search options
Date: Mon, 23 Jun 2008 16:33:11 +1000
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
In-Reply-To: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806231633.11295.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> I think wildcard (*) cannot be used in the beginning :(

Wrong:

http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 06:33:34 2008
Return-Path: <java-user-return-34539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54100 invoked from network); 23 Jun 2008 06:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 06:33:34 -0000
Received: (qmail 14487 invoked by uid 500); 23 Jun 2008 06:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14171 invoked by uid 500); 23 Jun 2008 06:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14160 invoked by uid 99); 23 Jun 2008 06:33:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 23:33:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [220.227.179.21] (HELO Kecgate03.infosys.com) (220.227.179.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:32:40 +0000
X-TM-IMSS-Message-ID:<1476c4e00000dd78@infosys.com>
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by infosys.com ([220.227.179.21]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 1476c4e00000dd78 for <Allahbaksh_Asadullah@infosys.com>; Mon, 23 Jun 2008 12:03:14 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub02.ad.infosys.com ([10.66.236.42]) with mapi; Mon, 23 Jun 2008
 12:02:56 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 23 Jun 2008 12:02:55 +0530
Subject: RE: lucene search options
Thread-Topic: lucene search options
Thread-Index: AcjU+rre0NGbC2+8RaytSpieD1Y0qgAABBaA
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07ECD6478D@BLRKECMBX06.ad.infosys.com>
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD64783@BLRKECMBX06.ad.infosys.com>
 <6fc71b230806222330x65fca397rd91d272bf307ef29@mail.gmail.com>
In-Reply-To: <6fc71b230806222330x65fca397rd91d272bf307ef29@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Usually if you negate the keyword then that document will be skipped. So wh=
at else you want to search. Design of fields is very important.
Warm Regards,
Allahbaksh

Allahbaksh Mohammedali Asadullah,
Software Engineering & Technology Labs,
Infosys Technolgies Limited, Electronics City,
Hosur Road, Bangalore 560 100, India.
*Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
Fax: +91-80-28520362 | Mobile: +91-9845505322.
http://setlabs/slim/
http://allahbaksh.blogspot.com


-----Original Message-----
From: Aditi Goyal [mailto:aditigupta20@gmail.com]
Sent: Monday, June 23, 2008 12:01 PM
To: java-user@lucene.apache.org
Subject: Re: lucene search options

Thanks Allahbaksh, But this was just an example. I want to search for lot
more fields like this.


On Mon, Jun 23, 2008 at 11:55 AM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> One way of doing it is while parsing email if it has .gmail.com add it to
> different field also.
> Warm Regards,
> Allahbaksh
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://allahbaksh.blogspot.com
>
>
> -----Original Message-----
> From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> Sent: Monday, June 23, 2008 11:51 AM
> To: java-user@lucene.apache.org
> Subject: lucene search options
>
> Hi All,
>
> I am using Lucene for creating indexes. There is one field as "email" whi=
ch
> stored the email id.
> I have few queries regarding searching:
> 1. I want to search for all the records having domain as "gmail.com" . So=
,
> is there a way by which I can do a partial search on "email" field such
> that
> I get the records matching only the domain name.
> I think wildcard (*) cannot be used in the beginning :(
>
> 2. If I just want to search for the records which are not matching email =
as
> "abc@xyz.com"
> How can I search for it. Here, MUST_NOT cannot be used alone. Is there a
> way
> out?
>
>
> Please help.
>
> Thanks,
> Aditi
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys h=
as
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserve=
s
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on th=
e
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 06:34:44 2008
Return-Path: <java-user-return-34540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54284 invoked from network); 23 Jun 2008 06:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 06:34:43 -0000
Received: (qmail 16940 invoked by uid 500); 23 Jun 2008 06:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15929 invoked by uid 500); 23 Jun 2008 06:34:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15918 invoked by uid 99); 23 Jun 2008 06:34:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 23:34:39 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [61.95.162.82] (HELO kecgate06.infosys.com) (61.95.162.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:33:49 +0000
X-TM-IMSS-Message-ID:<343bb73d0001dc1f@infosys.com>
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by infosys.com ([61.95.162.82]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 343bb73d0001dc1f for <Allahbaksh_Asadullah@infosys.com>; Mon, 23 Jun 2008 12:03:31 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub04.ad.infosys.com ([10.66.236.44]) with mapi; Mon, 23 Jun 2008
 12:04:03 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 23 Jun 2008 12:04:02 +0530
Subject: RE: lucene search options
Thread-Topic: lucene search options
Thread-Index: AcjU+vfAF3ZsXQ8tRraWKZNTzwbHhwAABGmQ
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07ECD6478F@BLRKECMBX06.ad.infosys.com>
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
 <200806231633.11295.daniel@nuix.com>
In-Reply-To: <200806231633.11295.daniel@nuix.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi=20Daniel,
You=20are=20right=20earlier=20the=20wild=20card=20character=20were=20not=
=20supported=20but=20now=20they=20are=20supported.
Regards,
Allahbaksh


Allahbaksh=20Mohammedali=20Asadullah,
Software=20Engineering=20&=20Technology=20Labs,
Infosys=20Technolgies=20Limited,=20Electronics=20City,
Hosur=20Road,=20Bangalore=20560=20100,=20India.
*Board:=20+91-80-28520261=20|=20Extn:=2053915=20|=20Direct:=2041173915.
Fax:=20+91-80-28520362=20|=20Mobile:=20+91-9845505322.
http://setlabs/slim/
http://allahbaksh.blogspot.com


-----Original=20Message-----
From:=20Daniel=20Noll=20[mailto:daniel@nuix.com]
Sent:=20Monday,=20June=2023,=202008=2012:03=20PM
To:=20java-user@lucene.apache.org
Subject:=20Re:=20lucene=20search=20options

On=20Monday=2023=20June=202008=2016:21:17=20Aditi=20Goyal=20wrote:
>=20I=20think=20wildcard=20(*)=20cannot=20be=20used=20in=20the=20beginnin=
g=20:(

Wrong:

http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParse=
r/QueryParser.html#setAllowLeadingWildcard(boolean)

Daniel

---------------------------------------------------------------------
To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org


****************=20CAUTION=20-=20Disclaimer=20*****************
This=20e-mail=20contains=20PRIVILEGED=20AND=20CONFIDENTIAL=20INFORMATION=
=20intended=20solely=20
for=20the=20use=20of=20the=20addressee(s).=20If=20you=20are=20not=20the=
=20intended=20recipient,=20please=20
notify=20the=20sender=20by=20e-mail=20and=20delete=20the=20original=20mes=
sage.=20Further,=20you=20are=20not=20
to=20copy,=20disclose,=20or=20distribute=20this=20e-mail=20or=20its=20con=
tents=20to=20any=20other=20person=20and=20
any=20such=20actions=20are=20unlawful.=20This=20e-mail=20may=20contain=20=
viruses.=20Infosys=20has=20taken=20
every=20reasonable=20precaution=20to=20minimize=20this=20risk,=20but=20is=
=20not=20liable=20for=20any=20damage=20
you=20may=20sustain=20as=20a=20result=20of=20any=20virus=20in=20this=20e-=
mail.=20You=20should=20carry=20out=20your=20
own=20virus=20checks=20before=20opening=20the=20e-mail=20or=20attachment.=
=20Infosys=20reserves=20the=20
right=20to=20monitor=20and=20review=20the=20content=20of=20all=20messages=
=20sent=20to=20or=20from=20this=20e-mail=20
address.=20Messages=20sent=20to=20or=20from=20this=20e-mail=20address=20m=
ay=20be=20stored=20on=20the=20
Infosys=20e-mail=20system.
***INFOSYS********=20End=20of=20Disclaimer=20********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 06:37:05 2008
Return-Path: <java-user-return-34541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54850 invoked from network); 23 Jun 2008 06:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 06:37:05 -0000
Received: (qmail 19650 invoked by uid 500); 23 Jun 2008 06:37:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19627 invoked by uid 500); 23 Jun 2008 06:37:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19616 invoked by uid 99); 23 Jun 2008 06:37:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Jun 2008 23:37:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:36:10 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1051716tic.11
        for <java-user@lucene.apache.org>; Sun, 22 Jun 2008 23:36:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JVXke+NbQFHoPrZviTASIc4A6KMJpJquP9UPP+u1VKA=;
        b=HmPC8eiL+EtN5McUmmHuKDntmF3evtRPCpc9GuLalJQmuidxG3Q518OxCzCFx3RLnk
         seHi7ZBTbOVZS5f/BMRIY2pcbPRwN7X3iU//fHtWmLSblS22p8Bfdv+kjExRn1JPEUrT
         zvJg8E1Ph4cAy77Cw7V8UAQnBHn2MPG4s3Bdk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=g78NoZi6Oup+vuPEE+pDEwEG9XEtC7PBVrBM09CpGEUtOYhh4OhemFqh5yJZw5sdil
         v7B9t6wMluIw43cmAZ9QFEKJChX0RRNmI2mHt2WSW7k+MsqdyNSCG/JuoVLY3KEci/f1
         q+qM8/NDowuuXaIlRMi4GBXw/nXlB5DX3dd3M=
Received: by 10.110.105.10 with SMTP id d10mr5450819tic.52.1214202988006;
        Sun, 22 Jun 2008 23:36:28 -0700 (PDT)
Received: by 10.110.10.14 with HTTP; Sun, 22 Jun 2008 23:36:27 -0700 (PDT)
Message-ID: <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
Date: Mon, 23 Jun 2008 12:06:27 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <200806231633.11295.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13164_31042476.1214202988001"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13164_31042476.1214202988001
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks a lot Daniel, I will try this option. :)
Is there a way to search for not equal to query alone?

On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:

> On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > I think wildcard (*) cannot be used in the beginning :(
>
> Wrong:
>
>
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29>
>
> Daniel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13164_31042476.1214202988001--

From java-user-return-34542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 07:40:52 2008
Return-Path: <java-user-return-34542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71498 invoked from network); 23 Jun 2008 07:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 07:40:52 -0000
Received: (qmail 89751 invoked by uid 500); 23 Jun 2008 07:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89245 invoked by uid 500); 23 Jun 2008 07:40:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89234 invoked by uid 99); 23 Jun 2008 07:40:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 00:40:46 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [61.95.162.82] (HELO kecgate06.infosys.com) (61.95.162.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 07:39:57 +0000
X-TM-IMSS-Message-ID:<34784a320001ed6b@infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by infosys.com ([61.95.162.82]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 34784a320001ed6b for <Allahbaksh_Asadullah@infosys.com>; Mon, 23 Jun 2008 13:09:41 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub01.ad.infosys.com ([10.66.236.41]) with mapi; Mon, 23 Jun 2008
 13:10:13 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 23 Jun 2008 13:10:11 +0530
Subject: RE: lucene search options
Thread-Topic: lucene search options
Thread-Index: AcjU+48K2NQ526bsSUy/C/QEsBX4VAACKfyA
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
In-Reply-To: <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi=20Aditi,
You=20can=20search=20using=20NOT=20operator.=20You=20can=20go=20through=
=20below=20link=20for=20Query=20details=20http://lucene.apache.org/java/d=
ocs/queryparsersyntax.html
Warm=20Regards,
Allahbaksh

Allahbaksh=20Mohammedali=20Asadullah,
Software=20Engineering=20&=20Technology=20Labs,
Infosys=20Technolgies=20Limited,=20Electronics=20City,
Hosur=20Road,=20Bangalore=20560=20100,=20India.
*Board:=20+91-80-28520261=20|=20Extn:=2053915=20|=20Direct:=2041173915.
Fax:=20+91-80-28520362=20|=20Mobile:=20+91-9845505322.
http://setlabs/slim/
http://allahbaksh.blogspot.com


-----Original=20Message-----
From:=20Aditi=20Goyal=20[mailto:aditigupta20@gmail.com]
Sent:=20Monday,=20June=2023,=202008=2012:06=20PM
To:=20java-user@lucene.apache.org
Subject:=20Re:=20lucene=20search=20options

Thanks=20a=20lot=20Daniel,=20I=20will=20try=20this=20option.=20:)
Is=20there=20a=20way=20to=20search=20for=20not=20equal=20to=20query=20alo=
ne?

On=20Mon,=20Jun=2023,=202008=20at=2012:03=20PM,=20Daniel=20Noll=20<daniel=
@nuix.com>=20wrote:

>=20On=20Monday=2023=20June=202008=2016:21:17=20Aditi=20Goyal=20wrote:
>=20>=20I=20think=20wildcard=20(*)=20cannot=20be=20used=20in=20the=20begi=
nning=20:(
>
>=20Wrong:
>
>
>=20http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryP=
arser/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apa=
che.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.htm=
l#setAllowLeadingWildcard%28boolean%29>
>
>=20Daniel
>
>=20---------------------------------------------------------------------
>=20To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
>=20For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache=
.org
>
>

****************=20CAUTION=20-=20Disclaimer=20*****************
This=20e-mail=20contains=20PRIVILEGED=20AND=20CONFIDENTIAL=20INFORMATION=
=20intended=20solely=20
for=20the=20use=20of=20the=20addressee(s).=20If=20you=20are=20not=20the=
=20intended=20recipient,=20please=20
notify=20the=20sender=20by=20e-mail=20and=20delete=20the=20original=20mes=
sage.=20Further,=20you=20are=20not=20
to=20copy,=20disclose,=20or=20distribute=20this=20e-mail=20or=20its=20con=
tents=20to=20any=20other=20person=20and=20
any=20such=20actions=20are=20unlawful.=20This=20e-mail=20may=20contain=20=
viruses.=20Infosys=20has=20taken=20
every=20reasonable=20precaution=20to=20minimize=20this=20risk,=20but=20is=
=20not=20liable=20for=20any=20damage=20
you=20may=20sustain=20as=20a=20result=20of=20any=20virus=20in=20this=20e-=
mail.=20You=20should=20carry=20out=20your=20
own=20virus=20checks=20before=20opening=20the=20e-mail=20or=20attachment.=
=20Infosys=20reserves=20the=20
right=20to=20monitor=20and=20review=20the=20content=20of=20all=20messages=
=20sent=20to=20or=20from=20this=20e-mail=20
address.=20Messages=20sent=20to=20or=20from=20this=20e-mail=20address=20m=
ay=20be=20stored=20on=20the=20
Infosys=20e-mail=20system.
***INFOSYS********=20End=20of=20Disclaimer=20********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 07:54:12 2008
Return-Path: <java-user-return-34543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74165 invoked from network); 23 Jun 2008 07:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 07:54:11 -0000
Received: (qmail 2100 invoked by uid 500); 23 Jun 2008 07:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2065 invoked by uid 500); 23 Jun 2008 07:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2054 invoked by uid 99); 23 Jun 2008 07:54:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 00:54:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 07:53:16 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1067510tic.11
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 00:53:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eOPm/biS4FZsDnvp+/YJ54mz6jEh/PB+3uHynskiLRU=;
        b=GCy1Vpayok5JPaGbEVgkF6I7W4+7vkPAfATRP371emxw+8JbH1+/QdGSCmd3tGNx8W
         SgnEnfkyOMI2xuiIA0cBhetAnNxaIjklLSBjrQ9FwTn4mNqYX83noC6Eikk69rqMlPt8
         caOEthEUaKl53nlu3aCHH53Rh9GOICnyotj+k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=H9kljdc0k6aO8JkllAtYcx+Jb4wjCH4145ylR983X2FwE29uPAONoaavMxrrpkNMse
         LEEvA/l27/llOiRdPl4b+Oz64spDYB7V57N2V+7mi0XshHSAqivOR1W78IY+SkoJagqm
         m3clGZV4BAYGh4sh88d1CClr6iTQkywqVZiZc=
Received: by 10.110.40.8 with SMTP id n8mr5542358tin.7.1214207614438;
        Mon, 23 Jun 2008 00:53:34 -0700 (PDT)
Received: by 10.110.10.14 with HTTP; Mon, 23 Jun 2008 00:53:34 -0700 (PDT)
Message-ID: <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
Date: Mon, 23 Jun 2008 13:23:34 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13985_8323636.1214207614447"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13985_8323636.1214207614447
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you Allahbaksh for taking so much pains. The link says it cannot be
used alone.

Note: The NOT operator cannot be used with just one term. For example, the
following search will return no results:

NOT "jakarta apache"
Thanks,
Aditi


On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> Hi Aditi,
> You can search using NOT operator. You can go through below link for Query
> details http://lucene.apache.org/java/docs/queryparsersyntax.html
> Warm Regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://setlabs/slim/
> http://allahbaksh.blogspot.com
>
>
> -----Original Message-----
> From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> Sent: Monday, June 23, 2008 12:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: lucene search options
>
> Thanks a lot Daniel, I will try this option. :)
> Is there a way to search for not equal to query alone?
>
> On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
>
> > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > I think wildcard (*) cannot be used in the beginning :(
> >
> > Wrong:
> >
> >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29>
> <
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> >
> >
> > Daniel
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys has
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserves
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on the
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13985_8323636.1214207614447--

From java-user-return-34544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 07:55:41 2008
Return-Path: <java-user-return-34544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74874 invoked from network); 23 Jun 2008 07:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 07:55:41 -0000
Received: (qmail 7116 invoked by uid 500); 23 Jun 2008 07:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6721 invoked by uid 500); 23 Jun 2008 07:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6710 invoked by uid 99); 23 Jun 2008 07:55:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 00:55:35 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [61.95.162.76] (HELO kecgate02.infosys.com) (61.95.162.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 07:54:45 +0000
X-TM-IMSS-Message-ID:<36e4c66f0000e1ee@infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by infosys.com ([61.95.162.76]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 36e4c66f0000e1ee ; Mon, 23 Jun 2008 13:23:43 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub01.ad.infosys.com ([10.66.236.41]) with mapi; Mon, 23 Jun 2008
 13:25:02 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 23 Jun 2008 13:25:00 +0530
Subject: RE: lucene search options
Thread-Topic: lucene search options
Thread-Index: AcjVBlOeyhBabOpASxGftlzrzTFazAAABJAw
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07ECD647DF@BLRKECMBX06.ad.infosys.com>
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
In-Reply-To: <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Yes Aditi You can use it alone.
Warm regards,
Allahbaksh

Allahbaksh Mohammedali Asadullah,
Software Engineering & Technology Labs,
Infosys Technolgies Limited, Electronics City,
Hosur Road, Bangalore 560 100, India.
*Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
Fax: +91-80-28520362 | Mobile: +91-9845505322.
http://setlabs/slim/
http://allahbaksh.blogspot.com


-----Original Message-----
From: Aditi Goyal [mailto:aditigupta20@gmail.com]
Sent: Monday, June 23, 2008 1:24 PM
To: java-user@lucene.apache.org
Subject: Re: lucene search options

Thank you Allahbaksh for taking so much pains. The link says it cannot be
used alone.

Note: The NOT operator cannot be used with just one term. For example, the
following search will return no results:

NOT "jakarta apache"
Thanks,
Aditi


On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> Hi Aditi,
> You can search using NOT operator. You can go through below link for Quer=
y
> details http://lucene.apache.org/java/docs/queryparsersyntax.html
> Warm Regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://setlabs/slim/
> http://allahbaksh.blogspot.com
>
>
> -----Original Message-----
> From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> Sent: Monday, June 23, 2008 12:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: lucene search options
>
> Thanks a lot Daniel, I will try this option. :)
> Is there a way to search for not equal to query alone?
>
> On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
>
> > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > I think wildcard (*) cannot be used in the beginning :(
> >
> > Wrong:
> >
> >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParse=
r/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.or=
g/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAll=
owLeadingWildcard%28boolean%29>
> <
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParse=
r/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> >
> >
> > Daniel
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys h=
as
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserve=
s
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on th=
e
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 08:04:21 2008
Return-Path: <java-user-return-34545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78253 invoked from network); 23 Jun 2008 08:04:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 08:04:21 -0000
Received: (qmail 18660 invoked by uid 500); 23 Jun 2008 08:04:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18388 invoked by uid 500); 23 Jun 2008 08:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18377 invoked by uid 99); 23 Jun 2008 08:04:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 01:04:15 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [61.95.162.82] (HELO kecgate06.infosys.com) (61.95.162.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 08:03:26 +0000
X-TM-IMSS-Message-ID:<348dcb820001f353@infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by infosys.com ([61.95.162.82]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 348dcb820001f353 for <Allahbaksh_Asadullah@infosys.com>; Mon, 23 Jun 2008 13:33:10 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub01.ad.infosys.com ([10.66.236.41]) with mapi; Mon, 23 Jun 2008
 13:33:42 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 23 Jun 2008 13:33:40 +0530
Subject: RE: lucene search options
Thread-Topic: lucene search options
Thread-Index: AcjVBlOeyhBabOpASxGftlzrzTFazAAABJAwAABJ1BA=
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07ECD647EC@BLRKECMBX06.ad.infosys.com>
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
 <68959F25CDEBCB4F917D5A253291D73E07ECD647DF@BLRKECMBX06.ad.infosys.com>
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07ECD647DF@BLRKECMBX06.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Aditi,
Sorry for typo. You cannot edit it alone.
Warm Regards,
Allahbaksh

Allahbaksh Mohammedali Asadullah,
Software Engineering & Technology Labs,
Infosys Technolgies Limited, Electronics City,
Hosur Road, Bangalore 560 100, India.
*Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
Fax: +91-80-28520362 | Mobile: +91-9845505322.
http://setlabs/slim/
http://allahbaksh.blogspot.com


-----Original Message-----
From: Allahbaksh Mohammedali Asadullah [mailto:Allahbaksh_Asadullah@infosys=
.com]
Sent: Monday, June 23, 2008 1:25 PM
To: java-user@lucene.apache.org
Subject: RE: lucene search options

Yes Aditi You can use it alone.
Warm regards,
Allahbaksh

Allahbaksh Mohammedali Asadullah,
Software Engineering & Technology Labs,
Infosys Technolgies Limited, Electronics City,
Hosur Road, Bangalore 560 100, India.
*Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
Fax: +91-80-28520362 | Mobile: +91-9845505322.
http://setlabs/slim/
http://allahbaksh.blogspot.com


-----Original Message-----
From: Aditi Goyal [mailto:aditigupta20@gmail.com]
Sent: Monday, June 23, 2008 1:24 PM
To: java-user@lucene.apache.org
Subject: Re: lucene search options

Thank you Allahbaksh for taking so much pains. The link says it cannot be
used alone.

Note: The NOT operator cannot be used with just one term. For example, the
following search will return no results:

NOT "jakarta apache"
Thanks,
Aditi


On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> Hi Aditi,
> You can search using NOT operator. You can go through below link for Quer=
y
> details http://lucene.apache.org/java/docs/queryparsersyntax.html
> Warm Regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://setlabs/slim/
> http://allahbaksh.blogspot.com
>
>
> -----Original Message-----
> From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> Sent: Monday, June 23, 2008 12:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: lucene search options
>
> Thanks a lot Daniel, I will try this option. :)
> Is there a way to search for not equal to query alone?
>
> On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
>
> > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > I think wildcard (*) cannot be used in the beginning :(
> >
> > Wrong:
> >
> >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParse=
r/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.or=
g/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAll=
owLeadingWildcard%28boolean%29>
> <
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParse=
r/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> >
> >
> > Daniel
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys h=
as
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserve=
s
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on th=
e
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 08:09:08 2008
Return-Path: <java-user-return-34546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80367 invoked from network); 23 Jun 2008 08:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 08:09:07 -0000
Received: (qmail 30695 invoked by uid 500); 23 Jun 2008 08:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30655 invoked by uid 500); 23 Jun 2008 08:09:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30644 invoked by uid 99); 23 Jun 2008 08:09:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 01:09:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 08:08:13 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1070496tic.11
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 01:08:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HxZpuNGGuBak+lGG6je04KFDbFr9eDhz2CUsq6aWsuM=;
        b=ZZPNWGBrAwLNDlQ4Fz91cOMLNq0NbrQCA1NyK9NVNvr4Zr4JwRQQ7+6CPmIf+5tuUd
         QUuCSCR4LzS3tftcDsdvyT+ssmiXvz8BBXxXcMFZ1mb7sRdopw9jzG8udGF8rTwriCjd
         mVc2UxVVbCu4S7YgNjFB9XPRs3IFlRVGBA/lY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RG9XAiUAsqz1VXvlzysEL2am1aGspCzllf35yc/CAnmN/bi34roRZwgGGLKQLsvhQA
         ZJlXjz+jNPp6nGUkMSXC63j3k240P3vZSuF9xxy2QkOVfr2bsU6gK0v9GB4zIw3J0m0l
         TpJGFwBtuyCbzwCELnAZ03x67MD5R6L8N2au8=
Received: by 10.110.3.15 with SMTP id 15mr5543968tic.15.1214208510591;
        Mon, 23 Jun 2008 01:08:30 -0700 (PDT)
Received: by 10.110.10.14 with HTTP; Mon, 23 Jun 2008 01:08:29 -0700 (PDT)
Message-ID: <6fc71b230806230108v43ebc613h262e0f8f531ef04@mail.gmail.com>
Date: Mon, 23 Jun 2008 13:38:29 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07ECD647EC@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14155_16358528.1214208510340"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647DF@BLRKECMBX06.ad.infosys.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647EC@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14155_16358528.1214208510340
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oh. For one moment I was elated to hear the news. :(
Is there any way out?

Thanks,
Aditi

On Mon, Jun 23, 2008 at 1:33 PM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> Hi Aditi,
> Sorry for typo. You cannot edit it alone.
> Warm Regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://setlabs/slim/
> http://allahbaksh.blogspot.com
>
>
> -----Original Message-----
> From: Allahbaksh Mohammedali Asadullah [mailto:
> Allahbaksh_Asadullah@infosys.com]
> Sent: Monday, June 23, 2008 1:25 PM
> To: java-user@lucene.apache.org
> Subject: RE: lucene search options
>
> Yes Aditi You can use it alone.
> Warm regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://setlabs/slim/
> http://allahbaksh.blogspot.com
>
>
> -----Original Message-----
> From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> Sent: Monday, June 23, 2008 1:24 PM
> To: java-user@lucene.apache.org
> Subject: Re: lucene search options
>
> Thank you Allahbaksh for taking so much pains. The link says it cannot be
> used alone.
>
> Note: The NOT operator cannot be used with just one term. For example, the
> following search will return no results:
>
> NOT "jakarta apache"
> Thanks,
> Aditi
>
>
> On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
> Allahbaksh_Asadullah@infosys.com> wrote:
>
> > Hi Aditi,
> > You can search using NOT operator. You can go through below link for
> Query
> > details http://lucene.apache.org/java/docs/queryparsersyntax.html
> > Warm Regards,
> > Allahbaksh
> >
> > Allahbaksh Mohammedali Asadullah,
> > Software Engineering & Technology Labs,
> > Infosys Technolgies Limited, Electronics City,
> > Hosur Road, Bangalore 560 100, India.
> > *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> > Fax: +91-80-28520362 | Mobile: +91-9845505322.
> > http://setlabs/slim/
> > http://allahbaksh.blogspot.com
> >
> >
> > -----Original Message-----
> > From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> > Sent: Monday, June 23, 2008 12:06 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: lucene search options
> >
> > Thanks a lot Daniel, I will try this option. :)
> > Is there a way to search for not equal to query alone?
> >
> > On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
> >
> > > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > > I think wildcard (*) cannot be used in the beginning :(
> > >
> > > Wrong:
> > >
> > >
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29>
> <
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> >
> > <
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> > >
> > >
> > > Daniel
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > **************** CAUTION - Disclaimer *****************
> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > solely
> > for the use of the addressee(s). If you are not the intended recipient,
> > please
> > notify the sender by e-mail and delete the original message. Further, you
> > are not
> > to copy, disclose, or distribute this e-mail or its contents to any other
> > person and
> > any such actions are unlawful. This e-mail may contain viruses. Infosys
> has
> > taken
> > every reasonable precaution to minimize this risk, but is not liable for
> > any damage
> > you may sustain as a result of any virus in this e-mail. You should carry
> > out your
> > own virus checks before opening the e-mail or attachment. Infosys
> reserves
> > the
> > right to monitor and review the content of all messages sent to or from
> > this e-mail
> > address. Messages sent to or from this e-mail address may be stored on
> the
> > Infosys e-mail system.
> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14155_16358528.1214208510340--

From java-user-return-34547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 08:16:50 2008
Return-Path: <java-user-return-34547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83433 invoked from network); 23 Jun 2008 08:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 08:16:50 -0000
Received: (qmail 40952 invoked by uid 500); 23 Jun 2008 08:16:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40927 invoked by uid 500); 23 Jun 2008 08:16:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40916 invoked by uid 99); 23 Jun 2008 08:16:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 01:16:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 08:15:55 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1071885tic.11
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 01:16:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NHyEBfhaKLt7JmbqW+ThS9zdQmq0ERt/Qs4uSx7x428=;
        b=vmROlIp7tD/x8VvhYISawv9lOAEIwcsJ8/wp4JVTYRwQrl4C0s4uC0Asi8Thnd9j06
         sOy576vQEQ8XEFAoxRsSLZ9DUjJg84hq4mUZgc6RxVCDSnsGu5olqUFBRkpx7VMN3pvb
         Zd6wt6foupJIrBtjgcQq7t7G2UHLDDstBnIhc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gs4aItODxLd90Iwr87qNvERRIIASY+M0bN7Co3o/RHxnFCEcAN3rBfdidBus5fMbEU
         Slne8HB1PE1lz9LCVjB+tqbYcKs/sWo8uwlIf2F/WZNOI7JInvwqDFm0jE0WxCnAH0Wo
         7EeBSI0gkibHLrxW1lyQgB/v9m79oHD4UwhlY=
Received: by 10.110.47.17 with SMTP id u17mr5531256tiu.49.1214208972692;
        Mon, 23 Jun 2008 01:16:12 -0700 (PDT)
Received: by 10.110.10.14 with HTTP; Mon, 23 Jun 2008 01:16:12 -0700 (PDT)
Message-ID: <6fc71b230806230116g1b71b4cfgad8f5f8ddfac9433@mail.gmail.com>
Date: Mon, 23 Jun 2008 13:46:12 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <6fc71b230806230108v43ebc613h262e0f8f531ef04@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14213_25106154.1214208972690"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647DF@BLRKECMBX06.ad.infosys.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647EC@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230108v43ebc613h262e0f8f531ef04@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14213_25106154.1214208972690
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am using MultiFieldQueryParser. Can I use setAllowLeadingWildCard with
MultiFieldQueryParser?I am doing the following:

            parser = lucene.MultiFieldQueryParser(fields, analyzer )
            parser.setAllowLeadingWildcard(True)
            query = parser.parse(command)

And I am getting this error:

 ERROR (<type 'exceptions.TypeError'>, TypeError("descriptor 'parse'
requires a 'QueryParser' object but received a 'str'",), <traceback object
at 0x02DFA800>)

Thanks a lot

Aditi



> On Mon, Jun 23, 2008 at 1:33 PM, Allahbaksh Mohammedali Asadullah <
> Allahbaksh_Asadullah@infosys.com> wrote:
>
>> Hi Aditi,
>> Sorry for typo. You cannot edit it alone.
>> Warm Regards,
>> Allahbaksh
>>
>> Allahbaksh Mohammedali Asadullah,
>> Software Engineering & Technology Labs,
>> Infosys Technolgies Limited, Electronics City,
>> Hosur Road, Bangalore 560 100, India.
>> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
>> Fax: +91-80-28520362 | Mobile: +91-9845505322.
>> http://setlabs/slim/
>> http://allahbaksh.blogspot.com
>>
>>
>> -----Original Message-----
>> From: Allahbaksh Mohammedali Asadullah [mailto:
>> Allahbaksh_Asadullah@infosys.com]
>> Sent: Monday, June 23, 2008 1:25 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: lucene search options
>>
>> Yes Aditi You can use it alone.
>> Warm regards,
>> Allahbaksh
>>
>> Allahbaksh Mohammedali Asadullah,
>> Software Engineering & Technology Labs,
>> Infosys Technolgies Limited, Electronics City,
>> Hosur Road, Bangalore 560 100, India.
>> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
>> Fax: +91-80-28520362 | Mobile: +91-9845505322.
>> http://setlabs/slim/
>> http://allahbaksh.blogspot.com
>>
>>
>> -----Original Message-----
>> From: Aditi Goyal [mailto:aditigupta20@gmail.com]
>> Sent: Monday, June 23, 2008 1:24 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: lucene search options
>>
>> Thank you Allahbaksh for taking so much pains. The link says it cannot be
>> used alone.
>>
>> Note: The NOT operator cannot be used with just one term. For example, the
>> following search will return no results:
>>
>> NOT "jakarta apache"
>> Thanks,
>> Aditi
>>
>>
>> On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
>> Allahbaksh_Asadullah@infosys.com> wrote:
>>
>> > Hi Aditi,
>> > You can search using NOT operator. You can go through below link for
>> Query
>> > details http://lucene.apache.org/java/docs/queryparsersyntax.html
>> > Warm Regards,
>> > Allahbaksh
>> >
>> > Allahbaksh Mohammedali Asadullah,
>> > Software Engineering & Technology Labs,
>> > Infosys Technolgies Limited, Electronics City,
>> > Hosur Road, Bangalore 560 100, India.
>> > *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
>> > Fax: +91-80-28520362 | Mobile: +91-9845505322.
>> > http://setlabs/slim/
>> > http://allahbaksh.blogspot.com
>> >
>> >
>> > -----Original Message-----
>> > From: Aditi Goyal [mailto:aditigupta20@gmail.com]
>> > Sent: Monday, June 23, 2008 12:06 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: lucene search options
>> >
>> > Thanks a lot Daniel, I will try this option. :)
>> > Is there a way to search for not equal to query alone?
>> >
>> > On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
>> >
>> > > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
>> > > > I think wildcard (*) cannot be used in the beginning :(
>> > >
>> > > Wrong:
>> > >
>> > >
>> > >
>> >
>> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29>
>> <
>> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
>> >
>> > <
>> >
>> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
>> > >
>> > >
>> > > Daniel
>> > >
>> > > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> > **************** CAUTION - Disclaimer *****************
>> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
>> > solely
>> > for the use of the addressee(s). If you are not the intended recipient,
>> > please
>> > notify the sender by e-mail and delete the original message. Further,
>> you
>> > are not
>> > to copy, disclose, or distribute this e-mail or its contents to any
>> other
>> > person and
>> > any such actions are unlawful. This e-mail may contain viruses. Infosys
>> has
>> > taken
>> > every reasonable precaution to minimize this risk, but is not liable for
>> > any damage
>> > you may sustain as a result of any virus in this e-mail. You should
>> carry
>> > out your
>> > own virus checks before opening the e-mail or attachment. Infosys
>> reserves
>> > the
>> > right to monitor and review the content of all messages sent to or from
>> > this e-mail
>> > address. Messages sent to or from this e-mail address may be stored on
>> the
>> > Infosys e-mail system.
>> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_14213_25106154.1214208972690--

From java-user-return-34548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 09:07:40 2008
Return-Path: <java-user-return-34548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98274 invoked from network); 23 Jun 2008 09:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 09:07:40 -0000
Received: (qmail 2626 invoked by uid 500); 23 Jun 2008 09:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2591 invoked by uid 500); 23 Jun 2008 09:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2580 invoked by uid 99); 23 Jun 2008 09:07:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 02:07:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrrohitsaini@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 09:06:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so8931871rvb.5
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 02:07:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PI+29C7Iodh1Cz6L6uWiBYGglZ6rQngBzWbX33Ae7mI=;
        b=CGXVtssWK8u8nXxxGE3ciQx7s/3gHJDCJbwLTdI0yD4J/FT0gNQ5h9pcn7cjk1Pjlv
         eacjSldWzmmw8YxKvmUfTtRt9CFEEAIlxzpk3GhNH/xva3fZlsuXUtOqK14L5/bXVyZW
         czBl+WxOdf7Uvk+H7qF/44V0/hZRq2rrzHltA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=WevNf8FBmkwjwO1laNyVnmILO58aeBOPsTqyZjlfQ5RarQhG4FWq+XS4RQtDs24sbM
         z2kk87UmE7LEv2Dnf6l6lHSVfl9QR9dRSiLAr5lNkjXkKWOK+f16lksqtLsXNy2wIL/j
         vlE11ftkbxSpDF6BtsjZ5c2ZfP9tifBN5VlVE=
Received: by 10.141.18.15 with SMTP id v15mr12330273rvi.296.1214212023333;
        Mon, 23 Jun 2008 02:07:03 -0700 (PDT)
Received: by 10.114.94.4 with HTTP; Mon, 23 Jun 2008 02:07:03 -0700 (PDT)
Message-ID: <3cb8ef760806230207g6c0e7ebbhd4fd433cabbf507e@mail.gmail.com>
Date: Mon, 23 Jun 2008 14:37:03 +0530
From: "rohit saini" <mrrohitsaini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22831_23627586.1214212023308"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22831_23627586.1214212023308
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi aditi,

U can have a field corresponding to this domain....It will solve ur
problem......

bye

Rohit
Impetus technologies- noida
mob. 09910220475


On 6/23/08, Aditi Goyal <aditigupta20@gmail.com> wrote:
>
> Hi All,
>
> I am using Lucene for creating indexes. There is one field as "email" which
> stored the email id.
> I have few queries regarding searching:
> 1. I want to search for all the records having domain as "gmail.com" . So,
> is there a way by which I can do a partial search on "email" field such
> that
> I get the records matching only the domain name.
> I think wildcard (*) cannot be used in the beginning :(
>
> 2. If I just want to search for the records which are not matching email as
> "abc@xyz.com"
> How can I search for it. Here, MUST_NOT cannot be used alone. Is there a
> way
> out?
>
>
> Please help.
>
> Thanks,
> Aditi
>



-- 
VANDE - MATRAM

------=_Part_22831_23627586.1214212023308--

From java-user-return-34549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 10:57:32 2008
Return-Path: <java-user-return-34549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30097 invoked from network); 23 Jun 2008 10:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 10:57:32 -0000
Received: (qmail 23734 invoked by uid 500); 23 Jun 2008 10:57:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23700 invoked by uid 500); 23 Jun 2008 10:57:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23689 invoked by uid 99); 23 Jun 2008 10:57:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 03:57:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pvsaikrishna@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 10:56:37 +0000
Received: by yx-out-2324.google.com with SMTP id 31so279427yxl.5
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 03:56:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=BI4kME8E7VnFItkoK/3l0Fq7y4SvlDN4RReVfxkxyhY=;
        b=BETevTOXvsjgWmZWEeCoTW3+mKl/VdTwqVUGV8YzHRkh9mueZhB+SL7u0KOT2p+1n/
         p5JEwtAYKJTgWdbZG64nrIDEzxmhBBg7ikVXZ7CX7XGAxCg7HGuRlJJAOY/aJ9CKk0yH
         x3KQ80U+pU27fmmw9mnZKPaGw+ZhYC2Ay3nYo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ME5JD2564Ha7AOqB6P2i0uEs2CoE/EPLxSwbsabeiLxZupB9Q4a3dP4Ndv8OnW7+r7
         PYdxSnq4jZwfED9+UPBmUcaTk+QZKHQ3R1DygD3jF/yinJnTa1uf1xknG/mV8KkXfL53
         pd6iJlX+QS5Jo0zbPIHdPhbPKiTUCH4PFsRxI=
Received: by 10.142.215.5 with SMTP id n5mr3506299wfg.27.1214218614794;
        Mon, 23 Jun 2008 03:56:54 -0700 (PDT)
Received: by 10.142.173.17 with HTTP; Mon, 23 Jun 2008 03:56:54 -0700 (PDT)
Message-ID: <171dbfa60806230356v735964a8ob05233a6543e3880@mail.gmail.com>
Date: Mon, 23 Jun 2008 16:26:54 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <3cb8ef760806230207g6c0e7ebbhd4fd433cabbf507e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2977_27770226.1214218614795"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <3cb8ef760806230207g6c0e7ebbhd4fd433cabbf507e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2977_27770226.1214218614795
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Aditi,

As Rohit said, the best way to solve this problem is to have two fields for
indexing an email-id, one for the username and another for domain name.

Having two fields and using a Boolean Query with MUST condition should solve
your problem. You can also perform restricted search with the above
architecture, like search for user "x" with in the domain "gmail.com"

--Sai Krishna.

On Mon, Jun 23, 2008 at 2:37 PM, rohit saini <mrrohitsaini@gmail.com> wrote:

> Hi aditi,
>
> U can have a field corresponding to this domain....It will solve ur
> problem......
>
> bye
>
> Rohit
> Impetus technologies- noida
> mob. 09910220475
>
>
> On 6/23/08, Aditi Goyal <aditigupta20@gmail.com> wrote:
> >
> > Hi All,
> >
> > I am using Lucene for creating indexes. There is one field as "email"
> which
> > stored the email id.
> > I have few queries regarding searching:
> > 1. I want to search for all the records having domain as "gmail.com" .
> So,
> > is there a way by which I can do a partial search on "email" field such
> > that
> > I get the records matching only the domain name.
> > I think wildcard (*) cannot be used in the beginning :(
> >
> > 2. If I just want to search for the records which are not matching email
> as
> > "abc@xyz.com"
> > How can I search for it. Here, MUST_NOT cannot be used alone. Is there a
> > way
> > out?
> >
> >
> > Please help.
> >
> > Thanks,
> > Aditi
> >
>
>
>
> --
> VANDE - MATRAM
>

------=_Part_2977_27770226.1214218614795--

From java-user-return-34550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 11:10:51 2008
Return-Path: <java-user-return-34550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33573 invoked from network); 23 Jun 2008 11:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 11:10:51 -0000
Received: (qmail 32926 invoked by uid 500); 23 Jun 2008 11:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32890 invoked by uid 500); 23 Jun 2008 11:10:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32879 invoked by uid 99); 23 Jun 2008 11:10:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 04:10:46 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 11:09:53 +0000
Received: by ag-out-0708.google.com with SMTP id 23so17733118agd.11
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 04:10:09 -0700 (PDT)
Received: by 10.90.94.2 with SMTP id r2mr9872743agb.17.1214219409644;
        Mon, 23 Jun 2008 04:10:09 -0700 (PDT)
Received: from ?192.168.1.2? ( [84.0.44.86])
        by mx.google.com with ESMTPS id c44sm590332hsc.16.2008.06.23.04.10.07
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 23 Jun 2008 04:10:08 -0700 (PDT)
Subject: Re: Getting irrelevant results using fuzzy query
From: =?ISO-8859-1?Q?L=E1szl=F3?= Monda <laci@monda.hu>
To: java-user@lucene.apache.org
Cc: lucenelist2007@danielnaber.de
In-Reply-To: <200806182110.33829@danielnaber.de>
References: <1213797929.14253.64.camel@whisper.dnsalias.net>
	 <200806182110.33829@danielnaber.de>
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-iyRV63eV14cRsmpd4fl5"
Date: Mon, 23 Jun 2008 13:10:05 +0200
Message-Id: <1214219405.6161.49.camel@whisper.dnsalias.net>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.1 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-iyRV63eV14cRsmpd4fl5
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable

On Wed, 2008-06-18 at 21:10 +0200, Daniel Naber wrote:
> On Mittwoch, 18. Juni 2008, L=E1szl=F3 Monda wrote:
>=20
> > Additional info: Lucene seems to do the right thing when only few
> > documents are present, but goes crazy when there is about 1.5 million
> > documents in the index.
>=20
> Lucene works well with more documents (currently using it with 9 million)=
.=20
> but the fuzzy query requires iteration over all terms which makes this=20
> query slow. This can be avoid by setting the prefixLength parameter of th=
e=20
> FuzzyQuery constructor to 1 or 2. Or maybe you should use an n-gram index=
,=20
> see the spellchecker in the contrib area.

Thanks for the suggestion, but I don't have any performance problems
yet, but I do have serious problems with the relevance of the results
with fuzzy queries.

--=20
Laci  <http://monda.hu>


--=-iyRV63eV14cRsmpd4fl5
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQBIX4SN5t2qLX5n7ZgRAnz9AJ4qrZCwpAhsBS5FSV1+o8UtZa+P+QCg6g6j
h0RWhyiAvGWGKrmi9uePFMg=
=A2U/
-----END PGP SIGNATURE-----

--=-iyRV63eV14cRsmpd4fl5--


From java-user-return-34551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 11:12:02 2008
Return-Path: <java-user-return-34551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33980 invoked from network); 23 Jun 2008 11:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 11:12:02 -0000
Received: (qmail 37609 invoked by uid 500); 23 Jun 2008 11:11:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37444 invoked by uid 500); 23 Jun 2008 11:11:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37433 invoked by uid 99); 23 Jun 2008 11:11:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 04:11:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pvsaikrishna@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 11:11:07 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2055155wfc.20
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 04:11:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qeE0Ei1cpfXGcwMpGSizPuVZ5y6eLF5aYSHSOWcJ448=;
        b=FnM3vBjOmY2dCbFPLXCDT3gv6KT1gdINVsNimlMoBLpuaTX2Gi/mYBiMfSXXemT3rx
         uKxOE9Ggn8V5zd5z0ynkQYfpEPzkG/XQLvpo1LUsDr1Vcy0qiP76aKpQjg+WJYfxFcHN
         skO9MX205cFiKogZQ8+LMmbSfSYVV3QKUcAyY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YbLmVx9iMlve8x865wssz4de9qfRwY3BZUa0lwe87l+Hc7GvGyt0sLZYXcXlaRfZxV
         3eqCV3qL2rkI/rwXPhcJKbeZnJx1lVe7GQDBk/OIinBKTnLMSY6gKTNa/Eg/bAZ0xpF2
         8lhSBI4+qCPyCA1EVEIweHvqWeiYjIn1HYWf4=
Received: by 10.142.142.14 with SMTP id p14mr3513449wfd.139.1214219047740;
        Mon, 23 Jun 2008 04:04:07 -0700 (PDT)
Received: by 10.142.173.17 with HTTP; Mon, 23 Jun 2008 04:04:07 -0700 (PDT)
Message-ID: <171dbfa60806230404p4265046epd468b88346ec63ea@mail.gmail.com>
Date: Mon, 23 Jun 2008 16:34:07 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: creating Array of IndexReaders
In-Reply-To: <200806231157.25596.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3002_19278853.1214219047751"
References: <18023594.post@talk.nabble.com>
	 <386073.89631.qm@web50302.mail.re2.yahoo.com>
	 <18042275.post@talk.nabble.com> <200806231157.25596.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3002_19278853.1214219047751
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Sebastin ,

Why dont you index all data into single or some fixed number of indexes and
search over them. You can always restrict your search using the range query
based on user given inputs.

--Sai Krishna.

On Mon, Jun 23, 2008 at 7:27 AM, Daniel Noll <daniel@nuix.com> wrote:

> On Saturday 21 June 2008 18:57:49 Sebastin wrote:
> > Since i am maintaining more than 1.5 years records in the windows 2003
> > server,based on the user input for example if the user wants to display
> > june 1 - june 15 folders and fetch the records from them.if the user
> wants
> > to display may 1-may15 records i need to open those folders.thatswhy i am
> > opening the index readers based on the user input.is it possible to
> create
> > the array of index raders based on user input.
>
> Is that not what your original code was already doing?  If not, some small
> modification must be all you really need.
>
> Daniel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3002_19278853.1214219047751--

From java-user-return-34552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 11:22:14 2008
Return-Path: <java-user-return-34552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37153 invoked from network); 23 Jun 2008 11:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 11:22:13 -0000
Received: (qmail 46065 invoked by uid 500); 23 Jun 2008 11:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45762 invoked by uid 500); 23 Jun 2008 11:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45751 invoked by uid 99); 23 Jun 2008 11:22:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 04:22:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 11:21:16 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2289384fkq.5
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 04:21:32 -0700 (PDT)
Received: by 10.78.135.20 with SMTP id i20mr2668117hud.24.1214220091542;
        Mon, 23 Jun 2008 04:21:31 -0700 (PDT)
Received: from ?192.168.1.2? ( [84.0.44.86])
        by mx.google.com with ESMTPS id 39sm7498170hug.5.2008.06.23.04.21.30
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 23 Jun 2008 04:21:31 -0700 (PDT)
Subject: Re: Getting irrelevant results using fuzzy query
From: =?ISO-8859-1?Q?L=E1szl=F3?= Monda <laci@monda.hu>
To: java-user@lucene.apache.org
Cc: markharw00d@yahoo.co.uk
In-Reply-To: <48596B5E.3070105@yahoo.co.uk>
References: <1213797929.14253.64.camel@whisper.dnsalias.net>
	 <48596B5E.3070105@yahoo.co.uk>
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-nMuK5d9p1d37v/dddHhK"
Date: Mon, 23 Jun 2008 13:21:29 +0200
Message-Id: <1214220089.6161.58.camel@whisper.dnsalias.net>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.1 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-nMuK5d9p1d37v/dddHhK
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable

Hi Mark,

On Wed, 2008-06-18 at 21:09 +0100, markharw00d wrote:
> This looks like it is related to an issue I first raised here:
>     http://markmail.org/message/37ywsemfudpos6uh
>=20
> At the time I identified 2 issues with FuzzyQuery - that the usual=20
> "coord" and "idf" scoring factors shouldn't be applied to fuzzy queries.
> The coord factor got fixed but idf remains an issue in FuzzyQuery I belei=
ve.
> There is a class I added to contrib/queries - "FuzzyLikeThisQuery",=20
> which can be used as a replacement to FuzzyQuery and fixes the idf=20
> issue. You can subclass the QueryParser to create an instance of that=20
> rather than FuzzyQuery if required.

Frankly, I neighter understand the deeper anatomy of Lucene, nor do I
want to.  I'd expect Lucene to do the right thing with fuzzy queries and
it obviously doesn't do the right thing in my case.

I get clearly irrelevant results when I search for a word using fuzzy
query, that world is stored in my Lucene index and Lucene returns me a
word that is pretty different.  It seems to me a bug.

I've downloaded FuzzyQuery from SVN and replaced the references of the
Fuzzy class with it.  I got the same irrelevant results than before.

Do you have any ideas what's going on here?

>=20
> Cheers,
> Mark
>=20
> L=E1szl=F3 Monda wrote:
> > Hi List,
> >
> > I've been redirected from general@lucene.apache.org to here to discuss
> > my issue.
> >
> >
> > ---------- My original email ----------
> >
> >
> > I try to provide relevant results for the users of a lyrics site, even
> > in the case of misspellings by indexing artist and songs with Lucene.
> >
> > The problem is that Lucene provides irrelevant search results.  For
> > example searching for "Coldplay" returns "Longplay" as the most relevan=
t
> > result.
> >
> > This is how I create individual documents:
> >
> > Document document =3D new Document();
> > document.add(new Field("artist", artist, Field.Store.YES,
> > Field.Index.UN_TOKENIZED));
> > document.add(new Field("song", song, Field.Store.YES,
> > Field.Index.UN_TOKENIZED));
> > document.add(new Field("path", path, Field.Store.YES, Field.Index.NO));
> > indexWriter.addDocument(document);
> >
> > And this is how I compose the actual query:
> >
> > BooleanQuery query =3D new BooleanQuery();
> > if (artist.length() > 0) {
> >     FuzzyQuery artist_query =3D new FuzzyQuery(new Term("artist",
> > artist));
> >     query.add(artist_query, BooleanClause.Occur.MUST);
> > }
> > if (song.length() > 0) {
> >     FuzzyQuery song_query =3D new FuzzyQuery(new Term("song", song));
> >     query.add(song_query, BooleanClause.Occur.MUST);
> > }
> >
> > Please let me know what's wrong, I'd like to make this work right.
> >
> > Thanks in advance!
> >
> >
> > ---------- My reply to an answer ----------
> >
> >
> > On Tue, 2008-06-17 at 20:38 +0200, Daniel Naber wrote:
> >  =20
> >> On Dienstag, 17. Juni 2008, L=E1szl=F3 Monda wrote:
> >>
> >>    =20
> >>>     FuzzyQuery artist_query =3D new FuzzyQuery(new Term("artist",
> >>> artist));
> >>>      =20
> >> You should try the FuzzyQuery constructor that takes a minimum
> >>    =20
> > similarity=20
> >  =20
> >> and a prefix length. The general problem is however, that the degree
> >>    =20
> > of=20
> >  =20
> >> similarity is only one factor. The other factors are the same as for
> >>    =20
> > other=20
> >  =20
> >> searches, e.g. the number of occurences of the term in the document
> >>    =20
> > and in=20
> >  =20
> >> the whole index.
> >>
> >> You could try to write your own similarity implementation that
> >>    =20
> > disables all=20
> >  =20
> >> these factors, see
> >>
> >>    =20
> > http://lucene.apache.org/java/2_3_1/api/org/apache/lucene/search/Simila=
rity.html=20
> >
> > I understand some essential concepts related to Lucene such as the
> > Levenshtein distance and tokenization, but I really don't want to go
> > this deep if it's not necessary.
> >
> > Since fuzzy searching is based on the Levenshtein distance, the distanc=
e
> > between "coldplay" and "coldplay" is 0 and the distance between
> > "coldplay" and "downplay" is 3 so how on earth is possible that when
> > searching for "coldplay", Lucene returns "longplay"?  This shouldn't
> > happen regardless of the minimum similarity and prefix length factors.
> >
> > Additional info: Lucene seems to do the right thing when only few
> > documents are present, but goes crazy when there is about 1.5 million
> > documents in the index.
> >
> >
> > ---------------------------------------------------------------------
> >
> >
> > I hope that some of you can help me because I don't have any ideas what
> > can be wrong here.
> >
> > Thanks in advance!
> >
> >  =20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
--=20
Laci  <http://monda.hu>


--=-nMuK5d9p1d37v/dddHhK
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQBIX4c55t2qLX5n7ZgRAgmnAKCAZI0JyGPoO92eyDjj85rDIoGk0ACgwHFr
mHKquBCT+qG52n+VTKrm6SA=
=TDvX
-----END PGP SIGNATURE-----

--=-nMuK5d9p1d37v/dddHhK--


From java-user-return-34553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 11:23:29 2008
Return-Path: <java-user-return-34553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37507 invoked from network); 23 Jun 2008 11:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 11:23:29 -0000
Received: (qmail 47527 invoked by uid 500); 23 Jun 2008 11:23:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47495 invoked by uid 500); 23 Jun 2008 11:23:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47482 invoked by uid 99); 23 Jun 2008 11:23:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 04:23:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.230] (HELO qb-out-0506.google.com) (72.14.204.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 11:22:33 +0000
Received: by qb-out-0506.google.com with SMTP id e6so6531489qbe.27
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 04:22:51 -0700 (PDT)
Received: by 10.142.158.3 with SMTP id g3mr3504292wfe.344.1214219215054;
        Mon, 23 Jun 2008 04:06:55 -0700 (PDT)
Received: from ?192.168.1.2? ( [84.0.44.86])
        by mx.google.com with ESMTPS id 3sm9339963wrh.6.2008.06.23.04.06.52
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 23 Jun 2008 04:06:53 -0700 (PDT)
Subject: Re: Getting irrelevant results using fuzzy query
From: =?ISO-8859-1?Q?L=E1szl=F3?= Monda <laci@monda.hu>
To: java-user@lucene.apache.org
Cc: lucenelist2007@danielnaber.de
In-Reply-To: <200806182037.58911@danielnaber.de>
References: <1213797929.14253.64.camel@whisper.dnsalias.net>
	 <200806182037.58911@danielnaber.de>
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-OHGdqiUt+g3bTRT7POV3"
Date: Mon, 23 Jun 2008 13:06:48 +0200
Message-Id: <1214219208.6161.45.camel@whisper.dnsalias.net>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.1 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-OHGdqiUt+g3bTRT7POV3
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable

Hi Daniel,

On Wed, 2008-06-18 at 20:37 +0200, Daniel Naber wrote:
> On Mittwoch, 18. Juni 2008, L=E1szl=F3 Monda wrote:
>=20
> > Since fuzzy searching is based on the Levenshtein distance, the distanc=
e
> > between "coldplay" and "coldplay" is 0 and the distance between
> > "coldplay" and "downplay" is 3 so how on earth is possible that when
> > searching for "coldplay", Lucene returns "longplay"?
>=20
> You can use query.explain() to get the details of the ranking. In your=20
> case, just build a query like: term^100 OR term~, i.e. boost the original=
=20
> (non-fuzzy) term with a large number.

According to the current Lucene documentation at
http://lucene.apache.org/java/2_3_2/api/index.html it seems to me that
the Query class doesn't have any explain() methods.

Am I missing something?

--=20
Laci  <http://monda.hu>


--=-OHGdqiUt+g3bTRT7POV3
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQBIX4PI5t2qLX5n7ZgRAs+4AKCbaPrSvHy1zIKFlHUm9PLcj8mRSACfS3gP
CcZGOLUqt4yiFnSdLjyX+/Y=
=exH6
-----END PGP SIGNATURE-----

--=-OHGdqiUt+g3bTRT7POV3--


From java-user-return-34554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 11:30:32 2008
Return-Path: <java-user-return-34554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39602 invoked from network); 23 Jun 2008 11:30:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 11:30:32 -0000
Received: (qmail 57430 invoked by uid 500); 23 Jun 2008 11:30:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56759 invoked by uid 500); 23 Jun 2008 11:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56748 invoked by uid 99); 23 Jun 2008 11:30:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 04:30:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Jun 2008 11:29:34 +0000
Received: (qmail 37805 invoked by uid 60001); 23 Jun 2008 11:28:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=5Mis87eyTze9wMh046vpSMBA8Qq0H86toR4wUy1VRwVYkEZYM6v7/5uRInjsovqTp1q/XUjLSU3s1z+VbQfD348/wlOHaOfVW4POc15onMzJACUXoZ1miBL3fqkaCjBUFhF/O+krWFnR/HT8N7ym8DrYKSbCxZ0KwMrYrI7KSRI=;
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Mon, 23 Jun 2008 11:28:50 GMT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 23 Jun 2008 11:28:50 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Getting irrelevant results using fuzzy query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <81404.37416.qm@web26002.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>I do have serious problems with the relevance of the results with fuzzy q=
ueries.=0A=0APlease take the time to read my response here:=0A=0A     http:=
//www.gossamer-threads.com/lists/lucene/java-user/62050#62050=0A=0AI had a =
work colleague come up with exactly the same problem this week and the solu=
tion is the same.=0A=0AJust tested my index with a standard Lucene FuzzyQue=
ry for "Paul~" - this gives "Phul", "Saul", and "Paulo" before ANY "Paul" r=
ecords due to IDF issues.=0AUsing FuzzyLikeThisQuery puts all the "Paul" re=
cords ahead of the variants.=0A=0A=0A=0A----- Original Message ----=0AFrom:=
 L=E1szl=F3 Monda <laci@monda.hu>=0ATo: java-user@lucene.apache.org=0ACc: l=
ucenelist2007@danielnaber.de=0ASent: Monday, 23 June, 2008 12:10:05 PM=0ASu=
bject: Re: Getting irrelevant results using fuzzy query=0A=0AOn Wed, 2008-0=
6-18 at 21:10 +0200, Daniel Naber wrote:=0A> On Mittwoch, 18. Juni 2008, L=
=E1szl=F3 Monda wrote:=0A> =0A> > Additional info: Lucene seems to do the r=
ight thing when only few=0A> > documents are present, but goes crazy when t=
here is about 1.5 million=0A> > documents in the index.=0A> =0A> Lucene wor=
ks well with more documents (currently using it with 9 million). =0A> but t=
he fuzzy query requires iteration over all terms which makes this =0A> quer=
y slow. This can be avoid by setting the prefixLength parameter of the =0A>=
 FuzzyQuery constructor to 1 or 2. Or maybe you should use an n-gram index,=
 =0A> see the spellchecker in the contrib area.=0A=0AThanks for the suggest=
ion, but I don't have any performance problems=0Ayet, but I do have serious=
 problems with the relevance of the results=0Awith fuzzy queries.=0A=0A-- =
=0ALaci  <http://monda.hu>=0A=0A=0A      __________________________________=
________________________=0ASent from Yahoo! Mail.=0AA Smarter Email http://=
uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 11:43:06 2008
Return-Path: <java-user-return-34555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42674 invoked from network); 23 Jun 2008 11:43:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 11:43:04 -0000
Received: (qmail 79357 invoked by uid 500); 23 Jun 2008 11:42:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79335 invoked by uid 500); 23 Jun 2008 11:42:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79318 invoked by uid 99); 23 Jun 2008 11:42:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 04:42:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 11:42:02 +0000
Received: from [192.168.1.106] (cpc1-cwma4-0-0-cust744.swan.cable.ntl.com [81.110.106.233])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id C54A1E24A1
	for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 04:41:47 -0700 (PDT)
Message-Id: <67096FCB-1272-4EDD-BFD3-17E3B41C4EF0@thimbleby.net>
From: William Thimbleby <will@thimbleby.net>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Help unsubscribing
Date: Mon, 23 Jun 2008 12:41:48 +0100
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

I've tried everything I can think of and I still can't unsubscribe  
from java-user@lucene.apache.org . None of my unsubscribe or emails to  
java-user-unsubscribe or java-user-help seem to do anything.

Any help would be appreciated.

thanks -- Will

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 12:12:34 2008
Return-Path: <java-user-return-34556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51338 invoked from network); 23 Jun 2008 12:12:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 12:12:34 -0000
Received: (qmail 29259 invoked by uid 500); 23 Jun 2008 12:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29227 invoked by uid 500); 23 Jun 2008 12:12:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29216 invoked by uid 99); 23 Jun 2008 12:12:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 05:12:29 -0700
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 12:11:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so9002536rvb.5
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 05:11:55 -0700 (PDT)
Received: by 10.141.87.13 with SMTP id p13mr12634379rvl.113.1214223115137;
        Mon, 23 Jun 2008 05:11:55 -0700 (PDT)
Received: from ?192.168.1.2? ( [84.0.44.86])
        by mx.google.com with ESMTPS id s30sm1452587qbs.8.2008.06.23.05.11.52
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 23 Jun 2008 05:11:53 -0700 (PDT)
Subject: Re: Getting irrelevant results using fuzzy query
From: =?ISO-8859-1?Q?L=E1szl=F3?= Monda <laci@monda.hu>
To: java-user@lucene.apache.org
Cc: markharw00d@yahoo.co.uk
In-Reply-To: <81404.37416.qm@web26002.mail.ukl.yahoo.com>
References: <81404.37416.qm@web26002.mail.ukl.yahoo.com>
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-95dADs3f7D3FO/5cGpj9"
Date: Mon, 23 Jun 2008 14:11:50 +0200
Message-Id: <1214223110.6161.66.camel@whisper.dnsalias.net>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.1 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-95dADs3f7D3FO/5cGpj9
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable

Thanks for your reply, Mark.



This was my original code for constructing my query using FuzzyQuery:

BooleanQuery query =3D new BooleanQuery();
if (artist.length() > 0) {
    FuzzyQuery artist_query =3D new FuzzyQuery(new Term("artist",
artist));
    query.add(artist_query, BooleanClause.Occur.MUST);
}
if (song.length() > 0) {
    FuzzyQuery song_query =3D new FuzzyQuery(new Term("song", song));
    query.add(song_query, BooleanClause.Occur.MUST);
}



This is my first attempt to use FuzzyLikeThisQuery (with no success):

FuzzyLikeThisQuery query =3D new FuzzyLikeThisQuery(2, new
SimpleAnalyzer());
if (artist.length() > 0) {
    query.addTerms(artist, "artist", 0.5f, 0);
}
if (song.length() > 0) {
    query.addTerms(song, "song", 0.5f, 0);
}



This is my second attempt to use FuzzyLikeThisQuery (with no success):

BooleanQuery query =3D new BooleanQuery();
if (artist.length() > 0) {
    FuzzyLikeThisQuery artist_query =3D new FuzzyLikeThisQuery(1, new
SimpleAnalyzer());
    artist_query.addTerms(artist, "artist", 0.5f, 0);
    query.add(artist_query, BooleanClause.Occur.MUST);
}
if (song.length() > 0) {
    FuzzyLikeThisQuery song_query =3D new FuzzyLikeThisQuery(1, new
SimpleAnalyzer());
    song_query.addTerms(song, "song", 0.5f, 0);
    query.add(song_query, BooleanClause.Occur.MUST);
}



I think it's my lack of undersanding of the usage of FuzzyLikeThisQuery
that makes me getting irrelevant results.

Could you tell me what's wrong here, please?

Thank you.

On Mon, 2008-06-23 at 11:28 +0000, mark harwood wrote:
> >>I do have serious problems with the relevance of the results with fuzzy=
 queries.
>=20
> Please take the time to read my response here:
>=20
>      http://www.gossamer-threads.com/lists/lucene/java-user/62050#62050
>=20
> I had a work colleague come up with exactly the same problem this week an=
d the solution is the same.
>=20
> Just tested my index with a standard Lucene FuzzyQuery for "Paul~" - this=
 gives "Phul", "Saul", and "Paulo" before ANY "Paul" records due to IDF iss=
ues.
> Using FuzzyLikeThisQuery puts all the "Paul" records ahead of the variant=
s.
>=20
>=20
>=20
> ----- Original Message ----
> From: L=E1szl=F3 Monda <laci@monda.hu>
> To: java-user@lucene.apache.org
> Cc: lucenelist2007@danielnaber.de
> Sent: Monday, 23 June, 2008 12:10:05 PM
> Subject: Re: Getting irrelevant results using fuzzy query
>=20
> On Wed, 2008-06-18 at 21:10 +0200, Daniel Naber wrote:
> > On Mittwoch, 18. Juni 2008, L=E1szl=F3 Monda wrote:
> >=20
> > > Additional info: Lucene seems to do the right thing when only few
> > > documents are present, but goes crazy when there is about 1.5 million
> > > documents in the index.
> >=20
> > Lucene works well with more documents (currently using it with 9 millio=
n).=20
> > but the fuzzy query requires iteration over all terms which makes this=20
> > query slow. This can be avoid by setting the prefixLength parameter of =
the=20
> > FuzzyQuery constructor to 1 or 2. Or maybe you should use an n-gram ind=
ex,=20
> > see the spellchecker in the contrib area.
>=20
> Thanks for the suggestion, but I don't have any performance problems
> yet, but I do have serious problems with the relevance of the results
> with fuzzy queries.
>=20
--=20
Laci  <http://monda.hu>


--=-95dADs3f7D3FO/5cGpj9
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQBIX5MG5t2qLX5n7ZgRAtIYAJ4mx/hS3PrQaHLsV4lJZCaJgJ77RACfeapt
WidJgHlBnChLwRkH4AHex2U=
=XYky
-----END PGP SIGNATURE-----

--=-95dADs3f7D3FO/5cGpj9--


From java-user-return-34557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 12:28:59 2008
Return-Path: <java-user-return-34557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62123 invoked from network); 23 Jun 2008 12:28:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 12:28:58 -0000
Received: (qmail 50517 invoked by uid 500); 23 Jun 2008 12:28:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50497 invoked by uid 500); 23 Jun 2008 12:28:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50486 invoked by uid 99); 23 Jun 2008 12:28:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 05:28:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 12:28:01 +0000
Received: by an-out-0708.google.com with SMTP id c37so561713anc.49
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 05:28:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=16Rn8hGUpmMI6AgOASK5jSuW5q35BC92pQGhOc2y9Ms=;
        b=X6p+FQwvvBIofrZ1Gau46dhw8yvDQsdLfS5l6agauoEogwNVE1c+DcuuBerjht5j+g
         sXSMhmhBlnY65yDeRgB5OJAoe68UnFuz3Ya88hiG+cKhSWDQUq9O+jwpiJO8Qx3lKqkc
         gz7b340ypM96Ox47T+XEOzlolkl3o5p8ISqjw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=W87+Cge3fJDOCyi4pPtxyiCPoD1zxvv9+QkDg+juoMZ8I//O0IBn1HNRt15901Ma8n
         fgOwXFz34c6pS1ZSmUAy+5ufuISSXhvDqrigx1bk5ARZfLL0iczpVhoXWrPRdGKSGiWp
         xoIMq+dENNY69K7dwyD48TksU3V5Coio8h/4o=
Received: by 10.100.122.12 with SMTP id u12mr13109014anc.109.1214224082888;
        Mon, 23 Jun 2008 05:28:02 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.106.194])
        by mx.google.com with ESMTPS id d21sm12341153and.0.2008.06.23.05.28.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 23 Jun 2008 05:28:02 -0700 (PDT)
Message-Id: <B94E065C-A362-4571-A1C7-B6BF75FF4BF1@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Requesting MultipleIndeces
Date: Mon, 23 Jun 2008 14:27:58 +0200
X-Mailer: Apple Mail (2.924)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I have around 10 different indexfiles to request. Is it better to do  
this via one request to one MultiReader or is better to request the 10  
indeces one after another?
Especially for doing some filtering on the result with a HitCollector  
it might by easier to use the multi request approch I think.

  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 12:53:13 2008
Return-Path: <java-user-return-34558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76239 invoked from network); 23 Jun 2008 12:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 12:53:13 -0000
Received: (qmail 712 invoked by uid 500); 23 Jun 2008 12:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 297 invoked by uid 500); 23 Jun 2008 12:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 286 invoked by uid 99); 23 Jun 2008 12:53:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 05:53:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Jun 2008 12:52:15 +0000
Received: (qmail 95563 invoked by uid 60001); 23 Jun 2008 12:52:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=JGFPAou5I+zWW0gcLTt2Qhq3YTAoOauVZRDg6vkJGZivkFmW1HTiT6H5psUJLSEHL9VRCyt4xIUrWdzHbUzzSQNgdQ0iFbx7ES+FaXoAsYFZvWFTR0rGsDQpaT/4/OyfOrVprOhNoUEuzbmhaMv3Tz7ZRgA9Ee8nROOB0qrVl4s=;
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Mon, 23 Jun 2008 12:52:32 GMT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Mon, 23 Jun 2008 12:52:32 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Getting irrelevant results using fuzzy query
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <649083.95545.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>Could you tell me what's wrong here, please?=0A=0AThere are potentially a=
 number of factors at play here.=0A=0AYour use of FuzzyLikeThis is fine - j=
ust tried the code on my single-term "Paul" query and as I outlined before =
it is doing a much better job of matching (Paul~=3D results Paul,Paul,Paul.=
...Phul rather than FuzzyQuery's Paul~=3D results Phul, Saul, Paulo , Paul,=
 Paul.....)=0A=0ATry the query on just the term artist:Coldplay and see the=
 results. What artists Does FuzzyLikeThis  return vs FuzzyQuery?=0A=0AIf yo=
u aren't getting Coldplay as the first result from FuzzyLikeThis double che=
ck the content is indexed using the same analyzer that you pass to FuzzyLik=
eThisQuery (your code below uses SimpleAnalyzer). If you indexed with White=
spaceAnalyzer for example or as "UN_TOKENIZED the index and the query diffe=
r so "Coldplay"!=3Dcoldplay.=0A=0AI notice the song title in your original =
code is treated as a single term in your query - is that how it is indexed?=
 I can see that artist might possibly make sense as a single term which get=
s fuzzy matched but song titles are generally longer which means it may wor=
k better as a tokenized field.=0A=0ACheers=0AMark=0A=0A=0A----- Original Me=
ssage ----=0AFrom: L=E1szl=F3 Monda <laci@monda.hu>=0ATo: java-user@lucene.=
apache.org=0ACc: markharw00d@yahoo.co.uk=0ASent: Monday, 23 June, 2008 1:11=
:50 PM=0ASubject: Re: Getting irrelevant results using fuzzy query=0A=0ATha=
nks for your reply, Mark.=0A=0A=0A=0AThis was my original code for construc=
ting my query using FuzzyQuery:=0A=0ABooleanQuery query =3D new BooleanQuer=
y();=0Aif (artist.length() > 0) {=0A    FuzzyQuery artist_query =3D new Fuz=
zyQuery(new Term("artist",=0Aartist));=0A    query.add(artist_query, Boolea=
nClause.Occur.MUST);=0A}=0Aif (song.length() > 0) {=0A    FuzzyQuery song_q=
uery =3D new FuzzyQuery(new Term("song", song));=0A    query.add(song_query=
, BooleanClause.Occur.MUST);=0A}=0A=0A=0A=0AThis is my first attempt to use=
 FuzzyLikeThisQuery (with no success):=0A=0AFuzzyLikeThisQuery query =3D ne=
w FuzzyLikeThisQuery(2, new=0ASimpleAnalyzer());=0Aif (artist.length() > 0)=
 {=0A    query.addTerms(artist, "artist", 0.5f, 0);=0A}=0Aif (song.length()=
 > 0) {=0A    query.addTerms(song, "song", 0.5f, 0);=0A}=0A=0A=0A=0AThis is=
 my second attempt to use FuzzyLikeThisQuery (with no success):=0A=0ABoolea=
nQuery query =3D new BooleanQuery();=0Aif (artist.length() > 0) {=0A    Fuz=
zyLikeThisQuery artist_query =3D new FuzzyLikeThisQuery(1, new=0ASimpleAnal=
yzer());=0A    artist_query.addTerms(artist, "artist", 0.5f, 0);=0A    quer=
y.add(artist_query, BooleanClause.Occur.MUST);=0A}=0Aif (song.length() > 0)=
 {=0A    FuzzyLikeThisQuery song_query =3D new FuzzyLikeThisQuery(1, new=0A=
SimpleAnalyzer());=0A    song_query.addTerms(song, "song", 0.5f, 0);=0A    =
query.add(song_query, BooleanClause.Occur.MUST);=0A}=0A=0A=0A=0AI think it'=
s my lack of undersanding of the usage of FuzzyLikeThisQuery=0Athat makes m=
e getting irrelevant results.=0A=0ACould you tell me what's wrong here, ple=
ase?=0A=0AThank you.=0A=0AOn Mon, 2008-06-23 at 11:28 +0000, mark harwood w=
rote:=0A> >>I do have serious problems with the relevance of the results wi=
th fuzzy queries.=0A> =0A> Please take the time to read my response here:=
=0A> =0A>      http://www.gossamer-threads.com/lists/lucene/java-user/62050=
#62050=0A> =0A> I had a work colleague come up with exactly the same proble=
m this week and the solution is the same.=0A> =0A> Just tested my index wit=
h a standard Lucene FuzzyQuery for "Paul~" - this gives "Phul", "Saul", and=
 "Paulo" before ANY "Paul" records due to IDF issues.=0A> Using FuzzyLikeTh=
isQuery puts all the "Paul" records ahead of the variants.=0A> =0A> =0A> =
=0A> ----- Original Message ----=0A> From: L=E1szl=F3 Monda <laci@monda.hu>=
=0A> To: java-user@lucene.apache.org=0A> Cc: lucenelist2007@danielnaber.de=
=0A> Sent: Monday, 23 June, 2008 12:10:05 PM=0A> Subject: Re: Getting irrel=
evant results using fuzzy query=0A> =0A> On Wed, 2008-06-18 at 21:10 +0200,=
 Daniel Naber wrote:=0A> > On Mittwoch, 18. Juni 2008, L=E1szl=F3 Monda wro=
te:=0A> > =0A> > > Additional info: Lucene seems to do the right thing when=
 only few=0A> > > documents are present, but goes crazy when there is about=
 1.5 million=0A> > > documents in the index.=0A> > =0A> > Lucene works well=
 with more documents (currently using it with 9 million). =0A> > but the fu=
zzy query requires iteration over all terms which makes this =0A> > query s=
low. This can be avoid by setting the prefixLength parameter of the =0A> > =
FuzzyQuery constructor to 1 or 2. Or maybe you should use an n-gram index, =
=0A> > see the spellchecker in the contrib area.=0A> =0A> Thanks for the su=
ggestion, but I don't have any performance problems=0A> yet, but I do have =
serious problems with the relevance of the results=0A> with fuzzy queries.=
=0A> =0A-- =0ALaci  <http://monda.hu>=0A=0A=0A      _______________________=
___________________________________=0ASent from Yahoo! Mail.=0AA Smarter Em=
ail http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 13:24:28 2008
Return-Path: <java-user-return-34559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88552 invoked from network); 23 Jun 2008 13:24:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 13:24:28 -0000
Received: (qmail 62448 invoked by uid 500); 23 Jun 2008 13:24:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62423 invoked by uid 500); 23 Jun 2008 13:24:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62412 invoked by uid 99); 23 Jun 2008 13:24:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:24:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 13:23:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KAm1P-0004yC-9X
	for java-user@lucene.apache.org; Mon, 23 Jun 2008 06:23:51 -0700
Message-ID: <18067808.post@talk.nabble.com>
Date: Mon, 23 Jun 2008 06:23:51 -0700 (PDT)
From: jnance <nancejd@ornl.gov>
To: java-user@lucene.apache.org
Subject: Re: Indexing and searching txt files
In-Reply-To: <359a92830806200825i2a3f50ddu28f4e18683fe12e4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nancejd@ornl.gov
References: <18031330.post@talk.nabble.com> <359a92830806200825i2a3f50ddu28f4e18683fe12e4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks! Lucene in Action is very helpful.

-James
-- 
View this message in context: http://www.nabble.com/Indexing-and-searching-txt-files-tp18031330p18067808.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 13:56:37 2008
Return-Path: <java-user-return-34560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3515 invoked from network); 23 Jun 2008 13:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 13:56:37 -0000
Received: (qmail 27623 invoked by uid 500); 23 Jun 2008 13:56:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27591 invoked by uid 500); 23 Jun 2008 13:56:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27575 invoked by uid 99); 23 Jun 2008 13:56:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 06:56:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of viniciusccarvalho@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 13:55:42 +0000
Received: by py-out-1112.google.com with SMTP id z74so995776pyg.9
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 06:56:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HarJtGkikkwarCV/FXIyihlMpq8UPQq/wjx8du2Lu1o=;
        b=VUvD7Q6/KjHEtUPZ1Ye5kGkSzyJL0VySClEzC0SWA56Uz8qyE4bllSiZx75/L5bocP
         LQ2onMkMzt5uA/M7Im1Gr700xFD3vAXcFAIR1jWi0c5OUHEineWVcMLskclL2l2zUJT8
         NqBt4Tuc8a0wXagzv6oOKfAoBrlz0oBCD44VU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=N7XmFKhpHr2eimQuTXbtODNsgiXxtUqoi0mOmAqu2yXw3CEE4c/uiXn2KqxF2agcea
         CGi/ea+sOfyM8YsWy+xyn+S6ylZeyQ2UMONoPZ/YgCK9vWBLhz1c+H/ZTPAoXb0IR9lq
         SgMIemXnlbNYiQLn53bfgMeVxLXf0Y06UXffI=
Received: by 10.143.37.20 with SMTP id p20mr3795515wfj.236.1214229360211;
        Mon, 23 Jun 2008 06:56:00 -0700 (PDT)
Received: by 10.114.132.18 with HTTP; Mon, 23 Jun 2008 06:56:00 -0700 (PDT)
Message-ID: <9d2777b60806230656q5484d6fekabd217e1dee352d4@mail.gmail.com>
Date: Mon, 23 Jun 2008 10:56:00 -0300
From: "Vinicius Carvalho" <viniciusccarvalho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Termdocs question
In-Reply-To: <C431D4CB-D716-4833-8111-6B5338A6607A@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16218_18637233.1214229360207"
References: <9d2777b60806200912k153d17f1y81b62050d8c401f4@mail.gmail.com>
	 <C431D4CB-D716-4833-8111-6B5338A6607A@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16218_18637233.1214229360207
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm sorry, the problem was with the way the id was being indexed. It was
marked as tokenized, so I when searched for it's untokenized form I was not
getting the doc, now everything works fine :)

Regards

On Sat, Jun 21, 2008 at 2:08 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> 20 jun 2008 kl. 18.12 skrev Vinicius Carvalho:
>
>
>  Hello there! I trying to query for a specific document on a efficient way.
>>
>
> Hi Vinicius,
>
>            termDocs = reader.termDocs(term);
>>           while(termDocs.next()){
>>               int index = termDocs.doc();
>>               if(reader.document(index).get("id").equals(id)){
>>                   reader.deleteDocument(index);
>>               }
>>           }
>>
>
> Iterating documents and string comparing stored values is not very
> efficient. Use a query instead, something like this:
>
> BooleanQuery query = new BooleanQuery();
> query.add(new TermQuery(term), Occurs.MUST);
> query.add(new TermQuery(new Term("id", id), Occurs.MUST);
> searcher.search(query, new HitCollector() {
>  public void collect(int doc, float score) {
>    reader.deleteDocument(doc);
>  }
> });
>
>
>       karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"In a world without fences and walls, who needs Gates and Windows?"

------=_Part_16218_18637233.1214229360207--

From java-user-return-34561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 15:25:02 2008
Return-Path: <java-user-return-34561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60358 invoked from network); 23 Jun 2008 15:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 15:25:01 -0000
Received: (qmail 15279 invoked by uid 500); 23 Jun 2008 15:24:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15238 invoked by uid 500); 23 Jun 2008 15:24:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15227 invoked by uid 99); 23 Jun 2008 15:24:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 08:24:56 -0700
X-ASF-Spam-Status: No, hits=4.5 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,URIBL_BLACK,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 15:24:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KAnu2-0001FN-Gb
	for java-user@lucene.apache.org; Mon, 23 Jun 2008 08:24:22 -0700
Message-ID: <18071627.post@talk.nabble.com>
Date: Mon, 23 Jun 2008 08:24:22 -0700 (PDT)
From: =?UTF-8?Q?Lukas_=C3=96esterreicher?= <loesterreicher@real.com>
To: java-user@lucene.apache.org
Subject: Auto Completion search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: loesterreicher@real.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello.

I am trying to implement a search based on a search text in an index that
contains Track Title, Album Name or Artist Name information that delivers a
list or results that are suited for "auto completion" to make searching
easier for the user. This search is very performance critical. The real
search itself is done on a seperate index and has already been implemented.

Results should match any Title or Name that contains the sepecified text,
however only only matching at the start of a word. The PrefixQuery is
predestined for this, I think.
I created the index using a WhitespaceAnalyzer.

So for instance if I search for "Sing I"
it should match the texts
"If I Don't Sing I'll Cry", "Sing It" and "Sing It Again",
but not "I Sing".

The current solution I've come up with until now is use a
WhitespaceTokenizer
and create a TermQuery for all but the last token and a PrefixQuery for the
last token,
and combine this with AND (Occur.MUST).
So for instance "I Sing" would result in "item.name:Sing AND item.name:I*"
(I think,
I've never seen the string representation of the query).

When retrieving the results I check if the original query text is contained
within the returned item.name (while ignoring cases), and only return it if
it is
the case.

I am not sure however if this is a good result, performance-wise.
Can you provide a better solution and/or comment on my current one.

The currend one is quite quick if no whitespace is contained in the search
term,
but requests are many times slower if there are whitespaces (usually normal
spaces)
in the search term.

Thanx,
Lukas
-- 
View this message in context: http://www.nabble.com/Auto-Completion-search-tp18071627p18071627.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 16:19:01 2008
Return-Path: <java-user-return-34562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85511 invoked from network); 23 Jun 2008 16:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 16:19:00 -0000
Received: (qmail 11873 invoked by uid 500); 23 Jun 2008 16:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11841 invoked by uid 500); 23 Jun 2008 16:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11830 invoked by uid 99); 23 Jun 2008 16:18:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 09:18:54 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of daniel.rosher@hotonline.com designates 217.69.20.190 as permitted sender)
Received: from [217.69.20.190] (HELO cluster-d.mailcontrol.com) (217.69.20.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 16:18:01 +0000
Received: from mail.workthing.com (mail.workthing.com [195.224.106.50])
	by rly06d.srv.mailcontrol.com (MailControl) with ESMTP id m5NGHhC8002719
	for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 17:17:44 +0100
thread-index: AcjVTInEId8dGn/aQFWEln06Q7cSfA==
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Received: from [192.168.2.31] ([192.168.2.31] RDNS failed) by mail.workthing.com with Microsoft SMTPSVC(6.0.3790.3959); Mon, 23 Jun 2008 17:16:48 +0100
Importance: normal
Priority: normal
Subject: Re: Auto Completion search
From: "Daniel Rosher" <daniel.rosher@hotonline.com>
To: <java-user@lucene.apache.org>
In-Reply-To: <18071627.post@talk.nabble.com>
References: <18071627.post@talk.nabble.com>
Content-Type: text/plain;
	charset="UTF-8"
Date: Mon, 23 Jun 2008 17:17:41 +0100
Message-ID: <1214237861.5277.9.camel@danielrosher>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 23 Jun 2008 16:16:48.0441 (UTC) FILETIME=[89B1A290:01C8D54C]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.68.0.116
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Basically I think you need to use NGramFilter, this will be alot faster
than the searches you list, but will make your index much larger too.

In Solr this can be achieved with something like:

 <fieldType name=3D"acomplete" class=3D"solr.TextField">
                <analyzer type=3D"index">
                        <tokenizer
class=3D"solr.KeywordTokenizerFactory"/>
                        <filter class=3D"solr.LowerCaseFilterFactory" />
                        <filter =
class=3D"solr.PatternReplaceFilterFactory"
pattern=3D"([^a-z0-9])" replacement=3D"" replace=3D"all" />
                        <filter class=3D"NGramFilterFactory"
maxGramSize=3D"20" minGramSize=3D"1" />
                </analyzer>
                <analyzer type=3D"query">
                        <tokenizer
class=3D"solr.KeywordTokenizerFactory"/>
                        <filter class=3D"solr.LowerCaseFilterFactory" />
                        <filter =
class=3D"solr.PatternReplaceFilterFactory"
pattern=3D"([^a-z0-9])" replacement=3D"" replace=3D"all" />
                </analyzer>
        </fieldType>

Cheers,
Dan


On Mon, 2008-06-23 at 08:24 -0700, Lukas =C3=96esterreicher wrote:
> Hello.
>=20
> I am trying to implement a search based on a search text in an index =
that
> contains Track Title, Album Name or Artist Name information that =
delivers a
> list or results that are suited for "auto completion" to make =
searching
> easier for the user. This search is very performance critical. The =
real
> search itself is done on a seperate index and has already been =
implemented.
>=20
> Results should match any Title or Name that contains the sepecified =
text,
> however only only matching at the start of a word. The PrefixQuery is
> predestined for this, I think.
> I created the index using a WhitespaceAnalyzer.
>=20
> So for instance if I search for "Sing I"
> it should match the texts
> "If I Don't Sing I'll Cry", "Sing It" and "Sing It Again",
> but not "I Sing".
>=20
> The current solution I've come up with until now is use a
> WhitespaceTokenizer
> and create a TermQuery for all but the last token and a PrefixQuery =
for the
> last token,
> and combine this with AND (Occur.MUST).
> So for instance "I Sing" would result in "item.name:Sing AND =
item.name:I*"
> (I think,
> I've never seen the string representation of the query).
>=20
> When retrieving the results I check if the original query text is =
contained
> within the returned item.name (while ignoring cases), and only return =
it if
> it is
> the case.
>=20
> I am not sure however if this is a good result, performance-wise.
> Can you provide a better solution and/or comment on my current one.
>=20
> The currend one is quite quick if no whitespace is contained in the =
search
> term,
> but requests are many times slower if there are whitespaces (usually =
normal
> spaces)
> in the search term.
>=20
> Thanx,
> Lukas
Daniel Rosher
Developer
www.thehotonlinenetwork.com
d: 0207 3489 912

    t: 0845 4680 568

    f: 0845 4680 868

    m:=20

		Beaumont House, Kensington Village, Avonmore Road, London, W14 8TS
=09


    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - =
- - - - - - - - - - - - - - - - - - - - -

    This message is sent in confidence for the addressee only. It may =
contain privileged

    information. The contents are not to be disclosed to anyone other =
than the addressee.

    Unauthorised recipients are requested to preserve this =
confidentiality and to advise

    us of any errors in transmission. Thank you.

    hotonline ltd is registered in England & Wales. Registered office: =
One Canada Square,

    Canary Wharf, London E14 5AP. Registered No: 1904765.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 18:03:40 2008
Return-Path: <java-user-return-34563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35732 invoked from network); 23 Jun 2008 18:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 18:03:39 -0000
Received: (qmail 81954 invoked by uid 500); 23 Jun 2008 18:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81684 invoked by uid 500); 23 Jun 2008 18:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81673 invoked by uid 99); 23 Jun 2008 18:03:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 11:03:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.23 as permitted sender)
Received: from [80.67.29.23] (HELO smtprelay09.ispgateway.de) (80.67.29.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 18:02:42 +0000
Received: from [91.37.196.114] (helo=p5b25c472.dip.t-dialin.net)
	by smtprelay09.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KAqN2-0005hY-Dq
	for java-user@lucene.apache.org; Mon, 23 Jun 2008 20:02:28 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Getting irrelevant results using fuzzy query
Date: Mon, 23 Jun 2008 20:02:09 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <1213797929.14253.64.camel@whisper.dnsalias.net> <200806182037.58911@danielnaber.de> <1214219208.6161.45.camel@whisper.dnsalias.net>
In-Reply-To: <1214219208.6161.45.camel@whisper.dnsalias.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200806232002.10086@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Montag, 23. Juni 2008, L=C3=A1szl=C3=B3 Monda wrote:

> According to the current Lucene documentation at
> http://lucene.apache.org/java/2_3_2/api/index.html it seems to me that
> the Query class doesn't have any explain() methods.

It's in the IndexSearcher and it takes a query and a document number as its=
=20
arguments.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 22:03:58 2008
Return-Path: <java-user-return-34564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81960 invoked from network); 23 Jun 2008 22:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 22:03:57 -0000
Received: (qmail 16916 invoked by uid 500); 23 Jun 2008 22:03:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16880 invoked by uid 500); 23 Jun 2008 22:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16869 invoked by uid 99); 23 Jun 2008 22:03:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 15:03:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 22:03:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so9249972rvb.5
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 15:03:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=RLZvWmLCfH0f43DXtVUVv9XW2Nx9FPeLa8mxcHqKTXU=;
        b=NqhenISeJHX3AWJGDCMqfYjookp7uU8jPkgwH2OO8eV+HtoAkHRGhbk62dGNwhQF8A
         abRzJOTEsCALcexqtk2e+ynAGO/8RQTWAc8s9B5cv+h3QO9QmeMiKNCiS6OECPtogPQA
         S7cGP9o7Q7cp8eB38obSCm24pWwqDTGmIvNME=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=g/Dnt0pkux4Tx2jetX9EGz66D3Hd7OxAwy8eDan3rBptImIKAKK94qGIRjIAeYcYKN
         w++nTK0mmJa9H2J/d1oCm+tDI/Ks8RRUN3ODbzq3wLRoRcnL+Leq3NkRGgPnCaZS9lRW
         No/fQhjS2tGulgE7vMCv9jS6DES8DKhN8fC9I=
Received: by 10.141.13.16 with SMTP id q16mr13471159rvi.99.1214258601595;
        Mon, 23 Jun 2008 15:03:21 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Mon, 23 Jun 2008 15:03:21 -0700 (PDT)
Message-ID: <1bcb7c7f0806231503h10f1292as6ee29505930c4d48@mail.gmail.com>
Date: Tue, 24 Jun 2008 01:03:21 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: uniqueWords, and termDocs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6932_4828500.1214258601572"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6932_4828500.1214258601572
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I need to be able to select a random word out of all the words in my index.
how can I do this tru termDocs() ?

Also, I need to get a list of unique words as well. Is there a way to ask
this to lucene?

Best Regards,
-C.B.

------=_Part_6932_4828500.1214258601572--

From java-user-return-34565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 22:07:09 2008
Return-Path: <java-user-return-34565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83194 invoked from network); 23 Jun 2008 22:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 22:07:09 -0000
Received: (qmail 21566 invoked by uid 500); 23 Jun 2008 22:07:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21143 invoked by uid 500); 23 Jun 2008 22:07:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21132 invoked by uid 99); 23 Jun 2008 22:07:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 15:07:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 22:06:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KAuBE-0001dg-8j
	for java-user@lucene.apache.org; Mon, 23 Jun 2008 15:06:32 -0700
Message-ID: <18079321.post@talk.nabble.com>
Date: Mon, 23 Jun 2008 15:06:32 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: java.io.Ioexception cannot overwrite fdt
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I am facing this error while doing Indexing text files.can anyone guide me
how to resolve this issue.
-- 
View this message in context: http://www.nabble.com/java.io.Ioexception-cannot-overwrite-fdt-tp18079321p18079321.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 22:39:09 2008
Return-Path: <java-user-return-34566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96181 invoked from network); 23 Jun 2008 22:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 22:39:09 -0000
Received: (qmail 46514 invoked by uid 500); 23 Jun 2008 22:39:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46159 invoked by uid 500); 23 Jun 2008 22:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46148 invoked by uid 99); 23 Jun 2008 22:39:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 15:39:04 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=SPF_NEUTRAL,SUBJECT_FUZZY_TION
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 22:38:12 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id BAC765C592
	for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 15:38:00 -0700 (PDT)
Message-Id: <42CD4B1F-7292-4D83-85E5-B2AE131913A0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2A04FF58-7362-46B9-86DB-6628C255F8AD@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Token payload attribute partitioning
Date: Mon, 23 Jun 2008 18:37:59 -0400
References: <2A04FF58-7362-46B9-86DB-6628C255F8AD@gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 21, 2008, at 12:56 PM, Karl Wettin wrote:

> How do you handle token payload that represent multiple values? I  
> simply don't do it even though there are cases where I would like to  
> see it. I also find that my token filters that update payload feels  
> sort of quick and dirty, that it use a lot of that static scope I so  
> much dread for anything but ad hoc solutions.

I think you have to handle the serialization yourself, as only you  
know what the payload is.

>
>
> I would feel much better if there was some sort of partitioner with  
> pluggable CRUD strategies. PayloadMap or something.

Yeah, that could work.  It's kind of like using Token flags, no one  
has really staked a claim yet.

>
>
> But I'm not sure, perhaps the idea with the Payload class (rather  
> than just a byte[]) is to extend it and do stuff I did not think of?

Not sure really.  I'd like to see more Payload queries, personally,  
but haven't had the time to work on them.

>
>
>
>        karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 22:53:24 2008
Return-Path: <java-user-return-34567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3911 invoked from network); 23 Jun 2008 22:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 22:53:24 -0000
Received: (qmail 57071 invoked by uid 500); 23 Jun 2008 22:53:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57033 invoked by uid 500); 23 Jun 2008 22:53:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57022 invoked by uid 99); 23 Jun 2008 22:53:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 15:53:18 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 22:52:25 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2315767wra.21
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 15:52:43 -0700 (PDT)
Received: by 10.90.28.3 with SMTP id b3mr6284644agb.93.1214261562959;
        Mon, 23 Jun 2008 15:52:42 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 38sm8259540agd.38.2008.06.23.15.52.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 23 Jun 2008 15:52:42 -0700 (PDT)
Message-Id: <F9ACCFD5-3766-4E74-8889-8D0567B6BB1D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18079321.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: java.io.Ioexception cannot overwrite fdt
Date: Mon, 23 Jun 2008 18:52:40 -0400
References: <18079321.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you describe how you are using Lucene, and provide a full traceback?

Mike

Sebastin wrote:

>
> Hi All,
>
> I am facing this error while doing Indexing text files.can anyone  
> guide me
> how to resolve this issue.
> -- 
> View this message in context: http://www.nabble.com/java.io.Ioexception-cannot-overwrite-fdt-tp18079321p18079321.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 23 23:36:01 2008
Return-Path: <java-user-return-34568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23781 invoked from network); 23 Jun 2008 23:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jun 2008 23:36:01 -0000
Received: (qmail 10070 invoked by uid 500); 23 Jun 2008 23:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10032 invoked by uid 500); 23 Jun 2008 23:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10021 invoked by uid 99); 23 Jun 2008 23:35:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 16:35:55 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 23:35:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KAvW9-0004b4-0A
	for java-user@lucene.apache.org; Mon, 23 Jun 2008 16:32:13 -0700
Message-ID: <18080669.post@talk.nabble.com>
Date: Mon, 23 Jun 2008 16:32:12 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.Ioexception cannot overwrite fdt
In-Reply-To: <F9ACCFD5-3766-4E74-8889-8D0567B6BB1D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <18079321.post@talk.nabble.com> <F9ACCFD5-3766-4E74-8889-8D0567B6BB1D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am using Lucene to index text based files :
                          File file = new File("C:/index");
                          if(file.exists() == false{
                          IndexWriter writer = new IndexWriter(file,new
StandardAnalyzer(),true);
                            }
                          else
{
 IndexWriter writer = new IndexWriter(file,new StandardAnalyzer(),false);
}
                           FileReader fr = new FileReader("C:/source");
                           BufferedReader br = new BufferedReader (fr);
                           String records = br.readline();

                           while (records != null)
                           {

                    Document doc = new Document();
                    doc.add(new Field("indexRecords",
indexRecords,Field.Store.NO, Field.Index.TOKENIZED));
                    doc.add(new Field("storeRecords",
storeRecords,Field.Store.YES, Field.Index.NO));
                    writer.addDocument(doc);
                    
                    

                    records = br.readLine();
                    if(records == null)
                    {
                    writer.close(); 
                    } 

}

it throws the following error

java.io.IOException: Cannot overwrite: C:/index/_r.fdt
	at org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:433)
	at org.apache.lucene.index.FieldsWriter.<init>(FieldsWriter.java:47)
	at
org.apache.lucene.index.DocumentsWriter$ThreadState.init(DocumentsWriter.java:865)
	at
org.apache.lucene.index.DocumentsWriter.getThreadState(DocumentsWriter.java:2391)
	at
org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:2434)
	at
org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:2422)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1445)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1424)





Michael McCandless-2 wrote:
> 
> 
> Can you describe how you are using Lucene, and provide a full traceback?
> 
> Mike
> 
> Sebastin wrote:
> 
>>
>> Hi All,
>>
>> I am facing this error while doing Indexing text files.can anyone  
>> guide me
>> how to resolve this issue.
>> -- 
>> View this message in context:
>> http://www.nabble.com/java.io.Ioexception-cannot-overwrite-fdt-tp18079321p18079321.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/java.io.Ioexception-cannot-overwrite-fdt-tp18079321p18080669.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 01:47:03 2008
Return-Path: <java-user-return-34569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10420 invoked from network); 24 Jun 2008 01:47:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 01:47:03 -0000
Received: (qmail 5970 invoked by uid 500); 24 Jun 2008 01:46:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5932 invoked by uid 500); 24 Jun 2008 01:46:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5921 invoked by uid 99); 24 Jun 2008 01:46:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 18:46:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 01:46:09 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 25A74648005
	for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 11:48:03 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: lucene search options
Date: Tue, 24 Jun 2008 11:46:58 +1000
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com> <68959F25CDEBCB4F917D5A253291D73E07ECD647EC@BLRKECMBX06.ad.infosys.com> <6fc71b230806230108v43ebc613h262e0f8f531ef04@mail.gmail.com>
In-Reply-To: <6fc71b230806230108v43ebc613h262e0f8f531ef04@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806241146.58786.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 23 June 2008 18:08:29 Aditi Goyal wrote:
> Oh. For one moment I was elated to hear the news. :(
> Is there any way out?

*:* -"jakarta apache"

Or subclass QueryParser and override the getBooleanQuery() method to do this 
behind the scenes using MatchAllDocsQuery.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 06:39:10 2008
Return-Path: <java-user-return-34570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95556 invoked from network); 24 Jun 2008 06:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 06:39:09 -0000
Received: (qmail 87498 invoked by uid 500); 24 Jun 2008 06:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87460 invoked by uid 500); 24 Jun 2008 06:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87449 invoked by uid 99); 24 Jun 2008 06:39:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Jun 2008 23:39:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of taleofdragon@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 06:38:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so9429013rvb.5
        for <java-user@lucene.apache.org>; Mon, 23 Jun 2008 23:38:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=RWSBQxaQhMBtSxEltuyWWbiz9tbTuck6pazaJZber7Y=;
        b=Tm2b0cvbJRzmxvhn3V2ojpPHOSkeAay2itvXE4C4dW6cPgsQEEGV2ndUxtSdxUz1Ti
         PKeDd3ARwSloj62iBGEYM5TLGOzGCVi5N06c11fr284MYnb3+NKFHVjBZ9eGpE/llA1j
         pHQnJBnDmZaQ2N4zbVsg53LrDVJCueff3Dhy0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=YWYP3NSwlqN7WeWZpAXw/ceGROiSXNZhaNggU4E/PvzDH1rBTTU+4PCj0O3MNHMQJq
         XKGhIt+n+ODhOB611OiYlKCo6kBIrB80M5xZNmemPL5H1oBD5rS2p2D7znvUlRFgqp/G
         USJFEMM+wkk97wbycgHNj2CdVeFgmsHX89Pe4=
Received: by 10.141.49.18 with SMTP id b18mr4038354rvk.92.1214289515084;
        Mon, 23 Jun 2008 23:38:35 -0700 (PDT)
Received: by 10.115.58.5 with HTTP; Mon, 23 Jun 2008 23:38:35 -0700 (PDT)
Message-ID: <abef47410806232338u443083c4wc2033f856109b827@mail.gmail.com>
Date: Mon, 23 Jun 2008 23:38:35 -0700
From: "Jay dragon" <taleofdragon@gmail.com>
To: java-user@lucene.apache.org
Subject: BoostingQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28779_3281731.1214289515075"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28779_3281731.1214289515075
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
BoostingQuery is designed to demote the scores of documents when they match
the undesired
query by the boosting/demoting the final score. The problem I see is this
demoting factor is static/universal in the sense that it does not depend on
how much the docs match the negative query terms. Ideally, the more the doc
matches the  negative part of the query, the high the demotion.
I wonder if anyone here has thought about/encounted  the similar problem and
what's teh best way to handle that?

Thanks!

Tommy.

------=_Part_28779_3281731.1214289515075--

From java-user-return-34571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 07:05:14 2008
Return-Path: <java-user-return-34571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3569 invoked from network); 24 Jun 2008 07:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 07:05:12 -0000
Received: (qmail 14530 invoked by uid 500); 24 Jun 2008 07:05:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14501 invoked by uid 500); 24 Jun 2008 07:05:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14490 invoked by uid 99); 24 Jun 2008 07:05:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 00:05:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of taleofdragon@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 07:04:16 +0000
Received: by rv-out-0506.google.com with SMTP id f6so9439246rvb.5
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 00:04:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=k78AdiEoSq4G7GLJl7HKiFIkKuW9q7l+QtXt0LjURvU=;
        b=i+5zS8lUvzqdv3RzfpPwWXueNl35igRJ/mi1cziAs0CfP+S6Ux6DktvOkrHDr2jUmm
         5nB5Ct5URJ+ukV3LgmvnkQWFMQ8xDVcYNn+K8pEmUmGi3Zp5/Iv4G9fwQXnznRWWOwul
         PcN1MFDSBP/54kFQ1H6kPqrdRvVY5fzO+L9Aw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Mlc4RS7U6h7ikupbLOvhENckRO3BN6DoMgzTSd7UIi3jY5qFpXlMFMDWQWuexmoCCs
         Qd0brYyP9NmwkirnGSxJhBLcsAZ/KE1z+T1YLHddHyKfljvvn03Q4duE7twqcG9a82eh
         TBUauAobWS6ZjJkYYfrcFz1GvibjY8leO3Dd4=
Received: by 10.141.21.6 with SMTP id y6mr14281018rvi.18.1214291075681;
        Tue, 24 Jun 2008 00:04:35 -0700 (PDT)
Received: by 10.115.58.5 with HTTP; Tue, 24 Jun 2008 00:04:35 -0700 (PDT)
Message-ID: <abef47410806240004m590c6a8ah710392c4e00d1dc1@mail.gmail.com>
Date: Tue, 24 Jun 2008 00:04:35 -0700
From: "Jay dragon" <taleofdragon@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: BoostingQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28890_33194614.1214291075707"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28890_33194614.1214291075707
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
BoostingQuery is designed to demote the scores of documents when they match
the undesired
query by the boosting/demoting the final score. The problem I see is this
demoting factor is static/universal in the sense that it does not depend on
how much the docs match the negative query terms. Ideally, the more the doc
matches the  negative part of the query, the high the demotion.
I wonder if anyone here has thought about/encounted  the similar problem and
what's teh best way to handle that?

Thanks!

J.

------=_Part_28890_33194614.1214291075707--

From java-user-return-34572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 07:25:41 2008
Return-Path: <java-user-return-34572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9364 invoked from network); 24 Jun 2008 07:25:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 07:25:41 -0000
Received: (qmail 56758 invoked by uid 500); 24 Jun 2008 07:25:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55984 invoked by uid 500); 24 Jun 2008 07:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55973 invoked by uid 99); 24 Jun 2008 07:25:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 00:25:35 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 07:24:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KB2tj-00039r-Lc
	for java-user@lucene.apache.org; Tue, 24 Jun 2008 00:25:03 -0700
Message-ID: <18085388.post@talk.nabble.com>
Date: Tue, 24 Jun 2008 00:25:03 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: Indexing the spider content
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I am new to Lucene Search. Can you let me know if it is possible to index
the "Verity Spider" content. If possible please let me know how to create a
index form it and search on it. Also share some code snippets on how to
proceed on indexing and searching. I donot have much time to go throught the
Lucene API. Your help is appreciated.

Thanks,
Yug
-- 
View this message in context: http://www.nabble.com/Indexing-the-spider-content-tp18085388p18085388.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 09:18:10 2008
Return-Path: <java-user-return-34573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49710 invoked from network); 24 Jun 2008 09:18:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 09:18:10 -0000
Received: (qmail 28890 invoked by uid 500); 24 Jun 2008 09:18:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28856 invoked by uid 500); 24 Jun 2008 09:18:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28845 invoked by uid 99); 24 Jun 2008 09:18:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 02:18:04 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 09:17:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KB4ea-0007aZ-C3
	for java-user@lucene.apache.org; Tue, 24 Jun 2008 02:17:32 -0700
Message-ID: <18087133.post@talk.nabble.com>
Date: Tue, 24 Jun 2008 02:17:32 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: How to search on the indexed content
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I have created an index file and indexing the content retrieved from a
database. How can I search on this content? When indexed 3 files namely
_0.cfs, segments.gen and segments_k are created. Need help on this.

Thanks,
Yugana
-- 
View this message in context: http://www.nabble.com/How-to-search-on-the-indexed-content-tp18087133p18087133.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 09:58:30 2008
Return-Path: <java-user-return-34574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68855 invoked from network); 24 Jun 2008 09:58:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 09:58:30 -0000
Received: (qmail 97333 invoked by uid 500); 24 Jun 2008 09:58:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97296 invoked by uid 500); 24 Jun 2008 09:58:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97285 invoked by uid 99); 24 Jun 2008 09:58:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 02:58:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 09:57:34 +0000
Received: from lucastex-3.local (unknown [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id 60A535661B
	for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 06:57:20 -0300 (BRST)
Message-ID: <4860C4FA.6040302@accurate.com.br>
Date: Tue, 24 Jun 2008 06:57:14 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.14 (Macintosh/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: How to search on the indexed content
References: <18087133.post@talk.nabble.com>
In-Reply-To: <18087133.post@talk.nabble.com>
Content-Type: multipart/alternative;
 boundary="------------070406090507010502090700"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070406090507010502090700
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

http://lucene.apache.org/java/docs/queryparsersyntax.html

[]s,

Lucas Frare A. Teixeira
lucas.teixeira@accurate.com.br <mailto:lucas.teixeira@accurate.com.br>
Tel: +55 11 3660.1622 - R3018



yugana escreveu:
> Hi All,
>
> I have created an index file and indexing the content retrieved from a
> database. How can I search on this content? When indexed 3 files namely
> _0.cfs, segments.gen and segments_k are created. Need help on this.
>
> Thanks,
> Yugana
>   

--------------070406090507010502090700--

From java-user-return-34575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 11:36:17 2008
Return-Path: <java-user-return-34575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3240 invoked from network); 24 Jun 2008 11:36:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 11:36:16 -0000
Received: (qmail 43273 invoked by uid 500); 24 Jun 2008 11:36:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42508 invoked by uid 500); 24 Jun 2008 11:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42497 invoked by uid 99); 24 Jun 2008 11:36:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 04:36:10 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.82] (HELO exprod8og101.obsmtp.com) (64.18.3.82)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jun 2008 11:35:20 +0000
Received: from source ([193.201.197.58]) by exprod8ob101.postini.com ([64.18.7.12]) with SMTP;
	Tue, 24 Jun 2008 04:32:07 PDT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to search on the indexed content
Date: Tue, 24 Jun 2008 12:17:46 +0100
Message-ID: <39F273ED33612448863A19BBC1FBCFA002F21EC6@ms2.lsc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to search on the indexed content
Thread-Index: AcjV4NnXsv5vJ2UwSYSm5s2mTshPtwACwDBw
References: <18087133.post@talk.nabble.com> <4860C4FA.6040302@accurate.com.br>
From: <Aamir.Yaseen@globaldatapoint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

You can check this code for reference.
http://lucene.apache.org/java/docs/demo4.html

Regards,
Aamir Yaseen


-----Original Message-----
From: Lucas F. A. Teixeira [mailto:lucas.teixeira@accurate.com.br]=20
Sent: 24 June 2008 10:57 AM
To: java-user@lucene.apache.org
Subject: Re: How to search on the indexed content

http://lucene.apache.org/java/docs/queryparsersyntax.html

[]s,

Lucas Frare A. Teixeira
lucas.teixeira@accurate.com.br <mailto:lucas.teixeira@accurate.com.br>
Tel: +55 11 3660.1622 - R3018



yugana escreveu:
> Hi All,
>
> I have created an index file and indexing the content retrieved from a
> database. How can I search on this content? When indexed 3 files
namely
> _0.cfs, segments.gen and segments_k are created. Need help on this.
>
> Thanks,
> Yugana
>  =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 12:29:33 2008
Return-Path: <java-user-return-34576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33058 invoked from network); 24 Jun 2008 12:29:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 12:29:33 -0000
Received: (qmail 58807 invoked by uid 500); 24 Jun 2008 12:29:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58662 invoked by uid 500); 24 Jun 2008 12:29:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58651 invoked by uid 99); 24 Jun 2008 12:29:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 05:29:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 12:28:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KB7dl-0006Jj-3I
	for java-user@lucene.apache.org; Tue, 24 Jun 2008 05:28:53 -0700
Message-ID: <18089950.post@talk.nabble.com>
Date: Tue, 24 Jun 2008 05:28:53 -0700 (PDT)
From: mick l <kali.mist@gmail.com>
To: java-user@lucene.apache.org
Subject: Wildcard and Literal Searches combined
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kali.mist@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Folks,
My users require wildcard searches. Sometimes their search phrases contain
spaces. I am having trouble trying to implement a wildcard search on strings
containing spaces, so if the term includes spaces I force a literal search
by adding double quotes to the search term.
So the search string for 'Dublin' becomes search term (Dublin*)
whereas search string 'Dublin City' becomes ("Dublin City")


If I use (Dublin City*) I get all instances of Dublin OR City in the results
which is not what I am looking for. 

Is there any way I can combine the wildcard search and the literal?

Heres my existing code. Its in c# with Lucene.Net

//if input has spaces we do a literal search
if (sSearchQuery.IndexOf(" ") < 0)
{
sSearchQuery = "(" + sSearchQuery + "*)";
}
else
{
sSearchQuery = "(\"" + sSearchQuery + "\")";
}
IndexSearcher searcher = new IndexSearcher(sIndexLocation);
Hits oHitColl = searcher.Search(oParser.Parse(sSearchQuery));

Thanks folks 
-- 
View this message in context: http://www.nabble.com/Wildcard-and-Literal-Searches-combined-tp18089950p18089950.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 12:53:08 2008
Return-Path: <java-user-return-34577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50442 invoked from network); 24 Jun 2008 12:53:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 12:53:08 -0000
Received: (qmail 4450 invoked by uid 500); 24 Jun 2008 12:53:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4271 invoked by uid 500); 24 Jun 2008 12:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4260 invoked by uid 99); 24 Jun 2008 12:53:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 05:53:01 -0700
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Jon.Loken@bipsolutions.com designates 85.119.2.190 as permitted sender)
Received: from [85.119.2.190] (HELO cluster-f.mailcontrol.com) (85.119.2.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 12:52:08 +0000
Received: from mailx02.virtual-email.net ([213.228.203.171])
	by rly09f.srv.mailcontrol.com (MailControl) with ESMTP id m5OCnsc4020674
	for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 13:52:19 +0100
Received: from mailx10.virtual-email.net ([213.228.203.166]) by mailx02.virtual-email.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 24 Jun 2008 13:56:03 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Wildcard and Literal Searches combined
Date: Tue, 24 Jun 2008 13:51:40 +0100
Message-ID: <73C3337877023246872FB2E97FD1636C022FD357@mailx10.virtual-email.net>
In-Reply-To: <18089950.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Wildcard and Literal Searches combined
Thread-Index: AcjV9pEvr9/FcQAlStO1EYLAf7CpbwAAXslw
References: <18089950.post@talk.nabble.com>
From: "Jon Loken" <Jon.Loken@bipsolutions.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Jun 2008 12:56:03.0875 (UTC) FILETIME=[A8FC7730:01C8D5F9]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.70.0.119
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=20

I posed a similar question on 09 May 08.=20

The response was as below. I did not go down this route however, as a
wild carded 'exact' phrase is in a way contradictory.=20
Regards
Jon



Hi,

Here's a searchable mailing list archive:=20
http://www.gossamer-threads.com/lists/lucene/java-user/

As regards the wildcard phrase queries, here's one way I think you could
do it, but it's a bit of extra work. If you're using QueryParser, you'd
have to override the "getFieldQuery" method to use span queries instead
of phrase queries.

A phrase query can be implemented as a span query with a span or "slop"

factor of 1. So, once you have the PhraseQuery object, you would:

1. Extract the terms
2. For each one, check if it contains a "*" or a "?"
3. If it does, create a WildcardQuery using that term, and re-write it
using IndexReader.rewrite method. This expands the wildcard query into
all it's matches.
4. Create an array of SpanTermQuery objects, (one SpanTermQuery for each
term that matched you wildcard); then add that array to a SpanOrQuery.
5. Repeat 2 to 4 for each wildcard term in the phrase.
6. Finally (!), create a SpanNearQuery, adding all the original terms in
order, but substituting your SpanOrQuerys for the wildcard terms. Use a
slop of 1, and set the inOrder flag to true.

So, essentially, you'd end up with: (you'll have to excuse me if I
haven't rendered the span queries correctly as strings here - but this
should give the general idea...)

spanNear[boiler (spanOr[replacement replacing])]

So it will accept *either* "replacement" or "replacing" adjacent to
"boiler", which is what you want.

As you can see, it's a bit of work - but if you add this functionality
to the QueryParser, you'll can re-use it a lot!

Hope that helps!

-JB




=20

-----Original Message-----
From: mick l [mailto:kali.mist@gmail.com]=20
Sent: 24 June 2008 13:29
To: java-user@lucene.apache.org
Subject: Wildcard and Literal Searches combined


Folks,
My users require wildcard searches. Sometimes their search phrases
contain spaces. I am having trouble trying to implement a wildcard
search on strings containing spaces, so if the term includes spaces I
force a literal search by adding double quotes to the search term.
So the search string for 'Dublin' becomes search term (Dublin*) whereas
search string 'Dublin City' becomes ("Dublin City")


If I use (Dublin City*) I get all instances of Dublin OR City in the
results which is not what I am looking for.=20

Is there any way I can combine the wildcard search and the literal?

Heres my existing code. Its in c# with Lucene.Net

//if input has spaces we do a literal search if (sSearchQuery.IndexOf("
") < 0) { sSearchQuery =3D "(" + sSearchQuery + "*)"; } else {
sSearchQuery =3D "(\"" + sSearchQuery + "\")"; } IndexSearcher searcher =3D
new IndexSearcher(sIndexLocation); Hits oHitColl =3D
searcher.Search(oParser.Parse(sSearchQuery));

Thanks folks
--
View this message in context:
http://www.nabble.com/Wildcard-and-Literal-Searches-combined-tp18089950p
18089950.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


______________________________________________=20=20=20=20=20=20=20=20
This email has been scanned by Netintelligence=20=20=20=20=20=20=20=20
http://www.netintelligence.com/email



BiP Solutions Limited is a company registered in Scotland with Company Numb=
er SC086146 and VAT number 383030966 and having its registered office at Pa=
rk House, 300 Glasgow Road, Shawfield, Glasgow, G73 1SQ *******************=
*********************************************************
This e-mail (and any attachment) is intended only for the attention of the =
addressee(s). Its unauthorised use, disclosure, storage or copying is not p=
ermitted. If you are not the intended recipient, please destroyall copies a=
nd inform the sender by return e-mail.
This e-mail (whether you are the sender or the recipient) may be monitored,=
 recorded and retained by BiP Solutions Ltd.
E-mail monitoring/ blocking software may be used, and e-mail content may be=
 read at any time. You have a responsibility to ensure laws are not broken =
when composing or forwarding e-mails and their contents.
****************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 13:22:13 2008
Return-Path: <java-user-return-34578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64315 invoked from network); 24 Jun 2008 13:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 13:22:12 -0000
Received: (qmail 53479 invoked by uid 500); 24 Jun 2008 13:22:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53442 invoked by uid 500); 24 Jun 2008 13:22:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53431 invoked by uid 99); 24 Jun 2008 13:22:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 06:22:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 13:21:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KB8Si-00007u-J4
	for java-user@lucene.apache.org; Tue, 24 Jun 2008 06:21:32 -0700
Message-ID: <18090884.post@talk.nabble.com>
Date: Tue, 24 Jun 2008 06:21:32 -0700 (PDT)
From: mick l <kali.mist@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Wildcard and Literal Searches combined
In-Reply-To: <73C3337877023246872FB2E97FD1636C022FD357@mailx10.virtual-email.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kali.mist@gmail.com
References: <18089950.post@talk.nabble.com> <73C3337877023246872FB2E97FD1636C022FD357@mailx10.virtual-email.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Cheers,
Out of interest, how did you go about it in the end?


jloken wrote:
> 
> Hi, 
> 
> I posed a similar question on 09 May 08. 
> 
> The response was as below. I did not go down this route however, as a
> wild carded 'exact' phrase is in a way contradictory. 
> Regards
> Jon
> 
> 
> 
> Hi,
> 
> Here's a searchable mailing list archive: 
> http://www.gossamer-threads.com/lists/lucene/java-user/
> 
> As regards the wildcard phrase queries, here's one way I think you could
> do it, but it's a bit of extra work. If you're using QueryParser, you'd
> have to override the "getFieldQuery" method to use span queries instead
> of phrase queries.
> 
> A phrase query can be implemented as a span query with a span or "slop"
> 
> factor of 1. So, once you have the PhraseQuery object, you would:
> 
> 1. Extract the terms
> 2. For each one, check if it contains a "*" or a "?"
> 3. If it does, create a WildcardQuery using that term, and re-write it
> using IndexReader.rewrite method. This expands the wildcard query into
> all it's matches.
> 4. Create an array of SpanTermQuery objects, (one SpanTermQuery for each
> term that matched you wildcard); then add that array to a SpanOrQuery.
> 5. Repeat 2 to 4 for each wildcard term in the phrase.
> 6. Finally (!), create a SpanNearQuery, adding all the original terms in
> order, but substituting your SpanOrQuerys for the wildcard terms. Use a
> slop of 1, and set the inOrder flag to true.
> 
> So, essentially, you'd end up with: (you'll have to excuse me if I
> haven't rendered the span queries correctly as strings here - but this
> should give the general idea...)
> 
> spanNear[boiler (spanOr[replacement replacing])]
> 
> So it will accept *either* "replacement" or "replacing" adjacent to
> "boiler", which is what you want.
> 
> As you can see, it's a bit of work - but if you add this functionality
> to the QueryParser, you'll can re-use it a lot!
> 
> Hope that helps!
> 
> -JB
> 
> 
> 
> 
>  
> 
> -----Original Message-----
> From: mick l [mailto:kali.mist@gmail.com] 
> Sent: 24 June 2008 13:29
> To: java-user@lucene.apache.org
> Subject: Wildcard and Literal Searches combined
> 
> 
> Folks,
> My users require wildcard searches. Sometimes their search phrases
> contain spaces. I am having trouble trying to implement a wildcard
> search on strings containing spaces, so if the term includes spaces I
> force a literal search by adding double quotes to the search term.
> So the search string for 'Dublin' becomes search term (Dublin*) whereas
> search string 'Dublin City' becomes ("Dublin City")
> 
> 
> If I use (Dublin City*) I get all instances of Dublin OR City in the
> results which is not what I am looking for. 
> 
> Is there any way I can combine the wildcard search and the literal?
> 
> Heres my existing code. Its in c# with Lucene.Net
> 
> //if input has spaces we do a literal search if (sSearchQuery.IndexOf("
> ") < 0) { sSearchQuery = "(" + sSearchQuery + "*)"; } else {
> sSearchQuery = "(\"" + sSearchQuery + "\")"; } IndexSearcher searcher =
> new IndexSearcher(sIndexLocation); Hits oHitColl =
> searcher.Search(oParser.Parse(sSearchQuery));
> 
> Thanks folks
> --
> View this message in context:
> http://www.nabble.com/Wildcard-and-Literal-Searches-combined-tp18089950p
> 18089950.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ______________________________________________        
> This email has been scanned by Netintelligence        
> http://www.netintelligence.com/email
> 
> 
> 
> BiP Solutions Limited is a company registered in Scotland with Company
> Number SC086146 and VAT number 383030966 and having its registered office
> at Park House, 300 Glasgow Road, Shawfield, Glasgow, G73 1SQ
> ****************************************************************************
> This e-mail (and any attachment) is intended only for the attention of the
> addressee(s). Its unauthorised use, disclosure, storage or copying is not
> permitted. If you are not the intended recipient, please destroyall copies
> and inform the sender by return e-mail.
> This e-mail (whether you are the sender or the recipient) may be
> monitored, recorded and retained by BiP Solutions Ltd.
> E-mail monitoring/ blocking software may be used, and e-mail content may
> be read at any time. You have a responsibility to ensure laws are not
> broken when composing or forwarding e-mails and their contents.
> ****************************************************************************
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Wildcard-and-Literal-Searches-combined-tp18089950p18090884.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 13:26:39 2008
Return-Path: <java-user-return-34579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66506 invoked from network); 24 Jun 2008 13:26:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 13:26:39 -0000
Received: (qmail 61387 invoked by uid 500); 24 Jun 2008 13:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61364 invoked by uid 500); 24 Jun 2008 13:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61353 invoked by uid 99); 24 Jun 2008 13:26:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 06:26:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 13:25:45 +0000
Received: by nf-out-0910.google.com with SMTP id f5so9993nfh.15
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 06:26:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=AezTh2z6EJXXWaRFIp9GPR5FFVGFCmG6VNzjTCiZzEc=;
        b=StnigWSHU244kOFPw1t8BzhAgGbE+Ung7xMtAVXiRdBiP40JwT2eutj05Vb82NLDGH
         EmcdiVYCgaIJEarK1kjC5CXn6uPcAkD9bNk/SX4KMksVRi68idDmQKCgMPRF2rJb82Ie
         i1MDeVP1LEGK38qeBjEWMQ+oXwHeA7BAq45Jw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=u7y3UGwp9ZDw5e3ochfXc71CeRtk0OqmMjOCNPmIVLY1PnBkbfEHayiD88KqmzqvzK
         5OjmnWJrX/a1+G3AAlXUf1l4unmPuWFC4+02bicwO+zQd6LS3BtRJDbNjvfj5P9gmSXi
         tqgEIAgAMqvZvGxgvL0cjILnSmvDuUcCqQEDE=
Received: by 10.210.35.5 with SMTP id i5mr193172ebi.5.1214313963801;
        Tue, 24 Jun 2008 06:26:03 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Tue, 24 Jun 2008 06:26:03 -0700 (PDT)
Message-ID: <359a92830806240626m79db702aw2bdd9e73ff803f89@mail.gmail.com>
Date: Tue, 24 Jun 2008 09:26:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: uniqueWords, and termDocs
In-Reply-To: <1bcb7c7f0806231503h10f1292as6ee29505930c4d48@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19833_6231052.1214313963751"
References: <1bcb7c7f0806231503h10f1292as6ee29505930c4d48@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19833_6231052.1214313963751
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Isn't asking for unique words (actually tokens) equivalent to enumerating
all the terms in a field?

I have no idea how to select a random word. Seems like you'd have to
somehow use a TermEnum, but I don't think there's anything built in.

Best
Erick

On Mon, Jun 23, 2008 at 6:03 PM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello,
>
> I need to be able to select a random word out of all the words in my index.
> how can I do this tru termDocs() ?
>
> Also, I need to get a list of unique words as well. Is there a way to ask
> this to lucene?
>
> Best Regards,
> -C.B.
>

------=_Part_19833_6231052.1214313963751--

From java-user-return-34580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 13:35:24 2008
Return-Path: <java-user-return-34580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68590 invoked from network); 24 Jun 2008 13:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 13:35:24 -0000
Received: (qmail 83623 invoked by uid 500); 24 Jun 2008 13:35:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83591 invoked by uid 500); 24 Jun 2008 13:35:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83580 invoked by uid 99); 24 Jun 2008 13:35:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 06:35:18 -0700
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Jon.Loken@bipsolutions.com designates 85.119.2.190 as permitted sender)
Received: from [85.119.2.190] (HELO cluster-f.mailcontrol.com) (85.119.2.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 13:34:25 +0000
Received: from mailx02.virtual-email.net ([213.228.203.171])
	by rly14f.srv.mailcontrol.com (MailControl) with ESMTP id m5ODVj3x000592
	for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 14:34:37 +0100
Received: from mailx10.virtual-email.net ([213.228.203.166]) by mailx02.virtual-email.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 24 Jun 2008 14:38:21 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Wildcard and Literal Searches combined
Date: Tue, 24 Jun 2008 14:33:58 +0100
Message-ID: <73C3337877023246872FB2E97FD1636C022FD413@mailx10.virtual-email.net>
In-Reply-To: <18090884.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Wildcard and Literal Searches combined
Thread-Index: AcjV/ev7lcIhkedPTqKgZEbbMxES0QAAKeMA
References: <18089950.post@talk.nabble.com> <73C3337877023246872FB2E97FD1636C022FD357@mailx10.virtual-email.net> <18090884.post@talk.nabble.com>
From: "Jon Loken" <Jon.Loken@bipsolutions.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 24 Jun 2008 13:38:21.0984 (UTC) FILETIME=[91D12A00:01C8D5FF]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.70.0.124
X-Virus-Checked: Checked by ClamAV on apache.org

Our approach is:
If the keyword is a single word, then append the star (e.g. replace ->
replace*)
If the keyword is a phrase containing one of more spaces, then it is
treated as an exact phrase (e.g. replace this -> 'replace this')=20

Regards
Jon=20

-----Original Message-----
From: mick l [mailto:kali.mist@gmail.com]=20
Sent: 24 June 2008 14:22
To: java-user@lucene.apache.org
Subject: RE: Wildcard and Literal Searches combined


Cheers,
Out of interest, how did you go about it in the end?


jloken wrote:
>=20
> Hi,
>=20
> I posed a similar question on 09 May 08.=20
>=20
> The response was as below. I did not go down this route however, as a=20
> wild carded 'exact' phrase is in a way contradictory.
> Regards
> Jon
>=20
>=20
>=20
> Hi,
>=20
> Here's a searchable mailing list archive:=20
> http://www.gossamer-threads.com/lists/lucene/java-user/
>=20
> As regards the wildcard phrase queries, here's one way I think you=20
> could do it, but it's a bit of extra work. If you're using=20
> QueryParser, you'd have to override the "getFieldQuery" method to use=20
> span queries instead of phrase queries.
>=20
> A phrase query can be implemented as a span query with a span or
"slop"
>=20
> factor of 1. So, once you have the PhraseQuery object, you would:
>=20
> 1. Extract the terms
> 2. For each one, check if it contains a "*" or a "?"
> 3. If it does, create a WildcardQuery using that term, and re-write it

> using IndexReader.rewrite method. This expands the wildcard query into

> all it's matches.
> 4. Create an array of SpanTermQuery objects, (one SpanTermQuery for=20
> each term that matched you wildcard); then add that array to a
SpanOrQuery.
> 5. Repeat 2 to 4 for each wildcard term in the phrase.
> 6. Finally (!), create a SpanNearQuery, adding all the original terms=20
> in order, but substituting your SpanOrQuerys for the wildcard terms.=20
> Use a slop of 1, and set the inOrder flag to true.
>=20
> So, essentially, you'd end up with: (you'll have to excuse me if I=20
> haven't rendered the span queries correctly as strings here - but this

> should give the general idea...)
>=20
> spanNear[boiler (spanOr[replacement replacing])]
>=20
> So it will accept *either* "replacement" or "replacing" adjacent to=20
> "boiler", which is what you want.
>=20
> As you can see, it's a bit of work - but if you add this functionality

> to the QueryParser, you'll can re-use it a lot!
>=20
> Hope that helps!
>=20
> -JB
>=20
>=20
>=20
>=20
>=20=20
>=20
> -----Original Message-----
> From: mick l [mailto:kali.mist@gmail.com]
> Sent: 24 June 2008 13:29
> To: java-user@lucene.apache.org
> Subject: Wildcard and Literal Searches combined
>=20
>=20
> Folks,
> My users require wildcard searches. Sometimes their search phrases=20
> contain spaces. I am having trouble trying to implement a wildcard=20
> search on strings containing spaces, so if the term includes spaces I=20
> force a literal search by adding double quotes to the search term.
> So the search string for 'Dublin' becomes search term (Dublin*)=20
> whereas search string 'Dublin City' becomes ("Dublin City")
>=20
>=20
> If I use (Dublin City*) I get all instances of Dublin OR City in the=20
> results which is not what I am looking for.
>=20
> Is there any way I can combine the wildcard search and the literal?
>=20
> Heres my existing code. Its in c# with Lucene.Net
>=20
> //if input has spaces we do a literal search if
(sSearchQuery.IndexOf("
> ") < 0) { sSearchQuery =3D "(" + sSearchQuery + "*)"; } else {=20
> sSearchQuery =3D "(\"" + sSearchQuery + "\")"; } IndexSearcher searcher=
=20
> =3D new IndexSearcher(sIndexLocation); Hits oHitColl =3D=20
> searcher.Search(oParser.Parse(sSearchQuery));
>=20
> Thanks folks
> --
> View this message in context:
> http://www.nabble.com/Wildcard-and-Literal-Searches-combined-tp1808995
> 0p
> 18089950.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20


BiP Solutions Limited is a company registered in Scotland with Company Numb=
er SC086146 and VAT number 383030966 and having its registered office at Pa=
rk House, 300 Glasgow Road, Shawfield, Glasgow, G73 1SQ *******************=
*********************************************************
This e-mail (and any attachment) is intended only for the attention of the =
addressee(s). Its unauthorised use, disclosure, storage or copying is not p=
ermitted. If you are not the intended recipient, please destroyall copies a=
nd inform the sender by return e-mail.
This e-mail (whether you are the sender or the recipient) may be monitored,=
 recorded and retained by BiP Solutions Ltd.
E-mail monitoring/ blocking software may be used, and e-mail content may be=
 read at any time. You have a responsibility to ensure laws are not broken =
when composing or forwarding e-mails and their contents.
****************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 13:36:54 2008
Return-Path: <java-user-return-34581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68905 invoked from network); 24 Jun 2008 13:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 13:36:54 -0000
Received: (qmail 88730 invoked by uid 500); 24 Jun 2008 13:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88458 invoked by uid 500); 24 Jun 2008 13:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88447 invoked by uid 99); 24 Jun 2008 13:36:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 06:36:49 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 13:35:56 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2544258wfc.20
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 06:36:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5OTwGfTLLfQH44Hkq6LhtVNXrf0sex6QjWijmMiM6ZM=;
        b=rt5FUMMbhOdnZPaz8S0M4tFr+SzxuAZRaGhuTo/QuFJlsiEvRLtdzo10RmdCT5zA5Y
         5oKh/3erVlQucOqWOBQpR2pH8agRpLJ94CNHxdS09/mGlHHGcKlyz9v8cvbaEXhml8Cy
         BIijJEnhKyTQHhHpzpmgdqTtRZpCCh9phKxY0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pN+KNdxy2fmLOX8c4iwj2q80K7ru8WML4pXb0bdj1OiZkWoAzv3xU+st/ZQr8esZ7p
         C9hOQvufNoNwtCr+djHzcFT5ay7vAdUjBdq8d6z6MeFfyhzfHMdQsnmUDIvKk42nQyeO
         ttFDjqxZDhn1UqYV/LVhkxouBEQWFEXsHo/aA=
Received: by 10.143.2.19 with SMTP id e19mr5551339wfi.90.1214314575960;
        Tue, 24 Jun 2008 06:36:15 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Tue, 24 Jun 2008 06:36:15 -0700 (PDT)
Message-ID: <359a92830806240636i44cbf077w7bdffd0a2f253dbc@mail.gmail.com>
Date: Tue, 24 Jun 2008 09:36:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Wildcard and Literal Searches combined
In-Reply-To: <18089950.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19906_17911994.1214314575858"
References: <18089950.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19906_17911994.1214314575858
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Do you require that the words be right next to each other? You can,
of course, set your default to AND (it's OR unless you change it
explicitly). That'll give you documents that have both Dublin and City.
You don't need wildcards at all in this case.

If you require exact matches, you can use PhraseQuery or SpanQuery
to get words right next to each other. That is, "dublin city" would
be found but not "dublin is a very large city". You can set slop
(the distance between terms that counts as a hit) variously, and you
can also specify whether order is important. Again, you don't need
wildcards at all (and shouldn't use them unless you really need to).

Beware that phrase queries do NOT go through wildcard expansion. That
is, "Dubli* city" (as a PhraseQuery) doesn't do what you might think.

I'd really look over the query syntax carefully for more insights. See
http://lucene.apache.org/java/docs/queryparsersyntax.html

Also note that SpanQueries are something you construct yourself, you
don't send text through the query parser and magically get SpanQueries
back.

Best
Erick

On Tue, Jun 24, 2008 at 8:28 AM, mick l <kali.mist@gmail.com> wrote:

>
> Folks,
> My users require wildcard searches. Sometimes their search phrases contain
> spaces. I am having trouble trying to implement a wildcard search on
> strings
> containing spaces, so if the term includes spaces I force a literal search
> by adding double quotes to the search term.
> So the search string for 'Dublin' becomes search term (Dublin*)
> whereas search string 'Dublin City' becomes ("Dublin City")
>
>
> If I use (Dublin City*) I get all instances of Dublin OR City in the
> results
> which is not what I am looking for.
>
> Is there any way I can combine the wildcard search and the literal?
>
> Heres my existing code. Its in c# with Lucene.Net
>
> //if input has spaces we do a literal search
> if (sSearchQuery.IndexOf(" ") < 0)
> {
> sSearchQuery = "(" + sSearchQuery + "*)";
> }
> else
> {
> sSearchQuery = "(\"" + sSearchQuery + "\")";
> }
> IndexSearcher searcher = new IndexSearcher(sIndexLocation);
> Hits oHitColl = searcher.Search(oParser.Parse(sSearchQuery));
>
> Thanks folks
> --
> View this message in context:
> http://www.nabble.com/Wildcard-and-Literal-Searches-combined-tp18089950p18089950.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19906_17911994.1214314575858--

From java-user-return-34582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 14:43:05 2008
Return-Path: <java-user-return-34582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98174 invoked from network); 24 Jun 2008 14:43:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 14:43:05 -0000
Received: (qmail 38863 invoked by uid 500); 24 Jun 2008 14:42:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38825 invoked by uid 500); 24 Jun 2008 14:42:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38814 invoked by uid 99); 24 Jun 2008 14:42:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 07:42:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jun 2008 14:42:07 +0000
Received: (qmail 40652 invoked by uid 60001); 24 Jun 2008 14:42:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=n4ayeNj9AJE3lzhc62y3KWpDXwhESxXLi0Of9pK7WxRiDRzEFhmQARX6bD7J66u5PGuz9s9vFnRW75nt9FTo6AYdVP8QUyBer7vfFSExpVU+9mTaTd1kRTfMwRP9EMewJ+l4T/sk2TOYJuCAXAhjcpfwB9q/psuA10e80EYEM/o=;
Received: from [208.125.28.220] by web50302.mail.re2.yahoo.com via HTTP; Tue, 24 Jun 2008 07:42:24 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Tue, 24 Jun 2008 07:42:24 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: uniqueWords, and termDocs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <912001.40055.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I have this uncommitted class locally (forgot its origins), which you'll like:

$ svn st
?      contrib/miscellaneous/src/java/org/apache/lucene/misc/AllTerms.java


Slap the package statement and add imports and you have it.  Read this into some data structure and pick random terms from there.

/**
 * <code>AllTerms</code> class extracts terms and their frequencies out
 * of an existing Lucene index.
 *
 * @version $Id: HighFreqTerms.java 376393 2006-02-09 19:17:14Z otis $
 */
public class AllTerms {

  public static void main(String[] args) throws Exception {
    IndexReader reader = null;
    String field = null;
    if (args.length == 1) {
      reader = IndexReader.open(args[0]);
    } else if (args.length == 2) {
      reader = IndexReader.open(args[0]);
      field = args[1];
    } else {
      usage();
      System.exit(1);
    }

    TermEnum terms = reader.terms();

    if (field != null) { 
      while (terms.next()) {
        if (terms.term().field().equals(field)) {
          System.out.println(terms.term() + ": " + terms.docFreq());
        }
      }
    }
    else {
      while (terms.next()) {
        System.out.println(terms.term() + ": " + terms.docFreq());
      }
    }

    reader.close();
  }

  private static void usage() {
    System.out.println(
         "\n\n"
         + "java org.apache.lucene.misc.AllTerms <index dir> [field]\n\n");
  }
}
 
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 24, 2008 9:26:03 AM
> Subject: Re: uniqueWords, and termDocs
> 
> Isn't asking for unique words (actually tokens) equivalent to enumerating
> all the terms in a field?
> 
> I have no idea how to select a random word. Seems like you'd have to
> somehow use a TermEnum, but I don't think there's anything built in.
> 
> Best
> Erick
> 
> On Mon, Jun 23, 2008 at 6:03 PM, Cam Bazz wrote:
> 
> > Hello,
> >
> > I need to be able to select a random word out of all the words in my index.
> > how can I do this tru termDocs() ?
> >
> > Also, I need to get a list of unique words as well. Is there a way to ask
> > this to lucene?
> >
> > Best Regards,
> > -C.B.
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 14:44:51 2008
Return-Path: <java-user-return-34583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98661 invoked from network); 24 Jun 2008 14:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 14:44:51 -0000
Received: (qmail 43591 invoked by uid 500); 24 Jun 2008 14:44:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43033 invoked by uid 500); 24 Jun 2008 14:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43022 invoked by uid 99); 24 Jun 2008 14:44:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 07:44:46 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jun 2008 14:43:54 +0000
Received: (qmail 41855 invoked by uid 60001); 24 Jun 2008 14:44:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=nYQ1HHQeiZcpE6cfF5qejuG4LK1TidOPS/5nDSYctXs1jVQiyl2BSwnIRpyZPGG9crRUNxz880KgDpapDXNu0L7nMfXxGCU1r/KcKwr3bYDxI5pDAhol8IwmAC+ZwTwf/fANfEb84DfGJeoGdr46Nm4lqzvNvvr34jLrkdEFu30=;
Received: from [208.125.28.220] by web50302.mail.re2.yahoo.com via HTTP; Tue, 24 Jun 2008 07:44:12 PDT
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Tue, 24 Jun 2008 07:44:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing the spider content
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <985307.41586.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It sounds like you want to check out Nutch - fetched, indexer, searcher, etc. in one lovely package.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


----- Original Message ----
> From: yugana <yugandhar.adem@wipro.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, June 24, 2008 3:25:03 AM
> Subject: Indexing the spider content
> 
> 
> Hi All,
> 
> I am new to Lucene Search. Can you let me know if it is possible to index
> the "Verity Spider" content. If possible please let me know how to create a
> index form it and search on it. Also share some code snippets on how to
> proceed on indexing and searching. I donot have much time to go throught the
> Lucene API. Your help is appreciated.
> 
> Thanks,
> Yug
> -- 
> View this message in context: 
> http://www.nabble.com/Indexing-the-spider-content-tp18085388p18085388.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 15:46:12 2008
Return-Path: <java-user-return-34584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42625 invoked from network); 24 Jun 2008 15:46:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 15:46:12 -0000
Received: (qmail 60953 invoked by uid 500); 24 Jun 2008 15:46:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60924 invoked by uid 500); 24 Jun 2008 15:46:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60913 invoked by uid 99); 24 Jun 2008 15:46:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 08:46:06 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 15:45:14 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2610890wra.21
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 08:45:32 -0700 (PDT)
Received: by 10.90.102.8 with SMTP id z8mr12019606agb.53.1214322331389;
        Tue, 24 Jun 2008 08:45:31 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm9577464agc.4.2008.06.24.08.45.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 24 Jun 2008 08:45:30 -0700 (PDT)
Message-Id: <5961388B-7A02-445B-8DE3-FFC9CAE1EB8C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18080669.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: java.io.Ioexception cannot overwrite fdt
Date: Tue, 24 Jun 2008 11:45:29 -0400
References: <18079321.post@talk.nabble.com> <F9ACCFD5-3766-4E74-8889-8D0567B6BB1D@mikemccandless.com> <18080669.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you by any chance, separately, removing files from your index  
directory manually?  That's the one case I know of which can lead to  
that exception, if you also have an IndexReader open on the directory  
at that time.

The code below has one problem.  In your if statement true & false  
clauses, you declare "IndexWriter writer = ...", but, this means you  
cannot use the "writer" variable outside of those scopes.  So I don't  
see how that code can work.

Mike

Sebastin wrote:

>
> Hi,
>
> I am using Lucene to index text based files :
>                          File file = new File("C:/index");
>                          if(file.exists() == false{
>                          IndexWriter writer = new IndexWriter(file,new
> StandardAnalyzer(),true);
>                            }
>                          else
> {
> IndexWriter writer = new IndexWriter(file,new  
> StandardAnalyzer(),false);
> }
>                           FileReader fr = new FileReader("C:/source");
>                           BufferedReader br = new BufferedReader (fr);
>                           String records = br.readline();
>
>                           while (records != null)
>                           {
>
>                    Document doc = new Document();
>                    doc.add(new Field("indexRecords",
> indexRecords,Field.Store.NO, Field.Index.TOKENIZED));
>                    doc.add(new Field("storeRecords",
> storeRecords,Field.Store.YES, Field.Index.NO));
>                    writer.addDocument(doc);
>
>
>
>                    records = br.readLine();
>                    if(records == null)
>                    {
>                    writer.close();
>                    }
>
> }
>
> it throws the following error
>
> java.io.IOException: Cannot overwrite: C:/index/_r.fdt
> 	at  
> org.apache.lucene.store.FSDirectory.createOutput(FSDirectory.java:433)
> 	at org.apache.lucene.index.FieldsWriter.<init>(FieldsWriter.java:47)
> 	at
> org.apache.lucene.index.DocumentsWriter 
> $ThreadState.init(DocumentsWriter.java:865)
> 	at
> org 
> .apache 
> .lucene.index.DocumentsWriter.getThreadState(DocumentsWriter.java: 
> 2391)
> 	at
> org 
> .apache 
> .lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java: 
> 2434)
> 	at
> org 
> .apache 
> .lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:2422)
> 	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java: 
> 1445)
> 	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java: 
> 1424)
>
>
>
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Can you describe how you are using Lucene, and provide a full  
>> traceback?
>>
>> Mike
>>
>> Sebastin wrote:
>>
>>>
>>> Hi All,
>>>
>>> I am facing this error while doing Indexing text files.can anyone
>>> guide me
>>> how to resolve this issue.
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/java.io.Ioexception-cannot-overwrite-fdt-tp18079321p18079321.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/java.io.Ioexception-cannot-overwrite-fdt-tp18079321p18080669.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 15:49:06 2008
Return-Path: <java-user-return-34585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44592 invoked from network); 24 Jun 2008 15:49:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 15:49:05 -0000
Received: (qmail 72756 invoked by uid 500); 24 Jun 2008 15:49:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72726 invoked by uid 500); 24 Jun 2008 15:49:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72715 invoked by uid 99); 24 Jun 2008 15:49:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 08:49:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lexsoto@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 15:48:11 +0000
Received: by py-out-1112.google.com with SMTP id z74so1441645pyg.9
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 08:48:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=2nSHi9BxOnx9R7HtY5to/TlgCwqDTYwPiIEH2eXWbTY=;
        b=t72Xqrezw+V/OeiiH3haMEuRZv7XTwxsHrycOGKIjDquFeBVYXHCWzCydG0gWfarxP
         wpklkwyMrYbqSs6JRQtXgLoN8HDvSDKnnsZoMr25ofu6Fs137EPzOq/+NOZas5tIVIc5
         5OdU1V2SeW8n2Ry41Hz6ku+3FAiu1NneRflgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=lFxUtAxrQ91yAz25z7TYiYzPNyuwz3lqQOmjmteIUc0vvezJl2JtRjF2v8qHw55HsK
         Y8+tE00j2AmMQpay0r4mYYn0d4eJyWFDDAOVAlGEtg6M2tMhBNRhiEj0ytryrslmzx7n
         qlqT0wJfAW0BJfvLtDFHrUwe4W0wzxsbPzoLw=
Received: by 10.142.88.4 with SMTP id l4mr5763308wfb.238.1214322493336;
        Tue, 24 Jun 2008 08:48:13 -0700 (PDT)
Received: by 10.114.146.15 with HTTP; Tue, 24 Jun 2008 08:48:13 -0700 (PDT)
Message-ID: <cb6082e70806240848g43d5df60w4a4d5bff1e5ca805@mail.gmail.com>
Date: Tue, 24 Jun 2008 11:48:13 -0400
From: "Alex Soto" <lexsoto@gmail.com>
To: java-user@lucene.apache.org
Subject: searching for C++
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello:

I have a problem where I need to search for the term "C++".
If I use StandardAnalyzer, the "+" characters are removed and the
search is done on just the "c" character which is not what is
intended.
Yet, I need to use standard analyzer for the other benefits it provides.

I think I need to write a specialized tokenizer (and accompanying
analyzer) that let the "+" characters pass.
I would use the JFlex provided one, modify it and add it to my project.

My question is:

Is there any simpler way to accomplish the same?


Best regards,
Alex Soto
lexsoto@gmail.com

-
Amicus Plato, sed magis amica veritas.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 15:59:39 2008
Return-Path: <java-user-return-34586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47950 invoked from network); 24 Jun 2008 15:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 15:59:39 -0000
Received: (qmail 90031 invoked by uid 500); 24 Jun 2008 15:59:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89989 invoked by uid 500); 24 Jun 2008 15:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89954 invoked by uid 99); 24 Jun 2008 15:59:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 08:59:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lexsoto@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 15:58:34 +0000
Received: by rn-out-0910.google.com with SMTP id j71so527228rne.4
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 08:58:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=qjbn0EbM6/pP/EnKJYBKpbaTt56vtNIfMypUVZ9v+iw=;
        b=dD9pmzGxE+ZlV4a/gRkwJWqMaxFiKDpH/x+KWkMUzgmkS+1gKJuVlNmxzl6JV+MEHr
         VzHv1J+l562G8moJVf4u3qyPfLpZ7u0UmmwPYHKyDIUrxSROz2HgEv+lSLF9EPYUyrL4
         DJVLq4H9B7cStn1sQDWmP4Pv41v5YxmaOluTA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=U6VQjHt8T10EJveWZTrLozKnpzmhFZTZuRoNjD6vFjjhVJbcva186Gkq3juT9UxeU1
         sAoa+L2vLcLeuthQo/Bb5JS5Qe9voD86DuMHPcIl6pbVbbv0JmsFsAg2WLmDpdQ3hs+f
         ua6FuXXMC1wrCo6hJ8UnAM99zg5kFwsnIqbQ4=
Received: by 10.142.237.20 with SMTP id k20mr5785156wfh.225.1214323132349;
        Tue, 24 Jun 2008 08:58:52 -0700 (PDT)
Received: by 10.114.146.15 with HTTP; Tue, 24 Jun 2008 08:58:52 -0700 (PDT)
Message-ID: <cb6082e70806240858h443023f6h600422730e38d9fd@mail.gmail.com>
Date: Tue, 24 Jun 2008 11:58:52 -0400
From: "Alex Soto" <lexsoto@gmail.com>
To: java-user@lucene.apache.org
Subject: searching for words with symbols
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello:

I have a problem where I need to search for the word "C++".
If I use StandardAnalyzer, the "+" characters are removed and the
search is done on just the "c" character which is not what is
intended.
Yet, I need to use standard analyzer for the other benefits it provides.

I think I need to write a specialized tokenizer (and accompanying
analyzer) that let the "+" characters pass.
I would use the JFlex provided one, modify it and add it to my project.

My question is:

Is there any simpler way to accomplish the same?

-- 
Alex Soto
lexsoto@gmail.com

-
Amicus Plato, sed magis amica veritas.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 16:06:58 2008
Return-Path: <java-user-return-34587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50550 invoked from network); 24 Jun 2008 16:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 16:06:58 -0000
Received: (qmail 2304 invoked by uid 500); 24 Jun 2008 16:06:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2263 invoked by uid 500); 24 Jun 2008 16:06:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2252 invoked by uid 99); 24 Jun 2008 16:06:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 09:06:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 16:06:02 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1KBAuj-00066g-6S
	for java-user@lucene.apache.org; Tue, 24 Jun 2008 16:58:38 +0100
Message-ID: <48611AB5.4040904@propylon.com>
Date: Tue, 24 Jun 2008 17:03:01 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <cb6082e70806240848g43d5df60w4a4d5bff1e5ca805@mail.gmail.com>
In-Reply-To: <cb6082e70806240848g43d5df60w4a4d5bff1e5ca805@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: searching for C++
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.5 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

I don't think there is a simpler way. I think you will have to modify 
the tokenizer. Once you go beyond basic human-readable text, you always 
end up having to do that. I have modified the JavaCC version of 
StandardTokenizer  for allowing symbols to pass through, but I've never 
used the JFlex version - don't know anything about JFlex I'm afraid!

A good strategy might be to make a new type of lexical token called 
"SYMBOL" and try to catch as many symbols as you can think of; then 
maybe create new token types which are ALPHANUM types that can have 
pre-fixed or post-fixed symbols.

That way, you'll be able to catch things like "c++" in a TokenFilter, 
and you can choose to pass it through as a single token, or split it up 
into two tokens, or whatever you want.

Hope that helps.

Regards,
JB

Alex Soto wrote:
> Hello:
>
> I have a problem where I need to search for the term "C++".
> If I use StandardAnalyzer, the "+" characters are removed and the
> search is done on just the "c" character which is not what is
> intended.
> Yet, I need to use standard analyzer for the other benefits it provides.
>
> I think I need to write a specialized tokenizer (and accompanying
> analyzer) that let the "+" characters pass.
> I would use the JFlex provided one, modify it and add it to my project.
>
> My question is:
>
> Is there any simpler way to accomplish the same?
>
>
> Best regards,
> Alex Soto
> lexsoto@gmail.com
>
> -
> Amicus Plato, sed magis amica veritas.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 16:14:12 2008
Return-Path: <java-user-return-34588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54234 invoked from network); 24 Jun 2008 16:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 16:14:11 -0000
Received: (qmail 12917 invoked by uid 500); 24 Jun 2008 16:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12885 invoked by uid 500); 24 Jun 2008 16:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12874 invoked by uid 99); 24 Jun 2008 16:14:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 09:14:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.136.44.45] (HELO n77.bullet.mail.sp1.yahoo.com) (98.136.44.45)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Jun 2008 16:13:14 +0000
Received: from [216.252.122.216] by n77.bullet.mail.sp1.yahoo.com with NNFMP; 24 Jun 2008 16:12:48 -0000
Received: from [68.142.230.29] by t1.bullet.sp1.yahoo.com with NNFMP; 24 Jun 2008 16:12:48 -0000
Received: from [69.147.75.192] by t2.bullet.re2.yahoo.com with NNFMP; 24 Jun 2008 16:12:48 -0000
Received: from [127.0.0.1] by omp108.mail.re1.yahoo.com with NNFMP; 24 Jun 2008 16:12:48 -0000
X-Yahoo-Newman-Id: 9605.51449.bm@omp108.mail.re1.yahoo.com
Received: (qmail 33001 invoked from network); 24 Jun 2008 16:12:47 -0000
Received: from unknown (HELO ?192.168.1.151?) (nhira@cognocys.com@69.136.240.12 with plain)
  by smtp116.plus.mail.re1.yahoo.com with SMTP; 24 Jun 2008 16:12:47 -0000
X-YMail-OSG: JXZl24wVM1k3.BcTRFajloy4FaYerjOdkizGUWSm9vPgYsQ64phWeKcpvyCO0S7kHhMz2SVNtvXI6suGe8jwTK6FPyiydsPQBlP6UfXMYjZVijiyQLsefbylVGC6Pq1E9WY-
X-Yahoo-Newman-Property: ymail-3
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <48611AB5.4040904@propylon.com>
References: <cb6082e70806240848g43d5df60w4a4d5bff1e5ca805@mail.gmail.com> <48611AB5.4040904@propylon.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <40B14E03-0F3D-434A-AE59-3792D2A8EEFB@cognocys.com>
Content-Transfer-Encoding: 7bit
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: searching for C++
Date: Tue, 24 Jun 2008 11:12:46 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

This isn't ideal, but if you have a defined list of such terms, you  
may find it easier to filter these terms out into a separate field  
for indexing.

-h
----------------------------------------------------------------------
Hira, N.R.
Solutions Architect
Cognocys, Inc.
(773) 251-7453

On 24-Jun-2008, at 11:03 AM, John Byrne wrote:

> I don't think there is a simpler way. I think you will have to  
> modify the tokenizer. Once you go beyond basic human-readable text,  
> you always end up having to do that. I have modified the JavaCC  
> version of StandardTokenizer  for allowing symbols to pass through,  
> but I've never used the JFlex version - don't know anything about  
> JFlex I'm afraid!
>
> A good strategy might be to make a new type of lexical token called  
> "SYMBOL" and try to catch as many symbols as you can think of; then  
> maybe create new token types which are ALPHANUM types that can have  
> pre-fixed or post-fixed symbols.
>
> That way, you'll be able to catch things like "c++" in a  
> TokenFilter, and you can choose to pass it through as a single  
> token, or split it up into two tokens, or whatever you want.
>
> Hope that helps.
>
> Regards,
> JB
>
> Alex Soto wrote:
>> Hello:
>>
>> I have a problem where I need to search for the term "C++".
>> If I use StandardAnalyzer, the "+" characters are removed and the
>> search is done on just the "c" character which is not what is
>> intended.
>> Yet, I need to use standard analyzer for the other benefits it  
>> provides.
>>
>> I think I need to write a specialized tokenizer (and accompanying
>> analyzer) that let the "+" characters pass.
>> I would use the JFlex provided one, modify it and add it to my  
>> project.
>>
>> My question is:
>>
>> Is there any simpler way to accomplish the same?
>>
>>
>> Best regards,
>> Alex Soto
>> lexsoto@gmail.com
>>
>> -
>> Amicus Plato, sed magis amica veritas.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 16:22:02 2008
Return-Path: <java-user-return-34589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57047 invoked from network); 24 Jun 2008 16:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 16:22:02 -0000
Received: (qmail 23989 invoked by uid 500); 24 Jun 2008 16:21:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23963 invoked by uid 500); 24 Jun 2008 16:21:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23952 invoked by uid 99); 24 Jun 2008 16:21:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 09:21:56 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 16:21:04 +0000
Received: by rv-out-0506.google.com with SMTP id f6so9647759rvb.5
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 09:21:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:subject
         :date:mime-version:content-type:content-transfer-encoding:x-priority
         :x-msmail-priority:x-mailer:x-mimeole;
        bh=WPQaV/BdMmbVVnQneoz3QJphMakVWpvDw9p7kDoRB+U=;
        b=LsWXA40d7yYCqX2+pQKSxu5WgvuymTPT/sODLH/HYMQbRMkgekigV0FQRA9j6iKE0h
         66FyC4Z2/6H18D38660vbL5Uv+dVfmn1teipZDUJazZGu10e2MJMtXKoRezJNL8AWUWC
         GHOkRlGpt/+9MSx2A23Qq+ySDdiMH7TLODOzc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-priority:x-msmail-priority:x-mailer
         :x-mimeole;
        b=GDyBNpAdZvPf4/+j+/WU6MtfllEnmJNfegCAXAISEp/tMINqDCTBbe2GSk0Z2jQI6x
         4t9nf1ks2SFWH2SnR+Ul/BPEBZCw2uD/DDBGNj8W6ZqSMsAqZ/0D9ACtD55Xm5e4jCQF
         IAY3M9Ev9AKV9VelNrRZUSf8M+fwDA5izzRb0=
Received: by 10.141.29.18 with SMTP id g18mr14986403rvj.298.1214324483330;
        Tue, 24 Jun 2008 09:21:23 -0700 (PDT)
Received: from wuqi ( [125.33.127.42])
        by mx.google.com with ESMTPS id f21sm14720052rvb.0.2008.06.24.09.21.20
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 24 Jun 2008 09:21:22 -0700 (PDT)
Message-ID: <003001c8d615$ac3e9920$7f00a8c0@wuqi>
From: "wuqi" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
Subject: How about adding a new paramer  to  Similarity.scorePayload( ) ?
Date: Wed, 25 Jun 2008 00:16:30 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

SGksDQpJIHdhbnQgdG8gY3VzdG9taXplIGEgbmV3IFNpbWlsYXJpdHkgY2xhc3Mgd2hpY2ggbmVl
ZCB0byBhZG9wdCBwYXlsb2FkIGluZm9ybWF0aW9uLlRoZSBjdXJyZW50IGRlZmluaXRpb24gb2Yg
c2NvcmVQYXlsb2FkIGlzIGJlbG93Og0KICAgICJwdWJsaWMgZmxvYXQgc2NvcmVQYXlsb2FkKFN0
cmluZyBmaWVsZE5hbWUsIGJ5dGUgW10gcGF5bG9hZCwgaW50IG9mZnNldCwgaW50IGxlbmd0aCki
DQpJIGhhdmUgYSBwcm9ibGVtIHdoZW4gdXNpbmcgdGhpcyBmdW5jdGlvbi5JbiBjYXNlIHdlIGhh
dmUgdHdvIEJvb3N0aW5nVGVybVF1ZXJ5OiAgDQogICBCb29zdGluZ1Rlcm1RdWVyeSAjMTogICBm
aWVsZE5hbWU9IkNvdW50cnkiIGFuZCAgZmllbGRWYWx1ZT0gIkFtZXJpY2EiDQogICBCb29zdGlu
Z1Rlcm1RdWVyeSAjMjogICBmaWVsZE5hbWU9IkNvdW50cnkiIGFuZCAgZmllbGRWYWx1ZT0iQ2hp
bmEiDQphbmQgdGhlIHRoZSBpbmZvcm1hdGlvbiBvZiBvbmUgcGF5bG9hZHMgbG9va3MgbGlrZSB0
aGlzOg0KICBwYXlsb2FkOiB7bmV3IFlvcmssc2FuIEpvc2UsQ2hpY2Fnb30NCm9mIGNvdXJzZSxx
dWVyeSAjMSBzaG91bGQgZ2V0IGEgaGlnaGVyIHBheVBheWxvYWQgc2NvcmUuQnV0IGN1cnJlbnQg
aW50ZXJmYWNlIHByZXZlbnQgdXMgZnJvbSBzZW5kaW5nIGZpZWxkVmFsdWUgaW5mb3JtYXRpb24g
dG8gc2NvcmVQYXlsb2FkIGZ1bmN0aW9uLiBTbyBtYXliZSB3ZSBzaG91bGQgYWRkIGEgbmV3IGlu
dGVyZmFjZSBsaWtlDQogICBwdWJsaWMgZmxvYXQgc2NvcmVQYXlsb2FkKFN0cmluZyBmaWVsTmFt
ZSxTdHJpbmcgdmFsdWUsYnl0ZVtdIHBheWxvYWQsaW50IG9mZnNldCxpbnQgbGVuZ3RoKQ0KYW5k
IEJvb3N0aW5nIFF1ZXJ5IGFsc28gbmVlZCB0byBiZSBjaGFuZ2VkIGFjY29yZGluZ2x5Lg0KDQpU
aGFua3MNCi1RaQ0KDQoNCg0K



From java-user-return-34590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 16:40:39 2008
Return-Path: <java-user-return-34590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63989 invoked from network); 24 Jun 2008 16:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 16:40:39 -0000
Received: (qmail 60700 invoked by uid 500); 24 Jun 2008 16:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60671 invoked by uid 500); 24 Jun 2008 16:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60660 invoked by uid 99); 24 Jun 2008 16:40:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 09:40:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lexsoto@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 16:39:44 +0000
Received: by py-out-1112.google.com with SMTP id z74so1458581pyg.9
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 09:40:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=lJ8l+AOxuw1mIdu7ozsmxOD0XKePSmnflbuKp4ohp7w=;
        b=KdYGHpz2gzrSsmXhhxCdX0WUi/0+NZxVIfvTJ7Zz6H+VhkM/YGvyLKHrFZaPWB0pjh
         D5IYH0FguRLjS9eqRq44G/XE8Ly7sqdZ3rEKEzATzlxD+4V+V+dJQ9D0gxIDUiGG/Vym
         CAHDW1m2bk8kmUAPuaOOli29d1GnFR+hXGOHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=EBY3LF1FPfgUy90JGaQ++I7aaezTprzX8YxvoMNNx9nRrQLR2hRl7kcYRzEia5/0kk
         Wxs6gPRR4Eoz6S741Qxen7NScIWyRYzXzzdChgevwUdc18NOF1/jehs6JDDX5duDTWws
         DTOx2mYKAUOGO/2F0RQNSopujQAmmkbrsSLxY=
Received: by 10.142.47.6 with SMTP id u6mr5867498wfu.91.1214325602377;
        Tue, 24 Jun 2008 09:40:02 -0700 (PDT)
Received: by 10.114.146.15 with HTTP; Tue, 24 Jun 2008 09:40:02 -0700 (PDT)
Message-ID: <cb6082e70806240940x74ef9dc3xe6deff7633d6cadf@mail.gmail.com>
Date: Tue, 24 Jun 2008 12:40:02 -0400
From: "Alex Soto" <lexsoto@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching for C++
In-Reply-To: <40B14E03-0F3D-434A-AE59-3792D2A8EEFB@cognocys.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <cb6082e70806240848g43d5df60w4a4d5bff1e5ca805@mail.gmail.com>
	 <48611AB5.4040904@propylon.com>
	 <40B14E03-0F3D-434A-AE59-3792D2A8EEFB@cognocys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks everyone. I appreciate the help.

I think I will write my own tokenizer, because I do not have a
predefined list of words with symbols.
I will modify the grammar by defining a SYMBOL token as John suggested
and redefine ALPHANUM to include it.

Regards,
Alex Soto



On Tue, Jun 24, 2008 at 12:12 PM, N. Hira <nhira@cognocys.com> wrote:
> This isn't ideal, but if you have a defined list of such terms, you may find
> it easier to filter these terms out into a separate field for indexing.
>
> -h
> ----------------------------------------------------------------------
> Hira, N.R.
> Solutions Architect
> Cognocys, Inc.
> (773) 251-7453
>
> On 24-Jun-2008, at 11:03 AM, John Byrne wrote:
>
>> I don't think there is a simpler way. I think you will have to modify the
>> tokenizer. Once you go beyond basic human-readable text, you always end up
>> having to do that. I have modified the JavaCC version of StandardTokenizer
>>  for allowing symbols to pass through, but I've never used the JFlex version
>> - don't know anything about JFlex I'm afraid!
>>
>> A good strategy might be to make a new type of lexical token called
>> "SYMBOL" and try to catch as many symbols as you can think of; then maybe
>> create new token types which are ALPHANUM types that can have pre-fixed or
>> post-fixed symbols.
>>
>> That way, you'll be able to catch things like "c++" in a TokenFilter, and
>> you can choose to pass it through as a single token, or split it up into two
>> tokens, or whatever you want.
>>
>> Hope that helps.
>>
>> Regards,
>> JB
>>
>> Alex Soto wrote:
>>>
>>> Hello:
>>>
>>> I have a problem where I need to search for the term "C++".
>>> If I use StandardAnalyzer, the "+" characters are removed and the
>>> search is done on just the "c" character which is not what is
>>> intended.
>>> Yet, I need to use standard analyzer for the other benefits it provides.
>>>
>>> I think I need to write a specialized tokenizer (and accompanying
>>> analyzer) that let the "+" characters pass.
>>> I would use the JFlex provided one, modify it and add it to my project.
>>>
>>> My question is:
>>>
>>> Is there any simpler way to accomplish the same?
>>>
>>>
>>> Best regards,
>>> Alex Soto
>>> lexsoto@gmail.com
>>>
>>> -
>>> Amicus Plato, sed magis amica veritas.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Alex Soto
lexsoto@gmail.com

-
Amicus Plato, sed magis amica veritas.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 16:44:32 2008
Return-Path: <java-user-return-34591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65259 invoked from network); 24 Jun 2008 16:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 16:44:32 -0000
Received: (qmail 71519 invoked by uid 500); 24 Jun 2008 16:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71485 invoked by uid 500); 24 Jun 2008 16:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71474 invoked by uid 99); 24 Jun 2008 16:44:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 09:44:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of taleofdragon@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 16:43:37 +0000
Received: by py-out-1112.google.com with SMTP id z74so1459652pyg.9
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 09:43:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=JPRxlvDzmGCvxr7iABliehaAScle7UoIEIJvYTAmznQ=;
        b=X5WU0zPWiozME+iK3lSmhAKuUUjZpavrAB7DwkB5nH9KE8Rr9VnKcpfy5E77x5+wdJ
         KGJdI4Z0S+gEu5542DXN3eQrSzNqR0Lzn+AkJ5Sgv7dyDFdwq1Qt4TXSAUQ7ejeyqBlU
         o++iIugAONRaz/okan5bHOI+4enlCYe01v+xs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=QFDxiyVtjUMfoRlVt7zGdo+3yrMdIbxfAAoFvk87ZpL4tUejtJd/icAcQVaicux0bT
         Sf6F9EqghRtTMB5unt//YUG0uEFqVVxprydr3JM7Ga2HIABOxCVPKRBCXZG/6FawDvrl
         dogTxuMnJU5a16dV0WddQ/CbI+EZ+ftLJFOnU=
Received: by 10.142.158.17 with SMTP id g17mr5860441wfe.196.1214325818618;
        Tue, 24 Jun 2008 09:43:38 -0700 (PDT)
Received: by 10.115.58.5 with HTTP; Tue, 24 Jun 2008 09:43:38 -0700 (PDT)
Message-ID: <abef47410806240943l4fb3c7f2t4299b85db3fbcab5@mail.gmail.com>
Date: Tue, 24 Jun 2008 09:43:38 -0700
From: "Jay dragon" <taleofdragon@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: testing, pls ignore
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31488_14148421.1214325818527"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31488_14148421.1214325818527
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline



------=_Part_31488_14148421.1214325818527--

From java-user-return-34592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 19:00:02 2008
Return-Path: <java-user-return-34592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32348 invoked from network); 24 Jun 2008 19:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 19:00:01 -0000
Received: (qmail 97698 invoked by uid 500); 24 Jun 2008 18:59:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96732 invoked by uid 500); 24 Jun 2008 18:59:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96721 invoked by uid 99); 24 Jun 2008 18:59:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 11:59:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 18:59:05 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2891697fkq.5
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 11:59:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=K+d4/yixfRrpa0eu4ICdz/7Ir0sdZUW3IgTqToCB7vE=;
        b=X60TtHa7DKxyv7avdZjS69n5bJFiE9+Za2n9nTjb6R7C4EP9SZQyV771/9H2bMJj1c
         XRuroI9Gfv//LXZ9/6OPkpJOmAVLB8irEPdAaCqpqd6Mxs4PbpfW8Vw4A/0w51E179YW
         bi+GbkMe7q/2+uTrMjcYddBEbBJCmF6+n68kA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=VbQHDGns+oUjSLVhWGoWVEJeH9oT9UxR7dMYVDPPJ03GH3aQKLiqlvX8Gg0TmMH/9a
         dc+RL1riETtzRDYEvXKMHdFTEaDOlE2u/SN0CgUw7x55lm/d3K9GMfZcznXFfReMPSj2
         n1jO9EKbaCRd7qavRajhih3eik5wQGp78JxWM=
Received: by 10.82.185.3 with SMTP id i3mr593332buf.27.1214333963149;
        Tue, 24 Jun 2008 11:59:23 -0700 (PDT)
Received: by 10.82.141.7 with HTTP; Tue, 24 Jun 2008 11:59:23 -0700 (PDT)
Message-ID: <8837fb770806241159x2a0f927fh9b503f9fc3e44229@mail.gmail.com>
Date: Tue, 24 Jun 2008 11:59:23 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: changing index format
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3759_7416822.1214333963138"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3759_7416822.1214333963138
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:
   I am trying to add couple more values to the TermInfo file and want to
keep the index backward compatible. But I see values such as docFreq etc.
are stored as a VInt, so I couldn't do things like using the signed bit to
determine whether to read/write the extra values.

  Any suggestions?

(I tried to implement a read/write impl for signed VInt, but it didn't work
out too well :( )

Thanks

-John

------=_Part_3759_7416822.1214333963138--

From java-user-return-34593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 19:30:31 2008
Return-Path: <java-user-return-34593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45068 invoked from network); 24 Jun 2008 19:30:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 19:30:28 -0000
Received: (qmail 42164 invoked by uid 500); 24 Jun 2008 19:30:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42134 invoked by uid 500); 24 Jun 2008 19:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42122 invoked by uid 99); 24 Jun 2008 19:30:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 12:30:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 19:29:07 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 22EA1109F2E
	for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 12:29:02 -0700 (PDT)
Message-Id: <D011C4C2-7C3E-46A9-9752-C4E3B118ACA2@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <003001c8d615$ac3e9920$7f00a8c0@wuqi>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: How about adding a new paramer  to  Similarity.scorePayload( ) ?
X-Priority: 3
Date: Tue, 24 Jun 2008 15:29:00 -0400
References: <003001c8d615$ac3e9920$7f00a8c0@wuqi>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure, but would a CustomScoreQuery (or an extension of it) work  
for you?  This way, you could try to combine the BoostingTermQuery  
with a ValueSourceQuery (i.e. FunctionQuery)

Another option is to just extend BoostingTermQuery and implement your  
own scorer that takes into account the field.

Of course, that isn't to say your idea is wrong.  We could add the  
method and add a new Payload Query that calls it, or just change it  
all together.  Of course, things may change, too, if and when we want  
to do things like add payload phrase queries.  A patch would be good.

Just trying to brainstorm some alternatives that don't involve API  
changes.

On Jun 24, 2008, at 12:16 PM, wuqi wrote:

> Hi,
> I want to customize a new Similarity class which need to adopt  
> payload information.The current definition of scorePayload is below:
>    "public float scorePayload(String fieldName, byte [] payload, int  
> offset, int length)"
> I have a problem when using this function.In case we have two  
> BoostingTermQuery:
>   BoostingTermQuery #1:   fieldName="Country" and  fieldValue=  
> "America"
>   BoostingTermQuery #2:   fieldName="Country" and  fieldValue="China"
> and the the information of one payloads looks like this:
>  payload: {new York,san Jose,Chicago}
> of course,query #1 should get a higher payPayload score.But current  
> interface prevent us from sending fieldValue information to  
> scorePayload function. So maybe we should add a new interface like
>   public float scorePayload(String fielName,String value,byte[]  
> payload,int offset,int length)
> and Boosting Query also need to be changed accordingly.
>
> Thanks
> -Qi
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jun 24 23:57:46 2008
Return-Path: <java-user-return-34594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57103 invoked from network); 24 Jun 2008 23:57:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jun 2008 23:57:46 -0000
Received: (qmail 60392 invoked by uid 500); 24 Jun 2008 23:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60367 invoked by uid 500); 24 Jun 2008 23:57:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60356 invoked by uid 99); 24 Jun 2008 23:57:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 16:57:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 23:56:52 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6839771D1A1; Tue, 24 Jun 2008 16:56:41 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 56A8A71D19B
	for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 16:56:41 -0700 (PDT)
Date: Tue, 24 Jun 2008 16:56:41 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Termdocs question
In-Reply-To: <C431D4CB-D716-4833-8111-6B5338A6607A@gmail.com>
Message-ID: <Pine.LNX.4.62.0806241654050.32198@radix.cryptio.net>
References: <9d2777b60806200912k153d17f1y81b62050d8c401f4@mail.gmail.com>
 <C431D4CB-D716-4833-8111-6B5338A6607A@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: 
: >            termDocs = reader.termDocs(term);
: >            while(termDocs.next()){
: >                int index = termDocs.doc();
: >                if(reader.document(index).get("id").equals(id)){
: >                    reader.deleteDocument(index);
: >                }
: >            }
: 
: Iterating documents and string comparing stored values is not very efficient.
: Use a query instead, something like this:

more specificly: there is no reason at all to look at the stored value -- 
just ensure that the *indexed* value is the "unique id" (which TermDocs 
will already ensure for you)

: BooleanQuery query = new BooleanQuery();
: query.add(new TermQuery(term), Occurs.MUST);
: query.add(new TermQuery(new Term("id", id), Occurs.MUST);

note: in the orriginal code, "term" was new Term("id", id) so this is 
unneded ... the goal was to iterate the doc(s) matching a unique(?) id.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 00:01:46 2008
Return-Path: <java-user-return-34595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63257 invoked from network); 25 Jun 2008 00:01:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 00:01:46 -0000
Received: (qmail 67014 invoked by uid 500); 25 Jun 2008 00:01:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66982 invoked by uid 500); 25 Jun 2008 00:01:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66971 invoked by uid 99); 25 Jun 2008 00:01:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 17:01:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 00:00:52 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0E8D971D1A9; Tue, 24 Jun 2008 17:00:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0AA7B71D1A7
	for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 17:00:42 -0700 (PDT)
Date: Tue, 24 Jun 2008 17:00:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <6fc71b230806230116g1b71b4cfgad8f5f8ddfac9433@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0806241658540.32198@radix.cryptio.net>
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com> 
 <200806231633.11295.daniel@nuix.com>  <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
  <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com> 
 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com> 
 <68959F25CDEBCB4F917D5A253291D73E07ECD647DF@BLRKECMBX06.ad.infosys.com> 
 <68959F25CDEBCB4F917D5A253291D73E07ECD647EC@BLRKECMBX06.ad.infosys.com> 
 <6fc71b230806230108v43ebc613h262e0f8f531ef04@mail.gmail.com>
 <6fc71b230806230116g1b71b4cfgad8f5f8ddfac9433@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I am using MultiFieldQueryParser. Can I use setAllowLeadingWildCard with
: MultiFieldQueryParser?I am doing the following:
: 
:             parser = lucene.MultiFieldQueryParser(fields, analyzer )
:             parser.setAllowLeadingWildcard(True)
:             query = parser.parse(command)
: 
: And I am getting this error:
: 
:  ERROR (<type 'exceptions.TypeError'>, TypeError("descriptor 'parse'
: requires a 'QueryParser' object but received a 'str'",), <traceback object
: at 0x02DFA800>)

the sample code you posted doesn't look like java, and this is not an 
error message you would get form java, so i'm guessing you are using a 
port (.Net maybe?) ... the error message seems langauge specific (related 
to the way the "parse" method is dispatched on a "QueryParser" object) so 
you should consult the user communityfor the port you are using.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 00:15:17 2008
Return-Path: <java-user-return-34596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67938 invoked from network); 25 Jun 2008 00:15:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 00:15:17 -0000
Received: (qmail 79089 invoked by uid 500); 25 Jun 2008 00:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79054 invoked by uid 500); 25 Jun 2008 00:15:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79043 invoked by uid 99); 25 Jun 2008 00:15:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 17:15:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 00:14:20 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2996696fkq.5
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 17:14:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=WQ8j4zJFheCxNgTwb974hPrOurs1yllJTjcnumguTdw=;
        b=xuvSCNCBOfghTJDl5Vh7xgNHgZIweT/lM3eDaZvCflHzsEbjUKtUwerqEWxfiSGIMa
         iXAdKZ5Xjb8bFFR7YoIk88LQi92FKy5CDO1/m0xaXQdIXmKSrClrURW+4kMMqFw2/PWv
         u7eHPP7fzhQPLGbOHEpA2ULoS8XSrT7wvKrkE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=g51126WSYAqfXdLVsyX2QX8Tpj9it4jBP3lx87yubG1ZtBHiK/SOAf40f4byZ3U0QO
         u6IKT7jMGg9lgAJjKgiCZRVlyCSf8MdEZQiK50pWxkjVddwGMzH1phtidoCw4SMGHcMy
         ESYx7TbmFoBgtFN78so4SyEQNEZg1NaGE4QG0=
Received: by 10.78.178.5 with SMTP id a5mr3579044huf.39.1214352878121;
        Tue, 24 Jun 2008 17:14:38 -0700 (PDT)
Received: by 10.78.155.18 with HTTP; Tue, 24 Jun 2008 17:14:38 -0700 (PDT)
Message-ID: <6e3ae6310806241714q71284d3csb8f19d7e0f681856@mail.gmail.com>
Date: Tue, 24 Jun 2008 17:14:38 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: lucene query parser for double-worded term query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32464_32239748.1214352878092"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32464_32239748.1214352878092
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have a tags field. And each tag can have multiple words, like "San
Francisco". Each tag is analyzed into Keyword field like this
 new Field("tags", "San Francisco",Field.Store.YES,
Field.Index.UN_TOKENIZED)

It should be searchable if using TermQuery directly, like
  new TermQuery(new Term("tags", "San Francisco"))

But how to achieve this via Lucene Query Parser? If using
 tags:"San Francisco"
It's considered a phrase, and turned into term search of tags:San and
tags:Francisco, which will not return results.

Thanks for any advice!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

------=_Part_32464_32239748.1214352878092--

From java-user-return-34597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 00:26:56 2008
Return-Path: <java-user-return-34597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79446 invoked from network); 25 Jun 2008 00:26:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 00:26:56 -0000
Received: (qmail 87524 invoked by uid 500); 25 Jun 2008 00:26:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87481 invoked by uid 500); 25 Jun 2008 00:26:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87470 invoked by uid 99); 25 Jun 2008 00:26:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 17:26:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 00:26:00 +0000
Received: by an-out-0708.google.com with SMTP id c37so737345anc.49
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 17:26:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=7GaENKOPfmQlPQGAgpoF+XZslXS2JoRey/VoXHUiZD8=;
        b=YnWE+YcBcQl8zROKvEmH8sn/A7Kbtf5DZQ2UJKilXz7TOZkEzpInwJ2gGzgrWjB+l8
         Rt+Rt2LoQpt/2ilHk1qZNAV/H00N4pl7y+IMXvK3TJp5vgGMiyS0nUhCFBlk77i7yDXT
         Kn5Zjg32X+Q2ZPg94VmUz+YUzKiOatqqf5cRk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=o7QGkSUhHDJIRAKQHLn9O+oIaGjh9T+g2K+tduwFgZgLUB4L71FG+MzYsPyIbyBSrm
         4pFH0cwDm0YHB4u1/mtp6NemrKt+UBRGm3ptYezCIRH/Spt8nc99kpQEGkd59LzBnjCt
         uL/t0UIA8M6ZyoBbg27CEuyluzg+sod4Hdjxc=
Received: by 10.100.194.5 with SMTP id r5mr17081957anf.2.1214353578959;
        Tue, 24 Jun 2008 17:26:18 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Tue, 24 Jun 2008 17:26:18 -0700 (PDT)
Message-ID: <c68e39170806241726x3bf91937r15021d0adc64a36b@mail.gmail.com>
Date: Tue, 24 Jun 2008 20:26:18 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: lucene query parser for double-worded term query
In-Reply-To: <6e3ae6310806241714q71284d3csb8f19d7e0f681856@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6e3ae6310806241714q71284d3csb8f19d7e0f681856@mail.gmail.com>
X-Google-Sender-Auth: f7d480a9c8b38bcd
X-Virus-Checked: Checked by ClamAV on apache.org

You can backslash escape spaces, so these should both work:
tags:San\ Francisco
tags:"San\ Francisco"

-Yonik

On Tue, Jun 24, 2008 at 8:14 PM, Chris Lu <chris.lu@gmail.com> wrote:
> I have a tags field. And each tag can have multiple words, like "San
> Francisco". Each tag is analyzed into Keyword field like this
>  new Field("tags", "San Francisco",Field.Store.YES,
> Field.Index.UN_TOKENIZED)
>
> It should be searchable if using TermQuery directly, like
>  new TermQuery(new Term("tags", "San Francisco"))
>
> But how to achieve this via Lucene Query Parser? If using
>  tags:"San Francisco"
> It's considered a phrase, and turned into term search of tags:San and
> tags:Francisco, which will not return results.
>
> Thanks for any advice!
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 00:41:10 2008
Return-Path: <java-user-return-34598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87530 invoked from network); 25 Jun 2008 00:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 00:41:10 -0000
Received: (qmail 99791 invoked by uid 500); 25 Jun 2008 00:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99757 invoked by uid 500); 25 Jun 2008 00:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99746 invoked by uid 99); 25 Jun 2008 00:41:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 17:41:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 00:40:12 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3004316fkq.5
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 17:40:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=7xIs/z9nveM7aBQXcdCuEjyu4DJM+SiecHKGXrtD1+Q=;
        b=suj0GFiwVOOyyO3rbgHk/XOYl/4x33dpkqJhUDkI5bpZblrW5FlfJk4OytJ1Mo5NHd
         ya1bjvIv7kwIzwTAUolK4OicF3fVI1YQaAXjNQs09xQgAHT0AFyv2LPDQapq7U8DfidO
         xYVBgzfvif0tUoaTNSXkgOnl24Gvo+egVF7a0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KtN0s68LzKByDi8LND5FhQ4Uyas+ayDHPjDlQeXMcJZdq/ehlRUTtV1LsxUTFDrouR
         gh3gv7IG36mLeEt5RUKeo7X7dkQz2/6/IW+Houc98AGa/LzelA9JDb10xaahhu3dJ6St
         YyAf5nEeGXxG0UgjhWBQ8UlnzsGW09K2uJzAM=
Received: by 10.78.206.6 with SMTP id d6mr3577646hug.117.1214354429675;
        Tue, 24 Jun 2008 17:40:29 -0700 (PDT)
Received: by 10.78.155.18 with HTTP; Tue, 24 Jun 2008 17:40:29 -0700 (PDT)
Message-ID: <6e3ae6310806241740p6e949c20ha07c00b9afb1ec8b@mail.gmail.com>
Date: Tue, 24 Jun 2008 17:40:29 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene query parser for double-worded term query
In-Reply-To: <c68e39170806241726x3bf91937r15021d0adc64a36b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32518_5353615.1214354429654"
References: <6e3ae6310806241714q71284d3csb8f19d7e0f681856@mail.gmail.com>
	 <c68e39170806241726x3bf91937r15021d0adc64a36b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32518_5353615.1214354429654
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yonik, Thanks for your quick reply!

But I found after backslash escape spaces, both
tags:San\ Francisco
tags:"San\ Francisco"
turns into PhraseQuery, just like tags:"San Francisco", still no results
returned.

Maybe Lucene Query Parser does not handle this case?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Tue, Jun 24, 2008 at 5:26 PM, Yonik Seeley <yonik@apache.org> wrote:

> You can backslash escape spaces, so these should both work:
> tags:San\ Francisco
> tags:"San\ Francisco"
>
> -Yonik
>
> On Tue, Jun 24, 2008 at 8:14 PM, Chris Lu <chris.lu@gmail.com> wrote:
> > I have a tags field. And each tag can have multiple words, like "San
> > Francisco". Each tag is analyzed into Keyword field like this
> >  new Field("tags", "San Francisco",Field.Store.YES,
> > Field.Index.UN_TOKENIZED)
> >
> > It should be searchable if using TermQuery directly, like
> >  new TermQuery(new Term("tags", "San Francisco"))
> >
> > But how to achieve this via Lucene Query Parser? If using
> >  tags:"San Francisco"
> > It's considered a phrase, and turned into term search of tags:San and
> > tags:Francisco, which will not return results.
> >
> > Thanks for any advice!
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request) got
> > 2.6 Million Euro funding!
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32518_5353615.1214354429654--

From java-user-return-34599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 01:02:43 2008
Return-Path: <java-user-return-34599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 235 invoked from network); 25 Jun 2008 01:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 01:02:43 -0000
Received: (qmail 14180 invoked by uid 500); 25 Jun 2008 01:02:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14152 invoked by uid 500); 25 Jun 2008 01:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14141 invoked by uid 99); 25 Jun 2008 01:02:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 18:02:38 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 01:01:46 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2830130wra.21
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 18:02:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vPkj4ojIlP8ILp9EOB30QqemICh1lN4PuKCZEwW4pSk=;
        b=OR1UlRzBz6pTsiAy2CT1D+JlECbua4Q2knmzwdxKKTGYA0QGcTrLBZPWYM7OssTvjT
         4HdR+SBGKI08F2c4cwAbAm/WP80lOYQ7c8b+Ajauj4Dcvz3Aiug7p/dk2wq4KvBW6XkY
         OALnBa/chVht1Ph7DLzCP5mBpdZipcTEOrdMQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=NQqHrvM/NsMtO5Vsh4ilt7l/EsxXwBBhQPwsfFzpnucuRlFbMGCiWR1E48c2+kvfC2
         U4SkUHxdMZUWIwQmEW3DxqioMPo3zZz9cumwR9rvC4vvE7yIxat2Psc4gLi3m5NOb0SZ
         D68oSq3ex8pUAU90eKm8U8ppDvxFJzKgkuQp4=
Received: by 10.100.37.18 with SMTP id k18mr3152224ank.157.1214355721373;
        Tue, 24 Jun 2008 18:02:01 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Tue, 24 Jun 2008 18:02:01 -0700 (PDT)
Message-ID: <359a92830806241802s154b0afsfe4531de398c00fd@mail.gmail.com>
Date: Tue, 24 Jun 2008 21:02:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene query parser for double-worded term query
In-Reply-To: <6e3ae6310806241740p6e949c20ha07c00b9afb1ec8b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22276_30029885.1214355721358"
References: <6e3ae6310806241714q71284d3csb8f19d7e0f681856@mail.gmail.com>
	 <c68e39170806241726x3bf91937r15021d0adc64a36b@mail.gmail.com>
	 <6e3ae6310806241740p6e949c20ha07c00b9afb1ec8b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22276_30029885.1214355721358
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What analyzers are you using for both indexing and querying?
Have you looked at your index with Luke to see what's actually
in the index? The reason I'm asking is I'm wondering whether you
are having capitalization issues. That is, your index analyzer
lower cases the tokens and your query analyzer doesn't, or
vice-versa...

And Query.toString is your friend too <G>.

Best
Erick

On Tue, Jun 24, 2008 at 8:40 PM, Chris Lu <chris.lu@gmail.com> wrote:

> Yonik, Thanks for your quick reply!
>
> But I found after backslash escape spaces, both
> tags:San\ Francisco
> tags:"San\ Francisco"
> turns into PhraseQuery, just like tags:"San Francisco", still no results
> returned.
>
> Maybe Lucene Query Parser does not handle this case?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Tue, Jun 24, 2008 at 5:26 PM, Yonik Seeley <yonik@apache.org> wrote:
>
> > You can backslash escape spaces, so these should both work:
> > tags:San\ Francisco
> > tags:"San\ Francisco"
> >
> > -Yonik
> >
> > On Tue, Jun 24, 2008 at 8:14 PM, Chris Lu <chris.lu@gmail.com> wrote:
> > > I have a tags field. And each tag can have multiple words, like "San
> > > Francisco". Each tag is analyzed into Keyword field like this
> > >  new Field("tags", "San Francisco",Field.Store.YES,
> > > Field.Index.UN_TOKENIZED)
> > >
> > > It should be searchable if using TermQuery directly, like
> > >  new TermQuery(new Term("tags", "San Francisco"))
> > >
> > > But how to achieve this via Lucene Query Parser? If using
> > >  tags:"San Francisco"
> > > It's considered a phrase, and turned into term search of tags:San and
> > > tags:Francisco, which will not return results.
> > >
> > > Thanks for any advice!
> > >
> > > --
> > > Chris Lu
> > > -------------------------
> > > Instant Scalable Full-Text Search On Any Database/Application
> > > site: http://www.dbsight.net
> > > demo: http://search.dbsight.com
> > > Lucene Database Search in 3 minutes:
> > >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > > DBSight customer, a shopping comparison site, (anonymous per request)
> got
> > > 2.6 Million Euro funding!
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_22276_30029885.1214355721358--

From java-user-return-34600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 03:10:18 2008
Return-Path: <java-user-return-34600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60958 invoked from network); 25 Jun 2008 03:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 03:10:18 -0000
Received: (qmail 84848 invoked by uid 500); 25 Jun 2008 03:10:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84800 invoked by uid 500); 25 Jun 2008 03:10:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84789 invoked by uid 99); 25 Jun 2008 03:10:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 20:10:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.224 as permitted sender)
Received: from [65.54.246.224] (HELO bay0-omc3-s24.bay0.hotmail.com) (65.54.246.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 03:09:21 +0000
Received: from BAY112-W37 ([64.4.26.137]) by bay0-omc3-s24.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 24 Jun 2008 20:09:19 -0700
Message-ID: <BAY112-W37F5EF02F9F88ADB5D7EFDF9A00@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_af277b8d-2a84-48ce-8035-04d4f35b6fb8_"
X-Originating-IP: [125.99.82.185]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Concurrent query benchmarks, with 1,2,4,8 readers
Date: Wed, 25 Jun 2008 08:39:19 +0530
Importance: Normal
In-Reply-To: <5e76f3840806130951u28be4bfbh237da22b431a8804@mail.gmail.com>
References: <519507.12479.qm@web50306.mail.re2.yahoo.com>
	 <5e76f3840806111211j103c550fpa68db5e932214955@mail.gmail.com>
 	 <BAY119-W2732B32008EB8E34E67507B4AC0@phx.gbl> 
 <5e76f3840806130951u28be4bfbh237da22b431a8804@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 25 Jun 2008 03:09:19.0671 (UTC) FILETIME=[DC0EFC70:01C8D670]
X-Virus-Checked: Checked by ClamAV on apache.org

--_af277b8d-2a84-48ce-8035-04d4f35b6fb8_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit

Hi Glen,

Is your source code available? I would like to have a look at it and check if whatever I have tried makes sense.

--Regards,
Rakesh S



> Date: Fri, 13 Jun 2008 12:51:51 -0400
> From: glen.newton@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers
> 
> Lutan,
> 
> Yes, no problem. I am away at a conference next week but plan to
> release the code the following week. Is this OK for you?
> 
> thanks,
> 
> Glen
> 
> 2008/6/13 lutan <wsnet@live.cn>:
> >
> > TO: Glen Newton Could I get your test code or code architecture for study.
> > I have try to using java.util.concurrent package(
> > like ArrayBlockingQueue  ThreadPoolExecutor;)
> >  with lucene,but it is no successful.I don't
> > know how to design.
> >
> >
> > Thanks ! my emial: wsnet@live.cn
> > _________________________________________________________________
> > live mail
> > http://get.live.cn/product/mail.html
> 
> 
> 
> -- 
> 
> -

_________________________________________________________________
Timely update on all current affairs, sports, events and all thats in News here on MSN videos.
http://video.msn.com/?mkt=en-in
--_af277b8d-2a84-48ce-8035-04d4f35b6fb8_--

From java-user-return-34601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 03:35:57 2008
Return-Path: <java-user-return-34601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65733 invoked from network); 25 Jun 2008 03:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 03:35:56 -0000
Received: (qmail 93468 invoked by uid 500); 25 Jun 2008 03:35:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93434 invoked by uid 500); 25 Jun 2008 03:35:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93421 invoked by uid 99); 25 Jun 2008 03:35:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 20:35:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 03:35:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KBLmy-0006jo-EP
	for java-user@lucene.apache.org; Tue, 24 Jun 2008 20:35:20 -0700
Message-ID: <18104348.post@talk.nabble.com>
Date: Tue, 24 Jun 2008 20:35:20 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing the spider content
In-Reply-To: <985307.41586.qm@web50302.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
References: <18085388.post@talk.nabble.com> <985307.41586.qm@web50302.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Otis,

Thanks for the reply. So you mean it is not possible to use Lucene to index
the fetched (Verity Spider Content) content.

Yug


Otis Gospodnetic wrote:
> 
> It sounds like you want to check out Nutch - fetched, indexer, searcher,
> etc. in one lovely package.
> 
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> 
> ----- Original Message ----
>> From: yugana <yugandhar.adem@wipro.com>
>> To: java-user@lucene.apache.org
>> Sent: Tuesday, June 24, 2008 3:25:03 AM
>> Subject: Indexing the spider content
>> 
>> 
>> Hi All,
>> 
>> I am new to Lucene Search. Can you let me know if it is possible to index
>> the "Verity Spider" content. If possible please let me know how to create
>> a
>> index form it and search on it. Also share some code snippets on how to
>> proceed on indexing and searching. I donot have much time to go throught
>> the
>> Lucene API. Your help is appreciated.
>> 
>> Thanks,
>> Yug
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Indexing-the-spider-content-tp18085388p18085388.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Indexing-the-spider-content-tp18085388p18104348.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 03:44:42 2008
Return-Path: <java-user-return-34602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66897 invoked from network); 25 Jun 2008 03:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 03:44:42 -0000
Received: (qmail 98563 invoked by uid 500); 25 Jun 2008 03:44:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98520 invoked by uid 500); 25 Jun 2008 03:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98507 invoked by uid 99); 25 Jun 2008 03:44:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 20:44:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 03:43:46 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3055242fkq.5
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 20:44:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ORlxywByRHppYyE6b5CNjA2rVbZnTvqkqpG1jLJRUaU=;
        b=NbL1CodWYQkI4vzb4ICUQy+GAOc+VnTSR9lc59D3IBkAhR6+V+xMqwhpPCSgbzyF9d
         pwN6Cq1FuS8l8cQwR4OQxYI9GAho2VHhYb/9R/Z3QG/2Q79iXHpP26d66+9n6p7Y3MWs
         M6krgoGWbDh0tWU5HFUV61XgZDT7kMW3YrlFQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cxDHmQSVg5mJN03QvSSup9J8rT5ZS2mLtbkwvcwqMzdxz8oAfBN+0Jv9tESrQ9O+6e
         FtfFOBBeMSGADdBMbUrmFF2LGvoFn81kVZ45QLrpOezAqURQqFg2uQCR+vgYkCBHSDaK
         CX0fFO98LP+6shfV6mHEjY7dFkhSnS5Jld41E=
Received: by 10.78.193.19 with SMTP id q19mr3614317huf.79.1214365443641;
        Tue, 24 Jun 2008 20:44:03 -0700 (PDT)
Received: by 10.78.155.18 with HTTP; Tue, 24 Jun 2008 20:44:03 -0700 (PDT)
Message-ID: <6e3ae6310806242044j512c5a1dteacc673445e10cce@mail.gmail.com>
Date: Tue, 24 Jun 2008 20:44:03 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene query parser for double-worded term query
In-Reply-To: <359a92830806241802s154b0afsfe4531de398c00fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32893_32831202.1214365443344"
References: <6e3ae6310806241714q71284d3csb8f19d7e0f681856@mail.gmail.com>
	 <c68e39170806241726x3bf91937r15021d0adc64a36b@mail.gmail.com>
	 <6e3ae6310806241740p6e949c20ha07c00b9afb1ec8b@mail.gmail.com>
	 <359a92830806241802s154b0afsfe4531de398c00fd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32893_32831202.1214365443344
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erick, Thanks!

It's the analyzer problem. I should have used the same analyzer,
KeywordAnalyzer, to create the query parser.

Thanks a lot!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Tue, Jun 24, 2008 at 6:02 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> What analyzers are you using for both indexing and querying?
> Have you looked at your index with Luke to see what's actually
> in the index? The reason I'm asking is I'm wondering whether you
> are having capitalization issues. That is, your index analyzer
> lower cases the tokens and your query analyzer doesn't, or
> vice-versa...
>
> And Query.toString is your friend too <G>.
>
> Best
> Erick
>
> On Tue, Jun 24, 2008 at 8:40 PM, Chris Lu <chris.lu@gmail.com> wrote:
>
> > Yonik, Thanks for your quick reply!
> >
> > But I found after backslash escape spaces, both
> > tags:San\ Francisco
> > tags:"San\ Francisco"
> > turns into PhraseQuery, just like tags:"San Francisco", still no results
> > returned.
> >
> > Maybe Lucene Query Parser does not handle this case?
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request) got
> > 2.6 Million Euro funding!
> >
> > On Tue, Jun 24, 2008 at 5:26 PM, Yonik Seeley <yonik@apache.org> wrote:
> >
> > > You can backslash escape spaces, so these should both work:
> > > tags:San\ Francisco
> > > tags:"San\ Francisco"
> > >
> > > -Yonik
> > >
> > > On Tue, Jun 24, 2008 at 8:14 PM, Chris Lu <chris.lu@gmail.com> wrote:
> > > > I have a tags field. And each tag can have multiple words, like "San
> > > > Francisco". Each tag is analyzed into Keyword field like this
> > > >  new Field("tags", "San Francisco",Field.Store.YES,
> > > > Field.Index.UN_TOKENIZED)
> > > >
> > > > It should be searchable if using TermQuery directly, like
> > > >  new TermQuery(new Term("tags", "San Francisco"))
> > > >
> > > > But how to achieve this via Lucene Query Parser? If using
> > > >  tags:"San Francisco"
> > > > It's considered a phrase, and turned into term search of tags:San and
> > > > tags:Francisco, which will not return results.
> > > >
> > > > Thanks for any advice!
> > > >
> > > > --
> > > > Chris Lu
> > > > -------------------------
> > > > Instant Scalable Full-Text Search On Any Database/Application
> > > > site: http://www.dbsight.net
> > > > demo: http://search.dbsight.com
> > > > Lucene Database Search in 3 minutes:
> > > >
> > >
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > > > DBSight customer, a shopping comparison site, (anonymous per request)
> > got
> > > > 2.6 Million Euro funding!
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_32893_32831202.1214365443344--

From java-user-return-34603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 04:49:38 2008
Return-Path: <java-user-return-34603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81940 invoked from network); 25 Jun 2008 04:49:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 04:49:38 -0000
Received: (qmail 35076 invoked by uid 500); 25 Jun 2008 04:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35044 invoked by uid 500); 25 Jun 2008 04:49:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35033 invoked by uid 99); 25 Jun 2008 04:49:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Jun 2008 21:49:33 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 04:48:41 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3071122fkq.5
        for <java-user@lucene.apache.org>; Tue, 24 Jun 2008 21:48:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UMTi+j7zh2QtIZKgv1/X1bDjfTLFn4cZFFw6Gm6v2C4=;
        b=kllW6BGw53pqJh3wJ+Fx0kX1C4t79U47pb5fw2m0Z5tbLlp2nhGGz3DwNoRDY8jx4/
         lvQsoGZrjxLgw3jjLvu82iLvrThRg91cXtpMZba5ZE0eMU2eV6dCWnH88La/rZnVRCge
         JDetzXTWr5p/gwsnNPuI7RfsbwmZUpfMqTzDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MfQK4YJHxW+kPwH5igvHwXGAQxgVuHp3dbzf8Wb2p+Vx18bp562Z5G6sk0II8ehLEy
         uFqMnRpSgJMe1QOxA7uVWJlHBpsZpuN6cyAXiWefgCwDf63QR+uk3lnGjsCd0pU66Qkk
         bdHEAOSEF6QaWSR9weGwyK1pdrFsFymqKF7HA=
Received: by 10.82.127.14 with SMTP id z14mr618974buc.67.1214369339086;
        Tue, 24 Jun 2008 21:48:59 -0700 (PDT)
Received: by 10.82.141.7 with HTTP; Tue, 24 Jun 2008 21:48:59 -0700 (PDT)
Message-ID: <8837fb770806242148x601d9b94qd9c1467413819a00@mail.gmail.com>
Date: Tue, 24 Jun 2008 21:48:59 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing the spider content
In-Reply-To: <18104348.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6514_31198333.1214369339069"
References: <18085388.post@talk.nabble.com>
	 <985307.41586.qm@web50302.mail.re2.yahoo.com>
	 <18104348.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6514_31198333.1214369339069
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Maybe building a Lucene gateway to hook in with VSpider.
Are you using VSpider or K2Spider?

-John

On Tue, Jun 24, 2008 at 8:35 PM, yugana <yugandhar.adem@wipro.com> wrote:

>
> Hi Otis,
>
> Thanks for the reply. So you mean it is not possible to use Lucene to index
> the fetched (Verity Spider Content) content.
>
> Yug
>
>
> Otis Gospodnetic wrote:
> >
> > It sounds like you want to check out Nutch - fetched, indexer, searcher,
> > etc. in one lovely package.
> >
> >
> > Otis
> > --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> > ----- Original Message ----
> >> From: yugana <yugandhar.adem@wipro.com>
> >> To: java-user@lucene.apache.org
> >> Sent: Tuesday, June 24, 2008 3:25:03 AM
> >> Subject: Indexing the spider content
> >>
> >>
> >> Hi All,
> >>
> >> I am new to Lucene Search. Can you let me know if it is possible to
> index
> >> the "Verity Spider" content. If possible please let me know how to
> create
> >> a
> >> index form it and search on it. Also share some code snippets on how to
> >> proceed on indexing and searching. I donot have much time to go throught
> >> the
> >> Lucene API. Your help is appreciated.
> >>
> >> Thanks,
> >> Yug
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Indexing-the-spider-content-tp18085388p18085388.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Indexing-the-spider-content-tp18085388p18104348.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6514_31198333.1214369339069--

From java-user-return-34604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 07:31:12 2008
Return-Path: <java-user-return-34604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33912 invoked from network); 25 Jun 2008 07:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 07:31:12 -0000
Received: (qmail 55174 invoked by uid 500); 25 Jun 2008 07:30:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55141 invoked by uid 500); 25 Jun 2008 07:30:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55128 invoked by uid 99); 25 Jun 2008 07:30:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 00:30:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paolo.valleri@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 07:29:53 +0000
Received: by wa-out-1112.google.com with SMTP id l24so1015766waf.11
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 00:29:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=2BMRWAcctlxxO3wRbguLvLDkX9Lf29YuHzI9gW6HVeg=;
        b=aoh10jEu1oYWcPXpr4vwMiGaGptmq+7I7n4X0jr00jKUi6CQjojIWS2E0MYKNYJ/+s
         LCbnC0tD8eSQIOw1qfyMnhCIlSjAnfEBZ3sGBAN/EKMuGGVDAdE1UPddDufe+NFD1V4m
         UNGRdUgahH3YG+IH9z3RT/DO5UzodRnas1mOg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=TKpJY0QIpxBmyodqkfI7MjjRA0nqp/qV2XMqqUNPLnCtzHDF5pIex/gTY3d9kIllIC
         qSNOCQ8E9QQeLC2dm0KehDLsnHGWp3uFeVQR42VmXn+4J7n3abDMbDnI5hXwhUYeVgdr
         2eNh4VBKfLpSLRIYLOq7fS2KbjakvCnAoXUvU=
Received: by 10.114.130.1 with SMTP id c1mr5035633wad.152.1214378996268;
        Wed, 25 Jun 2008 00:29:56 -0700 (PDT)
Received: by 10.150.156.6 with HTTP; Wed, 25 Jun 2008 00:29:55 -0700 (PDT)
Message-ID: <469326b50806250029q14cc85cagfdb4785746bcb4a0@mail.gmail.com>
Date: Wed, 25 Jun 2008 09:29:55 +0200
From: "Paolo Valleri" <paolo.valleri@gmail.com>
To: java-user@lucene.apache.org
Subject: Score 0
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14601_990599.1214378996223"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14601_990599.1214378996223
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, I'm using lucene to compute the score of some documents.
For several reasons I need also to know the documents that don't match the
input
query. For example with score 0.
I don't know the engine of lucene and I was wondering how difficult this
change would be.
Thanks.

-- 
Paolo Valleri

------=_Part_14601_990599.1214378996223--

From java-user-return-34605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 08:16:55 2008
Return-Path: <java-user-return-34605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47379 invoked from network); 25 Jun 2008 08:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 08:16:55 -0000
Received: (qmail 6599 invoked by uid 500); 25 Jun 2008 08:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5675 invoked by uid 500); 25 Jun 2008 08:16:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5664 invoked by uid 99); 25 Jun 2008 08:16:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 01:16:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of occhipin@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 08:16:00 +0000
Received: by rv-out-0506.google.com with SMTP id f6so9968901rvb.5
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 01:16:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=akP5l/XLEJdAmJAqBLKiD27eR5rZ/2c3Ie2H5DWtVr4=;
        b=V1mT3qvMdR9A086K6dITnDcIyEKO/XnOMx7sPwLI4ayTTXo5MmJhodVw1a6leWWz0F
         IyW/FlfuVWp17A1DxJ3vaOnEzHtlDRinG3vsqHBycHwno75/eoCKaOMxSUmeGR2rEIqV
         YDhIqc1/pFnLSraOXfQzHnSZkQ/B50GgxiD4U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=oQRsjhzdl55J3O8AlaRUES0G45RTqT93mgioLKB7eZGWeuPKCYv5QzIvGHrNrfef/B
         zkZFWLsTIdboHjtfKsG8/GLQWJd8jdadHykZ6TY/iBhj97foqrQkwQtb1f5vi4H3xcjV
         7RfqxJFrTbycHHmbpDI+vdpM+tgQPsN0pEsZw=
Received: by 10.141.44.13 with SMTP id w13mr16043839rvj.13.1214381779716;
        Wed, 25 Jun 2008 01:16:19 -0700 (PDT)
Received: by 10.141.40.5 with HTTP; Wed, 25 Jun 2008 01:16:19 -0700 (PDT)
Message-ID: <220b8f60806250116y1f10f823r47b5d0de79d8233@mail.gmail.com>
Date: Wed, 25 Jun 2008 10:16:19 +0200
From: "renou oki" <occhipin@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem with search an exact word and stemming...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_421_13799506.1214381779716"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_421_13799506.1214381779716
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I have a stemmed index, but i want to search the exact form of a word.
I use French Analyzer, so for instance "progression", "progresser" are
indexed with the linguistic root "progress".
But if I want to search the word "progress" (and only this word), I have to
many hits (because of "progression", "progresser"...)
The field is indexed, tokenized and no store...

Is there a way to do this, I mean to search an exact word in a stemmed index
?
I suppose that I have to use the same analyzer for indexing and searching.


I try with a PhraseQuery, with quotes...

Ps : I use lucene 1.9.1

Thanks
Renald

------=_Part_421_13799506.1214381779716--

From java-user-return-34606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 08:22:21 2008
Return-Path: <java-user-return-34606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48374 invoked from network); 25 Jun 2008 08:22:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 08:22:19 -0000
Received: (qmail 14672 invoked by uid 500); 25 Jun 2008 08:22:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14352 invoked by uid 500); 25 Jun 2008 08:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14341 invoked by uid 99); 25 Jun 2008 08:22:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 01:22:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of occhipin@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 08:21:24 +0000
Received: by rv-out-0506.google.com with SMTP id f6so9970920rvb.5
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 01:21:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=nu3c/Qb8jV+1wOybWEbCiFqLafKRkRffQc5SIixWMs4=;
        b=iEXcjgY+i3f+Mf0JyQpd9SqyqPXV7ep8YN3rbxa0r0/2yImjNSi86bw/KxoYX5dk86
         taf3ecs12fISaZANY14r6CNkNQV+Eynnuh1i4PpDMcIaI5C4vdPBqHtrBdb8cP5FsOyK
         /e/bxa8cMwV62fOY8xBZBFUVeGqVWkbS1edIc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Vw703qcwH09beJHArh2PgUG1ZnRxpmZgn2KzKwAtSSmCh60/Vmc07B+BkiDtB23Imx
         iTINXLftpaxkJ8nXulRaNaHXzVAuGyfX5RGGeqRHZy2P4ZeMl+1veQ9swFFXkKTg2KFh
         vhfAT2gql/VlEg9MoFThowG4X93c4sdnHTW8M=
Received: by 10.141.162.6 with SMTP id p6mr16003401rvo.121.1214382103571;
        Wed, 25 Jun 2008 01:21:43 -0700 (PDT)
Received: by 10.141.40.5 with HTTP; Wed, 25 Jun 2008 01:21:43 -0700 (PDT)
Message-ID: <220b8f60806250121l59e39dd0pa406cc9ddd724582@mail.gmail.com>
Date: Wed, 25 Jun 2008 10:21:43 +0200
From: "renou oki" <occhipin@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem with search an exact word and stemming
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_436_19162090.1214382103570"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_436_19162090.1214382103570
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I have a stemmed index, but i want to search the exact form of a word.
I use French Analyzer, so for instance "progression", "progresser" are
indexed with the linguistic root "progress".
But if I want to search the word "progress" (and only this word), I have to
many hits (because of "progression", "progresser"...)
The field is indexed, tokenized and no store...

Is there a way to do this, I mean to search an exact word in a stemmed index
?
I suppose that I have to use the same analyzer for indexing and searching.


I try with a PhraseQuery, with quotes...

Ps : I use lucene 1.9.1

Thanks
Renald

------=_Part_436_19162090.1214382103570--

From java-user-return-34607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 08:38:06 2008
Return-Path: <java-user-return-34607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52174 invoked from network); 25 Jun 2008 08:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 08:38:06 -0000
Received: (qmail 46183 invoked by uid 500); 25 Jun 2008 08:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46150 invoked by uid 500); 25 Jun 2008 08:38:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46139 invoked by uid 99); 25 Jun 2008 08:38:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 01:38:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 08:37:11 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K3000ILPFS88Y@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 25 Jun 2008 10:33:44 +0200 (MEST)
Date: Wed, 25 Jun 2008 10:33:44 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Score 0
In-reply-to: <469326b50806250029q14cc85cagfdb4785746bcb4a0@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1214382824.3150.45.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.2 (2.22.2-2.fc9)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <469326b50806250029q14cc85cagfdb4785746bcb4a0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-06-25 at 09:29 +0200, Paolo Valleri wrote:
> For several reasons I need also to know the documents that don't match the
> input query. For example with score 0.

Make a list of the docid for all the non-deleted documents in the index.
Collect the docids from the search-result. Subtract the two lists.

You can get the non-deleted docids by iterating from 0 to maxDoc()-1
(from IndexReader) and using the IndexReaders isDeleted(docid).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 09:12:31 2008
Return-Path: <java-user-return-34608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64985 invoked from network); 25 Jun 2008 09:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 09:12:31 -0000
Received: (qmail 3364 invoked by uid 500); 25 Jun 2008 09:12:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3317 invoked by uid 500); 25 Jun 2008 09:12:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3306 invoked by uid 99); 25 Jun 2008 09:12:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 02:12:25 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 09:11:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KBR2g-000179-E2
	for java-user@lucene.apache.org; Wed, 25 Jun 2008 02:11:54 -0700
Message-ID: <18108045.post@talk.nabble.com>
Date: Wed, 25 Jun 2008 02:11:54 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Requesting MultipleIndeces
In-Reply-To: <B94E065C-A362-4571-A1C7-B6BF75FF4BF1@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <B94E065C-A362-4571-A1C7-B6BF75FF4BF1@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


if you have a good hardware with tons of RAM, you can use
ParallelMultiSearcher, which looks-up in all indieces simulateneously.

if you are short on that, you must search in one index at a time, using
MultiSearcher.
-- 
View this message in context: http://www.nabble.com/Requesting-MultipleIndeces-tp18068306p18108045.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 09:33:05 2008
Return-Path: <java-user-return-34609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71695 invoked from network); 25 Jun 2008 09:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 09:33:04 -0000
Received: (qmail 43265 invoked by uid 500); 25 Jun 2008 09:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43230 invoked by uid 500); 25 Jun 2008 09:32:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43219 invoked by uid 99); 25 Jun 2008 09:32:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 02:32:58 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 09:32:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KBRMX-0001o6-MH
	for java-user@lucene.apache.org; Wed, 25 Jun 2008 02:32:25 -0700
Message-ID: <18108350.post@talk.nabble.com>
Date: Wed, 25 Jun 2008 02:32:25 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing the spider content
In-Reply-To: <8837fb770806242148x601d9b94qd9c1467413819a00@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
References: <18085388.post@talk.nabble.com> <985307.41586.qm@web50302.mail.re2.yahoo.com> <18104348.post@talk.nabble.com> <8837fb770806242148x601d9b94qd9c1467413819a00@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


We are using the VSpider...

Yug


John Wang wrote:
> 
> Maybe building a Lucene gateway to hook in with VSpider.
> Are you using VSpider or K2Spider?
> 
> -John
> 
> On Tue, Jun 24, 2008 at 8:35 PM, yugana <yugandhar.adem@wipro.com> wrote:
> 
>>
>> Hi Otis,
>>
>> Thanks for the reply. So you mean it is not possible to use Lucene to
>> index
>> the fetched (Verity Spider Content) content.
>>
>> Yug
>>
>>
>> Otis Gospodnetic wrote:
>> >
>> > It sounds like you want to check out Nutch - fetched, indexer,
>> searcher,
>> > etc. in one lovely package.
>> >
>> >
>> > Otis
>> > --
>> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>> >
>> >
>> > ----- Original Message ----
>> >> From: yugana <yugandhar.adem@wipro.com>
>> >> To: java-user@lucene.apache.org
>> >> Sent: Tuesday, June 24, 2008 3:25:03 AM
>> >> Subject: Indexing the spider content
>> >>
>> >>
>> >> Hi All,
>> >>
>> >> I am new to Lucene Search. Can you let me know if it is possible to
>> index
>> >> the "Verity Spider" content. If possible please let me know how to
>> create
>> >> a
>> >> index form it and search on it. Also share some code snippets on how
>> to
>> >> proceed on indexing and searching. I donot have much time to go
>> throught
>> >> the
>> >> Lucene API. Your help is appreciated.
>> >>
>> >> Thanks,
>> >> Yug
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Indexing-the-spider-content-tp18085388p18085388.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Indexing-the-spider-content-tp18085388p18104348.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Indexing-the-spider-content-tp18085388p18108350.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 09:41:47 2008
Return-Path: <java-user-return-34610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74884 invoked from network); 25 Jun 2008 09:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 09:41:47 -0000
Received: (qmail 64446 invoked by uid 500); 25 Jun 2008 09:41:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63450 invoked by uid 500); 25 Jun 2008 09:41:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63439 invoked by uid 99); 25 Jun 2008 09:41:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 02:41:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 09:40:51 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1KBRN0-00055i-C1
	for java-user@lucene.apache.org; Wed, 25 Jun 2008 10:33:28 +0100
Message-ID: <486211CF.80902@propylon.com>
Date: Wed, 25 Jun 2008 10:37:19 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: case insensitivity
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.6 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

Hi,

I know that case-insensitive searching is normally done by creating an 
all-lower-case version of the documents, and turning the search terms 
into lower case whenever this field is searched, but this approach has 
it's disadvantages.

Let's say, for example, you want to find "Dell" (with a capital "D"), 
near "computers" (with or without capitals, ie. in any case). The 
problem is that you would need to use a SpanQuery to find terms near 
each other; but if the case-sensitivity required is different for each 
term, then they will be in different fields, making the use of 
SpanQuerys inpossible.

There might be ways to work around this, but my question is: will 
case-insensitvity ever be added to Lucene as per-Term option? If not, 
can anyone tell me where I should start looking in order to make this 
change myself?

Thanks!

-JB



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 09:48:00 2008
Return-Path: <java-user-return-34611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76622 invoked from network); 25 Jun 2008 09:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 09:48:00 -0000
Received: (qmail 73740 invoked by uid 500); 25 Jun 2008 09:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73710 invoked by uid 500); 25 Jun 2008 09:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73699 invoked by uid 99); 25 Jun 2008 09:47:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 02:47:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 09:47:03 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id m5P9hDN0003426
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 11:43:15 +0200
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id m5P9hD03019050
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 11:43:13 +0200 (CEST)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id m5P9hOpg007516
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 11:43:24 +0200 (CEST)
Message-ID: <4862132A.8050701@gmail.com>
Date: Wed, 25 Jun 2008 11:43:06 +0200
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: yet again: getting the minimum and maximum value of a field
X-Enigmail-Version: 0.95.6
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig14EFE5EEB4F67AF12136C260"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig14EFE5EEB4F67AF12136C260
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: quoted-printable

Hello people,

yes, there were several threads about this topic, but I sadly have to res=
pawn
it, I'm sorry.

The first I found was a discussion from May 2005:

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3c=
Pine.LNX.4.58.0505302221330.28735@hal.rescomp.berkeley.edu%3e

There the final solution suggestion from Hoss was to try it with a binary=
 search
on the TermEnum

The second one was also from May 2005, it seems that it was a follow-up:

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3C=
Pine.LNX.4.58.0505311145460.29003@hal.rescomp.berkeley.edu%3E
http://markmail.org/message/rp4xfdclsha7h5uq#query:termenum%20lucene%20ma=
ximum%20value+page:1+mid:q3doh6tvyf6swl6h+state:results

Here, the solution with the FieldCache was discussed, and also another di=
rection
with a RangeQuery which results in a TooMAnyClauses that can be avoided b=
y
setting the 'allowed clauses count' to a bigger number.




I use the solution with the FieldCache, which worked fine for a long time=
, but
when I use it with bigger fields with millions of entries, I have big pea=
ks in
memory consumption, which sometimes result in an OutOfMemory Error. I ass=
ume
that with the range query, I will fall in the same Problem.


I now want to try out the solution from Hoss with the binary search over =
the
TermEnum, but it is not clear for me how to perform this.

The only methods in TermEnum are

  public abstract boolean next()
  public abstract Term term();
  public abstract int docFreq();
  public abstract void close()
  public boolean skipTo(Term target)

Whereby skipTo "Skips terms to the first beyond the current whose value i=
s
greater or equal to 'target'. Returns true iff there is such an entry."

How to avoid to perfom the 'big loop with next' until I am at the last en=
try,
like the current implementation of skipTo:

      do {
         if (!next())
   	        return false;
      } while (target.compareTo(term()) > 0);
      return true;

Whereby target() would be the over biggest value we could think about, an=
d I
remember the term bevore the method returns false.

Because of the tree-like architecture of the index, where the letters are=
 some
kind of nodes, e.g.

      a               z
    ab   ar         ze  zu
  abi     ark     zer    zul

I would assume that there is a fast possibility to determine that 'abi' i=
s the
minimum and 'zul' the maximum for that field - by simply walking through =
the
tree 'left - or rightwise' (when I only get the left node, I will walk to=
 the
minimum, when I only get the right node through walking, I will get the m=
aximum)

But this is a theoretical view. Enables the Lucene implementation walkthr=
oughs
like this? At least the RangeQuery implementation I would assume walks th=
rogh
the tree.


Thanks for all answers!

kindly regards

Chris


--------------enig14EFE5EEB4F67AF12136C260
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.4-svn0 (GNU/Linux)
Comment: Using GnuPG with SUSE - http://enigmail.mozdev.org

iD8DBQFIYhMx6EqMXq+WZg8RAhwkAJ4+t8ijOKFPn/+5/z6O+WqObI/3yQCdEpUB
d6CuaochrR1lcTpDZKieaxQ=
=XH5f
-----END PGP SIGNATURE-----

--------------enig14EFE5EEB4F67AF12136C260--

From java-user-return-34612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 10:55:27 2008
Return-Path: <java-user-return-34612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12971 invoked from network); 25 Jun 2008 10:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 10:55:26 -0000
Received: (qmail 90759 invoked by uid 500); 25 Jun 2008 10:55:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90732 invoked by uid 500); 25 Jun 2008 10:55:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90721 invoked by uid 99); 25 Jun 2008 10:55:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 03:55:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 10:54:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 164385C600
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 03:54:17 -0700 (PDT)
Message-Id: <DE8DF48E-F7AD-4AB3-91E3-CC12B2B33263@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <18104348.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Indexing the spider content
Date: Wed, 25 Jun 2008 06:54:17 -0400
References: <18085388.post@talk.nabble.com> <985307.41586.qm@web50302.mail.re2.yahoo.com> <18104348.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

If it has an API that let's you get the content that needs to be  
indexed, then, sure, you can index from the spider.  If it doesn't  
have an API, presumably, you would need to somehow extract the docs  
from the files it builds.  This is, of course, assuming it stores the  
crawled files in some proprietary format.  If it just downloads them  
as the original files on your disk, then it is just like any indexing  
problem of extracting the content from the files.

-Grant

On Jun 24, 2008, at 11:35 PM, yugana wrote:

>
> Hi Otis,
>
> Thanks for the reply. So you mean it is not possible to use Lucene  
> to index
> the fetched (Verity Spider Content) content.
>
> Yug
>
>
> Otis Gospodnetic wrote:
>>
>> It sounds like you want to check out Nutch - fetched, indexer,  
>> searcher,
>> etc. in one lovely package.
>>
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>>
>> ----- Original Message ----
>>> From: yugana <yugandhar.adem@wipro.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Tuesday, June 24, 2008 3:25:03 AM
>>> Subject: Indexing the spider content
>>>
>>>
>>> Hi All,
>>>
>>> I am new to Lucene Search. Can you let me know if it is possible  
>>> to index
>>> the "Verity Spider" content. If possible please let me know how to  
>>> create
>>> a
>>> index form it and search on it. Also share some code snippets on  
>>> how to
>>> proceed on indexing and searching. I donot have much time to go  
>>> throught
>>> the
>>> Lucene API. Your help is appreciated.
>>>
>>> Thanks,
>>> Yug
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/Indexing-the-spider-content-tp18085388p18085388.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Indexing-the-spider-content-tp18085388p18104348.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 10:56:12 2008
Return-Path: <java-user-return-34613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13104 invoked from network); 25 Jun 2008 10:56:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 10:56:11 -0000
Received: (qmail 92574 invoked by uid 500); 25 Jun 2008 10:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92381 invoked by uid 500); 25 Jun 2008 10:56:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92370 invoked by uid 99); 25 Jun 2008 10:56:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 03:56:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 10:55:14 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id A9F8612016
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 03:55:32 -0700 (PDT)
Message-Id: <C068CAA4-915A-49D8-9DB1-04FBE581CA1F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <BAY112-W37F5EF02F9F88ADB5D7EFDF9A00@phx.gbl>
Content-Type: text/plain; charset=GB2312; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers
Date: Wed, 25 Jun 2008 06:55:31 -0400
References: <519507.12479.qm@web50306.mail.re2.yahoo.com> <5e76f3840806111211j103c550fpa68db5e932214955@mail.gmail.com> <BAY119-W2732B32008EB8E34E67507B4AC0@phx.gbl>  <5e76f3840806130951u28be4bfbh237da22b431a8804@mail.gmail.com> <BAY112-W37F5EF02F9F88ADB5D7EFDF9A00@phx.gbl>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Note, you can do all kinds of tests like this and others with the =20
contrib/benchmark code built right into Lucene.

-Grant

On Jun 24, 2008, at 11:09 PM, Rakesh Shete wrote:

> Hi Glen,
>
> Is your source code available? I would like to have a look at it and =20=

> check if whatever I have tried makes sense.
>
> --Regards,
> Rakesh S
>
>
>
>> Date: Fri, 13 Jun 2008 12:51:51 -0400
>> From: glen.newton@gmail.com
>> To: java-user@lucene.apache.org
>> Subject: Re: Concurrent query benchmarks, with 1,2,4,8 readers
>>
>> Lutan,
>>
>> Yes, no problem. I am away at a conference next week but plan to
>> release the code the following week. Is this OK for you?
>>
>> thanks,
>>
>> Glen
>>
>> 2008/6/13 lutan <wsnet@live.cn>:
>>>
>>> TO: Glen Newton Could I get your test code or code architecture =20
>>> for study.
>>> I have try to using java.util.concurrent package(
>>> like ArrayBlockingQueue  ThreadPoolExecutor;)
>>> with lucene,but it is no successful.I don't
>>> know how to design.
>>>
>>>
>>> Thanks ! my emial: wsnet@live.cn
>>> _________________________________________________________________
>>> =B6=E0=B8=F6=D3=CA=CF=E4=CD=AC=B2=BD=B9=DC=C0=ED=A3=AClive =
mail=BF=CD=BB=A7=B6=CB=CD=F2=C8=CB=C7=C0=D3=C3=D6=D0
>>> http://get.live.cn/product/mail.html
>>
>>
>>
>> --=20
>>
>> -
>
> _________________________________________________________________
> Timely update on all current affairs, sports, events and all thats =20
> in News here on MSN videos.
> http://video.msn.com/?mkt=3Den-in

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 12:54:29 2008
Return-Path: <java-user-return-34614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80412 invoked from network); 25 Jun 2008 12:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 12:54:29 -0000
Received: (qmail 18827 invoked by uid 500); 25 Jun 2008 12:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18582 invoked by uid 500); 25 Jun 2008 12:54:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18571 invoked by uid 99); 25 Jun 2008 12:54:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 05:54:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 12:53:34 +0000
Received: by py-out-1112.google.com with SMTP id z74so1734765pyg.9
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 05:53:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NVSWNw0ZM9t9x1ZizA5gk1JtczPKkOb5X3umbK0CebQ=;
        b=no7IvHPXKvS8EtQ9GjhOna+jqpyUFNtPGBHNeECSpWW6FO87nb3UqptTKFm45oXTCY
         mkECBjNvo1btT3e4a3n1nFuKsBPuPVOfBOBHoMRyTk8y3N4Gd1+hgvdODON2HXr2QmoV
         KxqQ0wQgjddaKcCHsunA9OGAXdoIxLiOeRfbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=o1vYAsFJH3AwAkbH+Vg5dy7gQcQ9meGQchMlz8XO7gvOgi+0g4EWTtfvgJKApV8Wbr
         gdHV9GeCh88G5XV6C3TERKSqTVFrlOR4bZD0UoOfLNeK4CX1MV4rkmHEcu87pyESfhw6
         WYXc1KqOoLe14+FRoml6qL6tk7asEHdFwUEtA=
Received: by 10.140.165.21 with SMTP id n21mr16281850rve.97.1214398432705;
        Wed, 25 Jun 2008 05:53:52 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Wed, 25 Jun 2008 05:53:52 -0700 (PDT)
Message-ID: <359a92830806250553u4f560f9bs47c43eb201cf6da9@mail.gmail.com>
Date: Wed, 25 Jun 2008 08:53:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with search an exact word and stemming
In-Reply-To: <220b8f60806250121l59e39dd0pa406cc9ddd724582@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24018_21085522.1214398432672"
References: <220b8f60806250121l59e39dd0pa406cc9ddd724582@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24018_21085522.1214398432672
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The way I've solved this is to index the stemmed *and* a special
token at the same position (see Synonym Analyzer). The From your
example, say you're indexing progresser. You'd go ahead and index the
stemmed version , "progress", AND you'd also index "progresser$"
at the same offset. Now, when you want exact matches, search for
the token with the $ at the end.

This does make your index a bit larger, but not as much as you'd expect.

Best
Erick

On Wed, Jun 25, 2008 at 4:21 AM, renou oki <occhipin@gmail.com> wrote:

> Hello,
>
> I have a stemmed index, but i want to search the exact form of a word.
> I use French Analyzer, so for instance "progression", "progresser" are
> indexed with the linguistic root "progress".
> But if I want to search the word "progress" (and only this word), I have to
> many hits (because of "progression", "progresser"...)
> The field is indexed, tokenized and no store...
>
> Is there a way to do this, I mean to search an exact word in a stemmed
> index
> ?
> I suppose that I have to use the same analyzer for indexing and searching.
>
>
> I try with a PhraseQuery, with quotes...
>
> Ps : I use lucene 1.9.1
>
> Thanks
> Renald
>

------=_Part_24018_21085522.1214398432672--

From java-user-return-34615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 13:03:00 2008
Return-Path: <java-user-return-34615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84031 invoked from network); 25 Jun 2008 13:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 13:03:00 -0000
Received: (qmail 31474 invoked by uid 500); 25 Jun 2008 13:02:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31443 invoked by uid 500); 25 Jun 2008 13:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31432 invoked by uid 99); 25 Jun 2008 13:02:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 06:02:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 13:02:06 +0000
Received: by yx-out-2324.google.com with SMTP id 31so519180yxl.5
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 06:02:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8Jn+GueRjhsoDw/3kmaq1IMWd3Lri+OaKcDwg9smbtQ=;
        b=uUT1tEi4fCABuXreivPBDvlHYpaAuwrdpl5GBF7ZIrIagQTpIU0zyqI5RWG3L9PJyS
         jPtUxxkRsFShc9nuPfwFQ3LUwn5FzxGl/kZN2aZhXJ+7TwmnhDvkfAR/q/KW4auPhWip
         4sWLP1C0PgBHc5dRk2CFGLZiCZ8P3o/zws2ck=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ig6QuQZIT5uUhMkTq2rmskY5DHABMSSUEUUKKWWBYBS6SV0ptqQRfPa+aviObImllK
         hXSzhHiT2NSdzAkDyQ+ozvS0W6C6pbwElUDL7ksNb4tEM5q/sLitQbsqd7nTvpJjQ1gg
         SijPlGVIF7JNqqLUlRZSTXJGUnP+OUycxFFX8=
Received: by 10.140.165.21 with SMTP id n21mr15836891rve.244.1214398944053;
        Wed, 25 Jun 2008 06:02:24 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Wed, 25 Jun 2008 06:02:23 -0700 (PDT)
Message-ID: <359a92830806250602ge63ca8bw23f5394cee81452@mail.gmail.com>
Date: Wed, 25 Jun 2008 09:02:23 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: case insensitivity
In-Reply-To: <486211CF.80902@propylon.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24056_18381292.1214398944004"
References: <486211CF.80902@propylon.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24056_18381292.1214398944004
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, it depends on what you mean by "per term". There's already
PerFieldAnalyzerWrapper for each field, but I don't think that's what
you want.

How do you expect a per term analyzer to behave? I'm having a hard
time thinking of a use case that's general. You could always
roll your own analyzer that didn't change case for your particular
list of words.

But the problem is your users. In your example, suppose a user
typed in "dell computers". Would that match "Dell computers"?
Does your analyzer automatically upper-case some words? If it
does, that's the same as lower casing them all. If it doesn't,
how do you explain that to your users?

All in all, I'm having a tough time imagining how this would work.
It's easy enough to say "let's assume", but I suspect that
whatever solution satisfied your example will have its own problems
that are far worse than just lower-casing things.

Best
Erick


On Wed, Jun 25, 2008 at 5:37 AM, John Byrne <john.byrne@propylon.com> wrote:

> Hi,
>
> I know that case-insensitive searching is normally done by creating an
> all-lower-case version of the documents, and turning the search terms into
> lower case whenever this field is searched, but this approach has it's
> disadvantages.
>
> Let's say, for example, you want to find "Dell" (with a capital "D"), near
> "computers" (with or without capitals, ie. in any case). The problem is that
> you would need to use a SpanQuery to find terms near each other; but if the
> case-sensitivity required is different for each term, then they will be in
> different fields, making the use of SpanQuerys inpossible.
>
> There might be ways to work around this, but my question is: will
> case-insensitvity ever be added to Lucene as per-Term option? If not, can
> anyone tell me where I should start looking in order to make this change
> myself?
>
> Thanks!
>
> -JB
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24056_18381292.1214398944004--

From java-user-return-34616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 13:51:38 2008
Return-Path: <java-user-return-34616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13362 invoked from network); 25 Jun 2008 13:51:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 13:51:38 -0000
Received: (qmail 46359 invoked by uid 500); 25 Jun 2008 13:51:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46323 invoked by uid 500); 25 Jun 2008 13:51:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46312 invoked by uid 99); 25 Jun 2008 13:51:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 06:51:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 13:50:41 +0000
Received: by yw-out-2324.google.com with SMTP id 3so900227ywj.5
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 06:50:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=2H8qsGN7v2ficjKX3olqN+NNVI7t4ofewJvncoGTbEU=;
        b=OpJG2G0wsyocRkCuhxZ9CC8oXPp2WFwY6niG0XzYf225tfq4cuHXuq14T0dn/RzSXS
         j3DQRxA5EFC/nKBcU+qsYZwpTvuQluOBUzBTrLd/wCUGP+B8xVH1gVR8vZ501LNVWGgp
         ro6dkZnPP7/PVMZW7k1cUeplMrc3ELit4pDxg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=ieWBMS1SfIW149A5AtRaXFzNX+VnCO+XuGXt24ZT8S7CZG4XpixOUz7bG1KRjq02ZT
         2EjPOSGJwa3HBuZZrIX1iToBR3P4dV9/jo8uchvhDi/9mwbmMlWeaL7EYr/ba7hVAhgJ
         RgayBRB2CiTPXdJf7XLF3v8WgJ5ZBXJqNzQ0E=
Received: by 10.103.24.17 with SMTP id b17mr3022738muj.107.1214401852537;
        Wed, 25 Jun 2008 06:50:52 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.94.95])
        by mx.google.com with ESMTPS id w5sm29716832mue.11.2008.06.25.06.50.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 25 Jun 2008 06:50:50 -0700 (PDT)
Message-Id: <43882481-4ADB-4BF4-BF76-583112301E0D@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Different indices for different searches?
Date: Wed, 25 Jun 2008 15:50:47 +0200
X-Mailer: Apple Mail (2.924)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have 2 kind of searches. One kind is like the wikipedia suggestions  
and the other one is pretty classic. So does it make sense to have  
different indices for this 2 search-styles?

best,
sascha

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 14:00:51 2008
Return-Path: <java-user-return-34617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20211 invoked from network); 25 Jun 2008 14:00:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 14:00:51 -0000
Received: (qmail 67215 invoked by uid 500); 25 Jun 2008 14:00:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66358 invoked by uid 500); 25 Jun 2008 14:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66347 invoked by uid 99); 25 Jun 2008 14:00:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 07:00:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 13:59:54 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1KBVSl-0005ZE-Q9
	for java-user@lucene.apache.org; Wed, 25 Jun 2008 14:55:36 +0100
Message-ID: <48624F44.3090106@propylon.com>
Date: Wed, 25 Jun 2008 14:59:32 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <486211CF.80902@propylon.com> <359a92830806250602ge63ca8bw23f5394cee81452@mail.gmail.com>
In-Reply-To: <359a92830806250602ge63ca8bw23f5394cee81452@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: case insensitivity
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.6 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

What I had in mind was actually very simple: when you create a Term 
(programatically) you normally set the text and the field. I would also 
like to be able to set the case sensitivity to true or false for that 
specific Term object.

I imangined (and maybe I am over simplifying it!) that somewhere in the 
API there must be a string comparison using 'String.equals()' that 
determines if a document contains the term or not - and that use of 
'equals()' has permanently locked Lucene into case-sensitive searching. 
The values being compared could be first lower-cased (or 
equalsIgnoreCase could be used) depending on the value of a boolean flag 
in the Term object.

If that option was there, there would be no need to ever change the case 
in the analyzer - you'd be able to control case-sensitivity regardless 
of the field used.

Of course, I realize that there is currently no way to take advantage of 
such a feature in the QueryParser. It could only be done 
programatically. But I don't think that's a reason not to do it, since 
the API already has features that aren't implemented in the QueryParser 
(like SpanQuerys). In a perfect world, the parser would support all the 
features, but for the time being anyone who wants to take advantage of 
the newer features has to find an alternative anyway.

The problem that it would solve for me is, as I mentioned, that I could 
mix case-sensitive Terms with case-insensitive Terms when using 
SpanQuerys. I currently have no way to do that.

Regards,
-John

Erick Erickson wrote:
> Well, it depends on what you mean by "per term". There's already
> PerFieldAnalyzerWrapper for each field, but I don't think that's what
> you want.
>
> How do you expect a per term analyzer to behave? I'm having a hard
> time thinking of a use case that's general. You could always
> roll your own analyzer that didn't change case for your particular
> list of words.
>
> But the problem is your users. In your example, suppose a user
> typed in "dell computers". Would that match "Dell computers"?
> Does your analyzer automatically upper-case some words? If it
> does, that's the same as lower casing them all. If it doesn't,
> how do you explain that to your users?
>
> All in all, I'm having a tough time imagining how this would work.
> It's easy enough to say "let's assume", but I suspect that
> whatever solution satisfied your example will have its own problems
> that are far worse than just lower-casing things.
>
> Best
> Erick
>
>
> On Wed, Jun 25, 2008 at 5:37 AM, John Byrne <john.byrne@propylon.com> wrote:
>
>   
>> Hi,
>>
>> I know that case-insensitive searching is normally done by creating an
>> all-lower-case version of the documents, and turning the search terms into
>> lower case whenever this field is searched, but this approach has it's
>> disadvantages.
>>
>> Let's say, for example, you want to find "Dell" (with a capital "D"), near
>> "computers" (with or without capitals, ie. in any case). The problem is that
>> you would need to use a SpanQuery to find terms near each other; but if the
>> case-sensitivity required is different for each term, then they will be in
>> different fields, making the use of SpanQuerys inpossible.
>>
>> There might be ways to work around this, but my question is: will
>> case-insensitvity ever be added to Lucene as per-Term option? If not, can
>> anyone tell me where I should start looking in order to make this change
>> myself?
>>
>> Thanks!
>>
>> -JB
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   
> ------------------------------------------------------------------------
>
> No virus found in this incoming message.
> Checked by AVG. 
> Version: 7.5.524 / Virus Database: 270.4.1/1517 - Release Date: 24/06/2008 20:41
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 14:01:16 2008
Return-Path: <java-user-return-34618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20547 invoked from network); 25 Jun 2008 14:01:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 14:01:15 -0000
Received: (qmail 68338 invoked by uid 500); 25 Jun 2008 14:01:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68300 invoked by uid 500); 25 Jun 2008 14:01:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68289 invoked by uid 99); 25 Jun 2008 14:01:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 07:01:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 14:00:21 +0000
Received: by rn-out-0910.google.com with SMTP id j71so691186rne.4
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 07:00:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=gYTn4eyB0V5yG+QCJtMXDlmJCEekKlJCf4bwR5WKaGc=;
        b=aB3tfgGomkg9A/nu/8CoXx2aiSDC0j5qdfJqTcCHYuFUZpPs07R6XK6c1T6NLsDvk+
         kDClS17bQddb67Us2C5yHTCHtpl68n/HcOmSZsy7nCa1gZMVW4UQEnkeZK+QeO5pdGEr
         BEdVtIsGbY+yz2yjkRPZ5kD+zslcIFBTbohrQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=js7UOZW2ip1gwZMum0HLjH/K/QwbxxVcAexD6UrDBPXQwTH1moyksd555EcLx0F+C2
         dPwIh7Vr1GuDrGkPjCa7RYlQP9Y7DkXUVEkEBO2DtkkzU27On3/GmHbBYxCmqHmTXAtG
         N1FfGhACOiGeZVJ5z3pVAZXzcaypFbZkVp6Ac=
Received: by 10.142.177.5 with SMTP id z5mr6823210wfe.248.1214402439212;
        Wed, 25 Jun 2008 07:00:39 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Wed, 25 Jun 2008 07:00:39 -0700 (PDT)
Message-ID: <359a92830806250700j5e98ce9dl959ca9416559d195@mail.gmail.com>
Date: Wed, 25 Jun 2008 10:00:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Different indices for different searches?
In-Reply-To: <43882481-4ADB-4BF4-BF76-583112301E0D@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24316_8519643.1214402439245"
References: <43882481-4ADB-4BF4-BF76-583112301E0D@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24316_8519643.1214402439245
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It depends (tm, Erik Hatcher). How many docs in your index?
How much information for each doc? What is the size of
your index?

You could have two different indexes. You could index the same
data in different fields in the same index and only have one. There
have been several discussions about this, try searching the archive
for "more like this".

Best
Erick

On Wed, Jun 25, 2008 at 9:50 AM, Sascha Fahl <sascha.fahl@googlemail.com>
wrote:

> Hi,
>
> I have 2 kind of searches. One kind is like the wikipedia suggestions and
> the other one is pretty classic. So does it make sense to have different
> indices for this 2 search-styles?
>
> best,
> sascha
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24316_8519643.1214402439245--

From java-user-return-34619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 15:10:07 2008
Return-Path: <java-user-return-34619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69988 invoked from network); 25 Jun 2008 15:10:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 15:10:07 -0000
Received: (qmail 83630 invoked by uid 500); 25 Jun 2008 15:10:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83602 invoked by uid 500); 25 Jun 2008 15:10:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83591 invoked by uid 99); 25 Jun 2008 15:10:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 08:10:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 15:09:08 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id m5PF59xU017032
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 17:05:09 +0200
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id m5PF59dh024873
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 17:05:09 +0200 (CEST)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id m5PF5Lof002979
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 17:05:22 +0200 (CEST)
Message-ID: <48625EA4.6080606@gmail.com>
Date: Wed, 25 Jun 2008 17:05:08 +0200
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: yet again: getting the minimum and maximum value of a field
X-Enigmail-Version: 0.95.6
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello people,


I'm sorry if I have send this message twice - my gmail interface merges the
mails in the 'send' folder with incoming mails from my adress - strange, but
I can't say if the mail was sent - I only see it in the send-folder (with
only one label on it, which brings me to send it again :( ) Okay.



yes, there were several threads about this topic, but I sadly have to respawn
it, I'm sorry.

The first I found was a discussion from May 2005:

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3cPine.LNX.4.58.0505302221330.28735@hal.rescomp.berkeley.edu%3e

There the final solution suggestion from Hoss was to try it with a binary search
on the TermEnum

The second one was also from May 2005, it seems that it was a follow-up:

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3CPine.LNX.4.58.0505311145460.29003@hal.rescomp.berkeley.edu%3E
http://markmail.org/message/rp4xfdclsha7h5uq#query:termenum%20lucene%20maximum%20value+page:1+mid:q3doh6tvyf6swl6h+state:results

Here, the solution with the FieldCache was discussed, and also another direction
with a RangeQuery which results in a TooMAnyClauses that can be avoided by
setting the 'allowed clauses count' to a bigger number.




I use the solution with the FieldCache, which worked fine for a long time, but
when I use it with bigger fields with millions of entries, I have big peaks in
memory consumption, which sometimes result in an OutOfMemory Error. I assume
that with the range query, I will fall in the same Problem.


I now want to try out the solution from Hoss with the binary search over the
TermEnum, but it is not clear for me how to perform this.

The only methods in TermEnum are

  public abstract boolean next()
  public abstract Term term();
  public abstract int docFreq();
  public abstract void close()
  public boolean skipTo(Term target)

Whereby skipTo "Skips terms to the first beyond the current whose value is
greater or equal to 'target'. Returns true iff there is such an entry."

How to avoid to perfom the 'big loop with next' until I am at the last entry,
like the current implementation of skipTo:

      do {
         if (!next())
               return false;
      } while (target.compareTo(term()) > 0);
      return true;

Whereby target() would be the over biggest value we could think about, and I
remember the term bevore the method returns false.

Because of the tree-like architecture of the index, where the letters are some
kind of nodes, e.g.

      a               z
    ab   ar         ze  zu
  abi     ark     zer    zul

I would assume that there is a fast possibility to determine that 'abi' is the
minimum and 'zul' the maximum for that field - by simply walking through the
tree 'left - or rightwise' (when I only get the left node, I will walk to the
minimum, when I only get the right node through walking, I will get the maximum)

But this is a theoretical view. Enables the Lucene implementation walkthroughs
like this? At least the RangeQuery implementation I would assume walks throgh
the tree.


Thanks for all answers!

kindly regards

Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 15:24:00 2008
Return-Path: <java-user-return-34620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79180 invoked from network); 25 Jun 2008 15:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 15:24:00 -0000
Received: (qmail 15270 invoked by uid 500); 25 Jun 2008 15:23:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15243 invoked by uid 500); 25 Jun 2008 15:23:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15232 invoked by uid 99); 25 Jun 2008 15:23:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 08:23:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 15:23:03 +0000
Received: by wa-out-1112.google.com with SMTP id l24so1118846waf.11
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 08:23:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ymfV8Ln4PXvGq0rzehzntGYJlozU6Lg870ygXHzSD+Q=;
        b=bemFyXEBbZOdENNA7De4PvDaAyg29JBDbyEaKvHtMBoB9Ap38Wt8FnRYkRil+BRchv
         usxI3aBPaaYpKtSKjBLf/hDc33xlg4vhH8eaJJpbReH5CN8LfVyTD0kz8xpteLXDz0k/
         XSXbFc3hc7rjDzZf4RfrtI3ZoM4gkpe7pthpE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MMwhwbB0SK9zxi3bwVI4JDM0F2aHF4gj64J0/qBioxSKi98U0O7CR7907/6kjU8AOk
         3weWL8NBvn52J4BA8DGbx+GCqTmZT97xaGiNNKrJ4rgoVdIXWypMBcvauL14+LOTy+4j
         l4hnYEN2ttv9//rZYY2JFAjrTq+HBvEIf8cGU=
Received: by 10.115.106.7 with SMTP id i7mr5876740wam.131.1214407403164;
        Wed, 25 Jun 2008 08:23:23 -0700 (PDT)
Received: by 10.114.182.2 with HTTP; Wed, 25 Jun 2008 08:23:23 -0700 (PDT)
Message-ID: <85d3c3b60806250823g45bb8e79xb5385ee702cfd085@mail.gmail.com>
Date: Wed, 25 Jun 2008 11:23:23 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: yet again: getting the minimum and maximum value of a field
In-Reply-To: <4862132A.8050701@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15794_28997865.1214407403125"
References: <4862132A.8050701@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15794_28997865.1214407403125
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I looked heavily at this.  It requires a customization of TermInfosReader
whereby the tii (term dictionary) SegmentTermEnum is traversed looking for
the last term with a particular field.  Once found, from that position in
the tis SegmentTermEnum would need to be traversed again for the last term
with the desired field.  This would be the most efficient using the current
system.

In the Tag Index I am working on
https://issues.apache.org/jira/browse/LUCENE-1292, the max values would be
stored automatically at the end of the tis file.  They would be available
via a subclass of TermEnum that adds a method "public Term getMax(String
field)"

On Wed, Jun 25, 2008 at 5:43 AM, Christian Reuschling <
christian.reuschling@gmail.com> wrote:

> Hello people,
>
> yes, there were several threads about this topic, but I sadly have to
> respawn
> it, I'm sorry.
>
> The first I found was a discussion from May 2005:
>
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3cPine.LNX.4.58.0505302221330.28735@hal.rescomp.berkeley.edu%3e
>
> There the final solution suggestion from Hoss was to try it with a binary
> search
> on the TermEnum
>
> The second one was also from May 2005, it seems that it was a follow-up:
>
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200505.mbox/%3CPine.LNX.4.58.0505311145460.29003@hal.rescomp.berkeley.edu%3E
>
> http://markmail.org/message/rp4xfdclsha7h5uq#query:termenum%20lucene%20maximum%20value+page:1+mid:q3doh6tvyf6swl6h+state:results
>
> Here, the solution with the FieldCache was discussed, and also another
> direction
> with a RangeQuery which results in a TooMAnyClauses that can be avoided by
> setting the 'allowed clauses count' to a bigger number.
>
>
>
>
> I use the solution with the FieldCache, which worked fine for a long time,
> but
> when I use it with bigger fields with millions of entries, I have big peaks
> in
> memory consumption, which sometimes result in an OutOfMemory Error. I
> assume
> that with the range query, I will fall in the same Problem.
>
>
> I now want to try out the solution from Hoss with the binary search over
> the
> TermEnum, but it is not clear for me how to perform this.
>
> The only methods in TermEnum are
>
>  public abstract boolean next()
>  public abstract Term term();
>  public abstract int docFreq();
>  public abstract void close()
>  public boolean skipTo(Term target)
>
> Whereby skipTo "Skips terms to the first beyond the current whose value is
> greater or equal to 'target'. Returns true iff there is such an entry."
>
> How to avoid to perfom the 'big loop with next' until I am at the last
> entry,
> like the current implementation of skipTo:
>
>     do {
>        if (!next())
>                return false;
>     } while (target.compareTo(term()) > 0);
>     return true;
>
> Whereby target() would be the over biggest value we could think about, and
> I
> remember the term bevore the method returns false.
>
> Because of the tree-like architecture of the index, where the letters are
> some
> kind of nodes, e.g.
>
>     a               z
>   ab   ar         ze  zu
>  abi     ark     zer    zul
>
> I would assume that there is a fast possibility to determine that 'abi' is
> the
> minimum and 'zul' the maximum for that field - by simply walking through
> the
> tree 'left - or rightwise' (when I only get the left node, I will walk to
> the
> minimum, when I only get the right node through walking, I will get the
> maximum)
>
> But this is a theoretical view. Enables the Lucene implementation
> walkthroughs
> like this? At least the RangeQuery implementation I would assume walks
> throgh
> the tree.
>
>
> Thanks for all answers!
>
> kindly regards
>
> Chris
>
>

------=_Part_15794_28997865.1214407403125--

From java-user-return-34621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 16:02:15 2008
Return-Path: <java-user-return-34621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5628 invoked from network); 25 Jun 2008 16:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 16:02:15 -0000
Received: (qmail 88753 invoked by uid 500); 25 Jun 2008 16:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88721 invoked by uid 500); 25 Jun 2008 16:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88710 invoked by uid 99); 25 Jun 2008 16:02:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 09:02:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.162.177 as permitted sender)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 16:01:20 +0000
Received: by el-out-1112.google.com with SMTP id m34so383857ele.14
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 09:01:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zSJ4Ud+8H1LqJoKVx+TqgxHlF1TnS7e+AJvTf+ShE2Q=;
        b=geBgbMIDhdGL7XPNI/n6Ih0n4hj/yccjRBEhhNzsEFUn+bcx6O9/0vJPXPUdZcpzKz
         UpiTP6gTxfAT9yHL0szp9uzl8VCHjztUSD8/3czSnqSp5NvBvUxCuEmGXoe5N9lQsTDR
         r9BziHBJutiG+3PxjOktqBCxPUlnFYiw2OR+Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iQvs72Kw46Yc24iQBb0qrAu6L4n3akp4+r3ZP43FoG3LJJtMOdVqKJLvcX2eAzcj7S
         Y0MQImjRrUlmkyybqYHFkoaCTJT/CmWHN7ZodiYGxdivVK0uIHOxDQtFhnneSTosgnQs
         zByW9o4znL74VGCwz2EDAiDLyzu3jUuzCuJvA=
Received: by 10.142.177.7 with SMTP id z7mr6998570wfe.15.1214409697735;
        Wed, 25 Jun 2008 09:01:37 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Wed, 25 Jun 2008 09:01:37 -0700 (PDT)
Message-ID: <359a92830806250901s765624cbif7d9d7fa0f67ba44@mail.gmail.com>
Date: Wed, 25 Jun 2008 12:01:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: case insensitivity
In-Reply-To: <48624F44.3090106@propylon.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74_427162.1214409697640"
References: <486211CF.80902@propylon.com>
	 <359a92830806250602ge63ca8bw23f5394cee81452@mail.gmail.com>
	 <48624F44.3090106@propylon.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74_427162.1214409697640
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I suppose something like that might work, but I still think that presenting
a user with matches that sometimes work case sensitive and sometimes
doesn't would be...er..fraught.


If you can programmatically restrict your query construction and you're
*sure* this is what your users expect, you can make it work. Just index
each term twice, once lowercased and once in the native case, with 0
term increment between them. Then you can simply construct your
terms however you want and fire the result at the search. In fact, you
only need to double-index the terms you want to do case-sensitive
searches on. This will increase the size of your index less than you
think...

Best
Erick

On Wed, Jun 25, 2008 at 9:59 AM, John Byrne <john.byrne@propylon.com> wrote:

> What I had in mind was actually very simple: when you create a Term
> (programatically) you normally set the text and the field. I would also like
> to be able to set the case sensitivity to true or false for that specific
> Term object.
>
> I imangined (and maybe I am over simplifying it!) that somewhere in the API
> there must be a string comparison using 'String.equals()' that determines if
> a document contains the term or not - and that use of 'equals()' has
> permanently locked Lucene into case-sensitive searching. The values being
> compared could be first lower-cased (or equalsIgnoreCase could be used)
> depending on the value of a boolean flag in the Term object.
>
> If that option was there, there would be no need to ever change the case in
> the analyzer - you'd be able to control case-sensitivity regardless of the
> field used.
>
> Of course, I realize that there is currently no way to take advantage of
> such a feature in the QueryParser. It could only be done programatically.
> But I don't think that's a reason not to do it, since the API already has
> features that aren't implemented in the QueryParser (like SpanQuerys). In a
> perfect world, the parser would support all the features, but for the time
> being anyone who wants to take advantage of the newer features has to find
> an alternative anyway.
>
> The problem that it would solve for me is, as I mentioned, that I could mix
> case-sensitive Terms with case-insensitive Terms when using SpanQuerys. I
> currently have no way to do that.
>
> Regards,
> -John
>
> Erick Erickson wrote:
>
>> Well, it depends on what you mean by "per term". There's already
>> PerFieldAnalyzerWrapper for each field, but I don't think that's what
>> you want.
>>
>> How do you expect a per term analyzer to behave? I'm having a hard
>> time thinking of a use case that's general. You could always
>> roll your own analyzer that didn't change case for your particular
>> list of words.
>>
>> But the problem is your users. In your example, suppose a user
>> typed in "dell computers". Would that match "Dell computers"?
>> Does your analyzer automatically upper-case some words? If it
>> does, that's the same as lower casing them all. If it doesn't,
>> how do you explain that to your users?
>>
>> All in all, I'm having a tough time imagining how this would work.
>> It's easy enough to say "let's assume", but I suspect that
>> whatever solution satisfied your example will have its own problems
>> that are far worse than just lower-casing things.
>>
>> Best
>> Erick
>>
>>
>> On Wed, Jun 25, 2008 at 5:37 AM, John Byrne <john.byrne@propylon.com>
>> wrote:
>>
>>
>>
>>> Hi,
>>>
>>> I know that case-insensitive searching is normally done by creating an
>>> all-lower-case version of the documents, and turning the search terms
>>> into
>>> lower case whenever this field is searched, but this approach has it's
>>> disadvantages.
>>>
>>> Let's say, for example, you want to find "Dell" (with a capital "D"),
>>> near
>>> "computers" (with or without capitals, ie. in any case). The problem is
>>> that
>>> you would need to use a SpanQuery to find terms near each other; but if
>>> the
>>> case-sensitivity required is different for each term, then they will be
>>> in
>>> different fields, making the use of SpanQuerys inpossible.
>>>
>>> There might be ways to work around this, but my question is: will
>>> case-insensitvity ever be added to Lucene as per-Term option? If not, can
>>> anyone tell me where I should start looking in order to make this change
>>> myself?
>>>
>>> Thanks!
>>>
>>> -JB
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>  ------------------------------------------------------------------------
>>
>> No virus found in this incoming message.
>> Checked by AVG. Version: 7.5.524 / Virus Database: 270.4.1/1517 - Release
>> Date: 24/06/2008 20:41
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_74_427162.1214409697640--

From java-user-return-34622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 17:43:28 2008
Return-Path: <java-user-return-34622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61977 invoked from network); 25 Jun 2008 17:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 17:43:27 -0000
Received: (qmail 71150 invoked by uid 500); 25 Jun 2008 17:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71125 invoked by uid 500); 25 Jun 2008 17:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71114 invoked by uid 99); 25 Jun 2008 17:43:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 10:43:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 17:42:33 +0000
Received: by rv-out-0506.google.com with SMTP id f6so10166597rvb.5
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 10:42:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=RLGJcg7IHCAegDc72qauSg7h9zjmNeYK/RlZg397LpQ=;
        b=K3GEvjlIkGIN8vOBVdozgV9oNcGxbIJLRQ+g4LMQIJB4Ej+wvfTOWhzdySC9Tktnkz
         BxPnLYDmJkrHskzdJDLURhIqrLTPqFKprENGmHsjnhqvKKoYjDECrvA38l6dZm1nX0+b
         BEnE9eNOhanHydOKpIdJ07nTkqNWFZDGhB6lg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=JVGr6wVh25Qr9duBTf4fZlvtR1snr7jDjp+WGvrnqxucX2hPI1gI2MSo/wHdOCLrS+
         SwDgF9zh1kAn7RoONms8yqrHBE0uuoirLZzNYXPtitKjhOE60/u8p94izpliBxGt2vyR
         Kcwl21vuR/y03R3CYbfQYyU9Dztjp80kiL/vA=
Received: by 10.141.170.10 with SMTP id x10mr6309642rvo.105.1214415755465;
        Wed, 25 Jun 2008 10:42:35 -0700 (PDT)
Received: by 10.140.208.3 with HTTP; Wed, 25 Jun 2008 10:42:35 -0700 (PDT)
Message-ID: <2dab92100806251042g3a05414bs53da988986eaa31a@mail.gmail.com>
Date: Wed, 25 Jun 2008 11:42:35 -0600
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching any part of a string
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2855_23953925.1214415755413"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2855_23953925.1214415755413
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am currently keeping an index of all our client's usernames. The search
functionality is implemented using a PrefixFilter. However, we would like to
expand the functionality to be able to search any part of a user's name,
rather than requiring that it begin with the query string. So for example,
the search term 'mit' would return the username 'smith'.

I am hesitant to use a WildcardQuery starting with an asterisk because I've
read about why this is a bad idea. I am looking for suggestions on the best
way to implement this.

The idea I've come up with is to index each part of the username; so for
example, if the username is 'mark', you would index mark, ark, rk, and k.
Then you could still use the PrefixFilter. I'm not overly concerned about
how this would enlarge the index because usernames tend to be fairly short.

I am very much open to other suggestions however. Does anyone have any
opinions or ideas that they can share?

Thanks very much.

Mark

------=_Part_2855_23953925.1214415755413--

From java-user-return-34623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 17:48:09 2008
Return-Path: <java-user-return-34623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64485 invoked from network); 25 Jun 2008 17:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 17:48:08 -0000
Received: (qmail 78310 invoked by uid 500); 25 Jun 2008 17:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77998 invoked by uid 500); 25 Jun 2008 17:48:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77987 invoked by uid 99); 25 Jun 2008 17:48:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 10:48:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 17:47:14 +0000
Received: by rv-out-0506.google.com with SMTP id f6so10168334rvb.5
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 10:47:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=YN00M1bWaPh+ux98RHq+KEqud88BIy4+C8d8lOhAJOo=;
        b=sRjn78E3LDy2c7FRhu0j2ea14sMncREyNXHw0R/bQrkQOR37mf5otiEJs7dv34AkCP
         zVfM+FnDZKVPliv8RDC+XYsJBcTMTCqSbKxfjOtd1GRGJT3vnrnOlEjvEFs4YpHxPaTQ
         SsHUJmWFaMbw7jKlf2Cgv6qjjbuoZfxx/UM40=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XQWncKhDd3PKP2d0OrsUMvdhyYrbRruV35XgflkfWMCKJOav/kvpZIHwjddqZ7++bo
         7TvJE3xAKMv5mwJodFJtzFNjvwPgJcBQ7Am4jnFcuVnNM+FInqEsy2KOXdS0yGmlg7nu
         s9f6TE1wiS/F3px9G8l5kY+/1u54IojNCuvWk=
Received: by 10.141.115.6 with SMTP id s6mr16699326rvm.48.1214416053338;
        Wed, 25 Jun 2008 10:47:33 -0700 (PDT)
Received: by 10.140.208.3 with HTTP; Wed, 25 Jun 2008 10:47:33 -0700 (PDT)
Message-ID: <2dab92100806251047j3ae5fa3dncdc466be2caad1b2@mail.gmail.com>
Date: Wed, 25 Jun 2008 11:47:33 -0600
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching any part of a string
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2868_28117328.1214416053341"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2868_28117328.1214416053341
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am currently keeping an index of all our client's usernames. The search
functionality is implemented using a PrefixFilter. However, we would like to
expand the functionality to be able to search any part of a user's name,
rather than requiring that it begin with the query string. So for example,
the search term 'mit' would return the username 'smith'.

I am hesitant to use a WildcardQuery starting with an asterisk because I've
read about why this is a bad idea. I am looking for suggestions on the best
way to implement this.

The idea I've come up with is to index each part of the username; so for
example, if the username is 'mark', you would index mark, ark, rk, and k.
Then you could still use the PrefixFilter. I'm not overly concerned about
how this would enlarge the index because usernames tend to be fairly short.

I am very much open to other suggestions however. Does anyone have any
opinions or ideas that they can share?

Thanks very much.

Mark

------=_Part_2868_28117328.1214416053341--

From java-user-return-34624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 18:26:04 2008
Return-Path: <java-user-return-34624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87567 invoked from network); 25 Jun 2008 18:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 18:26:04 -0000
Received: (qmail 53423 invoked by uid 500); 25 Jun 2008 18:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53378 invoked by uid 500); 25 Jun 2008 18:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53352 invoked by uid 99); 25 Jun 2008 18:25:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 11:25:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 18:25:07 +0000
Received: by wx-out-0506.google.com with SMTP id h29so1291197wxd.20
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 11:25:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2bm2woGkWHdb1eHnIHrPnDLX5ZFJJakad7CXS0bJi+U=;
        b=m10xBsK9oVHp1Z9KSM+lCwlM9OmIJ/dx9ZayknLmZbTGxcRk/slDA5HknrSOW8k1lA
         jyJ12TxWu5WBELqFwwmKh5e5G22qi0ccFbnhqqzFgWB9xiAe07Mr93HhWeuT87rTjiSM
         LvC0GlZ9KxnHrI1qhr3rk/3NsL1/Vz59t6glI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mpg7ELk45u95NhZNRwbykv9o9oNr1con5rFVVMXoJzwulWq0NerB8ugAV0wYak6Yiv
         5ghjmg/gGh/do2tktq3y4huIXjlU6qkcMzBC5OZ5Jeaef5N3Ng/sYgjiPVauFMuYCuvP
         g5rI2K9VH9yMAHh/Q7xbUMY9jtHiJ4vKSALzg=
Received: by 10.150.12.10 with SMTP id 10mr175548ybl.93.1214418325842;
        Wed, 25 Jun 2008 11:25:25 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Wed, 25 Jun 2008 11:25:25 -0700 (PDT)
Message-ID: <359a92830806251125o1dea19dbt11b2397cd1d20c95@mail.gmail.com>
Date: Wed, 25 Jun 2008 14:25:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching any part of a string
In-Reply-To: <2dab92100806251047j3ae5fa3dncdc466be2caad1b2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_643_16676385.1214418325868"
References: <2dab92100806251047j3ae5fa3dncdc466be2caad1b2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_643_16676385.1214418325868
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Warning: I don't understand ngrams at all, so you should
read this as a plea for those who do to tell me I'm off base <G>.


But I wonder if indexing as n-grams would be a way to
cope with this issue that lots of people have. *assuming*
you are thinking about single terms, then it seems that
"smith" would be tokenized as sm, mi, it, th. Then
a wildcard search for "mi it" would hit (as a phrase
query or a SpanQuery with slop of 0). It seems like there
are several issues to work out here, especially including
multiple terns, matching mixtures of wildcards and
non-wildcards, etc.

But it seems do-able....


Another approach is to use WildcardTernEnum and/or
RegexTermEnum to build up a filter and use the filter as
part of the query. What you loose with this approach is
that the filter (and wildcards) then don't contribute to
scoring. But this isn't a huge price to pay...

Best
Erick

On Wed, Jun 25, 2008 at 1:47 PM, Mark Ferguson <mark.a.ferguson@gmail.com>
wrote:

> Hello,
>
> I am currently keeping an index of all our client's usernames. The search
> functionality is implemented using a PrefixFilter. However, we would like
> to
> expand the functionality to be able to search any part of a user's name,
> rather than requiring that it begin with the query string. So for example,
> the search term 'mit' would return the username 'smith'.
>
> I am hesitant to use a WildcardQuery starting with an asterisk because I've
> read about why this is a bad idea. I am looking for suggestions on the best
> way to implement this.
>
> The idea I've come up with is to index each part of the username; so for
> example, if the username is 'mark', you would index mark, ark, rk, and k.
> Then you could still use the PrefixFilter. I'm not overly concerned about
> how this would enlarge the index because usernames tend to be fairly short.
>
> I am very much open to other suggestions however. Does anyone have any
> opinions or ideas that they can share?
>
> Thanks very much.
>
> Mark
>

------=_Part_643_16676385.1214418325868--

From java-user-return-34625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 19:48:07 2008
Return-Path: <java-user-return-34625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34209 invoked from network); 25 Jun 2008 19:48:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 19:48:07 -0000
Received: (qmail 98565 invoked by uid 500); 25 Jun 2008 19:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98538 invoked by uid 500); 25 Jun 2008 19:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98527 invoked by uid 99); 25 Jun 2008 19:48:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 12:48:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paolo.valleri@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 19:47:12 +0000
Received: by wx-out-0506.google.com with SMTP id h29so1308306wxd.20
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 12:47:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YQsdSiHl5HAdolIgb2qo5sC3wfyTLflpjkJC++Uy3jo=;
        b=oXyL5kTLpcWUYxOQZ2ADEuHPlhqYbVOgZMLxM64Cu2cPWxEtCO3A2Eww7FC6onZ01s
         sxclH+82klWMC4xTYefc/WSSnDbIpRUpL2C2eKUwyTya77lhKMtpFQ3b0NmRMp3s30xg
         zAUm8EUsAGtUtgUPpsfpIQDgiL0abAx0LNOrw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ameGt1wL1HPwKZBP1z4+1Ug6/li65r2IK/mTbzULk4tvu3G++AAzxJxJ+IqGMD1in1
         AqWGPs+3kjJ+VtUbDtvRzl3EdxyZbKankyufCsKBPmGvZ3uQ57tGQDbc5BK6kPUcuYxl
         qJNzvgrLqJqFzpzAtZvd3/4ERuWA12la8ASHo=
Received: by 10.151.156.11 with SMTP id i11mr288971ybo.106.1214423250755;
        Wed, 25 Jun 2008 12:47:30 -0700 (PDT)
Received: by 10.150.156.6 with HTTP; Wed, 25 Jun 2008 12:47:30 -0700 (PDT)
Message-ID: <469326b50806251247g37d6ffeeyf3e3c399046e8fb3@mail.gmail.com>
Date: Wed, 25 Jun 2008 21:47:30 +0200
From: "Paolo Valleri" <paolo.valleri@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Score 0
In-Reply-To: <1214382824.3150.45.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17873_27009237.1214423250741"
References: <469326b50806250029q14cc85cagfdb4785746bcb4a0@mail.gmail.com>
	 <1214382824.3150.45.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17873_27009237.1214423250741
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Thank for answer.
For take docid of all document in the index I need to write a class
that implement indexReader or there is an other method ?

paolo


2008/6/25 Toke Eskildsen <te@statsbiblioteket.dk>:

> On Wed, 2008-06-25 at 09:29 +0200, Paolo Valleri wrote:
> > For several reasons I need also to know the documents that don't match
> the
> > input query. For example with score 0.
>
> Make a list of the docid for all the non-deleted documents in the index.
> Collect the docids from the search-result. Subtract the two lists.
>
> You can get the non-deleted docids by iterating from 0 to maxDoc()-1
> (from IndexReader) and using the IndexReaders isDeleted(docid).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Paolo Valleri

------=_Part_17873_27009237.1214423250741--

From java-user-return-34626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 20:14:11 2008
Return-Path: <java-user-return-34626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44567 invoked from network); 25 Jun 2008 20:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 20:14:11 -0000
Received: (qmail 29514 invoked by uid 500); 25 Jun 2008 20:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29481 invoked by uid 500); 25 Jun 2008 20:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29470 invoked by uid 99); 25 Jun 2008 20:14:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 13:14:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 20:13:17 +0000
Received: by yx-out-2324.google.com with SMTP id 31so596668yxl.5
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 13:13:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:cc:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=fwQMdcwRMQkAuUdOqLp4mtXoPF9u+OTauXsK2NbS8Gw=;
        b=p0Yob9W2smDlEbco5PH0wRlnRhXrZ3WBTjcFPOpi8+ulJ4QQcHaiLb1dZWERrkRmKh
         qMmMPGYl1AAoYNl1x0S2kvuV1WbKvNbuD562eW0/EbyU6p/FN7gXmiMNY2QoYoCavHGP
         5rfXnE1UiCunKFQbhucmIpevoLE+JjEdsLQhM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:cc:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=e8tJ9whkrlKXMtcVKOjjv2rAsPn0SucAV4KyBfMy7KGh/v9trFn2DAgm4ayGXsOdbQ
         /YNpn5k278R2enzJn99XDU9JPOMi7Tc4TLJ9W+pg+gz6ubIROlaPf1h5WxfwLkNDsD0p
         qHh/AJG1IansDXX0no02DFBpAE82ILQjMAvNg=
Received: by 10.150.206.1 with SMTP id d1mr334086ybg.144.1214424816849;
        Wed, 25 Jun 2008 13:13:36 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Wed, 25 Jun 2008 13:13:36 -0700 (PDT)
Message-ID: <c68e39170806251313p28d993d5q5e73bdd619be993c@mail.gmail.com>
Date: Wed, 25 Jun 2008 16:13:36 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Score 0
Cc: te@statsbiblioteket.dk
In-Reply-To: <469326b50806251247g37d6ffeeyf3e3c399046e8fb3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <469326b50806250029q14cc85cagfdb4785746bcb4a0@mail.gmail.com>
	 <1214382824.3150.45.camel@PC990.sb.statsbiblioteket.dk>
	 <469326b50806251247g37d6ffeeyf3e3c399046e8fb3@mail.gmail.com>
X-Google-Sender-Auth: b31d6f21c3471777
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jun 25, 2008 at 3:47 PM, Paolo Valleri <paolo.valleri@gmail.com> wrote:
> For take docid of all document in the index I need to write a class
> that implement indexReader or there is an other method ?

MatchAllDocsQuery does it.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 21:21:45 2008
Return-Path: <java-user-return-34627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70780 invoked from network); 25 Jun 2008 21:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 21:21:45 -0000
Received: (qmail 53843 invoked by uid 500); 25 Jun 2008 21:21:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53591 invoked by uid 500); 25 Jun 2008 21:21:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53580 invoked by uid 99); 25 Jun 2008 21:21:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 14:21:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 21:20:49 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B734C71D41F; Wed, 25 Jun 2008 14:21:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3E35A71D43E
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 14:21:08 -0700 (PDT)
Date: Wed, 25 Jun 2008 14:21:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Wildcard and Literal Searches combined
In-Reply-To: <18089950.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0806251418510.26116@radix.cryptio.net>
References: <18089950.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: My users require wildcard searches. Sometimes their search phrases contain
: spaces. I am having trouble trying to implement a wildcard search on strings
: containing spaces, so if the term includes spaces I force a literal search
: by adding double quotes to the search term.
: So the search string for 'Dublin' becomes search term (Dublin*)
: whereas search string 'Dublin City' becomes ("Dublin City")

: If I use (Dublin City*) I get all instances of Dublin OR City in the results
: which is not what I am looking for. 

my naive understanding of your problem makes me think you should 
completely avoid using the QueryParser.  Index this field as "UNTOKENIZED" 
(or using an Analyzer that does no tokenization, but perhaps lowercases if 
that's what you want) and at query time construct a WildCardQuery directly 
off of the users input (lowercases first if that what you did at index 
time)

...but i could be missunderstanding your goal.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 21:40:22 2008
Return-Path: <java-user-return-34628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81608 invoked from network); 25 Jun 2008 21:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 21:40:22 -0000
Received: (qmail 85488 invoked by uid 500); 25 Jun 2008 21:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85251 invoked by uid 500); 25 Jun 2008 21:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85240 invoked by uid 99); 25 Jun 2008 21:40:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 14:40:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 21:39:27 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1BA7871C420; Wed, 25 Jun 2008 14:39:16 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 182F971C26E
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 14:39:16 -0700 (PDT)
Date: Wed, 25 Jun 2008 14:39:16 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: case insensitivity
In-Reply-To: <48624F44.3090106@propylon.com>
Message-ID: <Pine.LNX.4.62.0806251430040.26116@radix.cryptio.net>
References: <486211CF.80902@propylon.com> <359a92830806250602ge63ca8bw23f5394cee81452@mail.gmail.com>
 <48624F44.3090106@propylon.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I imangined (and maybe I am over simplifying it!) that somewhere in the API
: there must be a string comparison using 'String.equals()' that determines if a
: document contains the term or not - and that use of 'equals()' has permanently
: locked Lucene into case-sensitive searching. The values being compared could
: be first lower-cased (or equalsIgnoreCase could be used) depending on the
: value of a boolean flag in the Term object.

You are over simplifying it a bit ... string comparisons are done in the 
internals, but not to compare a query "terms" to a document "terms" ... 
the index is inverted so there is a single enumeration of all indexed 
terms (regardless of which documents they are in) which maintain pointers 
to the docs that contained.  querying involves seeking along that 
enumeration to find the indexed term that corrisponds to the query term.

the enumeration is in lexigraphical order, so "Dell" is no where near 
"dell" in the enumeration.  even if we added a boolean property to Terms 
indicating that it's case insensitive Term the "seeking" along that 
enumeration would be ... lss optimal ... then it can be now.

: > > Let's say, for example, you want to find "Dell" (with a capital "D"), near
: > > "computers" (with or without capitals, ie. in any case). The problem is
: > > that
: > > you would need to use a SpanQuery to find terms near each other; but if
: > > the
: > > case-sensitivity required is different for each term, then they will be in
: > > different fields, making the use of SpanQuerys inpossible.

i assume by this statement that you are suggesting that you want your
users to be able to say "find me $foo near $bar where $foo must be in the
case i specified but bar can be in any case" is that correct?

in that case Erick's point about indexing both the orriginal case and 
some normalized casing at the same term position is the best way to go -- 
the only downside this has compared to seperate fields is that it can 
introduce some bias in your tf/idf values ... but that can be eliminated 
by prefaxing all of your "normalized" terms with some unicode character 
that your tokenizer would normally strip off.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jun 25 22:01:50 2008
Return-Path: <java-user-return-34629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95009 invoked from network); 25 Jun 2008 22:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jun 2008 22:01:49 -0000
Received: (qmail 20813 invoked by uid 500); 25 Jun 2008 22:01:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20781 invoked by uid 500); 25 Jun 2008 22:01:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20770 invoked by uid 99); 25 Jun 2008 22:01:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 15:01:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 22:00:55 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 03DBA71D3ED; Wed, 25 Jun 2008 15:01:14 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id F3B7671C57A
	for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 15:01:14 -0700 (PDT)
Date: Wed, 25 Jun 2008 15:01:14 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: yet again: getting the minimum and maximum value of a field
In-Reply-To: <4862132A.8050701@gmail.com>
Message-ID: <Pine.LNX.4.62.0806251442420.26116@radix.cryptio.net>
References: <4862132A.8050701@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: There the final solution suggestion from Hoss was to try it with a binary
: search
: on the TermEnum

my suggestion at the time to do a binary search was a bit naive (i was 
not as familiar with Lucene as I am now).

: Because of the tree-like architecture of the index, where the letters are some
: kind of nodes, e.g.
: 
:      a               z
:    ab   ar         ze  zu
:  abi     ark     zer    zul
: 
: I would assume that there is a fast possibility to determine that 'abi' is the
: minimum and 'zul' the maximum for that field - by simply walking through the

the problem is that Terms are not actually organized in a tree structure 
-- the Term list is essentially a large singly linked list with an "index" 
(overused terminology unfortunately) of ever N terms so that it's possible 
to skip very quickly based a lot of nodes in the list.

: like this? At least the RangeQuery implementation I would assume walks throgh
: the tree.

RangeQuery (and RangeFilter) skipTo the lowerbound and then next() their 
way to the upper bound -- but that's because they actually care about 
every term in between.

To find the min you can skipTo(new Term(yourField, ""))and as long as the 
enum is pointed a Term for yourField you've got the min (if it's not, 
yourField isn't in the index)

For the max things get harder ... the simplest appraoch is to next() your 
way along untill you find a term not in the current field ... whatever the 
last Term value was is your max ... but for fields with lots of Terms, it 
*might* be faster to do some iterative attempts with skipTo() to jump 
ahead -- if you ever pass over into a new field, then you know you skiped 
to far, you need to get a new TermEnum, skipTo() the last "good" term and 
then iterate from there (or skipTo() with smaller jumps ... maybe that's 
what i ment by a binary search?)

writing completley generic code to do this would be easy, but probably not 
very efficient since it would have to worry about the fully gambit of 
unicode characters.  if however you know that a field always contains 
integers, or english text with limited punctuation, you can probably make 
much more efficient guesses about what to try skiping to ("z" for example)

Typically, it's much easier to just keep track at indexing time of the 
min/max ... a TokenFilter that inspects Tokens without modifying them can 
do this very easily.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 00:16:06 2008
Return-Path: <java-user-return-34630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67946 invoked from network); 26 Jun 2008 00:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 00:16:06 -0000
Received: (qmail 63945 invoked by uid 500); 26 Jun 2008 00:16:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63904 invoked by uid 500); 26 Jun 2008 00:16:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63890 invoked by uid 99); 26 Jun 2008 00:16:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 17:16:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chy1013m1@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 00:15:11 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1745732fgb.27
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 17:15:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=R1PZjDnPO7Ump2ssf6iB4iHa3Cd4id0PtbVsgqgcMfo=;
        b=HQPmHXLY8Alf+1ZBmrXG7o+bSkkGZpz2eUkRZJw3bDBJsv7fhozsvKCqFLxbqUn4ZG
         wn9JWqKI+GkBKoagg8/QbjbnhqXtnoDVVJZ0DY0pXtmdb4ERQDJBdlU5bVCwEEeombYR
         IRsT9PHikBf2IFGabiM/Fvr2U9Pje/TBUte8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=fCSdia41b3y07hdWsWZ6Dg16T6T2fl82KyA97w3Y/1ORvyo/awarHf8/ArKvhsfigV
         1IlpO0TyAB54axSFWH9v/iRuclXXaIkhppyKyPW/CNHLbKsWRTEoYmtnLEmpxGJpKZoo
         2dtas+K98Y1R2fbvZQbJJMPCWYkfvNFrugK/o=
Received: by 10.86.26.1 with SMTP id 1mr11304809fgz.49.1214439328120;
        Wed, 25 Jun 2008 17:15:28 -0700 (PDT)
Received: by 10.86.87.17 with HTTP; Wed, 25 Jun 2008 17:15:28 -0700 (PDT)
Message-ID: <c9af2e0a0806251715x6a2f627ay436e9ca4211a3cae@mail.gmail.com>
Date: Wed, 25 Jun 2008 20:15:28 -0400
From: "Alex Cheng" <chy1013m1@gmail.com>
To: java-user@lucene.apache.org
Subject: instruct IndexDeletionPolicy to delete old commits after N minutes
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

hi,
what is the correct way to instruct the indexwriter to delete old
commit points after N minutes ?
I tried to write a customized IndexDeletionPolicy that uses the
parameters to schedule future
jobs to do file deletion. However, I am only getting the filenames,
and not absolute file names.

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 00:22:06 2008
Return-Path: <java-user-return-34631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76705 invoked from network); 26 Jun 2008 00:22:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 00:22:06 -0000
Received: (qmail 69988 invoked by uid 500); 26 Jun 2008 00:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69325 invoked by uid 500); 26 Jun 2008 00:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69314 invoked by uid 99); 26 Jun 2008 00:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 17:22:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chy1013m1@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 00:21:10 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1746542fgb.27
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 17:21:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=R1PZjDnPO7Ump2ssf6iB4iHa3Cd4id0PtbVsgqgcMfo=;
        b=akR3XuD91DdRqr6k0Lm+AaElStZKu+AkJdCdCRx20+AJBQ3Y/Xj7jVUKtkOp3focND
         EN8MAdJrENzxUq94dYeGCyvtDOcAG7zp/JGGAwYZcQcML6SLmZtE0Zpvz/bhE5/0kyYr
         yBre/3AV/qNiNnlWZFlLAXlhm/a3JseZXhIXw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=TC8/sM8nXLANwuAY1Em5zle+Wu2Ex1gKQJUahi0oCS1EvHrg+ASOjHUeIt4gH0O71R
         a98u7cBVfdU474jjy7b7MXxcPP0T2IXZe3BkPU9MqUYeNC5ObEYcioNtdK2hLdWVsNgQ
         +dU7dw2hmXJdVAghAsmye5wvjLgS0LzDqu4ZE=
Received: by 10.86.23.17 with SMTP id 17mr11321983fgw.32.1214439688981;
        Wed, 25 Jun 2008 17:21:28 -0700 (PDT)
Received: by 10.86.87.17 with HTTP; Wed, 25 Jun 2008 17:21:28 -0700 (PDT)
Message-ID: <c9af2e0a0806251721p3aaafd88t69577004164f8b9@mail.gmail.com>
Date: Wed, 25 Jun 2008 20:21:28 -0400
From: "Alex Cheng" <chy1013m1@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexDeletionPolicy to delete after N minutes
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

hi,
what is the correct way to instruct the indexwriter to delete old
commit points after N minutes ?
I tried to write a customized IndexDeletionPolicy that uses the
parameters to schedule future
jobs to do file deletion. However, I am only getting the filenames,
and not absolute file names.

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 00:40:21 2008
Return-Path: <java-user-return-34632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87207 invoked from network); 26 Jun 2008 00:40:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 00:40:21 -0000
Received: (qmail 83162 invoked by uid 500); 26 Jun 2008 00:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83126 invoked by uid 500); 26 Jun 2008 00:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83115 invoked by uid 99); 26 Jun 2008 00:40:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 17:40:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chy1013m1@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 00:39:26 +0000
Received: by py-out-1112.google.com with SMTP id z74so1921741pyg.9
        for <java-user@lucene.apache.org>; Wed, 25 Jun 2008 17:39:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=yJGWlcpIoyPR9tvLeUZc2J++YfgiJMu5qcSohQ7Zi6g=;
        b=QaLxHaQrAHp+w3XyWv//vUvyxo7YjU+azefUFSqOd13EyCnEiSq2aCUdNLubgjJNA1
         xw6UWQemOia9u+yi1MJz27yNWa7kH4h5AaT+OVe/qaRpeMTsfv9FCQgoZscu9Yyu1iyw
         FsH1/b3voqNCPgGAu+tNXdLLwTAR+uVBAq6MY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=ZNtbbr1xQisNNl9WnEd9qHN/dy6LPOUk573AsV++O+MzV1GVky+kHmqEx4wFwvqKUA
         CjfAGZiZWRPnsky9/BhN+yPAeZVye5jspYYRlEA8PL6r5Sk/LVT3OQtO1Lu2Ko6roxeJ
         EZf4WJQLFMJOpXaXYZgP5BKCF+f5khwteqgkk=
Received: by 10.141.171.6 with SMTP id y6mr16957520rvo.85.1214440784934;
        Wed, 25 Jun 2008 17:39:44 -0700 (PDT)
Received: by 10.141.105.12 with HTTP; Wed, 25 Jun 2008 17:39:44 -0700 (PDT)
Message-ID: <c9af2e0a0806251739x62c08fc7l8e9270ac6c2a355c@mail.gmail.com>
Date: Wed, 25 Jun 2008 20:39:44 -0400
From: "Alex Cheng" <chy1013m1@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexDeletionPolicy to delete commits after N minutes
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

hi,
what is the correct way to instruct the indexwriter (or other
classes?) to delete old
commit points after N minutes ?
I tried to write a customized IndexDeletionPolicy that uses the
parameters to schedule future
jobs to perform file deletion. However, I am only getting the
filenames through the parameters
and not absolute file names.

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 05:10:21 2008
Return-Path: <java-user-return-34633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4348 invoked from network); 26 Jun 2008 05:10:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 05:10:21 -0000
Received: (qmail 72916 invoked by uid 500); 26 Jun 2008 05:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72885 invoked by uid 500); 26 Jun 2008 05:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72874 invoked by uid 99); 26 Jun 2008 05:10:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 22:10:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 05:09:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KBjjs-0001I3-TD
	for java-user@lucene.apache.org; Wed, 25 Jun 2008 22:09:44 -0700
Message-ID: <18126682.post@talk.nabble.com>
Date: Wed, 25 Jun 2008 22:09:44 -0700 (PDT)
From: java_is_everything <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: How to retrieve number of documents based on a query ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.

Is there a way to obtain the number of documents in the Lucene index
(2.0.0), having a particular term indexed, much like what we do in a
database ?

Looking forward to a reply.

Ajay Garg
-- 
View this message in context: http://www.nabble.com/How-to-retrieve-number-of-documents-based-on-a-query---tp18126682p18126682.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 05:24:23 2008
Return-Path: <java-user-return-34634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10639 invoked from network); 26 Jun 2008 05:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 05:24:23 -0000
Received: (qmail 93794 invoked by uid 500); 26 Jun 2008 05:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93771 invoked by uid 500); 26 Jun 2008 05:24:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93760 invoked by uid 99); 26 Jun 2008 05:24:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Jun 2008 22:24:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 05:23:29 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id CA0BC630068
	for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 15:25:24 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: How to retrieve number of documents based on a query ?
Date: Thu, 26 Jun 2008 15:24:20 +1000
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <18126682.post@talk.nabble.com>
In-Reply-To: <18126682.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200806261524.20690.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 26 June 2008 15:09:44 java_is_everything wrote:
> Hi all.
>
> Is there a way to obtain the number of documents in the Lucene index
> (2.0.0), having a particular term indexed, much like what we do in a
> database ?

I suspect the normal way is a HitCollector which does nothing but increment a 
counter for each hit.

BTW I hope you're not really running 2.0.0, as that is ancient.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 07:24:46 2008
Return-Path: <java-user-return-34635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60390 invoked from network); 26 Jun 2008 07:24:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 07:24:46 -0000
Received: (qmail 33533 invoked by uid 500); 26 Jun 2008 07:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33493 invoked by uid 500); 26 Jun 2008 07:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33482 invoked by uid 99); 26 Jun 2008 07:24:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 00:24:40 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 07:23:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KBlpw-0005Uh-Nd
	for java-user@lucene.apache.org; Thu, 26 Jun 2008 00:24:08 -0700
Message-ID: <18127970.post@talk.nabble.com>
Date: Thu, 26 Jun 2008 00:24:08 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: How Lucene Search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi, 

I am fairly new to Lucene and is currently going over its source code. I had
read through the code for a few times, mapping it and all but I seems to be
facing a problem. I could go all the way to the calculation of score for
each result obtain, but strangely I did not managed to locate the part where
Lucene open the index and check for the matching term.

What I mean is that, I want to check on how Lucene actually open the index
and perform the search. I went through all the methods in IndexReader,
IndexSearcher and some other related class but still fail to locate the
method responsible.

Could anyone help me with this? Thanks 
-- 
View this message in context: http://www.nabble.com/How-Lucene-Search-tp18127970p18127970.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 07:50:33 2008
Return-Path: <java-user-return-34636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67774 invoked from network); 26 Jun 2008 07:50:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 07:50:33 -0000
Received: (qmail 72028 invoked by uid 500); 26 Jun 2008 07:50:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72001 invoked by uid 500); 26 Jun 2008 07:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71990 invoked by uid 99); 26 Jun 2008 07:50:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 00:50:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.247.81.221] (HELO maximus.getnetvps.net) (63.247.81.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 07:49:38 +0000
Received: (qmail 24294 invoked by uid 48); 26 Jun 2008 09:48:56 +0200
Received: from isa2.syzefxis-hosting.gr (isa2.syzefxis-hosting.gr
	[84.205.231.39]) by webmail.tera.gr (Horde MIME library) with HTTP; Thu, 26
	Jun 2008 09:48:56 +0200
Message-ID: <20080626094856.qk6v9f1nok08kksc@webmail.tera.gr>
Date: Thu, 26 Jun 2008 09:48:56 +0200
From: jim@tera.gr
To: mailto: java-user@lucene.apache.org;
Subject: Highlight an Greek
MIME-Version: 1.0
Content-Type: text/plain;
	charset=UTF-8;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

i am having the following code to highlight a text

public String highlight(String text, String query ) throws IOException {
TermQuery query = new TermQuery(new Term("f", query));
     QueryScorer scorer = new QueryScorer(query);
     SimpleHTMLFormatter formatter =
         new SimpleHTMLFormatter("<span class=\"highlight\">",
             "</span>");
     Highlighter highlighter = new Highlighter(formatter, scorer);
     Fragmenter fragmenter = new SimpleFragmenter(50);
     highlighter.setTextFragmenter(fragmenter);

     TokenStream tokenStream = new GreekAnalyzer()
         .tokenStream("f", new StringReader(text));

     String result = highlighter.getBestFragments(tokenStream, text, 5, "...");

   return result;
}

if i use a text with english characters works fine if i try a text  
with Greek Character i am getting en empty string as result.
Why?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 08:20:26 2008
Return-Path: <java-user-return-34637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74718 invoked from network); 26 Jun 2008 08:20:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 08:20:26 -0000
Received: (qmail 4814 invoked by uid 500); 26 Jun 2008 08:20:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4770 invoked by uid 500); 26 Jun 2008 08:20:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4759 invoked by uid 99); 26 Jun 2008 08:20:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 01:20:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 08:19:30 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1KBmaL-0004Sw-1K
	for java-user@lucene.apache.org; Thu, 26 Jun 2008 09:12:06 +0100
Message-ID: <4863505D.60605@propylon.com>
Date: Thu, 26 Jun 2008 09:16:29 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <486211CF.80902@propylon.com> <359a92830806250602ge63ca8bw23f5394cee81452@mail.gmail.com> <48624F44.3090106@propylon.com> <Pine.LNX.4.62.0806251430040.26116@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0806251430040.26116@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: case insensitivity
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

Chris Hostetter wrote:
> the enumeration is in lexigraphical order, so "Dell" is no where near 
> "dell" in the enumeration.  even if we added a boolean property to Terms 
> indicating that it's case insensitive Term the "seeking" along that 
> enumeration would be ... lss optimal ... then it can be now.
>   
Ah, now I understand!
> : > > Let's say, for example, you want to find "Dell" (with a capital "D"), near
> : > > "computers" (with or without capitals, ie. in any case). The problem is
> : > > that
> : > > you would need to use a SpanQuery to find terms near each other; but if
> : > > the
> : > > case-sensitivity required is different for each term, then they will be in
> : > > different fields, making the use of SpanQuerys inpossible.
>
> i assume by this statement that you are suggesting that you want your
> users to be able to say "find me $foo near $bar where $foo must be in the
> case i specified but bar can be in any case" is that correct?
>   
Yes, that's exactly what I meant.
> in that case Erick's point about indexing both the orriginal case and 
> some normalized casing at the same term position is the best way to go -- 
> the only downside this has compared to seperate fields is that it can 
> introduce some bias in your tf/idf values ... but that can be eliminated 
> by prefaxing all of your "normalized" terms with some unicode character 
> that your tokenizer would normally strip off.
>
>   
 From Erick's reply:

"I suppose something like that might work, but I still think that presenting
a user with matches that sometimes work case sensitive and sometimes
doesn't would be...er..fraught."

The user would, of course, choose which terms are case-sensitive when 
they query, using a modifier in the query language. (I would have to 
implement that). It's something my users have asked to be able to do -  
in their view, fields are something that should be used for different 
content, and case-sensitivity should be an option on *any* field. But 
what you have suggested should allow it to work that way, by adding both 
versions of the term at the same position.

Thanks guys!

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 08:32:20 2008
Return-Path: <java-user-return-34638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78882 invoked from network); 26 Jun 2008 08:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 08:32:19 -0000
Received: (qmail 36390 invoked by uid 500); 26 Jun 2008 08:32:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36365 invoked by uid 500); 26 Jun 2008 08:32:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36352 invoked by uid 99); 26 Jun 2008 08:32:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 01:32:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.247.81.221] (HELO maximus.getnetvps.net) (63.247.81.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 08:31:13 +0000
Received: (qmail 14141 invoked by uid 48); 26 Jun 2008 10:31:32 +0200
Received: from isa2.syzefxis-hosting.gr (isa2.syzefxis-hosting.gr
	[84.205.231.39]) by webmail.tera.gr (Horde MIME library) with HTTP; Thu, 26
	Jun 2008 10:31:32 +0200
Message-ID: <20080626103132.nnklt3paogc0cc4s@webmail.tera.gr>
Date: Thu, 26 Jun 2008 10:31:32 +0200
From: jim@tera.gr
To: java-user@lucene.apache.org
Subject: Highlight and greek characters
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

i am having the following code to highlight a text

public String highlight(String text, String query ) throws IOException {
TermQuery query = new TermQuery(new Term("f", query));
     QueryScorer scorer = new QueryScorer(query);
     SimpleHTMLFormatter formatter =
         new SimpleHTMLFormatter("<span class=\"highlight\">",
             "</span>");
     Highlighter highlighter = new Highlighter(formatter, scorer);
     Fragmenter fragmenter = new SimpleFragmenter(50);
     highlighter.setTextFragmenter(fragmenter);

     TokenStream tokenStream = new GreekAnalyzer()
         .tokenStream("f", new StringReader(text));

     String result = highlighter.getBestFragments(tokenStream, text, 5, "...");

   return result;
}

if i use a text with english characters works fine if i try a text  
with Greek Character i
am getting en empty string as result.
Why?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 09:35:35 2008
Return-Path: <java-user-return-34639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98259 invoked from network); 26 Jun 2008 09:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 09:35:34 -0000
Received: (qmail 97084 invoked by uid 500); 26 Jun 2008 09:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96962 invoked by uid 500); 26 Jun 2008 09:35:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96950 invoked by uid 99); 26 Jun 2008 09:35:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 02:35:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 09:34:38 +0000
Received: by an-out-0708.google.com with SMTP id c37so870809anc.49
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 02:34:55 -0700 (PDT)
Received: by 10.100.95.19 with SMTP id s19mr20021244anb.65.1214472895822;
        Thu, 26 Jun 2008 02:34:55 -0700 (PDT)
Received: by 10.100.212.4 with HTTP; Thu, 26 Jun 2008 02:34:55 -0700 (PDT)
Message-ID: <9ac0c6aa0806260234p1484cc7ev54a7e5a95a8ae5ac@mail.gmail.com>
Date: Thu, 26 Jun 2008 05:34:55 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: IndexDeletionPolicy to delete commits after N minutes
In-Reply-To: <c9af2e0a0806251739x62c08fc7l8e9270ac6c2a355c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c9af2e0a0806251739x62c08fc7l8e9270ac6c2a355c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The unit test for DeletionPolicy has an example called
"ExpirationTimeDeletionPolicy".  You can see its source here:

  http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_3_2/src/test/org/apache/lucene/index/TestDeletionPolicy.java?revision=653677&view=markup

Note that the DeletionPolicy is given IndexCommit instances, whose
"delete" method you call when you no longer need that commit point.
You don't delete the files yourself (IndexWriter works out which files
to delete based on which commits you've deleted).

Mike

Alex Cheng <chy1013m1@gmail.com> wrote:
> hi,
> what is the correct way to instruct the indexwriter (or other
> classes?) to delete old
> commit points after N minutes ?
> I tried to write a customized IndexDeletionPolicy that uses the
> parameters to schedule future
> jobs to perform file deletion. However, I am only getting the
> filenames through the parameters
> and not absolute file names.
>
> thanks.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 09:37:45 2008
Return-Path: <java-user-return-34640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99043 invoked from network); 26 Jun 2008 09:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 09:37:45 -0000
Received: (qmail 3688 invoked by uid 500); 26 Jun 2008 09:37:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3408 invoked by uid 500); 26 Jun 2008 09:37:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3397 invoked by uid 99); 26 Jun 2008 09:37:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 02:37:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 09:36:50 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K320036RDDW0B@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Thu, 26 Jun 2008 11:37:08 +0200 (MEST)
Date: Thu, 26 Jun 2008 11:37:07 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Score 0
In-reply-to: <469326b50806251247g37d6ffeeyf3e3c399046e8fb3@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1214473027.24069.7.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.2 (2.22.2-2.fc9)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <469326b50806250029q14cc85cagfdb4785746bcb4a0@mail.gmail.com>
 <1214382824.3150.45.camel@PC990.sb.statsbiblioteket.dk>
 <469326b50806251247g37d6ffeeyf3e3c399046e8fb3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2008-06-25 at 21:47 +0200, Paolo Valleri wrote: 
> For take docid of all document in the index I need to write a class
> that implement indexReader or there is an other method ?

Something along the following should work and be quite fast. However, it
might be overly complex.

  // Do this every time the index is updated
  IndexReader reader = IndexReader.open(indexLocation);
  BitSet deleted = new BitSet(reader.maxDoc());
  for (int i = 0 ; i < reader.maxDoc() ; i++) {
      if (reader.isDeleted(i)) {
          deleted.set(i);
      }
  }
  QueryParser parser =
          new QueryParser("freetext", new StandardAnalyzer());

  // Do this for every search
  Query query = parser.parse("java");
  QueryWrapperFilter filter = new QueryWrapperFilter(query);
  BitSet workset = filter.bits(reader);
  workset.or(deleted);
  // workset now marks all docids that are either matching or deleted
  System.out.print("Non-matching documents: ");
  for (int i = 0 ; i < reader.maxDoc() ; i++) {
       if (!workset.get(i)) {
          System.out.print(i + " ");
      }
  }



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 12:33:38 2008
Return-Path: <java-user-return-34641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54276 invoked from network); 26 Jun 2008 12:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 12:33:38 -0000
Received: (qmail 41206 invoked by uid 500); 26 Jun 2008 12:33:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41168 invoked by uid 500); 26 Jun 2008 12:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41157 invoked by uid 99); 26 Jun 2008 12:33:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 05:33:33 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 12:32:41 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id C25ED7FA9
	for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 05:32:59 -0700 (PDT)
Message-Id: <0969DB9C-22A4-44D2-9EF6-2BA155A94538@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <18127970.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: How Lucene Search
Date: Thu, 26 Jun 2008 08:32:59 -0400
References: <18127970.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

The index is opened via the IndexReader and then it is a variety of  
places that factor into scoring, such as the Query, Weight and Scorer  
classes.  Probably the easiest place to start is the TermQuery and  
TermScorer.

You might also have a read through http://lucene.apache.org/java/2_3_2/scoring.html

You might also try stepping through the path of a simple TermQuery via  
a debugger as it enters the searcher and then expand to try  
BooleanQuery and some of the other queries.

Cheers,
Grant

On Jun 26, 2008, at 3:24 AM, blazingwolf7 wrote:

>
> hi,
>
> I am fairly new to Lucene and is currently going over its source  
> code. I had
> read through the code for a few times, mapping it and all but I  
> seems to be
> facing a problem. I could go all the way to the calculation of score  
> for
> each result obtain, but strangely I did not managed to locate the  
> part where
> Lucene open the index and check for the matching term.
>
> What I mean is that, I want to check on how Lucene actually open the  
> index
> and perform the search. I went through all the methods in IndexReader,
> IndexSearcher and some other related class but still fail to locate  
> the
> method responsible.
>
> Could anyone help me with this? Thanks
> -- 
> View this message in context: http://www.nabble.com/How-Lucene-Search-tp18127970p18127970.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 12:39:45 2008
Return-Path: <java-user-return-34642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56920 invoked from network); 26 Jun 2008 12:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 12:39:45 -0000
Received: (qmail 67132 invoked by uid 500); 26 Jun 2008 12:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67089 invoked by uid 500); 26 Jun 2008 12:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67063 invoked by uid 99); 26 Jun 2008 12:39:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 05:39:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 12:38:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 069485B4DE
	for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 05:38:57 -0700 (PDT)
Message-Id: <64667614-E672-41D7-BC0B-0331B3319317@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20080626094856.qk6v9f1nok08kksc@webmail.tera.gr>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Highlight an Greek
Date: Thu, 26 Jun 2008 08:38:57 -0400
References: <20080626094856.qk6v9f1nok08kksc@webmail.tera.gr>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

Because there are no matches?  Have you checked your index, etc?  Do  
you get matches for that query normally in Greek against your index  
(nevermind highlighting)?  Are your analyzers the same?  Are your  
English Fields stored and the Greek ones not?  Does field "f" contain  
Greek?  It could be a whole host of reasons and that snippet of code  
is not enough to go from.  Check your index with Luke, etc.  See the  
FAQ for more help, too.

Also, please don't repost the same exact question 45 minutes later b/c  
you didn't get an immediate response at 3:48 AM East Coast US time.   
It just clutters email and makes it less likely that you will get a  
response.

-Grant

On Jun 26, 2008, at 3:48 AM, jim@tera.gr wrote:

> Hello
>
> i am having the following code to highlight a text
>
> public String highlight(String text, String query ) throws  
> IOException {
> TermQuery query = new TermQuery(new Term("f", query));
>    QueryScorer scorer = new QueryScorer(query);
>    SimpleHTMLFormatter formatter =
>        new SimpleHTMLFormatter("<span class=\"highlight\">",
>            "</span>");
>    Highlighter highlighter = new Highlighter(formatter, scorer);
>    Fragmenter fragmenter = new SimpleFragmenter(50);
>    highlighter.setTextFragmenter(fragmenter);
>
>    TokenStream tokenStream = new GreekAnalyzer()
>        .tokenStream("f", new StringReader(text));
>
>    String result = highlighter.getBestFragments(tokenStream, text,  
> 5, "...");
>
>  return result;
> }
>
> if i use a text with english characters works fine if i try a text  
> with Greek Character i am getting en empty string as result.
> Why?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 13:09:38 2008
Return-Path: <java-user-return-34643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68607 invoked from network); 26 Jun 2008 13:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 13:09:37 -0000
Received: (qmail 44368 invoked by uid 500); 26 Jun 2008 13:09:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44335 invoked by uid 500); 26 Jun 2008 13:09:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44324 invoked by uid 99); 26 Jun 2008 13:09:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 06:09:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 13:08:43 +0000
Received: by yx-out-2324.google.com with SMTP id 31so6973yxl.5
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 06:09:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=jn+ah9vrlp2HZ8Qhb1tHXOW3dw3swCtNrlSsByTSh+I=;
        b=OONhmG4t+SYLXycXiBoLhEKMHp+lZm8s78tjORWTQHKzqp+5TT8AD34kRhjL9U8TjC
         OauTSIGMbEQmuLcdePyxNGYuFandS1HrN361q6oxxE0COgGeKBRNwLjqk0Cz8C5yU4aW
         5EZAIxFMpx/n4fcHrIDFOqorrtEHpR1YXAnRI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=c0ZvsiwJXpraE31Wxa2yKMtp6+THgrqyxIPDO/pytkqFAWtkQelBBNvgdofGS3J0/n
         WMzxI+8Wmr5+X+v2zJZfZaFPNpBNAQ2BM1pK5nPHdWcn5kpjVL/hSak+6cDQTvWnCzuV
         2QBjmEc0KK408IU3HvZ2qGAHwVt7wMPKOntks=
Received: by 10.115.18.3 with SMTP id v3mr7112753wai.180.1214485742235;
        Thu, 26 Jun 2008 06:09:02 -0700 (PDT)
Received: by 10.114.182.2 with HTTP; Thu, 26 Jun 2008 06:09:02 -0700 (PDT)
Message-ID: <85d3c3b60806260609v62adf1b0g208a3abfcadd5aa@mail.gmail.com>
Date: Thu, 26 Jun 2008 09:09:02 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Class for serializing TokenStream to IndexOutput
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4064_9709672.1214485742234"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4064_9709672.1214485742234
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a class to do this?

------=_Part_4064_9709672.1214485742234--

From java-user-return-34644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 14:19:33 2008
Return-Path: <java-user-return-34644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95765 invoked from network); 26 Jun 2008 14:19:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 14:19:33 -0000
Received: (qmail 12288 invoked by uid 500); 26 Jun 2008 14:19:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12264 invoked by uid 500); 26 Jun 2008 14:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12253 invoked by uid 99); 26 Jun 2008 14:19:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 07:19:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 14:18:38 +0000
Received: by rn-out-0910.google.com with SMTP id j71so63858rne.4
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 07:18:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SI8A2IV8E091crYlgKGr8fmpWdRLO5t7+3xfBkE3OTE=;
        b=rU9DiTxJ4HfiK4tKRCZcMyGa/Gb8oJyrGsEjQc8aJTLEWugEzmoxWJvp3t9L9Ychav
         Nr/eWYYMA5+uiqL7fTV6aLqkZXzEzKy9ViA+qLWuvHB/Y8jiOyXo4ByPZCf/wCsNF6EC
         W53l8KI7ThYx8UoEizK50qqpEesG+/0O/EPMk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=r7Jaax7LDh/h0PyPJfImU1oNJs5p3Q3RutcVFOjMFyhn1W6aqeRwN3g7JnulcAlmsW
         9XGG3Rov1crsWcBaKDAakRocMp+ByQ3rbnr/PfoDKql56TSwTA2o5CKtD4lfdkmt60K/
         QYGg0eAERlkDXwxFMobpAO73xkr4oJDm+2ijY=
Received: by 10.151.155.9 with SMTP id h9mr182255ybo.130.1214489936714;
        Thu, 26 Jun 2008 07:18:56 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Thu, 26 Jun 2008 07:18:56 -0700 (PDT)
Message-ID: <359a92830806260718y5f3ca4cat150189fc40759601@mail.gmail.com>
Date: Thu, 26 Jun 2008 10:18:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexDeletionPolicy to delete commits after N minutes
In-Reply-To: <9ac0c6aa0806260234p1484cc7ev54a7e5a95a8ae5ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1558_5612250.1214489936694"
References: <c9af2e0a0806251739x62c08fc7l8e9270ac6c2a355c@mail.gmail.com>
	 <9ac0c6aa0806260234p1484cc7ev54a7e5a95a8ae5ac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1558_5612250.1214489936694
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please don't post the same message multiple times to the user list
within a few minutes of each other. It's pretty rude.

Best
Erick

On Thu, Jun 26, 2008 at 5:34 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> The unit test for DeletionPolicy has an example called
> "ExpirationTimeDeletionPolicy".  You can see its source here:
>
>
> http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_3_2/src/test/org/apache/lucene/index/TestDeletionPolicy.java?revision=653677&view=markup
>
> Note that the DeletionPolicy is given IndexCommit instances, whose
> "delete" method you call when you no longer need that commit point.
> You don't delete the files yourself (IndexWriter works out which files
> to delete based on which commits you've deleted).
>
> Mike
>
> Alex Cheng <chy1013m1@gmail.com> wrote:
> > hi,
> > what is the correct way to instruct the indexwriter (or other
> > classes?) to delete old
> > commit points after N minutes ?
> > I tried to write a customized IndexDeletionPolicy that uses the
> > parameters to schedule future
> > jobs to perform file deletion. However, I am only getting the
> > filenames through the parameters
> > and not absolute file names.
> >
> > thanks.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1558_5612250.1214489936694--

From java-user-return-34645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 14:28:40 2008
Return-Path: <java-user-return-34645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98120 invoked from network); 26 Jun 2008 14:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 14:28:40 -0000
Received: (qmail 31837 invoked by uid 500); 26 Jun 2008 14:28:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31804 invoked by uid 500); 26 Jun 2008 14:28:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31793 invoked by uid 99); 26 Jun 2008 14:28:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 07:28:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 14:27:45 +0000
Received: by wf-out-1314.google.com with SMTP id 28so42957wfc.20
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 07:28:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=O4JHbUKNwXuPt+LEGwwgIIUotahlwkPq7XM6rXuDnJU=;
        b=YhraLi6mT1POwwqxB5vBVHs6FQPHtAqF8OJBkILOLCo8bm2pgVhZ4hgxPXDnLSxbU5
         G/R21Tc5HCA7bH0g6gWFIKyph30CDsLAIx7+PInQ2q8vwa5LYG8NHdYihr8q26Ah3G2e
         YV3cyXZP/Q+8XygvBDN9+X/hiyZBbcL2GeV2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WEYXfMBFTtDAP5TWqaWni8y0EKapGQ6cEmd6aY4BpKOHqxybU4HBOELaQ30u6bdGAf
         9BKnTqQhxfOti/vRUUK0y6rNoU5mZ5OZKvOvGo9gQuPCuCyqup7azcXNvUqwXYvn7RIf
         NubOhLATRFC5wuld3oPSWsQyFYUjvZknuOjik=
Received: by 10.142.187.2 with SMTP id k2mr7568848wff.8.1214490484444;
        Thu, 26 Jun 2008 07:28:04 -0700 (PDT)
Received: by 10.142.155.20 with HTTP; Thu, 26 Jun 2008 07:28:03 -0700 (PDT)
Message-ID: <74f928500806260728m36d7fd56yae56801903fa2938@mail.gmail.com>
Date: Thu, 26 Jun 2008 17:28:03 +0300
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Preventing index corruption
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2886_33264726.1214490484450"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2886_33264726.1214490484450
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I'm looking for the correct way to create an index given the following
restrictions:

1. The documents are received in batches of variable sizes (not more then
100 docs in a batch).
2. The batch insertion must be transactional - either the whole batch is
added to the index (exists physically on the disk), or the whole batch is
canceled/aborted and the index remains as before.
3. The index must remain valid at all times and shouldn't be corrupted even
if a power interruption occurs - *most important*
4. Index speed is less important than search speed.

How should I use a writer with all these restrictions? Can I do it without
having to close the writer after each batch (maybe flush is enough)?

Should I change the IndexWriter parameters such as mergeFactor,
RAMBufferSize, etc. ?
I want to make sure that partial batches are not written to the disk (if the
computer crashes in the middle of the batch, I want to be able to work with
the index as it was before the crash).

If I'm working with a single writer, is it guaranteed that no matter what
happens the index can be opened and used (I don't mind loosing docs, just
that the index won't be ruined).

Thanks and sorry about the long list of questions,
Eran.

------=_Part_2886_33264726.1214490484450--

From java-user-return-34646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 14:42:46 2008
Return-Path: <java-user-return-34646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4410 invoked from network); 26 Jun 2008 14:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 14:42:46 -0000
Received: (qmail 64063 invoked by uid 500); 26 Jun 2008 14:42:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64033 invoked by uid 500); 26 Jun 2008 14:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64022 invoked by uid 99); 26 Jun 2008 14:42:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 07:42:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.142.189 as permitted sender)
Received: from [209.85.142.189] (HELO ti-out-0910.google.com) (209.85.142.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 14:41:51 +0000
Received: by ti-out-0910.google.com with SMTP id b8so52524tic.11
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 07:42:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Y5P+pWsfzuHQmfZLUQtnV47sd806tBMW/ALDce810Ng=;
        b=D/zRv150DqzEjJzaG4qMtvOTrtf88LyPhlrWVzHAurv50pKq7gLycJbGE4WvdhIztz
         7s2cjeN/81SM8cH+Y3BjmsNk/v7+/dGmS/otA/SQHKPMu2ucSESrb+MIAEj7EymxNdhJ
         zT31E66I+hQPmmh5C42P9Es123qPQwLTxyTtc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rWb9LT17OejRQl6b3cGU94zz4nHejjIm1de+zePYitfY6Ka2k43JMkMQivVHC0/VrO
         49OunE20Q7puFZsxcZAGhS2Jg4kBa65yogexek2uO2gBawQeLvkuzXP7v5aM/Ao411KU
         sYMj2efu75vh6AlbvzjdMSiBkqE8g9rnZLwE0=
Received: by 10.151.155.5 with SMTP id h5mr200034ybo.178.1214491328376;
        Thu, 26 Jun 2008 07:42:08 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Thu, 26 Jun 2008 07:42:08 -0700 (PDT)
Message-ID: <359a92830806260742k1ab39f7bu55177be4f5922999@mail.gmail.com>
Date: Thu, 26 Jun 2008 10:42:08 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing index corruption
In-Reply-To: <74f928500806260728m36d7fd56yae56801903fa2938@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1678_1732314.1214491328359"
References: <74f928500806260728m36d7fd56yae56801903fa2938@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1678_1732314.1214491328359
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How big is your index? The simpleminded way would be to copy things around
as your batches come in and only switch to the *real* one after the
additions
were verified.

You could also just maintain two indexes but only update one at a time. In
the
99.99% case where things went well, it would just be a matter of continuing
on.
Whenever "something bad happened", you could copy the good index over the
bad one and go at it again.

But to ask that no matter what, the index is OK is asking a lot.... There
are fires and floods and earthquakes to consider <G>

Best
Erick

On Thu, Jun 26, 2008 at 10:28 AM, Eran Sevi <eransevi@gmail.com> wrote:

> Hi,
>
> I'm looking for the correct way to create an index given the following
> restrictions:
>
> 1. The documents are received in batches of variable sizes (not more then
> 100 docs in a batch).
> 2. The batch insertion must be transactional - either the whole batch is
> added to the index (exists physically on the disk), or the whole batch is
> canceled/aborted and the index remains as before.
> 3. The index must remain valid at all times and shouldn't be corrupted even
> if a power interruption occurs - *most important*
> 4. Index speed is less important than search speed.
>
> How should I use a writer with all these restrictions? Can I do it without
> having to close the writer after each batch (maybe flush is enough)?
>
> Should I change the IndexWriter parameters such as mergeFactor,
> RAMBufferSize, etc. ?
> I want to make sure that partial batches are not written to the disk (if
> the
> computer crashes in the middle of the batch, I want to be able to work with
> the index as it was before the crash).
>
> If I'm working with a single writer, is it guaranteed that no matter what
> happens the index can be opened and used (I don't mind loosing docs, just
> that the index won't be ruined).
>
> Thanks and sorry about the long list of questions,
> Eran.
>

------=_Part_1678_1732314.1214491328359--

From java-user-return-34647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 15:12:08 2008
Return-Path: <java-user-return-34647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57753 invoked from network); 26 Jun 2008 15:12:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 15:12:08 -0000
Received: (qmail 32123 invoked by uid 500); 26 Jun 2008 15:12:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32090 invoked by uid 500); 26 Jun 2008 15:12:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32078 invoked by uid 99); 26 Jun 2008 15:12:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 08:12:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 15:11:13 +0000
Received: by rn-out-0910.google.com with SMTP id j71so90490rne.4
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 08:11:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cjXwbs6tkHPNdK4aPQg5j0/6Cc88utJw/8L33rPGwp4=;
        b=GbWpekclTYbnNdPsmVOeVZfQDXP+3q2ENlQMS88+vELwwLVqKh7qfhrVkmHMflc0gr
         Mx6A0VTfLV5GFSoISd7I2YiY3J2VDJaBUQdOimwA0RjDvj7aSNBzt1afoffC6lenR4gn
         OIoeDWr3JsaxirUL0SE7MfEx/9SalE9SOFllk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uPA4WhbK8Cs4ywSk0D/k1Wpb8+aze9/ywfQJ4QNP7P5JcA6tOHgsguupdziHUngwvX
         SPNst6gT5cY/UvVggDocDlO61yt0RQMbtdfm8Pmhxn7NqdXu6jr3ayffkktp+JXPL/uK
         rFob1+Pg2Bm2dUoUwzSaa3SmTYG1aNiwc3jY4=
Received: by 10.142.11.2 with SMTP id 2mr12306wfk.29.1214493091468;
        Thu, 26 Jun 2008 08:11:31 -0700 (PDT)
Received: by 10.142.155.20 with HTTP; Thu, 26 Jun 2008 08:11:31 -0700 (PDT)
Message-ID: <74f928500806260811q157afe1elc950d5e3492b208c@mail.gmail.com>
Date: Thu, 26 Jun 2008 18:11:31 +0300
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing index corruption
In-Reply-To: <359a92830806260742k1ab39f7bu55177be4f5922999@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3201_21017952.1214493091477"
References: <74f928500806260728m36d7fd56yae56801903fa2938@mail.gmail.com>
	 <359a92830806260742k1ab39f7bu55177be4f5922999@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3201_21017952.1214493091477
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick.
You might be joking, but one of our clients indeed had all his servers
destroyed in a flood. Of course in this rare case, a solution would be to
keep the backup on another site.

However I'm still confused about normal scenarios:

Let's say that in the middle of the batch I got an exception and wan't to
rollback. Can I do this ?
I want to make sure that after a batch finishes (and only then), it is
written to disk (and not find out after a while during a commit that
something went wrong).Do I have to close the writer or Flush is enough? I
though about raising mergeFactor and other parameters to high values (or
disabling them) so an automatic merge/commit will not happen, and then I can
manually decide when to commit the changes - the size of the batches is not
constant so I can't determine in advance.
I don't mind hurting the index performance a bit by doing this manually, but
I can't efford to let the client think that the information is secured in
the index and than to find out that it's not.

My index size contains a few million docs and it's size can reach about 30G
(we're saving a lot of fields and information for each document). Having a
backup index is an option I considered but I wanted to avoid the overhead of
keeping them synchronized (they might not be on the same server which
exposes a lot of new problems like network issues).

Thanks.

On Thu, Jun 26, 2008 at 5:42 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> How big is your index? The simpleminded way would be to copy things around
> as your batches come in and only switch to the *real* one after the
> additions
> were verified.
>
> You could also just maintain two indexes but only update one at a time. In
> the
> 99.99% case where things went well, it would just be a matter of continuing
> on.
> Whenever "something bad happened", you could copy the good index over the
> bad one and go at it again.
>
> But to ask that no matter what, the index is OK is asking a lot.... There
> are fires and floods and earthquakes to consider <G>
>
> Best
> Erick
>
> On Thu, Jun 26, 2008 at 10:28 AM, Eran Sevi <eransevi@gmail.com> wrote:
>
> > Hi,
> >
> > I'm looking for the correct way to create an index given the following
> > restrictions:
> >
> > 1. The documents are received in batches of variable sizes (not more then
> > 100 docs in a batch).
> > 2. The batch insertion must be transactional - either the whole batch is
> > added to the index (exists physically on the disk), or the whole batch is
> > canceled/aborted and the index remains as before.
> > 3. The index must remain valid at all times and shouldn't be corrupted
> even
> > if a power interruption occurs - *most important*
> > 4. Index speed is less important than search speed.
> >
> > How should I use a writer with all these restrictions? Can I do it
> without
> > having to close the writer after each batch (maybe flush is enough)?
> >
> > Should I change the IndexWriter parameters such as mergeFactor,
> > RAMBufferSize, etc. ?
> > I want to make sure that partial batches are not written to the disk (if
> > the
> > computer crashes in the middle of the batch, I want to be able to work
> with
> > the index as it was before the crash).
> >
> > If I'm working with a single writer, is it guaranteed that no matter what
> > happens the index can be opened and used (I don't mind loosing docs, just
> > that the index won't be ruined).
> >
> > Thanks and sorry about the long list of questions,
> > Eran.
> >
>

------=_Part_3201_21017952.1214493091477--

From java-user-return-34648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 15:40:22 2008
Return-Path: <java-user-return-34648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68119 invoked from network); 26 Jun 2008 15:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 15:40:22 -0000
Received: (qmail 91730 invoked by uid 500); 26 Jun 2008 15:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91695 invoked by uid 500); 26 Jun 2008 15:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91684 invoked by uid 99); 26 Jun 2008 15:40:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 08:40:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chy1013m1@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 15:39:27 +0000
Received: by fg-out-1718.google.com with SMTP id l27so43825fgb.27
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 08:39:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=PS3cqyFYIpA34u9lW5gfaw6p9FWT3pDmNjsntfYPAr0=;
        b=HkpS03+vEzSLl5xqcAL7XThcN2VGLhcEzexa9LCICk5Xq2ESf6rRutUJYPL09OtUQB
         MXBdYoViENPacU/sIxh8lEI8dnzv/PGAPzmTa76NDNlL3O687Nm5ZtWwjBHGGvlM3gg3
         kvIffIjrxm+uNbvYa4fsf0x0ryg+QvfHu5WwM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=U9vV2zw/muX5JSiVfXANud1pmYoaF5Xt0n7Z1pRdA7tcfP/N0WyXn25cc/X1nfb6uN
         k1bhZfVng/+SJpUx/rrIdFFUPU0GVS1WYFwpUdonSw4f2VmOIHjlligg19BJC2S5jmH6
         dF7LRSqYAA4coyfft2DuyYRAuZvKBpl3/N1HQ=
Received: by 10.86.92.7 with SMTP id p7mr267603fgb.72.1214494786130;
        Thu, 26 Jun 2008 08:39:46 -0700 (PDT)
Received: by 10.86.87.17 with HTTP; Thu, 26 Jun 2008 08:39:46 -0700 (PDT)
Message-ID: <c9af2e0a0806260839w1d930bb0g3d15750b8bdbdfff@mail.gmail.com>
Date: Thu, 26 Jun 2008 11:39:46 -0400
From: "Alex Cheng" <chy1013m1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How Lucene Search
In-Reply-To: <18127970.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18127970.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

the debugger that came with eclipse is pretty good for this purpose.
You can create a small project and then attach Lucene source for the
purpose of debugging.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 16:24:00 2008
Return-Path: <java-user-return-34649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83466 invoked from network); 26 Jun 2008 16:23:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 16:23:59 -0000
Received: (qmail 74172 invoked by uid 500); 26 Jun 2008 16:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74142 invoked by uid 500); 26 Jun 2008 16:23:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74131 invoked by uid 99); 26 Jun 2008 16:23:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 09:23:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 16:23:04 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5QGN10U023706
	for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 12:23:01 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4863C1DD.6070805@informatics.jax.org>
Date: Thu, 26 Jun 2008 12:20:45 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem with search an exact word and stemming
References: <220b8f60806250121l59e39dd0pa406cc9ddd724582@mail.gmail.com> <359a92830806250553u4f560f9bs47c43eb201cf6da9@mail.gmail.com>
In-Reply-To: <359a92830806250553u4f560f9bs47c43eb201cf6da9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.26.160649
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1800_1899 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You could also add another data field to the index, with an untokenized 
version of your data, and then use a multifield query to go against both 
the stemmed and exact match parts of your search at the same time.

This is a technique I've used quite often on my project with various 
different requirements for the second field.  Mind you it makes the 
indexes bigger, but unless your dataset is large its not really a huge 
problem.

Matt

Erick Erickson wrote:
> The way I've solved this is to index the stemmed *and* a special
> token at the same position (see Synonym Analyzer). The From your
> example, say you're indexing progresser. You'd go ahead and index the
> stemmed version , "progress", AND you'd also index "progresser$"
> at the same offset. Now, when you want exact matches, search for
> the token with the $ at the end.
>
> This does make your index a bit larger, but not as much as you'd expect.
>
> Best
> Erick
>
> On Wed, Jun 25, 2008 at 4:21 AM, renou oki <occhipin@gmail.com> wrote:
>
>   
>> Hello,
>>
>> I have a stemmed index, but i want to search the exact form of a word.
>> I use French Analyzer, so for instance "progression", "progresser" are
>> indexed with the linguistic root "progress".
>> But if I want to search the word "progress" (and only this word), I have to
>> many hits (because of "progression", "progresser"...)
>> The field is indexed, tokenized and no store...
>>
>> Is there a way to do this, I mean to search an exact word in a stemmed
>> index
>> ?
>> I suppose that I have to use the same analyzer for indexing and searching.
>>
>>
>> I try with a PhraseQuery, with quotes...
>>
>> Ps : I use lucene 1.9.1
>>
>> Thanks
>> Renald
>>
>>     
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 19:41:11 2008
Return-Path: <java-user-return-34650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63128 invoked from network); 26 Jun 2008 19:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 19:41:10 -0000
Received: (qmail 65826 invoked by uid 500); 26 Jun 2008 19:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65793 invoked by uid 500); 26 Jun 2008 19:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65782 invoked by uid 99); 26 Jun 2008 19:41:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 12:41:05 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Jun 2008 19:40:15 +0000
Received: (qmail 25938 invoked from network); 26 Jun 2008 19:40:29 -0000
Received: from unknown (HELO ?192.168.2.2?) (unknown)
  by unknown with SMTP; 26 Jun 2008 19:40:29 -0000
X-pair-Authenticated: 68.84.138.127
Subject: possible to read index into memory?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 26 Jun 2008 15:40:28 -0400
Message-Id: <1214509228.6790.128.camel@tetsiaga>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  Is there a lucene index reader that will load a disk-based index into
memory and perform searches on it from RAM? Sorry if I missed this in
the docs somewhere.

Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jun 26 19:48:20 2008
Return-Path: <java-user-return-34651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67255 invoked from network); 26 Jun 2008 19:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jun 2008 19:48:20 -0000
Received: (qmail 82151 invoked by uid 500); 26 Jun 2008 19:48:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82109 invoked by uid 500); 26 Jun 2008 19:48:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82098 invoked by uid 99); 26 Jun 2008 19:48:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 12:48:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 19:47:19 +0000
Received: by yx-out-2324.google.com with SMTP id 31so90344yxl.5
        for <java-user@lucene.apache.org>; Thu, 26 Jun 2008 12:47:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2ZlqZj2LbL6GB+Gm/GL7CKeUu4yYCZ6lDYrED3sMzu4=;
        b=XIe+1VAfaqGyZWJTRHNQwR7jO5d7QSu5rvaTRZXhYBEWYgaRmGGjm8Ikt7gmLpL8m0
         ul3Ekn9C9Nm/FXQkXt2BvLv6b9hFJd5ngOrrPV4DyMkQlDUtx/R/2D2BZStAdPOAsZ1o
         L3qr/dVy4Gaqh6k+PX/xI50ETickhkg0mbszw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=m2Pp1CnnkDUy+TxnzQKGWKM4flFJTk4iqBm6rPcxGZNOzbN9Q6hdgynGDFqRGFl4UG
         mKwCvR0TCV4qhVYSC+X7G8JB5Vm5WwTN126yVK6DX09dWt7qDxRMLuF/akxIXBSVZPOC
         raLRjVs/RHxJnO1jTS2q9UbXtt/4DrWpbrL0I=
Received: by 10.150.92.12 with SMTP id p12mr633505ybb.236.1214509629395;
        Thu, 26 Jun 2008 12:47:09 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Thu, 26 Jun 2008 12:47:09 -0700 (PDT)
Message-ID: <359a92830806261247q4e59e5c4jef438be4a065c742@mail.gmail.com>
Date: Thu, 26 Jun 2008 15:47:09 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: possible to read index into memory?
In-Reply-To: <1214509228.6790.128.camel@tetsiaga>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2802_24846987.1214509629380"
References: <1214509228.6790.128.camel@tetsiaga>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2802_24846987.1214509629380
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From the docs...

RAMDirectory

public *RAMDirectory*(Directory
<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/store/Directory.html>
dir)
             throws IOException
<http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>

Creates a new RAMDirectory instance from a different
Directoryimplementation. This can be used to load a disk-based index
into memory.

Seems like exactly what you're asking for...

Best
Erick

On Thu, Jun 26, 2008 at 3:40 PM, Darren Govoni <darren@ontrenet.com> wrote:

> Hi,
>  Is there a lucene index reader that will load a disk-based index into
> memory and perform searches on it from RAM? Sorry if I missed this in
> the docs somewhere.
>
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2802_24846987.1214509629380--

From java-user-return-34652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 00:53:31 2008
Return-Path: <java-user-return-34652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 876 invoked from network); 27 Jun 2008 00:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 00:53:31 -0000
Received: (qmail 2820 invoked by uid 500); 27 Jun 2008 00:53:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2784 invoked by uid 500); 27 Jun 2008 00:53:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2771 invoked by uid 99); 27 Jun 2008 00:53:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 17:53:26 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 00:52:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KC2Cs-00020R-43
	for java-user@lucene.apache.org; Thu, 26 Jun 2008 17:52:54 -0700
Message-ID: <18146253.post@talk.nabble.com>
Date: Thu, 26 Jun 2008 17:52:54 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How Lucene Search
In-Reply-To: <18127970.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <18127970.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the reply. I had try to start a new project already. Like I had
mention, I actually go through the code from the start of the application
and till the end where the scoring is done. 

But unfortunately, I still fail to locate the part where Lucene open the
index to perform the search. Anyone has any idea on how to do this?
-- 
View this message in context: http://www.nabble.com/How-Lucene-Search-tp18127970p18146253.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 04:03:02 2008
Return-Path: <java-user-return-34653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75544 invoked from network); 27 Jun 2008 04:03:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 04:03:01 -0000
Received: (qmail 18383 invoked by uid 500); 27 Jun 2008 04:02:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18347 invoked by uid 500); 27 Jun 2008 04:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18334 invoked by uid 99); 27 Jun 2008 04:02:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 21:02:57 -0700
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.46.51.80] (HELO SG2EHSOBE003.bigfish.com) (207.46.51.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 04:02:04 +0000
Received: from mail24-sin-R.bigfish.com (10.3.40.3) by
 SG2EHSOBE003.bigfish.com (10.3.40.23) with Microsoft SMTP Server id
 8.1.240.5; Fri, 27 Jun 2008 04:02:21 +0000
Received: from mail24-sin (localhost.localdomain [127.0.0.1])	by
 mail24-sin-R.bigfish.com (Postfix) with ESMTP id 9E1B31138232	for
 <java-user@lucene.apache.org>; Fri, 27 Jun 2008 04:02:20 +0000 (UTC)
X-BigFish: VPS-24(z57dlze66Rzzzz6619IPz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
Received: by mail24-sin (MessageSwitch) id 1214539339206261_7168; Fri, 27 Jun
 2008 04:02:19 +0000 (UCT)
Received: from us-voo-smtp04.internal.sungard.corp (unknown [216.83.166.45])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))	(No client certificate
 requested)	by mail24-sin.bigfish.com (Postfix) with ESMTP id 116EF1BD8061	for
 <java-user@lucene.apache.org>; Fri, 27 Jun 2008 04:02:17 +0000 (UTC)
Received: from us-voo-smtp11.internal.sungard.corp ([168.162.128.53]) by
 us-voo-smtp04.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 00:01:44 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.82]) by
 us-voo-smtp11.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 00:01:44 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8D80A.6EAEA154"
Subject: Can you create a Field that is a copy of another Field?
Date: Fri, 27 Jun 2008 00:01:09 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7030E1B2B@VOO-EXCHANGE01.internal.sungard.corp>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-topic: Can you create a Field that is a copy of another Field?
Thread-Index: AcjYCm4wb2YqN19kS5qfp+GOeiR1GA==
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2008 04:01:44.0259 (UTC) FILETIME=[83348930:01C8D80A]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8D80A.6EAEA154
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello Lucene Gurus,

=20

I'm new to Lucene so sorry if this question basic or na=EFve.

=20

I have a Document to which I want to add a Field named, say, "foo" that =
is tokenized, indexed and unstored.  I am using the "Field(String name, =
TokenStream tokenStream)" constructor to create it.  The TokenStream may =
take a fairly long time to return all its tokens.

=20

Now for querying reasons I want to add another Field named, say, "bar", =
that is tokenized and indexed in exactly the same way as "foo".  I could =
just pass it the same TokenStream that I used to create "foo" but since =
it takes so long to return all its tokens, I was wondering if there is a =
way to say, create "bar" as a copy of "foo".  I looked thru the javadoc =
but didn't see anything. =20

=20

Is this possible in Lucene or do I just have to bite the bullet build =
the new Field using the same TokenStream again?

--
Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak =
Valley Drive * Ann Arbor, MI 48103
Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:bill.chesky@sungard.com>=20
 www.sungard.com/energy <blocked::http://www.sungard.com/energy> =20

=20


------_=_NextPart_001_01C8D80A.6EAEA154--

From java-user-return-34654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 04:27:21 2008
Return-Path: <java-user-return-34654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78906 invoked from network); 27 Jun 2008 04:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 04:27:20 -0000
Received: (qmail 29202 invoked by uid 500); 27 Jun 2008 04:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29164 invoked by uid 500); 27 Jun 2008 04:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29153 invoked by uid 99); 27 Jun 2008 04:27:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Jun 2008 21:27:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 04:26:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KC5Xo-000878-36
	for java-user@lucene.apache.org; Thu, 26 Jun 2008 21:26:44 -0700
Message-ID: <18147958.post@talk.nabble.com>
Date: Thu, 26 Jun 2008 21:26:44 -0700 (PDT)
From: java_is_everything <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Can we know "number-of-documents-that-will-be-flushed"?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.

Is there a way to know "number-of-documents-that-will-be-flushed", just
before giving a call to flush() method?
I am currently using Lucene 2.2.0 API.

Looking forward to replies.

Ajay Garg
-- 
View this message in context: http://www.nabble.com/Can-we-know-%22number-of-documents-that-will-be-flushed%22--tp18147958p18147958.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 07:33:54 2008
Return-Path: <java-user-return-34655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30999 invoked from network); 27 Jun 2008 07:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 07:33:54 -0000
Received: (qmail 89361 invoked by uid 500); 27 Jun 2008 07:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89142 invoked by uid 500); 27 Jun 2008 07:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89131 invoked by uid 99); 27 Jun 2008 07:33:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 00:33:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of occhipin@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 07:32:42 +0000
Received: by rv-out-0506.google.com with SMTP id f6so387649rvb.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 00:33:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4IvpB091CgPZBWDrGFbgdRy8jv2KhtowG1NpWiqLKDA=;
        b=xwN5b5WG+R63mnFVJ7Xg7UPmBozPZGWYL6dfnf+qa+8n/Oub5+CFBJhOXX29wWYjhg
         N6oZsPl0AbPctjdUULM1DX2r7icYBCBzoHAtGxtXuUBlzhYwKlVi5odUP3YPnVHd3QDR
         nCacjtK1gIucqKRUDtpPCGUfOpUAH7m1S3MTg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=TGCiZMy3xo0qjspXQAQP58ubA3xvFr1e3W5WdXpNSZlfWXsSWWCNBy0bLdYCD6VFAj
         XPyJYoUK8TRMyVkPtxvgkUZq6xBe6UwQW5sNVYzZ64mvATCigDOoM6GxHSFiJcxcFue0
         Sk8Vb57qmLlsu7I7cspooMQ+TtN2olSrQTTb4=
Received: by 10.141.20.7 with SMTP id x7mr586651rvi.183.1214551982070;
        Fri, 27 Jun 2008 00:33:02 -0700 (PDT)
Received: by 10.141.40.5 with HTTP; Fri, 27 Jun 2008 00:33:02 -0700 (PDT)
Message-ID: <220b8f60806270033g46984304g20352102a7128e89@mail.gmail.com>
Date: Fri, 27 Jun 2008 09:33:02 +0200
From: "renou oki" <occhipin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with search an exact word and stemming
In-Reply-To: <4863C1DD.6070805@informatics.jax.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6159_18840104.1214551982035"
References: <220b8f60806250121l59e39dd0pa406cc9ddd724582@mail.gmail.com>
	 <359a92830806250553u4f560f9bs47c43eb201cf6da9@mail.gmail.com>
	 <4863C1DD.6070805@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6159_18840104.1214551982035
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Thanks for the reply.

I will try to add an other data field.
I thought about this solution but i was not very sure. I thought that was an
easier solution to do that...


best regards
Renou

2008/6/26 Matthew Hall <mhall@informatics.jax.org>:

> You could also add another data field to the index, with an untokenized
> version of your data, and then use a multifield query to go against both the
> stemmed and exact match parts of your search at the same time.
>
> This is a technique I've used quite often on my project with various
> different requirements for the second field.  Mind you it makes the indexes
> bigger, but unless your dataset is large its not really a huge problem.
>
> Matt
>
> Erick Erickson wrote:
>
>> The way I've solved this is to index the stemmed *and* a special
>> token at the same position (see Synonym Analyzer). The From your
>> example, say you're indexing progresser. You'd go ahead and index the
>> stemmed version , "progress", AND you'd also index "progresser$"
>> at the same offset. Now, when you want exact matches, search for
>> the token with the $ at the end.
>>
>> This does make your index a bit larger, but not as much as you'd expect.
>>
>> Best
>> Erick
>>
>> On Wed, Jun 25, 2008 at 4:21 AM, renou oki <occhipin@gmail.com> wrote:
>>
>>
>>
>>> Hello,
>>>
>>> I have a stemmed index, but i want to search the exact form of a word.
>>> I use French Analyzer, so for instance "progression", "progresser" are
>>> indexed with the linguistic root "progress".
>>> But if I want to search the word "progress" (and only this word), I have
>>> to
>>> many hits (because of "progression", "progresser"...)
>>> The field is indexed, tokenized and no store...
>>>
>>> Is there a way to do this, I mean to search an exact word in a stemmed
>>> index
>>> ?
>>> I suppose that I have to use the same analyzer for indexing and
>>> searching.
>>>
>>>
>>> I try with a PhraseQuery, with quotes...
>>>
>>> Ps : I use lucene 1.9.1
>>>
>>> Thanks
>>> Renald
>>>
>>>
>>>
>>
>>
>>
>
> --
> Matthew Hall
> Software Engineer
> Mouse Genome Informatics
> mhall@informatics.jax.org
> (207) 288-6012
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6159_18840104.1214551982035--

From java-user-return-34656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 09:08:10 2008
Return-Path: <java-user-return-34656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53725 invoked from network); 27 Jun 2008 09:08:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 09:08:09 -0000
Received: (qmail 98321 invoked by uid 500); 27 Jun 2008 09:08:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98055 invoked by uid 500); 27 Jun 2008 09:08:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98044 invoked by uid 99); 27 Jun 2008 09:08:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 02:08:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 09:07:13 +0000
Received: by an-out-0708.google.com with SMTP id c37so82192anc.49
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 02:07:31 -0700 (PDT)
Received: by 10.100.249.10 with SMTP id w10mr1120696anh.156.1214557651304;
        Fri, 27 Jun 2008 02:07:31 -0700 (PDT)
Received: by 10.100.212.4 with HTTP; Fri, 27 Jun 2008 02:07:31 -0700 (PDT)
Message-ID: <9ac0c6aa0806270207t2590c275n1396e002d8fc1a42@mail.gmail.com>
Date: Fri, 27 Jun 2008 05:07:31 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Can we know "number-of-documents-that-will-be-flushed"?
In-Reply-To: <18147958.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18147958.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

IndexWriter.numRamDocs() should give you that.

Mike

java_is_everything <ajaygargnsit@gmail.com> wrote:
>
> Hi all.
>
> Is there a way to know "number-of-documents-that-will-be-flushed", just
> before giving a call to flush() method?
> I am currently using Lucene 2.2.0 API.
>
> Looking forward to replies.
>
> Ajay Garg
> --
> View this message in context: http://www.nabble.com/Can-we-know-%22number-of-documents-that-will-be-flushed%22--tp18147958p18147958.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 09:24:37 2008
Return-Path: <java-user-return-34657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58307 invoked from network); 27 Jun 2008 09:24:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 09:24:36 -0000
Received: (qmail 23651 invoked by uid 500); 27 Jun 2008 09:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23619 invoked by uid 500); 27 Jun 2008 09:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23608 invoked by uid 99); 27 Jun 2008 09:24:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 02:24:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 09:23:39 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1KCA3V-0007e1-Oc
	for java-user@lucene.apache.org; Fri, 27 Jun 2008 10:16:15 +0100
Message-ID: <4864B0D1.1060501@propylon.com>
Date: Fri, 27 Jun 2008 10:20:17 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <74f928500806260728m36d7fd56yae56801903fa2938@mail.gmail.com>	 <359a92830806260742k1ab39f7bu55177be4f5922999@mail.gmail.com> <74f928500806260811q157afe1elc950d5e3492b208c@mail.gmail.com>
In-Reply-To: <74f928500806260811q157afe1elc950d5e3492b208c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: Preventing index corruption
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.8 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

Hi,

Rather than disabling the merging, have you considered putting the 
documents in a separate index, possibly in memory, and then deciding 
when to merge them with the main index yourself?

That way, you can change you mind and simply not merge the  new 
documents if you want.

To do this, you can create a new RAMDirectory, and add your documents to 
that, then when you want to merge with the main index, open an 
IndexWriter on the main index, and call 
IndexWriter.addIndexes(Directory[]). Of course, you don't have to use a 
RAMDirectory, but it would make sense, if it's only purpose is to 
temporarily hold the documents until you decide to commit them.

I don't know what will happen if the computer crashes during the merge, 
but see http://lucene.apache.org/java/2_3_2/api/index.html

This is from the "IndexWriter.addIndexes(Directory[])" documentation:

"This method is transactional in how Exceptions are handled: it does not 
commit a new segments_N file until all indexes are added. This means if 
an Exception occurs (for example disk full), then either no indexes will 
have been added or they all will have been."

I hope that helps!

Regards,
-JB

Eran Sevi wrote:
> Thanks Erick.
> You might be joking, but one of our clients indeed had all his servers
> destroyed in a flood. Of course in this rare case, a solution would be to
> keep the backup on another site.
>
> However I'm still confused about normal scenarios:
>
> Let's say that in the middle of the batch I got an exception and wan't to
> rollback. Can I do this ?
> I want to make sure that after a batch finishes (and only then), it is
> written to disk (and not find out after a while during a commit that
> something went wrong).Do I have to close the writer or Flush is enough? I
> though about raising mergeFactor and other parameters to high values (or
> disabling them) so an automatic merge/commit will not happen, and then I can
> manually decide when to commit the changes - the size of the batches is not
> constant so I can't determine in advance.
> I don't mind hurting the index performance a bit by doing this manually, but
> I can't efford to let the client think that the information is secured in
> the index and than to find out that it's not.
>
> My index size contains a few million docs and it's size can reach about 30G
> (we're saving a lot of fields and information for each document). Having a
> backup index is an option I considered but I wanted to avoid the overhead of
> keeping them synchronized (they might not be on the same server which
> exposes a lot of new problems like network issues).
>
> Thanks.
>
> On Thu, Jun 26, 2008 at 5:42 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>
>   
>> How big is your index? The simpleminded way would be to copy things around
>> as your batches come in and only switch to the *real* one after the
>> additions
>> were verified.
>>
>> You could also just maintain two indexes but only update one at a time. In
>> the
>> 99.99% case where things went well, it would just be a matter of continuing
>> on.
>> Whenever "something bad happened", you could copy the good index over the
>> bad one and go at it again.
>>
>> But to ask that no matter what, the index is OK is asking a lot.... There
>> are fires and floods and earthquakes to consider <G>
>>
>> Best
>> Erick
>>
>> On Thu, Jun 26, 2008 at 10:28 AM, Eran Sevi <eransevi@gmail.com> wrote:
>>
>>     
>>> Hi,
>>>
>>> I'm looking for the correct way to create an index given the following
>>> restrictions:
>>>
>>> 1. The documents are received in batches of variable sizes (not more then
>>> 100 docs in a batch).
>>> 2. The batch insertion must be transactional - either the whole batch is
>>> added to the index (exists physically on the disk), or the whole batch is
>>> canceled/aborted and the index remains as before.
>>> 3. The index must remain valid at all times and shouldn't be corrupted
>>>       
>> even
>>     
>>> if a power interruption occurs - *most important*
>>> 4. Index speed is less important than search speed.
>>>
>>> How should I use a writer with all these restrictions? Can I do it
>>>       
>> without
>>     
>>> having to close the writer after each batch (maybe flush is enough)?
>>>
>>> Should I change the IndexWriter parameters such as mergeFactor,
>>> RAMBufferSize, etc. ?
>>> I want to make sure that partial batches are not written to the disk (if
>>> the
>>> computer crashes in the middle of the batch, I want to be able to work
>>>       
>> with
>>     
>>> the index as it was before the crash).
>>>
>>> If I'm working with a single writer, is it guaranteed that no matter what
>>> happens the index can be opened and used (I don't mind loosing docs, just
>>> that the index won't be ruined).
>>>
>>> Thanks and sorry about the long list of questions,
>>> Eran.
>>>
>>>       
>
>   
> ------------------------------------------------------------------------
>
> No virus found in this incoming message.
> Checked by AVG. 
> Version: 7.5.524 / Virus Database: 270.4.1/1517 - Release Date: 24/06/2008 20:41
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 09:35:39 2008
Return-Path: <java-user-return-34658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62548 invoked from network); 27 Jun 2008 09:35:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 09:35:38 -0000
Received: (qmail 44581 invoked by uid 500); 27 Jun 2008 09:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44558 invoked by uid 500); 27 Jun 2008 09:35:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44547 invoked by uid 99); 27 Jun 2008 09:35:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 02:35:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 09:34:43 +0000
Received: by an-out-0708.google.com with SMTP id c37so83659anc.49
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 02:35:02 -0700 (PDT)
Received: by 10.100.227.20 with SMTP id z20mr1218486ang.62.1214559301717;
        Fri, 27 Jun 2008 02:35:01 -0700 (PDT)
Received: by 10.100.212.4 with HTTP; Fri, 27 Jun 2008 02:35:01 -0700 (PDT)
Message-ID: <9ac0c6aa0806270235k3842694cj5db6d49258466797@mail.gmail.com>
Date: Fri, 27 Jun 2008 05:35:01 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing index corruption
In-Reply-To: <4864B0D1.1060501@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <74f928500806260728m36d7fd56yae56801903fa2938@mail.gmail.com>
	 <359a92830806260742k1ab39f7bu55177be4f5922999@mail.gmail.com>
	 <74f928500806260811q157afe1elc950d5e3492b208c@mail.gmail.com>
	 <4864B0D1.1060501@propylon.com>
X-Virus-Checked: Checked by ClamAV on apache.org

If you open your IndexWriter with autoCommit=false, then no changes
will be visible in the index until you call commit() or close().
Added documents can still be flushed to disk as new segments when the
RAM buffer is full, but these segments are not referenced (by a new
segments_N file) until commit() or close() is called.  commit() is
only available in the trunk (to be released as 2.4 at some point)
version of Lucene.

Re safety on sudden power loss or machine crash: on the trunk only,
the index will not become corrupt due to such events as long as the
underlying IO system correctly implements fsync().  But on all current
releases of Lucene a sudden power loss or machine crash could in fact
corrupt the index.  See details here:

    https://issues.apache.org/jira/browse/LUCENE-1044

Mike

John Byrne <john.byrne@propylon.com> wrote:
> Hi,
>
> Rather than disabling the merging, have you considered putting the documents
> in a separate index, possibly in memory, and then deciding when to merge
> them with the main index yourself?
>
> That way, you can change you mind and simply not merge the  new documents if
> you want.
>
> To do this, you can create a new RAMDirectory, and add your documents to
> that, then when you want to merge with the main index, open an IndexWriter
> on the main index, and call IndexWriter.addIndexes(Directory[]). Of course,
> you don't have to use a RAMDirectory, but it would make sense, if it's only
> purpose is to temporarily hold the documents until you decide to commit
> them.
>
> I don't know what will happen if the computer crashes during the merge, but
> see http://lucene.apache.org/java/2_3_2/api/index.html
>
> This is from the "IndexWriter.addIndexes(Directory[])" documentation:
>
> "This method is transactional in how Exceptions are handled: it does not
> commit a new segments_N file until all indexes are added. This means if an
> Exception occurs (for example disk full), then either no indexes will have
> been added or they all will have been."
>
> I hope that helps!
>
> Regards,
> -JB
>
> Eran Sevi wrote:
>>
>> Thanks Erick.
>> You might be joking, but one of our clients indeed had all his servers
>> destroyed in a flood. Of course in this rare case, a solution would be to
>> keep the backup on another site.
>>
>> However I'm still confused about normal scenarios:
>>
>> Let's say that in the middle of the batch I got an exception and wan't to
>> rollback. Can I do this ?
>> I want to make sure that after a batch finishes (and only then), it is
>> written to disk (and not find out after a while during a commit that
>> something went wrong).Do I have to close the writer or Flush is enough? I
>> though about raising mergeFactor and other parameters to high values (or
>> disabling them) so an automatic merge/commit will not happen, and then I
>> can
>> manually decide when to commit the changes - the size of the batches is
>> not
>> constant so I can't determine in advance.
>> I don't mind hurting the index performance a bit by doing this manually,
>> but
>> I can't efford to let the client think that the information is secured in
>> the index and than to find out that it's not.
>>
>> My index size contains a few million docs and it's size can reach about
>> 30G
>> (we're saving a lot of fields and information for each document). Having a
>> backup index is an option I considered but I wanted to avoid the overhead
>> of
>> keeping them synchronized (they might not be on the same server which
>> exposes a lot of new problems like network issues).
>>
>> Thanks.
>>
>> On Thu, Jun 26, 2008 at 5:42 PM, Erick Erickson <erickerickson@gmail.com>
>> wrote:
>>
>>
>>>
>>> How big is your index? The simpleminded way would be to copy things
>>> around
>>> as your batches come in and only switch to the *real* one after the
>>> additions
>>> were verified.
>>>
>>> You could also just maintain two indexes but only update one at a time.
>>> In
>>> the
>>> 99.99% case where things went well, it would just be a matter of
>>> continuing
>>> on.
>>> Whenever "something bad happened", you could copy the good index over the
>>> bad one and go at it again.
>>>
>>> But to ask that no matter what, the index is OK is asking a lot.... There
>>> are fires and floods and earthquakes to consider <G>
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Jun 26, 2008 at 10:28 AM, Eran Sevi <eransevi@gmail.com> wrote:
>>>
>>>
>>>>
>>>> Hi,
>>>>
>>>> I'm looking for the correct way to create an index given the following
>>>> restrictions:
>>>>
>>>> 1. The documents are received in batches of variable sizes (not more
>>>> then
>>>> 100 docs in a batch).
>>>> 2. The batch insertion must be transactional - either the whole batch is
>>>> added to the index (exists physically on the disk), or the whole batch
>>>> is
>>>> canceled/aborted and the index remains as before.
>>>> 3. The index must remain valid at all times and shouldn't be corrupted
>>>>
>>>
>>> even
>>>
>>>>
>>>> if a power interruption occurs - *most important*
>>>> 4. Index speed is less important than search speed.
>>>>
>>>> How should I use a writer with all these restrictions? Can I do it
>>>>
>>>
>>> without
>>>
>>>>
>>>> having to close the writer after each batch (maybe flush is enough)?
>>>>
>>>> Should I change the IndexWriter parameters such as mergeFactor,
>>>> RAMBufferSize, etc. ?
>>>> I want to make sure that partial batches are not written to the disk (if
>>>> the
>>>> computer crashes in the middle of the batch, I want to be able to work
>>>>
>>>
>>> with
>>>
>>>>
>>>> the index as it was before the crash).
>>>>
>>>> If I'm working with a single writer, is it guaranteed that no matter
>>>> what
>>>> happens the index can be opened and used (I don't mind loosing docs,
>>>> just
>>>> that the index won't be ruined).
>>>>
>>>> Thanks and sorry about the long list of questions,
>>>> Eran.
>>>>
>>>>
>>
>>  ------------------------------------------------------------------------
>>
>> No virus found in this incoming message.
>> Checked by AVG. Version: 7.5.524 / Virus Database: 270.4.1/1517 - Release
>> Date: 24/06/2008 20:41
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 09:49:30 2008
Return-Path: <java-user-return-34659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66270 invoked from network); 27 Jun 2008 09:49:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 09:49:30 -0000
Received: (qmail 59771 invoked by uid 500); 27 Jun 2008 09:49:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59750 invoked by uid 500); 27 Jun 2008 09:49:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59739 invoked by uid 99); 27 Jun 2008 09:49:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 02:49:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 09:48:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KCAZY-0001tO-Bp
	for java-user@lucene.apache.org; Fri, 27 Jun 2008 02:48:52 -0700
Message-ID: <18151693.post@talk.nabble.com>
Date: Fri, 27 Jun 2008 02:48:52 -0700 (PDT)
From: mick l <kali.mist@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene CFS naming significance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kali.mist@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Folks,
Could anyone tell me the significance of the naming of the cfs files in the
luceneindex e.g.  _1pp.cfs, _2kk.cfs etc.
I have observed many differently named files being created temporarily while
the index is being built, but the same set of named files are in place once
the index has finished building.
Can I rely on the index files always having the same names once index
buildng is complete? This would greatly simplify my auto ftp'ing of the
files up to a web server via an SSIS package.
Thanks
M
-- 
View this message in context: http://www.nabble.com/Lucene-CFS-naming-significance-tp18151693p18151693.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 10:45:12 2008
Return-Path: <java-user-return-34660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79757 invoked from network); 27 Jun 2008 10:45:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 10:45:12 -0000
Received: (qmail 16036 invoked by uid 500); 27 Jun 2008 10:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16007 invoked by uid 500); 27 Jun 2008 10:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15995 invoked by uid 99); 27 Jun 2008 10:45:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 03:45:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 10:44:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KCBRU-0003hn-Fu
	for java-user@lucene.apache.org; Fri, 27 Jun 2008 03:44:36 -0700
Message-ID: <18152451.post@talk.nabble.com>
Date: Fri, 27 Jun 2008 03:44:36 -0700 (PDT)
From: java_is_everything <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can we know "number-of-documents-that-will-be-flushed"?
In-Reply-To: <9ac0c6aa0806270207t2590c275n1396e002d8fc1a42@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
References: <18147958.post@talk.nabble.com> <9ac0c6aa0806270207t2590c275n1396e002d8fc1a42@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike. Thanks for the reply.

Just one doubt. Will it work if the indexwriter directory is "not" a
RAMDirectory?

Looking forward to a reply.

Ajay Garg



Michael McCandless-2 wrote:
> 
> IndexWriter.numRamDocs() should give you that.
> 
> Mike
> 
> java_is_everything <ajaygargnsit@gmail.com> wrote:
>>
>> Hi all.
>>
>> Is there a way to know "number-of-documents-that-will-be-flushed", just
>> before giving a call to flush() method?
>> I am currently using Lucene 2.2.0 API.
>>
>> Looking forward to replies.
>>
>> Ajay Garg
>> --
>> View this message in context:
>> http://www.nabble.com/Can-we-know-%22number-of-documents-that-will-be-flushed%22--tp18147958p18147958.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Can-we-know-%22number-of-documents-that-will-be-flushed%22--tp18147958p18152451.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 11:08:26 2008
Return-Path: <java-user-return-34661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86844 invoked from network); 27 Jun 2008 11:08:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 11:08:26 -0000
Received: (qmail 46328 invoked by uid 500); 27 Jun 2008 11:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46294 invoked by uid 500); 27 Jun 2008 11:08:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46283 invoked by uid 99); 27 Jun 2008 11:08:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 04:08:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.26.60.145] (HELO smtpauth01.csee.onr.siteprotect.com) (64.26.60.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:07:29 +0000
Received: from spsoftindia.com (unknown [61.17.14.87])
	(Authenticated sender: spsoftindia@spsoftindia.com)
	by smtpauth01.csee.onr.siteprotect.com (Postfix) with ESMTP id 0E5361C802B
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 04:58:41 -0500 (CDT)
Received: from 192.168.10.125 for java-user@lucene.apache.org; Fri, 27 Jun 2008 16:36:49 +0530
From: "Kumar Gaurav" <gaurav.kumar@spsoftindia.com>
To: <java-user@lucene.apache.org>
Subject: Does Lucene Java 2.3.2 supports parsing of Microsoft office 2007 documents...
Date: Fri, 27 Jun 2008 16:38:21 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0031_01C8D874.3684ADD0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcjYRhyTGYq0q3rPQF+tq9YOsYJTZQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-ID: <WM8C53B7D7F99740859309A140E11B631F@spsoftindia.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0031_01C8D874.3684ADD0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Dear all,

 

Currently I am using Lucene jave 2.3.2 demo to parse Microsoft 2003 and 2007
docs and PDF files.

It is able to parse files with *.pdf, *.doc, *.xls etc. 

But it does not search in files of Microsoft 2007 docs.

It shows indexing *.docx and other Microsoft 2007 doc files.

 

Does Lucene java supports parsing of extensions *.docx, *.pptx, *.mpp i.e.
Microsoft Windows 2007 documents?

If it supports, what should be done in Lucene demo 2.3.2 to search queries
on file with above mentioned extensions?

 

Thanks

Kumar


------=_NextPart_000_0031_01C8D874.3684ADD0--


From java-user-return-34662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 11:13:12 2008
Return-Path: <java-user-return-34662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87897 invoked from network); 27 Jun 2008 11:13:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 11:13:12 -0000
Received: (qmail 53539 invoked by uid 500); 27 Jun 2008 11:13:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53421 invoked by uid 500); 27 Jun 2008 11:13:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53409 invoked by uid 99); 27 Jun 2008 11:13:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 04:13:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.229.128.67] (HELO out02.picture.com.br) (200.229.128.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:12:16 +0000
Received: from lucastex-3.local (186.89.186.200.sta.impsat.net.br [200.186.89.186])
	by out02.picture.com.br (Postfix) with ESMTP id 15CAB56FA1
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 08:12:33 -0300 (BRST)
Message-ID: <4864CB21.4060908@accurate.com.br>
Date: Fri, 27 Jun 2008 08:12:33 -0300
From: "Lucas F. A. Teixeira" <lucas.teixeira@accurate.com.br>
User-Agent: Thunderbird 2.0.0.14 (Macintosh/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-Picturemail: Y
Subject: Re: Lucene CFS naming significance
References: <18151693.post@talk.nabble.com>
In-Reply-To: <18151693.post@talk.nabble.com>
Content-Type: multipart/alternative;
 boundary="------------020308030908090500060602"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020308030908090500060602
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Folks,
Could anyone tell me the significance of the naming of the cfs files in the
luceneindex e.g.  _1pp.cfs, _2kk.cfs etc.

 > Just names that won`t repeat in the same folder.

I have observed many differently named files being created temporarily while
the index is being built, but the same set of named files are in place once
the index has finished building.

 > That not true. Unless you always have the same "data" every time you 
build the index, and if you build it every time from the beggining (not 
rewriting the docs)

Can I rely on the index files always having the same names once index
buildng is complete? 

 > No. That names will be rotating through your indexing.

This would greatly simplify my auto ftp'ing of the
files up to a web server via an SSIS package.

 > Why don`t you just ftp the hole index dir? The directory is actually 
the "index" by itself, and not its content.

[]s,


Lucas Frare A. Teixeira
lucas.teixeira@accurate.com.br <mailto:lucas.teixeira@accurate.com.br>
Tel: +55 11 3660.1622 - R3018



mick l escreveu:
> Folks,
> Could anyone tell me the significance of the naming of the cfs files in the
> luceneindex e.g.  _1pp.cfs, _2kk.cfs etc.
> I have observed many differently named files being created temporarily while
> the index is being built, but the same set of named files are in place once
> the index has finished building.
> Can I rely on the index files always having the same names once index
> buildng is complete? This would greatly simplify my auto ftp'ing of the
> files up to a web server via an SSIS package.
> Thanks
> M
>   

--------------020308030908090500060602--

From java-user-return-34663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 11:27:01 2008
Return-Path: <java-user-return-34663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93703 invoked from network); 27 Jun 2008 11:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 11:27:00 -0000
Received: (qmail 75081 invoked by uid 500); 27 Jun 2008 11:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74881 invoked by uid 500); 27 Jun 2008 11:26:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74870 invoked by uid 99); 27 Jun 2008 11:26:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 04:26:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:26:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 09E09100148
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 04:25:51 -0700 (PDT)
Message-Id: <90E5C784-BFEB-498B-9008-D3369848F7C6@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7030E1B2B@VOO-EXCHANGE01.internal.sungard.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Can you create a Field that is a copy of another Field?
Date: Fri, 27 Jun 2008 07:25:51 -0400
References: <87D5FFD601E4BC488D51E45D414706C7030E1B2B@VOO-EXCHANGE01.internal.sungard.corp>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> =
<Bill.Chesky@sungard.com=20
 > wrote:

> Hello Lucene Gurus,
>
>
>
> I'm new to Lucene so sorry if this question basic or na=EFve.
>
>
>
> I have a Document to which I want to add a Field named, say, "foo" =20
> that is tokenized, indexed and unstored.  I am using the =20
> "Field(String name, TokenStream tokenStream)" constructor to create =20=

> it.  The TokenStream may take a fairly long time to return all its =20
> tokens.
>

Can you share some code here?  What's the reasoning behind using it =20
(not saying it's wrong, just wondering what led you to it)?  Are you =20
just loading it up from a file, string or something or do you have =20
another reason?


>
>
> Now for querying reasons I want to add another Field named, say, =20
> "bar", that is tokenized and indexed in exactly the same way as =20
> "foo".  I could just pass it the same TokenStream that I used to =20
> create "foo" but since it takes so long to return all its tokens, I =20=

> was wondering if there is a way to say, create "bar" as a copy of =20
> "foo".  I looked thru the javadoc but didn't see anything.
>
>

By exactly the same, do you really mean exactly the same?  What's the =20=

point of that?  What are the "querying reasons"?

You may want to look at the TeeTokenFilter and the SinkTokenizer, but =20=

I guess I'd like to know more about what's going on before fully =20
recommending anything.


>
> Is this possible in Lucene or do I just have to bite the bullet =20
> build the new Field using the same TokenStream again?
>
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =20=

> Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:bill.chesky@sungard.com=20
> >
> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 12:41:57 2008
Return-Path: <java-user-return-34664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22669 invoked from network); 27 Jun 2008 12:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 12:41:57 -0000
Received: (qmail 65179 invoked by uid 500); 27 Jun 2008 12:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65154 invoked by uid 500); 27 Jun 2008 12:41:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65143 invoked by uid 99); 27 Jun 2008 12:41:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 05:41:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 12:41:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KCDGS-0007A9-3O
	for java-user@lucene.apache.org; Fri, 27 Jun 2008 05:41:20 -0700
Message-ID: <18153935.post@talk.nabble.com>
Date: Fri, 27 Jun 2008 05:41:20 -0700 (PDT)
From: java_is_everything <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Doubt on IndexWriter.close()
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.

IndexWriter.close() API states that ::

"Flushes all changes to an index and closes all associated files.".

What does "closes all associated files" mean, since we are apparently able
to still addDocument() even after calling IndexWriter.close() ?


Looking forward to a reply.

Ajay garg
-- 
View this message in context: http://www.nabble.com/Doubt-on-IndexWriter.close%28%29-tp18153935p18153935.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 13:13:47 2008
Return-Path: <java-user-return-34665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35109 invoked from network); 27 Jun 2008 13:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 13:13:47 -0000
Received: (qmail 16495 invoked by uid 500); 27 Jun 2008 13:13:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16349 invoked by uid 500); 27 Jun 2008 13:13:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16338 invoked by uid 99); 27 Jun 2008 13:13:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 06:13:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 13:12:52 +0000
Received: by yx-out-2324.google.com with SMTP id 31so126718yxl.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 06:13:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sfwo/WEA3XxCLsKLgj7LKyEigmjvMHVnbrvM0AL0O1Y=;
        b=KJ+1t04yN77vxgZIWfaYEdewJmVu+ulBPt5LRwqbYa2HwrSHUslRaap73Y1gSnDFwz
         I4gmEz0gAUMFeZzEs1oqEZs9eJOHEV4fKBYLmo+6xzQyzX+tpcbqQma72pRhW6vd4823
         JF1BIDq61kV0NNNycvHtmpKxmMMRiR6ZIMH8U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fyfwginEKEZWQS2X7ODwd7KxaQQtBPvMEWp68rczUkJaD03Ne5i6hSylQejTrad9Lm
         rneWFp8vpsEQ+KbhTjwjvwfu926YXu+6P4hg2+kU+hUc8blPrjCF8+12oC2WMEnX23Dm
         /2W9SLA9uIxveh0M3o2FELooVtXY+yWOKoyGw=
Received: by 10.150.197.8 with SMTP id u8mr2219931ybf.122.1214572390928;
        Fri, 27 Jun 2008 06:13:10 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 27 Jun 2008 06:13:10 -0700 (PDT)
Message-ID: <359a92830806270613m21bea46fk2012c246a561655c@mail.gmail.com>
Date: Fri, 27 Jun 2008 09:13:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Java 2.3.2 supports parsing of Microsoft office 2007 documents...
In-Reply-To: <WM8C53B7D7F99740859309A140E11B631F@spsoftindia.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5200_16367530.1214572390940"
References: <WM8C53B7D7F99740859309A140E11B631F@spsoftindia.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5200_16367530.1214572390940
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lucene doesn't actually support any of the document types. What happens
is that some program is used to parse the files into an indexable stream
and that stream is indexed. That used to be POI in the old days.

I confess I haven't used the latest demo, but I assume that under the
covers there's some program installed that Microsoft documents are
pushed through to get indexable tokens. So the real question is
whether that program handles the documents you're interested in.

I know this isn't very helpful, but you'll have to dig into this in some
detail if you really want to index Microsoft documents. If you don't
need to, then you don't need to waste time on this issue.

Best
Erick

On Fri, Jun 27, 2008 at 7:08 AM, Kumar Gaurav <gaurav.kumar@spsoftindia.com>
wrote:

> Dear all,
>
>
>
> Currently I am using Lucene jave 2.3.2 demo to parse Microsoft 2003 and
> 2007
> docs and PDF files.
>
> It is able to parse files with *.pdf, *.doc, *.xls etc.
>
> But it does not search in files of Microsoft 2007 docs.
>
> It shows indexing *.docx and other Microsoft 2007 doc files.
>
>
>
> Does Lucene java supports parsing of extensions *.docx, *.pptx, *.mpp i.e.
> Microsoft Windows 2007 documents?
>
> If it supports, what should be done in Lucene demo 2.3.2 to search queries
> on file with above mentioned extensions?
>
>
>
> Thanks
>
> Kumar
>
>

------=_Part_5200_16367530.1214572390940--

From java-user-return-34666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 13:33:35 2008
Return-Path: <java-user-return-34666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40833 invoked from network); 27 Jun 2008 13:33:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 13:33:35 -0000
Received: (qmail 55096 invoked by uid 500); 27 Jun 2008 13:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54842 invoked by uid 500); 27 Jun 2008 13:33:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54831 invoked by uid 99); 27 Jun 2008 13:33:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 06:33:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 13:32:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KCE4Q-0000X9-1I
	for java-user@lucene.apache.org; Fri, 27 Jun 2008 06:32:58 -0700
Message-ID: <18155342.post@talk.nabble.com>
Date: Fri, 27 Jun 2008 06:32:58 -0700 (PDT)
From: mick l <kali.mist@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene CFS naming significance
In-Reply-To: <4864CB21.4060908@accurate.com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kali.mist@gmail.com
References: <18151693.post@talk.nabble.com> <4864CB21.4060908@accurate.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org


 > That not true. Unless you always have the same "data" every time you 
build the index, and if you build it every time from the beggining (not 
rewriting the docs)

>>Lucas, The same tables are being converted to an index each time, but
there will just be extra rows.
I do rebuild the index each time from the beginning.

>Why don`t you just ftp the hole index dir? The directory is actually 
the "index" by itself, and not its content.

>> I am just having problems getting SSIS to loop and FTP the files and I
>> need this out by Monday.

Thanks for the info anyway mate. I knew this was going to easy




Lucas F. A. Teixeira wrote:
> 
> Folks,
> Could anyone tell me the significance of the naming of the cfs files in
> the
> luceneindex e.g.  _1pp.cfs, _2kk.cfs etc.
> 
>  > Just names that won`t repeat in the same folder.
> 
> I have observed many differently named files being created temporarily
> while
> the index is being built, but the same set of named files are in place
> once
> the index has finished building.
> 
>  > That not true. Unless you always have the same "data" every time you 
> build the index, and if you build it every time from the beggining (not 
> rewriting the docs)
> 
> Can I rely on the index files always having the same names once index
> buildng is complete? 
> 
>  > No. That names will be rotating through your indexing.
> 
> This would greatly simplify my auto ftp'ing of the
> files up to a web server via an SSIS package.
> 
>  > Why don`t you just ftp the hole index dir? The directory is actually 
> the "index" by itself, and not its content.
> 
> []s,
> 
> 
> Lucas Frare A. Teixeira
> lucas.teixeira@accurate.com.br <mailto:lucas.teixeira@accurate.com.br>
> Tel: +55 11 3660.1622 - R3018
> 
> 
> 
> mick l escreveu:
>> Folks,
>> Could anyone tell me the significance of the naming of the cfs files in
>> the
>> luceneindex e.g.  _1pp.cfs, _2kk.cfs etc.
>> I have observed many differently named files being created temporarily
>> while
>> the index is being built, but the same set of named files are in place
>> once
>> the index has finished building.
>> Can I rely on the index files always having the same names once index
>> buildng is complete? This would greatly simplify my auto ftp'ing of the
>> files up to a web server via an SSIS package.
>> Thanks
>> M
>>   
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-CFS-naming-significance-tp18151693p18155342.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 13:34:04 2008
Return-Path: <java-user-return-34667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40927 invoked from network); 27 Jun 2008 13:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 13:34:04 -0000
Received: (qmail 58829 invoked by uid 500); 27 Jun 2008 13:33:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58798 invoked by uid 500); 27 Jun 2008 13:33:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58787 invoked by uid 99); 27 Jun 2008 13:33:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 06:33:58 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 13:33:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KCE4s-0000YO-IX
	for java-user@lucene.apache.org; Fri, 27 Jun 2008 06:33:26 -0700
Message-ID: <18155342.post@talk.nabble.com>
Date: Fri, 27 Jun 2008 06:33:26 -0700 (PDT)
From: mick l <kali.mist@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene CFS naming significance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kali.mist@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


 > That not true. Unless you always have the same "data" every time you 
build the index, and if you build it every time from the beggining (not 
rewriting the docs)

>>Lucas, The same tables are being converted to an index each time, but
there will just be extra rows.
I do rebuild the index each time from the beginning.

>Why don`t you just ftp the hole index dir? The directory is actually 
the "index" by itself, and not its content.

>> I am just having problems getting SSIS to loop and FTP the files.






Lucas F. A. Teixeira wrote:
> 
> Folks,
> Could anyone tell me the significance of the naming of the cfs files in
> the
> luceneindex e.g.  _1pp.cfs, _2kk.cfs etc.
> 
>  > Just names that won`t repeat in the same folder.
> 
> I have observed many differently named files being created temporarily
> while
> the index is being built, but the same set of named files are in place
> once
> the index has finished building.
> 
>  > That not true. Unless you always have the same "data" every time you 
> build the index, and if you build it every time from the beggining (not 
> rewriting the docs)
> 
> Can I rely on the index files always having the same names once index
> buildng is complete? 
> 
>  > No. That names will be rotating through your indexing.
> 
> This would greatly simplify my auto ftp'ing of the
> files up to a web server via an SSIS package.
> 
>  > Why don`t you just ftp the hole index dir? The directory is actually 
> the "index" by itself, and not its content.
> 
> []s,
> 
> 
> Lucas Frare A. Teixeira
> lucas.teixeira@accurate.com.br <mailto:lucas.teixeira@accurate.com.br>
> Tel: +55 11 3660.1622 - R3018
> 
> 
> 
> mick l escreveu:
>> Folks,
>> Could anyone tell me the significance of the naming of the cfs files in
>> the
>> luceneindex e.g.  _1pp.cfs, _2kk.cfs etc.
>> I have observed many differently named files being created temporarily
>> while
>> the index is being built, but the same set of named files are in place
>> once
>> the index has finished building.
>> Can I rely on the index files always having the same names once index
>> buildng is complete? This would greatly simplify my auto ftp'ing of the
>> files up to a web server via an SSIS package.
>> Thanks
>> M
>>   
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-CFS-naming-significance-tp18151693p18155342.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 13:38:18 2008
Return-Path: <java-user-return-34668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41994 invoked from network); 27 Jun 2008 13:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 13:38:18 -0000
Received: (qmail 64534 invoked by uid 500); 27 Jun 2008 13:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64501 invoked by uid 500); 27 Jun 2008 13:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64490 invoked by uid 99); 27 Jun 2008 13:38:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 06:38:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 13:37:21 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5RDbZ4q025289
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 09:37:36 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4864EC99.2030205@informatics.jax.org>
Date: Fri, 27 Jun 2008 09:35:21 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem with search an exact word and stemming
References: <220b8f60806250121l59e39dd0pa406cc9ddd724582@mail.gmail.com>	 <359a92830806250553u4f560f9bs47c43eb201cf6da9@mail.gmail.com>	 <4863C1DD.6070805@informatics.jax.org> <220b8f60806270033g46984304g20352102a7128e89@mail.gmail.com>
In-Reply-To: <220b8f60806270033g46984304g20352102a7128e89@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.27.131654
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Also, please note that I thought about it and realized that I mispoke 
when I sent out my original suggestion.  You don't want an untokenized 
field in your case, you want an unstemmed one instead.

This will allow you to get the functionality you are looking for.. at 
least I believe so ^^

Anyhow, best of luck!

Matt

renou oki wrote:
>  Thanks for the reply.
>
> I will try to add an other data field.
> I thought about this solution but i was not very sure. I thought that was an
> easier solution to do that...
>
>
> best regards
> Renou
>
> 2008/6/26 Matthew Hall <mhall@informatics.jax.org>:
>
>   
>> You could also add another data field to the index, with an untokenized
>> version of your data, and then use a multifield query to go against both the
>> stemmed and exact match parts of your search at the same time.
>>
>> This is a technique I've used quite often on my project with various
>> different requirements for the second field.  Mind you it makes the indexes
>> bigger, but unless your dataset is large its not really a huge problem.
>>
>> Matt
>>
>> Erick Erickson wrote:
>>
>>     
>>> The way I've solved this is to index the stemmed *and* a special
>>> token at the same position (see Synonym Analyzer). The From your
>>> example, say you're indexing progresser. You'd go ahead and index the
>>> stemmed version , "progress", AND you'd also index "progresser$"
>>> at the same offset. Now, when you want exact matches, search for
>>> the token with the $ at the end.
>>>
>>> This does make your index a bit larger, but not as much as you'd expect.
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Jun 25, 2008 at 4:21 AM, renou oki <occhipin@gmail.com> wrote:
>>>
>>>
>>>
>>>       
>>>> Hello,
>>>>
>>>> I have a stemmed index, but i want to search the exact form of a word.
>>>> I use French Analyzer, so for instance "progression", "progresser" are
>>>> indexed with the linguistic root "progress".
>>>> But if I want to search the word "progress" (and only this word), I have
>>>> to
>>>> many hits (because of "progression", "progresser"...)
>>>> The field is indexed, tokenized and no store...
>>>>
>>>> Is there a way to do this, I mean to search an exact word in a stemmed
>>>> index
>>>> ?
>>>> I suppose that I have to use the same analyzer for indexing and
>>>> searching.
>>>>
>>>>
>>>> I try with a PhraseQuery, with quotes...
>>>>
>>>> Ps : I use lucene 1.9.1
>>>>
>>>> Thanks
>>>> Renald
>>>>
>>>>
>>>>
>>>>         
>>>
>>>       
>> --
>> Matthew Hall
>> Software Engineer
>> Mouse Genome Informatics
>> mhall@informatics.jax.org
>> (207) 288-6012
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 14:58:44 2008
Return-Path: <java-user-return-34669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66660 invoked from network); 27 Jun 2008 14:58:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 14:58:43 -0000
Received: (qmail 81156 invoked by uid 500); 27 Jun 2008 14:58:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81127 invoked by uid 500); 27 Jun 2008 14:58:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81112 invoked by uid 99); 27 Jun 2008 14:58:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 07:58:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 14:57:43 +0000
Received: by an-out-0708.google.com with SMTP id c37so107262anc.49
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 07:58:01 -0700 (PDT)
Received: by 10.100.166.9 with SMTP id o9mr1754653ane.59.1214578680562;
        Fri, 27 Jun 2008 07:58:00 -0700 (PDT)
Received: by 10.100.212.4 with HTTP; Fri, 27 Jun 2008 07:57:59 -0700 (PDT)
Message-ID: <9ac0c6aa0806270757y5c84abb4q4638086fe963ec03@mail.gmail.com>
Date: Fri, 27 Jun 2008 10:57:59 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Can we know "number-of-documents-that-will-be-flushed"?
In-Reply-To: <18152451.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18147958.post@talk.nabble.com>
	 <9ac0c6aa0806270207t2590c275n1396e002d8fc1a42@mail.gmail.com>
	 <18152451.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, it will.  The javadocs for that method is rather confusing; I'll
correct it.

Mike

On Fri, Jun 27, 2008 at 6:44 AM, java_is_everything
<ajaygargnsit@gmail.com> wrote:
>
> Hi Mike. Thanks for the reply.
>
> Just one doubt. Will it work if the indexwriter directory is "not" a
> RAMDirectory?
>
> Looking forward to a reply.
>
> Ajay Garg
>
>
>
> Michael McCandless-2 wrote:
>>
>> IndexWriter.numRamDocs() should give you that.
>>
>> Mike
>>
>> java_is_everything <ajaygargnsit@gmail.com> wrote:
>>>
>>> Hi all.
>>>
>>> Is there a way to know "number-of-documents-that-will-be-flushed", just
>>> before giving a call to flush() method?
>>> I am currently using Lucene 2.2.0 API.
>>>
>>> Looking forward to replies.
>>>
>>> Ajay Garg
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Can-we-know-%22number-of-documents-that-will-be-flushed%22--tp18147958p18147958.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/Can-we-know-%22number-of-documents-that-will-be-flushed%22--tp18147958p18152451.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 14:58:55 2008
Return-Path: <java-user-return-34670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66779 invoked from network); 27 Jun 2008 14:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 14:58:55 -0000
Received: (qmail 83070 invoked by uid 500); 27 Jun 2008 14:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83043 invoked by uid 500); 27 Jun 2008 14:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83016 invoked by uid 99); 27 Jun 2008 14:58:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 07:58:45 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.199.154.16] (HELO IE1EHSOBE006.bigfish.com) (213.199.154.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 14:57:52 +0000
Received: from mail37-dub-R.bigfish.com (10.5.252.3) by
 IE1EHSOBE006.bigfish.com (10.5.252.26) with Microsoft SMTP Server id
 8.1.240.5; Fri, 27 Jun 2008 14:58:09 +0000
Received: from mail37-dub (localhost.localdomain [127.0.0.1])	by
 mail37-dub-R.bigfish.com (Postfix) with ESMTP id 11C751510199	for
 <java-user@lucene.apache.org>; Fri, 27 Jun 2008 14:58:09 +0000 (UTC)
X-BigFish: VPS-83(z57dlz14c3M542N1432R14e0Q98dR62a3Le66R7efV1447R1443R1805Mzzzzz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
Received: by mail37-dub (MessageSwitch) id 1214578686753135_2817; Fri, 27 Jun
 2008 14:58:06 +0000 (UCT)
Received: from us-voo-smtp05.internal.sungard.corp (unknown [216.83.166.46])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))	(No client certificate
 requested)	by mail37-dub.bigfish.com (Postfix) with ESMTP id 479D134005E	for
 <java-user@lucene.apache.org>; Fri, 27 Jun 2008 14:58:06 +0000 (UTC)
Received: from us-voo-smtp11.internal.sungard.corp ([168.162.128.53]) by
 us-voo-smtp05.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 10:57:32 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.82]) by
 us-voo-smtp11.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 10:57:32 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can you create a Field that is a copy of another Field?
Date: Fri, 27 Jun 2008 10:56:50 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7030E1BCB@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <90E5C784-BFEB-498B-9008-D3369848F7C6@apache.org>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-topic: Can you create a Field that is a copy of another Field?
Thread-Index: AcjYSLddC34JUqH1S2mIqoWL1fUXSwADxDMg
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2008 14:57:32.0608 (UTC) FILETIME=[20A61C00:01C8D866]
X-Virus-Checked: Checked by ClamAV on apache.org

Grant,

Thanks for the reply.  What we're trying to do is kind of esoteric and =
hard to explain without going into a lot of gory details so I was trying =
to keep it simple.  But I'll try to summarize.

We're trying to index entities in a relational database.  One of the =
entities we're trying to index is something called a Property.  Think of =
a Property kind of like the java.util.Properties class, i.e. a =
name/value pair. So some examples of Properties might be:

State=3DCalifornia
City=3DSacremento
ZipCode=3D94203
StreetName=3DSouth Main
StreetNumber=3D1234
Name=3DJoe Smith

Etc., etc.

(Note: this isn't the type of data we're storing... just trying to keep =
it simple.)

Imagine that the above list represents the the set of Properties that =
specify the address for a single person, Joe Smith.  Each Property in =
the set will be indexed by the values on the right-hand side of all the =
other name/value pairs in the set, i.e.: California, Sacremento, 94203, =
South, Main, 1234, Joe and Smith.

There are two types of queries that we want to do. =20
1) retrieve every Property matching the specified search terms, =
regardless of its left-hand side.  For this we want to create a field in =
EVERY Document called "keywords" and index it by the right-hand side =
values as described above.
2) retrieve every Property with a given left-hand side that matches the =
specified search terms.  For example, find all the 'City' Properties =
that match the term 'South'.  For this we want to create a field with =
the name of the left-hand side (e.g. State, City, ZipCode, etc.) but =
only in those Documents that correspond to a Property with that =
left-hand side.  Again this field will be indexed by the right-hand side =
values as described above.

So a couple of examples from the above list might look something like:

Document: State=3DCalifornia
  Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
  Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.

Document: City=3DSacremento
  Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
  Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.

Now if I'm interested in all the Properties that match the word "South", =
I search the index on the "keywords" field for the term "South".  This =
will return both documents above. =20

But if I'm only interested in any 'City' Properties that match the term =
'South' I search the index on the "City" field for the term "South".  =
This will only return the 'City=3DSacremento' document above because =
it's the only Document of the two that even has a 'City' field in it.

But in any case, the 'State' field and the 'City' field are indexed =
exactly the same way as the 'keywords' field.  Which is why I was =
wondering if there was a way to just create these fields as copies of =
the 'keywords' field.

Here is a code sample where I'm creating the index.  We're using =
Hibernate search to search the indexes, thus the "id" and =
"_hibernate_class" fields.

Query q =3D em.createQuery("select p from Property p");
           =20
List<Property> properties =3D q.getResultList();
   =20
for (Property p : properties)
{
    // Indexing property.
    Document doc =3D new Document();
    doc.add(new Field("id",=20
                       Integer.toString(p.getId()),=20
                       Field.Store.YES,=20
                       Field.Index.UN_TOKENIZED));
    doc.add(new Field("_hibernate_class",=20
                      Property.class.getCanonicalName(),=20
                      Field.Store.YES,=20
                      Field.Index.UN_TOKENIZED));
    TokenStream tokenStream =3D new PropertyTokenStream(p);
    doc.add(new Field("keywords", tokenStream));
    propertyIndexWriter.addDocument(doc);
    tokenStream.close();   =20
    // Here is where I would like to add the second field that is a copy
    // of the "keywords" field just created above.  Note: the call
    // p.getCharacteristic().getName() is getting the name of the=20
    // left-hand side of the Property as described above.
    TokenStream tokenStream =3D new PropertyTokenStream(p);
    doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
    propertyIndexWriter.addDocument(doc);
    tokenStream.close();
}

Hope that clears it up. =20

BTW, in case this seems like a strange way to index things, I will also =
add that we are doing it this way in order to impose a heirarchical =
structure on Properties.  So my example above should really look like =
this:

State=3DCalifornia
    City=3DSacremento
        ZipCode=3D94203
            StreetName=3DSouth Main
                StreetNumber=3D1234
                    Name=3DJoe Smith

Use your imagination to visualize what the tree might look like with =
millions of peoples' addresses.  Now imagine trying to tokenize the =
Document corresponding to "State=3DCalifornia".  Each path thru the tree =
from root (State) to leaf (Name) represents a set of Properties that is =
used to index the "keywords" field in the "State=3DCalifornia" document. =
 In other words it takes a long time to index.  This is why I'm looking =
for a way to just copy one field to another.

There is a lot more to our design to facilitate this hierarchical =
structure but this is probably more than you wanted to know. :)

thanks in advance,
--
Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak =
Valley Drive * Ann Arbor, MI 48103
Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
 www.sungard.com/energy=20


-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]=20
Sent: Friday, June 27, 2008 7:26 AM
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?


On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> =
<Bill.Chesky@sungard.com=20
 > wrote:

> Hello Lucene Gurus,
>
>
>
> I'm new to Lucene so sorry if this question basic or na=EFve.
>
>
>
> I have a Document to which I want to add a Field named, say, "foo" =20
> that is tokenized, indexed and unstored.  I am using the =20
> "Field(String name, TokenStream tokenStream)" constructor to create =20
> it.  The TokenStream may take a fairly long time to return all its =20
> tokens.
>

Can you share some code here?  What's the reasoning behind using it =20
(not saying it's wrong, just wondering what led you to it)?  Are you =20
just loading it up from a file, string or something or do you have =20
another reason?


>
>
> Now for querying reasons I want to add another Field named, say, =20
> "bar", that is tokenized and indexed in exactly the same way as =20
> "foo".  I could just pass it the same TokenStream that I used to =20
> create "foo" but since it takes so long to return all its tokens, I =20
> was wondering if there is a way to say, create "bar" as a copy of =20
> "foo".  I looked thru the javadoc but didn't see anything.
>
>

By exactly the same, do you really mean exactly the same?  What's the =20
point of that?  What are the "querying reasons"?

You may want to look at the TeeTokenFilter and the SinkTokenizer, but =20
I guess I'd like to know more about what's going on before fully =20
recommending anything.


>
> Is this possible in Lucene or do I just have to bite the bullet =20
> build the new Field using the same TokenStream again?
>
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =20
> Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:bill.chesky@sungard.com=20
> >
> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>
>
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 15:45:47 2008
Return-Path: <java-user-return-34671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21582 invoked from network); 27 Jun 2008 15:45:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 15:45:47 -0000
Received: (qmail 57483 invoked by uid 500); 27 Jun 2008 15:45:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57458 invoked by uid 500); 27 Jun 2008 15:45:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57447 invoked by uid 99); 27 Jun 2008 15:45:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 08:45:42 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 15:44:52 +0000
To: java-user@lucene.apache.org
Subject: Sorting issues
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF4BFA1DEA.287A3ABF-ON86257475.00558B41-86257475.005685B1@nasi.com>
From: Robert.Hastings@ancept.com
Date: Fri, 27 Jun 2008 10:44:37 -0500
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 06/27/2008
 10:45:06,
	Serialize complete at 06/27/2008 10:45:06
Content-Type: multipart/alternative; boundary="=_alternative 005685AE86257475_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005685AE86257475_=
Content-Type: text/plain; charset="US-ASCII"

I just implemented a sorting feature on our application where the user can 
change the sort on a query and reexecute the search.  It works fine on 
text fields where most of the documents have different field values. 
However, on fields that are categories, that is, there are only four 
distinct values for the category field and
all of the documents fit into a distinct category, the results are not in 
the sorted values.

All of the sort fields are untokenized and stored. and each document has 
only one value for the sorted field.

Are there any known issues (Lucene 2.3.0)?  How can I go about debugging 
this? I have tried Luke, also I have the Lucene source.

Bob Hastings
Ancept Inc.
--=_alternative 005685AE86257475_=--

From java-user-return-34672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 15:52:34 2008
Return-Path: <java-user-return-34672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23946 invoked from network); 27 Jun 2008 15:52:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 15:52:34 -0000
Received: (qmail 68381 invoked by uid 500); 27 Jun 2008 15:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68352 invoked by uid 500); 27 Jun 2008 15:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68341 invoked by uid 99); 27 Jun 2008 15:52:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 08:52:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 15:51:36 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5RFpTAj007166
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 11:51:29 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48650BF8.3080308@informatics.jax.org>
Date: Fri, 27 Jun 2008 11:49:12 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?
References: <87D5FFD601E4BC488D51E45D414706C7030E1BCB@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7030E1BCB@VOO-EXCHANGE01.internal.sungard.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.27.152836
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='SUPERLONG_LINE 0.05, BODY_SIZE_9000_9999 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure if this is helpful, but I do something VERY similar to this 
in my project.

So, for the example you are citing I would design my index as follows:

db_key, data, data_type

Where the data_type is some sort of value representing the thing that's 
on the left hand side of your property relationship there.

So, then in order to satisfy your search, the queries become quite simple:

The search for everything simply searches against the data field in this 
index, wheras the search for a specific data_type + searchterm becomes a 
simple boolean query, that has a MUST clause for the data_type value.

As an even BETTER bonus, this will then mean that all of your searchable 
values will now have relevance to each other at scoring time, which is 
quite useful in the long run.

Hope this helps you out,

Matt

Bill.Chesky@sungard.com wrote:
> Grant,
>
> Thanks for the reply.  What we're trying to do is kind of esoteric and hard to explain without going into a lot of gory details so I was trying to keep it simple.  But I'll try to summarize.
>
> We're trying to index entities in a relational database.  One of the entities we're trying to index is something called a Property.  Think of a Property kind of like the java.util.Properties class, i.e. a name/value pair. So some examples of Properties might be:
>
> State=California
> City=Sacremento
> ZipCode=94203
> StreetName=South Main
> StreetNumber=1234
> Name=Joe Smith
>
> Etc., etc.
>
> (Note: this isn't the type of data we're storing... just trying to keep it simple.)
>
> Imagine that the above list represents the the set of Properties that specify the address for a single person, Joe Smith.  Each Property in the set will be indexed by the values on the right-hand side of all the other name/value pairs in the set, i.e.: California, Sacremento, 94203, South, Main, 1234, Joe and Smith.
>
> There are two types of queries that we want to do.  
> 1) retrieve every Property matching the specified search terms, regardless of its left-hand side.  For this we want to create a field in EVERY Document called "keywords" and index it by the right-hand side values as described above.
> 2) retrieve every Property with a given left-hand side that matches the specified search terms.  For example, find all the 'City' Properties that match the term 'South'.  For this we want to create a field with the name of the left-hand side (e.g. State, City, ZipCode, etc.) but only in those Documents that correspond to a Property with that left-hand side.  Again this field will be indexed by the right-hand side values as described above.
>
> So a couple of examples from the above list might look something like:
>
> Document: State=California
>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>   Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>
> Document: City=Sacremento
>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>   Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>
> Now if I'm interested in all the Properties that match the word "South", I search the index on the "keywords" field for the term "South".  This will return both documents above.  
>
> But if I'm only interested in any 'City' Properties that match the term 'South' I search the index on the "City" field for the term "South".  This will only return the 'City=Sacremento' document above because it's the only Document of the two that even has a 'City' field in it.
>
> But in any case, the 'State' field and the 'City' field are indexed exactly the same way as the 'keywords' field.  Which is why I was wondering if there was a way to just create these fields as copies of the 'keywords' field.
>
> Here is a code sample where I'm creating the index.  We're using Hibernate search to search the indexes, thus the "id" and "_hibernate_class" fields.
>
> Query q = em.createQuery("select p from Property p");
>             
> List<Property> properties = q.getResultList();
>     
> for (Property p : properties)
> {
>     // Indexing property.
>     Document doc = new Document();
>     doc.add(new Field("id", 
>                        Integer.toString(p.getId()), 
>                        Field.Store.YES, 
>                        Field.Index.UN_TOKENIZED));
>     doc.add(new Field("_hibernate_class", 
>                       Property.class.getCanonicalName(), 
>                       Field.Store.YES, 
>                       Field.Index.UN_TOKENIZED));
>     TokenStream tokenStream = new PropertyTokenStream(p);
>     doc.add(new Field("keywords", tokenStream));
>     propertyIndexWriter.addDocument(doc);
>     tokenStream.close();    
>     // Here is where I would like to add the second field that is a copy
>     // of the "keywords" field just created above.  Note: the call
>     // p.getCharacteristic().getName() is getting the name of the 
>     // left-hand side of the Property as described above.
>     TokenStream tokenStream = new PropertyTokenStream(p);
>     doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>     propertyIndexWriter.addDocument(doc);
>     tokenStream.close();
> }
>
> Hope that clears it up.  
>
> BTW, in case this seems like a strange way to index things, I will also add that we are doing it this way in order to impose a heirarchical structure on Properties.  So my example above should really look like this:
>
> State=California
>     City=Sacremento
>         ZipCode=94203
>             StreetName=South Main
>                 StreetNumber=1234
>                     Name=Joe Smith
>
> Use your imagination to visualize what the tree might look like with millions of peoples' addresses.  Now imagine trying to tokenize the Document corresponding to "State=California".  Each path thru the tree from root (State) to leaf (Name) represents a set of Properties that is used to index the "keywords" field in the "State=California" document.  In other words it takes a long time to index.  This is why I'm looking for a way to just copy one field to another.
>
> There is a lot more to our design to facilitate this hierarchical structure but this is probably more than you wanted to know. :)
>
> thanks in advance,
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy 
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org] 
> Sent: Friday, June 27, 2008 7:26 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
>
> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> <Bill.Chesky@sungard.com 
>  > wrote:
>
>   
>> Hello Lucene Gurus,
>>
>>
>>
>> I'm new to Lucene so sorry if this question basic or nave.
>>
>>
>>
>> I have a Document to which I want to add a Field named, say, "foo"  
>> that is tokenized, indexed and unstored.  I am using the  
>> "Field(String name, TokenStream tokenStream)" constructor to create  
>> it.  The TokenStream may take a fairly long time to return all its  
>> tokens.
>>
>>     
>
> Can you share some code here?  What's the reasoning behind using it  
> (not saying it's wrong, just wondering what led you to it)?  Are you  
> just loading it up from a file, string or something or do you have  
> another reason?
>
>
>   
>> Now for querying reasons I want to add another Field named, say,  
>> "bar", that is tokenized and indexed in exactly the same way as  
>> "foo".  I could just pass it the same TokenStream that I used to  
>> create "foo" but since it takes so long to return all its tokens, I  
>> was wondering if there is a way to say, create "bar" as a copy of  
>> "foo".  I looked thru the javadoc but didn't see anything.
>>
>>
>>     
>
> By exactly the same, do you really mean exactly the same?  What's the  
> point of that?  What are the "querying reasons"?
>
> You may want to look at the TeeTokenFilter and the SinkTokenizer, but  
> I guess I'd like to know more about what's going on before fully  
> recommending anything.
>
>
>   
>> Is this possible in Lucene or do I just have to bite the bullet  
>> build the new Field using the same TokenStream again?
>>
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194  
>> Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com <mailto:bill.chesky@sungard.com 
>>     
>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>
>>
>>
>>     
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 15:58:12 2008
Return-Path: <java-user-return-34673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25931 invoked from network); 27 Jun 2008 15:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 15:58:11 -0000
Received: (qmail 81260 invoked by uid 500); 27 Jun 2008 15:58:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81233 invoked by uid 500); 27 Jun 2008 15:58:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81222 invoked by uid 99); 27 Jun 2008 15:58:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 08:58:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 15:57:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so564947rvb.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 08:57:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RtFZdXRe7Yq+qcZxr46kPOxGvDxFbraR/0bKP79r1Dk=;
        b=BtVELnaJ2lDsN6SLYXlvzQv5BykkHncYrmoV1N58PuLQuKK7JCj2AEalNYOIuTDoxV
         /ggIG0oK2KR9I+KVYpJ2QfmvvyaNFcB8MX2VyFHtsBnnfDJ9siHql5OKjFEKnCMenz6X
         EOu5VBbQEtg5dBevNOkYlBi+Uz0LvCJHn7G04=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FcNFLOnOG1Z7nHpjKSI46OdWDHdpjIPl1tLKllbqi/Xpo52pXVvFmHVrNjo4Xfl/DC
         NTg3wVUsOn2wnYFIM/h0vR3YZMba/3whpMoco8HTj1ePJWitnAlFfZz2F0lsQMu/TEIE
         5Jx7kPxRFvwmSoYRTQLkowFB6IV3U+0CJ8Uz8=
Received: by 10.141.71.14 with SMTP id y14mr917317rvk.24.1214582251681;
        Fri, 27 Jun 2008 08:57:31 -0700 (PDT)
Received: by 10.140.208.3 with HTTP; Fri, 27 Jun 2008 08:57:31 -0700 (PDT)
Message-ID: <2dab92100806270857p5ef27292q2d2a0462d581f32c@mail.gmail.com>
Date: Fri, 27 Jun 2008 09:57:31 -0600
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching any part of a string
In-Reply-To: <359a92830806251125o1dea19dbt11b2397cd1d20c95@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10775_24433324.1214582251694"
References: <2dab92100806251047j3ae5fa3dncdc466be2caad1b2@mail.gmail.com>
	 <359a92830806251125o1dea19dbt11b2397cd1d20c95@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10775_24433324.1214582251694
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

Thanks for the suggestions. I've used indexed n-grams before to implement
spell-checking; I think in this case I may take a look at WildcardTermEnum
and RegexTermEnum. It seems like a good solution because I am doing my own
results ordering so Lucene's scoring is irrelevant in this case. I wasn't
aware of these classes so thanks for mentioning them!

Best,

Mark


On Wed, Jun 25, 2008 at 12:25 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> Warning: I don't understand ngrams at all, so you should
> read this as a plea for those who do to tell me I'm off base <G>.
>
>
> But I wonder if indexing as n-grams would be a way to
> cope with this issue that lots of people have. *assuming*
> you are thinking about single terms, then it seems that
> "smith" would be tokenized as sm, mi, it, th. Then
> a wildcard search for "mi it" would hit (as a phrase
> query or a SpanQuery with slop of 0). It seems like there
> are several issues to work out here, especially including
> multiple terns, matching mixtures of wildcards and
> non-wildcards, etc.
>
> But it seems do-able....
>
>
> Another approach is to use WildcardTernEnum and/or
> RegexTermEnum to build up a filter and use the filter as
> part of the query. What you loose with this approach is
> that the filter (and wildcards) then don't contribute to
> scoring. But this isn't a huge price to pay...
>
> Best
> Erick
>
> On Wed, Jun 25, 2008 at 1:47 PM, Mark Ferguson <mark.a.ferguson@gmail.com>
> wrote:
>
> > Hello,
> >
> > I am currently keeping an index of all our client's usernames. The search
> > functionality is implemented using a PrefixFilter. However, we would like
> > to
> > expand the functionality to be able to search any part of a user's name,
> > rather than requiring that it begin with the query string. So for
> example,
> > the search term 'mit' would return the username 'smith'.
> >
> > I am hesitant to use a WildcardQuery starting with an asterisk because
> I've
> > read about why this is a bad idea. I am looking for suggestions on the
> best
> > way to implement this.
> >
> > The idea I've come up with is to index each part of the username; so for
> > example, if the username is 'mark', you would index mark, ark, rk, and k.
> > Then you could still use the PrefixFilter. I'm not overly concerned about
> > how this would enlarge the index because usernames tend to be fairly
> short.
> >
> > I am very much open to other suggestions however. Does anyone have any
> > opinions or ideas that they can share?
> >
> > Thanks very much.
> >
> > Mark
> >
>

------=_Part_10775_24433324.1214582251694--

From java-user-return-34674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 16:29:54 2008
Return-Path: <java-user-return-34674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34850 invoked from network); 27 Jun 2008 16:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 16:29:53 -0000
Received: (qmail 29414 invoked by uid 500); 27 Jun 2008 16:29:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29383 invoked by uid 500); 27 Jun 2008 16:29:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29372 invoked by uid 99); 27 Jun 2008 16:29:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 09:29:48 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 16:28:55 +0000
Received: by wr-out-0506.google.com with SMTP id c30so509494wra.21
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 09:29:13 -0700 (PDT)
Received: by 10.101.68.10 with SMTP id v10mr1911220ank.45.1214584153080;
        Fri, 27 Jun 2008 09:29:13 -0700 (PDT)
Received: by 10.100.212.4 with HTTP; Fri, 27 Jun 2008 09:29:13 -0700 (PDT)
Message-ID: <9ac0c6aa0806270929n3aa255a2lc036c88a40f19704@mail.gmail.com>
Date: Fri, 27 Jun 2008 12:29:13 -0400
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Doubt on IndexWriter.close()
In-Reply-To: <18153935.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18153935.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Which version of Lucene are you using?  Recent versions do not allow
addDocument to be called after close.

Mike

java_is_everything <ajaygargnsit@gmail.com> wrote:
>
> Hi all.
>
> IndexWriter.close() API states that ::
>
> "Flushes all changes to an index and closes all associated files.".
>
> What does "closes all associated files" mean, since we are apparently able
> to still addDocument() even after calling IndexWriter.close() ?
>
>
> Looking forward to a reply.
>
> Ajay garg
> --
> View this message in context: http://www.nabble.com/Doubt-on-IndexWriter.close%28%29-tp18153935p18153935.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 17:20:13 2008
Return-Path: <java-user-return-34675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57191 invoked from network); 27 Jun 2008 17:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 17:20:13 -0000
Received: (qmail 22508 invoked by uid 500); 27 Jun 2008 17:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22477 invoked by uid 500); 27 Jun 2008 17:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22466 invoked by uid 99); 27 Jun 2008 17:20:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 10:20:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 17:19:18 +0000
Received: by yx-out-2324.google.com with SMTP id 31so180042yxl.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 10:19:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9jmzn2WtUY9D91NvDiLGLY46yxSrfLiu3MUitkVz2o4=;
        b=PHKTOpjTBxML6hMHCYAqDNASHIkk2NhXtwuwssMLp5dZUJ1vr6Wy0axP7DKzHiznUb
         AtFsXZeE2vWR9W0Ay5oro70V8wkdnbb0xFkIH0YUUfLqtwQAYiGNM6Y93CYjjeRxNu5M
         +4CeMG8ayoyG5KiT8FZ5Qx3E13D99WQQ/T3X8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QhkdZOSTa4Su+ZO3iahQn6YOrlk5zny2csaXrvQyGvNYKX4uTKcjJw+mfUEj+Grag+
         OIJlT2Nbo8j/53G8kBkdTQO3ue55jIg6Xl0POPgpLygTM2+EOGNUWbNjE5t3RozOw35c
         OOaduTw9W6GthMVUWTIg4VuSmHE3YuggdXf0k=
Received: by 10.151.156.17 with SMTP id i17mr2552070ybo.215.1214587177793;
        Fri, 27 Jun 2008 10:19:37 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 27 Jun 2008 10:19:37 -0700 (PDT)
Message-ID: <359a92830806271019i34d87b71nd210fb0da6099080@mail.gmail.com>
Date: Fri, 27 Jun 2008 13:19:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting issues
In-Reply-To: <OF4BFA1DEA.287A3ABF-ON86257475.00558B41-86257475.005685B1@nasi.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6183_6004916.1214587177789"
References: <OF4BFA1DEA.287A3ABF-ON86257475.00558B41-86257475.005685B1@nasi.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6183_6004916.1214587177789
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's surprising. Could you post a brief example of your
index and search code?

It sounds like you're saying
docs 1, 2, 3 all have category aaa
docs 4, 5, 6 all have category bbb
docs 7, 8, 9 all have category ccc

But if you search for category:bbb
you don't get docs 4, 5, and 6

Is this a fair statement of the issue?

Best
Erick


On Fri, Jun 27, 2008 at 11:44 AM, <Robert.Hastings@ancept.com> wrote:

> I just implemented a sorting feature on our application where the user can
> change the sort on a query and reexecute the search.  It works fine on
> text fields where most of the documents have different field values.
> However, on fields that are categories, that is, there are only four
> distinct values for the category field and
> all of the documents fit into a distinct category, the results are not in
> the sorted values.
>
> All of the sort fields are untokenized and stored. and each document has
> only one value for the sorted field.
>
> Are there any known issues (Lucene 2.3.0)?  How can I go about debugging
> this? I have tried Luke, also I have the Lucene source.
>
> Bob Hastings
> Ancept Inc.

------=_Part_6183_6004916.1214587177789--

From java-user-return-34676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 17:38:24 2008
Return-Path: <java-user-return-34676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64303 invoked from network); 27 Jun 2008 17:38:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 17:38:24 -0000
Received: (qmail 49935 invoked by uid 500); 27 Jun 2008 17:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49908 invoked by uid 500); 27 Jun 2008 17:38:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49897 invoked by uid 99); 27 Jun 2008 17:38:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 10:38:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 17:37:25 +0000
Received: by yx-out-2324.google.com with SMTP id 31so183880yxl.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 10:37:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QToKa0Tn0KyN3YPhUTiPShIVyReMp3GR5yjm8ZBZkAo=;
        b=wWcTqWcyi/EQFxbnfgRK/hOBP8f2+B9wguOgdwb9tIcnHk6VGg4cXovVtLgd6xFmVR
         oYireDxauhD3v+37eo/hi1wFVNMwkfaZ7Pvj8mZvrciz9AGW5n1MT9n1oEFV9VjbMyLa
         J9lobrFfUGBOwI0jOTZ9RI2mwSo3gBCmdv0ks=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dKlBPTr6MzV2uHD/jk0gV0dJh3vu7iFLzDoLm0e9mjNN027TYe+YgesOv3aMXB/x4a
         r23AmW3JNjZBA2w5iaKpvU+NDixh0nA+aQK3VUXg0FjC4iKRdAjehnpYTTA3kA3PpIS3
         RAj0qRAUrge5QqYFv63Vlm/7hvtl0TntpCQrg=
Received: by 10.150.202.14 with SMTP id z14mr2620554ybf.95.1214588247529;
        Fri, 27 Jun 2008 10:37:27 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 27 Jun 2008 10:37:27 -0700 (PDT)
Message-ID: <359a92830806271037v60015287l82288739d56d7a35@mail.gmail.com>
Date: Fri, 27 Jun 2008 13:37:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7030E1BCB@VOO-EXCHANGE01.internal.sungard.corp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6298_18643622.1214588247547"
References: <90E5C784-BFEB-498B-9008-D3369848F7C6@apache.org>
	 <87D5FFD601E4BC488D51E45D414706C7030E1BCB@VOO-EXCHANGE01.internal.sungard.corp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6298_18643622.1214588247547
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

How sure are you that the TokenStream is that expensive? But
assuming you are AND that the values for these properties
aren't that big, the simple-minded approach that comes to my
simple mind is to just iterate through the stream yourself, assemble
a string from the returned tokens and pass the string to the two add
calls.

This might be worth it if your tokenizer is going to the DB or something...=
.

Best
Erick


On Fri, Jun 27, 2008 at 10:56 AM, <Bill.Chesky@sungard.com> wrote:

> Grant,
>
> Thanks for the reply.  What we're trying to do is kind of esoteric and ha=
rd
> to explain without going into a lot of gory details so I was trying to ke=
ep
> it simple.  But I'll try to summarize.
>
> We're trying to index entities in a relational database.  One of the
> entities we're trying to index is something called a Property.  Think of =
a
> Property kind of like the java.util.Properties class, i.e. a name/value
> pair. So some examples of Properties might be:
>
> State=3DCalifornia
> City=3DSacremento
> ZipCode=3D94203
> StreetName=3DSouth Main
> StreetNumber=3D1234
> Name=3DJoe Smith
>
> Etc., etc.
>
> (Note: this isn't the type of data we're storing... just trying to keep i=
t
> simple.)
>
> Imagine that the above list represents the the set of Properties that
> specify the address for a single person, Joe Smith.  Each Property in the
> set will be indexed by the values on the right-hand side of all the other
> name/value pairs in the set, i.e.: California, Sacremento, 94203, South,
> Main, 1234, Joe and Smith.
>
> There are two types of queries that we want to do.
> 1) retrieve every Property matching the specified search terms, regardles=
s
> of its left-hand side.  For this we want to create a field in EVERY Docum=
ent
> called "keywords" and index it by the right-hand side values as described
> above.
> 2) retrieve every Property with a given left-hand side that matches the
> specified search terms.  For example, find all the 'City' Properties that
> match the term 'South'.  For this we want to create a field with the name=
 of
> the left-hand side (e.g. State, City, ZipCode, etc.) but only in those
> Documents that correspond to a Property with that left-hand side.  Again
> this field will be indexed by the right-hand side values as described abo=
ve.
>
> So a couple of examples from the above list might look something like:
>
> Document: State=3DCalifornia
>  Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>  Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>
> Document: City=3DSacremento
>  Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>  Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>
> Now if I'm interested in all the Properties that match the word "South", =
I
> search the index on the "keywords" field for the term "South".  This will
> return both documents above.
>
> But if I'm only interested in any 'City' Properties that match the term
> 'South' I search the index on the "City" field for the term "South".  Thi=
s
> will only return the 'City=3DSacremento' document above because it's the =
only
> Document of the two that even has a 'City' field in it.
>
> But in any case, the 'State' field and the 'City' field are indexed exact=
ly
> the same way as the 'keywords' field.  Which is why I was wondering if th=
ere
> was a way to just create these fields as copies of the 'keywords' field.
>
> Here is a code sample where I'm creating the index.  We're using Hibernat=
e
> search to search the indexes, thus the "id" and "_hibernate_class" fields=
.
>
> Query q =3D em.createQuery("select p from Property p");
>
> List<Property> properties =3D q.getResultList();
>
> for (Property p : properties)
> {
>    // Indexing property.
>    Document doc =3D new Document();
>    doc.add(new Field("id",
>                       Integer.toString(p.getId()),
>                       Field.Store.YES,
>                       Field.Index.UN_TOKENIZED));
>    doc.add(new Field("_hibernate_class",
>                      Property.class.getCanonicalName(),
>                      Field.Store.YES,
>                      Field.Index.UN_TOKENIZED));
>    TokenStream tokenStream =3D new PropertyTokenStream(p);
>    doc.add(new Field("keywords", tokenStream));
>    propertyIndexWriter.addDocument(doc);
>    tokenStream.close();
>    // Here is where I would like to add the second field that is a copy
>    // of the "keywords" field just created above.  Note: the call
>    // p.getCharacteristic().getName() is getting the name of the
>    // left-hand side of the Property as described above.
>    TokenStream tokenStream =3D new PropertyTokenStream(p);
>    doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>    propertyIndexWriter.addDocument(doc);
>    tokenStream.close();
> }
>
> Hope that clears it up.
>
> BTW, in case this seems like a strange way to index things, I will also a=
dd
> that we are doing it this way in order to impose a heirarchical structure=
 on
> Properties.  So my example above should really look like this:
>
> State=3DCalifornia
>    City=3DSacremento
>        ZipCode=3D94203
>            StreetName=3DSouth Main
>                StreetNumber=3D1234
>                    Name=3DJoe Smith
>
> Use your imagination to visualize what the tree might look like with
> millions of peoples' addresses.  Now imagine trying to tokenize the Docum=
ent
> corresponding to "State=3DCalifornia".  Each path thru the tree from root
> (State) to leaf (Name) represents a set of Properties that is used to ind=
ex
> the "keywords" field in the "State=3DCalifornia" document.  In other word=
s it
> takes a long time to index.  This is why I'm looking for a way to just co=
py
> one field to another.
>
> There is a lot more to our design to facilitate this hierarchical structu=
re
> but this is probably more than you wanted to know. :)
>
> thanks in advance,
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak
> Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Friday, June 27, 2008 7:26 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
>
> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> <
> Bill.Chesky@sungard.com
>  > wrote:
>
> > Hello Lucene Gurus,
> >
> >
> >
> > I'm new to Lucene so sorry if this question basic or na=EFve.
> >
> >
> >
> > I have a Document to which I want to add a Field named, say, "foo"
> > that is tokenized, indexed and unstored.  I am using the
> > "Field(String name, TokenStream tokenStream)" constructor to create
> > it.  The TokenStream may take a fairly long time to return all its
> > tokens.
> >
>
> Can you share some code here?  What's the reasoning behind using it
> (not saying it's wrong, just wondering what led you to it)?  Are you
> just loading it up from a file, string or something or do you have
> another reason?
>
>
> >
> >
> > Now for querying reasons I want to add another Field named, say,
> > "bar", that is tokenized and indexed in exactly the same way as
> > "foo".  I could just pass it the same TokenStream that I used to
> > create "foo" but since it takes so long to return all its tokens, I
> > was wondering if there is a way to say, create "bar" as a copy of
> > "foo".  I looked thru the javadoc but didn't see anything.
> >
> >
>
> By exactly the same, do you really mean exactly the same?  What's the
> point of that?  What are the "querying reasons"?
>
> You may want to look at the TeeTokenFilter and the SinkTokenizer, but
> I guess I'd like to know more about what's going on before fully
> recommending anything.
>
>
> >
> > Is this possible in Lucene or do I just have to bite the bullet
> > build the new Field using the same TokenStream again?
> >
> > --
> > Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194
> > Oak Valley Drive * Ann Arbor, MI 48103
> > Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com <mailto:
> bill.chesky@sungard.com
> > >
> > www.sungard.com/energy <blocked::http://www.sungard.com/energy>
> >
> >
> >
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6298_18643622.1214588247547--

From java-user-return-34677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 17:53:19 2008
Return-Path: <java-user-return-34677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68438 invoked from network); 27 Jun 2008 17:53:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 17:53:19 -0000
Received: (qmail 66211 invoked by uid 500); 27 Jun 2008 17:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66171 invoked by uid 500); 27 Jun 2008 17:53:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66160 invoked by uid 99); 27 Jun 2008 17:53:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 10:53:14 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.9] (HELO relay00.pair.com) (209.68.5.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Jun 2008 17:52:25 +0000
Received: (qmail 73562 invoked from network); 27 Jun 2008 17:52:42 -0000
Received: from unknown (HELO ?192.168.2.2?) (unknown)
  by unknown with SMTP; 27 Jun 2008 17:52:42 -0000
X-pair-Authenticated: 68.84.138.127
Subject: Read index into RAM?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Fri, 27 Jun 2008 13:52:42 -0400
Message-Id: <1214589162.6790.159.camel@tetsiaga>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
   Is it possible to read a disk-based index into RAM (entirely) and
have all searches operate on it there? I saw some RAMDirectory examples,
but it didn't look like it will transfer a disk index into RAM.

thanks
D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 18:33:59 2008
Return-Path: <java-user-return-34678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90729 invoked from network); 27 Jun 2008 18:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 18:33:58 -0000
Received: (qmail 21568 invoked by uid 500); 27 Jun 2008 18:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21524 invoked by uid 500); 27 Jun 2008 18:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21513 invoked by uid 99); 27 Jun 2008 18:33:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:33:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 18:33:03 +0000
Received: by yx-out-2324.google.com with SMTP id 31so194056yxl.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 11:33:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=oyYk5qXu8kFC9cD+wppaGsi5o8OrqDK1cd+yqI9ZlCI=;
        b=XxjmZ6U9qdRrz2/nvQPtnP748bZvCH1NbWojGzuD+1/mOhTtTzbdQEgg7XdALwr6Pr
         8vcsKGO+PmUgNtlXRL6NVbvK5b+w9bHpT5pMj8KDnhWTFhjt7ecwZ0fxXrhtS/7QAFei
         EM4gdr6mH0E23r84+Q8L5iyMo2vDdWsmGUCew=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oT8cohk7zU/Ub5R7HMndmD0MHjI63r7W3DMSlrRsWL9NuWyazIuvgNZtact12mqKEC
         LY9eo40Vjg8/kjGVheWscVdkczCV2oSGkv6MUsnKxVe4eu6IErQUYqNxBZGFXm2oleG/
         xjuZEEgGKgoH8aMJBzK0BhHHfXmmYwImLmF6I=
Received: by 10.151.112.16 with SMTP id p16mr2708049ybm.37.1214591602186;
        Fri, 27 Jun 2008 11:33:22 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 27 Jun 2008 11:33:22 -0700 (PDT)
Message-ID: <359a92830806271133h296ffc23i346115342ffaf9e2@mail.gmail.com>
Date: Fri, 27 Jun 2008 14:33:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read index into RAM?
In-Reply-To: <1214589162.6790.159.camel@tetsiaga>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6417_27821148.1214591602255"
References: <1214589162.6790.159.camel@tetsiaga>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6417_27821148.1214591602255
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I posted this reply to this question last time you posted it....


>From the docs...

RAMDirectory

public *RAMDirectory*(Directory dir)
             throws IOException
<http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>

Creates a new RAMDirectory instance from a different
Directoryimplementation. This can be used to load a disk-based index
into memory.

Seems like exactly what you're asking for...

Best
Erick

On Fri, Jun 27, 2008 at 1:52 PM, Darren Govoni <darren@ontrenet.com> wrote:

> Hi,
>   Is it possible to read a disk-based index into RAM (entirely) and
> have all searches operate on it there? I saw some RAMDirectory examples,
> but it didn't look like it will transfer a disk index into RAM.
>
> thanks
> D
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6417_27821148.1214591602255--

From java-user-return-34679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 18:35:01 2008
Return-Path: <java-user-return-34679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91297 invoked from network); 27 Jun 2008 18:35:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 18:35:01 -0000
Received: (qmail 24216 invoked by uid 500); 27 Jun 2008 18:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24193 invoked by uid 500); 27 Jun 2008 18:34:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24182 invoked by uid 99); 27 Jun 2008 18:34:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:34:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 18:34:05 +0000
Received: by ug-out-1314.google.com with SMTP id h3so7278ugf.29
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 11:34:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6y3ZiQjXQEdUpCAQtzVe7XjY92ATkIusWaChTD1ug4Y=;
        b=ObLH5tlqqm8o2nTE0lgL7e4SeJ/Sn0YxBHFgAvd4ot/9UeYNiiZl6iwiXIB8RcOgnq
         Oh6eqorqvZG3PImMnL4Ms5q75CJiS5CcBZkxvTB7kssbepGT+/fJNFiL0HOC0ED22GBB
         3yx6REdeRIvMYz06XmC4adthfmsv/KE74dF9k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=CvvtZqjP8XzSW/uPuC43u+sfG4pUKgEbISNgHzK0Sfas8k63NSAnKcAunR+Ns9wsPi
         ggKjp2qRKWM9rFW2qqkrFCb6v/imG3l7ZQ5cfYSiCtvQZ9IRQ+6hfNii73h7kLAp1zKP
         gaXGJ5AdmY/j2Cmvd+02/ehLilVhDIsV6dyBg=
Received: by 10.124.67.16 with SMTP id p16mr403569mka.179.1214591663252;
        Fri, 27 Jun 2008 11:34:23 -0700 (PDT)
Received: by 10.125.162.6 with HTTP; Fri, 27 Jun 2008 11:34:23 -0700 (PDT)
Message-ID: <867513fe0806271134r1c66412dj115b204eb15ba6a2@mail.gmail.com>
Date: Sat, 28 Jun 2008 00:04:23 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Read index into RAM?
In-Reply-To: <1214589162.6790.159.camel@tetsiaga>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9147_3039768.1214591663229"
References: <1214589162.6790.159.camel@tetsiaga>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9147_3039768.1214591663229
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Darren,
Assuming that you use a *nix/*nux machine, the best way to work that out
would be to have your index moved to a tmpfs. Steps to have that done :
1. Mount a tmpfs  (It uses RAM by default)
2. Copy your index to your new mount point
3. Open your index readers pointing to the new directory location (on tmpfs)

This does the job pretty neat.

--
Anshum Gupta
Naukri Labs




On Fri, Jun 27, 2008 at 11:22 PM, Darren Govoni <darren@ontrenet.com> wrote:

> Hi,
>   Is it possible to read a disk-based index into RAM (entirely) and
> have all searches operate on it there? I saw some RAMDirectory examples,
> but it didn't look like it will transfer a disk index into RAM.
>
> thanks
> D
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_9147_3039768.1214591663229--

From java-user-return-34680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 18:42:09 2008
Return-Path: <java-user-return-34680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93825 invoked from network); 27 Jun 2008 18:42:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 18:42:09 -0000
Received: (qmail 30376 invoked by uid 500); 27 Jun 2008 18:42:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30342 invoked by uid 500); 27 Jun 2008 18:42:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30331 invoked by uid 99); 27 Jun 2008 18:42:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:42:02 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.46.51.74] (HELO mail159-sin-R.bigfish.com) (207.46.51.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 18:41:09 +0000
Received: from mail159-sin (localhost.localdomain [127.0.0.1])
	by mail159-sin-R.bigfish.com (Postfix) with ESMTP id 5AA2CAC83E4
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 18:39:27 +0000 (UTC)
X-BigFish: VPS-100(z57dlz14c3M328cM542N1418M1432R14e0Q98dR11f6O62a3Le66R7efV1447R1443R1805Mzzzzz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
X-MS-Exchange-Organization-Antispam-Report: OrigIP: 216.83.166.45;Service: EHS
Received: by mail159-sin (MessageSwitch) id 1214591954142938_5680; Fri, 27 Jun 2008 18:39:14 +0000 (UCT)
Received: from us-voo-smtp04.internal.sungard.corp (unknown [216.83.166.45])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail159-sin.bigfish.com (Postfix) with ESMTP id 3B752828063
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 18:39:12 +0000 (UTC)
Received: from us-voo-smtp12.internal.sungard.corp ([168.162.128.54]) by us-voo-smtp04.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 14:38:47 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.82]) by us-voo-smtp12.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 14:38:47 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can you create a Field that is a copy of another Field?
Date: Fri, 27 Jun 2008 14:38:43 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7031C6F55@VOO-EXCHANGE01.internal.sungard.corp>
In-reply-to: <48650BF8.3080308@informatics.jax.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-topic: Can you create a Field that is a copy of another Field?
Thread-Index: AcjYbdUN1xNCH2HzRIK43Y3Sl2lPHgAFYjTQ
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2008 18:38:47.0264 (UTC) FILETIME=[08F5DE00:01C8D885]
X-Virus-Checked: Checked by ClamAV on apache.org

Matthew,

Thanks for the reply.  This looks very interesting.  If I'm =
understanding correctly your db_key, data and data_type are Fields =
within the Document, correct?  So is this how you envision it?

Document: State=3DCalifornia
   Field: 'db_key'=3D'1395' (primary key into relational table, =
correct?)
   Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
   Field: 'data_type' indexed by 'State'

Document: City=3DSacremento
   Field: 'db_key'=3D'2405'=20
   Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
   Field: 'data_type' indexed by 'City'

Then my query for all Properties would be:

	+data:South

My query for only 'City' Properties would be:

	+data:South +data_type:City

Is that right?

I think that would work.  Very nice.  Thank you very much!!!!
--
Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak =
Valley Drive * Ann Arbor, MI 48103
Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
 www.sungard.com/energy=20


-----Original Message-----
From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
Sent: Friday, June 27, 2008 11:49 AM
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?

I'm not sure if this is helpful, but I do something VERY similar to this =

in my project.

So, for the example you are citing I would design my index as follows:

db_key, data, data_type

Where the data_type is some sort of value representing the thing that's=20
on the left hand side of your property relationship there.

So, then in order to satisfy your search, the queries become quite =
simple:

The search for everything simply searches against the data field in this =

index, wheras the search for a specific data_type + searchterm becomes a =

simple boolean query, that has a MUST clause for the data_type value.

As an even BETTER bonus, this will then mean that all of your searchable =

values will now have relevance to each other at scoring time, which is=20
quite useful in the long run.

Hope this helps you out,

Matt

Bill.Chesky@sungard.com wrote:
> Grant,
>
> Thanks for the reply.  What we're trying to do is kind of esoteric and =
hard to explain without going into a lot of gory details so I was trying =
to keep it simple.  But I'll try to summarize.
>
> We're trying to index entities in a relational database.  One of the =
entities we're trying to index is something called a Property.  Think of =
a Property kind of like the java.util.Properties class, i.e. a =
name/value pair. So some examples of Properties might be:
>
> State=3DCalifornia
> City=3DSacremento
> ZipCode=3D94203
> StreetName=3DSouth Main
> StreetNumber=3D1234
> Name=3DJoe Smith
>
> Etc., etc.
>
> (Note: this isn't the type of data we're storing... just trying to =
keep it simple.)
>
> Imagine that the above list represents the the set of Properties that =
specify the address for a single person, Joe Smith.  Each Property in =
the set will be indexed by the values on the right-hand side of all the =
other name/value pairs in the set, i.e.: California, Sacremento, 94203, =
South, Main, 1234, Joe and Smith.
>
> There are two types of queries that we want to do. =20
> 1) retrieve every Property matching the specified search terms, =
regardless of its left-hand side.  For this we want to create a field in =
EVERY Document called "keywords" and index it by the right-hand side =
values as described above.
> 2) retrieve every Property with a given left-hand side that matches =
the specified search terms.  For example, find all the 'City' Properties =
that match the term 'South'.  For this we want to create a field with =
the name of the left-hand side (e.g. State, City, ZipCode, etc.) but =
only in those Documents that correspond to a Property with that =
left-hand side.  Again this field will be indexed by the right-hand side =
values as described above.
>
> So a couple of examples from the above list might look something like:
>
> Document: State=3DCalifornia
>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>   Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>
> Document: City=3DSacremento
>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>   Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>
> Now if I'm interested in all the Properties that match the word =
"South", I search the index on the "keywords" field for the term =
"South".  This will return both documents above. =20
>
> But if I'm only interested in any 'City' Properties that match the =
term 'South' I search the index on the "City" field for the term =
"South".  This will only return the 'City=3DSacremento' document above =
because it's the only Document of the two that even has a 'City' field =
in it.
>
> But in any case, the 'State' field and the 'City' field are indexed =
exactly the same way as the 'keywords' field.  Which is why I was =
wondering if there was a way to just create these fields as copies of =
the 'keywords' field.
>
> Here is a code sample where I'm creating the index.  We're using =
Hibernate search to search the indexes, thus the "id" and =
"_hibernate_class" fields.
>
> Query q =3D em.createQuery("select p from Property p");
>            =20
> List<Property> properties =3D q.getResultList();
>    =20
> for (Property p : properties)
> {
>     // Indexing property.
>     Document doc =3D new Document();
>     doc.add(new Field("id",=20
>                        Integer.toString(p.getId()),=20
>                        Field.Store.YES,=20
>                        Field.Index.UN_TOKENIZED));
>     doc.add(new Field("_hibernate_class",=20
>                       Property.class.getCanonicalName(),=20
>                       Field.Store.YES,=20
>                       Field.Index.UN_TOKENIZED));
>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>     doc.add(new Field("keywords", tokenStream));
>     propertyIndexWriter.addDocument(doc);
>     tokenStream.close();   =20
>     // Here is where I would like to add the second field that is a =
copy
>     // of the "keywords" field just created above.  Note: the call
>     // p.getCharacteristic().getName() is getting the name of the=20
>     // left-hand side of the Property as described above.
>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>     doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>     propertyIndexWriter.addDocument(doc);
>     tokenStream.close();
> }
>
> Hope that clears it up. =20
>
> BTW, in case this seems like a strange way to index things, I will =
also add that we are doing it this way in order to impose a heirarchical =
structure on Properties.  So my example above should really look like =
this:
>
> State=3DCalifornia
>     City=3DSacremento
>         ZipCode=3D94203
>             StreetName=3DSouth Main
>                 StreetNumber=3D1234
>                     Name=3DJoe Smith
>
> Use your imagination to visualize what the tree might look like with =
millions of peoples' addresses.  Now imagine trying to tokenize the =
Document corresponding to "State=3DCalifornia".  Each path thru the tree =
from root (State) to leaf (Name) represents a set of Properties that is =
used to index the "keywords" field in the "State=3DCalifornia" document. =
 In other words it takes a long time to index.  This is why I'm looking =
for a way to just copy one field to another.
>
> There is a lot more to our design to facilitate this hierarchical =
structure but this is probably more than you wanted to know. :)
>
> thanks in advance,
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy=20
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]=20
> Sent: Friday, June 27, 2008 7:26 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
>
> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> =
<Bill.Chesky@sungard.com=20
>  > wrote:
>
>  =20
>> Hello Lucene Gurus,
>>
>>
>>
>> I'm new to Lucene so sorry if this question basic or na=EFve.
>>
>>
>>
>> I have a Document to which I want to add a Field named, say, "foo" =20
>> that is tokenized, indexed and unstored.  I am using the =20
>> "Field(String name, TokenStream tokenStream)" constructor to create =20
>> it.  The TokenStream may take a fairly long time to return all its =20
>> tokens.
>>
>>    =20
>
> Can you share some code here?  What's the reasoning behind using it =20
> (not saying it's wrong, just wondering what led you to it)?  Are you =20
> just loading it up from a file, string or something or do you have =20
> another reason?
>
>
>  =20
>> Now for querying reasons I want to add another Field named, say, =20
>> "bar", that is tokenized and indexed in exactly the same way as =20
>> "foo".  I could just pass it the same TokenStream that I used to =20
>> create "foo" but since it takes so long to return all its tokens, I =20
>> was wondering if there is a way to say, create "bar" as a copy of =20
>> "foo".  I looked thru the javadoc but didn't see anything.
>>
>>
>>    =20
>
> By exactly the same, do you really mean exactly the same?  What's the  =

> point of that?  What are the "querying reasons"?
>
> You may want to look at the TeeTokenFilter and the SinkTokenizer, but  =

> I guess I'd like to know more about what's going on before fully =20
> recommending anything.
>
>
>  =20
>> Is this possible in Lucene or do I just have to bite the bullet =20
>> build the new Field using the same TokenStream again?
>>
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =20
>> Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:bill.chesky@sungard.com=20
>>    =20
>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>
>>
>>
>>    =20
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  =20

--=20
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 18:44:31 2008
Return-Path: <java-user-return-34681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95529 invoked from network); 27 Jun 2008 18:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 18:44:31 -0000
Received: (qmail 35077 invoked by uid 500); 27 Jun 2008 18:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35048 invoked by uid 500); 27 Jun 2008 18:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35037 invoked by uid 99); 27 Jun 2008 18:44:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:44:25 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.32.181.16] (HELO WA4EHSOBE003.bigfish.com) (216.32.181.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 18:43:32 +0000
Received: from mail217-wa4-R.bigfish.com (10.8.14.254) by
 WA4EHSOBE003.bigfish.com (10.8.40.23) with Microsoft SMTP Server id
 8.1.240.5; Fri, 27 Jun 2008 18:42:56 +0000
Received: from mail217-wa4 (localhost.localdomain [127.0.0.1])	by
 mail217-wa4-R.bigfish.com (Postfix) with ESMTP id A0C1D108821F	for
 <java-user@lucene.apache.org>; Fri, 27 Jun 2008 18:42:56 +0000 (UTC)
X-BigFish: VPS-82(z57dlz14c3M542N1432R14e0Q98dR62a3Le66R7efV1447R1443R1805Mzzzz5a6ciz2dh6bh41i42k43j)
X-FB-SS: 13,
Received: by mail217-wa4 (MessageSwitch) id 1214592174619955_27238; Fri, 27
 Jun 2008 18:42:54 +0000 (UCT)
Received: from us-voo-smtp05.internal.sungard.corp (unknown [216.83.166.46])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))	(No client certificate
 requested)	by mail217-wa4.bigfish.com (Postfix) with ESMTP id 424CAB1805B	for
 <java-user@lucene.apache.org>; Fri, 27 Jun 2008 18:42:54 +0000 (UTC)
Received: from us-voo-smtp12.internal.sungard.corp ([168.162.128.54]) by
 us-voo-smtp05.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 14:42:52 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.82]) by
 us-voo-smtp12.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 14:42:52 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can you create a Field that is a copy of another Field?
Date: Fri, 27 Jun 2008 14:42:04 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7031C6F58@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <359a92830806271037v60015287l82288739d56d7a35@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-topic: Can you create a Field that is a copy of another Field?
Thread-Index: AcjYfJ4yBDVLlHx2QiOCX0HvqWSmUgACHbIA
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2008 18:42:52.0673 (UTC) FILETIME=[9B3C4F10:01C8D885]
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

Thanks for the response.  I'm very sure the TokenStream is expensive.  =
Not always but in some case, yes, it can take a long time to complete.  =
However, I do like your approach.  I'm going to try a different approach =
suggested by another poster first, but this is very interesting.

Thank you!
--
Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak =
Valley Drive * Ann Arbor, MI 48103
Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
 www.sungard.com/energy=20


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, June 27, 2008 1:37 PM
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?

How sure are you that the TokenStream is that expensive? But
assuming you are AND that the values for these properties
aren't that big, the simple-minded approach that comes to my
simple mind is to just iterate through the stream yourself, assemble
a string from the returned tokens and pass the string to the two add
calls.

This might be worth it if your tokenizer is going to the DB or =
something....

Best
Erick


On Fri, Jun 27, 2008 at 10:56 AM, <Bill.Chesky@sungard.com> wrote:

> Grant,
>
> Thanks for the reply.  What we're trying to do is kind of esoteric and =
hard
> to explain without going into a lot of gory details so I was trying to =
keep
> it simple.  But I'll try to summarize.
>
> We're trying to index entities in a relational database.  One of the
> entities we're trying to index is something called a Property.  Think =
of a
> Property kind of like the java.util.Properties class, i.e. a =
name/value
> pair. So some examples of Properties might be:
>
> State=3DCalifornia
> City=3DSacremento
> ZipCode=3D94203
> StreetName=3DSouth Main
> StreetNumber=3D1234
> Name=3DJoe Smith
>
> Etc., etc.
>
> (Note: this isn't the type of data we're storing... just trying to =
keep it
> simple.)
>
> Imagine that the above list represents the the set of Properties that
> specify the address for a single person, Joe Smith.  Each Property in =
the
> set will be indexed by the values on the right-hand side of all the =
other
> name/value pairs in the set, i.e.: California, Sacremento, 94203, =
South,
> Main, 1234, Joe and Smith.
>
> There are two types of queries that we want to do.
> 1) retrieve every Property matching the specified search terms, =
regardless
> of its left-hand side.  For this we want to create a field in EVERY =
Document
> called "keywords" and index it by the right-hand side values as =
described
> above.
> 2) retrieve every Property with a given left-hand side that matches =
the
> specified search terms.  For example, find all the 'City' Properties =
that
> match the term 'South'.  For this we want to create a field with the =
name of
> the left-hand side (e.g. State, City, ZipCode, etc.) but only in those
> Documents that correspond to a Property with that left-hand side.  =
Again
> this field will be indexed by the right-hand side values as described =
above.
>
> So a couple of examples from the above list might look something like:
>
> Document: State=3DCalifornia
>  Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>  Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>
> Document: City=3DSacremento
>  Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>  Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>
> Now if I'm interested in all the Properties that match the word =
"South", I
> search the index on the "keywords" field for the term "South".  This =
will
> return both documents above.
>
> But if I'm only interested in any 'City' Properties that match the =
term
> 'South' I search the index on the "City" field for the term "South".  =
This
> will only return the 'City=3DSacremento' document above because it's =
the only
> Document of the two that even has a 'City' field in it.
>
> But in any case, the 'State' field and the 'City' field are indexed =
exactly
> the same way as the 'keywords' field.  Which is why I was wondering if =
there
> was a way to just create these fields as copies of the 'keywords' =
field.
>
> Here is a code sample where I'm creating the index.  We're using =
Hibernate
> search to search the indexes, thus the "id" and "_hibernate_class" =
fields.
>
> Query q =3D em.createQuery("select p from Property p");
>
> List<Property> properties =3D q.getResultList();
>
> for (Property p : properties)
> {
>    // Indexing property.
>    Document doc =3D new Document();
>    doc.add(new Field("id",
>                       Integer.toString(p.getId()),
>                       Field.Store.YES,
>                       Field.Index.UN_TOKENIZED));
>    doc.add(new Field("_hibernate_class",
>                      Property.class.getCanonicalName(),
>                      Field.Store.YES,
>                      Field.Index.UN_TOKENIZED));
>    TokenStream tokenStream =3D new PropertyTokenStream(p);
>    doc.add(new Field("keywords", tokenStream));
>    propertyIndexWriter.addDocument(doc);
>    tokenStream.close();
>    // Here is where I would like to add the second field that is a =
copy
>    // of the "keywords" field just created above.  Note: the call
>    // p.getCharacteristic().getName() is getting the name of the
>    // left-hand side of the Property as described above.
>    TokenStream tokenStream =3D new PropertyTokenStream(p);
>    doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>    propertyIndexWriter.addDocument(doc);
>    tokenStream.close();
> }
>
> Hope that clears it up.
>
> BTW, in case this seems like a strange way to index things, I will =
also add
> that we are doing it this way in order to impose a heirarchical =
structure on
> Properties.  So my example above should really look like this:
>
> State=3DCalifornia
>    City=3DSacremento
>        ZipCode=3D94203
>            StreetName=3DSouth Main
>                StreetNumber=3D1234
>                    Name=3DJoe Smith
>
> Use your imagination to visualize what the tree might look like with
> millions of peoples' addresses.  Now imagine trying to tokenize the =
Document
> corresponding to "State=3DCalifornia".  Each path thru the tree from =
root
> (State) to leaf (Name) represents a set of Properties that is used to =
index
> the "keywords" field in the "State=3DCalifornia" document.  In other =
words it
> takes a long time to index.  This is why I'm looking for a way to just =
copy
> one field to another.
>
> There is a lot more to our design to facilitate this hierarchical =
structure
> but this is probably more than you wanted to know. :)
>
> thanks in advance,
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak
> Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Friday, June 27, 2008 7:26 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
>
> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> <
> Bill.Chesky@sungard.com
>  > wrote:
>
> > Hello Lucene Gurus,
> >
> >
> >
> > I'm new to Lucene so sorry if this question basic or na=EFve.
> >
> >
> >
> > I have a Document to which I want to add a Field named, say, "foo"
> > that is tokenized, indexed and unstored.  I am using the
> > "Field(String name, TokenStream tokenStream)" constructor to create
> > it.  The TokenStream may take a fairly long time to return all its
> > tokens.
> >
>
> Can you share some code here?  What's the reasoning behind using it
> (not saying it's wrong, just wondering what led you to it)?  Are you
> just loading it up from a file, string or something or do you have
> another reason?
>
>
> >
> >
> > Now for querying reasons I want to add another Field named, say,
> > "bar", that is tokenized and indexed in exactly the same way as
> > "foo".  I could just pass it the same TokenStream that I used to
> > create "foo" but since it takes so long to return all its tokens, I
> > was wondering if there is a way to say, create "bar" as a copy of
> > "foo".  I looked thru the javadoc but didn't see anything.
> >
> >
>
> By exactly the same, do you really mean exactly the same?  What's the
> point of that?  What are the "querying reasons"?
>
> You may want to look at the TeeTokenFilter and the SinkTokenizer, but
> I guess I'd like to know more about what's going on before fully
> recommending anything.
>
>
> >
> > Is this possible in Lucene or do I just have to bite the bullet
> > build the new Field using the same TokenStream again?
> >
> > --
> > Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194
> > Oak Valley Drive * Ann Arbor, MI 48103
> > Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:
> bill.chesky@sungard.com
> > >
> > www.sungard.com/energy <blocked::http://www.sungard.com/energy>
> >
> >
> >
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 18:48:01 2008
Return-Path: <java-user-return-34682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97794 invoked from network); 27 Jun 2008 18:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 18:48:00 -0000
Received: (qmail 43303 invoked by uid 500); 27 Jun 2008 18:47:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43271 invoked by uid 500); 27 Jun 2008 18:47:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43259 invoked by uid 99); 27 Jun 2008 18:47:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:47:56 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 18:47:06 +0000
In-Reply-To: <359a92830806271019i34d87b71nd210fb0da6099080@mail.gmail.com>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: Sorting issues
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF9CC384E7.454883CC-ON86257475.0065D674-86257475.0067351F@nasi.com>
From: Robert.Hastings@ancept.com
Date: Fri, 27 Jun 2008 13:46:52 -0500
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 06/27/2008
 13:47:20,
	Serialize complete at 06/27/2008 13:47:20
Content-Type: multipart/alternative; boundary="=_alternative 0067351C86257475_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0067351C86257475_=
Content-Type: text/plain; charset="US-ASCII"

Actually, I do a global search and the order comes out: 1, 2, 8, 3, 5, 6, 
7,8, 4, 9.  I'm having trouble finding in the code where the sort actually 
gets applied.  Can you help me out there?

Bob




"Erick Erickson" <erickerickson@gmail.com> 
06/27/2008 12:19 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: Sorting issues






That's surprising. Could you post a brief example of your
index and search code?

It sounds like you're saying
docs 1, 2, 3 all have category aaa
docs 4, 5, 6 all have category bbb
docs 7, 8, 9 all have category ccc

But if you search for category:bbb
you don't get docs 4, 5, and 6

Is this a fair statement of the issue?

Best
Erick


On Fri, Jun 27, 2008 at 11:44 AM, <Robert.Hastings@ancept.com> wrote:

> I just implemented a sorting feature on our application where the user 
can
> change the sort on a query and reexecute the search.  It works fine on
> text fields where most of the documents have different field values.
> However, on fields that are categories, that is, there are only four
> distinct values for the category field and
> all of the documents fit into a distinct category, the results are not 
in
> the sorted values.
>
> All of the sort fields are untokenized and stored. and each document has
> only one value for the sorted field.
>
> Are there any known issues (Lucene 2.3.0)?  How can I go about debugging
> this? I have tried Luke, also I have the Lucene source.
>
> Bob Hastings
> Ancept Inc.


--=_alternative 0067351C86257475_=--

From java-user-return-34683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 18:59:32 2008
Return-Path: <java-user-return-34683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3010 invoked from network); 27 Jun 2008 18:59:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 18:59:32 -0000
Received: (qmail 55611 invoked by uid 500); 27 Jun 2008 18:59:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55317 invoked by uid 500); 27 Jun 2008 18:59:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55306 invoked by uid 99); 27 Jun 2008 18:59:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 11:59:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 18:58:37 +0000
Received: by yx-out-2324.google.com with SMTP id 31so197613yxl.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 11:58:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=x8IaWCGzjPpWvKnrtCvCutB1cQoBj6oJ9kaZ9Z2YzY0=;
        b=Jw4551BGG0Vph3JEXPBhRrSNFI0pR1KliaPizIIoF6VEj2NBiF8RmP4vvhTK2bte1y
         af9mAdoyNJyBfTClg3hOuOCSIMHgQr0bfkkUHP1C3//tZscct7VH8FpaYXnTG6MyIYMV
         U1orr18MTuWZ15UfVePeYWCXrh0dQUNaL6zQI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=H7hjRUWhUlxrJ1BO5GjervT3iL/FfJy40uIPhy1yAY/s1I49qgTKtPL3dEDYC9GD9C
         PvEL5Hg/YxOO+95SCwHlEVmjHGmVLLZWXDP/4mfQlB5VWrcJ7WJzBamomTnjgtvh3msY
         6Ju0IWW/BM1HZwsqj/TTl0ofZX2E09i/JDHKw=
Received: by 10.151.112.4 with SMTP id p4mr2714724ybm.167.1214593136457;
        Fri, 27 Jun 2008 11:58:56 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 27 Jun 2008 11:58:56 -0700 (PDT)
Message-ID: <359a92830806271158l4e04e404w420f3737ab13db9d@mail.gmail.com>
Date: Fri, 27 Jun 2008 14:58:56 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting issues
In-Reply-To: <OF9CC384E7.454883CC-ON86257475.0065D674-86257475.0067351F@nasi.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6512_11231681.1214593136456"
References: <359a92830806271019i34d87b71nd210fb0da6099080@mail.gmail.com>
	 <OF9CC384E7.454883CC-ON86257475.0065D674-86257475.0067351F@nasi.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6512_11231681.1214593136456
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can't really help since I've never had to go into the guts of Lucene and
see where sorting is applied, so I don't know where to point you <G>.

But the sorting has always worked for me, and I don't remember anyone
else posting a similar issue in the last year or so. Which means that
the first thing I'd suspect is that something in your code.

Which is why it would be helpful if you'd post some code snippets
showing
1> how you index your field
2> how you construct your sort object
3> how you search using your sort object

Best
Erick

On Fri, Jun 27, 2008 at 2:46 PM, <Robert.Hastings@ancept.com> wrote:

> Actually, I do a global search and the order comes out: 1, 2, 8, 3, 5, 6,
> 7,8, 4, 9.  I'm having trouble finding in the code where the sort actually
> gets applied.  Can you help me out there?
>
> Bob
>
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 06/27/2008 12:19 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Sorting issues
>
>
>
>
>
>
> That's surprising. Could you post a brief example of your
> index and search code?
>
> It sounds like you're saying
> docs 1, 2, 3 all have category aaa
> docs 4, 5, 6 all have category bbb
> docs 7, 8, 9 all have category ccc
>
> But if you search for category:bbb
> you don't get docs 4, 5, and 6
>
> Is this a fair statement of the issue?
>
> Best
> Erick
>
>
> On Fri, Jun 27, 2008 at 11:44 AM, <Robert.Hastings@ancept.com> wrote:
>
> > I just implemented a sorting feature on our application where the user
> can
> > change the sort on a query and reexecute the search.  It works fine on
> > text fields where most of the documents have different field values.
> > However, on fields that are categories, that is, there are only four
> > distinct values for the category field and
> > all of the documents fit into a distinct category, the results are not
> in
> > the sorted values.
> >
> > All of the sort fields are untokenized and stored. and each document has
> > only one value for the sorted field.
> >
> > Are there any known issues (Lucene 2.3.0)?  How can I go about debugging
> > this? I have tried Luke, also I have the Lucene source.
> >
> > Bob Hastings
> > Ancept Inc.
>
>

------=_Part_6512_11231681.1214593136456--

From java-user-return-34684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 19:10:34 2008
Return-Path: <java-user-return-34684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7081 invoked from network); 27 Jun 2008 19:10:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 19:10:33 -0000
Received: (qmail 68893 invoked by uid 500); 27 Jun 2008 19:10:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68852 invoked by uid 500); 27 Jun 2008 19:10:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68841 invoked by uid 99); 27 Jun 2008 19:10:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 12:10:28 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 19:09:39 +0000
In-Reply-To: <359a92830806271158l4e04e404w420f3737ab13db9d@mail.gmail.com>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: Sorting issues
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF98850263.C0DE06B1-ON86257475.0068FA5E-86257475.006945D2@nasi.com>
From: Robert.Hastings@ancept.com
Date: Fri, 27 Jun 2008 14:09:25 -0500
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 06/27/2008
 14:09:53,
	Serialize complete at 06/27/2008 14:09:53
Content-Type: multipart/alternative; boundary="=_alternative 006945CF86257475_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006945CF86257475_=
Content-Type: text/plain; charset="US-ASCII"

Thanks Eric,

I did find the problem using Luke, I see that all of the documents have 
the same category field, so I must not be adding the field correctly when 
I index them.

Bob

Bob




"Erick Erickson" <erickerickson@gmail.com> 
06/27/2008 01:58 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: Sorting issues






I can't really help since I've never had to go into the guts of Lucene and
see where sorting is applied, so I don't know where to point you <G>.

But the sorting has always worked for me, and I don't remember anyone
else posting a similar issue in the last year or so. Which means that
the first thing I'd suspect is that something in your code.

Which is why it would be helpful if you'd post some code snippets
showing
1> how you index your field
2> how you construct your sort object
3> how you search using your sort object

Best
Erick

On Fri, Jun 27, 2008 at 2:46 PM, <Robert.Hastings@ancept.com> wrote:

> Actually, I do a global search and the order comes out: 1, 2, 8, 3, 5, 
6,
> 7,8, 4, 9.  I'm having trouble finding in the code where the sort 
actually
> gets applied.  Can you help me out there?
>
> Bob
>
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 06/27/2008 12:19 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Sorting issues
>
>
>
>
>
>
> That's surprising. Could you post a brief example of your
> index and search code?
>
> It sounds like you're saying
> docs 1, 2, 3 all have category aaa
> docs 4, 5, 6 all have category bbb
> docs 7, 8, 9 all have category ccc
>
> But if you search for category:bbb
> you don't get docs 4, 5, and 6
>
> Is this a fair statement of the issue?
>
> Best
> Erick
>
>
> On Fri, Jun 27, 2008 at 11:44 AM, <Robert.Hastings@ancept.com> wrote:
>
> > I just implemented a sorting feature on our application where the user
> can
> > change the sort on a query and reexecute the search.  It works fine on
> > text fields where most of the documents have different field values.
> > However, on fields that are categories, that is, there are only four
> > distinct values for the category field and
> > all of the documents fit into a distinct category, the results are not
> in
> > the sorted values.
> >
> > All of the sort fields are untokenized and stored. and each document 
has
> > only one value for the sorted field.
> >
> > Are there any known issues (Lucene 2.3.0)?  How can I go about 
debugging
> > this? I have tried Luke, also I have the Lucene source.
> >
> > Bob Hastings
> > Ancept Inc.
>
>


--=_alternative 006945CF86257475_=--

From java-user-return-34685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 19:17:57 2008
Return-Path: <java-user-return-34685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11013 invoked from network); 27 Jun 2008 19:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 19:17:55 -0000
Received: (qmail 79837 invoked by uid 500); 27 Jun 2008 19:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79812 invoked by uid 500); 27 Jun 2008 19:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79801 invoked by uid 99); 27 Jun 2008 19:17:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 12:17:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 19:17:00 +0000
Received: by yx-out-2324.google.com with SMTP id 31so200127yxl.5
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 12:17:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zFKPwhvOcwQSdFHk3oPhtMuRIIs+9X2RfwdlG2XFidA=;
        b=HT89BI6cONATl9+NEtOQqxulYhzdpv3q+Y6oC3+2ltYGroCv8i0Zo829pYsLcDEHp3
         1ixx5Z3eEqTImbVhdatYLBbzxQi7etuS8SfNXo1hA5Wq9LlTYusU8wcgf/t5nojjjz3f
         QD6cLCCPjJsKEXWqzI/cxKmC7Rs6HhuHys94g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DwX83k4k9RCKgofE/4gJrgxsPe6Q24F6xyjfXZoZjXHQdbzJRg4dGbGop3jJhDXUGS
         oifNXNR6WABYTUZU2HFWz+kUFc+oduO6i1MntaGo/d4nWxuA1/1bbw40+pFBIKROS887
         2VBwNALUUy6bAhed9MP01nEbrsId4ModnMWWM=
Received: by 10.150.123.16 with SMTP id v16mr2784917ybc.40.1214594239312;
        Fri, 27 Jun 2008 12:17:19 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Fri, 27 Jun 2008 12:17:19 -0700 (PDT)
Message-ID: <359a92830806271217m665fc509k7306e372ba64f027@mail.gmail.com>
Date: Fri, 27 Jun 2008 15:17:19 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting issues
In-Reply-To: <OF98850263.C0DE06B1-ON86257475.0068FA5E-86257475.006945D2@nasi.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6566_23825112.1214594239344"
References: <359a92830806271158l4e04e404w420f3737ab13db9d@mail.gmail.com>
	 <OF98850263.C0DE06B1-ON86257475.0068FA5E-86257475.006945D2@nasi.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6566_23825112.1214594239344
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can't count how many times I've said "It must be a bug
in the compiler", but I *can* count how rarely I've been
right <G>.

Glad you're on a path to resolution.

Erick

On Fri, Jun 27, 2008 at 3:09 PM, <Robert.Hastings@ancept.com> wrote:

> Thanks Eric,
>
> I did find the problem using Luke, I see that all of the documents have
> the same category field, so I must not be adding the field correctly when
> I index them.
>
> Bob
>
> Bob
>
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 06/27/2008 01:58 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Sorting issues
>
>
>
>
>
>
> I can't really help since I've never had to go into the guts of Lucene and
> see where sorting is applied, so I don't know where to point you <G>.
>
> But the sorting has always worked for me, and I don't remember anyone
> else posting a similar issue in the last year or so. Which means that
> the first thing I'd suspect is that something in your code.
>
> Which is why it would be helpful if you'd post some code snippets
> showing
> 1> how you index your field
> 2> how you construct your sort object
> 3> how you search using your sort object
>
> Best
> Erick
>
> On Fri, Jun 27, 2008 at 2:46 PM, <Robert.Hastings@ancept.com> wrote:
>
> > Actually, I do a global search and the order comes out: 1, 2, 8, 3, 5,
> 6,
> > 7,8, 4, 9.  I'm having trouble finding in the code where the sort
> actually
> > gets applied.  Can you help me out there?
> >
> > Bob
> >
> >
> >
> >
> > "Erick Erickson" <erickerickson@gmail.com>
> > 06/27/2008 12:19 PM
> > Please respond to
> > java-user@lucene.apache.org
> >
> >
> > To
> > java-user@lucene.apache.org
> > cc
> >
> > Subject
> > Re: Sorting issues
> >
> >
> >
> >
> >
> >
> > That's surprising. Could you post a brief example of your
> > index and search code?
> >
> > It sounds like you're saying
> > docs 1, 2, 3 all have category aaa
> > docs 4, 5, 6 all have category bbb
> > docs 7, 8, 9 all have category ccc
> >
> > But if you search for category:bbb
> > you don't get docs 4, 5, and 6
> >
> > Is this a fair statement of the issue?
> >
> > Best
> > Erick
> >
> >
> > On Fri, Jun 27, 2008 at 11:44 AM, <Robert.Hastings@ancept.com> wrote:
> >
> > > I just implemented a sorting feature on our application where the user
> > can
> > > change the sort on a query and reexecute the search.  It works fine on
> > > text fields where most of the documents have different field values.
> > > However, on fields that are categories, that is, there are only four
> > > distinct values for the category field and
> > > all of the documents fit into a distinct category, the results are not
> > in
> > > the sorted values.
> > >
> > > All of the sort fields are untokenized and stored. and each document
> has
> > > only one value for the sorted field.
> > >
> > > Are there any known issues (Lucene 2.3.0)?  How can I go about
> debugging
> > > this? I have tried Luke, also I have the Lucene source.
> > >
> > > Bob Hastings
> > > Ancept Inc.
> >
> >
>
>

------=_Part_6566_23825112.1214594239344--

From java-user-return-34686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 19:36:37 2008
Return-Path: <java-user-return-34686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20506 invoked from network); 27 Jun 2008 19:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 19:36:36 -0000
Received: (qmail 184 invoked by uid 500); 27 Jun 2008 19:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 159 invoked by uid 500); 27 Jun 2008 19:36:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 148 invoked by uid 99); 27 Jun 2008 19:36:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 12:36:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 19:35:37 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5RJZmvS026353
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 15:35:49 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48654088.2050606@informatics.jax.org>
Date: Fri, 27 Jun 2008 15:33:28 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?
References: <87D5FFD601E4BC488D51E45D414706C7031C6F55@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7031C6F55@VOO-EXCHANGE01.internal.sungard.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.27.191309
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='SUPERLONG_LINE 0.05, BODY_SIZE_10000_PLUS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Yup, you're pretty much there.

The only part I'm a bit confused about is what you've said in your data 
field there,

I'm thinking you mean that for the data_type: "State", you would have 
the data entry of "California", right?

If so, then yup, you are spot on ^^

We use this technique all the time on our side, and its helped 
considerably.  We then use the db_key to reference into a display time 
cache that holds all of the display information for the underlying 
object that we would ever want to present to the user.  This allows our 
search time index to be very concise, and as a result nearly every 
search we hit it with is subsecond, which is a nice place to be ^^

Matt

Bill.Chesky@sungard.com wrote:
> Matthew,
>
> Thanks for the reply.  This looks very interesting.  If I'm understanding correctly your db_key, data and data_type are Fields within the Document, correct?  So is this how you envision it?
>
> Document: State=California
>    Field: 'db_key'='1395' (primary key into relational table, correct?)
>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>    Field: 'data_type' indexed by 'State'
>
> Document: City=Sacremento
>    Field: 'db_key'='2405' 
>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>    Field: 'data_type' indexed by 'City'
>
> Then my query for all Properties would be:
>
> 	+data:South
>
> My query for only 'City' Properties would be:
>
> 	+data:South +data_type:City
>
> Is that right?
>
> I think that would work.  Very nice.  Thank you very much!!!!
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy 
>
>
> -----Original Message-----
> From: Matthew Hall [mailto:mhall@informatics.jax.org] 
> Sent: Friday, June 27, 2008 11:49 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
> I'm not sure if this is helpful, but I do something VERY similar to this 
> in my project.
>
> So, for the example you are citing I would design my index as follows:
>
> db_key, data, data_type
>
> Where the data_type is some sort of value representing the thing that's 
> on the left hand side of your property relationship there.
>
> So, then in order to satisfy your search, the queries become quite simple:
>
> The search for everything simply searches against the data field in this 
> index, wheras the search for a specific data_type + searchterm becomes a 
> simple boolean query, that has a MUST clause for the data_type value.
>
> As an even BETTER bonus, this will then mean that all of your searchable 
> values will now have relevance to each other at scoring time, which is 
> quite useful in the long run.
>
> Hope this helps you out,
>
> Matt
>
> Bill.Chesky@sungard.com wrote:
>   
>> Grant,
>>
>> Thanks for the reply.  What we're trying to do is kind of esoteric and hard to explain without going into a lot of gory details so I was trying to keep it simple.  But I'll try to summarize.
>>
>> We're trying to index entities in a relational database.  One of the entities we're trying to index is something called a Property.  Think of a Property kind of like the java.util.Properties class, i.e. a name/value pair. So some examples of Properties might be:
>>
>> State=California
>> City=Sacremento
>> ZipCode=94203
>> StreetName=South Main
>> StreetNumber=1234
>> Name=Joe Smith
>>
>> Etc., etc.
>>
>> (Note: this isn't the type of data we're storing... just trying to keep it simple.)
>>
>> Imagine that the above list represents the the set of Properties that specify the address for a single person, Joe Smith.  Each Property in the set will be indexed by the values on the right-hand side of all the other name/value pairs in the set, i.e.: California, Sacremento, 94203, South, Main, 1234, Joe and Smith.
>>
>> There are two types of queries that we want to do.  
>> 1) retrieve every Property matching the specified search terms, regardless of its left-hand side.  For this we want to create a field in EVERY Document called "keywords" and index it by the right-hand side values as described above.
>> 2) retrieve every Property with a given left-hand side that matches the specified search terms.  For example, find all the 'City' Properties that match the term 'South'.  For this we want to create a field with the name of the left-hand side (e.g. State, City, ZipCode, etc.) but only in those Documents that correspond to a Property with that left-hand side.  Again this field will be indexed by the right-hand side values as described above.
>>
>> So a couple of examples from the above list might look something like:
>>
>> Document: State=California
>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>>   Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>>
>> Document: City=Sacremento
>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>>   Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>>
>> Now if I'm interested in all the Properties that match the word "South", I search the index on the "keywords" field for the term "South".  This will return both documents above.  
>>
>> But if I'm only interested in any 'City' Properties that match the term 'South' I search the index on the "City" field for the term "South".  This will only return the 'City=Sacremento' document above because it's the only Document of the two that even has a 'City' field in it.
>>
>> But in any case, the 'State' field and the 'City' field are indexed exactly the same way as the 'keywords' field.  Which is why I was wondering if there was a way to just create these fields as copies of the 'keywords' field.
>>
>> Here is a code sample where I'm creating the index.  We're using Hibernate search to search the indexes, thus the "id" and "_hibernate_class" fields.
>>
>> Query q = em.createQuery("select p from Property p");
>>             
>> List<Property> properties = q.getResultList();
>>     
>> for (Property p : properties)
>> {
>>     // Indexing property.
>>     Document doc = new Document();
>>     doc.add(new Field("id", 
>>                        Integer.toString(p.getId()), 
>>                        Field.Store.YES, 
>>                        Field.Index.UN_TOKENIZED));
>>     doc.add(new Field("_hibernate_class", 
>>                       Property.class.getCanonicalName(), 
>>                       Field.Store.YES, 
>>                       Field.Index.UN_TOKENIZED));
>>     TokenStream tokenStream = new PropertyTokenStream(p);
>>     doc.add(new Field("keywords", tokenStream));
>>     propertyIndexWriter.addDocument(doc);
>>     tokenStream.close();    
>>     // Here is where I would like to add the second field that is a copy
>>     // of the "keywords" field just created above.  Note: the call
>>     // p.getCharacteristic().getName() is getting the name of the 
>>     // left-hand side of the Property as described above.
>>     TokenStream tokenStream = new PropertyTokenStream(p);
>>     doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>>     propertyIndexWriter.addDocument(doc);
>>     tokenStream.close();
>> }
>>
>> Hope that clears it up.  
>>
>> BTW, in case this seems like a strange way to index things, I will also add that we are doing it this way in order to impose a heirarchical structure on Properties.  So my example above should really look like this:
>>
>> State=California
>>     City=Sacremento
>>         ZipCode=94203
>>             StreetName=South Main
>>                 StreetNumber=1234
>>                     Name=Joe Smith
>>
>> Use your imagination to visualize what the tree might look like with millions of peoples' addresses.  Now imagine trying to tokenize the Document corresponding to "State=California".  Each path thru the tree from root (State) to leaf (Name) represents a set of Properties that is used to index the "keywords" field in the "State=California" document.  In other words it takes a long time to index.  This is why I'm looking for a way to just copy one field to another.
>>
>> There is a lot more to our design to facilitate this hierarchical structure but this is probably more than you wanted to know. :)
>>
>> thanks in advance,
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>  www.sungard.com/energy 
>>
>>
>> -----Original Message-----
>> From: Grant Ingersoll [mailto:gsingers@apache.org] 
>> Sent: Friday, June 27, 2008 7:26 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Can you create a Field that is a copy of another Field?
>>
>>
>> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> <Bill.Chesky@sungard.com 
>>  > wrote:
>>
>>   
>>     
>>> Hello Lucene Gurus,
>>>
>>>
>>>
>>> I'm new to Lucene so sorry if this question basic or nave.
>>>
>>>
>>>
>>> I have a Document to which I want to add a Field named, say, "foo"  
>>> that is tokenized, indexed and unstored.  I am using the  
>>> "Field(String name, TokenStream tokenStream)" constructor to create  
>>> it.  The TokenStream may take a fairly long time to return all its  
>>> tokens.
>>>
>>>     
>>>       
>> Can you share some code here?  What's the reasoning behind using it  
>> (not saying it's wrong, just wondering what led you to it)?  Are you  
>> just loading it up from a file, string or something or do you have  
>> another reason?
>>
>>
>>   
>>     
>>> Now for querying reasons I want to add another Field named, say,  
>>> "bar", that is tokenized and indexed in exactly the same way as  
>>> "foo".  I could just pass it the same TokenStream that I used to  
>>> create "foo" but since it takes so long to return all its tokens, I  
>>> was wondering if there is a way to say, create "bar" as a copy of  
>>> "foo".  I looked thru the javadoc but didn't see anything.
>>>
>>>
>>>     
>>>       
>> By exactly the same, do you really mean exactly the same?  What's the  
>> point of that?  What are the "querying reasons"?
>>
>> You may want to look at the TeeTokenFilter and the SinkTokenizer, but  
>> I guess I'd like to know more about what's going on before fully  
>> recommending anything.
>>
>>
>>   
>>     
>>> Is this possible in Lucene or do I just have to bite the bullet  
>>> build the new Field using the same TokenStream again?
>>>
>>> --
>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194  
>>> Oak Valley Drive * Ann Arbor, MI 48103
>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com <mailto:bill.chesky@sungard.com 
>>>     
>>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>>
>>>
>>>
>>>     
>>>       
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
>>     
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 20:13:28 2008
Return-Path: <java-user-return-34687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36305 invoked from network); 27 Jun 2008 20:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 20:13:28 -0000
Received: (qmail 35762 invoked by uid 500); 27 Jun 2008 20:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35727 invoked by uid 500); 27 Jun 2008 20:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35716 invoked by uid 99); 27 Jun 2008 20:13:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 13:13:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 20:12:32 +0000
Received: by py-out-1112.google.com with SMTP id z74so217245pyg.9
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 13:12:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=zu/IuLFSCDVJ+eOiN4RQm0FOoZ/vEnrvpYrvW8JXY6A=;
        b=UgPn4OGsLaQWJl/FiElwtYafOMu2EPfWYrPBNtDHaPFZa89St+iqPPxEPFYvknovdx
         PqMnzI89VBss8FqADADpQioz0j6hWQHbHYFrbf+oWXOgByBCMNl3/2Y1CnEEqzvt1azy
         yOrX137BZvpvaroRbov0d9EEz4mTU4EuWuB5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=iFlefiDpjX7KWPIg4vpXIyF/YDhMKcGAyGAUJl+qFmuMvmRg4wUzGYca48orATlliL
         u/y4MzE4Je4dUh4QIt90aTl6pDu4fvX+wjwelypqsz8R+EsOwDj3h2wllD/5CBxRbBFD
         UkItV2Q/GER60pVN+TG8MNcd0i+Kly2A2rlk8=
Received: by 10.115.19.16 with SMTP id w16mr1990953wai.102.1214597571428;
        Fri, 27 Jun 2008 13:12:51 -0700 (PDT)
Received: by 10.114.72.5 with HTTP; Fri, 27 Jun 2008 13:12:51 -0700 (PDT)
Message-ID: <2cda2fc90806271312q2f23e5fah618dfe8e468c4127@mail.gmail.com>
Date: Fri, 27 Jun 2008 16:12:51 -0400
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Java 2.3.2 supports parsing of Microsoft office 2007 documents...
In-Reply-To: <359a92830806270613m21bea46fk2012c246a561655c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <WM8C53B7D7F99740859309A140E11B631F@spsoftindia.com>
	 <359a92830806270613m21bea46fk2012c246a561655c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Kumar:
Assuming you want to index a pre-parsed document...

2008/6/27 Erick Erickson <erickerickson@gmail.com>:
>> If it supports, what should be done in Lucene demo 2.3.2 to search queries
>> on file with above mentioned extensions?
The new ODF-compatible Office 2007 is not supported by POI. However,
you could write a JNI wrapper around OpenOffice, which does have this
support.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 21:17:59 2008
Return-Path: <java-user-return-34688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54993 invoked from network); 27 Jun 2008 21:17:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 21:17:57 -0000
Received: (qmail 4726 invoked by uid 500); 27 Jun 2008 21:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4692 invoked by uid 500); 27 Jun 2008 21:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4681 invoked by uid 99); 27 Jun 2008 21:17:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 14:17:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.32.181.114] (HELO mail180-wa4-R.bigfish.com) (216.32.181.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 21:16:57 +0000
Received: from mail180-wa4 (localhost.localdomain [127.0.0.1])
	by mail180-wa4-R.bigfish.com (Postfix) with ESMTP id F0861B101EE
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 21:16:15 +0000 (UTC)
X-BigFish: VPS-110(z57dlz14c3M328cM542N1418M1432R14e0Q98dR11f6O62a3Le66R7efV1447R1443R1805M179dRzzzzz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
X-MS-Exchange-Organization-Antispam-Report: OrigIP: 216.83.166.46;Service: EHS
Received: by mail180-wa4 (MessageSwitch) id 1214601373810106_5198; Fri, 27 Jun 2008 21:16:13 +0000 (UCT)
Received: from us-voo-smtp05.internal.sungard.corp (unknown [216.83.166.46])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail180-wa4.bigfish.com (Postfix) with ESMTP id 70F0A186004F
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 21:16:13 +0000 (UTC)
Received: from us-voo-smtp12.internal.sungard.corp ([168.162.128.54]) by us-voo-smtp05.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 17:16:10 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.82]) by us-voo-smtp12.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 27 Jun 2008 17:16:10 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can you create a Field that is a copy of another Field?
Date: Fri, 27 Jun 2008 17:16:10 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7031C702E@VOO-EXCHANGE01.internal.sungard.corp>
In-reply-to: <48654088.2050606@informatics.jax.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-topic: Can you create a Field that is a copy of another Field?
Thread-Index: AcjYjSFm4R2yE9NIR9GpUtqjLNUbAAADDhdA
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jun 2008 21:16:10.0744 (UTC) FILETIME=[05B68F80:01C8D89B]
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm, I think maybe I am missing something.  In your design is the =
'data' field indexed, i.e. searchable?  Or is it an unindexed, stored =
field? =20

I was thinking that both 'data' and 'data_type' were indexed and =
searchable. =20

Maybe the confusion stems from the fact that for the Document =
corresponding to "State=3DCalifornia", we're not just indexing on the =
token 'California'.  We're indexing on all the tokens from all the =
Properties in the set of Properties corresponding to a person's address. =
 In my original example this would be: California, Sacremento, 94203, =
South, Main, 1234, Joe and Smith.

For the 'data_type' field I was thinking you were saying we'd index on a =
single token, namely 'State' (or whatever the left-hand side is).

Does that make sense?
--
Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak =
Valley Drive * Ann Arbor, MI 48103
Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
 www.sungard.com/energy=20


-----Original Message-----
From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
Sent: Friday, June 27, 2008 3:33 PM
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?

Yup, you're pretty much there.

The only part I'm a bit confused about is what you've said in your data=20
field there,

I'm thinking you mean that for the data_type: "State", you would have=20
the data entry of "California", right?

If so, then yup, you are spot on ^^

We use this technique all the time on our side, and its helped=20
considerably.  We then use the db_key to reference into a display time=20
cache that holds all of the display information for the underlying=20
object that we would ever want to present to the user.  This allows our=20
search time index to be very concise, and as a result nearly every=20
search we hit it with is subsecond, which is a nice place to be ^^

Matt

Bill.Chesky@sungard.com wrote:
> Matthew,
>
> Thanks for the reply.  This looks very interesting.  If I'm =
understanding correctly your db_key, data and data_type are Fields =
within the Document, correct?  So is this how you envision it?
>
> Document: State=3DCalifornia
>    Field: 'db_key'=3D'1395' (primary key into relational table, =
correct?)
>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>    Field: 'data_type' indexed by 'State'
>
> Document: City=3DSacremento
>    Field: 'db_key'=3D'2405'=20
>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>    Field: 'data_type' indexed by 'City'
>
> Then my query for all Properties would be:
>
> 	+data:South
>
> My query for only 'City' Properties would be:
>
> 	+data:South +data_type:City
>
> Is that right?
>
> I think that would work.  Very nice.  Thank you very much!!!!
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy=20
>
>
> -----Original Message-----
> From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
> Sent: Friday, June 27, 2008 11:49 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
> I'm not sure if this is helpful, but I do something VERY similar to =
this=20
> in my project.
>
> So, for the example you are citing I would design my index as follows:
>
> db_key, data, data_type
>
> Where the data_type is some sort of value representing the thing =
that's=20
> on the left hand side of your property relationship there.
>
> So, then in order to satisfy your search, the queries become quite =
simple:
>
> The search for everything simply searches against the data field in =
this=20
> index, wheras the search for a specific data_type + searchterm becomes =
a=20
> simple boolean query, that has a MUST clause for the data_type value.
>
> As an even BETTER bonus, this will then mean that all of your =
searchable=20
> values will now have relevance to each other at scoring time, which is =

> quite useful in the long run.
>
> Hope this helps you out,
>
> Matt
>
> Bill.Chesky@sungard.com wrote:
>  =20
>> Grant,
>>
>> Thanks for the reply.  What we're trying to do is kind of esoteric =
and hard to explain without going into a lot of gory details so I was =
trying to keep it simple.  But I'll try to summarize.
>>
>> We're trying to index entities in a relational database.  One of the =
entities we're trying to index is something called a Property.  Think of =
a Property kind of like the java.util.Properties class, i.e. a =
name/value pair. So some examples of Properties might be:
>>
>> State=3DCalifornia
>> City=3DSacremento
>> ZipCode=3D94203
>> StreetName=3DSouth Main
>> StreetNumber=3D1234
>> Name=3DJoe Smith
>>
>> Etc., etc.
>>
>> (Note: this isn't the type of data we're storing... just trying to =
keep it simple.)
>>
>> Imagine that the above list represents the the set of Properties that =
specify the address for a single person, Joe Smith.  Each Property in =
the set will be indexed by the values on the right-hand side of all the =
other name/value pairs in the set, i.e.: California, Sacremento, 94203, =
South, Main, 1234, Joe and Smith.
>>
>> There are two types of queries that we want to do. =20
>> 1) retrieve every Property matching the specified search terms, =
regardless of its left-hand side.  For this we want to create a field in =
EVERY Document called "keywords" and index it by the right-hand side =
values as described above.
>> 2) retrieve every Property with a given left-hand side that matches =
the specified search terms.  For example, find all the 'City' Properties =
that match the term 'South'.  For this we want to create a field with =
the name of the left-hand side (e.g. State, City, ZipCode, etc.) but =
only in those Documents that correspond to a Property with that =
left-hand side.  Again this field will be indexed by the right-hand side =
values as described above.
>>
>> So a couple of examples from the above list might look something =
like:
>>
>> Document: State=3DCalifornia
>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>>   Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>>
>> Document: City=3DSacremento
>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>>   Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>>
>> Now if I'm interested in all the Properties that match the word =
"South", I search the index on the "keywords" field for the term =
"South".  This will return both documents above. =20
>>
>> But if I'm only interested in any 'City' Properties that match the =
term 'South' I search the index on the "City" field for the term =
"South".  This will only return the 'City=3DSacremento' document above =
because it's the only Document of the two that even has a 'City' field =
in it.
>>
>> But in any case, the 'State' field and the 'City' field are indexed =
exactly the same way as the 'keywords' field.  Which is why I was =
wondering if there was a way to just create these fields as copies of =
the 'keywords' field.
>>
>> Here is a code sample where I'm creating the index.  We're using =
Hibernate search to search the indexes, thus the "id" and =
"_hibernate_class" fields.
>>
>> Query q =3D em.createQuery("select p from Property p");
>>            =20
>> List<Property> properties =3D q.getResultList();
>>    =20
>> for (Property p : properties)
>> {
>>     // Indexing property.
>>     Document doc =3D new Document();
>>     doc.add(new Field("id",=20
>>                        Integer.toString(p.getId()),=20
>>                        Field.Store.YES,=20
>>                        Field.Index.UN_TOKENIZED));
>>     doc.add(new Field("_hibernate_class",=20
>>                       Property.class.getCanonicalName(),=20
>>                       Field.Store.YES,=20
>>                       Field.Index.UN_TOKENIZED));
>>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>>     doc.add(new Field("keywords", tokenStream));
>>     propertyIndexWriter.addDocument(doc);
>>     tokenStream.close();   =20
>>     // Here is where I would like to add the second field that is a =
copy
>>     // of the "keywords" field just created above.  Note: the call
>>     // p.getCharacteristic().getName() is getting the name of the=20
>>     // left-hand side of the Property as described above.
>>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>>     doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>>     propertyIndexWriter.addDocument(doc);
>>     tokenStream.close();
>> }
>>
>> Hope that clears it up. =20
>>
>> BTW, in case this seems like a strange way to index things, I will =
also add that we are doing it this way in order to impose a heirarchical =
structure on Properties.  So my example above should really look like =
this:
>>
>> State=3DCalifornia
>>     City=3DSacremento
>>         ZipCode=3D94203
>>             StreetName=3DSouth Main
>>                 StreetNumber=3D1234
>>                     Name=3DJoe Smith
>>
>> Use your imagination to visualize what the tree might look like with =
millions of peoples' addresses.  Now imagine trying to tokenize the =
Document corresponding to "State=3DCalifornia".  Each path thru the tree =
from root (State) to leaf (Name) represents a set of Properties that is =
used to index the "keywords" field in the "State=3DCalifornia" document. =
 In other words it takes a long time to index.  This is why I'm looking =
for a way to just copy one field to another.
>>
>> There is a lot more to our design to facilitate this hierarchical =
structure but this is probably more than you wanted to know. :)
>>
>> thanks in advance,
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>  www.sungard.com/energy=20
>>
>>
>> -----Original Message-----
>> From: Grant Ingersoll [mailto:gsingers@apache.org]=20
>> Sent: Friday, June 27, 2008 7:26 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Can you create a Field that is a copy of another Field?
>>
>>
>> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> =
<Bill.Chesky@sungard.com=20
>>  > wrote:
>>
>>  =20
>>    =20
>>> Hello Lucene Gurus,
>>>
>>>
>>>
>>> I'm new to Lucene so sorry if this question basic or na=EFve.
>>>
>>>
>>>
>>> I have a Document to which I want to add a Field named, say, "foo" =20
>>> that is tokenized, indexed and unstored.  I am using the =20
>>> "Field(String name, TokenStream tokenStream)" constructor to create  =

>>> it.  The TokenStream may take a fairly long time to return all its =20
>>> tokens.
>>>
>>>    =20
>>>      =20
>> Can you share some code here?  What's the reasoning behind using it =20
>> (not saying it's wrong, just wondering what led you to it)?  Are you  =

>> just loading it up from a file, string or something or do you have =20
>> another reason?
>>
>>
>>  =20
>>    =20
>>> Now for querying reasons I want to add another Field named, say, =20
>>> "bar", that is tokenized and indexed in exactly the same way as =20
>>> "foo".  I could just pass it the same TokenStream that I used to =20
>>> create "foo" but since it takes so long to return all its tokens, I  =

>>> was wondering if there is a way to say, create "bar" as a copy of =20
>>> "foo".  I looked thru the javadoc but didn't see anything.
>>>
>>>
>>>    =20
>>>      =20
>> By exactly the same, do you really mean exactly the same?  What's the =
=20
>> point of that?  What are the "querying reasons"?
>>
>> You may want to look at the TeeTokenFilter and the SinkTokenizer, but =
=20
>> I guess I'd like to know more about what's going on before fully =20
>> recommending anything.
>>
>>
>>  =20
>>    =20
>>> Is this possible in Lucene or do I just have to bite the bullet =20
>>> build the new Field using the same TokenStream again?
>>>
>>> --
>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194  =

>>> Oak Valley Drive * Ann Arbor, MI 48103
>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:bill.chesky@sungard.com=20
>>>    =20
>>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>>
>>>
>>>
>>>    =20
>>>      =20
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>  =20
>>    =20
>
>  =20

--=20
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 21:25:33 2008
Return-Path: <java-user-return-34689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58845 invoked from network); 27 Jun 2008 21:25:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 21:25:31 -0000
Received: (qmail 15440 invoked by uid 500); 27 Jun 2008 21:25:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15103 invoked by uid 500); 27 Jun 2008 21:25:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15092 invoked by uid 99); 27 Jun 2008 21:25:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 14:25:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.190.172.35] (HELO mail.go2.com) (209.190.172.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 21:24:36 +0000
Content-class: urn:content-classes:message
Subject: QueryWrapperFilter performance
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8D89C.3EA30844"
Date: Fri, 27 Jun 2008 17:24:54 -0400
x-mimeole: Produced By Microsoft Exchange V6.5
Message-ID: <180939A51C17274FB68581AE17C5E0E71ADAAF@bertha.Volley.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryWrapperFilter performance
Thread-Index: AcjYnD3Qmh1/PjEDRd6lOVXNcr2OOg==
From: "Jordon Saardchit" <jsaardchit@go2.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8D89C.3EA30844
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello All,
=20
Sort of new to lucene but have a general question in regards to
performance.  I've got a single index of rather large size (about 7
million docs).  I've ran a couple different queries against it, which
are described below.
=20
 * WildcardQuery: (*term*) Which returns roughly 12000 hits in around
7000ms
 * RangeQuery: (term TO term) Which returns roughly 6000 hits in around
200ms
=20
Now for performance reasons, I am attempting to run the WildcardQuery
against only the RangeQuery hits (6000 as opposed to 7 million), via
using a QueryWrapperFilter (constructed with my RangeQuery).  However,
the avg response times are still around 7000ms, the same as the wildcard
search over the entire index.  Is it possible the performance of the
WildcardQuery is not effected by the filter? Or I have gone about
implementing my intentions incorrectly?
=20
Thanks in advance for the help,
Jordon

------_=_NextPart_001_01C8D89C.3EA30844--

From java-user-return-34690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 21:58:30 2008
Return-Path: <java-user-return-34690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71301 invoked from network); 27 Jun 2008 21:58:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 21:58:30 -0000
Received: (qmail 55236 invoked by uid 500); 27 Jun 2008 21:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55215 invoked by uid 500); 27 Jun 2008 21:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55203 invoked by uid 99); 27 Jun 2008 21:58:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 14:58:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 21:57:35 +0000
Received: by wa-out-1112.google.com with SMTP id l24so459951waf.11
        for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 14:57:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=WP6xOx63Uhd5+KSIw9chxn3yiemhkm+TcKfrVa5X2f0=;
        b=fN6mBnfHgn+LFmFMNMBFb0xxVoX3G9vGgrW3J2+1whr3AJyB55EVAxOB1Q8XWPEep5
         YfuYECINleLFL2Lmzlb7Hyqkl2zctz1OwUN/VRYJ8D/cY8GZi1g2hkvfzeVWupSa45rg
         oS0m6CWTtBu2+Xte5pmsXtHDKAdWRe+Ah01xk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=g8CP/xHnmrkQrL+d47LQRnGoTtART5VDBwVh2P95jrcZRjE5DMhcBAhkYQ3ZkaCe6k
         D39L26OYuLYv7l8ZqOZc/clxB+tm2ta+ByxCwAu/j6kYYi/jA07pCkPYoAehSPgVzpxb
         NFsLIoxxre33ma+Lq7h0se3y/WQD6ASfE3FRk=
Received: by 10.115.106.7 with SMTP id i7mr2032087wam.131.1214603875355;
        Fri, 27 Jun 2008 14:57:55 -0700 (PDT)
Received: by 10.114.171.7 with HTTP; Fri, 27 Jun 2008 14:57:55 -0700 (PDT)
Message-ID: <16f8407d0806271457l3da8971bqb509d21ee0446398@mail.gmail.com>
Date: Fri, 27 Jun 2008 14:57:55 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Question: Can lucene do parallel indexing?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8527_3736101.1214603875345"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8527_3736101.1214603875345
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If I'm using a computer that has multiple cores, or if I want to use several
computers to speed up the indexing process, how should I do that? Is there
some kind of support for that in the API?

David Lee

------=_Part_8527_3736101.1214603875345--

From java-user-return-34691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jun 27 22:12:07 2008
Return-Path: <java-user-return-34691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78689 invoked from network); 27 Jun 2008 22:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jun 2008 22:12:06 -0000
Received: (qmail 71677 invoked by uid 500); 27 Jun 2008 22:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71636 invoked by uid 500); 27 Jun 2008 22:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71625 invoked by uid 99); 27 Jun 2008 22:12:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 15:12:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.207.229] (HELO web32602.mail.mud.yahoo.com) (68.142.207.229)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Jun 2008 22:11:11 +0000
Received: (qmail 32419 invoked by uid 60001); 27 Jun 2008 22:11:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=CSxqIwQt4BhT0UR/NQ0hMoBmot63/wwFdTWXbsPBJMWLHvDaJf//tv/33mE1db8xau3kU/w7VIX+aUT6b42oa0/k2OIPJZIhHudiY/dGaXgEBNeVl4tWt+5fFgz7c+T7VAqdf4LfqpyI8vjtD7ax3idVNDSdob52g66NZVp7C0I=;
Received: from [76.25.255.221] by web32602.mail.mud.yahoo.com via HTTP; Fri, 27 Jun 2008 15:11:29 PDT
X-Mailer: YahooMailWebService/0.7.199
Date: Fri, 27 Jun 2008 15:11:29 -0700 (PDT)
From: Phil Myers <jlpmyers@yahoo.com>
Reply-To: jlpmyers@yahoo.com
Subject: Re: Question: Can lucene do parallel indexing?
To: java-user@lucene.apache.org
In-Reply-To: <16f8407d0806271457l3da8971bqb509d21ee0446398@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <406010.31972.qm@web32602.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> If I'm using a computer that has multiple cores, or if I
> want to use several
> computers to speed up the indexing process, how should I do
> that? Is there
> some kind of support for that in the API?

Yes. There are some comments on this near the end of this page:

http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

-Phil



--- On Fri, 6/27/08, David Lee <davidtlee@gmail.com> wrote:

> From: David Lee <davidtlee@gmail.com>
> Subject: Question: Can lucene do parallel indexing?
> To: java-user@lucene.apache.org
> Date: Friday, June 27, 2008, 5:57 PM
> If I'm using a computer that has multiple cores, or if I
> want to use several
> computers to speed up the indexing process, how should I do
> that? Is there
> some kind of support for that in the API?
> 
> David Lee

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 00:33:01 2008
Return-Path: <java-user-return-34692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40849 invoked from network); 28 Jun 2008 00:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 00:33:01 -0000
Received: (qmail 60657 invoked by uid 500); 28 Jun 2008 00:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60624 invoked by uid 500); 28 Jun 2008 00:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60611 invoked by uid 99); 28 Jun 2008 00:32:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Jun 2008 17:32:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 00:32:06 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id C772C71C410; Fri, 27 Jun 2008 17:31:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id C367C71C40F
	for <java-user@lucene.apache.org>; Fri, 27 Jun 2008 17:31:55 -0700 (PDT)
Date: Fri, 27 Jun 2008 17:31:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Searching any part of a string
In-Reply-To: <2dab92100806270857p5ef27292q2d2a0462d581f32c@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0806271729170.7795@radix.cryptio.net>
References: <2dab92100806251047j3ae5fa3dncdc466be2caad1b2@mail.gmail.com> 
 <359a92830806251125o1dea19dbt11b2397cd1d20c95@mail.gmail.com>
 <2dab92100806270857p5ef27292q2d2a0462d581f32c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thanks for the suggestions. I've used indexed n-grams before to implement
: spell-checking; I think in this case I may take a look at WildcardTermEnum
: and RegexTermEnum. It seems like a good solution because I am doing my own
: results ordering so Lucene's scoring is irrelevant in this case. I wasn't
: aware of these classes so thanks for mentioning them!

using the Enum's directly will help you avoid potential "TooManyClauses" 
exceptions that you would get with a straight WildcardQuery, but it should 
be more efficient to index ngrams and then do a Prefix style search 
because then you can skipTo(yourTerm) and iterate from there.

with WildcardTermEnum if you have a leading wildcard the TermEnum has to 
"next()" over every term inthe field.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 07:58:10 2008
Return-Path: <java-user-return-34693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83070 invoked from network); 28 Jun 2008 07:58:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 07:58:10 -0000
Received: (qmail 3295 invoked by uid 500); 28 Jun 2008 07:58:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3267 invoked by uid 500); 28 Jun 2008 07:58:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3256 invoked by uid 99); 28 Jun 2008 07:58:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 00:58:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.213 as permitted sender)
Received: from [65.54.246.213] (HELO bay0-omc3-s13.bay0.hotmail.com) (65.54.246.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 07:57:12 +0000
Received: from BAY119-W44 ([207.46.9.79]) by bay0-omc3-s13.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sat, 28 Jun 2008 00:57:10 -0700
Message-ID: <BAY119-W440204702F26CC85BB2799B49D0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ffa5e4aa-60ec-49bd-96f5-05e1772c7179_"
X-Originating-IP: [60.63.23.243]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: how to statistics categories amount
Date: Sat, 28 Jun 2008 15:57:10 +0800
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 28 Jun 2008 07:57:10.0373 (UTC) FILETIME=[91703950:01C8D8F4]
X-Virus-Checked: Checked by ClamAV on apache.org

--_ffa5e4aa-60ec-49bd-96f5-05e1772c7179_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


if I search a keyword likes 'computer' in a shopping website.
the result may contains.
total:   
          (1000) products .
categories:
pc        (500) products .
notebook  (300) products .
server    (200) products .
 
so how do get each categories 'amount.
I try to search many times on onec user search,
but it is so slow.
_________________________________________________________________
live mail
http://get.live.cn/product/mail.html
--_ffa5e4aa-60ec-49bd-96f5-05e1772c7179_--

From java-user-return-34694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 09:37:07 2008
Return-Path: <java-user-return-34694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96492 invoked from network); 28 Jun 2008 09:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 09:37:07 -0000
Received: (qmail 30653 invoked by uid 500); 28 Jun 2008 09:37:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30604 invoked by uid 500); 28 Jun 2008 09:37:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30593 invoked by uid 99); 28 Jun 2008 09:37:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 02:37:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 09:36:11 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 60E1E30EFC18; Sat, 28 Jun 2008 03:36:25 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-180.dyn.embarqhsd.net [69.68.189.180])
	by ehatchersolutions.com (Postfix) with ESMTP id 0050330EFC17
	for <java-user@lucene.apache.org>; Sat, 28 Jun 2008 03:36:17 -0600 (MDT)
Message-Id: <A0375914-6EDE-4A0C-BB74-2483060E54A3@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <BAY119-W440204702F26CC85BB2799B49D0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: how to statistics categories amount
Date: Sat, 28 Jun 2008 05:36:12 -0400
References: <BAY119-W440204702F26CC85BB2799B49D0@phx.gbl>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Jun 28, 2008, at 3:57 AM, lutan wrote:
> if I search a keyword likes 'computer' in a shopping website.
> the result may contains.
> total:
>          (1000) products .
> categories:
> pc        (500) products .
> notebook  (300) products .
> server    (200) products .
>
> so how do get each categories 'amount.
> I try to search many times on onec user search,
> but it is so slow

This is a case where you are probably better off starting with Solr,  
which supports faceting natively.

The main trick to making this fast is coming up with cached sets of  
each of the categories and intersecting each of those sets with the  
main result set and using the cardinality of the intersected sets for  
the counts.  Again, Solr is what I'd recommend as a starting point for  
you.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 15:08:50 2008
Return-Path: <java-user-return-34695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83871 invoked from network); 28 Jun 2008 15:08:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 15:08:50 -0000
Received: (qmail 44100 invoked by uid 500); 28 Jun 2008 15:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44062 invoked by uid 500); 28 Jun 2008 15:08:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44051 invoked by uid 99); 28 Jun 2008 15:08:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 08:08:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 15:07:52 +0000
Received: from fluffy.internal.torchbox.com ([2001:8b0:c5:1::20])
	by fluffy.torchbox.com with esmtp (Exim 4.69)
	(envelope-from <nick@torchbox.com>)
	id 1KCbz0-0000vR-Vl
	for java-user@lucene.apache.org; Sat, 28 Jun 2008 16:05:01 +0100
Date: Sat, 28 Jun 2008 16:04:56 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@fluffy.internal.torchbox.com
To: java-user@lucene.apache.org
Subject: Re: Does Lucene Java 2.3.2 supports parsing of Microsoft office 2007
 documents...
In-Reply-To: <2cda2fc90806271312q2f23e5fah618dfe8e468c4127@mail.gmail.com>
Message-ID: <alpine.DEB.1.10.0806281603320.2735@fluffy.internal.torchbox.com>
References: <WM8C53B7D7F99740859309A140E11B631F@spsoftindia.com>  <359a92830806270613m21bea46fk2012c246a561655c@mail.gmail.com> <2cda2fc90806271312q2f23e5fah618dfe8e468c4127@mail.gmail.com>
User-Agent: Alpine 1.10 (DEB 962 2008-03-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Score: -2.1 (--)
Organization: Torchbox Ltd, Registered Company #3983354, Unit 9, Southill Business Park, OX7 3EW, UK
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 27 Jun 2008, Hasan Diwan wrote:
> The new ODF-compatible Office 2007 is not supported by POI.

Actually, it is, just not the version in trunk. You can download nightly 
builds of the ooxml branch from
 	http://encore.torchbox.com/poi-svn-build/OOXML-Branch/

And there ought to be a formal beta release very soon now

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 15:27:30 2008
Return-Path: <java-user-return-34696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87684 invoked from network); 28 Jun 2008 15:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 15:27:30 -0000
Received: (qmail 56091 invoked by uid 500); 28 Jun 2008 15:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56049 invoked by uid 500); 28 Jun 2008 15:27:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56037 invoked by uid 99); 28 Jun 2008 15:27:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 08:27:25 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 15:26:32 +0000
Received: by fg-out-1718.google.com with SMTP id l27so473270fgb.27
        for <java-user@lucene.apache.org>; Sat, 28 Jun 2008 08:26:50 -0700 (PDT)
Received: by 10.86.23.17 with SMTP id 17mr3645741fgw.44.1214666809747;
        Sat, 28 Jun 2008 08:26:49 -0700 (PDT)
Received: from ?192.168.1.2? ( [84.0.34.71])
        by mx.google.com with ESMTPS id l12sm5056811fgb.6.2008.06.28.08.26.48
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 28 Jun 2008 08:26:48 -0700 (PDT)
Subject: Re: Getting irrelevant results using fuzzy query
From: =?ISO-8859-1?Q?L=E1szl=F3?= Monda <laci@monda.hu>
To: markharw00d@yahoo.co.uk
Cc: java-user@lucene.apache.org
In-Reply-To: <649083.95545.qm@web26005.mail.ukl.yahoo.com>
References: <649083.95545.qm@web26005.mail.ukl.yahoo.com>
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-AkFPxvLQQhHgvso72kof"
Date: Sat, 28 Jun 2008 17:26:46 +0200
Message-Id: <1214666806.6161.106.camel@whisper.dnsalias.net>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.1 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-AkFPxvLQQhHgvso72kof
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable

On Mon, 2008-06-23 at 12:52 +0000, mark harwood wrote:
> >>Could you tell me what's wrong here, please?
>=20
> There are potentially a number of factors at play here.
>=20
> Your use of FuzzyLikeThis is fine - just tried the code on my single-term=
 "Paul" query and as I outlined before it is doing a much better job of mat=
ching (Paul~=3D results Paul,Paul,Paul....Phul rather than FuzzyQuery's Pau=
l~=3D results Phul, Saul, Paulo , Paul, Paul.....)
>=20
> Try the query on just the term artist:Coldplay and see the results. What =
artists Does FuzzyLikeThis  return vs FuzzyQuery?
>=20
> If you aren't getting Coldplay as the first result from FuzzyLikeThis dou=
ble check the content is indexed using the same analyzer that you pass to F=
uzzyLikeThisQuery (your code below uses SimpleAnalyzer). If you indexed wit=
h WhitespaceAnalyzer for example or as "UN_TOKENIZED the index and the quer=
y differ so "Coldplay"!=3Dcoldplay.
>=20
> I notice the song title in your original code is treated as a single term=
 in your query - is that how it is indexed? I can see that artist might pos=
sibly make sense as a single term which gets fuzzy matched but song titles =
are generally longer which means it may work better as a tokenized field.

You were right, tokenization was the issue.  Using TOKENIZED instead of
UN_TOKENIZED immediately provided relevant results, event when using it
with FuzzyQuery.

Using FuzzyLikeThisQuery made the relevance much better, so I'm really
happy with the results.

Thank you very much!

>=20
> Cheers
> Mark
>=20
>=20
> ----- Original Message ----
> From: L=E1szl=F3 Monda <laci@monda.hu>
> To: java-user@lucene.apache.org
> Cc: markharw00d@yahoo.co.uk
> Sent: Monday, 23 June, 2008 1:11:50 PM
> Subject: Re: Getting irrelevant results using fuzzy query
>=20
> Thanks for your reply, Mark.
>=20
>=20
>=20
> This was my original code for constructing my query using FuzzyQuery:
>=20
> BooleanQuery query =3D new BooleanQuery();
> if (artist.length() > 0) {
>     FuzzyQuery artist_query =3D new FuzzyQuery(new Term("artist",
> artist));
>     query.add(artist_query, BooleanClause.Occur.MUST);
> }
> if (song.length() > 0) {
>     FuzzyQuery song_query =3D new FuzzyQuery(new Term("song", song));
>     query.add(song_query, BooleanClause.Occur.MUST);
> }
>=20
>=20
>=20
> This is my first attempt to use FuzzyLikeThisQuery (with no success):
>=20
> FuzzyLikeThisQuery query =3D new FuzzyLikeThisQuery(2, new
> SimpleAnalyzer());
> if (artist.length() > 0) {
>     query.addTerms(artist, "artist", 0.5f, 0);
> }
> if (song.length() > 0) {
>     query.addTerms(song, "song", 0.5f, 0);
> }
>=20
>=20
>=20
> This is my second attempt to use FuzzyLikeThisQuery (with no success):
>=20
> BooleanQuery query =3D new BooleanQuery();
> if (artist.length() > 0) {
>     FuzzyLikeThisQuery artist_query =3D new FuzzyLikeThisQuery(1, new
> SimpleAnalyzer());
>     artist_query.addTerms(artist, "artist", 0.5f, 0);
>     query.add(artist_query, BooleanClause.Occur.MUST);
> }
> if (song.length() > 0) {
>     FuzzyLikeThisQuery song_query =3D new FuzzyLikeThisQuery(1, new
> SimpleAnalyzer());
>     song_query.addTerms(song, "song", 0.5f, 0);
>     query.add(song_query, BooleanClause.Occur.MUST);
> }
>=20
>=20
>=20
> I think it's my lack of undersanding of the usage of FuzzyLikeThisQuery
> that makes me getting irrelevant results.
>=20
> Could you tell me what's wrong here, please?
>=20
> Thank you.
>=20
> On Mon, 2008-06-23 at 11:28 +0000, mark harwood wrote:
> > >>I do have serious problems with the relevance of the results with fuz=
zy queries.
> >=20
> > Please take the time to read my response here:
> >=20
> >      http://www.gossamer-threads.com/lists/lucene/java-user/62050#62050
> >=20
> > I had a work colleague come up with exactly the same problem this week =
and the solution is the same.
> >=20
> > Just tested my index with a standard Lucene FuzzyQuery for "Paul~" - th=
is gives "Phul", "Saul", and "Paulo" before ANY "Paul" records due to IDF i=
ssues.
> > Using FuzzyLikeThisQuery puts all the "Paul" records ahead of the varia=
nts.
> >=20
> >=20
> >=20
> > ----- Original Message ----
> > From: L=E1szl=F3 Monda <laci@monda.hu>
> > To: java-user@lucene.apache.org
> > Cc: lucenelist2007@danielnaber.de
> > Sent: Monday, 23 June, 2008 12:10:05 PM
> > Subject: Re: Getting irrelevant results using fuzzy query
> >=20
> > On Wed, 2008-06-18 at 21:10 +0200, Daniel Naber wrote:
> > > On Mittwoch, 18. Juni 2008, L=E1szl=F3 Monda wrote:
> > >=20
> > > > Additional info: Lucene seems to do the right thing when only few
> > > > documents are present, but goes crazy when there is about 1.5 milli=
on
> > > > documents in the index.
> > >=20
> > > Lucene works well with more documents (currently using it with 9 mill=
ion).=20
> > > but the fuzzy query requires iteration over all terms which makes thi=
s=20
> > > query slow. This can be avoid by setting the prefixLength parameter o=
f the=20
> > > FuzzyQuery constructor to 1 or 2. Or maybe you should use an n-gram i=
ndex,=20
> > > see the spellchecker in the contrib area.
> >=20
> > Thanks for the suggestion, but I don't have any performance problems
> > yet, but I do have serious problems with the relevance of the results
> > with fuzzy queries.
> >=20
--=20
Laci  <http://monda.hu>


--=-AkFPxvLQQhHgvso72kof
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQBIZlg25t2qLX5n7ZgRAiinAJ45Y0dAfFZy9jXY9+rd88yMxobFCACg1/nF
PQBERGsCyqTIDzA8QtF7178=
=UVzx
-----END PGP SIGNATURE-----

--=-AkFPxvLQQhHgvso72kof--


From java-user-return-34697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 22:35:02 2008
Return-Path: <java-user-return-34697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3447 invoked from network); 28 Jun 2008 22:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 22:35:02 -0000
Received: (qmail 2731 invoked by uid 500); 28 Jun 2008 22:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2692 invoked by uid 500); 28 Jun 2008 22:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2681 invoked by uid 99); 28 Jun 2008 22:34:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 15:34:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.236.204] (HELO web58606.mail.re3.yahoo.com) (68.142.236.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Jun 2008 22:34:06 +0000
Received: (qmail 43207 invoked by uid 60001); 28 Jun 2008 22:34:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=nDFnoQNCpppz2GRxAhTAZ8XLAlF1xSQIqZ4zOlUJVROXomoZV0yqJIcrJQx3BTCBQLr4PuozHRCT4/Xvy1/FkQdrh2h57xJW3+48lZZDqTUxHzUKryunavT1lMDAd4LhQvnPLl6qLcaVLU/+7KZ2bCmBkrK67RcZbFjZJAL6s1M=;
Received: from [68.160.62.82] by web58606.mail.re3.yahoo.com via HTTP; Sat, 28 Jun 2008 15:34:24 PDT
X-Mailer: YahooMailWebService/0.7.199
Date: Sat, 28 Jun 2008 15:34:24 -0700 (PDT)
From: qaz zaq <fortques@yahoo.com>
Reply-To: fortques@yahoo.com
Subject: document retrieval 100 times slower after finishing some heavy disk operation
To: java-user@lucene.apache.org
In-Reply-To: <1214666806.6161.106.camel@whisper.dnsalias.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-946332836-1214692464=:42707"
Message-ID: <576482.42707.qm@web58606.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-946332836-1214692464=:42707
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
=A0
I=A0ran into a very strange situation=A0regarding document retrieval slowne=
ss and want to get some advice urgently.
=A0
I have=A02=A0FSDirectory indexes=A0each with size about=A0500M.=A0I have 2 =
parallel search threads=A0fetching=A0200 documents from these 2 indexes=A0w=
hich usually take less then 16ms. However, everytime afer some heavy disk o=
perations (such as copy 1G size of a file into that disk)=A0, the document =
retrieval slows down to couple seconds immediately, even=A0well after this =
disk operation being finished for a long time. It appears Lucene could=A0ne=
ver resume to it's original speed and I have to restart by application inor=
der to get it normal.=20
=A0
Anybody has encountered similiar problems?=20
=A0=0A=0A=0A      
--0-946332836-1214692464=:42707--

From java-user-return-34698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 23:15:36 2008
Return-Path: <java-user-return-34698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16918 invoked from network); 28 Jun 2008 23:15:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 23:15:35 -0000
Received: (qmail 9056 invoked by uid 500); 28 Jun 2008 23:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9024 invoked by uid 500); 28 Jun 2008 23:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9013 invoked by uid 99); 28 Jun 2008 23:15:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 16:15:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.28 as permitted sender)
Received: from [80.67.29.28] (HELO smtprelay11.ispgateway.de) (80.67.29.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 23:14:37 +0000
Received: from [91.37.232.196] (helo=p5b25e8c4.dip.t-dialin.net)
	by smtprelay11.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KCjd9-0005Kz-C2
	for java-user@lucene.apache.org; Sun, 29 Jun 2008 01:14:55 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: document retrieval 100 times slower after finishing some heavy disk operation
Date: Sun, 29 Jun 2008 01:15:15 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <576482.42707.qm@web58606.mail.re3.yahoo.com>
In-Reply-To: <576482.42707.qm@web58606.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200806290115.15674@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 29. Juni 2008, qaz zaq wrote:

> indexes=C2=A0which usually take less then 16ms. However, everytime afer s=
ome
> heavy disk operations (such as copy 1G size of a file into that disk)=C2=
=A0,
> the document retrieval slows down to couple seconds immediately,
> even=C2=A0well after this disk operation being finished for a long time.

Is this copy operation initiated by your java code and does it require a=20
lot of RAM? If so, this could be caused by the JVM garbage collection.=20
There are options to start the JVM so it prints out garbage collection=20
progress information. Also, are you sure the copy operation is finished?=20
Maybe data is still in the cache of the operating system and the disk is=20
still busy writing it?

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jun 28 23:37:22 2008
Return-Path: <java-user-return-34699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22686 invoked from network); 28 Jun 2008 23:37:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jun 2008 23:37:22 -0000
Received: (qmail 16409 invoked by uid 500); 28 Jun 2008 23:37:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16371 invoked by uid 500); 28 Jun 2008 23:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16360 invoked by uid 99); 28 Jun 2008 23:37:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 16:37:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.236.211] (HELO web58613.mail.re3.yahoo.com) (68.142.236.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Jun 2008 23:36:24 +0000
Received: (qmail 45662 invoked by uid 60001); 28 Jun 2008 23:35:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=3ze9aJKvgVA18e5mXr2wUFEa9kuwd0opFbAGwPoaIyRsR2wwPC7lSlncj5rN6C39NpNkaoB61tVqflEmFTbnDn8syj6mBlsJafU/lwbUK8gDtXshQPs2mahoAQbigpYundAS4X7SWRawZKvvW6O6Jench6mpDF698oqije9rm+4=;
Received: from [68.160.62.82] by web58613.mail.re3.yahoo.com via HTTP; Sat, 28 Jun 2008 16:35:42 PDT
X-Mailer: YahooMailWebService/0.7.199
Date: Sat, 28 Jun 2008 16:35:42 -0700 (PDT)
From: qaz zaq <fortques@yahoo.com>
Reply-To: fortques@yahoo.com
Subject: Re: document retrieval 100 times slower after finishing some heavy disk operation
To: java-user@lucene.apache.org
In-Reply-To: <200806290115.15674@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-119543340-1214696142=:39517"
Message-ID: <827468.39517.qm@web58613.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-119543340-1214696142=:39517
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

thanks for your quick reply!
=A0
The copy operation is not related to JAVA. I use Windows (2003 Enterprise)=
=A0 copy command. The problem persists even 5 hours after the copy is done =
(it should not take so long for OS to write a 1G file from system cache to =
disk. right?).=A0 The only way to resolve this problem is to restart my app=
lication.=A0
=A0
BTW, How can I tell if a file is still in system cache vs. in disk?

--- On Sat, 6/28/08, Daniel Naber <lucenelist2007@danielnaber.de> wrote:

From: Daniel Naber <lucenelist2007@danielnaber.de>
Subject: Re: document retrieval 100 times slower after finishing some heavy=
 disk operation
To: java-user@lucene.apache.org
Date: Saturday, June 28, 2008, 7:15 PM

On Sonntag, 29. Juni 2008, qaz zaq wrote:

> indexes=A0which usually take less then 16ms. However, everytime afer some
> heavy disk operations (such as copy 1G size of a file into that disk)=A0,
> the document retrieval slows down to couple seconds immediately,
> even=A0well after this disk operation being finished for a long time.

Is this copy operation initiated by your java code and does it require a=20
lot of RAM? If so, this could be caused by the JVM garbage collection.=20
There are options to start the JVM so it prints out garbage collection=20
progress information. Also, are you sure the copy operation is finished?=20
Maybe data is still in the cache of the operating system and the disk is=20
still busy writing it?

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A =
     
--0-119543340-1214696142=:39517--

From java-user-return-34700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 29 06:17:02 2008
Return-Path: <java-user-return-34700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32462 invoked from network); 29 Jun 2008 06:17:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2008 06:17:02 -0000
Received: (qmail 66692 invoked by uid 500); 29 Jun 2008 06:16:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66665 invoked by uid 500); 29 Jun 2008 06:16:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66652 invoked by uid 99); 29 Jun 2008 06:16:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Jun 2008 23:16:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2008 06:16:03 +0000
Received: from [91.37.218.228] (helo=p5b25dae4.dip.t-dialin.net)
	by smtprelay01.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KCqCV-0006R7-Sh
	for java-user@lucene.apache.org; Sun, 29 Jun 2008 08:15:52 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: document retrieval 100 times slower after finishing some heavy disk operation
Date: Sun, 29 Jun 2008 08:16:14 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <576482.42707.qm@web58606.mail.re3.yahoo.com>
In-Reply-To: <576482.42707.qm@web58606.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200806290816.14935@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 29. Juni 2008, qaz zaq wrote:

> I have=C2=A02=C2=A0FSDirectory indexes=C2=A0each with size about=C2=A0500=
M.=C2=A0I have 2
> parallel search threads=C2=A0fetching=C2=A0200 documents from these 2
> indexes=C2=A0which usually take less then 16ms.

=46etching documents means that per document about 2 disk seeks are needed =
to=20
access the document. For 200 documents, that's not possible in 16ms on a=20
common hard disk, unless everything is chached by the operating system.=20
Your copy operation seems to clear that cache and search times get slower.=
=20
A solution might be to re-warm the cache after each copy process.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 29 07:07:57 2008
Return-Path: <java-user-return-34701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45454 invoked from network); 29 Jun 2008 07:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2008 07:07:57 -0000
Received: (qmail 76408 invoked by uid 500); 29 Jun 2008 07:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76371 invoked by uid 500); 29 Jun 2008 07:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76360 invoked by uid 99); 29 Jun 2008 07:07:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2008 00:07:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2008 07:07:02 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1094238wfc.20
        for <java-user@lucene.apache.org>; Sun, 29 Jun 2008 00:07:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=L4bpm+Fj7pRghYzaGj+IfJK4ZpSNVWyjaRuMFPsvvKc=;
        b=hRcl4OpcQ+h2VoqlgF678OYGn985teic904Q/xfAlw28gxN8m21M1oGbekDV8XBxSM
         kwSwsP+Dk0Y69WbPttX1z1dqmEXdrZyq/cNXJhpKp2G6sAEztNOGWJACPllwh25nB0Ob
         uVRi65Fy3HsAFGaO1zRYT+1AC8vZX/9LIFyps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=AEmJ1jX5fRBKb+PFtVQLRgbbK33G18tWqfMuohhj7s8VxeGdyCdmUNf6zsSzzU9X48
         E1C2nsSle4bgJ/o9CYqrlqenCxCyhA+/l5ieEF4aYL5cjx4AO3G8Jl9BY5tF4ShUzzOC
         KH9tXzPXC2QA0p+n7JhaxFd9JDLMOvdG5S2BA=
Received: by 10.142.211.1 with SMTP id j1mr1269076wfg.203.1214723242435;
        Sun, 29 Jun 2008 00:07:22 -0700 (PDT)
Received: by 10.142.155.20 with HTTP; Sun, 29 Jun 2008 00:07:22 -0700 (PDT)
Message-ID: <74f928500806290007u66df0515u6e3aee706748d66a@mail.gmail.com>
Date: Sun, 29 Jun 2008 10:07:22 +0300
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Preventing index corruption
In-Reply-To: <9ac0c6aa0806270235k3842694cj5db6d49258466797@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15399_29890264.1214723242485"
References: <74f928500806260728m36d7fd56yae56801903fa2938@mail.gmail.com>
	 <359a92830806260742k1ab39f7bu55177be4f5922999@mail.gmail.com>
	 <74f928500806260811q157afe1elc950d5e3492b208c@mail.gmail.com>
	 <4864B0D1.1060501@propylon.com>
	 <9ac0c6aa0806270235k3842694cj5db6d49258466797@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15399_29890264.1214723242485
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the information.

>From what I read in other posts it's better to prevent using RAMDirectory
since the same result can be achieved by using the autoCommit=false as you
suggested.

I'm using 2.3.1 so I guess I'll have to wait to 2.4 or take the latest trunk
in order to benefit from these updates.

Eran.


On Fri, Jun 27, 2008 at 12:35 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> If you open your IndexWriter with autoCommit=false, then no changes
> will be visible in the index until you call commit() or close().
> Added documents can still be flushed to disk as new segments when the
> RAM buffer is full, but these segments are not referenced (by a new
> segments_N file) until commit() or close() is called.  commit() is
> only available in the trunk (to be released as 2.4 at some point)
> version of Lucene.
>
> Re safety on sudden power loss or machine crash: on the trunk only,
> the index will not become corrupt due to such events as long as the
> underlying IO system correctly implements fsync().  But on all current
> releases of Lucene a sudden power loss or machine crash could in fact
> corrupt the index.  See details here:
>
>    https://issues.apache.org/jira/browse/LUCENE-1044
>
> Mike
>
> John Byrne <john.byrne@propylon.com> wrote:
> > Hi,
> >
> > Rather than disabling the merging, have you considered putting the
> documents
> > in a separate index, possibly in memory, and then deciding when to merge
> > them with the main index yourself?
> >
> > That way, you can change you mind and simply not merge the  new documents
> if
> > you want.
> >
> > To do this, you can create a new RAMDirectory, and add your documents to
> > that, then when you want to merge with the main index, open an
> IndexWriter
> > on the main index, and call IndexWriter.addIndexes(Directory[]). Of
> course,
> > you don't have to use a RAMDirectory, but it would make sense, if it's
> only
> > purpose is to temporarily hold the documents until you decide to commit
> > them.
> >
> > I don't know what will happen if the computer crashes during the merge,
> but
> > see http://lucene.apache.org/java/2_3_2/api/index.html
> >
> > This is from the "IndexWriter.addIndexes(Directory[])" documentation:
> >
> > "This method is transactional in how Exceptions are handled: it does not
> > commit a new segments_N file until all indexes are added. This means if
> an
> > Exception occurs (for example disk full), then either no indexes will
> have
> > been added or they all will have been."
> >
> > I hope that helps!
> >
> > Regards,
> > -JB
> >
> > Eran Sevi wrote:
> >>
> >> Thanks Erick.
> >> You might be joking, but one of our clients indeed had all his servers
> >> destroyed in a flood. Of course in this rare case, a solution would be
> to
> >> keep the backup on another site.
> >>
> >> However I'm still confused about normal scenarios:
> >>
> >> Let's say that in the middle of the batch I got an exception and wan't
> to
> >> rollback. Can I do this ?
> >> I want to make sure that after a batch finishes (and only then), it is
> >> written to disk (and not find out after a while during a commit that
> >> something went wrong).Do I have to close the writer or Flush is enough?
> I
> >> though about raising mergeFactor and other parameters to high values (or
> >> disabling them) so an automatic merge/commit will not happen, and then I
> >> can
> >> manually decide when to commit the changes - the size of the batches is
> >> not
> >> constant so I can't determine in advance.
> >> I don't mind hurting the index performance a bit by doing this manually,
> >> but
> >> I can't efford to let the client think that the information is secured
> in
> >> the index and than to find out that it's not.
> >>
> >> My index size contains a few million docs and it's size can reach about
> >> 30G
> >> (we're saving a lot of fields and information for each document). Having
> a
> >> backup index is an option I considered but I wanted to avoid the
> overhead
> >> of
> >> keeping them synchronized (they might not be on the same server which
> >> exposes a lot of new problems like network issues).
> >>
> >> Thanks.
> >>
> >> On Thu, Jun 26, 2008 at 5:42 PM, Erick Erickson <
> erickerickson@gmail.com>
> >> wrote:
> >>
> >>
> >>>
> >>> How big is your index? The simpleminded way would be to copy things
> >>> around
> >>> as your batches come in and only switch to the *real* one after the
> >>> additions
> >>> were verified.
> >>>
> >>> You could also just maintain two indexes but only update one at a time.
> >>> In
> >>> the
> >>> 99.99% case where things went well, it would just be a matter of
> >>> continuing
> >>> on.
> >>> Whenever "something bad happened", you could copy the good index over
> the
> >>> bad one and go at it again.
> >>>
> >>> But to ask that no matter what, the index is OK is asking a lot....
> There
> >>> are fires and floods and earthquakes to consider <G>
> >>>
> >>> Best
> >>> Erick
> >>>
> >>> On Thu, Jun 26, 2008 at 10:28 AM, Eran Sevi <eransevi@gmail.com>
> wrote:
> >>>
> >>>
> >>>>
> >>>> Hi,
> >>>>
> >>>> I'm looking for the correct way to create an index given the following
> >>>> restrictions:
> >>>>
> >>>> 1. The documents are received in batches of variable sizes (not more
> >>>> then
> >>>> 100 docs in a batch).
> >>>> 2. The batch insertion must be transactional - either the whole batch
> is
> >>>> added to the index (exists physically on the disk), or the whole batch
> >>>> is
> >>>> canceled/aborted and the index remains as before.
> >>>> 3. The index must remain valid at all times and shouldn't be corrupted
> >>>>
> >>>
> >>> even
> >>>
> >>>>
> >>>> if a power interruption occurs - *most important*
> >>>> 4. Index speed is less important than search speed.
> >>>>
> >>>> How should I use a writer with all these restrictions? Can I do it
> >>>>
> >>>
> >>> without
> >>>
> >>>>
> >>>> having to close the writer after each batch (maybe flush is enough)?
> >>>>
> >>>> Should I change the IndexWriter parameters such as mergeFactor,
> >>>> RAMBufferSize, etc. ?
> >>>> I want to make sure that partial batches are not written to the disk
> (if
> >>>> the
> >>>> computer crashes in the middle of the batch, I want to be able to work
> >>>>
> >>>
> >>> with
> >>>
> >>>>
> >>>> the index as it was before the crash).
> >>>>
> >>>> If I'm working with a single writer, is it guaranteed that no matter
> >>>> what
> >>>> happens the index can be opened and used (I don't mind loosing docs,
> >>>> just
> >>>> that the index won't be ruined).
> >>>>
> >>>> Thanks and sorry about the long list of questions,
> >>>> Eran.
> >>>>
> >>>>
> >>
> >>
>  ------------------------------------------------------------------------
> >>
> >> No virus found in this incoming message.
> >> Checked by AVG. Version: 7.5.524 / Virus Database: 270.4.1/1517 -
> Release
> >> Date: 24/06/2008 20:41
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15399_29890264.1214723242485--

From java-user-return-34702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 29 13:44:24 2008
Return-Path: <java-user-return-34702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2469 invoked from network); 29 Jun 2008 13:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2008 13:44:24 -0000
Received: (qmail 83532 invoked by uid 500); 29 Jun 2008 13:44:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83501 invoked by uid 500); 29 Jun 2008 13:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83490 invoked by uid 99); 29 Jun 2008 13:44:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2008 06:44:17 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [87.248.110.172] (HELO n39.bullet.mail.ukl.yahoo.com) (87.248.110.172)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 29 Jun 2008 13:43:25 +0000
Received: from [217.146.182.179] by n39.bullet.mail.ukl.yahoo.com with NNFMP; 29 Jun 2008 13:42:26 -0000
Received: from [87.248.111.145] by t5.bullet.ukl.yahoo.com with NNFMP; 29 Jun 2008 13:42:26 -0000
Received: from [127.0.0.1] by omp202.mail.ukl.yahoo.com with NNFMP; 29 Jun 2008 13:42:26 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 8706.42399.bm@omp202.mail.ukl.yahoo.com
Received: (qmail 6421 invoked by uid 60001); 29 Jun 2008 13:42:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3f9w0I9MgC7gPVsiJbCvc9leTmV50/ZkQ6MFeQAzU5s1iSPyQemiAtCK8VGucTfCKynPRSXaBjJEZE5iC6RClJ938nVKMv3w1MF2w0JraGcWwsfy9G/tsEqKVsCX50sFiTA27yiRoLkokmkxNvAHsk+rWPcL/mJIDtF1k/Gd/JY=;
Received: from [79.201.86.211] by web23001.mail.ird.yahoo.com via HTTP; Sun, 29 Jun 2008 13:42:25 GMT
X-Mailer: YahooMailRC/1042.33 YahooMailWebService/0.7.199
Date: Sun, 29 Jun 2008 13:42:25 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: document retrieval 100 times slower after finishing some heavy disk operation
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <826369.6280.qm@web23001.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

yes, we have seen this many times. The problem is, especially on windows ,t=
hat some simple commands like copy make havoc of File System cache, as matt=
er of fact, we are not sure it is the cache that is making problems, genera=
lly all IO operations start blocking like crazy (we have seen this effect o=
n 32Gb machine, where complete index fits comfortably in RAM, ca. 2Gb, and =
than copy of another file of this size caused lucene to wait endlessly on O=
S to provide some signs of life. Adding one disk more helped a lot, as well=
 as some coordination between lucene and external processes that are IO int=
ensive, warm-up is easy, as long as you can achieve coordination between pr=
ocesses)... =0A=0Agood luck=0A=0A =0A=0A=0A=0A=0A=0A----- Original Message =
----=0A> From: qaz zaq <fortques@yahoo.com>=0A> To: java-user@lucene.apache=
..org=0A> Sent: Sunday, 29 June, 2008 12:34:24 AM=0A> Subject: document retr=
ieval 100 times slower after finishing some heavy disk operation=0A> =0A> H=
i,=0A>  =0A> I ran into a very strange situation regarding document retriev=
al slowness and =0A> want to get some advice urgently.=0A>  =0A> I have 2 F=
SDirectory indexes each with size about 500M. I have 2 parallel search =0A>=
 threads fetching 200 documents from these 2 indexes which usually take les=
s then =0A> 16ms. However, everytime afer some heavy disk operations (such =
as copy 1G size =0A> of a file into that disk) , the document retrieval slo=
ws down to couple seconds =0A> immediately, even well after this disk opera=
tion being finished for a long time. =0A> It appears Lucene could never res=
ume to it's original speed and I have to =0A> restart by application inorde=
r to get it normal. =0A>  =0A> Anybody has encountered similiar problems? =
=0A=0A=0A=0A      _________________________________________________________=
_=0ANot happy with your email address?.=0AGet the one you really want - mil=
lions of new email addresses available now at Yahoo! http://uk.docs.yahoo.c=
om/ymail/new.html


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jun 29 15:52:32 2008
Return-Path: <java-user-return-34703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59361 invoked from network); 29 Jun 2008 15:52:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jun 2008 15:52:32 -0000
Received: (qmail 47983 invoked by uid 500); 29 Jun 2008 15:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47961 invoked by uid 500); 29 Jun 2008 15:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47950 invoked by uid 99); 29 Jun 2008 15:52:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2008 08:52:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2008 15:51:37 +0000
Received: by fg-out-1718.google.com with SMTP id l27so634517fgb.27
        for <java-user@lucene.apache.org>; Sun, 29 Jun 2008 08:51:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=rYOGJonQhtNZX/8FFbMB5Au05AxmGfX7nvXYiUPMXIw=;
        b=p7w/MMvM3ntrGBGzbFdeyEMGoyAuekyK2UirVE7+LrqvDXSxdUJJ/RZApEnKDIwa9h
         KNGacoYJSt926X2XWiJVCIy8JIpRQXgAkZKe5ZdyagbWCsBGzeysvVH+0NkHjgOxtpby
         srKO6HaXPWgqIuXbi8cuUhsb4vdQjym+nJ72E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=wG/NscHbn46O2G6U2HvEQ3Cb+mvhDu5L29fGgoGX8a5BQ70uQ7qjn+rvMzSbBoCHpS
         kb7aro+K5PbeBcL44GW+rZv1cCdKW3/D9KOK4IK3zxvPxdTh0C2zUBouADW2c9vGBse7
         8ecqlwyrJJBWAp52NsI92Vlcmc+OHL5RM3D/g=
Received: by 10.125.107.3 with SMTP id j3mr881340mkm.90.1214754715693;
        Sun, 29 Jun 2008 08:51:55 -0700 (PDT)
Received: by 10.125.137.14 with HTTP; Sun, 29 Jun 2008 08:51:55 -0700 (PDT)
Message-ID: <8837fb770806290851h4f331b8pb8c6084b9e85f49d@mail.gmail.com>
Date: Sun, 29 Jun 2008 08:51:55 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Pooling indexReader
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11438_4498029.1214754715699"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11438_4498029.1214754715699
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:
   I had some code to do indexReader pooling to avoid open and close on a
large index when doing lotsa searches. So I had a FilteredIndexReader proxy
that overrides the doClose method to do nothing, and when I really want to
close it, I call super.doClose(). This patter worked well for me prior to
2.3. With 2.3, the close is doing the reference counting out side of
doClose, and since close is final, my pattern is broken.

   Am I using the api incorrectly? how would I accomplish this task?

Thanks

-John

------=_Part_11438_4498029.1214754715699--

From java-user-return-34704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 03:40:35 2008
Return-Path: <java-user-return-34704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81853 invoked from network); 30 Jun 2008 03:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 03:40:35 -0000
Received: (qmail 34914 invoked by uid 500); 30 Jun 2008 03:40:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34880 invoked by uid 500); 30 Jun 2008 03:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34869 invoked by uid 99); 30 Jun 2008 03:40:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Jun 2008 20:40:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 03:39:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KDAFC-0007mM-6e
	for java-user@lucene.apache.org; Sun, 29 Jun 2008 20:39:58 -0700
Message-ID: <18188207.post@talk.nabble.com>
Date: Sun, 29 Jun 2008 20:39:58 -0700 (PDT)
From: java_is_everything <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Doubt on IndexWriter.close()
In-Reply-To: <9ac0c6aa0806270929n3aa255a2lc036c88a40f19704@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
References: <18153935.post@talk.nabble.com> <9ac0c6aa0806270929n3aa255a2lc036c88a40f19704@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike.

Our project currently uses 2.0.0. So I suppose the later versions might not
be allowing this, right?

Ajay Garg



Michael McCandless-2 wrote:
> 
> Which version of Lucene are you using?  Recent versions do not allow
> addDocument to be called after close.
> 
> Mike
> 
> java_is_everything <ajaygargnsit@gmail.com> wrote:
>>
>> Hi all.
>>
>> IndexWriter.close() API states that ::
>>
>> "Flushes all changes to an index and closes all associated files.".
>>
>> What does "closes all associated files" mean, since we are apparently
>> able
>> to still addDocument() even after calling IndexWriter.close() ?
>>
>>
>> Looking forward to a reply.
>>
>> Ajay garg
>> --
>> View this message in context:
>> http://www.nabble.com/Doubt-on-IndexWriter.close%28%29-tp18153935p18153935.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Doubt-on-IndexWriter.close%28%29-tp18153935p18188207.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 08:58:49 2008
Return-Path: <java-user-return-34705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59919 invoked from network); 30 Jun 2008 08:58:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 08:58:49 -0000
Received: (qmail 86084 invoked by uid 500); 30 Jun 2008 08:58:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86053 invoked by uid 500); 30 Jun 2008 08:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86042 invoked by uid 99); 30 Jun 2008 08:58:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 01:58:44 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [121.243.22.156] (HELO delhtca02.Infoedge.com) (121.243.22.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 08:57:53 +0000
Received: from [172.16.1.43] (220.225.240.5) by delhtca02.Infoedge.com
 (172.16.3.245) with Microsoft SMTP Server id 8.1.240.5; Mon, 30 Jun 2008
 14:28:34 +0530
Subject: Regarding RAMDirectory, FSDirectory, tmpFS...
From: Devashish <devashish.b@naukri.com>
Reply-To: devashish.b@naukri.com
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: Naukri Tech
Date: Mon, 30 Jun 2008 13:27:11 +0530
Message-ID: <1214812631.10644.10.camel@devashish-laptop>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


What is the difference between these three modes of operating with
lucene... And are there any other modes/ways of operation also, using
which we can more effectively run applications with lucene.
I have heard there is also something called 'Memory' in contrib
directory of lucene source package which can also be used.

Can you please let me know how these are different from each other/how
do each of these work.. 

Regards,
-- 
Devashish <devashish.b@naukri.com>
Naukri Tech


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 08:59:29 2008
Return-Path: <java-user-return-34706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60142 invoked from network); 30 Jun 2008 08:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 08:59:29 -0000
Received: (qmail 87977 invoked by uid 500); 30 Jun 2008 08:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87935 invoked by uid 500); 30 Jun 2008 08:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87924 invoked by uid 99); 30 Jun 2008 08:59:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 01:59:24 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 08:58:32 +0000
Received: by an-out-0708.google.com with SMTP id c37so253487anc.49
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 01:58:51 -0700 (PDT)
Received: by 10.100.11.7 with SMTP id 7mr3515405ank.149.1214816331049;
        Mon, 30 Jun 2008 01:58:51 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm6312860ywo.7.2008.06.30.01.58.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 30 Jun 2008 01:58:50 -0700 (PDT)
Message-Id: <56AAFC91-D7A5-4355-84BC-C7B575F1558C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18188207.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Doubt on IndexWriter.close()
Date: Mon, 30 Jun 2008 04:58:49 -0400
References: <18153935.post@talk.nabble.com> <9ac0c6aa0806270929n3aa255a2lc036c88a40f19704@mail.gmail.com> <18188207.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


That's right -- the check was added in 2.2.

Mike

java_is_everything wrote:

>
> Hi Mike.
>
> Our project currently uses 2.0.0. So I suppose the later versions  
> might not
> be allowing this, right?
>
> Ajay Garg
>
>
>
> Michael McCandless-2 wrote:
>>
>> Which version of Lucene are you using?  Recent versions do not allow
>> addDocument to be called after close.
>>
>> Mike
>>
>> java_is_everything <ajaygargnsit@gmail.com> wrote:
>>>
>>> Hi all.
>>>
>>> IndexWriter.close() API states that ::
>>>
>>> "Flushes all changes to an index and closes all associated files.".
>>>
>>> What does "closes all associated files" mean, since we are  
>>> apparently
>>> able
>>> to still addDocument() even after calling IndexWriter.close() ?
>>>
>>>
>>> Looking forward to a reply.
>>>
>>> Ajay garg
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Doubt-on-IndexWriter.close%28%29-tp18153935p18153935.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Doubt-on-IndexWriter.close%28%29-tp18153935p18188207.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 09:08:16 2008
Return-Path: <java-user-return-34707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62103 invoked from network); 30 Jun 2008 09:08:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 09:08:15 -0000
Received: (qmail 97284 invoked by uid 500); 30 Jun 2008 09:08:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97245 invoked by uid 500); 30 Jun 2008 09:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97234 invoked by uid 99); 30 Jun 2008 09:08:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 02:08:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 09:07:19 +0000
Received: by an-out-0708.google.com with SMTP id c37so253972anc.49
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 02:07:21 -0700 (PDT)
Received: by 10.100.172.16 with SMTP id u16mr3624313ane.9.1214816841712;
        Mon, 30 Jun 2008 02:07:21 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm6344154ywg.6.2008.06.30.02.07.20
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 30 Jun 2008 02:07:21 -0700 (PDT)
Message-Id: <DC963EAA-4854-4D37-A830-64A6E11CDD14@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770806290851h4f331b8pb8c6084b9e85f49d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Pooling indexReader
Date: Mon, 30 Jun 2008 05:07:19 -0400
References: <8837fb770806290851h4f331b8pb8c6084b9e85f49d@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


It's true there is now reference counting logic to determine when it's  
really time to close an IndexReader, but, at that point doClose() is  
still called so your custom logic should still be running, right?  It  
seems like your pattern ought to still be working?

If not, another alternative might be to override decRef() with your  
own logic, or, you could externally hold your own reference to the  
reader (call its incRef()) and then decRef() it when you're done.   
That would probably be cleanest...

Mike

On Jun 29, 2008, at 11:51 AM, John Wang wrote:

> Hi:
>   I had some code to do indexReader pooling to avoid open and close  
> on a
> large index when doing lotsa searches. So I had a  
> FilteredIndexReader proxy
> that overrides the doClose method to do nothing, and when I really  
> want to
> close it, I call super.doClose(). This patter worked well for me  
> prior to
> 2.3. With 2.3, the close is doing the reference counting out side of
> doClose, and since close is final, my pattern is broken.
>
>   Am I using the api incorrectly? how would I accomplish this task?
>
> Thanks
>
> -John


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 09:12:22 2008
Return-Path: <java-user-return-34708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63187 invoked from network); 30 Jun 2008 09:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 09:12:22 -0000
Received: (qmail 3105 invoked by uid 500); 30 Jun 2008 09:12:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3079 invoked by uid 500); 30 Jun 2008 09:12:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3068 invoked by uid 99); 30 Jun 2008 09:12:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 02:12:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [87.194.172.100] (HELO knox.decisionsoft.com) (87.194.172.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 09:11:24 +0000
Received: from valency.dsl.local ([10.0.0.19])
	by knox.decisionsoft.com with esmtp (Exim 4.63)
	(envelope-from <ejj@decisionsoft.com>)
	id 1KDFQE-0002Bw-PQ
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 10:11:42 +0100
Message-ID: <4868A34E.7060306@decisionsoft.com>
Date: Mon, 30 Jun 2008 10:11:42 +0100
From: Eleanor Joslin <ejj@decisionsoft.com>
User-Agent: Thunderbird 2.0.0.9 (X11/20071115)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Highlight an Greek
References: <20080626094856.qk6v9f1nok08kksc@webmail.tera.gr>
In-Reply-To: <20080626094856.qk6v9f1nok08kksc@webmail.tera.gr>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 10.0.0.19
X-SA-Exim-Mail-From: ejj@decisionsoft.com
X-SA-Exim-Scanned: No (on knox.decisionsoft.com); SAEximRunCond expanded to false
X-SystemFilter-new-T: not expanding
X-SystemFilter-new-S:  not expanding
X-SystemFilter-new-F:  not expanding
X-Virus-Checked: Checked by ClamAV on apache.org

You should be using the same analyzer when you query as when you built 
the index.  I suspect that in this case you need to make an analyzer 
that recognises both English and Greek.

I hope this helps,

	Eleanor Joslin

jim@tera.gr wrote:
> Hello
> 
> i am having the following code to highlight a text
> 
> public String highlight(String text, String query ) throws IOException {
> TermQuery query = new TermQuery(new Term("f", query));
>     QueryScorer scorer = new QueryScorer(query);
>     SimpleHTMLFormatter formatter =
>         new SimpleHTMLFormatter("<span class=\"highlight\">",
>             "</span>");
>     Highlighter highlighter = new Highlighter(formatter, scorer);
>     Fragmenter fragmenter = new SimpleFragmenter(50);
>     highlighter.setTextFragmenter(fragmenter);
> 
>     TokenStream tokenStream = new GreekAnalyzer()
>         .tokenStream("f", new StringReader(text));
> 
>     String result = highlighter.getBestFragments(tokenStream, text, 5, 
> "...");
> 
>   return result;
> }
> 
> if i use a text with english characters works fine if i try a text with 
> Greek Character i am getting en empty string as result.
> Why?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


-- 
Eleanor Joslin, Software Development   DecisionSoft Ltd.
Telephone: +44-1865-203192             http://www.decisionsoft.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 10:01:25 2008
Return-Path: <java-user-return-34709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73158 invoked from network); 30 Jun 2008 10:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 10:01:24 -0000
Received: (qmail 41310 invoked by uid 500); 30 Jun 2008 10:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41286 invoked by uid 500); 30 Jun 2008 10:01:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41275 invoked by uid 99); 30 Jun 2008 10:01:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 03:01:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.247.81.221] (HELO maximus.getnetvps.net) (63.247.81.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 10:00:25 +0000
Received: (qmail 18309 invoked by uid 48); 30 Jun 2008 11:59:44 +0200
Received: from isa2.syzefxis-hosting.gr (isa2.syzefxis-hosting.gr
	[84.205.231.39]) by webmail.tera.gr (Horde MIME library) with HTTP; Mon, 30
	Jun 2008 11:59:44 +0200
Message-ID: <20080630115944.db3cz8us0oc04kcc@webmail.tera.gr>
Date: Mon, 30 Jun 2008 11:59:44 +0200
From: jim@tera.gr
To: java-user@lucene.apache.org
Subject: Re: Highlight an Greek
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Sorry about doubble messaging, it was from mistake

  I am working on an application that searches documents with lucene. =20
The documents are  taken from a database and the basic field is in HTML.
The index and searching works fine with Greek characters. I am using =20
the lucene to take the ID and then the to get the
corresponding record from database. My problem is that: i want to =20
highlight the field with HTML query string that using on searching.

Is it possible to  do  with  Hightlighter or  i must  write my own  class?


>
>
> Grant Ingersoll wrote:
>> Because there are no matches?  Have you checked your index, etc?  =20
>> Do you get matches for that query normally in Greek against your =20
>> index (nevermind highlighting)?  Are your analyzers the same?  Are =20
>> your English Fields stored and the Greek ones not?  Does field "f" =20
>> contain Greek?  It could be a whole host of reasons and that =20
>> snippet of code is not enough to go from.  Check your index with =20
>> Luke, etc.  See the FAQ for more help, too.
>>
>> Also, please don't repost the same exact question 45 minutes later =20
>> b/c you didn't get an immediate response at 3:48 AM East Coast US =20
>> time.  It just clutters email and makes it less likely that you =20
>> will get a response.
>>
>> -Grant
>>
>> On Jun 26, 2008, at 3:48 AM, jim@tera.gr wrote:
>>
>>> Hello
>>>
>>> i am having the following code to highlight a text
>>>
>>> public String highlight(String text, String query ) throws IOException {
>>> TermQuery query =3D new TermQuery(new Term("f", query));
>>>    QueryScorer scorer =3D new QueryScorer(query);
>>>    SimpleHTMLFormatter formatter =3D
>>>        new SimpleHTMLFormatter("<span class=3D\"highlight\">",
>>>            "</span>");
>>>    Highlighter highlighter =3D new Highlighter(formatter, scorer);
>>>    Fragmenter fragmenter =3D new SimpleFragmenter(50);
>>>    highlighter.setTextFragmenter(fragmenter);
>>>
>>>    TokenStream tokenStream =3D new GreekAnalyzer()
>>>        .tokenStream("f", new StringReader(text));
>>>
>>>    String result =3D highlighter.getBestFragments(tokenStream, text, =20
>>> 5, "...");
>>>
>>>  return result;
>>> }
>>>
>>> if i use a text with english characters works fine if i try a text =20
>>> with Greek Character i am getting en empty string as result.
>>> Why?
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> ------------------------------------------------------------------------
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG. Version: 8.0.101 / Virus Database: 270.4.3/1525 - =20
>> Release Date: 29/6/2008 3:09 =EC=EC
>>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 10:19:31 2008
Return-Path: <java-user-return-34710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77944 invoked from network); 30 Jun 2008 10:19:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 10:19:31 -0000
Received: (qmail 56693 invoked by uid 500); 30 Jun 2008 10:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56655 invoked by uid 500); 30 Jun 2008 10:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56644 invoked by uid 99); 30 Jun 2008 10:19:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 03:19:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 216.239.58.188 as permitted sender)
Received: from [216.239.58.188] (HELO gv-out-0910.google.com) (216.239.58.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 10:18:33 +0000
Received: by gv-out-0910.google.com with SMTP id u5so154672gve.23
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 03:18:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fNTZzN2e50mX7+2tpBRCZ+1tDr3HokP/hc7OEMhIC7s=;
        b=j43Qn3+IzKZo8E05ZPqQ+662LaklMYew3jpHjXnbFRF/YuGOIG+SzEanCug4RvfJIN
         x3qd7sUrGeULOXP7y3ed/GrxPLr2x8gWX5xLnbTX5IqL+OqaZnHeZkqQsXrPO51yLmvJ
         2c/DxclbQb2yqklxVZucd+Bbx717uYDxtKPek=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=geqalb3t6qytMQkQ/qHjq9TN8mdipP0KjT0HS+07uJFqMfhK4yVg/9MqI16SqiDSFW
         Ptz+Y0DcMQecIMR7WUlj082uxFjezYPwnuRV9djempK9fBwkdfF31iwkbl1S4JdJE61j
         r/yP+ArNLuWWP8Hm7gWHvMFDXVKObb6BuPcZQ=
Received: by 10.125.83.3 with SMTP id k3mr1060098mkl.56.1214821132581;
        Mon, 30 Jun 2008 03:18:52 -0700 (PDT)
Received: by 10.125.162.6 with HTTP; Mon, 30 Jun 2008 03:18:52 -0700 (PDT)
Message-ID: <867513fe0806300318y3aadc75cw5a4ebcd76d687d71@mail.gmail.com>
Date: Mon, 30 Jun 2008 15:48:52 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org, devashish.b@naukri.com
Subject: Re: Regarding RAMDirectory, FSDirectory, tmpFS...
In-Reply-To: <1214812631.10644.10.camel@devashish-laptop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13829_25905947.1214821132555"
References: <1214812631.10644.10.camel@devashish-laptop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13829_25905947.1214821132555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Devashish,

The difference between these modes of operation would be that firsly,
RAMDirectory and FSDirectory on one hand are implementations of the
directory class of lucene.
http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/store/Directory.html
Lucene's directory is just a flat list of files and an FSDirectory is a just
a file system (straightforward) implementation of the same where is
RAMDirectory is a memory (RAM) based implementation of the same.
tmpFS on the other hand is a file system and so is an OS level thing with
nothing to do at all with lucene/java. This means that there is no limit to
allocating a tmpfs (in terms of size).
When we use RAMDirectory, the JVM would load the index into its memory (and
use the memory allocated to it). This might be a cause of issue as 32 bit
JVM do not allow appropriation of over 2 gigs of total memory to a single
JVM instance (out of which only 1.2 gigs would be resident memory).
While in both the java Directory implementations the JVM handles most of the
stuff e.g. loading unloading indexes to/from the memory, in case of tmpfs we
have to manual do the task.


Hope that clears your questions! :)

--
Anshum


On Mon, Jun 30, 2008 at 1:27 PM, Devashish <devashish.b@naukri.com> wrote:

>
> What is the difference between these three modes of operating with
> lucene... And are there any other modes/ways of operation also, using
> which we can more effectively run applications with lucene.
> I have heard there is also something called 'Memory' in contrib
> directory of lucene source package which can also be used.
>
> Can you please let me know how these are different from each other/how
> do each of these work..
>
> Regards,
> --
> Devashish <devashish.b@naukri.com>
> Naukri Tech
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_13829_25905947.1214821132555--

From java-user-return-34711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 12:29:49 2008
Return-Path: <java-user-return-34711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15887 invoked from network); 30 Jun 2008 12:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 12:29:49 -0000
Received: (qmail 11635 invoked by uid 500); 30 Jun 2008 12:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11604 invoked by uid 500); 30 Jun 2008 12:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11593 invoked by uid 99); 30 Jun 2008 12:29:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 05:29:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 12:28:48 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5UCT3sZ004533
	for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 08:29:04 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4868D0C2.9050500@informatics.jax.org>
Date: Mon, 30 Jun 2008 08:25:38 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?
References: <87D5FFD601E4BC488D51E45D414706C7031C702E@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7031C702E@VOO-EXCHANGE01.internal.sungard.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.30.121335
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='SUPERLONG_LINE 0.05, BODY_SIZE_10000_PLUS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, didn't get this until this morning.

Yes, both fields should be indexed and searchable, though the data_type 
one should likely be untokenized. 

Data should be indexed and tokenized with whatever appropriate Analyzer 
works for your data.

As for what your indexing, may I ask why you are doing it like that?

I would have thought indexing each property seperately (a seperate doc) 
would have been sufficient for your needs, but if you can explain a bit 
more about your situation perhaps I can be more helpful on this matter?

Matt

Bill.Chesky@sungard.com wrote:
> Hmmm, I think maybe I am missing something.  In your design is the 'data' field indexed, i.e. searchable?  Or is it an unindexed, stored field?  
>
> I was thinking that both 'data' and 'data_type' were indexed and searchable.  
>
> Maybe the confusion stems from the fact that for the Document corresponding to "State=California", we're not just indexing on the token 'California'.  We're indexing on all the tokens from all the Properties in the set of Properties corresponding to a person's address.  In my original example this would be: California, Sacremento, 94203, South, Main, 1234, Joe and Smith.
>
> For the 'data_type' field I was thinking you were saying we'd index on a single token, namely 'State' (or whatever the left-hand side is).
>
> Does that make sense?
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy 
>
>
> -----Original Message-----
> From: Matthew Hall [mailto:mhall@informatics.jax.org] 
> Sent: Friday, June 27, 2008 3:33 PM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
> Yup, you're pretty much there.
>
> The only part I'm a bit confused about is what you've said in your data 
> field there,
>
> I'm thinking you mean that for the data_type: "State", you would have 
> the data entry of "California", right?
>
> If so, then yup, you are spot on ^^
>
> We use this technique all the time on our side, and its helped 
> considerably.  We then use the db_key to reference into a display time 
> cache that holds all of the display information for the underlying 
> object that we would ever want to present to the user.  This allows our 
> search time index to be very concise, and as a result nearly every 
> search we hit it with is subsecond, which is a nice place to be ^^
>
> Matt
>
> Bill.Chesky@sungard.com wrote:
>   
>> Matthew,
>>
>> Thanks for the reply.  This looks very interesting.  If I'm understanding correctly your db_key, data and data_type are Fields within the Document, correct?  So is this how you envision it?
>>
>> Document: State=California
>>    Field: 'db_key'='1395' (primary key into relational table, correct?)
>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>>    Field: 'data_type' indexed by 'State'
>>
>> Document: City=Sacremento
>>    Field: 'db_key'='2405' 
>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>>    Field: 'data_type' indexed by 'City'
>>
>> Then my query for all Properties would be:
>>
>> 	+data:South
>>
>> My query for only 'City' Properties would be:
>>
>> 	+data:South +data_type:City
>>
>> Is that right?
>>
>> I think that would work.  Very nice.  Thank you very much!!!!
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>  www.sungard.com/energy 
>>
>>
>> -----Original Message-----
>> From: Matthew Hall [mailto:mhall@informatics.jax.org] 
>> Sent: Friday, June 27, 2008 11:49 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Can you create a Field that is a copy of another Field?
>>
>> I'm not sure if this is helpful, but I do something VERY similar to this 
>> in my project.
>>
>> So, for the example you are citing I would design my index as follows:
>>
>> db_key, data, data_type
>>
>> Where the data_type is some sort of value representing the thing that's 
>> on the left hand side of your property relationship there.
>>
>> So, then in order to satisfy your search, the queries become quite simple:
>>
>> The search for everything simply searches against the data field in this 
>> index, wheras the search for a specific data_type + searchterm becomes a 
>> simple boolean query, that has a MUST clause for the data_type value.
>>
>> As an even BETTER bonus, this will then mean that all of your searchable 
>> values will now have relevance to each other at scoring time, which is 
>> quite useful in the long run.
>>
>> Hope this helps you out,
>>
>> Matt
>>
>> Bill.Chesky@sungard.com wrote:
>>   
>>     
>>> Grant,
>>>
>>> Thanks for the reply.  What we're trying to do is kind of esoteric and hard to explain without going into a lot of gory details so I was trying to keep it simple.  But I'll try to summarize.
>>>
>>> We're trying to index entities in a relational database.  One of the entities we're trying to index is something called a Property.  Think of a Property kind of like the java.util.Properties class, i.e. a name/value pair. So some examples of Properties might be:
>>>
>>> State=California
>>> City=Sacremento
>>> ZipCode=94203
>>> StreetName=South Main
>>> StreetNumber=1234
>>> Name=Joe Smith
>>>
>>> Etc., etc.
>>>
>>> (Note: this isn't the type of data we're storing... just trying to keep it simple.)
>>>
>>> Imagine that the above list represents the the set of Properties that specify the address for a single person, Joe Smith.  Each Property in the set will be indexed by the values on the right-hand side of all the other name/value pairs in the set, i.e.: California, Sacremento, 94203, South, Main, 1234, Joe and Smith.
>>>
>>> There are two types of queries that we want to do.  
>>> 1) retrieve every Property matching the specified search terms, regardless of its left-hand side.  For this we want to create a field in EVERY Document called "keywords" and index it by the right-hand side values as described above.
>>> 2) retrieve every Property with a given left-hand side that matches the specified search terms.  For example, find all the 'City' Properties that match the term 'South'.  For this we want to create a field with the name of the left-hand side (e.g. State, City, ZipCode, etc.) but only in those Documents that correspond to a Property with that left-hand side.  Again this field will be indexed by the right-hand side values as described above.
>>>
>>> So a couple of examples from the above list might look something like:
>>>
>>> Document: State=California
>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>>>   Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>>>
>>> Document: City=Sacremento
>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>>>   Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>>>
>>> Now if I'm interested in all the Properties that match the word "South", I search the index on the "keywords" field for the term "South".  This will return both documents above.  
>>>
>>> But if I'm only interested in any 'City' Properties that match the term 'South' I search the index on the "City" field for the term "South".  This will only return the 'City=Sacremento' document above because it's the only Document of the two that even has a 'City' field in it.
>>>
>>> But in any case, the 'State' field and the 'City' field are indexed exactly the same way as the 'keywords' field.  Which is why I was wondering if there was a way to just create these fields as copies of the 'keywords' field.
>>>
>>> Here is a code sample where I'm creating the index.  We're using Hibernate search to search the indexes, thus the "id" and "_hibernate_class" fields.
>>>
>>> Query q = em.createQuery("select p from Property p");
>>>             
>>> List<Property> properties = q.getResultList();
>>>     
>>> for (Property p : properties)
>>> {
>>>     // Indexing property.
>>>     Document doc = new Document();
>>>     doc.add(new Field("id", 
>>>                        Integer.toString(p.getId()), 
>>>                        Field.Store.YES, 
>>>                        Field.Index.UN_TOKENIZED));
>>>     doc.add(new Field("_hibernate_class", 
>>>                       Property.class.getCanonicalName(), 
>>>                       Field.Store.YES, 
>>>                       Field.Index.UN_TOKENIZED));
>>>     TokenStream tokenStream = new PropertyTokenStream(p);
>>>     doc.add(new Field("keywords", tokenStream));
>>>     propertyIndexWriter.addDocument(doc);
>>>     tokenStream.close();    
>>>     // Here is where I would like to add the second field that is a copy
>>>     // of the "keywords" field just created above.  Note: the call
>>>     // p.getCharacteristic().getName() is getting the name of the 
>>>     // left-hand side of the Property as described above.
>>>     TokenStream tokenStream = new PropertyTokenStream(p);
>>>     doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>>>     propertyIndexWriter.addDocument(doc);
>>>     tokenStream.close();
>>> }
>>>
>>> Hope that clears it up.  
>>>
>>> BTW, in case this seems like a strange way to index things, I will also add that we are doing it this way in order to impose a heirarchical structure on Properties.  So my example above should really look like this:
>>>
>>> State=California
>>>     City=Sacremento
>>>         ZipCode=94203
>>>             StreetName=South Main
>>>                 StreetNumber=1234
>>>                     Name=Joe Smith
>>>
>>> Use your imagination to visualize what the tree might look like with millions of peoples' addresses.  Now imagine trying to tokenize the Document corresponding to "State=California".  Each path thru the tree from root (State) to leaf (Name) represents a set of Properties that is used to index the "keywords" field in the "State=California" document.  In other words it takes a long time to index.  This is why I'm looking for a way to just copy one field to another.
>>>
>>> There is a lot more to our design to facilitate this hierarchical structure but this is probably more than you wanted to know. :)
>>>
>>> thanks in advance,
>>> --
>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>>  www.sungard.com/energy 
>>>
>>>
>>> -----Original Message-----
>>> From: Grant Ingersoll [mailto:gsingers@apache.org] 
>>> Sent: Friday, June 27, 2008 7:26 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Can you create a Field that is a copy of another Field?
>>>
>>>
>>> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> <Bill.Chesky@sungard.com 
>>>  > wrote:
>>>
>>>   
>>>     
>>>       
>>>> Hello Lucene Gurus,
>>>>
>>>>
>>>>
>>>> I'm new to Lucene so sorry if this question basic or nave.
>>>>
>>>>
>>>>
>>>> I have a Document to which I want to add a Field named, say, "foo"  
>>>> that is tokenized, indexed and unstored.  I am using the  
>>>> "Field(String name, TokenStream tokenStream)" constructor to create  
>>>> it.  The TokenStream may take a fairly long time to return all its  
>>>> tokens.
>>>>
>>>>     
>>>>       
>>>>         
>>> Can you share some code here?  What's the reasoning behind using it  
>>> (not saying it's wrong, just wondering what led you to it)?  Are you  
>>> just loading it up from a file, string or something or do you have  
>>> another reason?
>>>
>>>
>>>   
>>>     
>>>       
>>>> Now for querying reasons I want to add another Field named, say,  
>>>> "bar", that is tokenized and indexed in exactly the same way as  
>>>> "foo".  I could just pass it the same TokenStream that I used to  
>>>> create "foo" but since it takes so long to return all its tokens, I  
>>>> was wondering if there is a way to say, create "bar" as a copy of  
>>>> "foo".  I looked thru the javadoc but didn't see anything.
>>>>
>>>>
>>>>     
>>>>       
>>>>         
>>> By exactly the same, do you really mean exactly the same?  What's the  
>>> point of that?  What are the "querying reasons"?
>>>
>>> You may want to look at the TeeTokenFilter and the SinkTokenizer, but  
>>> I guess I'd like to know more about what's going on before fully  
>>> recommending anything.
>>>
>>>
>>>   
>>>     
>>>       
>>>> Is this possible in Lucene or do I just have to bite the bullet  
>>>> build the new Field using the same TokenStream again?
>>>>
>>>> --
>>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194  
>>>> Oak Valley Drive * Ann Arbor, MI 48103
>>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com <mailto:bill.chesky@sungard.com 
>>>>     
>>>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>>>
>>>>
>>>>
>>>>     
>>>>       
>>>>         
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>   
>>>     
>>>       
>>   
>>     
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 13:00:36 2008
Return-Path: <java-user-return-34712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31619 invoked from network); 30 Jun 2008 13:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 13:00:35 -0000
Received: (qmail 64348 invoked by uid 500); 30 Jun 2008 13:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64320 invoked by uid 500); 30 Jun 2008 13:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64295 invoked by uid 99); 30 Jun 2008 13:00:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 06:00:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 12:59:37 +0000
Received: by fg-out-1718.google.com with SMTP id l27so804250fgb.27
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 05:59:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=sWnkTNKGU53fMcD398SW9cceeqYpaAGXtmwp0z2N8rY=;
        b=Jo35U4xK2oIUq9n3tRsusa9XjBFjEjscUG8A+/56vYPlE49uqrcNpAIuz441B4gtBZ
         yNLAInK7ggPGhqaWuCGsYxZSyhQyeQOAG0amS24dxqrP54D6NMbdwR6eIMX645o597mo
         d7DDKN8fw4cxfD8KDdKI5b8b5ynctS7sqijLE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=rh0mkJWCbEinQyHZAsYTHSpaDod6fpEvdjfgYChTwreBe8gCYSflC105MkhUEd1qzg
         061hnjK9rVsiuB1mwShREvVcSJCPVIMjR22AcM22RGAzb+TczVF7sy4CoNm/Vz/vFIIM
         NfT+pei6TmOLvRZguV47YSM41u+XpnTwhrnYw=
Received: by 10.86.93.17 with SMTP id q17mr6141536fgb.25.1214830795676;
        Mon, 30 Jun 2008 05:59:55 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.77.21])
        by mx.google.com with ESMTPS id 4sm8885258fgg.9.2008.06.30.05.59.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 30 Jun 2008 05:59:54 -0700 (PDT)
Message-Id: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Problems with reopening IndexReader while pushing documents to the index
Date: Mon, 30 Jun 2008 14:59:52 +0200
X-Mailer: Apple Mail (2.924)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I see some strange behavoiur of lucene. The following scenario.
While adding documents to my index (every doc is pretty small, doc- 
count is about 12000) I have implemented a custom behaviour of  
flushing and committing documents to the index. Before adding  
documents to the index I check if wether der ramDocCount has reached a  
certain number of if the last commit is a while ago. If so i flush the  
buffered documents and reopen the IndexWriter. So far, so good.  
Indexing works very well. The problem is that if I send requests with  
die IndexReader while writing documents with the IndexWriter (I send  
around 10.000 requests to lucene) I reopen the IndexReader every 100  
requests (only for testing) if the IndexReader is not current. The  
first around 4000 requests work very well, but afterwards I always get  
the following exception:

java.lang.ArrayIndexOutOfBoundsException: 37389
	at org.apache.lucene.search.TermScorer.score(TermScorer.java:126)
	at org.apache.lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java: 
112)
	at  
org 
.apache 
.lucene 
.search 
.DisjunctionSumScorer.advanceAfterCurrent(DisjunctionSumScorer.java:172)
	at  
org 
.apache 
.lucene.search.DisjunctionSumScorer.next(DisjunctionSumScorer.java:146)
	at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java: 
319)
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
146)
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
113)
	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
	at org.apache.lucene.search.Searcher.search(Searcher.java:46)
	at org.apache.lucene.search.Searcher.search(Searcher.java:38)

This seems to be a temporarily problem because opening a new  
IndexReader after all documents were added everything is ok again and  
the 10.000 requests are all right.

So what could be the problem here?

reg,
sascha

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 13:52:08 2008
Return-Path: <java-user-return-34713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47278 invoked from network); 30 Jun 2008 13:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 13:52:08 -0000
Received: (qmail 41819 invoked by uid 500); 30 Jun 2008 13:52:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41778 invoked by uid 500); 30 Jun 2008 13:52:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41766 invoked by uid 99); 30 Jun 2008 13:52:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 06:52:01 -0700
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.46.51.80] (HELO SG2EHSOBE006.bigfish.com) (207.46.51.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 13:51:08 +0000
Received: from mail230-sin-R.bigfish.com (10.3.40.3) by
 SG2EHSOBE006.bigfish.com (10.3.40.26) with Microsoft SMTP Server id
 8.1.240.5; Mon, 30 Jun 2008 13:51:04 +0000
Received: from mail230-sin (localhost.localdomain [127.0.0.1])	by
 mail230-sin-R.bigfish.com (Postfix) with ESMTP id AD32F196034E	for
 <java-user@lucene.apache.org>; Mon, 30 Jun 2008 13:51:04 +0000 (UTC)
X-BigFish: VPS-110(z57dlz14c3M328cM542N1418M1432R14e0Q98dR11f6O62a3Le66R7efV1447R1443R1805M179dRzzzzz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
Received: by mail230-sin (MessageSwitch) id 1214833860423636_26781; Mon, 30
 Jun 2008 13:51:00 +0000 (UCT)
Received: from us-voo-smtp05.internal.sungard.corp (unknown [216.83.166.46])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))	(No client certificate
 requested)	by mail230-sin.bigfish.com (Postfix) with ESMTP id 784D5129806D
	for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 13:50:59 +0000 (UTC)
Received: from us-voo-smtp11.internal.sungard.corp ([168.162.128.53]) by
 us-voo-smtp05.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 30 Jun 2008 09:49:54 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.81]) by
 us-voo-smtp11.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 30 Jun 2008 09:49:54 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can you create a Field that is a copy of another Field?
Date: Mon, 30 Jun 2008 09:49:53 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7031C716F@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <4868D0C2.9050500@informatics.jax.org>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Can you create a Field that is a copy of another Field?
Thread-Index: AcjarPzOYWitg66wRyaqzlch16S4iwABd3bg
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jun 2008 13:49:54.0125 (UTC) FILETIME=[2CD7FFD0:01C8DAB8]
X-Virus-Checked: Checked by ClamAV on apache.org

Matthew,

It has to do with the fact that we're trying to represent these Property =
entitities hierarchically.  We are displaying them in a tree structure, =
similar to the way Windows Explorer displays directories and files your =
file system.  E.g. all the states would be at the root level.  If you =
expanded a particular state you would see all the cities in that state, =
etc. =20

If the user does a search we want to filter or "reduce" the tree.  E.g. =
imagine you search on the term 'Smith'.  Well since it's a safe bet to =
assume that there's somebody with the last name of Smith in all fifty =
states, then all fifty states would show up at the root level.  On the =
other hand, suppose there's one guy in the whole country named with the =
last name of 'Fleebleflabble' and he lives in Michigan.  If I search on =
that term I would expect only one state, namely Michigan to show up at =
the root level.  Each level in the heirarchy is filtered by the search =
specified terms in this way.

Searches are not limited to people's names though.  We want to reduce =
the tree by matches on ANY field in the Properties from 'State' to =
'Name'.  So for example, a seach on 'Smith' would return matches for =
everybody that lived in a city named 'Smith City' or on a street named =
'Smith Avenue', etc.

This doesn't make a lot of sense for people and addresses, I admit.  I =
just used that as an easy follow example.  But it does make sense for =
the data we're storing.  And BTW, maybe you can see a few holes in this =
approach.  There's a bit more to it than I've described above.  We have =
had to get a little creative with other documents and fields in order =
for it work correctly.  I'd be happy to elaborate if anybody is =
interested.  There may be better ways to do it.  Like I said I'm fairly =
new to Lucene.  Was just trying to keep it simple.

--
Bill=20

-----Original Message-----
From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
Sent: Monday, June 30, 2008 8:26 AM
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?

Sorry, didn't get this until this morning.

Yes, both fields should be indexed and searchable, though the data_type=20
one should likely be untokenized.=20

Data should be indexed and tokenized with whatever appropriate Analyzer=20
works for your data.

As for what your indexing, may I ask why you are doing it like that?

I would have thought indexing each property seperately (a seperate doc)=20
would have been sufficient for your needs, but if you can explain a bit=20
more about your situation perhaps I can be more helpful on this matter?

Matt

Bill.Chesky@sungard.com wrote:
> Hmmm, I think maybe I am missing something.  In your design is the =
'data' field indexed, i.e. searchable?  Or is it an unindexed, stored =
field? =20
>
> I was thinking that both 'data' and 'data_type' were indexed and =
searchable. =20
>
> Maybe the confusion stems from the fact that for the Document =
corresponding to "State=3DCalifornia", we're not just indexing on the =
token 'California'.  We're indexing on all the tokens from all the =
Properties in the set of Properties corresponding to a person's address. =
 In my original example this would be: California, Sacremento, 94203, =
South, Main, 1234, Joe and Smith.
>
> For the 'data_type' field I was thinking you were saying we'd index on =
a single token, namely 'State' (or whatever the left-hand side is).
>
> Does that make sense?
> --
> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>  www.sungard.com/energy=20
>
>
> -----Original Message-----
> From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
> Sent: Friday, June 27, 2008 3:33 PM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
> Yup, you're pretty much there.
>
> The only part I'm a bit confused about is what you've said in your =
data=20
> field there,
>
> I'm thinking you mean that for the data_type: "State", you would have=20
> the data entry of "California", right?
>
> If so, then yup, you are spot on ^^
>
> We use this technique all the time on our side, and its helped=20
> considerably.  We then use the db_key to reference into a display time =

> cache that holds all of the display information for the underlying=20
> object that we would ever want to present to the user.  This allows =
our=20
> search time index to be very concise, and as a result nearly every=20
> search we hit it with is subsecond, which is a nice place to be ^^
>
> Matt
>
> Bill.Chesky@sungard.com wrote:
>  =20
>> Matthew,
>>
>> Thanks for the reply.  This looks very interesting.  If I'm =
understanding correctly your db_key, data and data_type are Fields =
within the Document, correct?  So is this how you envision it?
>>
>> Document: State=3DCalifornia
>>    Field: 'db_key'=3D'1395' (primary key into relational table, =
correct?)
>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>>    Field: 'data_type' indexed by 'State'
>>
>> Document: City=3DSacremento
>>    Field: 'db_key'=3D'2405'=20
>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>>    Field: 'data_type' indexed by 'City'
>>
>> Then my query for all Properties would be:
>>
>> 	+data:South
>>
>> My query for only 'City' Properties would be:
>>
>> 	+data:South +data_type:City
>>
>> Is that right?
>>
>> I think that would work.  Very nice.  Thank you very much!!!!
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>  www.sungard.com/energy=20
>>
>>
>> -----Original Message-----
>> From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
>> Sent: Friday, June 27, 2008 11:49 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Can you create a Field that is a copy of another Field?
>>
>> I'm not sure if this is helpful, but I do something VERY similar to =
this=20
>> in my project.
>>
>> So, for the example you are citing I would design my index as =
follows:
>>
>> db_key, data, data_type
>>
>> Where the data_type is some sort of value representing the thing =
that's=20
>> on the left hand side of your property relationship there.
>>
>> So, then in order to satisfy your search, the queries become quite =
simple:
>>
>> The search for everything simply searches against the data field in =
this=20
>> index, wheras the search for a specific data_type + searchterm =
becomes a=20
>> simple boolean query, that has a MUST clause for the data_type value.
>>
>> As an even BETTER bonus, this will then mean that all of your =
searchable=20
>> values will now have relevance to each other at scoring time, which =
is=20
>> quite useful in the long run.
>>
>> Hope this helps you out,
>>
>> Matt
>>
>> Bill.Chesky@sungard.com wrote:
>>  =20
>>    =20
>>> Grant,
>>>
>>> Thanks for the reply.  What we're trying to do is kind of esoteric =
and hard to explain without going into a lot of gory details so I was =
trying to keep it simple.  But I'll try to summarize.
>>>
>>> We're trying to index entities in a relational database.  One of the =
entities we're trying to index is something called a Property.  Think of =
a Property kind of like the java.util.Properties class, i.e. a =
name/value pair. So some examples of Properties might be:
>>>
>>> State=3DCalifornia
>>> City=3DSacremento
>>> ZipCode=3D94203
>>> StreetName=3DSouth Main
>>> StreetNumber=3D1234
>>> Name=3DJoe Smith
>>>
>>> Etc., etc.
>>>
>>> (Note: this isn't the type of data we're storing... just trying to =
keep it simple.)
>>>
>>> Imagine that the above list represents the the set of Properties =
that specify the address for a single person, Joe Smith.  Each Property =
in the set will be indexed by the values on the right-hand side of all =
the other name/value pairs in the set, i.e.: California, Sacremento, =
94203, South, Main, 1234, Joe and Smith.
>>>
>>> There are two types of queries that we want to do. =20
>>> 1) retrieve every Property matching the specified search terms, =
regardless of its left-hand side.  For this we want to create a field in =
EVERY Document called "keywords" and index it by the right-hand side =
values as described above.
>>> 2) retrieve every Property with a given left-hand side that matches =
the specified search terms.  For example, find all the 'City' Properties =
that match the term 'South'.  For this we want to create a field with =
the name of the left-hand side (e.g. State, City, ZipCode, etc.) but =
only in those Documents that correspond to a Property with that =
left-hand side.  Again this field will be indexed by the right-hand side =
values as described above.
>>>
>>> So a couple of examples from the above list might look something =
like:
>>>
>>> Document: State=3DCalifornia
>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>   Field: 'State' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>
>>> Document: City=3DSacremento
>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>   Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>>>
>>> Now if I'm interested in all the Properties that match the word =
"South", I search the index on the "keywords" field for the term =
"South".  This will return both documents above. =20
>>>
>>> But if I'm only interested in any 'City' Properties that match the =
term 'South' I search the index on the "City" field for the term =
"South".  This will only return the 'City=3DSacremento' document above =
because it's the only Document of the two that even has a 'City' field =
in it.
>>>
>>> But in any case, the 'State' field and the 'City' field are indexed =
exactly the same way as the 'keywords' field.  Which is why I was =
wondering if there was a way to just create these fields as copies of =
the 'keywords' field.
>>>
>>> Here is a code sample where I'm creating the index.  We're using =
Hibernate search to search the indexes, thus the "id" and =
"_hibernate_class" fields.
>>>
>>> Query q =3D em.createQuery("select p from Property p");
>>>            =20
>>> List<Property> properties =3D q.getResultList();
>>>    =20
>>> for (Property p : properties)
>>> {
>>>     // Indexing property.
>>>     Document doc =3D new Document();
>>>     doc.add(new Field("id",=20
>>>                        Integer.toString(p.getId()),=20
>>>                        Field.Store.YES,=20
>>>                        Field.Index.UN_TOKENIZED));
>>>     doc.add(new Field("_hibernate_class",=20
>>>                       Property.class.getCanonicalName(),=20
>>>                       Field.Store.YES,=20
>>>                       Field.Index.UN_TOKENIZED));
>>>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>>>     doc.add(new Field("keywords", tokenStream));
>>>     propertyIndexWriter.addDocument(doc);
>>>     tokenStream.close();   =20
>>>     // Here is where I would like to add the second field that is a =
copy
>>>     // of the "keywords" field just created above.  Note: the call
>>>     // p.getCharacteristic().getName() is getting the name of the=20
>>>     // left-hand side of the Property as described above.
>>>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>>>     doc.add(new Field(p.getCharacteristic().getName(), =
tokenStream));
>>>     propertyIndexWriter.addDocument(doc);
>>>     tokenStream.close();
>>> }
>>>
>>> Hope that clears it up. =20
>>>
>>> BTW, in case this seems like a strange way to index things, I will =
also add that we are doing it this way in order to impose a heirarchical =
structure on Properties.  So my example above should really look like =
this:
>>>
>>> State=3DCalifornia
>>>     City=3DSacremento
>>>         ZipCode=3D94203
>>>             StreetName=3DSouth Main
>>>                 StreetNumber=3D1234
>>>                     Name=3DJoe Smith
>>>
>>> Use your imagination to visualize what the tree might look like with =
millions of peoples' addresses.  Now imagine trying to tokenize the =
Document corresponding to "State=3DCalifornia".  Each path thru the tree =
from root (State) to leaf (Name) represents a set of Properties that is =
used to index the "keywords" field in the "State=3DCalifornia" document. =
 In other words it takes a long time to index.  This is why I'm looking =
for a way to just copy one field to another.
>>>
>>> There is a lot more to our design to facilitate this hierarchical =
structure but this is probably more than you wanted to know. :)
>>>
>>> thanks in advance,
>>> --
>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>>  www.sungard.com/energy=20
>>>
>>>
>>> -----Original Message-----
>>> From: Grant Ingersoll [mailto:gsingers@apache.org]=20
>>> Sent: Friday, June 27, 2008 7:26 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Can you create a Field that is a copy of another Field?
>>>
>>>
>>> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> =
<Bill.Chesky@sungard.com=20
>>>  > wrote:
>>>
>>>  =20
>>>    =20
>>>      =20
>>>> Hello Lucene Gurus,
>>>>
>>>>
>>>>
>>>> I'm new to Lucene so sorry if this question basic or na=EFve.
>>>>
>>>>
>>>>
>>>> I have a Document to which I want to add a Field named, say, "foo"  =

>>>> that is tokenized, indexed and unstored.  I am using the =20
>>>> "Field(String name, TokenStream tokenStream)" constructor to create =
=20
>>>> it.  The TokenStream may take a fairly long time to return all its  =

>>>> tokens.
>>>>
>>>>    =20
>>>>      =20
>>>>        =20
>>> Can you share some code here?  What's the reasoning behind using it  =

>>> (not saying it's wrong, just wondering what led you to it)?  Are you =
=20
>>> just loading it up from a file, string or something or do you have =20
>>> another reason?
>>>
>>>
>>>  =20
>>>    =20
>>>      =20
>>>> Now for querying reasons I want to add another Field named, say, =20
>>>> "bar", that is tokenized and indexed in exactly the same way as =20
>>>> "foo".  I could just pass it the same TokenStream that I used to =20
>>>> create "foo" but since it takes so long to return all its tokens, I =
=20
>>>> was wondering if there is a way to say, create "bar" as a copy of =20
>>>> "foo".  I looked thru the javadoc but didn't see anything.
>>>>
>>>>
>>>>    =20
>>>>      =20
>>>>        =20
>>> By exactly the same, do you really mean exactly the same?  What's =
the =20
>>> point of that?  What are the "querying reasons"?
>>>
>>> You may want to look at the TeeTokenFilter and the SinkTokenizer, =
but =20
>>> I guess I'd like to know more about what's going on before fully =20
>>> recommending anything.
>>>
>>>
>>>  =20
>>>    =20
>>>      =20
>>>> Is this possible in Lucene or do I just have to bite the bullet =20
>>>> build the new Field using the same TokenStream again?
>>>>
>>>> --
>>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
=20
>>>> Oak Valley Drive * Ann Arbor, MI 48103
>>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:bill.chesky@sungard.com=20
>>>>    =20
>>>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>>>
>>>>
>>>>
>>>>    =20
>>>>      =20
>>>>        =20
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>  =20
>>>    =20
>>>      =20
>>  =20
>>    =20
>
>  =20

--=20
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 14:00:19 2008
Return-Path: <java-user-return-34714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51283 invoked from network); 30 Jun 2008 14:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 14:00:19 -0000
Received: (qmail 55846 invoked by uid 500); 30 Jun 2008 14:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55818 invoked by uid 500); 30 Jun 2008 14:00:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55807 invoked by uid 99); 30 Jun 2008 14:00:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 07:00:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 13:59:20 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m5UDxGhj014263
	for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 09:59:17 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4868E622.9020407@informatics.jax.org>
Date: Mon, 30 Jun 2008 09:56:50 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?
References: <87D5FFD601E4BC488D51E45D414706C7031C716F@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <87D5FFD601E4BC488D51E45D414706C7031C716F@VOO-EXCHANGE01.internal.sungard.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.6.30.134417
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='SUPERLONG_LINE 0.05, BODY_SIZE_10000_PLUS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CP_NAME_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Hrm, sorry then I'm not sure how much more help I'm going to be able to 
be on this on.  I have to index things that have a DAG Structure 
(Treelike), but in order to get that functionality into my search I 
simply flatten out my dag, so any single term knows all of its children, 
but loses the structure of those children beyond that.  This approach 
works for my data, but it doesn't sound like it will for yours.

So, while I think you can still use the general technique that I showed 
you on this on, I have a feeling you are going to need to customize it 
some for your domain.

Best of luck, and if there's anything else I can help with let me know.

Matt

Bill.Chesky@sungard.com wrote:
> Matthew,
>
> It has to do with the fact that we're trying to represent these Property entitities hierarchically.  We are displaying them in a tree structure, similar to the way Windows Explorer displays directories and files your file system.  E.g. all the states would be at the root level.  If you expanded a particular state you would see all the cities in that state, etc.  
>
> If the user does a search we want to filter or "reduce" the tree.  E.g. imagine you search on the term 'Smith'.  Well since it's a safe bet to assume that there's somebody with the last name of Smith in all fifty states, then all fifty states would show up at the root level.  On the other hand, suppose there's one guy in the whole country named with the last name of 'Fleebleflabble' and he lives in Michigan.  If I search on that term I would expect only one state, namely Michigan to show up at the root level.  Each level in the heirarchy is filtered by the search specified terms in this way.
>
> Searches are not limited to people's names though.  We want to reduce the tree by matches on ANY field in the Properties from 'State' to 'Name'.  So for example, a seach on 'Smith' would return matches for everybody that lived in a city named 'Smith City' or on a street named 'Smith Avenue', etc.
>
> This doesn't make a lot of sense for people and addresses, I admit.  I just used that as an easy follow example.  But it does make sense for the data we're storing.  And BTW, maybe you can see a few holes in this approach.  There's a bit more to it than I've described above.  We have had to get a little creative with other documents and fields in order for it work correctly.  I'd be happy to elaborate if anybody is interested.  There may be better ways to do it.  Like I said I'm fairly new to Lucene.  Was just trying to keep it simple.
>
> --
> Bill 
>
> -----Original Message-----
> From: Matthew Hall [mailto:mhall@informatics.jax.org] 
> Sent: Monday, June 30, 2008 8:26 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
> Sorry, didn't get this until this morning.
>
> Yes, both fields should be indexed and searchable, though the data_type 
> one should likely be untokenized. 
>
> Data should be indexed and tokenized with whatever appropriate Analyzer 
> works for your data.
>
> As for what your indexing, may I ask why you are doing it like that?
>
> I would have thought indexing each property seperately (a seperate doc) 
> would have been sufficient for your needs, but if you can explain a bit 
> more about your situation perhaps I can be more helpful on this matter?
>
> Matt
>
> Bill.Chesky@sungard.com wrote:
>   
>> Hmmm, I think maybe I am missing something.  In your design is the 'data' field indexed, i.e. searchable?  Or is it an unindexed, stored field?  
>>
>> I was thinking that both 'data' and 'data_type' were indexed and searchable.  
>>
>> Maybe the confusion stems from the fact that for the Document corresponding to "State=California", we're not just indexing on the token 'California'.  We're indexing on all the tokens from all the Properties in the set of Properties corresponding to a person's address.  In my original example this would be: California, Sacremento, 94203, South, Main, 1234, Joe and Smith.
>>
>> For the 'data_type' field I was thinking you were saying we'd index on a single token, namely 'State' (or whatever the left-hand side is).
>>
>> Does that make sense?
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>  www.sungard.com/energy 
>>
>>
>> -----Original Message-----
>> From: Matthew Hall [mailto:mhall@informatics.jax.org] 
>> Sent: Friday, June 27, 2008 3:33 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Can you create a Field that is a copy of another Field?
>>
>> Yup, you're pretty much there.
>>
>> The only part I'm a bit confused about is what you've said in your data 
>> field there,
>>
>> I'm thinking you mean that for the data_type: "State", you would have 
>> the data entry of "California", right?
>>
>> If so, then yup, you are spot on ^^
>>
>> We use this technique all the time on our side, and its helped 
>> considerably.  We then use the db_key to reference into a display time 
>> cache that holds all of the display information for the underlying 
>> object that we would ever want to present to the user.  This allows our 
>> search time index to be very concise, and as a result nearly every 
>> search we hit it with is subsecond, which is a nice place to be ^^
>>
>> Matt
>>
>> Bill.Chesky@sungard.com wrote:
>>   
>>     
>>> Matthew,
>>>
>>> Thanks for the reply.  This looks very interesting.  If I'm understanding correctly your db_key, data and data_type are Fields within the Document, correct?  So is this how you envision it?
>>>
>>> Document: State=California
>>>    Field: 'db_key'='1395' (primary key into relational table, correct?)
>>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>>>    Field: 'data_type' indexed by 'State'
>>>
>>> Document: City=Sacremento
>>>    Field: 'db_key'='2405' 
>>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', etc.
>>>    Field: 'data_type' indexed by 'City'
>>>
>>> Then my query for all Properties would be:
>>>
>>> 	+data:South
>>>
>>> My query for only 'City' Properties would be:
>>>
>>> 	+data:South +data_type:City
>>>
>>> Is that right?
>>>
>>> I think that would work.  Very nice.  Thank you very much!!!!
>>> --
>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>>  www.sungard.com/energy 
>>>
>>>
>>> -----Original Message-----
>>> From: Matthew Hall [mailto:mhall@informatics.jax.org] 
>>> Sent: Friday, June 27, 2008 11:49 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Can you create a Field that is a copy of another Field?
>>>
>>> I'm not sure if this is helpful, but I do something VERY similar to this 
>>> in my project.
>>>
>>> So, for the example you are citing I would design my index as follows:
>>>
>>> db_key, data, data_type
>>>
>>> Where the data_type is some sort of value representing the thing that's 
>>> on the left hand side of your property relationship there.
>>>
>>> So, then in order to satisfy your search, the queries become quite simple:
>>>
>>> The search for everything simply searches against the data field in this 
>>> index, wheras the search for a specific data_type + searchterm becomes a 
>>> simple boolean query, that has a MUST clause for the data_type value.
>>>
>>> As an even BETTER bonus, this will then mean that all of your searchable 
>>> values will now have relevance to each other at scoring time, which is 
>>> quite useful in the long run.
>>>
>>> Hope this helps you out,
>>>
>>> Matt
>>>
>>> Bill.Chesky@sungard.com wrote:
>>>   
>>>     
>>>       
>>>> Grant,
>>>>
>>>> Thanks for the reply.  What we're trying to do is kind of esoteric and hard to explain without going into a lot of gory details so I was trying to keep it simple.  But I'll try to summarize.
>>>>
>>>> We're trying to index entities in a relational database.  One of the entities we're trying to index is something called a Property.  Think of a Property kind of like the java.util.Properties class, i.e. a name/value pair. So some examples of Properties might be:
>>>>
>>>> State=California
>>>> City=Sacremento
>>>> ZipCode=94203
>>>> StreetName=South Main
>>>> StreetNumber=1234
>>>> Name=Joe Smith
>>>>
>>>> Etc., etc.
>>>>
>>>> (Note: this isn't the type of data we're storing... just trying to keep it simple.)
>>>>
>>>> Imagine that the above list represents the the set of Properties that specify the address for a single person, Joe Smith.  Each Property in the set will be indexed by the values on the right-hand side of all the other name/value pairs in the set, i.e.: California, Sacremento, 94203, South, Main, 1234, Joe and Smith.
>>>>
>>>> There are two types of queries that we want to do.  
>>>> 1) retrieve every Property matching the specified search terms, regardless of its left-hand side.  For this we want to create a field in EVERY Document called "keywords" and index it by the right-hand side values as described above.
>>>> 2) retrieve every Property with a given left-hand side that matches the specified search terms.  For example, find all the 'City' Properties that match the term 'South'.  For this we want to create a field with the name of the left-hand side (e.g. State, City, ZipCode, etc.) but only in those Documents that correspond to a Property with that left-hand side.  Again this field will be indexed by the right-hand side values as described above.
>>>>
>>>> So a couple of examples from the above list might look something like:
>>>>
>>>> Document: State=California
>>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>>>>   Field: 'State' indexed by 'California', 'Sacremento', '94203', etc.
>>>>
>>>> Document: City=Sacremento
>>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', etc.
>>>>   Field: 'City' indexed by 'California', 'Sacremento', '94203', etc.
>>>>
>>>> Now if I'm interested in all the Properties that match the word "South", I search the index on the "keywords" field for the term "South".  This will return both documents above.  
>>>>
>>>> But if I'm only interested in any 'City' Properties that match the term 'South' I search the index on the "City" field for the term "South".  This will only return the 'City=Sacremento' document above because it's the only Document of the two that even has a 'City' field in it.
>>>>
>>>> But in any case, the 'State' field and the 'City' field are indexed exactly the same way as the 'keywords' field.  Which is why I was wondering if there was a way to just create these fields as copies of the 'keywords' field.
>>>>
>>>> Here is a code sample where I'm creating the index.  We're using Hibernate search to search the indexes, thus the "id" and "_hibernate_class" fields.
>>>>
>>>> Query q = em.createQuery("select p from Property p");
>>>>             
>>>> List<Property> properties = q.getResultList();
>>>>     
>>>> for (Property p : properties)
>>>> {
>>>>     // Indexing property.
>>>>     Document doc = new Document();
>>>>     doc.add(new Field("id", 
>>>>                        Integer.toString(p.getId()), 
>>>>                        Field.Store.YES, 
>>>>                        Field.Index.UN_TOKENIZED));
>>>>     doc.add(new Field("_hibernate_class", 
>>>>                       Property.class.getCanonicalName(), 
>>>>                       Field.Store.YES, 
>>>>                       Field.Index.UN_TOKENIZED));
>>>>     TokenStream tokenStream = new PropertyTokenStream(p);
>>>>     doc.add(new Field("keywords", tokenStream));
>>>>     propertyIndexWriter.addDocument(doc);
>>>>     tokenStream.close();    
>>>>     // Here is where I would like to add the second field that is a copy
>>>>     // of the "keywords" field just created above.  Note: the call
>>>>     // p.getCharacteristic().getName() is getting the name of the 
>>>>     // left-hand side of the Property as described above.
>>>>     TokenStream tokenStream = new PropertyTokenStream(p);
>>>>     doc.add(new Field(p.getCharacteristic().getName(), tokenStream));
>>>>     propertyIndexWriter.addDocument(doc);
>>>>     tokenStream.close();
>>>> }
>>>>
>>>> Hope that clears it up.  
>>>>
>>>> BTW, in case this seems like a strange way to index things, I will also add that we are doing it this way in order to impose a heirarchical structure on Properties.  So my example above should really look like this:
>>>>
>>>> State=California
>>>>     City=Sacremento
>>>>         ZipCode=94203
>>>>             StreetName=South Main
>>>>                 StreetNumber=1234
>>>>                     Name=Joe Smith
>>>>
>>>> Use your imagination to visualize what the tree might look like with millions of peoples' addresses.  Now imagine trying to tokenize the Document corresponding to "State=California".  Each path thru the tree from root (State) to leaf (Name) represents a set of Properties that is used to index the "keywords" field in the "State=California" document.  In other words it takes a long time to index.  This is why I'm looking for a way to just copy one field to another.
>>>>
>>>> There is a lot more to our design to facilitate this hierarchical structure but this is probably more than you wanted to know. :)
>>>>
>>>> thanks in advance,
>>>> --
>>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 Oak Valley Drive * Ann Arbor, MI 48103
>>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>>>  www.sungard.com/energy 
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Grant Ingersoll [mailto:gsingers@apache.org] 
>>>> Sent: Friday, June 27, 2008 7:26 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Can you create a Field that is a copy of another Field?
>>>>
>>>>
>>>> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> <Bill.Chesky@sungard.com 
>>>>  > wrote:
>>>>
>>>>   
>>>>     
>>>>       
>>>>         
>>>>> Hello Lucene Gurus,
>>>>>
>>>>>
>>>>>
>>>>> I'm new to Lucene so sorry if this question basic or nave.
>>>>>
>>>>>
>>>>>
>>>>> I have a Document to which I want to add a Field named, say, "foo"  
>>>>> that is tokenized, indexed and unstored.  I am using the  
>>>>> "Field(String name, TokenStream tokenStream)" constructor to create  
>>>>> it.  The TokenStream may take a fairly long time to return all its  
>>>>> tokens.
>>>>>
>>>>>     
>>>>>       
>>>>>         
>>>>>           
>>>> Can you share some code here?  What's the reasoning behind using it  
>>>> (not saying it's wrong, just wondering what led you to it)?  Are you  
>>>> just loading it up from a file, string or something or do you have  
>>>> another reason?
>>>>
>>>>
>>>>   
>>>>     
>>>>       
>>>>         
>>>>> Now for querying reasons I want to add another Field named, say,  
>>>>> "bar", that is tokenized and indexed in exactly the same way as  
>>>>> "foo".  I could just pass it the same TokenStream that I used to  
>>>>> create "foo" but since it takes so long to return all its tokens, I  
>>>>> was wondering if there is a way to say, create "bar" as a copy of  
>>>>> "foo".  I looked thru the javadoc but didn't see anything.
>>>>>
>>>>>
>>>>>     
>>>>>       
>>>>>         
>>>>>           
>>>> By exactly the same, do you really mean exactly the same?  What's the  
>>>> point of that?  What are the "querying reasons"?
>>>>
>>>> You may want to look at the TeeTokenFilter and the SinkTokenizer, but  
>>>> I guess I'd like to know more about what's going on before fully  
>>>> recommending anything.
>>>>
>>>>
>>>>   
>>>>     
>>>>       
>>>>         
>>>>> Is this possible in Lucene or do I just have to bite the bullet  
>>>>> build the new Field using the same TokenStream again?
>>>>>
>>>>> --
>>>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194  
>>>>> Oak Valley Drive * Ann Arbor, MI 48103
>>>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com <mailto:bill.chesky@sungard.com 
>>>>>     
>>>>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>>>>
>>>>>
>>>>>
>>>>>     
>>>>>       
>>>>>         
>>>>>           
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://www.lucidimagination.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>   
>>>>     
>>>>       
>>>>         
>>>   
>>>     
>>>       
>>   
>>     
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 15:03:26 2008
Return-Path: <java-user-return-34715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84946 invoked from network); 30 Jun 2008 15:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 15:03:26 -0000
Received: (qmail 53043 invoked by uid 500); 30 Jun 2008 15:03:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52899 invoked by uid 500); 30 Jun 2008 15:03:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52888 invoked by uid 99); 30 Jun 2008 15:03:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 08:03:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 15:02:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 892C316399A
	for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 08:02:15 -0700 (PDT)
Message-Id: <9EE561CE-1ECE-47E0-B270-23452706F3C0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <180939A51C17274FB68581AE17C5E0E71ADAAF@bertha.Volley.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: QueryWrapperFilter performance
Date: Mon, 30 Jun 2008 11:02:14 -0400
References: <180939A51C17274FB68581AE17C5E0E71ADAAF@bertha.Volley.local>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

What version of Lucene are you using?  Can you share the snippet of  
code that does this?  Are you keeping the QueryWrapperFilter around  
from search to search?


On Jun 27, 2008, at 5:24 PM, Jordon Saardchit wrote:

> Hello All,
>
> Sort of new to lucene but have a general question in regards to
> performance.  I've got a single index of rather large size (about 7
> million docs).  I've ran a couple different queries against it, which
> are described below.
>
> * WildcardQuery: (*term*) Which returns roughly 12000 hits in around
> 7000ms
> * RangeQuery: (term TO term) Which returns roughly 6000 hits in around
> 200ms
>
> Now for performance reasons, I am attempting to run the WildcardQuery
> against only the RangeQuery hits (6000 as opposed to 7 million), via
> using a QueryWrapperFilter (constructed with my RangeQuery).  However,
> the avg response times are still around 7000ms, the same as the  
> wildcard
> search over the entire index.  Is it possible the performance of the
> WildcardQuery is not effected by the filter? Or I have gone about
> implementing my intentions incorrectly?
>
> Thanks in advance for the help,
> Jordon

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 15:09:03 2008
Return-Path: <java-user-return-34716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3870 invoked from network); 30 Jun 2008 15:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 15:09:03 -0000
Received: (qmail 60359 invoked by uid 500); 30 Jun 2008 15:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60322 invoked by uid 500); 30 Jun 2008 15:08:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60311 invoked by uid 99); 30 Jun 2008 15:08:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 08:08:56 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.32.181.16] (HELO WA4EHSOBE004.bigfish.com) (216.32.181.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 15:07:59 +0000
Received: from mail95-wa4-R.bigfish.com (10.8.14.252) by
 WA4EHSOBE004.bigfish.com (10.8.40.24) with Microsoft SMTP Server id
 8.1.240.5; Mon, 30 Jun 2008 15:07:55 +0000
Received: from mail95-wa4 (localhost.localdomain [127.0.0.1])	by
 mail95-wa4-R.bigfish.com (Postfix) with ESMTP id 4634B1C588A2	for
 <java-user@lucene.apache.org>; Mon, 30 Jun 2008 15:07:55 +0000 (UTC)
X-BigFish: VPS-124(z57dlz14c3M1435N328cM542N1418M1432R14e0Q98dR11f6O62a3Le66R7efV1447R1443R1805M179dRf4eM103dKzzzzz2dh6bh41i42k43j61h)
X-Spam-TCS-SCL: 0:0
Received: by mail95-wa4 (MessageSwitch) id 1214838471413734_22903; Mon, 30 Jun
 2008 15:07:51 +0000 (UCT)
Received: from us-voo-smtp04.internal.sungard.corp (unknown [216.83.166.45])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))	(No client certificate
 requested)	by mail95-wa4.bigfish.com (Postfix) with ESMTP id 127D4DA004E	for
 <java-user@lucene.apache.org>; Mon, 30 Jun 2008 15:07:51 +0000 (UTC)
Received: from us-voo-smtp11.internal.sungard.corp ([168.162.128.53]) by
 us-voo-smtp04.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 30 Jun 2008 11:07:37 -0400
Received: from VOO-EXCHANGE01.internal.sungard.corp ([168.162.128.81]) by
 us-voo-smtp11.internal.sungard.corp with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 30 Jun 2008 11:07:38 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can you create a Field that is a copy of another Field?
Date: Mon, 30 Jun 2008 11:07:37 -0400
Message-ID: <87D5FFD601E4BC488D51E45D414706C7031C71B1@VOO-EXCHANGE01.internal.sungard.corp>
In-Reply-To: <4868E622.9020407@informatics.jax.org>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Can you create a Field that is a copy of another Field?
Thread-Index: AcjauabiKJW5J4VZR5G73E+sRm5k2AACMB2A
From: <Bill.Chesky@sungard.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jun 2008 15:07:38.0027 (UTC) FILETIME=[08BEF7B0:01C8DAC3]
X-Virus-Checked: Checked by ClamAV on apache.org

Actually, you've been a big help.  Your 'data_type' field suggestion I =
think will work for our app and obviates the need for the Field copy =
functionality that I was originally asking about.  Just having one =
problem with it still, but I think it has to do with my limited =
knowledge of how analyzers work.  If I can't figure it out, I'll post a =
question in a different thread.

Thanks!
--
Bill=20


-----Original Message-----
From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
Sent: Monday, June 30, 2008 9:57 AM
To: java-user@lucene.apache.org
Subject: Re: Can you create a Field that is a copy of another Field?

Hrm, sorry then I'm not sure how much more help I'm going to be able to=20
be on this on.  I have to index things that have a DAG Structure=20
(Treelike), but in order to get that functionality into my search I=20
simply flatten out my dag, so any single term knows all of its children, =

but loses the structure of those children beyond that.  This approach=20
works for my data, but it doesn't sound like it will for yours.

So, while I think you can still use the general technique that I showed=20
you on this on, I have a feeling you are going to need to customize it=20
some for your domain.

Best of luck, and if there's anything else I can help with let me know.

Matt

Bill.Chesky@sungard.com wrote:
> Matthew,
>
> It has to do with the fact that we're trying to represent these =
Property entitities hierarchically.  We are displaying them in a tree =
structure, similar to the way Windows Explorer displays directories and =
files your file system.  E.g. all the states would be at the root level. =
 If you expanded a particular state you would see all the cities in that =
state, etc. =20
>
> If the user does a search we want to filter or "reduce" the tree.  =
E.g. imagine you search on the term 'Smith'.  Well since it's a safe bet =
to assume that there's somebody with the last name of Smith in all fifty =
states, then all fifty states would show up at the root level.  On the =
other hand, suppose there's one guy in the whole country named with the =
last name of 'Fleebleflabble' and he lives in Michigan.  If I search on =
that term I would expect only one state, namely Michigan to show up at =
the root level.  Each level in the heirarchy is filtered by the search =
specified terms in this way.
>
> Searches are not limited to people's names though.  We want to reduce =
the tree by matches on ANY field in the Properties from 'State' to =
'Name'.  So for example, a seach on 'Smith' would return matches for =
everybody that lived in a city named 'Smith City' or on a street named =
'Smith Avenue', etc.
>
> This doesn't make a lot of sense for people and addresses, I admit.  I =
just used that as an easy follow example.  But it does make sense for =
the data we're storing.  And BTW, maybe you can see a few holes in this =
approach.  There's a bit more to it than I've described above.  We have =
had to get a little creative with other documents and fields in order =
for it work correctly.  I'd be happy to elaborate if anybody is =
interested.  There may be better ways to do it.  Like I said I'm fairly =
new to Lucene.  Was just trying to keep it simple.
>
> --
> Bill=20
>
> -----Original Message-----
> From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
> Sent: Monday, June 30, 2008 8:26 AM
> To: java-user@lucene.apache.org
> Subject: Re: Can you create a Field that is a copy of another Field?
>
> Sorry, didn't get this until this morning.
>
> Yes, both fields should be indexed and searchable, though the =
data_type=20
> one should likely be untokenized.=20
>
> Data should be indexed and tokenized with whatever appropriate =
Analyzer=20
> works for your data.
>
> As for what your indexing, may I ask why you are doing it like that?
>
> I would have thought indexing each property seperately (a seperate =
doc)=20
> would have been sufficient for your needs, but if you can explain a =
bit=20
> more about your situation perhaps I can be more helpful on this =
matter?
>
> Matt
>
> Bill.Chesky@sungard.com wrote:
>  =20
>> Hmmm, I think maybe I am missing something.  In your design is the =
'data' field indexed, i.e. searchable?  Or is it an unindexed, stored =
field? =20
>>
>> I was thinking that both 'data' and 'data_type' were indexed and =
searchable. =20
>>
>> Maybe the confusion stems from the fact that for the Document =
corresponding to "State=3DCalifornia", we're not just indexing on the =
token 'California'.  We're indexing on all the tokens from all the =
Properties in the set of Properties corresponding to a person's address. =
 In my original example this would be: California, Sacremento, 94203, =
South, Main, 1234, Joe and Smith.
>>
>> For the 'data_type' field I was thinking you were saying we'd index =
on a single token, namely 'State' (or whatever the left-hand side is).
>>
>> Does that make sense?
>> --
>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>  www.sungard.com/energy=20
>>
>>
>> -----Original Message-----
>> From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
>> Sent: Friday, June 27, 2008 3:33 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Can you create a Field that is a copy of another Field?
>>
>> Yup, you're pretty much there.
>>
>> The only part I'm a bit confused about is what you've said in your =
data=20
>> field there,
>>
>> I'm thinking you mean that for the data_type: "State", you would have =

>> the data entry of "California", right?
>>
>> If so, then yup, you are spot on ^^
>>
>> We use this technique all the time on our side, and its helped=20
>> considerably.  We then use the db_key to reference into a display =
time=20
>> cache that holds all of the display information for the underlying=20
>> object that we would ever want to present to the user.  This allows =
our=20
>> search time index to be very concise, and as a result nearly every=20
>> search we hit it with is subsecond, which is a nice place to be ^^
>>
>> Matt
>>
>> Bill.Chesky@sungard.com wrote:
>>  =20
>>    =20
>>> Matthew,
>>>
>>> Thanks for the reply.  This looks very interesting.  If I'm =
understanding correctly your db_key, data and data_type are Fields =
within the Document, correct?  So is this how you envision it?
>>>
>>> Document: State=3DCalifornia
>>>    Field: 'db_key'=3D'1395' (primary key into relational table, =
correct?)
>>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>    Field: 'data_type' indexed by 'State'
>>>
>>> Document: City=3DSacremento
>>>    Field: 'db_key'=3D'2405'=20
>>>    Field: 'data' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>    Field: 'data_type' indexed by 'City'
>>>
>>> Then my query for all Properties would be:
>>>
>>> 	+data:South
>>>
>>> My query for only 'City' Properties would be:
>>>
>>> 	+data:South +data_type:City
>>>
>>> Is that right?
>>>
>>> I think that would work.  Very nice.  Thank you very much!!!!
>>> --
>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>>  www.sungard.com/energy=20
>>>
>>>
>>> -----Original Message-----
>>> From: Matthew Hall [mailto:mhall@informatics.jax.org]=20
>>> Sent: Friday, June 27, 2008 11:49 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Can you create a Field that is a copy of another Field?
>>>
>>> I'm not sure if this is helpful, but I do something VERY similar to =
this=20
>>> in my project.
>>>
>>> So, for the example you are citing I would design my index as =
follows:
>>>
>>> db_key, data, data_type
>>>
>>> Where the data_type is some sort of value representing the thing =
that's=20
>>> on the left hand side of your property relationship there.
>>>
>>> So, then in order to satisfy your search, the queries become quite =
simple:
>>>
>>> The search for everything simply searches against the data field in =
this=20
>>> index, wheras the search for a specific data_type + searchterm =
becomes a=20
>>> simple boolean query, that has a MUST clause for the data_type =
value.
>>>
>>> As an even BETTER bonus, this will then mean that all of your =
searchable=20
>>> values will now have relevance to each other at scoring time, which =
is=20
>>> quite useful in the long run.
>>>
>>> Hope this helps you out,
>>>
>>> Matt
>>>
>>> Bill.Chesky@sungard.com wrote:
>>>  =20
>>>    =20
>>>      =20
>>>> Grant,
>>>>
>>>> Thanks for the reply.  What we're trying to do is kind of esoteric =
and hard to explain without going into a lot of gory details so I was =
trying to keep it simple.  But I'll try to summarize.
>>>>
>>>> We're trying to index entities in a relational database.  One of =
the entities we're trying to index is something called a Property.  =
Think of a Property kind of like the java.util.Properties class, i.e. a =
name/value pair. So some examples of Properties might be:
>>>>
>>>> State=3DCalifornia
>>>> City=3DSacremento
>>>> ZipCode=3D94203
>>>> StreetName=3DSouth Main
>>>> StreetNumber=3D1234
>>>> Name=3DJoe Smith
>>>>
>>>> Etc., etc.
>>>>
>>>> (Note: this isn't the type of data we're storing... just trying to =
keep it simple.)
>>>>
>>>> Imagine that the above list represents the the set of Properties =
that specify the address for a single person, Joe Smith.  Each Property =
in the set will be indexed by the values on the right-hand side of all =
the other name/value pairs in the set, i.e.: California, Sacremento, =
94203, South, Main, 1234, Joe and Smith.
>>>>
>>>> There are two types of queries that we want to do. =20
>>>> 1) retrieve every Property matching the specified search terms, =
regardless of its left-hand side.  For this we want to create a field in =
EVERY Document called "keywords" and index it by the right-hand side =
values as described above.
>>>> 2) retrieve every Property with a given left-hand side that matches =
the specified search terms.  For example, find all the 'City' Properties =
that match the term 'South'.  For this we want to create a field with =
the name of the left-hand side (e.g. State, City, ZipCode, etc.) but =
only in those Documents that correspond to a Property with that =
left-hand side.  Again this field will be indexed by the right-hand side =
values as described above.
>>>>
>>>> So a couple of examples from the above list might look something =
like:
>>>>
>>>> Document: State=3DCalifornia
>>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>>   Field: 'State' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>>
>>>> Document: City=3DSacremento
>>>>   Field: 'keywords' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>>   Field: 'City' indexed by 'California', 'Sacremento', '94203', =
etc.
>>>>
>>>> Now if I'm interested in all the Properties that match the word =
"South", I search the index on the "keywords" field for the term =
"South".  This will return both documents above. =20
>>>>
>>>> But if I'm only interested in any 'City' Properties that match the =
term 'South' I search the index on the "City" field for the term =
"South".  This will only return the 'City=3DSacremento' document above =
because it's the only Document of the two that even has a 'City' field =
in it.
>>>>
>>>> But in any case, the 'State' field and the 'City' field are indexed =
exactly the same way as the 'keywords' field.  Which is why I was =
wondering if there was a way to just create these fields as copies of =
the 'keywords' field.
>>>>
>>>> Here is a code sample where I'm creating the index.  We're using =
Hibernate search to search the indexes, thus the "id" and =
"_hibernate_class" fields.
>>>>
>>>> Query q =3D em.createQuery("select p from Property p");
>>>>            =20
>>>> List<Property> properties =3D q.getResultList();
>>>>    =20
>>>> for (Property p : properties)
>>>> {
>>>>     // Indexing property.
>>>>     Document doc =3D new Document();
>>>>     doc.add(new Field("id",=20
>>>>                        Integer.toString(p.getId()),=20
>>>>                        Field.Store.YES,=20
>>>>                        Field.Index.UN_TOKENIZED));
>>>>     doc.add(new Field("_hibernate_class",=20
>>>>                       Property.class.getCanonicalName(),=20
>>>>                       Field.Store.YES,=20
>>>>                       Field.Index.UN_TOKENIZED));
>>>>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>>>>     doc.add(new Field("keywords", tokenStream));
>>>>     propertyIndexWriter.addDocument(doc);
>>>>     tokenStream.close();   =20
>>>>     // Here is where I would like to add the second field that is a =
copy
>>>>     // of the "keywords" field just created above.  Note: the call
>>>>     // p.getCharacteristic().getName() is getting the name of the=20
>>>>     // left-hand side of the Property as described above.
>>>>     TokenStream tokenStream =3D new PropertyTokenStream(p);
>>>>     doc.add(new Field(p.getCharacteristic().getName(), =
tokenStream));
>>>>     propertyIndexWriter.addDocument(doc);
>>>>     tokenStream.close();
>>>> }
>>>>
>>>> Hope that clears it up. =20
>>>>
>>>> BTW, in case this seems like a strange way to index things, I will =
also add that we are doing it this way in order to impose a heirarchical =
structure on Properties.  So my example above should really look like =
this:
>>>>
>>>> State=3DCalifornia
>>>>     City=3DSacremento
>>>>         ZipCode=3D94203
>>>>             StreetName=3DSouth Main
>>>>                 StreetNumber=3D1234
>>>>                     Name=3DJoe Smith
>>>>
>>>> Use your imagination to visualize what the tree might look like =
with millions of peoples' addresses.  Now imagine trying to tokenize the =
Document corresponding to "State=3DCalifornia".  Each path thru the tree =
from root (State) to leaf (Name) represents a set of Properties that is =
used to index the "keywords" field in the "State=3DCalifornia" document. =
 In other words it takes a long time to index.  This is why I'm looking =
for a way to just copy one field to another.
>>>>
>>>> There is a lot more to our design to facilitate this hierarchical =
structure but this is probably more than you wanted to know. :)
>>>>
>>>> thanks in advance,
>>>> --
>>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * 1194 =
Oak Valley Drive * Ann Arbor, MI 48103
>>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com
>>>>  www.sungard.com/energy=20
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: Grant Ingersoll [mailto:gsingers@apache.org]=20
>>>> Sent: Friday, June 27, 2008 7:26 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Can you create a Field that is a copy of another =
Field?
>>>>
>>>>
>>>> On Jun 27, 2008, at 12:01 AM, <Bill.Chesky@sungard.com> =
<Bill.Chesky@sungard.com=20
>>>>  > wrote:
>>>>
>>>>  =20
>>>>    =20
>>>>      =20
>>>>        =20
>>>>> Hello Lucene Gurus,
>>>>>
>>>>>
>>>>>
>>>>> I'm new to Lucene so sorry if this question basic or na=EFve.
>>>>>
>>>>>
>>>>>
>>>>> I have a Document to which I want to add a Field named, say, "foo" =
=20
>>>>> that is tokenized, indexed and unstored.  I am using the =20
>>>>> "Field(String name, TokenStream tokenStream)" constructor to =
create =20
>>>>> it.  The TokenStream may take a fairly long time to return all its =
=20
>>>>> tokens.
>>>>>
>>>>>    =20
>>>>>      =20
>>>>>        =20
>>>>>          =20
>>>> Can you share some code here?  What's the reasoning behind using it =
=20
>>>> (not saying it's wrong, just wondering what led you to it)?  Are =
you =20
>>>> just loading it up from a file, string or something or do you have  =

>>>> another reason?
>>>>
>>>>
>>>>  =20
>>>>    =20
>>>>      =20
>>>>        =20
>>>>> Now for querying reasons I want to add another Field named, say, =20
>>>>> "bar", that is tokenized and indexed in exactly the same way as =20
>>>>> "foo".  I could just pass it the same TokenStream that I used to =20
>>>>> create "foo" but since it takes so long to return all its tokens, =
I =20
>>>>> was wondering if there is a way to say, create "bar" as a copy of  =

>>>>> "foo".  I looked thru the javadoc but didn't see anything.
>>>>>
>>>>>
>>>>>    =20
>>>>>      =20
>>>>>        =20
>>>>>          =20
>>>> By exactly the same, do you really mean exactly the same?  What's =
the =20
>>>> point of that?  What are the "querying reasons"?
>>>>
>>>> You may want to look at the TeeTokenFilter and the SinkTokenizer, =
but =20
>>>> I guess I'd like to know more about what's going on before fully =20
>>>> recommending anything.
>>>>
>>>>
>>>>  =20
>>>>    =20
>>>>      =20
>>>>        =20
>>>>> Is this possible in Lucene or do I just have to bite the bullet =20
>>>>> build the new Field using the same TokenStream again?
>>>>>
>>>>> --
>>>>> Bill Chesky * Sr. Software Developer * SunGard * FAME Energy * =
1194 =20
>>>>> Oak Valley Drive * Ann Arbor, MI 48103
>>>>> Tel 734-332-4405 * Fax 734-332-4440 * bill.chesky@sungard.com =
<mailto:bill.chesky@sungard.com=20
>>>>>    =20
>>>>> www.sungard.com/energy <blocked::http://www.sungard.com/energy>
>>>>>
>>>>>
>>>>>
>>>>>    =20
>>>>>      =20
>>>>>        =20
>>>>>          =20
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://www.lucidimagination.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>  =20
>>>>    =20
>>>>      =20
>>>>        =20
>>>  =20
>>>    =20
>>>      =20
>>  =20
>>    =20
>
>  =20

--=20
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 16:35:45 2008
Return-Path: <java-user-return-34717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32454 invoked from network); 30 Jun 2008 16:35:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 16:35:45 -0000
Received: (qmail 14234 invoked by uid 500); 30 Jun 2008 16:35:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14040 invoked by uid 500); 30 Jun 2008 16:35:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14029 invoked by uid 99); 30 Jun 2008 16:35:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 09:35:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 16:34:49 +0000
Received: by yw-out-2324.google.com with SMTP id 3so723856ywj.5
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 09:34:57 -0700 (PDT)
Received: by 10.115.22.1 with SMTP id z1mr4373179wai.99.1214843674163;
        Mon, 30 Jun 2008 09:34:34 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 29sm188283wrl.9.2008.06.30.09.34.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 30 Jun 2008 09:34:33 -0700 (PDT)
Cc: Sascha Fahl <sascha.fahl@googlemail.com>
Message-Id: <11EDA512-DB42-49EB-A2E1-8857C00D2A53@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Problems with reopening IndexReader while pushing documents to the index
Date: Mon, 30 Jun 2008 12:34:32 -0400
References: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


This is spooky: that exception means you have some sort of index  
corruption.  The TermScorer thinks it found a doc ID 37389, which is  
out of bounds.

Reopening IndexReader while IndexWriter is writing should be  
completely fine.

Is this easily reproduced?  If so, if you could narrow it down to  
sequence of added documents, that'd be awesome.

It's very strange that you see the corruption go away.  Can you run  
CheckIndex (java org.apache.lucene.index.CheckIndex <indexDir>) to see  
if it detects any corruption.  In fact, if you could run CheckIndex  
after each session of IndexWriter to isolate which batch of added  
documents causes the corruption, that could help us narrow it down.

Are you changing any of the settings in IndexWriter?  Are you using  
multiple threads?  Which exact JRE version and OS are you using?  Are  
you creating a new index at the start of each run?

Mike

Sascha Fahl wrote:

> Hi,
>
> I see some strange behavoiur of lucene. The following scenario.
> While adding documents to my index (every doc is pretty small, doc- 
> count is about 12000) I have implemented a custom behaviour of  
> flushing and committing documents to the index. Before adding  
> documents to the index I check if wether der ramDocCount has reached  
> a certain number of if the last commit is a while ago. If so i flush  
> the buffered documents and reopen the IndexWriter. So far, so good.  
> Indexing works very well. The problem is that if I send requests  
> with die IndexReader while writing documents with the IndexWriter (I  
> send around 10.000 requests to lucene) I reopen the IndexReader  
> every 100 requests (only for testing) if the IndexReader is not  
> current. The first around 4000 requests work very well, but  
> afterwards I always get the following exception:
>
> java.lang.ArrayIndexOutOfBoundsException: 37389
> 	at org.apache.lucene.search.TermScorer.score(TermScorer.java:126)
> 	at  
> org.apache.lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java: 
> 112)
> 	at  
> org 
> .apache 
> .lucene 
> .search 
> .DisjunctionSumScorer.advanceAfterCurrent(DisjunctionSumScorer.java: 
> 172)
> 	at  
> org 
> .apache 
> .lucene.search.DisjunctionSumScorer.next(DisjunctionSumScorer.java: 
> 146)
> 	at  
> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:319)
> 	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
> 146)
> 	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
> 113)
> 	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
> 	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
> 	at org.apache.lucene.search.Searcher.search(Searcher.java:46)
> 	at org.apache.lucene.search.Searcher.search(Searcher.java:38)
>
> This seems to be a temporarily problem because opening a new  
> IndexReader after all documents were added everything is ok again  
> and the 10.000 requests are all right.
>
> So what could be the problem here?
>
> reg,
> sascha
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 17:17:42 2008
Return-Path: <java-user-return-34718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44172 invoked from network); 30 Jun 2008 17:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 17:17:41 -0000
Received: (qmail 67321 invoked by uid 500); 30 Jun 2008 17:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67295 invoked by uid 500); 30 Jun 2008 17:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67284 invoked by uid 99); 30 Jun 2008 17:17:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 10:17:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 216.239.58.187 as permitted sender)
Received: from [216.239.58.187] (HELO gv-out-0910.google.com) (216.239.58.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 17:16:46 +0000
Received: by gv-out-0910.google.com with SMTP id u5so193003gve.23
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 10:17:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=oH9TyMtGGwVU4VDO5cae3UI5iqLXbHaPSZLRYE7E/mY=;
        b=DTcqo7fC2thALEQgEucw7LY9M7kcbRz8o/iyzR40Vqo708Fpyh8dm3YTcW4oDYsdhN
         /90JGJE2ESdzp/NeTaJXT8M0tEwvLSEcyljKuAFdYKSgsjulO/JW+sZuV5MusWXmmUVq
         7O8UHJ4bm5GnMIJLnlSrRGqQVMc5qxgSW6bdg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aNCA7iKD2MHL4kd06WUCcjZOfkH/phS1tO36HUYm2TgZLlwd4weK3CUzZpxvPK1/T4
         lWpEBQeRxlrY0cR4v2tmyvjlhJOoUXk73WaO6C9Du3m0oe926nnqfLfB3X2MsqvGy80s
         65+a7JLwngtLxCEndOUny0IVrDzS+nuogZY0E=
Received: by 10.125.80.14 with SMTP id h14mr1156356mkl.41.1214846224777;
        Mon, 30 Jun 2008 10:17:04 -0700 (PDT)
Received: by 10.125.137.14 with HTTP; Mon, 30 Jun 2008 10:17:04 -0700 (PDT)
Message-ID: <8837fb770806301017r301bd7c1w6e89140c6ca725f4@mail.gmail.com>
Date: Mon, 30 Jun 2008 10:17:04 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pooling indexReader
In-Reply-To: <DC963EAA-4854-4D37-A830-64A6E11CDD14@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14445_1905526.1214846224783"
References: <8837fb770806290851h4f331b8pb8c6084b9e85f49d@mail.gmail.com>
	 <DC963EAA-4854-4D37-A830-64A6E11CDD14@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14445_1905526.1214846224783
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Mike:
    Thanks for the reply!

    The reason my pattern wouldn't work is because my doClose impl does
nothing to avoid the actual closing and then later my "index updater" will
do the actual closing. The problem is although my doClose is called, the
reference is decremented to 0, and ensureOpen fails upon re-use of the
indexReader. Prior to 2.3.1, my pattern worked because of lack the reference
counting logic.

    I will check on how decRef/incRef would work in my case. Seems a bit
"back-door"-ish.  :)

    Do you think making IndexReader.close non-final is a possibility, cuz
that would solve my problem.

Thanks

-John

On Mon, Jun 30, 2008 at 2:07 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> It's true there is now reference counting logic to determine when it's
> really time to close an IndexReader, but, at that point doClose() is still
> called so your custom logic should still be running, right?  It seems like
> your pattern ought to still be working?
>
> If not, another alternative might be to override decRef() with your own
> logic, or, you could externally hold your own reference to the reader (call
> its incRef()) and then decRef() it when you're done.  That would probably be
> cleanest...
>
> Mike
>
>
> On Jun 29, 2008, at 11:51 AM, John Wang wrote:
>
>  Hi:
>>  I had some code to do indexReader pooling to avoid open and close on a
>> large index when doing lotsa searches. So I had a FilteredIndexReader
>> proxy
>> that overrides the doClose method to do nothing, and when I really want to
>> close it, I call super.doClose(). This patter worked well for me prior to
>> 2.3. With 2.3, the close is doing the reference counting out side of
>> doClose, and since close is final, my pattern is broken.
>>
>>  Am I using the api incorrectly? how would I accomplish this task?
>>
>> Thanks
>>
>> -John
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14445_1905526.1214846224783--

From java-user-return-34719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 21:16:06 2008
Return-Path: <java-user-return-34719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68676 invoked from network); 30 Jun 2008 21:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 21:16:06 -0000
Received: (qmail 76482 invoked by uid 500); 30 Jun 2008 21:16:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76452 invoked by uid 500); 30 Jun 2008 21:16:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76441 invoked by uid 99); 30 Jun 2008 21:16:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 14:16:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 21:15:11 +0000
Received: by py-out-1112.google.com with SMTP id z74so417307pyg.9
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 14:15:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=fg4lWwuwim2pso185KnwlOT3+KPz+2T5qIuyBDrM6GQ=;
        b=G4ti+mI55YNZsuiuoabmgq3YXmcZcG76Ke2KWtEAV5lgdCd5LjxO1FA+X8t05RhcIc
         QgFDblZN5xG+dkwYEgyYITCp4/xlkDsVVXhtZpRHdWdLGkBE3r6/uHOqj+u6MlrDQ4JB
         UKOBlPAw2/lRYFdQd5oLX1QhSm8i0k094wMHM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=lRzSLHkaQw6IpJS3NGoBIY42NBrtFVM0PpGhz0xDBZsxOlvp/n+LQneFzXb/6NeGQi
         NZUQH3OKfQWTci7ZQe7JBQUE3KHK1sJnzckZcmgYlKA1Um1m52lJXbL5YATANUnaPD/y
         gGQePXqUwiymi+/IdwqrzTS1eZujU0ygCo8Bw=
Received: by 10.115.32.1 with SMTP id k1mr4818515waj.107.1214860529159;
        Mon, 30 Jun 2008 14:15:29 -0700 (PDT)
Received: by 10.114.171.7 with HTTP; Mon, 30 Jun 2008 14:15:29 -0700 (PDT)
Message-ID: <16f8407d0806301415xd3b869bs6a3d93c814e4f499@mail.gmail.com>
Date: Mon, 30 Jun 2008 14:15:29 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Nested Proximity searches
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1675_10816511.1214860529138"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1675_10816511.1214860529138
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is it possible to do nested proximity searches with lucene?

i.e. can I say I want a to be within 1 word of b and then that group to be
within 4 words of c? The syntax ""a b"~1" c"~4 doesn't seem to work (since
it treats the first two quotes as a pair and the later 2 as another pair).

------=_Part_1675_10816511.1214860529138--

From java-user-return-34720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 22:16:28 2008
Return-Path: <java-user-return-34720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 706 invoked from network); 30 Jun 2008 22:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 22:16:28 -0000
Received: (qmail 42754 invoked by uid 500); 30 Jun 2008 22:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42723 invoked by uid 500); 30 Jun 2008 22:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42712 invoked by uid 99); 30 Jun 2008 22:16:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 15:16:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 22:15:32 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1377810wra.21
        for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 15:15:50 -0700 (PDT)
Received: by 10.90.115.17 with SMTP id n17mr5655841agc.57.1214864150687;
        Mon, 30 Jun 2008 15:15:50 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id m6sm451544wrm.35.2008.06.30.15.15.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 30 Jun 2008 15:15:50 -0700 (PDT)
Message-Id: <AC99ECE8-373A-48EE-819D-F12C6EE7AC7B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770806301017r301bd7c1w6e89140c6ca725f4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Pooling indexReader
Date: Mon, 30 Jun 2008 18:15:49 -0400
References: <8837fb770806290851h4f331b8pb8c6084b9e85f49d@mail.gmail.com> <DC963EAA-4854-4D37-A830-64A6E11CDD14@mikemccandless.com> <8837fb770806301017r301bd7c1w6e89140c6ca725f4@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


I don't see why close must be final; I think we could/should relax that?

But: I think your situation is perfect for incRef().  That method  
declares that someone is still using the IndexReader (until the  
corresponding decRef() is called).

Mike

John Wang wrote:

> Hi Mike:
>    Thanks for the reply!
>
>    The reason my pattern wouldn't work is because my doClose impl does
> nothing to avoid the actual closing and then later my "index  
> updater" will
> do the actual closing. The problem is although my doClose is called,  
> the
> reference is decremented to 0, and ensureOpen fails upon re-use of the
> indexReader. Prior to 2.3.1, my pattern worked because of lack the  
> reference
> counting logic.
>
>    I will check on how decRef/incRef would work in my case. Seems a  
> bit
> "back-door"-ish.  :)
>
>    Do you think making IndexReader.close non-final is a possibility,  
> cuz
> that would solve my problem.
>
> Thanks
>
> -John
>
> On Mon, Jun 30, 2008 at 2:07 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> It's true there is now reference counting logic to determine when  
>> it's
>> really time to close an IndexReader, but, at that point doClose()  
>> is still
>> called so your custom logic should still be running, right?  It  
>> seems like
>> your pattern ought to still be working?
>>
>> If not, another alternative might be to override decRef() with your  
>> own
>> logic, or, you could externally hold your own reference to the  
>> reader (call
>> its incRef()) and then decRef() it when you're done.  That would  
>> probably be
>> cleanest...
>>
>> Mike
>>
>>
>> On Jun 29, 2008, at 11:51 AM, John Wang wrote:
>>
>> Hi:
>>> I had some code to do indexReader pooling to avoid open and close  
>>> on a
>>> large index when doing lotsa searches. So I had a  
>>> FilteredIndexReader
>>> proxy
>>> that overrides the doClose method to do nothing, and when I really  
>>> want to
>>> close it, I call super.doClose(). This patter worked well for me  
>>> prior to
>>> 2.3. With 2.3, the close is doing the reference counting out side of
>>> doClose, and since close is final, my pattern is broken.
>>>
>>> Am I using the api incorrectly? how would I accomplish this task?
>>>
>>> Thanks
>>>
>>> -John
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jun 30 23:14:33 2008
Return-Path: <java-user-return-34721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30697 invoked from network); 30 Jun 2008 23:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jun 2008 23:14:33 -0000
Received: (qmail 91251 invoked by uid 500); 30 Jun 2008 23:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91221 invoked by uid 500); 30 Jun 2008 23:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91210 invoked by uid 99); 30 Jun 2008 23:14:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 16:14:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 23:13:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KDSZH-00082H-Ns
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 16:13:55 -0700
Message-ID: <18206216.post@talk.nabble.com>
Date: Mon, 30 Jun 2008 16:13:55 -0700 (PDT)
From: Toph <christopher.m.collins@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Incorrect Token Offset when using multiple fieldable instance
In-Reply-To: <03C5EA23-DA43-4C67-B068-5F7CDD073ECF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: christopher.m.collins@gmail.com
References: <47CD8F40.9010307@deri.org> <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com> <47CE6D5E.8060702@deri.org> <03C5EA23-DA43-4C67-B068-5F7CDD073ECF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Interesting discussion... glad I'm not the only one with this challenge.


Michael McCandless-2 wrote:
> 
> EG, if you use Highlighter on a  
> multi-valued field indexed with stored field & term vectors and say  
> the first field ended with a stop word that was filtered out, then  
> your offsets will be off and the wrong parts will be highlighted 
> 

I found this post by attempting just this exact thing, and I can confirm,
that yes, the offsets are incorrect for all but the first instance of the
field in the document, so they are useless for highlighting.  I tried
concatenating all instances of the fields, but of course if an instance of
the field ended with punctuation or a stop word, those characters were not
added to the offset.  I'll try the suggested workaround re adding a false
term at the end of each field, but a better API would be if "offset" became
a pair of ints, first being the index of the Field for getFields(name) and
the second being the offset in that instance of the field.

Christopher
-- 
View this message in context: http://www.nabble.com/Incorrect-Token-Offset-when-using-multiple-fieldable-instance-tp15833468p18206216.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


